// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISCachedService":function(){define("exports ../../chunks/tslib.es6 ../../geometry ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../support/TileInfo ../support/TileInfoTilemapCache ../support/TilemapCache ../../geometry/SpatialReference".split(" "),function(b,a,u,e,h,g,l,n,d,f,r,y,B){b.ArcGISCachedService=
x=>{x=class extends x{constructor(){super(...arguments);this.copyright=null;this.maxScale=this.minScale=0;this.tilemapCache=this.tileInfo=this.spatialReference=null}destroy(){this.tilemapCache?.destroy?.()}readMinScale(t,z){return null!=z.minLOD&&null!=z.maxLOD?t:0}readMaxScale(t,z){return null!=z.minLOD&&null!=z.maxLOD?t:0}get supportsBlankTile(){return 10.2<=this.version}readTilemapCache(t,z,m){t=z.capabilities?.includes("Tilemap");let {minLOD:A,maxLOD:C,minScale:k,maxScale:p}=z;if(null==A&&null==
C&&0!==k&&0!==p){k=k?Math.round(1E4*k)/1E4:Math.round(1E4*z.tileInfo.lods[0].scale)/1E4;p=p?Math.round(1E4*p)/1E4:Math.round(1E4*z.tileInfo.lods[z.tileInfo.lods.length-1].scale)/1E4;for(var v of z.tileInfo.lods){const E=Math.round(1E4*v.scale)/1E4;A=E>=k?v.level:A;C=E>=p?v.level:C}}return t?new y.TilemapCache({layer:this,minLOD:A,maxLOD:C}):z.tileInfo?(v=new f,v.read(z.tileInfo,m),new r(v,A,C)):null}};a.__decorate([e.property({json:{read:{source:"copyrightText"}}})],x.prototype,"copyright",void 0);
a.__decorate([e.property()],x.prototype,"minScale",void 0);a.__decorate([n.reader("service","minScale")],x.prototype,"readMinScale",null);a.__decorate([e.property()],x.prototype,"maxScale",void 0);a.__decorate([n.reader("service","maxScale")],x.prototype,"readMaxScale",null);a.__decorate([e.property({type:B})],x.prototype,"spatialReference",void 0);a.__decorate([e.property({readOnly:!0})],x.prototype,"supportsBlankTile",null);a.__decorate([e.property({type:f})],x.prototype,"tileInfo",void 0);a.__decorate([e.property()],
x.prototype,"tilemapCache",void 0);a.__decorate([n.reader("service","tilemapCache",["capabilities","tileInfo"])],x.prototype,"readTilemapCache",null);a.__decorate([e.property()],x.prototype,"version",void 0);return x=a.__decorate([d.subclass("esri.layers.mixins.ArcGISCachedService")],x)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TileInfo":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(b,a,u,e,h,g,l,n,d,f,r,y,B,x,t,z,m,A){var C;a=new a.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});u=C=class extends u.JSONSupport{static create(k={}){const {resolutionFactor:p=1,scales:v,size:E=256,spatialReference:G=B.WebMercator,numLODs:J=24}=k;if(!t.isValid(G)){k=[];if(v)for(var I=0;I<v.length;I++){var L=
v[I];k.push(new m({level:I,scale:L,resolution:L}))}else for(I=5E-4,L=J-1;0<=L;L--)k.unshift(new m({level:L,scale:I,resolution:I})),I*=2;return new C({dpi:96,lods:k,origin:new y(0,0,G),size:[E,E],spatialReference:G})}I=t.getInfo(G);k=k.origin?new y({x:k.origin.x,y:k.origin.y,spatialReference:G}):I?new y({x:I.origin[0],y:I.origin[1],spatialReference:G}):new y({x:0,y:0,spatialReference:G});I=1/(39.37*e.getMetersPerUnitForSR(G)*96);L=[];if(v)for(var N=0;N<v.length;N++){var O=v[N];L.push(new m({level:N,
scale:O,resolution:O*I}))}else{var S=t.isGeographic(G)?512/E*5.916575275917094E8:256/E*5.91657527591555E8;N=Math.ceil(J/p);L.push(new m({level:0,scale:S,resolution:S*I}));for(O=1;O<N;O++)S/=2**p,L.push(new m({level:O,scale:S,resolution:S*I}))}return new C({dpi:96,lods:L,origin:k,size:[E,E],spatialReference:G})}constructor(k){super(k);this.dpi=96;this.spatialReference=this.size=this.origin=this.format=null}get isWrappable(){const {spatialReference:k,origin:p}=this;if(k&&p){const v=t.getInfo(k);return k.isWrappable&&
!!v&&Math.abs(v.origin[0]-p.x)<=v.dx}return!1}readOrigin(k,p){return y.fromJSON({spatialReference:p.spatialReference,...k})}set lods(k){const p=[],v=this._levelToLOD={};k&&k.forEach(E=>{p.push(E.scale);v[E.level]=E});this._set("scales",p);this._set("lods",k);this._initializeUpsampleLevels()}readSize(k,p){return[p.cols,p.rows]}writeSize(k,p){p.cols=k[0];p.rows=k[1]}zoomToScale(k){const p=this.scales;if(0>=k)return p[0];if(k>=p.length-1)return p[p.length-1];const v=Math.floor(k);return p[v]/(p[v]/p[v+
1])**(k-v)}scaleToZoom(k){const p=this.scales,v=p.length-1;let E=0;for(;E<v;E++){const G=p[E],J=p[E+1];if(G<=k)break;if(J===k)return E+1;if(G>k&&J<k)return E+Math.log(G/k)/Math.log(G/J)}return E}snapScale(k,p=.95){k=this.scaleToZoom(k);return k%Math.floor(k)>=p?this.zoomToScale(Math.ceil(k)):this.zoomToScale(Math.floor(k))}tileAt(k,p,v,E){var G=this.lodAt(k);if(!G)return null;let J;if("number"===typeof p)J=p,p=v;else{if(t.equals(p.spatialReference,this.spatialReference))J=p.x,p=p.y;else{E=z.project(p,
this.spatialReference);if(null==E)return null;J=E.x;p=E.y}E=v}v=G.resolution*this.size[0];G=G.resolution*this.size[1];E||(E=new A.TileKey(null,0,0,0,x.create()));E.level=k;E.row=Math.floor((this.origin.y-p)/G+.001);E.col=Math.floor((J-this.origin.x)/v+.001);this.updateTileInfo(E);return E}updateTileInfo(k,p=C.ExtrapolateOptions.NONE){var v=this.lodAt(k.level);v||p!==C.ExtrapolateOptions.POWER_OF_TWO||(p=this.lods[this.lods.length-1],p.level<k.level&&(v=p));if(v){var E=k.level-v.level;p=v.resolution*
this.size[0]/2**E;v=v.resolution*this.size[1]/2**E;k.id=`${k.level}/${k.row}/${k.col}`;k.extent||(k.extent=x.create());k.extent[0]=this.origin.x+k.col*p;k.extent[1]=this.origin.y-(k.row+1)*v;k.extent[2]=k.extent[0]+p;k.extent[3]=k.extent[1]+v}}upsampleTile(k){const p=this._upsampleLevels[k.level];if(!p||-1===p.parentLevel)return!1;k.level=p.parentLevel;k.row=Math.floor(k.row/p.factor+.001);k.col=Math.floor(k.col/p.factor+.001);this.updateTileInfo(k);return!0}getTileBounds(k,p){var v=this.lodAt(p.level);
if(null==v)return null;var {resolution:E}=v;v=E*this.size[0];E*=this.size[1];k[0]=this.origin.x+p.col*v;k[1]=this.origin.y-(p.row+1)*E;k[2]=k[0]+v;k[3]=k[1]+E;return k}lodAt(k){return this._levelToLOD?.[k]??null}clone(){return C.fromJSON(this.write({}))}getOrCreateCompatible(k,p){if(256===this.size[0]&&256===this.size[1])return 256===k?this:null;const v=[],E=this.lods.length;for(let G=0;G<E;G++){const J=this.lods[G];v.push(new m({level:J.level,scale:J.scale,resolution:J.resolution*p}))}return new C({size:[k,
k],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:v})}_initializeUpsampleLevels(){const k=this.lods;this._upsampleLevels=[];let p=null;for(let v=0;v<k.length;v++){const E=k[v];this._upsampleLevels[E.level]={parentLevel:p?p.level:-1,factor:p?p.resolution/E.resolution:0};p=E}}};b.__decorate([h.property({type:Number,json:{write:!0}})],u.prototype,"compressionQuality",void 0);b.__decorate([h.property({type:Number,
json:{write:!0}})],u.prototype,"dpi",void 0);b.__decorate([h.property({type:String,json:{read:a.read,write:a.write,origins:{"web-scene":{read:!1,write:!1}}}})],u.prototype,"format",void 0);b.__decorate([h.property({readOnly:!0})],u.prototype,"isWrappable",null);b.__decorate([h.property({type:y,json:{write:!0}})],u.prototype,"origin",void 0);b.__decorate([d.reader("origin")],u.prototype,"readOrigin",null);b.__decorate([h.property({type:[m],value:null,json:{write:!0}})],u.prototype,"lods",null);b.__decorate([h.property({readOnly:!0})],
u.prototype,"scales",void 0);b.__decorate([h.property({cast:k=>Array.isArray(k)?k:"number"===typeof k?[k,k]:[256,256]})],u.prototype,"size",void 0);b.__decorate([d.reader("size",["rows","cols"])],u.prototype,"readSize",null);b.__decorate([r.writer("size",{cols:{type:g.Integer},rows:{type:g.Integer}})],u.prototype,"writeSize",null);b.__decorate([h.property({type:B,json:{write:!0}})],u.prototype,"spatialReference",void 0);u=C=b.__decorate([f.subclass("esri.layers.support.TileInfo")],u);(function(k){k=
k.ExtrapolateOptions||(k.ExtrapolateOptions={});k[k.NONE=0]="NONE";k[k.POWER_OF_TWO=1]="POWER_OF_TWO"})(u||(u={}));return u})},"esri/layers/support/LOD":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,u,e,h,g,l){var n;a=n=class extends a.JSONSupport{constructor(d){super(d);this.cols=null;this.level=
0;this.origin=this.levelValue=null;this.resolution=0;this.rows=null;this.scale=0}clone(){return new n({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};b.__decorate([u.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],a.prototype,"cols",void 0);b.__decorate([u.property({type:e.Integer,json:{write:!0}})],a.prototype,"level",void 0);b.__decorate([u.property({type:String,json:{write:!0}})],
a.prototype,"levelValue",void 0);b.__decorate([u.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],a.prototype,"origin",void 0);b.__decorate([u.property({type:Number,json:{write:!0}})],a.prototype,"resolution",void 0);b.__decorate([u.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],a.prototype,"rows",void 0);b.__decorate([u.property({type:Number,json:{write:!0}})],a.prototype,"scale",void 0);
return a=n=b.__decorate([l.subclass("esri.layers.support.LOD")],a)})},"esri/layers/support/TileKey":function(){define(["exports"],function(b){class a{constructor(u,e,h,g,l){this.id=u;this.level=e;this.row=h;this.col=g;this.extent=l}}b.TileKey=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TileInfoTilemapCache":function(){define(["../../core/Error","../../core/promiseUtils"],function(b,a){class u{constructor(e,h=0,g=e.lods[e.lods.length-1].level){this.tileInfo=
e;this.minLOD=h;this.maxLOD=g;e.lodAt(h)||(this.minLOD=e.lods[0].level);e.lodAt(g)||(this.maxLOD=e.lods[e.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(e,h,g){const l=this.tileInfo?.lodAt(e);return!l||e<this.minLOD||e>this.maxLOD?"unavailable":l.cols&&l.rows?g>=l.cols[0]&&g<=l.cols[1]&&h>=l.rows[0]&&h<=l.rows[1]?"unknown":"unavailable":"unknown"}async fetchAvailability(e,
h,g,l){await a.waitTick(l);l=this.getAvailability(e,h,g);if("unavailable"===l)throw new b("tile-map:tile-unavailable","Tile is not available",{level:e,row:h,col:g});return l}async fetchAvailabilityUpsample(e,h,g,l,n){await a.waitTick(n);l.level=e;l.row=h;l.col=g;const d=this.tileInfo;d.updateTileInfo(l);return this.fetchAvailability(e,h,g,n).catch(f=>{if(a.isAbortError(f))throw f;if(d.upsampleTile(l))return this.fetchAvailabilityUpsample(l.level,l.row,l.col,l,n);throw f;})}}return u})},"esri/layers/support/TilemapCache":function(){define("exports ../../chunks/tslib.es6 ../../request ../../core/Accessor ../../core/ByteSizeUnit ../../core/Error ../../core/handleUtils ../../core/LRUCache ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/scheduling ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./TileKey ./Tilemap".split(" "),
function(b,a,u,e,h,g,l,n,d,f,r,y,B,x,t,z,m,A,C,k){var p;b.TilemapCache=p=class extends e{constructor(v){super(v);this._pendingTilemapRequests={};this.request=u;this.size=32;this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new n.LRUCache(2*h.ByteSizeUnit.MEGABYTES);this.addHandles([r.watch(()=>{const {layer:v}=this;return[v?.parsedUrl,v?.tileServers,v?.apiKey,v?.customParameters]},()=>this._initializeTilemapDefinition(),r.initial)])}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??
this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}fetchTilemap(v,E,G,J){if(!this.layer.tileInfo.lodAt(v)||v<this.effectiveMinLOD||v>this.effectiveMaxLOD)return Promise.reject(new g("tilemap-cache:level-unavailable",`Level ${v} is unavailable in the service`));const I=this._tmpTilemapDefinition;if(v=this._tilemapFromCache(v,E,G,I))return Promise.resolve(v);const L=J?.signal;J={...J,signal:null};return new Promise((N,O)=>{f.onAbort(L,()=>O(f.createAbortError()));const S=k.tilemapDefinitionId(I);
let U=this._pendingTilemapRequests[S];if(!U){U=k.Tilemap.fromDefinition(I,J).then(Y=>{this._tilemapCache.put(S,Y,Y.byteSize);return Y});const aa=()=>{delete this._pendingTilemapRequests[S]};this._pendingTilemapRequests[S]=U;U.then(aa,aa)}U.then(N,O)})}getAvailability(v,E,G){return!this.layer.tileInfo.lodAt(v)||v<this.effectiveMinLOD||v>this.effectiveMaxLOD?"unavailable":(v=this._tilemapFromCache(v,E,G,this._tmpTilemapDefinition))?v.getAvailability(E,G):"unknown"}fetchAvailability(v,E,G,J){return!this.layer.tileInfo.lodAt(v)||
v<this.effectiveMinLOD||v>this.effectiveMaxLOD?Promise.reject(new g("tile-map:tile-unavailable","Tile is not available",{level:v,row:E,col:G})):this.fetchTilemap(v,E,G,J).catch(I=>I).then(I=>{if(I instanceof k.Tilemap){I=I.getAvailability(E,G);if("unavailable"===I)throw new g("tile-map:tile-unavailable","Tile is not available",{level:v,row:E,col:G});return I}if(f.isAbortError(I))throw I;return"unknown"})}fetchAvailabilityUpsample(v,E,G,J,I){J.level=v;J.row=E;J.col=G;const L=this.layer.tileInfo;L.updateTileInfo(J);
const N=this.fetchAvailability(v,E,G,I).catch(O=>{if(f.isAbortError(O))throw O;if(L.upsampleTile(J))return this.fetchAvailabilityUpsample(J.level,J.row,J.col,J,I);throw O;});this._fetchAvailabilityUpsamplePrefetch(J.id,v,E,G,I,N);return N}async _fetchAvailabilityUpsamplePrefetch(v,E,G,J,I,L){if(this._prefetchingEnabled&&null!=v){var N=`prefetch-${v}`;if(!this.hasHandles(N)){var O=new AbortController;L.then(()=>O.abort(),()=>O.abort());var S=!1;L=l.makeHandle(()=>{S||(S=!0,O.abort())});this.addHandles(L,
N);await y.waitTicks(10,O.signal).catch(()=>{});S||(S=!0,this.removeHandles(N));if(!f.isAborted(O))for(v=new C.TileKey(v,E,G,J),I={...I,signal:O.signal},E=this.layer.tileInfo,G=0;p._prefetches.length<p._maxPrefetch&&E.upsampleTile(v);++G){const U=this.fetchAvailability(v.level,v.row,v.col,I);p._prefetches.push(U);J=()=>{p._prefetches.removeUnordered(U)};U.then(J,J)}}}}_initializeTilemapDefinition(){if(this.layer.parsedUrl){var {parsedUrl:v,apiKey:E,customParameters:G}=this.layer;this._tilemapCache.clear();
this._tmpTilemapDefinition={service:{url:v.path,query:B.objectToQuery({...v.query,...G,token:E??v.query?.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}}_tilemapFromCache(v,E,G,J){J.level=v;J.row=E-E%this.size;J.col=G-G%this.size;v=k.tilemapDefinitionId(J);return this._tilemapCache.get(v)}get test(){const v=this;return{get prefetchingEnabled(){return v._prefetchingEnabled},set prefetchingEnabled(E){v._prefetchingEnabled=E},hasTilemap(E,
G,J){return!!v._tilemapFromCache(E,G,J,v._tmpTilemapDefinition)}}}};b.TilemapCache._maxPrefetch=4;b.TilemapCache._prefetches=new d({initialSize:p._maxPrefetch});a.__decorate([x.property({constructOnly:!0})],b.TilemapCache.prototype,"layer",void 0);a.__decorate([x.property({constructOnly:!0})],b.TilemapCache.prototype,"minLOD",void 0);a.__decorate([x.property({constructOnly:!0})],b.TilemapCache.prototype,"maxLOD",void 0);a.__decorate([x.property({constructOnly:!0})],b.TilemapCache.prototype,"request",
void 0);a.__decorate([x.property({constructOnly:!0})],b.TilemapCache.prototype,"size",void 0);b.TilemapCache=p=a.__decorate([A.subclass("esri.layers.support.TilemapCache")],b.TilemapCache);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/ByteSizeUnit":function(){define(["exports"],function(b){b.ByteSizeUnit=void 0;var a=b.ByteSizeUnit||(b.ByteSizeUnit={});a[a.KILOBYTES=1024]="KILOBYTES";a[a.MEGABYTES=1048576]="MEGABYTES";a[a.GIGABYTES=1073741824]="GIGABYTES";Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Tilemap":function(){define("exports ../../request ../../core/arrayUtils ../../core/Error ../../core/lang ../../core/typedArrayUtil ../../geometry/support/UintArray".split(" "),function(b,a,u,e,h,g,l){function n(f){if(f.service.tileServers?.length){var r=f.service.tileServers;r=`${r&&r.length?r[f.row%r.length]:f.service.url}/tilemap/${f.level}/${f.row}/${f.col}/${f.width}/${f.height}`}else r=`${f.service.url}/tilemap/${f.level}/${f.row}/${f.col}/${f.width}/${f.height}`;
(f=f.service.query)&&(r=`${r}?${f}`);return r}class d{constructor(f){this._validateJSON(f);const {location:r,data:y}=f;this.location=Object.freeze(h.clone(r));let B=f=!0;const x=l.newUintArray(Math.ceil(this.location.width*this.location.height/32));let t=0;for(let z=0;z<y.length;z++){const m=z%32;y[z]?(B=!1,x[t]|=1<<m):f=!1;31===m&&++t}B?(this._availability="unavailable",this.byteSize=40):f?(this._availability="available",this.byteSize=40):(this._availability=x,this.byteSize=40+g.estimateSize(x))}getAvailability(f,
r){if("unavailable"===this._availability||"available"===this._availability)return this._availability;f=(f-this.location.top)*this.location.width+(r-this.location.left);r=f>>5;const y=this._availability;return 0>r||r>y.length?"unknown":y[r]&1<<f%32?"available":"unavailable"}static fromDefinition(f,r){const y=f.service.request||a,{row:B,col:x,width:t,height:z}=f,m={query:{f:"json"}};r=r?{...m,...r}:m;return y(n(f),r).then(A=>A.data).catch(A=>{if(A&&A.details&&422===A.details.httpStatus)return{location:{top:B,
left:x,width:t,height:z},valid:!0,data:u.constant(t*z,0)};throw A;}).then(A=>{if(A.location&&(A.location.top!==B||A.location.left!==x||A.location.width!==t||A.location.height!==z))throw new e("tilemap:location-mismatch","Tilemap response for different location than requested",{response:A,definition:{top:B,left:x,width:t,height:z}});return d.fromJSON(A)})}static fromJSON(f){return Object.freeze(new d(f))}_validateJSON(f){if(!f?.location)throw new e("tilemap:missing-location","Location missing from tilemap response");
if(!1===f.valid)throw new e("tilemap:invalid","Tilemap response was marked as invalid");if(!f.data)throw new e("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(f.data))throw new e("tilemap:data-mismatch","Data must be an array of numbers");if(f.data.length!==f.location.width*f.location.height)throw new e("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");}}b.Tilemap=d;b.tilemapDefinitionId=function(f){return`${f.level}/${f.row}/${f.col}/${f.width}/${f.height}`};
Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/UintArray":function(){define(["exports","../../core/typedArrayUtil"],function(b,a){b.newUintArray=function(u,e=!1){return u<=a.nativeArrayMaxSize?e?Array(u).fill(0):Array(u):new Uint32Array(u)};b.uintArrayFrom=function(u){return(a.isArray(u)?u.length:u.byteLength/8)<=a.nativeArrayMaxSize?Array.from(u):new Uint32Array(u)};b.uintSubArray=function(u,e,h){return Array.isArray(u)?u.slice(e,e+h):u.subarray(e,e+h)};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/imageUtils":function(){define(["exports"],function(b){let a=null;b.checkWebPSupport=function(u){if(a)return a;const e={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA\x3d\x3d",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA\x3d\x3d",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};
return a=new Promise(h=>{const g=new Image;g.onload=()=>{g.onload=g.onerror=null;h(0<g.width&&0<g.height)};g.onerror=()=>{g.onload=g.onerror=null;h(!1)};g.src="data:image/webp;base64,"+e[u]})};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/SpriteSource":function(){define(["../../request","../../core/Error","../../core/Logger","../../core/typedArrayUtil","../../core/urlUtils"],function(b,a,u,e,h){function g(n){var d=document.createElement("canvas");const f=d.getContext("2d");
d.width=n.width;d.height=n.height;f.drawImage(n,0,0,n.width,n.height);d=f.getImageData(0,0,n.width,n.height);return{width:n.width,height:n.height,data:new Uint8Array(d.data)}}class l{constructor(n,d){this._spriteSource=n;this._maxTextureSize=d;this.devicePixelRatio=1;this._spriteImageFormat="png";this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded";"url"===n.type&&n.spriteFormat&&(this._spriteImageFormat=n.spriteFormat);n.pixelRatio&&(this.devicePixelRatio=
n.pixelRatio);this.baseURL=n.spriteUrl}get spriteNames(){const n=[];for(const d in this._spritesData)n.push(d);n.sort();return n}getSpriteInfo(n){return this._spritesData?this._spritesData[n]:null}async load(n){if(this.baseURL){this.loadStatus="loading";try{await this._loadSprites(n),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus="failed"}async _loadSprites(n){this._isRetina=1.15<this.devicePixelRatio;const {width:d,height:f,data:r,json:y}=await this._getSpriteData(this._spriteSource,
n);if((n=Object.keys(y))&&0!==n.length&&r){this._spritesData=y;this.width=d;this.height=f;n=Math.max(this._maxTextureSize,4096);if(d>n||f>n)throw n=`Sprite resource for style ${this.baseURL} is bigger than the maximum allowed of ${n} pixels}`,u.getLogger("esri.layers.support.SpriteSource").error(n),new a("SpriteSource",n);for(let B=0;B<r.length;B+=4)n=r[B+3]/255,r[B]*=n,r[B+1]*=n,r[B+2]*=n;this.image=r}else this._spritesData=this.image=null,this.width=this.height=0}async _getSpriteData(n,d){if("image"===
n.type){if(1.15>this.devicePixelRatio){if(!n.spriteSource1x)throw new a("SpriteSource","no image data provided for low resolution sprites!");d=n.spriteSource1x.image;n=n.spriteSource1x.json}else{if(!n.spriteSource2x)throw new a("SpriteSource","no image data provided for high resolution sprites!");d=n.spriteSource2x.image;n=n.spriteSource2x.json}return"width"in d&&"height"in d&&"data"in d&&(e.isArrayBuffer(d.data)||e.isUint8ClampedArray(d.data))?{width:d.width,height:d.height,data:new Uint8Array(d.data),
json:n}:{...g(d),json:n}}n=h.urlToObject(this.baseURL);const f=n.query?"?"+h.objectToQuery(n.query):"",r=this._isRetina?"@2x":"",y=`${n.path}${r}.${this._spriteImageFormat}${f}`,[B,x]=await Promise.all([b(`${n.path}${r}.json${f}`,d),b(y,{responseType:"image",...d})]);return{...g(x.data),json:B.data}}}return l})},"esri/layers/support/vectorTileLayerLoader":function(){define("exports ../../request ../../core/lang ../../core/promiseUtils ../../core/urlUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../views/2d/engine/vectorTiles/style/VectorTileSource".split(" "),
function(b,a,u,e,h,g,l,n){function d(...x){let t=void 0;for(const z of x)null!=z&&(h.isProtocolRelative(z)?t&&(t=t.split("://")[0]+":"+z.trim()):t=h.isAbsolute(z)?z:h.join(t,z));return t?h.removeTrailingSlash(t):void 0}async function f(x,t,z,m,A){e.throwIfAborted(A);let C,k;if("string"===typeof z){z=h.normalize(z);var p=await a(z,{...A,responseType:"json",query:{f:"json",...A?.query}});p.ssl&&(C&&(C=C.replace(/^http:/i,"https:")),k&&(k=k.replace(/^http:/i,"https:")));k=C=z}else null!=z&&(p={data:z},
C=z.jsonUrl||null,k=m);if((p=p?.data)&&"sources"in p&&p.sources)return x.styleUrl=C||null,y(x,p,k,A);if(!(p&&"sources"in p&&p.sources))return x.sourceUrl?B(x,p,k,!1,t,A):(x.sourceUrl=C||null,B(x,p,k,!0,t,A));throw Error("You must specify the URL or the JSON for a service or for a style.");}function r(x){return"object"===typeof x&&!!x&&"tilejson"in x&&null!=x.tilejson}async function y(x,t,z,m){z=z?h.removeFile(z):h.getAppBaseUrl();x.styleBase=z;x.style=t;t["sprite-format"]&&"webp"===t["sprite-format"].toLowerCase()&&
(x.spriteFormat="webp");const A=[];if(t.sources&&t.sources.esri){const C=t.sources.esri;C.url?await f(x,"esri",d(z,C.url),void 0,m):A.push(f(x,"esri",C,z,m))}for(const C of Object.keys(t.sources))"esri"!==C&&"vector"===t.sources[C].type&&(t.sources[C].url?A.push(f(x,C,d(z,t.sources[C].url),void 0,m)):t.sources[C].tiles&&A.push(f(x,C,t.sources[C],z,m)));await Promise.all(A)}async function B(x,t,z,m,A,C){z=z?h.removeTrailingSlash(z)+"/":h.getAppBaseUrl();if(t.hasOwnProperty("tileInfo"))var k=t;else{k=
{xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100,latestWkid:3857}};var p=null;if(r(t)){var {bounds:v}=t;v&&(p=l.geographicToWebMercator({x:v[0],y:v[1],spatialReference:u.clone(g.WGS84)}),v=l.geographicToWebMercator({x:v[2],y:v[3],spatialReference:u.clone(g.WGS84)}),p={xmin:p.x,ymin:p.y,xmax:v.x,ymax:v.y,spatialReference:u.clone(g.WebMercator)})}null===p&&(p=k);v=78271.51696400007;var E=2.958287637957775E8,G=[],
J=t.hasOwnProperty("maxzoom")&&null!=t.maxzoom?+t.maxzoom:22;for(let I=0;I<=J;I++)G.push({level:I,scale:E,resolution:v}),v/=2,E/=2;k={capabilities:"TilesOnly",initialExtent:p,fullExtent:k,minScale:0,maxScale:0,tiles:t.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:G,spatialReference:u.clone(g.WebMercator)}}}p=new n(A,h.addQueryParameters(z,C?.query??{}),k);if(!m&&x.primarySourceName in x.sourceNameToSource){v=x.sourceNameToSource[x.primarySourceName];
if(!v.isCompatibleWith(p))return;null!=p.fullExtent&&(null!=v.fullExtent?v.fullExtent.union(p.fullExtent):v.fullExtent=p.fullExtent.clone());v.tileInfo&&p.tileInfo&&v.tileInfo.lods.length<p.tileInfo.lods.length&&(v.tileInfo=p.tileInfo)}m&&(x.sourceBase=z,x.source=t,x.validatedSource=k,x.primarySourceName=A);x.sourceNameToSource[A]=p;if(!r(x)&&"defaultStyles"in t&&!x.style){if(null==t.defaultStyles)throw Error();return"string"===typeof t.defaultStyles?f(x,"",d(z,t.defaultStyles,"root.json"),void 0,
C):f(x,"",t.defaultStyles,d(z,"root.json"),C)}}b.loadMetadata=async function(x,t){const z={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[m,A]="string"===typeof x?[x,null]:[null,x.jsonUrl];await f(z,"esri",x,A,t);return{layerDefinition:z.validatedSource,url:m,serviceUrl:z.sourceUrl,style:z.style,styleUrl:z.styleUrl,spriteUrl:z.style.sprite&&d(z.styleBase,z.style.sprite),spriteFormat:z.spriteFormat,
glyphsUrl:z.style.glyphs&&d(z.styleBase,z.style.glyphs),sourceNameToSource:z.sourceNameToSource,primarySourceName:z.primarySourceName}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/VectorTileSource":function(){define("../../../../../core/lang ../../../../../core/urlUtils ../../../../../geometry/Extent ../../../../../layers/support/TileInfo ../../../../../layers/support/TilemapCache ../TilemapIndex ../TilemapRequest ./VectorTilesRequestManager".split(" "),
function(b,a,u,e,h,g,l,n){class d{constructor(f,r,y){this.initialExtent=this.fullExtent=this.capabilities=this.tileInfo=this.tilemap=null;this.name=f;this.sourceUrl=r;f=a.urlToObject(this.sourceUrl);r=b.clone(y);var B=r.tiles;if(f)for(var x=0;x<B.length;x++){var t=a.urlToObject(B[x]);t&&(a.isAbsolute(t.path)||(t.path=a.join(f.path,t.path)),B[x]=a.addQueryParameters(t.path,{...f.query,...t.query}))}this.tileServers=B;x=y.capabilities&&y.capabilities.split(",").map(z=>z.toLowerCase().trim());B=!0===
y?.exportTilesAllowed;x=!0===x?.includes("tilemap");t=B&&y.hasOwnProperty("maxExportTilesCount")?y.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:B,supportsTileMap:x},exportTiles:B?{maxExportTilesCount:+t}:null};this.tileInfo=e.fromJSON(r.tileInfo);B=y.tileMap?a.addQueryParameters(a.join(f.path,y.tileMap),f.query??{}):null;x?(this.type="vector-tile",this.tilemap=new l(new h.TilemapCache({layer:{parsedUrl:f,tileInfo:this.tileInfo},minLOD:r.minLOD??this.tileInfo.lods[0].level,
maxLOD:r.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}),B)):B&&(this.tilemap=new g(B));this.fullExtent=u.fromJSON(y.fullExtent);this.initialExtent=u.fromJSON(y.initialExtent)}destroy(){this.tilemap?.destroy()}async getRefKey(f,r){return await this.tilemap?.dataKey(f,r)??f}requestTile(f,r,y,B){return n.request(this.tileServers[r%this.tileServers.length],f,r,y,B)}isCompatibleWith(f){var r=this.tileInfo;f=f.tileInfo;if(!r.spatialReference.equals(f.spatialReference)||!r.origin.equals(f.origin)||
Math.round(r.dpi)!==Math.round(f.dpi))return!1;r=r.lods;f=f.lods;const y=Math.min(r.length,f.length);for(let B=0;B<y;B++){const x=r[B],t=f[B];if(x.level!==t.level||Math.round(x.scale)!==Math.round(t.scale))return!1}return!0}}return d})},"esri/views/2d/engine/vectorTiles/TilemapIndex":function(){define(["../../../../request","../../../../core/promiseUtils","../../tiling/TileKey"],function(b,a,u){class e{constructor(h){this.url=h}destroy(){this._tileIndexPromise=null}async fetchTileIndex(){this._tileIndexPromise||
(this._tileIndexPromise=b(this.url).then(h=>h.data.index));return this._tileIndexPromise}async dataKey(h,g){const l=await this.fetchTileIndex();a.throwIfAborted(g);return this._getIndexedDataKey(l,h)}_getIndexedDataKey(h,g){const l=[g];if(0>g.level||0>g.row||0>g.col||0<g.row>>g.level||0<g.col>>g.level)return null;for(;0!==g.level;)g=new u(g.level-1,g.row>>1,g.col>>1,g.world),l.push(g);g=l.pop();let n,d;if(1===h)return g;for(;l.length;)if(n=l.pop(),d=(n.col&1)+((n.row&1)<<1),h){if(0===h[d]){g=null;
break}if(1===h[d]){g=n;break}g=n;h=h[d]}return g}}return e})},"esri/views/2d/tiling/TileKey":function(){define(["../../../core/ObjectPool"],function(b){class a{static getId(u,e,h,g){return"object"===typeof u?`${u.level}/${u.row}/${u.col}/${u.world}`:`${u}/${e}/${h}/${g}`}constructor(u,e,h,g){this.set(u,e,h,g)}get key(){return this}get id(){return this.toString()}set id(u){this.set(u)}get hash(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}acquire(u,e,h,g){this.set(u,
e,h,g)}contains(u){const e=u.level-this.level;return 0<=e&&this.row===u.row>>e&&this.col===u.col>>e&&this.world===u.world}equals(u){return this.level===u.level&&this.row===u.row&&this.col===u.col&&this.world===u.world}clone(){return new a(this)}release(){this.world=this.col=this.row=this.level=0}set(u,e,h,g){if(null==u)this.world=this.col=this.row=this.level=0;else if("object"===typeof u)this.level=u.level||0,this.row=u.row||0,this.col=u.col||0,this.world=u.world||0;else if("string"===typeof u){const [l,
n,d,f]=u.split("/");this.level=parseFloat(l);this.row=parseFloat(n);this.col=parseFloat(d);this.world=parseFloat(f)}else this.level=+u,this.row=+e,this.col=+h,this.world=+g||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return 0>=this.level?null:new a(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const u=this.level+1,e=this.row<<1,h=this.col<<1,g=this.world;return[new a(u,e,h,g),new a(u,e,h+1,g),new a(u,e+1,h,g),new a(u,e+1,h+
1,g)]}compareRowMajor(u){return this.row<u.row?-1:this.row>u.row?1:this.col<u.col?-1:this.col>u.col?1:0}}a.pool=new b(a,null,null,25,50);return a})},"esri/views/2d/engine/vectorTiles/TilemapRequest":function(){define(["../../../../request","../../../../core/maybe","../../../../core/promiseUtils","../../tiling/TileKey"],function(b,a,u,e){class h{constructor(g,l){this._tilemap=g;this._tileIndexUrl=l}destroy(){this._tilemap=a.destroyMaybe(this._tilemap);this._tileIndexPromise=null}async fetchTileIndex(g){this._tileIndexPromise||
(this._tileIndexPromise=b(this._tileIndexUrl,{query:{...g?.query}}).then(l=>l.data.index));return this._tileIndexPromise}dataKey(g,l){const {level:n,row:d,col:f}=g,r=new e(g);return this._tilemap.fetchAvailabilityUpsample(n,d,f,r,l).then(()=>{r.world=g.world;return r}).catch(y=>{if(u.isAbortError(y))throw y;return null})}}return h})},"esri/views/2d/engine/vectorTiles/style/VectorTilesRequestManager":function(){define("exports ../../../../../request ../../../../../core/lang ../../../../../core/MapUtils ../../../../../core/promiseUtils ../../../../../core/urlUtils".split(" "),
function(b,a,u,e,h,g){function l(f,r){return e.getOrCreateMapValue(d,f,()=>new n(f)).getData(r).then(y=>{d.delete(f);return y}).catch(y=>{d.delete(f);throw y;})}class n{constructor(f){this._tileUrl=f;this._abortController=this._promise=null;this._abortOptions=[]}getData(f){null===this._promise&&(this._abortController=new AbortController,this._promise=this._makeRequest(this._tileUrl,this._abortController.signal));const r=this._abortOptions;r.push(f);h.onAbort(f,()=>{r.every(y=>h.isAborted(y))&&this._abortController.abort()});
return this._promise.then(y=>u.clone(y))}async _makeRequest(f,r){({data:f}=await a(f,{responseType:"array-buffer",signal:r}));return f}}const d=new Map;b.request=function(f,r,y,B,x){f=g.urlToObject(f);const t=f.query;if(t)for(const [z,m]of Object.entries(t))switch(m){case "{x}":t[z]=B.toString();break;case "{y}":t[z]=y.toString();break;case "{z}":t[z]=r.toString()}r=g.addQueryParameters(f.path.replaceAll(/\{z\}/gi,r.toString()).replaceAll(/\{y\}/gi,y.toString()).replaceAll(/\{x\}/gi,B.toString()),
{...f.query});return l(r,x)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/portal/support/jsonContext":function(){define(["exports","../../core/urlUtils","../Portal"],function(b,a,u){b.createForGroupLayerItemRead=function(e){return{origin:"web-map",url:a.urlToObject(e.itemUrl),portal:e.portal||u.getDefault(),portalItem:e,readResourcePaths:[]}};b.createForGroupLayerItemWrite=function(e,h){const g=a.urlToObject(e.itemUrl);return{origin:"web-map",messages:[],writtenProperties:[],
url:g,portal:e.portal||u.getDefault(),portalItem:e,initiator:h,verifyItemRelativeUrls:g?{rootPath:g.path,writtenUrls:[]}:null,blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}};b.createForItemRead=function(e){return{origin:"portal-item",url:a.urlToObject(e.itemUrl),portal:e.portal||u.getDefault(),portalItem:e,readResourcePaths:[]}};b.createForItemWrite=function(e){const h=a.urlToObject(e.itemUrl);return{origin:"portal-item",messages:[],writtenProperties:[],url:h,
portal:e.portal||u.getDefault(),portalItem:e,verifyItemRelativeUrls:h?{rootPath:h.path,writtenUrls:[]}:null,blockedRelativeUrls:[]}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/tileInfoUtils":function(){define(["exports","../../../../geometry/Point","../../../../layers/support/LOD","../../../../layers/support/TileInfo"],function(b,a,u,e){b.areSchemasOverlapping=function(h,g){if(h===g)return!0;if(null==h&&null!=g||null!=h&&null==g||null==h||null==
g||!h.spatialReference.equals(g.spatialReference)||h.dpi!==g.dpi)return!1;var l=h.origin;const n=g.origin;if(1E-6<=Math.abs(l.x-n.x)||1E-6<=Math.abs(l.y-n.y))return!1;h.lods[0].scale>g.lods[0].scale?(l=h,h=g):l=g;for(g=l.lods[0].scale;g>=h.lods[h.lods.length-1].scale-1E-6;g/=2)if(1E-6>Math.abs(g-h.lods[0].scale))return!0;return!1};b.unionTileInfos=function(h,g){if(h===g)return h;if(null==h&&null!=g)return g;if(null!=h&&null==g)return h;if(null==h||null==g)return null;const l=h.size[0],n=h.format,
d=h.dpi,f=new a({x:h.origin.x,y:h.origin.y}),r=h.spatialReference;var y=h.lods[0].scale>g.lods[0].scale?h.lods[0]:g.lods[0];h=(h.lods[h.lods.length-1].scale<=g.lods[g.lods.length-1].scale?h.lods[h.lods.length-1]:g.lods[g.lods.length-1]).scale;g=[];let B=y.scale;y=y.resolution;let x=0;for(;B>h;)g.push(new u({level:x,resolution:y,scale:B})),x++,B/=2,y/=2;return new e({size:[l,l],dpi:d,format:n||"pbf",origin:f,lods:g,spatialReference:r})};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/engine/vectorTiles/style/StyleRepository":function(){define(["./StyleDefinition","./StyleLayer"],function(b,a){class u{constructor(e){this._style=e;this.backgroundBucketIds=[];this._uidToLayer=new Map;this._layerByName={};this._runningId=0;e.layers||(e.layers=[]);this.version=parseFloat(e.version);if(this.layers=e.layers.map((h,g,l)=>this._create(h,g,l)).filter(h=>!!h))for(let h=0;h<this.layers.length;h++)e=this.layers[h],this._layerByName[e.id]=e,this._uidToLayer.set(e.uid,e),e.type===
b.StyleLayerType.BACKGROUND&&this.backgroundBucketIds.push(e.id);this._identifyRefLayers()}isPainterDataDriven(e){return(e=this._layerByName[e])?e.isPainterDataDriven():!1}getStyleLayerId(e){return e>=this.layers.length?null:this.layers[e].id}getStyleLayerByUID(e){return this._uidToLayer.get(e)??null}getStyleLayerIndex(e){return(e=this._layerByName[e])?this.layers.indexOf(e):-1}setStyleLayer(e,h){if(e?.id){var g=this._style;null!=h&&h>=this.layers.length&&(h=this.layers.length-1);var l=!0,n;if(n=
this._layerByName[e.id]){const d=this.layers.indexOf(n);h||(h=d);h===d?(l=!1,n=u._recreateLayer(e,n),this.layers[h]=n,g.layers[h]=e):(this.layers.splice(d,1),g.layers.splice(d,1),n=this._create(e,h,this.layers),this.layers.splice(h,0,n),g.layers.splice(h,0,e))}else n=this._create(e,h,this.layers),!h||h>=this.layers.length?(this.layers.push(n),g.layers.push(e)):(this.layers.splice(h,0,n),g.layers.splice(h,0,e));this._layerByName[e.id]=n;this._uidToLayer.set(n.uid,n);l&&this._recomputeZValues();this._identifyRefLayers()}}getStyleLayer(e){return(e=
this._layerByName[e])?{type:e.typeName,id:e.id,source:e.source,"source-layer":e.sourceLayer,minzoom:e.minzoom,maxzoom:e.maxzoom,filter:e.filter,layout:e.layout,paint:e.paint}:null}deleteStyleLayer(e){const h=this._layerByName[e];h&&(delete this._layerByName[e],this._uidToLayer.delete(h.uid),e=this.layers.indexOf(h),this.layers.splice(e,1),this._style.layers.splice(e,1),this._recomputeZValues(),this._identifyRefLayers())}getLayerById(e){return this._layerByName[e]}getLayoutProperties(e){return(e=this._layerByName[e])?
e.layout:null}getPaintProperties(e){return(e=this._layerByName[e])?e.paint:null}setPaintProperties(e,h){if(e=this._layerByName[e]){var g=u._recreateLayer({type:e.typeName,id:e.id,source:e.source,"source-layer":e.sourceLayer,minzoom:e.minzoom,maxzoom:e.maxzoom,filter:e.filter,layout:e.layout,paint:h},e),l=this.layers.indexOf(e);this.layers[l]=g;this._style.layers[l].paint=h;this._layerByName[e.id]=g;this._uidToLayer.set(e.uid,g)}}setLayoutProperties(e,h){if(e=this._layerByName[e]){var g=u._recreateLayer({type:e.typeName,
id:e.id,source:e.source,"source-layer":e.sourceLayer,minzoom:e.minzoom,maxzoom:e.maxzoom,filter:e.filter,layout:h,paint:e.paint},e),l=this.layers.indexOf(e);this.layers[l]=g;this._style.layers[l].layout=h;this._layerByName[e.id]=g;this._uidToLayer.set(e.uid,g)}}setStyleLayerVisibility(e,h){if(e=this._layerByName[e]){var g=e.layout||{};g.visibility=h;h=u._recreateLayer({type:e.typeName,id:e.id,source:e.source,"source-layer":e.sourceLayer,minzoom:e.minzoom,maxzoom:e.maxzoom,filter:e.filter,layout:g,
paint:e.paint},e);var l=this.layers.indexOf(e);this.layers[l]=h;this._style.layers[l].layout=g;this._layerByName[e.id]=h;this._uidToLayer.set(e.uid,h)}}getStyleLayerVisibility(e){return(e=this._layerByName[e])?e.layout?.visibility??"visible":"none"}_recomputeZValues(){const e=this.layers,h=1/(e.length+1);for(let g=0;g<e.length;g++)e[g].z=1-(1+g)*h}_identifyRefLayers(){const e=[],h=[];let g=0;for(const d of this.layers){const f=d.layout;if(d.type===b.StyleLayerType.FILL){var l=d,n=d.source+"|"+d.sourceLayer;
n+="|"+(f?.visibility??"");n+="|"+d.minzoom;n+="|"+d.maxzoom;n+="|"+JSON.stringify(d.filter);if(l.hasDataDrivenFill||l.hasDataDrivenOutline)n+="|"+g;e.push({key:n,layer:d})}else if(d.type===b.StyleLayerType.LINE){l=d;n=d.paint;n=null!=n&&(null!=n["line-pattern"]||null!=n["line-dasharray"]);let r=d.source+"|"+d.sourceLayer;r+="|"+(f?.visibility??"");r+="|"+d.minzoom;r+="|"+d.maxzoom;r+="|"+JSON.stringify(d.filter);r+="|"+(void 0!==f?f["line-cap"]:"");r+="|"+(void 0!==f?f["line-join"]:"");if(l.hasDataDrivenLine||
n)r+="|"+g;h.push({key:r,layer:d})}++g}this._assignRefLayers(e);this._assignRefLayers(h)}_assignRefLayers(e){e.sort((f,r)=>f.key<r.key?-1:f.key>r.key?1:0);let h,g;const l=e.length;for(let f=0;f<l;f++){const r=e[f];if(r.key===h)r.layer.refLayerId=g;else if(h=r.key,g=r.layer.id,r.layer.type===b.StyleLayerType.FILL){if(!r.layer.getPaintProperty("fill-outline-color"))for(var n=f+1;n<l;n++){var d=e[n];if(d.key===h){if(d.layer.getPaintProperty("fill-outline-color")){e[f]=d;e[n]=r;g=d.layer.id;break}}else break}}else if(r.layer.type===
b.StyleLayerType.LINE)for(n=r.layer,d=f+1;d<l;d++){const y=e[d];if(y.key!==h)break;const B=y.layer;if(n.canUseThinTessellation&&!B.canUseThinTessellation||!n.canUseThinTessellation&&(B.getPaintProperty("line-pattern")||B.getPaintProperty("line-dasharray")))n=B,e[f]=y,e[d]=r,g=y.layer.id}}}_create(e,h,g){h=1-1/(g.length+1)*(1+h);g=this._runningId++;switch(e.type){case "background":return new a.BackgroundStyleLayer(b.StyleLayerType.BACKGROUND,e,h,g);case "fill":return new a.FillStyleLayer(b.StyleLayerType.FILL,
e,h,g);case "line":return new a.LineStyleLayer(b.StyleLayerType.LINE,e,h,g);case "symbol":return new a.SymbolStyleLayer(b.StyleLayerType.SYMBOL,e,h,g);case "raster":console.warn(`Unsupported vector tile raster layer ${e.id}`);break;case "circle":return new a.CircleStyleLayer(b.StyleLayerType.CIRCLE,e,h,g)}return null}static _recreateLayer(e,h){switch(e.type){case "background":return new a.BackgroundStyleLayer(b.StyleLayerType.BACKGROUND,e,h.z,h.uid);case "fill":return new a.FillStyleLayer(b.StyleLayerType.FILL,
e,h.z,h.uid);case "line":return new a.LineStyleLayer(b.StyleLayerType.LINE,e,h.z,h.uid);case "symbol":return new a.SymbolStyleLayer(b.StyleLayerType.SYMBOL,e,h.z,h.uid);case "raster":console.warn(`Unsupported vector tile raster layer ${e.id}`);break;case "circle":return new a.CircleStyleLayer(b.StyleLayerType.CIRCLE,e,h.z,h.uid)}return null}}return u})},"esri/views/2d/engine/vectorTiles/style/StyleDefinition":function(){define(["exports","../../../../../symbols/cim/enums"],function(b,a){b.StyleLayerType=
void 0;(function(e){e[e.BACKGROUND=0]="BACKGROUND";e[e.FILL=1]="FILL";e[e.LINE=2]="LINE";e[e.SYMBOL=3]="SYMBOL";e[e.CIRCLE=4]="CIRCLE"})(b.StyleLayerType||(b.StyleLayerType={}));b.Visibility=void 0;(function(e){e[e.VISIBLE=0]="VISIBLE";e[e.NONE=1]="NONE"})(b.Visibility||(b.Visibility={}));b.SymbolPlacement=void 0;(function(e){e[e.POINT=0]="POINT";e[e.LINE=1]="LINE";e[e.LINE_CENTER=2]="LINE_CENTER"})(b.SymbolPlacement||(b.SymbolPlacement={}));b.RotationAlignment=void 0;(function(e){e[e.MAP=0]="MAP";
e[e.VIEWPORT=1]="VIEWPORT";e[e.AUTO=2]="AUTO"})(b.RotationAlignment||(b.RotationAlignment={}));b.TextJustification=void 0;(function(e){e[e.AUTO=0]="AUTO";e[e.LEFT=1]="LEFT";e[e.CENTER=2]="CENTER";e[e.RIGHT=3]="RIGHT"})(b.TextJustification||(b.TextJustification={}));b.SymbolAnchor=void 0;(function(e){e[e.CENTER=0]="CENTER";e[e.LEFT=1]="LEFT";e[e.RIGHT=2]="RIGHT";e[e.TOP=3]="TOP";e[e.BOTTOM=4]="BOTTOM";e[e.TOP_LEFT=5]="TOP_LEFT";e[e.TOP_RIGHT=6]="TOP_RIGHT";e[e.BOTTOM_LEFT=7]="BOTTOM_LEFT";e[e.BOTTOM_RIGHT=
8]="BOTTOM_RIGHT"})(b.SymbolAnchor||(b.SymbolAnchor={}));b.TextTransform=void 0;(function(e){e[e.NONE=0]="NONE";e[e.UPPERCASE=1]="UPPERCASE";e[e.LOWERCASE=2]="LOWERCASE"})(b.TextTransform||(b.TextTransform={}));b.TranslateAnchor=void 0;(function(e){e[e.MAP=0]="MAP";e[e.VIEWPORT=1]="VIEWPORT"})(b.TranslateAnchor||(b.TranslateAnchor={}));b.TextWritingMode=void 0;(function(e){e[e.HORIZONTAL=0]="HORIZONTAL";e[e.VERTICAL=1]="VERTICAL"})(b.TextWritingMode||(b.TextWritingMode={}));class u{}u.backgroundLayoutDefinition=
{visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE}};u.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE}};u.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE},"line-cap":{type:"enum",values:["butt","round","square"],default:a.CapType.BUTT},"line-join":{type:"enum",values:["bevel","round","miter"],default:a.JoinType.MITER},"line-miter-limit":{type:"number",default:2},
"line-round-limit":{type:"number",default:1.05}};u.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:b.SymbolPlacement.POINT},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),
default:b.SymbolAnchor.CENTER},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:b.RotationAlignment.AUTO},"icon-size":{type:"number",minimum:0,
default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:b.SymbolAnchor.CENTER},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:b.TextJustification.CENTER},"text-keep-upright":{type:"boolean",
default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:b.RotationAlignment.AUTO},
"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:b.TextTransform.NONE},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[b.TextWritingMode.HORIZONTAL]}};u.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE}};u.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,
maximum:1,default:1},"background-pattern":{type:"string"}};u.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP}};u.linePaintDefinition=
{"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP},
"line-width":{type:"number",minimum:0,default:1}};u.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP},
"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP}};u.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,
default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};u.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,
0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP}};b.StyleDefinition=u;Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/enums":function(){define(["exports"],function(b){b.CapType=void 0;(function(a){a[a.BUTT=0]="BUTT";a[a.ROUND=1]="ROUND";a[a.SQUARE=2]="SQUARE";a[a.UNKNOWN=4]="UNKNOWN"})(b.CapType||(b.CapType={}));b.JoinType=void 0;(function(a){a[a.BEVEL=0]="BEVEL";a[a.ROUND=1]="ROUND";a[a.MITER=2]="MITER";a[a.UNKNOWN=4]="UNKNOWN"})(b.JoinType||(b.JoinType={}));b.Alignment=void 0;(function(a){a[a.SCREEN=0]="SCREEN";a[a.MAP=1]="MAP"})(b.Alignment||(b.Alignment=
{}));b.ExternalColorMixMode=void 0;(function(a){a[a.Tint=0]="Tint";a[a.Ignore=1]="Ignore";a[a.Multiply=99]="Multiply"})(b.ExternalColorMixMode||(b.ExternalColorMixMode={}));b.ExtremityPlacement=void 0;(function(a){a.Both="Both";a.JustBegin="JustBegin";a.JustEnd="JustEnd";a.None="None"})(b.ExtremityPlacement||(b.ExtremityPlacement={}));b.FillMode=void 0;(function(a){a[a.Mosaic=0]="Mosaic";a[a.Centered=1]="Centered"})(b.FillMode||(b.FillMode={}));b.FontEffects=void 0;(function(a){a[a.Normal=0]="Normal";
a[a.Superscript=1]="Superscript";a[a.Subscript=2]="Subscript"})(b.FontEffects||(b.FontEffects={}));b.FontEncoding=void 0;(function(a){a[a.MSSymbol=0]="MSSymbol";a[a.Unicode=1]="Unicode"})(b.FontEncoding||(b.FontEncoding={}));b.FontType=void 0;(function(a){a[a.Unspecified=0]="Unspecified";a[a.TrueType=1]="TrueType";a[a.PSOpenType=2]="PSOpenType";a[a.TTOpenType=3]="TTOpenType";a[a.Type1=4]="Type1"})(b.FontType||(b.FontType={}));b.AngleAlignment=void 0;(function(a){a[a.Display=0]="Display";a[a.Map=1]=
"Map"})(b.AngleAlignment||(b.AngleAlignment={}));b.AnimatedSymbolRepeatType=void 0;(function(a){a.None="None";a.Loop="Loop";a.Oscillate="Oscillate"})(b.AnimatedSymbolRepeatType||(b.AnimatedSymbolRepeatType={}));b.DominantSizeAxis=void 0;(function(a){a[a.Z=0]="Z";a[a.X=1]="X";a[a.Y=2]="Y"})(b.DominantSizeAxis||(b.DominantSizeAxis={}));b.RotationOrder=void 0;(function(a){a[a.XYZ=0]="XYZ";a[a.ZXY=1]="ZXY";a[a.YXZ=2]="YXZ"})(b.RotationOrder||(b.RotationOrder={}));b.BalloonCalloutStyle=void 0;(function(a){a[a.Rectangle=
0]="Rectangle";a[a.RoundedRectangle=1]="RoundedRectangle";a[a.Oval=2]="Oval"})(b.BalloonCalloutStyle||(b.BalloonCalloutStyle={}));b.BlendingMode=void 0;(function(a){a[a.None=0]="None";a[a.Alpha=1]="Alpha";a[a.Screen=2]="Screen";a[a.Multiply=3]="Multiply";a[a.Add=4]="Add"})(b.BlendingMode||(b.BlendingMode={}));b.BlockProgression=void 0;(function(a){a[a.TTB=0]="TTB";a[a.RTL=1]="RTL";a[a.BTT=2]="BTT"})(b.BlockProgression||(b.BlockProgression={}));b.BillBoardMode=void 0;(function(a){a[a.None=0]="None";
a[a.SignPost=1]="SignPost";a[a.FaceNearPlane=2]="FaceNearPlane"})(b.BillBoardMode||(b.BillBoardMode={}));b.CGAAttributeType=void 0;(function(a){a[a.Float=0]="Float";a[a.String=1]="String";a[a.Boolean=2]="Boolean"})(b.CGAAttributeType||(b.CGAAttributeType={}));b.ClippingType=void 0;(function(a){a[a.Intersect=0]="Intersect";a[a.Subtract=1]="Subtract"})(b.ClippingType||(b.ClippingType={}));b.GeometricEffectArrowType=void 0;(function(a){a.OpenEnded="OpenEnded";a.Block="Block";a.Crossed="Crossed"})(b.GeometricEffectArrowType||
(b.GeometricEffectArrowType={}));b.GeometricEffectControlMeasureLineRule=void 0;(function(a){a.FullGeometry="FullGeometry";a.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment";a.ReversedFirstSegment="ReversedFirstSegment";a.PerpendicularToSecondSegment="PerpendicularToSecondSegment";a.SecondSegmentWithTicks="SecondSegmentWithTicks";a.DoublePerpendicular="DoublePerpendicular";a.OppositeToFirstSegment="OppositeToFirstSegment";a.TriplePerpendicular="TriplePerpendicular";a.HalfCircleFirstSegment=
"HalfCircleFirstSegment";a.HalfCircleSecondSegment="HalfCircleSecondSegment";a.HalfCircleExtended="HalfCircleExtended";a.OpenCircle="OpenCircle";a.CoverageEdgesWithTicks="CoverageEdgesWithTicks";a.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks";a.GapExtentMidline="GapExtentMidline";a.Chevron="Chevron";a.PerpendicularWithArc="PerpendicularWithArc";a.ClosedHalfCircle="ClosedHalfCircle";a.TripleParallelExtended="TripleParallelExtended";a.ParallelWithTicks="ParallelWithTicks";a.Parallel="Parallel";
a.PerpendicularToFirstSegment="PerpendicularToFirstSegment";a.ParallelOffset="ParallelOffset";a.OffsetOpposite="OffsetOpposite";a.OffsetSame="OffsetSame";a.CircleWithArc="CircleWithArc";a.DoubleJog="DoubleJog";a.PerpendicularOffset="PerpendicularOffset";a.LineExcludingLastSegment="LineExcludingLastSegment";a.MultivertexArrow="MultivertexArrow";a.CrossedArrow="CrossedArrow";a.ChevronArrow="ChevronArrow";a.ChevronArrowOffset="ChevronArrowOffset";a.PartialFirstSegment="PartialFirstSegment";a.Arch="Arch";
a.CurvedParallelTicks="CurvedParallelTicks";a.Arc90Degrees="Arc90Degrees"})(b.GeometricEffectControlMeasureLineRule||(b.GeometricEffectControlMeasureLineRule={}));b.GeometricEffectDonutMethod=void 0;(function(a){a.Mitered="Mitered";a.Bevelled="Bevelled";a.Rounded="Rounded";a.Square="Square";a.TrueBuffer="TrueBuffer"})(b.GeometricEffectDonutMethod||(b.GeometricEffectDonutMethod={}));b.GeometricEffectEnclosingPolygonMethod=void 0;(function(a){a.ClosePath="ClosePath";a.ConvexHull="ConvexHull";a.RectangularBox=
"RectangularBox"})(b.GeometricEffectEnclosingPolygonMethod||(b.GeometricEffectEnclosingPolygonMethod={}));b.GeometricEffectExtensionOrigin=void 0;(function(a){a.BeginningOfLine="BeginningOfLine";a.EndOfLine="EndOfLine"})(b.GeometricEffectExtensionOrigin||(b.GeometricEffectExtensionOrigin={}));b.GeometricEffectOffsetMethod=void 0;(function(a){a.Mitered="Mitered";a.Bevelled="Bevelled";a.Rounded="Rounded";a.Square="Square"})(b.GeometricEffectOffsetMethod||(b.GeometricEffectOffsetMethod={}));b.GeometricEffectOffsetOption=
void 0;(function(a){a.Fast="Fast";a.Accurate="Accurate"})(b.GeometricEffectOffsetOption||(b.GeometricEffectOffsetOption={}));b.GeometricEffectOffsetTangentMethod=void 0;(function(a){a.BeginningOfLine="BeginningOfLine";a.EndOfLine="EndOfLine"})(b.GeometricEffectOffsetTangentMethod||(b.GeometricEffectOffsetTangentMethod={}));b.GeometricEffectWaveform=void 0;(function(a){a.Sinus="Sinus";a.Square="Square";a.Triangle="Triangle";a.Random="Random"})(b.GeometricEffectWaveform||(b.GeometricEffectWaveform=
{}));b.GlyphHinting=void 0;(function(a){a[a.None=0]="None";a[a.Default=1]="Default";a[a.Force=2]="Force"})(b.GlyphHinting||(b.GlyphHinting={}));b.GradientAlignment=void 0;(function(a){a[a.Buffered=0]="Buffered";a[a.Left=1]="Left";a[a.Right=2]="Right";a[a.AlongLine=3]="AlongLine"})(b.GradientAlignment||(b.GradientAlignment={}));b.GradientFillMethod=void 0;(function(a){a[a.Linear=0]="Linear";a[a.Rectangular=1]="Rectangular";a[a.Circular=2]="Circular";a[a.Buffered=3]="Buffered"})(b.GradientFillMethod||
(b.GradientFillMethod={}));b.GradientStrokeType=void 0;(function(a){a[a.Discrete=0]="Discrete";a[a.Continuous=1]="Continuous"})(b.GradientStrokeType||(b.GradientStrokeType={}));b.GradientStrokeMethod=void 0;(function(a){a[a.AcrossLine=0]="AcrossLine";a[a.AloneLine=1]="AloneLine"})(b.GradientStrokeMethod||(b.GradientStrokeMethod={}));b.HorizontalAlignment=void 0;(function(a){a[a.Left=0]="Left";a[a.Right=1]="Right";a[a.Center=2]="Center";a[a.Justify=3]="Justify"})(b.HorizontalAlignment||(b.HorizontalAlignment=
{}));b.LeaderLineStyle=void 0;(function(a){a[a.Base=0]="Base";a[a.MidPoint=1]="MidPoint";a[a.ThreePoint=2]="ThreePoint";a[a.FourPoint=3]="FourPoint";a[a.Underline=4]="Underline";a[a.CircularCW=5]="CircularCW";a[a.CircularCCW=6]="CircularCCW"})(b.LeaderLineStyle||(b.LeaderLineStyle={}));b.LineCapStyle=void 0;(function(a){a.Butt="Butt";a.Round="Round";a.Square="Square"})(b.LineCapStyle||(b.LineCapStyle={}));b.LineDashEnding=void 0;(function(a){a.NoConstraint="NoConstraint";a.HalfPattern="HalfPattern";
a.HalfGap="HalfGap";a.FullPattern="FullPattern";a.FullGap="FullGap";a.Custom="Custom"})(b.LineDashEnding||(b.LineDashEnding={}));b.LineDecorationStyle=void 0;(function(a){a[a.None=-1]="None";a[a.Custom=0]="Custom";a[a.Circle=1]="Circle";a[a.OpenArrow=2]="OpenArrow";a[a.ClosedArrow=3]="ClosedArrow";a[a.Diamond=4]="Diamond"})(b.LineDecorationStyle||(b.LineDecorationStyle={}));b.LineGapType=void 0;(function(a){a[a.ExtraLeading=0]="ExtraLeading";a[a.Multiple=1]="Multiple";a[a.Exact=2]="Exact"})(b.LineGapType||
(b.LineGapType={}));b.LineJoinStyle=void 0;(function(a){a.Bevel="Bevel";a.Round="Round";a.Miter="Miter"})(b.LineJoinStyle||(b.LineJoinStyle={}));b.ExpressionReturnType=void 0;(function(a){a[a.Default=0]="Default";a[a.String=1]="String";a[a.Numeric=2]="Numeric"})(b.ExpressionReturnType||(b.ExpressionReturnType={}));b.MarkerPlacementType=void 0;(function(a){a[a.InsidePolygon=0]="InsidePolygon";a[a.PolygonCenter=1]="PolygonCenter";a[a.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"})(b.MarkerPlacementType||
(b.MarkerPlacementType={}));b.MaterialMode=void 0;(function(a){a[a.Tint=0]="Tint";a[a.Replace=1]="Replace";a[a.Multiply=2]="Multiply"})(b.MaterialMode||(b.MaterialMode={}));b.PlacementClip=void 0;(function(a){a[a.ClipAtBoundary=0]="ClipAtBoundary";a[a.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary";a[a.DoNotTouchBoundary=2]="DoNotTouchBoundary";a[a.DoNotClip=3]="DoNotClip"})(b.PlacementClip||(b.PlacementClip={}));b.PlacementEndings=void 0;(function(a){a.NoConstraint="NoConstraint";
a.WithMarkers="WithMarkers";a.WithFullGap="WithFullGap";a.WithHalfGap="WithHalfGap";a.Custom="Custom"})(b.PlacementEndings||(b.PlacementEndings={}));b.PlacementGridType=void 0;(function(a){a.Fixed="Fixed";a.Random="Random";a.RandomFixedQuantity="RandomFixedQuantity"})(b.PlacementGridType||(b.PlacementGridType={}));b.PlacementOnLineRelativeTo=void 0;(function(a){a.LineMiddle="LineMiddle";a.LineBeginning="LineBeginning";a.LineEnd="LineEnd";a.SegmentMidpoint="SegmentMidpoint"})(b.PlacementOnLineRelativeTo||
(b.PlacementOnLineRelativeTo={}));b.PlacementPolygonCenterMethod=void 0;(function(a){a.OnPolygon="OnPolygon";a.CenterOfMass="CenterOfMass";a.BoundingBoxCenter="BoundingBoxCenter"})(b.PlacementPolygonCenterMethod||(b.PlacementPolygonCenterMethod={}));b.PlacementRandomlyAlongLineRandomization=void 0;(function(a){a[a.Low=0]="Low";a[a.Medium=1]="Medium";a[a.High=2]="High"})(b.PlacementRandomlyAlongLineRandomization||(b.PlacementRandomlyAlongLineRandomization={}));b.PlacementStepPosition=void 0;(function(a){a[a.MarkerCenter=
0]="MarkerCenter";a[a.MarkerBounds=1]="MarkerBounds"})(b.PlacementStepPosition||(b.PlacementStepPosition={}));b.PointSymbolCalloutScale=void 0;(function(a){a[a.None=0]="None";a[a.PropUniform=1]="PropUniform";a[a.PropNonuniform=2]="PropNonuniform";a[a.DifUniform=3]="DifUniform";a[a.DifNonuniform=4]="DifNonuniform"})(b.PointSymbolCalloutScale||(b.PointSymbolCalloutScale={}));b.Simple3DLineStyle=void 0;(function(a){a.Tube="Tube";a.Strip="Strip";a.Wall="Wall"})(b.Simple3DLineStyle||(b.Simple3DLineStyle=
{}));b.SizeVariationMethod=void 0;(function(a){a[a.Random=0]="Random";a[a.Increasing=1]="Increasing";a[a.Decreasing=2]="Decreasing";a[a.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"})(b.SizeVariationMethod||(b.SizeVariationMethod={}));b.SymbolUnits=void 0;(function(a){a[a.Relative=0]="Relative";a[a.Absolute=1]="Absolute"})(b.SymbolUnits||(b.SymbolUnits={}));b.TextCase=void 0;(function(a){a[a.Normal=0]="Normal";a[a.LowerCase=1]="LowerCase";a[a.Allcaps=2]="Allcaps"})(b.TextCase||(b.TextCase=
{}));b.TextReadingDirection=void 0;(function(a){a[a.LTR=0]="LTR";a[a.RTL=1]="RTL"})(b.TextReadingDirection||(b.TextReadingDirection={}));b.TextureFilter=void 0;(function(a){a.Draft="Draft";a.Picture="Picture";a.Text="Text"})(b.TextureFilter||(b.TextureFilter={}));b.VerticalAlignment=void 0;(function(a){a[a.Top=0]="Top";a[a.Center=1]="Center";a[a.Baseline=2]="Baseline";a[a.Bottom=3]="Bottom"})(b.VerticalAlignment||(b.VerticalAlignment={}));b.VerticalGlyphOrientation=void 0;(function(a){a[a.Right=0]=
"Right";a[a.Upright=1]="Upright"})(b.VerticalGlyphOrientation||(b.VerticalGlyphOrientation={}));b.WaterbodySize=void 0;(function(a){a[a.Small=0]="Small";a[a.Medium=1]="Medium";a[a.Large=2]="Large"})(b.WaterbodySize||(b.WaterbodySize={}));b.WaveStrength=void 0;(function(a){a[a.Calm=0]="Calm";a[a.Rippled=1]="Rippled";a[a.Slight=2]="Slight";a[a.Moderate=3]="Moderate"})(b.WaveStrength||(b.WaveStrength={}));Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleLayer":function(){define("exports ../enums ../shaders/VTLBackgroundMaterial ../shaders/VTLCircleMaterial ../shaders/VTLFillMaterial ../shaders/VTLLineMaterial ../shaders/VTLSymbolMaterial ./Filter ./StyleDefinition ./StyleProperty ../../webgl/definitions".split(" "),
function(b,a,u,e,h,g,l,n,d,f,r){b.CapType=void 0;(function(k){k[k.BUTT=0]="BUTT";k[k.ROUND=1]="ROUND";k[k.SQUARE=2]="SQUARE";k[k.UNKNOWN=4]="UNKNOWN"})(b.CapType||(b.CapType={}));class y{constructor(k,p,v,E){this.type=k;this.typeName=p.type;this.id=p.id;this.source=p.source;this.sourceLayer=p["source-layer"];this.minzoom=p.minzoom;this.maxzoom=p.maxzoom;this.filter=p.filter;this.layout=p.layout;this.paint=p.paint;this.z=v;this.uid=E;switch(k){case d.StyleLayerType.BACKGROUND:this._layoutDefinition=
d.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=d.StyleDefinition.backgroundPaintDefinition;break;case d.StyleLayerType.FILL:this._layoutDefinition=d.StyleDefinition.fillLayoutDefinition;this._paintDefinition=d.StyleDefinition.fillPaintDefinition;break;case d.StyleLayerType.LINE:this._layoutDefinition=d.StyleDefinition.lineLayoutDefinition;this._paintDefinition=d.StyleDefinition.linePaintDefinition;break;case d.StyleLayerType.SYMBOL:this._layoutDefinition=d.StyleDefinition.symbolLayoutDefinition;
this._paintDefinition=d.StyleDefinition.symbolPaintDefinition;break;case d.StyleLayerType.CIRCLE:this._layoutDefinition=d.StyleDefinition.circleLayoutDefinition,this._paintDefinition=d.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}getFeatureFilter(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=n.createFilter(this.filter)}getLayoutProperty(k){return this._layoutProperties[k]}getPaintProperty(k){return this._paintProperties[k]}getLayoutValue(k,
p,v){let E;const G=this._layoutProperties[k];G&&(E=G.getValue(p,v));void 0===E&&(E=this._layoutDefinition[k]["default"]);return E}getPaintValue(k,p,v){let E;const G=this._paintProperties[k];G&&(E=G.getValue(p,v));void 0===E&&(E=this._paintDefinition[k]["default"]);return E}isPainterDataDriven(){const k=this._paintProperties;if(k)for(const p in k)if(k[p].isDataDriven)return!0;return!1}_parseLayout(k){const p={};for(const v in k){const E=this._layoutDefinition[v];E&&(p[v]=new f(E,k[v]))}return p}_parsePaint(k){const p=
{};for(const v in k){const E=this._paintDefinition[v];E&&(p[v]=new f(E,k[v]))}return p}computeAttributesKey(k,p,v,E){let G=0,J=0;for(const I of p){p=3;if(!I||I!==E){const {isLayout:L,isOptional:N}=v[I];p=L?this.getLayoutProperty(I):this.getPaintProperty(I);p=p?.interpolator?2:p?.isDataDriven?1:N&&!p?3:0}J|=p<<G;G+=2}return J<<3|k}}class B extends y{constructor(k,p,v,E){super(k,p,v,E);this.backgroundMaterial=new u.VTLBackgroundMaterial(this.computeAttributesKey(a.ShaderProgramType.BACKGROUND,u.VTLBackgroundMaterial.ATTRIBUTES,
u.VTLBackgroundMaterial.ATTRIBUTES_INFO))}}class x extends y{constructor(k,p,v,E){super(k,p,v,E);k=this.getPaintProperty("fill-color");p=this.getPaintProperty("fill-opacity");v=this.getPaintProperty("fill-pattern");this.hasDataDrivenColor=k?.isDataDriven;this.hasDataDrivenOpacity=p?.isDataDriven;this.hasDataDrivenFill=this.hasDataDrivenColor||this.hasDataDrivenOpacity||v?.isDataDriven;p=this.getPaintProperty("fill-outline-color");this.outlineUsesFillColor=!p;this.hasDataDrivenOutlineColor=p?.isDataDriven;
this.hasDataDrivenOutline=p?p.isDataDriven:k?k.isDataDriven:!1;this.hasDataDrivenOutline=(p?this.hasDataDrivenOutlineColor:this.hasDataDrivenColor)||this.hasDataDrivenOpacity;this.fillMaterial=new h.VTLFillMaterial(this.computeAttributesKey(a.ShaderProgramType.FILL,h.VTLFillMaterial.ATTRIBUTES,h.VTLFillMaterial.ATTRIBUTES_INFO));this.outlineMaterial=new h.VTLOutlineMaterial(this.computeAttributesKey(a.ShaderProgramType.OUTLINE,this.outlineUsesFillColor?h.VTLOutlineMaterial.ATTRIBUTES_FILL:h.VTLOutlineMaterial.ATTRIBUTES_OUTLINE,
this.outlineUsesFillColor?h.VTLOutlineMaterial.ATTRIBUTES_INFO_FILL:h.VTLOutlineMaterial.ATTRIBUTES_INFO_OUTLINE),this.outlineUsesFillColor)}}class t extends y{constructor(k,p,v,E){super(k,p,v,E);k=this.getPaintProperty("line-pattern");this.lineMaterial=new g.VTLLineMaterial(this.computeAttributesKey(a.ShaderProgramType.LINE,g.VTLLineMaterial.ATTRIBUTES,g.VTLLineMaterial.ATTRIBUTES_INFO,k?"line-dasharray":""));this.hasDataDrivenLine=this.getPaintProperty("line-blur")?.isDataDriven||this.getPaintProperty("line-color")?.isDataDriven||
this.getPaintProperty("line-gap-width")?.isDataDriven||this.getPaintProperty("line-offset")?.isDataDriven||this.getPaintProperty("line-opacity")?.isDataDriven||this.getPaintProperty("line-pattern")?.isDataDriven||this.getPaintProperty("line-dasharray")?.isDataDriven||this.getLayoutProperty("line-cap")?.isDataDriven||this.getPaintProperty("line-width")?.isDataDriven;this.canUseThinTessellation=!1;!this.hasDataDrivenLine&&(k=this.getPaintProperty("line-width"),!k||"number"===typeof k&&.5*k<r.thinLineHalfWidthThreshold)&&
(k=this.getPaintProperty("line-offset"),!k||"number"===typeof k&&0===k)&&(this.canUseThinTessellation=!0)}getDashKey(k,p){switch(p){case b.CapType.BUTT:p="Butt";break;case b.CapType.ROUND:p="Round";break;case b.CapType.SQUARE:p="Square";break;default:p="Butt"}return`dasharray-[${k.toString()}]-${p}`}}class z extends y{constructor(k,p,v,E){super(k,p,v,E);this.iconMaterial=new l.VTLIconMaterial(this.computeAttributesKey(a.ShaderProgramType.ICON,l.VTLIconMaterial.ATTRIBUTES,l.VTLIconMaterial.ATTRIBUTES_INFO));
this.textMaterial=new l.VTLTextMaterial(this.computeAttributesKey(a.ShaderProgramType.TEXT,l.VTLTextMaterial.ATTRIBUTES,l.VTLTextMaterial.ATTRIBUTES_INFO));this.hasDataDrivenIcon=this.getPaintProperty("icon-color")?.isDataDriven||this.getPaintProperty("icon-halo-blur")?.isDataDriven||this.getPaintProperty("icon-halo-color")?.isDataDriven||this.getPaintProperty("icon-halo-width")?.isDataDriven||this.getPaintProperty("icon-opacity")?.isDataDriven||this.getLayoutProperty("icon-size")?.isDataDriven;this.hasDataDrivenText=
this.getPaintProperty("text-color")?.isDataDriven||this.getPaintProperty("text-halo-blur")?.isDataDriven||this.getPaintProperty("text-halo-color")?.isDataDriven||this.getPaintProperty("text-halo-width")?.isDataDriven||this.getPaintProperty("text-opacity")?.isDataDriven||this.getLayoutProperty("text-size")?.isDataDriven}}class m extends y{constructor(k,p,v,E){super(k,p,v,E);this.circleMaterial=new e.VTLCircleMaterial(this.computeAttributesKey(a.ShaderProgramType.CIRCLE,e.VTLCircleMaterial.ATTRIBUTES,
e.VTLCircleMaterial.ATTRIBUTES_INFO))}}class A{constructor(k,p,v){this.allowOverlap=k.getLayoutValue("icon-allow-overlap",p);this.ignorePlacement=k.getLayoutValue("icon-ignore-placement",p);this.keepUpright=k.getLayoutValue("icon-keep-upright",p);this.optional=k.getLayoutValue("icon-optional",p);this.rotationAlignment=k.getLayoutValue("icon-rotation-alignment",p);this.rotationAlignment===d.RotationAlignment.AUTO&&(this.rotationAlignment=v?d.RotationAlignment.MAP:d.RotationAlignment.VIEWPORT);v=k.getLayoutProperty("icon-anchor");
v?.isDataDriven?this._anchorProp=v:this.anchor=k.getLayoutValue("icon-anchor",p);v=k.getLayoutProperty("icon-offset");v?.isDataDriven?this._offsetProp=v:this.offset=k.getLayoutValue("icon-offset",p);v=k.getLayoutProperty("icon-padding");v?.isDataDriven?this._paddingProp=v:this.padding=k.getLayoutValue("icon-padding",p);v=k.getLayoutProperty("icon-rotate");v?.isDataDriven?this._rotateProp=v:this.rotate=k.getLayoutValue("icon-rotate",p);v=k.getLayoutProperty("icon-size");v?.isDataDriven?this._sizeProp=
v:this.size=k.getLayoutValue("icon-size",p)}update(k,p){this._anchorProp&&(this.anchor=this._anchorProp.getValue(k,p));this._offsetProp&&(this.offset=this._offsetProp.getValue(k,p));this._paddingProp&&(this.padding=this._paddingProp.getValue(k,p));this._rotateProp&&(this.rotate=this._rotateProp.getValue(k,p));this._sizeProp&&(this.size=this._sizeProp.getValue(k,p))}}class C{constructor(k,p,v){this.allowOverlap=k.getLayoutValue("text-allow-overlap",p);this.ignorePlacement=k.getLayoutValue("text-ignore-placement",
p);this.keepUpright=k.getLayoutValue("text-keep-upright",p);this.optional=k.getLayoutValue("text-optional",p);this.rotationAlignment=k.getLayoutValue("text-rotation-alignment",p);this.rotationAlignment===d.RotationAlignment.AUTO&&(this.rotationAlignment=v?d.RotationAlignment.MAP:d.RotationAlignment.VIEWPORT);v=k.getLayoutProperty("text-anchor");v?.isDataDriven?this._anchorProp=v:this.anchor=k.getLayoutValue("text-anchor",p);v=k.getLayoutProperty("text-justify");v?.isDataDriven?this._justifyProp=v:
this.justify=k.getLayoutValue("text-justify",p);v=k.getLayoutProperty("text-letter-spacing");v?.isDataDriven?this._letterSpacingProp=v:this.letterSpacing=k.getLayoutValue("text-letter-spacing",p);v=k.getLayoutProperty("text-line-height");v?.isDataDriven?this._lineHeightProp=v:this.lineHeight=k.getLayoutValue("text-line-height",p);v=k.getLayoutProperty("text-max-angle");v?.isDataDriven?this._maxAngleProp=v:this.maxAngle=k.getLayoutValue("text-max-angle",p);v=k.getLayoutProperty("text-max-width");v?.isDataDriven?
this._maxWidthProp=v:this.maxWidth=k.getLayoutValue("text-max-width",p);v=k.getLayoutProperty("text-offset");v?.isDataDriven?this._offsetProp=v:this.offset=k.getLayoutValue("text-offset",p);v=k.getLayoutProperty("text-padding");v?.isDataDriven?this._paddingProp=v:this.padding=k.getLayoutValue("text-padding",p);v=k.getLayoutProperty("text-rotate");v?.isDataDriven?this._rotateProp=v:this.rotate=k.getLayoutValue("text-rotate",p);v=k.getLayoutProperty("text-size");v?.isDataDriven?this._sizeProp=v:this.size=
k.getLayoutValue("text-size",p);v=k.getLayoutProperty("text-writing-mode");v?.isDataDriven?this._writingModeProp=v:this.writingMode=k.getLayoutValue("text-writing-mode",p)}update(k,p){this._anchorProp&&(this.anchor=this._anchorProp.getValue(k,p));this._justifyProp&&(this.justify=this._justifyProp.getValue(k,p));this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(k,p));this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(k,p));this._maxAngleProp&&(this.maxAngle=
this._maxAngleProp.getValue(k,p));this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(k,p));this._offsetProp&&(this.offset=this._offsetProp.getValue(k,p));this._paddingProp&&(this.padding=this._paddingProp.getValue(k,p));this._rotateProp&&(this.rotate=this._rotateProp.getValue(k,p));this._sizeProp&&(this.size=this._sizeProp.getValue(k,p));this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(k,p))}}b.BackgroundStyleLayer=B;b.CircleStyleLayer=m;b.FillStyleLayer=x;b.IconLayout=
A;b.LineStyleLayer=t;b.StyleLayer=y;b.SymbolStyleLayer=z;b.TextLayout=C;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/enums":function(){define(["exports"],function(b){b.BucketType=void 0;(function(a){a[a.FILL=1]="FILL";a[a.LINE=2]="LINE";a[a.SYMBOL=3]="SYMBOL";a[a.CIRCLE=4]="CIRCLE"})(b.BucketType||(b.BucketType={}));b.ShaderProgramType=void 0;(function(a){a[a.BACKGROUND=0]="BACKGROUND";a[a.FILL=1]="FILL";a[a.OUTLINE=2]="OUTLINE";a[a.LINE=3]="LINE";
a[a.ICON=4]="ICON";a[a.CIRCLE=5]="CIRCLE";a[a.TEXT=6]="TEXT";a[a.TILEINFO=7]="TILEINFO"})(b.ShaderProgramType||(b.ShaderProgramType={}));b.StyleUpdateType=void 0;(function(a){a[a.PAINTER_CHANGED=0]="PAINTER_CHANGED";a[a.LAYOUT_CHANGED=1]="LAYOUT_CHANGED";a[a.LAYER_CHANGED=2]="LAYER_CHANGED";a[a.LAYER_REMOVED=3]="LAYER_REMOVED";a[a.SPRITES_CHANGED=4]="SPRITES_CHANGED"})(b.StyleUpdateType||(b.StyleUpdateType={}));Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLBackgroundMaterial":function(){define(["exports",
"./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(b,a,u,e){class h extends a.VTLMaterial{constructor(g){super(g)}geometryInfo(){return h.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return h.ATTRIBUTES}attributesInfo(){return h.ATTRIBUTES_INFO}}h.ATTRIBUTES=[];h.GEOMETRY_LAYOUT=[new e.VertexElementDescriptor("a_pos",2,u.DataType.BYTE,0,2)];h.ATTRIBUTES_INFO={};b.VTLBackgroundMaterial=h;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/engine/vectorTiles/shaders/VTLMaterial":function(){define(["exports","../MemoryBuffer","./enums","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(b,a,u,e,h){class g{constructor(d){this._locations=new Map;this._key=d}get key(){return this._key}get type(){return this._key&7}defines(){return[]}getStride(){this._layoutInfo||this._buildAttributesInfo();return this._stride}getAttributeLocations(){0===this._locations.size&&this._buildAttributesInfo();return this._locations}getLayoutInfo(){this._layoutInfo||
this._buildAttributesInfo();return this._layoutInfo}getEncodingInfos(){this._propertyEncodingInfo||this._buildAttributesInfo();return this._propertyEncodingInfo}getUniforms(){this._uniforms||this._buildAttributesInfo();return this._uniforms}getShaderHeader(){this._shaderHeader||this._buildAttributesInfo();return this._shaderHeader}getShaderMain(){this._shaderMain||this._buildAttributesInfo();return this._shaderMain}setDataUniforms(d,f,r,y,B){var x=this.getUniforms();for(const t of x){const {name:z,
type:m,getValue:A}=t;x=A(r,f,y,B);if(null!==x)switch(m){case "float":d.setUniform1f(z,x);break;case "vec2":d.setUniform2fv(z,x);break;case "vec4":d.setUniform4fv(z,x)}}}encodeAttributes(d,f,r,y){const B=this.attributesInfo(),x=this.getEncodingInfos(),t=[];let z=0,m=0;for(const C of Object.keys(x)){var A=x[C];const {type:k,precisionFactor:p,isLayout:v}=B[C],E=v?r.getLayoutProperty(C):r.getPaintProperty(C),G=E.interpolator?.getInterpolationRange(f);let J=0;for(const I of A){const {offset:L,bufferElementsToAdd:N}=
I;if(0<N){for(A=0;A<N;A++)t.push(0);z+=m;m=I.bufferElementsToAdd}A=y??E.getValue(G?G[J]:f,d);switch(k){case u.EncodingType.R8_SIGNED:case u.EncodingType.R8_UNSIGNED:t[z]|=this._encodeByte(A*(p||1),8*L);break;case u.EncodingType.R16_SIGNED:case u.EncodingType.R16_UNSIGNED:t[z]|=this._encodeShort(A*(p||1),8*L);break;case u.EncodingType.R8G8_SIGNED:case u.EncodingType.R8G8_UNSIGNED:t[z]|=this._encodeByte(A*(p||1),8*L);t[z]|=this._encodeByte(A*(p||1),8*L+8);break;case u.EncodingType.R16G16_SIGNED:case u.EncodingType.R16G16_UNSIGNED:t[z]|=
this._encodeShort(A*(p||1),8*L);t[z]|=this._encodeShort(A*(p||1),8*L+16);break;case u.EncodingType.R8G8B8A8_SIGNED:case u.EncodingType.R8G8B8A8_UNSIGNED:t[z]|=this._encodeByte(A*(p||1),8*L);t[z]|=this._encodeByte(A*(p||1),8*L+8);t[z]|=this._encodeByte(A*(p||1),8*L+16);t[z]|=this._encodeByte(A*(p||1),8*L+24);break;case u.EncodingType.R8G8B8A8_COLOR:t[z]=this._encodeColor(A);break;case u.EncodingType.R16G16B16A16_DASHARRAY:case u.EncodingType.R16G16B16A16_PATTERN:this._encodePattern(z,t,A);break;default:throw Error("Unsupported encoding type");
}J++}}return t}getAtributeState(d){const f=3+2*d;d=0|this._bit(f);return d|=this._bit(f+1)<<1}_buildAttributesInfo(){const d=[],f={};var r={},y=-1;const B=this.attributesInfo();var x=this.attributes();let t=-1;for(const C of x){t++;x=this.getAtributeState(t);if(x===u.AttributeStatus.UNIFORM||x===u.AttributeStatus.UNUSED)continue;var z=B[C];const k=[];f[C]=k;z=z.type;for(let p=0;p<x;p++){const {dataType:v,bytesPerElement:E,count:G,normalized:J}=g._encodingInfo[z],I=E*G;var m=`${v}-${!0===J}`;let L=
r[m],N=0;!L||4<L.count+G?(y++,L={dataIndex:y,count:0,offset:0},4!==G&&(r[m]=L),d.push({location:-1,name:"a_data_"+y,count:G,type:v,normalized:J}),N=Math.ceil(Math.max(I/4,1))):(m=d[L.dataIndex],m.count+=G,N=Math.ceil(Math.max(m.count*E/4,1))-Math.ceil(Math.max(L.offset/4,1)));k.push({dataIndex:L.dataIndex,offset:L.offset,bufferElementsToAdd:N});L.offset+=I;L.count+=G}}for(const C of d)switch(C.type){case e.DataType.BYTE:case e.DataType.UNSIGNED_BYTE:C.count=4;break;case e.DataType.SHORT:case e.DataType.UNSIGNED_SHORT:C.count+=
C.count%2}this._buildVertexBufferLayout(d);r=0;y=this._layoutInfo.geometry;for(var A of y)this._locations.set(A.name,r++);if(A=this._layoutInfo.opacity)for(const C of A)this._locations.set(C.name,r++);this._buildShaderInfo(d,f);this._propertyEncodingInfo=f}_buildVertexBufferLayout(d){const f={},r=this.geometryInfo();let y=r[0].stride;if(0===d.length)f.geometry=r;else{const B=[];let x=y;for(const t of d)y+=l(t.type)*t.count;for(const t of r)B.push(new h.VertexElementDescriptor(t.name,t.count,t.type,
t.offset,y,t.normalized));for(const t of d)B.push(new h.VertexElementDescriptor(t.name,t.count,t.type,x,y,t.normalized)),x+=l(t.type)*t.count;f.geometry=B}this.opacityInfo()&&(f.opacity=this.opacityInfo());this._layoutInfo=f;this._stride=y}_buildShaderInfo(d,f){let r="\n",y="\n";const B=[];for(var x of d)r+=`attribute ${this._getType(x.count)} ${x.name};\n`;var t=this.attributes();d=this.attributesInfo();x=-1;for(const A of t){x++;const {name:C,type:k,precisionFactor:p,isLayout:v}=d[A];t=p&&1!==p?
` * ${1/p}`:"";const {bytesPerElement:E,count:G}=g._encodingInfo[k];var z=J=>`a_data_${J.dataIndex}${n(G,J.offset,E)}`;switch(this.getAtributeState(x)){case u.AttributeStatus.UNIFORM:t=this._getType(G);var m=`u_${C}`;B.push({name:m,type:t,getValue:(I,L,N,O)=>{N=v?I.getLayoutValue(A,L):I.getPaintValue(A,L);if(k===u.EncodingType.R16G16B16A16_DASHARRAY){I=I.getDashKey(N,I.getLayoutValue("line-cap",L));O=O.getMosaicItemPosition(I,!1);if(null==O)return null;const {tl:S,br:U}=O;return[S[0],U[1],U[0],S[1]]}if(k===
u.EncodingType.R16G16B16A16_PATTERN){O=O.getMosaicItemPosition(N,!A.includes("line-"));if(null==O)return null;const {tl:S,br:U}=O;return[S[0],U[1],U[0],S[1]]}return k===u.EncodingType.R8G8B8A8_COLOR?(O=N[3],[O*N[0],O*N[1],O*N[2],O]):N}});r+=`uniform ${t} ${m};\n`;y+=`${t} ${C} = ${m};\n`;break;case u.AttributeStatus.DATA_DRIVEN:m=z(f[A][0]);y+=`${this._getType(G)} ${C} = ${m}${t};\n`;break;case u.AttributeStatus.INTERPOLATED_DATA_DRIVEN:m=`u_t_${C}`;B.push({name:m,type:"float",getValue:(I,L,N,O)=>
(v?I.getLayoutProperty(A):I.getPaintProperty(A)).interpolator.interpolationUniformValue(N,L)});r+=`uniform float ${m};\n`;const J=z(f[A][0]);z=z(f[A][1]);y+=`${this._getType(G)} ${C} = mix(${J}${t}, ${z}${t}, ${m});\n`}}this._shaderHeader=r;this._shaderMain=y;this._uniforms=B}_bit(d){return(this._key&1<<d)>>d}_getType(d){switch(d){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw Error("Invalid count");}_encodeColor(d){const f=255*d[3];return a.i8888to32(d[0]*
f,d[1]*f,d[2]*f,f)}_encodePattern(d,f,r){if(r?.rect){var y=r.rect,B=r.width;r=r.height;f[d]=this._encodeShort(y.x+2,0);f[d]|=this._encodeShort(y.y+2+r,16);f[d+1]=this._encodeShort(y.x+2+B,0);f[d+1]|=this._encodeShort(y.y+2,16)}}_encodeByte(d,f){return(d&255)<<f}_encodeShort(d,f){return(d&65535)<<f}}g._encodingInfo={[u.EncodingType.R8_SIGNED]:{dataType:e.DataType.BYTE,bytesPerElement:1,count:1,normalized:!1},[u.EncodingType.R8_UNSIGNED]:{dataType:e.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:1,
normalized:!1},[u.EncodingType.R16_SIGNED]:{dataType:e.DataType.SHORT,bytesPerElement:2,count:1,normalized:!1},[u.EncodingType.R16_UNSIGNED]:{dataType:e.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[u.EncodingType.R8G8_SIGNED]:{dataType:e.DataType.BYTE,bytesPerElement:1,count:2,normalized:!1},[u.EncodingType.R8G8_UNSIGNED]:{dataType:e.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[u.EncodingType.R16G16_SIGNED]:{dataType:e.DataType.SHORT,bytesPerElement:2,count:2,
normalized:!1},[u.EncodingType.R16G16_UNSIGNED]:{dataType:e.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[u.EncodingType.R8G8B8A8_SIGNED]:{dataType:e.DataType.BYTE,bytesPerElement:1,count:4,normalized:!1},[u.EncodingType.R8G8B8A8_UNSIGNED]:{dataType:e.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!1},[u.EncodingType.R8G8B8A8_COLOR]:{dataType:e.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[u.EncodingType.R16G16B16A16_DASHARRAY]:{dataType:e.DataType.UNSIGNED_SHORT,
bytesPerElement:2,count:4,normalized:!1},[u.EncodingType.R16G16B16A16_PATTERN]:{dataType:e.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const l=d=>{switch(d){case e.DataType.FLOAT:return 4;case e.DataType.INT:return 4;case e.DataType.UNSIGNED_INT:return 4;case e.DataType.SHORT:return 2;case e.DataType.UNSIGNED_SHORT:return 2;case e.DataType.BYTE:return 1;case e.DataType.UNSIGNED_BYTE:return 1}},n=(d,f,r)=>{f/=r;if(1===d)switch(f){case 0:return".x";case 1:return".y";case 2:return".z";
case 3:return".w"}else if(2===d)switch(f){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(3===d)switch(f){case 0:return".xyz";case 1:return".yzw"}return""};b.VTLMaterial=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/MemoryBuffer":function(){define(function(){class b{constructor(a){this._array=[];0>=a&&console.error("strideInBytes must be positive!");this._stride=a}get array(){return this._array}get index(){return 4*this._array.length/
this._stride}get itemSize(){return this._stride}get sizeInBytes(){return 4*this._array.length}reset(){this.array.length=0}toBuffer(){return(new Uint32Array(this._array)).buffer}static i1616to32(a,u){return 65535&a|u<<16}static i8888to32(a,u,e,h){return a&255|(u&255)<<8|(e&255)<<16|h<<24}static i8816to32(a,u,e){return a&255|(u&255)<<8|e<<16}}return b})},"esri/views/2d/engine/vectorTiles/shaders/enums":function(){define(["exports"],function(b){b.EncodingType=void 0;(function(a){a[a.R8_SIGNED=0]="R8_SIGNED";
a[a.R8_UNSIGNED=1]="R8_UNSIGNED";a[a.R16_SIGNED=2]="R16_SIGNED";a[a.R16_UNSIGNED=3]="R16_UNSIGNED";a[a.R8G8_SIGNED=4]="R8G8_SIGNED";a[a.R8G8_UNSIGNED=5]="R8G8_UNSIGNED";a[a.R16G16_SIGNED=6]="R16G16_SIGNED";a[a.R16G16_UNSIGNED=7]="R16G16_UNSIGNED";a[a.R8G8B8A8_SIGNED=8]="R8G8B8A8_SIGNED";a[a.R8G8B8A8_UNSIGNED=9]="R8G8B8A8_UNSIGNED";a[a.R8G8B8A8_COLOR=10]="R8G8B8A8_COLOR";a[a.R16G16B16A16_DASHARRAY=11]="R16G16B16A16_DASHARRAY";a[a.R16G16B16A16_PATTERN=12]="R16G16B16A16_PATTERN"})(b.EncodingType||(b.EncodingType=
{}));b.AttributeStatus=void 0;(function(a){a[a.UNIFORM=0]="UNIFORM";a[a.DATA_DRIVEN=1]="DATA_DRIVEN";a[a.INTERPOLATED_DATA_DRIVEN=2]="INTERPOLATED_DATA_DRIVEN";a[a.UNUSED=3]="UNUSED"})(b.AttributeStatus||(b.AttributeStatus={}));Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/enums":function(){define(["exports"],function(b){b.ClearBufferBit=void 0;(function(a){a[a.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT";a[a.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT";a[a.COLOR_BUFFER_BIT=
16384]="COLOR_BUFFER_BIT"})(b.ClearBufferBit||(b.ClearBufferBit={}));b.PrimitiveType=void 0;(function(a){a[a.POINTS=0]="POINTS";a[a.LINES=1]="LINES";a[a.LINE_LOOP=2]="LINE_LOOP";a[a.LINE_STRIP=3]="LINE_STRIP";a[a.TRIANGLES=4]="TRIANGLES";a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP";a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(b.PrimitiveType||(b.PrimitiveType={}));b.BlendFactor=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.ONE=1]="ONE";a[a.SRC_COLOR=768]="SRC_COLOR";a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR";
a[a.SRC_ALPHA=770]="SRC_ALPHA";a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA";a[a.DST_ALPHA=772]="DST_ALPHA";a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA";a[a.DST_COLOR=774]="DST_COLOR";a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR";a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE";a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR";a[a.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR";a[a.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA";a[a.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"})(b.BlendFactor||
(b.BlendFactor={}));b.BlendOperation=void 0;(function(a){a[a.ADD=32774]="ADD";a[a.MIN=32775]="MIN";a[a.MAX=32776]="MAX";a[a.SUBTRACT=32778]="SUBTRACT";a[a.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"})(b.BlendOperation||(b.BlendOperation={}));b.BufferType=void 0;(function(a){a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER";a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER";a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER";a[a.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER";a[a.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER";
a[a.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER";a[a.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER"})(b.BufferType||(b.BufferType={}));b.Face=void 0;(function(a){a[a.FRONT=1028]="FRONT";a[a.BACK=1029]="BACK";a[a.FRONT_AND_BACK=1032]="FRONT_AND_BACK"})(b.Face||(b.Face={}));b.CullMode=void 0;(function(a){a[a.CW=2304]="CW";a[a.CCW=2305]="CCW"})(b.CullMode||(b.CullMode={}));b.DataType=void 0;(function(a){a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_SHORT=
5123]="UNSIGNED_SHORT";a[a.INT=5124]="INT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.FLOAT=5126]="FLOAT"})(b.DataType||(b.DataType={}));b.CompareFunction=void 0;(function(a){a[a.NEVER=512]="NEVER";a[a.LESS=513]="LESS";a[a.EQUAL=514]="EQUAL";a[a.LEQUAL=515]="LEQUAL";a[a.GREATER=516]="GREATER";a[a.NOTEQUAL=517]="NOTEQUAL";a[a.GEQUAL=518]="GEQUAL";a[a.ALWAYS=519]="ALWAYS"})(b.CompareFunction||(b.CompareFunction={}));b.StencilOperation=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.KEEP=7680]="KEEP";a[a.REPLACE=
7681]="REPLACE";a[a.INCR=7682]="INCR";a[a.DECR=7683]="DECR";a[a.INVERT=5386]="INVERT";a[a.INCR_WRAP=34055]="INCR_WRAP";a[a.DECR_WRAP=34056]="DECR_WRAP"})(b.StencilOperation||(b.StencilOperation={}));b.TextureSamplingMode=void 0;(function(a){a[a.NEAREST=9728]="NEAREST";a[a.LINEAR=9729]="LINEAR";a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST";a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST";a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR";a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(b.TextureSamplingMode||
(b.TextureSamplingMode={}));b.TextureWrapMode=void 0;(function(a){a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE";a[a.REPEAT=10497]="REPEAT";a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(b.TextureWrapMode||(b.TextureWrapMode={}));b.TextureType=void 0;(function(a){a[a.TEXTURE_2D=3553]="TEXTURE_2D";a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP";a[a.TEXTURE_3D=32879]="TEXTURE_3D";a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X";a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X";
a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y";a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z";a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"})(b.TextureType||(b.TextureType={}));b.PixelFormat=void 0;(function(a){a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.DEPTH24_STENCIL8=35056]=
"DEPTH24_STENCIL8";a[a.ALPHA=6406]="ALPHA";a[a.RGB=6407]="RGB";a[a.RGBA=6408]="RGBA";a[a.LUMINANCE=6409]="LUMINANCE";a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA";a[a.RED=6403]="RED";a[a.RG=33319]="RG";a[a.RED_INTEGER=36244]="RED_INTEGER";a[a.RG_INTEGER=33320]="RG_INTEGER";a[a.RGB_INTEGER=36248]="RGB_INTEGER";a[a.RGBA_INTEGER=36249]="RGBA_INTEGER"})(b.PixelFormat||(b.PixelFormat={}));b.SizedPixelFormat=void 0;(function(a){a[a.RGBA4=32854]="RGBA4";a[a.R16F=33325]="R16F";a[a.RG16F=33327]="RG16F";a[a.RGB32F=
34837]="RGB32F";a[a.RGBA16F=34842]="RGBA16F";a[a.R32F=33326]="R32F";a[a.RG32F=33328]="RG32F";a[a.RGBA32F=34836]="RGBA32F";a[a.R11F_G11F_B10F=35898]="R11F_G11F_B10F";a[a.RGB8=32849]="RGB8";a[a.RGBA8=32856]="RGBA8";a[a.RGB5_A1=32855]="RGB5_A1";a[a.R8=33321]="R8";a[a.RG8=33323]="RG8";a[a.R8I=33329]="R8I";a[a.R8UI=33330]="R8UI";a[a.R16I=33331]="R16I";a[a.R16UI=33332]="R16UI";a[a.R32I=33333]="R32I";a[a.R32UI=33334]="R32UI";a[a.RG8I=33335]="RG8I";a[a.RG8UI=33336]="RG8UI";a[a.RG16I=33337]="RG16I";a[a.RG16UI=
33338]="RG16UI";a[a.RG32I=33339]="RG32I";a[a.RG32UI=33340]="RG32UI";a[a.RGB16F=34843]="RGB16F";a[a.RGB9_E5=35901]="RGB9_E5";a[a.SRGB8=35905]="SRGB8";a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8";a[a.RGB565=36194]="RGB565";a[a.RGBA32UI=36208]="RGBA32UI";a[a.RGB32UI=36209]="RGB32UI";a[a.RGBA16UI=36214]="RGBA16UI";a[a.RGB16UI=36215]="RGB16UI";a[a.RGBA8UI=36220]="RGBA8UI";a[a.RGB8UI=36221]="RGB8UI";a[a.RGBA32I=36226]="RGBA32I";a[a.RGB32I=36227]="RGB32I";a[a.RGBA16I=36232]="RGBA16I";a[a.RGB16I=36233]="RGB16I";
a[a.RGBA8I=36238]="RGBA8I";a[a.RGB8I=36239]="RGB8I";a[a.R8_SNORM=36756]="R8_SNORM";a[a.RG8_SNORM=36757]="RG8_SNORM";a[a.RGB8_SNORM=36758]="RGB8_SNORM";a[a.RGBA8_SNORM=36759]="RGBA8_SNORM";a[a.RGB10_A2=32857]="RGB10_A2";a[a.RGB10_A2UI=36975]="RGB10_A2UI"})(b.SizedPixelFormat||(b.SizedPixelFormat={}));b.PixelType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8";a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4";
a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1";a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5";a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.INT=5124]="INT";a[a.HALF_FLOAT=5131]="HALF_FLOAT";a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV";a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV";a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV";a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=
36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"})(b.PixelType||(b.PixelType={}));b.RenderbufferFormat=void 0;(function(a){a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16";a[a.STENCIL_INDEX8=36168]="STENCIL_INDEX8";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24";a[a.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F";a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8";a[a.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"})(b.RenderbufferFormat||(b.RenderbufferFormat={}));b.Usage=
void 0;(function(a){a[a.STATIC_DRAW=35044]="STATIC_DRAW";a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW";a[a.STREAM_DRAW=35040]="STREAM_DRAW";a[a.STATIC_READ=35045]="STATIC_READ";a[a.DYNAMIC_READ=35049]="DYNAMIC_READ";a[a.STREAM_READ=35041]="STREAM_READ";a[a.STATIC_COPY=35046]="STATIC_COPY";a[a.DYNAMIC_COPY=35050]="DYNAMIC_COPY";a[a.STREAM_COPY=35042]="STREAM_COPY"})(b.Usage||(b.Usage={}));b.ShaderType=void 0;(function(a){a[a.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER";a[a.VERTEX_SHADER=35633]="VERTEX_SHADER"})(b.ShaderType||
(b.ShaderType={}));b.FramebufferTarget=void 0;(function(a){a[a.FRAMEBUFFER=36160]="FRAMEBUFFER";a[a.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER";a[a.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"})(b.FramebufferTarget||(b.FramebufferTarget={}));b.ResourceType=void 0;(function(a){a[a.Texture=0]="Texture";a[a.BufferObject=1]="BufferObject";a[a.VertexArrayObject=2]="VertexArrayObject";a[a.Shader=3]="Shader";a[a.Program=4]="Program";a[a.FramebufferObject=5]="FramebufferObject";a[a.Renderbuffer=6]="Renderbuffer";
a[a.Sync=7]="Sync";a[a.UNCOUNTED=8]="UNCOUNTED";a[a.LinesOfCode=8]="LinesOfCode";a[a.Uniform=9]="Uniform";a[a.COUNT=10]="COUNT"})(b.ResourceType||(b.ResourceType={}));b.ColorAttachment=void 0;(function(a){a[a.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0";a[a.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1";a[a.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2";a[a.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3";a[a.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4";a[a.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5";a[a.COLOR_ATTACHMENT6=
36070]="COLOR_ATTACHMENT6";a[a.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7";a[a.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8";a[a.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9";a[a.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10";a[a.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11";a[a.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12";a[a.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13";a[a.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14";a[a.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"})(b.ColorAttachment||
(b.ColorAttachment={}));b.SpecialDrawBuffers=void 0;(function(a){a[a.NONE=0]="NONE";a[a.BACK=1029]="BACK"})(b.SpecialDrawBuffers||(b.SpecialDrawBuffers={}));b.CompressedTextureFormat=void 0;(function(a){a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT";a[a.COMPRESSED_R11_EAC=
37488]="COMPRESSED_R11_EAC";a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC";a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC";a[a.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC";a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2";a[a.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2";a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2";
a[a.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC";a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(b.CompressedTextureFormat||(b.CompressedTextureFormat={}));b.UniformType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.FLOAT_VEC2=35664]="FLOAT_VEC2";a[a.FLOAT_VEC3=35665]="FLOAT_VEC3";a[a.FLOAT_VEC4=35666]="FLOAT_VEC4";a[a.INT=5124]="INT";a[a.INT_VEC2=35667]="INT_VEC2";a[a.INT_VEC3=35668]="INT_VEC3";a[a.INT_VEC4=35669]="INT_VEC4";a[a.BOOL=35670]="BOOL";
a[a.BOOL_VEC2=35671]="BOOL_VEC2";a[a.BOOL_VEC3=35672]="BOOL_VEC3";a[a.BOOL_VEC4=35673]="BOOL_VEC4";a[a.FLOAT_MAT2=35674]="FLOAT_MAT2";a[a.FLOAT_MAT3=35675]="FLOAT_MAT3";a[a.FLOAT_MAT4=35676]="FLOAT_MAT4";a[a.SAMPLER_2D=35678]="SAMPLER_2D";a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2";a[a.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3";a[a.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4";a[a.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3";
a[a.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4";a[a.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2";a[a.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4";a[a.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2";a[a.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3";a[a.SAMPLER_3D=35679]="SAMPLER_3D";a[a.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW";a[a.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY";a[a.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW";a[a.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW";a[a.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D";a[a.INT_SAMPLER_3D=
36299]="INT_SAMPLER_3D";a[a.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE";a[a.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY";a[a.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D";a[a.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D";a[a.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE";a[a.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"})(b.UniformType||(b.UniformType={}));b.SyncParameter=void 0;(function(a){a[a.OBJECT_TYPE=37138]="OBJECT_TYPE";a[a.SYNC_CONDITION=
37139]="SYNC_CONDITION";a[a.SYNC_STATUS=37140]="SYNC_STATUS";a[a.SYNC_FLAGS=37141]="SYNC_FLAGS"})(b.SyncParameter||(b.SyncParameter={}));b.SyncStatus=void 0;(function(a){a[a.UNSIGNALED=37144]="UNSIGNALED";a[a.SIGNALED=37145]="SIGNALED"})(b.SyncStatus||(b.SyncStatus={}));b.ClientWaitSyncStatus=void 0;(function(a){a[a.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED";a[a.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED";a[a.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED";a[a.WAIT_FAILED=37149]="WAIT_FAILED"})(b.ClientWaitSyncStatus||
(b.ClientWaitSyncStatus={}));b.SyncCondition=void 0;(function(a){a[a.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"})(b.SyncCondition||(b.SyncCondition={}));b.SyncFlag=void 0;(function(a){a[a.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"})(b.SyncFlag||(b.SyncFlag={}));b.DepthStencilAttachment=33306;b.baseTextureUnit=33984;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/VertexElementDescriptor":function(){define(["exports"],function(b){class a{constructor(u,
e,h,g,l,n=!1,d=0){this.name=u;this.count=e;this.type=h;this.offset=g;this.stride=l;this.normalized=n;this.divisor=d}}b.VertexElementDescriptor=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLCircleMaterial":function(){define(["exports","./enums","./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(b,a,u,e,h){class g extends u.VTLMaterial{constructor(l){super(l)}geometryInfo(){return g.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return g.ATTRIBUTES}attributesInfo(){return g.ATTRIBUTES_INFO}}
g.ATTRIBUTES="circle-radius circle-color circle-opacity circle-stroke-width circle-stroke-color circle-stroke-opacity circle-blur".split(" ");g.GEOMETRY_LAYOUT=[new h.VertexElementDescriptor("a_pos",2,e.DataType.SHORT,0,4)];g.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:a.EncodingType.R8_UNSIGNED},"circle-color":{name:"color",type:a.EncodingType.R8G8B8A8_COLOR},"circle-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",
type:a.EncodingType.R8_UNSIGNED,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:a.EncodingType.R8G8B8A8_COLOR},"circle-stroke-opacity":{name:"stroke_opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100},"circle-blur":{name:"blur",type:a.EncodingType.R8_UNSIGNED,precisionFactor:32}};b.VTLCircleMaterial=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLFillMaterial":function(){define(["exports","./enums","./VTLMaterial",
"../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(b,a,u,e,h){class g extends u.VTLMaterial{constructor(n){super(n)}geometryInfo(){return g.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return g.ATTRIBUTES}attributesInfo(){return g.ATTRIBUTES_INFO}}g.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"];g.GEOMETRY_LAYOUT=[new h.VertexElementDescriptor("a_pos",2,e.DataType.SHORT,0,4)];g.ATTRIBUTES_INFO={"fill-color":{name:"color",type:a.EncodingType.R8G8B8A8_COLOR},
"fill-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100},"fill-pattern":{name:"tlbr",type:a.EncodingType.R16G16B16A16_PATTERN,isOptional:!0}};class l extends u.VTLMaterial{constructor(n,d){super(n);this._usefillColor=d}geometryInfo(){return l.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return this._usefillColor?l.ATTRIBUTES_FILL:l.ATTRIBUTES_OUTLINE}attributesInfo(){return this._usefillColor?l.ATTRIBUTES_INFO_FILL:l.ATTRIBUTES_INFO_OUTLINE}}l.ATTRIBUTES_OUTLINE=
["fill-outline-color","fill-opacity"];l.ATTRIBUTES_FILL=["fill-color","fill-opacity"];l.GEOMETRY_LAYOUT=[new h.VertexElementDescriptor("a_pos",2,e.DataType.SHORT,0,8),new h.VertexElementDescriptor("a_offset",2,e.DataType.BYTE,4,8),new h.VertexElementDescriptor("a_xnormal",2,e.DataType.BYTE,6,8)];l.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:a.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100}};l.ATTRIBUTES_INFO_FILL=
{"fill-color":{name:"color",type:a.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100}};b.VTLFillMaterial=g;b.VTLOutlineMaterial=l;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLLineMaterial":function(){define(["exports","./enums","./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(b,a,u,e,h){class g extends u.VTLMaterial{constructor(l){super(l)}geometryInfo(){return g.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return g.ATTRIBUTES}attributesInfo(){return g.ATTRIBUTES_INFO}}
g.ATTRIBUTES="line-blur line-color line-gap-width line-offset line-opacity line-width line-pattern line-dasharray".split(" ");g.GEOMETRY_LAYOUT=[new h.VertexElementDescriptor("a_pos",2,e.DataType.SHORT,0,16),new h.VertexElementDescriptor("a_extrude_offset",4,e.DataType.BYTE,4,16),new h.VertexElementDescriptor("a_dir_normal",4,e.DataType.BYTE,8,16),new h.VertexElementDescriptor("a_accumulatedDistance",2,e.DataType.UNSIGNED_SHORT,12,16)];g.ATTRIBUTES_INFO={"line-width":{name:"width",type:a.EncodingType.R8_UNSIGNED,
precisionFactor:2},"line-gap-width":{name:"gap_width",type:a.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-offset":{name:"offset",type:a.EncodingType.R8_SIGNED,precisionFactor:2},"line-color":{name:"color",type:a.EncodingType.R8G8B8A8_COLOR},"line-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100},"line-blur":{name:"blur",type:a.EncodingType.R8_UNSIGNED,precisionFactor:4},"line-pattern":{name:"tlbr",type:a.EncodingType.R16G16B16A16_PATTERN,isOptional:!0},"line-dasharray":{name:"tlbr",
type:a.EncodingType.R16G16B16A16_DASHARRAY,isOptional:!0}};b.VTLLineMaterial=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLSymbolMaterial":function(){define(["exports","./enums","./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(b,a,u,e,h){const g=[new h.VertexElementDescriptor("a_pos",2,e.DataType.SHORT,0,16),new h.VertexElementDescriptor("a_vertexOffset",2,e.DataType.SHORT,4,16),new h.VertexElementDescriptor("a_texAngleRange",
4,e.DataType.UNSIGNED_BYTE,8,16),new h.VertexElementDescriptor("a_levelInfo",4,e.DataType.UNSIGNED_BYTE,12,16)],l=[new h.VertexElementDescriptor("a_opacityInfo",1,e.DataType.UNSIGNED_BYTE,0,1)];class n extends u.VTLMaterial{constructor(f){super(f)}geometryInfo(){return g}opacityInfo(){return l}attributes(){return n.ATTRIBUTES}attributesInfo(){return n.ATTRIBUTES_INFO}}n.ATTRIBUTES="icon-color icon-opacity icon-halo-blur icon-halo-color icon-halo-width icon-size".split(" ");n.ATTRIBUTES_INFO={"icon-color":{name:"color",
type:a.EncodingType.R8G8B8A8_COLOR},"icon-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:a.EncodingType.R8G8B8A8_COLOR},"icon-halo-width":{name:"halo_width",type:a.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:a.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-size":{name:"size",type:a.EncodingType.R8_UNSIGNED,precisionFactor:32,isLayout:!0}};class d extends u.VTLMaterial{constructor(f){super(f)}geometryInfo(){return g}opacityInfo(){return l}attributes(){return d.ATTRIBUTES}attributesInfo(){return d.ATTRIBUTES_INFO}}
d.ATTRIBUTES="text-color text-opacity text-halo-blur text-halo-color text-halo-width text-size".split(" ");d.ATTRIBUTES_INFO={"text-color":{name:"color",type:a.EncodingType.R8G8B8A8_COLOR},"text-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100},"text-halo-color":{name:"halo_color",type:a.EncodingType.R8G8B8A8_COLOR},"text-halo-width":{name:"halo_width",type:a.EncodingType.R8_UNSIGNED,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:a.EncodingType.R8_UNSIGNED,
precisionFactor:4},"text-size":{name:"size",type:a.EncodingType.R8_UNSIGNED,isLayout:!0}};b.VTLIconMaterial=n;b.VTLTextMaterial=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/Filter":function(){define(["../expression/expression","../expression/types"],function(b,a){class u{constructor(e){this._expression=e}filter(e,h){if(!this._expression)return!0;try{return this._expression.evaluate(e,h)}catch(g){return console.log(g.message),!0}}static createFilter(e){if(!e)return null;
this.isLegacyFilter(e)&&(e=this.convertLegacyFilter(e));try{const h=b.createExpression(e,null,a.BooleanType);return new u(h)}catch(h){return console.log(h.message),null}}static isLegacyFilter(e){if(!Array.isArray(e)||0===e.length)return!0;switch(e[0]){case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return 3===e.length&&"string"===typeof e[1]&&!Array.isArray(e[2]);case "in":return 3<=e.length&&"string"===typeof e[1]&&!Array.isArray(e[2]);case "!in":return!0;case "any":case "all":for(let h=
1;h<e.length;h++)if(this.isLegacyFilter(e[h]))return!0;return!1;case "none":return!0;case "has":return 2===e.length&&("$id"===e[1]||"$type"===e[1]);case "!has":return!0;default:return!1}}static convertLegacyFilter(e){if(!Array.isArray(e)||0===e.length)return!0;const h=e[0];if(1===e.length)return"any"!==h;switch(h){case "\x3d\x3d":return u.convertComparison("\x3d\x3d",e[1],e[2]);case "!\x3d":return u.negate(u.convertComparison("\x3d\x3d",e[1],e[2]));case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return u.convertComparison(h,
e[1],e[2]);case "in":return u.convertIn(e[1],e.slice(2));case "!in":return u.negate(u.convertIn(e[1],e.slice(2)));case "any":case "all":case "none":return u.convertCombining(h,e.slice(1));case "has":return u.convertHas(e[1]);case "!has":return u.negate(u.convertHas(e[1]));default:throw Error("Unexpected legacy filter.");}}static convertComparison(e,h,g){switch(h){case "$type":return[e,["geometry-type"],g];case "$id":return[e,["id"],g];default:return[e,["get",h],g]}}static convertIn(e,h){switch(e){case "$type":return["in",
["geometry-type"],["literal",h]];case "$id":return["in",["id"],["literal",h]];default:return["in",["get",e],["literal",h]]}}static convertHas(e){switch(e){case "$type":return!0;case "$id":return["has-id"];default:return["has",e]}}static convertCombining(e,h){return[e].concat(h.map(this.convertLegacyFilter))}static negate(e){return["!",e]}}return u})},"esri/views/2d/engine/vectorTiles/expression/expression":function(){define("exports ../../../../../Color ../../../../../core/colorUtils ../../../../../geometry/support/TileClipper ../../../unitBezier ../GeometryUtils ./types".split(" "),
function(b,a,u,e,h,g,l){function n(c,q,w){var D=typeof c;if("string"===D||"boolean"===D||"number"===D||null===c){if(w)switch(w.kind){case "string":"string"!==D&&(c=X.toString(c));break;case "number":"number"!==D&&(c=X.toNumber(c));break;case "color":c=X.toColor(c)}c=["literal",c]}if(!Array.isArray(c)||0===c.length)throw Error("Expression must be a non empty array");D=c[0];if("string"!==typeof D)throw Error("First element of expression must be a string");const H=na[D];if(void 0===H)throw Error(`Invalid expression operator "${D}"`);
if(!H)throw Error(`Unimplemented expression operator "${D}"`);return H.parse(c,q,w)}class d{constructor(c){this._parent=c;this._vars={}}add(c,q){this._vars[c]=q}get(c){return this._vars[c]?this._vars[c]:this._parent?this._parent.get(c):null}}class f{constructor(){this.type=l.ValueType}static parse(c){if(1<c.length)throw Error('"id" does not expect arguments');return new f}evaluate(c,q){return c?.id}}class r{constructor(){this.type=l.StringType}static parse(c){if(1<c.length)throw Error('"geometry-type" does not expect arguments');
return new r}evaluate(c,q){if(!c)return null;switch(c.type){case e.GeometryType.Point:return"Point";case e.GeometryType.LineString:return"LineString";case e.GeometryType.Polygon:return"Polygon";default:return null}}}class y{constructor(){this.type=l.ObjectType}static parse(c){if(1<c.length)throw Error('"properties" does not expect arguments');return new y}evaluate(c,q){return c?.values}}class B{constructor(){this.type=l.NumberType}static parse(c){if(1<c.length)throw Error('"zoom" does not expect arguments');
return new B}evaluate(c,q){return q}}class x{constructor(c,q,w){this._lhs=c;this._rhs=q;this._compare=w;this.type=l.BooleanType}static parse(c,q,w){if(3!==c.length&&4!==c.length)throw Error(`"${c[0]}" expects 2 or 3 arguments`);if(4===c.length)throw Error(`"${c[0]}" collator not supported`);return new x(n(c[1],q),n(c[2],q),w)}evaluate(c,q){return this._compare(this._lhs.evaluate(c,q),this._rhs.evaluate(c,q))}}class t extends x{static parse(c,q){return x.parse(c,q,(w,D)=>w===D)}}class z extends x{static parse(c,
q){return x.parse(c,q,(w,D)=>w!==D)}}class m extends x{static parse(c,q){return x.parse(c,q,(w,D)=>w<D)}}class A extends x{static parse(c,q){return x.parse(c,q,(w,D)=>w<=D)}}class C extends x{static parse(c,q){return x.parse(c,q,(w,D)=>w>D)}}class k extends x{static parse(c,q){return x.parse(c,q,(w,D)=>w>=D)}}class p{constructor(c){this._arg=c;this.type=l.BooleanType}static parse(c,q){if(2!==c.length)throw Error('"!" expects 1 argument');return new p(n(c[1],q))}evaluate(c,q){return!this._arg.evaluate(c,
q)}}class v{constructor(c){this._args=c;this.type=l.BooleanType}static parse(c,q){const w=[];for(let D=1;D<c.length;D++)w.push(n(c[D],q));return new v(w)}evaluate(c,q){for(const w of this._args)if(!w.evaluate(c,q))return!1;return!0}}class E{constructor(c){this._args=c;this.type=l.BooleanType}static parse(c,q){const w=[];for(let D=1;D<c.length;D++)w.push(n(c[D],q));return new E(w)}evaluate(c,q){for(const w of this._args)if(w.evaluate(c,q))return!0;return!1}}class G{constructor(c){this._args=c;this.type=
l.BooleanType}static parse(c,q){const w=[];for(let D=1;D<c.length;D++)w.push(n(c[D],q));return new G(w)}evaluate(c,q){for(const w of this._args)if(w.evaluate(c,q))return!1;return!0}}class J{constructor(c,q,w){this.type=c;this._args=q;this._fallback=w}static parse(c,q,w){if(4>c.length)throw Error('"case" expects at least 3 arguments');if(1===c.length%2)throw Error('"case" expects an odd number of arguments');let D;const H=[];for(let M=1;M<c.length-1;M+=2){const R=n(c[M],q),Q=n(c[M+1],q,w);D||(D=Q.type);
H.push({condition:R,output:Q})}c=n(c[c.length-1],q,w);D||(D=c.type);return new J(D,H,c)}evaluate(c,q){for(const w of this._args)if(w.condition.evaluate(c,q))return w.output.evaluate(c,q);return this._fallback.evaluate(c,q)}}class I{constructor(c,q){this.type=c;this._args=q}static parse(c,q){if(2>c.length)throw Error('"coalesce" expects at least 1 argument');let w;const D=[];for(let H=1;H<c.length;H++){const M=n(c[H],q);w||(w=M.type);D.push(M)}return new I(w,D)}evaluate(c,q){for(const w of this._args){const D=
w.evaluate(c,q);if(null!==D)return D}return null}}class L{constructor(c,q,w,D,H){this.type=c;this._input=q;this._labels=w;this._outputs=D;this._fallback=H}static parse(c,q){if(3>c.length)throw Error('"match" expects at least 3 arguments');if(0===c.length%2)throw Error('"case" expects an even number of arguments');let w;const D=n(c[1],q),H=[],M={};let R;for(let Z=2;Z<c.length-1;Z+=2){var Q=c[Z];Array.isArray(Q)||(Q=[Q]);for(const fa of Q){Q=typeof fa;if("string"!==Q&&"number"!==Q)throw Error('"match" requires string or number literal as labels');
if(!R)R=Q;else if(Q!==R)throw Error('"match" requires labels to have the same type');M[fa]=H.length}Q=n(c[Z+1],q);w||(w=Q.type);H.push(Q)}return new L(w,D,M,H,n(c[c.length-1],q))}evaluate(c,q){const w=this._input.evaluate(c,q);return(this._outputs[this._labels[w]]||this._fallback).evaluate(c,q)}}class N{constructor(c,q,w,D,H){this._operator=c;this.type=q;this.interpolation=w;this.input=D;this._stops=H}static parse(c,q,w){const D=c[0];if(5>c.length)throw Error(`"${D}" expects at least 4 arguments`);
const H=c[1];if(!Array.isArray(H)||0===H.length)throw Error(`"${H}" is not a valid interpolation`);switch(H[0]){case "linear":if(1!==H.length)throw Error("Linear interpolation cannot have parameters");break;case "exponential":if(2!==H.length||"number"!==typeof H[1])throw Error("Exponential interpolation requires one numeric argument");break;case "cubic-bezier":if(5!==H.length)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(var M=1;5>M;M++){var R=
H[M];if("number"!==typeof R||0>R||1<R)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");}break;default:throw Error(`"${c[0]}" unknown interpolation type "${H[0]}"`);}if(1!==c.length%2)throw Error(`"${D}" expects an even number of arguments`);M=n(c[2],q,l.NumberType);let Q;"interpolate-hcl"===D||"interpolate-lab"===D?Q=l.ColorType:w&&"value"!==w.kind&&(Q=w);w=[];for(R=3;R<c.length;R+=2){const Z=c[R];if("number"!==typeof Z)throw Error(`"${D}" requires stop inputs as literal numbers`);
if(w.length&&w[w.length-1][0]>=Z)throw Error(`"${D}" requires strictly ascending stop inputs`);const fa=n(c[R+1],q,Q);Q||(Q=fa.type);w.push([Z,fa])}if(Q&&Q!==l.ColorType&&Q!==l.NumberType&&("array"!==Q.kind||Q.itemType!==l.NumberType))throw Error(`"${D}" cannot interpolate type ${l.typeToString(Q)}`);return new N(D,Q,H,M,w)}evaluate(c,q){var w=this._stops;if(1===w.length)return w[0][1].evaluate(c,q);var D=this.input.evaluate(c,q);if(D<=w[0][0])return w[0][1].evaluate(c,q);if(D>=w[w.length-1][0])return w[w.length-
1][1].evaluate(c,q);let H=0;for(;++H<w.length&&!(D<w[H][0]););const M=N.interpolationRatio(this.interpolation,D,w[H-1][0],w[H][0]);D=w[H-1][1].evaluate(c,q);const R=w[H][1].evaluate(c,q);if("interpolate"===this._operator){if("array"===this.type.kind&&Array.isArray(D)&&Array.isArray(R))return D.map((Q,Z)=>g.interpolate(Q,R[Z],M));if("color"===this.type.kind&&D instanceof a&&R instanceof a)return D=new a(D),c=new a(R),new a([g.interpolate(D.r,c.r,M),g.interpolate(D.g,c.g,M),g.interpolate(D.b,c.b,M),
g.interpolate(D.a,c.a,M)]);if("number"===this.type.kind&&"number"===typeof D&&"number"===typeof R)return g.interpolate(D,R,M);throw Error(`"${this._operator}" cannot interpolate type ${l.typeToString(this.type)}`);}if("interpolate-hcl"===this._operator)return c=u.toLCH(D),q=u.toLCH(R),w=q.h-c.h,c=u.toRGB({h:c.h+M*(180<w||-180>w?w-360*Math.round(w/360):w),c:g.interpolate(c.c,q.c,M),l:g.interpolate(c.l,q.l,M)}),new a({a:g.interpolate(D.a,R.a,M),...c});if("interpolate-lab"===this._operator)return c=
u.toLAB(D),q=u.toLAB(R),c=u.toRGB({l:g.interpolate(c.l,q.l,M),a:g.interpolate(c.a,q.a,M),b:g.interpolate(c.b,q.b,M)}),new a({a:g.interpolate(D.a,R.a,M),...c});throw Error(`Unexpected operator "${this._operator}"`);}interpolationUniformValue(c,q){const w=this._stops;if(1===w.length||c>=w[w.length-1][0])return 0;let D=0;for(;++D<w.length&&!(c<w[D][0]););return N.interpolationRatio(this.interpolation,q,w[D-1][0],w[D][0])}getInterpolationRange(c){const q=this._stops;if(1===q.length)return c=q[0][0],[c,
c];var w=q[q.length-1][0];if(c>=w)return[w,w];for(w=0;++w<q.length&&!(c<q[w][0]););return[q[w-1][0],q[w][0]]}static interpolationRatio(c,q,w,D){let H=0;"linear"===c[0]?H=N._exponentialInterpolationRatio(q,1,w,D):"exponential"===c[0]?H=N._exponentialInterpolationRatio(q,c[1],w,D):"cubic-bezier"===c[0]&&(H=h.unitBezier(c[1],c[2],c[3],c[4])(N._exponentialInterpolationRatio(q,1,w,D),1E-5));0>H?H=0:1<H&&(H=1);return H}static _exponentialInterpolationRatio(c,q,w,D){D-=w;if(0===D)return 0;c-=w;return 1===
q?c/D:(q**c-1)/(q**D-1)}}class O{constructor(c,q,w){this.type=c;this._input=q;this._stops=w}static parse(c,q){if(5>c.length)throw Error('"step" expects at least 4 arguments');if(1!==c.length%2)throw Error('"step" expects an even number of arguments');const w=n(c[1],q,l.NumberType);let D;const H=[];H.push([-Infinity,n(c[2],q)]);for(let M=3;M<c.length;M+=2){const R=c[M];if("number"!==typeof R)throw Error('"step" requires stop inputs as literal numbers');if(H.length&&H[H.length-1][0]>=R)throw Error('"step" requires strictly ascending stop inputs');
const Q=n(c[M+1],q);D||(D=Q.type);H.push([R,Q])}return new O(D,w,H)}evaluate(c,q){const w=this._stops;if(1===w.length)return w[0][1].evaluate(c,q);const D=this._input.evaluate(c,q);let H=0;for(;++H<w.length&&!(D<w[H][0]););return this._stops[H-1][1].evaluate(c,q)}}class S{constructor(c,q){this.type=c;this._output=q}static parse(c,q,w){if(4>c.length)throw Error('"let" expects at least 3 arguments');if(1===c.length%2)throw Error('"let" expects an odd number of arguments');const D=new d(q);for(let H=
1;H<c.length-1;H+=2){const M=c[H];if("string"!==typeof M)throw Error(`"let" requires a string to define variable names - found ${M}`);D.add(M,n(c[H+1],q))}c=n(c[c.length-1],D,w);return new S(c.type,c)}evaluate(c,q){return this._output.evaluate(c,q)}}class U{constructor(c,q){this.type=c;this.output=q}static parse(c,q,w){if(2!==c.length||"string"!==typeof c[1])throw Error('"var" requires just one literal string argument');q=q.get(c[1]);if(!q)throw Error(`${c[1]} must be defined before being used in a "var" expression`);
return new U(w||l.ValueType,q)}evaluate(c,q){return this.output.evaluate(c,q)}}class aa{constructor(c,q,w){this.type=c;this._index=q;this._array=w}static parse(c,q){if(3!==c.length)throw Error('"at" expects 2 arguments');const w=n(c[1],q,l.NumberType);c=n(c[2],q);return new aa(c.type.itemType,w,c)}evaluate(c,q){const w=this._index.evaluate(c,q);c=this._array.evaluate(c,q);if(0>w||w>=c.length)throw Error('"at" index out of bounds');if(w!==Math.floor(w))throw Error('"at" index must be an integer');
return c[w]}}class Y{constructor(c,q){this._key=c;this._obj=q;this.type=l.ValueType}static parse(c,q){let w;switch(c.length){case 2:return w=n(c[1],q),new Y(w);case 3:return w=n(c[1],q),c=n(c[2],q),new Y(w,c);default:throw Error('"get" expects 1 or 2 arguments');}}evaluate(c,q){const w=this._key.evaluate(c,q);return this._obj?this._obj.evaluate(c,q)[w]:c?.values[w]}}class ca{constructor(c,q){this._key=c;this._obj=q;this.type=l.BooleanType}static parse(c,q){let w;switch(c.length){case 2:return w=n(c[1],
q),new ca(w);case 3:return w=n(c[1],q),c=n(c[2],q),new ca(w,c);default:throw Error('"has" expects 1 or 2 arguments');}}evaluate(c,q){const w=this._key.evaluate(c,q);return this._obj?(c=this._obj.evaluate(c,q),w in c):!!c?.values[w]}}class da{constructor(c,q){this._key=c;this._vals=q;this.type=l.BooleanType}static parse(c,q){if(3!==c.length)throw Error('"in" expects 2 arguments');return new da(n(c[1],q),n(c[2],q))}evaluate(c,q){const w=this._key.evaluate(c,q);return this._vals.evaluate(c,q).includes(w)}}
class F{constructor(c,q,w){this._item=c;this._array=q;this._from=w;this.type=l.NumberType}static parse(c,q){if(3>c.length||4<c.length)throw Error('"index-of" expects 3 or 4 arguments');const w=n(c[1],q),D=n(c[2],q);return 4===c.length?(c=n(c[3],q,l.NumberType),new F(w,D,c)):new F(w,D)}evaluate(c,q){const w=this._item.evaluate(c,q),D=this._array.evaluate(c,q);if(this._from){c=this._from.evaluate(c,q);if(c!==Math.floor(c))throw Error('"index-of" index must be an integer');return D.indexOf(w,c)}return D.indexOf(w)}}
class K{constructor(c){this._arg=c;this.type=l.NumberType}static parse(c,q){if(2!==c.length)throw Error('"length" expects 2 arguments');c=n(c[1],q);return new K(c)}evaluate(c,q){c=this._arg.evaluate(c,q);if("string"===typeof c||Array.isArray(c))return c.length;throw Error('"length" expects string or array');}}class P{constructor(c,q,w,D){this.type=c;this._array=q;this._from=w;this._to=D}static parse(c,q){if(3>c.length||4<c.length)throw Error('"slice" expects 2 or 3 arguments');const w=n(c[1],q),D=
n(c[2],q,l.NumberType);if(D.type!==l.NumberType)throw Error('"slice" index must return a number');if(4===c.length){c=n(c[3],q,l.NumberType);if(c.type!==l.NumberType)throw Error('"slice" index must return a number');return new P(w.type,w,D,c)}return new P(w.type,w,D)}evaluate(c,q){const w=this._array.evaluate(c,q);if(!Array.isArray(w)&&"string"!==typeof w)throw Error('"slice" input must be an array or a string');const D=this._from.evaluate(c,q);if(0>D||D>=w.length)throw Error('"slice" index out of bounds');
if(D!==Math.floor(D))throw Error('"slice" index must be an integer');if(this._to){c=this._to.evaluate(c,q);if(0>c||c>=w.length)throw Error('"slice" index out of bounds');if(c!==Math.floor(c))throw Error('"slice" index must be an integer');return w.slice(D,c)}return w.slice(D)}}class V{constructor(){this.type=l.BooleanType}static parse(c){if(1!==c.length)throw Error('"has-id" expects no arguments');return new V}evaluate(c,q){return void 0!==c?.id}}class W{constructor(c,q){this._args=c;this._calculate=
q;this.type=l.NumberType}static parse(c,q,w){c=c.slice(1).map(D=>n(D,q));return new W(c,w)}evaluate(c,q){let w;this._args&&(w=this._args.map(D=>D.evaluate(c,q)));return this._calculate(w)}}class oa extends W{static parse(c,q){switch(c.length){case 2:return W.parse(c,q,w=>-w[0]);case 3:return W.parse(c,q,w=>w[0]-w[1]);default:throw Error('"-" expects 1 or 2 arguments');}}}class pa extends W{static parse(c,q){return W.parse(c,q,w=>{let D=1;for(const H of w)D*=H;return D})}}class qa extends W{static parse(c,
q){if(3===c.length)return W.parse(c,q,w=>w[0]/w[1]);throw Error('"/" expects 2 arguments');}}class ra extends W{static parse(c,q){if(3===c.length)return W.parse(c,q,w=>w[0]%w[1]);throw Error('"%" expects 2 arguments');}}class sa extends W{static parse(c,q){if(3===c.length)return W.parse(c,q,w=>w[0]**w[1]);throw Error('"^" expects 1 or 2 arguments');}}class ta extends W{static parse(c,q){return W.parse(c,q,w=>{let D=0;for(const H of w)D+=H;return D})}}class T{constructor(c,q){this._args=c;this._calculate=
q;this.type=l.NumberType}static parse(c,q){const w=c.slice(1).map(D=>n(D,q));return new T(w,T.ops[c[0]])}evaluate(c,q){let w;this._args&&(w=this._args.map(D=>D.evaluate(c,q)));return this._calculate(w)}}T.ops={abs:c=>Math.abs(c[0]),acos:c=>Math.acos(c[0]),asin:c=>Math.asin(c[0]),atan:c=>Math.atan(c[0]),ceil:c=>Math.ceil(c[0]),cos:c=>Math.cos(c[0]),e:()=>Math.E,floor:c=>Math.floor(c[0]),ln:c=>Math.log(c[0]),ln2:()=>Math.LN2,log10:c=>Math.log(c[0])/Math.LN10,log2:c=>Math.log(c[0])/Math.LN2,max:c=>Math.max(...c),
min:c=>Math.min(...c),pi:()=>Math.PI,round:c=>Math.round(c[0]),sin:c=>Math.sin(c[0]),sqrt:c=>Math.sqrt(c[0]),tan:c=>Math.tan(c[0])};class ha{constructor(c){this._args=c;this.type=l.StringType}static parse(c,q){return new ha(c.slice(1).map(w=>n(w,q)))}evaluate(c,q){return this._args.map(w=>w.evaluate(c,q)).join("")}}class ea{constructor(c,q){this._arg=c;this._calculate=q;this.type=l.StringType}static parse(c,q){if(2!==c.length)throw Error(`${c[0]} expects 1 argument`);q=n(c[1],q);return new ea(q,ea.ops[c[0]])}evaluate(c,
q){return this._calculate(this._arg.evaluate(c,q))}}ea.ops={downcase:c=>c.toLowerCase(),upcase:c=>c.toUpperCase()};class ia{constructor(c){this._args=c;this.type=l.ColorType}static parse(c,q){if(4!==c.length)throw Error('"rgb" expects 3 arguments');c=c.slice(1).map(w=>n(w,q));return new ia(c)}evaluate(c,q){const w=this._validate(this._args[0].evaluate(c,q)),D=this._validate(this._args[1].evaluate(c,q));c=this._validate(this._args[2].evaluate(c,q));return new a({r:w,g:D,b:c})}_validate(c){if("number"!==
typeof c||0>c||255<c)throw Error(`${c}: invalid color component`);return Math.round(c)}}class ja{constructor(c){this._args=c;this.type=l.ColorType}static parse(c,q){if(5!==c.length)throw Error('"rgba" expects 4 arguments');c=c.slice(1).map(w=>n(w,q));return new ja(c)}evaluate(c,q){const w=this._validate(this._args[0].evaluate(c,q)),D=this._validate(this._args[1].evaluate(c,q)),H=this._validate(this._args[2].evaluate(c,q));c=this._validateAlpha(this._args[3].evaluate(c,q));return new a({r:w,g:D,b:H,
a:c})}_validate(c){if("number"!==typeof c||0>c||255<c)throw Error(`${c}: invalid color component`);return Math.round(c)}_validateAlpha(c){if("number"!==typeof c||0>c||1<c)throw Error(`${c}: invalid alpha color component`);return c}}class ka{constructor(c){this._color=c;this.type=l.arrayType(l.NumberType,4)}static parse(c,q){if(2!==c.length)throw Error('"to-rgba" expects 1 argument');c=n(c[1],q);return new ka(c)}evaluate(c,q){return(new a(this._color.evaluate(c,q))).toRgba()}}class ba{constructor(c,
q){this.type=c;this._args=q}static parse(c,q){var w=c[0];if(2>c.length)throw Error(`${w} expects at least one argument`);let D=1,H;if("array"===w){if(2<c.length){switch(c[1]){case "string":H=l.StringType;break;case "number":H=l.NumberType;break;case "boolean":H=l.BooleanType;break;default:throw Error('"array" type argument must be string, number or boolean');}D++}else H=l.ValueType;if(3<c.length){var M=c[2];if(null!==M&&("number"!==typeof M||0>M||M!==Math.floor(M)))throw Error('"array" length argument must be a positive integer literal');
D++}H=l.arrayType(H,M)}else switch(w){case "string":H=l.StringType;break;case "number":H=l.NumberType;break;case "boolean":H=l.BooleanType;break;case "object":H=l.ObjectType}for(w=[];D<c.length;D++)M=n(c[D],q),w.push(M);return new ba(H,w)}evaluate(c,q){let w;for(const D of this._args){const H=D.evaluate(c,q);w=l.getType(H);if(l.matchType(w,this.type))return H}throw Error(`Expected ${l.typeToString(this.type)} but got ${l.typeToString(w)}`);}}class X{constructor(c,q){this.type=c;this._args=q}static parse(c,
q){var w=c[0];const D=X.types[w];if(D===l.BooleanType||D===l.StringType){if(2!==c.length)throw Error(`${w} expects one argument`);}else if(2>c.length)throw Error(`${w} expects at least one argument`);w=[];for(let H=1;H<c.length;H++){const M=n(c[H],q);w.push(M)}return new X(D,w)}evaluate(c,q){if(this.type===l.BooleanType)return!!this._args[0].evaluate(c,q);if(this.type===l.StringType)return l.valueToString(this._args[0].evaluate(c,q));if(this.type===l.NumberType){for(const D of this._args){var w=Number(D.evaluate(c,
q));if(!isNaN(w))return w}return null}if(this.type===l.ColorType){for(w of this._args)try{const D=X.toColor(w.evaluate(c,q));if(D instanceof a)return D}catch{}return null}}static toBoolean(c){return!!c}static toString(c){return l.valueToString(c)}static toNumber(c){const q=Number(c);if(isNaN(q))throw Error(`"${c}" is not a number`);return q}static toColor(c){if(c instanceof a)return c;if("string"===typeof c){const q=a.fromString(c);if(q)return q;throw Error(`"${c}" is not a color`);}if(Array.isArray(c))return a.fromArray(c);
throw Error(`"${c}" is not a color`);}}X.types={"to-boolean":l.BooleanType,"to-color":l.ColorType,"to-number":l.NumberType,"to-string":l.StringType};class la{constructor(c){this._val=c;this.type=l.getType(c)}static parse(c){if(2!==c.length)throw Error('"literal" expects 1 argument');return new la(c[1])}evaluate(c,q){return this._val}}class ma{constructor(c){this._arg=c;this.type=l.StringType}static parse(c,q){if(2!==c.length)throw Error('"typeof" expects 1 argument');return new ma(n(c[1],q))}evaluate(c,
q){return l.typeToString(l.getType(this._arg.evaluate(c,q)))}}const na={array:ba,boolean:ba,collator:null,format:null,image:null,literal:la,number:ba,"number-format":null,object:ba,string:ba,"to-boolean":X,"to-color":X,"to-number":X,"to-string":X,typeof:ma,accumulated:null,"feature-state":null,"geometry-type":r,id:f,"line-progress":null,properties:y,at:aa,get:Y,has:ca,in:da,"index-of":F,length:K,slice:P,"!":p,"!\x3d":z,"\x3c":m,"\x3c\x3d":A,"\x3d\x3d":t,"\x3e":C,"\x3e\x3d":k,all:v,any:E,case:J,coalesce:I,
match:L,within:null,interpolate:N,"interpolate-hcl":N,"interpolate-lab":N,step:O,let:S,var:U,concat:ha,downcase:ea,"is-supported-script":null,"resolved-locale":null,upcase:ea,rgb:ia,rgba:ja,"to-rgba":ka,"-":oa,"*":pa,"/":qa,"%":ra,"^":sa,"+":ta,abs:T,acos:T,asin:T,atan:T,ceil:T,cos:T,e:T,floor:T,ln:T,ln2:T,log10:T,log2:T,max:T,min:T,pi:T,round:T,sin:T,sqrt:T,tan:T,zoom:B,"heatmap-density":null,"has-id":V,none:G};b.ALL=v;b.ANY=E;b.Add=ta;b.Assert=ba;b.At=aa;b.Calculate=T;b.Case=J;b.Coalesce=I;b.Coerce=
X;b.Concat=ha;b.Div=qa;b.EQ=t;b.GE=k;b.GT=C;b.GeomType=r;b.Get=Y;b.Has=ca;b.HasID=V;b.ID=f;b.In=da;b.IndexOf=F;b.Interpolate=N;b.LE=A;b.LT=m;b.Length=K;b.Let=S;b.Literal=la;b.Match=L;b.Mod=ra;b.Mul=pa;b.NE=z;b.NONE=G;b.NOT=p;b.Pow=sa;b.Properties=y;b.Rgb=ia;b.Rgba=ja;b.Slice=P;b.Step=O;b.String=ea;b.Sub=oa;b.ToRgba=ka;b.TypeOf=ma;b.Var=U;b.Zoom=B;b.createExpression=n;b.ops=na;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/colorUtils":function(){define(["exports","../Color",
"../chunks/vec4","../chunks/vec4f64"],function(b,a,u,e){function h(m,A){const C=[];let k,p;if(m[0].length!==A.length)throw Error("dimensions do not match");const v=m.length,E=m[0].length;let G=0;for(k=0;k<v;k++){for(p=G=0;p<E;p++)G+=m[k][p]*A[p];C.push(G)}return C}function g(m){m=[m.r/255,m.g/255,m.b/255].map(A=>.04045>=A?A/12.92:((A+.055)/1.055)**2.4);m=h(t,m);return{x:100*m[0],y:100*m[1],z:100*m[2]}}function l(m){m=h(z,[m.x/100,m.y/100,m.z/100]).map(A=>Math.min(1,Math.max(.0031308>=A?12.92*A:1.055*
A**(1/2.4)-.055,0)));return{r:Math.round(255*m[0]),g:Math.round(255*m[1]),b:Math.round(255*m[2])}}function n(m){m=[m.x/95.047,m.y/100,m.z/108.883].map(A=>A>(6/29)**3?A**(1/3):1/3*(29/6)**2*A+4/29);return{l:116*m[1]-16,a:500*(m[0]-m[1]),b:200*(m[1]-m[2])}}function d(m){const A=m.l;m=[(A+16)/116+m.a/500,(A+16)/116,(A+16)/116-m.b/200].map(C=>C>6/29?C**3:3*(6/29)**2*(C-4/29));return{x:95.047*m[0],y:100*m[1],z:108.883*m[2]}}function f(m){if("r"in m&&"g"in m&&"b"in m)return m;if("l"in m&&"c"in m&&"h"in
m){var A=m.c,C=m.h;return l(d({l:m.l,a:A*Math.cos(C),b:A*Math.sin(C)}))}if("l"in m&&"a"in m&&"b"in m)return l(d(m));if("x"in m&&"y"in m&&"z"in m)return l(m);if("h"in m&&"s"in m&&"v"in m){C=(m.h+360)%360/60;A=m.v/100*255;m=m.s/100*A;const k=m*(1-Math.abs(C%2-1));switch(Math.floor(C)){case 0:C={r:m,g:k,b:0};break;case 1:C={r:k,g:m,b:0};break;case 2:C={r:0,g:m,b:k};break;case 3:C={r:0,g:k,b:m};break;case 4:C={r:k,g:0,b:m};break;case 5:case 6:C={r:m,g:0,b:k};break;default:C={r:0,g:0,b:0}}C.r=Math.round(C.r+
A-m);C.g=Math.round(C.g+A-m);C.b=Math.round(C.b+A-m);return C}return m}function r(m){if("h"in m&&"s"in m&&"v"in m)return m;var A=f(m);m=A.r;const C=A.g,k=A.b;A=Math.max(m,C,k);const p=A-Math.min(m,C,k);m=0===p?0:A===m?(C-k)/p%6:A===C?(k-m)/p+2:(m-C)/p+4;0>m&&(m+=6);return{h:60*m,s:100*(0===p?0:p/A),v:100/255*A}}function y(m){return"l"in m&&"a"in m&&"b"in m?m:n(g(f(m)))}function B(m){let {r:A,g:C,b:k,a:p}=m;1>p&&(A=Math.round(p*A+255*(1-p)),C=Math.round(p*C+255*(1-p)),k=Math.round(p*k+255*(1-p)));
return new a({r:A,g:C,b:k})}function x(m,A){const {r:C,g:k,b:p}=A?.ignoreAlpha?m:B(m);return.2126*C+.7152*k+.0722*p}const t=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],z=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];b.BrightnessThreshold=void 0;(function(m){m[m.Low=160]="Low";m[m.High=225]="High"})(b.BrightnessThreshold||(b.BrightnessThreshold={}));b.colorEquals=function(m,A){return m===A||null!=m&&m.equals(A)};b.colorVectorEquals=function(m,A){return m===A||
null!=m&&null!=A&&u.equals(m,A)};b.colorVectorToColorAndOpacity=function(m){return e.fromValues(m[0],m[1],m[2],3<m.length?m[3]:1)};b.darken=function(m,A){var C=y(m);C.l*=1-A;A=f(C);C=m.clone();C.setColor(A);C.a=m.a;return C};b.desaturate=function(m,A){var C=r(m);C.s*=A;A=f(C);C=m.clone();C.setColor(A);C.a=m.a;return C};b.getColorLuminance=x;b.getColorTheme=function(m){return B(m).isBright?"light":"dark"};b.getContrast=function(m,A=b.BrightnessThreshold.High){return x(m,{ignoreAlpha:!0})>A?new a([0,
0,0,m.a]):new a([255,255,255,m.a])};b.multiplyOpacity=function(m,A){m=m.clone();m.a*=A;return m};b.multiplyOpacityToUnitRGBA=function(m,A){m=a.toUnitRGBA(m);m[3]*=A;return m};b.toHSV=r;b.toLAB=y;b.toLCH=function(m){if(!("l"in m&&"c"in m&&"h"in m)){var A=n(g(f(m)));m=A.l;var C=A.a;const k=A.b;A=Math.sqrt(C*C+k*k);C=Math.atan2(k,C);C=0<C?C:C+2*Math.PI;m={l:m,c:A,h:C}}return m};b.toRGB=f;b.unitRGBAFromColor=function(m){return a.toUnitRGBA(m)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/geometry/support/TileClipper":function(){define(["exports"],function(b){b.GeometryType=void 0;(function(d){d[d.Unknown=0]="Unknown";d[d.Point=1]="Point";d[d.LineString=2]="LineString";d[d.Polygon=3]="Polygon"})(b.GeometryType||(b.GeometryType={}));class a{constructor(d,f){this.x=d;this.y=f}clone(){return new a(this.x,this.y)}equals(d,f){return d===this.x&&f===this.y}isEqual(d){return d.x===this.x&&d.y===this.y}setCoords(d,f){this.x=d;this.y=f}normalize(){var d=this.x;const f=this.y;d=Math.sqrt(d*
d+f*f);this.x/=d;this.y/=d}rightPerpendicular(){const d=this.x;this.x=this.y;this.y=-d}move(d,f){this.x+=d;this.y+=f}assign(d){this.x=d.x;this.y=d.y}assignAdd(d,f){this.x=d.x+f.x;this.y=d.y+f.y}assignSub(d,f){this.x=d.x-f.x;this.y=d.y-f.y}rotate(d,f){const r=this.x,y=this.y;this.x=r*d-y*f;this.y=r*f+y*d}scale(d){this.x*=d;this.y*=d}length(){const d=this.x,f=this.y;return Math.sqrt(d*d+f*f)}static distance(d,f){const r=f.x-d.x;d=f.y-d.y;return Math.sqrt(r*r+d*d)}static add(d,f){return new a(d.x+f.x,
d.y+f.y)}static sub(d,f){return new a(d.x-f.x,d.y-f.y)}}class u{constructor(d,f,r){this.ratio=d;this.x=f;this.y=r}}class e{constructor(d,f,r,y=8,B=8){this._lines=[];this._starts=[];this.validateTessellation=!0;this._pixelRatio=y;this._pixelMargin=B;this._tileSize=512*y;this._dz=d;this._yPos=f;this._xPos=r}setPixelMargin(d){d!==this._pixelMargin&&(this._pixelMargin=d,this.setExtent(this._extent))}setExtent(d){this._extent=d;this._finalRatio=this._tileSize/d*(1<<this._dz);let f=this._pixelRatio*this._pixelMargin;
f/=this._finalRatio;d>>=this._dz;f>d&&(f=d);this._margin=f;this._xmin=d*this._xPos-f;this._ymin=d*this._yPos-f;this._xmax=this._xmin+d+2*f;this._ymax=this._ymin+d+2*f}reset(d){this._type=d;this._lines=[];this._starts=[];this._line=null;this._start=0}moveTo(d,f){this._pushLine();this._prevIsIn=this._isIn(d,f);this._moveTo(d,f,this._prevIsIn);this._prevPt=new a(d,f);this._firstPt=new a(d,f);this._dist=0}lineTo(d,f){const r=this._isIn(d,f),y=new a(d,f),B=a.distance(this._prevPt,y);if(r)if(this._prevIsIn)this._lineTo(d,
f,!0);else{var x=this._prevPt;var t=y;d=this._intersect(t,x);this._start=this._dist+B*(1-this._r);this._lineTo(d.x,d.y,!0);this._lineTo(t.x,t.y,!0)}else if(this._prevIsIn)t=this._prevPt,x=y,d=this._intersect(t,x),this._lineTo(d.x,d.y,!0),this._lineTo(x.x,x.y,!1);else{const m=this._prevPt;if(!(m.x<=this._xmin&&y.x<=this._xmin||m.x>=this._xmax&&y.x>=this._xmax||m.y<=this._ymin&&y.y<=this._ymin||m.y>=this._ymax&&y.y>=this._ymax)){d=[];if(m.x<this._xmin&&y.x>this._xmin||m.x>this._xmin&&y.x<this._xmin){f=
(this._xmin-m.x)/(y.x-m.x);var z=m.y+f*(y.y-m.y);z<=this._ymin?t=!1:z>=this._ymax?t=!0:d.push(new u(f,this._xmin,z))}if(m.x<this._xmax&&y.x>this._xmax||m.x>this._xmax&&y.x<this._xmax)f=(this._xmax-m.x)/(y.x-m.x),z=m.y+f*(y.y-m.y),z<=this._ymin?t=!1:z>=this._ymax?t=!0:d.push(new u(f,this._xmax,z));if(m.y<this._ymin&&y.y>this._ymin||m.y>this._ymin&&y.y<this._ymin)f=(this._ymin-m.y)/(y.y-m.y),z=m.x+f*(y.x-m.x),z<=this._xmin?x=!1:z>=this._xmax?x=!0:d.push(new u(f,z,this._ymin));if(m.y<this._ymax&&y.y>
this._ymax||m.y>this._ymax&&y.y<this._ymax)f=(this._ymax-m.y)/(y.y-m.y),z=m.x+f*(y.x-m.x),z<=this._xmin?x=!1:z>=this._xmax?x=!0:d.push(new u(f,z,this._ymax));if(0===d.length)x?t?this._lineTo(this._xmax,this._ymax,!0):this._lineTo(this._xmax,this._ymin,!0):t?this._lineTo(this._xmin,this._ymax,!0):this._lineTo(this._xmin,this._ymin,!0);else if(1<d.length&&d[0].ratio>d[1].ratio)this._start=this._dist+B*d[1].ratio,this._lineTo(d[1].x,d[1].y,!0),this._lineTo(d[0].x,d[0].y,!0);else for(this._start=this._dist+
B*d[0].ratio,x=0;x<d.length;x++)this._lineTo(d[x].x,d[x].y,!0)}this._lineTo(y.x,y.y,!1)}this._dist+=B;this._prevIsIn=r;this._prevPt=y}close(){if(2<this._line.length){var d=this._firstPt,f=this._prevPt;d.x===f.x&&d.y===f.y||this.lineTo(d.x,d.y);d=this._line;for(f=d.length;4<=f;)if(d[0].x===d[1].x&&d[0].x===d[f-2].x||d[0].y===d[1].y&&d[0].y===d[f-2].y)d.pop(),d[0].x=d[f-2].x,d[0].y=d[f-2].y,--f;else break}}result(d=!0){this._pushLine();if(0===this._lines.length)return null;this._type===b.GeometryType.Polygon&&
d&&l.simplify(this._tileSize,this._margin*this._finalRatio,this._lines);return this._lines}resultWithStarts(){if(this._type!==b.GeometryType.LineString)throw Error("Only valid for lines");this._pushLine();const d=this._lines,f=d.length;if(0===f)return null;const r=[];for(let y=0;y<f;y++)r.push({line:d[y],start:this._starts[y]||0});return r}_isIn(d,f){return d>=this._xmin&&d<=this._xmax&&f>=this._ymin&&f<=this._ymax}_intersect(d,f){let r,y,B;if(f.x>=this._xmin&&f.x<=this._xmax)y=f.y<=this._ymin?this._ymin:
this._ymax,B=(y-d.y)/(f.y-d.y),r=d.x+B*(f.x-d.x);else if(f.y>=this._ymin&&f.y<=this._ymax)r=f.x<=this._xmin?this._xmin:this._xmax,B=(r-d.x)/(f.x-d.x),y=d.y+B*(f.y-d.y);else{y=f.y<=this._ymin?this._ymin:this._ymax;r=f.x<=this._xmin?this._xmin:this._xmax;const x=(r-d.x)/(f.x-d.x),t=(y-d.y)/(f.y-d.y);x<t?(B=x,y=d.y+x*(f.y-d.y)):(B=t,r=d.x+t*(f.x-d.x))}this._r=B;return new a(r,y)}_pushLine(){this._line&&(this._type===b.GeometryType.Point?0<this._line.length&&(this._lines.push(this._line),this._starts.push(this._start)):
this._type===b.GeometryType.LineString?1<this._line.length&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===b.GeometryType.Polygon&&3<this._line.length&&(this._lines.push(this._line),this._starts.push(this._start)));this._line=[];this._start=0}_moveTo(d,f,r){this._type!==b.GeometryType.Polygon?r&&(d=Math.round((d-(this._xmin+this._margin))*this._finalRatio),f=Math.round((f-(this._ymin+this._margin))*this._finalRatio),this._line.push(new a(d,f))):(r||(d<this._xmin&&(d=this._xmin),
d>this._xmax&&(d=this._xmax),f<this._ymin&&(f=this._ymin),f>this._ymax&&(f=this._ymax)),d=Math.round((d-(this._xmin+this._margin))*this._finalRatio),f=Math.round((f-(this._ymin+this._margin))*this._finalRatio),this._line.push(new a(d,f)),this._isV=this._isH=!1)}_lineTo(d,f,r){if(this._type!==b.GeometryType.Polygon)if(r){d=Math.round((d-(this._xmin+this._margin))*this._finalRatio);f=Math.round((f-(this._ymin+this._margin))*this._finalRatio);if(0<this._line.length&&(r=this._line[this._line.length-1],
r.equals(d,f)))return;this._line.push(new a(d,f))}else this._line&&0<this._line.length&&this._pushLine();else if(r||(d<this._xmin&&(d=this._xmin),d>this._xmax&&(d=this._xmax),f<this._ymin&&(f=this._ymin),f>this._ymax&&(f=this._ymax)),d=Math.round((d-(this._xmin+this._margin))*this._finalRatio),f=Math.round((f-(this._ymin+this._margin))*this._finalRatio),this._line&&0<this._line.length){r=this._line[this._line.length-1];const y=r.x===d,B=r.y===f;y&&B||(this._isH&&y?(r.x=d,r.y=f,r=this._line[this._line.length-
2],r.x===d&&r.y===f?(this._line.pop(),1>=this._line.length?this._isV=this._isH=!1:(r=this._line[this._line.length-2],this._isH=r.x===d,this._isV=r.y===f)):(this._isH=r.x===d,this._isV=r.y===f)):this._isV&&B?(r.x=d,r.y=f,r=this._line[this._line.length-2],r.x===d&&r.y===f?(this._line.pop(),1>=this._line.length?this._isV=this._isH=!1:(r=this._line[this._line.length-2],this._isH=r.x===d,this._isV=r.y===f)):(this._isH=r.x===d,this._isV=r.y===f)):(this._line.push(new a(d,f)),this._isH=y,this._isV=B))}else this._line.push(new a(d,
f))}}class h{setExtent(d){this._ratio=4096===d?1:4096/d}get validateTessellation(){return 1>this._ratio}reset(d){this._lines=[];this._line=null}moveTo(d,f){this._line&&this._lines.push(this._line);this._line=[];const r=this._ratio;this._line.push(new a(d*r,f*r))}lineTo(d,f){const r=this._ratio;this._line.push(new a(d*r,f*r))}close(){const d=this._line;d&&!d[0].isEqual(d[d.length-1])&&d.push(d[0])}result(){this._line&&this._lines.push(this._line);return 0===this._lines.length?null:this._lines}}var g;
(function(d){d[d.sideLeft=0]="sideLeft";d[d.sideRight=1]="sideRight";d[d.sideTop=2]="sideTop";d[d.sideBottom=3]="sideBottom"})(g||(g={}));class l{static simplify(d,f,r){if(r){var y=-f,B=d+f,x=-f,t=d+f;d=[];f=[];var z=r.length;for(let m=0;m<z;++m){const A=r[m];if(!A||2>A.length)continue;let C=A[0],k;const p=A.length;for(let v=1;v<p;++v)k=A[v],C.x===k.x&&(C.x<=y&&(C.y>k.y?(d.push(m),d.push(v),d.push(g.sideLeft),d.push(-1)):(f.push(m),f.push(v),f.push(g.sideLeft),f.push(-1))),C.x>=B&&(C.y<k.y?(d.push(m),
d.push(v),d.push(g.sideRight),d.push(-1)):(f.push(m),f.push(v),f.push(g.sideRight),f.push(-1)))),C.y===k.y&&(C.y<=x&&(C.x<k.x?(d.push(m),d.push(v),d.push(g.sideTop),d.push(-1)):(f.push(m),f.push(v),f.push(g.sideTop),f.push(-1))),C.y>=t&&(C.x>k.x?(d.push(m),d.push(v),d.push(g.sideBottom),d.push(-1)):(f.push(m),f.push(v),f.push(g.sideBottom),f.push(-1)))),C=k}0!==d.length&&0!==f.length&&(l.fillParent(r,f,d),l.fillParent(r,d,f),y=[],l.calcDeltas(y,f,d),l.calcDeltas(y,d,f),l.addDeltas(y,r))}}static fillParent(d,
f,r){const y=r.length,B=f.length;for(let A=0;A<B;A+=4){var x=f[A],t=f[A+1];const C=f[A+2],k=d[x][t-1];x=d[x][t];t=8092;let p=-1;for(let v=0;v<y;v+=4){if(r[v+2]!==C)continue;var z=r[v];const E=r[v+1];var m=d[z][E-1];z=d[z][E];switch(C){case g.sideLeft:case g.sideRight:n(k.y,m.y,z.y)&&n(x.y,m.y,z.y)&&(m=Math.abs(z.y-m.y),m<t&&(t=m,p=v));break;case g.sideTop:case g.sideBottom:n(k.x,m.x,z.x)&&n(x.x,m.x,z.x)&&(m=Math.abs(z.x-m.x),m<t&&(t=m,p=v))}}f[A+3]=p}}static calcDeltas(d,f,r){const y=f.length;for(let B=
0;B<y;B+=4){const x=l.calcDelta(B,f,r,[]);d.push(f[B]);d.push(f[B+1]);d.push(f[B+2]);d.push(x)}}static calcDelta(d,f,r,y){d=f[d+3];if(-1===d)return 0;const B=y.length;if(1<B&&y[B-2]===d)return 0;y.push(d);return l.calcDelta(d,r,f,y)+1}static addDeltas(d,f){const r=d.length;let y=0;for(var B=0;B<r;B+=4){var x=d[B+3];x>y&&(y=x)}for(B=0;B<r;B+=4){x=f[d[B]];const t=d[B+1],z=y-d[B+3];switch(d[B+2]){case g.sideLeft:x[t-1].x-=z;x[t].x-=z;1===t&&(x[x.length-1].x-=z);t===x.length-1&&(x[0].x-=z);break;case g.sideRight:x[t-
1].x+=z;x[t].x+=z;1===t&&(x[x.length-1].x+=z);t===x.length-1&&(x[0].x+=z);break;case g.sideTop:x[t-1].y-=z;x[t].y-=z;1===t&&(x[x.length-1].y-=z);t===x.length-1&&(x[0].y-=z);break;case g.sideBottom:x[t-1].y+=z,x[t].y+=z,1===t&&(x[x.length-1].y+=z),t===x.length-1&&(x[0].y+=z)}}}}const n=(d,f,r)=>d>=f&&d<=r||d>=r&&d<=f;b.Point=a;b.SimpleBuilder=h;b.TileClipper=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/unitBezier":function(){define(["exports"],function(b){function a(h,
g,l,n){function d(z,m){var A;let C,k;C=z;for(A=0;8>A;A++){k=((y*C+r)*C+f)*C-z;if(Math.abs(k)<m)return C;var p=(3*y*C+2*r)*C+f;if(1E-6>Math.abs(p))break;C-=k/p}p=0;A=1;C=z;if(C<p)return p;if(C>A)return A;for(;p<A;){k=((y*C+r)*C+f)*C;if(Math.abs(k-z)<m)break;z>k?p=C:A=C;C=.5*(A-p)+p}return C}const f=3*h,r=3*(l-h)-f,y=1-f-r,B=3*g,x=3*(n-g)-B,t=1-B-x;return function(z,m=1E-6){z=d(z,m);return((t*z+x)*z+B)*z}}const u=/^cubic-bezier\((.*)\)/,e={};e.ease=a(.25,.1,.25,1);e.linear=a(0,0,1,1);e.easeIn=e["ease-in"]=
a(.42,0,1,1);e.easeOut=e["ease-out"]=a(0,0,.58,1);e.easeInOut=e["ease-in-out"]=a(.42,0,.58,1);b.easingFunctions=e;b.parse=function(h){let g=e[h]||null;!g&&(h=u.exec(h))&&(h=h[1].split(",").map(l=>parseFloat(l.trim())),4!==h.length||h.some(l=>isNaN(l))||(g=a.apply(a,h)));return g};b.unitBezier=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/GeometryUtils":function(){define(["exports"],function(b){function a(n,d){n%=d;return 0<=n?n:n+d}const u=Number.POSITIVE_INFINITY,
e=Math.PI,h=128/e,g=256/360,l=1/Math.LN2;b.between=function(n,d,f){return n>=d&&n<=f||n>=f&&n<=d};b.c2pi=2*e;b.cDegTo256=g;b.cDegToRad=e/180;b.cInfinity=u;b.cPi=e;b.cRadTo256=h;b.degToByte=function(n){return a(n*g,256)};b.interpolate=function(n,d,f){return n*(1-f)+d*f};b.log2=function(n){return Math.log(n)*l};b.positiveMod=a;b.radToByte=function(n){return a(n*h,256)};b.sqr=function(n){return n*n};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/expression/types":function(){define(["exports",
"../../../../../Color"],function(b,a){function u(t,z){return{kind:"array",itemType:t,n:z}}function e(t){if("array"===t.kind){const z=e(t.itemType);return"number"===typeof t.n?`array<${z}, ${t.n}>`:"value"===t.itemType.kind?"array":`array<${z}>`}return t.kind}function h(t){if(null===t)return l;if("string"===typeof t)return d;if("boolean"===typeof t)return f;if("number"===typeof t)return n;if(t instanceof a)return r;if(Array.isArray(t)){let z;for(const m of t){const A=h(m);if(!z)z=A;else if(z!==A){z=
B;break}}return u(z||B,t.length)}return"object"===typeof t?y:B}function g(t,z){if("array"===z.kind)return"array"===t.kind&&(0===t.n&&"value"===t.itemType.kind||g(t.itemType,z.itemType))&&("number"!==typeof z.n||z.n===t.n);if("value"===z.kind)for(const m of x)if(g(t,m))return!0;return z.kind===t.kind}const l={kind:"null"},n={kind:"number"},d={kind:"string"},f={kind:"boolean"},r={kind:"color"},y={kind:"object"},B={kind:"value"},x=[l,n,d,f,r,y,u(B)];b.BooleanType=f;b.ColorType=r;b.NullType=l;b.NumberType=
n;b.ObjectType=y;b.StringType=d;b.ValueType=B;b.arrayType=u;b.getType=h;b.matchType=g;b.typeToString=e;b.valueToString=function(t){if(null===t)return"";const z=typeof t;return"string"===z?t:"number"===z||"boolean"===z?String(t):t instanceof a?t.toString():JSON.stringify(t)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleProperty":function(){define(["../../../../../Color","../GeometryUtils","../expression/expression","../expression/types"],
function(b,a,u,e){class h{constructor(g,l){this.isDataDriven=!1;this.interpolator=null;switch(g.type){case "number":var n=!0;break;case "color":n=!0;break;case "array":n="number"===g.value;break;default:n=!1}null==l&&(l=g.default);if(Array.isArray(l)&&0<l.length&&u.ops[l[0]]){n={number:e.NumberType,color:e.ColorType,string:e.StringType,boolean:e.BooleanType,enum:e.StringType};try{var d="array"===g.type?e.arrayType(n[g.value]||e.ValueType,g.length):n[g.type];const f=u.createExpression(l,null,d);this.getValue=
this._buildExpression(f,g);this.isDataDriven=!0;f instanceof u.Interpolate&&f.input instanceof u.Zoom&&(this.interpolator=f)}catch(f){console.log(f.message),this.getValue=this._buildSimple(g.default)}}else{n&&"interval"===l.type&&(n=!1);if(d=l?.stops&&0<l.stops.length)for(const f of l.stops)f[1]=this._validate(f[1],g);if(this.isDataDriven=l?!!l.property:!1)if(void 0!==l.default&&(l.default=this._validate(l.default,g)),d)switch(l.type){case "identity":this.getValue=this._buildIdentity(l,g);break;case "categorical":this.getValue=
this._buildCategorical(l,g);break;default:this.getValue=n?this._buildInterpolate(l,g):this._buildInterval(l,g)}else this.getValue=this._buildIdentity(l,g);else d?this.getValue=n?this._buildZoomInterpolate(l):this._buildZoomInterval(l):(l=this._validate(l,g),this.getValue=this._buildSimple(l))}}_validate(g,l){if("number"===l.type){if(null!=l.minimum&&g<l.minimum)return l.minimum;if(null!=l.maximum&&g>l.maximum)return l.maximum}else"color"===l.type?g=h._parseColor(g):"enum"===l.type?"string"===typeof g&&
(g=l.values.indexOf(g)):"array"===l.type&&"enum"===l.value?g=g.map(n=>"string"===typeof n?l.values.indexOf(n):n):"string"===l.type&&(g=e.valueToString(g));return g}_buildSimple(g){return()=>g}_buildExpression(g,l){return(n,d)=>{try{const f=g.evaluate(d,n);return void 0===f?l.default:this._validate(f,l)}catch(f){return console.log(f.message),l.default}}}_buildIdentity(g,l){return(n,d)=>{let f;d&&(f=d.values[g.property]);void 0!==f&&(f=this._validate(f,l));return null!=f?f:void 0!==g.default?g.default:
l.default}}_buildCategorical(g,l){return(n,d)=>{let f;d&&(f=d.values[g.property]);f=this._categorical(f,g.stops);return void 0!==f?f:void 0!==g.default?g.default:l.default}}_buildInterval(g,l){return(n,d)=>{let f;d&&(f=d.values[g.property]);return"number"===typeof f?this._interval(f,g.stops):void 0!==g.default?g.default:l.default}}_buildInterpolate(g,l){return(n,d)=>{let f;d&&(f=d.values[g.property]);return"number"===typeof f?this._interpolate(f,g.stops,g.base||1):void 0!==g.default?g.default:l.default}}_buildZoomInterpolate(g){return l=>
this._interpolate(l,g.stops,g.base||1)}_buildZoomInterval(g){return l=>this._interval(l,g.stops)}_categorical(g,l){const n=l.length;for(let d=0;d<n;d++)if(l[d][0]===g)return l[d][1]}_interval(g,l){const n=l.length;let d=0;for(let f=0;f<n;f++)if(l[f][0]<=g)d=f;else break;return l[d][1]}_interpolate(g,l,n){const d=l.length;for(let y=0;y<d;y++){const B=l[y];if(B[0]<=g)var f=B;else{var r=B;break}}if(f&&r){l=r[0]-f[0];g-=f[0];n=1===n?g/l:(n**g-1)/(n**l-1);if(Array.isArray(f[1])){f=f[1];r=r[1];g=[];for(l=
0;l<f.length;l++)g.push(a.interpolate(f[l],r[l],n));return g}return a.interpolate(f[1],r[1],n)}if(f)return f[1];if(r)return r[1]}static _isEmpty(g){for(const l in g)if(g.hasOwnProperty(l))return!1;return!0}static _parseColor(g){if(Array.isArray(g))return g;"string"===typeof g&&(g=new b(g));if(g instanceof b&&!this._isEmpty(g))return b.toUnitRGBA(g)}}return h})},"esri/views/2d/engine/webgl/definitions":function(){define(["exports","../../../../core/has"],function(b,a){const u=256/360;a=a("featurelayer-force-marker-text-draw-order")?
.5:3;b.angleFactor256=u;b.attributeDataAnimation=1;b.attributeDataDd0=3;b.attributeDataDd1=4;b.attributeDataFilterFlags=0;b.attributeDataGpgpu=2;b.attributeDataVv=3;b.attributeStoreTextureSize=1024;b.averageGlyphMosaicItem={metrics:{width:15,height:17,left:0,top:-7,advance:14}};b.bitsetFillHasPatternHeightPrecisionFactor=32;b.bitsetFillHasPatternWidthPrecisionFactor=64;b.bitsetFillHasUnresolvedReplacementColor=8;b.bitsetFillRandomPatternOffset=4;b.bitsetGenericConsiderAlphaOnly=16;b.bitsetGenericLockColor=
2;b.bitsetLineScaleDash=4;b.bitsetMarkerAlignmentMap=1;b.bitsetMarkerAlignmentScreen=0;b.bitsetMarkerOutlineAllowColorOverride=4;b.bitsetMarkerScaleSymbolsProportionally=8;b.bitsetTypeFillOutline=1;b.bufferDataMinimumSize=128;b.bufferDataPoolSize=4;b.chartMaxFields=10;b.collisionBoxPadding=16;b.collisionBucketSize=128;b.collisionEarlyRejectBucketSize=16;b.collisionMaxZoomDelta=1;b.collisionPlacementPadding=8;b.collisionTileBoxSize=4;b.compressionFactorForU16=128;b.debugLabels=!1;b.displayRecordIntPerElement=
8;b.dotDensityMaxFields=8;b.effectFlag0=4;b.enableEarlyLabelDiscard=!1;b.extrudeScale=64;b.filterFlag0=2;b.glyphSize=24;b.heuristicGlyphsPerFeature=10;b.heuristicGlyphsPerLine=50;b.highlightFlag=1;b.hittestRadius=a;b.magicLabelLineHeight=29;b.maxFilters=2;b.maxGpuUploadsPerFrame=2;b.maxRepresentableInt=16777216;b.maxSizeForU16Compression=511;b.minMaxZoomPrecisionFactor=10;b.nanMagicNumber=1E-30;b.patchPixelBufferAllocSize=500;b.patternFillRasterizationScale=2;b.pictureFillColor=4294967295;b.randomInsidePolygonTextureSize=
1024;b.rasterTileSize=256;b.sdfTextureSize=124;b.spritePadding=2;b.textPlacementPadding=8;b.textureBindingAttributeData0=1;b.textureBindingAttributeData1=2;b.textureBindingAttributeData2=3;b.textureBindingAttributeData3=4;b.textureBindingAttributeData4=5;b.textureBindingAttributeData5=6;b.textureBindingBitmap=0;b.textureBindingGlyphAtlas=0;b.textureBindingGpgpu=12;b.textureBindingHighlight0=5;b.textureBindingHighlight1=6;b.textureBindingRenderer0=5;b.textureBindingRenderer1=6;b.textureBindingSpriteAtlas=
0;b.textureUploadManagerBudget=4;b.textureUploadManagerChunkSize=128;b.thinLineHalfWidthThreshold=1.05;b.tileSize=512;b.vtlHighResCutoff=1.15;b.vtlTextureBindingUnitGlyphs=6;b.vtlTextureBindingUnitSprites=5;b.webglMaxInnerStops=6;b.webglMaxStops=8;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/capabilities":function(){define(["exports","./contextUtils"],function(b,a){function u(y){switch(y){case a.ContextType.WEBGL1:return e();case a.ContextType.WEBGL2:return h()}}
function e(){if(!l){{const y=new f,B=g(a.ContextType.WEBGL1,y);null!=B&&(y.supportsElementIndexUint=null!==B.getExtension("OES_element_index_uint"),y.supportsStandardDerivatives=null!==B.getExtension("OES_standard_derivatives"),y.supportsInstancedArrays=null!==B.getExtension("ANGLE_instanced_arrays"),y.supportsTextureFloat=null!==B.getExtension("OES_texture_float"),y.supportsTextureHalfFloat=null!==B.getExtension("OES_texture_half_float"),y.supportsColorBufferFloat=null!==B.getExtension("WEBGL_color_buffer_float"),
y.supportsColorBufferFloatBlend=null!==B.getExtension("EXT_float_blend"),y.supportsColorBufferHalfFloat=null!==B.getExtension("EXT_color_buffer_half_float"));l=y}}return l}function h(){if(!n){{const y=new r,B=g(a.ContextType.WEBGL2,y);null!=B&&(y.supportsColorBufferFloat=null!==B.getExtension("EXT_color_buffer_float"),y.supportsColorBufferFloatBlend=null!==B.getExtension("EXT_float_blend"),y.supportsColorBufferHalfFloat=y.supportsColorBufferFloat||null!==B.getExtension("EXT_color_buffer_half_float"));
n=y}}return n}function g(y,B){if(y===a.ContextType.WEBGL1&&"undefined"===typeof WebGLRenderingContext||y===a.ContextType.WEBGL2&&"undefined"===typeof WebGL2RenderingContext)return null;const x=document.createElement("canvas");if(!x)return null;let t=a.createContext(x,y,{failIfMajorPerformanceCaveat:!0});null==t&&(t=a.createContext(x,y),null!=t&&(B.majorPerformanceCaveat=!0));if(null==t)return t;if(y===a.ContextType.WEBGL1){if(y=t.getParameter(t.VERSION)?.match(/^WebGL\s+([\d.]*)/))y=parseFloat(y[1]),
B.available=.94<=y}else B.available=!0;B.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE);B.supportsVertexShaderSamplers=0<t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS);if(y=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT))B.supportsHighPrecisionFragment=0<y.precision;return t}let l,n;class d{constructor(){this.majorPerformanceCaveat=this.available=!1;this.maxTextureSize=0;this.supportsColorBufferHalfFloat=this.supportsColorBufferFloatBlend=this.supportsColorBufferFloat=this.supportsTextureHalfFloat=
this.supportsTextureFloat=this.supportsInstancedArrays=this.supportsStandardDerivatives=this.supportsElementIndexUint=this.supportsHighPrecisionFragment=this.supportsVertexShaderSamplers=!1}}class f extends d{constructor(){super(...arguments);this.type=a.ContextType.WEBGL1}}class r extends d{constructor(){super(...arguments);this.type=a.ContextType.WEBGL2;this.supportsTextureHalfFloat=this.supportsTextureFloat=this.supportsInstancedArrays=this.supportsStandardDerivatives=this.supportsElementIndexUint=
!0}}b.getWebGL1Capabilities=e;b.getWebGL2Capabilities=h;b.getWebGLCapabilities=function(y){for(y=a.getContextTypes(y);1<y.length;){const B=u(y.shift());if(B.available)return B}return u(y.shift())};b.getWebGLVersionCapabilities=u;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/contextUtils":function(){define(["exports","../../core/has"],function(b,a){function u(h,g,l={}){return(h=h.getContext(g===b.ContextType.WEBGL1?"webgl":"webgl2",l))?h:null}function e(h){if("3d"===
h)return[b.ContextType.WEBGL2];h=a("esri-force-webgl");return h===b.ContextType.WEBGL1||h===b.ContextType.WEBGL2?[h]:a("mac")&&a("chrome")?[b.ContextType.WEBGL1,b.ContextType.WEBGL2]:[b.ContextType.WEBGL2,b.ContextType.WEBGL1]}b.ContextType=void 0;(function(h){h[h.WEBGL1=1]="WEBGL1";h[h.WEBGL2=2]="WEBGL2"})(b.ContextType||(b.ContextType={}));b.createContext=u;b.createContextForView=function(h,g,l={}){h=e(h);for(const n of h)if(h=u(g,n,l))return h;return null};b.getContextTypes=e;Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../chunks/tslib.es6 ../request ../core/asyncUtils ../core/Error ../core/lang ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../geometry/Extent ../geometry/SpatialReference ./Layer ./mixins/APIKeyMixin ./mixins/ArcGISCachedService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./support/imageUtils ./support/SpriteSource ./support/TileInfo ./support/TilemapCache ./support/vectorTileLayerLoader ../portal/support/jsonContext ../portal/support/urlUtils ../chunks/persistableUrlUtils ../views/2d/engine/vectorTiles/tileInfoUtils ../views/2d/engine/vectorTiles/style/StyleRepository ../views/webgl/capabilities".split(" "),function(b,
a,u,e,h,g,l,n,d,f,r,y,B,x,t,z,m,A,C,k,p,v,E,G,J,I,L,N,O,S,U,aa,Y,ca,da){g=class extends k.BlendLayer(G.ScaleRangeLayer(A.ArcGISCachedService(C.ArcGISService(v.OperationalLayer(E.PortalLayer(p.CustomParametersMixin(m.APIKeyMixin(g.MultiOriginJSONMixin(z))))))))){constructor(...F){super(...F);this._spriteSourceMap=new Map;this.isReference=this.currentStyleInfo=null;this.operationalLayerType="VectorTileLayer";this.tilemapCache=this.style=null;this.type="vector-tile";this.path=this.url=null}normalizeCtorArgs(F,
K){return"string"===typeof F?{url:F,...K}:F}destroy(){if(this.sourceNameToSource)for(const F of Object.values(this.sourceNameToSource))F?.destroy();this.primarySource?.destroy();this._spriteSourceMap.clear()}async prefetchResources(F){await this.loadSpriteSource(globalThis.devicePixelRatio||1,F)}load(F){const K=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},F).catch(l.throwIfAbortError).then(async()=>{if(this.portalItem?.id){var P=`${this.portalItem.itemCdnUrl}/resources/styles/root.json`;
(await a(P,{...F,query:{f:"json",...this.customParameters,token:this.apiKey}})).data&&this.read({url:P},S.createForItemRead(this.portalItem))}}).catch(l.throwIfAbortError).then(()=>this._loadStyle(F));this.addResolvingPromise(K);return Promise.resolve(this)}get attributionDataUrl(){var F=this.currentStyleInfo;F=F?.serviceUrl&&n.urlToObject(F.serviceUrl);return F?(F=this._getDefaultAttribution(F.path))?n.addQueryParameters(F,{...this.customParameters,token:this.apiKey}):null:null}get capabilities(){const F=
this.primarySource;return F?F.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}get fullExtent(){return this.primarySource?.fullExtent||null}get initialExtent(){return this.primarySource?.initialExtent||null}get parsedUrl(){return this.serviceUrl?n.urlToObject(this.serviceUrl):null}get serviceUrl(){return this.currentStyleInfo?.serviceUrl||null}get spatialReference(){return this.tileInfo?.spatialReference??null}get styleUrl(){return this.currentStyleInfo?.styleUrl||
null}writeStyleUrl(F,K){F&&n.isProtocolRelative(F)&&(F=`https:${F}`);const P=U.parseKnownArcGISOnlineDomain(F);K.styleUrl=aa.ensureMainOnlineDomain(F,P)}get tileInfo(){const F=[];for(var K in this.sourceNameToSource)F.push(this.sourceNameToSource[K]);K=this.primarySource?.tileInfo||new L;if(1<F.length)for(let P=0;P<F.length;P++)Y.areSchemasOverlapping(K,F[P].tileInfo)&&(K=Y.unionTileInfos(K,F[P].tileInfo));return K}readTilemapCache(F,K){return K.capabilities?.includes("Tilemap")?new N.TilemapCache({layer:this}):
null}readVersion(F,K){return K.version?parseFloat(K.version):parseFloat(K.currentVersion)}async loadSpriteSource(F=1,K){if(!this._spriteSourceMap.has(F)){var P=da.getWebGLCapabilities("2d").maxTextureSize;const V=this.currentStyleInfo?.spriteUrl?n.addQueryParameters(this.currentStyleInfo.spriteUrl,{...this.customParameters,token:this.apiKey}):null;P=new I({type:"url",spriteUrl:V,pixelRatio:F,spriteFormat:this.currentStyleInfo?.spriteFormat},P);await P.load(K);this._spriteSourceMap.set(F,P)}return this._spriteSourceMap.get(F)}async setSpriteSource(F,
K){if(!F)return null;var P=da.getWebGLCapabilities("2d").maxTextureSize,V=F.spriteUrl;V=V?n.addQueryParameters(V,{...this.customParameters,token:this.apiKey}):null;if(!V&&"url"===F.type)return null;P=new I(F,P);try{await P.load(K);const W=F.pixelRatio||1;this._spriteSourceMap.clear();this._spriteSourceMap.set(W,P);V&&this.currentStyleInfo&&(this.currentStyleInfo.spriteUrl=V);this.emit("spriteSource-change",{spriteSource:P});return P}catch(W){l.throwIfAbortError(W)}return null}async loadStyle(F,K){const P=
F||this.style||this.url;if(this._loadingTask&&"string"===typeof P&&this.url===P)return this._loadingTask.promise;this._loadingTask?.abort();this._loadingTask=u.createTask(V=>{this._spriteSourceMap.clear();return this._getSourceAndStyle(P,{signal:V})},K);return this._loadingTask.promise}getStyleLayerId(F){return this.styleRepository.getStyleLayerId(F)}getStyleLayerIndex(F){return this.styleRepository.getStyleLayerIndex(F)}getPaintProperties(F){return h.clone(this.styleRepository?.getPaintProperties(F))}setPaintProperties(F,
K){const P=this.styleRepository.isPainterDataDriven(F);this.styleRepository.setPaintProperties(F,K);const V=this.styleRepository.isPainterDataDriven(F);this.emit("paint-change",{layer:F,paint:K,isDataDriven:P||V})}getStyleLayer(F){return h.clone(this.styleRepository.getStyleLayer(F))}setStyleLayer(F,K){this.styleRepository.setStyleLayer(F,K);this.emit("style-layer-change",{layer:F,index:K})}deleteStyleLayer(F){this.styleRepository.deleteStyleLayer(F);this.emit("delete-style-layer",{layer:F})}getLayoutProperties(F){return h.clone(this.styleRepository.getLayoutProperties(F))}setLayoutProperties(F,
K){this.styleRepository.setLayoutProperties(F,K);this.emit("layout-change",{layer:F,layout:K})}setStyleLayerVisibility(F,K){this.styleRepository.setStyleLayerVisibility(F,K);this.emit("style-layer-visibility-change",{layer:F,visibility:K})}getStyleLayerVisibility(F){return this.styleRepository.getStyleLayerVisibility(F)}write(F,K){return K?.origin&&!this.styleUrl?(K.messages&&K.messages.push(new e("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,
{layer:this})),null):super.write(F,K)}getTileUrl(F,K,P){return null}async _getSourceAndStyle(F,K){if(!F)throw Error("invalid style!");K=await O.loadMetadata(F,{...K,query:{...this.customParameters,token:this.apiKey}});"webp"!==K.spriteFormat||await J.checkWebPSupport("lossy")||(K.spriteFormat="png");this._set("currentStyleInfo",{...K});"string"===typeof F?(this.url=F,this.style=null):(this.url=null,this.style=F);this._set("sourceNameToSource",K.sourceNameToSource);this._set("primarySource",K.sourceNameToSource[K.primarySourceName]);
this._set("styleRepository",new ca(K.style));this.read(K.layerDefinition,{origin:"service"});this.emit("load-style")}_getDefaultAttribution(F){var K=F.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);F="OpenStreetMap_v2 OpenStreetMap_Daylight_v2 OpenStreetMap_Export_v2 OpenStreetMap_FTS_v2 OpenStreetMap_GCS_v2 World_Basemap World_Basemap_v2 World_Basemap_Export_v2 World_Basemap_GCS_v2 World_Basemap_WGS84 World_Contours_v2".split(" ");
if(K){var P=K[2]&&K[2].toLowerCase();if(P){K=K[1]||"";for(const V of F)if(V.toLowerCase().includes(P))return n.normalize(`//static.arcgis.com/attribution/Vector${K}/${V}`)}}}async _loadStyle(F){return this._loadingTask?.promise??this.loadStyle(null,F)}};b.__decorate([d.property({readOnly:!0})],g.prototype,"attributionDataUrl",null);b.__decorate([d.property({type:["show","hide"]})],g.prototype,"listMode",void 0);b.__decorate([d.property({json:{read:!0,write:!0}})],g.prototype,"blendMode",void 0);b.__decorate([d.property({readOnly:!0,
json:{read:!1}})],g.prototype,"capabilities",null);b.__decorate([d.property({readOnly:!0})],g.prototype,"currentStyleInfo",void 0);b.__decorate([d.property({json:{read:!1},readOnly:!0,type:x})],g.prototype,"fullExtent",null);b.__decorate([d.property({json:{read:!1},readOnly:!0,type:x})],g.prototype,"initialExtent",null);b.__decorate([d.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],g.prototype,"isReference",void 0);b.__decorate([d.property({type:["VectorTileLayer"]})],
g.prototype,"operationalLayerType",void 0);b.__decorate([d.property({readOnly:!0})],g.prototype,"parsedUrl",null);b.__decorate([d.property()],g.prototype,"style",void 0);b.__decorate([d.property({readOnly:!0})],g.prototype,"serviceUrl",null);b.__decorate([d.property({type:t,readOnly:!0})],g.prototype,"spatialReference",null);b.__decorate([d.property({readOnly:!0})],g.prototype,"styleRepository",void 0);b.__decorate([d.property({readOnly:!0})],g.prototype,"sourceNameToSource",void 0);b.__decorate([d.property({readOnly:!0})],
g.prototype,"primarySource",void 0);b.__decorate([d.property({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],g.prototype,"styleUrl",null);b.__decorate([B.writer(["portal-item","web-document"],"styleUrl")],g.prototype,"writeStyleUrl",null);b.__decorate([d.property({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:L})],g.prototype,"tileInfo",null);b.__decorate([d.property()],g.prototype,"tilemapCache",void 0);b.__decorate([r.reader("service",
"tilemapCache",["capabilities","tileInfo"])],g.prototype,"readTilemapCache",null);b.__decorate([d.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],g.prototype,"type",void 0);b.__decorate([d.property({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],g.prototype,"url",void 0);b.__decorate([d.property({readOnly:!0})],g.prototype,"version",void 0);b.__decorate([r.reader("version",["version","currentVersion"])],g.prototype,"readVersion",
null);b.__decorate([d.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],g.prototype,"path",void 0);return g=b.__decorate([y.subclass("esri.layers.VectorTileLayer")],g)});