// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/webgl/BufferObject":function(){define("exports ../../core/arrayUtils ../../core/Logger ../../core/typedArrayUtil ./checkWebGLError ./contextUtils ./enums".split(" "),function(b,a,f,y,k,w,e){const h=f.getLogger("esri.views.webgl.BufferObject");class C{static createIndex(r,x,A){return new C(r,e.BufferType.ELEMENT_ARRAY_BUFFER,x,A)}static createVertex(r,x,A){return new C(r,e.BufferType.ARRAY_BUFFER,x,A)}static createUniform(r,x,A){if(r.type!==w.ContextType.WEBGL2)throw Error("Uniform buffers are supported in WebGL2 only!");
return new C(r,e.BufferType.UNIFORM_BUFFER,x,A)}static createPixelPack(r,x=e.Usage.STREAM_READ,A){if(r.type!==w.ContextType.WEBGL2)throw Error("Pixel pack buffers are supported in WebGL2 only!");r=new C(r,e.BufferType.PIXEL_PACK_BUFFER,x);A&&r.setSize(A);return r}static createPixelUnpack(r,x=e.Usage.STREAM_DRAW,A){if(r.type!==w.ContextType.WEBGL2)throw Error("Pixel unpack buffers are supported in WebGL2 only!");return new C(r,e.BufferType.PIXEL_UNPACK_BUFFER,x,A)}constructor(r,x,A,p){this._context=
r;this.bufferType=x;this.usage=A;this._glName=null;this._size=-1;this._indexType=void 0;r.instanceCounter.increment(e.ResourceType.BufferObject,this);this._glName=this._context.gl.createBuffer();k.checkWebGLError(this._context.gl);p&&this.setData(p)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get byteLength(){return this.bufferType===e.BufferType.ELEMENT_ARRAY_BUFFER?this._indexType===e.DataType.UNSIGNED_INT?4*this._size:2*this._size:this._size}get _isVAOAware(){return this.bufferType===
e.BufferType.ELEMENT_ARRAY_BUFFER||this.bufferType===e.BufferType.ARRAY_BUFFER}dispose(){this._context?.gl?(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(e.ResourceType.BufferObject,this),this._context=null):this._glName&&h.warn("Leaked WebGL buffer object")}setSize(r,x=null){0>=r&&h.error("Buffer size needs to be positive!");if(this.bufferType===e.BufferType.ELEMENT_ARRAY_BUFFER&&null!=x)switch(this._indexType=x,x){case e.DataType.UNSIGNED_SHORT:r*=
2;break;case e.DataType.UNSIGNED_INT:r*=4}this._setBufferData(r)}setData(r){if(r){var x=r.byteLength;this.bufferType===e.BufferType.ELEMENT_ARRAY_BUFFER&&(y.isUint16Array(r)&&(x/=2,this._indexType=e.DataType.UNSIGNED_SHORT),y.isUint32Array(r)&&(x/=4,this._indexType=e.DataType.UNSIGNED_INT));this._setBufferData(x,r)}}_setBufferData(r,x=null){this._size=r;const A=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null);this._context.bindBuffer(this);const p=this._context.gl;null!=x?
p.bufferData(this.bufferType,x,this.usage):p.bufferData(this.bufferType,r,this.usage);k.checkWebGLError(p);this._isVAOAware&&this._context.bindVAO(A)}setSubData(r,x,A,p){if(r){(0>x||x*r.BYTES_PER_ELEMENT>=this.byteLength)&&h.error("offset is out of range!");A>=p&&h.error("end must be bigger than start!");(x+(p-A))*r.BYTES_PER_ELEMENT>this.byteLength&&h.error("An attempt to write beyond the end of the buffer!");var u=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null);this._context.bindBuffer(this);
var F=this._context.gl;this._context.type===w.ContextType.WEBGL2?F.bufferSubData(this.bufferType,x*r.BYTES_PER_ELEMENT,r,A,p-A):(A=0===A&&p===r.length?r:r.subarray(A,p),F.bufferSubData(this.bufferType,x*r.BYTES_PER_ELEMENT,A));k.checkWebGLError(F);this._isVAOAware&&this._context.bindVAO(u)}}getSubData(r,x=0,A,p){if(this._context.type!==w.ContextType.WEBGL2)h.error("Get buffer subdata is supported in WebGL2 only!");else if(0>A||0>p)h.error("Problem getting subdata: offset and length were less than zero!");
else{var u=a.isArrayLike(r)?r.BYTES_PER_ELEMENT:1;u*((A??0)+(p??0))>r.byteLength?h.error("Problem getting subdata: offset and length exceeded destination size!"):(x+u*(p??0)>this.byteLength&&h.warn("Potential problem getting subdata: requested data exceeds buffer size!"),u=this._context.gl,this._context.bindBuffer(this,e.BufferType.COPY_READ_BUFFER),u.getBufferSubData(e.BufferType.COPY_READ_BUFFER,x,r,A,p),this._context.unbindBuffer(e.BufferType.COPY_READ_BUFFER))}}async getSubDataAsync(r,x=0,A,p){this._context.type!==
w.ContextType.WEBGL2?h.error("Get buffer subdata is supported in WebGL2 only!"):(await this._context.clientWaitAsync(),this.getSubData(r,x,A,p))}}b.BufferObject=C;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/checkWebGLError":function(){define(["exports","../../core/Error","../../core/has","../../core/Logger"],function(b,a,f,y){function k(h,C){switch(C){case h.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";
case h.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case h.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case h.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case h.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case h.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";
default:return"Unknown error"}}const w=y.getLogger("esri.views.webgl.checkWebGLError"),e=!!f("enable-feature:webgl-debug");b.checkWebGLError=function(h){if(e){const C=h.getError();C&&(h=k(h,C),w.error(new a("webgl-error","WebGL error occurred",{message:h,stack:Error().stack})))}};b.hasFeatureFlagWebGLDebug=e;b.webglDebugEnabled=function(){return e};b.webglValidateShadersEnabled=function(){return e};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/contextUtils":function(){define(["exports",
"../../core/has"],function(b,a){function f(k,w,e={}){return(k=k.getContext(w===b.ContextType.WEBGL1?"webgl":"webgl2",e))?k:null}function y(k){if("3d"===k)return[b.ContextType.WEBGL2];k=a("esri-force-webgl");return k===b.ContextType.WEBGL1||k===b.ContextType.WEBGL2?[k]:a("mac")&&a("chrome")?[b.ContextType.WEBGL1,b.ContextType.WEBGL2]:[b.ContextType.WEBGL2,b.ContextType.WEBGL1]}b.ContextType=void 0;(function(k){k[k.WEBGL1=1]="WEBGL1";k[k.WEBGL2=2]="WEBGL2"})(b.ContextType||(b.ContextType={}));b.createContext=
f;b.createContextForView=function(k,w,e={}){k=y(k);for(const h of k)if(k=f(w,h,e))return k;return null};b.getContextTypes=y;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/enums":function(){define(["exports"],function(b){b.ClearBufferBit=void 0;(function(a){a[a.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT";a[a.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT";a[a.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT"})(b.ClearBufferBit||(b.ClearBufferBit={}));b.PrimitiveType=void 0;(function(a){a[a.POINTS=
0]="POINTS";a[a.LINES=1]="LINES";a[a.LINE_LOOP=2]="LINE_LOOP";a[a.LINE_STRIP=3]="LINE_STRIP";a[a.TRIANGLES=4]="TRIANGLES";a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP";a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(b.PrimitiveType||(b.PrimitiveType={}));b.BlendFactor=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.ONE=1]="ONE";a[a.SRC_COLOR=768]="SRC_COLOR";a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR";a[a.SRC_ALPHA=770]="SRC_ALPHA";a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA";a[a.DST_ALPHA=772]="DST_ALPHA";
a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA";a[a.DST_COLOR=774]="DST_COLOR";a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR";a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE";a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR";a[a.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR";a[a.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA";a[a.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"})(b.BlendFactor||(b.BlendFactor={}));b.BlendOperation=void 0;(function(a){a[a.ADD=32774]="ADD";a[a.MIN=32775]=
"MIN";a[a.MAX=32776]="MAX";a[a.SUBTRACT=32778]="SUBTRACT";a[a.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"})(b.BlendOperation||(b.BlendOperation={}));b.BufferType=void 0;(function(a){a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER";a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER";a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER";a[a.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER";a[a.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER";a[a.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER";a[a.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER"})(b.BufferType||
(b.BufferType={}));b.Face=void 0;(function(a){a[a.FRONT=1028]="FRONT";a[a.BACK=1029]="BACK";a[a.FRONT_AND_BACK=1032]="FRONT_AND_BACK"})(b.Face||(b.Face={}));b.CullMode=void 0;(function(a){a[a.CW=2304]="CW";a[a.CCW=2305]="CCW"})(b.CullMode||(b.CullMode={}));b.DataType=void 0;(function(a){a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.INT=5124]="INT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.FLOAT=5126]="FLOAT"})(b.DataType||
(b.DataType={}));b.CompareFunction=void 0;(function(a){a[a.NEVER=512]="NEVER";a[a.LESS=513]="LESS";a[a.EQUAL=514]="EQUAL";a[a.LEQUAL=515]="LEQUAL";a[a.GREATER=516]="GREATER";a[a.NOTEQUAL=517]="NOTEQUAL";a[a.GEQUAL=518]="GEQUAL";a[a.ALWAYS=519]="ALWAYS"})(b.CompareFunction||(b.CompareFunction={}));b.StencilOperation=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.KEEP=7680]="KEEP";a[a.REPLACE=7681]="REPLACE";a[a.INCR=7682]="INCR";a[a.DECR=7683]="DECR";a[a.INVERT=5386]="INVERT";a[a.INCR_WRAP=34055]="INCR_WRAP";
a[a.DECR_WRAP=34056]="DECR_WRAP"})(b.StencilOperation||(b.StencilOperation={}));b.TextureSamplingMode=void 0;(function(a){a[a.NEAREST=9728]="NEAREST";a[a.LINEAR=9729]="LINEAR";a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST";a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST";a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR";a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(b.TextureSamplingMode||(b.TextureSamplingMode={}));b.TextureWrapMode=void 0;(function(a){a[a.CLAMP_TO_EDGE=
33071]="CLAMP_TO_EDGE";a[a.REPEAT=10497]="REPEAT";a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(b.TextureWrapMode||(b.TextureWrapMode={}));b.TextureType=void 0;(function(a){a[a.TEXTURE_2D=3553]="TEXTURE_2D";a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP";a[a.TEXTURE_3D=32879]="TEXTURE_3D";a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X";a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X";a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=
34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y";a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z";a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"})(b.TextureType||(b.TextureType={}));b.PixelFormat=void 0;(function(a){a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8";a[a.ALPHA=6406]="ALPHA";a[a.RGB=6407]="RGB";a[a.RGBA=6408]="RGBA";a[a.LUMINANCE=
6409]="LUMINANCE";a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA";a[a.RED=6403]="RED";a[a.RG=33319]="RG";a[a.RED_INTEGER=36244]="RED_INTEGER";a[a.RG_INTEGER=33320]="RG_INTEGER";a[a.RGB_INTEGER=36248]="RGB_INTEGER";a[a.RGBA_INTEGER=36249]="RGBA_INTEGER"})(b.PixelFormat||(b.PixelFormat={}));b.SizedPixelFormat=void 0;(function(a){a[a.RGBA4=32854]="RGBA4";a[a.R16F=33325]="R16F";a[a.RG16F=33327]="RG16F";a[a.RGB32F=34837]="RGB32F";a[a.RGBA16F=34842]="RGBA16F";a[a.R32F=33326]="R32F";a[a.RG32F=33328]="RG32F";
a[a.RGBA32F=34836]="RGBA32F";a[a.R11F_G11F_B10F=35898]="R11F_G11F_B10F";a[a.RGB8=32849]="RGB8";a[a.RGBA8=32856]="RGBA8";a[a.RGB5_A1=32855]="RGB5_A1";a[a.R8=33321]="R8";a[a.RG8=33323]="RG8";a[a.R8I=33329]="R8I";a[a.R8UI=33330]="R8UI";a[a.R16I=33331]="R16I";a[a.R16UI=33332]="R16UI";a[a.R32I=33333]="R32I";a[a.R32UI=33334]="R32UI";a[a.RG8I=33335]="RG8I";a[a.RG8UI=33336]="RG8UI";a[a.RG16I=33337]="RG16I";a[a.RG16UI=33338]="RG16UI";a[a.RG32I=33339]="RG32I";a[a.RG32UI=33340]="RG32UI";a[a.RGB16F=34843]="RGB16F";
a[a.RGB9_E5=35901]="RGB9_E5";a[a.SRGB8=35905]="SRGB8";a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8";a[a.RGB565=36194]="RGB565";a[a.RGBA32UI=36208]="RGBA32UI";a[a.RGB32UI=36209]="RGB32UI";a[a.RGBA16UI=36214]="RGBA16UI";a[a.RGB16UI=36215]="RGB16UI";a[a.RGBA8UI=36220]="RGBA8UI";a[a.RGB8UI=36221]="RGB8UI";a[a.RGBA32I=36226]="RGBA32I";a[a.RGB32I=36227]="RGB32I";a[a.RGBA16I=36232]="RGBA16I";a[a.RGB16I=36233]="RGB16I";a[a.RGBA8I=36238]="RGBA8I";a[a.RGB8I=36239]="RGB8I";a[a.R8_SNORM=36756]="R8_SNORM";a[a.RG8_SNORM=
36757]="RG8_SNORM";a[a.RGB8_SNORM=36758]="RGB8_SNORM";a[a.RGBA8_SNORM=36759]="RGBA8_SNORM";a[a.RGB10_A2=32857]="RGB10_A2";a[a.RGB10_A2UI=36975]="RGB10_A2UI"})(b.SizedPixelFormat||(b.SizedPixelFormat={}));b.PixelType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8";a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4";a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1";a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5";
a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.INT=5124]="INT";a[a.HALF_FLOAT=5131]="HALF_FLOAT";a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV";a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV";a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV";a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"})(b.PixelType||(b.PixelType={}));b.RenderbufferFormat=
void 0;(function(a){a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16";a[a.STENCIL_INDEX8=36168]="STENCIL_INDEX8";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24";a[a.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F";a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8";a[a.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"})(b.RenderbufferFormat||(b.RenderbufferFormat={}));b.Usage=void 0;(function(a){a[a.STATIC_DRAW=35044]="STATIC_DRAW";a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW";
a[a.STREAM_DRAW=35040]="STREAM_DRAW";a[a.STATIC_READ=35045]="STATIC_READ";a[a.DYNAMIC_READ=35049]="DYNAMIC_READ";a[a.STREAM_READ=35041]="STREAM_READ";a[a.STATIC_COPY=35046]="STATIC_COPY";a[a.DYNAMIC_COPY=35050]="DYNAMIC_COPY";a[a.STREAM_COPY=35042]="STREAM_COPY"})(b.Usage||(b.Usage={}));b.ShaderType=void 0;(function(a){a[a.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER";a[a.VERTEX_SHADER=35633]="VERTEX_SHADER"})(b.ShaderType||(b.ShaderType={}));b.FramebufferTarget=void 0;(function(a){a[a.FRAMEBUFFER=36160]=
"FRAMEBUFFER";a[a.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER";a[a.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"})(b.FramebufferTarget||(b.FramebufferTarget={}));b.ResourceType=void 0;(function(a){a[a.Texture=0]="Texture";a[a.BufferObject=1]="BufferObject";a[a.VertexArrayObject=2]="VertexArrayObject";a[a.Shader=3]="Shader";a[a.Program=4]="Program";a[a.FramebufferObject=5]="FramebufferObject";a[a.Renderbuffer=6]="Renderbuffer";a[a.Sync=7]="Sync";a[a.UNCOUNTED=8]="UNCOUNTED";a[a.LinesOfCode=8]="LinesOfCode";
a[a.Uniform=9]="Uniform";a[a.COUNT=10]="COUNT"})(b.ResourceType||(b.ResourceType={}));b.ColorAttachment=void 0;(function(a){a[a.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0";a[a.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1";a[a.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2";a[a.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3";a[a.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4";a[a.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5";a[a.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6";a[a.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7";
a[a.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8";a[a.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9";a[a.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10";a[a.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11";a[a.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12";a[a.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13";a[a.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14";a[a.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"})(b.ColorAttachment||(b.ColorAttachment={}));b.SpecialDrawBuffers=void 0;(function(a){a[a.NONE=0]=
"NONE";a[a.BACK=1029]="BACK"})(b.SpecialDrawBuffers||(b.SpecialDrawBuffers={}));b.CompressedTextureFormat=void 0;(function(a){a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT";a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC";a[a.COMPRESSED_SIGNED_R11_EAC=37489]=
"COMPRESSED_SIGNED_R11_EAC";a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC";a[a.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC";a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2";a[a.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2";a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC";
a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(b.CompressedTextureFormat||(b.CompressedTextureFormat={}));b.UniformType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.FLOAT_VEC2=35664]="FLOAT_VEC2";a[a.FLOAT_VEC3=35665]="FLOAT_VEC3";a[a.FLOAT_VEC4=35666]="FLOAT_VEC4";a[a.INT=5124]="INT";a[a.INT_VEC2=35667]="INT_VEC2";a[a.INT_VEC3=35668]="INT_VEC3";a[a.INT_VEC4=35669]="INT_VEC4";a[a.BOOL=35670]="BOOL";a[a.BOOL_VEC2=35671]="BOOL_VEC2";a[a.BOOL_VEC3=35672]="BOOL_VEC3";
a[a.BOOL_VEC4=35673]="BOOL_VEC4";a[a.FLOAT_MAT2=35674]="FLOAT_MAT2";a[a.FLOAT_MAT3=35675]="FLOAT_MAT3";a[a.FLOAT_MAT4=35676]="FLOAT_MAT4";a[a.SAMPLER_2D=35678]="SAMPLER_2D";a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2";a[a.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3";a[a.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4";a[a.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3";a[a.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4";a[a.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2";
a[a.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4";a[a.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2";a[a.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3";a[a.SAMPLER_3D=35679]="SAMPLER_3D";a[a.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW";a[a.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY";a[a.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW";a[a.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW";a[a.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D";a[a.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D";a[a.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE";a[a.INT_SAMPLER_2D_ARRAY=
36303]="INT_SAMPLER_2D_ARRAY";a[a.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D";a[a.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D";a[a.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE";a[a.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"})(b.UniformType||(b.UniformType={}));b.SyncParameter=void 0;(function(a){a[a.OBJECT_TYPE=37138]="OBJECT_TYPE";a[a.SYNC_CONDITION=37139]="SYNC_CONDITION";a[a.SYNC_STATUS=37140]="SYNC_STATUS";a[a.SYNC_FLAGS=37141]=
"SYNC_FLAGS"})(b.SyncParameter||(b.SyncParameter={}));b.SyncStatus=void 0;(function(a){a[a.UNSIGNALED=37144]="UNSIGNALED";a[a.SIGNALED=37145]="SIGNALED"})(b.SyncStatus||(b.SyncStatus={}));b.ClientWaitSyncStatus=void 0;(function(a){a[a.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED";a[a.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED";a[a.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED";a[a.WAIT_FAILED=37149]="WAIT_FAILED"})(b.ClientWaitSyncStatus||(b.ClientWaitSyncStatus={}));b.SyncCondition=void 0;(function(a){a[a.SYNC_GPU_COMMANDS_COMPLETE=
37143]="SYNC_GPU_COMMANDS_COMPLETE"})(b.SyncCondition||(b.SyncCondition={}));b.SyncFlag=void 0;(function(a){a[a.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"})(b.SyncFlag||(b.SyncFlag={}));b.DepthStencilAttachment=33306;b.baseTextureUnit=33984;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/FramebufferObject":function(){define("exports ../../core/has ../../core/Logger ../../core/maybe ./BufferObject ./checkWebGLError ./contextUtils ./enums ./GLObjectType ./Renderbuffer ./Texture".split(" "),
function(b,a,f,y,k,w,e,h,C,r,x){function A(d){return null!=d&&"type"in d&&d.type===C.GLObjectType.Texture}function p(d,l){const n=Math.max(d.width,d.height);return n>l?(F.warn(`Resizing FBO attachment size ${d.width}x${d.height} to device limit ${l}`),l/=n,d.width=Math.round(d.width*l),d.height=Math.round(d.height*l),!1):!0}function u(d){return d.descriptor.target===h.TextureType.TEXTURE_CUBE_MAP?h.TextureType.TEXTURE_CUBE_MAP_POSITIVE_X:h.TextureType.TEXTURE_2D}const F=f.getLogger("esri.views.webgl.FramebufferObject");
class G{constructor(d,l,n=null){this._context=d;this._glName=null;this._colorAttachments=new Map;this._depthStencilTexture=this._depthStencilBuffer=null;this._initialized=!1;d.instanceCounter.increment(h.ResourceType.FramebufferObject,this);d=A(l)?l:new x.Texture(this._context,l);this._colorAttachments.set(h.ColorAttachment.COLOR_ATTACHMENT0,d);this._validateTextureDescriptor(d.descriptor);this._validateColorAttachmentPoint(h.ColorAttachment.COLOR_ATTACHMENT0);null!=n&&(A(n)||null!=n&&"pixelFormat"in
n?(this._context.capabilities.depthTexture||console.error("Setting the depth/stencil texture as an attachment requires WEBGL_depth_texture or WebGL2"),this._depthStencilTexture=A(n)?n:new x.Texture(this._context,n),this._validateTextureDescriptor(this._depthStencilTexture.descriptor)):(this._depthStencilBuffer=n=null!=n&&"type"in n&&n.type===C.GLObjectType.RenderBuffer?n:new r.Renderbuffer(this._context,n),this._validateRenderBufferDescriptor(n.descriptor)))}dispose(){if(0!==this._colorAttachments.size||
this._glName){var d=this._context.getBoundFramebufferObject();this._colorAttachments.forEach((l,n)=>this.detachColorTexture(n)?.dispose());this.detachDepthStencilBuffer()?.dispose();this.detachDepthStencilTexture()?.dispose();this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null);this._context.bindFramebuffer(d);this._context.instanceCounter.decrement(h.ResourceType.FramebufferObject,this)}}get glName(){return this._glName}get colorTexture(){return this._colorAttachments.get(h.ColorAttachment.COLOR_ATTACHMENT0)}get depthStencil(){return this._depthStencilTexture||
this._depthStencilBuffer}get depthStencilTexture(){return this._depthStencilTexture}get width(){return this._colorAttachments.get(h.ColorAttachment.COLOR_ATTACHMENT0)?.descriptor?.width??0}get height(){return this._colorAttachments.get(h.ColorAttachment.COLOR_ATTACHMENT0)?.descriptor?.height??0}get gpuMemoryUsage(){return[...this._colorAttachments].reduce((d,[,l])=>d+l.gpuMemoryUsage,this.depthStencil?.gpuMemoryUsage??0)}getColorTexture(d){return(d=this._colorAttachments.get(d))&&A(d)?d:null}get colorAttachments(){return[...this._colorAttachments.keys()]}attachColorTexture(d,
l=h.ColorAttachment.COLOR_ATTACHMENT0){d&&(this._validateColorAttachmentPoint(l),this._validateTextureDescriptor(d.descriptor),this.detachColorTexture(l)?.dispose(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(d.glName,l)),this._colorAttachments.set(l,d))}detachColorTexture(d=h.ColorAttachment.COLOR_ATTACHMENT0){const l=this._colorAttachments.get(d);if(l){if(this._initialized){const n=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this);
this._framebufferTexture2D(null,d);this._context.bindFramebuffer(n)}this._colorAttachments.delete(d);return l}}setColorTextureTarget(d,l=h.ColorAttachment.COLOR_ATTACHMENT0){const n=this._colorAttachments.get(l);n&&this._framebufferTexture2D(n.glName,l,d)}attachDepthStencil(d){if(d)switch(d.type){case C.GLObjectType.Texture:return this._attachDepthStencilTexture(d);case C.GLObjectType.RenderBuffer:return this._attachDepthStencilBuffer(d)}}_attachDepthStencilTexture(d){if(null!=d){var l=d.descriptor;
l.pixelFormat!==h.PixelFormat.DEPTH_STENCIL&&l.pixelFormat!==h.PixelFormat.DEPTH24_STENCIL8&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");l.dataType!==h.PixelType.UNSIGNED_INT_24_8&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!");this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");this._validateTextureDescriptor(l);this._disposeDepthStencilAttachments();
this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(d.glName,h.DepthStencilAttachment));this._depthStencilTexture?.dispose();this._depthStencilTexture=d}}detachDepthStencilTexture(){const d=this._depthStencilTexture;d&&this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,h.DepthStencilAttachment));this._depthStencilTexture=null;return d}_attachDepthStencilBuffer(d){if(null!=d){var l=d.descriptor;this._validateRenderBufferDescriptor(l);
this._disposeDepthStencilAttachments();if(this._initialized){this._context.bindFramebuffer(this);const n=this._context.gl;l=this._getGLAttachmentPoint(l);n.framebufferRenderbuffer(h.FramebufferTarget.FRAMEBUFFER,l,n.RENDERBUFFER,d.glName)}this._depthStencilBuffer=d}}detachDepthStencilBuffer(){const d=this._depthStencilBuffer;if(d&&this._initialized){this._context.bindFramebuffer(this);const l=this._context.gl,n=this._getGLAttachmentPoint(d.descriptor);l.framebufferRenderbuffer(h.FramebufferTarget.FRAMEBUFFER,
n,l.RENDERBUFFER,null)}this._depthStencilBuffer=null;return d}copyToTexture(d,l,n,E,c,m,t){(0>d||0>l||0>c||0>m)&&console.error("Offsets cannot be negative!");(0>=n||0>=E)&&console.error("Copy width and height must be greater than zero!");var g=t.descriptor;t.descriptor.target!==h.TextureType.TEXTURE_2D&&console.error("Texture target must be TEXTURE_2D!");(null==g?.width||null==g?.height||d+n>this.width||l+E>this.height||c+n>g.width||m+E>g.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");
g=this._context;t=g.bindTexture(t,x.Texture.TEXTURE_UNIT_FOR_UPDATES);g.setActiveTexture(x.Texture.TEXTURE_UNIT_FOR_UPDATES);g.bindFramebuffer(this);g.gl.copyTexSubImage2D(h.TextureType.TEXTURE_2D,0,c,m,d,l,n,E);g.bindTexture(t,x.Texture.TEXTURE_UNIT_FOR_UPDATES)}readPixels(d,l,n,E,c,m,t){(0>=n||0>=E)&&console.error("Copy width and height must be greater than zero!");t||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(d,l,n,E,c,m,t)}async readPixelsAsync(d,
l,n,E,c,m,t){if(this._context.type!==e.ContextType.WEBGL2)w.webglDebugEnabled()&&console.warn("Attempting to read pixels using pixel buffer object without WebGL2"),this.readPixels(d,l,n,E,c,m,t);else{var g=this._context.gl,D=k.BufferObject.createPixelPack(this._context,h.Usage.STREAM_READ,t.byteLength);this._context.bindBuffer(D);this._context.bindFramebuffer(this);g.readPixels(d,l,n,E,c,m,0);this._context.unbindBuffer(h.BufferType.PIXEL_PACK_BUFFER);await D.getSubDataAsync(t);D.dispose()}}resize(d,
l){if(this.width!==d||this.height!==l){var n={width:d,height:l};p(n,this._context.parameters.maxTextureSize);this._colorAttachments.forEach(E=>E.resize(n.width,n.height));this._depthStencilTexture?.resize(n.width,n.height);this._initialized&&(p(n,this._context.parameters.maxRenderbufferSize),this._depthStencilBuffer?.resize(n.width,n.height),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1)}}initializeAndBind(d=h.FramebufferTarget.FRAMEBUFFER){const l=
this._context.gl;if(this._initialized)l.bindFramebuffer(d,this.glName);else{this._glName&&l.deleteFramebuffer(this._glName);var n=l.createFramebuffer();l.bindFramebuffer(d,n);this._colorAttachments.forEach((E,c)=>this._framebufferTexture2D(E.glName,c,u(E),d));if(this._depthStencilBuffer){const E=this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);l.framebufferRenderbuffer(d,E,l.RENDERBUFFER,this._depthStencilBuffer.glName)}else this._depthStencilTexture&&this._framebufferTexture2D(this._depthStencilTexture.glName,
l.DEPTH_STENCIL_ATTACHMENT,u(this._depthStencilTexture),d);w.webglDebugEnabled()&&l.checkFramebufferStatus(d)!==l.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!");this._glName=n;this._initialized=!0}}_framebufferTexture2D(d,l=h.ColorAttachment.COLOR_ATTACHMENT0,n=h.TextureType.TEXTURE_2D,E=h.FramebufferTarget.FRAMEBUFFER,c=0){this._context.gl.framebufferTexture2D(E,l,n,d,c)}_disposeDepthStencilAttachments(){const d=this._context.gl;if(this._depthStencilBuffer){if(this._initialized){this._context.bindFramebuffer(this);
const l=this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);d.framebufferRenderbuffer(h.FramebufferTarget.FRAMEBUFFER,l,d.RENDERBUFFER,null)}this._depthStencilBuffer=y.disposeMaybe(this._depthStencilBuffer)}this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,d.DEPTH_STENCIL_ATTACHMENT)),this._depthStencilTexture=y.disposeMaybe(this._depthStencilTexture))}_validateTextureDescriptor(d){d.target!==h.TextureType.TEXTURE_2D&&d.target!==
h.TextureType.TEXTURE_CUBE_MAP&&console.error("Texture type must be TEXTURE_2D or TEXTURE_CUBE_MAP!");p(d,this._context.parameters.maxTextureSize);this._validateBufferDimensions(d)}_validateRenderBufferDescriptor(d){p(d,this._context.parameters.maxRenderbufferSize);this._validateBufferDimensions(d)}_validateBufferDimensions(d){0>=d.width&&(d.width=this.width);0>=d.height&&(d.height=this.height);0<this.width&&0<this.height&&(this.width!==d.width||this.height!==d.height)&&console.error("Attachment size must match framebuffer size!")}_getGLAttachmentPoint(d){switch(d.internalFormat){case h.RenderbufferFormat.DEPTH_COMPONENT16:case h.RenderbufferFormat.DEPTH_COMPONENT24:case h.RenderbufferFormat.DEPTH_COMPONENT32F:return this._context.gl.DEPTH_ATTACHMENT;
case h.RenderbufferFormat.DEPTH24_STENCIL8:case h.RenderbufferFormat.DEPTH32F_STENCIL8:case h.RenderbufferFormat.DEPTH_STENCIL:return this._context.gl.DEPTH_STENCIL_ATTACHMENT;case h.RenderbufferFormat.STENCIL_INDEX8:return this._context.gl.STENCIL_ATTACHMENT}}_validateColorAttachmentPoint(d){if(-1===G._MAX_COLOR_ATTACHMENTS){const l=this._context.capabilities.drawBuffers;G._MAX_COLOR_ATTACHMENTS=l?this._context.gl.getParameter(l.MAX_COLOR_ATTACHMENTS):1}d-=h.ColorAttachment.COLOR_ATTACHMENT0;d+1>
G._MAX_COLOR_ATTACHMENTS&&f.getLogger("esri.views.webgl.FrameBufferObject").error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${d+1}. Implementation supports up to ${G._MAX_COLOR_ATTACHMENTS} color attachments`)}}G._MAX_COLOR_ATTACHMENTS=-1;b.FramebufferObject=G;b.ensureAttachmentMaxSize=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/GLObjectType":function(){define(["exports"],function(b){b.GLObjectType=void 0;var a=b.GLObjectType||
(b.GLObjectType={});a[a.Texture=0]="Texture";a[a.RenderBuffer=1]="RenderBuffer";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/Renderbuffer":function(){define(["exports","./contextUtils","./enums","./GLObjectType","./RenderbufferDescriptor"],function(b,a,f,y,k){class w{constructor(e,h){this._context=e;this._descriptor=h;this.type=y.GLObjectType.RenderBuffer;this._context.instanceCounter.increment(f.ResourceType.Renderbuffer,this);e=this._context.gl;this.glName=e.createRenderbuffer();
this._context.bindRenderbuffer(this);const {width:C,height:r,internalFormat:x,multisampled:A}=h;if(A){if(this._context.type!==a.ContextType.WEBGL2)throw Error("Multisampled renderbuffers are not supported in WebGL1!");e.renderbufferStorageMultisample(e.RENDERBUFFER,this.samples,x,C,r)}else e.renderbufferStorage(e.RENDERBUFFER,x,C,r)}get descriptor(){return this._descriptor}get samples(){const e=this._descriptor.samples,h=this._context.parameters.maxSamples;return e?Math.min(e,h):h}get gpuMemoryUsage(){return k.estimateMemory(this._descriptor)}resize(e,
h){const C=this._descriptor;if(C.width!==e||C.height!==h)C.width=e,C.height=h,e=this._context.gl,this._context.bindRenderbuffer(this),C.multisampled?e.renderbufferStorageMultisample(e.RENDERBUFFER,this.samples,C.internalFormat,C.width,C.height):e.renderbufferStorage(e.RENDERBUFFER,C.internalFormat,C.width,C.height)}dispose(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(f.ResourceType.Renderbuffer,this),this._context=null)}}b.Renderbuffer=
w;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/RenderbufferDescriptor":function(){define(["exports","./Util"],function(b,a){class f{constructor(y,k,w=k){this.internalFormat=y;this.width=k;this.height=w;this.multisampled=!1;this.samples=1}}b.RenderbufferDescriptor=f;b.estimateMemory=function(y){return 0>=y.width||0>=y.height||null==y.internalFormat?0:y.width*y.height*a.getBytesPerElementFormat(y.internalFormat)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/webgl/Util":function(){define(["exports","../../core/has","./enums"],function(b,a,f){function y(k){return k[0].stride}b.bindVertexBufferLayout=function(k,w,e,h,C=0){const r=k.gl;k.bindBuffer(e);for(const A of h)if(e=w.get(A.name),void 0===e&&console.error(`There is no location for vertex attribute '${A.name}' defined.`),h=C*A.stride,4>=A.count)r.vertexAttribPointer(e,A.count,A.type,A.normalized,A.stride,A.offset+h),r.enableVertexAttribArray(e),0<A.divisor&&k.gl2?.vertexAttribDivisor(e,
A.divisor);else if(9===A.count)for(var x=0;3>x;x++)r.vertexAttribPointer(e+x,3,A.type,A.normalized,A.stride,A.offset+12*x+h),r.enableVertexAttribArray(e+x),0<A.divisor&&k.gl2?.vertexAttribDivisor(e+x,A.divisor);else if(16===A.count)for(x=0;4>x;x++)r.vertexAttribPointer(e+x,4,A.type,A.normalized,A.stride,A.offset+16*x+h),r.enableVertexAttribArray(e+x),0<A.divisor&&k.gl2?.vertexAttribDivisor(e+x,A.divisor);else console.error("Unsupported vertex attribute element count: "+A.count)};b.getBytesPerElementFormat=
function(k){switch(k){case f.PixelFormat.ALPHA:case f.PixelFormat.LUMINANCE:case f.PixelFormat.RED:case f.PixelFormat.RED_INTEGER:case f.SizedPixelFormat.R8:case f.SizedPixelFormat.R8I:case f.SizedPixelFormat.R8UI:case f.SizedPixelFormat.R8_SNORM:case f.RenderbufferFormat.STENCIL_INDEX8:return 1;case f.PixelFormat.LUMINANCE_ALPHA:case f.PixelFormat.RG:case f.PixelFormat.RG_INTEGER:case f.SizedPixelFormat.RGBA4:case f.SizedPixelFormat.R16F:case f.SizedPixelFormat.R16I:case f.SizedPixelFormat.R16UI:case f.SizedPixelFormat.RG8:case f.SizedPixelFormat.RG8I:case f.SizedPixelFormat.RG8UI:case f.SizedPixelFormat.RG8_SNORM:case f.SizedPixelFormat.RGB565:case f.SizedPixelFormat.RGB5_A1:case f.RenderbufferFormat.DEPTH_COMPONENT16:return 2;
case f.PixelFormat.DEPTH_COMPONENT:case f.PixelFormat.RGB:case f.PixelFormat.RGB_INTEGER:case f.SizedPixelFormat.RGB8:case f.SizedPixelFormat.RGB8I:case f.SizedPixelFormat.RGB8UI:case f.SizedPixelFormat.RGB8_SNORM:case f.SizedPixelFormat.SRGB8:case f.RenderbufferFormat.DEPTH_COMPONENT24:return 3;case f.PixelFormat.DEPTH_STENCIL:case f.PixelFormat.DEPTH24_STENCIL8:case f.PixelFormat.RGBA:case f.PixelFormat.RGBA_INTEGER:case f.SizedPixelFormat.RGBA8:case f.SizedPixelFormat.R32F:case f.SizedPixelFormat.R11F_G11F_B10F:case f.SizedPixelFormat.RG16F:case f.SizedPixelFormat.R32I:case f.SizedPixelFormat.R32UI:case f.SizedPixelFormat.RG16I:case f.SizedPixelFormat.RG16UI:case f.SizedPixelFormat.RGBA8I:case f.SizedPixelFormat.RGBA8UI:case f.SizedPixelFormat.RGBA8_SNORM:case f.SizedPixelFormat.SRGB8_ALPHA8:case f.SizedPixelFormat.RGB9_E5:case f.SizedPixelFormat.RGB10_A2UI:case f.SizedPixelFormat.RGB10_A2:case f.RenderbufferFormat.DEPTH_STENCIL:case f.RenderbufferFormat.DEPTH_COMPONENT32F:case f.RenderbufferFormat.DEPTH24_STENCIL8:return 4;
case f.RenderbufferFormat.DEPTH32F_STENCIL8:return 5;case f.SizedPixelFormat.RGB16F:case f.SizedPixelFormat.RGB16I:case f.SizedPixelFormat.RGB16UI:return 6;case f.SizedPixelFormat.RG32F:case f.SizedPixelFormat.RG32I:case f.SizedPixelFormat.RG32UI:case f.SizedPixelFormat.RGBA16F:case f.SizedPixelFormat.RGBA16I:case f.SizedPixelFormat.RGBA16UI:return 8;case f.SizedPixelFormat.RGB32F:case f.SizedPixelFormat.RGB32I:case f.SizedPixelFormat.RGB32UI:return 12;case f.SizedPixelFormat.RGBA32F:case f.SizedPixelFormat.RGBA32I:case f.SizedPixelFormat.RGBA32UI:return 16;
case f.CompressedTextureFormat.COMPRESSED_RGB_S3TC_DXT1_EXT:case f.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT1_EXT:return.5;case f.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT3_EXT:case f.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case f.CompressedTextureFormat.COMPRESSED_R11_EAC:case f.CompressedTextureFormat.COMPRESSED_SIGNED_R11_EAC:case f.CompressedTextureFormat.COMPRESSED_RGB8_ETC2:case f.CompressedTextureFormat.COMPRESSED_SRGB8_ETC2:case f.CompressedTextureFormat.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case f.CompressedTextureFormat.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return.5;
case f.CompressedTextureFormat.COMPRESSED_RG11_EAC:case f.CompressedTextureFormat.COMPRESSED_SIGNED_RG11_EAC:case f.CompressedTextureFormat.COMPRESSED_RGBA8_ETC2_EAC:case f.CompressedTextureFormat.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0};b.getErrorString=function(k){k=k.gl;switch(k.getError()){case k.NO_ERROR:return null;case k.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case k.INVALID_VALUE:return"An unacceptable value has been specified for an argument";
case k.INVALID_OPERATION:return"The specified command is not allowed for the current state";case k.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case k.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case k.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"};b.getStride=y;b.unbindVertexBufferLayout=function(k,w,e,h){const C=k.gl;k.bindBuffer(e);for(const r of h)if(e=w.get(r.name),4>=r.count)C.disableVertexAttribArray(e),
r.divisor&&0<r.divisor&&k.gl2?.vertexAttribDivisor(e,0);else if(9===r.count)for(h=0;3>h;h++)C.disableVertexAttribArray(e+h),r.divisor&&0<r.divisor&&k.gl2?.vertexAttribDivisor(e+h,0);else if(16===r.count)for(h=0;4>h;h++)C.disableVertexAttribArray(e+h),r.divisor&&0<r.divisor&&k.gl2?.vertexAttribDivisor(e+h,0);else console.error("Unsupported vertex attribute element count: "+r.count);k.unbindBuffer(f.BufferType.ARRAY_BUFFER)};b.vertexCount=function(k,w){return k.vertexBuffers[w].byteLength/y(k.layout[w])};
Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/Texture":function(){define("exports ../../core/Error ../../core/has ../../core/mathUtils ./checkWebGLError ./contextUtils ./enums ./GLObjectType ./TextureDescriptor ./ValidatedTextureDescriptor".split(" "),function(b,a,f,y,k,w,e,h,C,r){function x(c,m){(null!=m.width&&0>m.width||null!=m.height&&0>m.height||null!=m.depth&&0>m.depth)&&console.error("Negative dimension parameters are not allowed!");(c=c.type===w.ContextType.WEBGL2)||
!m.isImmutable&&!d(m.target)||console.error("Immutable and 3D-like textures are not supported in WebGL1!");c||null!=m.width&&y.isPowerOfTwo(m.width)&&null!=m.height&&y.isPowerOfTwo(m.height)||("number"===typeof m.wrapMode?m.wrapMode!==e.TextureWrapMode.CLAMP_TO_EDGE&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):(m.wrapMode.s!==e.TextureWrapMode.CLAMP_TO_EDGE||m.wrapMode.t!==e.TextureWrapMode.CLAMP_TO_EDGE)&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),
m.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))}function A(c,m){let t=m.samplingMode,g=m.samplingMode;if(t===e.TextureSamplingMode.LINEAR_MIPMAP_NEAREST||t===e.TextureSamplingMode.LINEAR_MIPMAP_LINEAR)t=e.TextureSamplingMode.LINEAR,m.hasMipmap||(g=e.TextureSamplingMode.LINEAR);else if(t===e.TextureSamplingMode.NEAREST_MIPMAP_NEAREST||t===e.TextureSamplingMode.NEAREST_MIPMAP_LINEAR)t=e.TextureSamplingMode.NEAREST,m.hasMipmap||(g=e.TextureSamplingMode.NEAREST);c.texParameteri(m.target,
c.TEXTURE_MAG_FILTER,t);c.texParameteri(m.target,c.TEXTURE_MIN_FILTER,g)}function p(c,m){"number"===typeof m.wrapMode?(c.texParameteri(m.target,c.TEXTURE_WRAP_S,m.wrapMode),c.texParameteri(m.target,c.TEXTURE_WRAP_T,m.wrapMode)):(c.texParameteri(m.target,c.TEXTURE_WRAP_S,m.wrapMode.s),c.texParameteri(m.target,c.TEXTURE_WRAP_T,m.wrapMode.t))}function u(c,m){const t=c.capabilities.textureFilterAnisotropic;t&&c.gl.texParameterf(m.target,t.TEXTURE_MAX_ANISOTROPY,m.maxAnisotropy??1)}function F(c){return null!=
c&&"type"in c&&"compressed"===c.type}function G(c){return null!=c&&!F(c)&&!(null!=c&&"byteLength"in c)}function d(c){return c===e.TextureType.TEXTURE_3D||c===e.TextureType.TEXTURE_2D_ARRAY}function l(c,m,t,g=1){m=Math.max(m,t);c===e.TextureType.TEXTURE_3D&&(m=Math.max(m,g));return Math.round(Math.log(m)/Math.LN2)+1}let n=class{constructor(c,m=null,t=null){this.type=h.GLObjectType.Texture;this._glName=null;this._wasImmutablyAllocated=this._wrapModeDirty=this._samplingModeDirty=!1;if("context"in c)this._descriptor=
c,t=m;else{c=r.ValidatedTextureDescriptor.validate(c,m);if(!c)throw new a("Texture descriptor invalid");this._descriptor=c}if(this._descriptor.context.type!==w.ContextType.WEBGL2&&(this._descriptor.isImmutable&&(this._descriptor.isImmutable=!1),d(this._descriptor.target)))throw new a("3D and array textures are not supported in WebGL1");this._descriptor.target===e.TextureType.TEXTURE_CUBE_MAP?this._setDataCubeMap(t):this.setData(t)}get glName(){return this._glName}get descriptor(){return this._descriptor}get gpuMemoryUsage(){E.delete(this);
return C.estimateMemory(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}dispose(){this._glName&&this._descriptor.context.instanceCounter.decrement(e.ResourceType.Texture,this);this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(c,m){const t=this._descriptor;if(t.width!==c||t.height!==m){if(this._wasImmutablyAllocated)throw new a("Immutable textures can't be resized!");
t.width=c;t.height=m;this._descriptor.target===e.TextureType.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}_setDataCubeMap(c=null){for(let m=e.TextureType.TEXTURE_CUBE_MAP_POSITIVE_X;m<=e.TextureType.TEXTURE_CUBE_MAP_NEGATIVE_Z;m++)this._setData(c,m)}setData(c){this._setData(c)}_setData(c,m){if(this._descriptor.context?.gl){var t=this._descriptor.context.gl;k.checkWebGLError(t);this._glName||(this._glName=t.createTexture())&&this._descriptor.context.instanceCounter.increment(e.ResourceType.Texture,
this);void 0===c&&(c=null);var g=this._descriptor,D=m??g.target,B=d(D);null===c&&(g.width=g.width||4,g.height=g.height||4,B&&(g.depth=g.depth??1));m=this._descriptor.context.bindTexture(this,n.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(n.TEXTURE_UNIT_FOR_UPDATES);x(this._descriptor.context,g);this._configurePixelStorage();k.checkWebGLError(t);var q=this._deriveInternalFormat();if(G(c)){let v="width"in c?c.width:c.codedWidth,z="height"in c?c.height:c.codedHeight;c instanceof
HTMLVideoElement&&(v=c.videoWidth,z=c.videoHeight);g.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(D,q,g.hasMipmap,v,z,1);this._texImage(D,0,q,v,z,1,c);k.checkWebGLError(t);g.hasMipmap&&this.generateMipmap();g.width||(g.width=v);g.height||(g.height=z);B&&!g.depth&&(g.depth=1)}else{const {width:v,height:z,depth:H}=g;if(null==v||null==z)throw new a("Width and height must be specified!");if(B&&null==H)throw new a("Depth must be specified!");g.isImmutable&&!this._wasImmutablyAllocated&&
this._texStorage(D,q,g.hasMipmap,v,z,H);if(F(c)){const I=c.levels;c=l(D,v,z,H);B=Math.min(c-1,I.length-1);null!=this._descriptor.context.gl2?t.texParameteri(g.target,this._descriptor.context.gl2.TEXTURE_MAX_LEVEL,B):g.hasMipmap=g.hasMipmap&&c===I.length;if(!(q in e.CompressedTextureFormat))throw new a("Attempting to use compressed data with an uncompressed format!");this._forEachMipmapLevel((K,L,M,N)=>{this._compressedTexImage(D,K,q,L,M,N,I[Math.min(K,I.length-1)])},B)}else this._texImage(D,0,q,v,
z,H,c),k.checkWebGLError(t),g.hasMipmap&&this.generateMipmap()}A(t,this._descriptor);p(t,this._descriptor);u(this._descriptor.context,this._descriptor);k.checkWebGLError(t);this._descriptor.context.bindTexture(m,n.TEXTURE_UNIT_FOR_UPDATES)}}updateData(c,m,t,g,D,B,q=0){B||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");const v=this._descriptor.context.gl,z=this._descriptor.context.gl2,H=this._descriptor,I=this._deriveInternalFormat(),
{pixelFormat:K,dataType:L,target:M,isImmutable:N}=H;if(N&&!this._wasImmutablyAllocated)throw new a("Cannot update immutable texture before allocation!");const O=this._descriptor.context.bindTexture(this,n.TEXTURE_UNIT_FOR_UPDATES,!0);(0>m||0>t||g>H.width||D>H.height||m+g>H.width||t+D>H.height)&&console.error("An attempt to update out of bounds of the texture!");this._configurePixelStorage();if(q){if(!z){console.error("Webgl2 must be enabled to use dataRowOffset!");return}v.pixelStorei(z.UNPACK_SKIP_ROWS,
q)}G(B)?z?z.texSubImage2D(M,c,m,t,g,D,K,L,B):v.texSubImage2D(M,c,m,t,K,L,B):F(B)?v.compressedTexSubImage2D(M,c,m,t,g,D,I,B.levels[c]):v.texSubImage2D(M,c,m,t,g,D,K,L,B);if(q){if(!z){console.error("Webgl2 must be enabled to use dataRowOffset!");return}v.pixelStorei(z.UNPACK_SKIP_ROWS,0)}this._descriptor.context.bindTexture(O,n.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(c,m,t,g,D,B,q,v){v||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");
const z=this._descriptor.context.gl2;if(null==z)throw new a("3D textures are not supported in WebGL1");const H=this._descriptor,I=this._deriveInternalFormat(),{pixelFormat:K,dataType:L,isImmutable:M,target:N}=H;if(M&&!this._wasImmutablyAllocated)throw new a("Cannot update immutable texture before allocation!");d(N)||console.warn("Attempting to set 3D texture data on a non-3D texture");const O=this._descriptor.context.bindTexture(this,n.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(n.TEXTURE_UNIT_FOR_UPDATES);
(0>m||0>t||0>g||D>H.width||B>H.height||q>H.depth||m+D>H.width||t+B>H.height||g+q>H.depth)&&console.error("An attempt to update out of bounds of the texture!");this._configurePixelStorage();F(v)?(v=v.levels[c],z.compressedTexSubImage3D(N,c,m,t,g,D,B,q,I,v)):z.texSubImage3D(N,c,m,t,g,D,B,q,K,L,v);this._descriptor.context.bindTexture(O,n.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const c=this._descriptor;if(!c.hasMipmap){if(this._wasImmutablyAllocated)throw new a("Cannot add mipmaps to immutable texture after allocation");
this._samplingModeDirty=c.hasMipmap=!0;x(this._descriptor.context,c)}c.samplingMode===e.TextureSamplingMode.LINEAR?(this._samplingModeDirty=!0,c.samplingMode=e.TextureSamplingMode.LINEAR_MIPMAP_NEAREST):c.samplingMode===e.TextureSamplingMode.NEAREST&&(this._samplingModeDirty=!0,c.samplingMode=e.TextureSamplingMode.NEAREST_MIPMAP_NEAREST);const m=this._descriptor.context.bindTexture(this,n.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(n.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.gl.generateMipmap(c.target);
this._descriptor.context.bindTexture(m,n.TEXTURE_UNIT_FOR_UPDATES)}setSamplingMode(c){c!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=c,this._samplingModeDirty=!0)}setWrapMode(c){c!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=c,x(this._descriptor.context,this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const c=this._descriptor.context.gl,m=this._descriptor;this._samplingModeDirty&&(A(c,m),this._samplingModeDirty=!1);this._wrapModeDirty&&(p(c,m),this._wrapModeDirty=
!1)}_deriveInternalFormat(){if(this._descriptor.context.type===w.ContextType.WEBGL1)return this._descriptor.internalFormat=this._descriptor.pixelFormat;if(null!=this._descriptor.internalFormat)return this._descriptor.internalFormat===e.PixelFormat.DEPTH_STENCIL&&(this._descriptor.internalFormat=e.PixelFormat.DEPTH24_STENCIL8),this._descriptor.internalFormat;switch(this._descriptor.dataType){case e.PixelType.FLOAT:switch(this._descriptor.pixelFormat){case e.PixelFormat.RGBA:return this._descriptor.internalFormat=
e.SizedPixelFormat.RGBA32F;case e.PixelFormat.RGB:return this._descriptor.internalFormat=e.SizedPixelFormat.RGB32F;default:throw new a("Unable to derive format");}case e.PixelType.UNSIGNED_BYTE:switch(this._descriptor.pixelFormat){case e.PixelFormat.RGBA:return this._descriptor.internalFormat=e.SizedPixelFormat.RGBA8;case e.PixelFormat.RGB:return this._descriptor.internalFormat=e.SizedPixelFormat.RGB8}}return this._descriptor.internalFormat=this._descriptor.pixelFormat===e.PixelFormat.DEPTH_STENCIL?
e.PixelFormat.DEPTH24_STENCIL8:this._descriptor.pixelFormat}_configurePixelStorage(){const c=this._descriptor.context.gl,{unpackAlignment:m,flipped:t,preMultiplyAlpha:g}=this._descriptor;c.pixelStorei(c.UNPACK_ALIGNMENT,m);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,t?1:0);c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g?1:0)}_texStorage(c,m,t,g,D,B){const q=this._descriptor.context.gl2;if(null==q)throw new a("Immutable textures are not supported in WebGL1");if(!(m in e.SizedPixelFormat))throw new a("Immutable textures must have a sized internal format");
if(this._descriptor.isImmutable){t=t?l(c,g,D,B):1;if(d(c)){if(null==B)throw new a("Missing depth dimension for 3D texture upload");q.texStorage3D(c,t,m,g,D,B)}else q.texStorage2D(c,t,m,g,D);this._wasImmutablyAllocated=!0}}_texImage(c,m,t,g,D,B,q){const v=this._descriptor.context.gl,z=d(c),{isImmutable:H,pixelFormat:I,dataType:K}=this._descriptor,L=this._descriptor.context.type===w.ContextType.WEBGL2,M=L?v:null;if(!L&&G(q))v.texImage2D(c,0,t,I,K,q);else if(H){if(null!=q)if(z){if(null==B)throw new a("Missing depth dimension for 3D texture upload");
M.texSubImage3D(c,m,0,0,0,g,D,B,I,K,q)}else v.texSubImage2D(c,m,0,0,g,D,I,K,q)}else if(z){if(null==B)throw new a("Missing depth dimension for 3D texture upload");M.texImage3D(c,m,t,g,D,B,0,I,K,q)}else v.texImage2D(c,m,t,g,D,0,I,K,q)}_compressedTexImage(c,m,t,g,D,B,q){const v=this._descriptor.context.gl;let z=null;const H=d(c),I=this._descriptor.isImmutable;if(H){if(this._descriptor.context.type!==w.ContextType.WEBGL2)throw new a("3D textures are not supported in WebGL1");z=v}if(I){if(null!=q)if(H){if(null==
B)throw new a("Missing depth dimension for 3D texture upload");z.compressedTexSubImage3D(c,m,0,0,0,g,D,B,t,q)}else v.compressedTexSubImage2D(c,m,0,0,g,D,t,q)}else if(H){if(null==B)throw new a("Missing depth dimension for 3D texture upload");z.compressedTexImage3D(c,m,t,g,D,B,0,q)}else v.compressedTexImage2D(c,m,t,g,D,0,q)}_forEachMipmapLevel(c,m=Infinity){let {width:t,height:g,depth:D,hasMipmap:B,target:q}=this._descriptor;const v=q===e.TextureType.TEXTURE_3D;if(null==t||null==g||v&&null==D)throw new a("Missing texture dimensions for mipmap calculation");
for(let z=0;;++z){c(z,t,g,D);if(!B||1===t&&1===g&&(!v||1===D)||z>=m)break;t=Math.max(1,t>>1);g=Math.max(1,g>>1);v&&(D=Math.max(1,D>>1))}}};n.TEXTURE_UNIT_FOR_UPDATES=0;const E=new Map;b.Texture=n;b.clearUnestimatedTextures=function(){if(0!==E.size){var c=[];E.forEach((m,t)=>c.push([t.gpuMemoryUsage,m]));E.clear();c.sort((m,t)=>t[0]-m[0]);return c.reduce((m,t)=>`${m}\n\n${Math.round(t[0]/1024)}KB: ${t[1]}`,`Total unestimated texture memory: ${Math.round(c.reduce((m,t)=>m+t[0],0)/1024)}KB`)}};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/TextureDescriptor":function(){define(["exports","./enums","./Util"],function(b,a,f){class y{constructor(k=0,w=k){this.width=k;this.height=w;this.target=a.TextureType.TEXTURE_2D;this.pixelFormat=a.PixelFormat.RGBA;this.dataType=a.PixelType.UNSIGNED_BYTE;this.samplingMode=a.TextureSamplingMode.LINEAR;this.wrapMode=a.TextureWrapMode.REPEAT;this.maxAnisotropy=1;this.isOpaque=this.hasMipmap=this.flipped=!1;this.unpackAlignment=4;this.preMultiplyAlpha=
!1;this.depth=1;this.isImmutable=!1}}b.TextureDescriptor=y;b.estimateMemory=function(k){return 0>=k.width||0>=k.height?0:k.width*k.height*(k.hasMipmap?4/3:1)*(null==k.internalFormat?4:f.getBytesPerElementFormat(k.internalFormat))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/ValidatedTextureDescriptor":function(){define(["exports","./enums","./TextureDescriptor"],function(b,a,f){class y extends f.TextureDescriptor{constructor(k,w){super();this.context=k;Object.assign(this,
w);switch(this.internalFormat){case a.SizedPixelFormat.R16F:case a.SizedPixelFormat.R16I:case a.SizedPixelFormat.R16UI:case a.SizedPixelFormat.R32F:case a.SizedPixelFormat.R32I:case a.SizedPixelFormat.R32UI:case a.SizedPixelFormat.R8_SNORM:case a.SizedPixelFormat.R8:case a.SizedPixelFormat.R8I:case a.SizedPixelFormat.R8UI:this.pixelFormat=a.PixelFormat.RED}}static validate(k,w){return new y(k,w)}}b.ValidatedTextureDescriptor=y;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/Program":function(){define("exports ../../core/arrayUtils ../../core/has ./checkWebGLError ./contextUtils ./enums ./ShaderTranspiler".split(" "),
function(b,a,f,y,k,w,e){function h(p,u,F){p=p.gl;const G=p.createShader(u);p.shaderSource(G,F);p.compileShader(G);y.webglValidateShadersEnabled()&&!p.getShaderParameter(G,p.COMPILE_STATUS)&&(console.error("Compile error in ".concat(u===w.ShaderType.VERTEX_SHADER?"vertex":"fragment"," shader")),console.error(p.getShaderInfoLog(G)),console.error(C(F)));return G}function C(p){let u=2;return p.replaceAll("\n",()=>{var F=u++;F=1E3<=F?F.toString():("  "+F).slice(-3);return"\n"+F+":"})}function r(p,u,F){const G=
p.get(u);return G?a.update(G,F):(p.set(u,Array.from(F)),!0)}class x{constructor(p,u,F,G,d=new Map){this._context=p;this._locations=G;this._uniformBlockBindings=d;this._refCount=1;this._compiled=!1;this._linesOfCode=0;this._nameToUniformLocation=new Map;this._nameToUniform1=new Map;this._nameToUniform1v=new Map;this._nameToUniform2=new Map;this._nameToUniform3=new Map;this._nameToUniform4=new Map;this._nameToUniformMatrix3=new Map;this._nameToUniformMatrix4=new Map;p||console.error("RenderingContext isn't initialized!");
0===u.length&&console.error("Shaders source should not be empty!");this._context.type===k.ContextType.WEBGL2&&(u=e.transpileShader(u,w.ShaderType.VERTEX_SHADER),F=e.transpileShader(F,w.ShaderType.FRAGMENT_SHADER));this._vShader=h(this._context,w.ShaderType.VERTEX_SHADER,u);this._fShader=h(this._context,w.ShaderType.FRAGMENT_SHADER,F);A.enabled&&(this._linesOfCode=u.match(/\n/g).length+F.match(/\n/g).length+2,this._context.instanceCounter.increment(w.ResourceType.LinesOfCode,this._vShader,this._linesOfCode));
this._vShader&&this._fShader||console.error("Error loading shaders!");this._context.instanceCounter.increment(w.ResourceType.Shader,this);y.webglValidateShadersEnabled()&&(this.vertexShader=u,this.fragmentShader=F);const l=this._context.gl,n=l.createProgram();l.attachShader(n,this._vShader);l.attachShader(n,this._fShader);this._locations.forEach((E,c)=>l.bindAttribLocation(n,E,c));l.linkProgram(n);y.webglValidateShadersEnabled()&&!l.getProgramParameter(n,l.LINK_STATUS)&&console.error("Could not link shader\n"+
`validated: ${l.getProgramParameter(n,l.VALIDATE_STATUS)}`+`, gl error ${l.getError()}`+`, vertex: ${l.getShaderParameter(this._vShader,l.COMPILE_STATUS)}`+`, fragment: ${l.getShaderParameter(this._fShader,l.COMPILE_STATUS)}`+`, info log: ${l.getProgramInfoLog(n)}`+`, vertex source: ${this.vertexShader}`+`, fragment source: ${this.fragmentShader}`);if(this._context.type===k.ContextType.WEBGL2)for(const [E,c]of this._uniformBlockBindings)p=l.getUniformBlockIndex(n,E),4294967295>p&&l.uniformBlockBinding(n,
p,c);this._glName=n;this._context.instanceCounter.increment(w.ResourceType.Program,this)}get glName(){return this._glName}get hasGLName(){return null!=this._glName}get compiled(){if(this._compiled)return!0;const p=this._context.gl.getExtension("KHR_parallel_shader_compile");return null==p||null==this.glName?this._compiled=!0:this._compiled=!!this._context.gl.getProgramParameter(this.glName,p.COMPLETION_STATUS_KHR)}dispose(){if(!(0<--this._refCount)){var p=this._context.gl,u=this._context.instanceCounter;
this._nameToUniformLocation.forEach(F=>F&&u.decrement(w.ResourceType.Uniform,F));this._nameToUniformLocation.clear();this._vShader&&(0<this._linesOfCode&&(u.decrement(w.ResourceType.LinesOfCode,this._vShader,this._linesOfCode),this._linesOfCode=0),p.deleteShader(this._vShader),this._vShader=null,u.decrement(w.ResourceType.Shader,this));this._fShader&&(p.deleteShader(this._fShader),this._fShader=null);this._glName&&(p.deleteProgram(this._glName),this._glName=null,u.decrement(w.ResourceType.Program,
this))}}ref(){++this._refCount}_getUniformLocation(p){var u=this._nameToUniformLocation.get(p);return void 0!==u?u:this.glName?(u=this._context.gl.getUniformLocation(this.glName,p),this._nameToUniformLocation.set(p,u),u&&this._context.instanceCounter.increment(w.ResourceType.Uniform,u),u):null}hasUniform(p){return null!=this._getUniformLocation(p)}setUniform1i(p,u){const F=this._nameToUniform1.get(p);if(void 0===F||u!==F)this._context.gl.uniform1i(this._getUniformLocation(p),u),this._nameToUniform1.set(p,
u)}setUniform1iv(p,u){r(this._nameToUniform1v,p,u)&&this._context.gl.uniform1iv(this._getUniformLocation(p),u)}setUniform2iv(p,u){r(this._nameToUniform2,p,u)&&this._context.gl.uniform2iv(this._getUniformLocation(p),u)}setUniform3iv(p,u){r(this._nameToUniform3,p,u)&&this._context.gl.uniform3iv(this._getUniformLocation(p),u)}setUniform4iv(p,u){r(this._nameToUniform4,p,u)&&this._context.gl.uniform4iv(this._getUniformLocation(p),u)}setUniform1f(p,u){const F=this._nameToUniform1.get(p);if(void 0===F||
u!==F)this._context.gl.uniform1f(this._getUniformLocation(p),u),this._nameToUniform1.set(p,u)}setUniform1fv(p,u){r(this._nameToUniform1v,p,u)&&this._context.gl.uniform1fv(this._getUniformLocation(p),u)}setUniform2f(p,u,F){const G=this._nameToUniform2.get(p);if(void 0===G)this._context.gl.uniform2f(this._getUniformLocation(p),u,F),this._nameToUniform2.set(p,[u,F]);else if(u!==G[0]||F!==G[1])this._context.gl.uniform2f(this._getUniformLocation(p),u,F),G[0]=u,G[1]=F}setUniform2fv(p,u){r(this._nameToUniform2,
p,u)&&this._context.gl.uniform2fv(this._getUniformLocation(p),u)}setUniform3f(p,u,F,G){const d=this._nameToUniform3.get(p);if(void 0===d)this._context.gl.uniform3f(this._getUniformLocation(p),u,F,G),this._nameToUniform3.set(p,[u,F,G]);else if(u!==d[0]||F!==d[1]||G!==d[2])this._context.gl.uniform3f(this._getUniformLocation(p),u,F,G),d[0]=u,d[1]=F,d[2]=G}setUniform3fv(p,u){r(this._nameToUniform3,p,u)&&this._context.gl.uniform3fv(this._getUniformLocation(p),u)}setUniform4f(p,u,F,G,d){const l=this._nameToUniform4.get(p);
if(void 0===l)this._context.gl.uniform4f(this._getUniformLocation(p),u,F,G,d),this._nameToUniform4.set(p,[u,F,G,d]);else if(void 0===l||u!==l[0]||F!==l[1]||G!==l[2]||d!==l[3])this._context.gl.uniform4f(this._getUniformLocation(p),u,F,G,d),l[0]=u,l[1]=F,l[2]=G,l[3]=d}setUniform4fv(p,u){r(this._nameToUniform4,p,u)&&this._context.gl.uniform4fv(this._getUniformLocation(p),u)}setUniformMatrix3fv(p,u,F=!1){r(this._nameToUniformMatrix3,p,u)&&this._context.gl.uniformMatrix3fv(this._getUniformLocation(p),
F,u)}setUniformMatrix4fv(p,u,F=!1){r(this._nameToUniformMatrix4,p,u)&&this._context.gl.uniformMatrix4fv(this._getUniformLocation(p),F,u)}stop(){}}const A={enabled:!1};b.Program=x;b.test=A;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/ShaderTranspiler":function(){define("exports ../../core/has ./enums ./reservedWordsGLSL3 ./testUtils ../../chunks/builtins".split(" "),function(b,a,f,y,k,w){function e(){function d(J){J.length&&H.push({type:u[B],data:J,position:L,line:I,
column:K})}function l(){z=z.length?[]:z;if("/"===v&&"*"===q)return L=D+g-1,B=0,v=q,g+1;if("/"===v&&"/"===q)return L=D+g-1,B=1,v=q,g+1;if("#"===q)return B=2,L=D+g,g;if(/\s/.test(q))return B=9,L=D+g,g;M=/\d/.test(q);N=/[^\w_]/.test(q);L=D+g;B=M?4:N?3:9999;return g}function n(){if(("\r"===q||"\n"===q)&&"\\"!==v)return d(z.join("")),B=999,g;z.push(q);v=q;return g+1}function E(){if("."===v&&/\d/.test(q))return B=5,g;if("/"===v&&"*"===q)return B=0,g;if("/"===v&&"/"===q)return B=1,g;if("."===q&&z.length){for(;c(z););
B=5;return g}if(";"===q||")"===q||"("===q){if(z.length)for(;c(z););d(q);B=999;return g+1}var J=2===z.length&&"\x3d"!==q;if(/[\w_\d\s]/.test(q)||J){for(;c(z););B=999;return g}z.push(q);v=q;return g+1}function c(J){var P=0;do{var R=w.operators.indexOf(J.slice(0,J.length+P).join(""));var Q=w.operators[R];if(-1===R){if(0<P--+J.length)continue;Q=J.slice(0,1).join("")}d(Q);L+=Q.length;z=z.slice(Q.length);return z.length}while(1)}function m(){if("."===q||/[eE]/.test(q))return z.push(q),B=5,v=q,g+1;if("x"===
q&&1===z.length&&"0"===z[0])return B=11,z.push(q),v=q,g+1;if(/[^\d]/.test(q))return d(z.join("")),B=999,g;z.push(q);v=q;return g+1}function t(){"f"===q&&(z.push(q),v=q,g+=1);if(/[eE]/.test(q)||"-"===q&&/[eE]/.test(v))return z.push(q),v=q,g+1;if(/[^\d]/.test(q))return d(z.join("")),B=999,g;z.push(q);v=q;return g+1}var g=0,D=0,B=999,q,v,z=[],H=[],I=1,K=0,L=0,M=!1,N=!1,O="",S;return function(J){H=[];if(null!==J){J=J.replace?J.replace(/\r\n/g,"\n"):J;g=0;O+=J;for(S=O.length;q=O[g],g<S;){J=g;switch(B){case 0:"/"===
q&&"*"===v?(z.push(q),d(z.join("")),B=999):(z.push(q),v=q);g+=1;break;case 1:g=n();break;case 2:g=n();break;case 3:g=E();break;case 4:g=m();break;case 11:/[^a-fA-F0-9]/.test(q)?(d(z.join("")),B=999):(z.push(q),v=q,g+=1);break;case 5:g=t();break;case 9999:if(/[^\d\w_]/.test(q)){var P=z.join("");B=-1<w.literals.indexOf(P)?8:-1<w.builtins.indexOf(P)?7:6;d(z.join(""));B=999}else z.push(q),v=q,g+=1;break;case 9:/[^\s]/g.test(q)?(d(z.join("")),B=999):(z.push(q),v=q,g+=1);break;case 999:g=l()}if(J!==g)switch(O[J]){case "\n":K=
0;++I;break;default:++K}}D+=g;O=O.slice(g);return H}z.length&&d(z.join(""));B=10;d("(eof)");return H}}function h(d){return d.map(l=>"eof"!==l.type?l.data:"").join("")}function C(d,l="100",n="300 es"){const E=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(const c of d)if("preprocessor"===c.type){const m=E.exec(c.data);if(m){d=m[1].replaceAll(/\s\s+/g," ");if(d===n)return d;if(d===l)return c.data="#version "+n,l;throw Error("unknown glsl version: "+d);}}d.splice(0,0,{type:"preprocessor",data:"#version "+
n},{type:"whitespace",data:"\n"});return null}function r(d,l,n,E){E=E||n;for(const c of d)if("ident"===c.type&&c.data===n)return E in l?l[E]++:l[E]=0,r(d,l,E+"_"+l[E],E);return n}function x(d,l,n="afterVersion"){const E={data:"\n",type:"whitespace"},c=t=>t<d.length?/[^\r\n]$/.test(d[t].data):!1;let m=function(t){let g=-1,D=0,B=-1;for(let v=0;v<t.length;v++){var q=t[v];"preprocessor"===q.type&&(/#(if|ifdef|ifndef)\s+.+/.test(q.data)?++D:/#endif\s*.*/.test(q.data)&&--D);("afterVersion"===n||"afterPrecision"===
n)&&"preprocessor"===q.type&&q.data.startsWith("#version")&&(B=Math.max(B,v));if("afterPrecision"===n&&"keyword"===q.type&&"precision"===q.data){a:{for(q=v;q<t.length;q++){const z=t[q];if("operator"===z.type&&";"===z.data)break a}q=null}if(null===q)throw Error("precision statement not followed by any semicolons!");B=Math.max(B,q)}g<B&&0===D&&(g=v)}return g+1}(d);c(m-1)&&d.splice(m++,0,E);for(const t of l)d.splice(m++,0,t);c(m-1)&&c(m)&&d.splice(m,0,E)}function A(d,l,n,E="lowp"){x(d,[{type:"keyword",
data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:E},{type:"whitespace",data:" "},{type:"keyword",data:n},{type:"whitespace",data:" "},{type:"ident",data:l},{type:"operator",data:";"}],"afterPrecision")}function p(d,l,n,E,c="lowp"){x(d,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"\x3d"},{type:"whitespace",data:" "},{type:"integer",data:E.toString()},{type:"operator",data:")"},{type:"whitespace",
data:" "},{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:c},{type:"whitespace",data:" "},{type:"keyword",data:n},{type:"whitespace",data:" "},{type:"ident",data:l},{type:"operator",data:";"}],"afterPrecision")}var u="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");const F=new Set(["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"]),G=new Map;b.transpileShader=
function(d,l){if(d.startsWith("#version 300"))return d;var n=k.shaderTranspiler.enableCache?G.get(d):null;if(null!=n)return n;n=e();var E=[];E=E.concat(n(d));n=E=E.concat(n(null));if("300 es"===C(n,"100","300 es"))return d;var c=E=null;const m={},t={};for(let q=0;q<n.length;++q){const v=n[q];switch(v.type){case "keyword":l===f.ShaderType.VERTEX_SHADER&&"attribute"===v.data?v.data="in":"varying"===v.data&&(v.data=l===f.ShaderType.VERTEX_SHADER?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(v.data.trim())&&
(v.data=v.data.replaceAll(/(2D|Cube|EXT)/g,""));l===f.ShaderType.FRAGMENT_SHADER&&"gl_FragColor"===v.data&&(E||(E=r(n,m,"fragColor"),A(n,E,"vec4")),v.data=E);if(l===f.ShaderType.FRAGMENT_SHADER&&"gl_FragData"===v.data){var g=void 0;let z=void 0;var D=n,B=q+1;let H=-1;for(;B<D.length;B++){const I=D[B];if("operator"===I.type&&("["===I.data&&(z=B),"]"===I.data)){g=B;break}"integer"===I.type&&(H=parseInt(I.data,10))}z&&g&&D.splice(z,g-z+1);D=H;g=r(n,m,"fragData");p(n,g,"vec4",D,"mediump");v.data=g}else l===
f.ShaderType.FRAGMENT_SHADER&&"gl_FragDepthEXT"===v.data&&(c||(c=r(n,m,"gl_FragDepth")),v.data=c);break;case "ident":if(y.includes(v.data)){if(D=l===f.ShaderType.VERTEX_SHADER)a:{for(D=q-1;0<=D;D--)if(g=n[D],"whitespace"!==g.type&&"block-comment"!==g.type)if("keyword"===g.type){if("attribute"===g.data||"in"===g.data){D=!0;break a}}else break;D=!1}if(D)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");v.data in t||(t[v.data]=r(n,m,v.data));v.data=t[v.data]}}}for(l=
n.length-1;0<=l;--l)E=n[l],"preprocessor"===E.type&&((c=E.data.match(/#extension\s+(.*):/))&&c[1]&&F.has(c[1].trim())&&(c=n[l+1],n.splice(l,c&&"whitespace"===c.type?2:1)),(c=E.data.match(/#ifdef\s+(.*)/))&&c[1]&&F.has(c[1].trim())&&(E.data="#if 1"),(c=E.data.match(/#ifndef\s+(.*)/))&&c[1]&&F.has(c[1].trim())&&(E.data="#if 0"));n=h(n);k.shaderTranspiler.enableCache&&G.set(d,n);return n};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/reservedWordsGLSL3":function(){define(function(){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/views/webgl/testUtils":function(){define(["exports"],function(b){b.shaderTranspiler={enableCache:!1};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/builtins":function(){define(["exports","./_commonjsHelpers"],function(b,a){var f={exports:{}};f.exports;(function(w){(function(e){e=e();void 0!==e&&(w.exports=e)})(function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})})(f);
f=a.getDefaultExportFromCjs(f.exports);var y={exports:{}};y.exports;(function(w){(function(e){e=e();void 0!==e&&(w.exports=e)})(function(){return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})})(y);y=a.getDefaultExportFromCjs(y.exports);var k={exports:{}};k.exports;(function(w){(function(e){e=e();void 0!==e&&(w.exports=e)})(function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT textureSize texelFetch".split(" ")})})(k);
a=a.getDefaultExportFromCjs(k.exports);b.builtins=a;b.literals=f;b.operators=y})},"esri/views/webgl/ProgramCache":function(){define(["exports","../../core/NestedMap","./Program"],function(b,a,f){class y{constructor(k){this._rctx=k;this._store=new a.NestedMap}dispose(){this._store.forEach(k=>k.forEach(w=>w.dispose()));this._store.clear()}acquire(k,w,e,h){const C=this._store.get(k,w);if(null!=C)return C.ref(),C;e=new f.Program(this._rctx,k,w,e,h);e.ref();this._store.set(k,w,e);return e}get test(){let k=
0;this._store.forEach(w=>w.forEach(e=>k+=e.hasGLName?2:1));return{cachedWebGLProgramObjects:k}}}b.ProgramCache=y;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/NestedMap":function(){define(["exports"],function(b){class a{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get(f,y){return this._outer.get(f)?.get(y)}set(f,y,k){const w=this._outer.get(f);w?w.set(y,k):this._outer.set(f,new Map([[y,k]]))}delete(f,y){const k=
this._outer.get(f);k&&(k.delete(y),0===k.size&&this._outer.delete(f))}forEach(f){this._outer.forEach((y,k)=>f(y,k))}}b.NestedMap=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/ShaderCompiler":function(){define(["exports"],function(b){class a{constructor(f){this._readFile=f}resolveIncludes(f){return this._resolve(f)}_resolve(f,y=new Map){if(y.has(f))return y.get(f);const k=this._read(f);if(!k)throw Error(`cannot find shader file ${f}`);const w=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;
let e=w.exec(k);const h=[];for(;null!=e;)h.push({path:e[1],start:e.index,length:e[0].length}),e=w.exec(k);let C=0,r="";h.forEach(x=>{r+=k.slice(C,x.start);r+=y.has(x.path)?"":this._resolve(x.path,y);C=x.start+x.length});r+=k.slice(C);y.set(f,r);return r}_read(f){return this._readFile(f)}}b.ShaderCompiler=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/VertexArrayObject":function(){define("exports ../../core/Logger ../../core/maybe ../../core/typedArrayUtil ./enums ./Util".split(" "),
function(b,a,f,y,k,w){const e=a.getLogger("esri.views.webgl.VertexArrayObject");b.VertexArrayObject=class{constructor(h,C,r,x,A=null){this._context=h;this._locations=C;this._layout=r;this._buffers=x;this._indexBuffer=A;this._glName=null;this._initialized=!1}get glName(){return this._glName}get context(){return this._context}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get byteSize(){return Object.keys(this._buffers).reduce((h,C)=>h+this._buffers[C].byteLength,
null!=this._indexBuffer?this._indexBuffer.byteLength:0)}get layout(){return this._layout}get locations(){return this._locations}get usedMemory(){return this.byteSize+(Object.keys(this._buffers).length+(this._indexBuffer?1:0))*y.typedArrayStaticSize}dispose(){if(this._context){this._context.getBoundVAO()===this&&this._context.bindVAO(null);for(const h in this._buffers)this._buffers[h]?.dispose(),delete this._buffers[h];this._indexBuffer=f.disposeMaybe(this._indexBuffer);this.disposeVAOOnly()}else(this._glName||
0<Object.getOwnPropertyNames(this._buffers).length)&&e.warn("Leaked WebGL VAO")}disposeVAOOnly(){this._glName&&((this._context?.capabilities?.vao).deleteVertexArray(this._glName),this._glName=null,this._context.instanceCounter.decrement(k.ResourceType.VertexArrayObject,this));this._context=null}initialize(){if(!this._initialized){var h=this._context.capabilities.vao;if(h){const C=h.createVertexArray();h.bindVertexArray(C);this._bindLayout();h.bindVertexArray(null);this._glName=C;this._context.instanceCounter.increment(k.ResourceType.VertexArrayObject,
this)}this._initialized=!0}}bind(){this.initialize();const h=this._context.capabilities.vao;h?h.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())}_bindLayout(){const {_buffers:h,_layout:C,_indexBuffer:r}=this;h||e.error("Vertex buffer dictionary is empty!");const x=this._context.gl;for(const A in h){const p=h[A];p||e.error("Vertex buffer is uninitialized!");const u=C[A];u||e.error("Vertex element descriptor is empty!");w.bindVertexBufferLayout(this._context,this._locations,
p,u)}null!=r&&(this._context.capabilities.vao?x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,r.glName):this._context.bindBuffer(r))}unbind(){this.initialize();const h=this._context.capabilities.vao;h?h.bindVertexArray(null):this._unbindLayout()}_unbindLayout(){const {_buffers:h,_layout:C}=this;h||e.error("Vertex buffer dictionary is empty!");for(const r in h){const x=h[r];x||e.error("Vertex buffer is uninitialized!");w.unbindVertexBufferLayout(this._context,this._locations,x,C[r])}null!=this._indexBuffer&&this._context.unbindBuffer(this._indexBuffer.bufferType)}};
Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/programUtils":function(){define(["exports"],function(b){b.glslifyDefineMap=function(a){let f="";for(const k in a){var y=a[k];if("boolean"===typeof y)y&&(f+=`#define ${k}\n`);else if("number"===typeof y)f+=`#define ${k} ${y.toFixed()}\n`;else if("object"===typeof y){const {options:w,value:e}=y;if("number"===typeof w[e]){const {value:h,options:C,namespace:r}=y;y=r?`${r}_`:"";for(const x in C)f+=`#define ${y}${x} ${C[x].toFixed()}\n`;
f+=`#define ${k} ${y}${h}\n`}else{const h=y.options;let C=0;for(const r in h)f+=`#define ${h[r]} ${(C++).toFixed()}\n`;f+=`#define ${k} ${h[y.value]}\n`}}}return f};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/ProgramTemplate":function(){define(["exports","./Program"],function(b,a){b.createProgram=function(f,y,k=""){return new a.Program(f,k+y.shaders.vertexShader,k+y.shaders.fragmentShader,y.attributes)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"*noref":1}});
define("exports ../webgl/BufferObject ../webgl/FramebufferObject ../webgl/Program ../webgl/ProgramCache ../webgl/Renderbuffer ../webgl/ShaderCompiler ../webgl/Texture ../webgl/VertexArrayObject ../webgl/programUtils ../webgl/ProgramTemplate ../webgl/contextUtils".split(" "),function(b,a,f,y,k,w,e,h,C,r,x,A){b.BufferObject=a.BufferObject;b.FramebufferObject=f.FramebufferObject;b.Program=y.Program;b.ProgramCache=k.ProgramCache;b.Renderbuffer=w.Renderbuffer;b.ShaderCompiler=e.ShaderCompiler;b.Texture=
h.Texture;b.VertexArrayObject=C.VertexArrayObject;b.glslifyDefineMap=r.glslifyDefineMap;b.createProgram=x.createProgram;b.createContext=A.createContext;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});