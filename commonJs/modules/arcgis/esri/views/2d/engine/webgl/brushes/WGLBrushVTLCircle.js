// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
define("exports ../../vectorTiles/style/StyleDefinition ../enums ../number ./WGLBrush ../../../../webgl/enums".split(" "),function(m,t,u,v,w,h){class x extends w{constructor(){super(...arguments);this._programOptions={id:!1}}dispose(){}drawMany(d,c){const {context:e,displayLevel:l,requiredLevel:y,state:n,drawPhase:z,painter:A,spriteMosaic:B,styleLayerUID:k,requestRender:p,allowDelayedRender:C}=d;if(c.some(a=>a.layerData.get(k)?.circleIndexCount??!1)){d=d.styleLayer;var q=d.circleMaterial,b=A.vectorTilesMaterialManager,
g=d.getPaintValue("circle-translate",l),D=d.getPaintValue("circle-translate-anchor",l),f=z===u.WGLDrawPhase.HITTEST,r=this._programOptions;r.id=f;b=b.getMaterialProgram(e,q,r);if(C&&null!=p&&!b.compiled)p();else{e.useProgram(b);b.setUniformMatrix3fv("u_displayMat3",D===t.TranslateAnchor.VIEWPORT?n.displayMat3:n.displayViewMat3);b.setUniform2fv("u_circleTranslation",g);b.setUniform1f("u_depth",d.z);b.setUniform1f("u_antialiasingWidth",1.2);g=-1;f&&(f=v.u32to4Xu8(k+1),b.setUniform4fv("u_id",f));for(const a of c)a.layerData.has(k)&&
(a.key.level!==g&&(g=a.key.level,q.setDataUniforms(b,l,d,g,B)),c=a.layerData.get(k),c.circleIndexCount&&(c.prepareForRendering(e),f=c.vao,null!=f&&(e.bindVAO(f),b.setUniformMatrix3fv("u_dvsMat3",a.transforms.dvs),y!==a.key.level?e.setStencilFunction(h.CompareFunction.EQUAL,a.stencilRef,255):e.setStencilFunction(h.CompareFunction.GREATER,255,255),e.drawElements(h.PrimitiveType.TRIANGLES,c.circleIndexCount,h.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*c.circleIndexStart),a.triangleCount+=c.circleIndexCount/
3)))}}}}m.WGLBrushVTLCircle=x;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});