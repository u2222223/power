// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/TileInfo":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(b,f,l,g,x,m,u,n,t,a,c,h,p,w,k,d,q,C){var B;f=new f.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});l=B=class extends l.JSONSupport{static create(e={}){const {resolutionFactor:r=1,scales:A,size:y=256,spatialReference:v=p.WebMercator,numLODs:E=24}=e;if(!k.isValid(v)){e=[];if(A)for(var G=0;G<A.length;G++){var O=
A[G];e.push(new q({level:G,scale:O,resolution:O}))}else for(G=5E-4,O=E-1;0<=O;O--)e.unshift(new q({level:O,scale:G,resolution:G})),G*=2;return new B({dpi:96,lods:e,origin:new h(0,0,v),size:[y,y],spatialReference:v})}G=k.getInfo(v);e=e.origin?new h({x:e.origin.x,y:e.origin.y,spatialReference:v}):G?new h({x:G.origin[0],y:G.origin[1],spatialReference:v}):new h({x:0,y:0,spatialReference:v});G=1/(39.37*g.getMetersPerUnitForSR(v)*96);O=[];if(A)for(var Q=0;Q<A.length;Q++){var W=A[Q];O.push(new q({level:Q,
scale:W,resolution:W*G}))}else{var aa=k.isGeographic(v)?512/y*5.916575275917094E8:256/y*5.91657527591555E8;Q=Math.ceil(E/r);O.push(new q({level:0,scale:aa,resolution:aa*G}));for(W=1;W<Q;W++)aa/=2**r,O.push(new q({level:W,scale:aa,resolution:aa*G}))}return new B({dpi:96,lods:O,origin:e,size:[y,y],spatialReference:v})}constructor(e){super(e);this.dpi=96;this.spatialReference=this.size=this.origin=this.format=null}get isWrappable(){const {spatialReference:e,origin:r}=this;if(e&&r){const A=k.getInfo(e);
return e.isWrappable&&!!A&&Math.abs(A.origin[0]-r.x)<=A.dx}return!1}readOrigin(e,r){return h.fromJSON({spatialReference:r.spatialReference,...e})}set lods(e){const r=[],A=this._levelToLOD={};e&&e.forEach(y=>{r.push(y.scale);A[y.level]=y});this._set("scales",r);this._set("lods",e);this._initializeUpsampleLevels()}readSize(e,r){return[r.cols,r.rows]}writeSize(e,r){r.cols=e[0];r.rows=e[1]}zoomToScale(e){const r=this.scales;if(0>=e)return r[0];if(e>=r.length-1)return r[r.length-1];const A=Math.floor(e);
return r[A]/(r[A]/r[A+1])**(e-A)}scaleToZoom(e){const r=this.scales,A=r.length-1;let y=0;for(;y<A;y++){const v=r[y],E=r[y+1];if(v<=e)break;if(E===e)return y+1;if(v>e&&E<e)return y+Math.log(v/e)/Math.log(v/E)}return y}snapScale(e,r=.95){e=this.scaleToZoom(e);return e%Math.floor(e)>=r?this.zoomToScale(Math.ceil(e)):this.zoomToScale(Math.floor(e))}tileAt(e,r,A,y){var v=this.lodAt(e);if(!v)return null;let E;if("number"===typeof r)E=r,r=A;else{if(k.equals(r.spatialReference,this.spatialReference))E=r.x,
r=r.y;else{y=d.project(r,this.spatialReference);if(null==y)return null;E=y.x;r=y.y}y=A}A=v.resolution*this.size[0];v=v.resolution*this.size[1];y||(y=new C.TileKey(null,0,0,0,w.create()));y.level=e;y.row=Math.floor((this.origin.y-r)/v+.001);y.col=Math.floor((E-this.origin.x)/A+.001);this.updateTileInfo(y);return y}updateTileInfo(e,r=B.ExtrapolateOptions.NONE){var A=this.lodAt(e.level);A||r!==B.ExtrapolateOptions.POWER_OF_TWO||(r=this.lods[this.lods.length-1],r.level<e.level&&(A=r));if(A){var y=e.level-
A.level;r=A.resolution*this.size[0]/2**y;A=A.resolution*this.size[1]/2**y;e.id=`${e.level}/${e.row}/${e.col}`;e.extent||(e.extent=w.create());e.extent[0]=this.origin.x+e.col*r;e.extent[1]=this.origin.y-(e.row+1)*A;e.extent[2]=e.extent[0]+r;e.extent[3]=e.extent[1]+A}}upsampleTile(e){const r=this._upsampleLevels[e.level];if(!r||-1===r.parentLevel)return!1;e.level=r.parentLevel;e.row=Math.floor(e.row/r.factor+.001);e.col=Math.floor(e.col/r.factor+.001);this.updateTileInfo(e);return!0}getTileBounds(e,
r){var A=this.lodAt(r.level);if(null==A)return null;var {resolution:y}=A;A=y*this.size[0];y*=this.size[1];e[0]=this.origin.x+r.col*A;e[1]=this.origin.y-(r.row+1)*y;e[2]=e[0]+A;e[3]=e[1]+y;return e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return B.fromJSON(this.write({}))}getOrCreateCompatible(e,r){if(256===this.size[0]&&256===this.size[1])return 256===e?this:null;const A=[],y=this.lods.length;for(let v=0;v<y;v++){const E=this.lods[v];A.push(new q({level:E.level,scale:E.scale,resolution:E.resolution*
r}))}return new B({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:A})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let r=null;for(let A=0;A<e.length;A++){const y=e[A];this._upsampleLevels[y.level]={parentLevel:r?r.level:-1,factor:r?r.resolution/y.resolution:0};r=y}}};b.__decorate([x.property({type:Number,json:{write:!0}})],l.prototype,"compressionQuality",void 0);b.__decorate([x.property({type:Number,
json:{write:!0}})],l.prototype,"dpi",void 0);b.__decorate([x.property({type:String,json:{read:f.read,write:f.write,origins:{"web-scene":{read:!1,write:!1}}}})],l.prototype,"format",void 0);b.__decorate([x.property({readOnly:!0})],l.prototype,"isWrappable",null);b.__decorate([x.property({type:h,json:{write:!0}})],l.prototype,"origin",void 0);b.__decorate([t.reader("origin")],l.prototype,"readOrigin",null);b.__decorate([x.property({type:[q],value:null,json:{write:!0}})],l.prototype,"lods",null);b.__decorate([x.property({readOnly:!0})],
l.prototype,"scales",void 0);b.__decorate([x.property({cast:e=>Array.isArray(e)?e:"number"===typeof e?[e,e]:[256,256]})],l.prototype,"size",void 0);b.__decorate([t.reader("size",["rows","cols"])],l.prototype,"readSize",null);b.__decorate([c.writer("size",{cols:{type:m.Integer},rows:{type:m.Integer}})],l.prototype,"writeSize",null);b.__decorate([x.property({type:p,json:{write:!0}})],l.prototype,"spatialReference",void 0);l=B=b.__decorate([a.subclass("esri.layers.support.TileInfo")],l);(function(e){e=
e.ExtrapolateOptions||(e.ExtrapolateOptions={});e[e.NONE=0]="NONE";e[e.POWER_OF_TWO=1]="POWER_OF_TWO"})(l||(l={}));return l})},"esri/layers/support/LOD":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(b,f,l,g,x,m,u){var n;f=n=class extends f.JSONSupport{constructor(t){super(t);this.cols=null;this.level=
0;this.origin=this.levelValue=null;this.resolution=0;this.rows=null;this.scale=0}clone(){return new n({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};b.__decorate([l.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],f.prototype,"cols",void 0);b.__decorate([l.property({type:g.Integer,json:{write:!0}})],f.prototype,"level",void 0);b.__decorate([l.property({type:String,json:{write:!0}})],
f.prototype,"levelValue",void 0);b.__decorate([l.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],f.prototype,"origin",void 0);b.__decorate([l.property({type:Number,json:{write:!0}})],f.prototype,"resolution",void 0);b.__decorate([l.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],f.prototype,"rows",void 0);b.__decorate([l.property({type:Number,json:{write:!0}})],f.prototype,"scale",void 0);
return f=n=b.__decorate([u.subclass("esri.layers.support.LOD")],f)})},"esri/layers/support/TileKey":function(){define(["exports"],function(b){class f{constructor(l,g,x,m,u){this.id=l;this.level=g;this.row=x;this.col=m;this.extent=u}}b.TileKey=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/BreakpointsOwner":function(){define("exports ../chunks/tslib.es6 ../core/ArrayPool ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,l,g,x,m,u,n,t){function a(p,w){return w?c[p].valueToClassName[w].split(" "):[]}const c={widthBreakpoint:{getValue(p){const w=p.viewSize[0];p=p.breakpoints;const k=this.values;return w<=p.xsmall?k.xsmall:w<=p.small?k.small:w<=p.medium?k.medium:w<=p.large?k.large:k.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(p){const w=p.viewSize[1];p=p.breakpoints;const k=this.values;return w<=p.xsmall?k.xsmall:w<=p.small?k.small:w<=p.medium?k.medium:w<=p.large?k.large:k.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(p){p=p.viewSize;const w=this.values;return p[1]>=p[0]?w.portrait:w.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},h={xsmall:544,small:768,medium:992,large:1200};b.BreakpointsOwner=
p=>{p=class extends p{constructor(...w){super(...w);this.heightBreakpoint=this.widthBreakpoint=this.orientation=null;this.breakpoints=h}initialize(){this.addHandles(g.watch(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),g.initial))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(w){var k=this._get("breakpoints");if(w!==k){k=(k=w)&&k.xsmall<k.small&&k.small<k.medium&&k.medium<k.large;if(!k){const d=JSON.stringify(h,null,2);console.warn("provided breakpoints are not valid, using defaults:"+
d)}w=k?w:h;this._set("breakpoints",{...w})}}_updateClassNames(){if(this.container){var w=l.acquire(),k=l.acquire(),d=!1,q;for(q in c){const C=this[q],B=c[q].getValue({viewSize:this.size,breakpoints:this.breakpoints});C!==B&&(d=!0,this[q]=B,a(q,C).forEach(e=>k.push(e)),a(q,B).forEach(e=>w.push(e)))}d&&(this._applyClassNameChanges(w,k),l.release(w),l.release(k))}}_applyClassNameChanges(w,k){const d=this.container;d&&(k.forEach(q=>d.classList.remove(q)),w.forEach(q=>d.classList.add(q)))}_removeActiveClassNames(){const w=
this.container;if(w)for(var k in c)a(k,this[k]).forEach(d=>w.classList.remove(d))}};f.__decorate([x.property()],p.prototype,"breakpoints",null);f.__decorate([x.property()],p.prototype,"orientation",void 0);f.__decorate([x.property()],p.prototype,"widthBreakpoint",void 0);f.__decorate([x.property()],p.prototype,"heightBreakpoint",void 0);return p=f.__decorate([t.subclass("esri.views.BreakpointsOwner")],p)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/DOMContainer":function(){define("exports ../chunks/tslib.es6 ../intl ../core/domUtils ../core/events ../core/has ../core/Logger ../core/maybe ../core/reactiveUtils ../core/scheduling ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay ../intl/locale ../intl/messages".split(" "),
function(b,f,l,g,x,m,u,n,t,a,c,h,p,w,k,d,q){function C(e){e&&(g.empty(e),e.parentNode&&e.parentNode.removeChild(e))}const B=[0,0];b.DOMContainer=e=>{e=class extends e{constructor(...r){super(...r);this._freqInfo={freq:16,time:750};this._overlayRenderTaskHandle=null;this.height=0;this.position=this.overlay=this.messagesCommon=null;this.resizing=!1;this.surface=this.root=null;this.suspended=!0;this.userContent=this.ui=null;this.width=0;this.widthBreakpoint=null;this.addHandles([t.watch(()=>this.cursor,
A=>{const {surface:y}=this;y&&y.setAttribute("data-cursor",A)}),t.watch(()=>this.navigating,A=>{const {surface:y}=this;y&&y.setAttribute("data-navigating",A.toString())})])}initialize(){const r=m("mac"),A=async()=>{r&&(await t.whenOnce(()=>this.ready),this.messagesCommon=await q.fetchMessageBundle("esri/t9n/common").catch(()=>{}))};A();this.addHandles([t.watch(()=>this.ui,(y,v)=>this._handleUIChange(y,v),t.initial),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused")),
d.onLocaleChange(A)])}destroy(){this.destroyed||(this.ui=n.destroyMaybe(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(r){var A=this._get("container");const y=g.byId(r);y||"string"!==typeof r||u.getLogger(this).error("#container",`element with id '${r}' not found`);if(A!==y)if(this._stopMeasuring(),A&&(A.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&
(this.overlay.destroy(),this._set("overlay",null)),this.root&&(C(this.root),this._set("root",null)),this.userContent&&(g.reparent(this.userContent,A),C(this.userContent),this._set("userContent",null))),y){y.classList.add("esri-view");r=document.createElement("div");r.className="esri-view-user-storage";g.reparent(y,r);y.appendChild(r);this._set("userContent",r);r=document.createElement("div");r.className="esri-view-root";y.insertBefore(r,y.firstChild);this._set("root",r);A=document.createElement("div");
A.className="esri-view-surface";A.setAttribute("role","application");A.tabIndex=0;r.appendChild(A);this._set("surface",A);var v=new k;r.appendChild(v.surface);this._set("overlay",v);this.addHandles(t.watch(()=>v.needsRender,E=>{this._overlayRenderTaskHandle=E&&!this._overlayRenderTaskHandle?a.addFrameTask({render:()=>this.overlay?.render()}):n.removeMaybe(this._overlayRenderTaskHandle)}));this.forceDOMReadyCycle();this._set("container",y);this._startMeasuring()}else this._set("width",0),this._set("height",
0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(r,A,y){const v=this.position;r-=v?v[0]:0;A-=v?v[1]:0;y?(y[0]=r,y[1]=A):y=[r,A];return y}containerToPage(r,A,y){const v=this.position;r+=v?v[0]:0;A+=v?v[1]:0;y?(y[0]=r,y[1]=A):y=[r,A];return y}_handleUIChange(r,
A){this.removeHandles("ui");A&&A!==r&&A.destroy();r&&(r.view=this,this.addHandles(t.watch(()=>this.root,y=>{if(y){const v=document.createElement("div");y.appendChild(v);y=v}else y=null;r.container=y},t.initial),"ui"));this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring");this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=16;r.time=750;this.addHandles([x.on(window,"resize",()=>{r.freq=16;r.time=750}),a.addFrameTask({prepare:A=>{const y=this._measure(),
v=this._freqInfo;v.time+=A.deltaTime;y&&(v.freq=16,this._get("resizing")||this._set("resizing",!0));v.time<v.freq||(v.time=0,this._position()||y?v.freq=16:v.freq=Math.min(750,2*v.freq),!y&&512<=v.freq&&this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();this._position()}_measure(){var r=this.container;const A=r?r.clientWidth:0;r=r?r.clientHeight:0;if(0===A||0===r)return this.suspended||this._set("suspended",!0),!1;const y=this.width,v=this.height;if(A===y&&r===v)return this.suspended&&
this._set("suspended",!1),!1;this._set("width",A);this._set("height",r);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:y,oldHeight:v,width:A,height:r});return!0}_position(){var r=this.container;const A=this.position;var y;if(y=r)y=(r.ownerDocument||window.document).defaultView,r=r.getBoundingClientRect(),B[0]=r.left+(y?.pageXOffset??0),B[1]=r.top+(y?.pageYOffset??0),y=B;r=y;return r?A&&r[0]===A[0]&&r[1]===A[1]?!1:(this._set("position",[r[0],r[1]]),!0):!1}forceDOMReadyCycle(){}};
f.__decorate([c.property()],e.prototype,"container",null);f.__decorate([c.property({readOnly:!0})],e.prototype,"focused",null);f.__decorate([c.property({readOnly:!0})],e.prototype,"height",void 0);f.__decorate([c.property()],e.prototype,"messagesCommon",void 0);f.__decorate([c.property({type:k})],e.prototype,"overlay",void 0);f.__decorate([c.property({readOnly:!0})],e.prototype,"position",void 0);f.__decorate([c.property({readOnly:!0})],e.prototype,"resizing",void 0);f.__decorate([c.property({readOnly:!0})],
e.prototype,"root",void 0);f.__decorate([c.property({value:null,readOnly:!0})],e.prototype,"size",null);f.__decorate([c.property({readOnly:!0})],e.prototype,"surface",void 0);f.__decorate([c.property({readOnly:!0})],e.prototype,"suspended",void 0);f.__decorate([c.property()],e.prototype,"ui",void 0);f.__decorate([c.property({readOnly:!0})],e.prototype,"userContent",void 0);f.__decorate([c.property({readOnly:!0})],e.prototype,"width",void 0);f.__decorate([c.property()],e.prototype,"widthBreakpoint",
void 0);return e=f.__decorate([w.subclass("esri.views.DOMContainer")],e)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../core/support/UpdatingHandles ../../libs/maquette/projection ../../libs/maquette/projector".split(" "),
function(b,f,l,g,x,m,u,n,t,a,c){f=class extends f{constructor(){super(...arguments);this.items=new l;this._watchUpdatingTracking=new t.UpdatingHandles;this._callbacks=new Map;this._projector=c.createProjector();this._hiddenProjector=c.createProjector()}get needsRender(){return 0<this.items.length}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const h=document.createElement("div");h.className="esri-overlay-surface";this._set("surface",h);this._hiddenSurface=document.createElement("div");
this._hiddenSurface.setAttribute("style","visibility: hidden;");h.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,p=>{for(const w of p.added){const k=()=>w.render();this._callbacks.set(w,k);this._projector.append(this.surface,k)}for(const w of p.removed)p=this._projector.detach(this._callbacks.get(w)),this.surface.removeChild(p.domNode),this._callbacks.delete(w)})}addItem(h){this.items.add(h)}removeItem(h){this.items.remove(h)}destroy(){this.items.removeAll();
this._callbacks.forEach(h=>this._projector.detach(h));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(h){const p=this._hiddenSurface,w=this._hiddenProjector;let k;const d=()=>k=h.render();w.append(p,d);w.renderNow();const q={left:0,top:0,right:0,bottom:0};if(k?.domNode){const C=k.domNode.getBoundingClientRect();q.left=C.left;q.top=C.top;q.right=C.right;q.bottom=C.bottom}for(w.detach(d);p.firstChild;)p.removeChild(p.firstChild);
return q}overlaps(h,p){h=this.computeBoundingRect(h);p=this.computeBoundingRect(p);return Math.max(h.left,p.left)<=Math.min(h.right,p.right)&&Math.max(h.top,p.top)<=Math.min(h.bottom,p.bottom)}get hasVisibleItems(){return this.items.some(h=>h.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(h,p){const w=!!p?.disableDecorations;if(this.items.some(d=>d.visible&&!(w&&d.isDecoration))){var k=h.getContext("2d");k.save();k.font=this._fontString();this.items.forEach(d=>
{w&&d.isDecoration||(k.save(),d.renderCanvas(k),k.restore())});k.restore()}}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};b.__decorate([g.property({readOnly:!0})],f.prototype,"surface",void 0);b.__decorate([g.property({readOnly:!0})],f.prototype,"items",void 0);b.__decorate([g.property({readOnly:!0})],f.prototype,"needsRender",null);b.__decorate([g.property({readOnly:!0})],f.prototype,"_watchUpdatingTracking",void 0);b.__decorate([g.property({readOnly:!0})],f.prototype,
"updating",null);return f=b.__decorate([n.subclass("esri.views.overlay.ViewOverlay")],f)})},"esri/views/PopupView":function(){define("require exports ../chunks/tslib.es6 ../core/asyncUtils ../core/deprecate ../core/Error ../core/Logger ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./input/InputManager".split(" "),function(b,f,l,g,x,m,u,n,t,a,c,h,p,
w,k){function d(B){return null!=B&&"open"in B&&"declaredClass"in B}function q(B){return null!=B&&"declaredClass"in B&&"dockOptions"in B}const C=B=>Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"}));f.PopupView=B=>{B=class extends B{constructor(){super(...arguments);this._popupSetupTask=null;this.popup={};this.popupEnabled=!0}initialize(){this.addHandles([t.watch(()=>[this.ui,this.popup],([e,r],A)=>{if(A){const [y,v]=A;y&&d(v)&&(v.view=null,q(v)&&y.remove(v,
"popup"))}e&&d(r)&&(r.view=this,q(r)&&e.add(r,{key:"popup",position:"manual",internal:!0}))},t.initial),this.on("click",e=>{this.popup&&this.popupEnabled&&("mouse"!==e.pointerType||0===e.button)&&(!d(this.popup)&&"autoOpenEnabled"in this.popup&&!1===this.popup.autoOpenEnabled||(d(this.popup)?this.popup.viewModel.handleViewClick(e):e.async(async()=>{await this.setupPopup();d(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(e)})))},k.ViewEventPriorities.WIDGET)]);
t.whenOnce(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{new Promise((e,r)=>b(["../widgets/Popup"],A=>e(C(A)),r))})}destroy(){this.destroyed||this.closePopup()}async openPopup(e){if(d(this.popup))return this.popup.open(e);try{await this.setupPopup(),this.popup?this.popup.open(e):u.getLogger(this).error(new m("view:null-popup","Popup is null and can't be opened"))}catch{}}closePopup(){this._popupSetupTask?.abort();d(this.popup)&&this.popup.close()}async fetchPopupFeatures(e,r){await this.when();
const {location:A,queryArea:y,layerViewsAndGraphics:v,clientOnlyGraphics:E}=await this._prepareFetchPopupFeatures(e,r);e=Promise.resolve(E);r=this._queryLayerPopupFeatures(y,v,r);const G=r.map(O=>O.promise);e=n.eachAlwaysValues([e,...G]).then(O=>Array.from(new Set(O.flat())));return{location:A,clientOnlyGraphics:E,allGraphicsPromise:e,promisesPerLayerView:r}}async setupPopup(){this._popupSetupTask?.abort();if(this.popup&&!d(this.popup))return this._popupSetupTask=g.createTask(async e=>{const {default:r}=
await new Promise((A,y)=>b(["../widgets/Popup"],v=>A(C(v)),y));n.throwIfAborted(e);this.popup&&!d(this.popup)&&(e=this.popup,delete e.open,delete e.close,this.popup=new r(e))}),this._popupSetupTask.promise}_queryLayerPopupFeatures(e,r,A){return r.map(({layerView:y,graphics:v})=>{v=y.fetchPopupFeatures(e,{clientGraphics:v,event:null!=A?A.event:void 0,signal:null!=A?A.signal:void 0,defaultPopupTemplateEnabled:null!=A?!!A.defaultPopupTemplateEnabled:!1});return{layerView:y,promise:v}})}_isValidPopupGraphic(e,
r){return e&&!!e.getEffectivePopupTemplate(null!=r&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(e,r){const {clientGraphics:A,queryArea:y,location:v}=await this._popupHitTestGraphics(e,r);e=this._getFetchPopupLayerViews();const {layerViewsAndGraphics:E,clientOnlyGraphics:G}=this._graphicsPerFetchPopupLayerView(A,e);return{clientOnlyGraphics:G,layerViewsAndGraphics:E,queryArea:y,location:v}}async _popupHitTestGraphics(e,r){var A=await this.popupHitTest(e);e=A.mapPoint;A=A.results.filter(v=>
"graphic"===v.type&&this._isValidPopupGraphic(v.graphic,r));const y=A.length?A[0].mapPoint:null;return{clientGraphics:A.map(v=>v.graphic),queryArea:e,location:e||y}}_getFetchPopupLayerViews(){const e=[];this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&e.push(r)});null!=this.graphicsView&&this._isValidPopupLayerView(this.graphicsView)&&e.push(this.graphicsView);return e.reverse()}_isValidPopupLayerView(e){return null!=e&&(!("layer"in e)||!e.suspended)&&"fetchPopupFeatures"in e}_graphicsPerFetchPopupLayerView(e,
r){const A=[],y=new Map;r=r.map(v=>{const E=[];"layer"in v?y.set(v.layer,E):y.set(v.graphics,E);return{layerView:v,graphics:E}});for(const v of e)(e=y.get(v.layer)||y.get(v.sourceLayer)||null)?e.push(v):A.push(v);return{layerViewsAndGraphics:r,clientOnlyGraphics:A}}};l.__decorate([a.property({cast(e){if(!e||d(e))return e;"object"===typeof e&&(e.open=r=>{x.deprecated(u.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",
version:"4.27"});return this.openPopup(r)},e.close=()=>{x.deprecated(u.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"});return this.closePopup()});return e}})],B.prototype,"popup",void 0);l.__decorate([a.property()],B.prototype,"popupEnabled",void 0);return B=l.__decorate([w.subclass("esri.views.PopupView")],B)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/AnimationManager":function(){define("../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/Accessor ../../core/maybe ../../core/scheduling ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../ViewAnimation ./unitBezier ./viewpointUtils ../../geometry/Point".split(" "),function(b,f,l,g,x,m,u,n,t,a,c,h,p,w,k){class d{constructor(q,C,B,e){const r=q.targetGeometry,
A=C.targetGeometry;e?"string"===typeof e&&(e=p.parse(e)||p.easingFunctions.ease):e=p.easingFunctions.ease;this.easing=e;this.duration=B;this.sCenterX=r.x;this.sCenterY=r.y;this.sScale=q.scale;this.sRotation=q.rotation;this.tCenterX=A.x;this.tCenterY=A.y;this.tScale=C.scale;this.tRotation=C.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:
-180>this.dRotation&&(this.dRotation+=360)}applyRatio(q,C){var B=this.easing(C);let e,r;1<=C?(C=this.tCenterX,e=this.tCenterY,r=this.tRotation,B=this.tScale):(C=this.sCenterX+B*this.dCenterX,e=this.sCenterY+B*this.dCenterY,r=this.sRotation+B*this.dRotation,B=this.sScale+B*this.dScale);q.targetGeometry.x=C;q.targetGeometry.y=e;q.scale=B;q.rotation=r}}f=class extends g{constructor(q){super(q);this.animation=this.updateFunction=null;this.duration=200;this.transition=null;this.easing=p.easingFunctions.ease;
this.view=null;this.viewpoint=new l({targetGeometry:new k,scale:0,rotation:0});this._updateTask=m.addFrameTask({postRender:this._postRender.bind(this)});this._updateTask.pause()}destroy(){this._updateTask=x.removeMaybe(this._updateTask)}animate(q,C,B){this.stop();w.copy(this.viewpoint,C);this.transition=new d(this.viewpoint,q.target,B?.duration||this.duration,B?.easing||this.easing);C=()=>{this.animation===q&&this._updateTask&&("finished"===q.state&&(this.transition?.applyRatio(this.viewpoint,1),
this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.updateFunction=this.animation=null)};q.when(C,C);this._startTime=performance.now();this._updateTask.resume();return this.animation=q}animateContinous(q,C){this.stop();this.updateFunction=C;this.viewpoint=q;const B=new h({target:q.clone()});q=()=>{this.animation===B&&this._updateTask&&(this.updateFunction=this.animation=null)};B.when(q,q);this._startTime=performance.now();this._updateTask.resume();return this.animation=B}stop(){this.animation&&
(this.animation.stop(),this.updateFunction=this.animation=null)}_postRender(q){var C=this.animation;if(C&&C.state!==h.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,q.deltaTime);else{q=this.transition;C=(performance.now()-this._startTime)/q.duration;const B=1<=C;q.applyRatio(this.viewpoint,C);B&&this.animation?.finish()}this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};b.__decorate([u.property()],f.prototype,"animation",
void 0);b.__decorate([u.property()],f.prototype,"duration",void 0);b.__decorate([u.property()],f.prototype,"transition",void 0);b.__decorate([u.property()],f.prototype,"easing",void 0);b.__decorate([u.property()],f.prototype,"view",void 0);b.__decorate([u.property()],f.prototype,"viewpoint",void 0);return f=b.__decorate([c.subclass("esri.views.2d.AnimationManager")],f)})},"esri/views/2d/unitBezier":function(){define(["exports"],function(b){function f(x,m,u,n){function t(d,q){var C;let B,e;B=d;for(C=
0;8>C;C++){e=((h*B+c)*B+a)*B-d;if(Math.abs(e)<q)return B;var r=(3*h*B+2*c)*B+a;if(1E-6>Math.abs(r))break;B-=e/r}r=0;C=1;B=d;if(B<r)return r;if(B>C)return C;for(;r<C;){e=((h*B+c)*B+a)*B;if(Math.abs(e-d)<q)break;d>e?r=B:C=B;B=.5*(C-r)+r}return B}const a=3*x,c=3*(u-x)-a,h=1-a-c,p=3*m,w=3*(n-m)-p,k=1-p-w;return function(d,q=1E-6){d=t(d,q);return((k*d+w)*d+p)*d}}const l=/^cubic-bezier\((.*)\)/,g={};g.ease=f(.25,.1,.25,1);g.linear=f(0,0,1,1);g.easeIn=g["ease-in"]=f(.42,0,1,1);g.easeOut=g["ease-out"]=f(0,
0,.58,1);g.easeInOut=g["ease-in-out"]=f(.42,0,.58,1);b.easingFunctions=g;b.parse=function(x){let m=g[x]||null;!m&&(x=l.exec(x))&&(x=x[1].split(",").map(u=>parseFloat(u.trim())),4!==x.length||x.some(u=>isNaN(u))||(m=f.apply(f,x)));return m};b.unitBezier=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/viewpointUtils":function(){define("exports ../../Viewpoint ../../core/Collection ../../core/unitUtils ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df64 ../../chunks/vec2 ../../chunks/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/projection ../../geometry/SpatialReference ../../geometry/support/normalizeUtils ../../geometry/support/spatialReferenceUtils".split(" "),
function(b,f,l,g,x,m,u,n,t,a,c,h,p,w,k,d){function q(F,J){return J.type?n.set(F,J.x,J.y):n.copy(F,J)}function C(F,J){return Math.max(F.width/Math.max(1,J[0]),F.height/Math.max(1,J[1]))*E(F.spatialReference)}async function B(F,J,P,N){if(!F||Array.isArray(F)&&!F.length)return null;l.isCollection(F)&&(F=F.toArray());if(Array.isArray(F)&&F.length&&"object"===typeof F[0]){var U=F.every(T=>"attributes"in T);var Y=F.some(T=>!T.geometry),ea=F;if(U&&Y&&J&&J.allLayerViews){U=new Map;for(var ha of F)F=ha.layer,
Y=U.get(F)||[],ea=ha.attributes[F.objectIdField],null!=ea&&Y.push(ea),U.set(F,Y);const T=[];U.forEach((ca,ia)=>{const ka=J.allLayerViews.find(ja=>ja.layer.id===ia.id);if(ka&&"queryFeatures"in ka){const ja=ia.createQuery();ja.objectIds=ca;ja.returnGeometry=!0;T.push(ka.queryFeatures(ja))}});ha=await Promise.all(T);F=[];for(var da of ha)if(da&&da.features&&da.features.length)for(var M of da.features)null!=M.geometry&&F.push(M.geometry);ea=F}for(const T of ea)N=await B(T,J,P,N);return N}if(Array.isArray(F)&&
2===F.length&&"number"===typeof F[0]&&"number"===typeof F[1])U=new h(F);else if(F instanceof c)U=F;else if("geometry"in F)if(F.geometry)U=F.geometry;else if(F.layer){const T=F.layer;(da=J.allLayerViews.find(ca=>ca.layer.id===T.id))&&"queryFeatures"in da&&(M=T.createQuery(),M.objectIds=[F.attributes[T.objectIdField]],M.returnGeometry=!0,U=(await da.queryFeatures(M))?.features?.[0]?.geometry)}if(null==U)return null;switch(U.type){case "point":da=new a({xmin:U.x,ymin:U.y,xmax:U.x,ymax:U.y,spatialReference:U.spatialReference});
break;case "extent":case "multipoint":case "polygon":case "polyline":da=k.getDenormalizedExtent(U);break;default:da=U.extent}if(!da)return null;p.isLoaded()||p.canProjectWithoutEngine(da.spatialReference,P)||await p.load();P=p.project(da,P);return P?N=N?N.union(P):P:null}function e(F){if(F&&(!Array.isArray(F)||"number"!==typeof F[0])&&("object"===typeof F||Array.isArray(F)&&"object"===typeof F[0])){if("layer"in F&&null!=F.layer?.minScale&&null!=F.layer.maxScale){var J=F.layer;return{min:J.minScale,
max:J.maxScale}}if(Array.isArray(F)&&F.length&&F.every(P=>"layer"in P)){let P=J=0;for(const N of F)F=N.layer,F?.minScale&&F.maxScale&&(J=F.minScale<J?F.minScale:J,P=F.maxScale>P?F.maxScale:P);return J&&P?{min:J,max:P}:null}}}function r(F,J){return d.equals(F.wkid?F:F.spatialReference||w.WGS84,J)?F:p.project(F,J)}function A(F,J){const P=F.targetGeometry,N=J.targetGeometry;P.x=N.x;P.y=N.y;P.spatialReference=N.spatialReference;F.scale=J.scale;F.rotation=J.rotation;return F}function y(F,J,P){return P?
n.set(F,.5*(J[0]-P.right+P.left),.5*(J[1]-P.bottom+P.top)):n.scale(F,J,.5)}function v(F){var J=F.scale;F=F.targetGeometry;F=null!=F&&d.isValid(F.spatialReference)?1/(39.37*g.getMetersPerUnitForSR(F.spatialReference)*96):1;return J*F}function E(F){return d.isValid(F)?39.37*g.getMetersPerUnitForSR(F)*96:1}function G(F){return(F=d.getInfo(F))?F.valid[1]-F.valid[0]:0}const O=180/Math.PI,Q=function(){const F=t.create();return function(J,P,N){const U=P.targetGeometry;q(F,U);P=.5*v(P);J.xmin=F[0]-P*N[0];
J.ymin=F[1]-P*N[1];J.xmax=F[0]+P*N[0];J.ymax=F[1]+P*N[1];J.spatialReference=U.spatialReference;return J}}(),W=function(){const F=t.create();return function(J,P,N){return n.sub(J,n.scale(J,P,.5),y(F,P,N))}}(),aa=function(){const F=u.create(),J=t.create();return function(P,N,U,Y){const ea=v(N);N=x.toRadian(N.rotation)||0;n.set(J,ea,ea);m.fromScaling(F,J);m.rotate(F,F,N);m.translate(F,F,W(J,U,Y));m.translate(F,F,[0,Y.top-Y.bottom]);return n.set(P,F[4],F[5])}}(),S=function(){const F=t.create(),J=t.create(),
P=t.create();return function(N,U,Y,ea,ha,da){n.negate(F,U);n.scale(J,Y,.5*da);n.set(P,1/ea*da,-1/ea*da);m.fromTranslation(N,J);ha&&m.rotate(N,N,ha);m.scale(N,N,P);m.translate(N,N,F);return N}}(),ba=function(){const F=t.create();return function(J,P,N,U){const Y=v(P),ea=x.toRadian(P.rotation)||0;q(F,P.targetGeometry);return S(J,F,N,Y,ea,U)}}(),fa=function(){const F=t.create();return function(J,P,N,U){const Y=v(P);q(F,P.targetGeometry);return S(J,F,N,Y,0,U)}}(),z=function(){const F=t.create(),J=t.create(),
P=[0,0,0];return function(N,U,Y){n.subtract(F,N,U);n.normalize(F,F);n.subtract(J,N,Y);n.normalize(J,J);n.cross(P,F,J);N=Math.acos(n.dot(F,J)/(n.length(F)*n.length(J)))*O;0>P[2]&&(N=-N);isNaN(N)&&(N=0);return N}}(),D=function(){const F=t.create();return function(J,P,N,U){const Y=J.targetGeometry;A(J,P);aa(F,P,N,U);Y.x+=F[0];Y.y+=F[1];return J}}(),K=function(){return function(F,J,P){A(F,J);J=F.targetGeometry;J.x=P.x;J.y=P.y;J.spatialReference=P.spatialReference;return F}}(),V=function(){const F=t.create();
return function(J,P,N,U,Y){Y||(Y="center");n.sub(F,N,U);n.scale(F,F,.5);N=F[0];U=F[1];switch(Y){case "center":n.set(F,0,0);break;case "left":n.set(F,-N,0);break;case "top":n.set(F,0,U);break;case "right":n.set(F,N,0);break;case "bottom":n.set(F,0,-U);break;case "top-left":n.set(F,-N,U);break;case "bottom-left":n.set(F,-N,-U);break;case "top-right":n.set(F,N,U);break;case "bottom-right":n.set(F,N,-U)}Z(J,P,F);return J}}(),H=function(){const F=t.create();return function(J,P,N,U,Y){A(J,P);isNaN(N)||
0===N||(R(F,U,P,Y),J.scale=P.scale*N,X(F,F,J,Y),Z(J,J,n.set(F,F[0]-U[0],U[1]-F[1])));return J}}(),I=function(){const F=t.create();return function(J,P,N,U,Y,ea){A(J,P);isNaN(N)||0===N||(R(F,Y,P,ea),J.scale=P.scale*N,J.rotation+=U,X(F,F,J,ea),Z(J,J,n.set(F,F[0]-Y[0],Y[1]-F[1])));return J}}(),L=function(){const F=t.create(),J=t.create();return function(P,N,U,Y,ea,ha,da){W(J,ha,da);n.add(F,ea,J);return Y?I(P,N,U,Y,F,ha):H(P,N,U,F,ha)}}(),R=function(){const F=u.create();return function(J,P,N,U){var Y=
n.transformMat2d;ba(F,N,U,1);N=m.invert(F,F);return Y.call(n,J,P,N)}}(),X=function(){const F=u.create();return function(J,P,N,U){return n.transformMat2d(J,P,ba(F,N,U,1))}}(),Z=function(){const F=t.create(),J=u.create();return function(P,N,U){A(P,N);const Y=v(N),ea=P.targetGeometry;m.fromRotation(J,x.toRadian(N.rotation)||0);m.scale(J,J,t.fromValues(Y,Y));n.transformMat2d(F,U,J);ea.x+=F[0];ea.y+=F[1];return P}}();b.addPadding=D;b.angleBetween=z;b.centerAt=K;b.copy=A;b.create=async function(F,J){if(!F||
!J)return new f({targetGeometry:new h,scale:0,rotation:0});let P=J.spatialReference;const {constraints:N,padding:U,viewpoint:Y,size:ea}=J,ha=[U?ea[0]-U.left-U.right:ea[0],U?ea[1]-U.top-U.bottom:ea[1]];let da=null;F instanceof f?da=F:F.viewpoint?da=F.viewpoint:F.target&&"esri.Viewpoint"===F.target.declaredClass&&(da=F.target);let M=null;if(da?.targetGeometry)M=da.targetGeometry;else if(F instanceof a)M=F;else if(F||F&&("center"in F||"extent"in F||"target"in F))M=await B(F.center,J,P)||await B(F.extent,
J,P)||await B(F.target,J,P)||await B(F,J,P);!M&&Y?.targetGeometry?M=Y.targetGeometry:!M&&J.extent&&(M=J.extent);if(!P){var T=J.spatialReference||J.extent||M;P=T.wkid?T:T.spatialReference||w.WGS84}p.isLoaded()||d.equals(M.spatialReference,P)||p.canProjectWithoutEngine(M.spatialReference,P)||await p.load();T=r("center"in M?M.center:M,P);!1!==J.pickClosestTarget&&"point"===T.type&&"point"===Y.targetGeometry?.type&&(T.x=k.getClosestDenormalizedXToReference(T.x,Y.targetGeometry.x,T.spatialReference));
var ca=0;null!=da?.targetGeometry&&"point"===da.targetGeometry.type?ca=da.scale:"scale"in F&&F.scale?ca=F.scale:"zoom"in F&&-1!==F.zoom&&N&&N.effectiveLODs?ca=N.zoomToScale(F.zoom):Array.isArray(M)||"point"===M.type||"extent"===M.type&&0===M.width&&0===M.height?(ca=r(J.extent,P),ca=null!=ca?C(ca,ha):J.extent?C(J.extent,ha):Y.scale):ca=C(r(M.extent,P),ha);if(J=e(F.target??F))J.min&&J.min<ca?ca=J.min:J.max&&J.max>ca&&(ca=J.max);J=0;da?J=da.rotation:F.hasOwnProperty("rotation")?J=F.rotation:Y&&(J=Y.rotation);
F=new f({targetGeometry:T,scale:ca,rotation:J});N&&(F=N.fit(F),N.constrainByGeometry(F),N.rotationEnabled||(F.rotation=Y.rotation));return F};b.extentToScale=C;b.getAnchor=y;b.getExtent=Q;b.getMatrix=S;b.getPaddingMapTranslation=aa;b.getPaddingScreenTranslation=W;b.getResolution=v;b.getResolutionToScaleFactor=E;b.getTransform=ba;b.getTransformNoRotation=fa;b.getWorldScreenWidth=function(F,J){return Math.round(G(F)/J)};b.getWorldWidth=G;b.padAndScaleAndRotateBy=L;b.resize=V;b.rotateBy=function(F,J,
P){A(F,J);F.rotation+=P;return F};b.rotateTo=function(F,J,P){A(F,J);F.rotation=P;return F};b.scaleAndRotateBy=I;b.scaleTo=function(F,J,P){A(F,J);F.scale=P;return F};b.setExtent=function(F,J,P,N,U){K(F,J,P.center);F.scale=C(P,N);U?.constraints?.constrain(F);return F};b.toMap=R;b.toScreen=X;b.translateBy=Z;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(b,f){function l(v,E){v[0]=E[0];v[1]=E[1];v[2]=E[2];v[3]=E[3];
v[4]=E[4];v[5]=E[5];return v}function g(v){v[0]=1;v[1]=0;v[2]=0;v[3]=1;v[4]=0;v[5]=0;return v}function x(v,E,G,O,Q,W,aa){v[0]=E;v[1]=G;v[2]=O;v[3]=Q;v[4]=W;v[5]=aa;return v}function m(v,E){const G=E[0],O=E[1],Q=E[2],W=E[3],aa=E[4];E=E[5];let S=G*W-O*Q;if(!S)return null;S=1/S;v[0]=W*S;v[1]=-O*S;v[2]=-Q*S;v[3]=G*S;v[4]=(Q*E-W*aa)*S;v[5]=(O*aa-G*E)*S;return v}function u(v){return v[0]*v[3]-v[1]*v[2]}function n(v,E,G){const O=E[0],Q=E[1],W=E[2],aa=E[3],S=E[4];E=E[5];const ba=G[0],fa=G[1],z=G[2],D=G[3],
K=G[4];G=G[5];v[0]=O*ba+W*fa;v[1]=Q*ba+aa*fa;v[2]=O*z+W*D;v[3]=Q*z+aa*D;v[4]=O*K+W*G+S;v[5]=Q*K+aa*G+E;return v}function t(v,E,G){const O=E[0],Q=E[1],W=E[2],aa=E[3],S=E[4];E=E[5];const ba=Math.sin(G);G=Math.cos(G);v[0]=O*G+W*ba;v[1]=Q*G+aa*ba;v[2]=O*-ba+W*G;v[3]=Q*-ba+aa*G;v[4]=S;v[5]=E;return v}function a(v,E,G){const O=E[1],Q=E[2],W=E[3],aa=E[4],S=E[5],ba=G[0];G=G[1];v[0]=E[0]*ba;v[1]=O*ba;v[2]=Q*G;v[3]=W*G;v[4]=aa;v[5]=S;return v}function c(v,E,G){const O=E[0],Q=E[1],W=E[2],aa=E[3],S=E[4];E=E[5];
const ba=G[0];G=G[1];v[0]=O;v[1]=Q;v[2]=W;v[3]=aa;v[4]=O*ba+W*G+S;v[5]=Q*ba+aa*G+E;return v}function h(v,E){const G=Math.sin(E);E=Math.cos(E);v[0]=E;v[1]=G;v[2]=-G;v[3]=E;v[4]=0;v[5]=0;return v}function p(v,E){v[0]=E[0];v[1]=0;v[2]=0;v[3]=E[1];v[4]=0;v[5]=0;return v}function w(v,E){v[0]=1;v[1]=0;v[2]=0;v[3]=1;v[4]=E[0];v[5]=E[1];return v}function k(v){return"mat2d("+v[0]+", "+v[1]+", "+v[2]+", "+v[3]+", "+v[4]+", "+v[5]+")"}function d(v){return Math.sqrt(v[0]**2+v[1]**2+v[2]**2+v[3]**2+v[4]**2+v[5]**
2+1)}function q(v,E,G){v[0]=E[0]+G[0];v[1]=E[1]+G[1];v[2]=E[2]+G[2];v[3]=E[3]+G[3];v[4]=E[4]+G[4];v[5]=E[5]+G[5];return v}function C(v,E,G){v[0]=E[0]-G[0];v[1]=E[1]-G[1];v[2]=E[2]-G[2];v[3]=E[3]-G[3];v[4]=E[4]-G[4];v[5]=E[5]-G[5];return v}function B(v,E,G){v[0]=E[0]*G;v[1]=E[1]*G;v[2]=E[2]*G;v[3]=E[3]*G;v[4]=E[4]*G;v[5]=E[5]*G;return v}function e(v,E,G,O){v[0]=E[0]+G[0]*O;v[1]=E[1]+G[1]*O;v[2]=E[2]+G[2]*O;v[3]=E[3]+G[3]*O;v[4]=E[4]+G[4]*O;v[5]=E[5]+G[5]*O;return v}function r(v,E){return v[0]===E[0]&&
v[1]===E[1]&&v[2]===E[2]&&v[3]===E[3]&&v[4]===E[4]&&v[5]===E[5]}function A(v,E){const G=v[0],O=v[1],Q=v[2],W=v[3],aa=v[4];v=v[5];const S=E[0],ba=E[1],fa=E[2],z=E[3],D=E[4];E=E[5];const K=f.getEpsilon();return Math.abs(G-S)<=K*Math.max(1,Math.abs(G),Math.abs(S))&&Math.abs(O-ba)<=K*Math.max(1,Math.abs(O),Math.abs(ba))&&Math.abs(Q-fa)<=K*Math.max(1,Math.abs(Q),Math.abs(fa))&&Math.abs(W-z)<=K*Math.max(1,Math.abs(W),Math.abs(z))&&Math.abs(aa-D)<=K*Math.max(1,Math.abs(aa),Math.abs(D))&&Math.abs(v-E)<=K*
Math.max(1,Math.abs(v),Math.abs(E))}const y=Object.freeze(Object.defineProperty({__proto__:null,add:q,copy:l,determinant:u,equals:A,exactEquals:r,frob:d,fromRotation:h,fromScaling:p,fromTranslation:w,identity:g,invert:m,mul:n,multiply:n,multiplyScalar:B,multiplyScalarAndAdd:e,rotate:t,scale:a,set:x,str:k,sub:C,subtract:C,translate:c},Symbol.toStringTag,{value:"Module"}));b.add=q;b.copy=l;b.determinant=u;b.equals=A;b.exactEquals=r;b.frob=d;b.fromRotation=h;b.fromScaling=p;b.fromTranslation=w;b.identity=
g;b.invert=m;b.mat2d=y;b.mul=n;b.multiply=n;b.multiplyScalar=B;b.multiplyScalarAndAdd=e;b.rotate=t;b.scale=a;b.set=x;b.str=k;b.sub=C;b.subtract=C;b.translate=c})},"esri/chunks/mat2df64":function(){define(["exports"],function(b){function f(){return[1,0,0,1,0,0]}function l(u){return[u[0],u[1],u[2],u[3],u[4],u[5]]}function g(u,n,t,a,c,h){return[u,n,t,a,c,h]}function x(u,n){return new Float64Array(u,n,6)}const m=Object.freeze(Object.defineProperty({__proto__:null,clone:l,create:f,createView:x,fromValues:g},
Symbol.toStringTag,{value:"Module"}));b.clone=l;b.create=f;b.createView=x;b.fromValues=g;b.mat2df64=m})},"esri/chunks/vec2":function(){define(["exports","./common"],function(b,f){function l(H,I){H[0]=I[0];H[1]=I[1];return H}function g(H,I,L){H[0]=I;H[1]=L;return H}function x(H,I,L){H[0]=I[0]+L[0];H[1]=I[1]+L[1];return H}function m(H,I,L){H[0]=I[0]-L[0];H[1]=I[1]-L[1];return H}function u(H,I,L){H[0]=I[0]*L[0];H[1]=I[1]*L[1];return H}function n(H,I,L){H[0]=I[0]/L[0];H[1]=I[1]/L[1];return H}function t(H,
I){H[0]=Math.ceil(I[0]);H[1]=Math.ceil(I[1]);return H}function a(H,I){H[0]=Math.floor(I[0]);H[1]=Math.floor(I[1]);return H}function c(H,I,L){H[0]=Math.min(I[0],L[0]);H[1]=Math.min(I[1],L[1]);return H}function h(H,I,L){H[0]=Math.max(I[0],L[0]);H[1]=Math.max(I[1],L[1]);return H}function p(H,I){H[0]=Math.round(I[0]);H[1]=Math.round(I[1]);return H}function w(H,I,L){H[0]=I[0]*L;H[1]=I[1]*L;return H}function k(H,I,L,R){H[0]=I[0]+L[0]*R;H[1]=I[1]+L[1]*R;return H}function d(H,I){const L=I[0]-H[0];H=I[1]-
H[1];return Math.sqrt(L*L+H*H)}function q(H,I){const L=I[0]-H[0];H=I[1]-H[1];return L*L+H*H}function C(H){const I=H[0];H=H[1];return Math.sqrt(I*I+H*H)}function B(H){const I=H[0];H=H[1];return I*I+H*H}function e(H,I){H[0]=-I[0];H[1]=-I[1];return H}function r(H,I){H[0]=1/I[0];H[1]=1/I[1];return H}function A(H,I){var L=I[0];const R=I[1];L=L*L+R*R;0<L&&(L=1/Math.sqrt(L),H[0]=I[0]*L,H[1]=I[1]*L);return H}function y(H,I){return H[0]*I[0]+H[1]*I[1]}function v(H,I,L){I=I[0]*L[1]-I[1]*L[0];H[0]=H[1]=0;H[2]=
I;return H}function E(H,I,L,R){const X=I[0];I=I[1];H[0]=X+R*(L[0]-X);H[1]=I+R*(L[1]-I);return H}function G(H,I){I=I||1;const L=2*f.RANDOM()*Math.PI;H[0]=Math.cos(L)*I;H[1]=Math.sin(L)*I;return H}function O(H,I,L){const R=I[0];I=I[1];H[0]=L[0]*R+L[2]*I;H[1]=L[1]*R+L[3]*I;return H}function Q(H,I,L){const R=I[0];I=I[1];H[0]=L[0]*R+L[2]*I+L[4];H[1]=L[1]*R+L[3]*I+L[5];return H}function W(H,I,L){const R=I[0];I=I[1];H[0]=L[0]*R+L[3]*I+L[6];H[1]=L[1]*R+L[4]*I+L[7];return H}function aa(H,I,L){const R=I[0];
I=I[1];H[0]=L[0]*R+L[4]*I+L[12];H[1]=L[1]*R+L[5]*I+L[13];return H}function S(H,I,L,R){const X=I[0]-L[0];I=I[1]-L[1];const Z=Math.sin(R);R=Math.cos(R);H[0]=X*R-I*Z+L[0];H[1]=X*Z+I*R+L[1];return H}function ba(H,I){var L=H[0];H=H[1];const R=I[0];I=I[1];let X=L*L+H*H;0<X&&(X=1/Math.sqrt(X));let Z=R*R+I*I;0<Z&&(Z=1/Math.sqrt(Z));L=(L*R+H*I)*X*Z;return 1<L?0:-1>L?Math.PI:Math.acos(L)}function fa(H){return"vec2("+H[0]+", "+H[1]+")"}function z(H,I){return H[0]===I[0]&&H[1]===I[1]}function D(H,I){const L=
H[0];H=H[1];const R=I[0];I=I[1];const X=f.getEpsilon();return Math.abs(L-R)<=X*Math.max(1,Math.abs(L),Math.abs(R))&&Math.abs(H-I)<=X*Math.max(1,Math.abs(H),Math.abs(I))}function K(H,I,L,R,X){let Z=I[0]-L[0];L=I[1]-L[1];X=(R[0]*Z+R[1]*L)*(X-1);Z=R[0]*X;L=R[1]*X;H[0]=I[0]+Z;H[1]=I[1]+L;return H}const V=Object.freeze(Object.defineProperty({__proto__:null,add:x,angle:ba,ceil:t,copy:l,cross:v,dist:d,distance:d,div:n,divide:n,dot:y,equals:D,exactEquals:z,floor:a,inverse:r,len:C,length:C,lerp:E,max:h,min:c,
mul:u,multiply:u,negate:e,normalize:A,projectAndScale:K,random:G,rotate:S,round:p,scale:w,scaleAndAdd:k,set:g,sqrDist:q,sqrLen:B,squaredDistance:q,squaredLength:B,str:fa,sub:m,subtract:m,transformMat2:O,transformMat2d:Q,transformMat3:W,transformMat4:aa},Symbol.toStringTag,{value:"Module"}));b.add=x;b.angle=ba;b.ceil=t;b.copy=l;b.cross=v;b.dist=d;b.distance=d;b.div=n;b.divide=n;b.dot=y;b.equals=D;b.exactEquals=z;b.floor=a;b.inverse=r;b.len=C;b.length=C;b.lerp=E;b.max=h;b.min=c;b.mul=u;b.multiply=u;
b.negate=e;b.normalize=A;b.projectAndScale=K;b.random=G;b.rotate=S;b.round=p;b.scale=w;b.scaleAndAdd=k;b.set=g;b.sqrDist=q;b.sqrLen=B;b.squaredDistance=q;b.squaredLength=B;b.str=fa;b.sub=m;b.subtract=m;b.transformMat2=O;b.transformMat2d=Q;b.transformMat3=W;b.transformMat4=aa;b.vec2=V})},"esri/chunks/vec2f64":function(){define(["exports"],function(b){function f(){return[0,0]}function l(d){return[d[0],d[1]]}function g(d,q){return[d,q]}function x(d,q=[0,0]){const C=Math.min(2,d.length);for(let B=0;B<
C;++B)q[B]=d[B];return q}function m(d,q){return new Float64Array(d,q,2)}function u(){return[0,0]}function n(){return[1,1]}function t(){return[1,0]}function a(){return[0,1]}const c=[0,0],h=[1,1],p=[1,0],w=[0,1],k=Object.freeze(Object.defineProperty({__proto__:null,ONES:h,UNIT_X:p,UNIT_Y:w,ZEROS:c,clone:l,create:f,createView:m,fromArray:x,fromValues:g,ones:n,unitX:t,unitY:a,zeros:u},Symbol.toStringTag,{value:"Module"}));b.ONES=h;b.UNIT_X=p;b.UNIT_Y=w;b.ZEROS=c;b.clone=l;b.create=f;b.createView=m;b.fromArray=
x;b.fromValues=g;b.ones=n;b.unitX=t;b.unitY=a;b.vec2f64=k;b.zeros=u})},"esri/views/2d/FrameTask":function(){define(["../../core/reactiveUtils","../../core/scheduling"],function(b,f){class l{constructor(g){this.view=g;this._updateParameters=this._frameTaskHandle=this._stationaryHandle=null;this._updateRequested=!1;this.stationary=!0;this.animationInProgress=!1;this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,
this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)};this.update=()=>{this._updateRequested=!1;if(!this.view?.destroyed){var {allLayerViews:x,graphicsView:m,labelManager:u,state:{id:n}}=this.view;x.forEach(this._updateLayerView,this);null!=u&&(u.lastUpdateId!==n&&(u.viewChange(),u.lastUpdateId=n),u.updateRequested&&u.processUpdate(this._updateParameters));null!=m&&(m.lastUpdateId!==n&&(m.viewChange(),m.lastUpdateId=n),m.updateRequested&&
m.processUpdate(this._updateParameters));this.view.graphicsTileStore.setViewState(this._updateParameters.state);this.animationInProgress||this._updateRequested||this._frameTaskHandle?.pause()}}}destroy(){this.stop()}start(){if(!this._frameTaskHandle){var g=this.view;this.stationary=g.stationary;this._updateParameters={state:g.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:g.renderingOptions};this._stationaryHandle=b.watch(()=>g.stationary,x=>{this.stationary=
x;this.requestFrame()});this._frameTaskHandle=f.addFrameTask(this);this.requestUpdate()}}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(g){if(g.attached){var x=
this.view.state,m=g.lastUpdateId;if(null==m||!this.stationary&&!g.moving)g.moving=!0,g.moveStart();m!==x.id&&g.viewChange();this.stationary&&g.moving&&(g.moving=!1,g.moveEnd());g.lastUpdateId=x.id;g.updateRequested&&g.processUpdate(this._updateParameters);"layerViews"in g&&g.layerViews?.forEach(this._updateLayerView,this)}else this.requestUpdate()}}return l})},"esri/views/2d/GoToManager":function(){define("exports ../../chunks/tslib.es6 ../../core/Accessor ../../core/Error ../../core/Logger ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../ViewAnimation ./viewpointUtils".split(" "),
function(b,f,l,g,x,m,u,n,t,a,c,h,p,w){b.GoToManager=class extends l{constructor(k){super(k);this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(k,d){if(k){this.view.animation&&(this.view.animation=null);var q=this._createAnimation();await u.whenOnce(()=>this.view.ready,d);var C={animate:!0,...d},{extent:B,spatialReference:e,size:r,viewpoint:A,constraints:y,padding:v,allLayerViews:E}=this.view;k=w.create(k,{extent:B,spatialReference:e,size:r,viewpoint:A,constraints:y,padding:v,allLayerViews:E,
pickClosestTarget:d?.pickClosestTarget??!0});q?.update(k);this._gotoTask={};return C.animate?this._gotoAnimated(k,C):this._gotoImmediate(k,C)}x.getLogger(this).error("#goTo()","target cannot be null or undefined")}_gotoImmediate(k,d){const q=this._gotoTask,C=this.view.animation;k=k.then(B=>{m.throwIfAborted(d);if(q!==this._gotoTask)throw new g("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=C.target=B;C.finish()});return this._cancellableGoTo(q,C,k)}_gotoAnimated(k,d){const q=
this._gotoTask,C=this.view.animation;if(!C)return Promise.resolve();k=k.then(B=>{m.throwIfAborted(d);if(q!==this._gotoTask)throw new g("view:goto-interrupted","Goto was interrupted");C.update(B);this.view.animationManager.animate(C,this.view.viewpoint,d);return C.when().then(()=>{},()=>{})});return this._cancellableGoTo(q,C,k)}_createAnimation(){if(!this.view.animation||this.view.animation.done)this.view.animation=new p;return this.view.animation}_cancellableGoTo(k,d,q){const C=()=>k===this._gotoTask;
return q.finally(()=>{C()&&(d.done||d.stop(),this.view.animation=null)})}};f.__decorate([n.property({constructOnly:!0})],b.GoToManager.prototype,"view",void 0);b.GoToManager=f.__decorate([h.subclass("esri.views.2d.GoToManager")],b.GoToManager);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error"],function(b,f,l){function g(){return Promise.all([new Promise((t,a)=>b(["./webglDeps"],t,a)),
new Promise((t,a)=>b(["./mapViewDeps"],t,a))])}const x=t=>Object.freeze(Object.defineProperty({__proto__:null,default:t},Symbol.toStringTag,{value:"Module"})),m=()=>g().then(()=>new Promise((t,a)=>b(["./layers/TileLayerView2D"],c=>t(x(c)),a))),u=()=>g().then(()=>new Promise((t,a)=>b(["./layers/FeatureLayerView2D"],c=>t(x(c)),a))),n={"base-dynamic":()=>g().then(()=>new Promise((t,a)=>b(["./layers/BaseDynamicLayerView2D"],c=>t(x(c)),a))),"base-tile":m,"bing-maps":m,csv:u,"geo-rss":()=>g().then(()=>
new Promise((t,a)=>b(["./layers/GeoRSSLayerView2D"],c=>t(x(c)),a))),feature:u,geojson:u,graphics:()=>g().then(()=>new Promise((t,a)=>b(["./layers/GraphicsLayerView2D"],c=>t(x(c)),a))),group:()=>g().then(()=>new Promise((t,a)=>b(["./layers/GroupLayerView2D"],c=>t(x(c)),a))),imagery:()=>g().then(()=>new Promise((t,a)=>b(["./layers/ImageryLayerView2D"],c=>t(x(c)),a))),"imagery-tile":()=>g().then(()=>new Promise((t,a)=>b(["./layers/ImageryTileLayerView2D"],c=>t(x(c)),a))),kml:()=>g().then(()=>new Promise((t,
a)=>b(["./layers/KMLLayerView2D"],c=>t(x(c)),a))),"knowledge-graph":()=>g().then(()=>new Promise((t,a)=>b(["./layers/KnowledgeGraphLayerView2D"],c=>t(x(c)),a))),"link-chart":()=>g().then(()=>new Promise((t,a)=>b(["./layers/KnowledgeGraphLayerView2D"],c=>t(x(c)),a))),"knowledge-graph-sublayer":u,"map-image":()=>g().then(()=>new Promise((t,a)=>b(["./layers/MapImageLayerView2D"],c=>t(x(c)),a))),"map-notes":()=>g().then(()=>new Promise((t,a)=>b(["./layers/MapNotesLayerView2D"],c=>t(x(c)),a))),media:()=>
g().then(()=>new Promise((t,a)=>b(["./layers/MediaLayerView2D"],c=>t(x(c)),a))),"ogc-feature":()=>g().then(()=>new Promise((t,a)=>b(["./layers/OGCFeatureLayerView2D"],c=>t(x(c)),a))),"open-street-map":m,"oriented-imagery":u,route:()=>g().then(()=>new Promise((t,a)=>b(["./layers/RouteLayerView2D"],c=>t(x(c)),a))),stream:()=>g().then(()=>new Promise((t,a)=>b(["./layers/StreamLayerView2D"],c=>t(x(c)),a))),"subtype-group":()=>g().then(()=>new Promise((t,a)=>b(["./layers/SubtypeGroupLayerView2D"],c=>t(x(c)),
a))),tile:m,"vector-tile":()=>g().then(()=>new Promise((t,a)=>b(["./layers/VectorTileLayerView2D"],c=>t(x(c)),a))),video:()=>g().then(()=>new Promise((t,a)=>b(["./layers/VideoLayerView2D"],c=>t(x(c)),a))),wcs:()=>g().then(()=>new Promise((t,a)=>b(["./layers/ImageryTileLayerView2D"],c=>t(x(c)),a))),"web-tile":m,wfs:u,wms:()=>g().then(()=>new Promise((t,a)=>b(["./layers/WMSLayerView2D"],c=>t(x(c)),a))),wmts:()=>g().then(()=>new Promise((t,a)=>b(["./layers/WMTSLayerView2D"],c=>t(x(c)),a))),"line-of-sight":null,
"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};f.layerView2DImporter={hasLayerViewModule:t=>null!=n[t.type],importLayerView:t=>{var a=n[t.type];if(null==a)throw t=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",a=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),new l(`${a}:view-not-supported`,`${t} is not supported in 2D`);return a(t)}};
Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/MapViewConstraints":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../layers/support/LOD ./constraints/GeometryConstraint ./constraints/RotationConstraint ./constraints/ZoomConstraint ../../geometry/Extent ../../geometry/Polygon".split(" "),
function(b,f,l,g,x,m,u,n,t,a,c,h,p,w,k){f={base:null,key:"type",typeMap:{extent:w,polygon:k}};l=class extends l{constructor(d){super(d);this.lods=null;this.maxScale=this.minScale=0;this.maxZoom=this.minZoom=-1;this.snapToZoom=this.rotationEnabled=!0;this.customConstraints=new g}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(d){d?
this._set("geometry",d):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const d=this._get("_geometry");return d&&this.geometry===d.geometry&&this.view?.constraintsInfo.spatialReference===d.spatialReference?d:new c.GeometryConstraint({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new h({rotationEnabled:this.rotationEnabled})}get _zoom(){const d=this._get("_zoom"),
q=this.lods||this.view?.constraintsInfo.lods,C=this.minZoom,B=this.maxZoom,e=this.minScale,r=this.maxScale,A=this.snapToZoom;return d&&d.lods===q&&d.minZoom===C&&d.maxZoom===B&&d.minScale===e&&d.maxScale===r&&d.snapToZoom===A?d:new p({lods:q,minZoom:C,maxZoom:B,minScale:e,maxScale:r,snapToZoom:A})}canZoomInTo(d){const q=this.effectiveMaxScale;return 0===q||d>=q}canZoomOutTo(d){const q=this.effectiveMinScale;return 0===q||d<=q}constrain(d,q){this._zoom.constrain(d,q);this._rotation.constrain(d,q);
this._geometry.constrain(d,q);this.customConstraints.forEach(C=>C.constrain(d,q));return d}constrainByGeometry(d){this._geometry.constrain(d);this.customConstraints.forEach(q=>q.applyPanConstraint?.(d));return d}fit(d){return this._zoom.fit(d)}zoomToScale(d){return this._zoom.zoomToScale(d)}scaleToZoom(d){return this._zoom.scaleToZoom(d)}snapScale(d){return this._zoom.snapToClosestScale(d)}snapToNextScale(d){return this._zoom.snapToNextScale(d)}snapToPreviousScale(d){return this._zoom.snapToPreviousScale(d)}};
b.__decorate([x.property({readOnly:!0})],l.prototype,"effectiveLODs",null);b.__decorate([x.property({readOnly:!0})],l.prototype,"effectiveMinScale",null);b.__decorate([x.property({readOnly:!0})],l.prototype,"effectiveMaxScale",null);b.__decorate([x.property({readOnly:!0})],l.prototype,"effectiveMinZoom",null);b.__decorate([x.property({readOnly:!0})],l.prototype,"effectiveMaxZoom",null);b.__decorate([x.property({types:f,value:null})],l.prototype,"geometry",null);b.__decorate([x.property({type:[a]})],
l.prototype,"lods",void 0);b.__decorate([x.property()],l.prototype,"minScale",void 0);b.__decorate([x.property()],l.prototype,"maxScale",void 0);b.__decorate([x.property()],l.prototype,"minZoom",void 0);b.__decorate([x.property()],l.prototype,"maxZoom",void 0);b.__decorate([x.property()],l.prototype,"rotationEnabled",void 0);b.__decorate([x.property()],l.prototype,"snapToZoom",void 0);b.__decorate([x.property({type:g})],l.prototype,"customConstraints",void 0);b.__decorate([x.property()],l.prototype,
"view",void 0);b.__decorate([x.property({readOnly:!0})],l.prototype,"version",null);b.__decorate([x.property({type:c.GeometryConstraint,readOnly:!0})],l.prototype,"_geometry",null);b.__decorate([x.property({type:h})],l.prototype,"_rotation",null);b.__decorate([x.property({readOnly:!0,type:p})],l.prototype,"_zoom",null);return l=b.__decorate([t.subclass("esri.views.2d.MapViewConstraints")],l)})},"esri/views/2d/constraints/GeometryConstraint":function(){define("exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/Logger ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../geometry/projection ../../../geometry/support/contains ../../../geometry/support/near".split(" "),
function(b,f,l,g,x,m,u,n,t,a,c,h,p){var w;b.GeometryConstraint=w=class extends g.NumericIdentifiableMixin(l){constructor(k){super(k);this.spatialReference=this.geometry=null}get normalizedGeometry(){if(null==this.geometry||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return c.project(this.geometry,this.spatialReference)}catch(k){return x.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",
{geometry:this.geometry,spatialReference:this.spatialReference,error:k}),null}return this.geometry}constrain(k,d){if(null==this.normalizedGeometry)return k;d=k.targetGeometry;if("extent"===this.normalizedGeometry.type?h.extentContainsPoint(this.normalizedGeometry,d):h.polygonContainsPoint(this.normalizedGeometry,d))return k;({coordinate:d}=p.nearestCoordinate(this.normalizedGeometry,d));if(!d)return k;k.targetGeometry=d;return k}clone(){return new w({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};
f.__decorate([m.property({constructOnly:!0})],b.GeometryConstraint.prototype,"geometry",void 0);f.__decorate([m.property({readOnly:!0})],b.GeometryConstraint.prototype,"normalizedGeometry",null);f.__decorate([m.property({constructOnly:!0})],b.GeometryConstraint.prototype,"spatialReference",void 0);b.GeometryConstraint=w=f.__decorate([a.subclass("esri.views.2d.constraints.GeometryConstraint")],b.GeometryConstraint);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/near":function(){define(["exports",
"../../geometry","../../chunks/vec2","./coordsUtils","../Point"],function(b,f,l,g,x){b.nearestCoordinate=function(m,u){const {spatialReference:n}=u;u=[u.x,u.y];let t=Number.POSITIVE_INFINITY,a=0,c=0;const h=[0,0];m="extent"===m.type?[[[m.xmin,m.ymin],[m.xmin,m.ymax],[m.xmax,m.ymax],[m.xmax,m.ymin],[m.xmin,m.ymin]]]:m.rings;for(const p of m)for(m=0;m<p.length-1;m++){g.projectPointOnLine(h,u,p,m);const w=l.distance(u,h);w<t&&(t=w,a=h[0],c=h[1])}return{coordinate:new x({x:a,y:c,spatialReference:n}),
distance:t}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/constraints/RotationConstraint":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),function(b,f,l,g,x,m,u,n){var t;f=t=class extends l.NumericIdentifiableMixin(f){constructor(){super(...arguments);
this.rotationEnabled=this.enabled=!0}constrain(a,c){if(!this.enabled||!c)return a;this.rotationEnabled||(a.rotation=c.rotation);return a}clone(){return new t({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};b.__decorate([g.property()],f.prototype,"enabled",void 0);b.__decorate([g.property()],f.prototype,"rotationEnabled",void 0);return f=t=b.__decorate([n.subclass("esri.views.2d.constraints.RotationConstraint")],f)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,l,g,x,m,u,n){var t;f=t=class extends l.NumericIdentifiableMixin(f){constructor(a){super(a);this._lodByScale={};this._scales=[];this.effectiveLODs=null;this.effectiveMaxZoom=this.effectiveMinZoom=-1;this.effectiveMaxScale=this.effectiveMinScale=0;this.lods=null;this.maxZoom=this.minZoom=-1;this.maxScale=this.minScale=0;this.snapToZoom=!0}initialize(){let {lods:a,minScale:c,maxScale:h,minZoom:p,maxZoom:w}=this,k=-1,d=-1,q=!1,C=!1;0!==c&&0!==h&&c<h&&([c,h]=[h,c]);if(a?.length){a=a.map(e=>
e.clone());a.sort((e,r)=>r.scale-e.scale);a.forEach((e,r)=>e.level=r);for(const e of a){!q&&0<c&&c>=e.scale&&(k=e.level,q=!0);!C&&0<h&&h>=e.scale&&(d=B?B.level:-1,C=!0);var B=e}-1===p&&(p=0===c?0:k);-1===w&&(w=0===h?a.length-1:d);p=Math.max(p,0);p=Math.min(p,a.length-1);w=Math.max(w,0);w=Math.min(w,a.length-1);p>w&&([p,w]=[w,p]);c=a[p].scale;h=a[w].scale;a.splice(0,p);a.splice(w-p+1,a.length);a.forEach((e,r)=>{this._lodByScale[e.scale]=e;this._scales[r]=e.scale});this._set("effectiveLODs",a);this._set("effectiveMinZoom",
p);this._set("effectiveMaxZoom",w)}this._set("effectiveMinScale",c);this._set("effectiveMaxScale",h)}constrain(a,c){if(c&&a.scale===c.scale)return a;var h=this.effectiveMinScale;const p=this.effectiveMaxScale,w=a.targetGeometry,k=c&&c.targetGeometry,d=0!==h&&a.scale>h;if(0!==p&&a.scale<p||d)h=d?h:p,c&&k&&(c=(h-c.scale)/(a.scale-c.scale),w.x=k.x+(w.x-k.x)*c,w.y=k.y+(w.y-k.y)*c),a.scale=h;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a}fit(a){if(!this.effectiveLODs||
!this.snapToZoom)return this.constrain(a,null);const c=this.scaleToZoom(a.scale);a.scale=this.zoomToScale(.99<Math.abs(c-Math.floor(c))?Math.round(c):Math.floor(c));return a}zoomToScale(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);const c=this._scales;if(0>=a)return c[0];if(a>=c.length)return c[c.length-1];const h=Math.round(a);return c[h]+(h-a)*(c[Math.round(a-.5)]-c[h])}scaleToZoom(a){if(!this.effectiveLODs)return-1;const c=this._scales;let h,p;if(a>=c[0])return this.effectiveMinZoom;
if(a<=c[c.length-1])return this.effectiveMaxZoom;for(let w=0;w<c.length-1;w++){h=c[w];p=c[w+1];if(p===a)return w+this.effectiveMinZoom+1;if(h>a&&p<a)return w+this.effectiveMinZoom+1-(a-p)/(h-p)}return-1}snapToClosestScale(a){if(!this.effectiveLODs)return a;a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))}snapToNextScale(a,c=.5){if(!this.effectiveLODs)return a*c;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)}snapToPreviousScale(a,c=2){if(!this.effectiveLODs)return a*c;a=
Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)}clone(){return new t({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce((c,h)=>Math.abs(h-a)<=Math.abs(c-a)?h:c,this._scales[0]);return this._lodByScale[a].scale}};b.__decorate([g.property({readOnly:!0})],f.prototype,"effectiveLODs",void 0);b.__decorate([g.property({readOnly:!0})],f.prototype,
"effectiveMinZoom",void 0);b.__decorate([g.property({readOnly:!0})],f.prototype,"effectiveMaxZoom",void 0);b.__decorate([g.property({readOnly:!0})],f.prototype,"effectiveMinScale",void 0);b.__decorate([g.property({readOnly:!0})],f.prototype,"effectiveMaxScale",void 0);b.__decorate([g.property()],f.prototype,"lods",void 0);b.__decorate([g.property()],f.prototype,"minZoom",void 0);b.__decorate([g.property()],f.prototype,"maxZoom",void 0);b.__decorate([g.property()],f.prototype,"minScale",void 0);b.__decorate([g.property()],
f.prototype,"maxScale",void 0);b.__decorate([g.property()],f.prototype,"snapToZoom",void 0);return f=t=b.__decorate([n.subclass("esri.views.2d.constraints.ZoomConstraint")],f)})},"esri/views/2d/tiling/TileInfoView":function(){define(["../../../geometry/support/spatialReferenceUtils","./LODInfo","./TileCoverage","./TileKey","./TileSpan"],function(b,f,l,g,x){const m=new g("0/0/0/0");class u{static create(a,c){a[1]>c[1]&&([a,c]=[c,a]);const [h,p]=a,[w,k]=c;a=w-h;c=k-p;c=0!==c?a/c:0;const d=(Math.ceil(p)-
p)*c,q=(Math.floor(p)-p)*c;return new u(h,Math.floor(p),Math.ceil(k),c,0>a?d:q,0>a?q:d,0>a?w:h,0>a?h:w)}constructor(a,c,h,p,w,k,d,q){this.x=a;this.ymin=c;this.ymax=h;this.invM=p;this.leftAdjust=w;this.rightAdjust=k;this.leftBound=d;this.rightBound=q}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const n=[[0,0],[0,0],[0,0],[0,0]];class t{constructor(a,c=null,h=a.lods[0].level,p=
a.lods[a.lods.length-1].level){this.tileInfo=a;this.fullExtent=c;this.scales=[];this._infoByScale={};this._infoByLevel={};const w=a.lods.filter(d=>d.level>=h&&d.level<=p);this.minScale=w[0].scale;this.maxScale=w[w.length-1].scale;const k=this._lodInfos=w.map(d=>f.create(a,d,c));w.forEach((d,q)=>{this._infoByLevel[d.level]=k[q];this._infoByScale[d.scale]=k[q];this.scales[q]=d.scale},this);this._wrap=a.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(a){return this._infoByLevel["number"===
typeof a?a:a.level]}getTileBounds(a,c,h=!1){m.set(c);return(c=this._infoByLevel[m.level])?c.getTileBounds(a,m,h):a}getTileCoords(a,c,h=!1){m.set(c);return(c=this._infoByLevel[m.level])?c.getTileCoords(a,m,h):a}getTileCoverage(a,c=192,h=!0,p="closest"){if(!h&&(a.scale>this.minScale||a.scale<this.maxScale))return null;h="closest"===p?this.getClosestInfoForScale(a.scale):this.getSmallestInfoForScale(a.scale);p=l.pool.acquire(h);const w=this._wrap;var k=Infinity;let d=-Infinity;const q=p.spans;n[0][0]=
n[0][1]=n[1][1]=n[3][0]=-c;n[1][0]=n[2][0]=a.size[0]+c;n[2][1]=n[3][1]=a.size[1]+c;for(C of n)a.toMap(C,C),C[0]=h.getColumnForX(C[0]),C[1]=h.getRowForY(C[1]);a=[];var C=3;for(c=0;4>c;c++)n[c][1]===n[C][1]?C=c:(C=u.create(n[c],n[C]),k=Math.min(C.ymin,k),d=Math.max(C.ymax,d),void 0===a[C.ymin]&&(a[C.ymin]=[]),a[C.ymin].push(C),C=c);if(null==k||null==d||100<d-k)return null;for(c=[];k<d;){null!=a[k]&&(c=c.concat(a[k]));C=Infinity;var B=-Infinity;for(var e=c.length-1;0<=e;e--){var r=c[e];C=Math.min(C,
r.getLeftCol());B=Math.max(B,r.getRightCol())}C=Math.floor(C);B=Math.floor(B);if(k>=h.first[1]&&k<=h.last[1])if(w)if(h.size[0]<h.worldSize[0])for(e=Math.floor(B/h.worldSize[0]),r=Math.floor(C/h.worldSize[0]);r<=e;r++)q.push(new x(k,Math.max(h.getFirstColumnForWorld(r),C),Math.min(h.getLastColumnForWorld(r),B)));else q.push(new x(k,C,B));else C>h.last[0]||B<h.first[0]||(C=Math.max(C,h.first[0]),B=Math.min(B,h.last[0]),q.push(new x(k,C,B)));k+=1;for(C=c.length-1;0<=C;C--)B=c[C],B.ymax>=k?B.incrRow():
c.splice(C,1)}return p}getTileParentId(a){m.set(a);a=this._lodInfos.indexOf(this._infoByLevel[m.level])-1;if(0>a)return null;this._getTileIdAtLOD(m,this._lodInfos[a],m);return m.id}getTileResolution(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1}getTileScale(a){return(a=this._infoByLevel[a.level])?a.scale:-1}intersects(a,c){m.set(c);c=this._infoByLevel[m.level];const h=a.lodInfo;if(h.resolution>c.resolution){this._getTileIdAtLOD(m,h,m);var p=h.denormalizeCol(m.col,m.world);
for(var w of a.spans)if(w.row===m.row&&w.colFrom<=p&&w.colTo>=p)return!0}if(h.resolution<c.resolution){const [d,q,C,B]=a.spans.reduce((e,r)=>{e[0]=Math.min(e[0],r.row);e[1]=Math.max(e[1],r.row);e[2]=Math.min(e[2],r.colFrom);e[3]=Math.max(e[3],r.colTo);return e},[Infinity,-Infinity,Infinity,-Infinity]);p=c.denormalizeCol(m.col,m.world);a=h.getColumnForX(c.getXForColumn(p));w=h.getRowForY(c.getYForRow(m.row));p=h.getColumnForX(c.getXForColumn(p+1))-1;c=h.getRowForY(c.getYForRow(m.row+1))-1;return!(a>
B||p<C||w>q||c<d)}const k=h.denormalizeCol(m.col,m.world);return a.spans.some(d=>d.row===m.row&&d.colFrom<=k&&d.colTo>=k)}normalizeBounds(a,c,h){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];this._wrap&&(c=b.getInfo(this.tileInfo.spatialReference),h=-h*(c.valid[1]-c.valid[0]),a[0]+=h,a[2]+=h);return a}getSmallestInfoForScale(a){const c=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>c[0])return this._infoByScale[c[0]];for(let h=1;h<c.length-1;h++)if(a>c[h]+1E-6)return this._infoByScale[c[h-
1]];return this._infoByScale[c[c.length-1]]}getClosestInfoForScale(a){const c=this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=c.reduce((h,p)=>Math.abs(p-a)<Math.abs(h-a)?p:h,c[0]);return this._infoByScale[a]}scaleToLevel(a){const c=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(let h=c.length-1;0<=h;h--)if(a<c[h])return h===c.length-1?this._infoByScale[c[c.length-1]].level:this._infoByScale[c[h]].level+(c[h]-a)/(c[h]-c[h+1]);return this._infoByScale[c[0]].level}scaleToZoom(a){return this.tileInfo.scaleToZoom(a)}_getTileIdAtLOD(a,
c,h){const p=this._infoByLevel[h.level];a.set(h);if(c.resolution<p.resolution)return null;if(c.resolution===p.resolution)return a;a.level=c.level;a.col=Math.floor(h.col*p.resolution/c.resolution+.01);a.row=Math.floor(h.row*p.resolution/c.resolution+.01);return a}}return t})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../geometry/support/spatialReferenceUtils","./TileKey"],function(b,f){function l(m,u,n){m[0]=u;m[1]=n;return m}const g=new f("0/0/0/0");class x{static create(m,u,n=null){var t=
b.getInfo(m.spatialReference);const a=u.origin||[m.origin.x,m.origin.y],c=[m.size[0]*u.resolution,m.size[1]*u.resolution],h=[-Infinity,-Infinity],p=[Infinity,Infinity],w=[Infinity,Infinity];null!=n&&(l(h,Math.max(0,Math.floor((n.xmin-a[0])/c[0])),Math.max(0,Math.floor((a[1]-n.ymax)/c[1]))),l(p,Math.max(0,Math.floor((n.xmax-a[0])/c[0])),Math.max(0,Math.floor((a[1]-n.ymin)/c[1]))),l(w,p[0]-h[0]+1,p[1]-h[1]+1));const {cols:k,rows:d}=u;!n&&k&&d&&(l(h,k[0],d[0]),l(p,k[1],d[1]),l(w,k[1]-k[0]+1,d[1]-d[0]+
1));let q;m.isWrappable?(m=[Math.ceil(Math.round((t.valid[1]-t.valid[0])/u.resolution)/m.size[0]),w[1]],t=[Math.floor((t.origin[0]-a[0])/c[0]),h[1]],n=[m[0]+t[0]-1,p[1]],q=!0):(t=h,n=p,m=w,q=!1);return new x(u.level,u.resolution,u.scale,a,h,p,w,c,t,n,m,q)}constructor(m,u,n,t,a,c,h,p,w,k,d,q){this.level=m;this.resolution=u;this.scale=n;this.origin=t;this.first=a;this.last=c;this.size=h;this.norm=p;this.worldStart=w;this.worldEnd=k;this.worldSize=d;this.wrap=q}normalizeCol(m){if(!this.wrap)return m;
const u=this.worldSize[0];return 0>m?u-1-Math.abs((m+1)%u):m%u}denormalizeCol(m,u){return this.wrap?this.worldSize[0]*u+m:m}getWorldForColumn(m){return this.wrap?Math.floor(m/this.worldSize[0]):0}getFirstColumnForWorld(m){return m*this.worldSize[0]+this.first[0]}getLastColumnForWorld(m){return m*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(m){return(m-this.origin[0])/this.norm[0]}getXForColumn(m){return this.origin[0]+m*this.norm[0]}getRowForY(m){return(this.origin[1]-m)/this.norm[1]}getYForRow(m){return this.origin[1]-
m*this.norm[1]}getTileBounds(m,u,n=!1){g.set(u);var t=n?g.col:this.denormalizeCol(g.col,g.world),a=g.row;u=this.getXForColumn(t);n=this.getYForRow(a+1);t=this.getXForColumn(t+1);a=this.getYForRow(a);m[0]=u;m[1]=n;m[2]=t;m[3]=a;return m}getTileCoords(m,u,n=!1){g.set(u);u=n?g.col:this.denormalizeCol(g.col,g.world);Array.isArray(m)?l(m,this.getXForColumn(u),this.getYForRow(g.row)):(m.x=this.getXForColumn(u),m.y=this.getYForRow(g.row));return m}}return x})},"esri/views/2d/tiling/TileKey":function(){define(["../../../core/ObjectPool"],
function(b){class f{static getId(l,g,x,m){return"object"===typeof l?`${l.level}/${l.row}/${l.col}/${l.world}`:`${l}/${g}/${x}/${m}`}constructor(l,g,x,m){this.set(l,g,x,m)}get key(){return this}get id(){return this.toString()}set id(l){this.set(l)}get hash(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}acquire(l,g,x,m){this.set(l,g,x,m)}contains(l){const g=l.level-this.level;return 0<=g&&this.row===l.row>>g&&this.col===l.col>>g&&this.world===l.world}equals(l){return this.level===
l.level&&this.row===l.row&&this.col===l.col&&this.world===l.world}clone(){return new f(this)}release(){this.world=this.col=this.row=this.level=0}set(l,g,x,m){if(null==l)this.world=this.col=this.row=this.level=0;else if("object"===typeof l)this.level=l.level||0,this.row=l.row||0,this.col=l.col||0,this.world=l.world||0;else if("string"===typeof l){const [u,n,t,a]=l.split("/");this.level=parseFloat(u);this.row=parseFloat(n);this.col=parseFloat(t);this.world=parseFloat(a)}else this.level=+l,this.row=
+g,this.col=+x,this.world=+m||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return 0>=this.level?null:new f(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const l=this.level+1,g=this.row<<1,x=this.col<<1,m=this.world;return[new f(l,g,x,m),new f(l,g,x+1,m),new f(l,g+1,x,m),new f(l,g+1,x+1,m)]}compareRowMajor(l){return this.row<l.row?-1:this.row>l.row?1:this.col<l.col?-1:this.col>l.col?1:0}}f.pool=new b(f,null,null,25,50);return f})},
"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool"],function(b){class f{constructor(){this.spans=[]}acquire(l){this.lodInfo=l}release(){this.lodInfo=null;this.spans.length=0}forEach(l,g){const {spans:x,lodInfo:m}=this,{level:u}=m;if(0!==x.length)for(const {row:n,colFrom:t,colTo:a}of x)for(let c=t;c<=a;c++)l.call(g,u,n,m.normalizeCol(c),m.getWorldForColumn(c))}}f.pool=new b(f);return f})},"esri/views/2d/tiling/TileSpan":function(){define(function(){class b{constructor(f,
l,g){this.row=f;this.colFrom=l;this.colTo=g}}return b})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),function(b,f,l,g,x,m,u,n,t,a){function c(d,q){d.length=0;q.forEach(C=>d.push(C));
return d}const h=new Set,p=[],w=new Map,k=[0,0];f=class extends f{constructor(d){super(d);this._keyToItem=new Map;this.concurrency=6;this.strategy="scale-first";this.tileInfoView=null}initialize(){const {concurrency:d,process:q,strategy:C}=this;this._queue=new a.QueueProcessor({concurrency:d,process:(B,e)=>{B=this._keyToItem.get(B);return q(B,{signal:e})},peeker:"scale-first"===C?B=>this._peekByScaleFirst(B):B=>this._peekByCenterFirst(B)})}destroy(){this.clear();this._queue=l.destroyMaybe(this._queue)}get length(){return this._queue?
this._queue.length:0}get onGoingCount(){return this._keyToItem.size}abort(d){this._queue.abort("string"===typeof d?d:d.id)}clear(){this._queue.clear();this._keyToItem.clear()}has(d){return"string"===typeof d?this._keyToItem.has(d):this._keyToItem.has(d.id)}isOngoing(d){d="string"===typeof d?d:d.id;return this.has(d)&&this._queue.isOngoing(d)}pause(){this._queue.pause()}push(d){const q=d.key.id;if(this._queue.has(q))return this._queue.get(q);const C=this._queue.push(q),B=()=>{this._keyToItem.delete(q)};
this._keyToItem.set(q,d);C.then(B,B);return C}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(d){if(!this.state)return d.values().next().value;const q=this.tileInfoView;let C=Number.NEGATIVE_INFINITY,B=Number.POSITIVE_INFINITY;d.forEach(v=>{v=this._keyToItem.get(v);const E=this.tileInfoView.getTileScale(v.key);w.has(E)||(w.set(E,[]),C=Math.max(E,C),B=Math.min(E,B));w.get(E).push(v.key);h.add(E)});let e=this.state.scale;w.has(e)||(c(p,h),p.sort((v,E)=>v-E),e=p.reduce((v,
E)=>Math.abs(E-e)<Math.abs(v-e)?E:v,p[0]));e=Math.min(e,C);e=Math.max(e,B);d=w.get(e);const r=q.getClosestInfoForScale(e),A=r.getColumnForX(this.state.center[0]),y=r.getRowForY(this.state.center[1]);d.sort((v,E)=>{const G=r.denormalizeCol(v.col,v.world),O=r.denormalizeCol(E.col,E.world);return Math.sqrt((A-G)*(A-G)+(y-v.row)*(y-v.row))-Math.sqrt((A-O)*(A-O)+(y-E.row)*(y-E.row))});h.clear();w.clear();return d[0].id}_peekByCenterFirst(d){if(!this.state)return d.values().next().value;const q=this.tileInfoView,
C=this.state.center;let B=Number.POSITIVE_INFINITY,e;d.forEach(r=>{r=this._keyToItem.get(r);q.getTileCoords(k,r.key);const A=t.distance(k,C);A<B&&(B=A,e=r.key)});return e.id}};b.__decorate([g.property({constructOnly:!0})],f.prototype,"concurrency",void 0);b.__decorate([g.property({constructOnly:!0})],f.prototype,"process",void 0);b.__decorate([g.property()],f.prototype,"state",void 0);b.__decorate([g.property({constructOnly:!0})],f.prototype,"strategy",void 0);b.__decorate([g.property({constructOnly:!0})],
f.prototype,"tileInfoView",void 0);return f=b.__decorate([n.subclass("esri.views.2d.tiling.TileQueue")],f)})},"esri/views/support/QueueProcessor":function(){define("exports ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/ReactiveMap ../../core/scheduling ../../core/signal".split(" "),function(b,f,l,g,x,m,u){class n{constructor(a,c){this.item=a;this.controller=c;this.promise=null}}class t{constructor(a){this._task=this._schedule=null;this._deferreds=new x;this._controllers=new x;
this._processingItems=new x;this._pausedSignal=u.signal(!1);this.concurrency=1;a.concurrency&&(this.concurrency=a.concurrency);this._queue=new g(a.peeker);this.process=a.process;const c=a.scheduler;a.priority&&c&&(this._task=c.registerTask(a.priority,this))}destroy(){this.clear();this._schedule=f.removeMaybe(this._schedule);this._task=f.removeMaybe(this._task)}get updating(){return!!this._task?.updating||this.running}get length(){return this._processingItems.size+this._queue.length}abort(a){(a=this._controllers.get(a))&&
a.abort()}clear(){this._queue.clear();const a=[];this._controllers.forEach(c=>a.push(c));this._controllers.clear();a.forEach(c=>c.abort());this._processingItems.clear();this._cancelNext()}forEach(a){this._deferreds.forEach((c,h)=>a(h))}get(a){return(a=this._deferreds.get(a))?a.promise:void 0}isOngoing(a){return this._processingItems.has(a)}has(a){return this._deferreds.has(a)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(a,c){const h=this.get(a);if(h)return h;
const p=new AbortController;let w=null;c&&(w=l.onAbort(c,()=>p.abort()));const k=()=>{d.remove();null!=w&&w.remove();this._deferreds.delete(a);this._controllers.delete(a);this._queue.remove(a);this._processingItems.delete(a);this._scheduleNext()},d=l.onAbortOrThrow(p.signal,()=>{const C=this._processingItems.get(a);C&&C.controller.abort();k();q.reject(l.createAbortError())}),q=l.createResolver();this._deferreds.set(a,q);this._controllers.set(a,p);q.promise.then(k,k);this._queue.push(a);this._scheduleNext();
return q.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const a=[];this._processingItems.forEach(c=>a.push(c));this._processingItems.clear();for(const c of a)this._queue.push(c.item),c.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const a=[];for(;this._queue.length;)a.push(this._queue.pop());this.clear();return a}get running(){return!this._pausedSignal.value&&
0<this._queue.length&&this._processingItems.size<this.concurrency}runTask(a){for(;!a.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),a.madeProgress()}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=m.schedule(()=>{this._schedule=null;this._next()}))}_next(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),
this._schedule=null)}_processResult(a,c){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).resolve(c))}_processError(a,c){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).reject(c))}_canProcessFulfillment(a){return this._deferreds.get(a.item)&&this._processingItems.get(a.item)===a?!0:!1}_process(a){if(null!=a){var c=new AbortController,h=new n(a,c);this._processingItems.set(a,h);try{var p=this.process(a,c.signal)}catch(w){this._processError(h,
w)}l.isPromiseLike(p)?(h.promise=p,p.then(w=>this._processResult(h,w),w=>this._processError(h,w))):this._processResult(h,p)}}get test(){return{update:a=>this.runTask(a)}}}b.QueueProcessor=t;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/ReactiveMap":function(){define(["./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(b,f){class l{constructor(){this._map=new Map;this._observable=new f.SimpleObservable}get size(){b.trackAccess(this._observable);
return this._map.size}clear(){0<this._map.size&&(this._map.clear(),this._observable.notify())}delete(g){(g=this._map.delete(g))&&this._observable.notify();return g}entries(){b.trackAccess(this._observable);return this._map.entries()}forEach(g,x){b.trackAccess(this._observable);this._map.forEach((m,u)=>g.call(x,m,u,this),x)}get(g){b.trackAccess(this._observable);return this._map.get(g)}has(g){b.trackAccess(this._observable);return this._map.has(g)}keys(){b.trackAccess(this._observable);return this._map.keys()}set(g,
x){this._map.set(g,x);this._observable.notify();return this}values(){b.trackAccess(this._observable);return this._map.values()}[Symbol.iterator](){b.trackAccess(this._observable);return this._map[Symbol.iterator]()}get [Symbol.toStringTag](){return this._map[Symbol.toStringTag]}}return l})},"esri/views/2d/tiling/TileStrategy":function(){define(["../../../geometry/support/aaBoundingRect","./TileCache","./TileCoverage","./TileKey"],function(b,f,l,g){const x=new g(0,0,0,0),m=new Map,u=[],n=[];class t{constructor(a){this._previousScale=
Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;null!=a.resampling&&(this.resampling=a.resampling);a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&(this.buffer=a.buffer);a.cacheSize&&(this._tileCache=new f(a.cacheSize,this.tileInfoView,
c=>{this.releaseTile(c)}))}destroy(){this.tileIndex.clear()}update(a){const {resampling:c,tileIndex:h}=this,{scale:p,center:w,resolution:k}=a.state,{minScale:d,maxScale:q}=this.tileInfoView,C=!a.stationary&&p>this._previousScale;this._previousScale=p;if(!c&&(p>d||p<q))this.tiles.length=0,this.clear();else if(a=this.tileInfoView.getTileCoverage(a.state,this.buffer,this.resampling,this.coveragePolicy)){var {spans:B,lodInfo:e}=a,{level:r}=e;this.tiles.length=0;h.forEach(E=>E.visible=!0);var A=0,y=0;
if(0<B.length)for(const {row:E,colFrom:G,colTo:O}of B)for(var v=G;v<=O;v++){A++;const Q=x.set(r,E,e.normalizeCol(v),e.getWorldForColumn(v)).id;let W=h.get(Q);if(W)W.isReady?(m.set(Q,W),y++):C||this._addParentTile(Q,m);else{if(this._tileCache?.has(Q)){if(W=this._tileCache.pop(Q),this.tileIndex.set(Q,W),W.isReady){m.set(Q,W);y++;continue}}else W=this.acquireTile(x),this.tileIndex.set(Q,W);C||this._addParentTile(Q,m)}}A=y===A;for(const [E,G]of h)m.has(E)||(x.set(E),y=this.tileInfoView.intersects(a,x),
v="purge"===this.cachePolicy?x.level!==r:x.level>r,!y||!C&&A?!v&&y||u.push(G):G.isReady?v&&"purge"===this.cachePolicy&&this._hasReadyAncestor(x,r)?u.push(G):n.push(G):v&&u.push(G));for(const E of n)E.isReady&&m.set(E.key.id,E);for(const E of u)this._tileCache?this._tileCache.add(E):this.releaseTile(E),h.delete(E.key.id);for(const E of m.values())this.tiles.push(E);for(const E of h.values())m.has(E.key.id)||(E.visible=!1);this._tileCache?.prune(r,w,k);l.pool.release(a);n.length=0;u.length=0;m.clear()}else this.tiles.length=
0,this.clear()}clear(){const {tileIndex:a}=this;for(const c of a.values())this.releaseTile(c);a.clear()}refresh(a){for(const c of this.tileIndex.values())this.tiles.includes(c)?a(c):u.push(c);for(const c of u)this.releaseTile(c),this.tileIndex.delete(c.key.id);this._tileCache?.clear()}updateCacheSize(a){this._tileCache&&(this._tileCache.maxSize=a)}_addParentTile(a,c){let h=null;for(;;){a=this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)){if(h=this.tileIndex.get(a),h?.isReady){c.has(h.key.id)||
c.set(h.key.id,h);break}}else if(this._tileCache?.has(a)&&(h=this._tileCache.pop(a),this.tileIndex.set(a,h),h?.isReady)){c.has(h.key.id)||c.set(h.key.id,h);break}}}_hasReadyAncestor(a,c){const h=b.create();this.tileInfoView.getTileBounds(h,a,!0);for(const p of this.tileIndex.values())if(p.isReady&&p.key.level>=c&&p.key.level<a.level){const w=b.create();this.tileInfoView.getTileBounds(w,p.key,!0);if(b.contains(w,h))return!0}return!1}}return t})},"esri/views/2d/tiling/TileCache":function(){define(["../../../chunks/vec2"],
function(b){class f{constructor(l,g,x){this.maxSize=l;this._tileInfoView=g;this._removedFunc=x;this._tilePerId=new Map;this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear();this._tileKeysPerLevel=[]}has(l){return this._tilePerId.has(l)}get(l){return this._tilePerId.get(l)}pop(l){const g=this._tilePerId.get(l);if(g){var x=this._tileKeysPerLevel[g.key.level];this._tilePerId["delete"](l);for(let m=0;m<x.length;m++)if(x[m].id===l){x.splice(m,1);break}g.visible=!0;return g}}add(l){l.visible=!1;const g=
l.key,x=g.id;this._tilePerId.has(x)||(this._tilePerId.set(x,l),l=g.level,this._tileKeysPerLevel[l]||(this._tileKeysPerLevel[l]=[]),this._tileKeysPerLevel[l].push(g))}prune(l,g,x){let m=this._tilePerId.size;if(!(m<=this.maxSize)){for(var u=this._tileKeysPerLevel.length-1;m>this.maxSize&&0<=u;)u!==l&&(m=this._pruneAroundCenterTile(m,g,x,u)),u--;m>this.maxSize&&(m=this._pruneAroundCenterTile(m,g,x,l))}}_pruneAroundCenterTile(l,g,x,m){m=this._tileKeysPerLevel[m];if(!m||0===m.length)return l;const {size:u,
origin:n}=this._tileInfoView.tileInfo,t=x*u[0],a=x*u[1],c=[0,0],h=[0,0];for(m.sort((p,w)=>{c[0]=n.x+t*(p.col+.5);c[1]=n.y-a*(p.row+.5);h[0]=n.x+t*(w.col+.5);h[1]=n.y-a*(w.row+.5);return b.squaredDistance(c,g)-b.squaredDistance(h,g)});0<m.length&&(x=m.pop(),this._removeTile(x.id),l--,l!==this.maxSize););return l}_removeTile(l){const g=this._tilePerId.get(l);this._removedFunc&&g&&this._removedFunc(g);this._tilePerId["delete"](l)}}return f})},"esri/views/2d/ViewStateManager":function(){define("exports ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/Accessor ../../core/Error ../../core/has ../../core/Logger ../../core/reactiveUtils ../../core/screenUtils ../../core/Warning ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../chunks/pe ../../geometry/Point ../../geometry/projection ../../geometry/support/spatialReferenceUtils ./PaddedViewState ./viewpointUtils ../../geometry/Extent".split(" "),
function(b,f,l,g,x,m,u,n,t,a,c,h,p,w,k,d,q,C,B,e,r,A){b.ViewStateManager=class extends x{constructor(y){super(y);this.constraints=null;this.ready=!1;this.resizeAlign="center";this.addHandles([t.watch(()=>this.constraints?.version,v=>{this.constraints&&v&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},t.sync)])}get center(){if(!this.ready)return this._get("center");const {center:y,spatialReference:v}=this.state.paddedViewState;this.state.commitProperty("id");
return new q({x:y[0],y:y[1],spatialReference:v})}set center(y){if(null!=y)if(this.ready){try{var v=this._project(y,this.state.spatialReference)}catch(E){n.getLogger(this).error(new m("mapview:invalid-center","could not project the value in the view's spatial reference",{input:y,error:E}));return}y=this.viewpoint;r.centerAt(y,y,v);this.viewpoint=y}else this._set("center",y)}get extent(){if(!this.ready)return this._get("extent");this.state.commitProperty("id");return this.state.paddedViewState.extent.clone()}set extent(y){if(null!=
y)if(y.width&&y.height)if(this.ready){try{var v=this._project(y,this.state.spatialReference)}catch(E){n.getLogger(this).error(new m("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:E}));return}y=this.viewpoint;r.setExtent(y,y,v,this.state.size,{constraints:this.constraints});this.viewpoint=y}else this._set("extent",y),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),this._set("zoom",void 0);else n.getLogger(this).error(new m("mapview:invalid-extent",
"invalid extent size"))}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(y){this.ready?(this.state.padding=y,this._set("padding",this.state.padding)):this._set("padding",y)}get resolution(){if(!this.ready)return 0;this.state.commitProperty("id");return this.state.resolution}get rotation(){if(!this.ready)return this._get("rotation");this.state.commitProperty("id");return this.state.rotation}set rotation(y){if(!isNaN(y))if(this.ready){var v=this.viewpoint;r.rotateTo(v,
v,y);this.viewpoint=v}else this._set("rotation",y)}get scale(){if(!this.ready)return this._get("scale");this.state.commitProperty("id");return this.state.scale}set scale(y){if(y&&!isNaN(y))if(this.ready){var v=this.viewpoint;r.scaleTo(v,v,y);this.viewpoint=v}else if(this._set("scale",y),this._set("zoom",void 0),y=this._get("extent"))this._set("extent",void 0),this._set("center",y.center)}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(y){if(null!=
y)if(this.ready){var v;try{var E=this._project(y,this.state.spatialReference);!y.scale||isNaN(y.scale)?v=new m("mapview:invalid-viewpoint",`invalid scale value of ${y.scale}`):null==y.targetGeometry&&(v=new m("mapview:invalid-viewpoint","geometry not defined"))}catch(G){v=new m("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:G})}v?n.getLogger(this).error(v):(this._scaleBeforeChangingSpatialReference=null,y=new g({targetGeometry:new q,scale:0,rotation:0}),
r.copy(y,E),this.constraints?.constrain(y,this.state.paddedViewState.viewpoint),this.state.viewpoint=y,this._set("viewpoint",y))}else this._set("viewpoint",y),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),this._set("scale",void 0)}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(y){if(0<=y)if(this.ready)if(y=this.constraints?.zoomToScale(y)??0){var v=this.viewpoint;r.scaleTo(v,v,y);this.viewpoint=v;this._set("zoom",
this.constraints?.scaleToZoom(this.scale)??-1)}else this._set("zoom",-1);else if(this._set("zoom",y),this._set("scale",void 0),y=this._get("extent"))this._set("extent",void 0),this._set("center",y.center)}getUserStartupOptions(y){if(!y[0]&&!y[1])return{center:void 0,rotation:void 0,scale:void 0};const {padding:v,constraints:E}=this;var G=this._get("center"),O=this._get("extent");const Q=this._get("scale");var W=this._get("rotation");const aa=this._get("viewpoint");var S=this._get("zoom");S=null!=
S&&null!=E?E.zoomToScale(S)||void 0:void 0;let ba=void 0,fa=void 0,z=void 0;const D=aa?.targetGeometry;"extent"===D?.type?ba=D:"point"===D?.type&&(fa=D,z=aa?.scale);O=O??ba;G=G??fa??O?.center;W=W??aa?.rotation;y=(Q??S??z??(O&&r.extentToScale(O,[y[0]-v.left-v.right,y[1]-v.top-v.bottom])))||void 0;return{center:G,rotation:W,scale:y}}startup(y,v,E,G){const O=y.targetGeometry;try{this._project(y,E)}catch(Q){n.getLogger(this).warn(new c("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",
{center:O.toJSON(),spatialReference:E,error:Q})),y.targetGeometry=G||new q({x:0,y:0,spatialReference:E})}this.constraints?.fit(y);this._set("state",new e({padding:this.padding,size:v,viewpoint:y}));this._set("ready",!0)}teardown(){this._set("ready",!1);const {center:[y,v],spatialReference:E,rotation:G,scale:O}=this.state.paddedViewState,Q=new q({x:y,y:v,spatialReference:E});this._set("viewpoint",null);this._set("extent",null);this._set("center",Q);this._set("zoom",-1);this._set("rotation",G);this._set("scale",
O);this._set("state",null)}changeSpatialReference(y){const v=this.state.paddedViewState.clone();if(null==this._scaleBeforeChangingSpatialReference)this._scaleBeforeChangingSpatialReference=v.scale;else{var E=v.viewpoint.clone();E.scale=this._scaleBeforeChangingSpatialReference;v.viewpoint=E}E=v.clone();const [G,O]=v.center;var Q=null;try{Q=this._project(new q({x:G,y:O,spatialReference:v.spatialReference}),y)}catch(W){d.isLoaded()||n.getLogger(this).warn(new c("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",
{center:Q?.toJSON(),spatialReference:y,error:W}))}Q||(Q=new q({x:0,y:0,spatialReference:y}));Q=r.centerAt(new g({targetGeometry:new q,scale:0,rotation:0}),v.viewpoint,Q);E.viewpoint=Q;try{const W=[v.size[0]/2,v.size[1]/2],aa=[W[0]+20,W[1]],S=v.toMap([0,0],aa),{x:ba,y:fa}=this._project(new q({x:S[0],y:S[1],spatialReference:v.spatialReference}),y);S[0]=ba;S[1]=fa;E.toScreen(S,S);const z=r.angleBetween(W,S,aa),D=Math.hypot(S[0]-W[0],S[1]-W[1])/20;!Number.isFinite(D)||4<Math.abs(D)?(Q.rotation=0,Q.targetGeometry=
new q({x:0,y:0,spatialReference:y})):(Q.scale*=D,Q.scale>u("mapview-srswitch-adjust-rotation-scale-threshold")?Q.rotation=0:Q.rotation+=Number.isFinite(z)?z:0)}catch{}this._get("constraints")?.constrain(Q,void 0);this._get("state").viewpoint=Q}resize(y,v){if(this.ready){var E=this.state,G=this.state.paddedViewState.viewpoint,O=this.state.paddedViewState.size.concat();E.size=[y,v];r.resize(G,G,O,this.state.paddedViewState.size,this.resizeAlign);G=this.constraints?.constrain(G,void 0)??G;this.state.viewpoint=
G}}toMap(y){if(!this.ready)return null;const [v,E]=this.state.toMap([0,0],[y.x,y.y]);return new q({x:v,y:E,spatialReference:this.state.spatialReference})}toScreen(y,v){if(!this.ready)return null;y=this._project(y,this.state.spatialReference);y=[y.x,y.y];!1===v?.pickClosestTarget?this.state.toScreen(y,y):this.state.toScreenClosest(y,y);return a.createScreenPoint(y[0],y[1])}_project(y,v){const E=y?.targetGeometry||y;if(!v)return y;if(!E)return null;if(v.imageCoordinateSystem||E.spatialReference?.imageCoordinateSystem||
B.equals(v,E.spatialReference))return y;const G=C.project(E,v);if(!G)throw new m("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:E,spatialReference:v});return"esri.Viewpoint"===y?.declaredClass?(y.targetGeometry=G,y):G}};f.__decorate([h.property({type:q})],b.ViewStateManager.prototype,"center",null);f.__decorate([h.property()],b.ViewStateManager.prototype,"constraints",void 0);f.__decorate([h.property({type:A})],b.ViewStateManager.prototype,
"extent",null);f.__decorate([h.property({value:{top:0,right:0,bottom:0,left:0},cast:y=>({top:0,right:0,bottom:0,left:0,...y})})],b.ViewStateManager.prototype,"padding",null);f.__decorate([h.property()],b.ViewStateManager.prototype,"ready",void 0);f.__decorate([h.property()],b.ViewStateManager.prototype,"resizeAlign",void 0);f.__decorate([h.property({readOnly:!0})],b.ViewStateManager.prototype,"resolution",null);f.__decorate([h.property({type:Number})],b.ViewStateManager.prototype,"rotation",null);
f.__decorate([h.property({type:Number})],b.ViewStateManager.prototype,"scale",null);f.__decorate([h.property({readOnly:!0})],b.ViewStateManager.prototype,"state",void 0);f.__decorate([h.property({type:g})],b.ViewStateManager.prototype,"viewpoint",null);f.__decorate([h.property()],b.ViewStateManager.prototype,"zoom",null);b.ViewStateManager=f.__decorate([k.subclass("esri.views.2d.ViewStateManager")],b.ViewStateManager);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/PaddedViewState":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../chunks/vec2 ../../chunks/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(b,f,l,g,x,m,u,n,t,a,c,h){var p,w;let k=p=class extends f{constructor(){super(...arguments);this.bottom=this.right=this.top=this.left=0}clone(){return new p({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};b.__decorate([g.property()],k.prototype,"left",void 0);b.__decorate([g.property()],k.prototype,"top",void 0);b.__decorate([g.property()],k.prototype,"right",void 0);b.__decorate([g.property()],k.prototype,"bottom",void 0);k=p=b.__decorate([n.subclass("esri.views.2d.PaddedViewState.Padding")],
k);f=w=class extends h{constructor(...d){super(...d);this.paddedViewState=new h;this._updateContent=(()=>{const q=a.create();return()=>{var C=this._get("size");const B=this._get("padding");if(C&&B){var e=this.paddedViewState;t.set(q,B.left+B.right,B.top+B.bottom);t.subtract(q,C,q);t.copy(e.size,q);if(C=e.viewpoint)this.viewpoint=C}}})();this.addHandles(l.watch(()=>[this.size,this.padding],()=>this._updateContent(),l.sync));this.padding=new k;this.size=[0,0]}set padding(d){this._set("padding",d||new k)}set viewpoint(d){if(d){const q=
d.clone();this.paddedViewState.viewpoint=d;c.addPadding(q,d,this._get("size"),this._get("padding"));d=this._viewpoint2D;const C=q.targetGeometry;d.center[0]=C.x;d.center[1]=C.y;d.rotation=q.rotation;d.scale=q.scale;d.spatialReference=C.spatialReference;this._update()}}clone(){return new w({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};b.__decorate([g.property()],f.prototype,"paddedViewState",void 0);b.__decorate([g.property({type:k})],
f.prototype,"padding",null);b.__decorate([g.property()],f.prototype,"viewpoint",null);return f=w=b.__decorate([n.subclass("esri.views.2d.PaddedViewState")],f)})},"esri/views/2d/ViewState":function(){define("../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df32 ../../chunks/mat2df64 ../../chunks/mat3 ../../chunks/mat3f32 ../../chunks/vec2 ../../chunks/vec2f32 ../../chunks/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ../../geometry/support/normalizeUtils ./viewpointUtils ../../geometry/Extent ../../geometry/Point".split(" "),
function(b,f,l,g,x,m,u,n,t,a,c,h,p,w,k,d,q,C,B,e,r,A,y){var v;const E=[0,0];f=v=class extends g.JSONSupport{constructor(G){super(G);this._viewpoint2D={center:C.create(),rotation:0,scale:0,spatialReference:void 0};this.center=[0,0];this.extent=new A;this.id=0;this.inverseTransform=p.create();this.scale=this.rotation=this.resolution=0;this.transform=p.create();this.transformNoRotation=p.create();this.displayMat3=k.create();this.displayViewMat3=k.create();this.viewMat3=k.create();this.viewMat2d=h.create();
this.worldScreenWidth=0;this.size=[0,0]}set pixelRatio(G){this._set("pixelRatio",G);this._update()}set size(G){this._set("size",G);this._update()}set viewpoint(G){if(G){const O=this._viewpoint2D,Q=G.targetGeometry;O.center[0]=Q.x;O.center[1]=Q.y;O.rotation=G.rotation;O.scale=G.scale;O.spatialReference=Q.spatialReference}this._update()}copy(G){const O=this.size,Q=this.viewpoint;Q&&O?(this.viewpoint=r.copy(Q,G.viewpoint),this._set("size",d.copy(O,G.size))):(this.viewpoint=G.viewpoint.clone(),this._set("size",
[G.size[0],G.size[1]]));this._set("pixelRatio",G.pixelRatio);return this}clone(){return new v({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(G,O,Q){if(B.isVec2(O))return d.transformMat2d(G,O,this.inverseTransform);E[0]=O;E[1]=Q;return d.transformMat2d(G,E,this.inverseTransform)}toScreen(G,O,Q){if(B.isVec2(O))return d.transformMat2d(G,O,this.transform);E[0]=O;E[1]=Q;return d.transformMat2d(G,E,this.transform)}toScreenNoRotation(G,O,Q){if(B.isVec2(O))return d.transformMat2d(G,
O,this.transformNoRotation);E[0]=O;E[1]=Q;return d.transformMat2d(G,E,this.transformNoRotation)}toScreenClosest(G,O,Q){B.isVec2(O)?(E[0]=O[0],E[1]=O[1]):(E[0]=O,E[1]=Q);[O]=E;const {center:W,extent:aa,spatialReference:S,transform:ba}=this;if(O<aa.xmin||O>aa.xmax)E[0]=e.getClosestDenormalizedXToReference(O,W[0],S);return d.transformMat2d(G,E,ba)}getScreenTransform(G,O){const {center:Q}=this._viewpoint2D,W=this._get("pixelRatio")||1,aa=this._get("size");r.getMatrix(G,Q,aa,O,0,W);return G}_update(){const {center:G,
spatialReference:O,scale:Q,rotation:W}=this._viewpoint2D,aa=this._get("pixelRatio")||1,S=this._get("size"),ba=new l({targetGeometry:new y(G[0],G[1],O),scale:Q,rotation:W});this._set("viewpoint",ba);if(S&&O&&Q){this.resolution=r.getResolution(ba);this.rotation=W;this.scale=Q;this.spatialReference=O;d.copy(this.center,G);w.set(this.displayMat3,0!==S[0]?2/S[0]:0,0,0,0,0!==S[1]?-2/S[1]:0,0,-1,1,1);var fa=w.identity(this.viewMat3),z=q.fromValues(S[0]/2,S[1]/2),D=q.fromValues(-S[0]/2,-S[1]/2),K=a.toRadian(W);
w.translate(fa,fa,z);w.rotate(fa,fa,K);w.translate(fa,fa,D);w.multiply(this.displayViewMat3,this.displayMat3,fa);fa=c.fromTranslation(this.viewMat2d,z);c.rotate(fa,fa,K);c.translate(fa,fa,D);r.getExtent(this.extent,ba,S);r.getTransform(this.transform,ba,S,aa);c.invert(this.inverseTransform,this.transform);r.getTransformNoRotation(this.transformNoRotation,ba,S,aa);this.worldScreenWidth=r.getWorldScreenWidth(this.spatialReference,this.resolution);this._set("id",this.id+1);return this}}};b.__decorate([x.property({readOnly:!0})],
f.prototype,"id",void 0);b.__decorate([x.property({value:1,json:{write:!0}})],f.prototype,"pixelRatio",null);b.__decorate([x.property({json:{write:!0}})],f.prototype,"size",null);b.__decorate([x.property()],f.prototype,"spatialReference",void 0);b.__decorate([x.property({type:l,json:{write:!0}})],f.prototype,"viewpoint",null);return f=v=b.__decorate([t.subclass("esri.views.2d.ViewState")],f)})},"esri/chunks/mat2df32":function(){define(["exports"],function(b){function f(){const t=new Float32Array(6);
t[0]=1;t[3]=1;return t}function l(t){const a=new Float32Array(6);a[0]=t[0];a[1]=t[1];a[2]=t[2];a[3]=t[3];a[4]=t[4];a[5]=t[5];return a}function g(t,a,c,h,p,w){const k=new Float32Array(6);k[0]=t;k[1]=a;k[2]=c;k[3]=h;k[4]=p;k[5]=w;return k}function x(t,a){return new Float32Array(t,a,6)}function m(t,a,c,h){const p=a[h];a=a[h+1];t[h]=c[0]*p+c[2]*a+c[4];t[h+1]=c[1]*p+c[3]*a+c[5]}function u(t,a,c,h=0,p=0,w=2){for(p=p||a.length/w;h<p;h++)m(t,a,c,h*w)}const n=Object.freeze(Object.defineProperty({__proto__:null,
clone:l,create:f,createView:x,fromValues:g,transform:m,transformMany:u},Symbol.toStringTag,{value:"Module"}));b.clone=l;b.create=f;b.createView=x;b.fromValues=g;b.mat2df32=n;b.transform=m;b.transformMany=u})},"esri/chunks/mat3":function(){define(["exports","./common"],function(b,f){function l(z,D){z[0]=D[0];z[1]=D[1];z[2]=D[2];z[3]=D[4];z[4]=D[5];z[5]=D[6];z[6]=D[8];z[7]=D[9];z[8]=D[10];return z}function g(z,D){z[0]=D[0];z[1]=D[1];z[2]=D[2];z[3]=D[3];z[4]=D[4];z[5]=D[5];z[6]=D[6];z[7]=D[7];z[8]=D[8];
return z}function x(z,D,K,V,H,I,L,R,X,Z){z[0]=D;z[1]=K;z[2]=V;z[3]=H;z[4]=I;z[5]=L;z[6]=R;z[7]=X;z[8]=Z;return z}function m(z){z[0]=1;z[1]=0;z[2]=0;z[3]=0;z[4]=1;z[5]=0;z[6]=0;z[7]=0;z[8]=1;return z}function u(z,D){if(z===D){const K=D[1],V=D[2],H=D[5];z[1]=D[3];z[2]=D[6];z[3]=K;z[5]=D[7];z[6]=V;z[7]=H}else z[0]=D[0],z[1]=D[3],z[2]=D[6],z[3]=D[1],z[4]=D[4],z[5]=D[7],z[6]=D[2],z[7]=D[5],z[8]=D[8];return z}function n(z,D){const K=D[0],V=D[1],H=D[2],I=D[3],L=D[4],R=D[5],X=D[6],Z=D[7];D=D[8];const F=D*
L-R*Z,J=-D*I+R*X,P=Z*I-L*X;let N=K*F+V*J+H*P;if(!N)return null;N=1/N;z[0]=F*N;z[1]=(-D*V+H*Z)*N;z[2]=(R*V-H*L)*N;z[3]=J*N;z[4]=(D*K-H*X)*N;z[5]=(-R*K+H*I)*N;z[6]=P*N;z[7]=(-Z*K+V*X)*N;z[8]=(L*K-V*I)*N;return z}function t(z,D){const K=D[0],V=D[1],H=D[2],I=D[3],L=D[4],R=D[5],X=D[6],Z=D[7];D=D[8];z[0]=L*D-R*Z;z[1]=H*Z-V*D;z[2]=V*R-H*L;z[3]=R*X-I*D;z[4]=K*D-H*X;z[5]=H*I-K*R;z[6]=I*Z-L*X;z[7]=V*X-K*Z;z[8]=K*L-V*I;return z}function a(z){const D=z[3],K=z[4],V=z[5],H=z[6],I=z[7],L=z[8];return z[0]*(L*K-V*
I)+z[1]*(-L*D+V*H)+z[2]*(I*D-K*H)}function c(z,D,K){const V=D[0],H=D[1],I=D[2],L=D[3],R=D[4],X=D[5],Z=D[6],F=D[7];D=D[8];const J=K[0],P=K[1],N=K[2],U=K[3],Y=K[4],ea=K[5],ha=K[6],da=K[7];K=K[8];z[0]=J*V+P*L+N*Z;z[1]=J*H+P*R+N*F;z[2]=J*I+P*X+N*D;z[3]=U*V+Y*L+ea*Z;z[4]=U*H+Y*R+ea*F;z[5]=U*I+Y*X+ea*D;z[6]=ha*V+da*L+K*Z;z[7]=ha*H+da*R+K*F;z[8]=ha*I+da*X+K*D;return z}function h(z,D,K){const V=D[0],H=D[1],I=D[2],L=D[3],R=D[4],X=D[5],Z=D[6],F=D[7];D=D[8];const J=K[0];K=K[1];z[0]=V;z[1]=H;z[2]=I;z[3]=L;z[4]=
R;z[5]=X;z[6]=J*V+K*L+Z;z[7]=J*H+K*R+F;z[8]=J*I+K*X+D;return z}function p(z,D,K){const V=D[0],H=D[1],I=D[2],L=D[3],R=D[4],X=D[5],Z=D[6],F=D[7];D=D[8];const J=Math.sin(K);K=Math.cos(K);z[0]=K*V+J*L;z[1]=K*H+J*R;z[2]=K*I+J*X;z[3]=K*L-J*V;z[4]=K*R-J*H;z[5]=K*X-J*I;z[6]=Z;z[7]=F;z[8]=D;return z}function w(z,D,K){const V=K[0],H=K[1];K=K[2];z[0]=V*D[0];z[1]=V*D[1];z[2]=V*D[2];z[3]=H*D[3];z[4]=H*D[4];z[5]=H*D[5];z[6]=K*D[6];z[7]=K*D[7];z[8]=K*D[8];return z}function k(z,D,K){const V=K[0];K=K[1];z[0]=V*D[0];
z[1]=V*D[1];z[2]=V*D[2];z[3]=K*D[3];z[4]=K*D[4];z[5]=K*D[5];return z}function d(z,D){z[0]=1;z[1]=0;z[2]=0;z[3]=0;z[4]=1;z[5]=0;z[6]=D[0];z[7]=D[1];z[8]=1;return z}function q(z,D){const K=Math.sin(D);D=Math.cos(D);z[0]=D;z[1]=K;z[2]=0;z[3]=-K;z[4]=D;z[5]=0;z[6]=0;z[7]=0;z[8]=1;return z}function C(z,D){z[0]=D[0];z[1]=0;z[2]=0;z[3]=0;z[4]=D[1];z[5]=0;z[6]=0;z[7]=0;z[8]=1;return z}function B(z,D){z[0]=D[0];z[1]=D[1];z[2]=0;z[3]=D[2];z[4]=D[3];z[5]=0;z[6]=D[4];z[7]=D[5];z[8]=1;return z}function e(z,D){var K=
D[0],V=D[1],H=D[2];D=D[3];var I=K+K,L=V+V;const R=H+H;K*=I;const X=V*I;V*=L;const Z=H*I,F=H*L;H*=R;I*=D;L*=D;D*=R;z[0]=1-V-H;z[3]=X-D;z[6]=Z+L;z[1]=X+D;z[4]=1-K-H;z[7]=F-I;z[2]=Z-L;z[5]=F+I;z[8]=1-K-V;return z}function r(z,D){const K=D[0],V=D[1],H=D[2],I=D[4],L=D[5],R=D[6],X=D[8],Z=D[9];D=D[10];const F=D*L-R*Z,J=-D*I+R*X,P=Z*I-L*X;var N=K*F+V*J+H*P;if(!N)return null;N=1/N;z[0]=F*N;z[1]=(-D*V+H*Z)*N;z[2]=(R*V-H*L)*N;z[3]=J*N;z[4]=(D*K-H*X)*N;z[5]=(-R*K+H*I)*N;z[6]=P*N;z[7]=(-Z*K+V*X)*N;z[8]=(L*K-V*
I)*N;return z}function A(z,D){const K=D[0],V=D[1],H=D[2],I=D[3],L=D[4],R=D[5],X=D[6],Z=D[7];var F=D[8],J=D[9],P=D[10],N=D[11];const U=D[12],Y=D[13],ea=D[14];D=D[15];const ha=K*R-V*L,da=K*X-H*L,M=K*Z-I*L,T=V*X-H*R,ca=V*Z-I*R,ia=H*Z-I*X,ka=F*Y-J*U,ja=F*ea-P*U;F=F*D-N*U;const ma=J*ea-P*Y;J=J*D-N*Y;P=P*D-N*ea;N=ha*P-da*J+M*ma+T*F-ca*ja+ia*ka;if(!N)return null;N=1/N;z[0]=(R*P-X*J+Z*ma)*N;z[1]=(X*F-L*P-Z*ja)*N;z[2]=(L*J-R*F+Z*ka)*N;z[3]=(H*J-V*P-I*ma)*N;z[4]=(K*P-H*F+I*ja)*N;z[5]=(V*F-K*J-I*ka)*N;z[6]=
(Y*ia-ea*ca+D*T)*N;z[7]=(ea*M-U*ia-D*da)*N;z[8]=(U*ca-Y*M+D*ha)*N;return z}function y(z,D,K){z[0]=2/D;z[1]=0;z[2]=0;z[3]=0;z[4]=-2/K;z[5]=0;z[6]=-1;z[7]=1;z[8]=1;return z}function v(z){return"mat3("+z[0]+", "+z[1]+", "+z[2]+", "+z[3]+", "+z[4]+", "+z[5]+", "+z[6]+", "+z[7]+", "+z[8]+")"}function E(z){return Math.sqrt(z[0]**2+z[1]**2+z[2]**2+z[3]**2+z[4]**2+z[5]**2+z[6]**2+z[7]**2+z[8]**2)}function G(z,D,K){z[0]=D[0]+K[0];z[1]=D[1]+K[1];z[2]=D[2]+K[2];z[3]=D[3]+K[3];z[4]=D[4]+K[4];z[5]=D[5]+K[5];z[6]=
D[6]+K[6];z[7]=D[7]+K[7];z[8]=D[8]+K[8];return z}function O(z,D,K){z[0]=D[0]-K[0];z[1]=D[1]-K[1];z[2]=D[2]-K[2];z[3]=D[3]-K[3];z[4]=D[4]-K[4];z[5]=D[5]-K[5];z[6]=D[6]-K[6];z[7]=D[7]-K[7];z[8]=D[8]-K[8];return z}function Q(z,D,K){z[0]=D[0]*K;z[1]=D[1]*K;z[2]=D[2]*K;z[3]=D[3]*K;z[4]=D[4]*K;z[5]=D[5]*K;z[6]=D[6]*K;z[7]=D[7]*K;z[8]=D[8]*K;return z}function W(z,D,K,V){z[0]=D[0]+K[0]*V;z[1]=D[1]+K[1]*V;z[2]=D[2]+K[2]*V;z[3]=D[3]+K[3]*V;z[4]=D[4]+K[4]*V;z[5]=D[5]+K[5]*V;z[6]=D[6]+K[6]*V;z[7]=D[7]+K[7]*V;
z[8]=D[8]+K[8]*V;return z}function aa(z,D){return z[0]===D[0]&&z[1]===D[1]&&z[2]===D[2]&&z[3]===D[3]&&z[4]===D[4]&&z[5]===D[5]&&z[6]===D[6]&&z[7]===D[7]&&z[8]===D[8]}function S(z,D){const K=z[0],V=z[1],H=z[2],I=z[3],L=z[4],R=z[5],X=z[6],Z=z[7];z=z[8];const F=D[0],J=D[1],P=D[2],N=D[3],U=D[4],Y=D[5],ea=D[6],ha=D[7];D=D[8];const da=f.getEpsilon();return Math.abs(K-F)<=da*Math.max(1,Math.abs(K),Math.abs(F))&&Math.abs(V-J)<=da*Math.max(1,Math.abs(V),Math.abs(J))&&Math.abs(H-P)<=da*Math.max(1,Math.abs(H),
Math.abs(P))&&Math.abs(I-N)<=da*Math.max(1,Math.abs(I),Math.abs(N))&&Math.abs(L-U)<=da*Math.max(1,Math.abs(L),Math.abs(U))&&Math.abs(R-Y)<=da*Math.max(1,Math.abs(R),Math.abs(Y))&&Math.abs(X-ea)<=da*Math.max(1,Math.abs(X),Math.abs(ea))&&Math.abs(Z-ha)<=da*Math.max(1,Math.abs(Z),Math.abs(ha))&&Math.abs(z-D)<=da*Math.max(1,Math.abs(z),Math.abs(D))}function ba(z){const D=f.getEpsilon(),K=z[0],V=z[1],H=z[2],I=z[3],L=z[4],R=z[5],X=z[6],Z=z[7];z=z[8];return Math.abs(1-(K*K+I*I+X*X))<=D&&Math.abs(1-(V*V+
L*L+Z*Z))<=D&&Math.abs(1-(H*H+R*R+z*z))<=D}const fa=Object.freeze(Object.defineProperty({__proto__:null,add:G,adjoint:t,copy:g,determinant:a,equals:S,exactEquals:aa,frob:E,fromMat2d:B,fromMat4:l,fromQuat:e,fromRotation:q,fromScaling:C,fromTranslation:d,identity:m,invert:n,isOrthoNormal:ba,mul:c,multiply:c,multiplyScalar:Q,multiplyScalarAndAdd:W,normalFromMat4:A,normalFromMat4Legacy:r,projection:y,rotate:p,scale:w,scaleByVec2:k,set:x,str:v,sub:O,subtract:O,translate:h,transpose:u},Symbol.toStringTag,
{value:"Module"}));b.add=G;b.adjoint=t;b.copy=g;b.determinant=a;b.equals=S;b.exactEquals=aa;b.frob=E;b.fromMat2d=B;b.fromMat4=l;b.fromQuat=e;b.fromRotation=q;b.fromScaling=C;b.fromTranslation=d;b.identity=m;b.invert=n;b.isOrthoNormal=ba;b.mat3=fa;b.mul=c;b.multiply=c;b.multiplyScalar=Q;b.multiplyScalarAndAdd=W;b.normalFromMat4=A;b.normalFromMat4Legacy=r;b.projection=y;b.rotate=p;b.scale=w;b.scaleByVec2=k;b.set=x;b.str=v;b.sub=O;b.subtract=O;b.translate=h;b.transpose=u})},"esri/chunks/mat3f32":function(){define(["exports"],
function(b){function f(){const u=new Float32Array(9);u[0]=1;u[4]=1;u[8]=1;return u}function l(u){const n=new Float32Array(9);n[0]=u[0];n[1]=u[1];n[2]=u[2];n[3]=u[3];n[4]=u[4];n[5]=u[5];n[6]=u[6];n[7]=u[7];n[8]=u[8];return n}function g(u,n,t,a,c,h,p,w,k){const d=new Float32Array(9);d[0]=u;d[1]=n;d[2]=t;d[3]=a;d[4]=c;d[5]=h;d[6]=p;d[7]=w;d[8]=k;return d}function x(u,n){return new Float32Array(u,n,9)}const m=Object.freeze(Object.defineProperty({__proto__:null,clone:l,create:f,createView:x,fromValues:g},
Symbol.toStringTag,{value:"Module"}));b.clone=l;b.create=f;b.createView=x;b.fromValues=g;b.mat3f32=m})},"esri/chunks/vec2f32":function(){define(["exports"],function(b){function f(){return new Float32Array(2)}function l(k){const d=new Float32Array(2);d[0]=k[0];d[1]=k[1];return d}function g(k,d){const q=new Float32Array(2);q[0]=k;q[1]=d;return q}function x(k,d){return new Float32Array(k,d,2)}function m(){return f()}function u(){return g(1,1)}function n(){return g(1,0)}function t(){return g(0,1)}const a=
f(),c=u(),h=n(),p=t(),w=Object.freeze(Object.defineProperty({__proto__:null,ONES:c,UNIT_X:h,UNIT_Y:p,ZEROS:a,clone:l,create:f,createView:x,fromValues:g,ones:u,unitX:n,unitY:t,zeros:m},Symbol.toStringTag,{value:"Module"}));b.ONES=c;b.UNIT_X=h;b.UNIT_Y=p;b.ZEROS=a;b.clone=l;b.create=f;b.createView=x;b.fromValues=g;b.ones=u;b.unitX=n;b.unitY=t;b.vec2f32=w;b.zeros=m})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["exports"],function(b){function f(g){return g instanceof Float32Array&&2<=
g.length}function l(g){return Array.isArray(g)&&2<=g.length}b.isVec2=function(g){return f(g)||l(g)};b.isVec2f32=f;b.isVec2f64=l;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/MapViewInputManager":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(b,f,l,g,x,m,u,n,t,a,c,h,p,w,k,d,q,C,B,e,r,A,y,v,E,G,O){var Q={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},W={zoomIn:["\x3d","+"],zoomOut:["-","_"]},aa={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};f=class extends f{initialize(){const S=()=>this.view?.ready;this.addHandles([g.when(()=>!S(),()=>this._disconnect()),g.when(S,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??
!1}_disconnect(){this.view.viewEvents.disconnect();this._inputManager=l.destroyMaybe(this._inputManager)}_connect(){const S=new e.BrowserEventSource(this.view.surface,this.view.input);var ba=[new E.ImmediateDoubleClick,new G.PointerClickHoldAndDrag,new O.SingleAndDoubleClick,new v.Drag(this.view.navigation),new y.DoubleTapDrag];ba=new r.InputManager({eventSource:S,recognizers:ba});ba.installHandlers("prevent-context-menu",[new A.PreventContextMenu],r.ViewEventPriorities.INTERNAL);ba.installHandlers("navigation",
[new B.PinchRotateAndZoom(this.view),new w.GamepadNavigation(this.view),new C.MouseWheelZoom(this.view),new a.DoubleClickZoom(this.view),new a.DoubleClickZoom(this.view,["Ctrl"]),new h.DragPan(this.view,"primary"),new k.KeyPan(this.view,Q),new q.KeyZoom(this.view,W),new d.KeyRotate(this.view,aa),new p.DragRotate(this.view,"secondary"),new c.DoubleTapDragZoom(this.view,"touch")],r.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(ba);this._source=S;this._inputManager=ba;g.watch(()=>this.view?.navigation?.browserTouchPanEnabled,
fa=>{this._source&&(this._source.browserTouchPanningEnabled=!fa)},g.initial)}get test(){return{inputManager:this._inputManager}}};b.__decorate([x.property()],f.prototype,"view",void 0);b.__decorate([x.property()],f.prototype,"latestPointerType",null);b.__decorate([x.property()],f.prototype,"latestPointerLocation",null);b.__decorate([x.property()],f.prototype,"multiTouchActive",null);return f=b.__decorate([t.subclass("esri.views.2d.input.MapViewInputManager")],f)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["exports",
"../../../input/InputHandler","../../../input/handlers/support"],function(b,f,l){class g extends f.InputHandler{constructor(x,m){super(!0);this._view=x;this.registerIncoming("double-click",m,u=>this._handleDoubleClick(u,m))}_handleDoubleClick(x,m){l.eventMatchesPointerAction(x.data,"primary")&&(x.stopPropagation(),m?this._view.mapViewNavigation.zoomOut([x.data.x,x.data.y]):this._view.mapViewNavigation.zoomIn([x.data.x,x.data.y]))}}b.DoubleClickZoom=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/input/handlers/support":function(){define(["exports"],function(b){b.eventMatchesMousePointerAction=function(f,l){if("touch"===f.pointerType)return!1;switch(l){case "primary":return 0===f.button;case "secondary":return 2===f.button;case "tertiary":return 1===f.button}};b.eventMatchesPointerAction=function(f,l){switch(l){case "primary":return"touch"===f.pointerType||0===f.button;case "secondary":return"touch"!==f.pointerType&&2===f.button;case "tertiary":return"touch"!==f.pointerType&&1===
f.button}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["exports","../../../../core/has","../../../input/InputHandler"],function(b,f,l){class g extends l.InputHandler{constructor(x,m,u){super(!0);this.view=x;this.pointerType=m;this.registerIncoming("double-tap-drag",u,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(x){var {data:m}=x,{pointerType:u}=m;if(u===this.pointerType){x.stopPropagation();var {action:n,
delta:t}=m;({view:m}=this);({mapViewNavigation:x}=m);switch(n){case "begin":({scale:m}=m);this._currentScale=this._startScale=m;this._previousDelta=t;x.begin();break;case "update":if(this._previousDelta.y===t.y)break;this._previousDelta=t;m=this._startScale*1.015**t.y;x.setViewpointImmediate(m/this._currentScale);this._currentScale=m;break;case "end":({constraints:u}=m);const {effectiveLODs:a,snapToZoom:c}=u;c&&a?(m=u.snapScale(this._currentScale),m=(0<t.y?Math.max(m,u.snapToPreviousScale(this._startScale)):
Math.min(m,u.snapToNextScale(this._startScale)))/this._currentScale,x.zoom(m)):x.end()}}}}b.DoubleTapDragZoom=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DragPan":function(){define(["exports","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(b,f,l,g){class x extends l.InputHandler{constructor(m,u,n){super(!0);this.view=m;this.pointerAction=u;this.registerIncoming("drag",n,t=>this._handleDrag(t));
this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(m){super.onInstall(m);this._dragEventSeparator=new f.DragEventSeparator({start:(u,n)=>{this.view.mapViewNavigation.pan.begin(this.view,n.data);n.stopPropagation()},update:(u,n)=>{this.view.mapViewNavigation.pan.update(this.view,n.data);n.stopPropagation()},end:(u,n)=>{this.view.mapViewNavigation.pan.end(this.view,n.data);n.stopPropagation()},condition:(u,n)=>1===u&&g.eventMatchesPointerAction(n.data,this.pointerAction)})}_handleDrag(m){const u=
this.view.mapViewNavigation;u.pinch.zoomMomentum||u.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(m)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}b.DragPan=x;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/DragEventSeparator":function(){define(["exports"],function(b){class f{constructor(l){this._callbacks=l;this._currentCount=0;this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(l){const g=
l.data,x=g.pointers.size;switch(g.action){case "start":this._currentCount=x;this._emitStart(l);break;case "added":this._emitEnd(this._previousEvent);this._currentCount=x;this._emitStart(l);break;case "update":this._emitUpdate(l);break;case "removed":this._startEvent&&this._emitEnd(this._previousEvent);this._currentCount=x;this._emitStart(l);break;case "end":this._emitEnd(l),this._currentCount=0}this._previousEvent=l}_emitStart(l){this._startEvent=l;this._callbacks.condition?.(this._currentCount,l)&&
this._callbacks.start(this._currentCount,l,this._startEvent)}_emitUpdate(l){this._callbacks.condition?.(this._currentCount,l)&&this._callbacks.update(this._currentCount,l,this._startEvent)}_emitEnd(l){this._callbacks.condition?.(this._currentCount,l)&&this._callbacks.end(this._currentCount,l,this._startEvent);this._startEvent=null}}b.DragEventSeparator=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DragRotate":function(){define(["exports","../../../input/DragEventSeparator",
"../../../input/InputHandler","../../../input/handlers/support"],function(b,f,l,g){class x extends l.InputHandler{constructor(m,u,n){super(!0);this._view=m;this.pointerAction=u;const t=this._view.mapViewNavigation;this._dragEventSeparator=new f.DragEventSeparator({start:(a,c)=>{t.rotate.begin(this._view,c.data);c.stopPropagation()},update:(a,c)=>{t.rotate.update(this._view,c.data);c.stopPropagation()},end:(a,c)=>{t.rotate.end();c.stopPropagation()},condition:(a,c)=>1===a&&g.eventMatchesPointerAction(c.data,
this.pointerAction)});this.registerIncoming("drag",n,a=>this._dragEventSeparator.handle(a))}}b.DragRotate=x;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("exports ../../../../core/Handles ../../../../core/reactiveUtils ../../../../core/scheduling ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),function(b,f,l,g,x,m,u){class n extends m.InputHandler{constructor(t){super(!0);
this._view=t;this._frameTask=null;this._watchHandles=new f;this._currentDevice=null;this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};this._handle=this.registerIncoming("gamepad",a=>this._handleGamePadEvent(a));this._handle.pause()}onInstall(t){super.onInstall(t);this._watchHandles.add([l.watch(()=>this._view.navigation.gamepad?.enabled,a=>{a?(this._handle.resume(),this._frameTask||(this._frameTask=g.addFrameTask({update:c=>this._frameUpdate(c.deltaTime)}))):(this._handle.pause(),
this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},l.initial)])}onUninstall(){this._watchHandles.removeAll();this._frameTask&&(this._frameTask.remove(),this._frameTask=null);super.onUninstall()}_handleGamePadEvent(t){const a=this._view.navigation.gamepad.device;a&&t.data.device!==a||this._currentDevice&&this._currentDevice!==t.data.device||("end"===t.data.action?(this._currentDevice=null,u.resetTransformation(this._transformation)):(this._currentDevice=t.data.device,u.extractTransformation(t.data,
this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const a=this._transformation;if(!u.isZeroTransformation(a)){var c=this._view.viewpoint.clone(),h=.7*this._view.navigation.gamepad.velocityFactor*t;x.translateBy(c,c,[a.translation[0]*h,-a.translation[1]*h]);h=this._view.size;x.scaleAndRotateBy(c,c,1+6E-4*a.translation[2]*t,this._view.constraints.rotationEnabled?.06*-a.heading*t:0,[h[0]/2,h[1]],h);t=this._view.constraints.constrain(c,this._view.viewpoint);this._view.viewpoint=t}}}
b.GamepadNavigation=n;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["exports","../../chunks/vec3"],function(b,f){function l(g){let x=g*g;0>g&&(x*=-1);return x}b.extractTransformation=function(g,x,m){const u=g.state;g=g.device;x="forward-down"===x.tiltDirection?1:-1;"standard"===g.deviceType?(m.translation[0]=l(u.axes[0]),m.translation[1]=l(u.axes[1]),m.translation[2]=l(u.buttons[7])-l(u.buttons[6]),m.heading=l(u.axes[2]),
m.tilt=l(u.axes[3])):"spacemouse"===g.deviceType&&(m.translation[0]=1.2*l(u.axes[0]),m.translation[1]=1.2*l(u.axes[1]),m.translation[2]=2*-l(u.axes[2]),m.heading=1.2*l(u.axes[5]),m.tilt=1.2*l(u.axes[3]));m.tilt*=x;f.scale(m.translation,m.translation,1);return m};b.extractTransformationKeyboard=function(g,x){x.translation[0]=g[1]-g[0];x.translation[1]=g[3]-g[2];x.translation[2]=g[4]-g[5];x.heading=g[7]-g[6];x.tilt=g[8]-g[9];x.zoom=g[10]-g[11];return x};b.isZeroTransformation=function(g){return 0===
g.translation[0]&&0===g.translation[1]&&0===g.translation[2]&&0===g.heading&&0===g.tilt&&0===g.zoom};b.resetTransformation=function(g){g.translation[0]=0;g.translation[1]=0;g.translation[2]=0;g.heading=0;g.tilt=0;return g};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyPan":function(){define(["exports","../../../input/InputHandler","../../../input/VisibilityChange"],function(b,f,l){class g extends f.InputHandler{constructor(x,m,u){super(!0);this.view=
x;this.keys=m;this._isSticky=!1;this._pressedKeys=new Set;this._currentDirection=this._timeout=void 0;this._stickyKeyDuration=200;this._handleKey=n=>{var t=this._keyMap[n.data.key];n.modifiers.has("Meta")||n.modifiers.has("Ctrl")?this._stopMovement():null!=t&&(n.stopPropagation(),n.preventDefault(),n="key-down"===n.type,this._pressedKeys[n?"add":"delete"](t),n?this._direction!==t&&(this._direction=t,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})):(t=0<this._pressedKeys.size,
void 0===this._timeout||t?this._handlePopKey():this._isSticky=!0))};this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop();null==this._direction&&this._stopMovement()};this._stopMovement=()=>{this._isSticky=!1;this._direction=void 0;this._pressedKeys.clear();this._setTimeout(void 0)};this._keyMap={[m.left]:"left",[m.right]:"right",[m.up]:"up",[m.down]:"down"};this.registerIncoming("key-down",u,this._handleKey);this.registerIncoming("key-up",u,this._handleKey);this.registerIncoming("blur",
u,this._stopMovement);this._visibilityHandle=l.onVisibilityChange(n=>n?null:this._stopMovement())}onUninstall(){this._stopMovement();this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(x){const m=null!=this._currentDirection;if(null!=x){if(m||this.view.mapViewNavigation.begin(),this._currentDirection!==x)switch(x){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();break;case "up":this.view.mapViewNavigation.continousPanUp();
break;case "down":this.view.mapViewNavigation.continousPanDown()}}else m&&this.view.mapViewNavigation.stop();this._currentDirection=x}_setTimeout(x){clearTimeout(this._timeout);this._timeout=void 0===x?void 0:setTimeout(()=>{this._timeout=void 0;x()},this._stickyKeyDuration)}}b.KeyPan=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/VisibilityChange":function(){define(["exports"],function(b){b.onVisibilityChange=function(f){const l=()=>f("visible"===document.visibilityState);
document.addEventListener("visibilitychange",l);return{remove:()=>document.addEventListener("visibilitychange",l)}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["exports","../../../input/InputHandler","../../../input/VisibilityChange"],function(b,f,l){class g extends f.InputHandler{constructor(x,m,u){super(!0);this.view=x;this.keys=m;this._pressed=!1;this._keyToDirection={[m.clockwiseOption1]:"clockwise",[m.clockwiseOption2]:"clockwise",
[m.counterClockwiseOption1]:"counterClockwise",[m.counterClockwiseOption2]:"counterClockwise",[m.resetOption1]:"reset",[m.resetOption2]:"reset"};this.registerIncoming("key-down",u,n=>this._handleKeyDown(n));this.registerIncoming("key-up",u,n=>this._handleKeyUp(n));this.registerIncoming("blur",u,()=>this._handleStop());this._visibilityHandle=l.onVisibilityChange(n=>n?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove();this._handleStop()}_handleKeyDown(x){x.data.repeat||this._handleKey(x,
!0)}_handleKeyUp(x){this._handleKey(x,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(x,m){var u=x.modifiers;if(!(0<u.size&&!u.has("Shift")||!this.view.constraints.rotationEnabled)&&(u=this._keyToDirection[x.data.key],this._pressed=null!=u)){x.preventDefault();if(m)switch(this.view.mapViewNavigation.begin(),u){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();
break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();x.stopPropagation()}}}b.KeyRotate=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["exports","../../../../core/has","../../../input/InputHandler"],function(b,f,l){var g;(function(m){m[m.IN=0]="IN";m[m.OUT=1]="OUT"})(g||(g={}));class x extends l.InputHandler{constructor(m,u,n){super(!0);this.view=m;this.keys=
u;this._keysToZoomAction={};this.registerIncoming("key-down",n,t=>this._handleKeyDown(t));u.zoomIn.forEach(t=>this._keysToZoomAction[t]=g.IN);u.zoomOut.forEach(t=>this._keysToZoomAction[t]=g.OUT)}_handleKeyDown(m){this._handleKey(m)}_handleKey(m){var u=m.modifiers;if(!(0<u.size)||u.has("Shift"))if({key:u}=m.data,u in this._keysToZoomAction){u=this._keysToZoomAction[u];var {mapViewNavigation:n}=this.view,t=null;switch(u){case g.IN:t=n.zoomIn();break;case g.OUT:t=n.zoomOut();break;default:return}n.begin();
t.then(()=>n.end());m.stopPropagation()}}}b.KeyZoom=x;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["exports","../../../input/InputHandler"],function(b,f){class l extends f.InputHandler{constructor(g,x){super(!0);this._view=g;this._canZoom=!0;this.registerIncoming("mouse-wheel",x,m=>this._handleMouseWheel(m))}_handleMouseWheel(g){if(this._view.navigation.mouseWheelZoomEnabled&&(g.preventDefault(),g.stopPropagation(),
this._canZoom)){var x=this._view.mapViewNavigation,{x:m,y:u,deltaY:n}=g.data;if(g=x.zoom(1/.6**(1/60*n),[m,u]))this._canZoom=!1,g.catch(()=>{}).then(()=>{this._canZoom=!0;x.end()})}}}b.MouseWheelZoom=l;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/PinchAction":function(){define(["exports","../../../input/DragEventSeparator","../../../input/InputHandler"],function(b,f,l){class g extends l.InputHandler{constructor(x){super(!0);this.view=x;this.registerIncoming("drag",
u=>this._handleDrag(u));this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const m=this.view.mapViewNavigation;this._dragEventSeparator=new f.DragEventSeparator({start:(u,n)=>{m.pinch.begin(this.view,n.data);n.stopPropagation()},update:(u,n)=>{m.pinch.update(this.view,n.data);n.stopPropagation()},end:(u,n)=>{m.pinch.end(this.view);n.stopPropagation()},condition:u=>2<=u})}_handleDrag(x){this._dragEventSeparator.handle(x)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}
b.PinchRotateAndZoom=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/BrowserEventSource":function(){define("exports ../../core/has ../../core/maybe ./keys ./gamepad/GamepadSource ../support/screenUtils".split(" "),function(b,f,l,g,x,m){const u=f("edge"),n=f("chrome"),t=f("ff"),a=f("safari");class c{constructor(p,w){this._input=w;this._active={};this._callback=()=>{};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=
!1;this._element=p;p.getAttribute("tabindex")||p.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();
this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new x.GamepadSource(p,this._input);this._gamepadSource.onEvent=k=>this._callback("gamepad",k)}destroy(){this._callback=()=>{};this.activeEvents=null;this._activePointerCaptures.forEach(p=>{this._releasePointerCaptureSafe(p)});this._gamepadSource=l.destroyMaybe(this._gamepadSource);this._activePointerCaptures=null;this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(p){this._browserTouchPanningEnabled=
p;this._updateTouchAction();this._updateTouchEventHandling()}set onEventReceived(p){this._callback=p}set activeEvents(p){for(const w in this._active)p&&p.has(w)||(this._element.removeEventListener(h[w],this._active[w]),delete this._active[w]);p&&p.forEach(w=>{if(!this._active[w]&&h[w]){const k=(this._eventHandlers[w]||this._handleDefault).bind(this,w);this._element.addEventListener(h[w],k);this._active[w]=k}});this._gamepadSource.hasEventListeners=p?.has("gamepad")??!1}setPointerCapture(p,w){w?this._setPointerCatpureSafe(p.pointerId):
(this._releasePointerCaptureSafe(p.pointerId),this._activePointerCaptures.delete(p.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):
this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(p){try{this._element.setPointerCapture(p),this._activePointerCaptures.add(p)}catch{}}_releasePointerCaptureSafe(p){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(p)||
this._element.releasePointerCapture(p)}catch(w){}}_updateNormalizedPointerLikeEvent(p,w){p=m.createScreenPointFromNativeEvent(this._element,p);c.test.disableSubpixelCoordinates&&(p.x=Math.round(p.x),p.y=Math.round(p.y));w.x=p.x;w.y=p.y;return w}_handleKey(p,w){const k=g.eventKey(w);k&&"key-up"===p&&this._keyDownState.delete(k);w={native:w,key:k,repeat:!!k&&this._keyDownState.has(k)};k&&"key-down"===p&&this._keyDownState.add(w.key);this._callback(p,w)}_handlePointer(p,w){w=this._updateNormalizedPointerLikeEvent(w,
{native:w,x:0,y:0,pointerType:w.pointerType,button:w.button,buttons:w.buttons,eventId:this._eventId++});this._callback(p,w)}_handlePointerPreventDefault(p,w){const k=this._updateNormalizedPointerLikeEvent(w,{native:w,x:0,y:0,pointerType:w.pointerType,button:w.button,buttons:w.buttons,eventId:this._eventId++});w.preventDefault();this._callback(p,k)}_handleMouseWheel(p,w){let k=w.deltaY;switch(w.deltaMode){case 0:u&&(k=k/document.documentElement.clientHeight*600);break;case 1:k*=30;break;case 2:k*=
900}u?k*=.7:n||a?k*=.6:t&&(k*=1.375);const d=Math.abs(k);100<d&&(k=k/d*200/(1+Math.exp(-.02*(d-100))));w=this._updateNormalizedPointerLikeEvent(w,{native:w,x:0,y:0,deltaY:k});this._callback(p,w)}_handlePointerCaptureLost(p,w){this._activePointerCaptures.delete(w.pointerId);this._handleDefault(p,w)}_handleDefault(p,w){const k={native:w};w.preventDefault();this._callback(p,k)}_preventAltKeyDefault(p){"Alt"===p.key&&p.preventDefault()}_preventMultiTouchPanning(p){1<p.touches.length&&p.preventDefault()}}
c.test={disableSubpixelCoordinates:!1};const h={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};b.BrowserEventSource=c;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/input/gamepad/GamepadSource":function(){define(["exports","../../../core/scheduling","./GamepadInputDevice","./GamepadState"],function(b,f,l,g){class x{constructor(m,u){this._element=m;this._input=u;this._hasEventListeners=!1;this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)};this._onDisconnectGamepad=n=>{n=n.gamepad;const t=n.index,a=this._inputDevices[t];a&&(this._emitGamepadEvent(n,g.extractState(a),!1),this._inputDevices.splice(t,1),this._latestUpdate.splice(t,1),this._input.gamepad.devices.remove(a),
this.ensurePollingState())};this._frameTask=null;this._latestUpdate=[];this._inputDevices=[];this._callback=null;m=window.isSecureContext;if(this.supported="getGamepads"in window.navigator&&m)this._forEachGamepad(n=>this._connectGamepad(n)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState()}destroy(){this.hasEventListeners=!1;this.supported&&(window.removeEventListener("gamepadconnected",
this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(m){this._hasEventListeners!==m&&(this._hasEventListeners=m,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&0<this._inputDevices.length&&this._hasEventListeners}set onEvent(m){this._callback=m}_connectGamepad(m){const u=new l(m);"unknown"!==u.deviceType&&(this._inputDevices[m.index]=u,this._input.gamepad.devices.add(u));this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?
this._startPolling():this._stopPolling()}_startPolling(){null==this._frameTask&&(this._frameTask=f.addFrameTask({update:()=>this._readGamepadState()}))}_stopPolling(){null!=this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=[])}_readGamepadState(){const m=document.hasFocus(),u=this._element.contains(document.activeElement),n="document"===this._input.gamepad.enabledFocusMode&&!m||"view"===this._input.gamepad.enabledFocusMode&&!u;this._forEachGamepad(t=>{var a=this._inputDevices[t.index];
if(a){var c=this._latestUpdate[t.index];a=g.extractState(a);var h=n||g.stateIdle(a);c&&(c.timestamp===t.timestamp||!c.active&&h||g.stateEqual(c.state,a))||this._emitGamepadEvent(t,a,!h)}})}_forEachGamepad(m){const u=window.navigator.getGamepads();for(let n=0;n<u.length;n++){const t=u[n];this._validate(t)&&m(t)}}_emitGamepadEvent(m,u,n){var t=this._latestUpdate[m.index];if((t=t&&t.active)||n)this._latestUpdate[m.index]={timestamp:m.timestamp,state:u,active:n},this._callback&&this._callback({device:this._inputDevices[m.index],
state:u,action:!t&&n?"start":t&&n?"update":"end"})}_validate(m){if(!m||!m.connected)return!1;for(let u=0;u<m.axes.length;u++)if(isNaN(m.axes[u]))return!1;return!0}}b.GamepadSource=x;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/gamepad/GamepadState":function(){define(["exports"],function(b){b.extractState=function(f){const l=f.native;return l?{buttons:l.buttons.map(g=>g.pressed?g.value||1:0),axes:l.axes.map(g=>{{var x=f.axisThreshold;const m=Math.abs(g);g=m<x?0:
Math.sign(g)*(m-x)/(1-x)}return g})}:{buttons:[],axes:[]}};b.stateEqual=function(f,l){if(f.axes.length!==l.axes.length||f.buttons.length!==l.buttons.length)return!1;for(var g=0;g<f.axes.length;g++)if(f.axes[g]!==l.axes[g])return!1;for(g=0;g<f.buttons.length;g++)if(f.buttons[g]!==l.buttons[g])return!1;return!0};b.stateIdle=function(f){for(var l=0;l<f.axes.length;l++)if(0!==f.axes[l])return!1;for(l=0;l<f.buttons.length;l++)if(0!==f.buttons[l])return!1;return!0};Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/views/input/handlers/PreventContextMenu":function(){define(["exports","../InputHandler"],function(b,f){class l extends f.InputHandler{constructor(){super(!0);this.registerIncoming("context-menu",g=>{g.data.native.preventDefault()})}}b.PreventContextMenu=l;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("exports ../../../core/clock ../../../core/MapUtils ../../../core/maybe ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./support".split(" "),
function(b,f,l,g,x,m,u,n){class t extends u.InputHandler{constructor(a=n.DefaultParameters.maximumDoubleClickDelay,c=n.DefaultParameters.maximumDoubleClickDistance,h=n.DefaultParameters.maximumDoubleTouchDelay,p=n.DefaultParameters.maximumDoubleTouchDistance,w=f.clock){super(!1);this._maximumDoubleClickDelay=a;this._maximumDoubleClickDistance=c;this._maximumDoubleTouchDelay=h;this._maximumDoubleTouchDistance=p;this._clock=w;this._doubleTapDragActive=this._doubleTapDragReady=!1;this._dragStartCenter=
x.createScreenPoint(0,0);this._pointerState=new Map;this._doubleTapDrag=this.registerOutgoing("double-tap-drag");this._dragEventSeparator=new m.DragEventSeparator({start:(k,d)=>this._dragStart(k,d),update:(k,d)=>this._dragUpdate(d),end:(k,d)=>this._dragEnd(d)});this.registerIncoming("drag",k=>this._dragEventSeparator.handle(k));this.registerIncoming("pointer-down",k=>this._handlePointerDown(k));this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(a=>
{a.doubleTapTimeout=g.removeMaybe(a.doubleTapTimeout)})}get hasPendingInputs(){return l.someMap(this._pointerState,a=>null!=a.doubleTapTimeout)}_clearPointerDown(a){const c=this._pointerState.get(a);c&&(c.doubleTapTimeout=g.removeMaybe(c.doubleTapTimeout),this._pointerState.delete(a),this.refreshHasPendingInputs())}_createDoubleTapDragData(a,c,h){const {button:p,buttons:w,pointer:k,pointers:d,pointerType:q,timestamp:C}=h;return{action:a,delta:c,button:p,buttons:w,pointer:k,pointers:d,pointerType:q,
timestamp:C}}_dragStart(a,c){if(this._doubleTapDragReady&&1===a){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var {data:h,modifiers:p}=c;({center:a}=h);this._dragStartCenter=a;a=this._createDoubleTapDragData("begin",x.createScreenPoint(0,0),h);this._doubleTapDrag.emit(a,void 0,p);c.stopPropagation()}}_dragUpdate(a){if(this._doubleTapDragActive){var {data:c,modifiers:h}=a,{center:p}=c;p=x.createScreenPoint(p.x-this._dragStartCenter.x,p.y-this._dragStartCenter.y);p=this._createDoubleTapDragData("update",
p,c);this._doubleTapDrag.emit(p,void 0,h);a.stopPropagation()}}_dragEnd(a){if(this._doubleTapDragActive){var {data:c,modifiers:h}=a,{center:p}=c;p=x.createScreenPoint(p.x-this._dragStartCenter.x,p.y-this._dragStartCenter.y);p=this._createDoubleTapDragData("end",p,c);this._doubleTapDrag.emit(p,void 0,h);this._doubleTapDragActive=!1;a.stopPropagation()}}_handlePointerDown(a){const {data:c}=a,h=n.getPointerId(c),p=this._pointerState.get(h);var {pointerType:w}=c.native;p?(w="touch"===w?this._maximumDoubleTouchDistance:
this._maximumDoubleClickDistance,this._clearPointerDown(h),n.manhattanDistance(p.event.data,c)>w?this._storePointerDown(a):this._doubleTapDragReady=!0):this._storePointerDown(a)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(a){var {data:c}=a;const {pointerType:h}=c.native,p=n.getPointerId(c);c=this._clock.setTimeout(()=>this._clearPointerDown(p),"touch"===h?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay);this._pointerState.set(p,{event:a,doubleTapTimeout:c});this.refreshHasPendingInputs()}}
b.DoubleTapDrag=t;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/support":function(){define(["exports","../../../core/screenUtils"],function(b,f){b.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};b.euclideanDistance=function(l,g){const x=g.x-l.x;l=g.y-l.y;
return Math.sqrt(x*x+l*l)};b.fitCircleLSQ=function(l,g){g?(g.radius=0,g.center.x=0,g.center.y=0):g={radius:0,center:f.createScreenPoint()};if(0===l.length)return g;if(1===l.length)return g.center.x=l[0].x,g.center.y=l[0].y,g;if(2===l.length){const [d,q]=l,[C,B]=[q.x-d.x,q.y-d.y];g.radius=Math.sqrt(C*C+B*B)/2;g.center.x=(d.x+q.x)/2;g.center.y=(d.y+q.y)/2;return g}let x=0,m=0;for(g=0;g<l.length;g++)x+=l[g].x,m+=l[g].y;x/=l.length;m/=l.length;var u=l.map(d=>d.x-x),n=l.map(d=>d.y-m);let t=g=0;var a=0,
c=0,h=0,p=0,w=0;for(var k=0;k<u.length;k++){const d=u[k],q=n[k],C=d*d,B=q*q;g+=C;t+=B;a+=d*q;c+=C*d;h+=B*q;p+=d*B;w+=q*C}u=g;n=a;k=t;c=.5*(c+p);h=.5*(h+w);w=u*k-a*n;p=(c*k-h*n)/w;h=(u*h-a*c)/w;w=f.createScreenPoint(p+x,h+m);return{radius:Math.sqrt(p*p+h*h+(g+t)/l.length),center:w}};b.getPointerId=function(l){({native:l}=l);const {pointerId:g,button:x,pointerType:m}=l;return"mouse"===m?`${g}:${x}`:`${m}`};b.manhattanDistance=function(l,g){return Math.abs(g.x-l.x)+Math.abs(g.y-l.y)};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/Drag":function(){define(["exports","../../../core/screenUtils","../../../core/time","../InputHandler","./support"],function(b,f,l,g,x){function m(c){const h=[];c.forEach(p=>{h.push(f.createScreenPoint(p.event.x,p.event.y))});return x.fitCircleLSQ(h)}function u(c){const h=m(c);let p=0;c.forEach(w=>{var k=t(w,h);for(k-=w.lastAngle;k>Math.PI;)k-=2*Math.PI;for(;k<-Math.PI;)k+=2*Math.PI;k=w.lastAngle+k;w.lastAngle=k;p+=k-w.initialAngle});
p/=c.size||1;return{angle:p,radius:h.radius,center:h.center}}function n(c){const h=new Map;c.forEach((p,w)=>h.set(w,p.event));return h}function t(c,h){c=c.event;return Math.atan2(c.y-h.center.y,c.x-h.center.x)}class a extends g.InputHandler{constructor(c){super(!1);this._navigationTouch=c;this._startStateModifiers=new Set;this._activePointerMap=new Map;this._isCurrentDragSuppressed=this._isDragging=!1;this._drag=this.registerOutgoing("drag");this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this));
this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this));this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this));this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(c,h,p,w){return{action:c,pointerType:this._pointerType,button:this._mouseButton,buttons:h.buttons,timestamp:w,pointers:n(this._activePointerMap),pointer:h,angle:p.angle,radius:p.radius,center:p.center}}_addPointer(c){var h=
c.native.pointerId;const p=u(this._activePointerMap).angle;c={event:c,initialAngle:0,lastAngle:0};this._activePointerMap.set(h,c);h=t(c,m(this._activePointerMap));c.initialAngle=h;c.lastAngle=h;this._updatePointerAngles(p)}_updatePointer(c){if(!c||null!=c.x||null!=c.y){var h=this._activePointerMap.get(c.native.pointerId);h?h.event=c:this._addPointer(c)}}_removePointer(c){const h=u(this._activePointerMap).angle;this._activePointerMap.delete(c);this._updatePointerAngles(h)}_updatePointerAngles(c){const h=
u(this._activePointerMap);this._activePointerMap.forEach(p=>{p.initialAngle=t(p,h)-c;p.lastAngle=t(p,h)-c})}_emitEvent(c,h,p){const w=u(this._activePointerMap);this._drag.emit(this._createPayload(c,h,w,p),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(c){const h=c.data.native.pointerId,p=l.Milliseconds(c.timestamp);this._activePointerMap.get(h)&&(1===this._activePointerMap.size?(this._updatePointer(c.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",c.data,p),this._isCurrentDragSuppressed=
this._isDragging=!1,this._removePointer(h)):(this._removePointer(h),this._emitEvent("removed",c.data,l.Milliseconds(c.timestamp))))}_handlePointerDrag(c){const h=c.data,p=h.currentEvent,w=l.Milliseconds(c.timestamp);switch(h.action){case "start":case "update":this._isDragging?this._activePointerMap.has(p.native.pointerId)?(this._updatePointer(p),!this._isCurrentDragSuppressed&&this._emitEvent("update",p,w)):(this._addPointer(p),this._emitEvent("added",p,w),this._isCurrentDragSuppressed=this._isSuppressed):
(this._updatePointer(p),this._pointerType=c.data.startEvent.pointerType,this._mouseButton=c.data.startEvent.button,this._startStateModifiers=c.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",p,w))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&"touch"===this._pointerType&&1===this._activePointerMap.size}}b.Button=void 0;(function(c){c[c.Left=0]="Left";c[c.Middle=
1]="Middle";c[c.Right=2]="Right";c[c.Back=3]="Back";c[c.Forward=4]="Forward";c[c.Undefined=-1]="Undefined"})(b.Button||(b.Button={}));b.Drag=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define(["exports","../../../core/clock","../InputHandler","./support"],function(b,f,l,g){class x extends l.InputHandler{constructor(m=g.DefaultParameters.maximumDoubleClickDelay,u=g.DefaultParameters.maximumDoubleClickDistance,n=g.DefaultParameters.maximumDoubleTouchDelay,
t=g.DefaultParameters.maximumDoubleTouchDistance,a=f.clock){super(!1);this._maximumDoubleClickDelay=m;this._maximumDoubleClickDistance=u;this._maximumDoubleTouchDelay=n;this._maximumDoubleTouchDistance=t;this._clock=a;this._pointerState=new Map;this._immediateDoubleClick=this.registerOutgoing("immediate-double-click");this.registerIncoming("pointer-down",this._handlePointerDown.bind(this));this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(m=>
{m.immediateDoubleClick&&m.immediateDoubleClick.timeoutHandle.remove()});super.onUninstall()}_handlePointerDown(m){m=m.data;const u=g.getPointerId(m);this._pointerState.has(u)||(this._pointerState.set(u,{downButton:m.native.button,x:m.x,y:m.y,immediateDoubleClick:null}),this.startCapturingPointer(m.native))}_handlePointerUp(m){const u=m.data;var n=g.getPointerId(u);if((n=this._pointerState.get(n))&&n.downButton===u.native.button){const t=n.immediateDoubleClick,a="touch"===m.data.native.pointerType?
this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;t?(t.timeoutHandle.remove(),g.manhattanDistance(t,m.data)>a?this._startImmediateDoubleClick(m,n):(this._immediateDoubleClick.emit(m.data,void 0,t.modifiers),this._removeState(u))):g.manhattanDistance(n,m.data)>a?this._removeState(u):this._startImmediateDoubleClick(m,n)}}_startImmediateDoubleClick(m,u){u.immediateDoubleClick={x:m.data.x,y:m.data.y,modifiers:m.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(m.data),
"touch"===m.data.native.pointerType?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay)}}_removeState(m){const u=g.getPointerId(m);this._pointerState.delete(u);this.stopCapturingPointer(m.native);this.refreshHasPendingInputs()}}b.ImmediateDoubleClick=x;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["exports","../../../core/clock","../../../core/maybe","../InputHandler","./support"],function(b,f,l,g,
x){class m extends g.InputHandler{constructor(u=x.DefaultParameters.maximumClickDelay,n=x.DefaultParameters.movementUntilMouseDrag,t=x.DefaultParameters.movementUntilPenDrag,a=x.DefaultParameters.movementUntilTouchDrag,c=x.DefaultParameters.holdDelay,h=f.clock){super(!1);this._maximumClickDelay=u;this._movementUntilMouseDrag=n;this._movementUntilPenDrag=t;this._movementUntilTouchDrag=a;this._holdDelay=c;this._clock=h;this._pointerState=new Map;this._pointerDrag=this.registerOutgoing("pointer-drag");
this._immediateClick=this.registerOutgoing("immediate-click");this._pointerHold=this.registerOutgoing("hold");this.registerIncoming("pointer-down",this._handlePointerDown.bind(this));this.registerIncoming("pointer-up",p=>{this._handlePointerLoss(p,"pointer-up")});this.registerIncoming("pointer-capture-lost",p=>{this._handlePointerLoss(p,"pointer-capture-lost")});this.registerIncoming("pointer-cancel",p=>{this._handlePointerLoss(p,"pointer-cancel")});this._moveHandle=this.registerIncoming("pointer-move",
this._handlePointerMove.bind(this));this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(u=>{u.holdTimeout=l.removeMaybe(u.holdTimeout)});super.onUninstall()}_handlePointerDown(u){const n=u.data,t=n.native.pointerId;var a=null;0===this._pointerState.size&&(a=this._clock.setTimeout(()=>{const c=this._pointerState.get(t);c&&(c.isDragging||(this._pointerHold.emit(c.previousEvent,void 0,u.modifiers),c.holdEmitted=!0),c.holdTimeout=null)},this._holdDelay));a={startEvent:n,previousEvent:n,
startTimestamp:u.timestamp,isDragging:!1,downButton:n.native.button,holdTimeout:a,modifiers:new Set};this._pointerState.set(t,a);this.startCapturingPointer(n.native);this._moveHandle.resume();1<this._pointerState.size&&this._startDragging(u)}_createPointerDragData(u,n,t){return{action:u,startEvent:n.startEvent,previousEvent:n.previousEvent,currentEvent:t}}_handlePointerMove(u){const n=u.data,t=this._pointerState.get(n.native.pointerId);if(t){if(t.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",
t,n),void 0,t.modifiers);else{const a=x.euclideanDistance(n,t.startEvent),c=this._getDragThreshold(n.native.pointerType);a>c&&this._startDragging(u)}t.previousEvent=n}}_getDragThreshold(u){switch(u){case "touch":return this._movementUntilTouchDrag;case "pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(u){const n=u.data,t=n.native.pointerId;this._pointerState.forEach(a=>{null!=a.holdTimeout&&(a.holdTimeout.remove(),a.holdTimeout=null);a.isDragging||
(a.modifiers=u.modifiers,a.isDragging=!0,t===a.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",a,n)):this._pointerDrag.emit(this._createPointerDragData("start",a,a.previousEvent),u.timestamp))})}_handlePointerLoss(u,n){const t=u.data,a=t.native.pointerId,c=this._pointerState.get(a);c&&(null!=c.holdTimeout&&(c.holdTimeout.remove(),c.holdTimeout=null),c.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",c,"pointer-up"===n?t:c.previousEvent),void 0,
c.modifiers):"pointer-up"===n&&c.downButton===t.native.button&&u.timestamp-c.startTimestamp<=this._maximumClickDelay&&!c.holdEmitted&&this._immediateClick.emit(t),this._pointerState.delete(a),this.stopCapturingPointer(t.native),0===this._pointerState.size&&this._moveHandle.pause())}}b.PointerClickHoldAndDrag=m;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("exports ../../../core/clock ../../../core/MapUtils ../../../core/maybe ../InputHandler ./support".split(" "),
function(b,f,l,g,x,m){class u extends x.InputHandler{constructor(n=m.DefaultParameters.maximumDoubleClickDelay,t=m.DefaultParameters.maximumDoubleClickDistance,a=m.DefaultParameters.maximumDoubleTouchDelay,c=m.DefaultParameters.maximumDoubleTouchDistance,h=f.clock){super(!1);this._maximumDoubleClickDelay=n;this._maximumDoubleClickDistance=t;this._maximumDoubleTouchDelay=a;this._maximumDoubleTouchDistance=c;this._clock=h;this._pointerState=new Map;this._click=this.registerOutgoing("click");this._doubleClick=
this.registerOutgoing("double-click");this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this));this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(n=>n.doubleClickTimer=g.removeMaybe(n.doubleClickTimer))}get hasPendingInputs(){return l.someMap(this._pointerState,n=>null!=n.doubleClickTimer)}_clearDoubleClickTimer(n,t){const a=this._pointerState.get(n);a&&(a.doubleClickTimer=g.removeMaybe(a.doubleClickTimer),t&&this._click.emit(a.event.data,
void 0,a.event.modifiers),this._pointerState.delete(n),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(n){const t=this._pointerState.get(n);1===t.pointerDownCount&&this._click.emit(t.event.data,void 0,t.event.modifiers);t.doubleClickTimer=null;this._pointerState.delete(n);this.refreshHasPendingInputs()}_getPointerId(n){const {pointerId:t,pointerType:a,button:c}=n.native;return"mouse"===a?`${t}:${c}`:`${a}`}_handleImmediateClick(n){const t=n.data;var {pointerType:a}=t.native;const c=this._getPointerId(t);
if(this._pointerState.has(c)){var h=this._pointerState.get(c),{data:p,modifiers:w}=h.event;a="touch"===a?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;m.manhattanDistance(p,t)>a?(this._clearDoubleClickTimer(c,!0),this._startClick(n)):(this._clearDoubleClickTimer(c,!1),2===h.pointerDownCount&&this._doubleClick.emit(p,void 0,w))}else this._startClick(n)}_handlePointerDown(n){n=m.getPointerId(n.data);if(n=this._pointerState.get(n))n.pointerDownCount+=1}_startClick(n){var {data:t}=
n;const {native:{pointerType:a}}=t,c=m.getPointerId(t);t=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(c),"touch"===a?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay);this._pointerState.set(c,{event:n,doubleClickTimer:t,pointerDownCount:1});this.refreshHasPendingInputs()}}b.SingleAndDoubleClick=u;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../core/Evented ../../../../../core/has ../../../../../chunks/rbush ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),
function(b,f,l,g,x,m){const u={added:[],removed:[]},n=new Set,t=new m(0,0,0,0);class a extends b{constructor(c){super();this._tiles=new Map;this._index=l.rbush(9,f("esri-csp-restrictions")?h=>({minX:h.bounds[0],minY:h.bounds[1],maxX:h.bounds[2],maxY:h.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);this.tiles=[];this.tileScheme=c}destroy(){this.clear()}clear(){this.tiles.length=0;this._tiles.clear();this._index.clear()}has(c){return this._tiles.has(c)}get(c){return this._tiles.get(c)}boundsIntersections(c){return this._index.search({minX:c[0],
minY:c[1],maxX:c[2],maxY:c[3]})}updateTiles(c){const h={added:[],removed:[]};for(const p of c.added)if(!this.has(p)){const w=new g.Tile(this.tileScheme,p);this._tiles.set(p,w);this._index.insert(w);h.added.push(w)}for(const p of c.removed)this.has(p)&&(c=this.get(p),this._tiles.delete(p),this._index.remove(c),h.removed.push(c));this.tiles.length=0;this._tiles.forEach(p=>this.tiles.push(p));(h.added.length||h.removed.length)&&this.emit("update",h)}setViewState(c){if(c=this.tileScheme.getTileCoverage(c,
0)){var {spans:h,lodInfo:p}=c,{level:w}=p;if(0<h.length)for(const {row:d,colFrom:q,colTo:C}of h)for(var k=q;k<=C;k++){const B=t.set(w,d,p.normalizeCol(k),p.getWorldForColumn(k)).id;n.add(B);if(!this.has(B)){const e=new g.Tile(this.tileScheme,B);this._tiles.set(B,e);this._index.insert(e);this.tiles.push(e);u.added.push(e)}}for(w=this.tiles.length-1;0<=w;w--)k=this.tiles[w],n.has(k.id)||(this._tiles.delete(k.id),this.tiles.splice(w,1),this._index.remove(k),u.removed.push(k));(u.added.length||u.removed.length)&&
this.emit("update",u);x.pool.release(c);n.clear();u.added.length=0;u.removed.length=0}}}return a})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],function(b,f){function l(k,d){if(!(this instanceof l))return new l(k,d);this._maxEntries=Math.max(4,k||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));d&&("function"===typeof d?this.toBBox=d:this._initFormat(d));this.clear()}function g(k,d){x(k,0,k.children.length,d,k)}function x(k,d,q,C,B){B||(B=p(null));B.minX=Infinity;
B.minY=Infinity;B.maxX=-Infinity;B.maxY=-Infinity;for(var e;d<q;d++)e=k.children[d],m(B,k.leaf?C(e):e);return B}function m(k,d){k.minX=Math.min(k.minX,d.minX);k.minY=Math.min(k.minY,d.minY);k.maxX=Math.max(k.maxX,d.maxX);k.maxY=Math.max(k.maxY,d.maxY);return k}function u(k,d){return k.minX-d.minX}function n(k,d){return k.minY-d.minY}function t(k){return(k.maxX-k.minX)*(k.maxY-k.minY)}function a(k){return k.maxX-k.minX+(k.maxY-k.minY)}function c(k,d){return k.minX<=d.minX&&k.minY<=d.minY&&d.maxX<=
k.maxX&&d.maxY<=k.maxY}function h(k,d){return d.minX<=k.maxX&&d.minY<=k.maxY&&d.maxX>=k.minX&&d.maxY>=k.minY}function p(k){return{children:k,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function w(k,d,q,C,B){for(var e=[d,q],r;e.length;)q=e.pop(),d=e.pop(),q-d<=C||(r=d+Math.ceil((q-d)/C/2)*C,f.quickselect(k,r,d,q,B),e.push(d,r,r,q))}l.prototype={all:function(){return this._all(this.data,[])},search:function(k){var d=this.data,q=[],C=this.toBBox;if(!h(k,d))return q;for(var B=
[],e,r,A,y;d;){e=0;for(r=d.children.length;e<r;e++)A=d.children[e],y=d.leaf?C(A):A,h(k,y)&&(d.leaf?q.push(A):c(k,y)?this._all(A,q):B.push(A));d=B.pop()}return q},collides:function(k){var d=this.data,q=this.toBBox;if(!h(k,d))return!1;for(var C=[],B,e,r,A;d;){B=0;for(e=d.children.length;B<e;B++)if(r=d.children[B],A=d.leaf?q(r):r,h(k,A)){if(d.leaf||c(k,A))return!0;C.push(r)}d=C.pop()}return!1},load:function(k){if(!k||!k.length)return this;if(k.length<this._minEntries){for(var d=0,q=k.length;d<q;d++)this.insert(k[d]);
return this}k=this._build(k.slice(),0,k.length-1,0);this.data.children.length?this.data.height===k.height?this._splitRoot(this.data,k):(this.data.height<k.height&&(d=this.data,this.data=k,k=d),this._insert(k,this.data.height-k.height-1,!0)):this.data=k;return this},insert:function(k){k&&this._insert(k,this.data.height-1);return this},clear:function(){this.data=p([]);return this},remove:function(k,d){if(!k)return this;for(var q=this.data,C=this.toBBox(k),B=[],e=[],r,A,y,v;q||B.length;){q||(q=B.pop(),
A=B[B.length-1],r=e.pop(),v=!0);if(q.leaf){a:{y=k;var E=q.children,G=d;if(G){for(var O=0;O<E.length;O++)if(G(y,E[O])){y=O;break a}y=-1}else y=E.indexOf(y)}if(-1!==y){q.children.splice(y,1);B.push(q);this._condense(B);break}}v||q.leaf||!c(q,C)?A?(r++,q=A.children[r],v=!1):q=null:(B.push(q),e.push(r),r=0,A=q,q=q.children[0])}return this},toBBox:function(k){return k},compareMinX:u,compareMinY:n,toJSON:function(){return this.data},fromJSON:function(k){this.data=k;return this},_all:function(k,d){for(var q=
[];k;)k.leaf?d.push.apply(d,k.children):q.push.apply(q,k.children),k=q.pop();return d},_build:function(k,d,q,C){var B=q-d+1,e=this._maxEntries;if(B<=e){var r=p(k.slice(d,q+1));g(r,this.toBBox);return r}C||(C=Math.ceil(Math.log(B)/Math.log(e)),e=Math.ceil(B/Math.pow(e,C-1)));r=p([]);r.leaf=!1;r.height=C;B=Math.ceil(B/e);e=B*Math.ceil(Math.sqrt(e));var A;for(w(k,d,q,e,this.compareMinX);d<=q;d+=e){var y=Math.min(d+e-1,q);w(k,d,y,B,this.compareMinY);for(A=d;A<=y;A+=B){var v=Math.min(A+B-1,y);r.children.push(this._build(k,
A,v,C-1))}}g(r,this.toBBox);return r},_chooseSubtree:function(k,d,q,C){for(var B,e,r,A,y,v,E,G;;){C.push(d);if(d.leaf||C.length-1===q)break;E=G=Infinity;B=0;for(e=d.children.length;B<e;B++)r=d.children[B],y=t(r),v=(Math.max(r.maxX,k.maxX)-Math.min(r.minX,k.minX))*(Math.max(r.maxY,k.maxY)-Math.min(r.minY,k.minY))-y,v<G?(G=v,E=y<E?y:E,A=r):v===G&&y<E&&(E=y,A=r);d=A||d.children[0]}return d},_insert:function(k,d,q){var C=this.toBBox;q=q?k:C(k);C=[];var B=this._chooseSubtree(q,this.data,d,C);B.children.push(k);
for(m(B,q);0<=d;)if(C[d].children.length>this._maxEntries)this._split(C,d),d--;else break;this._adjustParentBBoxes(q,C,d)},_split:function(k,d){var q=k[d],C=q.children.length,B=this._minEntries;this._chooseSplitAxis(q,B,C);C=this._chooseSplitIndex(q,B,C);C=p(q.children.splice(C,q.children.length-C));C.height=q.height;C.leaf=q.leaf;g(q,this.toBBox);g(C,this.toBBox);d?k[d-1].children.push(C):this._splitRoot(q,C)},_splitRoot:function(k,d){this.data=p([k,d]);this.data.height=k.height+1;this.data.leaf=
!1;g(this.data,this.toBBox)},_chooseSplitIndex:function(k,d,q){var C,B;var e=B=Infinity;for(C=d;C<=q-d;C++){var r=x(k,0,C,this.toBBox);var A=x(k,C,q,this.toBBox);var y=Math.max(0,Math.min(r.maxX,A.maxX)-Math.max(r.minX,A.minX))*Math.max(0,Math.min(r.maxY,A.maxY)-Math.max(r.minY,A.minY));r=t(r)+t(A);if(y<e){e=y;var v=C;B=r<B?r:B}else y===e&&r<B&&(B=r,v=C)}return v},_chooseSplitAxis:function(k,d,q){var C=k.leaf?this.compareMinX:u,B=k.leaf?this.compareMinY:n,e=this._allDistMargin(k,d,q,C);d=this._allDistMargin(k,
d,q,B);e<d&&k.children.sort(C)},_allDistMargin:function(k,d,q,C){k.children.sort(C);C=this.toBBox;var B=x(k,0,d,C),e=x(k,q-d,q,C),r=a(B)+a(e),A;for(A=d;A<q-d;A++){var y=k.children[A];m(B,k.leaf?C(y):y);r+=a(B)}for(A=q-d-1;A>=d;A--)y=k.children[A],m(e,k.leaf?C(y):y),r+=a(e);return r},_adjustParentBBoxes:function(k,d,q){for(;0<=q;q--)m(d[q],k)},_condense:function(k){for(var d=k.length-1,q;0<=d;d--)0===k[d].children.length?0<d?(q=k[d-1].children,q.splice(q.indexOf(k[d]),1)):this.clear():g(k[d],this.toBBox)},
_initFormat:function(k){var d=["return a"," - b",";"];this.compareMinX=new Function("a","b",d.join(k[0]));this.compareMinY=new Function("a","b",d.join(k[1]));this.toBBox=new Function("a","return {minX: a"+k[0]+", minY: a"+k[1]+", maxX: a"+k[2]+", maxY: a"+k[3]+"};")}};b.rbush=l})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(b,f){var l={exports:{}};l.exports;(function(g){(function(x){x=x();void 0!==x&&(g.exports=x)})(function(){function x(n,t,a,c,h){for(;c>
a;){if(600<c-a){var p=c-a+1,w=t-a+1,k=Math.log(p),d=.5*Math.exp(2*k/3);k=.5*Math.sqrt(k*d*(p-d)/p)*(0>w-p/2?-1:1);x(n,t,Math.max(a,Math.floor(t-w*d/p+k)),Math.min(c,Math.floor(t+(p-w)*d/p+k)),h)}p=n[t];w=a;d=c;m(n,a,t);for(0<h(n[c],p)&&m(n,a,c);w<d;){m(n,w,d);w++;for(d--;0>h(n[w],p);)w++;for(;0<h(n[d],p);)d--}0===h(n[a],p)?m(n,a,d):(d++,m(n,d,c));d<=t&&(a=d+1);t<=d&&(c=d-1)}}function m(n,t,a){var c=n[t];n[t]=n[a];n[a]=c}function u(n,t){return n<t?-1:n>t?1:0}return function(n,t,a,c,h){x(n,t,a||0,c||
n.length-1,h||u)}})})(l);f=f.getDefaultExportFromCjs(l.exports);b.quickselect=f})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../rest/support/QuantizationParameters ../../../tiling/TileKey".split(" "),function(b,f,l,g,x,m){class u{constructor(n,t){this.key=new m(0,0,0,0);this.bounds=g.create();this.objectIds=new Set;this.key.set(t);t=n.getLODInfoAt(this.key);
this.tileInfoView=n;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=t.resolution;this.scale=t.scale;this.level=t.level}get id(){return this.key.id}get extent(){return l.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const n=this.key.getChildKeys(),t=f.acquire();for(let a=0;a<n.length;a++)t[a]=new u(this.tileInfoView,
n[a]);return t}getQuantizationParameters(){return x.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}b.Tile=u;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/HighlightOptions":function(){define("../../../chunks/tslib.es6 ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,l,g,x,m,u,n){l=class extends l{constructor(){super(...arguments);this.color=new f([0,255,255]);this.haloOpacity=1;this.fillOpacity=.25}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity}};b.__decorate([g.property({type:f})],l.prototype,"color",void 0);b.__decorate([g.property({type:f})],l.prototype,"haloColor",void 0);b.__decorate([g.property()],l.prototype,"haloOpacity",
void 0);b.__decorate([g.property()],l.prototype,"fillOpacity",void 0);return l=b.__decorate([n.subclass("esri.views.2d.support.HighlightOptions")],l)})},"esri/views/2d/support/hitTestUtils":function(){define(["exports","../../../Graphic","../../../core/arrayUtils","../../../core/iteratorUtils","../../support/screenUtils"],function(b,f,l,g,x){function m(a,c,h,p,w,k){return d=>{if(d instanceof f){if(d.layer===a)k?.();else{var q=a.allLayerViews.find(C=>C.layer===d.layer);q&&w?.(q)}p(n(d))}else"subtype-sublayer"===
d.type?(q=a.allLayerViews.find(C=>C.layer===d.parent))&&h(d,q):(q=a.allLayerViews.find(C=>C.layer===d))&&c(q)}}function u(a,c){if(a)if(g.isIterable(a))for(const h of a)if(g.isIterable(h))for(const p of h)c(p);else c(h);else c(a)}function n(a){const c=a.getObjectId();return c?`${a.layer?.uid??a.sourceLayer?.uid??"MapView"}/${c}`:`"MapView/${a.uid}`}function t({layer:a},c){"subtype-group"===a.type&&a.sublayers.forEach(h=>{c(h)})}b.hitTest=async function(a,c,h){const p=x.isSupportedScreenPointEvent(c)?
x.createScreenPointFromSupportedEvent(a,c):c;if(!a.ready||isNaN(p.x)||isNaN(p.y))return{screenPoint:p,results:[]};let w=new Set;const k=new Set;let d=!1,q=null,C=null;h?.include?u(h.include,m(a,e=>{w.add(e);t(e,r=>k.add(r))},(e,r)=>{k.add(e);w.add(r)},e=>{q||(q=new Set);q.add(e)},e=>w.add(e),()=>d=!0)):(d=!0,w=new Set(a.allLayerViews),w.forEach(e=>{t(e,r=>k.add(r))}));h?.exclude&&u(h.exclude,m(a,e=>{w.delete(e);t(e,r=>k.delete(r))},e=>k.delete(e),e=>{C||(C=new Set);C.add(e)}));c=a.allLayerViews.filter(e=>
!e.suspended&&w.has(e)).reverse();const B=a.toMap(p);a=d?a.graphicsView.hitTest(B).map(e=>({type:"graphic",graphic:e,layer:null,mapPoint:B})):[];c=await Promise.all(c.map(e=>e.hitTest(B,p)).toArray());a=[...a,...c].filter(l.isSome).flat().filter(l.isSome);a=a.filter(e=>"graphic"===e.type&&"subtype-group"===e.layer?.type?k.has(e.graphic.layer):!0);q&&(a=a.filter(e=>!("graphic"in e)||!e.graphic||q?.has(n(e.graphic))));C&&(a=a.filter(e=>!("graphic"in e)||!e.graphic||!C?.has(n(e.graphic))));return{screenPoint:p,
results:a}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/screenshotUtils":function(){define(["exports","../../support/screenshotUtils"],function(b,f){function l(u,n){const t=x(n||{},Math.min(4,f.getMaximumResolutionScale(u.size,Math.min(4096,u.stage.context.parameters.maxTextureSize))),u.size,u.padding),a=g(n,u.allLayerViews);return u.stage.takeScreenshot(t,a,u.backgroundColor,n?.rotation)}function g(u={},n){if(u.layers){var t=[];u.layers.forEach(a=>{const c=
n.find(h=>h.layer.id===a.id);c?.container&&t.push(c.container)});return t}}function x(u,n,t,a){u.ignorePadding&&(a={left:0,right:0,top:0,bottom:0});var c=null;null!=u.width&&null!=u.height?c=[u.width,u.height]:null==u.width&&null!=u.height?c=[u.height,u.height]:null!=u.width&&null==u.height?c=[u.width,u.width]:null==u.width&&null==u.height&&(c=null);var h=t[0]-(a.left+a.right);t=t[1]-(a.top+a.bottom);u=u.area||{x:0,y:0,width:h,height:t};if(c){const p=c[0]/c[1];p>h/t?(h=u.width/p,u={x:u.x,y:Math.round(u.y+
(u.height-h)/2),width:u.width,height:Math.round(h)}):(h=u.height*p,u={x:Math.round(u.x+(u.width-h)/2),y:u.y,width:Math.round(h),height:u.height})}else c=[u.width,u.height];c[0]>u.width?(n=Math.min(c[0]/u.width,n),c=c[0]/u.width/n):(n=1,c=c[0]/u.width);return{cropArea:{x:Math.round((u.x+a.left)*n),y:Math.round((u.y+a.top)*n),width:Math.round(u.width*n),height:Math.round(u.height*n)},outputScale:c,resolutionScale:n}}const m={flipY:!0,premultipliedAlpha:!0};b.createScreenshotRegion=x;b.takeRawScreenshot=
async function(u,n){u=await l(u,n);return f.encodeData(u,m)};b.takeScreenshot=async function(u,n){u=await l(u,n);const {format:t,quality:a}=f.getFormatAndQuality(n?.format,n?.quality);return f.encode(u,{format:t,quality:a,rotation:0,disableDecorations:!1},m)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/screenshotUtils":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/imageUtils"],function(b,f,l,g){function x(d,q){const {format:C,
quality:B,rotation:e,disableDecorations:r}=d||{};var A=a(d,q.padding);var y=q.width-A.left-A.right;q=q.height-A.top-A.bottom;A={x:0,y:0,width:y,height:q};if(d?.area){null!=d.area.x&&(A.x=Math.floor(d.area.x));null!=d.area.y&&(A.y=Math.floor(d.area.y));var v=null!=d.area.width?Math.floor(d.area.width):null,E=null!=d.area.height?Math.floor(d.area.height):null;A.width=y-A.x;A.height=q-A.y;null!=v&&null!=E?(A.width=Math.min(A.width,v),A.height=Math.min(A.height,E)):null==v&&null!=E?(v=Math.min(A.width,
v),A.height*=v/A.width,A.width=v):null!=v&&null==E&&(v=Math.min(A.height,E),A.width*=v/A.height,A.height=v)}A=t(A,d);v=Math.floor(Math.max(A.x,0));E=Math.floor(Math.max(A.y,0));y={x:v,y:E,width:Math.floor(Math.min(A.width,y-v)),height:Math.floor(Math.min(A.height,q-E))};q=y.width/y.height;A=A.width/A.height;A!==q&&(A>q?(q=Math.floor(y.width/A),y={x:y.x,y:Math.floor(y.y+(y.height-q)/2),width:y.width,height:q}):(q=Math.floor(y.height*A),y={x:Math.floor(y.x+(y.width-q)/2),y:y.y,width:q,height:y.height}));
const {width:G,height:O}=n(d,y);q=c(C);A=w[q];A=l.clamp(null!=B?B:A,0,100);return{format:q,quality:A,area:y,width:G,height:O,rotation:e,disableDecorations:!!r,ignoreBackground:!!d?.ignoreBackground,ignorePadding:!!d?.ignorePadding}}function m(d,q){null==h&&(h=document.createElement("canvas"));var C=h;if(q.premultipliedAlpha){var B=d.data;const r=B.length;for(let A=0;A<r;A+=4){var e=B[A+3];255!==e&&0<e&&(e=255/e,B[A]*=e,B[A+1]*=e,B[A+2]*=e)}}C.width=d.width;C.height=d.height;B=C.getContext("2d",{willReadFrequently:!0});
B.putImageData(d,0,0);q.flipY&&(B.save(),B.globalCompositeOperation="copy",B.scale(1,-1),B.translate(0,-B.canvas.height),B.drawImage(B.canvas,0,0),B.restore());return{ctx:B,canvas:C}}function u(d,q){return d.toDataURL(p[q.format],q.quality/100)}function n(d,q){if(!d)return q;const C=d.width;d=d.height;if(null!=C&&null!=d)return{width:Math.floor(C),height:Math.floor(d)};if(null==C&&null==d)return q;q=q.width/q.height;return null==d?{width:Math.floor(C),height:Math.floor(C/q)}:{width:Math.floor(d*q),
height:Math.floor(d)}}function t(d,q){if(null==q?.width||null==q.height)return d;q=q.width/q.height;const C=d.width/d.height;if(C===q)return d;if(C<q)return q=Math.floor(d.height*q),d.x-=(q-d.width)/2,d.width=q,d;q=Math.floor(d.width/q);d.y-=(q-d.height)/2;d.height=q;return d}function a(d,q){return!q||d&&d.ignorePadding?k:q}function c(d){switch(d){case "png":case "jpg":case "jpeg":return d;case null:case void 0:return"png";default:return"png"}}let h=null;const p={png:"image/png",jpg:"image/jpeg",
jpeg:"image/jpeg"},w={png:100,jpg:98,jpeg:98},k={top:0,right:0,bottom:0,left:0};b.createEmptyImageData=g.createEmptyImageData;b.completeUserSettings=x;b.encode=function(d,q,C){const {ctx:B,canvas:e}=m(d,C);d=B.getImageData(0,0,d.width,d.height);q=u(e,q);e.width=0;e.height=0;return{dataUrl:q,data:d}};b.encodeData=function(d,q){const {ctx:C,canvas:B}=m(d,q);d=C.getImageData(0,0,d.width,d.height);B.width=0;B.height=0;return d};b.getFormatAndQuality=function(d,q){d=c(d);const C=w[d];q=l.clamp(null!=q?
q:C,0,100);return{format:d,quality:q}};b.getMaximumResolutionScale=function(d,q){return q/Math.max(d[0],d[1])};b.resampleHermite=function(d,q,C,B=0,e=0,r=d.width-B,A=d.height-e,y=!1){const {data:v}=d,{width:E,height:G,data:O}=q;r/=E;A/=G;const Q=Math.ceil(r/2),W=Math.ceil(A/2);d=d.width;for(let ba=0;ba<G;ba++)for(let fa=0;fa<E;fa++){const z=4*(fa+(y?G-ba-1:ba)*E);let D=0,K=0,V=0,H=0,I=0,L=0;const R=(ba+.5)*A;for(let X=Math.floor(ba*A);X<(ba+1)*A;X++){var aa=Math.abs(R-(X+.5))/W;const Z=(fa+.5)*r;
aa*=aa;for(let F=Math.floor(fa*r);F<(fa+1)*r;F++){var S=Math.abs(Z-(F+.5))/Q;S=Math.sqrt(aa+S*S);if(1<=S)continue;S=2*S*S*S-3*S*S+1;const J=4*(B+F+(e+X)*d);L+=S*v[J+3];K+=S;!C&&255>v[J+3]&&(S=S*v[J+3]/255);V+=S*v[J];H+=S*v[J+1];I+=S*v[J+2];D+=S}}O[z]=V/D;O[z+1]=H/D;O[z+2]=I/D;O[z+3]=L/K}return q};b.screenshotSuperSampleSettings=function(d,q,C){if(!q)return d;const {framebufferWidth:B,framebufferHeight:e,pixelRatio:r,region:A}=d;q=a(d,C);C=q.left+q.right;const y=q.top+q.bottom,v=B-C,E=e-y,G=Math.min(8,
Math.min((2048-C)/v,(2048-y)/E));return 1.5>G?d:{...d,framebufferWidth:Math.round(v*G)+C,framebufferHeight:Math.round(E*G)+y,pixelRatio:r*G,resample:{region:{x:Math.round((A.x-q.left)*G)+q.left,y:Math.round((A.y-q.top)*G)+q.top,width:Math.round(A.width*G),height:Math.round(A.height*G)},width:B,height:e}}};b.toDataUrl=u;b.toRenderSettings=function(d,q){const C=x(d,q),B=C.area,e=C.width/B.width,r=a(C,q.padding),A=r.left+r.right,y=r.top+r.bottom;return{framebufferWidth:Math.floor((q.width-A)*e+A),framebufferHeight:Math.floor((q.height-
y)*e+y),region:{x:Math.floor(B.x*e)+r.left,y:Math.floor(B.y*e)+r.top,width:C.width,height:C.height},format:C.format,quality:C.quality,rotation:C.rotation,pixelRatio:e,layers:d?.layers??[],disableDecorations:C.disableDecorations,ignoreBackground:C.ignoreBackground,ignorePadding:C.ignorePadding,objectAndLayerIdColor:!1}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/imageUtils":function(){define("require exports ../request ./Error ./promiseUtils ./urlUtils ../support/base64Utils".split(" "),
function(b,f,l,g,x,m,u){function n(p,w,k){k||(c||(c=document.createElement("canvas"),c.width=1,c.height=1),k=c);return k.getContext("2d").createImageData(p,w)}async function t(p,w){p=window.URL.createObjectURL(p);try{const {data:k}=await l(p,{...w,responseType:"image"});return k}catch(k){if(!x.isAbortError(k))throw new g("invalid-image",`Could not fetch requested image at ${p}`);throw k;}finally{window.URL.revokeObjectURL(p)}}async function a(p,w){const k=m.dataComponents(p);if(k?.isBase64)return{arrayBuffer:u.base64ToArrayBuffer(k.data),
mediaType:k.mediaType};w=await l(p,{responseType:"array-buffer",...w});p=w.data;w=w.getHeader("Content-Type");return{arrayBuffer:p,mediaType:w}}let c=null,h=!0;f.createEmptyImageData=function(p,w,k){if(!p||!w)throw Error("Cannot construct image data without dimensions");if(h)try{return new ImageData(p,w)}catch(d){h=!1}return n(p,w,k)};f.getImageData=async function(p,w){const {arrayBuffer:k,mediaType:d}=await a(p,w);p="image/png"===d;if("image/gif"===d){const {isAnimatedGIF:q,parseGif:C}=await new Promise((B,
e)=>b(["./image/gif"],B,e));if(q(k))return C(k,w)}if(p){const {isAnimatedPNG:q,parseApng:C}=await new Promise((B,e)=>b(["./image/apng"],B,e));if(q(k))return C(k,w)}p=new Blob([k],{type:d});return t(p,w)};f.wrapImageData=function(p,w,k,d){if(!w||!k)throw Error("Cannot construct image data without dimensions");if(h)try{return new ImageData(p,w,k)}catch(q){h=!1}w=n(w,k,d);w.data.set(p,0);return w};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/StationaryManager":function(){define("exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,l,g,x,m,u,n){b.StationaryManager=class extends l{constructor(){super(...arguments);this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now();null==this._timer&&(this._timer=setInterval(()=>{160<=performance.now()-this._timestamp&&this.clear()},160))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};f.__decorate([g.property()],b.StationaryManager.prototype,"_timer",void 0);f.__decorate([g.property()],b.StationaryManager.prototype,
"stationary",null);b.StationaryManager=f.__decorate([n.subclass("esri.views.2d.support.StationaryManager")],b.StationaryManager);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/Timeline":function(){define(["exports"],function(b){class f{constructor(){this._names=new Map}begin(l){this._names.has(l)||(this._names.set(l,!1),l.includes("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${l}.Start`))}end(l){this._names.has(l)&&!this._names.get(l)&&(this._names.set(l,
!0),performance.mark(`Esri.${l}.End`))}record(l){this._names.has(l)||(this._names.set(l,!0),performance.mark(`Esri.${l}`))}}b.Timeline=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/WebGLRequirements":function(){define(["exports","../../core/Error","../webgl/capabilities","../webgl/contextUtils"],function(b,f,l,g){b.check=function(x){const m=l.getWebGLCapabilities(x);if(!m.available)return"3d"===x?new f("webgl:required","WebGL2 is required but not supported.",
Error().stack):new f("webgl:required","WebGL is required but not supported.",Error().stack);if("3d"===x&&m.majorPerformanceCaveat)return new f("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!m.supportsHighPrecisionFragment)return new f("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");
if(!m.supportsVertexShaderSamplers)return new f("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(m.type===g.ContextType.WEBGL1){if(!m.supportsElementIndexUint)return new f("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!m.supportsStandardDerivatives)return new f("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");
if(!m.supportsInstancedArrays)return new f("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/capabilities":function(){define(["exports","./contextUtils"],function(b,f){function l(h){switch(h){case f.ContextType.WEBGL1:return g();case f.ContextType.WEBGL2:return x()}}function g(){if(!u){{const h=new a,p=m(f.ContextType.WEBGL1,h);null!=p&&(h.supportsElementIndexUint=
null!==p.getExtension("OES_element_index_uint"),h.supportsStandardDerivatives=null!==p.getExtension("OES_standard_derivatives"),h.supportsInstancedArrays=null!==p.getExtension("ANGLE_instanced_arrays"),h.supportsTextureFloat=null!==p.getExtension("OES_texture_float"),h.supportsTextureHalfFloat=null!==p.getExtension("OES_texture_half_float"),h.supportsColorBufferFloat=null!==p.getExtension("WEBGL_color_buffer_float"),h.supportsColorBufferFloatBlend=null!==p.getExtension("EXT_float_blend"),h.supportsColorBufferHalfFloat=
null!==p.getExtension("EXT_color_buffer_half_float"));u=h}}return u}function x(){if(!n){{const h=new c,p=m(f.ContextType.WEBGL2,h);null!=p&&(h.supportsColorBufferFloat=null!==p.getExtension("EXT_color_buffer_float"),h.supportsColorBufferFloatBlend=null!==p.getExtension("EXT_float_blend"),h.supportsColorBufferHalfFloat=h.supportsColorBufferFloat||null!==p.getExtension("EXT_color_buffer_half_float"));n=h}}return n}function m(h,p){if(h===f.ContextType.WEBGL1&&"undefined"===typeof WebGLRenderingContext||
h===f.ContextType.WEBGL2&&"undefined"===typeof WebGL2RenderingContext)return null;const w=document.createElement("canvas");if(!w)return null;let k=f.createContext(w,h,{failIfMajorPerformanceCaveat:!0});null==k&&(k=f.createContext(w,h),null!=k&&(p.majorPerformanceCaveat=!0));if(null==k)return k;if(h===f.ContextType.WEBGL1){if(h=k.getParameter(k.VERSION)?.match(/^WebGL\s+([\d.]*)/))h=parseFloat(h[1]),p.available=.94<=h}else p.available=!0;p.maxTextureSize=k.getParameter(k.MAX_TEXTURE_SIZE);p.supportsVertexShaderSamplers=
0<k.getParameter(k.MAX_VERTEX_TEXTURE_IMAGE_UNITS);if(h=k.getShaderPrecisionFormat(k.FRAGMENT_SHADER,k.HIGH_FLOAT))p.supportsHighPrecisionFragment=0<h.precision;return k}let u,n;class t{constructor(){this.majorPerformanceCaveat=this.available=!1;this.maxTextureSize=0;this.supportsColorBufferHalfFloat=this.supportsColorBufferFloatBlend=this.supportsColorBufferFloat=this.supportsTextureHalfFloat=this.supportsTextureFloat=this.supportsInstancedArrays=this.supportsStandardDerivatives=this.supportsElementIndexUint=
this.supportsHighPrecisionFragment=this.supportsVertexShaderSamplers=!1}}class a extends t{constructor(){super(...arguments);this.type=f.ContextType.WEBGL1}}class c extends t{constructor(){super(...arguments);this.type=f.ContextType.WEBGL2;this.supportsTextureHalfFloat=this.supportsTextureFloat=this.supportsInstancedArrays=this.supportsStandardDerivatives=this.supportsElementIndexUint=!0}}b.getWebGL1Capabilities=g;b.getWebGL2Capabilities=x;b.getWebGLCapabilities=function(h){for(h=f.getContextTypes(h);1<
h.length;){const p=l(h.shift());if(p.available)return p}return l(h.shift())};b.getWebGLVersionCapabilities=l;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/contextUtils":function(){define(["exports","../../core/has"],function(b,f){function l(x,m,u={}){return(x=x.getContext(m===b.ContextType.WEBGL1?"webgl":"webgl2",u))?x:null}function g(x){if("3d"===x)return[b.ContextType.WEBGL2];x=f("esri-force-webgl");return x===b.ContextType.WEBGL1||x===b.ContextType.WEBGL2?[x]:
f("mac")&&f("chrome")?[b.ContextType.WEBGL1,b.ContextType.WEBGL2]:[b.ContextType.WEBGL2,b.ContextType.WEBGL1]}b.ContextType=void 0;(function(x){x[x.WEBGL1=1]="WEBGL1";x[x.WEBGL2=2]="WEBGL2"})(b.ContextType||(b.ContextType={}));b.createContext=l;b.createContextForView=function(x,m,u={}){x=g(x);for(const n of x)if(x=l(m,n,u))return x;return null};b.getContextTypes=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/ui/DefaultUI":function(){define("../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(b,f,l,g,x,m,u,n,t,a,c,h,p,w){f=class extends a{constructor(k){super(k);this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"};this.components=[];this._updateViewAwareWidgets=d=>{this.components.forEach(q=>{q=this._find(q)?.widget;void 0!==q?.view&&(q.view=d)})};this._componentsWatcher=(d,q)=>{this._removeComponents(q);this._addComponents(d);this._adjustPadding(d)}}initialize(){this.addHandles([g.watch(()=>this.components,this._componentsWatcher,
g.initial),g.watch(()=>this.view,this._updateViewAwareWidgets,g.initial)])}_add(k,d,q,C,B){let e=k;if("string"===typeof k&&this._defaultPositionLookup[k]){if(this._find(k))return;e=this._createComponent(k)}super._add(e,d,q,C,B)}_removeComponents(k){k.forEach(d=>{if(d=this._find(d))this.remove(d),d.destroy()})}_adjustPadding(k){k.includes("attribution")||this._isOverridden("padding")||({top:k}=this.padding,this.padding=k)}_addComponents(k){this.constructed&&k.forEach(d=>this.add(this._createComponent(d),
this._defaultPositionLookup[d]))}_createComponent(k){const d=this._createWidget(k);return new t({id:k,node:d})}_createWidget(k){const {view:d}=this;switch(k){case "attribution":return new c({view:d});case "compass":return new h({view:d});case "navigation-toggle":return new p({view:d});case "zoom":return new w({view:d})}}};b.__decorate([x.property()],f.prototype,"components",void 0);return f=b.__decorate([n.subclass("esri.views.ui.DefaultUI")],f)})},"esri/views/ui/Component":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,l,g,x,m,u,n){f=class extends f{constructor(){super(...arguments);this.widget=null}destroy(){this.node=null;this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(t){this._set("id",t)}set node(t){const a=this._get("node");t!==a&&(t&&t.classList.add("esri-component"),a&&a.classList.remove("esri-component"),this._set("node",t))}castNode(t){this.widget?.destroy();if(!t)return this._set("widget",null),null;if("string"===typeof t||t&&"nodeType"in t)return this._set("widget",
null),l.byId(t);t&&"function"===typeof t.render&&!t.domNode&&(t.domNode=document.createElement("div"));this._set("widget",t);return t.domNode}};b.__decorate([g.property()],f.prototype,"id",null);b.__decorate([g.property()],f.prototype,"node",null);b.__decorate([x.cast("node")],f.prototype,"castNode",null);b.__decorate([g.property({readOnly:!0})],f.prototype,"widget",void 0);return f=b.__decorate([n.subclass("esri.views.ui.Component")],f)})},"esri/views/ui/UI":function(){define("../../chunks/tslib.es6 ../../intl ../../core/arrayUtils ../../core/domUtils ../../core/Evented ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/has ../../core/accessorSupport/decorators/subclass ../../support/themeUtils ./Component ../../widgets/support/widgetUtils ../../intl/locale".split(" "),
function(b,f,l,g,x,m,u,n,t,a,c,h,p,w){function k(e){return 0===e?"0":`${e}px`}function d(e){const r="object"===typeof e&&null!==e&&Object.getPrototypeOf(e);return null!==r&&r!==Object.prototype||!("component"in e||"index"in e||"position"in e)?null:e}function q(e,{top:r,bottom:A,left:y,right:v}){e.style.top=r;e.style.bottom=A;e.style.left=y;e.style.right=v}const C={left:0,top:0,bottom:0,right:0},B={bottom:30,top:15,right:15,left:15};f=class extends x.EventedAccessor{constructor(e){super(e);this._cornerNameToContainerLookup=
{};this._positionNameToContainerLookup={};this._components=[];this._componentMap=new Map;this._locale=w.getLocale();this.view=null;this._applyViewPadding=()=>{const r=this.container;r&&q(r,this._toPixelPosition(this._getViewPadding()))};this._applyUIPadding=()=>{const r=this._innerContainer;r&&q(r,this._toPixelPosition(this.padding))};this._initContainers()}initialize(){this.addHandles([m.watch(()=>[this.view?.padding,this.container],this._applyViewPadding,m.initial),m.watch(()=>this.padding,this._applyUIPadding,
m.initial),m.watch(()=>[this.container,this._locale],([e,r])=>{e&&e.setAttribute("lang",r)},m.initial),w.onLocaleChange(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0;this._componentMap.clear()}set container(e){const r=this._get("container");e!==r&&(e&&(e.classList.add("esri-ui"),c.setCalciteThemeClass(e),this._attachContainers(e)),r&&(r.classList.remove("esri-ui"),q(r,{top:"",bottom:"",left:"",right:""}),g.empty(r)),this._set("container",
e))}get height(){const e=this.view?.height??0;if(0===e)return e;const r=this._getViewPadding(),{top:A,bottom:y}=r;return Math.max(e-A-y,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return"number"===typeof e?{bottom:e,top:e,right:e,left:e}:{...B,...e}}get width(){const e=this.view?.width??0;if(0===e)return e;const r=this._getViewPadding(),{left:A,right:y}=r;return Math.max(e-A-y,0)}add(e,r){let A,y,v;if(Array.isArray(e))e.forEach(G=>this.add(G,
r));else{var E=d(e);E&&({index:A,position:r,component:e,key:y}=E);r&&"object"===typeof r&&({index:A,key:y,position:r,internal:v}=r);!e||r&&!this._isValidPosition(r)||this._add(e,r,A,y,v)}}remove(e,r){if(e){if(Array.isArray(e))return e.map(y=>this.remove(y,r));if((e=this._find(e))&&(!this._componentMap.has(e)||this._componentMap.get(e)?.key===r)){var A=this._components.indexOf(e);e.node.parentNode?.removeChild(e.node);this._componentMap.delete(e);return this._components.splice(A,1)[0]}}}empty(e,r=
{removeInternal:!1}){if(Array.isArray(e))for(const A of e)this.empty(A,r);else{e=Array.prototype.slice.call(this._positionNameToContainerLookup[e??"manual"].children).map(A=>this._findByNode(A)).filter(A=>null==A?!1:!(this._componentMap.get(A)?.internal??!1)||r.removeInternal);for(const A of e)this.remove(A)}}move(e,r){Array.isArray(e)&&e.forEach(v=>this.move(v,r));if(e){var A=d(e)||d(r);if(A){var y=A.index;r=A.position;e=A.component||e}(!r||this._isValidPosition(r))&&(e=this.remove(e))&&this.add(e,
{position:r,index:y})}}find(e){return e?(e=this._findById(e))&&(e.widget||e.node):null}getComponents(e,r={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(A=>this._getComponentsAtPosition(A,r)):this._getComponentsAtPosition(e,r):this._components.filter(A=>r.includeInternal||!(this._componentMap.get(A)?.internal??!1)).map(({widget:A,node:y})=>A??y)}getPosition(e){for(const r in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[r].contains(e))return r;return null}_add(e,
r,A,y,v){e instanceof h||(e=new h({node:e}));this._place({component:e,position:r,index:A});this._components.push(e);this._componentMap.set(e,{key:y,internal:v})}_find(e){return e?e instanceof h?this._findByComponent(e):"string"===typeof e?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.view?.padding??C}_attachContainers(e){e.appendChild(this._innerContainer);e.appendChild(this._manualContainer)}_initContainers(){var e=document.createElement("div");e.classList.add("esri-ui-inner-container",
"esri-ui-corner-container");const r=document.createElement("div");r.classList.add("esri-ui-inner-container","esri-ui-manual-container");const A=document.createElement("div");A.classList.add("esri-ui-top-left","esri-ui-corner");e.appendChild(A);const y=document.createElement("div");y.classList.add("esri-ui-top-right","esri-ui-corner");e.appendChild(y);const v=document.createElement("div");v.classList.add("esri-ui-bottom-left","esri-ui-corner");e.appendChild(v);const E=document.createElement("div");
E.classList.add("esri-ui-bottom-right","esri-ui-corner");e.appendChild(E);this._innerContainer=e;this._manualContainer=r;e=p.isRTL();this._cornerNameToContainerLookup={"top-left":A,"top-right":y,"bottom-left":v,"bottom-right":E,"top-leading":e?y:A,"top-trailing":e?A:y,"bottom-leading":e?E:v,"bottom-trailing":e?v:E};this._positionNameToContainerLookup={manual:r,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){var r=e.position??"manual";
const {component:A,index:y}=e;e=this._positionNameToContainerLookup[r];r=null!=y&&-1<y;var v=A.widget;v&&!v._started&&"function"===typeof v.postMixInProperties&&"function"===typeof v.buildRendering&&"function"===typeof v.postCreate&&"function"===typeof v.startup&&A.widget.startup();r?(r=Array.from(e.children),0===y?e.firstChild?g.insertBefore(A.node,e.firstChild):e.appendChild(A.node):y>=r.length?e.appendChild(A.node):g.insertBefore(A.node,r[y])):e.appendChild(A.node)}_toPixelPosition(e){return{top:k(e.top),
left:k(e.left),right:k(e.right),bottom:k(e.bottom)}}_findByComponent(e){return this._components.find(r=>r===e)??null}_findById(e){return this._components.find(({id:r})=>r===e)??null}_findByNode(e){return this._components.find(({node:r})=>r===e)??null}_getComponentsAtPosition(e,r){return Array.prototype.slice.call(this._positionNameToContainerLookup[e].children).map(A=>this._findByNode(A)).filter(l.isSome).filter(A=>r.includeInternal||!(this._componentMap.get(A)?.internal??!1)).map(({widget:A,node:y})=>
A??y)}};b.__decorate([u.property()],f.prototype,"_locale",void 0);b.__decorate([u.property()],f.prototype,"container",null);b.__decorate([u.property()],f.prototype,"height",null);b.__decorate([u.property({value:B})],f.prototype,"padding",null);b.__decorate([n.cast("padding")],f.prototype,"castPadding",null);b.__decorate([u.property()],f.prototype,"view",void 0);b.__decorate([u.property()],f.prototype,"width",null);return f=b.__decorate([a.subclass("esri.views.ui.UI")],f)})},"esri/widgets/Attribution":function(){define("../chunks/tslib.es6 ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./Attribution/AttributionViewModel ./support/globalCss ./support/legacyIcon ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(b,f,l,g,x,m,u,n,t,a,c,h,p,w,k){var d=c.legacyIcon.description;g=class extends n{constructor(q,C){super(q,C);this._attributionTextOverflowed=this._isOpen=!1;this._prevSourceNodeHeight=0;this._resizeObserver=new ResizeObserver(B=>B.forEach(({target:e})=>this._checkSourceTextOverflow(e)));this.iconClass=d;this.icon=null;this.itemDelimiter=" | ";this.messages=null;this.viewModel=new t}initialize(){this.addHandles(f.on(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||
this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((q,C)=>{q.includes(C.text)||q.push(C.text);return q},[]).join(this.itemDelimiter)}get label(){return this.messages?.widgetLabel??""}set label(q){this._overrideIfSome("label",q)}get view(){return this.viewModel.view}set view(q){this.viewModel.view=q}render(){return w.tsx("div",{bind:this,class:this.classes("esri-attribution",a.globalCss.widget,{["esri-attribution--open"]:this._isOpen}),dir:"ltr",onclick:this._toggleState,
onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return w.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",w.tsx("a",{class:"esri-attribution__link",href:"http://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const q=this._isOpen,C=this._isInteractive,B=C?0:void 0,{attributionText:e}=this;return w.tsx("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes("esri-attribution__sources",
{["esri-attribution__sources--open"]:q,[a.globalCss.interactive]:C}),innerHTML:e,tabIndex:B})}_afterSourcesNodeCreate(q){this._prevSourceNodeHeight=q.clientWidth;this._resizeObserver.observe(q)}_checkSourceTextOverflow(q){let C=!1;const {clientHeight:B,clientWidth:e,scrollWidth:r}=q;q=r>e;const A=this._attributionTextOverflowed!==q;this._attributionTextOverflowed=q;A&&(C=!0);this._isOpen&&(q=B<this._prevSourceNodeHeight,this._prevSourceNodeHeight=B,q&&(this._isOpen=!1,C=!0));C&&this.scheduleRender()}_toggleState(){this._isInteractive&&
(this._isOpen=!this._isOpen)}};b.__decorate([l.property()],g.prototype,"_isOpen",void 0);b.__decorate([l.property()],g.prototype,"_isInteractive",null);b.__decorate([l.property()],g.prototype,"_attributionTextOverflowed",void 0);b.__decorate([l.property()],g.prototype,"_prevSourceNodeHeight",void 0);b.__decorate([l.property({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],g.prototype,"attributionText",null);b.__decorate([l.property()],g.prototype,"iconClass",void 0);b.__decorate([l.property()],
g.prototype,"icon",void 0);b.__decorate([l.property()],g.prototype,"itemDelimiter",void 0);b.__decorate([l.property()],g.prototype,"label",null);b.__decorate([l.property(),p.messageBundle("esri/widgets/Attribution/t9n/Attribution")],g.prototype,"messages",void 0);b.__decorate([l.property()],g.prototype,"view",null);b.__decorate([l.property({type:t})],g.prototype,"viewModel",void 0);b.__decorate([h.accessibleHandler()],g.prototype,"_toggleState",null);return g=b.__decorate([u.subclass("esri.widgets.Attribution")],
g)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/asyncUtils ../../core/Collection ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),function(b,
f,l,g,x,m,u,n,t,a,c,h,p,w){function k(B,e){return B&&"copyright"in B&&(!e||"function"===typeof B.originOf&&"user"===B.originOf("copyright"))}function d(B,e){return B.length!==e.length||B.some((r,A)=>r.text!==e[A].text)}function q(B,e,r){r&&e&&(B.find(A=>A.layerView===e&&A.text===r)||B.push({text:r,layerView:e}))}const C=[];f=class extends f{constructor(B){super(B);this._clear=()=>{this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.removeHandles("suspension");this.notifyChange("state")};
this._pendingAttributions=new Set;this._fetchedAttributionData=new Map;this.items=new g;this.view=null;this._allLayerViewsChange=e=>{this.removeHandles("suspension");const r=this.view?.allLayerViews;r&&this.addHandles(r.map(A=>x.watch(()=>[A.suspended,A.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension");e?.removed&&e.removed.forEach(A=>{this._pendingAttributions.delete(A);this._fetchedAttributionData.delete(A)});this._updateAttributionItems()};this.addHandles([x.on(()=>
this.view?.allLayerViews,"change",e=>this._allLayerViewsChange(e),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),x.when(()=>!0===this.view?.stationary,()=>this._updateAttributionItems())])}destroy(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.items.removeAll()}get state(){return this.view?.ready?0<this._pendingAttributions.size?"loading":"ready":"disabled"}_updateAttributionItems(){const B=this.view,e=B?.allLayerViews;C.length=
0;B&&e?(e.forEach(r=>{if(!r.suspended&&r.layer?.attributionVisible){var A=r.layer;if(k(A,"user"))q(C,r,A.copyright);else if(A.hasAttributionData)if(this._fetchedAttributionData.has(r)){var y=this._fetchedAttributionData.get(r);y?q(C,r,this._getDynamicAttribution(y,B,A)):k(A)&&q(C,r,A.copyright)}else this._fetchAttributionData(r);else(y="portalItem"in A?A.portalItem?.accessInformation:void 0)?q(C,r,y):q(C,r,A.copyright)}}),d(this.items,C)&&(this.items.removeAll(),this.items.addMany(C)),C.length=0,
this.notifyChange("state")):this._clear()}async _fetchAttributionData(B){if(!this._pendingAttributions.has(B)){this._pendingAttributions.add(B);var e=await l.result(B.layer.fetchAttributionData());this._pendingAttributions.has(B)&&(e=e.ok?this._createContributionIndex(e.value,"bing-maps"===B.layer.type):null,this._pendingAttributions.delete(B),this._fetchedAttributionData.set(B,e));this._updateAttributionItems()}}_createContributionIndex(B,e){B=B.contributors;const r={};if(!B)return r;for(let G=0;G<
B.length;G++){const O=B[G];var A=O.coverageAreas;if(!A)return;for(const Q of A){var y=Q.bbox,v=Q.zoomMin-(e&&Q.zoomMin?1:0);A=Q.zoomMax-(e&&Q.zoomMax?1:0);y=new c({xmin:y[1],ymin:y[0],xmax:y[3],ymax:y[2],spatialReference:h.WGS84});for(y={extent:w.geographicToWebMercator(y),attribution:O.attribution||"",score:null!=Q.score?Q.score:100,id:G};v<=A;v++){var E;r[E=v]??(r[E]=[]);r[v].push(y)}}}r.maxKey=Math.max.apply(null,Object.keys(r));return r}_getDynamicAttribution(B,e,r){const {extent:A,scale:y}=e;
r=r.tileInfo?.scaleToZoom(y)??0;r=Math.min(B.maxKey??0,Math.round(r));if(!A||null==r||-1>=r)return"";B=B[r];const v=w.project(A.center.clone().normalize(),e.spatialReference),E=new Set;return B?B.filter(G=>{const O=G.id;(G=!E.has(O)&&v&&G.extent&&p.extentContainsPoint(G.extent,v))&&E.add(O);return G}).sort((G,O)=>O.score-G.score||G.objectId-O.objectId).map(G=>G.attribution).join(", "):""}};b.__decorate([m.property({readOnly:!0,type:g})],f.prototype,"items",void 0);b.__decorate([m.property({readOnly:!0})],
f.prototype,"state",null);b.__decorate([m.property()],f.prototype,"view",void 0);return f=b.__decorate([a.subclass("esri.widgets.Attribution.AttributionViewModel")],f)})},"esri/widgets/support/globalCss":function(){define(["exports"],function(b){b.globalCss={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",
buttonThird:"esri-button--third",disabled:"esri-disabled",disabledElement:"esri-disabled-element",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",
menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",noBookmarksIcon:"esri-widget__no-bookmark-icon",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",
widgetDisabled:"esri-widget--disabled"};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Compass":function(){define("require ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./Compass/CompassViewModel ./Compass/css ./support/componentsUtils ./support/globalCss ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(b,f,l,g,x,m,u,n,t,a,c,h,p,w,k){g=class extends n{constructor(d,q){super(d,q);this.iconClass=a.css.widgetIcon;this.messages=this.icon=null;this.viewModel=new t;this._reset=()=>{this.viewModel.reset()};this._toRotationTransform=C=>({transform:`rotateZ(${C.z}deg)`})}loadDependencies(){return c.loadCalciteComponents({button:()=>new Promise((d,q)=>b(["../chunks/calcite-button"],d,q)),icon:()=>new Promise((d,q)=>b(["../chunks/calcite-icon"],d,q))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(d){this.viewModel.goToOverride=
d}get label(){return this.messages?.widgetLabel??""}set label(d){this._overrideIfSome("label",d)}get view(){return this.viewModel.view}set view(d){this.viewModel.view=d}reset(){return this.viewModel.reset()}render(){const {orientation:d,state:q}=this.viewModel,C="rotation"===q?"arrow-up":"compass-needle",{messages:B}=this;return k.tsx("div",{class:this.classes(a.css.base,h.globalCss.widget)},k.tsx("calcite-button",{"aria-label":B.reset,class:h.globalCss.widgetButton,disabled:"disabled"===q,kind:"neutral",
onclick:this._reset,round:!0,scale:"s",title:B.reset},k.tsx("div",{"aria-hidden":"true",class:a.css.iconContainer,title:B.reset},k.tsx("calcite-icon",{icon:C,scale:"m",styles:this._toRotationTransform(d)}))))}};f.__decorate([l.property()],g.prototype,"goToOverride",null);f.__decorate([l.property()],g.prototype,"iconClass",void 0);f.__decorate([l.property()],g.prototype,"icon",void 0);f.__decorate([l.property()],g.prototype,"label",null);f.__decorate([l.property(),w.messageBundle("esri/widgets/Compass/t9n/Compass")],
g.prototype,"messages",void 0);f.__decorate([l.property()],g.prototype,"view",null);f.__decorate([l.property({type:t})],g.prototype,"viewModel",void 0);return g=f.__decorate([u.subclass("esri.widgets.Compass")],g)})},"esri/widgets/Compass/CompassViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./utils ../support/GoTo".split(" "),
function(b,f,l,g,x,m,u,n,t,a){f=class extends a.GoToMixin(f){constructor(c){super(c);this.orientation={x:0,y:0,z:0};this.view=null;this._updateForCamera=this._updateForCamera.bind(this);this._updateForRotation=this._updateForRotation.bind(this);this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(l.watch(()=>this.view,this._updateRotationWatcher,l.initial))}destroy(){this.view=null}get canShowNorth(){return t.canShowNorth(this.view)}get state(){return!this.view?.ready||
"2d"===this.view.type&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){if(this.view?.ready){var c={};"2d"===this.view?.type?c.rotation=0:c.heading=0;this.callGoTo({target:c})}}_updateForRotation(c){void 0!==c&&null!==c&&(this.orientation={z:c})}_updateForCamera(c){c&&(this.orientation={x:0,y:0,z:-c.heading})}_updateRotationWatcher(c){this.removeAllHandles();c&&this.addHandles("2d"===c.type?l.watch(()=>c?.rotation,this._updateForRotation,l.initial):
l.watch(()=>c?.camera,this._updateForCamera,l.initial))}};b.__decorate([g.property({readOnly:!0})],f.prototype,"canShowNorth",null);b.__decorate([g.property()],f.prototype,"orientation",void 0);b.__decorate([g.property({readOnly:!0})],f.prototype,"state",null);b.__decorate([g.property()],f.prototype,"view",void 0);return f=b.__decorate([n.subclass("esri.widgets.CompassViewModel")],f)})},"esri/widgets/Compass/utils":function(){define(["exports"],function(b){b.canShowNorth=function(f){return f?.spatialReference?.isWebMercator||
f?.spatialReference?.isGeographic||!1};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(b,f,l,g,x,m,u,n){b.GoToMixin=t=>{t=class extends t{constructor(...a){super(...a);this.view=this.goToOverride=null}callGoTo(a){const {view:c}=
this;l.assertIsSome(c);return this.goToOverride?this.goToOverride(c,a):c.goTo(a.target,a.options)}};f.__decorate([g.property()],t.prototype,"goToOverride",void 0);f.__decorate([g.property()],t.prototype,"view",void 0);return t=f.__decorate([n.subclass("esri.widgets.support.GoTo")],t)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Compass/css":function(){define(["exports","../support/legacyIcon"],function(b,f){b.css={base:"esri-compass",widgetIcon:f.legacyIcon.locateCircled,
iconContainer:"esri-compass__icon-container"};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/NavigationToggle":function(){define("../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./NavigationToggle/css ./NavigationToggle/NavigationToggleViewModel ./support/globalCss ./support/legacyIcon ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(b,f,l,g,x,m,u,n,t,a,c,h,p,w,k){l=class extends u{constructor(d,q){super(d,q);this.iconClass=n.css.widgetIcon;this.messages=this.icon=null;this.viewModel=new t}get label(){return this.messages?.widgetLabel??""}set label(d){this._overrideIfSome("label",d)}set layout(d){"horizontal"!==d&&(d="vertical");this._set("layout",d)}get view(){return this.viewModel.view}set view(d){this.viewModel.view=d}toggle(){return this.viewModel.toggle()}render(){const d="disabled"===this.viewModel?.state;var q=
"pan"===this.viewModel?.navigationMode;const C={[n.css.activeButton]:q};q={[n.css.activeButton]:!q};const B=d?-1:0,e=this.messages.toggle;return w.tsx("div",{"aria-label":e,bind:this,class:this.classes(n.css.base,a.globalCss.widget,{[a.globalCss.disabled]:d,[n.css.isLayoutHorizontal]:"horizontal"===this.layout}),onclick:this._toggle,onkeydown:this._toggle,tabIndex:B,title:e},w.tsx("div",{class:this.classes(n.css.button,a.globalCss.widgetButton,n.css.panButton,C)},w.tsx("span",{class:c.legacyIcon.pan})),
w.tsx("div",{class:this.classes(n.css.button,a.globalCss.widgetButton,n.css.rotateButton,q)},w.tsx("span",{class:c.legacyIcon.rotate})))}_toggle(){this.toggle()}};b.__decorate([f.property()],l.prototype,"iconClass",void 0);b.__decorate([f.property()],l.prototype,"icon",void 0);b.__decorate([f.property()],l.prototype,"label",null);b.__decorate([f.property({value:"vertical"})],l.prototype,"layout",null);b.__decorate([f.property(),p.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],
l.prototype,"messages",void 0);b.__decorate([f.property()],l.prototype,"view",null);b.__decorate([f.property({type:t})],l.prototype,"viewModel",void 0);b.__decorate([h.accessibleHandler()],l.prototype,"_toggle",null);return l=b.__decorate([m.subclass("esri.widgets.NavigationToggle")],l)})},"esri/widgets/NavigationToggle/css":function(){define(["exports","../support/legacyIcon"],function(b,f){b.css={base:"esri-navigation-toggle",widgetIcon:f.legacyIcon.pan2,button:"esri-navigation-toggle__button",
activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal"};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,l,g,x,m,u,n){f=class extends f{constructor(t){super(t);this.navigationMode="pan";this.view=null}initialize(){this.addHandles(l.when(()=>this.view?.inputManager,()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.view?.ready&&"3d"===this.view?.type?"ready":"disabled"}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){const t=this.view?.inputManager;t&&(t.primaryDragAction=
"pan"===this.navigationMode?"pan":"rotate")}};b.__decorate([g.property({readOnly:!0})],f.prototype,"state",null);b.__decorate([g.property()],f.prototype,"navigationMode",void 0);b.__decorate([g.property()],f.prototype,"view",void 0);return f=b.__decorate([n.subclass("esri.widgets.NavigationToggleViewModel")],f)})},"esri/widgets/Zoom":function(){define("../chunks/tslib.es6 ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./support/globalCss ./support/legacyIcon ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ./Zoom/IconButton ./Zoom/ZoomViewModel".split(" "),
function(b,f,l,g,x,m,u,n,t,a,c,h,p,w,k){var d=a.legacyIcon.zoomInMagnifyingGlass;g=class extends n{constructor(q,C){super(q,C);this.iconClass=d;this.messages=this.icon=null;this.viewModel=new k}initialize(){this._zoomInButton=new w({action:this.zoomIn.bind(this),iconClass:a.legacyIcon.plus});this._zoomOutButton=new w({action:this.zoomOut.bind(this),iconClass:a.legacyIcon.minus})}destroy(){this._zoomInButton=f.destroyMaybe(this._zoomInButton);this._zoomOutButton=f.destroyMaybe(this._zoomOutButton)}get label(){return this.messages?.widgetLabel??
""}set label(q){this._overrideIfSome("label",q)}set layout(q){"horizontal"!==q&&(q="vertical");this._set("layout",q)}set view(q){this.viewModel.view=q}get view(){return this.viewModel.view}render(){const q={["esri-zoom--horizontal"]:"horizontal"===this.layout},{canZoomIn:C,canZoomOut:B}=this.viewModel;this._zoomInButton.enabled=C;this._zoomOutButton.enabled=B;const {zoomIn:e,zoomOut:r}=this.messages;this._zoomInButton.title=e;this._zoomOutButton.title=r;return p.tsx("div",{class:this.classes("esri-zoom",
t.globalCss.widget,q)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};b.__decorate([l.property()],g.prototype,"iconClass",void 0);b.__decorate([l.property()],g.prototype,"icon",void 0);b.__decorate([l.property()],g.prototype,"label",null);b.__decorate([l.property({value:"vertical"})],g.prototype,"layout",null);b.__decorate([l.property(),h.messageBundle("esri/widgets/Zoom/t9n/Zoom")],g.prototype,"messages",
void 0);b.__decorate([l.property()],g.prototype,"view",null);b.__decorate([l.property({type:k})],g.prototype,"viewModel",void 0);return g=b.__decorate([u.subclass("esri.widgets.Zoom")],g)})},"esri/widgets/Zoom/IconButton":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ../Feature/resources ../support/globalCss ../support/legacyIcon ../support/decorators/accessibleHandler ../support/jsxFactory ../support/widgetUtils".split(" "),
function(b,f,l,g,x,m,u,n,t,a,c,h,p){l=class extends u{constructor(){super(...arguments);this.enabled=!0;this.icon=this.iconClass=null;this.title=""}render(){const w=this.enabled?0:-1;return h.tsx("div",{bind:this,class:this.classes(t.globalCss.widgetButton,t.globalCss.widget,{[t.globalCss.disabled]:!this.enabled,[t.globalCss.interactive]:this.enabled}),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:w,title:this.title},h.tsx("span",{"aria-hidden":"true",class:this.classes(n.css.icon,
this.iconClass??""),role:"presentation"}),h.tsx("span",{class:a.legacyIcon.fontFallbackText},this.title))}_triggerAction(){this.action.call(this)}};b.__decorate([f.property()],l.prototype,"action",void 0);b.__decorate([f.property()],l.prototype,"enabled",void 0);b.__decorate([f.property()],l.prototype,"iconClass",void 0);b.__decorate([f.property()],l.prototype,"icon",void 0);b.__decorate([f.property()],l.prototype,"title",void 0);b.__decorate([c.accessibleHandler()],l.prototype,"_triggerAction",null);
return l=b.__decorate([m.subclass("esri.widgets.IconButton")],l)})},"esri/widgets/Feature/resources":function(){define(["exports"],function(b){b.css={base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentNode:"esri-feature__content-node",contentNodeText:"esri-feature__content-node--text",contentElement:"esri-feature__content-element",text:"esri-feature__text",
lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Zoom/ZoomViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./ZoomConditions2D ./ZoomConditions3D".split(" "),
function(b,f,l,g,x,m,u,n,t,a){f=class extends f{constructor(c){super(c)}destroy(){this.view=null}get canZoomIn(){return null!=this._zoomConditions&&this._zoomConditions.canZoomIn}get canZoomOut(){return null!=this._zoomConditions&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(c){c?"2d"===c.type?this._zoomConditions=new t({view:c}):"3d"===c.type&&(this._zoomConditions=new a({view:c})):this._zoomConditions=null;this._set("view",c)}zoomIn(){if(this.canZoomIn){var c=
this.view;"2d"===c.type?c.mapViewNavigation.zoomIn():l.ignoreAbortErrors(c.goTo({zoomFactor:2}))}}zoomOut(){if(this.canZoomOut){var c=this.view;"2d"===c.type?c.mapViewNavigation.zoomOut():l.ignoreAbortErrors(c.goTo({zoomFactor:.5}))}}};b.__decorate([g.property()],f.prototype,"_zoomConditions",void 0);b.__decorate([g.property()],f.prototype,"canZoomIn",null);b.__decorate([g.property()],f.prototype,"canZoomOut",null);b.__decorate([g.property({readOnly:!0})],f.prototype,"state",null);b.__decorate([g.property()],
f.prototype,"view",null);return f=b.__decorate([n.subclass("esri.widgets.Zoom.ZoomViewModel")],f)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(b,f,l,g,x,m,u){f=class extends f{get canZoomIn(){if(!this.view?.ready)return!1;const n=this.view?.constraints?.effectiveMaxScale;
return 0===n||this._scale>n}get canZoomOut(){var {view:n}=this;if(!n?.ready)return!1;n=n.constraints?.effectiveMinScale;return 0===n||this._scale<n}get _scale(){const n=this.view?.animation?.target;return(n&&"then"in n?void 0:n?.scale)??this.view?.scale??0}};b.__decorate([l.property({readOnly:!0})],f.prototype,"canZoomIn",null);b.__decorate([l.property({readOnly:!0})],f.prototype,"canZoomOut",null);b.__decorate([l.property()],f.prototype,"view",void 0);b.__decorate([l.property()],f.prototype,"_scale",
null);return f=b.__decorate([u.subclass("esri.widgets.Zoom.ZoomConditions2D")],f)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(b,f,l,g,x,m,u){f=class extends f{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};b.__decorate([l.property({readOnly:!0})],
f.prototype,"canZoomIn",null);b.__decorate([l.property({readOnly:!0})],f.prototype,"canZoomOut",null);b.__decorate([l.property()],f.prototype,"view",void 0);return f=b.__decorate([u.subclass("esri.widgets.Zoom.ZoomConditions3D")],f)})},"esri/views/ui/2d/DefaultUI2D":function(){define("../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../DefaultUI".split(" "),
function(b,f,l,g,x,m,u){l=class extends u{constructor(n){super(n);this.components=["attribution","zoom"]}};b.__decorate([f.property()],l.prototype,"components",void 0);return l=b.__decorate([m.subclass("esri.views.ui.2d.DefaultUI2D")],l)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,l,g,x,m,u){var n;l=n=class extends l.JSONSupport{constructor(t){super(t);this.color=new f([0,0,0,1])}clone(){return new n(g.clone({color:this.color}))}};b.__decorate([x.property({type:f,json:{write:!0}})],l.prototype,"color",void 0);return l=n=b.__decorate([u.subclass("esri.webmap.background.ColorBackground")],l)})},"*noref":1}});
define("require ../chunks/tslib.es6 ../Viewpoint ../core/Collection ../core/CollectionFlattener ../core/Error ../core/has ../core/Logger ../core/maybe ../core/reactiveUtils ../core/workers/workers ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/accessorSupport/decorators/subclass ../core/accessorSupport/ensureType ../geometry/projection ../layers/support/TileInfo ./BreakpointsOwner ./DOMContainer ./PopupView ./View ./2d/AnimationManager ./2d/FrameTask ./2d/GoToManager ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/tiling/TileInfoView ./2d/tiling/TileKey ./2d/tiling/TileQueue ./2d/tiling/TileStrategy ./2d/viewpointUtils ./2d/ViewStateManager ./2d/input/MapViewInputManager ./2d/layers/features/support/TileStore ./2d/support/HighlightOptions ./2d/support/hitTestUtils ./2d/support/screenshotUtils ./2d/support/StationaryManager ./2d/support/Timeline ./support/screenUtils ./support/WebGLRequirements ./ui/DefaultUI ./ui/2d/DefaultUI2D ../webmap/background/ColorBackground".split(" "),function(b,
f,l,g,x,m,u,n,t,a,c,h,p,w,k,d,q,C,B,e,r,A,y,v,E,G,O,Q,W,aa,S,ba,fa,z,D,K,V,H,I,L,R,X,Z,F,J){async function P(){const [,{GraphicsView2D:M,GraphicContainer:T,LabelManager:ca,MapViewNavigation:ia,MagnifierView2D:ka,Stage:ja}]=await Promise.all([new Promise((ma,la)=>b(["./2d/webglDeps"],ma,la)),new Promise((ma,la)=>b(["./2d/mapViewDeps"],ma,la))]);U=M;Y=T;ea=ca;ha=ia;da=ka;N=ja}let N,U,Y,ea,ha,da;w=class extends B.BreakpointsOwner(r.PopupView(e.DOMContainer(A))){constructor(M){super(M);this.stage=this._magnifierView=
null;this._resolveWhenReady=[];this.rootLayerViews=new x({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null});this.featuresTilingScheme=null;this.fullOpacity=1;this.goToManager=new E.GoToManager({view:this});this.graphicsView=null;this.stateManager=new fa.ViewStateManager({constraints:new O({view:this})});this.stationaryManager=new I.StationaryManager;this.mapViewNavigation=this.labelManager=null;this.renderingOptions=
{samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};this.supersampleScreenshotsEnabled=!0;this.supportsGround=!1;this.frameTask=new v(this);this.floors=new g;this.highlightOptions=new K;this.inputManager=new z({view:this});this.map=null;this.spatialReferenceLocked=!1;this.timeline=new L.Timeline;this.type="2d";this.ui=new F;this.test={takeScreenshot:async T=>H.takeRawScreenshot(this._getScreenshotView(T),T)};this.padding={top:0,right:0,bottom:0,left:0};
this.addHandles([a.watch(()=>this.viewpoint,()=>this.stationaryManager.flip(),a.sync),this.on("resize",T=>this.stateManager.resize(T.width,T.height)),a.watch(()=>this.animationManager?.animation,T=>{this.animation=T})]);c.initialize()}destroy(){this._set("preconditionsReady",!1);this.frameTask=t.destroyMaybe(this.frameTask);this.goToManager.destroy();this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)}get graphicsTileStore(){return new D(this.featuresTilingScheme)}get constraintsInfo(){const M=
this.defaultsFromMap?.tileInfo,T=this.spatialReference;return{lods:M?.spatialReference?.equals(T)?M.lods:null,spatialReference:T}}get state(){return this.stateManager.state}get initialExtentRequired(){if(!this.stateManager)return!1;const {scale:M,constraints:T,center:ca,viewpoint:ia,extent:ka}=this;let ja=this.zoom;if(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint||ka)return!1;T?.effectiveLODs||(ja=-1);return ca&&(0!==M||-1!==ja)||null!=ia?.targetGeometry&&
("extent"===ia.targetGeometry.type||ia.scale)?!1:!0}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get typeSpecificPreconditionsReady(){const M=this._getDefaultViewpoint();return M?q.canProjectWithoutEngine(M.targetGeometry.spatialReference,this.spatialReference)?!0:q.isLoadedOrLoad():!1}set animation(M){var T=this._get("animation");M!==T&&(T&&T.stop(),!M||M.isFulfilled()?(this._set("animation",
null),this.frameTask.animationInProgress=!1):(this._set("animation",M),this.frameTask.animationInProgress=!0,T=()=>{M===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame());this.frameTask.animationInProgress=!1},M.when(T,T)))}get background(){return"esri.WebMap"===this.map?.declaredClass?this.map.initialViewProperties.background:null}set background(M){this._override("background",M)}get center(){return this.stateManager?.center??null}set center(M){this.stateManager.center=
M}get constraints(){return this.stateManager?.constraints}set constraints(M){M.view=this;const T=this.stateManager.constraints;this.stateManager.constraints=M;T?.destroy()}get extent(){return this.stateManager?.extent??null}set extent(M){this.stateManager.extent=M}get padding(){return this.stateManager?.padding}set padding(M){this.stateManager&&(this.stateManager.padding=M)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(M){this.stateManager.resizeAlign=
M}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(M){const {rotationEnabled:T}=this.constraints;this.constraints.rotationEnabled=!0;this.stateManager.rotation=M;this.constraints.rotationEnabled=T}get scale(){return this.stateManager?.scale??0}set scale(M){this.stateManager&&(this.stateManager.scale=M)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get updating(){const M=
!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||!0===this.graphicsView.updating||this.allLayerViews.some(T=>!T.destroyed&&!("layerViews"in T)&&!0===T.updating));if(u("esri-2d-log-updating")){const T=this.allLayerViews.reduce((ca,ia)=>({...ca,[ia.layer.id]:!ia.destroyed&&!("layerViews"in ia)&&ia.updating}),{});console.log(`Updating MapView: ${M}\n-> Null LayerViewManager: ${!this.layerViewManager}\n-> Null LabelManager: ${!this.labelManager}\n-> Null GraphicsView: ${!this.graphicsView}\n-> layerViewManager.updating: ${this.layerViewManager?.updating}\n-> labelManager.updating: ${this.labelManager?.updating}\n-> graphicsView.updating: ${this.graphicsView?.updating}\n-> allLayerViews: ${JSON.stringify(T)}\n`)}return M}get viewpoint(){return this.stateManager.viewpoint??
null}set viewpoint(M){this.stateManager.viewpoint=M;this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(M){this.stateManager.zoom=M}get navigating(){return this.mapViewNavigation?.interacting??!1}goTo(M,T){return this.goToManager.goTo(M,T)}async hitTest(M,T){return V.hitTest(this,M,T)}async takeScreenshot(M){return H.takeScreenshot(this._getScreenshotView(M),M)}toMap(M){if(!this.ready)return null;M=R.isSupportedScreenPointEvent(M)?R.createScreenPointFromSupportedEvent(this,
M):M;return this.stateManager.toMap(M)}toScreen(M,T){return this.stateManager.toScreen(M,T)}on(M,T,ca,ia){return(ca=this.inputManager&&this.viewEvents.on(M,T,ca,ia))?ca:super.on(M,T)}hasEventListener(M){return super.hasEventListener(M)||this.viewEvents.hasHandler(M)}whenLayerView(M){return super.whenLayerView(M)}graphicChanged(M){this.graphicsView&&this.graphicsView.graphicUpdateHandler(M)}whenReady(){return new Promise(M=>{this.ready?M(this):this._resolveWhenReady.push(M)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&
"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return"esri.WebMap"===this.map?.declaredClass?this.map.initialViewProperties.timeZone:null}hasLayerViewModule(M){return G.layerView2DImporter.hasLayerViewModule(M)}importLayerView(M){return G.layerView2DImporter.importLayerView(M)}pixelSizeAt(){return this.ready?this.resolution:(n.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),
null)}popupHitTest(M){return this.hitTest(M).then(T=>({...T,mapPoint:this.toMap(M)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let M=X.check(this.type);u("safari")&&9>u("safari")&&(M=new m("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:u("safari")}));if(null!=M)throw n.getLogger(this).warn("#validate()",M.message),M;}loadAsyncDependencies(){return P()}_getDefaultViewpoint(){const {constraints:M,
initialExtent:T,map:ca,padding:ia,size:ka}=this;if(!M)return null;var ja=ca&&"initialViewProperties"in ca?ca.initialViewProperties:void 0;const ma=this.stateManager.getUserStartupOptions(this.size);var la=ja?.viewpoint;const oa=la?.targetGeometry?.extent??T;var na=oa?.center;ja=la?.rotation??0;la=la?.scale||oa&&ba.extentToScale(oa,[ka[0]-ia.left-ia.right,ka[1]-ia.top-ia.bottom]);na=ma.center??na;la=ma.scale??la;return na&&la?new l({targetGeometry:na,scale:la,rotation:ma.rotation??ja}):null}_startup(){this.timeline.begin("MapView Startup");
var M=this._getDefaultViewpoint();this.stateManager.startup(M,this.size,this.spatialReference,this.defaultsFromMap.extent?.center);this.graphics.owner=this;const T=new N(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=T;this._magnifierView=new da;this._magnifierView.magnifier=this.magnifier;M=new ea({view:this});this._set("labelManager",
M);M=new y({view:this});this._set("animationManager",M);M=new ha({view:this,animationManager:M});this._set("mapViewNavigation",M);this._setupSpatialReferenceDependentProperties();this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),T.on("webgl-error",ca=>this.fatalError=ca.error),a.watch(()=>this.stationary,ca=>T.stationary=ca,a.syncAndInitial),a.watch(()=>this.background,ca=>{T.backgroundColor=ca?.color;this._magnifierView.backgroundColor=ca?.color},a.syncAndInitial),
a.watch(()=>this.magnifier,ca=>this._magnifierView.magnifier=ca,a.syncAndInitial),a.watch(()=>this.renderingOptions,ca=>T.renderingOptions=ca,a.syncAndInitial),a.watch(()=>this.highlightOptions,ca=>T.highlightOptions=ca,a.syncAndInitial),a.watch(()=>this.state.id,()=>T.state=this.state,a.syncAndInitial)],"map-view");this._updateStageChildren();M=this._resolveWhenReady;this._resolveWhenReady=[];M.forEach(ca=>ca(this));this.timeline.end("MapView Startup");this.frameTask.start();this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties();
this.removeHandles("map-view");this.mapViewNavigation.destroy();this._set("mapViewNavigation",null);this.animationManager.destroy();this._set("animationManager",null);this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this.stage.destroy();this.stage=null;this._set("graphicsView",null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;this.frameTask.stop();this.stationaryManager.clear();this._set("ready",
!1);this.stateManager.teardown();this.animation=null}_updateStageChildren(){this.stage.removeAllChildren();this.rootLayerViews.forEach(M=>{this.stage.addChild(M.container)});this.stage.addChild(this.graphicsView.container);this.stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){var M=new Q(C.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",M);M=new U({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),
container:new Y(M)});this._set("graphicsView",M)}_destroySpatialReferenceDependentProperties(){const M=this.graphicsView;this._set("graphicsView",null);M.destroy();this._set("featuresTilingScheme",null)}_getScreenshotView(M){const {allLayerViews:T,padding:ca,size:ia,stage:ka}=this;return{allLayerViews:T,backgroundColor:M?.ignoreBackground?null:this.background?.color,padding:ca,size:ia,stage:ka}}_spatialReferenceChanged(M){if(this.ready){this.frameTask.stop();for(const T of this.allLayerViews)T.processDetach();
this._destroySpatialReferenceDependentProperties();this.stateManager.changeSpatialReference(M);this.stage.state=this.state;this._setupSpatialReferenceDependentProperties();for(const T of this.allLayerViews)T.processAttach();this.frameTask.requestFrame();this.frameTask.start();this._updateStageChildren()}}};w.type="2d";f.__decorate([h.property({readOnly:!0})],w.prototype,"animationManager",void 0);f.__decorate([h.property({constructOnly:!0})],w.prototype,"deactivatedWebGLExtensions",void 0);f.__decorate([h.property({constructOnly:!0})],
w.prototype,"debugWebGLExtensions",void 0);f.__decorate([h.property({readOnly:!0})],w.prototype,"featuresTilingScheme",void 0);f.__decorate([h.property({readOnly:!0})],w.prototype,"fullOpacity",void 0);f.__decorate([h.property()],w.prototype,"goToManager",void 0);f.__decorate([h.property({readOnly:!0})],w.prototype,"graphicsTileStore",null);f.__decorate([h.property()],w.prototype,"graphicsView",void 0);f.__decorate([h.property()],w.prototype,"stateManager",void 0);f.__decorate([h.property()],w.prototype,
"constraintsInfo",null);f.__decorate([h.property({readOnly:!0})],w.prototype,"state",null);f.__decorate([h.property()],w.prototype,"initialExtentRequired",null);f.__decorate([h.property()],w.prototype,"labelManager",void 0);f.__decorate([h.property({readOnly:!0})],w.prototype,"mapViewNavigation",void 0);f.__decorate([h.property({constructOnly:!0})],w.prototype,"renderCanvas",void 0);f.__decorate([h.property()],w.prototype,"renderingOptions",void 0);f.__decorate([h.property({constructOnly:!0})],w.prototype,
"supersampleScreenshotsEnabled",void 0);f.__decorate([h.property({readOnly:!0})],w.prototype,"supportsGround",void 0);f.__decorate([h.property()],w.prototype,"_defaultsFromMapSettings",null);f.__decorate([h.property({readOnly:!0})],w.prototype,"typeSpecificPreconditionsReady",null);f.__decorate([h.property()],w.prototype,"animation",null);f.__decorate([h.property({type:J})],w.prototype,"background",null);f.__decorate([h.property()],w.prototype,"center",null);f.__decorate([h.property({type:O})],w.prototype,
"constraints",null);f.__decorate([h.property()],w.prototype,"extent",null);f.__decorate([h.property()],w.prototype,"floors",void 0);f.__decorate([h.property({type:K})],w.prototype,"highlightOptions",void 0);f.__decorate([h.property({readOnly:!0})],w.prototype,"inputManager",void 0);f.__decorate([h.property()],w.prototype,"map",void 0);f.__decorate([h.property()],w.prototype,"padding",null);f.__decorate([h.property({readOnly:!0})],w.prototype,"rendering",null);f.__decorate([h.property()],w.prototype,
"resizeAlign",null);f.__decorate([h.property({readOnly:!0})],w.prototype,"resolution",null);f.__decorate([h.property()],w.prototype,"rotation",null);f.__decorate([h.property()],w.prototype,"scale",null);f.__decorate([h.property({constructOnly:!0})],w.prototype,"spatialReferenceLocked",void 0);f.__decorate([h.property()],w.prototype,"stationary",null);f.__decorate([h.property({type:L.Timeline,readOnly:!0})],w.prototype,"timeline",void 0);f.__decorate([h.property({readOnly:!0})],w.prototype,"type",
void 0);f.__decorate([h.property({readOnly:!0})],w.prototype,"updating",null);f.__decorate([h.property()],w.prototype,"viewpoint",null);f.__decorate([h.property()],w.prototype,"zoom",null);f.__decorate([h.property({readOnly:!0})],w.prototype,"navigating",null);f.__decorate([h.property(),p.cast(M=>M instanceof Z?M:d.ensureClass(F,M))],w.prototype,"ui",void 0);return w=f.__decorate([k.subclass("esri.views.MapView")],w)});