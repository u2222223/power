import{o as x}from"./index-FdyGBlLz.js";function w(o,i,m,s,t,c){let l=o*Math.PI*2,h=i*Math.PI*2;t=typeof t<"u"?t:1/3;let p=0,r=0,f=1;return{u:{min:-Math.PI,max:Math.PI*3,step:Math.PI/32},v:{min:0,max:Math.PI*2,step:Math.PI/20},x:function(a,n){return a<l?p+Math.cos(l)*(1+Math.cos(n)*t)*f:a>h?p+Math.cos(h)*(1+Math.cos(n)*t)*f:p+Math.cos(a)*(1+Math.cos(n)*t)*f},y:function(a,n){return a<l?r+Math.sin(l)*(1+Math.cos(n)*t)*f:a>h?r+Math.sin(h)*(1+Math.cos(n)*t)*f:r+Math.sin(a)*(1+Math.cos(n)*t)*f},z:function(a,n){return a<-Math.PI*.5||a>Math.PI*2.5?Math.sin(a):Math.sin(n)>0?1*c:-1}}}function b({pieData:o=[],unit:i="",ratio:m=1.5,boxHeight:s=20,angle:t=270,size:c=150,alpha:l=22,valueRatio:h=!1,changeSeries:p=null}){let r=[],f=0,a=0,n=0,g=[],y=typeof m<"u"?(1-m)/(1+m):1/3;for(let e=0;e<o.length;e++){f+=o[e].value;let d={name:typeof o[e].name>"u"?`series${e}`:o[e].name,type:"surface",parametric:!0,wireframe:{show:!1},pieData:o[e],pieStatus:{selected:!1,hovered:!1,k:y}};if(typeof o[e].itemStyle<"u"){let u={};o[e].itemStyle.color&&(u.color=o[e].itemStyle.color),o[e].itemStyle.opacity&&(u.opacity=o[e].itemStyle.opacity),d.itemStyle=u}r.push(d)}for(let e=0;e<r.length;e++)n=a+r[e].pieData.value,r[e].pieData.startRatio=a/f,r[e].pieData.endRatio=n/f,r[e].parametricEquation=w(r[e].pieData.startRatio,r[e].pieData.endRatio,!1,!1,y,1.5),a=n,g.push(r[e].name);let S={name:"pie2d",type:"pie",hoverAnimation:!1,startAngle:-t,stillShowZeroSum:!1,clockwise:!1,radius:[37,37],center:["50%","57%"],tooltip:{show:!1},label:{show:!0,padding:5,shadow:!0,alignTo:"edge",edgeDistance:10,bleedMargin:10,formatter:h?`{top|{b}}
{bottom|{c}${i} {d}%}`:`{top|{b}}
{bottom|{c}${i}}`,rich:{top:{color:"#41A6FC",opacity:1,fontSize:14},bottom:{color:"#fff",opacity:1,fontSize:16,lineHeight:26}}},labelLine:{showAbove:!0,length:20,length2:25,minTurnAngle:180,maxSurfaceAngle:30},labelLayout:{hideOverlap:!1},data:o.map(e=>({...e,label:{show:e.itemStyle.opacity===1},itemStyle:{opacity:0,color:e.itemStyle.color},labelLine:{lineStyle:{opacity:e.itemStyle.opacity}}}))};p&&p(S),r.push(S);let M={tooltip:{show:!0,backgroundColor:"#1C256A",borderColor:"#00DFFA",extraCssText:"box-shadow: inset 0px 0px 8px #00DFFA;",borderWidth:1,textStyle:{color:"#fff",lineHeight:200,height:200},formatter:e=>{if(e.seriesName!=="mouseoutSeries"){let d=M.series.find(u=>u.name===e.seriesName&&u.type===e.seriesType);return d?`${e.seriesName}<br/>${e.marker}${d.pieData.value}${i}`:""}}},xAxis3D:{min:-1,max:1},yAxis3D:{min:-1,max:1},zAxis3D:{min:-1,max:1},grid3D:{show:!1,boxHeight:s,top:"10%",postEffect:{enable:!0,bloom:{enable:!0,bloomIntensity:.1},SSAO:{enable:!0,quality:"medium",radius:2}},viewControl:{projection:"orthographic",orthographicSize:c,alpha:l,beta:t,rotateSensitivity:0,zoomSensitivity:0,panSensitivity:0,autoRotate:!1}},animation:!1,series:r,pieData:o,parameter:{unit:i,ratio:m,angle:t,size:c,alpha:l,boxHeight:s,valueRatio:h}};return M}function I(o){let i=x(o),m="";return i.on("mouseover",s=>{if(m!==s.seriesName){let t=i._model.option.pieData;if(t){let c=t.findIndex(l=>l.name===s.seriesName);c===-1?t.forEach(l=>{l.itemStyle.opacity=1}):(t.forEach(l=>{l.itemStyle.opacity=.05}),t[c].itemStyle.opacity=1),i&&i.setOption(b({pieData:t,...i._model.option.parameter}))}m=s.seriesName}}),i.on("globalout",()=>{let s=i._model.option.pieData;s&&(s.forEach(t=>{t.itemStyle.opacity=1}),i&&i.setOption(b({pieData:s,...i._model.option.parameter}))),m=""}),i}export{b as g,I as i};
