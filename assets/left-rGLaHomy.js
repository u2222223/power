import{n as r,bK as o,bI as c}from"./index-FdyGBlLz.js";import{b as d}from"./store-BeJ4ml9q.js";import{y as h,b as m,f as u,c as p,j as I,t as y,p as _,a as v}from"./yeyaxitong-Bp2z_x9H.js";const i=""+new URL("empty-C9i0-c5I.png",import.meta.url).href,f={props:["pointList","pointListLoading","record"],data(){return{nowItemIndex:0,childSystemMap:[{label:"桨叶",url:h},{label:"变桨",url:m},{label:"发电机",url:u},{label:"齿轮箱",url:p},{label:"升压变",url:i},{label:"机舱",url:I},{label:"风机气象",url:y},{label:"偏航",url:_},{label:"变频",url:i},{label:"液压",url:v}],parentData:null,treeNode:[]}},computed:{selectSystem(){return this.childSystemC[this.nowItemIndex]},parentId(){return this.record.result.parentId},childSystemC(){let s=new RegExp("[A-Za-z]+");return this.treeNode.map(t=>{let e=s.test(t.code)?t.desc:t.code,a=this.childSystemMap.find(n=>e.includes(n.label));return{...t,label:e,show:!!a,entityId:t.entityId,url:a?a.url:i}})}},watch:{"record.entityId"(){this.initItemIndex()},parentId:{immediate:!0,handler(){this.getChildSystem(),this.getParentData()}}},methods:{handleShow(s){this.$emit("handleShow",s)},getChildSystem(){o({entityId:this.parentId}).then(s=>{this.treeNode=s.result,this.initItemIndex()})},getParentData(){c({id:this.parentId}).then(s=>{this.parentData=s.result})},initItemIndex(){let s=this.record.entityId;s&&this.childSystemC.length&&(this.nowItemIndex=this.childSystemC.findIndex(t=>t.entityId===s),this.refreData())},selectItem(s){this.nowItemIndex!==s&&(this.nowItemIndex=s,d(this.selectSystem),this.refreData())},refreData(){this.selectSystem&&this.$emit("getNewData",this.selectSystem)}}};var C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"partsMonitorLeft"},[e("div",{staticClass:"top"},[e("div",{staticClass:"title"},[t._v(" "+t._s(t.parentData&&t.parentData.code)+"-"+t._s(t.selectSystem?t.selectSystem.label:"")+" ")]),t._m(0),e("div",{staticClass:"menuBox"},[e("div",{staticClass:"menuContent"},[e("div",{staticClass:"menuLi"},t._l(t.childSystemC,function(a,n){return e("div",{directives:[{name:"show",rawName:"v-show",value:a.show,expression:"item.show"}],key:n,staticClass:"item",class:n===t.nowItemIndex?"itemActive":"",on:{click:function(l){return t.selectItem(n)}}},[e("span",{staticClass:"itemLabel"},[t._v(t._s(a.label))])])}),0)])]),e("img",{staticClass:"topImg",attrs:{src:t.selectSystem?t.selectSystem.url:""}})]),e("div",{staticClass:"bottomBox"},[t.pointListLoading?e("a-spin",{staticClass:"loading"}):e("div",{staticClass:"bottom"},t._l(t.pointList,function(a,n){return e("div",{key:n,staticClass:"bottomFlex",on:{click:function(l){return t.handleShow(a)}}},[e("span",[t._v(t._s(a.name))]),a.pointValue?e("span",[t._v(" "+t._s(a.pointValue)+" "),a.clunit&&a.clunit!==null&&a.clunit!==""?e("span",[t._v(t._s(a.clunit))]):t._e()]):t._e()])}),0)],1)])},b=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"iconBox"},[t("div",{staticClass:"text"},[s._v("SUBSYSTEM")])])}],S=r(f,C,b,!1,null,"ec510172");const L=S.exports;export{L as default};
