const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./chartTitle-D0Yz7hG9.js","./index-FdyGBlLz.js","./index-BnngHmlw.css","./chartTitle-CesUSjVv.css","./leftTop-CZL0srUw.js","./leftTop-BY_jjHAR.css","./leftCenter-gvuT6Kp0.js","./common-0X47MWYd.js","./leftCenter-CtqP61U5.css","./leftBottom-DqEAzoK4.js","./leftBottom-DCQ-Z0IG.css","./rightTop-qAymfINQ.js","./rightTop-vYoHgTu8.css","./rightCenter-1LYXuqWl.js","./rightCenter-Drjecvxa.css","./rightBottom-CQA3CTTJ.js","./search-HGKQ_zQW.js","./rightBottom-DcO9U3KZ.css","./leftBottomDetailEnv-CteVFbPV.js","./leftBottomDetailEnv-0SBLkOiN.css","./topCenter-DpeDZwSv.js","./topCenter-0-81bK6D.css","./fuTitle-FsfbhOb1.js","./fuTitle-lbXRMETp.css","./fuTitleTwo-D5C4XufH.js","./fuTitleTwo-CSJ19y8h.css","./scheduleTable-sZ9zK8K6.js","./scheduleTable-4JPu-Xet.css","./scheduleTableMin-C_WxdiPJ.js","./scheduleTableMin-B9B_iCtM.css","./bottomCenter-_IyeywYQ.js","./bottomCenter-aCVNum4M.css","./btnList-BFUQ34Pe.js","./navToSafeSys-iy7GRKyM.js","./btnList-Bc-WZUEw.css"])))=>i.map(i=>d[i]);
import{n,_ as a,cB as d,cC as c,cD as u,x as p}from"./index-FdyGBlLz.js";import{h}from"./common-0X47MWYd.js";import{s as m}from"./search-HGKQ_zQW.js";const _={components:{ChartTitle:()=>a(()=>import("./chartTitle-D0Yz7hG9.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),LeftTop:()=>a(()=>import("./leftTop-CZL0srUw.js"),__vite__mapDeps([4,1,2,5]),import.meta.url),LeftCenter:()=>a(()=>import("./leftCenter-gvuT6Kp0.js"),__vite__mapDeps([6,1,2,7,8]),import.meta.url),LeftBottom:()=>a(()=>import("./leftBottom-DqEAzoK4.js"),__vite__mapDeps([9,1,2,10]),import.meta.url),RightTop:()=>a(()=>import("./rightTop-qAymfINQ.js"),__vite__mapDeps([11,1,2,12]),import.meta.url),RightCenter:()=>a(()=>import("./rightCenter-1LYXuqWl.js"),__vite__mapDeps([13,1,2,14]),import.meta.url),RightBottom:()=>a(()=>import("./rightBottom-CQA3CTTJ.js"),__vite__mapDeps([15,1,2,7,16,17]),import.meta.url),LeftBottomDetailEnv:()=>a(()=>import("./leftBottomDetailEnv-CteVFbPV.js"),__vite__mapDeps([18,1,2,19]),import.meta.url),TopCenter:()=>a(()=>import("./topCenter-DpeDZwSv.js"),__vite__mapDeps([20,1,2,21]),import.meta.url),FuTitle:()=>a(()=>import("./fuTitle-FsfbhOb1.js"),__vite__mapDeps([22,1,2,23]),import.meta.url),FuTitleTwo:()=>a(()=>import("./fuTitleTwo-D5C4XufH.js"),__vite__mapDeps([24,1,2,25]),import.meta.url),ScheduleTable:()=>a(()=>import("./scheduleTable-sZ9zK8K6.js"),__vite__mapDeps([26,1,2,27]),import.meta.url),ScheduleTableMin:()=>a(()=>import("./scheduleTableMin-C_WxdiPJ.js"),__vite__mapDeps([28,1,2,29]),import.meta.url),BottomCenter:()=>a(()=>import("./bottomCenter-_IyeywYQ.js"),__vite__mapDeps([30,1,2,31]),import.meta.url),BtnList:()=>a(()=>import("./btnList-BFUQ34Pe.js"),__vite__mapDeps([32,33,1,2,34]),import.meta.url)},props:["treeOpen","cMapInited","map","videoVisibel","shipVisibel"],data(){return{leftBox:!1,rightBox:!1,rightCenterData:[],treeOpenLeft:13,showSchedule:!1,selected:[],pubStyle:"width: 95%;margin-left:4%",compData:{},centerTopData:{},projects:[],leftShowSider:!1,rightShowSider:!1,showSider:!1,showSider2:!1,selectBtn2:!1,showShipModule:!1,scheduleTableData:null,tabArr:[{label:this.$t("build.ship"),value:0},{label:this.$t("build.person"),value:1}],searchImg:m}},computed:{showProjects(){return this.selected.length?this.selected:this.projects},showEar(){return!this.shipVisibel&&!this.selectBtn2}},watch:{showSider(i){this.leftShowSider=i,this.rightShowSider=i},cMapInited(i){i&&this.initMapData()},"$store.state.subcenterState.isGd"(){this.getData()}},created(){this.getData()},methods:{getSelected(i){if(this.selected=i,i.length&&this.getRightCenterDataByProject(),this.cMapInited)if(i.length){let[t]=i,e=t.cdEntityGis||{};this.map().setShowConst({title:e.description,projectId:e.projectId,entityId:e.entityId,gisCluster:e.gisCluster,capacity:this.$t("currency.MW",[t.capacity])+this.$t("unit.MW"),owner:t.owner,status:t.status,runTime:t.planProductionTime?this.$d(new Date(t.planProductionTime),"short"):"",projectUrl:t.projectUrl,tenantId:t.tenantId,typhoonUrl:t.typhoonUrl,latitude:e.points[0].latitude,longitude:e.points[0].longitude})}else this.map().setShowConst()},getData(){var e,s;const i=(e=this.$store.state.subcenterState)==null?void 0:e.isGd,t=(s=this.$store.state.subcenterResource)==null?void 0:s.area;d({en:this.$root.$i18n.locale==="en-GB"?"1":"0",area:i?void 0:t}).then(r=>{this.projects=r.result.map(o=>(o.platformDynamicsList.forEach(l=>{console.log(l.title),l.projectName=o.projectName.trim()}),o)),this.cMapInited&&this.initMapData()}),this.getCenterTopData(),this.getRightCenterData()},getRightCenterDataByProject(){c({tenantId:this.selected[0].tenantId}).then(i=>{this.scheduleTableData=i.result})},initMapData(){this.$route.path==="/build"&&this.projects.forEach(i=>{const{cdEntityGis:t,city:e}=i;t&&this.map().updateImg({...t,city:e})})},hiddenBottomCenter(){this.$refs.BottomCenter&&this.$refs.BottomCenter.hiddenAll()},getRightCenterData(){u().then(i=>{this.rightCenterData=i.result})},getCenterTopData(){p({windfarmStatus:"在建项目",city:this.$store.state.subcenterResource.area}).then(i=>{let t=i.result,e=0,s=0;t.forEach(r=>{h(r.etattr_capacity)&&(e+=r.etattr_capacity),h(r.etattr_investmentTotal)&&(s+=r.etattr_investmentTotal)}),this.centerTopData={num1:t.length,num2:parseFloat(e).toFixed(2),num3:parseFloat(s/1e4).toFixed(2)}})},hiddenLeftAndRight(i){this.showSider=i,this.showSider2=i,this.$refs.rightTop&&this.$refs.rightTop.clear(),this.initMapData(),this.$emit("closeTree",!1),this.showSider&&this.$refs.BottomCenter.clearMap(),document.getElementsByClassName("tp-switch")[0].click()},updateVideoVisbel(i){this.$emit("update:videoVisibel",i)},switchShip(i){this.showSider=i,this.showShipModule=i,this.$emit("update:shipVisibel",i),i?(this.$parent.hideTree(),this.$emit("closeTree",!1)):this.map().closeShipModule()},closeShip(){this.showShipModule=!1,this.$emit("update:shipVisibel",!1),this.map().closeShipModule()}}};var f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"buildBox",class:[t.showEar&&t.rightShowSider&&"showSiderRightBtnList",!t.shipVisibel&&t.leftShowSider&&"showSiderLeftBtnList"]},[e("div",{staticClass:"contentNew beauthScrollbar",class:[t.showSider&&"showSider"],style:t.treeOpen&&!t.leftShowSider&&{paddingLeft:`${t.treeOpenLeft}%`}},[e("div",{staticClass:"left",class:[t.showSider&&"showSiderLeft",t.leftShowSider&&"showSiderLeft"]},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showEar,expression:"showEar"}],staticClass:"leftBtn",on:{click:function(s){t.leftShowSider=!t.leftShowSider}}}),e("div",{staticClass:"content"},[e("div",{staticClass:"leftContentBox"},[e("div",{staticStyle:{height:"38%"}},[e("ChartTitle",{staticStyle:{"margin-bottom":"0"},attrs:{titles:[t.$t("build.left_top_module_title"),""]}}),e("LeftTop",{staticClass:"maxHeight",attrs:{projects:t.showProjects}})],1),e("div",{staticStyle:{height:"32%"}},[e("ChartTitle",{attrs:{titles:[t.$t("build.left_center_module_title"),""]}}),e("LeftCenter",{staticClass:"maxHeight",style:t.pubStyle})],1),e("div",{staticStyle:{height:"30%"}},[e("ChartTitle",{attrs:{titles:[t.$t("build.left_bottom_module_title"),""]}}),t.selected.length===0?e("LeftBottom",{staticClass:"maxHeight",style:t.pubStyle,attrs:{projects:t.showProjects}}):e("LeftBottomDetailEnv",{staticClass:"maxHeight LeftBottomDetailEnv",style:t.pubStyle,attrs:{project:t.showProjects[0]}})],1)])])]),e("div",{staticClass:"center"},[e("TopCenter",{staticClass:"topCenter noHidden",class:t.showSider&&"hidden",attrs:{"center-top-data":t.centerTopData},on:{initMapData:t.initMapData}})],1),e("div",{staticClass:"right",class:[t.showSider&&"showSiderRight",t.rightShowSider&&"showSiderRight"]},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showEar,expression:"showEar"}],staticClass:"leftBtn",on:{click:function(s){t.rightShowSider=!t.rightShowSider}}}),e("div",{staticClass:"content"},[e("div",{staticClass:"rightContentBox"},[e("div",{staticStyle:{height:"32%"}},[e("ChartTitle",{attrs:{titles:[t.$t("build.right_top_module_title"),""]}}),e("RightTop",{ref:"rightTop",staticClass:"maxHeight",style:t.pubStyle,attrs:{projects:t.projects},on:{getSelected:t.getSelected,hiddenBottomCenter:t.hiddenBottomCenter,initMapData:t.initMapData}})],1),t.selected.length===0?[e("div",{staticStyle:{height:"31%"}},[e("ChartTitle",{attrs:{titles:[t.$t("build.right_center_module_title"),""]}}),e("RightCenter",{staticClass:"maxHeight",attrs:{result:t.rightCenterData}})],1),e("div",{staticStyle:{height:"37%"}},[e("ChartTitle",{staticStyle:{"margin-bottom":"6px"},attrs:{titles:[t.$t("build.right_bottom_module_title"),""]}}),e("RightBottom",{staticClass:"maxHeight",style:t.pubStyle,attrs:{projects:t.showProjects}})],1)]:[e("div",{staticStyle:{height:"36%"},style:t.pubStyle},[e("FuTitle",{attrs:{title:t.$t("build.right_center_module_title")}}),t.selected.length?e("FuTitleTwo",{attrs:{title1:t.selected.length&&t.selected[0].projectName},scopedSlots:t._u([{key:"btn",fn:function(){return[e("img",{directives:[{name:"auth",rawName:"v-auth",value:["/build/jdcx"],expression:"['/build/jdcx']"}],staticStyle:{width:"18px"},attrs:{src:t.searchImg},on:{click:function(s){t.showSchedule=!0}}})]},proxy:!0}],null,!1,3733261838)}):t._e(),e("ScheduleTableMin",{attrs:{"schedule-table-data":t.scheduleTableData}})],1),e("div",{staticStyle:{height:"32%"},style:t.pubStyle},[e("FuTitle",{attrs:{"tab-arr":t.tabArr,title:t.$t("build.right_bottom_module_title2")},on:{selected:s=>t.$refs.RightBottom.setActive(s)}}),e("RightBottom",{ref:"RightBottom",staticClass:"maxHeight",attrs:{"show-tab":!1,projects:t.showProjects}})],1)]],2)])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showSchedule,expression:"showSchedule"}],staticClass:"scheduleBox"},[e("div",{staticClass:"scheduleContent"},[e("div",{staticClass:"close",on:{click:function(s){t.showSchedule=!1}}},[e("div")]),t.selected.length?e("ScheduleTable",{attrs:{"schedule-table-data":t.scheduleTableData,title:t.selected.length&&t.selected[0].projectName}}):t._e()],1)]),e("BottomCenter",{ref:"BottomCenter",staticClass:"noHidden",class:t.showSider&&"hidden",style:t.treeOpen&&!t.leftShowSider&&{width:`${100-t.treeOpenLeft}%`},attrs:{map:t.map},on:{getSelected:t.getSelected,initMapData:t.initMapData,changeShowOverview:function(s){return t.$emit("changeShowOverview",s)}}}),e("BtnList",{ref:"btnList",staticClass:"btnList",class:[t.showSider2&&"btnListPosit"],attrs:{selectBtn2:t.selectBtn2,"select-btn3":t.videoVisibel,"show-ship-module":t.showShipModule},on:{"update:selectBtn2":function(s){t.selectBtn2=s},"update:select-btn2":function(s){t.selectBtn2=s},switchShip:t.switchShip,hiddenLeftAndRight:t.hiddenLeftAndRight,"update:selectBtn3":t.updateVideoVisbel}})],1)},S=[],g=n(_,f,S,!1,null,"a46b4613");const b=g.exports;export{b as default};
