import{n as d,cT as f,aT as u}from"./index-FdyGBlLz.js";const p={components:{WindfarmSelect:f},props:{defaultFirst:{type:Boolean,default:!1}},data(){return{openDrop:!1,farmList:[],fanRecord:{}}},computed:{farmTitle(){var n;let s=((n=this.fanRecord)==null?void 0:n.desc)||"",e=s.length,t=16;return e>=t?{title:s.slice(0,t),subTitle:s.slice(t,e)}:{title:"",subTitle:s}},windfarmStatus(){return{run:"运营",build:"建设",plan:"规划",weather:""}[this.$route.name]}},watch:{fanRecord:{deep:!0,handler(s){this.$emit("changeFanRecord",s)}}},created(){this.loadEntityList()},methods:{selectWind(s){const e=this.farmList.find(t=>t.entityId===s.entityId);this.fanRecord=e,this.openDrop=!1},async loadEntityList(){const s=this.$store.state.subcenterState.isGd,e=this.$store.state.subcenterResource.area;let t={run:"2",build:"1",plan:"0",weather:""};const{result:{records:n}}=await u({type:t[this.$route.name],subCenter:s?void 0:e||void 0}),r=n.map(a=>({desc:a.entityDesc,entityId:a.entityId,cdEntityGisList:a.cdEntityGisList,topicName:a.topicName,...a})),i=a=>{let o=r.findIndex(c=>{var l;return(l=c.desc)==null?void 0:l.includes(a)});o!==-1&&r.unshift(r.splice(o,1)[0])};this.$route.name==="build"?(i("青洲二"),i("青洲一")):this.$route.name==="run"&&(i("桂山二期"),i("桂山一期"),i("沙扒一期"),i("青洲三"),i("一期风电场项目")),this.farmList=r,this.farmList.length&&(this.fanRecord=this.defaultFirst?this.farmList[0]:{})}}};var m=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"wea-wind-select"},[t("div",{staticClass:"wea-wind-select-box"},[t("div",{staticClass:"btn",on:{click:function(n){e.openDrop=!e.openDrop}}}),t("span",{staticClass:"wea-wind-icon"}),t("p",{style:{lineHeight:(e.farmTitle.title,1.3)}},[e._v(" "+e._s(e.farmTitle.title)+" "),e.farmTitle.title?t("br"):e._e(),e._v(" "+e._s(e.farmTitle.subTitle)+" ")]),t("div",{staticClass:"wea-wind-select-icon",style:{transform:e.openDrop?"rotate(90deg)":"rotate(270deg)"}})])]),t("WindfarmSelect",{staticStyle:{top:"100px"},attrs:{show:e.openDrop,"windfarm-status":e.windfarmStatus},on:{"update:show":function(n){e.openDrop=n},onSelect:e.selectWind,onCancel:function(n){e.openDrop=!1}}})],1)},h=[],y=d(p,m,h,!1,null,"14efe63e");const w=y.exports;export{w as default};
