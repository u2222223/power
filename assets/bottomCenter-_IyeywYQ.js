import{n as o,cS as c}from"./index-FdyGBlLz.js";function d(a,e,i){var t;return function(){var r=this,n=arguments;t&&clearTimeout(t);{var s=!t;t=setTimeout(function(){t=null},e),s&&a.apply(r,n)}}}const h={props:["map"],data(){return{selectVal:"",hiddenBloack:[],colorList:["#34D631","#F4A460","#FF6464","#B0C4DE","#44FFC9","#DDAFFF","#239E7F","#BC8F8F","#FF78AB","#2398ff","#C9AB19","#1DD1FF","#FF63FA","#EF2E0F","#FFBA19","#1376DB","#AC4F87","#E4FF98","#8C24D9"],areaColorTypeList:[],areaTypeData:[],ownerColors:[]}},computed:{aeraType(){let a=this.$t("main.btmMenuList"),e=[a[1],a[2],a[5]];return[{id:1,code:"city",authKey:"/build/cityDistrictBtn"},{id:2,code:"ower",authKey:"/build/ownerBtn"},{id:5,code:"capacity",authKey:"/build/capacityBtn"}].map((t,r)=>(t.title=e[r],t))}},created(){this.getArea()},methods:{onShow(a){let e=this.hiddenBloack.findIndex(i=>i===a);e!==-1?this.hiddenBloack.splice(e,1):this.hiddenBloack.push(a),this.initMap()},hiddenAll(){this.hiddenBloack=[],this.clearMap()},onHandleChange:d(function(a){if(this.selectVal===a){this.clearMap();return}this.selectVal=a,this.map().changeCategory("aaa"),this.initMap(),this.$parent.$refs.rightTop&&this.$parent.$refs.rightTop.clearSelected()},300),async initMap(){let a=this.areaTypeData[this.selectVal].filter((i,t)=>!this.hiddenBloack.includes(t)),e=this.map();e.setEmpty(),this.$emit("changeShowOverview",!0);for(let i=0;i<a.length;i++){let t=a[i],r=t.loadsEntityList||[];r.length&&(r.forEach(n=>{n.minScaling=2,n.maxScaling=17}),await e.formatAll(r,{},{color:t.color,alpha:.8,lineStyle:"border",borderColor:"#fff",borderWidth:4,hideLabel:!0}))}e.selectToShow()},async getArea(){let a={pageNo:1,pageSize:500,scaling:13,needChild:!0,minLng:103.03230162703443,maxLat:27.29143172979689,maxLng:125.87792994046954,minLat:17.04606397468649,longitude:114.45511578375198,latitude:22.16874785224169,radius:1304.4525,height:1883333,en:this.$root.$i18n.locale==="en-GB"?"1":"2",gisType:3,attrs:"windfarmStatus, groupAbbreviation, capacity, windTurbineMill, depthSea, city, depthType, designer,contractor",entityId:19478,type:"1"},{result:e}=await c(a),i=e.filter((n,s)=>this.aeraType.map(l=>l.id).includes(s));i.forEach(n=>{n.forEach((s,l)=>{s.color=this.colorList[l]})}),this.areaTypeData=i;let t=JSON.parse(JSON.stringify(this.areaTypeData[2])),r=t.findIndex(n=>n.name==="其他");if(r!==-1){let n=t.splice(r,1);this.ownerColors=[...t,...n].map((s,l)=>({name:s.name,color:this.colorList[l]}))}},clearMap(){this.selectVal="";let a=this.map();a.clearMap(),a.loadPageData(),this.$emit("changeShowOverview",!1),this.$emit("initMapData")}}};var p=function(){var e=this,i=e._self._c;return i("div",{staticClass:"bottom-menu"},[i("div",{staticClass:"aera_list"},[i("div",{staticClass:"aera_color"},e._l(e.areaTypeData[e.selectVal],function(t,r){return i("div",{key:t.key,staticClass:"aera_box",on:{click:function(n){return e.onShow(r)}}},[i("div",{staticClass:"bg_color",style:{background:e.hiddenBloack.includes(r)?"#FFFFFF22":t.color}}),i("div",{staticClass:"txt"},[e._v(" "+e._s(t.name)+" ")])])}),0)]),i("div",{staticClass:"btm-menu-list"},e._l(e.aeraType,function(t,r){return i("div",{directives:[{name:"auth",rawName:"v-auth",value:[t.authKey],expression:"[area.authKey]"}],key:r,class:{"area-active":e.selectVal===r},on:{click:function(n){return e.onHandleChange(r)}}},[e._v(" "+e._s(t.title)+" ")])}),0)])},u=[],m=o(h,p,u,!1,null,"1a08109c");const y=m.exports;export{y as default};
