import{n as a,K as o}from"./index-FdyGBlLz.js";const n={props:{pieDataArr:{type:Array,default:()=>[]},pieOption:{type:Object,default:null},maxItem:{type:Number,default:5},otherOption:{type:Object,default:()=>{}},id:{type:String,default:"chart-box"}},data(){return{charts:null}},watch:{pieOptionC:{deep:!0,immediate:!0,handler(){this.$nextTick(()=>{this.pieDataArr.length&&this.init()})}}},computed:{defaultOption(){let e=this.pieDataArr.sort((r,s)=>s.y-r.y),t=[],i={name:"其他",y:0,color:"#b867da"};if(e.length>this.maxItem)for(let r=this.maxItem;r<e.length;r++){let s=e[r];i.y+=s.y}for(let r=0;r<this.maxItem;r++)t.push(e[r]);return i.y>0&&t.push(i),{chart:{type:"pie",animation:!1,backgroundColor:"transparent",options3d:{enabled:!0,alpha:65,beta:0}},title:{text:""},credits:{enabled:!1},plotOptions:{pie:{center:["50%","32%"],size:180,depth:40,innerSize:"60%"}},tooltip:{useHTML:!0,padding:0,backgroundColor:"transparent",shadow:!1,borderColor:"transparent",formatter(){return`<div class="boxHoverStyle">
              <div>${this.point.name}</div>
              <div class="boxFlex">
                <div class="round" style="background-color: ${this.color}"></div>
                <div>${this.point.y}个 ${(this.y/this.total*100).toFixed(2)}%</div>
              </div>
              </div>`}},series:[{data:t,showInLegend:!1,shadow:!0,borderColor:"red",dataLabels:{padding:0,distance:20,useHTML:!0,formatter:function(){return`<div class="topText">${this.key}</div><div style="color: #FFF;">${this.y}个 ${(this.y/this.total*100).toFixed(2)}%</div>`}}}],...this.otherOption}},pieOptionC(){return this.pieOption||this.defaultOption}},mounted(){new ResizeObserver(this.resetSize).observe(this.$refs.chartBox)},methods:{init(){this.charts=o.chart(this.id,this.pieOptionC)},debounce(e,t){let i=null;return function(){i!==null&&clearTimeout(i),i=setTimeout(e,t)}},resetSize(){if(this&&this.charts&&this.$refs.chartBox){let e=this.$refs.chartBox.clientWidth,t=this.$refs.chartBox.clientHeight;this.charts.setSize(e,t)}}}};var h=function(){var t=this,i=t._self._c;return i("div",{ref:"chartBox",staticStyle:{width:"100%",height:"100%"},attrs:{id:t.id}})},l=[],d=a(n,h,l,!1,null,null);const p=d.exports;export{p as default};
