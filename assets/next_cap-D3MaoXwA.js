import { _ as R, t as bT, a as ET } from "./defineProperty-EJDAiRQC.js";
import {
  a6 as Kb,
  a7 as AT,
  a8 as t4,
  a9 as ea,
  aa as TT,
  ab as n3,
  ac as r3,
  ad as ST,
  ae as wT,
  af as CT,
  ag as NT,
  ah as RT,
  ai as IT,
  aj as MT,
  ak as PT,
  al as OT,
  am as LT,
  an as DT,
  ao as BT,
  ap as FT,
  aq as I1,
  ar as kT,
  as as UT,
  at as zT,
  au as VT,
  av as HT,
  aw as jT,
  ax as WT,
  ay as XT,
  az as GT,
  aA as ZT,
  aB as cv,
  aC as n4,
  n as kp,
  a0 as Eg,
  F as Y0,
  G as Qb,
  aD as YT,
  aE as qT,
  aF as $T,
} from "./index-FdyGBlLz.js";
import { g as Ag, c as r4 } from "./carousel-3d.common-Cm2eDS3K.js";
var i4 = 1 / 0,
  KT = 17976931348623157e292;
function QT(t) {
  if (!t) return t === 0 ? t : 0;
  if (((t = Kb(t)), t === i4 || t === -i4)) {
    var e = t < 0 ? -1 : 1;
    return e * KT;
  }
  return t === t ? t : 0;
}
function JT(t) {
  var e = QT(t),
    n = e % 1;
  return e === e ? (n ? e - n : e) : 0;
}
var eS = AT.isFinite,
  tS = Math.min;
function nS(t) {
  var e = Math[t];
  return function (n, r) {
    if (((n = Kb(n)), (r = r == null ? 0 : tS(JT(r), 292)), r && eS(n))) {
      var o = (t4(n) + "e").split("e"),
        l = e(o[0] + "e" + (+o[1] + r));
      return (o = (t4(l) + "e").split("e")), +(o[0] + "e" + (+o[1] - r));
    }
    return e(n);
  };
}
var a4 = nS("round"),
  Jb = {},
  eE = {},
  o4 = (t) => eE[t],
  Nl = (t, e) => {
    eE[t] = e;
  },
  rS = (t) => Jb[t],
  Up = (t, e) => {
    Jb[t] = e;
  },
  s4 = {},
  a2 = {},
  o2 = 34,
  yf = 10,
  s2 = 13;
function tE(t) {
  return new Function(
    "d",
    "return {" +
      t
        .map(function (e, n) {
          return JSON.stringify(e) + ": d[" + n + '] || ""';
        })
        .join(",") +
      "}"
  );
}
function iS(t, e) {
  var n = tE(t);
  return function (r, o) {
    return e(n(r), o, t);
  };
}
function l4(t) {
  var e = Object.create(null),
    n = [];
  return (
    t.forEach(function (r) {
      for (var o in r) o in e || n.push((e[o] = o));
    }),
    n
  );
}
function Ks(t, e) {
  var n = t + "",
    r = n.length;
  return r < e ? new Array(e - r + 1).join(0) + n : n;
}
function aS(t) {
  return t < 0 ? "-" + Ks(-t, 6) : t > 9999 ? "+" + Ks(t, 6) : Ks(t, 4);
}
function oS(t) {
  var e = t.getUTCHours(),
    n = t.getUTCMinutes(),
    r = t.getUTCSeconds(),
    o = t.getUTCMilliseconds();
  return isNaN(t)
    ? "Invalid Date"
    : aS(t.getUTCFullYear()) +
        "-" +
        Ks(t.getUTCMonth() + 1, 2) +
        "-" +
        Ks(t.getUTCDate(), 2) +
        (o
          ? "T" +
            Ks(e, 2) +
            ":" +
            Ks(n, 2) +
            ":" +
            Ks(r, 2) +
            "." +
            Ks(o, 3) +
            "Z"
          : r
          ? "T" + Ks(e, 2) + ":" + Ks(n, 2) + ":" + Ks(r, 2) + "Z"
          : n || e
          ? "T" + Ks(e, 2) + ":" + Ks(n, 2) + "Z"
          : "");
}
function sS(t) {
  var e = new RegExp(
      '["' +
        t +
        `
\r]`
    ),
    n = t.charCodeAt(0);
  function r(x, T) {
    var N,
      I,
      L = o(x, function (F, X) {
        if (N) return N(F, X - 1);
        (I = F), (N = T ? iS(F, T) : tE(F));
      });
    return (L.columns = I || []), L;
  }
  function o(x, T) {
    var N = [],
      I = x.length,
      L = 0,
      F = 0,
      X,
      G = I <= 0,
      K = !1;
    x.charCodeAt(I - 1) === yf && --I, x.charCodeAt(I - 1) === s2 && --I;
    function Q() {
      if (G) return a2;
      if (K) return (K = !1), s4;
      var Se,
        ue = L,
        ke;
      if (x.charCodeAt(ue) === o2) {
        for (
          ;
          (L++ < I && x.charCodeAt(L) !== o2) || x.charCodeAt(++L) === o2;

        );
        return (
          (Se = L) >= I
            ? (G = !0)
            : (ke = x.charCodeAt(L++)) === yf
            ? (K = !0)
            : ke === s2 && ((K = !0), x.charCodeAt(L) === yf && ++L),
          x.slice(ue + 1, Se - 1).replace(/""/g, '"')
        );
      }
      for (; L < I; ) {
        if ((ke = x.charCodeAt((Se = L++))) === yf) K = !0;
        else if (ke === s2) (K = !0), x.charCodeAt(L) === yf && ++L;
        else if (ke !== n) continue;
        return x.slice(ue, Se);
      }
      return (G = !0), x.slice(ue, I);
    }
    for (; (X = Q()) !== a2; ) {
      for (var ee = []; X !== s4 && X !== a2; ) ee.push(X), (X = Q());
      (T && (ee = T(ee, F++)) == null) || N.push(ee);
    }
    return N;
  }
  function l(x, T) {
    return x.map(function (N) {
      return T.map(function (I) {
        return E(N[I]);
      }).join(t);
    });
  }
  function a(x, T) {
    return (
      T == null && (T = l4(x)),
      [T.map(E).join(t)].concat(l(x, T)).join(`
`)
    );
  }
  function h(x, T) {
    return (
      T == null && (T = l4(x)),
      l(x, T).join(`
`)
    );
  }
  function f(x) {
    return x.map(v).join(`
`);
  }
  function v(x) {
    return x.map(E).join(t);
  }
  function E(x) {
    return x == null
      ? ""
      : x instanceof Date
      ? oS(x)
      : e.test((x += ""))
      ? '"' + x.replace(/"/g, '""') + '"'
      : x;
  }
  return {
    parse: r,
    parseRows: o,
    format: a,
    formatBody: h,
    formatRows: f,
    formatRow: v,
    formatValue: E,
  };
}
var lS = sS(","),
  cS = lS.parse,
  $s = 63710088e-1,
  uS = {
    centimeters: $s * 100,
    centimetres: $s * 100,
    degrees: $s / 111325,
    feet: $s * 3.28084,
    inches: $s * 39.37,
    kilometers: $s / 1e3,
    kilometres: $s / 1e3,
    meters: $s,
    metres: $s,
    miles: $s / 1609.344,
    millimeters: $s * 1e3,
    millimetres: $s * 1e3,
    nauticalmiles: $s / 1852,
    radians: 1,
    yards: $s * 1.0936,
  };
function d1(t, e, n) {
  n === void 0 && (n = {});
  var r = { type: "Feature" };
  return (
    (n.id === 0 || n.id) && (r.id = n.id),
    n.bbox && (r.bbox = n.bbox),
    (r.properties = e || {}),
    (r.geometry = t),
    r
  );
}
function i3(t, e, n) {
  n === void 0 && (n = {});
  for (var r = 0, o = t; r < o.length; r++) {
    var l = o[r];
    if (l.length < 4)
      throw new Error(
        "Each LinearRing of a Polygon must have 4 or more Positions."
      );
    for (var a = 0; a < l[l.length - 1].length; a++)
      if (l[l.length - 1][a] !== l[0][a])
        throw new Error("First and last Position are not equivalent.");
  }
  var h = { type: "Polygon", coordinates: t };
  return d1(h, e, n);
}
function dS(t, e, n) {
  if ((n === void 0 && (n = {}), t.length < 2))
    throw new Error("coordinates must be an array of two or more positions");
  var r = { type: "LineString", coordinates: t };
  return d1(r, e, n);
}
function hS(t, e) {
  e === void 0 && (e = {});
  var n = { type: "FeatureCollection" };
  return (
    e.id && (n.id = e.id), e.bbox && (n.bbox = e.bbox), (n.features = t), n
  );
}
function pS(t, e, n) {
  n === void 0 && (n = {});
  var r = { type: "MultiPolygon", coordinates: t };
  return d1(r, e, n);
}
function fS(t, e) {
  e === void 0 && (e = "kilometers");
  var n = uS[e];
  if (!n) throw new Error(e + " units is invalid");
  return t * n;
}
function Nm(t) {
  var e = t % 360;
  return (e * Math.PI) / 180;
}
function nE(t) {
  if (Array.isArray(t)) return t;
  if (t.type === "Feature") {
    if (t.geometry !== null) return t.geometry.coordinates;
  } else if (t.coordinates) return t.coordinates;
  throw new Error(
    "coords must be GeoJSON Feature, Geometry Object or an Array"
  );
}
function c4(t) {
  return t.type === "Feature" ? t.geometry : t;
}
function rE(t, e, n) {
  if (t !== null)
    for (
      var r,
        o,
        l,
        a,
        h,
        f,
        v,
        E = 0,
        x = 0,
        T,
        N = t.type,
        I = N === "FeatureCollection",
        L = N === "Feature",
        F = I ? t.features.length : 1,
        X = 0;
      X < F;
      X++
    ) {
      (v = I ? t.features[X].geometry : L ? t.geometry : t),
        (T = v ? v.type === "GeometryCollection" : !1),
        (h = T ? v.geometries.length : 1);
      for (var G = 0; G < h; G++) {
        var K = 0,
          Q = 0;
        if (((a = T ? v.geometries[G] : v), a !== null)) {
          f = a.coordinates;
          var ee = a.type;
          switch (((E = 0), ee)) {
            case null:
              break;
            case "Point":
              if (e(f, x, X, K, Q) === !1) return !1;
              x++, K++;
              break;
            case "LineString":
            case "MultiPoint":
              for (r = 0; r < f.length; r++) {
                if (e(f[r], x, X, K, Q) === !1) return !1;
                x++, ee === "MultiPoint" && K++;
              }
              ee === "LineString" && K++;
              break;
            case "Polygon":
            case "MultiLineString":
              for (r = 0; r < f.length; r++) {
                for (o = 0; o < f[r].length - E; o++) {
                  if (e(f[r][o], x, X, K, Q) === !1) return !1;
                  x++;
                }
                ee === "MultiLineString" && K++, ee === "Polygon" && Q++;
              }
              ee === "Polygon" && K++;
              break;
            case "MultiPolygon":
              for (r = 0; r < f.length; r++) {
                for (Q = 0, o = 0; o < f[r].length; o++) {
                  for (l = 0; l < f[r][o].length - E; l++) {
                    if (e(f[r][o][l], x, X, K, Q) === !1) return !1;
                    x++;
                  }
                  Q++;
                }
                K++;
              }
              break;
            case "GeometryCollection":
              for (r = 0; r < a.geometries.length; r++)
                if (rE(a.geometries[r], e) === !1) return !1;
              break;
            default:
              throw new Error("Unknown Geometry Type");
          }
        }
      }
    }
}
function mS(t, e) {
  var n,
    r,
    o,
    l,
    a,
    h,
    f,
    v,
    E,
    x,
    T = 0,
    N = t.type === "FeatureCollection",
    I = t.type === "Feature",
    L = N ? t.features.length : 1;
  for (n = 0; n < L; n++) {
    for (
      h = N ? t.features[n].geometry : I ? t.geometry : t,
        v = N ? t.features[n].properties : I ? t.properties : {},
        E = N ? t.features[n].bbox : I ? t.bbox : void 0,
        x = N ? t.features[n].id : I ? t.id : void 0,
        f = h ? h.type === "GeometryCollection" : !1,
        a = f ? h.geometries.length : 1,
        o = 0;
      o < a;
      o++
    ) {
      if (((l = f ? h.geometries[o] : h), l === null)) {
        if (e(null, T, v, E, x) === !1) return !1;
        continue;
      }
      switch (l.type) {
        case "Point":
        case "LineString":
        case "MultiPoint":
        case "Polygon":
        case "MultiLineString":
        case "MultiPolygon": {
          if (e(l, T, v, E, x) === !1) return !1;
          break;
        }
        case "GeometryCollection": {
          for (r = 0; r < l.geometries.length; r++)
            if (e(l.geometries[r], T, v, E, x) === !1) return !1;
          break;
        }
        default:
          throw new Error("Unknown Geometry Type");
      }
    }
    T++;
  }
}
function iE(t, e) {
  mS(t, function (n, r, o, l, a) {
    var h = n === null ? null : n.type;
    switch (h) {
      case null:
      case "Point":
      case "LineString":
      case "Polygon":
        return e(d1(n, o, { bbox: l, id: a }), r, 0) === !1 ? !1 : void 0;
    }
    var f;
    switch (h) {
      case "MultiPoint":
        f = "Point";
        break;
      case "MultiLineString":
        f = "LineString";
        break;
      case "MultiPolygon":
        f = "Polygon";
        break;
    }
    for (var v = 0; v < n.coordinates.length; v++) {
      var E = n.coordinates[v],
        x = { type: f, coordinates: E };
      if (e(d1(x, o), r, v) === !1) return !1;
    }
  });
}
var ag = { REGISTERED_PROTOCOLS: {} },
  gS = Object.defineProperty,
  vS = Object.defineProperties,
  _S = Object.getOwnPropertyDescriptors,
  u4 = Object.getOwnPropertySymbols,
  yS = Object.prototype.hasOwnProperty,
  xS = Object.prototype.propertyIsEnumerable,
  d4 = (t, e, n) =>
    e in t
      ? gS(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  a3 = (t, e) => {
    for (var n in e || (e = {})) yS.call(e, n) && d4(t, n, e[n]);
    if (u4) for (var n of u4(e)) xS.call(e, n) && d4(t, n, e[n]);
    return t;
  },
  o3 = (t, e) => vS(t, _S(e)),
  s3 = (t) => ag.REGISTERED_PROTOCOLS[t.substring(0, t.indexOf("://"))],
  bS = class extends Error {
    constructor(t, e, n, r) {
      super(`AJAXError: ${e} (${t}): ${n}`),
        (this.status = t),
        (this.statusText = e),
        (this.url = n),
        (this.body = r);
    }
  };
function aE(t, e) {
  const n = new XMLHttpRequest(),
    r = Array.isArray(t.url) ? t.url[0] : t.url;
  n.open(t.method || "GET", r, !0),
    t.type === "arrayBuffer" && (n.responseType = "arraybuffer");
  for (const o in t.headers)
    t.headers.hasOwnProperty(o) && n.setRequestHeader(o, t.headers[o]);
  return (
    t.type === "json" &&
      ((n.responseType = "text"),
      n.setRequestHeader("Accept", "application/json")),
    (n.withCredentials = t.credentials === "include"),
    (n.onerror = () => {
      e(new Error(n.statusText));
    }),
    (n.onload = () => {
      if (
        ((n.status >= 200 && n.status < 300) || n.status === 0) &&
        n.response !== null
      ) {
        let o = n.response;
        if (t.type === "json")
          try {
            o = JSON.parse(n.response);
          } catch (l) {
            return e(l);
          }
        e(
          null,
          o,
          n.getResponseHeader("Cache-Control"),
          n.getResponseHeader("Expires"),
          n
        );
      } else {
        const o = new Blob([n.response], {
          type: n.getResponseHeader("Content-Type"),
        });
        e(new bS(n.status, n.statusText, r.toString(), o));
      }
    }),
    (n.cancel = n.abort),
    n.send(t.body),
    n
  );
}
function ES(t) {
  return new Promise((e, n) => {
    aE(t, (r, o, l, a, h) => {
      r
        ? n({ err: r, data: null, xhr: h })
        : e({ err: null, data: o, cacheControl: l, expires: a, xhr: h });
    });
  });
}
function l3(t, e) {
  return aE(t, e);
}
var AS = (t, e) => (s3(t.url) || l3)(o3(a3({}, t), { type: "json" }), e),
  c3 = (t, e) => (s3(t.url) || l3)(o3(a3({}, t), { type: "arrayBuffer" }), e),
  TS = (t, e) => l3(o3(a3({}, t), { method: "GET" }), e),
  h4 =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";
function oE(t, e) {
  const n = new window.Image(),
    r = window.URL || window.webkitURL;
  (n.crossOrigin = "anonymous"),
    (n.onload = () => {
      e(null, n),
        r.revokeObjectURL(n.src),
        (n.onload = null),
        window.requestAnimationFrame(() => {
          n.src = h4;
        });
    }),
    (n.onerror = () =>
      e(
        new Error(
          "Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."
        )
      ));
  const o = new Blob([new Uint8Array(t)], { type: "image/png" });
  n.src = t.byteLength ? r.createObjectURL(o) : h4;
}
function sE(t, e) {
  const n = new Blob([new Uint8Array(t)], { type: "image/png" });
  createImageBitmap(n)
    .then((r) => {
      e(null, r);
    })
    .catch((r) => {
      e(
        new Error(
          `Could not load image because of ${r.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`
        )
      );
    });
}
var G2 = (t, e, n) => {
    const r = (o, l) => {
      if (o) e(o);
      else if (l) {
        const a = typeof createImageBitmap == "function",
          h = n ? n(l) : l;
        a ? sE(h, e) : oE(h, e);
      }
    };
    return t.type === "json" ? AS(t, r) : c3(t, r);
  },
  SS = (t, e) => {
    typeof createImageBitmap == "function" ? sE(t, e) : oE(t, e);
  },
  uv = ((t) => (
    (t.CENTER = "center"),
    (t.TOP = "top"),
    (t["TOP-LEFT"] = "top-left"),
    (t["TOP-RIGHT"] = "top-right"),
    (t.BOTTOM = "bottom"),
    (t["BOTTOM-LEFT"] = "bottom-left"),
    (t["BOTTOM-RIGHT"] = "bottom-right"),
    (t.LEFT = "left"),
    (t.RIGHT = "right"),
    t
  ))(uv || {}),
  Tg = {
    center: "translate(-50%,-50%)",
    top: "translate(-50%,0)",
    "top-left": "translate(0,0)",
    "top-right": "translate(-100%,0)",
    bottom: "translate(-50%,-100%)",
    "bottom-left": "translate(0,-100%)",
    "bottom-right": "translate(-100%,-100%)",
    left: "translate(0,-50%)",
    right: "translate(-100%,-50%)",
  };
function lE(t, e, n) {
  const r = t.classList;
  for (const o in Tg) Tg.hasOwnProperty(o) && r.remove(`l7-${n}-anchor-${o}`);
  r.add(`l7-${n}-anchor-${e}`);
}
function u3(t, e, n) {
  (t.prototype = e.prototype = n), (n.constructor = t);
}
function cE(t, e) {
  var n = Object.create(t.prototype);
  for (var r in e) n[r] = e[r];
  return n;
}
function M1() {}
var h1 = 0.7,
  Sg = 1 / h1,
  mp = "\\s*([+-]?\\d+)\\s*",
  p1 = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",
  bu = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",
  wS = /^#([0-9a-f]{3,8})$/,
  CS = new RegExp("^rgb\\(" + [mp, mp, mp] + "\\)$"),
  NS = new RegExp("^rgb\\(" + [bu, bu, bu] + "\\)$"),
  RS = new RegExp("^rgba\\(" + [mp, mp, mp, p1] + "\\)$"),
  IS = new RegExp("^rgba\\(" + [bu, bu, bu, p1] + "\\)$"),
  MS = new RegExp("^hsl\\(" + [p1, bu, bu] + "\\)$"),
  PS = new RegExp("^hsla\\(" + [p1, bu, bu, p1] + "\\)$"),
  p4 = {
    aliceblue: 15792383,
    antiquewhite: 16444375,
    aqua: 65535,
    aquamarine: 8388564,
    azure: 15794175,
    beige: 16119260,
    bisque: 16770244,
    black: 0,
    blanchedalmond: 16772045,
    blue: 255,
    blueviolet: 9055202,
    brown: 10824234,
    burlywood: 14596231,
    cadetblue: 6266528,
    chartreuse: 8388352,
    chocolate: 13789470,
    coral: 16744272,
    cornflowerblue: 6591981,
    cornsilk: 16775388,
    crimson: 14423100,
    cyan: 65535,
    darkblue: 139,
    darkcyan: 35723,
    darkgoldenrod: 12092939,
    darkgray: 11119017,
    darkgreen: 25600,
    darkgrey: 11119017,
    darkkhaki: 12433259,
    darkmagenta: 9109643,
    darkolivegreen: 5597999,
    darkorange: 16747520,
    darkorchid: 10040012,
    darkred: 9109504,
    darksalmon: 15308410,
    darkseagreen: 9419919,
    darkslateblue: 4734347,
    darkslategray: 3100495,
    darkslategrey: 3100495,
    darkturquoise: 52945,
    darkviolet: 9699539,
    deeppink: 16716947,
    deepskyblue: 49151,
    dimgray: 6908265,
    dimgrey: 6908265,
    dodgerblue: 2003199,
    firebrick: 11674146,
    floralwhite: 16775920,
    forestgreen: 2263842,
    fuchsia: 16711935,
    gainsboro: 14474460,
    ghostwhite: 16316671,
    gold: 16766720,
    goldenrod: 14329120,
    gray: 8421504,
    green: 32768,
    greenyellow: 11403055,
    grey: 8421504,
    honeydew: 15794160,
    hotpink: 16738740,
    indianred: 13458524,
    indigo: 4915330,
    ivory: 16777200,
    khaki: 15787660,
    lavender: 15132410,
    lavenderblush: 16773365,
    lawngreen: 8190976,
    lemonchiffon: 16775885,
    lightblue: 11393254,
    lightcoral: 15761536,
    lightcyan: 14745599,
    lightgoldenrodyellow: 16448210,
    lightgray: 13882323,
    lightgreen: 9498256,
    lightgrey: 13882323,
    lightpink: 16758465,
    lightsalmon: 16752762,
    lightseagreen: 2142890,
    lightskyblue: 8900346,
    lightslategray: 7833753,
    lightslategrey: 7833753,
    lightsteelblue: 11584734,
    lightyellow: 16777184,
    lime: 65280,
    limegreen: 3329330,
    linen: 16445670,
    magenta: 16711935,
    maroon: 8388608,
    mediumaquamarine: 6737322,
    mediumblue: 205,
    mediumorchid: 12211667,
    mediumpurple: 9662683,
    mediumseagreen: 3978097,
    mediumslateblue: 8087790,
    mediumspringgreen: 64154,
    mediumturquoise: 4772300,
    mediumvioletred: 13047173,
    midnightblue: 1644912,
    mintcream: 16121850,
    mistyrose: 16770273,
    moccasin: 16770229,
    navajowhite: 16768685,
    navy: 128,
    oldlace: 16643558,
    olive: 8421376,
    olivedrab: 7048739,
    orange: 16753920,
    orangered: 16729344,
    orchid: 14315734,
    palegoldenrod: 15657130,
    palegreen: 10025880,
    paleturquoise: 11529966,
    palevioletred: 14381203,
    papayawhip: 16773077,
    peachpuff: 16767673,
    peru: 13468991,
    pink: 16761035,
    plum: 14524637,
    powderblue: 11591910,
    purple: 8388736,
    rebeccapurple: 6697881,
    red: 16711680,
    rosybrown: 12357519,
    royalblue: 4286945,
    saddlebrown: 9127187,
    salmon: 16416882,
    sandybrown: 16032864,
    seagreen: 3050327,
    seashell: 16774638,
    sienna: 10506797,
    silver: 12632256,
    skyblue: 8900331,
    slateblue: 6970061,
    slategray: 7372944,
    slategrey: 7372944,
    snow: 16775930,
    springgreen: 65407,
    steelblue: 4620980,
    tan: 13808780,
    teal: 32896,
    thistle: 14204888,
    tomato: 16737095,
    turquoise: 4251856,
    violet: 15631086,
    wheat: 16113331,
    white: 16777215,
    whitesmoke: 16119285,
    yellow: 16776960,
    yellowgreen: 10145074,
  };
u3(M1, Tp, {
  copy: function (t) {
    return Object.assign(new this.constructor(), this, t);
  },
  displayable: function () {
    return this.rgb().displayable();
  },
  hex: f4,
  formatHex: f4,
  formatHsl: OS,
  formatRgb: m4,
  toString: m4,
});
function f4() {
  return this.rgb().formatHex();
}
function OS() {
  return uE(this).formatHsl();
}
function m4() {
  return this.rgb().formatRgb();
}
function Tp(t) {
  var e, n;
  return (
    (t = (t + "").trim().toLowerCase()),
    (e = wS.exec(t))
      ? ((n = e[1].length),
        (e = parseInt(e[1], 16)),
        n === 6
          ? g4(e)
          : n === 3
          ? new Cl(
              ((e >> 8) & 15) | ((e >> 4) & 240),
              ((e >> 4) & 15) | (e & 240),
              ((e & 15) << 4) | (e & 15),
              1
            )
          : n === 8
          ? Rm(
              (e >> 24) & 255,
              (e >> 16) & 255,
              (e >> 8) & 255,
              (e & 255) / 255
            )
          : n === 4
          ? Rm(
              ((e >> 12) & 15) | ((e >> 8) & 240),
              ((e >> 8) & 15) | ((e >> 4) & 240),
              ((e >> 4) & 15) | (e & 240),
              (((e & 15) << 4) | (e & 15)) / 255
            )
          : null)
      : (e = CS.exec(t))
      ? new Cl(e[1], e[2], e[3], 1)
      : (e = NS.exec(t))
      ? new Cl((e[1] * 255) / 100, (e[2] * 255) / 100, (e[3] * 255) / 100, 1)
      : (e = RS.exec(t))
      ? Rm(e[1], e[2], e[3], e[4])
      : (e = IS.exec(t))
      ? Rm((e[1] * 255) / 100, (e[2] * 255) / 100, (e[3] * 255) / 100, e[4])
      : (e = MS.exec(t))
      ? y4(e[1], e[2] / 100, e[3] / 100, 1)
      : (e = PS.exec(t))
      ? y4(e[1], e[2] / 100, e[3] / 100, e[4])
      : p4.hasOwnProperty(t)
      ? g4(p4[t])
      : t === "transparent"
      ? new Cl(NaN, NaN, NaN, 0)
      : null
  );
}
function g4(t) {
  return new Cl((t >> 16) & 255, (t >> 8) & 255, t & 255, 1);
}
function Rm(t, e, n, r) {
  return r <= 0 && (t = e = n = NaN), new Cl(t, e, n, r);
}
function LS(t) {
  return (
    t instanceof M1 || (t = Tp(t)),
    t ? ((t = t.rgb()), new Cl(t.r, t.g, t.b, t.opacity)) : new Cl()
  );
}
function wg(t, e, n, r) {
  return arguments.length === 1 ? LS(t) : new Cl(t, e, n, r ?? 1);
}
function Cl(t, e, n, r) {
  (this.r = +t), (this.g = +e), (this.b = +n), (this.opacity = +r);
}
u3(
  Cl,
  wg,
  cE(M1, {
    brighter: function (t) {
      return (
        (t = t == null ? Sg : Math.pow(Sg, t)),
        new Cl(this.r * t, this.g * t, this.b * t, this.opacity)
      );
    },
    darker: function (t) {
      return (
        (t = t == null ? h1 : Math.pow(h1, t)),
        new Cl(this.r * t, this.g * t, this.b * t, this.opacity)
      );
    },
    rgb: function () {
      return this;
    },
    displayable: function () {
      return (
        -0.5 <= this.r &&
        this.r < 255.5 &&
        -0.5 <= this.g &&
        this.g < 255.5 &&
        -0.5 <= this.b &&
        this.b < 255.5 &&
        0 <= this.opacity &&
        this.opacity <= 1
      );
    },
    hex: v4,
    formatHex: v4,
    formatRgb: _4,
    toString: _4,
  })
);
function v4() {
  return "#" + l2(this.r) + l2(this.g) + l2(this.b);
}
function _4() {
  var t = this.opacity;
  return (
    (t = isNaN(t) ? 1 : Math.max(0, Math.min(1, t))),
    (t === 1 ? "rgb(" : "rgba(") +
      Math.max(0, Math.min(255, Math.round(this.r) || 0)) +
      ", " +
      Math.max(0, Math.min(255, Math.round(this.g) || 0)) +
      ", " +
      Math.max(0, Math.min(255, Math.round(this.b) || 0)) +
      (t === 1 ? ")" : ", " + t + ")")
  );
}
function l2(t) {
  return (
    (t = Math.max(0, Math.min(255, Math.round(t) || 0))),
    (t < 16 ? "0" : "") + t.toString(16)
  );
}
function y4(t, e, n, r) {
  return (
    r <= 0
      ? (t = e = n = NaN)
      : n <= 0 || n >= 1
      ? (t = e = NaN)
      : e <= 0 && (t = NaN),
    new gu(t, e, n, r)
  );
}
function uE(t) {
  if (t instanceof gu) return new gu(t.h, t.s, t.l, t.opacity);
  if ((t instanceof M1 || (t = Tp(t)), !t)) return new gu();
  if (t instanceof gu) return t;
  t = t.rgb();
  var e = t.r / 255,
    n = t.g / 255,
    r = t.b / 255,
    o = Math.min(e, n, r),
    l = Math.max(e, n, r),
    a = NaN,
    h = l - o,
    f = (l + o) / 2;
  return (
    h
      ? (e === l
          ? (a = (n - r) / h + (n < r) * 6)
          : n === l
          ? (a = (r - e) / h + 2)
          : (a = (e - n) / h + 4),
        (h /= f < 0.5 ? l + o : 2 - l - o),
        (a *= 60))
      : (h = f > 0 && f < 1 ? 0 : a),
    new gu(a, h, f, t.opacity)
  );
}
function DS(t, e, n, r) {
  return arguments.length === 1 ? uE(t) : new gu(t, e, n, r ?? 1);
}
function gu(t, e, n, r) {
  (this.h = +t), (this.s = +e), (this.l = +n), (this.opacity = +r);
}
u3(
  gu,
  DS,
  cE(M1, {
    brighter: function (t) {
      return (
        (t = t == null ? Sg : Math.pow(Sg, t)),
        new gu(this.h, this.s, this.l * t, this.opacity)
      );
    },
    darker: function (t) {
      return (
        (t = t == null ? h1 : Math.pow(h1, t)),
        new gu(this.h, this.s, this.l * t, this.opacity)
      );
    },
    rgb: function () {
      var t = (this.h % 360) + (this.h < 0) * 360,
        e = isNaN(t) || isNaN(this.s) ? 0 : this.s,
        n = this.l,
        r = n + (n < 0.5 ? n : 1 - n) * e,
        o = 2 * n - r;
      return new Cl(
        c2(t >= 240 ? t - 240 : t + 120, o, r),
        c2(t, o, r),
        c2(t < 120 ? t + 240 : t - 120, o, r),
        this.opacity
      );
    },
    displayable: function () {
      return (
        ((0 <= this.s && this.s <= 1) || isNaN(this.s)) &&
        0 <= this.l &&
        this.l <= 1 &&
        0 <= this.opacity &&
        this.opacity <= 1
      );
    },
    formatHsl: function () {
      var t = this.opacity;
      return (
        (t = isNaN(t) ? 1 : Math.max(0, Math.min(1, t))),
        (t === 1 ? "hsl(" : "hsla(") +
          (this.h || 0) +
          ", " +
          (this.s || 0) * 100 +
          "%, " +
          (this.l || 0) * 100 +
          "%" +
          (t === 1 ? ")" : ", " + t + ")")
      );
    },
  })
);
function c2(t, e, n) {
  return (
    (t < 60
      ? e + ((n - e) * t) / 60
      : t < 180
      ? n
      : t < 240
      ? e + ((n - e) * (240 - t)) / 60
      : e) * 255
  );
}
function Bi(t) {
  const e = Tp(t),
    n = [0, 0, 0, 0];
  return (
    e != null &&
      ((n[0] = e.r / 255),
      (n[1] = e.g / 255),
      (n[2] = e.b / 255),
      (n[3] = e.opacity)),
    n
  );
}
function K0(t) {
  const e = t && t[0],
    n = t && t[1],
    r = t && t[2];
  return e + n * 256 + r * 65536 - 1;
}
function Sp(t) {
  return [(t + 1) & 255, ((t + 1) >> 8) & 255, (((t + 1) >> 8) >> 8) & 255];
}
function BS(t) {
  let e = window.document.createElement("canvas"),
    n = e.getContext("2d");
  (e.width = 256), (e.height = 1);
  let r = null;
  const o = n.createLinearGradient(0, 0, 256, 1),
    l = t.positions[0],
    a = t.positions[t.positions.length - 1];
  for (let h = 0; h < t.colors.length; ++h) {
    const f = (t.positions[h] - l) / (a - l);
    o.addColorStop(f, t.colors[h]);
  }
  return (
    (n.fillStyle = o),
    n.fillRect(0, 0, 256, 1),
    (r = new Uint8ClampedArray(n.getImageData(0, 0, 256, 1).data)),
    (e = null),
    (n = null),
    { data: r, width: 256, height: 1 }
  );
}
function FS(t, e) {
  let n = window.document.createElement("canvas"),
    r = n.getContext("2d");
  (n.width = 256), (n.height = 1);
  const o = r.createLinearGradient(0, 0, 256, 1),
    l = e[1] - e[0];
  for (let f = 0; f < t.colors.length; ++f) {
    const v = Math.max((t.positions[f] - e[0]) / l, 0);
    o.addColorStop(v, t.colors[f]);
  }
  (r.fillStyle = o), r.fillRect(0, 0, 256, 1);
  const a = r.getImageData(0, 0, 256, 1).data,
    h = d3(r, a);
  return (n = null), (r = null), h;
}
function kS(t) {
  let e = window.document.createElement("canvas"),
    n = e.getContext("2d");
  (e.width = 256), (e.height = 1);
  const r = n.createImageData(256, 1);
  return (
    r.data.fill(0),
    t.positions.forEach((o, l) => {
      const a = Bi(t.colors[l]);
      (r.data[o * 4 + 0] = a[0] * 255),
        (r.data[o * 4 + 1] = a[1] * 255),
        (r.data[o * 4 + 2] = a[2] * 255),
        (r.data[o * 4 + 3] = a[3] * 255);
    }),
    (e = null),
    (n = null),
    r
  );
}
function US(t) {
  let e = window.document.createElement("canvas"),
    n = e.getContext("2d");
  (n.globalAlpha = 1), (e.width = 256), (e.height = 1);
  const r = 256 / t.colors.length;
  for (let a = 0; a < t.colors.length; a++)
    n.beginPath(),
      (n.lineWidth = 2),
      (n.strokeStyle = t.colors[a]),
      n.moveTo(a * r, 0),
      n.lineTo((a + 1) * r, 0),
      n.stroke();
  const o = n.getImageData(0, 0, 256, 1).data,
    l = d3(n, o);
  return (e = null), (n = null), l;
}
function zS(t, e) {
  let n = window.document.createElement("canvas"),
    r = n.getContext("2d");
  (r.globalAlpha = 1), (n.width = 256), (n.height = 1);
  const o = e[1] - e[0];
  t.positions.length - t.colors.length !== 1 &&
    console.warn(
      "positions 的数字个数应当比 colors 的样式多一个,poisitions 的首尾值一般为数据的最大最新值"
    );
  for (let h = 0; h < t.colors.length; h++)
    r.beginPath(),
      (r.lineWidth = 2),
      (r.strokeStyle = t.colors[h]),
      r.moveTo(((t.positions[h] - e[0]) / o) * 255, 0),
      r.lineTo(((t.positions[h + 1] - e[0]) / o) * 255, 0),
      r.stroke();
  const l = r.getImageData(0, 0, 256, 1).data,
    a = d3(r, l);
  return (n = null), (r = null), a;
}
function d3(t, e) {
  const n = t.createImageData(256, 1);
  for (let r = 0; r < n.data.length; r += 4)
    (n.data[r + 0] = e[r + 0]),
      (n.data[r + 1] = e[r + 1]),
      (n.data[r + 2] = e[r + 2]),
      (n.data[r + 3] = e[r + 3]);
  return n;
}
function h3(t) {
  switch (t == null ? void 0 : t.type) {
    case "cat":
      return [0, 255];
    default:
      return [0, 1];
  }
}
function VS(t, e, n) {
  return (
    t === t &&
      (n !== void 0 && (t = t <= n ? t : n),
      e !== void 0 && (t = t >= e ? t : e)),
    t
  );
}
var HS = VS,
  jS = HS,
  u2 = TT;
function WS(t, e, n) {
  return (
    n === void 0 && ((n = e), (e = void 0)),
    n !== void 0 && ((n = u2(n)), (n = n === n ? n : 0)),
    e !== void 0 && ((e = u2(e)), (e = e === e ? e : 0)),
    jS(u2(t), e, n)
  );
}
var XS = WS;
const GS = ea(XS);
var ZS = n3,
  YS = r3,
  qS = "[object Boolean]";
function $S(t) {
  return t === !0 || t === !1 || (YS(t) && ZS(t) == qS);
}
var KS = $S;
const QS = ea(KS);
var JS = ST;
function e9(t, e) {
  return JS(t, e);
}
var t9 = e9;
const n9 = ea(t9);
var r9 = n3,
  i9 = r3,
  a9 = "[object Number]";
function o9(t) {
  return typeof t == "number" || (i9(t) && r9(t) == a9);
}
var s9 = o9;
const l9 = ea(s9);
var c9 = n3,
  u9 = wT,
  d9 = r3,
  h9 = "[object String]";
function p9(t) {
  return typeof t == "string" || (!u9(t) && d9(t) && c9(t) == h9);
}
var f9 = p9;
const m9 = ea(f9);
var g9 = NT,
  v9 = CT,
  _9 = v9(function (t, e, n, r) {
    g9(t, e, n, r);
  }),
  y9 = _9;
const x9 = ea(y9);
function b9(t, e, n, r) {
  for (var o = n - 1, l = t.length; ++o < l; ) if (r(t[o], e)) return o;
  return -1;
}
var E9 = b9,
  A9 = RT,
  T9 = PT,
  S9 = E9,
  w9 = IT,
  C9 = MT,
  N9 = Array.prototype,
  x4 = N9.splice;
function R9(t, e, n, r) {
  var o = r ? S9 : T9,
    l = -1,
    a = e.length,
    h = t;
  for (t === e && (e = C9(e)), n && (h = A9(t, w9(n))); ++l < a; )
    for (var f = 0, v = e[l], E = n ? n(v) : v; (f = o(h, E, f, r)) > -1; )
      h !== t && x4.call(h, f, 1), x4.call(t, f, 1);
  return t;
}
var I9 = R9,
  M9 = I9;
function P9(t, e) {
  return t && t.length && e && e.length ? M9(t, e) : t;
}
var O9 = P9,
  L9 = OT,
  D9 = O9,
  B9 = L9(D9),
  F9 = B9;
const k9 = ea(F9);
var U9 = LT;
function z9(t) {
  return t && t.length ? U9(t) : [];
}
var V9 = z9;
const H9 = ea(V9);
var j9 = DT,
  W9 = BT,
  X9 = FT,
  G9 = I1;
function Z9(t) {
  return function (e) {
    e = G9(e);
    var n = W9(e) ? X9(e) : void 0,
      r = n ? n[0] : e.charAt(0),
      o = n ? j9(n, 1).join("") : e.slice(1);
    return r[t]() + o;
  };
}
var Y9 = Z9,
  q9 = Y9,
  $9 = q9("toUpperCase"),
  dE = $9;
const K9 = ea(dE);
function Q9(t) {
  return t === void 0;
}
var J9 = Q9;
const ew = ea(J9);
var tw = I1,
  nw = dE;
function rw(t) {
  return nw(tw(t).toLowerCase());
}
var iw = rw;
function aw(t, e, n, r) {
  var o = -1,
    l = t == null ? 0 : t.length;
  for (r && l && (n = t[++o]); ++o < l; ) n = e(n, t[o], o, t);
  return n;
}
var ow = aw;
function sw(t) {
  return function (e) {
    return t == null ? void 0 : t[e];
  };
}
var lw = sw,
  cw = lw,
  uw = {
    À: "A",
    Á: "A",
    Â: "A",
    Ã: "A",
    Ä: "A",
    Å: "A",
    à: "a",
    á: "a",
    â: "a",
    ã: "a",
    ä: "a",
    å: "a",
    Ç: "C",
    ç: "c",
    Ð: "D",
    ð: "d",
    È: "E",
    É: "E",
    Ê: "E",
    Ë: "E",
    è: "e",
    é: "e",
    ê: "e",
    ë: "e",
    Ì: "I",
    Í: "I",
    Î: "I",
    Ï: "I",
    ì: "i",
    í: "i",
    î: "i",
    ï: "i",
    Ñ: "N",
    ñ: "n",
    Ò: "O",
    Ó: "O",
    Ô: "O",
    Õ: "O",
    Ö: "O",
    Ø: "O",
    ò: "o",
    ó: "o",
    ô: "o",
    õ: "o",
    ö: "o",
    ø: "o",
    Ù: "U",
    Ú: "U",
    Û: "U",
    Ü: "U",
    ù: "u",
    ú: "u",
    û: "u",
    ü: "u",
    Ý: "Y",
    ý: "y",
    ÿ: "y",
    Æ: "Ae",
    æ: "ae",
    Þ: "Th",
    þ: "th",
    ß: "ss",
    Ā: "A",
    Ă: "A",
    Ą: "A",
    ā: "a",
    ă: "a",
    ą: "a",
    Ć: "C",
    Ĉ: "C",
    Ċ: "C",
    Č: "C",
    ć: "c",
    ĉ: "c",
    ċ: "c",
    č: "c",
    Ď: "D",
    Đ: "D",
    ď: "d",
    đ: "d",
    Ē: "E",
    Ĕ: "E",
    Ė: "E",
    Ę: "E",
    Ě: "E",
    ē: "e",
    ĕ: "e",
    ė: "e",
    ę: "e",
    ě: "e",
    Ĝ: "G",
    Ğ: "G",
    Ġ: "G",
    Ģ: "G",
    ĝ: "g",
    ğ: "g",
    ġ: "g",
    ģ: "g",
    Ĥ: "H",
    Ħ: "H",
    ĥ: "h",
    ħ: "h",
    Ĩ: "I",
    Ī: "I",
    Ĭ: "I",
    Į: "I",
    İ: "I",
    ĩ: "i",
    ī: "i",
    ĭ: "i",
    į: "i",
    ı: "i",
    Ĵ: "J",
    ĵ: "j",
    Ķ: "K",
    ķ: "k",
    ĸ: "k",
    Ĺ: "L",
    Ļ: "L",
    Ľ: "L",
    Ŀ: "L",
    Ł: "L",
    ĺ: "l",
    ļ: "l",
    ľ: "l",
    ŀ: "l",
    ł: "l",
    Ń: "N",
    Ņ: "N",
    Ň: "N",
    Ŋ: "N",
    ń: "n",
    ņ: "n",
    ň: "n",
    ŋ: "n",
    Ō: "O",
    Ŏ: "O",
    Ő: "O",
    ō: "o",
    ŏ: "o",
    ő: "o",
    Ŕ: "R",
    Ŗ: "R",
    Ř: "R",
    ŕ: "r",
    ŗ: "r",
    ř: "r",
    Ś: "S",
    Ŝ: "S",
    Ş: "S",
    Š: "S",
    ś: "s",
    ŝ: "s",
    ş: "s",
    š: "s",
    Ţ: "T",
    Ť: "T",
    Ŧ: "T",
    ţ: "t",
    ť: "t",
    ŧ: "t",
    Ũ: "U",
    Ū: "U",
    Ŭ: "U",
    Ů: "U",
    Ű: "U",
    Ų: "U",
    ũ: "u",
    ū: "u",
    ŭ: "u",
    ů: "u",
    ű: "u",
    ų: "u",
    Ŵ: "W",
    ŵ: "w",
    Ŷ: "Y",
    ŷ: "y",
    Ÿ: "Y",
    Ź: "Z",
    Ż: "Z",
    Ž: "Z",
    ź: "z",
    ż: "z",
    ž: "z",
    Ĳ: "IJ",
    ĳ: "ij",
    Œ: "Oe",
    œ: "oe",
    ŉ: "'n",
    ſ: "s",
  },
  dw = cw(uw),
  hw = dw,
  pw = hw,
  fw = I1,
  mw = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,
  gw = "\\u0300-\\u036f",
  vw = "\\ufe20-\\ufe2f",
  _w = "\\u20d0-\\u20ff",
  yw = gw + vw + _w,
  xw = "[" + yw + "]",
  bw = RegExp(xw, "g");
function Ew(t) {
  return (t = fw(t)), t && t.replace(mw, pw).replace(bw, "");
}
var Aw = Ew,
  Tw = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;
function Sw(t) {
  return t.match(Tw) || [];
}
var ww = Sw,
  Cw = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;
function Nw(t) {
  return Cw.test(t);
}
var Rw = Nw,
  hE = "\\ud800-\\udfff",
  Iw = "\\u0300-\\u036f",
  Mw = "\\ufe20-\\ufe2f",
  Pw = "\\u20d0-\\u20ff",
  Ow = Iw + Mw + Pw,
  pE = "\\u2700-\\u27bf",
  fE = "a-z\\xdf-\\xf6\\xf8-\\xff",
  Lw = "\\xac\\xb1\\xd7\\xf7",
  Dw = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",
  Bw = "\\u2000-\\u206f",
  Fw =
    " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",
  mE = "A-Z\\xc0-\\xd6\\xd8-\\xde",
  kw = "\\ufe0e\\ufe0f",
  gE = Lw + Dw + Bw + Fw,
  vE = "['’]",
  b4 = "[" + gE + "]",
  Uw = "[" + Ow + "]",
  _E = "\\d+",
  zw = "[" + pE + "]",
  yE = "[" + fE + "]",
  xE = "[^" + hE + gE + _E + pE + fE + mE + "]",
  Vw = "\\ud83c[\\udffb-\\udfff]",
  Hw = "(?:" + Uw + "|" + Vw + ")",
  jw = "[^" + hE + "]",
  bE = "(?:\\ud83c[\\udde6-\\uddff]){2}",
  EE = "[\\ud800-\\udbff][\\udc00-\\udfff]",
  ap = "[" + mE + "]",
  Ww = "\\u200d",
  E4 = "(?:" + yE + "|" + xE + ")",
  Xw = "(?:" + ap + "|" + xE + ")",
  A4 = "(?:" + vE + "(?:d|ll|m|re|s|t|ve))?",
  T4 = "(?:" + vE + "(?:D|LL|M|RE|S|T|VE))?",
  AE = Hw + "?",
  TE = "[" + kw + "]?",
  Gw = "(?:" + Ww + "(?:" + [jw, bE, EE].join("|") + ")" + TE + AE + ")*",
  Zw = "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",
  Yw = "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",
  qw = TE + AE + Gw,
  $w = "(?:" + [zw, bE, EE].join("|") + ")" + qw,
  Kw = RegExp(
    [
      ap + "?" + yE + "+" + A4 + "(?=" + [b4, ap, "$"].join("|") + ")",
      Xw + "+" + T4 + "(?=" + [b4, ap + E4, "$"].join("|") + ")",
      ap + "?" + E4 + "+" + A4,
      ap + "+" + T4,
      Yw,
      Zw,
      _E,
      $w,
    ].join("|"),
    "g"
  );
function Qw(t) {
  return t.match(Kw) || [];
}
var Jw = Qw,
  eC = ww,
  tC = Rw,
  nC = I1,
  rC = Jw;
function iC(t, e, n) {
  return (
    (t = nC(t)),
    (e = n ? void 0 : e),
    e === void 0 ? (tC(t) ? rC(t) : eC(t)) : t.match(e) || []
  );
}
var aC = iC,
  oC = ow,
  sC = Aw,
  lC = aC,
  cC = "['’]",
  uC = RegExp(cC, "g");
function dC(t) {
  return function (e) {
    return oC(lC(sC(e).replace(uC, "")), t, "");
  };
}
var hC = dC,
  pC = iw,
  fC = hC,
  mC = fC(function (t, e, n) {
    return (e = e.toLowerCase()), t + (n ? pC(e) : e);
  }),
  gC = mC;
const vC = ea(gC);
var _C = I1,
  yC = 0;
function xC(t) {
  var e = ++yC;
  return _C(t) + e;
}
var bC = xC;
const EC = ea(bC);
var Ka = {
  isNil: kT,
  merge: UT,
  throttle: zT,
  isString: m9,
  debounce: VT,
  pull: k9,
  isTypedArray: HT,
  isPlainObject: jT,
  isNumber: l9,
  isBoolean: QS,
  isEqual: n9,
  cloneDeep: WT,
  uniq: H9,
  clamp: GS,
  upperFirst: K9,
  get: XT,
  mergeWith: x9,
  isFunction: GT,
  isObject: ZT,
  isUndefined: ew,
  camelCase: vC,
  uniqueId: EC,
};
function AC(t) {
  let e = t;
  return typeof t == "string" && (e = window.document.getElementById(t)), e;
}
function SE(t) {
  return t.trim ? t.trim() : t.replace(/^\s+|\s+$/g, "");
}
function wE(t) {
  return SE(t).split(/\s+/);
}
function TC(t) {
  var e;
  const n =
    (e = document == null ? void 0 : document.documentElement) == null
      ? void 0
      : e.style;
  if (!n) return t[0];
  for (const r in t) if (t[r] && t[r] in n) return t[r];
  return t[0];
}
function ma(t, e, n) {
  const r = window.document.createElement(t);
  return e && (r.className = e || ""), n && n.appendChild(r), r;
}
function Dc(t) {
  const e = t.parentNode;
  e && e.removeChild(t);
}
function Jd(t, e) {
  if (t.classList !== void 0) {
    const n = wE(e);
    for (let r = 0, o = n.length; r < o; r++) t.classList.add(n[r]);
  } else if (!SC(t, e)) {
    const n = p3(t);
    CE(t, (n ? n + " " : "") + e);
  }
}
function Cg(t, e) {
  t.classList !== void 0
    ? wE(e).forEach((r) => {
        t.classList.remove(r);
      })
    : CE(t, SE((" " + p3(t) + " ").replace(" " + e + " ", " ")));
}
function SC(t, e) {
  if (t.classList !== void 0) return t.classList.contains(e);
  const n = p3(t);
  return n.length > 0 && new RegExp("(^|\\s)" + e + "(\\s|$)").test(n);
}
function CE(t, e) {
  t instanceof HTMLElement ? (t.className = e) : (t.className.baseVal = e);
}
function p3(t) {
  return (
    t instanceof SVGElement && (t = t.correspondingElement),
    t.className.baseVal === void 0 ? t.className : t.className.baseVal
  );
}
var wC = TC(["transform", "WebkitTransform"]);
function NE(t, e) {
  t.style[wC] = e;
}
function CC() {
  var t;
  const e = window.document.querySelector('meta[name="viewport"]');
  if (!e) return 1;
  const r = ((t = e.content) == null ? void 0 : t.split(",")).find((o) => {
    const [l] = o.split("=");
    return l === "initial-scale";
  });
  return r ? r.split("=")[1] * 1 : 1;
}
var Qs = CC() < 1 ? 1 : window.devicePixelRatio;
function f3(t, e) {
  t.setAttribute("style", `${t.style.cssText}${e}`);
}
function NC(t) {
  return Object.entries(t)
    .map(([e, n]) => `${e}: ${n}`)
    .join(";");
}
function RC(t, e) {
  return {
    left: t.left - e.left,
    top: t.top - e.top,
    right: e.left + e.width - t.left - t.width,
    bottom: e.top + e.height - t.top - t.height,
  };
}
function P1(t) {
  t.innerHTML = "";
}
function IC(t) {
  t.setAttribute("draggable", "false");
}
function S4(t, e) {
  if (typeof e == "string") {
    const n = document.createElement("div");
    for (n.innerHTML = e; n.firstChild; ) t.append(n.firstChild);
  } else Array.isArray(e) ? t.append(...e) : t.append(e);
}
function MC(t, e) {
  var n;
  const r = Array.isArray(e) ? e : [e];
  let o = t;
  for (; o instanceof Element && o !== window.document.body; ) {
    if (r.find((l) => (o == null ? void 0 : o.matches(l)))) return o;
    o = (n = o == null ? void 0 : o.parentElement) != null ? n : null;
  }
}
function PC(t) {
  return typeof ImageBitmap < "u" && t instanceof ImageBitmap;
}
var Ng = navigator == null ? void 0 : navigator.userAgent;
Ng.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);
Ng.indexOf("Android") > -1 || Ng.indexOf("Adr") > -1;
function OC() {
  const t = Ng,
    e = ["Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod"];
  let n = !0;
  for (const r of e)
    if (t.indexOf(r) > 0) {
      n = !1;
      break;
    }
  return n;
}
function LC(t, e) {
  t.forEach((n) => {
    e[n] && (e[n] = e[n].bind(e));
  });
}
function Z2(t) {
  var e = [1 / 0, 1 / 0, -1 / 0, -1 / 0];
  return (
    rE(t, function (n) {
      e[0] > n[0] && (e[0] = n[0]),
        e[1] > n[1] && (e[1] = n[1]),
        e[2] < n[0] && (e[2] = n[0]),
        e[3] < n[1] && (e[3] = n[1]);
    }),
    e
  );
}
Z2.default = Z2;
function d2(t) {
  return typeof t == "number";
}
function _o(t) {
  return t - Math.fround(t);
}
var w4 = (2 * Math.PI * 6378137) / 2;
function DC(t, e) {
  const [n, r, o, l] = e;
  return t.lng > n && t.lng <= o && t.lat > r && t.lat <= l;
}
function BC(t) {
  const e = [1 / 0, 1 / 0, -1 / 0, -1 / 0];
  return (
    t.forEach((n) => {
      const { coordinates: r } = n;
      RE(e, r);
    }),
    e
  );
}
function RE(t, e) {
  return (
    Array.isArray(e[0])
      ? e.forEach((n) => {
          RE(t, n);
        })
      : (t[0] > e[0] && (t[0] = e[0]),
        t[1] > e[1] && (t[1] = e[1]),
        t[2] < e[0] && (t[2] = e[0]),
        t[3] < e[1] && (t[3] = e[1])),
    t
  );
}
function og(t, e = !0, n = { enable: !0, decimal: 1 }) {
  t = UC(t, e);
  const r = t[0],
    o = t[1];
  let l = (r * w4) / 180,
    a = Math.log(Math.tan(((90 + o) * Math.PI) / 360)) / (Math.PI / 180);
  return (
    (a = (a * w4) / 180),
    n.enable &&
      ((l = Number(l.toFixed(n.decimal))), (a = Number(a.toFixed(n.decimal)))),
    t.length === 3 ? [l, a, t[2]] : [l, a]
  );
}
function FC(t) {
  if (t == null) throw new Error("lng is required");
  return (
    (t > 180 || t < -180) &&
      ((t = t % 360),
      t > 180 && (t = -360 + t),
      t < -180 && (t = 360 + t),
      t === 0 && (t = 0)),
    t
  );
}
function kC(t) {
  if (t == null) throw new Error("lat is required");
  return (
    (t > 90 || t < -90) &&
      ((t = t % 180),
      t > 90 && (t = -180 + t),
      t < -90 && (t = 180 + t),
      t === 0 && (t = 0)),
    t
  );
}
function UC(t, e) {
  if (e === !1) return t;
  const n = FC(t[0]);
  let r = kC(t[1]);
  return (
    r > 85 && (r = 85),
    r < -85 && (r = -85),
    t.length === 3 ? [n, r, t[2]] : [n, r]
  );
}
function oc(t) {
  const e = 85.0511287798,
    n = Math.max(Math.min(e, t[1]), -e),
    r = 256 << 20;
  let o = Math.PI / 180,
    l = t[0] * o,
    a = n * o;
  a = Math.log(Math.tan(Math.PI / 4 + a / 2));
  const h = 0.5 / Math.PI,
    f = 0.5,
    v = -0.5 / Math.PI;
  return (
    (o = 0.5),
    (l = r * (h * l + f)),
    (a = r * (v * a + o)),
    [Math.floor(l), Math.floor(a)]
  );
}
function h2(t, e) {
  const n = 85.0511287798,
    r = Math.PI / 180,
    o = 6378137;
  return (
    (e = Math.max(Math.min(n, e), -n)),
    (t *= r),
    (e *= r),
    (e = Math.log(Math.tan(Math.PI / 4 + e / 2))),
    [t * o, e * o]
  );
}
function zC(t, e, n) {
  const r = Nm(e[1] - t[1]),
    o = Nm(e[0] - t[0]),
    l = Nm(t[1]),
    a = Nm(e[1]),
    h =
      Math.pow(Math.sin(r / 2), 2) +
      Math.pow(Math.sin(o / 2), 2) * Math.cos(l) * Math.cos(a);
  return fS(2 * Math.atan2(Math.sqrt(h), Math.sqrt(1 - h)), "meters");
}
function m3(t, e) {
  const n = Math.abs(t[1][1] - t[0][1]) * e,
    r = Math.abs(t[1][0] - t[0][0]) * e;
  return [
    [t[0][0] - r, t[0][1] - n],
    [t[1][0] + r, t[1][1] + n],
  ];
}
function IE(t, e) {
  return (
    t[0][0] <= e[0][0] &&
    t[0][1] <= e[0][1] &&
    t[1][0] >= e[1][0] &&
    t[1][1] >= e[1][1]
  );
}
function Rg(t) {
  return [
    [t[0], t[1]],
    [t[2], t[3]],
  ];
}
function VC(t) {
  const e = HC(t, [0, 0]);
  return [t[0] / e, t[1] / e];
}
function HC(t, e) {
  return Math.sqrt(Math.pow(t[0] - e[0], 2) + Math.pow(t[1] - e[1], 2));
}
function J0(t) {
  if (d2(t[0])) return t;
  if (d2(t[0][0])) throw new Error("当前数据不支持标注");
  if (d2(t[0][0][0])) {
    const e = t;
    let n = 0,
      r = 0,
      o = 0;
    return (
      e.forEach((l) => {
        l.forEach((a) => {
          (n += a[0]), (r += a[1]), o++;
        });
      }),
      [n / o, r / o, 0]
    );
  } else throw new Error("当前数据不支持标注");
}
function jC(t) {
  let e = t[0],
    n = t[1],
    r = t[0],
    o = t[1],
    l = 0,
    a = 0,
    h = 0;
  for (let f = 0; f < t.length; f += 2) {
    const v = t[f],
      E = t[f + 1];
    v &&
      E &&
      ((e = Math.max(v, e)),
      (n = Math.max(E, n)),
      (r = Math.min(v, r)),
      (o = Math.min(E, o)),
      (l += v),
      (a += E),
      h++);
  }
  return {
    center: [l / h, a / h],
    radius: Math.sqrt(Math.pow(e - r, 2) + Math.pow(n - o, 2)) / 2,
  };
}
function WC(t) {
  return Z2(hS([dS(t)]));
}
function XC() {
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (t) => {
    const e = (Math.random() * 16) | 0;
    return (t === "x" ? e : (e & 3) | 8).toString(16);
  });
}
var GC = class {
  constructor(t = 50, e) {
    (this.limit = t),
      (this.destroy = e || this.defaultDestroy),
      (this.order = []),
      this.clear();
  }
  clear() {
    this.order.forEach((t) => {
      this.delete(t);
    }),
      (this.cache = {}),
      (this.order = []);
  }
  get(t) {
    const e = this.cache[t];
    return e && (this.deleteOrder(t), this.appendOrder(t)), e;
  }
  set(t, e) {
    this.cache[t]
      ? (this.delete(t), (this.cache[t] = e), this.appendOrder(t))
      : (Object.keys(this.cache).length === this.limit &&
          this.delete(this.order[0]),
        (this.cache[t] = e),
        this.appendOrder(t));
  }
  delete(t) {
    const e = this.cache[t];
    e && (this.deleteCache(t), this.deleteOrder(t), this.destroy(e, t));
  }
  deleteCache(t) {
    delete this.cache[t];
  }
  deleteOrder(t) {
    const e = this.order.findIndex((n) => n === t);
    e >= 0 && this.order.splice(e, 1);
  }
  appendOrder(t) {
    this.order.push(t);
  }
  defaultDestroy(t, e) {
    return null;
  }
};
function ZC(t) {
  if (t.length === 0) throw new Error("max requires at least one data point");
  let e = t[0];
  for (let n = 1; n < t.length; n++) t[n] > e && (e = t[n]);
  return e * 1;
}
function YC(t) {
  if (t.length === 0) throw new Error("min requires at least one data point");
  let e = t[0];
  for (let n = 1; n < t.length; n++) t[n] < e && (e = t[n]);
  return e * 1;
}
function ME(t) {
  if (t.length === 0) return 0;
  let e = t[0] * 1;
  for (let n = 1; n < t.length; n++) e += t[n] * 1;
  return e;
}
function qC(t) {
  if (t.length === 0) throw new Error("mean requires at least one data point");
  return ME(t) / t.length;
}
function $C(t) {
  if (t.length === 0) throw new Error("mean requires at least one data point");
  if (t.length < 3) return t[0];
  t.sort();
  let e = t[0],
    n = NaN,
    r = 0,
    o = 1;
  for (let l = 1; l < t.length + 1; l++)
    t[l] !== e ? (o > r && ((r = o), (n = e)), (o = 1), (e = t[l])) : o++;
  return n * 1;
}
var g3 = { min: YC, max: ZC, mean: qC, sum: ME, mode: $C };
function PE(t, e) {
  return t.map((n) => n[e]);
}
function kY(t, e) {
  return g3[t](e);
}
function KC(t, e) {
  e === void 0 && (e = {});
  var n = Number(t[0]),
    r = Number(t[1]),
    o = Number(t[2]),
    l = Number(t[3]);
  if (t.length === 6)
    throw new Error(
      "@turf/bbox-polygon does not support BBox with 6 positions"
    );
  var a = [n, r],
    h = [n, l],
    f = [o, l],
    v = [o, r];
  return i3([[a, v, f, h, a]], e.properties, { bbox: t, id: e.id });
}
var OE = { exports: {} };
(function (t) {
  var e = Object.prototype.hasOwnProperty,
    n = "~";
  function r() {}
  Object.create &&
    ((r.prototype = Object.create(null)), new r().__proto__ || (n = !1));
  function o(f, v, E) {
    (this.fn = f), (this.context = v), (this.once = E || !1);
  }
  function l(f, v, E, x, T) {
    if (typeof E != "function")
      throw new TypeError("The listener must be a function");
    var N = new o(E, x || f, T),
      I = n ? n + v : v;
    return (
      f._events[I]
        ? f._events[I].fn
          ? (f._events[I] = [f._events[I], N])
          : f._events[I].push(N)
        : ((f._events[I] = N), f._eventsCount++),
      f
    );
  }
  function a(f, v) {
    --f._eventsCount === 0 ? (f._events = new r()) : delete f._events[v];
  }
  function h() {
    (this._events = new r()), (this._eventsCount = 0);
  }
  (h.prototype.eventNames = function () {
    var v = [],
      E,
      x;
    if (this._eventsCount === 0) return v;
    for (x in (E = this._events)) e.call(E, x) && v.push(n ? x.slice(1) : x);
    return Object.getOwnPropertySymbols
      ? v.concat(Object.getOwnPropertySymbols(E))
      : v;
  }),
    (h.prototype.listeners = function (v) {
      var E = n ? n + v : v,
        x = this._events[E];
      if (!x) return [];
      if (x.fn) return [x.fn];
      for (var T = 0, N = x.length, I = new Array(N); T < N; T++)
        I[T] = x[T].fn;
      return I;
    }),
    (h.prototype.listenerCount = function (v) {
      var E = n ? n + v : v,
        x = this._events[E];
      return x ? (x.fn ? 1 : x.length) : 0;
    }),
    (h.prototype.emit = function (v, E, x, T, N, I) {
      var L = n ? n + v : v;
      if (!this._events[L]) return !1;
      var F = this._events[L],
        X = arguments.length,
        G,
        K;
      if (F.fn) {
        switch ((F.once && this.removeListener(v, F.fn, void 0, !0), X)) {
          case 1:
            return F.fn.call(F.context), !0;
          case 2:
            return F.fn.call(F.context, E), !0;
          case 3:
            return F.fn.call(F.context, E, x), !0;
          case 4:
            return F.fn.call(F.context, E, x, T), !0;
          case 5:
            return F.fn.call(F.context, E, x, T, N), !0;
          case 6:
            return F.fn.call(F.context, E, x, T, N, I), !0;
        }
        for (K = 1, G = new Array(X - 1); K < X; K++) G[K - 1] = arguments[K];
        F.fn.apply(F.context, G);
      } else {
        var Q = F.length,
          ee;
        for (K = 0; K < Q; K++)
          switch (
            (F[K].once && this.removeListener(v, F[K].fn, void 0, !0), X)
          ) {
            case 1:
              F[K].fn.call(F[K].context);
              break;
            case 2:
              F[K].fn.call(F[K].context, E);
              break;
            case 3:
              F[K].fn.call(F[K].context, E, x);
              break;
            case 4:
              F[K].fn.call(F[K].context, E, x, T);
              break;
            default:
              if (!G)
                for (ee = 1, G = new Array(X - 1); ee < X; ee++)
                  G[ee - 1] = arguments[ee];
              F[K].fn.apply(F[K].context, G);
          }
      }
      return !0;
    }),
    (h.prototype.on = function (v, E, x) {
      return l(this, v, E, x, !1);
    }),
    (h.prototype.once = function (v, E, x) {
      return l(this, v, E, x, !0);
    }),
    (h.prototype.removeListener = function (v, E, x, T) {
      var N = n ? n + v : v;
      if (!this._events[N]) return this;
      if (!E) return a(this, N), this;
      var I = this._events[N];
      if (I.fn)
        I.fn === E && (!T || I.once) && (!x || I.context === x) && a(this, N);
      else {
        for (var L = 0, F = [], X = I.length; L < X; L++)
          (I[L].fn !== E || (T && !I[L].once) || (x && I[L].context !== x)) &&
            F.push(I[L]);
        F.length ? (this._events[N] = F.length === 1 ? F[0] : F) : a(this, N);
      }
      return this;
    }),
    (h.prototype.removeAllListeners = function (v) {
      var E;
      return (
        v
          ? ((E = n ? n + v : v), this._events[E] && a(this, E))
          : ((this._events = new r()), (this._eventsCount = 0)),
        this
      );
    }),
    (h.prototype.off = h.prototype.removeListener),
    (h.prototype.addListener = h.prototype.on),
    (h.prefixed = n),
    (h.EventEmitter = h),
    (t.exports = h);
})(OE);
var _s = OE.exports;
const v3 = ea(_s);
var r1 = ((t) => (
    (t.Realtime = "realtime"),
    (t.Overlap = "overlap"),
    (t.Replace = "replace"),
    t
  ))(r1 || {}),
  tc = ((t) => (
    (t.Loading = "Loading"),
    (t.Loaded = "Loaded"),
    (t.Failure = "Failure"),
    (t.Cancelled = "Cancelled"),
    t
  ))(tc || {}),
  LE = 0,
  C4 = 1,
  dv = 2;
function QC(t) {
  t.forEach((e) => {
    e.isCurrent && (e.isVisible = e.isLoaded);
  });
}
function JC(t) {
  t.forEach((e) => {
    e.properties.state = LE;
  }),
    t.forEach((e) => {
      e.isCurrent && !DE(e) && _3(e);
    }),
    t.forEach((e) => {
      e.isVisible = !!(e.properties.state & dv);
    });
}
function eN(t) {
  t.forEach((n) => {
    n.properties.state = LE;
  }),
    t.forEach((n) => {
      n.isCurrent && DE(n);
    }),
    t
      .slice()
      .sort((n, r) => n.z - r.z)
      .forEach((n) => {
        (n.isVisible = !!(n.properties.state & dv)),
          n.children.length && (n.isVisible || n.properties.state & C4)
            ? n.children.forEach((r) => {
                r.properties.state = C4;
              })
            : n.isCurrent && _3(n);
      });
}
function DE(t) {
  for (; t; ) {
    if (t.isLoaded) return (t.properties.state |= dv), !0;
    t = t.parent;
  }
  return !1;
}
function _3(t) {
  t.children.forEach((e) => {
    e.isLoaded ? (e.properties.state |= dv) : _3(e);
  });
}
var BE = [-1 / 0, -1 / 0, 1 / 0, 1 / 0],
  tN = 0.2,
  nN = 5,
  rN = { [r1.Realtime]: QC, [r1.Overlap]: JC, [r1.Replace]: eN },
  iN = () => {};
function Y2(t, e, n) {
  const r = Math.floor(((t + 180) / 360) * Math.pow(2, n)),
    o = Math.floor(
      ((1 -
        Math.log(
          Math.tan((e * Math.PI) / 180) + 1 / Math.cos((e * Math.PI) / 180)
        ) /
          Math.PI) /
        2) *
        Math.pow(2, n)
    );
  return [r, o];
}
function N4(t, e, n) {
  const r = (t / Math.pow(2, n)) * 360 - 180,
    o = Math.PI - (2 * Math.PI * e) / Math.pow(2, n),
    l = (180 / Math.PI) * Math.atan(0.5 * (Math.exp(o) - Math.exp(-o)));
  return [r, l];
}
var FE = (t, e, n) => {
  const [r, o] = N4(t, e, n),
    [l, a] = N4(t + 1, e + 1, n);
  return [r, a, l, o];
};
function aN({
  zoom: t,
  latLonBounds: e,
  maxZoom: n = 1 / 0,
  minZoom: r = 0,
  zoomOffset: o = 0,
  extent: l = BE,
}) {
  let a = Math.ceil(t) + o;
  if (Number.isFinite(r) && a < r) return [];
  Number.isFinite(n) && a > n && (a = n);
  const [h, f, v, E] = e,
    x = [
      Math.max(h, l[0]),
      Math.max(f, l[1]),
      Math.min(v, l[2]),
      Math.min(E, l[3]),
    ],
    T = [],
    [N, I] = Y2(x[0], x[1], a),
    [L, F] = Y2(x[2], x[3], a);
  for (let Q = N; Q <= L; Q++)
    for (let ee = F; ee <= I; ee++) T.push({ x: Q, y: ee, z: a });
  const X = (L + N) / 2,
    G = (I + F) / 2,
    K = (Q, ee) => Math.abs(Q - X) + Math.abs(ee - G);
  return T.sort((Q, ee) => K(Q.x, Q.y) - K(ee.x, ee.y)), T;
}
var oN = (t, e, n, r = !0) => {
    const o = Math.pow(2, n),
      l = o - 1,
      a = o;
    let h = t;
    const f = e;
    return (
      r && (h < 0 ? (h = h + a) : h > l && (h = h % a)), { warpX: h, warpY: f }
    );
  },
  sN = (t, e, n) =>
    new Promise((r, o) => {
      var l = (f) => {
          try {
            h(n.next(f));
          } catch (v) {
            o(v);
          }
        },
        a = (f) => {
          try {
            h(n.throw(f));
          } catch (v) {
            o(v);
          }
        },
        h = (f) => (f.done ? r(f.value) : Promise.resolve(f.value).then(l, a));
      h((n = n.apply(t, e)).next());
    }),
  lN = class extends _s.EventEmitter {
    constructor(t) {
      super(),
        (this.tileSize = 256),
        (this.isVisible = !1),
        (this.isCurrent = !1),
        (this.isVisibleChange = !1),
        (this.loadedLayers = 0),
        (this.isLayerLoaded = !1),
        (this.isLoad = !1),
        (this.isChildLoad = !1),
        (this.parent = null),
        (this.children = []),
        (this.data = null),
        (this.properties = {}),
        (this.loadDataId = 0);
      const { x: e, y: n, z: r, tileSize: o, warp: l = !0 } = t;
      (this.x = e),
        (this.y = n),
        (this.z = r),
        (this.warp = l || !0),
        (this.tileSize = o);
    }
    get isLoading() {
      return this.loadStatus === tc.Loading;
    }
    get isLoaded() {
      return this.loadStatus === tc.Loaded;
    }
    get isFailure() {
      return this.loadStatus === tc.Failure;
    }
    setTileLayerLoaded() {
      this.isLayerLoaded = !0;
    }
    get isCancelled() {
      return this.loadStatus === tc.Cancelled;
    }
    get isDone() {
      return [tc.Loaded, tc.Cancelled, tc.Failure].includes(this.loadStatus);
    }
    get bounds() {
      return FE(this.x, this.y, this.z);
    }
    get bboxPolygon() {
      const [t, e, n, r] = this.bounds,
        o = [(n - t) / 2, (r - e) / 2];
      return KC(this.bounds, {
        properties: {
          key: this.key,
          id: this.key,
          bbox: this.bounds,
          center: o,
          meta: `
      ${this.key}
      `,
        },
      });
    }
    get key() {
      return `${this.x}_${this.y}_${this.z}`;
    }
    layerLoad() {
      this.loadedLayers++, this.emit("layerLoaded");
    }
    loadData(t) {
      return sN(
        this,
        arguments,
        function* ({ getData: e, onLoad: n, onError: r }) {
          this.loadDataId++;
          const o = this.loadDataId;
          this.isLoading && this.abortLoad(),
            (this.abortController = new AbortController()),
            (this.loadStatus = tc.Loading);
          let l = null,
            a;
          try {
            const { x: h, y: f, z: v, bounds: E, tileSize: x, warp: T } = this,
              { warpX: N, warpY: I } = oN(h, f, v, T),
              { signal: L } = this.abortController;
            l = yield e(
              { x: N, y: I, z: v, bounds: E, tileSize: x, signal: L, warp: T },
              this
            );
          } catch (h) {
            a = h;
          }
          if (o === this.loadDataId && !(this.isCancelled && !l)) {
            if (a || !l) {
              (this.loadStatus = tc.Failure), r(a, this);
              return;
            }
            (this.loadStatus = tc.Loaded), (this.data = l), n(this);
          }
        }
      );
    }
    reloadData(t) {
      this.isLoading && this.abortLoad(), this.loadData(t);
    }
    abortLoad() {
      this.isLoaded ||
        this.isCancelled ||
        ((this.loadStatus = tc.Cancelled),
        this.abortController.abort(),
        this.xhrCancel && this.xhrCancel());
    }
  },
  cN = (t, e) => {
    const n = Rg(t),
      r = m3(n, e),
      o = 360 * 3 - 180,
      l = 85.0511287798065;
    return [
      Math.max(r[0][0], -o),
      Math.max(r[0][1], -l),
      Math.min(r[1][0], o),
      Math.min(r[1][1], l),
    ];
  },
  uN = (t, e) => {
    const n = Rg(t),
      r = Rg(e);
    return IE(n, r);
  },
  dN = Object.defineProperty,
  hN = Object.defineProperties,
  pN = Object.getOwnPropertyDescriptors,
  R4 = Object.getOwnPropertySymbols,
  fN = Object.prototype.hasOwnProperty,
  mN = Object.prototype.propertyIsEnumerable,
  I4 = (t, e, n) =>
    e in t
      ? dN(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  M4 = (t, e) => {
    for (var n in e || (e = {})) fN.call(e, n) && I4(t, n, e[n]);
    if (R4) for (var n of R4(e)) mN.call(e, n) && I4(t, n, e[n]);
    return t;
  },
  gN = (t, e) => hN(t, pN(e)),
  { throttle: vN } = Ka,
  _N = class extends v3 {
    constructor(t) {
      super(),
        (this.currentTiles = []),
        (this.cacheTiles = new Map()),
        (this.throttleUpdate = vN((e, n) => {
          this.update(e, n);
        }, 16)),
        (this.onTileLoad = (e) => {
          this.emit("tile-loaded", e),
            this.updateTileVisible(),
            this.loadFinished();
        }),
        (this.onTileError = (e, n) => {
          this.emit("tile-error", { error: e, tile: n }),
            this.updateTileVisible(),
            this.loadFinished();
        }),
        (this.onTileUnload = (e) => {
          this.emit("tile-unload", e), this.loadFinished();
        }),
        (this.options = {
          tileSize: 256,
          minZoom: 0,
          maxZoom: 1 / 0,
          zoomOffset: 0,
          extent: BE,
          getTileData: iN,
          warp: !0,
          updateStrategy: r1.Replace,
        }),
        this.updateOptions(t);
    }
    get isLoaded() {
      return this.currentTiles.every((t) => t.isDone);
    }
    get tiles() {
      return Array.from(this.cacheTiles.values()).sort((e, n) => e.z - n.z);
    }
    updateOptions(t) {
      const e =
          t.minZoom === void 0 ? this.options.minZoom : Math.ceil(t.minZoom),
        n = t.maxZoom === void 0 ? this.options.maxZoom : Math.floor(t.maxZoom);
      this.options = gN(M4(M4({}, this.options), t), {
        minZoom: e,
        maxZoom: n,
      });
    }
    update(t, e) {
      const n = Math.max(0, Math.ceil(t));
      if (
        this.lastViewStates &&
        this.lastViewStates.zoom === n &&
        uN(this.lastViewStates.latLonBoundsBuffer, e)
      )
        return;
      const r = cN(e, tN);
      (this.lastViewStates = {
        zoom: n,
        latLonBounds: e,
        latLonBoundsBuffer: r,
      }),
        (this.currentZoom = n);
      let o = !1;
      const l = this.getTileIndices(n, r).filter(
        (a) => this.options.warp || (a.x >= 0 && a.x < Math.pow(2, n))
      );
      this.emit("tiles-load-start"),
        (this.currentTiles = l.map(({ x: a, y: h, z: f }) => {
          let v = this.getTile(a, h, f);
          return v
            ? (((v == null ? void 0 : v.isFailure) ||
                (v == null ? void 0 : v.isCancelled)) &&
                v.loadData({
                  getData: this.options.getTileData,
                  onLoad: this.onTileLoad,
                  onError: this.onTileError,
                }),
              v)
            : ((v = this.createTile(a, h, f)), (o = !0), v);
        })),
        o && this.resizeCacheTiles(),
        this.updateTileVisible(),
        this.pruneRequests();
    }
    reloadAll() {
      for (const [t, e] of this.cacheTiles) {
        if (!this.currentTiles.includes(e)) {
          this.cacheTiles.delete(t), this.onTileUnload(e);
          return;
        }
        this.onTileUnload(e),
          e.loadData({
            getData: this.options.getTileData,
            onLoad: this.onTileLoad,
            onError: this.onTileError,
          });
      }
    }
    reloadTileById(t, e, n) {
      const r = this.cacheTiles.get(`${e},${n},${t}`);
      r &&
        (this.onTileUnload(r),
        r.loadData({
          getData: this.options.getTileData,
          onLoad: this.onTileLoad,
          onError: this.onTileError,
        }));
    }
    reloadTileByLnglat(t, e, n) {
      const r = this.getTileByLngLat(t, e, n);
      r && this.reloadTileById(r.z, r.x, r.y);
    }
    reloadTileByExtent(t, e) {
      this.getTileIndices(e, t).forEach((r) => {
        this.reloadTileById(r.z, r.x, r.y);
      });
    }
    pruneRequests() {
      const t = [];
      for (const e of this.cacheTiles.values())
        e.isLoading && !e.isCurrent && !e.isVisible && t.push(e);
      for (; t.length > 0; ) t.shift().abortLoad();
    }
    getTileByLngLat(t, e, n) {
      const { zoomOffset: r } = this.options,
        o = Math.ceil(n) + r,
        l = Y2(t, e, o);
      return this.tiles.filter((h) => h.key === `${l[0]}_${l[1]}_${o}`)[0];
    }
    getTileExtent(t, e) {
      return this.getTileIndices(e, t);
    }
    getTileByZXY(t, e, n) {
      return this.tiles.filter((o) => o.key === `${e}_${n}_${t}`)[0];
    }
    clear() {
      for (const t of this.cacheTiles.values())
        t.isLoading ? t.abortLoad() : this.onTileUnload(t);
      (this.lastViewStates = void 0),
        this.cacheTiles.clear(),
        (this.currentTiles = []);
    }
    destroy() {
      this.clear(), this.removeAllListeners();
    }
    updateTileVisible() {
      const t = this.options.updateStrategy,
        e = new Map();
      for (const o of this.cacheTiles.values())
        e.set(o.key, o.isVisible), (o.isCurrent = !1), (o.isVisible = !1);
      for (const o of this.currentTiles) (o.isCurrent = !0), (o.isVisible = !0);
      const n = Array.from(this.cacheTiles.values());
      typeof t == "function" ? t(n) : rN[t](n);
      let r = !1;
      Array.from(this.cacheTiles.values()).forEach((o) => {
        o.isVisible !== e.get(o.key)
          ? ((o.isVisibleChange = !0), (r = !0))
          : (o.isVisibleChange = !1);
      }),
        r && this.emit("tile-update");
    }
    getTileIndices(t, e) {
      const { tileSize: n, extent: r, zoomOffset: o } = this.options,
        l = Math.floor(this.options.maxZoom),
        a = Math.ceil(this.options.minZoom);
      return aN({
        maxZoom: l,
        minZoom: a,
        zoomOffset: o,
        tileSize: n,
        zoom: t,
        latLonBounds: e,
        extent: r,
      });
    }
    getTileId(t, e, n) {
      return `${t},${e},${n}`;
    }
    loadFinished() {
      const t = !this.currentTiles.some((e) => !e.isDone);
      return t && this.emit("tiles-load-finished"), t;
    }
    getTile(t, e, n) {
      const r = this.getTileId(t, e, n);
      return this.cacheTiles.get(r);
    }
    createTile(t, e, n) {
      const r = this.getTileId(t, e, n),
        o = new lN({
          x: t,
          y: e,
          z: n,
          tileSize: this.options.tileSize,
          warp: this.options.warp,
        });
      return (
        this.cacheTiles.set(r, o),
        o.loadData({
          getData: this.options.getTileData,
          onLoad: this.onTileLoad,
          onError: this.onTileError,
        }),
        o
      );
    }
    resizeCacheTiles() {
      const t = nN * this.currentTiles.length;
      if (this.cacheTiles.size > t) {
        for (const [n, r] of this.cacheTiles)
          if (
            (!r.isVisible &&
              !this.currentTiles.includes(r) &&
              (this.cacheTiles.delete(n), this.onTileUnload(r)),
            this.cacheTiles.size <= t)
          )
            break;
      }
      this.rebuildTileTree();
    }
    rebuildTileTree() {
      for (const t of this.cacheTiles.values())
        (t.parent = null), (t.children.length = 0);
      for (const t of this.cacheTiles.values()) {
        const e = this.getNearestAncestor(t.x, t.y, t.z);
        (t.parent = e), e != null && e.children && e.children.push(t);
      }
    }
    getNearestAncestor(t, e, n) {
      for (; n > this.options.minZoom; ) {
        (t = Math.floor(t / 2)), (e = Math.floor(e / 2)), (n = n - 1);
        const r = this.getTile(t, e, n);
        if (r) return r;
      }
      return null;
    }
  };
function kE(t) {
  const e = [];
  let n = /\{([a-z])-([a-z])\}/.exec(t);
  if (n) {
    const r = n[1].charCodeAt(0),
      o = n[2].charCodeAt(0);
    let l;
    for (l = r; l <= o; ++l) e.push(t.replace(n[0], String.fromCharCode(l)));
    return e;
  }
  if (((n = /\{(\d+)-(\d+)\}/.exec(t)), n)) {
    const r = parseInt(n[2], 10);
    for (let o = parseInt(n[1], 10); o <= r; o++)
      e.push(t.replace(n[0], o.toString()));
    return e;
  }
  return e.push(t), e;
}
function gp(t, e) {
  if (!t || !t.length) throw new Error("url is not allowed to be empty");
  const { x: n, y: r, z: o } = e,
    l = kE(t),
    a = Math.abs(n + r) % l.length;
  return (s3(l[a]) ? `${l[a]}/{z}/{x}/{y}` : l[a])
    .replace(/\{x\}/g, n.toString())
    .replace(/\{y\}/g, r.toString())
    .replace(/\{z\}/g, o.toString())
    .replace(/\{bbox\}/g, FE(n, r, o).join(","))
    .replace(/\{-y\}/g, (Math.pow(2, o) - r - 1).toString());
}
function yN(t, e) {
  const {
      x: n,
      y: r,
      z: o,
      layer: l,
      version: a = "1.0.0",
      style: h = "default",
      format: f,
      service: v = "WMTS",
      tileMatrixset: E,
    } = e,
    x = kE(t),
    T = Math.abs(n + r) % x.length;
  return `${x[T]}&SERVICE=${v}&REQUEST=GetTile&VERSION=${a}&LAYER=${l}&STYLE=${h}&TILEMATRIXSET=${E}&FORMAT=${f}&TILECOL=${n}&TILEROW=${r}&TILEMATRIX=${o}`;
}
function xf(t, e) {
  return t ?? e;
}
var xN = sg;
function sg(t, e) {
  var n = t && t.type,
    r;
  if (n === "FeatureCollection")
    for (r = 0; r < t.features.length; r++) sg(t.features[r], e);
  else if (n === "GeometryCollection")
    for (r = 0; r < t.geometries.length; r++) sg(t.geometries[r], e);
  else if (n === "Feature") sg(t.geometry, e);
  else if (n === "Polygon") P4(t.coordinates, e);
  else if (n === "MultiPolygon")
    for (r = 0; r < t.coordinates.length; r++) P4(t.coordinates[r], e);
  return t;
}
function P4(t, e) {
  if (t.length !== 0) {
    O4(t[0], e);
    for (var n = 1; n < t.length; n++) O4(t[n], !e);
  }
}
function O4(t, e) {
  for (var n = 0, r = 0, o = 0, l = t.length, a = l - 1; o < l; a = o++) {
    var h = (t[o][0] - t[a][0]) * (t[a][1] + t[o][1]),
      f = n + h;
    (r += Math.abs(n) >= Math.abs(h) ? n - f + h : h - f + n), (n = f);
  }
  n + r >= 0 != !!e && t.reverse();
}
const bN = ea(xN);
function EN(t, e) {
  return t.map((n) => n[e] * 1);
}
function UE(t) {
  return Array.isArray(t) ? t.length === 0 || typeof t[0] == "number" : !1;
}
function q2(t) {
  const e = Object.isFrozen(t) ? Ka.cloneDeep(t) : t;
  return bN(e, !0), e;
}
function O1(t, e) {
  return (
    t || [
      [e[0], e[3]],
      [e[2], e[3]],
      [e[2], e[1]],
      [e[0], e[1]],
    ]
  );
}
var AN = Object.defineProperty,
  TN = Object.defineProperties,
  SN = Object.getOwnPropertyDescriptors,
  L4 = Object.getOwnPropertySymbols,
  wN = Object.prototype.hasOwnProperty,
  CN = Object.prototype.propertyIsEnumerable,
  D4 = (t, e, n) =>
    e in t
      ? AN(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  B4 = (t, e) => {
    for (var n in e || (e = {})) wN.call(e, n) && D4(t, n, e[n]);
    if (L4) for (var n of L4(e)) CN.call(e, n) && D4(t, n, e[n]);
    return t;
  },
  F4 = (t, e) => TN(t, SN(e));
function zE(t, e) {
  const { x: n, y: r, x1: o, y1: l, coordinates: a, geometry: h } = e,
    f = [];
  if (!Array.isArray(t)) return { dataArray: [] };
  if (h)
    return (
      t
        .filter(
          (v) =>
            v[h] && v[h].type && v[h].coordinates && v[h].coordinates.length > 0
        )
        .forEach((v, E) => {
          const x = q2(v[h]);
          iE(x, (T) => {
            const N = nE(T),
              I = F4(B4({}, v), { _id: E, coordinates: N });
            f.push(I);
          });
        }),
      { dataArray: f }
    );
  for (let v = 0; v < t.length; v++) {
    const E = t[v];
    let x = [];
    if (a) {
      let N = "Polygon";
      Array.isArray(a[0]) || (N = "Point"),
        Array.isArray(a[0]) && !Array.isArray(a[0][0]) && (N = "LineString"),
        (x = q2({ type: N, coordinates: E[a] }).coordinates);
    } else if (n && r && o && l) {
      const N = [parseFloat(E[n]), parseFloat(E[r])],
        I = [parseFloat(E[o]), parseFloat(E[l])];
      x = [N, I];
    } else n && r && (x = [parseFloat(E[n]), parseFloat(E[r])]);
    const T = F4(B4({}, E), { _id: v, coordinates: x });
    f.push(T);
  }
  return { dataArray: f };
}
function NN(t, e) {
  const n = cS(t);
  return zE(n, e);
}
var RN = Object.defineProperty,
  IN = Object.defineProperties,
  MN = Object.getOwnPropertyDescriptors,
  k4 = Object.getOwnPropertySymbols,
  PN = Object.prototype.hasOwnProperty,
  ON = Object.prototype.propertyIsEnumerable,
  U4 = (t, e, n) =>
    e in t
      ? RN(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  LN = (t, e) => {
    for (var n in e || (e = {})) PN.call(e, n) && U4(t, n, e[n]);
    if (k4) for (var n of k4(e)) ON.call(e, n) && U4(t, n, e[n]);
    return t;
  },
  DN = (t, e) => IN(t, MN(e));
function BN(t) {
  const e = t.toString();
  let n = 5381,
    r = e.length;
  for (; r; ) n = (n * 33) ^ e.charCodeAt(--r);
  return n >>> 0;
}
function FN(t, e) {
  return e === void 0
    ? null
    : typeof (t.properties[e] * 1) == "number"
    ? t.properties[e] * 1
    : t.properties && t.properties[e]
    ? BN(t.properties[e] + "") % 1000019
    : null;
}
function kN(t, e) {
  const n = [],
    r = {};
  return t.features
    ? ((t.features = t.features.filter((o) => {
        const l = o.geometry;
        return (
          o != null && l && l.type && l.coordinates && l.coordinates.length > 0
        );
      })),
      (t = q2(t)),
      t.features.length === 0
        ? { dataArray: [], featureKeys: r }
        : (iE(t, (o, l) => {
            let a = FN(o, e == null ? void 0 : e.featureId);
            a === null && (a = l);
            const h = a,
              f = nE(o),
              v = DN(LN({}, o.properties), { coordinates: f, _id: h });
            n.push(v);
          }),
          { dataArray: n, featureKeys: r }))
    : ((t.features = []), { dataArray: [] });
}
function $2(t, e, n, r) {
  for (
    var o = r,
      l = (n - e) >> 1,
      a = n - e,
      h,
      f = t[e],
      v = t[e + 1],
      E = t[n],
      x = t[n + 1],
      T = e + 3;
    T < n;
    T += 3
  ) {
    var N = UN(t[T], t[T + 1], f, v, E, x);
    if (N > o) (h = T), (o = N);
    else if (N === o) {
      var I = Math.abs(T - l);
      I < a && ((h = T), (a = I));
    }
  }
  o > r &&
    (h - e > 3 && $2(t, e, h, r), (t[h + 2] = o), n - h > 3 && $2(t, h, n, r));
}
function UN(t, e, n, r, o, l) {
  var a = o - n,
    h = l - r;
  if (a !== 0 || h !== 0) {
    var f = ((t - n) * a + (e - r) * h) / (a * a + h * h);
    f > 1 ? ((n = o), (r = l)) : f > 0 && ((n += a * f), (r += h * f));
  }
  return (a = t - n), (h = e - r), a * a + h * h;
}
function f1(t, e, n, r) {
  var o = {
    id: typeof t > "u" ? null : t,
    type: e,
    geometry: n,
    tags: r,
    minX: 1 / 0,
    minY: 1 / 0,
    maxX: -1 / 0,
    maxY: -1 / 0,
  };
  return zN(o), o;
}
function zN(t) {
  var e = t.geometry,
    n = t.type;
  if (n === "Point" || n === "MultiPoint" || n === "LineString") p2(t, e);
  else if (n === "Polygon" || n === "MultiLineString")
    for (var r = 0; r < e.length; r++) p2(t, e[r]);
  else if (n === "MultiPolygon")
    for (r = 0; r < e.length; r++)
      for (var o = 0; o < e[r].length; o++) p2(t, e[r][o]);
}
function p2(t, e) {
  for (var n = 0; n < e.length; n += 3)
    (t.minX = Math.min(t.minX, e[n])),
      (t.minY = Math.min(t.minY, e[n + 1])),
      (t.maxX = Math.max(t.maxX, e[n])),
      (t.maxY = Math.max(t.maxY, e[n + 1]));
}
function VN(t, e) {
  var n = [];
  if (t.type === "FeatureCollection")
    for (var r = 0; r < t.features.length; r++) lg(n, t.features[r], e, r);
  else t.type === "Feature" ? lg(n, t, e) : lg(n, { geometry: t }, e);
  return n;
}
function lg(t, e, n, r) {
  if (e.geometry) {
    var o = e.geometry.coordinates,
      l = e.geometry.type,
      a = Math.pow(n.tolerance / ((1 << n.maxZoom) * n.extent), 2),
      h = [],
      f = e.id;
    if (
      (n.promoteId
        ? (f = e.properties[n.promoteId])
        : n.generateId && (f = r || 0),
      l === "Point")
    )
      z4(o, h);
    else if (l === "MultiPoint") for (var v = 0; v < o.length; v++) z4(o[v], h);
    else if (l === "LineString") K2(o, h, a, !1);
    else if (l === "MultiLineString")
      if (n.lineMetrics) {
        for (v = 0; v < o.length; v++)
          (h = []),
            K2(o[v], h, a, !1),
            t.push(f1(f, "LineString", h, e.properties));
        return;
      } else f2(o, h, a, !1);
    else if (l === "Polygon") f2(o, h, a, !0);
    else if (l === "MultiPolygon")
      for (v = 0; v < o.length; v++) {
        var E = [];
        f2(o[v], E, a, !0), h.push(E);
      }
    else if (l === "GeometryCollection") {
      for (v = 0; v < e.geometry.geometries.length; v++)
        lg(
          t,
          {
            id: f,
            geometry: e.geometry.geometries[v],
            properties: e.properties,
          },
          n,
          r
        );
      return;
    } else throw new Error("Input data is not a valid GeoJSON object.");
    t.push(f1(f, l, h, e.properties));
  }
}
function z4(t, e) {
  e.push(VE(t[0])), e.push(HE(t[1])), e.push(0);
}
function K2(t, e, n, r) {
  for (var o, l, a = 0, h = 0; h < t.length; h++) {
    var f = VE(t[h][0]),
      v = HE(t[h][1]);
    e.push(f),
      e.push(v),
      e.push(0),
      h > 0 &&
        (r
          ? (a += (o * v - f * l) / 2)
          : (a += Math.sqrt(Math.pow(f - o, 2) + Math.pow(v - l, 2)))),
      (o = f),
      (l = v);
  }
  var E = e.length - 3;
  (e[2] = 1),
    $2(e, 0, E, n),
    (e[E + 2] = 1),
    (e.size = Math.abs(a)),
    (e.start = 0),
    (e.end = e.size);
}
function f2(t, e, n, r) {
  for (var o = 0; o < t.length; o++) {
    var l = [];
    K2(t[o], l, n, r), e.push(l);
  }
}
function VE(t) {
  return t / 360 + 0.5;
}
function HE(t) {
  var e = Math.sin((t * Math.PI) / 180),
    n = 0.5 - (0.25 * Math.log((1 + e) / (1 - e))) / Math.PI;
  return n < 0 ? 0 : n > 1 ? 1 : n;
}
function td(t, e, n, r, o, l, a, h) {
  if (((n /= e), (r /= e), l >= n && a < r)) return t;
  if (a < n || l >= r) return null;
  for (var f = [], v = 0; v < t.length; v++) {
    var E = t[v],
      x = E.geometry,
      T = E.type,
      N = o === 0 ? E.minX : E.minY,
      I = o === 0 ? E.maxX : E.maxY;
    if (N >= n && I < r) {
      f.push(E);
      continue;
    } else if (I < n || N >= r) continue;
    var L = [];
    if (T === "Point" || T === "MultiPoint") HN(x, L, n, r, o);
    else if (T === "LineString") jE(x, L, n, r, o, !1, h.lineMetrics);
    else if (T === "MultiLineString") m2(x, L, n, r, o, !1);
    else if (T === "Polygon") m2(x, L, n, r, o, !0);
    else if (T === "MultiPolygon")
      for (var F = 0; F < x.length; F++) {
        var X = [];
        m2(x[F], X, n, r, o, !0), X.length && L.push(X);
      }
    if (L.length) {
      if (h.lineMetrics && T === "LineString") {
        for (F = 0; F < L.length; F++) f.push(f1(E.id, T, L[F], E.tags));
        continue;
      }
      (T === "LineString" || T === "MultiLineString") &&
        (L.length === 1
          ? ((T = "LineString"), (L = L[0]))
          : (T = "MultiLineString")),
        (T === "Point" || T === "MultiPoint") &&
          (T = L.length === 3 ? "Point" : "MultiPoint"),
        f.push(f1(E.id, T, L, E.tags));
    }
  }
  return f.length ? f : null;
}
function HN(t, e, n, r, o) {
  for (var l = 0; l < t.length; l += 3) {
    var a = t[l + o];
    a >= n && a <= r && (e.push(t[l]), e.push(t[l + 1]), e.push(t[l + 2]));
  }
}
function jE(t, e, n, r, o, l, a) {
  for (
    var h = V4(t), f = o === 0 ? jN : WN, v = t.start, E, x, T = 0;
    T < t.length - 3;
    T += 3
  ) {
    var N = t[T],
      I = t[T + 1],
      L = t[T + 2],
      F = t[T + 3],
      X = t[T + 4],
      G = o === 0 ? N : I,
      K = o === 0 ? F : X,
      Q = !1;
    a && (E = Math.sqrt(Math.pow(N - F, 2) + Math.pow(I - X, 2))),
      G < n
        ? K > n && ((x = f(h, N, I, F, X, n)), a && (h.start = v + E * x))
        : G > r
        ? K < r && ((x = f(h, N, I, F, X, r)), a && (h.start = v + E * x))
        : g2(h, N, I, L),
      K < n && G >= n && ((x = f(h, N, I, F, X, n)), (Q = !0)),
      K > r && G <= r && ((x = f(h, N, I, F, X, r)), (Q = !0)),
      !l && Q && (a && (h.end = v + E * x), e.push(h), (h = V4(t))),
      a && (v += E);
  }
  var ee = t.length - 3;
  (N = t[ee]),
    (I = t[ee + 1]),
    (L = t[ee + 2]),
    (G = o === 0 ? N : I),
    G >= n && G <= r && g2(h, N, I, L),
    (ee = h.length - 3),
    l &&
      ee >= 3 &&
      (h[ee] !== h[0] || h[ee + 1] !== h[1]) &&
      g2(h, h[0], h[1], h[2]),
    h.length && e.push(h);
}
function V4(t) {
  var e = [];
  return (e.size = t.size), (e.start = t.start), (e.end = t.end), e;
}
function m2(t, e, n, r, o, l) {
  for (var a = 0; a < t.length; a++) jE(t[a], e, n, r, o, l, !1);
}
function g2(t, e, n, r) {
  t.push(e), t.push(n), t.push(r);
}
function jN(t, e, n, r, o, l) {
  var a = (l - e) / (r - e);
  return t.push(l), t.push(n + (o - n) * a), t.push(1), a;
}
function WN(t, e, n, r, o, l) {
  var a = (l - n) / (o - n);
  return t.push(e + (r - e) * a), t.push(l), t.push(1), a;
}
function XN(t, e) {
  var n = e.buffer / e.extent,
    r = t,
    o = td(t, 1, -1 - n, n, 0, -1, 2, e),
    l = td(t, 1, 1 - n, 2 + n, 0, -1, 2, e);
  return (
    (o || l) &&
      ((r = td(t, 1, -n, 1 + n, 0, -1, 2, e) || []),
      o && (r = H4(o, 1).concat(r)),
      l && (r = r.concat(H4(l, -1)))),
    r
  );
}
function H4(t, e) {
  for (var n = [], r = 0; r < t.length; r++) {
    var o = t[r],
      l = o.type,
      a;
    if (l === "Point" || l === "MultiPoint" || l === "LineString")
      a = v2(o.geometry, e);
    else if (l === "MultiLineString" || l === "Polygon") {
      a = [];
      for (var h = 0; h < o.geometry.length; h++) a.push(v2(o.geometry[h], e));
    } else if (l === "MultiPolygon")
      for (a = [], h = 0; h < o.geometry.length; h++) {
        for (var f = [], v = 0; v < o.geometry[h].length; v++)
          f.push(v2(o.geometry[h][v], e));
        a.push(f);
      }
    n.push(f1(o.id, l, a, o.tags));
  }
  return n;
}
function v2(t, e) {
  var n = [];
  (n.size = t.size),
    t.start !== void 0 && ((n.start = t.start), (n.end = t.end));
  for (var r = 0; r < t.length; r += 3) n.push(t[r] + e, t[r + 1], t[r + 2]);
  return n;
}
function j4(t, e) {
  if (t.transformed) return t;
  var n = 1 << t.z,
    r = t.x,
    o = t.y,
    l,
    a,
    h;
  for (l = 0; l < t.features.length; l++) {
    var f = t.features[l],
      v = f.geometry,
      E = f.type;
    if (((f.geometry = []), E === 1))
      for (a = 0; a < v.length; a += 2)
        f.geometry.push(W4(v[a], v[a + 1], e, n, r, o));
    else
      for (a = 0; a < v.length; a++) {
        var x = [];
        for (h = 0; h < v[a].length; h += 2)
          x.push(W4(v[a][h], v[a][h + 1], e, n, r, o));
        f.geometry.push(x);
      }
  }
  return (t.transformed = !0), t;
}
function W4(t, e, n, r, o, l) {
  return [Math.round(n * (t * r - o)), Math.round(n * (e * r - l))];
}
function GN(t, e, n, r, o) {
  for (
    var l = e === o.maxZoom ? 0 : o.tolerance / ((1 << e) * o.extent),
      a = {
        features: [],
        numPoints: 0,
        numSimplified: 0,
        numFeatures: 0,
        source: null,
        x: n,
        y: r,
        z: e,
        transformed: !1,
        minX: 2,
        minY: 1,
        maxX: -1,
        maxY: 0,
      },
      h = 0;
    h < t.length;
    h++
  ) {
    a.numFeatures++, ZN(a, t[h], l, o);
    var f = t[h].minX,
      v = t[h].minY,
      E = t[h].maxX,
      x = t[h].maxY;
    f < a.minX && (a.minX = f),
      v < a.minY && (a.minY = v),
      E > a.maxX && (a.maxX = E),
      x > a.maxY && (a.maxY = x);
  }
  return a;
}
function ZN(t, e, n, r) {
  var o = e.geometry,
    l = e.type,
    a = [];
  if (l === "Point" || l === "MultiPoint")
    for (var h = 0; h < o.length; h += 3)
      a.push(o[h]), a.push(o[h + 1]), t.numPoints++, t.numSimplified++;
  else if (l === "LineString") _2(a, o, t, n, !1, !1);
  else if (l === "MultiLineString" || l === "Polygon")
    for (h = 0; h < o.length; h++) _2(a, o[h], t, n, l === "Polygon", h === 0);
  else if (l === "MultiPolygon")
    for (var f = 0; f < o.length; f++) {
      var v = o[f];
      for (h = 0; h < v.length; h++) _2(a, v[h], t, n, !0, h === 0);
    }
  if (a.length) {
    var E = e.tags || null;
    if (l === "LineString" && r.lineMetrics) {
      E = {};
      for (var x in e.tags) E[x] = e.tags[x];
      (E.mapbox_clip_start = o.start / o.size),
        (E.mapbox_clip_end = o.end / o.size);
    }
    var T = {
      geometry: a,
      type:
        l === "Polygon" || l === "MultiPolygon"
          ? 3
          : l === "LineString" || l === "MultiLineString"
          ? 2
          : 1,
      tags: E,
    };
    e.id !== null && (T.id = e.id), t.features.push(T);
  }
}
function _2(t, e, n, r, o, l) {
  var a = r * r;
  if (r > 0 && e.size < (o ? a : r)) {
    n.numPoints += e.length / 3;
    return;
  }
  for (var h = [], f = 0; f < e.length; f += 3)
    (r === 0 || e[f + 2] > a) &&
      (n.numSimplified++, h.push(e[f]), h.push(e[f + 1])),
      n.numPoints++;
  o && YN(h, l), t.push(h);
}
function YN(t, e) {
  for (var n = 0, r = 0, o = t.length, l = o - 2; r < o; l = r, r += 2)
    n += (t[r] - t[l]) * (t[r + 1] + t[l + 1]);
  if (n > 0 === e)
    for (r = 0, o = t.length; r < o / 2; r += 2) {
      var a = t[r],
        h = t[r + 1];
      (t[r] = t[o - 2 - r]),
        (t[r + 1] = t[o - 1 - r]),
        (t[o - 2 - r] = a),
        (t[o - 1 - r] = h);
    }
}
function qN(t, e) {
  return new hv(t, e);
}
function hv(t, e) {
  e = this.options = $N(Object.create(this.options), e);
  var n = e.debug;
  if ((n && console.time("preprocess data"), e.maxZoom < 0 || e.maxZoom > 24))
    throw new Error("maxZoom should be in the 0-24 range");
  if (e.promoteId && e.generateId)
    throw new Error("promoteId and generateId cannot be used together.");
  var r = VN(t, e);
  (this.tiles = {}),
    (this.tileCoords = []),
    n &&
      (console.timeEnd("preprocess data"),
      console.log(
        "index: maxZoom: %d, maxPoints: %d",
        e.indexMaxZoom,
        e.indexMaxPoints
      ),
      console.time("generate tiles"),
      (this.stats = {}),
      (this.total = 0)),
    (r = XN(r, e)),
    r.length && this.splitTile(r, 0, 0, 0),
    n &&
      (r.length &&
        console.log(
          "features: %d, points: %d",
          this.tiles[0].numFeatures,
          this.tiles[0].numPoints
        ),
      console.timeEnd("generate tiles"),
      console.log("tiles generated:", this.total, JSON.stringify(this.stats)));
}
hv.prototype.options = {
  maxZoom: 14,
  indexMaxZoom: 5,
  indexMaxPoints: 1e5,
  tolerance: 3,
  extent: 4096,
  buffer: 64,
  lineMetrics: !1,
  promoteId: null,
  generateId: !1,
  debug: 0,
};
hv.prototype.splitTile = function (t, e, n, r, o, l, a) {
  for (var h = [t, e, n, r], f = this.options, v = f.debug; h.length; ) {
    (r = h.pop()), (n = h.pop()), (e = h.pop()), (t = h.pop());
    var E = 1 << e,
      x = Q2(e, n, r),
      T = this.tiles[x];
    if (
      !T &&
      (v > 1 && console.time("creation"),
      (T = this.tiles[x] = GN(t, e, n, r, f)),
      this.tileCoords.push({ z: e, x: n, y: r }),
      v)
    ) {
      v > 1 &&
        (console.log(
          "tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",
          e,
          n,
          r,
          T.numFeatures,
          T.numPoints,
          T.numSimplified
        ),
        console.timeEnd("creation"));
      var N = "z" + e;
      (this.stats[N] = (this.stats[N] || 0) + 1), this.total++;
    }
    if (((T.source = t), o)) {
      if (e === f.maxZoom || e === o) continue;
      var I = 1 << (o - e);
      if (n !== Math.floor(l / I) || r !== Math.floor(a / I)) continue;
    } else if (e === f.indexMaxZoom || T.numPoints <= f.indexMaxPoints)
      continue;
    if (((T.source = null), t.length !== 0)) {
      v > 1 && console.time("clipping");
      var L = (0.5 * f.buffer) / f.extent,
        F = 0.5 - L,
        X = 0.5 + L,
        G = 1 + L,
        K,
        Q,
        ee,
        Se,
        ue,
        ke;
      (K = Q = ee = Se = null),
        (ue = td(t, E, n - L, n + X, 0, T.minX, T.maxX, f)),
        (ke = td(t, E, n + F, n + G, 0, T.minX, T.maxX, f)),
        (t = null),
        ue &&
          ((K = td(ue, E, r - L, r + X, 1, T.minY, T.maxY, f)),
          (Q = td(ue, E, r + F, r + G, 1, T.minY, T.maxY, f)),
          (ue = null)),
        ke &&
          ((ee = td(ke, E, r - L, r + X, 1, T.minY, T.maxY, f)),
          (Se = td(ke, E, r + F, r + G, 1, T.minY, T.maxY, f)),
          (ke = null)),
        v > 1 && console.timeEnd("clipping"),
        h.push(K || [], e + 1, n * 2, r * 2),
        h.push(Q || [], e + 1, n * 2, r * 2 + 1),
        h.push(ee || [], e + 1, n * 2 + 1, r * 2),
        h.push(Se || [], e + 1, n * 2 + 1, r * 2 + 1);
    }
  }
};
hv.prototype.getTile = function (t, e, n) {
  var r = this.options,
    o = r.extent,
    l = r.debug;
  if (t < 0 || t > 24) return null;
  var a = 1 << t;
  e = ((e % a) + a) % a;
  var h = Q2(t, e, n);
  if (this.tiles[h]) return j4(this.tiles[h], o);
  l > 1 && console.log("drilling down to z%d-%d-%d", t, e, n);
  for (var f = t, v = e, E = n, x; !x && f > 0; )
    f--,
      (v = Math.floor(v / 2)),
      (E = Math.floor(E / 2)),
      (x = this.tiles[Q2(f, v, E)]);
  return !x || !x.source
    ? null
    : (l > 1 && console.log("found parent tile z%d-%d-%d", f, v, E),
      l > 1 && console.time("drilling down"),
      this.splitTile(x.source, f, v, E, t, e, n),
      l > 1 && console.timeEnd("drilling down"),
      this.tiles[h] ? j4(this.tiles[h], o) : null);
};
function Q2(t, e, n) {
  return ((1 << t) * n + e) * 32 + t;
}
function $N(t, e) {
  for (var n in e) t[n] = e[n];
  return t;
}
var jf = class {
    constructor(e, n, r, o) {
      (this.vectorLayerCache = {}),
        (this.x = n),
        (this.y = r),
        (this.z = o),
        (this.vectorTile = e);
    }
    getTileData(e) {
      return !e || !this.vectorTile.layers[e]
        ? []
        : this.vectorLayerCache[e]
        ? this.vectorLayerCache[e]
        : this.vectorTile.layers[e].features;
    }
    getFeatureById() {
      throw new Error("Method not implemented.");
    }
  },
  KN = Object.defineProperty,
  QN = Object.defineProperties,
  JN = Object.getOwnPropertyDescriptors,
  X4 = Object.getOwnPropertySymbols,
  eR = Object.prototype.hasOwnProperty,
  tR = Object.prototype.propertyIsEnumerable,
  G4 = (t, e, n) =>
    e in t
      ? KN(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  Ig = (t, e) => {
    for (var n in e || (e = {})) eR.call(e, n) && G4(t, n, e[n]);
    if (X4) for (var n of X4(e)) tR.call(e, n) && G4(t, n, e[n]);
    return t;
  },
  nR = (t, e) => QN(t, JN(e)),
  rR = (t, e, n) =>
    new Promise((r, o) => {
      var l = (f) => {
          try {
            h(n.next(f));
          } catch (v) {
            o(v);
          }
        },
        a = (f) => {
          try {
            h(n.throw(f));
          } catch (v) {
            o(v);
          }
        },
        h = (f) => (f.done ? r(f.value) : Promise.resolve(f.value).then(l, a));
      h((n = n.apply(t, e)).next());
    }),
  iR = { tileSize: 256, minZoom: 0, maxZoom: 1 / 0, zoomOffset: 0 };
function aR(t) {
  let e = 0;
  for (let n = 0, r = t.length, o = r - 1, l, a; n < r; o = n++)
    (l = t[n]), (a = t[o]), (e += (a.x - l.x) * (l.y + a.y));
  return e;
}
function oR(t) {
  const e = t.length;
  if (e <= 1) return [t];
  const n = [];
  let r, o;
  for (let l = 0; l < e; l++) {
    const a = aR(t[l]);
    a !== 0 &&
      (o === void 0 && (o = a < 0),
      o === a < 0 ? (r && n.push(r), (r = [t[l]])) : r.push(t[l]));
  }
  return r && n.push(r), n;
}
var sR = ["Unknown", "Point", "LineString", "Polygon"];
function lR(t, e, n, r, o) {
  let l = o.geometry;
  const a = o.type,
    h = o.tags,
    f = o.id,
    v = t * Math.pow(2, r),
    E = t * e,
    x = t * n;
  let T = sR[a],
    N,
    I;
  function L(X) {
    for (let G = 0; G < X.length; G++) {
      const K = X[G];
      if (K[3]) break;
      const Q = 180 - ((K[1] + x) * 360) / v,
        ee = ((K[0] + E) * 360) / v - 180,
        Se = (360 / Math.PI) * Math.atan(Math.exp((Q * Math.PI) / 180)) - 90;
      X[G] = [ee, Se, 0, 1];
    }
  }
  switch (a) {
    case 1:
      const X = [];
      for (N = 0; N < l.length; N++) X[N] = l[N][0];
      (l = X), L(l);
      break;
    case 2:
      for (N = 0; N < l.length; N++) L(l[N]);
      break;
    case 3:
      for (l = oR(l), N = 0; N < l.length; N++)
        for (I = 0; I < l[N].length; I++) L(l[N][I]);
      break;
  }
  return (
    l.length === 1 ? (l = l[0]) : (T = "Multi" + T),
    {
      type: "Feature",
      geometry: { type: T, coordinates: l },
      properties: h,
      id: f,
      tileOrigin: [0, 0],
      coord: "",
    }
  );
}
var cR = (t, e, n, r) =>
  rR(void 0, null, function* () {
    return new Promise((o) => {
      const l = e.getTile(t.z, t.x, t.y),
        h = {
          layers: {
            defaultLayer: {
              features: l ? l.features.map((v) => lR(r, n.x, n.y, n.z, v)) : [],
            },
          },
        },
        f = new jf(h, t.x, t.y, t.z);
      o(f);
    });
  });
function uR(t) {
  const e = {
    maxZoom: 14,
    indexMaxZoom: 5,
    indexMaxPoints: 1e5,
    tolerance: 3,
    extent: 4096,
    buffer: 64,
    lineMetrics: !1,
    promoteId: null,
    generateId: !0,
    debug: 0,
  };
  return t === void 0 || typeof t.geojsonvtOptions > "u"
    ? e
    : Ig(Ig({}, e), t.geojsonvtOptions);
}
function dR(t, e) {
  const n = uR(e),
    r = n.extent || 4096,
    o = qN(t, n),
    l = (h, f) => cR(f, o, h, r),
    a = nR(Ig(Ig({}, iR), e), { getTileData: l });
  return { data: t, dataArray: [], tilesetOptions: a, isTile: !0 };
}
var hR = Object.defineProperty,
  pR = Object.defineProperties,
  fR = Object.getOwnPropertyDescriptors,
  Z4 = Object.getOwnPropertySymbols,
  mR = Object.prototype.hasOwnProperty,
  gR = Object.prototype.propertyIsEnumerable,
  Y4 = (t, e, n) =>
    e in t
      ? hR(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  q4 = (t, e) => {
    for (var n in e || (e = {})) mR.call(e, n) && Y4(t, n, e[n]);
    if (Z4) for (var n of Z4(e)) gR.call(e, n) && Y4(t, n, e[n]);
    return t;
  },
  $4 = (t, e) => pR(t, fR(e));
function WE(t, e) {
  const {
      extent: n = [121.168, 30.2828, 121.384, 30.4219],
      coordinates: r,
      requestParameters: o = {},
    } = e,
    l = new Promise((f) => {
      t instanceof HTMLImageElement || PC(t)
        ? f([t])
        : vR(t, o, (v) => {
            f(v);
          });
    }),
    a = O1(r, n);
  return {
    originData: t,
    images: l,
    _id: 1,
    dataArray: [{ _id: 0, coordinates: a }],
  };
}
function vR(t, e, n) {
  const r = [];
  if (typeof t == "string")
    G2($4(q4({}, e), { url: t }), (o, l) => {
      l && (r.push(l), n(r));
    });
  else {
    const o = t.length;
    let l = 0;
    t.forEach((a) => {
      G2($4(q4({}, e), { url: a }), (h, f) => {
        l++, f && r.push(f), l === o && n(r);
      });
    });
  }
  return WE;
}
var _R = Object.defineProperty,
  yR = Object.defineProperties,
  xR = Object.getOwnPropertyDescriptors,
  K4 = Object.getOwnPropertySymbols,
  bR = Object.prototype.hasOwnProperty,
  ER = Object.prototype.propertyIsEnumerable,
  Q4 = (t, e, n) =>
    e in t
      ? _R(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  XE = (t, e) => {
    for (var n in e || (e = {})) bR.call(e, n) && Q4(t, n, e[n]);
    if (K4) for (var n of K4(e)) ER.call(e, n) && Q4(t, n, e[n]);
    return t;
  },
  GE = (t, e) => yR(t, xR(e)),
  AR = (t, e, n) =>
    new Promise((r, o) => {
      var l = (f) => {
          try {
            h(n.next(f));
          } catch (v) {
            o(v);
          }
        },
        a = (f) => {
          try {
            h(n.throw(f));
          } catch (v) {
            o(v);
          }
        },
        h = (f) => (f.done ? r(f.value) : Promise.resolve(f.value).then(l, a));
      h((n = n.apply(t, e)).next());
    }),
  TR = (t, e, n, r) =>
    AR(void 0, null, function* () {
      const o = { x: e.x, y: e.y, z: e.z },
        l = gp(t, o);
      return new Promise((a) => {
        r
          ? r(o, (h, f) => {
              if (h || !f) {
                const v = { layers: { defaultLayer: { features: [] } } },
                  E = new jf(v, e.x, e.y, e.z);
                a(E);
              } else {
                const v = {
                    layers: { defaultLayer: { features: f.features } },
                  },
                  E = new jf(v, e.x, e.y, e.z);
                a(E);
              }
            })
          : TS(GE(XE({}, n), { url: l }), (h, f) => {
              if (h || !f) {
                const v = { layers: { defaultLayer: { features: [] } } },
                  E = new jf(v, e.x, e.y, e.z);
                a(E);
              } else {
                const E = {
                    layers: { defaultLayer: { features: JSON.parse(f) } },
                  },
                  x = new jf(E, e.x, e.y, e.z);
                a(x);
              }
            });
      });
    });
function SR(t, e) {
  const n = (o, l) =>
      TR(t, l, e == null ? void 0 : e.requestParameters, e.getCustomData),
    r = GE(XE({}, e), { getTileData: n });
  return { dataArray: [], tilesetOptions: r, isTile: !0 };
}
var ZE = vp;
function vp(t, e) {
  (this.x = t), (this.y = e);
}
vp.prototype = {
  clone: function () {
    return new vp(this.x, this.y);
  },
  add: function (t) {
    return this.clone()._add(t);
  },
  sub: function (t) {
    return this.clone()._sub(t);
  },
  multByPoint: function (t) {
    return this.clone()._multByPoint(t);
  },
  divByPoint: function (t) {
    return this.clone()._divByPoint(t);
  },
  mult: function (t) {
    return this.clone()._mult(t);
  },
  div: function (t) {
    return this.clone()._div(t);
  },
  rotate: function (t) {
    return this.clone()._rotate(t);
  },
  rotateAround: function (t, e) {
    return this.clone()._rotateAround(t, e);
  },
  matMult: function (t) {
    return this.clone()._matMult(t);
  },
  unit: function () {
    return this.clone()._unit();
  },
  perp: function () {
    return this.clone()._perp();
  },
  round: function () {
    return this.clone()._round();
  },
  mag: function () {
    return Math.sqrt(this.x * this.x + this.y * this.y);
  },
  equals: function (t) {
    return this.x === t.x && this.y === t.y;
  },
  dist: function (t) {
    return Math.sqrt(this.distSqr(t));
  },
  distSqr: function (t) {
    var e = t.x - this.x,
      n = t.y - this.y;
    return e * e + n * n;
  },
  angle: function () {
    return Math.atan2(this.y, this.x);
  },
  angleTo: function (t) {
    return Math.atan2(this.y - t.y, this.x - t.x);
  },
  angleWith: function (t) {
    return this.angleWithSep(t.x, t.y);
  },
  angleWithSep: function (t, e) {
    return Math.atan2(this.x * e - this.y * t, this.x * t + this.y * e);
  },
  _matMult: function (t) {
    var e = t[0] * this.x + t[1] * this.y,
      n = t[2] * this.x + t[3] * this.y;
    return (this.x = e), (this.y = n), this;
  },
  _add: function (t) {
    return (this.x += t.x), (this.y += t.y), this;
  },
  _sub: function (t) {
    return (this.x -= t.x), (this.y -= t.y), this;
  },
  _mult: function (t) {
    return (this.x *= t), (this.y *= t), this;
  },
  _div: function (t) {
    return (this.x /= t), (this.y /= t), this;
  },
  _multByPoint: function (t) {
    return (this.x *= t.x), (this.y *= t.y), this;
  },
  _divByPoint: function (t) {
    return (this.x /= t.x), (this.y /= t.y), this;
  },
  _unit: function () {
    return this._div(this.mag()), this;
  },
  _perp: function () {
    var t = this.y;
    return (this.y = this.x), (this.x = -t), this;
  },
  _rotate: function (t) {
    var e = Math.cos(t),
      n = Math.sin(t),
      r = e * this.x - n * this.y,
      o = n * this.x + e * this.y;
    return (this.x = r), (this.y = o), this;
  },
  _rotateAround: function (t, e) {
    var n = Math.cos(t),
      r = Math.sin(t),
      o = e.x + n * (this.x - e.x) - r * (this.y - e.y),
      l = e.y + r * (this.x - e.x) + n * (this.y - e.y);
    return (this.x = o), (this.y = l), this;
  },
  _round: function () {
    return (this.x = Math.round(this.x)), (this.y = Math.round(this.y)), this;
  },
};
vp.convert = function (t) {
  return t instanceof vp ? t : Array.isArray(t) ? new vp(t[0], t[1]) : t;
};
const oi = ea(ZE);
var wR = ZE,
  CR = wp;
function wp(t, e, n, r, o) {
  (this.properties = {}),
    (this.extent = n),
    (this.type = 0),
    (this._pbf = t),
    (this._geometry = -1),
    (this._keys = r),
    (this._values = o),
    t.readFields(NR, this, e);
}
function NR(t, e, n) {
  t == 1
    ? (e.id = n.readVarint())
    : t == 2
    ? RR(n, e)
    : t == 3
    ? (e.type = n.readVarint())
    : t == 4 && (e._geometry = n.pos);
}
function RR(t, e) {
  for (var n = t.readVarint() + t.pos; t.pos < n; ) {
    var r = e._keys[t.readVarint()],
      o = e._values[t.readVarint()];
    e.properties[r] = o;
  }
}
wp.types = ["Unknown", "Point", "LineString", "Polygon"];
wp.prototype.loadGeometry = function () {
  var t = this._pbf;
  t.pos = this._geometry;
  for (
    var e = t.readVarint() + t.pos, n = 1, r = 0, o = 0, l = 0, a = [], h;
    t.pos < e;

  ) {
    if (r <= 0) {
      var f = t.readVarint();
      (n = f & 7), (r = f >> 3);
    }
    if ((r--, n === 1 || n === 2))
      (o += t.readSVarint()),
        (l += t.readSVarint()),
        n === 1 && (h && a.push(h), (h = [])),
        h.push(new wR(o, l));
    else if (n === 7) h && h.push(h[0].clone());
    else throw new Error("unknown command " + n);
  }
  return h && a.push(h), a;
};
wp.prototype.bbox = function () {
  var t = this._pbf;
  t.pos = this._geometry;
  for (
    var e = t.readVarint() + t.pos,
      n = 1,
      r = 0,
      o = 0,
      l = 0,
      a = 1 / 0,
      h = -1 / 0,
      f = 1 / 0,
      v = -1 / 0;
    t.pos < e;

  ) {
    if (r <= 0) {
      var E = t.readVarint();
      (n = E & 7), (r = E >> 3);
    }
    if ((r--, n === 1 || n === 2))
      (o += t.readSVarint()),
        (l += t.readSVarint()),
        o < a && (a = o),
        o > h && (h = o),
        l < f && (f = l),
        l > v && (v = l);
    else if (n !== 7) throw new Error("unknown command " + n);
  }
  return [a, f, h, v];
};
wp.prototype.toGeoJSON = function (t, e, n) {
  var r = this.extent * Math.pow(2, n),
    o = this.extent * t,
    l = this.extent * e,
    a = this.loadGeometry(),
    h = wp.types[this.type],
    f,
    v;
  function E(N) {
    for (var I = 0; I < N.length; I++) {
      var L = N[I],
        F = 180 - ((L.y + l) * 360) / r;
      N[I] = [
        ((L.x + o) * 360) / r - 180,
        (360 / Math.PI) * Math.atan(Math.exp((F * Math.PI) / 180)) - 90,
      ];
    }
  }
  switch (this.type) {
    case 1:
      var x = [];
      for (f = 0; f < a.length; f++) x[f] = a[f][0];
      (a = x), E(a);
      break;
    case 2:
      for (f = 0; f < a.length; f++) E(a[f]);
      break;
    case 3:
      for (a = IR(a), f = 0; f < a.length; f++)
        for (v = 0; v < a[f].length; v++) E(a[f][v]);
      break;
  }
  a.length === 1 ? (a = a[0]) : (h = "Multi" + h);
  var T = {
    type: "Feature",
    geometry: { type: h, coordinates: a },
    properties: this.properties,
  };
  return "id" in this && (T.id = this.id), T;
};
function IR(t) {
  var e = t.length;
  if (e <= 1) return [t];
  for (var n = [], r, o, l = 0; l < e; l++) {
    var a = MR(t[l]);
    a !== 0 &&
      (o === void 0 && (o = a < 0),
      o === a < 0 ? (r && n.push(r), (r = [t[l]])) : r.push(t[l]));
  }
  return r && n.push(r), n;
}
function MR(t) {
  for (var e = 0, n = 0, r = t.length, o = r - 1, l, a; n < r; o = n++)
    (l = t[n]), (a = t[o]), (e += (a.x - l.x) * (l.y + a.y));
  return e;
}
var PR = CR,
  OR = YE;
function YE(t, e) {
  (this.version = 1),
    (this.name = null),
    (this.extent = 4096),
    (this.length = 0),
    (this._pbf = t),
    (this._keys = []),
    (this._values = []),
    (this._features = []),
    t.readFields(LR, this, e),
    (this.length = this._features.length);
}
function LR(t, e, n) {
  t === 15
    ? (e.version = n.readVarint())
    : t === 1
    ? (e.name = n.readString())
    : t === 5
    ? (e.extent = n.readVarint())
    : t === 2
    ? e._features.push(n.pos)
    : t === 3
    ? e._keys.push(n.readString())
    : t === 4 && e._values.push(DR(n));
}
function DR(t) {
  for (var e = null, n = t.readVarint() + t.pos; t.pos < n; ) {
    var r = t.readVarint() >> 3;
    e =
      r === 1
        ? t.readString()
        : r === 2
        ? t.readFloat()
        : r === 3
        ? t.readDouble()
        : r === 4
        ? t.readVarint64()
        : r === 5
        ? t.readVarint()
        : r === 6
        ? t.readSVarint()
        : r === 7
        ? t.readBoolean()
        : null;
  }
  return e;
}
YE.prototype.feature = function (t) {
  if (t < 0 || t >= this._features.length)
    throw new Error("feature index out of bounds");
  this._pbf.pos = this._features[t];
  var e = this._pbf.readVarint() + this._pbf.pos;
  return new PR(this._pbf, e, this.extent, this._keys, this._values);
};
var BR = OR,
  FR = kR;
function kR(t, e) {
  this.layers = t.readFields(UR, {}, e);
}
function UR(t, e, n) {
  if (t === 3) {
    var r = new BR(n, n.readVarint() + n.pos);
    r.length && (e[r.name] = r);
  }
}
var zR = FR,
  y3 = {};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ y3.read =
  function (t, e, n, r, o) {
    var l,
      a,
      h = o * 8 - r - 1,
      f = (1 << h) - 1,
      v = f >> 1,
      E = -7,
      x = n ? o - 1 : 0,
      T = n ? -1 : 1,
      N = t[e + x];
    for (
      x += T, l = N & ((1 << -E) - 1), N >>= -E, E += h;
      E > 0;
      l = l * 256 + t[e + x], x += T, E -= 8
    );
    for (
      a = l & ((1 << -E) - 1), l >>= -E, E += r;
      E > 0;
      a = a * 256 + t[e + x], x += T, E -= 8
    );
    if (l === 0) l = 1 - v;
    else {
      if (l === f) return a ? NaN : (N ? -1 : 1) * (1 / 0);
      (a = a + Math.pow(2, r)), (l = l - v);
    }
    return (N ? -1 : 1) * a * Math.pow(2, l - r);
  };
y3.write = function (t, e, n, r, o, l) {
  var a,
    h,
    f,
    v = l * 8 - o - 1,
    E = (1 << v) - 1,
    x = E >> 1,
    T = o === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0,
    N = r ? 0 : l - 1,
    I = r ? 1 : -1,
    L = e < 0 || (e === 0 && 1 / e < 0) ? 1 : 0;
  for (
    e = Math.abs(e),
      isNaN(e) || e === 1 / 0
        ? ((h = isNaN(e) ? 1 : 0), (a = E))
        : ((a = Math.floor(Math.log(e) / Math.LN2)),
          e * (f = Math.pow(2, -a)) < 1 && (a--, (f *= 2)),
          a + x >= 1 ? (e += T / f) : (e += T * Math.pow(2, 1 - x)),
          e * f >= 2 && (a++, (f /= 2)),
          a + x >= E
            ? ((h = 0), (a = E))
            : a + x >= 1
            ? ((h = (e * f - 1) * Math.pow(2, o)), (a = a + x))
            : ((h = e * Math.pow(2, x - 1) * Math.pow(2, o)), (a = 0)));
    o >= 8;
    t[n + N] = h & 255, N += I, h /= 256, o -= 8
  );
  for (
    a = (a << o) | h, v += o;
    v > 0;
    t[n + N] = a & 255, N += I, a /= 256, v -= 8
  );
  t[n + N - I] |= L * 128;
};
var VR = Ti,
  Im = y3;
function Ti(t) {
  (this.buf =
    ArrayBuffer.isView && ArrayBuffer.isView(t) ? t : new Uint8Array(t || 0)),
    (this.pos = 0),
    (this.type = 0),
    (this.length = this.buf.length);
}
Ti.Varint = 0;
Ti.Fixed64 = 1;
Ti.Bytes = 2;
Ti.Fixed32 = 5;
var J2 = 65536 * 65536,
  J4 = 1 / J2,
  HR = 12,
  qE = typeof TextDecoder > "u" ? null : new TextDecoder("utf-8");
Ti.prototype = {
  destroy: function () {
    this.buf = null;
  },
  readFields: function (t, e, n) {
    for (n = n || this.length; this.pos < n; ) {
      var r = this.readVarint(),
        o = r >> 3,
        l = this.pos;
      (this.type = r & 7), t(o, e, this), this.pos === l && this.skip(r);
    }
    return e;
  },
  readMessage: function (t, e) {
    return this.readFields(t, e, this.readVarint() + this.pos);
  },
  readFixed32: function () {
    var t = Mm(this.buf, this.pos);
    return (this.pos += 4), t;
  },
  readSFixed32: function () {
    var t = t5(this.buf, this.pos);
    return (this.pos += 4), t;
  },
  readFixed64: function () {
    var t = Mm(this.buf, this.pos) + Mm(this.buf, this.pos + 4) * J2;
    return (this.pos += 8), t;
  },
  readSFixed64: function () {
    var t = Mm(this.buf, this.pos) + t5(this.buf, this.pos + 4) * J2;
    return (this.pos += 8), t;
  },
  readFloat: function () {
    var t = Im.read(this.buf, this.pos, !0, 23, 4);
    return (this.pos += 4), t;
  },
  readDouble: function () {
    var t = Im.read(this.buf, this.pos, !0, 52, 8);
    return (this.pos += 8), t;
  },
  readVarint: function (t) {
    var e = this.buf,
      n,
      r;
    return (
      (r = e[this.pos++]),
      (n = r & 127),
      r < 128 ||
      ((r = e[this.pos++]), (n |= (r & 127) << 7), r < 128) ||
      ((r = e[this.pos++]), (n |= (r & 127) << 14), r < 128) ||
      ((r = e[this.pos++]), (n |= (r & 127) << 21), r < 128)
        ? n
        : ((r = e[this.pos]), (n |= (r & 15) << 28), jR(n, t, this))
    );
  },
  readVarint64: function () {
    return this.readVarint(!0);
  },
  readSVarint: function () {
    var t = this.readVarint();
    return t % 2 === 1 ? (t + 1) / -2 : t / 2;
  },
  readBoolean: function () {
    return !!this.readVarint();
  },
  readString: function () {
    var t = this.readVarint() + this.pos,
      e = this.pos;
    return (
      (this.pos = t),
      t - e >= HR && qE ? rI(this.buf, e, t) : nI(this.buf, e, t)
    );
  },
  readBytes: function () {
    var t = this.readVarint() + this.pos,
      e = this.buf.subarray(this.pos, t);
    return (this.pos = t), e;
  },
  readPackedVarint: function (t, e) {
    if (this.type !== Ti.Bytes) return t.push(this.readVarint(e));
    var n = Qu(this);
    for (t = t || []; this.pos < n; ) t.push(this.readVarint(e));
    return t;
  },
  readPackedSVarint: function (t) {
    if (this.type !== Ti.Bytes) return t.push(this.readSVarint());
    var e = Qu(this);
    for (t = t || []; this.pos < e; ) t.push(this.readSVarint());
    return t;
  },
  readPackedBoolean: function (t) {
    if (this.type !== Ti.Bytes) return t.push(this.readBoolean());
    var e = Qu(this);
    for (t = t || []; this.pos < e; ) t.push(this.readBoolean());
    return t;
  },
  readPackedFloat: function (t) {
    if (this.type !== Ti.Bytes) return t.push(this.readFloat());
    var e = Qu(this);
    for (t = t || []; this.pos < e; ) t.push(this.readFloat());
    return t;
  },
  readPackedDouble: function (t) {
    if (this.type !== Ti.Bytes) return t.push(this.readDouble());
    var e = Qu(this);
    for (t = t || []; this.pos < e; ) t.push(this.readDouble());
    return t;
  },
  readPackedFixed32: function (t) {
    if (this.type !== Ti.Bytes) return t.push(this.readFixed32());
    var e = Qu(this);
    for (t = t || []; this.pos < e; ) t.push(this.readFixed32());
    return t;
  },
  readPackedSFixed32: function (t) {
    if (this.type !== Ti.Bytes) return t.push(this.readSFixed32());
    var e = Qu(this);
    for (t = t || []; this.pos < e; ) t.push(this.readSFixed32());
    return t;
  },
  readPackedFixed64: function (t) {
    if (this.type !== Ti.Bytes) return t.push(this.readFixed64());
    var e = Qu(this);
    for (t = t || []; this.pos < e; ) t.push(this.readFixed64());
    return t;
  },
  readPackedSFixed64: function (t) {
    if (this.type !== Ti.Bytes) return t.push(this.readSFixed64());
    var e = Qu(this);
    for (t = t || []; this.pos < e; ) t.push(this.readSFixed64());
    return t;
  },
  skip: function (t) {
    var e = t & 7;
    if (e === Ti.Varint) for (; this.buf[this.pos++] > 127; );
    else if (e === Ti.Bytes) this.pos = this.readVarint() + this.pos;
    else if (e === Ti.Fixed32) this.pos += 4;
    else if (e === Ti.Fixed64) this.pos += 8;
    else throw new Error("Unimplemented type: " + e);
  },
  writeTag: function (t, e) {
    this.writeVarint((t << 3) | e);
  },
  realloc: function (t) {
    for (var e = this.length || 16; e < this.pos + t; ) e *= 2;
    if (e !== this.length) {
      var n = new Uint8Array(e);
      n.set(this.buf), (this.buf = n), (this.length = e);
    }
  },
  finish: function () {
    return (
      (this.length = this.pos),
      (this.pos = 0),
      this.buf.subarray(0, this.length)
    );
  },
  writeFixed32: function (t) {
    this.realloc(4), qh(this.buf, t, this.pos), (this.pos += 4);
  },
  writeSFixed32: function (t) {
    this.realloc(4), qh(this.buf, t, this.pos), (this.pos += 4);
  },
  writeFixed64: function (t) {
    this.realloc(8),
      qh(this.buf, t & -1, this.pos),
      qh(this.buf, Math.floor(t * J4), this.pos + 4),
      (this.pos += 8);
  },
  writeSFixed64: function (t) {
    this.realloc(8),
      qh(this.buf, t & -1, this.pos),
      qh(this.buf, Math.floor(t * J4), this.pos + 4),
      (this.pos += 8);
  },
  writeVarint: function (t) {
    if (((t = +t || 0), t > 268435455 || t < 0)) {
      WR(t, this);
      return;
    }
    this.realloc(4),
      (this.buf[this.pos++] = (t & 127) | (t > 127 ? 128 : 0)),
      !(t <= 127) &&
        ((this.buf[this.pos++] = ((t >>>= 7) & 127) | (t > 127 ? 128 : 0)),
        !(t <= 127) &&
          ((this.buf[this.pos++] = ((t >>>= 7) & 127) | (t > 127 ? 128 : 0)),
          !(t <= 127) && (this.buf[this.pos++] = (t >>> 7) & 127)));
  },
  writeSVarint: function (t) {
    this.writeVarint(t < 0 ? -t * 2 - 1 : t * 2);
  },
  writeBoolean: function (t) {
    this.writeVarint(!!t);
  },
  writeString: function (t) {
    (t = String(t)), this.realloc(t.length * 4), this.pos++;
    var e = this.pos;
    this.pos = iI(this.buf, t, this.pos);
    var n = this.pos - e;
    n >= 128 && e5(e, n, this),
      (this.pos = e - 1),
      this.writeVarint(n),
      (this.pos += n);
  },
  writeFloat: function (t) {
    this.realloc(4),
      Im.write(this.buf, t, this.pos, !0, 23, 4),
      (this.pos += 4);
  },
  writeDouble: function (t) {
    this.realloc(8),
      Im.write(this.buf, t, this.pos, !0, 52, 8),
      (this.pos += 8);
  },
  writeBytes: function (t) {
    var e = t.length;
    this.writeVarint(e), this.realloc(e);
    for (var n = 0; n < e; n++) this.buf[this.pos++] = t[n];
  },
  writeRawMessage: function (t, e) {
    this.pos++;
    var n = this.pos;
    t(e, this);
    var r = this.pos - n;
    r >= 128 && e5(n, r, this),
      (this.pos = n - 1),
      this.writeVarint(r),
      (this.pos += r);
  },
  writeMessage: function (t, e, n) {
    this.writeTag(t, Ti.Bytes), this.writeRawMessage(e, n);
  },
  writePackedVarint: function (t, e) {
    e.length && this.writeMessage(t, ZR, e);
  },
  writePackedSVarint: function (t, e) {
    e.length && this.writeMessage(t, YR, e);
  },
  writePackedBoolean: function (t, e) {
    e.length && this.writeMessage(t, KR, e);
  },
  writePackedFloat: function (t, e) {
    e.length && this.writeMessage(t, qR, e);
  },
  writePackedDouble: function (t, e) {
    e.length && this.writeMessage(t, $R, e);
  },
  writePackedFixed32: function (t, e) {
    e.length && this.writeMessage(t, QR, e);
  },
  writePackedSFixed32: function (t, e) {
    e.length && this.writeMessage(t, JR, e);
  },
  writePackedFixed64: function (t, e) {
    e.length && this.writeMessage(t, eI, e);
  },
  writePackedSFixed64: function (t, e) {
    e.length && this.writeMessage(t, tI, e);
  },
  writeBytesField: function (t, e) {
    this.writeTag(t, Ti.Bytes), this.writeBytes(e);
  },
  writeFixed32Field: function (t, e) {
    this.writeTag(t, Ti.Fixed32), this.writeFixed32(e);
  },
  writeSFixed32Field: function (t, e) {
    this.writeTag(t, Ti.Fixed32), this.writeSFixed32(e);
  },
  writeFixed64Field: function (t, e) {
    this.writeTag(t, Ti.Fixed64), this.writeFixed64(e);
  },
  writeSFixed64Field: function (t, e) {
    this.writeTag(t, Ti.Fixed64), this.writeSFixed64(e);
  },
  writeVarintField: function (t, e) {
    this.writeTag(t, Ti.Varint), this.writeVarint(e);
  },
  writeSVarintField: function (t, e) {
    this.writeTag(t, Ti.Varint), this.writeSVarint(e);
  },
  writeStringField: function (t, e) {
    this.writeTag(t, Ti.Bytes), this.writeString(e);
  },
  writeFloatField: function (t, e) {
    this.writeTag(t, Ti.Fixed32), this.writeFloat(e);
  },
  writeDoubleField: function (t, e) {
    this.writeTag(t, Ti.Fixed64), this.writeDouble(e);
  },
  writeBooleanField: function (t, e) {
    this.writeVarintField(t, !!e);
  },
};
function jR(t, e, n) {
  var r = n.buf,
    o,
    l;
  if (
    ((l = r[n.pos++]),
    (o = (l & 112) >> 4),
    l < 128 ||
      ((l = r[n.pos++]), (o |= (l & 127) << 3), l < 128) ||
      ((l = r[n.pos++]), (o |= (l & 127) << 10), l < 128) ||
      ((l = r[n.pos++]), (o |= (l & 127) << 17), l < 128) ||
      ((l = r[n.pos++]), (o |= (l & 127) << 24), l < 128) ||
      ((l = r[n.pos++]), (o |= (l & 1) << 31), l < 128))
  )
    return Yh(t, o, e);
  throw new Error("Expected varint not more than 10 bytes");
}
function Qu(t) {
  return t.type === Ti.Bytes ? t.readVarint() + t.pos : t.pos + 1;
}
function Yh(t, e, n) {
  return n ? e * 4294967296 + (t >>> 0) : (e >>> 0) * 4294967296 + (t >>> 0);
}
function WR(t, e) {
  var n, r;
  if (
    (t >= 0
      ? ((n = t % 4294967296 | 0), (r = (t / 4294967296) | 0))
      : ((n = ~(-t % 4294967296)),
        (r = ~(-t / 4294967296)),
        n ^ 4294967295 ? (n = (n + 1) | 0) : ((n = 0), (r = (r + 1) | 0))),
    t >= 18446744073709552e3 || t < -18446744073709552e3)
  )
    throw new Error("Given varint doesn't fit into 10 bytes");
  e.realloc(10), XR(n, r, e), GR(r, e);
}
function XR(t, e, n) {
  (n.buf[n.pos++] = (t & 127) | 128),
    (t >>>= 7),
    (n.buf[n.pos++] = (t & 127) | 128),
    (t >>>= 7),
    (n.buf[n.pos++] = (t & 127) | 128),
    (t >>>= 7),
    (n.buf[n.pos++] = (t & 127) | 128),
    (t >>>= 7),
    (n.buf[n.pos] = t & 127);
}
function GR(t, e) {
  var n = (t & 7) << 4;
  (e.buf[e.pos++] |= n | ((t >>>= 3) ? 128 : 0)),
    t &&
      ((e.buf[e.pos++] = (t & 127) | ((t >>>= 7) ? 128 : 0)),
      t &&
        ((e.buf[e.pos++] = (t & 127) | ((t >>>= 7) ? 128 : 0)),
        t &&
          ((e.buf[e.pos++] = (t & 127) | ((t >>>= 7) ? 128 : 0)),
          t &&
            ((e.buf[e.pos++] = (t & 127) | ((t >>>= 7) ? 128 : 0)),
            t && (e.buf[e.pos++] = t & 127)))));
}
function e5(t, e, n) {
  var r =
    e <= 16383
      ? 1
      : e <= 2097151
      ? 2
      : e <= 268435455
      ? 3
      : Math.floor(Math.log(e) / (Math.LN2 * 7));
  n.realloc(r);
  for (var o = n.pos - 1; o >= t; o--) n.buf[o + r] = n.buf[o];
}
function ZR(t, e) {
  for (var n = 0; n < t.length; n++) e.writeVarint(t[n]);
}
function YR(t, e) {
  for (var n = 0; n < t.length; n++) e.writeSVarint(t[n]);
}
function qR(t, e) {
  for (var n = 0; n < t.length; n++) e.writeFloat(t[n]);
}
function $R(t, e) {
  for (var n = 0; n < t.length; n++) e.writeDouble(t[n]);
}
function KR(t, e) {
  for (var n = 0; n < t.length; n++) e.writeBoolean(t[n]);
}
function QR(t, e) {
  for (var n = 0; n < t.length; n++) e.writeFixed32(t[n]);
}
function JR(t, e) {
  for (var n = 0; n < t.length; n++) e.writeSFixed32(t[n]);
}
function eI(t, e) {
  for (var n = 0; n < t.length; n++) e.writeFixed64(t[n]);
}
function tI(t, e) {
  for (var n = 0; n < t.length; n++) e.writeSFixed64(t[n]);
}
function Mm(t, e) {
  return (t[e] | (t[e + 1] << 8) | (t[e + 2] << 16)) + t[e + 3] * 16777216;
}
function qh(t, e, n) {
  (t[n] = e),
    (t[n + 1] = e >>> 8),
    (t[n + 2] = e >>> 16),
    (t[n + 3] = e >>> 24);
}
function t5(t, e) {
  return (t[e] | (t[e + 1] << 8) | (t[e + 2] << 16)) + (t[e + 3] << 24);
}
function nI(t, e, n) {
  for (var r = "", o = e; o < n; ) {
    var l = t[o],
      a = null,
      h = l > 239 ? 4 : l > 223 ? 3 : l > 191 ? 2 : 1;
    if (o + h > n) break;
    var f, v, E;
    h === 1
      ? l < 128 && (a = l)
      : h === 2
      ? ((f = t[o + 1]),
        (f & 192) === 128 &&
          ((a = ((l & 31) << 6) | (f & 63)), a <= 127 && (a = null)))
      : h === 3
      ? ((f = t[o + 1]),
        (v = t[o + 2]),
        (f & 192) === 128 &&
          (v & 192) === 128 &&
          ((a = ((l & 15) << 12) | ((f & 63) << 6) | (v & 63)),
          (a <= 2047 || (a >= 55296 && a <= 57343)) && (a = null)))
      : h === 4 &&
        ((f = t[o + 1]),
        (v = t[o + 2]),
        (E = t[o + 3]),
        (f & 192) === 128 &&
          (v & 192) === 128 &&
          (E & 192) === 128 &&
          ((a =
            ((l & 15) << 18) | ((f & 63) << 12) | ((v & 63) << 6) | (E & 63)),
          (a <= 65535 || a >= 1114112) && (a = null))),
      a === null
        ? ((a = 65533), (h = 1))
        : a > 65535 &&
          ((a -= 65536),
          (r += String.fromCharCode(((a >>> 10) & 1023) | 55296)),
          (a = 56320 | (a & 1023))),
      (r += String.fromCharCode(a)),
      (o += h);
  }
  return r;
}
function rI(t, e, n) {
  return qE.decode(t.subarray(e, n));
}
function iI(t, e, n) {
  for (var r = 0, o, l; r < e.length; r++) {
    if (((o = e.charCodeAt(r)), o > 55295 && o < 57344))
      if (l)
        if (o < 56320) {
          (t[n++] = 239), (t[n++] = 191), (t[n++] = 189), (l = o);
          continue;
        } else (o = ((l - 55296) << 10) | (o - 56320) | 65536), (l = null);
      else {
        o > 56319 || r + 1 === e.length
          ? ((t[n++] = 239), (t[n++] = 191), (t[n++] = 189))
          : (l = o);
        continue;
      }
    else l && ((t[n++] = 239), (t[n++] = 191), (t[n++] = 189), (l = null));
    o < 128
      ? (t[n++] = o)
      : (o < 2048
          ? (t[n++] = (o >> 6) | 192)
          : (o < 65536
              ? (t[n++] = (o >> 12) | 224)
              : ((t[n++] = (o >> 18) | 240), (t[n++] = ((o >> 12) & 63) | 128)),
            (t[n++] = ((o >> 6) & 63) | 128)),
        (t[n++] = (o & 63) | 128));
  }
  return n;
}
const aI = ea(VR);
var oI = Object.defineProperty,
  sI = Object.defineProperties,
  lI = Object.getOwnPropertyDescriptors,
  n5 = Object.getOwnPropertySymbols,
  cI = Object.prototype.hasOwnProperty,
  uI = Object.prototype.propertyIsEnumerable,
  r5 = (t, e, n) =>
    e in t
      ? oI(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  i5 = (t, e) => {
    for (var n in e || (e = {})) cI.call(e, n) && r5(t, n, e[n]);
    if (n5) for (var n of n5(e)) uI.call(e, n) && r5(t, n, e[n]);
    return t;
  },
  dI = (t, e) => sI(t, lI(e)),
  a5 = class {
    constructor(t, e, n, r) {
      (this.vectorLayerCache = {}),
        (this.x = e),
        (this.y = n),
        (this.z = r),
        (this.vectorTile = new zR(new aI(t)));
    }
    getTileData(t) {
      if (!t || !this.vectorTile.layers[t]) return [];
      if (this.vectorLayerCache[t]) return this.vectorLayerCache[t];
      const e = this.vectorTile.layers[t];
      if (Array.isArray(e.features))
        return (this.vectorLayerCache[t] = e.features), e.features;
      const n = [];
      for (let r = 0; r < e.length; r++) {
        const l = e.feature(r).toGeoJSON(this.x, this.y, this.z);
        n.push(dI(i5({}, l), { properties: i5({ id: l.id }, l.properties) }));
      }
      return (this.vectorLayerCache[t] = n), n;
    }
    getFeatureById() {
      throw new Error("Method not implemented.");
    }
  },
  hI = Object.defineProperty,
  pI = Object.defineProperties,
  fI = Object.getOwnPropertyDescriptors,
  o5 = Object.getOwnPropertySymbols,
  mI = Object.prototype.hasOwnProperty,
  gI = Object.prototype.propertyIsEnumerable,
  s5 = (t, e, n) =>
    e in t
      ? hI(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  e_ = (t, e) => {
    for (var n in e || (e = {})) mI.call(e, n) && s5(t, n, e[n]);
    if (o5) for (var n of o5(e)) gI.call(e, n) && s5(t, n, e[n]);
    return t;
  },
  $E = (t, e) => pI(t, fI(e)),
  vI = (t, e, n) =>
    new Promise((r, o) => {
      var l = (f) => {
          try {
            h(n.next(f));
          } catch (v) {
            o(v);
          }
        },
        a = (f) => {
          try {
            h(n.throw(f));
          } catch (v) {
            o(v);
          }
        },
        h = (f) => (f.done ? r(f.value) : Promise.resolve(f.value).then(l, a));
      h((n = n.apply(t, e)).next());
    }),
  _I = { tileSize: 256, minZoom: 0, maxZoom: 1 / 0, zoomOffset: 0, warp: !0 },
  yI = (t, e, n, r, o) =>
    vI(void 0, null, function* () {
      const l = gp(t, e);
      return new Promise((a) => {
        if (o)
          o({ x: n.x, y: n.y, z: n.z }, (h, f) => {
            if (h || !f) a(void 0);
            else {
              const v = new a5(f, n.x, n.y, n.z);
              a(v);
            }
          });
        else {
          const h = c3($E(e_({}, r), { url: l }), (f, v) => {
            if (f || !v) a(void 0);
            else {
              const E = new a5(v, n.x, n.y, n.z);
              a(E);
            }
          });
          n.xhrCancel = () => h.cancel();
        }
      });
    });
function xI(t, e) {
  const n = Array.isArray(t) ? t[0] : t,
    r = (l, a) =>
      yI(
        n,
        l,
        a,
        e == null ? void 0 : e.requestParameters,
        e == null ? void 0 : e.getCustomData
      ),
    o = $E(e_(e_({}, _I), e), { getTileData: r });
  return { data: n, dataArray: [], tilesetOptions: o, isTile: !0 };
}
function bI(t, e, n) {
  switch (t) {
    case "+":
      return e + n;
    case "-":
      return e - n;
    case "*":
      return e * n;
    case "/":
      return e / n;
    case "%":
      return e % n;
    case "^":
      return Math.pow(e, n);
    case "abs":
      return Math.abs(e);
    case "floor":
      return Math.floor(e);
    case "round":
      return Math.round(e);
    case "ceil":
      return Math.ceil(e);
    case "sin":
      return Math.sin(e);
    case "cos":
      return Math.cos(e);
    case "atan":
      return n === -1 ? Math.atan(e) : Math.atan2(e, n);
    case "min":
      return Math.min(e, n);
    case "max":
      return Math.max(e, n);
    case "log10":
      return Math.log(e);
    case "log2":
      return Math.log2(e);
    default:
      return console.warn("Calculate symbol err! Return default 0"), 0;
  }
}
function i1(t, e) {
  const { width: n, height: r } = e[0],
    o = e.map((f) => f.rasterData),
    l = n * r,
    a = [],
    h = JSON.stringify(t);
  for (let f = 0; f < l; f++) {
    const v = JSON.parse(h),
      E = KE(v, o, f);
    if (typeof E == "number") a.push(E);
    else {
      const x = t_(v);
      a.push(x);
    }
  }
  return a;
}
function KE(t, e, n) {
  if (t.length === 2 && t[0] === "band" && typeof t[1] == "number")
    try {
      return e[t[1]][n];
    } catch {
      return console.warn("Raster Data err!"), 0;
    }
  t.map((r, o) => {
    if (Array.isArray(r) && r.length > 0)
      switch (r[0]) {
        case "band":
          try {
            t[o] = e[r[1]][n];
          } catch {
            console.warn("Raster Data err!"), (t[o] = 0);
          }
          break;
        default:
          KE(r, e, n);
      }
  });
}
function EI(t) {
  const [e, n = -1, r = -1] = t;
  return e === void 0
    ? (console.warn("Express err!"), ["+", 0, 0])
    : [e.replace(/\s+/g, ""), n, r];
}
function t_(t) {
  const e = EI(t),
    n = e[0];
  let r = e[1],
    o = e[2];
  return (
    Array.isArray(r) && (r = t_(t[1])),
    Array.isArray(o) && (o = t_(t[2])),
    bI(n, r, o)
  );
}
var AI = {
  nd: {
    type: "operation",
    expression: [
      "/",
      ["-", ["band", 1], ["band", 0]],
      ["+", ["band", 1], ["band", 0]],
    ],
  },
  rgb: { type: "function", method: TI },
};
function TI(t, e) {
  const n = t[0].rasterData,
    r = t[1].rasterData,
    o = t[2].rasterData,
    l = [],
    [a, h] = (e == null ? void 0 : e.countCut) || [2, 98],
    f = (e == null ? void 0 : e.RMinMax) || _p(n, a, h),
    v = (e == null ? void 0 : e.GMinMax) || _p(r, a, h),
    E = (e == null ? void 0 : e.BMinMax) || _p(o, a, h);
  for (let x = 0; x < n.length; x++)
    l.push(Math.max(0, n[x] - f[0])),
      l.push(Math.max(0, r[x] - v[0])),
      l.push(Math.max(0, o[x] - E[0]));
  return { rasterData: l, rMinMax: f, gMinMax: v, bMinMax: E };
}
function _p(t, e, n) {
  const r = t.slice().sort((h, f) => h - f),
    o = r.length,
    l = r[Math.ceil((o * e) / 100)],
    a = r[Math.ceil((o * n) / 100)];
  return [l, a];
}
var SI = Object.defineProperty,
  wI = Object.defineProperties,
  CI = Object.getOwnPropertyDescriptors,
  l5 = Object.getOwnPropertySymbols,
  NI = Object.prototype.hasOwnProperty,
  RI = Object.prototype.propertyIsEnumerable,
  c5 = (t, e, n) =>
    e in t
      ? SI(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  II = (t, e) => {
    for (var n in e || (e = {})) NI.call(e, n) && c5(t, n, e[n]);
    if (l5) for (var n of l5(e)) RI.call(e, n) && c5(t, n, e[n]);
    return t;
  },
  MI = (t, e) => wI(t, CI(e)),
  QE = (t, e, n) =>
    new Promise((r, o) => {
      var l = (f) => {
          try {
            h(n.next(f));
          } catch (v) {
            o(v);
          }
        },
        a = (f) => {
          try {
            h(n.throw(f));
          } catch (v) {
            o(v);
          }
        },
        h = (f) => (f.done ? r(f.value) : Promise.resolve(f.value).then(l, a));
      h((n = n.apply(t, e)).next());
    });
function x3(t, e, n) {
  return QE(this, null, function* () {
    if (t.length === 0) return { rasterData: [0], width: 1, heigh: 1 };
    const r = yield Promise.all(
        t.map(({ data: f, bands: v = [0] }) => e(f, v))
      ),
      o = [];
    r.forEach((f) => {
      Array.isArray(f) ? o.push(...f) : o.push(f);
    });
    const { width: l, height: a } = o[0];
    let h;
    switch (typeof n) {
      case "function":
        h = n(o);
        break;
      case "object":
        Array.isArray(n) ? (h = { rasterData: i1(n, o) }) : (h = PI(n, o));
        break;
      default:
        h = { rasterData: o[0].rasterData };
    }
    return MI(II({}, h), { width: l, height: a });
  });
}
function PI(t, e) {
  const n = AI[t.type];
  if (n.type === "function") return n.method(e, t == null ? void 0 : t.options);
  if (n.type === "operation")
    return t.type === "rgb"
      ? OI(n.expression, e)
      : { rasterData: i1(n.expression, e) };
}
function OI(t, e) {
  t.r === void 0 &&
    console.warn("Channel R lost in Operation! Use band[0] to fill!"),
    t.g === void 0 &&
      console.warn("Channel G lost in Operation! Use band[0] to fill!"),
    t.b === void 0 &&
      console.warn("Channel B lost in Operation! Use band[0] to fill!");
  const n = i1(t.r || ["band", 0], e),
    r = i1(t.g || ["band", 0], e),
    o = i1(t.b || ["band", 0], e);
  return [n, r, o];
}
function n_(t, e, n, r) {
  return QE(this, null, function* () {
    const o = yield x3(t, e, n);
    r(null, { data: o });
  });
}
function LI(t, e) {
  const {
    extent: n = [121.168, 30.2828, 121.384, 30.4219],
    coordinates: r,
    width: o,
    height: l,
    min: a,
    max: h,
    format: f,
    operation: v,
  } = e;
  let E, x, T;
  if (f === void 0 || UE(t)) (E = Array.from(t)), (x = o), (T = l);
  else {
    const L = Array.isArray(t) ? t : [t];
    E = x3(L, f, v);
  }
  const N = O1(r, n);
  return {
    _id: 1,
    dataArray: [
      { _id: 1, data: E, width: x, height: T, min: a, max: h, coordinates: N },
    ],
  };
}
function u5(t, e) {
  var n = Object.keys(t);
  if (Object.getOwnPropertySymbols) {
    var r = Object.getOwnPropertySymbols(t);
    e &&
      (r = r.filter(function (o) {
        return Object.getOwnPropertyDescriptor(t, o).enumerable;
      })),
      n.push.apply(n, r);
  }
  return n;
}
function mt(t) {
  for (var e = 1; e < arguments.length; e++) {
    var n = arguments[e] != null ? arguments[e] : {};
    e % 2
      ? u5(Object(n), !0).forEach(function (r) {
          R(t, r, n[r]);
        })
      : Object.getOwnPropertyDescriptors
      ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
      : u5(Object(n)).forEach(function (r) {
          Object.defineProperty(t, r, Object.getOwnPropertyDescriptor(n, r));
        });
  }
  return t;
}
let L1 = (function (t) {
    return (t.Normal = "normal"), (t.PostProcessing = "post-processing"), t;
  })({}),
  H = (function (t) {
    return (
      (t[(t.DEPTH_BUFFER_BIT = 256)] = "DEPTH_BUFFER_BIT"),
      (t[(t.STENCIL_BUFFER_BIT = 1024)] = "STENCIL_BUFFER_BIT"),
      (t[(t.COLOR_BUFFER_BIT = 16384)] = "COLOR_BUFFER_BIT"),
      (t[(t.POINTS = 0)] = "POINTS"),
      (t[(t.LINES = 1)] = "LINES"),
      (t[(t.LINE_LOOP = 2)] = "LINE_LOOP"),
      (t[(t.LINE_STRIP = 3)] = "LINE_STRIP"),
      (t[(t.TRIANGLES = 4)] = "TRIANGLES"),
      (t[(t.TRIANGLE_STRIP = 5)] = "TRIANGLE_STRIP"),
      (t[(t.TRIANGLE_FAN = 6)] = "TRIANGLE_FAN"),
      (t[(t.ZERO = 0)] = "ZERO"),
      (t[(t.ONE = 1)] = "ONE"),
      (t[(t.SRC_COLOR = 768)] = "SRC_COLOR"),
      (t[(t.ONE_MINUS_SRC_COLOR = 769)] = "ONE_MINUS_SRC_COLOR"),
      (t[(t.SRC_ALPHA = 770)] = "SRC_ALPHA"),
      (t[(t.ONE_MINUS_SRC_ALPHA = 771)] = "ONE_MINUS_SRC_ALPHA"),
      (t[(t.DST_ALPHA = 772)] = "DST_ALPHA"),
      (t[(t.ONE_MINUS_DST_ALPHA = 773)] = "ONE_MINUS_DST_ALPHA"),
      (t[(t.DST_COLOR = 774)] = "DST_COLOR"),
      (t[(t.ONE_MINUS_DST_COLOR = 775)] = "ONE_MINUS_DST_COLOR"),
      (t[(t.SRC_ALPHA_SATURATE = 776)] = "SRC_ALPHA_SATURATE"),
      (t[(t.FUNC_ADD = 32774)] = "FUNC_ADD"),
      (t[(t.BLEND_EQUATION = 32777)] = "BLEND_EQUATION"),
      (t[(t.BLEND_EQUATION_RGB = 32777)] = "BLEND_EQUATION_RGB"),
      (t[(t.BLEND_EQUATION_ALPHA = 34877)] = "BLEND_EQUATION_ALPHA"),
      (t[(t.FUNC_SUBTRACT = 32778)] = "FUNC_SUBTRACT"),
      (t[(t.FUNC_REVERSE_SUBTRACT = 32779)] = "FUNC_REVERSE_SUBTRACT"),
      (t[(t.MAX_EXT = 32776)] = "MAX_EXT"),
      (t[(t.MIN_EXT = 32775)] = "MIN_EXT"),
      (t[(t.BLEND_DST_RGB = 32968)] = "BLEND_DST_RGB"),
      (t[(t.BLEND_SRC_RGB = 32969)] = "BLEND_SRC_RGB"),
      (t[(t.BLEND_DST_ALPHA = 32970)] = "BLEND_DST_ALPHA"),
      (t[(t.BLEND_SRC_ALPHA = 32971)] = "BLEND_SRC_ALPHA"),
      (t[(t.CONSTANT_COLOR = 32769)] = "CONSTANT_COLOR"),
      (t[(t.ONE_MINUS_CONSTANT_COLOR = 32770)] = "ONE_MINUS_CONSTANT_COLOR"),
      (t[(t.CONSTANT_ALPHA = 32771)] = "CONSTANT_ALPHA"),
      (t[(t.ONE_MINUS_CONSTANT_ALPHA = 32772)] = "ONE_MINUS_CONSTANT_ALPHA"),
      (t[(t.BLEND_COLOR = 32773)] = "BLEND_COLOR"),
      (t[(t.ARRAY_BUFFER = 34962)] = "ARRAY_BUFFER"),
      (t[(t.ELEMENT_ARRAY_BUFFER = 34963)] = "ELEMENT_ARRAY_BUFFER"),
      (t[(t.ARRAY_BUFFER_BINDING = 34964)] = "ARRAY_BUFFER_BINDING"),
      (t[(t.ELEMENT_ARRAY_BUFFER_BINDING = 34965)] =
        "ELEMENT_ARRAY_BUFFER_BINDING"),
      (t[(t.STREAM_DRAW = 35040)] = "STREAM_DRAW"),
      (t[(t.STATIC_DRAW = 35044)] = "STATIC_DRAW"),
      (t[(t.DYNAMIC_DRAW = 35048)] = "DYNAMIC_DRAW"),
      (t[(t.BUFFER_SIZE = 34660)] = "BUFFER_SIZE"),
      (t[(t.BUFFER_USAGE = 34661)] = "BUFFER_USAGE"),
      (t[(t.CURRENT_VERTEX_ATTRIB = 34342)] = "CURRENT_VERTEX_ATTRIB"),
      (t[(t.FRONT = 1028)] = "FRONT"),
      (t[(t.BACK = 1029)] = "BACK"),
      (t[(t.FRONT_AND_BACK = 1032)] = "FRONT_AND_BACK"),
      (t[(t.CULL_FACE = 2884)] = "CULL_FACE"),
      (t[(t.BLEND = 3042)] = "BLEND"),
      (t[(t.DITHER = 3024)] = "DITHER"),
      (t[(t.STENCIL_TEST = 2960)] = "STENCIL_TEST"),
      (t[(t.DEPTH_TEST = 2929)] = "DEPTH_TEST"),
      (t[(t.SCISSOR_TEST = 3089)] = "SCISSOR_TEST"),
      (t[(t.POLYGON_OFFSET_FILL = 32823)] = "POLYGON_OFFSET_FILL"),
      (t[(t.SAMPLE_ALPHA_TO_COVERAGE = 32926)] = "SAMPLE_ALPHA_TO_COVERAGE"),
      (t[(t.SAMPLE_COVERAGE = 32928)] = "SAMPLE_COVERAGE"),
      (t[(t.NO_ERROR = 0)] = "NO_ERROR"),
      (t[(t.INVALID_ENUM = 1280)] = "INVALID_ENUM"),
      (t[(t.INVALID_VALUE = 1281)] = "INVALID_VALUE"),
      (t[(t.INVALID_OPERATION = 1282)] = "INVALID_OPERATION"),
      (t[(t.OUT_OF_MEMORY = 1285)] = "OUT_OF_MEMORY"),
      (t[(t.CW = 2304)] = "CW"),
      (t[(t.CCW = 2305)] = "CCW"),
      (t[(t.LINE_WIDTH = 2849)] = "LINE_WIDTH"),
      (t[(t.ALIASED_POINT_SIZE_RANGE = 33901)] = "ALIASED_POINT_SIZE_RANGE"),
      (t[(t.ALIASED_LINE_WIDTH_RANGE = 33902)] = "ALIASED_LINE_WIDTH_RANGE"),
      (t[(t.CULL_FACE_MODE = 2885)] = "CULL_FACE_MODE"),
      (t[(t.FRONT_FACE = 2886)] = "FRONT_FACE"),
      (t[(t.DEPTH_RANGE = 2928)] = "DEPTH_RANGE"),
      (t[(t.DEPTH_WRITEMASK = 2930)] = "DEPTH_WRITEMASK"),
      (t[(t.DEPTH_CLEAR_VALUE = 2931)] = "DEPTH_CLEAR_VALUE"),
      (t[(t.DEPTH_FUNC = 2932)] = "DEPTH_FUNC"),
      (t[(t.STENCIL_CLEAR_VALUE = 2961)] = "STENCIL_CLEAR_VALUE"),
      (t[(t.STENCIL_FUNC = 2962)] = "STENCIL_FUNC"),
      (t[(t.STENCIL_FAIL = 2964)] = "STENCIL_FAIL"),
      (t[(t.STENCIL_PASS_DEPTH_FAIL = 2965)] = "STENCIL_PASS_DEPTH_FAIL"),
      (t[(t.STENCIL_PASS_DEPTH_PASS = 2966)] = "STENCIL_PASS_DEPTH_PASS"),
      (t[(t.STENCIL_REF = 2967)] = "STENCIL_REF"),
      (t[(t.STENCIL_VALUE_MASK = 2963)] = "STENCIL_VALUE_MASK"),
      (t[(t.STENCIL_WRITEMASK = 2968)] = "STENCIL_WRITEMASK"),
      (t[(t.STENCIL_BACK_FUNC = 34816)] = "STENCIL_BACK_FUNC"),
      (t[(t.STENCIL_BACK_FAIL = 34817)] = "STENCIL_BACK_FAIL"),
      (t[(t.STENCIL_BACK_PASS_DEPTH_FAIL = 34818)] =
        "STENCIL_BACK_PASS_DEPTH_FAIL"),
      (t[(t.STENCIL_BACK_PASS_DEPTH_PASS = 34819)] =
        "STENCIL_BACK_PASS_DEPTH_PASS"),
      (t[(t.STENCIL_BACK_REF = 36003)] = "STENCIL_BACK_REF"),
      (t[(t.STENCIL_BACK_VALUE_MASK = 36004)] = "STENCIL_BACK_VALUE_MASK"),
      (t[(t.STENCIL_BACK_WRITEMASK = 36005)] = "STENCIL_BACK_WRITEMASK"),
      (t[(t.VIEWPORT = 2978)] = "VIEWPORT"),
      (t[(t.SCISSOR_BOX = 3088)] = "SCISSOR_BOX"),
      (t[(t.COLOR_CLEAR_VALUE = 3106)] = "COLOR_CLEAR_VALUE"),
      (t[(t.COLOR_WRITEMASK = 3107)] = "COLOR_WRITEMASK"),
      (t[(t.UNPACK_ALIGNMENT = 3317)] = "UNPACK_ALIGNMENT"),
      (t[(t.PACK_ALIGNMENT = 3333)] = "PACK_ALIGNMENT"),
      (t[(t.MAX_TEXTURE_SIZE = 3379)] = "MAX_TEXTURE_SIZE"),
      (t[(t.MAX_VIEWPORT_DIMS = 3386)] = "MAX_VIEWPORT_DIMS"),
      (t[(t.SUBPIXEL_BITS = 3408)] = "SUBPIXEL_BITS"),
      (t[(t.RED_BITS = 3410)] = "RED_BITS"),
      (t[(t.GREEN_BITS = 3411)] = "GREEN_BITS"),
      (t[(t.BLUE_BITS = 3412)] = "BLUE_BITS"),
      (t[(t.ALPHA_BITS = 3413)] = "ALPHA_BITS"),
      (t[(t.DEPTH_BITS = 3414)] = "DEPTH_BITS"),
      (t[(t.STENCIL_BITS = 3415)] = "STENCIL_BITS"),
      (t[(t.POLYGON_OFFSET_UNITS = 10752)] = "POLYGON_OFFSET_UNITS"),
      (t[(t.POLYGON_OFFSET_FACTOR = 32824)] = "POLYGON_OFFSET_FACTOR"),
      (t[(t.TEXTURE_BINDING_2D = 32873)] = "TEXTURE_BINDING_2D"),
      (t[(t.SAMPLE_BUFFERS = 32936)] = "SAMPLE_BUFFERS"),
      (t[(t.SAMPLES = 32937)] = "SAMPLES"),
      (t[(t.SAMPLE_COVERAGE_VALUE = 32938)] = "SAMPLE_COVERAGE_VALUE"),
      (t[(t.SAMPLE_COVERAGE_INVERT = 32939)] = "SAMPLE_COVERAGE_INVERT"),
      (t[(t.COMPRESSED_TEXTURE_FORMATS = 34467)] =
        "COMPRESSED_TEXTURE_FORMATS"),
      (t[(t.DONT_CARE = 4352)] = "DONT_CARE"),
      (t[(t.FASTEST = 4353)] = "FASTEST"),
      (t[(t.NICEST = 4354)] = "NICEST"),
      (t[(t.GENERATE_MIPMAP_HINT = 33170)] = "GENERATE_MIPMAP_HINT"),
      (t[(t.BYTE = 5120)] = "BYTE"),
      (t[(t.UNSIGNED_BYTE = 5121)] = "UNSIGNED_BYTE"),
      (t[(t.SHORT = 5122)] = "SHORT"),
      (t[(t.UNSIGNED_SHORT = 5123)] = "UNSIGNED_SHORT"),
      (t[(t.INT = 5124)] = "INT"),
      (t[(t.UNSIGNED_INT = 5125)] = "UNSIGNED_INT"),
      (t[(t.FLOAT = 5126)] = "FLOAT"),
      (t[(t.DEPTH_COMPONENT = 6402)] = "DEPTH_COMPONENT"),
      (t[(t.ALPHA = 6406)] = "ALPHA"),
      (t[(t.RGB = 6407)] = "RGB"),
      (t[(t.RGBA = 6408)] = "RGBA"),
      (t[(t.LUMINANCE = 6409)] = "LUMINANCE"),
      (t[(t.LUMINANCE_ALPHA = 6410)] = "LUMINANCE_ALPHA"),
      (t[(t.RED = 6403)] = "RED"),
      (t[(t.UNSIGNED_SHORT_4_4_4_4 = 32819)] = "UNSIGNED_SHORT_4_4_4_4"),
      (t[(t.UNSIGNED_SHORT_5_5_5_1 = 32820)] = "UNSIGNED_SHORT_5_5_5_1"),
      (t[(t.UNSIGNED_SHORT_5_6_5 = 33635)] = "UNSIGNED_SHORT_5_6_5"),
      (t[(t.FRAGMENT_SHADER = 35632)] = "FRAGMENT_SHADER"),
      (t[(t.VERTEX_SHADER = 35633)] = "VERTEX_SHADER"),
      (t[(t.MAX_VERTEX_ATTRIBS = 34921)] = "MAX_VERTEX_ATTRIBS"),
      (t[(t.MAX_VERTEX_UNIFORM_VECTORS = 36347)] =
        "MAX_VERTEX_UNIFORM_VECTORS"),
      (t[(t.MAX_VARYING_VECTORS = 36348)] = "MAX_VARYING_VECTORS"),
      (t[(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS = 35661)] =
        "MAX_COMBINED_TEXTURE_IMAGE_UNITS"),
      (t[(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS = 35660)] =
        "MAX_VERTEX_TEXTURE_IMAGE_UNITS"),
      (t[(t.MAX_TEXTURE_IMAGE_UNITS = 34930)] = "MAX_TEXTURE_IMAGE_UNITS"),
      (t[(t.MAX_FRAGMENT_UNIFORM_VECTORS = 36349)] =
        "MAX_FRAGMENT_UNIFORM_VECTORS"),
      (t[(t.SHADER_TYPE = 35663)] = "SHADER_TYPE"),
      (t[(t.DELETE_STATUS = 35712)] = "DELETE_STATUS"),
      (t[(t.LINK_STATUS = 35714)] = "LINK_STATUS"),
      (t[(t.VALIDATE_STATUS = 35715)] = "VALIDATE_STATUS"),
      (t[(t.ATTACHED_SHADERS = 35717)] = "ATTACHED_SHADERS"),
      (t[(t.ACTIVE_UNIFORMS = 35718)] = "ACTIVE_UNIFORMS"),
      (t[(t.ACTIVE_ATTRIBUTES = 35721)] = "ACTIVE_ATTRIBUTES"),
      (t[(t.SHADING_LANGUAGE_VERSION = 35724)] = "SHADING_LANGUAGE_VERSION"),
      (t[(t.CURRENT_PROGRAM = 35725)] = "CURRENT_PROGRAM"),
      (t[(t.NEVER = 512)] = "NEVER"),
      (t[(t.LESS = 513)] = "LESS"),
      (t[(t.EQUAL = 514)] = "EQUAL"),
      (t[(t.LEQUAL = 515)] = "LEQUAL"),
      (t[(t.GREATER = 516)] = "GREATER"),
      (t[(t.NOTEQUAL = 517)] = "NOTEQUAL"),
      (t[(t.GEQUAL = 518)] = "GEQUAL"),
      (t[(t.ALWAYS = 519)] = "ALWAYS"),
      (t[(t.KEEP = 7680)] = "KEEP"),
      (t[(t.REPLACE = 7681)] = "REPLACE"),
      (t[(t.INCR = 7682)] = "INCR"),
      (t[(t.DECR = 7683)] = "DECR"),
      (t[(t.INVERT = 5386)] = "INVERT"),
      (t[(t.INCR_WRAP = 34055)] = "INCR_WRAP"),
      (t[(t.DECR_WRAP = 34056)] = "DECR_WRAP"),
      (t[(t.VENDOR = 7936)] = "VENDOR"),
      (t[(t.RENDERER = 7937)] = "RENDERER"),
      (t[(t.VERSION = 7938)] = "VERSION"),
      (t[(t.NEAREST = 9728)] = "NEAREST"),
      (t[(t.LINEAR = 9729)] = "LINEAR"),
      (t[(t.NEAREST_MIPMAP_NEAREST = 9984)] = "NEAREST_MIPMAP_NEAREST"),
      (t[(t.LINEAR_MIPMAP_NEAREST = 9985)] = "LINEAR_MIPMAP_NEAREST"),
      (t[(t.NEAREST_MIPMAP_LINEAR = 9986)] = "NEAREST_MIPMAP_LINEAR"),
      (t[(t.LINEAR_MIPMAP_LINEAR = 9987)] = "LINEAR_MIPMAP_LINEAR"),
      (t[(t.TEXTURE_MAG_FILTER = 10240)] = "TEXTURE_MAG_FILTER"),
      (t[(t.TEXTURE_MIN_FILTER = 10241)] = "TEXTURE_MIN_FILTER"),
      (t[(t.TEXTURE_WRAP_S = 10242)] = "TEXTURE_WRAP_S"),
      (t[(t.TEXTURE_WRAP_T = 10243)] = "TEXTURE_WRAP_T"),
      (t[(t.TEXTURE_2D = 3553)] = "TEXTURE_2D"),
      (t[(t.TEXTURE = 5890)] = "TEXTURE"),
      (t[(t.TEXTURE_CUBE_MAP = 34067)] = "TEXTURE_CUBE_MAP"),
      (t[(t.TEXTURE_BINDING_CUBE_MAP = 34068)] = "TEXTURE_BINDING_CUBE_MAP"),
      (t[(t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069)] =
        "TEXTURE_CUBE_MAP_POSITIVE_X"),
      (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070)] =
        "TEXTURE_CUBE_MAP_NEGATIVE_X"),
      (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071)] =
        "TEXTURE_CUBE_MAP_POSITIVE_Y"),
      (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072)] =
        "TEXTURE_CUBE_MAP_NEGATIVE_Y"),
      (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073)] =
        "TEXTURE_CUBE_MAP_POSITIVE_Z"),
      (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074)] =
        "TEXTURE_CUBE_MAP_NEGATIVE_Z"),
      (t[(t.MAX_CUBE_MAP_TEXTURE_SIZE = 34076)] = "MAX_CUBE_MAP_TEXTURE_SIZE"),
      (t[(t.TEXTURE0 = 33984)] = "TEXTURE0"),
      (t[(t.TEXTURE1 = 33985)] = "TEXTURE1"),
      (t[(t.TEXTURE2 = 33986)] = "TEXTURE2"),
      (t[(t.TEXTURE3 = 33987)] = "TEXTURE3"),
      (t[(t.TEXTURE4 = 33988)] = "TEXTURE4"),
      (t[(t.TEXTURE5 = 33989)] = "TEXTURE5"),
      (t[(t.TEXTURE6 = 33990)] = "TEXTURE6"),
      (t[(t.TEXTURE7 = 33991)] = "TEXTURE7"),
      (t[(t.TEXTURE8 = 33992)] = "TEXTURE8"),
      (t[(t.TEXTURE9 = 33993)] = "TEXTURE9"),
      (t[(t.TEXTURE10 = 33994)] = "TEXTURE10"),
      (t[(t.TEXTURE11 = 33995)] = "TEXTURE11"),
      (t[(t.TEXTURE12 = 33996)] = "TEXTURE12"),
      (t[(t.TEXTURE13 = 33997)] = "TEXTURE13"),
      (t[(t.TEXTURE14 = 33998)] = "TEXTURE14"),
      (t[(t.TEXTURE15 = 33999)] = "TEXTURE15"),
      (t[(t.TEXTURE16 = 34e3)] = "TEXTURE16"),
      (t[(t.TEXTURE17 = 34001)] = "TEXTURE17"),
      (t[(t.TEXTURE18 = 34002)] = "TEXTURE18"),
      (t[(t.TEXTURE19 = 34003)] = "TEXTURE19"),
      (t[(t.TEXTURE20 = 34004)] = "TEXTURE20"),
      (t[(t.TEXTURE21 = 34005)] = "TEXTURE21"),
      (t[(t.TEXTURE22 = 34006)] = "TEXTURE22"),
      (t[(t.TEXTURE23 = 34007)] = "TEXTURE23"),
      (t[(t.TEXTURE24 = 34008)] = "TEXTURE24"),
      (t[(t.TEXTURE25 = 34009)] = "TEXTURE25"),
      (t[(t.TEXTURE26 = 34010)] = "TEXTURE26"),
      (t[(t.TEXTURE27 = 34011)] = "TEXTURE27"),
      (t[(t.TEXTURE28 = 34012)] = "TEXTURE28"),
      (t[(t.TEXTURE29 = 34013)] = "TEXTURE29"),
      (t[(t.TEXTURE30 = 34014)] = "TEXTURE30"),
      (t[(t.TEXTURE31 = 34015)] = "TEXTURE31"),
      (t[(t.ACTIVE_TEXTURE = 34016)] = "ACTIVE_TEXTURE"),
      (t[(t.REPEAT = 10497)] = "REPEAT"),
      (t[(t.CLAMP_TO_EDGE = 33071)] = "CLAMP_TO_EDGE"),
      (t[(t.MIRRORED_REPEAT = 33648)] = "MIRRORED_REPEAT"),
      (t[(t.FLOAT_VEC2 = 35664)] = "FLOAT_VEC2"),
      (t[(t.FLOAT_VEC3 = 35665)] = "FLOAT_VEC3"),
      (t[(t.FLOAT_VEC4 = 35666)] = "FLOAT_VEC4"),
      (t[(t.INT_VEC2 = 35667)] = "INT_VEC2"),
      (t[(t.INT_VEC3 = 35668)] = "INT_VEC3"),
      (t[(t.INT_VEC4 = 35669)] = "INT_VEC4"),
      (t[(t.BOOL = 35670)] = "BOOL"),
      (t[(t.BOOL_VEC2 = 35671)] = "BOOL_VEC2"),
      (t[(t.BOOL_VEC3 = 35672)] = "BOOL_VEC3"),
      (t[(t.BOOL_VEC4 = 35673)] = "BOOL_VEC4"),
      (t[(t.FLOAT_MAT2 = 35674)] = "FLOAT_MAT2"),
      (t[(t.FLOAT_MAT3 = 35675)] = "FLOAT_MAT3"),
      (t[(t.FLOAT_MAT4 = 35676)] = "FLOAT_MAT4"),
      (t[(t.SAMPLER_2D = 35678)] = "SAMPLER_2D"),
      (t[(t.SAMPLER_CUBE = 35680)] = "SAMPLER_CUBE"),
      (t[(t.VERTEX_ATTRIB_ARRAY_ENABLED = 34338)] =
        "VERTEX_ATTRIB_ARRAY_ENABLED"),
      (t[(t.VERTEX_ATTRIB_ARRAY_SIZE = 34339)] = "VERTEX_ATTRIB_ARRAY_SIZE"),
      (t[(t.VERTEX_ATTRIB_ARRAY_STRIDE = 34340)] =
        "VERTEX_ATTRIB_ARRAY_STRIDE"),
      (t[(t.VERTEX_ATTRIB_ARRAY_TYPE = 34341)] = "VERTEX_ATTRIB_ARRAY_TYPE"),
      (t[(t.VERTEX_ATTRIB_ARRAY_NORMALIZED = 34922)] =
        "VERTEX_ATTRIB_ARRAY_NORMALIZED"),
      (t[(t.VERTEX_ATTRIB_ARRAY_POINTER = 34373)] =
        "VERTEX_ATTRIB_ARRAY_POINTER"),
      (t[(t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING = 34975)] =
        "VERTEX_ATTRIB_ARRAY_BUFFER_BINDING"),
      (t[(t.COMPILE_STATUS = 35713)] = "COMPILE_STATUS"),
      (t[(t.LOW_FLOAT = 36336)] = "LOW_FLOAT"),
      (t[(t.MEDIUM_FLOAT = 36337)] = "MEDIUM_FLOAT"),
      (t[(t.HIGH_FLOAT = 36338)] = "HIGH_FLOAT"),
      (t[(t.LOW_INT = 36339)] = "LOW_INT"),
      (t[(t.MEDIUM_INT = 36340)] = "MEDIUM_INT"),
      (t[(t.HIGH_INT = 36341)] = "HIGH_INT"),
      (t[(t.FRAMEBUFFER = 36160)] = "FRAMEBUFFER"),
      (t[(t.RENDERBUFFER = 36161)] = "RENDERBUFFER"),
      (t[(t.RGBA4 = 32854)] = "RGBA4"),
      (t[(t.RGB5_A1 = 32855)] = "RGB5_A1"),
      (t[(t.RGB565 = 36194)] = "RGB565"),
      (t[(t.DEPTH_COMPONENT16 = 33189)] = "DEPTH_COMPONENT16"),
      (t[(t.STENCIL_INDEX = 6401)] = "STENCIL_INDEX"),
      (t[(t.STENCIL_INDEX8 = 36168)] = "STENCIL_INDEX8"),
      (t[(t.DEPTH_STENCIL = 34041)] = "DEPTH_STENCIL"),
      (t[(t.RENDERBUFFER_WIDTH = 36162)] = "RENDERBUFFER_WIDTH"),
      (t[(t.RENDERBUFFER_HEIGHT = 36163)] = "RENDERBUFFER_HEIGHT"),
      (t[(t.RENDERBUFFER_INTERNAL_FORMAT = 36164)] =
        "RENDERBUFFER_INTERNAL_FORMAT"),
      (t[(t.RENDERBUFFER_RED_SIZE = 36176)] = "RENDERBUFFER_RED_SIZE"),
      (t[(t.RENDERBUFFER_GREEN_SIZE = 36177)] = "RENDERBUFFER_GREEN_SIZE"),
      (t[(t.RENDERBUFFER_BLUE_SIZE = 36178)] = "RENDERBUFFER_BLUE_SIZE"),
      (t[(t.RENDERBUFFER_ALPHA_SIZE = 36179)] = "RENDERBUFFER_ALPHA_SIZE"),
      (t[(t.RENDERBUFFER_DEPTH_SIZE = 36180)] = "RENDERBUFFER_DEPTH_SIZE"),
      (t[(t.RENDERBUFFER_STENCIL_SIZE = 36181)] = "RENDERBUFFER_STENCIL_SIZE"),
      (t[(t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE = 36048)] =
        "FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE"),
      (t[(t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME = 36049)] =
        "FRAMEBUFFER_ATTACHMENT_OBJECT_NAME"),
      (t[(t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL = 36050)] =
        "FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL"),
      (t[(t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE = 36051)] =
        "FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE"),
      (t[(t.COLOR_ATTACHMENT0 = 36064)] = "COLOR_ATTACHMENT0"),
      (t[(t.DEPTH_ATTACHMENT = 36096)] = "DEPTH_ATTACHMENT"),
      (t[(t.STENCIL_ATTACHMENT = 36128)] = "STENCIL_ATTACHMENT"),
      (t[(t.DEPTH_STENCIL_ATTACHMENT = 33306)] = "DEPTH_STENCIL_ATTACHMENT"),
      (t[(t.NONE = 0)] = "NONE"),
      (t[(t.FRAMEBUFFER_COMPLETE = 36053)] = "FRAMEBUFFER_COMPLETE"),
      (t[(t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT = 36054)] =
        "FRAMEBUFFER_INCOMPLETE_ATTACHMENT"),
      (t[(t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT = 36055)] =
        "FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT"),
      (t[(t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS = 36057)] =
        "FRAMEBUFFER_INCOMPLETE_DIMENSIONS"),
      (t[(t.FRAMEBUFFER_UNSUPPORTED = 36061)] = "FRAMEBUFFER_UNSUPPORTED"),
      (t[(t.FRAMEBUFFER_BINDING = 36006)] = "FRAMEBUFFER_BINDING"),
      (t[(t.RENDERBUFFER_BINDING = 36007)] = "RENDERBUFFER_BINDING"),
      (t[(t.MAX_RENDERBUFFER_SIZE = 34024)] = "MAX_RENDERBUFFER_SIZE"),
      (t[(t.INVALID_FRAMEBUFFER_OPERATION = 1286)] =
        "INVALID_FRAMEBUFFER_OPERATION"),
      (t[(t.UNPACK_FLIP_Y_WEBGL = 37440)] = "UNPACK_FLIP_Y_WEBGL"),
      (t[(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL = 37441)] =
        "UNPACK_PREMULTIPLY_ALPHA_WEBGL"),
      (t[(t.CONTEXT_LOST_WEBGL = 37442)] = "CONTEXT_LOST_WEBGL"),
      (t[(t.UNPACK_COLORSPACE_CONVERSION_WEBGL = 37443)] =
        "UNPACK_COLORSPACE_CONVERSION_WEBGL"),
      (t[(t.BROWSER_DEFAULT_WEBGL = 37444)] = "BROWSER_DEFAULT_WEBGL"),
      t
    );
  })({});
const DI = `attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,
  { camelCase: BI, isNil: FI, upperFirst: kI } = Ka;
class od {
  constructor() {
    R(this, "shaderModuleService", void 0),
      R(this, "rendererService", void 0),
      R(this, "config", void 0),
      R(this, "quad", DI),
      R(this, "enabled", !0),
      R(this, "renderToScreen", !1),
      R(this, "model", void 0),
      R(this, "name", void 0),
      R(this, "optionsToUpdate", {});
  }
  getName() {
    return this.name;
  }
  setName(e) {
    this.name = e;
  }
  getType() {
    return L1.PostProcessing;
  }
  init(e, n) {
    (this.config = n),
      (this.rendererService = e.getContainer().rendererService),
      (this.shaderModuleService = e.getContainer().shaderModuleService);
    const {
        createAttribute: r,
        createBuffer: o,
        createModel: l,
      } = this.rendererService,
      { vs: a, fs: h, uniforms: f } = this.setupShaders();
    this.model = l({
      vs: a,
      fs: h,
      attributes: {
        a_Position: r({
          buffer: o({ data: [-4, -4, 4, -4, 0, 4], type: H.FLOAT }),
          size: 2,
        }),
      },
      uniforms: mt(
        mt({ u_Texture: null }, f),
        this.config && this.convertOptionsToUniforms(this.config)
      ),
      depth: { enable: !1 },
      count: 3,
      blend: { enable: this.getName() === "copy" },
    });
  }
  render(e, n) {
    const r = e.multiPassRenderer.getPostProcessor(),
      {
        useFramebuffer: o,
        getViewportSize: l,
        clear: a,
      } = this.rendererService,
      { width: h, height: f } = l();
    o(this.renderToScreen ? null : r.getWriteFBO(), () => {
      a({
        framebuffer: r.getWriteFBO(),
        color: [0, 0, 0, 0],
        depth: 1,
        stencil: 0,
      });
      const v = mt(
        { u_BloomFinal: 0, u_Texture: r.getReadFBO(), u_ViewportSize: [h, f] },
        this.convertOptionsToUniforms(this.optionsToUpdate)
      );
      n && ((v.u_BloomFinal = 1), (v.u_Texture2 = n)),
        this.model.draw({ uniforms: v });
    });
  }
  isEnabled() {
    return this.enabled;
  }
  setEnabled(e) {
    this.enabled = e;
  }
  setRenderToScreen(e) {
    this.renderToScreen = e;
  }
  updateOptions(e) {
    this.optionsToUpdate = mt(mt({}, this.optionsToUpdate), e);
  }
  setupShaders() {
    throw new Error("Method not implemented.");
  }
  convertOptionsToUniforms(e) {
    const n = {};
    return (
      Object.keys(e).forEach((r) => {
        FI(e[r]) || (n[`u_${kI(BI(r))}`] = e[r]);
      }),
      n
    );
  }
}
function UI(t) {
  let e = 0;
  switch (t) {
    case "vec2":
    case "ivec2":
      e = 2;
      break;
    case "vec3":
    case "ivec3":
      e = 3;
      break;
    case "vec4":
    case "ivec4":
    case "mat2":
      e = 4;
      break;
    case "mat3":
      e = 9;
      break;
    case "mat4":
      e = 16;
      break;
  }
  return e;
}
const JE =
  /uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;
function d5(t, e = !1) {
  const n = {};
  return (
    (t = t.replace(JE, (r, o, l) => {
      const a = l.split(":"),
        h = a[0].trim();
      let f = "";
      switch ((a.length > 1 && (f = a[1].trim()), o)) {
        case "bool":
          f = f === "true";
          break;
        case "float":
        case "int":
          f = Number(f);
          break;
        case "vec2":
        case "vec3":
        case "vec4":
        case "ivec2":
        case "ivec3":
        case "ivec4":
        case "mat2":
        case "mat3":
        case "mat4":
          f
            ? (f = f
                .replace("[", "")
                .replace("]", "")
                .split(",")
                .reduce((v, E) => (v.push(Number(E.trim())), v), []))
            : (f = new Array(UI(o)).fill(0));
          break;
      }
      return (
        (n[h] = f),
        `${e ? "uniform " : ""}${o} ${h};
`
      );
    })),
    { content: t, uniforms: n }
  );
}
function y2(t) {
  let { content: e, uniforms: n } = d5(t, !0);
  return (
    (e = e.replace(/(\s*uniform\s*.*\s*){((?:\s*.*\s*)*?)};/g, (r, o, l) => {
      l = l.trim().replace(/^.*$/gm, (f) => `uniform ${f}`);
      const { content: a, uniforms: h } = d5(l);
      return (
        Object.assign(n, h),
        `${o}{
${a}
};`
      );
    })),
    { content: e, uniforms: n }
  );
}
function h5(t) {
  const e = {};
  return t.replace(JE, (n, r, o) => {
    const l = o.trim();
    return e[l]
      ? ""
      : ((e[l] = !0),
        `uniform ${r} ${l};
`);
  });
}
const U0 = {
  ProjectionMatrix: "u_ProjectionMatrix",
  ViewMatrix: "u_ViewMatrix",
  ViewProjectionMatrix: "u_ViewProjectionMatrix",
  Zoom: "u_Zoom",
  ZoomScale: "u_ZoomScale",
  FocalDistance: "u_FocalDistance",
  CameraPosition: "u_CameraPosition",
};
let Cp = (function (t) {
    return (
      (t.TOPRIGHT = "topright"),
      (t.TOPLEFT = "topleft"),
      (t.BOTTOMRIGHT = "bottomright"),
      (t.BOTTOMLEFT = "bottomleft"),
      (t.TOPCENTER = "topcenter"),
      (t.BOTTOMCENTER = "bottomcenter"),
      (t.LEFTCENTER = "leftcenter"),
      (t.RIGHTCENTER = "rightcenter"),
      (t.LEFTTOP = "lefttop"),
      (t.RIGHTTOP = "righttop"),
      (t.LEFTBOTTOM = "leftbottom"),
      (t.RIGHTBOTTOM = "rightbottom"),
      t
    );
  })({}),
  Np = (function (t) {
    return (
      (t[(t.LNGLAT = 1)] = "LNGLAT"),
      (t[(t.LNGLAT_OFFSET = 2)] = "LNGLAT_OFFSET"),
      (t[(t.VECTOR_TILE = 3)] = "VECTOR_TILE"),
      (t[(t.IDENTITY = 4)] = "IDENTITY"),
      (t[(t.METER_OFFSET = 5)] = "METER_OFFSET"),
      t
    );
  })({});
const $h = {
  CoordinateSystem: "u_CoordinateSystem",
  ViewportCenter: "u_ViewportCenter",
  ViewportCenterProjection: "u_ViewportCenterProjection",
  PixelsPerDegree: "u_PixelsPerDegree",
  PixelsPerDegree2: "u_PixelsPerDegree2",
  PixelsPerMeter: "u_PixelsPerMeter",
};
var Io = {
  MapInitStart: "mapInitStart",
  LayerInitStart: "layerInitStart",
  LayerInitEnd: "layerInitEnd",
  SourceInitStart: "sourceInitStart",
  SourceInitEnd: "sourceInitEnd",
  ScaleInitStart: "scaleInitStart",
  ScaleInitEnd: "scaleInitEnd",
  MappingStart: "mappingStart",
  MappingEnd: "mappingEnd",
  BuildModelStart: "buildModelStart",
  BuildModelEnd: "buildModelEnd",
};
let Js = (function (t) {
    return (
      (t.Hover = "hover"),
      (t.Click = "click"),
      (t.Select = "select"),
      (t.Active = "active"),
      (t.Drag = "drag"),
      t
    );
  })({}),
  Xd = (function (t) {
    return (
      (t.normal = "normal"),
      (t.additive = "additive"),
      (t.subtractive = "subtractive"),
      (t.min = "min"),
      (t.max = "max"),
      (t.none = "none"),
      t
    );
  })({}),
  q0 = (function (t) {
    return (t.MULTIPLE = "MULTIPLE"), (t.SINGLE = "SINGLE"), t;
  })({}),
  pv = (function (t) {
    return (t.AND = "and"), (t.OR = "or"), t;
  })({}),
  es = (function (t) {
    return (t.INIT = "init"), (t.UPDATE = "update"), t;
  })({}),
  Si = (function (t) {
    return (
      (t.LINEAR = "linear"),
      (t.SEQUENTIAL = "sequential"),
      (t.POWER = "power"),
      (t.LOG = "log"),
      (t.IDENTITY = "identity"),
      (t.TIME = "time"),
      (t.QUANTILE = "quantile"),
      (t.QUANTIZE = "quantize"),
      (t.THRESHOLD = "threshold"),
      (t.CAT = "cat"),
      (t.DIVERGING = "diverging"),
      (t.CUSTOM = "threshold"),
      t
    );
  })({}),
  Kh = (function (t) {
    return (t.CONSTANT = "constant"), (t.VARIABLE = "variable"), t;
  })({}),
  Ln = (function (t) {
    return (
      (t[(t.Attribute = 0)] = "Attribute"),
      (t[(t.InstancedAttribute = 1)] = "InstancedAttribute"),
      (t[(t.Uniform = 2)] = "Uniform"),
      t
    );
  })({});
const r_ = ["mapload", "mapchange", "mapAfterFrameChange"];
var b3 = { exports: {} };
b3.exports = D1;
b3.exports.default = D1;
var yp = 1e20;
function D1(t, e, n, r, o, l) {
  (this.fontSize = t || 24),
    (this.buffer = e === void 0 ? 3 : e),
    (this.cutoff = r || 0.25),
    (this.fontFamily = o || "sans-serif"),
    (this.fontWeight = l || "normal"),
    (this.radius = n || 8);
  var a = (this.size = this.fontSize + this.buffer * 2),
    h = a + this.buffer * 2;
  (this.canvas = document.createElement("canvas")),
    (this.canvas.width = this.canvas.height = a),
    (this.ctx = this.canvas.getContext("2d")),
    (this.ctx.font =
      this.fontWeight + " " + this.fontSize + "px " + this.fontFamily),
    (this.ctx.textAlign = "left"),
    (this.ctx.fillStyle = "black"),
    (this.gridOuter = new Float64Array(h * h)),
    (this.gridInner = new Float64Array(h * h)),
    (this.f = new Float64Array(h)),
    (this.z = new Float64Array(h + 1)),
    (this.v = new Uint16Array(h)),
    (this.useMetrics =
      this.ctx.measureText("A").actualBoundingBoxLeft !== void 0),
    (this.middle = Math.round(
      (a / 2) * (navigator.userAgent.indexOf("Gecko/") >= 0 ? 1.2 : 1)
    ));
}
function zI(t, e, n, r, o, l, a) {
  l.fill(yp, 0, e * n), a.fill(0, 0, e * n);
  for (var h = (e - r) / 2, f = 0; f < o; f++)
    for (var v = 0; v < r; v++) {
      var E = (f + h) * e + v + h,
        x = t.data[4 * (f * r + v) + 3] / 255;
      if (x === 1) (l[E] = 0), (a[E] = yp);
      else if (x === 0) (l[E] = yp), (a[E] = 0);
      else {
        var T = Math.max(0, 0.5 - x),
          N = Math.max(0, x - 0.5);
        (l[E] = T * T), (a[E] = N * N);
      }
    }
}
function VI(t, e, n, r, o, l, a) {
  for (var h = 0; h < e * n; h++) {
    var f = Math.sqrt(r[h]) - Math.sqrt(o[h]);
    t[h] = Math.round(255 - 255 * (f / l + a));
  }
}
D1.prototype._draw = function (t, e) {
  var n = this.ctx.measureText(t),
    r = n.width,
    o = 2 * this.buffer,
    l,
    a,
    h,
    f,
    v,
    E,
    x,
    T;
  e && this.useMetrics
    ? ((v = Math.floor(n.actualBoundingBoxAscent)),
      (T = this.buffer + Math.ceil(n.actualBoundingBoxAscent)),
      (E = this.buffer),
      (x = this.buffer),
      (a = Math.min(
        this.size,
        Math.ceil(n.actualBoundingBoxRight - n.actualBoundingBoxLeft)
      )),
      (f = Math.min(
        this.size - E,
        Math.ceil(n.actualBoundingBoxAscent + n.actualBoundingBoxDescent)
      )),
      (l = a + o),
      (h = f + o),
      (this.ctx.textBaseline = "alphabetic"))
    : ((l = a = this.size),
      (h = f = this.size),
      (v = (19 * this.fontSize) / 24),
      (E = x = 0),
      (T = this.middle),
      (this.ctx.textBaseline = "middle"));
  var N;
  a &&
    f &&
    (this.ctx.clearRect(x, E, a, f),
    this.ctx.fillText(t, this.buffer, T),
    (N = this.ctx.getImageData(x, E, a, f)));
  var I = new Uint8ClampedArray(l * h);
  return (
    zI(N, l, h, a, f, this.gridOuter, this.gridInner),
    p5(this.gridOuter, l, h, this.f, this.v, this.z),
    p5(this.gridInner, l, h, this.f, this.v, this.z),
    VI(I, l, h, this.gridOuter, this.gridInner, this.radius, this.cutoff),
    {
      data: I,
      metrics: {
        width: a,
        height: f,
        sdfWidth: l,
        sdfHeight: h,
        top: v,
        left: 0,
        advance: r,
      },
    }
  );
};
D1.prototype.draw = function (t) {
  return this._draw(t, !1).data;
};
D1.prototype.drawWithMetrics = function (t) {
  return this._draw(t, !0);
};
function p5(t, e, n, r, o, l) {
  for (var a = 0; a < e; a++) f5(t, a, e, n, r, o, l);
  for (var h = 0; h < n; h++) f5(t, h * e, 1, e, r, o, l);
}
function f5(t, e, n, r, o, l, a) {
  var h, f, v, E;
  for (l[0] = 0, a[0] = -yp, a[1] = yp, h = 0; h < r; h++) o[h] = t[e + h * n];
  for (h = 1, f = 0, v = 0; h < r; h++) {
    do (E = l[f]), (v = (o[h] - o[E] + h * h - E * E) / (h - E) / 2);
    while (v <= a[f] && --f > -1);
    f++, (l[f] = h), (a[f] = v), (a[f + 1] = yp);
  }
  for (h = 0, f = 0; h < r; h++) {
    for (; a[f + 1] < h; ) f++;
    (E = l[f]), (t[e + h * n] = o[E] + (h - E) * (h - E));
  }
}
var HI = b3.exports;
const jI = ea(HI),
  bf = 30;
function WI({
  characterSet: t,
  getFontWidth: e,
  fontHeight: n,
  buffer: r,
  maxCanvasWidth: o,
  mapping: l = {},
  xOffset: a = 0,
  yOffset: h = 0,
}) {
  let f = 0,
    v = a;
  Array.from(t).forEach((x, T) => {
    if (!l[x]) {
      const N = e(x, T);
      v + bf > o && ((v = 0), f++),
        (l[x] = { x: v, y: h + f * bf, width: bf, height: bf, advance: N }),
        (v += bf);
    }
  });
  const E = n + r * 2;
  return {
    mapping: l,
    xOffset: v,
    yOffset: h + f * E,
    canvasHeight: e8(h + (f + 1) * E),
  };
}
function XI(t, e, n) {
  let r = 0,
    o = 0,
    l = 0,
    a = [];
  const h = {};
  for (const v of t)
    if (!h[v.id]) {
      const { size: E } = v;
      r + E + e > n &&
        (m5(h, a, o), (r = 0), (o = l + o + e), (l = 0), (a = [])),
        a.push({ icon: v, xOffset: r }),
        (r = r + E + e),
        (l = Math.max(l, E));
    }
  a.length > 0 && m5(h, a, o);
  const f = e8(l + o + e);
  return { mapping: h, canvasHeight: f };
}
function m5(t, e, n) {
  for (const r of e) {
    const { icon: o, xOffset: l } = r;
    t[o.id] = mt(
      mt({}, o),
      {},
      { x: l, y: n, image: o.image, width: o.width, height: o.height }
    );
  }
}
function e8(t) {
  return Math.pow(2, Math.ceil(Math.log2(t)));
}
const GI = tM(),
  ZI = "sans-serif",
  YI = "normal",
  qI = 24,
  $I = 3,
  KI = 0.25,
  QI = 8,
  g5 = 1024,
  JI = 1,
  v5 = 1,
  eM = 3;
function tM() {
  const t = [];
  for (let e = 32; e < 128; e++) t.push(String.fromCharCode(e));
  return t;
}
function _5(t, e, n, r) {
  (t.font = `${r} ${n}px ${e}`),
    (t.fillStyle = "black"),
    (t.textBaseline = "middle");
}
function y5(t, e) {
  for (let n = 0; n < t.length; n++) e.data[4 * n + 3] = t[n];
}
class nM extends _s.EventEmitter {
  constructor(...e) {
    super(...e),
      R(this, "fontAtlas", void 0),
      R(this, "iconFontMap", void 0),
      R(this, "iconFontGlyphs", {}),
      R(this, "fontOptions", void 0),
      R(this, "key", void 0),
      R(this, "cache", new GC(eM));
  }
  get scale() {
    return v5;
  }
  get canvas() {
    const e = this.cache.get(this.key);
    return e && e.data;
  }
  get mapping() {
    const e = this.cache.get(this.key);
    return (e && e.mapping) || {};
  }
  getCanvasByKey(e) {
    const n = this.cache.get(e);
    return n && n.data;
  }
  getMappingByKey(e) {
    const n = this.cache.get(e);
    return (n && n.mapping) || {};
  }
  init() {
    this.cache.clear(),
      (this.fontOptions = {
        fontFamily: ZI,
        fontWeight: YI,
        characterSet: GI,
        fontSize: qI,
        buffer: $I,
        sdf: !0,
        cutoff: KI,
        radius: QI,
        iconfont: !1,
      }),
      (this.key = ""),
      (this.iconFontMap = new Map());
  }
  addIconGlyphs(e) {
    e.forEach((n) => {
      this.iconFontGlyphs[n.name] = n.unicode;
    });
  }
  addIconFont(e, n) {
    this.iconFontMap.set(e, n);
  }
  getIconFontKey(e) {
    return this.iconFontMap.get(e) || e;
  }
  getGlyph(e) {
    return this.iconFontGlyphs[e]
      ? String.fromCharCode(parseInt(this.iconFontGlyphs[e], 16))
      : "";
  }
  setFontOptions(e) {
    (this.fontOptions = mt(mt({}, this.fontOptions), e)),
      (this.key = this.getKey());
    const n = this.getNewChars(this.key, this.fontOptions.characterSet),
      r = this.cache.get(this.key);
    if (r && n.length === 0) return;
    const o = this.generateFontAtlas(this.key, n, r);
    (this.fontAtlas = o), this.cache.set(this.key, o);
  }
  addFontFace(e, n) {
    const r = document.createElement("style");
    (r.type = "text/css"),
      (r.innerText = `
        @font-face{
            font-family: '${e}';
            src: url('${n}') format('woff2'),
            url('${n}') format('woff'),
            url('${n}') format('truetype');
        }`),
      (r.onload = () => {
        if (document.fonts)
          try {
            document.fonts.load(`24px ${e}`, "L7text"),
              document.fonts.ready.then(() => {
                this.emit("fontloaded", { fontFamily: e });
              });
          } catch (o) {
            console.warn("当前环境不支持 document.fonts !"),
              console.warn("当前环境不支持 iconfont !"),
              console.warn(o);
          }
      }),
      document.getElementsByTagName("head")[0].appendChild(r);
  }
  destroy() {
    this.cache.clear(), this.iconFontMap.clear();
  }
  generateFontAtlas(e, n, r) {
    const {
      fontFamily: o,
      fontWeight: l,
      fontSize: a,
      buffer: h,
      sdf: f,
      radius: v,
      cutoff: E,
      iconfont: x,
    } = this.fontOptions;
    let T = r && r.data;
    T || ((T = window.document.createElement("canvas")), (T.width = g5));
    const N = T.getContext("2d", { willReadFrequently: !0 });
    _5(N, o, a, l);
    const {
        mapping: I,
        canvasHeight: L,
        xOffset: F,
        yOffset: X,
      } = WI(
        mt(
          {
            getFontWidth: (K) => N.measureText(K).width,
            fontHeight: a * v5,
            buffer: h,
            characterSet: n,
            maxCanvasWidth: g5,
          },
          r && { mapping: r.mapping, xOffset: r.xOffset, yOffset: r.yOffset }
        )
      ),
      G = N.getImageData(0, 0, T.width, T.height);
    if (((T.height = L), N.putImageData(G, 0, 0), _5(N, o, a, l), f)) {
      const K = new jI(a, h, v, E, o, l),
        Q = N.getImageData(0, 0, K.size, K.size);
      for (const ee of n) {
        if (x) {
          const Se = String.fromCharCode(
              parseInt(ee.replace("&#x", "").replace(";", ""), 16)
            ),
            ue = K.draw(Se);
          y5(ue, Q);
        } else y5(K.draw(ee), Q);
        N.putImageData(Q, I[ee].x, I[ee].y);
      }
    } else for (const K of n) N.fillText(K, I[K].x, I[K].y + a * JI);
    return {
      xOffset: F,
      yOffset: X,
      mapping: I,
      data: T,
      width: T.width,
      height: T.height,
    };
  }
  getKey() {
    const { fontFamily: e, fontWeight: n } = this.fontOptions;
    return `${e}_${n}`;
  }
  getNewChars(e, n) {
    const r = this.cache.get(e);
    if (!r) return n;
    const o = [],
      l = r.mapping,
      a = new Set(Object.keys(l));
    return (
      new Set(n).forEach((f) => {
        a.has(f) || o.push(f);
      }),
      o
    );
  }
}
function x5(t, e, n, r, o, l, a) {
  try {
    var h = t[l](a),
      f = h.value;
  } catch (v) {
    return void n(v);
  }
  h.done ? e(f) : Promise.resolve(f).then(r, o);
}
function bt(t) {
  return function () {
    var e = this,
      n = arguments;
    return new Promise(function (r, o) {
      var l = t.apply(e, n);
      function a(f) {
        x5(l, r, o, a, h, "next", f);
      }
      function h(f) {
        x5(l, r, o, a, h, "throw", f);
      }
      a(void 0);
    });
  };
}
const rM = 3,
  b5 = 1024,
  Ef = 64;
class iM extends _s.EventEmitter {
  constructor(...e) {
    super(...e),
      R(this, "canvasHeight", 128),
      R(this, "texture", void 0),
      R(this, "canvas", void 0),
      R(this, "iconData", void 0),
      R(this, "iconMap", void 0),
      R(this, "ctx", void 0),
      R(this, "loadingImageCount", 0);
  }
  isLoading() {
    return this.loadingImageCount === 0;
  }
  init() {
    (this.iconData = []),
      (this.iconMap = {}),
      (this.canvas = window.document.createElement("canvas")),
      (this.canvas.width = 128),
      (this.canvas.height = 128),
      (this.ctx = this.canvas.getContext("2d"));
  }
  addImage(e, n) {
    var r = this;
    return bt(function* () {
      let o = new Image();
      r.loadingImageCount++,
        r.hasImage(e)
          ? console.warn("Image Id already exists")
          : r.iconData.push({ id: e, size: Ef }),
        r.updateIconMap(),
        (o = yield r.loadImage(n));
      const l = r.iconData.find((a) => a.id === e);
      l && ((l.image = o), (l.width = o.width), (l.height = o.height)),
        r.update();
    })();
  }
  addImageMini(e, n, r) {
    const o = r.getSceneConfig().canvas;
    let l = o.createImage();
    if ((this.loadingImageCount++, this.hasImage(e)))
      throw new Error("Image Id already exists");
    this.iconData.push({ id: e, size: Ef }),
      this.updateIconMap(),
      this.loadImageMini(n, o).then((a) => {
        l = a;
        const h = this.iconData.find((f) => f.id === e);
        h && ((h.image = l), (h.width = l.width), (h.height = l.height)),
          this.update();
      });
  }
  getTexture() {
    return this.texture;
  }
  getIconMap() {
    return this.iconMap;
  }
  getCanvas() {
    return this.canvas;
  }
  hasImage(e) {
    return this.iconMap.hasOwnProperty(e);
  }
  removeImage(e) {
    this.hasImage(e) &&
      ((this.iconData = this.iconData.filter((n) => n.id !== e)),
      delete this.iconMap[e],
      this.update());
  }
  destroy() {
    this.removeAllListeners("imageUpdate"),
      (this.iconData = []),
      (this.iconMap = {});
  }
  loadImage(e) {
    return new Promise((n, r) => {
      if (e instanceof HTMLImageElement) {
        n(e);
        return;
      }
      const o = new Image();
      (o.crossOrigin = "anonymous"),
        (o.onload = () => {
          n(o);
        }),
        (o.onerror = () => {
          r(new Error("Could not load image at " + e));
        }),
        (o.src = e instanceof File ? URL.createObjectURL(e) : e);
    });
  }
  update() {
    this.updateIconMap(),
      this.updateIconAtlas(),
      this.loadingImageCount--,
      this.loadingImageCount === 0 && this.emit("imageUpdate");
  }
  updateIconAtlas() {
    (this.canvas.width = b5),
      (this.canvas.height = this.canvasHeight),
      Object.keys(this.iconMap).forEach((e) => {
        const {
            x: n,
            y: r,
            image: o,
            width: l = 64,
            height: a = 64,
          } = this.iconMap[e],
          f = Math.max(l, a) / Ef,
          v = a / f,
          E = l / f;
        o && this.ctx.drawImage(o, n + (Ef - E) / 2, r + (Ef - v) / 2, E, v);
      });
  }
  updateIconMap() {
    const { mapping: e, canvasHeight: n } = XI(this.iconData, rM, b5);
    (this.iconMap = e), (this.canvasHeight = n);
  }
  loadImageMini(e, n) {
    return new Promise((r, o) => {
      const l = n.createImage();
      (l.crossOrigin = "anonymous"),
        (l.onload = () => {
          r(l);
        }),
        (l.onerror = () => {
          o(new Error("Could not load image at " + e));
        }),
        (l.src = e);
    });
  }
}
var ps = 1e-6,
  ol = typeof Float32Array < "u" ? Float32Array : Array;
Math.hypot ||
  (Math.hypot = function () {
    for (var t = 0, e = arguments.length; e--; )
      t += arguments[e] * arguments[e];
    return Math.sqrt(t);
  });
function aM() {
  var t = new ol(4);
  return (
    ol != Float32Array && ((t[1] = 0), (t[2] = 0)), (t[0] = 1), (t[3] = 1), t
  );
}
function oM(t, e, n) {
  var r = e[0],
    o = e[1],
    l = e[2],
    a = e[3],
    h = Math.sin(n),
    f = Math.cos(n);
  return (
    (t[0] = r * f + l * h),
    (t[1] = o * f + a * h),
    (t[2] = r * -h + l * f),
    (t[3] = o * -h + a * f),
    t
  );
}
function B1() {
  var t = new ol(16);
  return (
    ol != Float32Array &&
      ((t[1] = 0),
      (t[2] = 0),
      (t[3] = 0),
      (t[4] = 0),
      (t[6] = 0),
      (t[7] = 0),
      (t[8] = 0),
      (t[9] = 0),
      (t[11] = 0),
      (t[12] = 0),
      (t[13] = 0),
      (t[14] = 0)),
    (t[0] = 1),
    (t[5] = 1),
    (t[10] = 1),
    (t[15] = 1),
    t
  );
}
function sM(t, e, n, r, o, l, a, h, f, v, E, x, T, N, I, L) {
  var F = new ol(16);
  return (
    (F[0] = t),
    (F[1] = e),
    (F[2] = n),
    (F[3] = r),
    (F[4] = o),
    (F[5] = l),
    (F[6] = a),
    (F[7] = h),
    (F[8] = f),
    (F[9] = v),
    (F[10] = E),
    (F[11] = x),
    (F[12] = T),
    (F[13] = N),
    (F[14] = I),
    (F[15] = L),
    F
  );
}
function E5(t) {
  return (
    (t[0] = 1),
    (t[1] = 0),
    (t[2] = 0),
    (t[3] = 0),
    (t[4] = 0),
    (t[5] = 1),
    (t[6] = 0),
    (t[7] = 0),
    (t[8] = 0),
    (t[9] = 0),
    (t[10] = 1),
    (t[11] = 0),
    (t[12] = 0),
    (t[13] = 0),
    (t[14] = 0),
    (t[15] = 1),
    t
  );
}
function Mg(t, e) {
  var n = e[0],
    r = e[1],
    o = e[2],
    l = e[3],
    a = e[4],
    h = e[5],
    f = e[6],
    v = e[7],
    E = e[8],
    x = e[9],
    T = e[10],
    N = e[11],
    I = e[12],
    L = e[13],
    F = e[14],
    X = e[15],
    G = n * h - r * a,
    K = n * f - o * a,
    Q = n * v - l * a,
    ee = r * f - o * h,
    Se = r * v - l * h,
    ue = o * v - l * f,
    ke = E * L - x * I,
    ut = E * F - T * I,
    Ve = E * X - N * I,
    Ae = x * F - T * L,
    Be = x * X - N * L,
    He = T * X - N * F,
    nt = G * He - K * Be + Q * Ae + ee * Ve - Se * ut + ue * ke;
  return nt
    ? ((nt = 1 / nt),
      (t[0] = (h * He - f * Be + v * Ae) * nt),
      (t[1] = (o * Be - r * He - l * Ae) * nt),
      (t[2] = (L * ue - F * Se + X * ee) * nt),
      (t[3] = (T * Se - x * ue - N * ee) * nt),
      (t[4] = (f * Ve - a * He - v * ut) * nt),
      (t[5] = (n * He - o * Ve + l * ut) * nt),
      (t[6] = (F * Q - I * ue - X * K) * nt),
      (t[7] = (E * ue - T * Q + N * K) * nt),
      (t[8] = (a * Be - h * Ve + v * ke) * nt),
      (t[9] = (r * Ve - n * Be - l * ke) * nt),
      (t[10] = (I * Se - L * Q + X * G) * nt),
      (t[11] = (x * Q - E * Se - N * G) * nt),
      (t[12] = (h * ut - a * Ae - f * ke) * nt),
      (t[13] = (n * Ae - r * ut + o * ke) * nt),
      (t[14] = (L * K - I * ee - F * G) * nt),
      (t[15] = (E * ee - x * K + T * G) * nt),
      t)
    : null;
}
function e0(t, e, n) {
  var r = e[0],
    o = e[1],
    l = e[2],
    a = e[3],
    h = e[4],
    f = e[5],
    v = e[6],
    E = e[7],
    x = e[8],
    T = e[9],
    N = e[10],
    I = e[11],
    L = e[12],
    F = e[13],
    X = e[14],
    G = e[15],
    K = n[0],
    Q = n[1],
    ee = n[2],
    Se = n[3];
  return (
    (t[0] = K * r + Q * h + ee * x + Se * L),
    (t[1] = K * o + Q * f + ee * T + Se * F),
    (t[2] = K * l + Q * v + ee * N + Se * X),
    (t[3] = K * a + Q * E + ee * I + Se * G),
    (K = n[4]),
    (Q = n[5]),
    (ee = n[6]),
    (Se = n[7]),
    (t[4] = K * r + Q * h + ee * x + Se * L),
    (t[5] = K * o + Q * f + ee * T + Se * F),
    (t[6] = K * l + Q * v + ee * N + Se * X),
    (t[7] = K * a + Q * E + ee * I + Se * G),
    (K = n[8]),
    (Q = n[9]),
    (ee = n[10]),
    (Se = n[11]),
    (t[8] = K * r + Q * h + ee * x + Se * L),
    (t[9] = K * o + Q * f + ee * T + Se * F),
    (t[10] = K * l + Q * v + ee * N + Se * X),
    (t[11] = K * a + Q * E + ee * I + Se * G),
    (K = n[12]),
    (Q = n[13]),
    (ee = n[14]),
    (Se = n[15]),
    (t[12] = K * r + Q * h + ee * x + Se * L),
    (t[13] = K * o + Q * f + ee * T + Se * F),
    (t[14] = K * l + Q * v + ee * N + Se * X),
    (t[15] = K * a + Q * E + ee * I + Se * G),
    t
  );
}
function sc(t, e, n) {
  var r = n[0],
    o = n[1],
    l = n[2],
    a,
    h,
    f,
    v,
    E,
    x,
    T,
    N,
    I,
    L,
    F,
    X;
  return (
    e === t
      ? ((t[12] = e[0] * r + e[4] * o + e[8] * l + e[12]),
        (t[13] = e[1] * r + e[5] * o + e[9] * l + e[13]),
        (t[14] = e[2] * r + e[6] * o + e[10] * l + e[14]),
        (t[15] = e[3] * r + e[7] * o + e[11] * l + e[15]))
      : ((a = e[0]),
        (h = e[1]),
        (f = e[2]),
        (v = e[3]),
        (E = e[4]),
        (x = e[5]),
        (T = e[6]),
        (N = e[7]),
        (I = e[8]),
        (L = e[9]),
        (F = e[10]),
        (X = e[11]),
        (t[0] = a),
        (t[1] = h),
        (t[2] = f),
        (t[3] = v),
        (t[4] = E),
        (t[5] = x),
        (t[6] = T),
        (t[7] = N),
        (t[8] = I),
        (t[9] = L),
        (t[10] = F),
        (t[11] = X),
        (t[12] = a * r + E * o + I * l + e[12]),
        (t[13] = h * r + x * o + L * l + e[13]),
        (t[14] = f * r + T * o + F * l + e[14]),
        (t[15] = v * r + N * o + X * l + e[15])),
    t
  );
}
function lc(t, e, n) {
  var r = n[0],
    o = n[1],
    l = n[2];
  return (
    (t[0] = e[0] * r),
    (t[1] = e[1] * r),
    (t[2] = e[2] * r),
    (t[3] = e[3] * r),
    (t[4] = e[4] * o),
    (t[5] = e[5] * o),
    (t[6] = e[6] * o),
    (t[7] = e[7] * o),
    (t[8] = e[8] * l),
    (t[9] = e[9] * l),
    (t[10] = e[10] * l),
    (t[11] = e[11] * l),
    (t[12] = e[12]),
    (t[13] = e[13]),
    (t[14] = e[14]),
    (t[15] = e[15]),
    t
  );
}
function zp(t, e, n) {
  var r = Math.sin(n),
    o = Math.cos(n),
    l = e[4],
    a = e[5],
    h = e[6],
    f = e[7],
    v = e[8],
    E = e[9],
    x = e[10],
    T = e[11];
  return (
    e !== t &&
      ((t[0] = e[0]),
      (t[1] = e[1]),
      (t[2] = e[2]),
      (t[3] = e[3]),
      (t[12] = e[12]),
      (t[13] = e[13]),
      (t[14] = e[14]),
      (t[15] = e[15])),
    (t[4] = l * o + v * r),
    (t[5] = a * o + E * r),
    (t[6] = h * o + x * r),
    (t[7] = f * o + T * r),
    (t[8] = v * o - l * r),
    (t[9] = E * o - a * r),
    (t[10] = x * o - h * r),
    (t[11] = T * o - f * r),
    t
  );
}
function fv(t, e, n) {
  var r = Math.sin(n),
    o = Math.cos(n),
    l = e[0],
    a = e[1],
    h = e[2],
    f = e[3],
    v = e[8],
    E = e[9],
    x = e[10],
    T = e[11];
  return (
    e !== t &&
      ((t[4] = e[4]),
      (t[5] = e[5]),
      (t[6] = e[6]),
      (t[7] = e[7]),
      (t[12] = e[12]),
      (t[13] = e[13]),
      (t[14] = e[14]),
      (t[15] = e[15])),
    (t[0] = l * o - v * r),
    (t[1] = a * o - E * r),
    (t[2] = h * o - x * r),
    (t[3] = f * o - T * r),
    (t[8] = l * r + v * o),
    (t[9] = a * r + E * o),
    (t[10] = h * r + x * o),
    (t[11] = f * r + T * o),
    t
  );
}
function F1(t, e, n) {
  var r = Math.sin(n),
    o = Math.cos(n),
    l = e[0],
    a = e[1],
    h = e[2],
    f = e[3],
    v = e[4],
    E = e[5],
    x = e[6],
    T = e[7];
  return (
    e !== t &&
      ((t[8] = e[8]),
      (t[9] = e[9]),
      (t[10] = e[10]),
      (t[11] = e[11]),
      (t[12] = e[12]),
      (t[13] = e[13]),
      (t[14] = e[14]),
      (t[15] = e[15])),
    (t[0] = l * o + v * r),
    (t[1] = a * o + E * r),
    (t[2] = h * o + x * r),
    (t[3] = f * o + T * r),
    (t[4] = v * o - l * r),
    (t[5] = E * o - a * r),
    (t[6] = x * o - h * r),
    (t[7] = T * o - f * r),
    t
  );
}
function lM(t, e, n, r, o) {
  var l = 1 / Math.tan(e / 2),
    a;
  return (
    (t[0] = l / n),
    (t[1] = 0),
    (t[2] = 0),
    (t[3] = 0),
    (t[4] = 0),
    (t[5] = l),
    (t[6] = 0),
    (t[7] = 0),
    (t[8] = 0),
    (t[9] = 0),
    (t[11] = -1),
    (t[12] = 0),
    (t[13] = 0),
    (t[15] = 0),
    o != null && o !== 1 / 0
      ? ((a = 1 / (r - o)), (t[10] = (o + r) * a), (t[14] = 2 * o * r * a))
      : ((t[10] = -1), (t[14] = -2 * r)),
    t
  );
}
var t8 = lM;
function A5(t, e) {
  var n = t[0],
    r = t[1],
    o = t[2],
    l = t[3],
    a = t[4],
    h = t[5],
    f = t[6],
    v = t[7],
    E = t[8],
    x = t[9],
    T = t[10],
    N = t[11],
    I = t[12],
    L = t[13],
    F = t[14],
    X = t[15],
    G = e[0],
    K = e[1],
    Q = e[2],
    ee = e[3],
    Se = e[4],
    ue = e[5],
    ke = e[6],
    ut = e[7],
    Ve = e[8],
    Ae = e[9],
    Be = e[10],
    He = e[11],
    nt = e[12],
    Ut = e[13],
    Yt = e[14],
    Ht = e[15];
  return (
    Math.abs(n - G) <= ps * Math.max(1, Math.abs(n), Math.abs(G)) &&
    Math.abs(r - K) <= ps * Math.max(1, Math.abs(r), Math.abs(K)) &&
    Math.abs(o - Q) <= ps * Math.max(1, Math.abs(o), Math.abs(Q)) &&
    Math.abs(l - ee) <= ps * Math.max(1, Math.abs(l), Math.abs(ee)) &&
    Math.abs(a - Se) <= ps * Math.max(1, Math.abs(a), Math.abs(Se)) &&
    Math.abs(h - ue) <= ps * Math.max(1, Math.abs(h), Math.abs(ue)) &&
    Math.abs(f - ke) <= ps * Math.max(1, Math.abs(f), Math.abs(ke)) &&
    Math.abs(v - ut) <= ps * Math.max(1, Math.abs(v), Math.abs(ut)) &&
    Math.abs(E - Ve) <= ps * Math.max(1, Math.abs(E), Math.abs(Ve)) &&
    Math.abs(x - Ae) <= ps * Math.max(1, Math.abs(x), Math.abs(Ae)) &&
    Math.abs(T - Be) <= ps * Math.max(1, Math.abs(T), Math.abs(Be)) &&
    Math.abs(N - He) <= ps * Math.max(1, Math.abs(N), Math.abs(He)) &&
    Math.abs(I - nt) <= ps * Math.max(1, Math.abs(I), Math.abs(nt)) &&
    Math.abs(L - Ut) <= ps * Math.max(1, Math.abs(L), Math.abs(Ut)) &&
    Math.abs(F - Yt) <= ps * Math.max(1, Math.abs(F), Math.abs(Yt)) &&
    Math.abs(X - Ht) <= ps * Math.max(1, Math.abs(X), Math.abs(Ht))
  );
}
function Wf() {
  var t = new ol(3);
  return ol != Float32Array && ((t[0] = 0), (t[1] = 0), (t[2] = 0)), t;
}
function Rs(t, e, n) {
  var r = new ol(3);
  return (r[0] = t), (r[1] = e), (r[2] = n), r;
}
function cM(t, e, n) {
  return (t[0] = e[0] - n[0]), (t[1] = e[1] - n[1]), (t[2] = e[2] - n[2]), t;
}
function uM(t, e) {
  return (t[0] = -e[0]), (t[1] = -e[1]), (t[2] = -e[2]), t;
}
function Xf(t, e) {
  var n = e[0],
    r = e[1],
    o = e[2],
    l = n * n + r * r + o * o;
  return (
    l > 0 && (l = 1 / Math.sqrt(l)),
    (t[0] = e[0] * l),
    (t[1] = e[1] * l),
    (t[2] = e[2] * l),
    t
  );
}
function dM(t, e) {
  return t[0] * e[0] + t[1] * e[1] + t[2] * e[2];
}
function hM(t, e, n) {
  var r = e[0],
    o = e[1],
    l = e[2],
    a = n[0],
    h = n[1],
    f = n[2];
  return (
    (t[0] = o * f - l * h), (t[1] = l * a - r * f), (t[2] = r * h - o * a), t
  );
}
function Pm(t, e, n) {
  var r = e[0],
    o = e[1],
    l = e[2],
    a = n[3] * r + n[7] * o + n[11] * l + n[15];
  return (
    (a = a || 1),
    (t[0] = (n[0] * r + n[4] * o + n[8] * l + n[12]) / a),
    (t[1] = (n[1] * r + n[5] * o + n[9] * l + n[13]) / a),
    (t[2] = (n[2] * r + n[6] * o + n[10] * l + n[14]) / a),
    t
  );
}
function T5(t, e) {
  var n = t[0],
    r = t[1],
    o = t[2],
    l = e[0],
    a = e[1],
    h = e[2],
    f = Math.sqrt(n * n + r * r + o * o),
    v = Math.sqrt(l * l + a * a + h * h),
    E = f * v,
    x = E && dM(t, e) / E;
  return Math.acos(Math.min(Math.max(x, -1), 1));
}
var S5 = cM;
(function () {
  var t = Wf();
  return function (e, n, r, o, l, a) {
    var h, f;
    for (
      n || (n = 3),
        r || (r = 0),
        o ? (f = Math.min(o * n + r, e.length)) : (f = e.length),
        h = r;
      h < f;
      h += n
    )
      (t[0] = e[h]),
        (t[1] = e[h + 1]),
        (t[2] = e[h + 2]),
        l(t, t, a),
        (e[h] = t[0]),
        (e[h + 1] = t[1]),
        (e[h + 2] = t[2]);
    return e;
  };
})();
function n8() {
  var t = new ol(4);
  return (
    ol != Float32Array && ((t[0] = 0), (t[1] = 0), (t[2] = 0), (t[3] = 0)), t
  );
}
function pM(t, e, n, r) {
  var o = new ol(4);
  return (o[0] = t), (o[1] = e), (o[2] = n), (o[3] = r), o;
}
function fM(t, e, n) {
  return (
    (t[0] = e[0] * n),
    (t[1] = e[1] * n),
    (t[2] = e[2] * n),
    (t[3] = e[3] * n),
    t
  );
}
function Gd(t, e, n) {
  var r = e[0],
    o = e[1],
    l = e[2],
    a = e[3];
  return (
    (t[0] = n[0] * r + n[4] * o + n[8] * l + n[12] * a),
    (t[1] = n[1] * r + n[5] * o + n[9] * l + n[13] * a),
    (t[2] = n[2] * r + n[6] * o + n[10] * l + n[14] * a),
    (t[3] = n[3] * r + n[7] * o + n[11] * l + n[15] * a),
    t
  );
}
(function () {
  var t = n8();
  return function (e, n, r, o, l, a) {
    var h, f;
    for (
      n || (n = 4),
        r || (r = 0),
        o ? (f = Math.min(o * n + r, e.length)) : (f = e.length),
        h = r;
      h < f;
      h += n
    )
      (t[0] = e[h]),
        (t[1] = e[h + 1]),
        (t[2] = e[h + 2]),
        (t[3] = e[h + 3]),
        l(t, t, a),
        (e[h] = t[0]),
        (e[h + 1] = t[1]),
        (e[h + 2] = t[2]),
        (e[h + 3] = t[3]);
    return e;
  };
})();
function tl() {
  var t = new ol(2);
  return ol != Float32Array && ((t[0] = 0), (t[1] = 0)), t;
}
function i_(t, e) {
  var n = new ol(2);
  return (n[0] = t), (n[1] = e), n;
}
function x2(t, e) {
  return (t[0] = e[0]), (t[1] = e[1]), t;
}
function mM(t, e, n) {
  return (t[0] = e), (t[1] = n), t;
}
function Zd(t, e, n) {
  return (t[0] = e[0] + n[0]), (t[1] = e[1] + n[1]), t;
}
function a_(t, e, n) {
  return (t[0] = e[0] - n[0]), (t[1] = e[1] - n[1]), t;
}
function gM(t, e) {
  return (t[0] = -e[0]), (t[1] = -e[1]), t;
}
function Pg(t, e) {
  var n = e[0],
    r = e[1],
    o = n * n + r * r;
  return (
    o > 0 && (o = 1 / Math.sqrt(o)), (t[0] = e[0] * o), (t[1] = e[1] * o), t
  );
}
function o_(t, e) {
  return t[0] * e[0] + t[1] * e[1];
}
function vM(t, e, n, r) {
  var o = e[0],
    l = e[1];
  return (t[0] = o + r * (n[0] - o)), (t[1] = l + r * (n[1] - l)), t;
}
var r8 = a_;
(function () {
  var t = tl();
  return function (e, n, r, o, l, a) {
    var h, f;
    for (
      n || (n = 2),
        r || (r = 0),
        o ? (f = Math.min(o * n + r, e.length)) : (f = e.length),
        h = r;
      h < f;
      h += n
    )
      (t[0] = e[h]),
        (t[1] = e[h + 1]),
        l(t, t, a),
        (e[h] = t[0]),
        (e[h + 1] = t[1]);
    return e;
  };
})();
class _M {
  constructor() {
    R(this, "viewport", void 0),
      R(this, "overridedViewProjectionMatrix", void 0),
      R(this, "viewMatrixInverse", void 0),
      R(this, "cameraPosition", void 0);
  }
  init() {}
  update(e) {
    (this.viewport = e),
      (this.viewMatrixInverse = B1()),
      Mg(this.viewMatrixInverse, e.getViewMatrix()),
      (this.cameraPosition = [
        this.viewMatrixInverse[12],
        this.viewMatrixInverse[13],
        this.viewMatrixInverse[14],
      ]);
  }
  getProjectionMatrix() {
    return this.viewport.getProjectionMatrix();
  }
  getModelMatrix() {
    return this.viewport.getModelMatrix();
  }
  getViewMatrix() {
    return this.viewport.getViewMatrix();
  }
  getViewMatrixUncentered() {
    return this.viewport.getViewMatrixUncentered();
  }
  getViewProjectionMatrixUncentered() {
    return this.viewport.getViewProjectionMatrixUncentered();
  }
  getViewProjectionMatrix() {
    return (
      this.overridedViewProjectionMatrix ||
      this.viewport.getViewProjectionMatrix()
    );
  }
  getZoom() {
    return this.viewport.getZoom();
  }
  getZoomScale() {
    return this.viewport.getZoomScale();
  }
  getCenter() {
    const [e, n] = this.viewport.getCenter();
    return [e, n];
  }
  getFocalDistance() {
    return this.viewport.getFocalDistance();
  }
  getCameraPosition() {
    return this.cameraPosition;
  }
  projectFlat(e, n) {
    return this.viewport.projectFlat(e, n);
  }
  setViewProjectionMatrix(e) {
    this.overridedViewProjectionMatrix = e;
  }
}
const yM = {
  topleft: "column",
  topright: "column",
  bottomright: "column",
  bottomleft: "column",
  leftcenter: "column",
  rightcenter: "column",
  topcenter: "row",
  bottomcenter: "row",
  lefttop: "row",
  righttop: "row",
  leftbottom: "row",
  rightbottom: "row",
};
class xM {
  constructor() {
    R(this, "container", void 0),
      R(this, "controlCorners", void 0),
      R(this, "controlContainer", void 0),
      R(this, "scene", void 0),
      R(this, "mapsService", void 0),
      R(this, "controls", []),
      R(this, "unAddControls", []);
  }
  init(e, n) {
    (this.container = e.container),
      (this.scene = n),
      (this.mapsService = n.mapService),
      this.initControlPos();
  }
  addControl(e, n) {
    n.mapService.map
      ? (e.addTo(this.scene), this.controls.push(e))
      : this.unAddControls.push(e);
  }
  getControlByName(e) {
    return this.controls.find((n) => n.controlOption.name === e);
  }
  removeControl(e) {
    const n = this.controls.indexOf(e);
    return n > -1 && this.controls.splice(n, 1), e.remove(), this;
  }
  addControls() {
    this.unAddControls.forEach((e) => {
      e.addTo(this.scene), this.controls.push(e);
    }),
      (this.unAddControls = []);
  }
  destroy() {
    for (const e of this.controls) e.remove();
    (this.controls = []), this.clearControlPos();
  }
  initControlPos() {
    const e = (this.controlCorners = {}),
      n = "l7-",
      r = (this.controlContainer = ma(
        "div",
        n + "control-container",
        this.container
      ));
    function o(a = []) {
      const h = a.map((f) => n + f).join(" ");
      e[a.filter((f) => !["row", "column"].includes(f)).join("")] = ma(
        "div",
        h,
        r
      );
    }
    function l(a) {
      return [
        ...a.replace(/^(top|bottom|left|right|center)/, "$1-").split("-"),
        yM[a],
      ];
    }
    Object.values(Cp).forEach((a) => {
      o(l(a));
    }),
      this.checkCornerOverlap();
  }
  clearControlPos() {
    for (const e in this.controlCorners)
      this.controlCorners[e] && Dc(this.controlCorners[e]);
    this.controlContainer && Dc(this.controlContainer);
  }
  checkCornerOverlap() {
    const e = window.MutationObserver;
    if (e)
      for (const n of Object.keys(this.controlCorners)) {
        const r = n.match(/^(top|bottom)(left|right)$/);
        if (r) {
          const [, o, l] = r,
            a = this.controlCorners[`${o}${l}`];
          new e(([{ target: f }]) => {
            a && (a.style[o] = f.clientHeight + "px");
          }).observe(this.controlCorners[`${l}${o}`], {
            childList: !0,
            attributes: !0,
          });
        }
      }
  }
}
class bM {
  constructor() {
    R(this, "container", void 0),
      R(this, "scene", void 0),
      R(this, "mapsService", void 0),
      R(this, "markers", []),
      R(this, "markerLayers", []),
      R(this, "unAddMarkers", []),
      R(this, "unAddMarkerLayers", []);
  }
  addMarkerLayer(e) {
    this.mapsService.map && this.mapsService.getMarkerContainer()
      ? (this.markerLayers.push(e), e.addTo(this.scene))
      : this.unAddMarkerLayers.push(e);
  }
  removeMarkerLayer(e) {
    e.destroy(), this.markerLayers.indexOf(e);
    const n = this.markerLayers.indexOf(e);
    n > -1 && this.markerLayers.splice(n, 1);
  }
  addMarker(e) {
    this.mapsService.map && this.mapsService.getMarkerContainer()
      ? (this.markers.push(e), e.addTo(this.scene))
      : this.unAddMarkers.push(e);
  }
  addMarkers() {
    this.unAddMarkers.forEach((e) => {
      e.addTo(this.scene), this.markers.push(e);
    }),
      (this.unAddMarkers = []);
  }
  addMarkerLayers() {
    this.unAddMarkerLayers.forEach((e) => {
      this.markerLayers.push(e), e.addTo(this.scene);
    }),
      (this.unAddMarkers = []);
  }
  removeMarker(e) {
    e.remove(), this.markers.indexOf(e);
    const n = this.markers.indexOf(e);
    n > -1 && this.markers.splice(n, 1);
  }
  removeAllMarkers() {
    this.destroy();
  }
  init(e) {
    (this.scene = e), (this.mapsService = e.mapService);
  }
  destroy() {
    this.markers.forEach((e) => {
      e.remove();
    }),
      (this.markers = []),
      this.markerLayers.forEach((e) => {
        e.destroy();
      }),
      (this.markerLayers = []);
  }
  removeMakerLayerMarker(e) {
    e.destroy();
  }
}
class EM {
  constructor() {
    R(this, "scene", void 0),
      R(this, "mapsService", void 0),
      R(this, "popups", []),
      R(this, "unAddPopups", []);
  }
  get isMarkerReady() {
    return this.mapsService.map && this.mapsService.getMarkerContainer();
  }
  removePopup(e) {
    e != null && e.isOpen() && e.remove();
    const n = this.popups.indexOf(e);
    n > -1 && this.popups.splice(n, 1);
    const r = this.unAddPopups.indexOf(e);
    r > -1 && this.unAddPopups.splice(r, 1);
  }
  destroy() {
    this.popups.forEach((e) => e.remove());
  }
  addPopup(e) {
    e &&
      e.getOptions().autoClose &&
      [...this.popups, ...this.unAddPopups].forEach((n) => {
        n.getOptions().autoClose && this.removePopup(n);
      }),
      this.isMarkerReady
        ? (e.addTo(this.scene), this.popups.push(e))
        : this.unAddPopups.push(e),
      e.on("close", () => {
        this.removePopup(e);
      });
  }
  initPopup() {
    this.unAddPopups.length &&
      this.unAddPopups.forEach((e) => {
        this.addPopup(e), (this.unAddPopups = []);
      });
  }
  init(e) {
    (this.scene = e), (this.mapsService = e.mapService);
  }
}
const AM = {
    MapToken:
      "您正在使用 Demo 测试 Token, 生产环境务必自行注册 Token 确保服务稳定 高德地图申请地址 https://lbs.amap.com/api/javascript-api/guide/abc/prepare  Mapbox地图申请地址 https://docs.mapbox.com/help/glossary/access-token/",
    SDK: "请确认引入了mapbox-gl api且在L7之前引入",
  },
  { merge: TM } = Ka,
  SM = {
    id: "map",
    logoPosition: "bottomleft",
    logoVisible: !0,
    antialias: !0,
    stencil: !0,
    preserveDrawingBuffer: !1,
    pickBufferScale: 1,
    fitBoundsOptions: { animate: !1 },
  },
  wM = {
    colors: [
      "rgb(103,0,31)",
      "rgb(178,24,43)",
      "rgb(214,96,77)",
      "rgb(244,165,130)",
      "rgb(253,219,199)",
      "rgb(247,247,247)",
      "rgb(209,229,240)",
      "rgb(146,197,222)",
      "rgb(67,147,195)",
      "rgb(33,102,172)",
      "rgb(5,48,97)",
    ],
    size: 10,
    shape: "circle",
    scales: {},
    shape2d: [
      "circle",
      "triangle",
      "square",
      "pentagon",
      "hexagon",
      "octogon",
      "hexagram",
      "rhombus",
      "vesica",
    ],
    shape3d: ["cylinder", "triangleColumn", "hexagonColumn", "squareColumn"],
    minZoom: -1,
    maxZoom: 24,
    visible: !0,
    autoFit: !1,
    pickingBuffer: 0,
    enablePropagation: !1,
    zIndex: 0,
    blend: "normal",
    maskLayers: [],
    enableMask: !0,
    maskOperation: pv.AND,
    pickedFeatureID: -1,
    enableMultiPassRenderer: !1,
    enablePicking: !0,
    active: !1,
    activeColor: "#2f54eb",
    enableHighlight: !1,
    enableSelect: !1,
    highlightColor: "#2f54eb",
    activeMix: 0,
    selectColor: "blue",
    selectMix: 0,
    enableLighting: !1,
    animateOption: {
      enable: !1,
      interval: 0.2,
      duration: 4,
      trailLength: 0.15,
    },
    forward: !0,
  };
class CM {
  constructor() {
    R(this, "sceneConfigCache", {}),
      R(this, "layerConfigCache", {}),
      R(this, "layerAttributeConfigCache", {});
  }
  getSceneConfig(e) {
    return this.sceneConfigCache[e];
  }
  getSceneWarninfo(e) {
    return AM[e];
  }
  setSceneConfig(e, n) {
    this.sceneConfigCache[e] = mt(mt({}, SM), n);
  }
  getLayerConfig(e) {
    return this.layerConfigCache[e];
  }
  setLayerConfig(e, n, r) {
    this.layerConfigCache[n] = mt({}, TM({}, this.sceneConfigCache[e], wM, r));
  }
  getAttributeConfig(e) {
    return this.layerAttributeConfigCache[e];
  }
  setAttributeConfig(e, n) {
    this.layerAttributeConfigCache[e] = mt(
      mt({}, this.layerAttributeConfigCache[e]),
      n
    );
  }
  clean() {
    (this.sceneConfigCache = {}), (this.layerConfigCache = {});
  }
}
const b2 = Math.PI / 180,
  NM = 512,
  w5 = 4003e4;
function C5({
  latitude: t = 0,
  zoom: e = 0,
  scale: n,
  highPrecision: r = !1,
  flipY: o = !1,
}) {
  n = n !== void 0 ? n : Math.pow(2, e);
  const l = {},
    a = NM * n,
    h = Math.cos(t * b2),
    f = a / 360,
    v = f / h,
    E = a / w5 / h;
  if (
    ((l.pixelsPerMeter = [E, -E, E]),
    (l.metersPerPixel = [1 / E, -1 / E, 1 / E]),
    (l.pixelsPerDegree = [f, -v, E]),
    (l.degreesPerPixel = [1 / f, -1 / v, 1 / E]),
    r)
  ) {
    const x = (b2 * Math.tan(t * b2)) / h,
      T = (f * x) / 2,
      N = (a / w5) * x,
      I = (N / v) * E;
    (l.pixelsPerDegree2 = [0, -T, N]),
      (l.pixelsPerMeter2 = [I, 0, I]),
      o &&
        ((l.pixelsPerDegree2[1] = -l.pixelsPerDegree2[1]),
        (l.pixelsPerMeter2[1] = -l.pixelsPerMeter2[1]));
  }
  return (
    o &&
      ((l.pixelsPerMeter[1] = -l.pixelsPerMeter[1]),
      (l.metersPerPixel[1] = -l.metersPerPixel[1]),
      (l.pixelsPerDegree[1] = -l.pixelsPerDegree[1]),
      (l.degreesPerPixel[1] = -l.degreesPerPixel[1])),
    l
  );
}
const RM = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];
class IM {
  constructor(e) {
    R(this, "needRefresh", !0),
      R(this, "coordinateSystem", void 0),
      R(this, "viewportCenter", void 0),
      R(this, "viewportCenterProjection", void 0),
      R(this, "pixelsPerDegree", void 0),
      R(this, "pixelsPerDegree2", void 0),
      R(this, "pixelsPerMeter", void 0),
      (this.cameraService = e);
  }
  refresh(e) {
    const n = this.cameraService.getZoom(),
      r = e || this.cameraService.getCenter(),
      { pixelsPerMeter: o, pixelsPerDegree: l } = C5({
        latitude: r[1],
        zoom: n,
      });
    (this.viewportCenter = r),
      (this.viewportCenterProjection = [0, 0, 0, 0]),
      (this.pixelsPerMeter = o),
      (this.pixelsPerDegree = l),
      (this.pixelsPerDegree2 = [0, 0, 0]),
      this.coordinateSystem === Np.LNGLAT
        ? this.cameraService.setViewProjectionMatrix(void 0)
        : this.coordinateSystem === Np.LNGLAT_OFFSET &&
          this.calculateLnglatOffset(r, n),
      (this.needRefresh = !1);
  }
  getCoordinateSystem() {
    return this.coordinateSystem;
  }
  setCoordinateSystem(e) {
    this.coordinateSystem = e;
  }
  getViewportCenter() {
    return this.viewportCenter;
  }
  getViewportCenterProjection() {
    return this.viewportCenterProjection;
  }
  getPixelsPerDegree() {
    return this.pixelsPerDegree;
  }
  getPixelsPerDegree2() {
    return this.pixelsPerDegree2;
  }
  getPixelsPerMeter() {
    return this.pixelsPerMeter;
  }
  calculateLnglatOffset(e, n, r, o) {
    const {
      pixelsPerMeter: l,
      pixelsPerDegree: a,
      pixelsPerDegree2: h,
    } = C5({ latitude: e[1], zoom: n, scale: r, flipY: o, highPrecision: !0 });
    let f = this.cameraService.getViewMatrix();
    const v = this.cameraService.getProjectionMatrix();
    let E = e0([], v, f);
    const x = this.cameraService.projectFlat(
      [Math.fround(e[0]), Math.fround(e[1])],
      Math.pow(2, n)
    );
    (this.viewportCenterProjection = Gd([], [x[0], x[1], 0, 1], E)),
      (f = this.cameraService.getViewMatrixUncentered() || f),
      (E = e0([], v, f)),
      (E = e0([], E, RM)),
      this.cameraService.setViewProjectionMatrix(E),
      (this.pixelsPerMeter = l),
      (this.pixelsPerDegree = a),
      (this.pixelsPerDegree2 = h);
  }
}
class MM extends _s.EventEmitter {
  constructor(...e) {
    super(...e),
      R(this, "renderMap", new Map()),
      R(this, "enable", !1),
      R(this, "renderEnable", !1),
      R(this, "cacheLogs", {});
  }
  setEnable(e) {
    this.enable = !!e;
  }
  log(e, n) {
    if (!this.enable) return;
    const r = e.split(".");
    let o = null;
    r.forEach((l, a) => {
      o !== null
        ? (o[l] || (o[l] = {}), a !== r.length - 1 && (o = o[l]))
        : (this.cacheLogs[l] || (this.cacheLogs[l] = {}),
          a !== r.length - 1 && (o = this.cacheLogs[l])),
        a === r.length - 1 && (o[l] = mt(mt({ time: Date.now() }, o[l]), n));
    });
  }
  getLog(e) {
    switch (typeof e) {
      case "string":
        return this.cacheLogs[e];
      case "object":
        return e.map((n) => this.cacheLogs[n]).filter((n) => n !== void 0);
      case "undefined":
        return this.cacheLogs;
    }
  }
  removeLog(e) {
    delete this.cacheLogs[e];
  }
  generateRenderUid() {
    return this.renderEnable ? XC() : "";
  }
  renderDebug(e) {
    this.renderEnable = e;
  }
  renderStart(e) {
    if (!this.renderEnable || !this.enable) return;
    const n = this.renderMap.get(e) || {};
    this.renderMap.set(
      e,
      mt(mt({}, n), {}, { renderUid: e, renderStart: Date.now() })
    );
  }
  renderEnd(e) {
    if (!this.renderEnable || !this.enable) return;
    const n = this.renderMap.get(e);
    if (n) {
      const r = n.renderStart,
        o = Date.now();
      this.emit(
        "renderEnd",
        mt(mt({}, n), {}, { renderEnd: o, renderDuration: o - r })
      ),
        this.renderMap.delete(e);
    }
  }
  destroy() {
    (this.cacheLogs = null), this.renderMap.clear();
  }
}
var i8 = { exports: {} };
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */ (function (t) {
  (function (e, n, r, o) {
    var l = ["", "webkit", "Moz", "MS", "ms", "o"],
      a = n.createElement("div"),
      h = "function",
      f = Math.round,
      v = Math.abs,
      E = Date.now;
    function x(Y, ie, Re) {
      return setTimeout(K(Y, Re), ie);
    }
    function T(Y, ie, Re) {
      return Array.isArray(Y) ? (N(Y, Re[ie], Re), !0) : !1;
    }
    function N(Y, ie, Re) {
      var rt;
      if (Y)
        if (Y.forEach) Y.forEach(ie, Re);
        else if (Y.length !== o)
          for (rt = 0; rt < Y.length; ) ie.call(Re, Y[rt], rt, Y), rt++;
        else for (rt in Y) Y.hasOwnProperty(rt) && ie.call(Re, Y[rt], rt, Y);
    }
    function I(Y, ie, Re) {
      var rt =
        "DEPRECATED METHOD: " +
        ie +
        `
` +
        Re +
        ` AT 
`;
      return function () {
        var Vt = new Error("get-stack-trace"),
          Nn =
            Vt && Vt.stack
              ? Vt.stack
                  .replace(/^[^\(]+?[\n$]/gm, "")
                  .replace(/^\s+at\s+/gm, "")
                  .replace(/^Object.<anonymous>\s*\(/gm, "{anonymous}()@")
              : "Unknown Stack Trace",
          Br = e.console && (e.console.warn || e.console.log);
        return Br && Br.call(e.console, rt, Nn), Y.apply(this, arguments);
      };
    }
    var L;
    typeof Object.assign != "function"
      ? (L = function (ie) {
          if (ie === o || ie === null)
            throw new TypeError("Cannot convert undefined or null to object");
          for (var Re = Object(ie), rt = 1; rt < arguments.length; rt++) {
            var Vt = arguments[rt];
            if (Vt !== o && Vt !== null)
              for (var Nn in Vt) Vt.hasOwnProperty(Nn) && (Re[Nn] = Vt[Nn]);
          }
          return Re;
        })
      : (L = Object.assign);
    var F = I(
        function (ie, Re, rt) {
          for (var Vt = Object.keys(Re), Nn = 0; Nn < Vt.length; )
            (!rt || (rt && ie[Vt[Nn]] === o)) && (ie[Vt[Nn]] = Re[Vt[Nn]]),
              Nn++;
          return ie;
        },
        "extend",
        "Use `assign`."
      ),
      X = I(
        function (ie, Re) {
          return F(ie, Re, !0);
        },
        "merge",
        "Use `assign`."
      );
    function G(Y, ie, Re) {
      var rt = ie.prototype,
        Vt;
      (Vt = Y.prototype = Object.create(rt)),
        (Vt.constructor = Y),
        (Vt._super = rt),
        Re && L(Vt, Re);
    }
    function K(Y, ie) {
      return function () {
        return Y.apply(ie, arguments);
      };
    }
    function Q(Y, ie) {
      return typeof Y == h ? Y.apply((ie && ie[0]) || o, ie) : Y;
    }
    function ee(Y, ie) {
      return Y === o ? ie : Y;
    }
    function Se(Y, ie, Re) {
      N(Ve(ie), function (rt) {
        Y.addEventListener(rt, Re, !1);
      });
    }
    function ue(Y, ie, Re) {
      N(Ve(ie), function (rt) {
        Y.removeEventListener(rt, Re, !1);
      });
    }
    function ke(Y, ie) {
      for (; Y; ) {
        if (Y == ie) return !0;
        Y = Y.parentNode;
      }
      return !1;
    }
    function ut(Y, ie) {
      return Y.indexOf(ie) > -1;
    }
    function Ve(Y) {
      return Y.trim().split(/\s+/g);
    }
    function Ae(Y, ie, Re) {
      if (Y.indexOf && !Re) return Y.indexOf(ie);
      for (var rt = 0; rt < Y.length; ) {
        if ((Re && Y[rt][Re] == ie) || (!Re && Y[rt] === ie)) return rt;
        rt++;
      }
      return -1;
    }
    function Be(Y) {
      return Array.prototype.slice.call(Y, 0);
    }
    function He(Y, ie, Re) {
      for (var rt = [], Vt = [], Nn = 0; Nn < Y.length; ) {
        var Br = Y[Nn][ie];
        Ae(Vt, Br) < 0 && rt.push(Y[Nn]), (Vt[Nn] = Br), Nn++;
      }
      return (
        (rt = rt.sort(function (La, _a) {
          return La[ie] > _a[ie];
        })),
        rt
      );
    }
    function nt(Y, ie) {
      for (
        var Re, rt, Vt = ie[0].toUpperCase() + ie.slice(1), Nn = 0;
        Nn < l.length;

      ) {
        if (((Re = l[Nn]), (rt = Re ? Re + Vt : ie), rt in Y)) return rt;
        Nn++;
      }
      return o;
    }
    var Ut = 1;
    function Yt() {
      return Ut++;
    }
    function Ht(Y) {
      var ie = Y.ownerDocument || Y;
      return ie.defaultView || ie.parentWindow || e;
    }
    var On = /mobile|tablet|ip(ad|hone|od)|android/i,
      gn = "ontouchstart" in e,
      xn = nt(e, "PointerEvent") !== o,
      Kn = gn && On.test(navigator.userAgent),
      er = "touch",
      _r = "pen",
      Nr = "mouse",
      ir = "kinect",
      $i = 25,
      Tr = 1,
      Fi = 2,
      qe = 4,
      $t = 8,
      Cn = 1,
      St = 2,
      An = 4,
      ar = 8,
      yr = 16,
      nr = St | An,
      Qn = ar | yr,
      Sr = nr | Qn,
      ta = ["x", "y"],
      ei = ["clientX", "clientY"];
    function ri(Y, ie) {
      var Re = this;
      (this.manager = Y),
        (this.callback = ie),
        (this.element = Y.element),
        (this.target = Y.options.inputTarget),
        (this.domHandler = function (rt) {
          Q(Y.options.enable, [Y]) && Re.handler(rt);
        }),
        this.init();
    }
    ri.prototype = {
      handler: function () {},
      init: function () {
        this.evEl && Se(this.element, this.evEl, this.domHandler),
          this.evTarget && Se(this.target, this.evTarget, this.domHandler),
          this.evWin && Se(Ht(this.element), this.evWin, this.domHandler);
      },
      destroy: function () {
        this.evEl && ue(this.element, this.evEl, this.domHandler),
          this.evTarget && ue(this.target, this.evTarget, this.domHandler),
          this.evWin && ue(Ht(this.element), this.evWin, this.domHandler);
      },
    };
    function Ra(Y) {
      var ie,
        Re = Y.options.inputClass;
      return (
        Re
          ? (ie = Re)
          : xn
          ? (ie = Ls)
          : Kn
          ? (ie = Pe)
          : gn
          ? (ie = Xe)
          : (ie = ll),
        new ie(Y, le)
      );
    }
    function le(Y, ie, Re) {
      var rt = Re.pointers.length,
        Vt = Re.changedPointers.length,
        Nn = ie & Tr && rt - Vt === 0,
        Br = ie & (qe | $t) && rt - Vt === 0;
      (Re.isFirst = !!Nn),
        (Re.isFinal = !!Br),
        Nn && (Y.session = {}),
        (Re.eventType = ie),
        Ia(Y, Re),
        Y.emit("hammer.input", Re),
        Y.recognize(Re),
        (Y.session.prevInput = Re);
    }
    function Ia(Y, ie) {
      var Re = Y.session,
        rt = ie.pointers,
        Vt = rt.length;
      Re.firstInput || (Re.firstInput = ys(ie)),
        Vt > 1 && !Re.firstMultiple
          ? (Re.firstMultiple = ys(ie))
          : Vt === 1 && (Re.firstMultiple = !1);
      var Nn = Re.firstInput,
        Br = Re.firstMultiple,
        Ki = Br ? Br.center : Nn.center,
        La = (ie.center = di(rt));
      (ie.timeStamp = E()),
        (ie.deltaTime = ie.timeStamp - Nn.timeStamp),
        (ie.angle = Os(Ki, La)),
        (ie.distance = Oa(Ki, La)),
        ts(Re, ie),
        (ie.offsetDirection = yo(ie.deltaX, ie.deltaY));
      var _a = Pa(ie.deltaTime, ie.deltaX, ie.deltaY);
      (ie.overallVelocityX = _a.x),
        (ie.overallVelocityY = _a.y),
        (ie.overallVelocity = v(_a.x) > v(_a.y) ? _a.x : _a.y),
        (ie.scale = Br ? xs(Br.pointers, rt) : 1),
        (ie.rotation = Br ? Wi(Br.pointers, rt) : 0),
        (ie.maxPointers = Re.prevInput
          ? ie.pointers.length > Re.prevInput.maxPointers
            ? ie.pointers.length
            : Re.prevInput.maxPointers
          : ie.pointers.length),
        Ma(Re, ie);
      var rs = Y.element;
      ke(ie.srcEvent.target, rs) && (rs = ie.srcEvent.target), (ie.target = rs);
    }
    function ts(Y, ie) {
      var Re = ie.center,
        rt = Y.offsetDelta || {},
        Vt = Y.prevDelta || {},
        Nn = Y.prevInput || {};
      (ie.eventType === Tr || Nn.eventType === qe) &&
        ((Vt = Y.prevDelta = { x: Nn.deltaX || 0, y: Nn.deltaY || 0 }),
        (rt = Y.offsetDelta = { x: Re.x, y: Re.y })),
        (ie.deltaX = Vt.x + (Re.x - rt.x)),
        (ie.deltaY = Vt.y + (Re.y - rt.y));
    }
    function Ma(Y, ie) {
      var Re = Y.lastInterval || ie,
        rt = ie.timeStamp - Re.timeStamp,
        Vt,
        Nn,
        Br,
        Ki;
      if (ie.eventType != $t && (rt > $i || Re.velocity === o)) {
        var La = ie.deltaX - Re.deltaX,
          _a = ie.deltaY - Re.deltaY,
          rs = Pa(rt, La, _a);
        (Nn = rs.x),
          (Br = rs.y),
          (Vt = v(rs.x) > v(rs.y) ? rs.x : rs.y),
          (Ki = yo(La, _a)),
          (Y.lastInterval = ie);
      } else
        (Vt = Re.velocity),
          (Nn = Re.velocityX),
          (Br = Re.velocityY),
          (Ki = Re.direction);
      (ie.velocity = Vt),
        (ie.velocityX = Nn),
        (ie.velocityY = Br),
        (ie.direction = Ki);
    }
    function ys(Y) {
      for (var ie = [], Re = 0; Re < Y.pointers.length; )
        (ie[Re] = {
          clientX: f(Y.pointers[Re].clientX),
          clientY: f(Y.pointers[Re].clientY),
        }),
          Re++;
      return {
        timeStamp: E(),
        pointers: ie,
        center: di(ie),
        deltaX: Y.deltaX,
        deltaY: Y.deltaY,
      };
    }
    function di(Y) {
      var ie = Y.length;
      if (ie === 1) return { x: f(Y[0].clientX), y: f(Y[0].clientY) };
      for (var Re = 0, rt = 0, Vt = 0; Vt < ie; )
        (Re += Y[Vt].clientX), (rt += Y[Vt].clientY), Vt++;
      return { x: f(Re / ie), y: f(rt / ie) };
    }
    function Pa(Y, ie, Re) {
      return { x: ie / Y || 0, y: Re / Y || 0 };
    }
    function yo(Y, ie) {
      return Y === ie
        ? Cn
        : v(Y) >= v(ie)
        ? Y < 0
          ? St
          : An
        : ie < 0
        ? ar
        : yr;
    }
    function Oa(Y, ie, Re) {
      Re || (Re = ta);
      var rt = ie[Re[0]] - Y[Re[0]],
        Vt = ie[Re[1]] - Y[Re[1]];
      return Math.sqrt(rt * rt + Vt * Vt);
    }
    function Os(Y, ie, Re) {
      Re || (Re = ta);
      var rt = ie[Re[0]] - Y[Re[0]],
        Vt = ie[Re[1]] - Y[Re[1]];
      return (Math.atan2(Vt, rt) * 180) / Math.PI;
    }
    function Wi(Y, ie) {
      return Os(ie[1], ie[0], ei) + Os(Y[1], Y[0], ei);
    }
    function xs(Y, ie) {
      return Oa(ie[0], ie[1], ei) / Oa(Y[0], Y[1], ei);
    }
    var Mo = { mousedown: Tr, mousemove: Fi, mouseup: qe },
      sl = "mousedown",
      mc = "mousemove mouseup";
    function ll() {
      (this.evEl = sl),
        (this.evWin = mc),
        (this.pressed = !1),
        ri.apply(this, arguments);
    }
    G(ll, ri, {
      handler: function (ie) {
        var Re = Mo[ie.type];
        Re & Tr && ie.button === 0 && (this.pressed = !0),
          Re & Fi && ie.which !== 1 && (Re = qe),
          this.pressed &&
            (Re & qe && (this.pressed = !1),
            this.callback(this.manager, Re, {
              pointers: [ie],
              changedPointers: [ie],
              pointerType: Nr,
              srcEvent: ie,
            }));
      },
    });
    var jc = {
        pointerdown: Tr,
        pointermove: Fi,
        pointerup: qe,
        pointercancel: $t,
        pointerout: $t,
      },
      cl = { 2: er, 3: _r, 4: Nr, 5: ir },
      jo = "pointerdown",
      Wo = "pointermove pointerup pointercancel";
    e.MSPointerEvent &&
      !e.PointerEvent &&
      ((jo = "MSPointerDown"),
      (Wo = "MSPointerMove MSPointerUp MSPointerCancel"));
    function Ls() {
      (this.evEl = jo),
        (this.evWin = Wo),
        ri.apply(this, arguments),
        (this.store = this.manager.session.pointerEvents = []);
    }
    G(Ls, ri, {
      handler: function (ie) {
        var Re = this.store,
          rt = !1,
          Vt = ie.type.toLowerCase().replace("ms", ""),
          Nn = jc[Vt],
          Br = cl[ie.pointerType] || ie.pointerType,
          Ki = Br == er,
          La = Ae(Re, ie.pointerId, "pointerId");
        Nn & Tr && (ie.button === 0 || Ki)
          ? La < 0 && (Re.push(ie), (La = Re.length - 1))
          : Nn & (qe | $t) && (rt = !0),
          !(La < 0) &&
            ((Re[La] = ie),
            this.callback(this.manager, Nn, {
              pointers: Re,
              changedPointers: [ie],
              pointerType: Br,
              srcEvent: ie,
            }),
            rt && Re.splice(La, 1));
      },
    });
    var gc = { touchstart: Tr, touchmove: Fi, touchend: qe, touchcancel: $t },
      Wr = "touchstart",
      z = "touchstart touchmove touchend touchcancel";
    function j() {
      (this.evTarget = Wr),
        (this.evWin = z),
        (this.started = !1),
        ri.apply(this, arguments);
    }
    G(j, ri, {
      handler: function (ie) {
        var Re = gc[ie.type];
        if ((Re === Tr && (this.started = !0), !!this.started)) {
          var rt = Z.call(this, ie, Re);
          Re & (qe | $t) &&
            rt[0].length - rt[1].length === 0 &&
            (this.started = !1),
            this.callback(this.manager, Re, {
              pointers: rt[0],
              changedPointers: rt[1],
              pointerType: er,
              srcEvent: ie,
            });
        }
      },
    });
    function Z(Y, ie) {
      var Re = Be(Y.touches),
        rt = Be(Y.changedTouches);
      return ie & (qe | $t) && (Re = He(Re.concat(rt), "identifier")), [Re, rt];
    }
    var ae = { touchstart: Tr, touchmove: Fi, touchend: qe, touchcancel: $t },
      fe = "touchstart touchmove touchend touchcancel";
    function Pe() {
      (this.evTarget = fe), (this.targetIds = {}), ri.apply(this, arguments);
    }
    G(Pe, ri, {
      handler: function (ie) {
        var Re = ae[ie.type],
          rt = Fe.call(this, ie, Re);
        rt &&
          this.callback(this.manager, Re, {
            pointers: rt[0],
            changedPointers: rt[1],
            pointerType: er,
            srcEvent: ie,
          });
      },
    });
    function Fe(Y, ie) {
      var Re = Be(Y.touches),
        rt = this.targetIds;
      if (ie & (Tr | Fi) && Re.length === 1)
        return (rt[Re[0].identifier] = !0), [Re, Re];
      var Vt,
        Nn,
        Br = Be(Y.changedTouches),
        Ki = [],
        La = this.target;
      if (
        ((Nn = Re.filter(function (_a) {
          return ke(_a.target, La);
        })),
        ie === Tr)
      )
        for (Vt = 0; Vt < Nn.length; ) (rt[Nn[Vt].identifier] = !0), Vt++;
      for (Vt = 0; Vt < Br.length; )
        rt[Br[Vt].identifier] && Ki.push(Br[Vt]),
          ie & (qe | $t) && delete rt[Br[Vt].identifier],
          Vt++;
      if (Ki.length) return [He(Nn.concat(Ki), "identifier"), Ki];
    }
    var te = 2500,
      ye = 25;
    function Xe() {
      ri.apply(this, arguments);
      var Y = K(this.handler, this);
      (this.touch = new Pe(this.manager, Y)),
        (this.mouse = new ll(this.manager, Y)),
        (this.primaryTouch = null),
        (this.lastTouches = []);
    }
    G(Xe, ri, {
      handler: function (ie, Re, rt) {
        var Vt = rt.pointerType == er,
          Nn = rt.pointerType == Nr;
        if (
          !(
            Nn &&
            rt.sourceCapabilities &&
            rt.sourceCapabilities.firesTouchEvents
          )
        ) {
          if (Vt) gt.call(this, Re, rt);
          else if (Nn && dt.call(this, rt)) return;
          this.callback(ie, Re, rt);
        }
      },
      destroy: function () {
        this.touch.destroy(), this.mouse.destroy();
      },
    });
    function gt(Y, ie) {
      Y & Tr
        ? ((this.primaryTouch = ie.changedPointers[0].identifier),
          Ot.call(this, ie))
        : Y & (qe | $t) && Ot.call(this, ie);
    }
    function Ot(Y) {
      var ie = Y.changedPointers[0];
      if (ie.identifier === this.primaryTouch) {
        var Re = { x: ie.clientX, y: ie.clientY };
        this.lastTouches.push(Re);
        var rt = this.lastTouches,
          Vt = function () {
            var Nn = rt.indexOf(Re);
            Nn > -1 && rt.splice(Nn, 1);
          };
        setTimeout(Vt, te);
      }
    }
    function dt(Y) {
      for (
        var ie = Y.srcEvent.clientX, Re = Y.srcEvent.clientY, rt = 0;
        rt < this.lastTouches.length;
        rt++
      ) {
        var Vt = this.lastTouches[rt],
          Nn = Math.abs(ie - Vt.x),
          Br = Math.abs(Re - Vt.y);
        if (Nn <= ye && Br <= ye) return !0;
      }
      return !1;
    }
    var Nt = nt(a.style, "touchAction"),
      yn = Nt !== o,
      mn = "compute",
      pt = "auto",
      on = "manipulation",
      Gt = "none",
      qt = "pan-x",
      or = "pan-y",
      nn = xr();
    function wr(Y, ie) {
      (this.manager = Y), this.set(ie);
    }
    wr.prototype = {
      set: function (Y) {
        Y == mn && (Y = this.compute()),
          yn &&
            this.manager.element.style &&
            nn[Y] &&
            (this.manager.element.style[Nt] = Y),
          (this.actions = Y.toLowerCase().trim());
      },
      update: function () {
        this.set(this.manager.options.touchAction);
      },
      compute: function () {
        var Y = [];
        return (
          N(this.manager.recognizers, function (ie) {
            Q(ie.options.enable, [ie]) && (Y = Y.concat(ie.getTouchAction()));
          }),
          ti(Y.join(" "))
        );
      },
      preventDefaults: function (Y) {
        var ie = Y.srcEvent,
          Re = Y.offsetDirection;
        if (this.manager.session.prevented) {
          ie.preventDefault();
          return;
        }
        var rt = this.actions,
          Vt = ut(rt, Gt) && !nn[Gt],
          Nn = ut(rt, or) && !nn[or],
          Br = ut(rt, qt) && !nn[qt];
        if (Vt) {
          var Ki = Y.pointers.length === 1,
            La = Y.distance < 2,
            _a = Y.deltaTime < 250;
          if (Ki && La && _a) return;
        }
        if (!(Br && Nn) && (Vt || (Nn && Re & nr) || (Br && Re & Qn)))
          return this.preventSrc(ie);
      },
      preventSrc: function (Y) {
        (this.manager.session.prevented = !0), Y.preventDefault();
      },
    };
    function ti(Y) {
      if (ut(Y, Gt)) return Gt;
      var ie = ut(Y, qt),
        Re = ut(Y, or);
      return ie && Re ? Gt : ie || Re ? (ie ? qt : or) : ut(Y, on) ? on : pt;
    }
    function xr() {
      if (!yn) return !1;
      var Y = {},
        ie = e.CSS && e.CSS.supports;
      return (
        [
          "auto",
          "manipulation",
          "pan-y",
          "pan-x",
          "pan-x pan-y",
          "none",
        ].forEach(function (Re) {
          Y[Re] = ie ? e.CSS.supports("touch-action", Re) : !0;
        }),
        Y
      );
    }
    var Or = 1,
      sr = 2,
      Xi = 4,
      Rr = 8,
      ni = Rr,
      zr = 16,
      lr = 32;
    function br(Y) {
      (this.options = L({}, this.defaults, Y || {})),
        (this.id = Yt()),
        (this.manager = null),
        (this.options.enable = ee(this.options.enable, !0)),
        (this.state = Or),
        (this.simultaneous = {}),
        (this.requireFail = []);
    }
    br.prototype = {
      defaults: {},
      set: function (Y) {
        return (
          L(this.options, Y),
          this.manager && this.manager.touchAction.update(),
          this
        );
      },
      recognizeWith: function (Y) {
        if (T(Y, "recognizeWith", this)) return this;
        var ie = this.simultaneous;
        return (
          (Y = ki(Y, this)),
          ie[Y.id] || ((ie[Y.id] = Y), Y.recognizeWith(this)),
          this
        );
      },
      dropRecognizeWith: function (Y) {
        return T(Y, "dropRecognizeWith", this)
          ? this
          : ((Y = ki(Y, this)), delete this.simultaneous[Y.id], this);
      },
      requireFailure: function (Y) {
        if (T(Y, "requireFailure", this)) return this;
        var ie = this.requireFail;
        return (
          (Y = ki(Y, this)),
          Ae(ie, Y) === -1 && (ie.push(Y), Y.requireFailure(this)),
          this
        );
      },
      dropRequireFailure: function (Y) {
        if (T(Y, "dropRequireFailure", this)) return this;
        Y = ki(Y, this);
        var ie = Ae(this.requireFail, Y);
        return ie > -1 && this.requireFail.splice(ie, 1), this;
      },
      hasRequireFailures: function () {
        return this.requireFail.length > 0;
      },
      canRecognizeWith: function (Y) {
        return !!this.simultaneous[Y.id];
      },
      emit: function (Y) {
        var ie = this,
          Re = this.state;
        function rt(Vt) {
          ie.manager.emit(Vt, Y);
        }
        Re < Rr && rt(ie.options.event + ja(Re)),
          rt(ie.options.event),
          Y.additionalEvent && rt(Y.additionalEvent),
          Re >= Rr && rt(ie.options.event + ja(Re));
      },
      tryEmit: function (Y) {
        if (this.canEmit()) return this.emit(Y);
        this.state = lr;
      },
      canEmit: function () {
        for (var Y = 0; Y < this.requireFail.length; ) {
          if (!(this.requireFail[Y].state & (lr | Or))) return !1;
          Y++;
        }
        return !0;
      },
      recognize: function (Y) {
        var ie = L({}, Y);
        if (!Q(this.options.enable, [this, ie])) {
          this.reset(), (this.state = lr);
          return;
        }
        this.state & (ni | zr | lr) && (this.state = Or),
          (this.state = this.process(ie)),
          this.state & (sr | Xi | Rr | zr) && this.tryEmit(ie);
      },
      process: function (Y) {},
      getTouchAction: function () {},
      reset: function () {},
    };
    function ja(Y) {
      return Y & zr
        ? "cancel"
        : Y & Rr
        ? "end"
        : Y & Xi
        ? "move"
        : Y & sr
        ? "start"
        : "";
    }
    function Rl(Y) {
      return Y == yr
        ? "down"
        : Y == ar
        ? "up"
        : Y == St
        ? "left"
        : Y == An
        ? "right"
        : "";
    }
    function ki(Y, ie) {
      var Re = ie.manager;
      return Re ? Re.get(Y) : Y;
    }
    function Ai() {
      br.apply(this, arguments);
    }
    G(Ai, br, {
      defaults: { pointers: 1 },
      attrTest: function (Y) {
        var ie = this.options.pointers;
        return ie === 0 || Y.pointers.length === ie;
      },
      process: function (Y) {
        var ie = this.state,
          Re = Y.eventType,
          rt = ie & (sr | Xi),
          Vt = this.attrTest(Y);
        return rt && (Re & $t || !Vt)
          ? ie | zr
          : rt || Vt
          ? Re & qe
            ? ie | Rr
            : ie & sr
            ? ie | Xi
            : sr
          : lr;
      },
    });
    function Il() {
      Ai.apply(this, arguments), (this.pX = null), (this.pY = null);
    }
    G(Il, Ai, {
      defaults: { event: "pan", threshold: 10, pointers: 1, direction: Sr },
      getTouchAction: function () {
        var Y = this.options.direction,
          ie = [];
        return Y & nr && ie.push(or), Y & Qn && ie.push(qt), ie;
      },
      directionTest: function (Y) {
        var ie = this.options,
          Re = !0,
          rt = Y.distance,
          Vt = Y.direction,
          Nn = Y.deltaX,
          Br = Y.deltaY;
        return (
          Vt & ie.direction ||
            (ie.direction & nr
              ? ((Vt = Nn === 0 ? Cn : Nn < 0 ? St : An),
                (Re = Nn != this.pX),
                (rt = Math.abs(Y.deltaX)))
              : ((Vt = Br === 0 ? Cn : Br < 0 ? ar : yr),
                (Re = Br != this.pY),
                (rt = Math.abs(Y.deltaY)))),
          (Y.direction = Vt),
          Re && rt > ie.threshold && Vt & ie.direction
        );
      },
      attrTest: function (Y) {
        return (
          Ai.prototype.attrTest.call(this, Y) &&
          (this.state & sr || (!(this.state & sr) && this.directionTest(Y)))
        );
      },
      emit: function (Y) {
        (this.pX = Y.deltaX), (this.pY = Y.deltaY);
        var ie = Rl(Y.direction);
        ie && (Y.additionalEvent = this.options.event + ie),
          this._super.emit.call(this, Y);
      },
    });
    function ns() {
      Ai.apply(this, arguments);
    }
    G(ns, Ai, {
      defaults: { event: "pinch", threshold: 0, pointers: 2 },
      getTouchAction: function () {
        return [Gt];
      },
      attrTest: function (Y) {
        return (
          this._super.attrTest.call(this, Y) &&
          (Math.abs(Y.scale - 1) > this.options.threshold || this.state & sr)
        );
      },
      emit: function (Y) {
        if (Y.scale !== 1) {
          var ie = Y.scale < 1 ? "in" : "out";
          Y.additionalEvent = this.options.event + ie;
        }
        this._super.emit.call(this, Y);
      },
    });
    function yi() {
      br.apply(this, arguments), (this._timer = null), (this._input = null);
    }
    G(yi, br, {
      defaults: { event: "press", pointers: 1, time: 251, threshold: 9 },
      getTouchAction: function () {
        return [pt];
      },
      process: function (Y) {
        var ie = this.options,
          Re = Y.pointers.length === ie.pointers,
          rt = Y.distance < ie.threshold,
          Vt = Y.deltaTime > ie.time;
        if (((this._input = Y), !rt || !Re || (Y.eventType & (qe | $t) && !Vt)))
          this.reset();
        else if (Y.eventType & Tr)
          this.reset(),
            (this._timer = x(
              function () {
                (this.state = ni), this.tryEmit();
              },
              ie.time,
              this
            ));
        else if (Y.eventType & qe) return ni;
        return lr;
      },
      reset: function () {
        clearTimeout(this._timer);
      },
      emit: function (Y) {
        this.state === ni &&
          (Y && Y.eventType & qe
            ? this.manager.emit(this.options.event + "up", Y)
            : ((this._input.timeStamp = E()),
              this.manager.emit(this.options.event, this._input)));
      },
    });
    function ul() {
      Ai.apply(this, arguments);
    }
    G(ul, Ai, {
      defaults: { event: "rotate", threshold: 0, pointers: 2 },
      getTouchAction: function () {
        return [Gt];
      },
      attrTest: function (Y) {
        return (
          this._super.attrTest.call(this, Y) &&
          (Math.abs(Y.rotation) > this.options.threshold || this.state & sr)
        );
      },
    });
    function va() {
      Ai.apply(this, arguments);
    }
    G(va, Ai, {
      defaults: {
        event: "swipe",
        threshold: 10,
        velocity: 0.3,
        direction: nr | Qn,
        pointers: 1,
      },
      getTouchAction: function () {
        return Il.prototype.getTouchAction.call(this);
      },
      attrTest: function (Y) {
        var ie = this.options.direction,
          Re;
        return (
          ie & (nr | Qn)
            ? (Re = Y.overallVelocity)
            : ie & nr
            ? (Re = Y.overallVelocityX)
            : ie & Qn && (Re = Y.overallVelocityY),
          this._super.attrTest.call(this, Y) &&
            ie & Y.offsetDirection &&
            Y.distance > this.options.threshold &&
            Y.maxPointers == this.options.pointers &&
            v(Re) > this.options.velocity &&
            Y.eventType & qe
        );
      },
      emit: function (Y) {
        var ie = Rl(Y.offsetDirection);
        ie && this.manager.emit(this.options.event + ie, Y),
          this.manager.emit(this.options.event, Y);
      },
    });
    function xi() {
      br.apply(this, arguments),
        (this.pTime = !1),
        (this.pCenter = !1),
        (this._timer = null),
        (this._input = null),
        (this.count = 0);
    }
    G(xi, br, {
      defaults: {
        event: "tap",
        pointers: 1,
        taps: 1,
        interval: 300,
        time: 250,
        threshold: 9,
        posThreshold: 10,
      },
      getTouchAction: function () {
        return [on];
      },
      process: function (Y) {
        var ie = this.options,
          Re = Y.pointers.length === ie.pointers,
          rt = Y.distance < ie.threshold,
          Vt = Y.deltaTime < ie.time;
        if ((this.reset(), Y.eventType & Tr && this.count === 0))
          return this.failTimeout();
        if (rt && Vt && Re) {
          if (Y.eventType != qe) return this.failTimeout();
          var Nn = this.pTime ? Y.timeStamp - this.pTime < ie.interval : !0,
            Br = !this.pCenter || Oa(this.pCenter, Y.center) < ie.posThreshold;
          (this.pTime = Y.timeStamp),
            (this.pCenter = Y.center),
            !Br || !Nn ? (this.count = 1) : (this.count += 1),
            (this._input = Y);
          var Ki = this.count % ie.taps;
          if (Ki === 0)
            return this.hasRequireFailures()
              ? ((this._timer = x(
                  function () {
                    (this.state = ni), this.tryEmit();
                  },
                  ie.interval,
                  this
                )),
                sr)
              : ni;
        }
        return lr;
      },
      failTimeout: function () {
        return (
          (this._timer = x(
            function () {
              this.state = lr;
            },
            this.options.interval,
            this
          )),
          lr
        );
      },
      reset: function () {
        clearTimeout(this._timer);
      },
      emit: function () {
        this.state == ni &&
          ((this._input.tapCount = this.count),
          this.manager.emit(this.options.event, this._input));
      },
    });
    function Gi(Y, ie) {
      return (
        (ie = ie || {}),
        (ie.recognizers = ee(ie.recognizers, Gi.defaults.preset)),
        new Qa(Y, ie)
      );
    }
    (Gi.VERSION = "2.0.7"),
      (Gi.defaults = {
        domEvents: !1,
        touchAction: mn,
        enable: !0,
        inputTarget: null,
        inputClass: null,
        preset: [
          [ul, { enable: !1 }],
          [ns, { enable: !1 }, ["rotate"]],
          [va, { direction: nr }],
          [Il, { direction: nr }, ["swipe"]],
          [xi],
          [xi, { event: "doubletap", taps: 2 }, ["tap"]],
          [yi],
        ],
        cssProps: {
          userSelect: "none",
          touchSelect: "none",
          touchCallout: "none",
          contentZooming: "none",
          userDrag: "none",
          tapHighlightColor: "rgba(0,0,0,0)",
        },
      });
    var hi = 1,
      lo = 2;
    function Qa(Y, ie) {
      (this.options = L({}, Gi.defaults, ie || {})),
        (this.options.inputTarget = this.options.inputTarget || Y),
        (this.handlers = {}),
        (this.session = {}),
        (this.recognizers = []),
        (this.oldCssProps = {}),
        (this.element = Y),
        (this.input = Ra(this)),
        (this.touchAction = new wr(this, this.options.touchAction)),
        Au(this, !0),
        N(
          this.options.recognizers,
          function (Re) {
            var rt = this.add(new Re[0](Re[1]));
            Re[2] && rt.recognizeWith(Re[2]), Re[3] && rt.requireFailure(Re[3]);
          },
          this
        );
    }
    Qa.prototype = {
      set: function (Y) {
        return (
          L(this.options, Y),
          Y.touchAction && this.touchAction.update(),
          Y.inputTarget &&
            (this.input.destroy(),
            (this.input.target = Y.inputTarget),
            this.input.init()),
          this
        );
      },
      stop: function (Y) {
        this.session.stopped = Y ? lo : hi;
      },
      recognize: function (Y) {
        var ie = this.session;
        if (!ie.stopped) {
          this.touchAction.preventDefaults(Y);
          var Re,
            rt = this.recognizers,
            Vt = ie.curRecognizer;
          (!Vt || (Vt && Vt.state & ni)) && (Vt = ie.curRecognizer = null);
          for (var Nn = 0; Nn < rt.length; )
            (Re = rt[Nn]),
              ie.stopped !== lo && (!Vt || Re == Vt || Re.canRecognizeWith(Vt))
                ? Re.recognize(Y)
                : Re.reset(),
              !Vt && Re.state & (sr | Xi | Rr) && (Vt = ie.curRecognizer = Re),
              Nn++;
        }
      },
      get: function (Y) {
        if (Y instanceof br) return Y;
        for (var ie = this.recognizers, Re = 0; Re < ie.length; Re++)
          if (ie[Re].options.event == Y) return ie[Re];
        return null;
      },
      add: function (Y) {
        if (T(Y, "add", this)) return this;
        var ie = this.get(Y.options.event);
        return (
          ie && this.remove(ie),
          this.recognizers.push(Y),
          (Y.manager = this),
          this.touchAction.update(),
          Y
        );
      },
      remove: function (Y) {
        if (T(Y, "remove", this)) return this;
        if (((Y = this.get(Y)), Y)) {
          var ie = this.recognizers,
            Re = Ae(ie, Y);
          Re !== -1 && (ie.splice(Re, 1), this.touchAction.update());
        }
        return this;
      },
      on: function (Y, ie) {
        if (Y !== o && ie !== o) {
          var Re = this.handlers;
          return (
            N(Ve(Y), function (rt) {
              (Re[rt] = Re[rt] || []), Re[rt].push(ie);
            }),
            this
          );
        }
      },
      off: function (Y, ie) {
        if (Y !== o) {
          var Re = this.handlers;
          return (
            N(Ve(Y), function (rt) {
              ie ? Re[rt] && Re[rt].splice(Ae(Re[rt], ie), 1) : delete Re[rt];
            }),
            this
          );
        }
      },
      emit: function (Y, ie) {
        this.options.domEvents && Po(Y, ie);
        var Re = this.handlers[Y] && this.handlers[Y].slice();
        if (!(!Re || !Re.length)) {
          (ie.type = Y),
            (ie.preventDefault = function () {
              ie.srcEvent.preventDefault();
            });
          for (var rt = 0; rt < Re.length; ) Re[rt](ie), rt++;
        }
      },
      destroy: function () {
        this.element && Au(this, !1),
          (this.handlers = {}),
          (this.session = {}),
          this.input.destroy(),
          (this.element = null);
      },
    };
    function Au(Y, ie) {
      var Re = Y.element;
      if (Re.style) {
        var rt;
        N(Y.options.cssProps, function (Vt, Nn) {
          (rt = nt(Re.style, Nn)),
            ie
              ? ((Y.oldCssProps[rt] = Re.style[rt]), (Re.style[rt] = Vt))
              : (Re.style[rt] = Y.oldCssProps[rt] || "");
        }),
          ie || (Y.oldCssProps = {});
      }
    }
    function Po(Y, ie) {
      var Re = n.createEvent("Event");
      Re.initEvent(Y, !0, !0), (Re.gesture = ie), ie.target.dispatchEvent(Re);
    }
    L(Gi, {
      INPUT_START: Tr,
      INPUT_MOVE: Fi,
      INPUT_END: qe,
      INPUT_CANCEL: $t,
      STATE_POSSIBLE: Or,
      STATE_BEGAN: sr,
      STATE_CHANGED: Xi,
      STATE_ENDED: Rr,
      STATE_RECOGNIZED: ni,
      STATE_CANCELLED: zr,
      STATE_FAILED: lr,
      DIRECTION_NONE: Cn,
      DIRECTION_LEFT: St,
      DIRECTION_RIGHT: An,
      DIRECTION_UP: ar,
      DIRECTION_DOWN: yr,
      DIRECTION_HORIZONTAL: nr,
      DIRECTION_VERTICAL: Qn,
      DIRECTION_ALL: Sr,
      Manager: Qa,
      Input: ri,
      TouchAction: wr,
      TouchInput: Pe,
      MouseInput: ll,
      PointerEventInput: Ls,
      TouchMouseInput: Xe,
      SingleTouchInput: j,
      Recognizer: br,
      AttrRecognizer: Ai,
      Tap: xi,
      Pan: Il,
      Swipe: va,
      Pinch: ns,
      Rotate: ul,
      Press: yi,
      on: Se,
      off: ue,
      each: N,
      merge: X,
      extend: F,
      assign: L,
      inherit: G,
      bindFn: K,
      prefixed: nt,
    });
    var l0 = typeof e < "u" ? e : typeof self < "u" ? self : {};
    (l0.Hammer = Gi), t.exports ? (t.exports = Gi) : (e[r] = Gi);
  })(window, document, "Hammer");
})(i8);
var PM = i8.exports;
const Af = ea(PM),
  OM = {
    panstart: "dragstart",
    panmove: "dragging",
    panend: "dragend",
    pancancel: "dragcancel",
  };
class LM extends v3 {
  get mapService() {
    return this.container.mapService;
  }
  constructor(e) {
    super(),
      R(this, "indragging", !1),
      R(this, "hammertime", void 0),
      R(this, "lastClickTime", 0),
      R(this, "lastClickXY", [-1, -1]),
      R(this, "clickTimer", void 0),
      R(this, "$containter", void 0),
      R(this, "onDrag", (n) => {
        const r = this.interactionEvent(n);
        (r.type = OM[r.type]),
          r.type === "dragging"
            ? (this.indragging = !0)
            : (this.indragging = !1),
          this.emit(Js.Drag, r);
      }),
      R(this, "onHammer", (n) => {
        n.srcEvent.stopPropagation();
        const r = this.interactionEvent(n);
        this.emit(Js.Hover, r);
      }),
      R(this, "onTouch", (n) => {
        const r = n.touches[0];
        this.onHover({
          clientX: r.clientX,
          clientY: r.clientY,
          type: "touchstart",
        });
      }),
      R(this, "onTouchEnd", (n) => {
        if (n.changedTouches.length > 0) {
          const r = n.changedTouches[0];
          this.onHover({
            clientX: r.clientX,
            clientY: r.clientY,
            type: "touchend",
          });
        }
      }),
      R(this, "onTouchMove", (n) => {
        const r = n.changedTouches[0];
        this.onHover({
          clientX: r.clientX,
          clientY: r.clientY,
          type: "touchmove",
        });
      }),
      R(this, "onHover", (n) => {
        const { clientX: r, clientY: o } = n;
        let l = r,
          a = o;
        const h = n.type,
          f = this.mapService.getMapContainer();
        if (f) {
          const { top: E, left: x } = f.getBoundingClientRect();
          (l = l - x - f.clientLeft), (a = a - E - f.clientTop);
        }
        const v = this.mapService.containerToLngLat([l, a]);
        if (h === "click") {
          this.isDoubleTap(l, a, v);
          return;
        }
        if (h === "touch") {
          this.isDoubleTap(l, a, v);
          return;
        }
        h !== "click" &&
          h !== "dblclick" &&
          this.emit(Js.Hover, { x: l, y: a, lngLat: v, type: h, target: n });
      }),
      (this.container = e);
  }
  init() {
    this.addEventListenerOnMap(),
      (this.$containter = this.mapService.getMapContainer());
  }
  destroy() {
    this.hammertime && this.hammertime.destroy(),
      this.removeEventListenerOnMap(),
      this.off(Js.Hover);
  }
  triggerHover({ x: e, y: n }) {
    this.emit(Js.Hover, { x: e, y: n });
  }
  triggerSelect(e) {
    this.emit(Js.Select, { featureId: e });
  }
  triggerActive(e) {
    this.emit(Js.Active, { featureId: e });
  }
  addEventListenerOnMap() {
    const e = this.mapService.getMapContainer();
    if (e) {
      const n = new Af.Manager(e);
      n.add(new Af.Tap({ event: "dblclick", taps: 2 })),
        n.add(new Af.Tap({ event: "click" })),
        n.add(new Af.Pan({ threshold: 0, pointers: 0 })),
        n.add(new Af.Press({})),
        n.on("dblclick click", this.onHammer),
        n.on("panstart panmove panend pancancel", this.onDrag),
        e.addEventListener("touchstart", this.onTouch),
        e.addEventListener("touchend", this.onTouchEnd),
        e.addEventListener("mousemove", this.onHover),
        e.addEventListener("touchmove", this.onTouchMove),
        e.addEventListener("mousedown", this.onHover, !0),
        e.addEventListener("mouseup", this.onHover),
        e.addEventListener("contextmenu", this.onHover),
        (this.hammertime = n);
    }
  }
  removeEventListenerOnMap() {
    const e = this.mapService.getMapContainer();
    e &&
      (e.removeEventListener("mousemove", this.onHover),
      this.hammertime.off("dblclick click", this.onHammer),
      this.hammertime.off("panstart panmove panend pancancel", this.onDrag),
      e.removeEventListener("touchstart", this.onTouch),
      e.removeEventListener("touchend", this.onTouchEnd),
      e.removeEventListener("mousedown", this.onHover),
      e.removeEventListener("mouseup", this.onHover),
      e.removeEventListener("contextmenu", this.onHover));
  }
  interactionEvent(e) {
    const { type: n, pointerType: r } = e;
    let o, l;
    r === "touch"
      ? ((l = Math.floor(e.pointers[0].clientY)),
        (o = Math.floor(e.pointers[0].clientX)))
      : ((l = Math.floor(e.srcEvent.y)), (o = Math.floor(e.srcEvent.x)));
    const a = this.mapService.getMapContainer();
    if (a) {
      const { top: f, left: v } = a.getBoundingClientRect();
      (o -= v), (l -= f);
    }
    const h = this.mapService.containerToLngLat([o, l]);
    return { x: o, y: l, lngLat: h, type: n, target: e.srcEvent };
  }
  isDoubleTap(e, n, r) {
    const o = new Date().getTime();
    let l = "click";
    o - this.lastClickTime < 400 &&
    Math.abs(this.lastClickXY[0] - e) < 10 &&
    Math.abs(this.lastClickXY[1] - n) < 10
      ? ((this.lastClickTime = 0),
        (this.lastClickXY = [-1, -1]),
        this.clickTimer && clearTimeout(this.clickTimer),
        (l = "dblclick"),
        this.emit(Js.Hover, { x: e, y: n, lngLat: r, type: l }))
      : ((this.lastClickTime = o),
        (this.lastClickXY = [e, n]),
        (this.clickTimer = setTimeout(() => {
          (l = "click"),
            this.emit(Js.Hover, { x: e, y: n, lngLat: r, type: l });
        }, 400)));
  }
}
let DM = 0;
function BM(t) {
  let e = t;
  if ((typeof t == "string" && (e = document.getElementById(t)), e)) {
    const n = document.createElement("div");
    return (
      (n.style.cssText += `
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `),
      (n.id = `l7-scene-${DM++}`),
      n.classList.add("l7-scene"),
      e.appendChild(n),
      n
    );
  }
  return null;
}
function FM(t) {
  var e;
  let n = !0;
  if (
    (t == null || (e = t.target) === null || e === void 0
      ? void 0
      : e.target) instanceof HTMLElement
  ) {
    var r;
    let l =
      t == null || (r = t.target) === null || r === void 0 ? void 0 : r.target;
    for (; l; ) {
      var o;
      const a = Array.from(l.classList);
      if (a.includes("l7-marker") || a.includes("l7-popup")) {
        n = !1;
        break;
      }
      l = (o = l) === null || o === void 0 ? void 0 : o.parentElement;
    }
  }
  return n;
}
let m1 = (function (t) {
  return (
    (t[(t.SAMPLED = 0)] = "SAMPLED"),
    (t[(t.RENDER_TARGET = 1)] = "RENDER_TARGET"),
    t
  );
})({});
class kM {
  constructor(e) {
    var n = this;
    R(this, "pickedColors", void 0),
      R(this, "pickedTileLayers", []),
      R(this, "pickingFBO", void 0),
      R(this, "width", 0),
      R(this, "height", 0),
      R(this, "alreadyInPicking", !1),
      R(this, "pickBufferScale", 1),
      R(
        this,
        "pickFromPickingFBO",
        (function () {
          var r = bt(function* (
            o,
            { x: l, y: a, lngLat: h, type: f, target: v }
          ) {
            var E;
            let x = !1;
            const {
                readPixels: T,
                readPixelsAsync: N,
                getViewportSize: I,
                queryVerdorInfo: L,
              } = n.rendererService,
              { width: F, height: X } = I(),
              { enableHighlight: G, enableSelect: K } = o.getLayerConfig(),
              Q = l * Qs,
              ee = a * Qs;
            if (Q > F - 1 * Qs || Q < 0 || ee > X - 1 * Qs || ee < 0) return !1;
            let Se;
            if (
              (L() === "WebGPU"
                ? (Se = yield N({
                    x: Math.floor(Q / n.pickBufferScale),
                    y: Math.floor((X - (a + 1) * Qs) / n.pickBufferScale),
                    width: 1,
                    height: 1,
                    data: new Uint8Array(4),
                    framebuffer: n.pickingFBO,
                  }))
                : (Se = T({
                    x: Math.floor(Q / n.pickBufferScale),
                    y: Math.floor((X - (a + 1) * Qs) / n.pickBufferScale),
                    width: 1,
                    height: 1,
                    data: new Uint8Array(4),
                    framebuffer: n.pickingFBO,
                  })),
              (n.pickedColors = Se),
              Se[0] !== 0 || Se[1] !== 0 || Se[2] !== 0)
            ) {
              const ke = K0(Se),
                ut = o.layerPickService.getFeatureById(ke);
              ke !== o.getCurrentPickId() &&
                f === "mousemove" &&
                (f = "mouseenter");
              const Ve = {
                x: l,
                y: a,
                type: f,
                lngLat: h,
                featureId: ke,
                feature: ut,
                target: v,
              };
              ut &&
                ((x = !0),
                o.setCurrentPickId(ke),
                n.triggerHoverOnLayer(o, Ve));
            } else {
              const ke = {
                x: l,
                y: a,
                lngLat: h,
                type:
                  o.getCurrentPickId() !== null && f === "mousemove"
                    ? "mouseout"
                    : "un" + f,
                featureId: null,
                target: v,
                feature: null,
              };
              n.triggerHoverOnLayer(o, mt(mt({}, ke), {}, { type: "unpick" })),
                n.triggerHoverOnLayer(o, ke),
                o.setCurrentPickId(null);
            }
            if (
              (G && o.layerPickService.highlightPickedFeature(Se),
              K &&
                f === "click" &&
                ((E = Se) === null || E === void 0 ? void 0 : E.toString()) !==
                  [0, 0, 0, 0].toString())
            ) {
              const ke = K0(Se);
              o.getCurrentSelectedId() === null ||
              ke !== o.getCurrentSelectedId()
                ? (o.layerPickService.selectFeature(Se),
                  o.setCurrentSelectedId(ke))
                : (o.layerPickService.selectFeature(
                    new Uint8Array([0, 0, 0, 0])
                  ),
                  o.setCurrentSelectedId(null));
            }
            return x;
          });
          return function (o, l) {
            return r.apply(this, arguments);
          };
        })()
      ),
      (this.container = e);
  }
  get mapService() {
    return this.container.mapService;
  }
  get rendererService() {
    return this.container.rendererService;
  }
  get configService() {
    return this.container.globalConfigService;
  }
  get interactionService() {
    return this.container.interactionService;
  }
  get layerService() {
    return this.container.layerService;
  }
  init(e) {
    const {
      createTexture2D: n,
      createFramebuffer: r,
      getViewportSize: o,
    } = this.rendererService;
    let { width: l, height: a } = o();
    (this.pickBufferScale =
      this.configService.getSceneConfig(e).pickBufferScale || 1),
      (l = Math.round(l / this.pickBufferScale)),
      (a = Math.round(a / this.pickBufferScale));
    const h = n({
      width: l,
      height: a,
      usage: m1.RENDER_TARGET,
      label: "Picking Texture",
    });
    (this.pickingFBO = r({ color: h, depth: !0, width: l, height: a })),
      this.interactionService.on(Js.Hover, this.pickingAllLayer.bind(this));
  }
  boxPickLayer(e, n, r) {
    var o = this;
    return bt(function* () {
      const { useFramebufferAsync: l, clear: a } = o.rendererService;
      o.resizePickingFBO(),
        e.hooks.beforePickingEncode.call(),
        yield l(
          o.pickingFBO,
          bt(function* () {
            a({
              framebuffer: o.pickingFBO,
              color: [0, 0, 0, 0],
              stencil: 0,
              depth: 1,
            }),
              e.renderModels({ ispick: !0 });
          })
        ),
        e.hooks.afterPickingEncode.call();
      const h = yield o.pickBox(e, n);
      r(h);
    })();
  }
  pickBox(e, n) {
    var r = this;
    return bt(function* () {
      const [o, l, a, h] = n.map((X) => {
          const G = X < 0 ? 0 : X;
          return Math.floor((G * Qs) / r.pickBufferScale);
        }),
        { readPixelsAsync: f, getViewportSize: v } = r.rendererService,
        { width: E, height: x } = v();
      if (
        o > ((E - 1) * Qs) / r.pickBufferScale ||
        a < 0 ||
        l > ((x - 1) * Qs) / r.pickBufferScale ||
        h < 0
      )
        return [];
      const T = Math.min(E / r.pickBufferScale, a) - o,
        N = Math.min(x / r.pickBufferScale, h) - l,
        I = yield f({
          x: o,
          y: Math.floor(x / r.pickBufferScale - (h + 1)),
          width: T,
          height: N,
          data: new Uint8Array(T * N * 4),
          framebuffer: r.pickingFBO,
        }),
        L = [],
        F = {};
      for (let X = 0; X < I.length / 4; X = X + 1) {
        const G = I.slice(X * 4, X * 4 + 4),
          K = K0(G);
        if (K !== -1 && !F[K]) {
          const Q = e.layerPickService.getFeatureById(K);
          L.push(mt(mt({}, Q), {}, { pickedFeatureIdx: K })), (F[K] = !0);
        }
      }
      return L;
    })();
  }
  handleCursor(e, n) {
    const { cursor: r = "", cursorEnabled: o } = e.getLayerConfig();
    if (o) {
      const a =
          this.mapService.getType() === "amap"
            ? this.mapService.getMapContainer()
            : this.mapService.getMarkerContainer(),
        h = a == null ? void 0 : a.style.getPropertyValue("cursor");
      n === "unmousemove" && h !== ""
        ? a == null || a.style.setProperty("cursor", "")
        : n === "mousemove" && (a == null || a.style.setProperty("cursor", r));
    }
  }
  destroy() {
    this.pickingFBO.destroy(), (this.pickingFBO = null);
  }
  pickingAllLayer(e) {
    var n = this;
    return bt(function* () {
      !n.layerService.needPick(e.type) ||
        !n.isPickingAllLayer() ||
        ((n.alreadyInPicking = !0),
        yield n.pickingLayers(e),
        n.layerService.renderLayers(),
        (n.alreadyInPicking = !1));
    })();
  }
  isPickingAllLayer() {
    return !(
      this.alreadyInPicking ||
      this.layerService.alreadyInRendering ||
      this.interactionService.indragging ||
      !this.layerService.getShaderPickStat()
    );
  }
  resizePickingFBO() {
    const { getViewportSize: e } = this.rendererService,
      { width: n, height: r } = e();
    (this.width !== n || this.height !== r) &&
      (this.pickingFBO.resize({
        width: Math.round(n / this.pickBufferScale),
        height: Math.round(r / this.pickBufferScale),
      }),
      (this.width = n),
      (this.height = r));
  }
  pickingLayers(e) {
    var n = this;
    return bt(function* () {
      const { clear: r, useFramebufferAsync: o } = n.rendererService;
      n.resizePickingFBO();
      const l = n.layerService.getRenderList();
      for (const a of l.filter((h) => h.needPick(e.type)).reverse()) {
        yield o(
          n.pickingFBO,
          bt(function* () {
            r({
              framebuffer: n.pickingFBO,
              color: [0, 0, 0, 0],
              stencil: 0,
              depth: 1,
            }),
              a.layerPickService.pickRender(e);
          })
        );
        const h = yield n.pickFromPickingFBO(a, e);
        if (
          ((n.layerService.pickedLayerId = h ? +a.id : -1),
          h && !a.getLayerConfig().enablePropagation)
        )
          break;
      }
    })();
  }
  triggerHoverOnLayer(e, n) {
    FM(n) && (this.handleCursor(e, n.type), e.emit(n.type, n));
  }
}
class UM {
  constructor(e = !0) {
    R(this, "autoStart", void 0),
      R(this, "startTime", 0),
      R(this, "oldTime", 0),
      R(this, "running", !1),
      R(this, "elapsedTime", 0),
      (this.autoStart = e);
  }
  start() {
    (this.startTime = (typeof performance > "u" ? Date : performance).now()),
      (this.oldTime = this.startTime),
      (this.elapsedTime = 0),
      (this.running = !0);
  }
  stop() {
    this.getElapsedTime(), (this.running = !1), (this.autoStart = !1);
  }
  getElapsedTime() {
    return this.getDelta(), this.elapsedTime;
  }
  getDelta() {
    let e = 0;
    if (this.autoStart && !this.running) return this.start(), 0;
    if (this.running) {
      const n = (typeof performance > "u" ? Date : performance).now();
      (e = (n - this.oldTime) / 1e3),
        (this.oldTime = n),
        (this.elapsedTime += e);
    }
    return e;
  }
}
const { throttle: N5 } = Ka;
class zM extends _s.EventEmitter {
  get renderService() {
    return this.container.rendererService;
  }
  get mapService() {
    return this.container.mapService;
  }
  get debugService() {
    return this.container.debugService;
  }
  constructor(e) {
    super(),
      R(this, "pickedLayerId", -1),
      R(this, "clock", new UM()),
      R(this, "alreadyInRendering", !1),
      R(this, "layers", []),
      R(this, "layerList", []),
      R(this, "layerRenderID", void 0),
      R(this, "sceneInited", !1),
      R(this, "animateInstanceCount", 0),
      R(this, "shaderPicking", !0),
      R(this, "enableRender", !0),
      R(
        this,
        "reRender",
        N5(() => {
          this.renderLayers();
        }, 32)
      ),
      R(
        this,
        "throttleRenderLayers",
        N5(() => {
          this.renderLayers();
        }, 16)
      ),
      (this.container = e);
  }
  needPick(e) {
    return (
      this.updateLayerRenderList(), this.layerList.some((n) => n.needPick(e))
    );
  }
  add(e) {
    this.layers.push(e),
      this.sceneInited &&
        e.init().then(() => {
          this.renderLayers();
        });
  }
  addMask(e) {
    this.sceneInited &&
      e.init().then(() => {
        this.renderLayers();
      });
  }
  initLayers() {
    var e = this;
    return bt(function* () {
      (e.sceneInited = !0),
        e.layers.forEach(
          (function () {
            var n = bt(function* (r) {
              r.startInit || (yield r.init(), e.updateLayerRenderList());
            });
            return function (r) {
              return n.apply(this, arguments);
            };
          })()
        );
    })();
  }
  getSceneInited() {
    return this.sceneInited;
  }
  getRenderList() {
    return this.layerList;
  }
  getLayers() {
    return this.layers;
  }
  getLayer(e) {
    return this.layers.find((n) => n.id === e);
  }
  getLayerByName(e) {
    return this.layers.find((n) => n.name === e);
  }
  remove(e, n) {
    var r = this;
    return bt(function* () {
      n
        ? (n.layerChildren = n.layerChildren.filter((o) => o !== e))
        : (r.layers = r.layers.filter((o) => o !== e)),
        e.destroy(),
        r.reRender(),
        r.emit("layerChange", r.layers);
    })();
  }
  removeAllLayers() {
    var e = this;
    return bt(function* () {
      e.destroy(), e.reRender();
    })();
  }
  setEnableRender(e) {
    this.enableRender = e;
  }
  renderLayers() {
    var e = this;
    return bt(function* () {
      if (e.alreadyInRendering || !e.enableRender) return;
      e.updateLayerRenderList();
      const n = e.debugService.generateRenderUid();
      e.debugService.renderStart(n), (e.alreadyInRendering = !0), e.clear();
      for (const r of e.layerList) r.prerender();
      e.renderService.beginFrame();
      for (const r of e.layerList) {
        const { enableMask: o } = r.getLayerConfig();
        r.masks.filter((l) => l.inited).length > 0 &&
          o &&
          e.renderMask(r.masks),
          r.getLayerConfig().enableMultiPassRenderer
            ? yield r.renderMultiPass()
            : r.render();
      }
      e.renderService.endFrame(),
        e.debugService.renderEnd(n),
        (e.alreadyInRendering = !1);
    })();
  }
  renderMask(e) {
    let n = 0;
    this.renderService.clear({ stencil: 0, depth: 1, framebuffer: null });
    const r = e.length > 1 ? q0.MULTIPLE : q0.SINGLE;
    for (const o of e)
      o.render({ isStencil: !0, stencilType: r, stencilIndex: n++ });
  }
  beforeRenderData(e) {
    var n = this;
    return bt(function* () {
      (yield e.hooks.beforeRenderData.promise()) && n.renderLayers();
    })();
  }
  renderTileLayerMask(e) {
    let n = 0;
    const { enableMask: r = !0 } = e.getLayerConfig();
    let o = e.tileMask ? 1 : 0;
    const l = e.masks.filter((h) => h.inited);
    o = o + (r ? l.length : 1);
    const a = o > 1 ? q0.MULTIPLE : q0.SINGLE;
    if (
      ((e.tileMask || (l.length && r)) &&
        this.renderService.clear({ stencil: 0, depth: 1, framebuffer: null }),
      l.length && r)
    )
      for (const h of l)
        h.render({ isStencil: !0, stencilType: a, stencilIndex: n++ });
    e.tileMask &&
      e.tileMask.render({
        isStencil: !0,
        stencilType: a,
        stencilIndex: n++,
        stencilOperation: pv.OR,
      });
  }
  renderTileLayer(e) {
    var n = this;
    return bt(function* () {
      n.renderTileLayerMask(e),
        e.getLayerConfig().enableMultiPassRenderer
          ? yield e.renderMultiPass()
          : yield e.render();
    })();
  }
  updateLayerRenderList() {
    (this.layerList = []),
      this.layers
        .filter((e) => e.inited)
        .filter((e) => e.isVisible())
        .sort((e, n) => e.zIndex - n.zIndex)
        .forEach((e) => {
          this.layerList.push(e);
        });
  }
  destroy() {
    this.layers.forEach((e) => {
      e.destroy();
    }),
      (this.layers = []),
      (this.layerList = []),
      this.emit("layerChange", this.layers);
  }
  startAnimate() {
    this.animateInstanceCount++ === 0 && (this.clock.start(), this.runRender());
  }
  stopAnimate() {
    --this.animateInstanceCount === 0 && (this.stopRender(), this.clock.stop());
  }
  getOESTextureFloat() {
    return this.renderService.extensionObject.OES_texture_float;
  }
  enableShaderPick() {
    this.shaderPicking = !0;
  }
  disableShaderPick() {
    this.shaderPicking = !1;
  }
  getShaderPickStat() {
    return this.shaderPicking;
  }
  clear() {
    const e = Bi(this.mapService.bgColor);
    this.renderService.clear({
      color: e,
      depth: 1,
      stencil: 0,
      framebuffer: null,
    });
  }
  runRender() {
    this.renderLayers(),
      (this.layerRenderID = window.requestAnimationFrame(
        this.runRender.bind(this)
      ));
  }
  stopRender() {
    window.cancelAnimationFrame(this.layerRenderID);
  }
}
function VM(t, e) {
  if (t == null) return {};
  var n = {};
  for (var r in t)
    if ({}.hasOwnProperty.call(t, r)) {
      if (e.includes(r)) continue;
      n[r] = t[r];
    }
  return n;
}
function pc(t, e) {
  if (t == null) return {};
  var n,
    r,
    o = VM(t, e);
  if (Object.getOwnPropertySymbols) {
    var l = Object.getOwnPropertySymbols(t);
    for (r = 0; r < l.length; r++)
      (n = l[r]),
        e.includes(n) || ({}.propertyIsEnumerable.call(t, n) && (o[n] = t[n]));
  }
  return o;
}
const { isNil: HM } = Ka;
class jM {
  constructor(e) {
    R(this, "name", void 0),
      R(this, "type", void 0),
      R(this, "scale", void 0),
      R(this, "descriptor", void 0),
      R(this, "featureBufferLayout", []),
      R(this, "needRescale", !1),
      R(this, "needRemapping", !1),
      R(this, "needRegenerateVertices", !1),
      R(this, "featureRange", { startIndex: 0, endIndex: 1 / 0 }),
      R(this, "vertexAttribute", void 0),
      R(this, "defaultCallback", (n) => {
        if (n.length === 0) {
          var r;
          return (
            ((r = this.scale) === null || r === void 0
              ? void 0
              : r.defaultValues) || []
          );
        }
        return n.map((o, l) => {
          var a;
          return (
            (a = this.scale) === null || a === void 0
              ? void 0
              : a.scalers[l].func
          )(o);
        });
      }),
      this.setProps(e);
  }
  setProps(e) {
    Object.assign(this, e);
  }
  mapping(e) {
    var n;
    if ((n = this.scale) !== null && n !== void 0 && n.callback) {
      var r;
      const o =
        (r = this.scale) === null || r === void 0 ? void 0 : r.callback(...e);
      if (!HM(o)) return [o];
    }
    return this.defaultCallback(e);
  }
  resetDescriptor() {
    this.descriptor && (this.descriptor.buffer.data = []);
  }
}
const WM = ["buffer", "update", "name"],
  XM = ["buffer", "update", "name"],
  GM = { [H.FLOAT]: 4, [H.UNSIGNED_BYTE]: 1, [H.UNSIGNED_SHORT]: 2 };
class ZM {
  constructor(e) {
    R(this, "attributesAndIndices", void 0),
      R(this, "attributes", []),
      R(this, "triangulation", void 0),
      R(this, "featureLayout", { sizePerElement: 0, elements: [] }),
      (this.rendererService = e);
  }
  registerStyleAttribute(e) {
    let n = this.getLayerStyleAttribute(e.name || "");
    return n ? n.setProps(e) : ((n = new jM(e)), this.attributes.push(n)), n;
  }
  unRegisterStyleAttribute(e) {
    const n = this.attributes.findIndex((r) => r.name === e);
    n > -1 && this.attributes.splice(n, 1);
  }
  updateScaleAttribute(e) {
    this.attributes.forEach((n) => {
      var r;
      const o = n.name,
        l = (r = n.scale) === null || r === void 0 ? void 0 : r.field;
      (e[o] || (l && e[l])) &&
        ((n.needRescale = !0),
        (n.needRemapping = !0),
        (n.needRegenerateVertices = !0));
    });
  }
  updateStyleAttribute(e, n, r) {
    let o = this.getLayerStyleAttribute(e);
    o || (o = this.registerStyleAttribute(mt(mt({}, n), {}, { name: e })));
    const { scale: l } = n;
    l &&
      o &&
      ((o.scale = l),
      (o.needRescale = !0),
      (o.needRemapping = !0),
      (o.needRegenerateVertices = !0),
      r && r.featureRange && (o.featureRange = r.featureRange));
  }
  getLayerStyleAttributes() {
    return this.attributes;
  }
  getLayerStyleAttribute(e) {
    return this.attributes.find((n) => n.name === e);
  }
  getLayerAttributeScale(e) {
    var n;
    const r = this.getLayerStyleAttribute(e),
      o =
        r == null || (n = r.scale) === null || n === void 0
          ? void 0
          : n.scalers;
    return o && o[0] ? o[0].func : null;
  }
  updateAttributeByFeatureRange(e, n, r = 0, o, l) {
    const a = this.attributes.find((h) => h.name === e);
    if (a && a.descriptor) {
      const { descriptor: h } = a,
        { update: f, buffer: v, size: E = 0 } = h,
        x = GM[v.type || H.FLOAT];
      if (f) {
        const { elements: T, sizePerElement: N } = this.featureLayout,
          I = T.slice(r, o);
        if (!I.length) return;
        const { offset: L } = I[0],
          F = L * E * x,
          X = I.map(({ featureIdx: G, vertices: K, normals: Q }, ee) => {
            const Se = K.length / N,
              ue = [];
            for (let ke = 0; ke < Se; ke++) {
              const ut = Q ? Q.slice(ke * 3, ke * 3 + 3) : [];
              ue.push(...f(n[G], G, K.slice(ke * N, ke * N + N), ee, ut));
            }
            return ue;
          }).flat();
        a.vertexAttribute.updateBuffer({ data: X, offset: F }),
          l == null || l.emit(`legend:${e}`, l.getLegend(e));
      }
    }
  }
  createAttributesAndIndices(e, n, r, o) {
    (this.featureLayout = { sizePerElement: 0, elements: [] }),
      n && (this.triangulation = n);
    const l = this.attributes.map((L) => (L.resetDescriptor(), L.descriptor));
    let a = 0,
      h = 0;
    const f = [];
    let v = 3;
    e.forEach((L, F) => {
      const {
        indices: X,
        vertices: G,
        normals: K,
        size: Q,
        indexes: ee,
        count: Se,
      } = this.triangulation(L, r);
      typeof Se == "number" && (h += Se),
        X.forEach((ke) => {
          f.push(ke + a);
        }),
        (v = Q);
      const ue = G.length / Q;
      (this.featureLayout.sizePerElement = v),
        this.featureLayout.elements.push({
          featureIdx: F,
          vertices: G,
          normals: K,
          offset: a,
        }),
        (a += ue);
      for (let ke = 0; ke < ue; ke++) {
        const ut = (K == null ? void 0 : K.slice(ke * 3, ke * 3 + 3)) || [],
          Ve = G.slice(ke * Q, ke * Q + Q);
        let Ae = 0;
        ee && ee[ke] !== void 0 && (Ae = ee[ke]),
          l.forEach((Be, He) => {
            Be &&
              Be.update &&
              Be.buffer.data.push(...Be.update(L, F, Ve, ke, ut, Ae));
          });
      }
    });
    const {
        createAttribute: E,
        createBuffer: x,
        createElements: T,
      } = this.rendererService,
      N = {};
    l.forEach((L, F) => {
      if (L) {
        const { buffer: X, update: G, name: K } = L,
          Q = pc(L, WM),
          ee = E(mt({ buffer: x(X) }, Q));
        (N[L.name || ""] = ee), (this.attributes[F].vertexAttribute = ee);
      }
    });
    const I = T({ data: f, type: H.UNSIGNED_INT, count: f.length });
    return (
      (this.attributesAndIndices = { attributes: N, elements: I, count: h }),
      Object.values(this.attributes)
        .filter((L) => L.scale)
        .forEach((L) => {
          const F = L.name;
          o == null || o.emit(`legend:${F}`, o.getLegend(F));
        }),
      this.attributesAndIndices
    );
  }
  createAttributes(e, n) {
    (this.featureLayout = { sizePerElement: 0, elements: [] }),
      n && (this.triangulation = n);
    const r = this.attributes.map((v) => (v.resetDescriptor(), v.descriptor));
    let o = 0,
      l = 3;
    e.forEach((v, E) => {
      const {
        indices: x,
        vertices: T,
        normals: N,
        size: I,
        indexes: L,
      } = this.triangulation(v);
      x.forEach((X) => {}), (l = I);
      const F = T.length / I;
      (this.featureLayout.sizePerElement = l),
        this.featureLayout.elements.push({
          featureIdx: E,
          vertices: T,
          normals: N,
          offset: o,
        }),
        (o += F);
      for (let X = 0; X < F; X++) {
        const G = (N == null ? void 0 : N.slice(X * 3, X * 3 + 3)) || [],
          K = T.slice(X * I, X * I + I);
        let Q = 0;
        L && L[X] !== void 0 && (Q = L[X]),
          r.forEach((ee, Se) => {
            ee &&
              ee.update &&
              ee.buffer.data.push(...ee.update(v, E, K, X, G, Q));
          });
      }
    });
    const { createAttribute: a, createBuffer: h } = this.rendererService,
      f = {};
    return (
      r.forEach((v, E) => {
        if (v) {
          const { buffer: x, update: T, name: N } = v,
            I = pc(v, XM),
            L = a(mt({ buffer: h(x) }, I));
          (f[v.name || ""] = L), (this.attributes[E].vertexAttribute = L);
        }
      }),
      { attributes: f }
    );
  }
  clearAllAttributes() {
    var e;
    this.attributes.forEach((n) => {
      n.vertexAttribute && n.vertexAttribute.destroy();
    }),
      (e = this.attributesAndIndices) === null ||
        e === void 0 ||
        e.elements.destroy(),
      (this.attributes = []);
  }
}
function a8(t, e, n, r) {
  function o(l) {
    return l instanceof n
      ? l
      : new n(function (a) {
          a(l);
        });
  }
  return new (n || (n = Promise))(function (l, a) {
    function h(E) {
      try {
        v(r.next(E));
      } catch (x) {
        a(x);
      }
    }
    function f(E) {
      try {
        v(r.throw(E));
      } catch (x) {
        a(x);
      }
    }
    function v(E) {
      E.done ? l(E.value) : o(E.value).then(h, f);
    }
    v((r = r.apply(t, [])).next());
  });
}
function o8(t, e) {
  var n = {
      label: 0,
      sent: function () {
        if (l[0] & 1) throw l[1];
        return l[1];
      },
      trys: [],
      ops: [],
    },
    r,
    o,
    l,
    a;
  return (
    (a = { next: h(0), throw: h(1), return: h(2) }),
    typeof Symbol == "function" &&
      (a[Symbol.iterator] = function () {
        return this;
      }),
    a
  );
  function h(v) {
    return function (E) {
      return f([v, E]);
    };
  }
  function f(v) {
    if (r) throw new TypeError("Generator is already executing.");
    for (; n; )
      try {
        if (
          ((r = 1),
          o &&
            (l =
              v[0] & 2
                ? o.return
                : v[0]
                ? o.throw || ((l = o.return) && l.call(o), 0)
                : o.next) &&
            !(l = l.call(o, v[1])).done)
        )
          return l;
        switch (((o = 0), l && (v = [v[0] & 2, l.value]), v[0])) {
          case 0:
          case 1:
            l = v;
            break;
          case 4:
            return n.label++, { value: v[1], done: !1 };
          case 5:
            n.label++, (o = v[1]), (v = [0]);
            continue;
          case 7:
            (v = n.ops.pop()), n.trys.pop();
            continue;
          default:
            if (
              ((l = n.trys),
              !(l = l.length > 0 && l[l.length - 1]) &&
                (v[0] === 6 || v[0] === 2))
            ) {
              n = 0;
              continue;
            }
            if (v[0] === 3 && (!l || (v[1] > l[0] && v[1] < l[3]))) {
              n.label = v[1];
              break;
            }
            if (v[0] === 6 && n.label < l[1]) {
              (n.label = l[1]), (l = v);
              break;
            }
            if (l && n.label < l[2]) {
              (n.label = l[2]), n.ops.push(v);
              break;
            }
            l[2] && n.ops.pop(), n.trys.pop();
            continue;
        }
        v = e.call(t, n);
      } catch (E) {
        (v = [6, E]), (o = 0);
      } finally {
        r = l = 0;
      }
    if (v[0] & 5) throw v[1];
    return { value: v[0] ? v[1] : void 0, done: !0 };
  }
}
function E3(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t),
    o,
    l = [],
    a;
  try {
    for (; (e === void 0 || e-- > 0) && !(o = r.next()).done; ) l.push(o.value);
  } catch (h) {
    a = { error: h };
  } finally {
    try {
      o && !o.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return l;
}
function A3(t, e, n) {
  if (arguments.length === 2)
    for (var r = 0, o = e.length, l; r < o; r++)
      (l || !(r in e)) &&
        (l || (l = Array.prototype.slice.call(e, 0, r)), (l[r] = e[r]));
  return t.concat(l || Array.prototype.slice.call(e));
}
function s8(t) {
  return t && t.__esModule && Object.prototype.hasOwnProperty.call(t, "default")
    ? t.default
    : t;
}
var s_ = { exports: {} },
  Og = { exports: {} },
  g1 = { exports: {} };
(function (t, e) {
  Object.defineProperty(e, "__esModule", { value: !0 }), (e.default = n);
  function n(r) {
    return (
      r && typeof r.length == "number" && r.length >= 0 && r.length % 1 === 0
    );
  }
  t.exports = e.default;
})(g1, g1.exports);
var al = {},
  l_ = { exports: {} },
  c_ = { exports: {} };
(function (t, e) {
  Object.defineProperty(e, "__esModule", { value: !0 }),
    (e.default = function (n) {
      return function () {
        for (var r = [], o = arguments.length; o--; ) r[o] = arguments[o];
        var l = r.pop();
        return n.call(this, r, l);
      };
    }),
    (t.exports = e.default);
})(c_, c_.exports);
var o0 = {};
Object.defineProperty(o0, "__esModule", { value: !0 });
o0.fallback = l8;
o0.wrap = c8;
var YM = (o0.hasQueueMicrotask =
    typeof queueMicrotask == "function" && queueMicrotask),
  qM = (o0.hasSetImmediate = typeof setImmediate == "function" && setImmediate),
  $M = (o0.hasNextTick =
    typeof process == "object" && typeof process.nextTick == "function");
function l8(t) {
  setTimeout(t, 0);
}
function c8(t) {
  return function (e) {
    for (var n = [], r = arguments.length - 1; r-- > 0; )
      n[r] = arguments[r + 1];
    return t(function () {
      return e.apply(void 0, n);
    });
  };
}
var Gf;
YM
  ? (Gf = queueMicrotask)
  : qM
  ? (Gf = setImmediate)
  : $M
  ? (Gf = process.nextTick)
  : (Gf = l8);
o0.default = c8(Gf);
(function (t, e) {
  Object.defineProperty(e, "__esModule", { value: !0 }), (e.default = f);
  var n = c_.exports,
    r = h(n),
    o = o0,
    l = h(o),
    a = al;
  function h(x) {
    return x && x.__esModule ? x : { default: x };
  }
  function f(x) {
    return (0, a.isAsync)(x)
      ? function () {
          for (var T = [], N = arguments.length; N--; ) T[N] = arguments[N];
          var I = T.pop(),
            L = x.apply(this, T);
          return v(L, I);
        }
      : (0, r.default)(function (T, N) {
          var I;
          try {
            I = x.apply(this, T);
          } catch (L) {
            return N(L);
          }
          if (I && typeof I.then == "function") return v(I, N);
          N(null, I);
        });
  }
  function v(x, T) {
    return x.then(
      function (N) {
        E(T, null, N);
      },
      function (N) {
        E(T, N && N.message ? N : new Error(N));
      }
    );
  }
  function E(x, T, N) {
    try {
      x(T, N);
    } catch (I) {
      (0, l.default)(function (L) {
        throw L;
      }, I);
    }
  }
  t.exports = e.default;
})(l_, l_.exports);
Object.defineProperty(al, "__esModule", { value: !0 });
al.isAsyncIterable = al.isAsyncGenerator = al.isAsync = void 0;
var KM = l_.exports,
  QM = JM(KM);
function JM(t) {
  return t && t.__esModule ? t : { default: t };
}
function u8(t) {
  return t[Symbol.toStringTag] === "AsyncFunction";
}
function eP(t) {
  return t[Symbol.toStringTag] === "AsyncGenerator";
}
function tP(t) {
  return typeof t[Symbol.asyncIterator] == "function";
}
function nP(t) {
  if (typeof t != "function") throw new Error("expected a function");
  return u8(t) ? (0, QM.default)(t) : t;
}
al.default = nP;
al.isAsync = u8;
al.isAsyncGenerator = eP;
al.isAsyncIterable = tP;
var eh = { exports: {} };
(function (t, e) {
  Object.defineProperty(e, "__esModule", { value: !0 }), (e.default = n);
  function n(r, o) {
    if ((o === void 0 && (o = r.length), !o))
      throw new Error("arity is undefined");
    function l() {
      for (var a = this, h = [], f = arguments.length; f--; )
        h[f] = arguments[f];
      return typeof h[o - 1] == "function"
        ? r.apply(this, h)
        : new Promise(function (v, E) {
            (h[o - 1] = function (x) {
              for (var T = [], N = arguments.length - 1; N-- > 0; )
                T[N] = arguments[N + 1];
              if (x) return E(x);
              v(T.length > 1 ? T : T[0]);
            }),
              r.apply(a, h);
          });
    }
    return l;
  }
  t.exports = e.default;
})(eh, eh.exports);
(function (t, e) {
  Object.defineProperty(e, "__esModule", { value: !0 });
  var n = g1.exports,
    r = f(n),
    o = al,
    l = f(o),
    a = eh.exports,
    h = f(a);
  function f(v) {
    return v && v.__esModule ? v : { default: v };
  }
  (e.default = (0, h.default)(function (v, E, x) {
    var T = (0, r.default)(E) ? [] : {};
    v(
      E,
      function (N, I, L) {
        (0, l.default)(N)(function (F) {
          for (var X, G = [], K = arguments.length - 1; K-- > 0; )
            G[K] = arguments[K + 1];
          G.length < 2 && ((X = G), (G = X[0])), (T[I] = G), L(F);
        });
      },
      function (N) {
        return x(N, T);
      }
    );
  }, 3)),
    (t.exports = e.default);
})(Og, Og.exports);
var u_ = { exports: {} },
  Lg = { exports: {} },
  d_ = { exports: {} },
  v1 = { exports: {} };
(function (t, e) {
  Object.defineProperty(e, "__esModule", { value: !0 }), (e.default = n);
  function n(r) {
    function o() {
      for (var l = [], a = arguments.length; a--; ) l[a] = arguments[a];
      if (r !== null) {
        var h = r;
        (r = null), h.apply(this, l);
      }
    }
    return Object.assign(o, r), o;
  }
  t.exports = e.default;
})(v1, v1.exports);
var h_ = { exports: {} },
  p_ = { exports: {} };
(function (t, e) {
  Object.defineProperty(e, "__esModule", { value: !0 }),
    (e.default = function (n) {
      return n[Symbol.iterator] && n[Symbol.iterator]();
    }),
    (t.exports = e.default);
})(p_, p_.exports);
(function (t, e) {
  Object.defineProperty(e, "__esModule", { value: !0 }), (e.default = E);
  var n = g1.exports,
    r = a(n),
    o = p_.exports,
    l = a(o);
  function a(x) {
    return x && x.__esModule ? x : { default: x };
  }
  function h(x) {
    var T = -1,
      N = x.length;
    return function () {
      return ++T < N ? { value: x[T], key: T } : null;
    };
  }
  function f(x) {
    var T = -1;
    return function () {
      var I = x.next();
      return I.done ? null : (T++, { value: I.value, key: T });
    };
  }
  function v(x) {
    var T = x ? Object.keys(x) : [],
      N = -1,
      I = T.length;
    return function L() {
      var F = T[++N];
      return F === "__proto__" ? L() : N < I ? { value: x[F], key: F } : null;
    };
  }
  function E(x) {
    if ((0, r.default)(x)) return h(x);
    var T = (0, l.default)(x);
    return T ? f(T) : v(x);
  }
  t.exports = e.default;
})(h_, h_.exports);
var _1 = { exports: {} };
(function (t, e) {
  Object.defineProperty(e, "__esModule", { value: !0 }), (e.default = n);
  function n(r) {
    return function () {
      for (var o = [], l = arguments.length; l--; ) o[l] = arguments[l];
      if (r === null) throw new Error("Callback was already called.");
      var a = r;
      (r = null), a.apply(this, o);
    };
  }
  t.exports = e.default;
})(_1, _1.exports);
var f_ = { exports: {} },
  y1 = { exports: {} };
(function (t, e) {
  Object.defineProperty(e, "__esModule", { value: !0 });
  var n = {};
  (e.default = n), (t.exports = e.default);
})(y1, y1.exports);
(function (t, e) {
  Object.defineProperty(e, "__esModule", { value: !0 }), (e.default = l);
  var n = y1.exports,
    r = o(n);
  function o(a) {
    return a && a.__esModule ? a : { default: a };
  }
  function l(a, h, f, v) {
    var E = !1,
      x = !1,
      T = !1,
      N = 0,
      I = 0;
    function L() {
      N >= h ||
        T ||
        E ||
        ((T = !0),
        a
          .next()
          .then(function (G) {
            var K = G.value,
              Q = G.done;
            if (!(x || E)) {
              if (((T = !1), Q)) {
                (E = !0), N <= 0 && v(null);
                return;
              }
              N++, f(K, I, F), I++, L();
            }
          })
          .catch(X));
    }
    function F(G, K) {
      if (((N -= 1), !x)) {
        if (G) return X(G);
        if (G === !1) {
          (E = !0), (x = !0);
          return;
        }
        if (K === r.default || (E && N <= 0)) return (E = !0), v(null);
        L();
      }
    }
    function X(G) {
      x || ((T = !1), (E = !0), v(G));
    }
    L();
  }
  t.exports = e.default;
})(f_, f_.exports);
(function (t, e) {
  Object.defineProperty(e, "__esModule", { value: !0 });
  var n = v1.exports,
    r = N(n),
    o = h_.exports,
    l = N(o),
    a = _1.exports,
    h = N(a),
    f = al,
    v = f_.exports,
    E = N(v),
    x = y1.exports,
    T = N(x);
  function N(I) {
    return I && I.__esModule ? I : { default: I };
  }
  (e.default = function (I) {
    return function (L, F, X) {
      if (((X = (0, r.default)(X)), I <= 0))
        throw new RangeError("concurrency limit cannot be less than 1");
      if (!L) return X(null);
      if ((0, f.isAsyncGenerator)(L)) return (0, E.default)(L, I, F, X);
      if ((0, f.isAsyncIterable)(L))
        return (0, E.default)(L[Symbol.asyncIterator](), I, F, X);
      var G = (0, l.default)(L),
        K = !1,
        Q = !1,
        ee = 0,
        Se = !1;
      function ue(ut, Ve) {
        if (!Q)
          if (((ee -= 1), ut)) (K = !0), X(ut);
          else if (ut === !1) (K = !0), (Q = !0);
          else {
            if (Ve === T.default || (K && ee <= 0)) return (K = !0), X(null);
            Se || ke();
          }
      }
      function ke() {
        for (Se = !0; ee < I && !K; ) {
          var ut = G();
          if (ut === null) {
            (K = !0), ee <= 0 && X(null);
            return;
          }
          (ee += 1), F(ut.value, ut.key, (0, h.default)(ue));
        }
        Se = !1;
      }
      ke();
    };
  }),
    (t.exports = e.default);
})(d_, d_.exports);
(function (t, e) {
  Object.defineProperty(e, "__esModule", { value: !0 });
  var n = d_.exports,
    r = f(n),
    o = al,
    l = f(o),
    a = eh.exports,
    h = f(a);
  function f(E) {
    return E && E.__esModule ? E : { default: E };
  }
  function v(E, x, T, N) {
    return (0, r.default)(x)(E, (0, l.default)(T), N);
  }
  (e.default = (0, h.default)(v, 4)), (t.exports = e.default);
})(Lg, Lg.exports);
(function (t, e) {
  Object.defineProperty(e, "__esModule", { value: !0 });
  var n = Lg.exports,
    r = a(n),
    o = eh.exports,
    l = a(o);
  function a(f) {
    return f && f.__esModule ? f : { default: f };
  }
  function h(f, v, E) {
    return (0, r.default)(f, 1, v, E);
  }
  (e.default = (0, l.default)(h, 3)), (t.exports = e.default);
})(u_, u_.exports);
(function (t, e) {
  Object.defineProperty(e, "__esModule", { value: !0 }), (e.default = h);
  var n = Og.exports,
    r = a(n),
    o = u_.exports,
    l = a(o);
  function a(f) {
    return f && f.__esModule ? f : { default: f };
  }
  function h(f, v) {
    return (0, r.default)(l.default, f, v);
  }
  t.exports = e.default;
})(s_, s_.exports);
var mv = s8(s_.exports),
  mu = (function () {
    function t() {
      (this.args = []), (this.tasks = []);
    }
    return (
      (t.prototype.call = function () {
        for (var e = arguments, n = [], r = 0; r < arguments.length; r++)
          n[r] = e[r];
        return (this.args = n), mv(this.tasks);
      }),
      (t.prototype.tap = function (e, n) {
        var r = this;
        this.tasks.push(function (o) {
          n.apply(void 0, A3([], E3(r.args), !1)), o(null, e);
        });
      }),
      t
    );
  })(),
  R5 = { exports: {} },
  m_ = { exports: {} };
(function (t, e) {
  Object.defineProperty(e, "__esModule", { value: !0 });
  var n = g1.exports,
    r = F(n),
    o = y1.exports,
    l = F(o),
    a = Lg.exports,
    h = F(a),
    f = v1.exports,
    v = F(f),
    E = _1.exports,
    x = F(E),
    T = al,
    N = F(T),
    I = eh.exports,
    L = F(I);
  function F(Q) {
    return Q && Q.__esModule ? Q : { default: Q };
  }
  function X(Q, ee, Se) {
    Se = (0, v.default)(Se);
    var ue = 0,
      ke = 0,
      ut = Q.length,
      Ve = !1;
    ut === 0 && Se(null);
    function Ae(Be, He) {
      Be === !1 && (Ve = !0),
        Ve !== !0 &&
          (Be ? Se(Be) : (++ke === ut || He === l.default) && Se(null));
    }
    for (; ue < ut; ue++) ee(Q[ue], ue, (0, x.default)(Ae));
  }
  function G(Q, ee, Se) {
    return (0, h.default)(Q, 1 / 0, ee, Se);
  }
  function K(Q, ee, Se) {
    var ue = (0, r.default)(Q) ? X : G;
    return ue(Q, (0, N.default)(ee), Se);
  }
  (e.default = (0, L.default)(K, 3)), (t.exports = e.default);
})(m_, m_.exports);
(function (t, e) {
  Object.defineProperty(e, "__esModule", { value: !0 }), (e.default = h);
  var n = m_.exports,
    r = a(n),
    o = Og.exports,
    l = a(o);
  function a(f) {
    return f && f.__esModule ? f : { default: f };
  }
  function h(f, v) {
    return (0, l.default)(r.default, f, v);
  }
  t.exports = e.default;
})(R5, R5.exports);
var g_ = { exports: {} };
(function (t, e) {
  Object.defineProperty(e, "__esModule", { value: !0 });
  var n = v1.exports,
    r = E(n),
    o = _1.exports,
    l = E(o),
    a = al,
    h = E(a),
    f = eh.exports,
    v = E(f);
  function E(T) {
    return T && T.__esModule ? T : { default: T };
  }
  function x(T, N) {
    if (((N = (0, r.default)(N)), !Array.isArray(T)))
      return N(
        new Error("First argument to waterfall must be an array of functions")
      );
    if (!T.length) return N();
    var I = 0;
    function L(X) {
      var G = (0, h.default)(T[I++]);
      G.apply(void 0, X.concat([(0, l.default)(F)]));
    }
    function F(X) {
      for (var G = [], K = arguments.length - 1; K-- > 0; )
        G[K] = arguments[K + 1];
      if (X !== !1) {
        if (X || I === T.length) return N.apply(void 0, [X].concat(G));
        L(G);
      }
    }
    L([]);
  }
  (e.default = (0, v.default)(x)), (t.exports = e.default);
})(g_, g_.exports);
var rP = s8(g_.exports),
  I5 = (function () {
    function t() {
      this.tasks = [];
    }
    return (
      (t.prototype.call = function () {
        return mv(this.tasks);
      }),
      (t.prototype.tap = function (e, n) {
        this.tasks.push(function (r) {
          var o = n();
          r(o, e);
        });
      }),
      t
    );
  })(),
  iP = (function () {
    function t() {
      (this.args = []), (this.tasks = []);
    }
    return (
      (t.prototype.promise = function () {
        for (var e = arguments, n = [], r = 0; r < arguments.length; r++)
          n[r] = e[r];
        return (this.args = n), mv(this.tasks);
      }),
      (t.prototype.tapPromise = function (e, n) {
        var r = this;
        this.tasks.push(function (o) {
          return a8(r, void 0, void 0, function () {
            return o8(this, function (l) {
              switch (l.label) {
                case 0:
                  return [4, n.apply(void 0, A3([], E3(this.args), !1))];
                case 1:
                  return l.sent(), o(null, e), [2];
              }
            });
          });
        });
      }),
      t
    );
  })(),
  aP = (function () {
    function t() {
      (this.args = []), (this.tasks = []);
    }
    return (
      (t.prototype.promise = function () {
        for (var e = arguments, n = [], r = 0; r < arguments.length; r++)
          n[r] = e[r];
        return (this.args = n), mv(this.tasks);
      }),
      (t.prototype.tapPromise = function (e, n) {
        var r = this;
        this.tasks.push(function (o) {
          return a8(r, void 0, void 0, function () {
            var l;
            return o8(this, function (a) {
              switch (a.label) {
                case 0:
                  return [4, n.apply(void 0, A3([], E3(this.args), !1))];
                case 1:
                  return (l = a.sent()), o(l, e), [2];
              }
            });
          });
        });
      }),
      t
    );
  })(),
  oP = (function () {
    function t() {
      this.tasks = [];
    }
    return (
      (t.prototype.promise = function () {
        return rP(this.tasks);
      }),
      (t.prototype.tapPromise = function (e, n) {
        this.tasks.length === 0
          ? this.tasks.push(function (r) {
              n().then(function (o) {
                r(null, o);
              });
            })
          : this.tasks.push(function (r, o) {
              n(r).then(function (l) {
                o(null, l);
              });
            });
      }),
      t
    );
  })(),
  d8 = { exports: {} },
  sP = (d8.exports = {});
sP.forEach = function (t, e) {
  for (var n = 0; n < t.length; n++) {
    var r = e(t[n]);
    if (r) return r;
  }
};
var h8 = d8.exports,
  lP = function (t) {
    var e = t.stateHandler.getState;
    function n(a) {
      var h = e(a);
      return h && !!h.isDetectable;
    }
    function r(a) {
      e(a).isDetectable = !0;
    }
    function o(a) {
      return !!e(a).busy;
    }
    function l(a, h) {
      e(a).busy = !!h;
    }
    return { isDetectable: n, markAsDetectable: r, isBusy: o, markBusy: l };
  },
  cP = function (t) {
    var e = {};
    function n(a) {
      var h = t.get(a);
      return h === void 0 ? [] : e[h] || [];
    }
    function r(a, h) {
      var f = t.get(a);
      e[f] || (e[f] = []), e[f].push(h);
    }
    function o(a, h) {
      for (var f = n(a), v = 0, E = f.length; v < E; ++v)
        if (f[v] === h) {
          f.splice(v, 1);
          break;
        }
    }
    function l(a) {
      var h = n(a);
      h && (h.length = 0);
    }
    return { get: n, add: r, removeListener: o, removeAllListeners: l };
  },
  uP = function () {
    var t = 1;
    function e() {
      return t++;
    }
    return { generate: e };
  },
  dP = function (t) {
    var e = t.idGenerator,
      n = t.stateHandler.getState;
    function r(l) {
      var a = n(l);
      return a && a.id !== void 0 ? a.id : null;
    }
    function o(l) {
      var a = n(l);
      if (!a)
        throw new Error(
          "setId required the element to have a resize detection state."
        );
      var h = e.generate();
      return (a.id = h), h;
    }
    return { get: r, set: o };
  },
  hP = function (t) {
    function e() {}
    var n = { log: e, warn: e, error: e };
    if (!t && window.console) {
      var r = function (o, l) {
        o[l] = function () {
          var h = console[l];
          if (h.apply) h.apply(console, arguments);
          else for (var f = 0; f < arguments.length; f++) h(arguments[f]);
        };
      };
      r(n, "log"), r(n, "warn"), r(n, "error");
    }
    return n;
  },
  p8 = { exports: {} },
  f8 = (p8.exports = {});
f8.isIE = function (t) {
  function e() {
    var r = navigator.userAgent.toLowerCase();
    return (
      r.indexOf("msie") !== -1 ||
      r.indexOf("trident") !== -1 ||
      r.indexOf(" edge/") !== -1
    );
  }
  if (!e()) return !1;
  if (!t) return !0;
  var n = (function () {
    var r,
      o = 3,
      l = document.createElement("div"),
      a = l.getElementsByTagName("i");
    do l.innerHTML = "<!--[if gt IE " + ++o + "]><i></i><![endif]-->";
    while (a[0]);
    return o > 4 ? o : r;
  })();
  return t === n;
};
f8.isLegacyOpera = function () {
  return !!window.opera;
};
var m8 = p8.exports,
  g8 = { exports: {} },
  pP = (g8.exports = {});
pP.getOption = fP;
function fP(t, e, n) {
  var r = t[e];
  return r == null && n !== void 0 ? n : r;
}
var mP = g8.exports,
  M5 = mP,
  gP = function (e) {
    e = e || {};
    var n = e.reporter,
      r = M5.getOption(e, "async", !0),
      o = M5.getOption(e, "auto", !0);
    o &&
      !r &&
      (n &&
        n.warn(
          "Invalid options combination. auto=true and async=false is invalid. Setting async=true."
        ),
      (r = !0));
    var l = P5(),
      a,
      h = !1;
    function f(I, L) {
      !h && o && r && l.size() === 0 && x(), l.add(I, L);
    }
    function v() {
      for (h = !0; l.size(); ) {
        var I = l;
        (l = P5()), I.process();
      }
      h = !1;
    }
    function E(I) {
      h || (I === void 0 && (I = r), a && (T(a), (a = null)), I ? x() : v());
    }
    function x() {
      a = N(v);
    }
    function T(I) {
      var L = clearTimeout;
      return L(I);
    }
    function N(I) {
      var L = function (F) {
        return setTimeout(F, 0);
      };
      return L(I);
    }
    return { add: f, force: E };
  };
function P5() {
  var t = {},
    e = 0,
    n = 0,
    r = 0;
  function o(h, f) {
    f || ((f = h), (h = 0)),
      h > n ? (n = h) : h < r && (r = h),
      t[h] || (t[h] = []),
      t[h].push(f),
      e++;
  }
  function l() {
    for (var h = r; h <= n; h++)
      for (var f = t[h], v = 0; v < f.length; v++) {
        var E = f[v];
        E();
      }
  }
  function a() {
    return e;
  }
  return { add: o, process: l, size: a };
}
var T3 = "_erd";
function vP(t) {
  return (t[T3] = {}), v8(t);
}
function v8(t) {
  return t[T3];
}
function _P(t) {
  delete t[T3];
}
var yP = { initState: vP, getState: v8, cleanState: _P },
  Tf = m8,
  xP = function (t) {
    t = t || {};
    var e = t.reporter,
      n = t.batchProcessor,
      r = t.stateHandler.getState;
    if (!e) throw new Error("Missing required dependency: reporter.");
    function o(v, E) {
      function x() {
        E(v);
      }
      if (Tf.isIE(8))
        (r(v).object = { proxy: x }), v.attachEvent("onresize", x);
      else {
        var T = h(v);
        if (!T) throw new Error("Element is not detectable by this strategy.");
        T.contentDocument.defaultView.addEventListener("resize", x);
      }
    }
    function l(v) {
      var E = t.important ? " !important; " : "; ";
      return (v.join(E) + E).trim();
    }
    function a(v, E, x) {
      x || ((x = E), (E = v), (v = null)), (v = v || {}), v.debug;
      function T(N, I) {
        var L = l([
            "display: block",
            "position: absolute",
            "top: 0",
            "left: 0",
            "width: 100%",
            "height: 100%",
            "border: none",
            "padding: 0",
            "margin: 0",
            "opacity: 0",
            "z-index: -1000",
            "pointer-events: none",
          ]),
          F = !1,
          X = window.getComputedStyle(N),
          G = N.offsetWidth,
          K = N.offsetHeight;
        r(N).startSize = { width: G, height: K };
        function Q() {
          function ee() {
            if (X.position === "static") {
              N.style.setProperty(
                "position",
                "relative",
                v.important ? "important" : ""
              );
              var ke = function (ut, Ve, Ae, Be) {
                function He(Ut) {
                  return Ut.replace(/[^-\d\.]/g, "");
                }
                var nt = Ae[Be];
                nt !== "auto" &&
                  He(nt) !== "0" &&
                  (ut.warn(
                    "An element that is positioned static has style." +
                      Be +
                      "=" +
                      nt +
                      " which is ignored due to the static positioning. The element will need to be positioned relative, so the style." +
                      Be +
                      " will be set to 0. Element: ",
                    Ve
                  ),
                  Ve.style.setProperty(
                    Be,
                    "0",
                    v.important ? "important" : ""
                  ));
              };
              ke(e, N, X, "top"),
                ke(e, N, X, "right"),
                ke(e, N, X, "bottom"),
                ke(e, N, X, "left");
            }
          }
          function Se() {
            F || ee();
            function ke(Ve, Ae) {
              if (!Ve.contentDocument) {
                var Be = r(Ve);
                Be.checkForObjectDocumentTimeoutId &&
                  window.clearTimeout(Be.checkForObjectDocumentTimeoutId),
                  (Be.checkForObjectDocumentTimeoutId = setTimeout(function () {
                    (Be.checkForObjectDocumentTimeoutId = 0), ke(Ve, Ae);
                  }, 100));
                return;
              }
              Ae(Ve.contentDocument);
            }
            var ut = this;
            ke(ut, function (Ae) {
              I(N);
            });
          }
          X.position !== "" && (ee(), (F = !0));
          var ue = document.createElement("object");
          (ue.style.cssText = L),
            (ue.tabIndex = -1),
            (ue.type = "text/html"),
            ue.setAttribute("aria-hidden", "true"),
            (ue.onload = Se),
            Tf.isIE() || (ue.data = "about:blank"),
            r(N) &&
              (N.appendChild(ue),
              (r(N).object = ue),
              Tf.isIE() && (ue.data = "about:blank"));
        }
        n ? n.add(Q) : Q();
      }
      Tf.isIE(8) ? x(E) : T(E, x);
    }
    function h(v) {
      return r(v).object;
    }
    function f(v) {
      if (r(v)) {
        var E = h(v);
        E &&
          (Tf.isIE(8) ? v.detachEvent("onresize", E.proxy) : v.removeChild(E),
          r(v).checkForObjectDocumentTimeoutId &&
            window.clearTimeout(r(v).checkForObjectDocumentTimeoutId),
          delete r(v).object);
      }
    }
    return { makeDetectable: a, addListener: o, uninstall: f };
  },
  bP = h8.forEach,
  EP = function (t) {
    t = t || {};
    var e = t.reporter,
      n = t.batchProcessor,
      r = t.stateHandler.getState;
    t.stateHandler.hasState;
    var o = t.idHandler;
    if (!n) throw new Error("Missing required dependency: batchProcessor");
    if (!e) throw new Error("Missing required dependency: reporter.");
    var l = E(),
      a = "erd_scroll_detection_scrollbar_style",
      h = "erd_scroll_detection_container";
    function f(Q) {
      x(Q, a, h);
    }
    f(window.document);
    function v(Q) {
      var ee = t.important ? " !important; " : "; ";
      return (Q.join(ee) + ee).trim();
    }
    function E() {
      var Q = 500,
        ee = 500,
        Se = document.createElement("div");
      Se.style.cssText = v([
        "position: absolute",
        "width: " + Q * 2 + "px",
        "height: " + ee * 2 + "px",
        "visibility: hidden",
        "margin: 0",
        "padding: 0",
      ]);
      var ue = document.createElement("div");
      (ue.style.cssText = v([
        "position: absolute",
        "width: " + Q + "px",
        "height: " + ee + "px",
        "overflow: scroll",
        "visibility: none",
        "top: " + -Q * 3 + "px",
        "left: " + -ee * 3 + "px",
        "visibility: hidden",
        "margin: 0",
        "padding: 0",
      ])),
        ue.appendChild(Se),
        document.body.insertBefore(ue, document.body.firstChild);
      var ke = Q - ue.clientWidth,
        ut = ee - ue.clientHeight;
      return document.body.removeChild(ue), { width: ke, height: ut };
    }
    function x(Q, ee, Se) {
      function ue(Ae, Be) {
        Be =
          Be ||
          function (nt) {
            Q.head.appendChild(nt);
          };
        var He = Q.createElement("style");
        return (He.innerHTML = Ae), (He.id = ee), Be(He), He;
      }
      if (!Q.getElementById(ee)) {
        var ke = Se + "_animation",
          ut = Se + "_animation_active",
          Ve = `/* Created by the element-resize-detector library. */
`;
        (Ve +=
          "." +
          Se +
          " > div::-webkit-scrollbar { " +
          v(["display: none"]) +
          ` }

`),
          (Ve +=
            "." +
            ut +
            " { " +
            v([
              "-webkit-animation-duration: 0.1s",
              "animation-duration: 0.1s",
              "-webkit-animation-name: " + ke,
              "animation-name: " + ke,
            ]) +
            ` }
`),
          (Ve +=
            "@-webkit-keyframes " +
            ke +
            ` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`),
          (Ve +=
            "@keyframes " +
            ke +
            " { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }"),
          ue(Ve);
      }
    }
    function T(Q) {
      Q.className += " " + h + "_animation_active";
    }
    function N(Q, ee, Se) {
      if (Q.addEventListener) Q.addEventListener(ee, Se);
      else if (Q.attachEvent) Q.attachEvent("on" + ee, Se);
      else return e.error("[scroll] Don't know how to add event listeners.");
    }
    function I(Q, ee, Se) {
      if (Q.removeEventListener) Q.removeEventListener(ee, Se);
      else if (Q.detachEvent) Q.detachEvent("on" + ee, Se);
      else return e.error("[scroll] Don't know how to remove event listeners.");
    }
    function L(Q) {
      return r(Q).container.childNodes[0].childNodes[0].childNodes[0];
    }
    function F(Q) {
      return r(Q).container.childNodes[0].childNodes[0].childNodes[1];
    }
    function X(Q, ee) {
      var Se = r(Q).listeners;
      if (!Se.push)
        throw new Error(
          "Cannot add listener to an element that is not detectable."
        );
      r(Q).listeners.push(ee);
    }
    function G(Q, ee, Se) {
      Se || ((Se = ee), (ee = Q), (Q = null)), (Q = Q || {});
      function ue() {
        if (Q.debug) {
          var qe = Array.prototype.slice.call(arguments);
          if ((qe.unshift(o.get(ee), "Scroll: "), e.log.apply))
            e.log.apply(null, qe);
          else for (var $t = 0; $t < qe.length; $t++) e.log(qe[$t]);
        }
      }
      function ke(qe) {
        function $t(Cn) {
          var St = Cn.getRootNode && Cn.getRootNode().contains(Cn);
          return (
            Cn === Cn.ownerDocument.body ||
            Cn.ownerDocument.body.contains(Cn) ||
            St
          );
        }
        return !$t(qe) || window.getComputedStyle(qe) === null;
      }
      function ut(qe) {
        var $t = r(qe).container.childNodes[0],
          Cn = window.getComputedStyle($t);
        return !Cn.width || Cn.width.indexOf("px") === -1;
      }
      function Ve() {
        var qe = window.getComputedStyle(ee),
          $t = {};
        return (
          ($t.position = qe.position),
          ($t.width = ee.offsetWidth),
          ($t.height = ee.offsetHeight),
          ($t.top = qe.top),
          ($t.right = qe.right),
          ($t.bottom = qe.bottom),
          ($t.left = qe.left),
          ($t.widthCSS = qe.width),
          ($t.heightCSS = qe.height),
          $t
        );
      }
      function Ae() {
        var qe = Ve();
        (r(ee).startSize = { width: qe.width, height: qe.height }),
          ue("Element start size", r(ee).startSize);
      }
      function Be() {
        r(ee).listeners = [];
      }
      function He() {
        if ((ue("storeStyle invoked."), !r(ee))) {
          ue("Aborting because element has been uninstalled");
          return;
        }
        var qe = Ve();
        r(ee).style = qe;
      }
      function nt(qe, $t, Cn) {
        (r(qe).lastWidth = $t), (r(qe).lastHeight = Cn);
      }
      function Ut(qe) {
        return L(qe).childNodes[0];
      }
      function Yt() {
        return 2 * l.width + 1;
      }
      function Ht() {
        return 2 * l.height + 1;
      }
      function On(qe) {
        return qe + 10 + Yt();
      }
      function gn(qe) {
        return qe + 10 + Ht();
      }
      function xn(qe) {
        return qe * 2 + Yt();
      }
      function Kn(qe) {
        return qe * 2 + Ht();
      }
      function er(qe, $t, Cn) {
        var St = L(qe),
          An = F(qe),
          ar = On($t),
          yr = gn(Cn),
          nr = xn($t),
          Qn = Kn(Cn);
        (St.scrollLeft = ar),
          (St.scrollTop = yr),
          (An.scrollLeft = nr),
          (An.scrollTop = Qn);
      }
      function _r() {
        var qe = r(ee).container;
        if (!qe) {
          (qe = document.createElement("div")),
            (qe.className = h),
            (qe.style.cssText = v([
              "visibility: hidden",
              "display: inline",
              "width: 0px",
              "height: 0px",
              "z-index: -1",
              "overflow: hidden",
              "margin: 0",
              "padding: 0",
            ])),
            (r(ee).container = qe),
            T(qe),
            ee.appendChild(qe);
          var $t = function () {
            r(ee).onRendered && r(ee).onRendered();
          };
          N(qe, "animationstart", $t), (r(ee).onAnimationStart = $t);
        }
        return qe;
      }
      function Nr() {
        function qe() {
          var di = r(ee).style;
          if (di.position === "static") {
            ee.style.setProperty(
              "position",
              "relative",
              Q.important ? "important" : ""
            );
            var Pa = function (yo, Oa, Os, Wi) {
              function xs(sl) {
                return sl.replace(/[^-\d\.]/g, "");
              }
              var Mo = Os[Wi];
              Mo !== "auto" &&
                xs(Mo) !== "0" &&
                (yo.warn(
                  "An element that is positioned static has style." +
                    Wi +
                    "=" +
                    Mo +
                    " which is ignored due to the static positioning. The element will need to be positioned relative, so the style." +
                    Wi +
                    " will be set to 0. Element: ",
                  Oa
                ),
                (Oa.style[Wi] = 0));
            };
            Pa(e, ee, di, "top"),
              Pa(e, ee, di, "right"),
              Pa(e, ee, di, "bottom"),
              Pa(e, ee, di, "left");
          }
        }
        function $t(di, Pa, yo, Oa) {
          return (
            (di = di ? di + "px" : "0"),
            (Pa = Pa ? Pa + "px" : "0"),
            (yo = yo ? yo + "px" : "0"),
            (Oa = Oa ? Oa + "px" : "0"),
            ["left: " + di, "top: " + Pa, "right: " + Oa, "bottom: " + yo]
          );
        }
        if ((ue("Injecting elements"), !r(ee))) {
          ue("Aborting because element has been uninstalled");
          return;
        }
        qe();
        var Cn = r(ee).container;
        Cn || (Cn = _r());
        var St = l.width,
          An = l.height,
          ar = v([
            "position: absolute",
            "flex: none",
            "overflow: hidden",
            "z-index: -1",
            "visibility: hidden",
            "width: 100%",
            "height: 100%",
            "left: 0px",
            "top: 0px",
          ]),
          yr = v(
            [
              "position: absolute",
              "flex: none",
              "overflow: hidden",
              "z-index: -1",
              "visibility: hidden",
            ].concat($t(-(1 + St), -(1 + An), -An, -St))
          ),
          nr = v([
            "position: absolute",
            "flex: none",
            "overflow: scroll",
            "z-index: -1",
            "visibility: hidden",
            "width: 100%",
            "height: 100%",
          ]),
          Qn = v([
            "position: absolute",
            "flex: none",
            "overflow: scroll",
            "z-index: -1",
            "visibility: hidden",
            "width: 100%",
            "height: 100%",
          ]),
          Sr = v(["position: absolute", "left: 0", "top: 0"]),
          ta = v(["position: absolute", "width: 200%", "height: 200%"]),
          ei = document.createElement("div"),
          ri = document.createElement("div"),
          Ra = document.createElement("div"),
          le = document.createElement("div"),
          Ia = document.createElement("div"),
          ts = document.createElement("div");
        (ei.dir = "ltr"),
          (ei.style.cssText = ar),
          (ei.className = h),
          (ri.className = h),
          (ri.style.cssText = yr),
          (Ra.style.cssText = nr),
          (le.style.cssText = Sr),
          (Ia.style.cssText = Qn),
          (ts.style.cssText = ta),
          Ra.appendChild(le),
          Ia.appendChild(ts),
          ri.appendChild(Ra),
          ri.appendChild(Ia),
          ei.appendChild(ri),
          Cn.appendChild(ei);
        function Ma() {
          var di = r(ee);
          di && di.onExpand
            ? di.onExpand()
            : ue(
                "Aborting expand scroll handler: element has been uninstalled"
              );
        }
        function ys() {
          var di = r(ee);
          di && di.onShrink
            ? di.onShrink()
            : ue(
                "Aborting shrink scroll handler: element has been uninstalled"
              );
        }
        N(Ra, "scroll", Ma),
          N(Ia, "scroll", ys),
          (r(ee).onExpandScroll = Ma),
          (r(ee).onShrinkScroll = ys);
      }
      function ir() {
        function qe(nr, Qn, Sr) {
          var ta = Ut(nr),
            ei = On(Qn),
            ri = gn(Sr);
          ta.style.setProperty(
            "width",
            ei + "px",
            Q.important ? "important" : ""
          ),
            ta.style.setProperty(
              "height",
              ri + "px",
              Q.important ? "important" : ""
            );
        }
        function $t(nr) {
          var Qn = ee.offsetWidth,
            Sr = ee.offsetHeight,
            ta = Qn !== r(ee).lastWidth || Sr !== r(ee).lastHeight;
          ue("Storing current size", Qn, Sr),
            nt(ee, Qn, Sr),
            n.add(0, function () {
              if (ta) {
                if (!r(ee)) {
                  ue("Aborting because element has been uninstalled");
                  return;
                }
                if (!Cn()) {
                  ue(
                    "Aborting because element container has not been initialized"
                  );
                  return;
                }
                if (Q.debug) {
                  var ri = ee.offsetWidth,
                    Ra = ee.offsetHeight;
                  (ri !== Qn || Ra !== Sr) &&
                    e.warn(
                      o.get(ee),
                      "Scroll: Size changed before updating detector elements."
                    );
                }
                qe(ee, Qn, Sr);
              }
            }),
            n.add(1, function () {
              if (!r(ee)) {
                ue("Aborting because element has been uninstalled");
                return;
              }
              if (!Cn()) {
                ue(
                  "Aborting because element container has not been initialized"
                );
                return;
              }
              er(ee, Qn, Sr);
            }),
            ta &&
              nr &&
              n.add(2, function () {
                if (!r(ee)) {
                  ue("Aborting because element has been uninstalled");
                  return;
                }
                if (!Cn()) {
                  ue(
                    "Aborting because element container has not been initialized"
                  );
                  return;
                }
                nr();
              });
        }
        function Cn() {
          return !!r(ee).container;
        }
        function St() {
          function nr() {
            return r(ee).lastNotifiedWidth === void 0;
          }
          ue("notifyListenersIfNeeded invoked");
          var Qn = r(ee);
          if (
            nr() &&
            Qn.lastWidth === Qn.startSize.width &&
            Qn.lastHeight === Qn.startSize.height
          )
            return ue(
              "Not notifying: Size is the same as the start size, and there has been no notification yet."
            );
          if (
            Qn.lastWidth === Qn.lastNotifiedWidth &&
            Qn.lastHeight === Qn.lastNotifiedHeight
          )
            return ue("Not notifying: Size already notified");
          ue("Current size not notified, notifying..."),
            (Qn.lastNotifiedWidth = Qn.lastWidth),
            (Qn.lastNotifiedHeight = Qn.lastHeight),
            bP(r(ee).listeners, function (Sr) {
              Sr(ee);
            });
        }
        function An() {
          if ((ue("startanimation triggered."), ut(ee))) {
            ue("Ignoring since element is still unrendered...");
            return;
          }
          ue("Element rendered.");
          var nr = L(ee),
            Qn = F(ee);
          (nr.scrollLeft === 0 ||
            nr.scrollTop === 0 ||
            Qn.scrollLeft === 0 ||
            Qn.scrollTop === 0) &&
            (ue("Scrollbars out of sync. Updating detector elements..."),
            $t(St));
        }
        function ar() {
          if ((ue("Scroll detected."), ut(ee))) {
            ue("Scroll event fired while unrendered. Ignoring...");
            return;
          }
          $t(St);
        }
        if ((ue("registerListenersAndPositionElements invoked."), !r(ee))) {
          ue("Aborting because element has been uninstalled");
          return;
        }
        (r(ee).onRendered = An), (r(ee).onExpand = ar), (r(ee).onShrink = ar);
        var yr = r(ee).style;
        qe(ee, yr.width, yr.height);
      }
      function $i() {
        if ((ue("finalizeDomMutation invoked."), !r(ee))) {
          ue("Aborting because element has been uninstalled");
          return;
        }
        var qe = r(ee).style;
        nt(ee, qe.width, qe.height), er(ee, qe.width, qe.height);
      }
      function Tr() {
        Se(ee);
      }
      function Fi() {
        ue("Installing..."),
          Be(),
          Ae(),
          n.add(0, He),
          n.add(1, Nr),
          n.add(2, ir),
          n.add(3, $i),
          n.add(4, Tr);
      }
      ue("Making detectable..."),
        ke(ee)
          ? (ue("Element is detached"),
            _r(),
            ue("Waiting until element is attached..."),
            (r(ee).onRendered = function () {
              ue("Element is now attached"), Fi();
            }))
          : Fi();
    }
    function K(Q) {
      var ee = r(Q);
      ee &&
        (ee.onExpandScroll && I(L(Q), "scroll", ee.onExpandScroll),
        ee.onShrinkScroll && I(F(Q), "scroll", ee.onShrinkScroll),
        ee.onAnimationStart &&
          I(ee.container, "animationstart", ee.onAnimationStart),
        ee.container && Q.removeChild(ee.container));
    }
    return { makeDetectable: G, addListener: X, uninstall: K, initDocument: f };
  },
  Zf = h8.forEach,
  AP = lP,
  TP = cP,
  SP = uP,
  wP = dP,
  CP = hP,
  O5 = m8,
  NP = gP,
  Ud = yP,
  RP = xP,
  IP = EP;
function L5(t) {
  return Array.isArray(t) || t.length !== void 0;
}
function D5(t) {
  if (Array.isArray(t)) return t;
  var e = [];
  return (
    Zf(t, function (n) {
      e.push(n);
    }),
    e
  );
}
function B5(t) {
  return t && t.nodeType === 1;
}
var MP = function (t) {
  t = t || {};
  var e;
  if (t.idHandler)
    e = {
      get: function (G) {
        return t.idHandler.get(G, !0);
      },
      set: t.idHandler.set,
    };
  else {
    var n = SP(),
      r = wP({ idGenerator: n, stateHandler: Ud });
    e = r;
  }
  var o = t.reporter;
  if (!o) {
    var l = o === !1;
    o = CP(l);
  }
  var a = zd(t, "batchProcessor", NP({ reporter: o })),
    h = {};
  (h.callOnAdd = !!zd(t, "callOnAdd", !0)), (h.debug = !!zd(t, "debug", !1));
  var f = TP(e),
    v = AP({ stateHandler: Ud }),
    E,
    x = zd(t, "strategy", "object"),
    T = zd(t, "important", !1),
    N = {
      reporter: o,
      batchProcessor: a,
      stateHandler: Ud,
      idHandler: e,
      important: T,
    };
  if (
    (x === "scroll" &&
      (O5.isLegacyOpera()
        ? (o.warn(
            "Scroll strategy is not supported on legacy Opera. Changing to object strategy."
          ),
          (x = "object"))
        : O5.isIE(9) &&
          (o.warn(
            "Scroll strategy is not supported on IE9. Changing to object strategy."
          ),
          (x = "object"))),
    x === "scroll")
  )
    E = IP(N);
  else if (x === "object") E = RP(N);
  else throw new Error("Invalid strategy name: " + x);
  var I = {};
  function L(G, K, Q) {
    function ee(Ae) {
      var Be = f.get(Ae);
      Zf(Be, function (nt) {
        nt(Ae);
      });
    }
    function Se(Ae, Be, He) {
      f.add(Be, He), Ae && He(Be);
    }
    if ((Q || ((Q = K), (K = G), (G = {})), !K))
      throw new Error("At least one element required.");
    if (!Q) throw new Error("Listener required.");
    if (B5(K)) K = [K];
    else if (L5(K)) K = D5(K);
    else
      return o.error(
        "Invalid arguments. Must be a DOM element or a collection of DOM elements."
      );
    var ue = 0,
      ke = zd(G, "callOnAdd", h.callOnAdd),
      ut = zd(G, "onReady", function () {}),
      Ve = zd(G, "debug", h.debug);
    Zf(K, function (Be) {
      Ud.getState(Be) || (Ud.initState(Be), e.set(Be));
      var He = e.get(Be);
      if (
        (Ve && o.log("Attaching listener to element", He, Be),
        !v.isDetectable(Be))
      ) {
        if ((Ve && o.log(He, "Not detectable."), v.isBusy(Be))) {
          Ve && o.log(He, "System busy making it detectable"),
            Se(ke, Be, Q),
            (I[He] = I[He] || []),
            I[He].push(function () {
              ue++, ue === K.length && ut();
            });
          return;
        }
        return (
          Ve && o.log(He, "Making detectable..."),
          v.markBusy(Be, !0),
          E.makeDetectable({ debug: Ve, important: T }, Be, function (Ut) {
            if ((Ve && o.log(He, "onElementDetectable"), Ud.getState(Ut))) {
              v.markAsDetectable(Ut),
                v.markBusy(Ut, !1),
                E.addListener(Ut, ee),
                Se(ke, Ut, Q);
              var Yt = Ud.getState(Ut);
              if (Yt && Yt.startSize) {
                var Ht = Ut.offsetWidth,
                  On = Ut.offsetHeight;
                (Yt.startSize.width !== Ht || Yt.startSize.height !== On) &&
                  ee(Ut);
              }
              I[He] &&
                Zf(I[He], function (gn) {
                  gn();
                });
            } else
              Ve && o.log(He, "Element uninstalled before being detectable.");
            delete I[He], ue++, ue === K.length && ut();
          })
        );
      }
      Ve && o.log(He, "Already detecable, adding listener."),
        Se(ke, Be, Q),
        ue++;
    }),
      ue === K.length && ut();
  }
  function F(G) {
    if (!G) return o.error("At least one element is required.");
    if (B5(G)) G = [G];
    else if (L5(G)) G = D5(G);
    else
      return o.error(
        "Invalid arguments. Must be a DOM element or a collection of DOM elements."
      );
    Zf(G, function (K) {
      f.removeAllListeners(K), E.uninstall(K), Ud.cleanState(K);
    });
  }
  function X(G) {
    E.initDocument && E.initDocument(G);
  }
  return {
    listenTo: L,
    removeListener: f.removeListener,
    removeAllListeners: f.removeAllListeners,
    uninstall: F,
    initDocument: X,
  };
};
function zd(t, e, n) {
  var r = t[e];
  return r == null && n !== void 0 ? n : r;
}
const PP = ea(MP);
let OP = class extends _s.EventEmitter {
  get iconService() {
    return this.container.iconService;
  }
  get fontService() {
    return this.container.fontService;
  }
  get controlService() {
    return this.container.controlService;
  }
  get configService() {
    return this.container.globalConfigService;
  }
  get map() {
    return this.container.mapService;
  }
  get coordinateSystemService() {
    return this.container.coordinateSystemService;
  }
  get rendererService() {
    return this.container.rendererService;
  }
  get layerService() {
    return this.container.layerService;
  }
  get debugService() {
    return this.container.debugService;
  }
  get cameraService() {
    return this.container.cameraService;
  }
  get interactionService() {
    return this.container.interactionService;
  }
  get pickingService() {
    return this.container.pickingService;
  }
  get shaderModuleService() {
    return this.container.shaderModuleService;
  }
  get markerService() {
    return this.container.markerService;
  }
  get popupService() {
    return this.container.popupService;
  }
  constructor(e) {
    super(),
      R(this, "destroyed", !1),
      R(this, "loaded", !1),
      R(this, "id", void 0),
      R(this, "inited", !1),
      R(this, "rendering", !1),
      R(this, "$container", void 0),
      R(this, "canvas", void 0),
      R(this, "markerContainer", void 0),
      R(this, "resizeDetector", void 0),
      R(this, "hooks", void 0),
      R(this, "handleWindowResized", () => {
        this.emit("resize"),
          this.$container &&
            (this.initContainer(),
            (this.coordinateSystemService.needRefresh = !0),
            this.render());
      }),
      R(this, "handleMapCameraChanged", (n) => {
        this.cameraService.update(n), this.render();
      }),
      (this.container = e),
      (this.hooks = { init: new iP() }),
      (this.id = e.id);
  }
  init(e) {
    var n = this;
    this.configService.setSceneConfig(this.id, e),
      this.shaderModuleService.registerBuiltinModules(),
      this.iconService.init(),
      this.iconService.on("imageUpdate", () => this.render()),
      this.fontService.init(),
      this.hooks.init.tapPromise(
        "initMap",
        bt(function* () {
          n.debugService.log("map.mapInitStart", { type: n.map.version }),
            yield new Promise((r) => {
              n.map.onCameraChanged((o) => {
                n.cameraService.init(), n.cameraService.update(o), r();
              }),
                n.map.init();
            }),
            n.map.onCameraChanged(n.handleMapCameraChanged),
            n.map.addMarkerContainer(),
            n.markerService.addMarkers(),
            n.markerService.addMarkerLayers(),
            n.popupService.initPopup(),
            n.interactionService.init(),
            n.interactionService.on(Js.Drag, n.addSceneEvent.bind(n));
        })
      ),
      this.hooks.init.tapPromise(
        "initRenderer",
        bt(function* () {
          var r;
          const o =
            ((r = n.map) === null || r === void 0
              ? void 0
              : r.getOverlayContainer()) || void 0;
          if (
            (o
              ? (n.$container = o)
              : (n.$container = BM(
                  n.configService.getSceneConfig(n.id).id || ""
                )),
            n.$container)
          ) {
            const { canvas: a } = e;
            if (
              ((n.canvas = a || ma("canvas", "", n.$container)),
              n.setCanvas(),
              yield n.rendererService.init(
                n.canvas,
                n.configService.getSceneConfig(n.id),
                e.gl
              ),
              n.registerContextLost(),
              n.initContainer(),
              (n.resizeDetector = PP({ strategy: "scroll" })),
              n.resizeDetector.listenTo(n.$container, n.handleWindowResized),
              window.matchMedia)
            ) {
              var l;
              (l = window.matchMedia(
                "screen and (-webkit-min-device-pixel-ratio: 1.5)"
              )) === null ||
                l === void 0 ||
                l.addListener(n.handleWindowResized.bind("screen"));
            }
          } else console.error("容器 id 不存在");
          n.pickingService.init(n.id);
        })
      ),
      this.render();
  }
  registerContextLost() {
    const e = this.rendererService.getCanvas();
    e &&
      e.addEventListener("webglcontextlost", () =>
        this.emit("webglcontextlost")
      );
  }
  addLayer(e) {
    (this.layerService.sceneService = this), this.layerService.add(e);
  }
  addMask(e) {
    (this.layerService.sceneService = this), this.layerService.addMask(e);
  }
  render() {
    var e = this;
    return bt(function* () {
      e.rendering ||
        e.destroyed ||
        ((e.rendering = !0),
        e.inited
          ? (yield e.layerService.initLayers(),
            yield e.layerService.renderLayers())
          : (yield e.hooks.init.promise(),
            e.destroyed && e.destroy(),
            yield e.layerService.initLayers(),
            e.layerService.renderLayers(),
            e.controlService.addControls(),
            (e.loaded = !0),
            e.emit("loaded"),
            (e.inited = !0)),
        (e.rendering = !1));
    })();
  }
  addFontFace(e, n) {
    this.fontService.addFontFace(e, n);
  }
  getSceneContainer() {
    return this.$container;
  }
  exportPng(e) {
    var n = this;
    return bt(function* () {
      var r;
      const o =
        (r = n.$container) === null || r === void 0
          ? void 0
          : r.getElementsByTagName("canvas")[0];
      return (
        yield n.render(),
        e === "jpg"
          ? o == null
            ? void 0
            : o.toDataURL("image/jpeg")
          : o == null
          ? void 0
          : o.toDataURL("image/png")
      );
    })();
  }
  getSceneConfig() {
    return this.configService.getSceneConfig(this.id);
  }
  getPointSizeRange() {
    return this.rendererService.getPointSizeRange();
  }
  addMarkerContainer() {
    const e = this.$container.parentElement;
    e !== null && (this.markerContainer = ma("div", "l7-marker-container", e));
  }
  getMarkerContainer() {
    return this.markerContainer;
  }
  destroy() {
    var e;
    if (!this.inited) {
      this.destroyed = !0;
      return;
    }
    this.resizeDetector.removeListener(
      this.$container,
      this.handleWindowResized
    ),
      this.pickingService.destroy(),
      this.layerService.destroy(),
      this.interactionService.destroy(),
      this.controlService.destroy(),
      this.markerService.destroy(),
      this.fontService.destroy(),
      this.iconService.destroy(),
      this.removeAllListeners(),
      (this.inited = !1),
      this.map.destroy(),
      setTimeout(() => {
        var n;
        (n = this.$container) === null ||
          n === void 0 ||
          n.removeChild(this.canvas),
          (this.canvas = null),
          this.rendererService.destroy();
      }),
      (e = this.$container) === null ||
        e === void 0 ||
        (e = e.parentNode) === null ||
        e === void 0 ||
        e.removeChild(this.$container),
      this.emit("destroy");
  }
  initContainer() {
    var e, n;
    const r = Qs,
      o =
        ((e = this.$container) === null || e === void 0
          ? void 0
          : e.clientWidth) || 400,
      l =
        ((n = this.$container) === null || n === void 0
          ? void 0
          : n.clientHeight) || 300,
      a = this.canvas;
    a && ((a.width = o * r), (a.height = l * r)),
      this.rendererService.viewport({
        x: 0,
        y: 0,
        width: r * o,
        height: r * l,
      });
  }
  setCanvas() {
    var e, n;
    const r = Qs,
      o =
        ((e = this.$container) === null || e === void 0
          ? void 0
          : e.clientWidth) || 400,
      l =
        ((n = this.$container) === null || n === void 0
          ? void 0
          : n.clientHeight) || 300,
      a = this.canvas;
    (a.width = o * r),
      (a.height = l * r),
      (a.style.width = "100%"),
      (a.style.height = "100%");
  }
  addSceneEvent(e) {
    this.emit(e.type, e);
  }
};
const { uniq: LP } = Ka,
  F5 = "#define PI 3.14159265359",
  DP = `#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,
  BP = `#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,
  FP = `// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}


vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  return weight;
}
`,
  kP = `
in vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  float activeType = v_PickingResult.a;
  if(activeType > 0.0) {
    vec4 highLightColor =  activeType > 1.5 ? u_SelectColor : u_HighlightColor;
    highLightColor = highLightColor * COLOR_SCALE;
    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));
    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  }
  else {
    return color;
  }

  
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // 过滤多余的 shader 计算
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // 暂时去除 直接取消计算在选中时拖拽地图会有问题
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // 过滤多余的 shader 计算
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // 暂时去除 直接取消计算在选中时拖拽地图会有问题
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,
  UP = `layout(location = ATTRIBUTE_LOCATION_PICKING_COLOR) in vec3 a_PickingColor;
out vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return distance(vertexColor,u_PickingColor.rgb) < 0.01;
}

// 判断当前点是否已经被 select 选中
bool isVertexSelected(vec3 vertexColor) {
  return distance(vertexColor,u_CurrentSelectedId.rgb) < 0.01;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  if(u_PickingStage == PICKING_HIGHLIGHT) {
    if(isVertexPicked(pickingColor)) {
       v_PickingResult = vec4(pickingColor.rgb * COLOR_SCALE,HIGHLIGHT);
       return;
    }
    if(isVertexSelected(pickingColor)) {
     v_PickingResult = vec4(u_CurrentSelectedId.rgb * COLOR_SCALE,SELECT);
      return;
    }

  } else {
      v_PickingResult= vec4(pickingColor.rgb * COLOR_SCALE,NORMAL);
      return;
  }

  // // v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && (isVertexPicked(pickingColor) || isVertexPicked(u_CurrentSelectedId)));

  // // Stores the picking color so that the fragment shader can render it during picking
  // v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,
  k5 = `layout(std140) uniform PickingUniforms {
  vec4 u_HighlightColor;
  vec4 u_SelectColor;
  vec3 u_PickingColor;
  float u_PickingStage;
  vec3 u_CurrentSelectedId;
  float u_PickingThreshold;
  float u_PickingBuffer;
  float u_shaderPick;
  float u_activeMix;
};`,
  zP = `
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // 经纬度 => 平面坐标
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // 平面坐标 => 经纬度
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,
  U5 = `#define TILE_SIZE (512.0)
#define PI (3.1415926536)
#define WORLD_SCALE (TILE_SIZE / (PI * 2.0))
#define EARTH_CIRCUMFERENCE (40.03e6)

#define COORDINATE_SYSTEM_LNGLAT (1.0) // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET (2.0) // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE (3.0)
#define COORDINATE_SYSTEM_IDENTITY (4.0)
#define COORDINATE_SYSTEM_METER_OFFSET (5.0)

#pragma include "scene_uniforms"

const vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(radians(x) + PI, PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5)));
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}

// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1.0, 1.0);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (
    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&
      u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01 ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}

vec4 project_position(vec4 position, vec2 position64xyLow) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(
      vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w)
    );
  }
  if (
    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&
    u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01
  ) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  return position;
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_XY_LOW);
}

vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

// 适配纹理贴图的等像素大小
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance;
  }

  return pixel * 2.0 * u_FocalDistance;
}

// 在不论什么底图下需要统一处理的时候使用
float project_float_pixel(float pixel) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox 坐标系下，为了和 Web 墨卡托坐标系统一，zoom 默认减1
    return pixel * pow(2.0, 19.0 - u_Zoom) * u_FocalDistance;
  }

  return pixel * u_FocalDistance;
}

// Project meter into the unit of pixel which used in the camera world space
float project_float_meter(float meter) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Since the zoom level uniform is updated by mapservice and it's alread been subtracted by 1
    // Not sure if we are supposed to do that again
    return meter;
  } else {
    return project_float_pixel(meter);
  }

  // TODO: change the following code to make adaptations for amap
  // return u_FocalDistance * TILE_SIZE * pow(2.0, u_Zoom) * meter / EARTH_CIRCUMFERENCE;

}

float project_pixel(float pixel) {
  return pixel * u_FocalDistance;
}

vec2 project_pixel(vec2 pixel) {
  return pixel * -1.0 * u_FocalDistance;
}

vec3 project_pixel(vec3 pixel) {
  return pixel * -1.0 * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}

bool isEqual(float a, float b) {
  return a < b + 0.001 && a > b - 0.001;
}

`,
  VP = `vec2 rotate_matrix(vec2 v, float a) {
    float b = a / 180.0 * 3.1415926535897932384626433832795;
    float s = sin(b);
    float c = cos(b);
    mat2 m = mat2(c, s, -s, c);
    return m * v;
}`,
  z5 = `layout(std140) uniform SceneUniforms {
  mat4 u_ViewMatrix;
  mat4 u_ProjectionMatrix;
  mat4 u_ViewProjectionMatrix;
  mat4 u_ModelMatrix;
  vec4 u_ViewportCenterProjection;
  vec3 u_PixelsPerDegree;
  float u_Zoom;
  vec3 u_PixelsPerDegree2;
  float u_ZoomScale;
  vec3 u_PixelsPerMeter;
  float u_CoordinateSystem;
  vec3 u_CameraPosition;
  float u_DevicePixelRatio;
  vec2 u_ViewportCenter;
  vec2 u_ViewportSize;
  float u_FocalDistance;
};
`,
  HP = `/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,
  V5 = /precision\s+(high|low|medium)p\s+float/,
  H5 = `#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,
  jP = /#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,
  WP = /void\s+main\s*\([^)]*\)\s*\{\n?/;
class XP {
  constructor() {
    R(this, "moduleCache", {}), R(this, "rawContentCache", {});
  }
  registerBuiltinModules() {
    this.destroy(),
      this.registerModule("common", { vs: F5, fs: F5 }),
      this.registerModule("decode", { vs: BP, fs: "" }),
      this.registerModule("scene_uniforms", { vs: z5, fs: z5 }),
      this.registerModule("picking_uniforms", { vs: k5, fs: k5 }),
      this.registerModule("projection", { vs: U5, fs: U5 }),
      this.registerModule("project", { vs: zP, fs: "" }),
      this.registerModule("sdf_2d", { vs: "", fs: HP }),
      this.registerModule("lighting", { vs: FP, fs: "" }),
      this.registerModule("light", { vs: DP, fs: "" }),
      this.registerModule("picking", { vs: UP, fs: kP }),
      this.registerModule("rotation_2d", { vs: VP, fs: "" });
  }
  registerModule(e, n) {
    (n.vs = n.vs.replace(
      /\r\n/g,
      `
`
    )),
      (n.fs = n.fs.replace(
        /\r\n/g,
        `
`
      ));
    const { vs: r, fs: o, uniforms: l, defines: a, inject: h } = n,
      { content: f, uniforms: v } = y2(r),
      { content: E, uniforms: x } = y2(o);
    this.rawContentCache[e] = {
      fs: E,
      defines: a,
      inject: h,
      uniforms: mt(mt(mt({}, v), x), l),
      vs: f,
    };
  }
  getModule(e) {
    let n = this.rawContentCache[e].vs,
      r = this.rawContentCache[e].fs;
    const { defines: o = {}, inject: l = {} } = this.rawContentCache[e];
    let a = {};
    l["vs:#decl"] &&
      ((n = l["vs:#decl"] + n), (a = y2(l["vs:#decl"]).uniforms)),
      l["vs:#main-start"] &&
        (n = n.replace(WP, (L) => L + l["vs:#main-start"])),
      l["fs:#decl"] && (r = l["fs:#decl"] + r),
      (n = GP(o) + n);
    const { content: f, includeList: v } = this.processModule(n, [], "vs"),
      { content: E, includeList: x } = this.processModule(r, [], "fs"),
      T = LP(v.concat(x).concat(e)).reduce(
        (L, F) => mt(mt({}, L), this.rawContentCache[F].uniforms),
        mt({}, a)
      ),
      N = (V5.test(E) ? "" : H5) + f,
      I = (V5.test(E) ? "" : H5) + E;
    return (
      (this.moduleCache[e] = { vs: N.trim(), fs: I.trim(), uniforms: T }),
      this.moduleCache[e]
    );
  }
  destroy() {
    (this.moduleCache = {}), (this.rawContentCache = {});
  }
  processModule(e, n, r) {
    return {
      content: e.replace(jP, (l, a) => {
        const f = a.split(" ")[0].replace(/"/g, "");
        if (n.indexOf(f) > -1) return "";
        const v = this.rawContentCache[f][r];
        n.push(f);
        const { content: E } = this.processModule(v, n, r);
        return E;
      }),
      includeList: n,
    };
  }
}
function GP(t) {
  return Object.keys(t).reduce(
    (n, r) =>
      n +
      `#define ${r.toUpperCase()} ${t[r]}
`,
    `
`
  );
}
class S3 {
  constructor() {
    R(this, "shaderModuleService", void 0),
      R(this, "rendererService", void 0),
      R(this, "cameraService", void 0),
      R(this, "mapService", void 0),
      R(this, "interactionService", void 0),
      R(this, "layerService", void 0),
      R(this, "config", void 0);
  }
  getName() {
    return "";
  }
  getType() {
    return L1.Normal;
  }
  init(e, n) {
    (this.config = n),
      (this.rendererService = e.getContainer().rendererService),
      (this.cameraService = e.getContainer().cameraService),
      (this.mapService = e.getContainer().mapService),
      (this.interactionService = e.getContainer().interactionService),
      (this.layerService = e.getContainer().layerService),
      (this.shaderModuleService = e.getContainer().shaderModuleService);
  }
  render(e) {}
}
class ZP extends S3 {
  getName() {
    return "clear";
  }
  init(e, n) {
    super.init(e, n);
  }
  render() {
    this.rendererService.clear({
      color: [0, 0, 0, 0],
      depth: 1,
      framebuffer: null,
    });
  }
}
class YP {
  constructor(e) {
    R(this, "passes", []),
      R(this, "layer", void 0),
      R(this, "renderFlag", void 0),
      R(this, "width", 0),
      R(this, "height", 0),
      (this.postProcessor = e);
  }
  setLayer(e) {
    this.layer = e;
  }
  setRenderFlag(e) {
    this.renderFlag = e;
  }
  getRenderFlag() {
    return this.renderFlag;
  }
  getPostProcessor() {
    return this.postProcessor;
  }
  render() {
    var e = this;
    return bt(function* () {
      for (const n of e.passes) yield n.render(e.layer);
      yield e.postProcessor.render(e.layer);
    })();
  }
  resize(e, n) {
    (this.width !== e || this.height !== n) &&
      (this.postProcessor.resize(e, n), (this.width = e), (this.height = n));
  }
  add(e, n) {
    e.getType() === L1.PostProcessing
      ? this.postProcessor.add(e, this.layer, n)
      : (e.init(this.layer, n), this.passes.push(e));
  }
  insert(e, n, r) {
    e.init(this.layer, n), this.passes.splice(r, 0, e);
  }
  destroy() {
    this.passes.length = 0;
  }
}
class qP extends S3 {
  constructor(...e) {
    var n;
    super(...e),
      (n = this),
      R(this, "pickingFBO", void 0),
      R(this, "layer", void 0),
      R(this, "width", 0),
      R(this, "height", 0),
      R(this, "alreadyInRendering", !1),
      R(this, "pickFromPickingFBO", ({ x: r, y: o, lngLat: l, type: a }) => {
        if (!this.layer.isVisible() || !this.layer.needPick(a)) return;
        const {
            getViewportSize: h,
            readPixelsAsync: f,
            useFramebuffer: v,
          } = this.rendererService,
          { width: E, height: x } = h(),
          { enableHighlight: T, enableSelect: N } = this.layer.getLayerConfig(),
          I = r * Qs,
          L = o * Qs;
        if (I > E || I < 0 || L > x || L < 0) return;
        let F;
        v(
          this.pickingFBO,
          bt(function* () {
            var X;
            if (
              ((F = yield f({
                x: Math.round(I),
                y: Math.round(x - (o + 1) * Qs),
                width: 1,
                height: 1,
                data: new Uint8Array(1 * 1 * 4),
                framebuffer: n.pickingFBO,
              })),
              F[0] !== 0 || F[1] !== 0 || F[2] !== 0)
            ) {
              const G = K0(F),
                K = n.layer.getSource().getFeatureById(G),
                Q = {
                  x: r,
                  y: o,
                  type: a,
                  lngLat: l,
                  featureId: G,
                  feature: K,
                };
              K && (n.layer.setCurrentPickId(G), n.triggerHoverOnLayer(Q));
            } else {
              const G = {
                x: r,
                y: o,
                lngLat: l,
                type:
                  n.layer.getCurrentPickId() === null ? "un" + a : "mouseout",
                featureId: null,
                feature: null,
              };
              n.triggerHoverOnLayer(mt(mt({}, G), {}, { type: "unpick" })),
                n.triggerHoverOnLayer(G),
                n.layer.setCurrentPickId(null);
            }
            T && n.highlightPickedFeature(F),
              N &&
                a === "click" &&
                ((X = F) === null || X === void 0 ? void 0 : X.toString()) !==
                  [0, 0, 0, 0].toString() &&
                n.selectFeature(F);
          })
        );
      });
  }
  getType() {
    return L1.Normal;
  }
  getName() {
    return "pixelPicking";
  }
  init(e, n) {
    super.init(e, n), (this.layer = e);
    const {
        createTexture2D: r,
        createFramebuffer: o,
        getViewportSize: l,
      } = this.rendererService,
      { width: a, height: h } = l(),
      f = r({
        width: a,
        height: h,
        wrapS: H.CLAMP_TO_EDGE,
        wrapT: H.CLAMP_TO_EDGE,
        label: "Picking Texture",
      });
    (this.pickingFBO = o({ color: f })),
      this.interactionService.on(Js.Hover, this.pickFromPickingFBO),
      this.interactionService.on(
        Js.Select,
        this.selectFeatureHandle.bind(this)
      ),
      this.interactionService.on(
        Js.Active,
        this.highlightFeatureHandle.bind(this)
      );
  }
  render(e) {
    if (this.alreadyInRendering) return;
    const {
        getViewportSize: n,
        useFramebuffer: r,
        clear: o,
      } = this.rendererService,
      { width: l, height: a } = n();
    (this.alreadyInRendering = !0),
      (this.width !== l || this.height !== a) &&
        (this.pickingFBO.resize({ width: l, height: a }),
        (this.width = l),
        (this.height = a)),
      r(this.pickingFBO, () => {
        o({
          framebuffer: this.pickingFBO,
          color: [0, 0, 0, 0],
          stencil: 0,
          depth: 1,
        });
        const h = this.layer.multiPassRenderer.getRenderFlag();
        this.layer.multiPassRenderer.setRenderFlag(!1),
          e.hooks.beforePickingEncode.call(),
          e.render(),
          e.hooks.afterPickingEncode.call(),
          this.layer.multiPassRenderer.setRenderFlag(h),
          (this.alreadyInRendering = !1);
      });
  }
  triggerHoverOnLayer(e) {
    this.layer.emit(e.type, e);
  }
  highlightPickedFeature(e) {
    const [n, r, o] = e;
    this.layer.hooks.beforeHighlight.call([n, r, o]),
      this.layerService.renderLayers();
  }
  selectFeature(e) {
    const [n, r, o] = e;
    this.layer.hooks.beforeSelect.call([n, r, o]),
      this.layerService.renderLayers();
  }
  selectFeatureHandle({ featureId: e }) {
    const n = Sp(e);
    this.selectFeature(new Uint8Array(n));
  }
  highlightFeatureHandle({ featureId: e }) {
    const n = Sp(e);
    this.highlightPickedFeature(new Uint8Array(n));
  }
}
class $P {
  constructor(e) {
    R(this, "passes", []),
      R(this, "readFBO", void 0),
      R(this, "writeFBO", void 0),
      (this.rendererService = e),
      this.init();
  }
  getReadFBO() {
    return this.readFBO;
  }
  getWriteFBO() {
    return this.writeFBO;
  }
  getCurrentFBOTex() {
    const { getViewportSize: e, createTexture2D: n } = this.rendererService,
      { width: r, height: o } = e();
    return n({ x: 0, y: 0, width: r, height: o, copy: !0 });
  }
  getReadFBOTex() {
    var e = this;
    const { useFramebuffer: n } = this.rendererService;
    return new Promise((r) => {
      n(
        this.readFBO,
        bt(function* () {
          r(e.getCurrentFBOTex());
        })
      );
    });
  }
  renderBloomPass(e, n) {
    var r = this;
    return bt(function* () {
      const o = yield r.getReadFBOTex();
      let l = 0;
      for (; l < 4; ) yield n.render(e, o), r.swap(), l++;
    })();
  }
  render(e) {
    var n = this;
    return bt(function* () {
      for (let r = 0; r < n.passes.length; r++) {
        const o = n.passes[r];
        o.setRenderToScreen(n.isLastEnabledPass(r)),
          o.getName() === "bloom"
            ? yield n.renderBloomPass(e, o)
            : (yield o.render(e), r !== n.passes.length - 1 && n.swap());
      }
    })();
  }
  resize(e, n) {
    this.readFBO.resize({ width: e, height: n }),
      this.writeFBO.resize({ width: e, height: n });
  }
  add(e, n, r) {
    e.init(n, r), this.passes.push(e);
  }
  insert(e, n, r, o) {
    e.init(r, o), this.passes.splice(n, 0, e);
  }
  getPostProcessingPassByName(e) {
    return this.passes.find((n) => n.getName() === e);
  }
  init() {
    const { createFramebuffer: e, createTexture2D: n } = this.rendererService;
    (this.readFBO = e({
      color: n({
        width: 1,
        height: 1,
        wrapS: H.CLAMP_TO_EDGE,
        wrapT: H.CLAMP_TO_EDGE,
        usage: m1.RENDER_TARGET,
      }),
    })),
      (this.writeFBO = e({
        color: n({
          width: 1,
          height: 1,
          wrapS: H.CLAMP_TO_EDGE,
          wrapT: H.CLAMP_TO_EDGE,
          usage: m1.RENDER_TARGET,
        }),
      }));
  }
  isLastEnabledPass(e) {
    for (let n = e + 1; n < this.passes.length; n++)
      if (this.passes[n].isEnabled()) return !1;
    return !0;
  }
  swap() {
    const e = this.readFBO;
    (this.readFBO = this.writeFBO), (this.writeFBO = e);
  }
}
class KP extends S3 {
  getType() {
    return L1.Normal;
  }
  getName() {
    return "render";
  }
  init(e, n) {
    super.init(e, n);
  }
  render(e) {
    const { useFramebuffer: n, clear: r } = this.rendererService,
      o = e.multiPassRenderer.getPostProcessor().getReadFBO();
    n(o, () => {
      r({ color: [0, 0, 0, 0], depth: 1, stencil: 0, framebuffer: o }),
        e.multiPassRenderer.setRenderFlag(!1),
        e.models.forEach((l) => {
          l.draw({ uniforms: e.layerModel.getUninforms() });
        }),
        e.multiPassRenderer.setRenderFlag(!0);
    });
  }
}
const QP = `varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,
  JP = `attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,
  { isNil: E2 } = Ka;
class eO extends od {
  setupShaders() {
    this.shaderModuleService.registerModule("blur-pass", { vs: JP, fs: QP });
    const {
        vs: e,
        fs: n,
        uniforms: r,
      } = this.shaderModuleService.getModule("blur-pass"),
      { width: o, height: l } = this.rendererService.getViewportSize();
    return {
      vs: e,
      fs: n,
      uniforms: mt(mt({}, r), {}, { u_ViewportSize: [o, l] }),
    };
  }
  convertOptionsToUniforms(e) {
    const n = {};
    return (
      E2(e.bloomRadius) || (n.u_radius = e.bloomRadius),
      E2(e.bloomIntensity) || (n.u_intensity = e.bloomIntensity),
      E2(e.bloomBaseRadio) || (n.u_baseRadio = e.bloomBaseRadio),
      n
    );
  }
}
const tO = `varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,
  nO = `attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,
  { isNil: rO } = Ka;
class iO extends od {
  setupShaders() {
    this.shaderModuleService.registerModule("blur-pass", { vs: nO, fs: tO });
    const {
        vs: e,
        fs: n,
        uniforms: r,
      } = this.shaderModuleService.getModule("blur-pass"),
      { width: o, height: l } = this.rendererService.getViewportSize();
    return {
      vs: e,
      fs: n,
      uniforms: mt(mt({}, r), {}, { u_ViewportSize: [o, l] }),
    };
  }
  convertOptionsToUniforms(e) {
    const n = {};
    return rO(e.blurRadius) || (n.u_BlurDir = [e.blurRadius, 0]), n;
  }
}
const aO = `varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,
  oO = `attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,
  { isNil: sO } = Ka;
class lO extends od {
  setupShaders() {
    this.shaderModuleService.registerModule("blur-pass", { vs: oO, fs: aO });
    const {
        vs: e,
        fs: n,
        uniforms: r,
      } = this.shaderModuleService.getModule("blur-pass"),
      { width: o, height: l } = this.rendererService.getViewportSize();
    return {
      vs: e,
      fs: n,
      uniforms: mt(mt({}, r), {}, { u_ViewportSize: [o, l] }),
    };
  }
  convertOptionsToUniforms(e) {
    const n = {};
    return sO(e.blurRadius) || (n.u_BlurDir = [0, e.blurRadius]), n;
  }
}
const cO = `varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,
  uO = `attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;
class dO extends od {
  setupShaders() {
    this.shaderModuleService.registerModule("colorhalftone-pass", {
      vs: uO,
      fs: cO,
    });
    const {
        vs: e,
        fs: n,
        uniforms: r,
      } = this.shaderModuleService.getModule("colorhalftone-pass"),
      { width: o, height: l } = this.rendererService.getViewportSize();
    return {
      vs: e,
      fs: n,
      uniforms: mt(mt({}, r), {}, { u_ViewportSize: [o, l] }),
    };
  }
}
const hO = `varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,
  pO = `attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;
class fO extends od {
  setupShaders() {
    return (
      this.shaderModuleService.registerModule("copy-pass", { vs: pO, fs: hO }),
      this.shaderModuleService.getModule("copy-pass")
    );
  }
}
const mO = `varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,
  gO = `attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;
class vO extends od {
  setupShaders() {
    this.shaderModuleService.registerModule("hexagonalpixelate-pass", {
      vs: gO,
      fs: mO,
    });
    const {
        vs: e,
        fs: n,
        uniforms: r,
      } = this.shaderModuleService.getModule("hexagonalpixelate-pass"),
      { width: o, height: l } = this.rendererService.getViewportSize();
    return {
      vs: e,
      fs: n,
      uniforms: mt(mt({}, r), {}, { u_ViewportSize: [o, l] }),
    };
  }
}
const _O = `varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,
  yO = `attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;
class xO extends od {
  setupShaders() {
    this.shaderModuleService.registerModule("ink-pass", { vs: yO, fs: _O });
    const {
        vs: e,
        fs: n,
        uniforms: r,
      } = this.shaderModuleService.getModule("ink-pass"),
      { width: o, height: l } = this.rendererService.getViewportSize();
    return {
      vs: e,
      fs: n,
      uniforms: mt(mt({}, r), {}, { u_ViewportSize: [o, l] }),
    };
  }
}
const bO = `varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,
  EO = `attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;
class AO extends od {
  setupShaders() {
    return (
      this.shaderModuleService.registerModule("noise-pass", { vs: EO, fs: bO }),
      this.shaderModuleService.getModule("noise-pass")
    );
  }
}
const TO = `attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,
  SO = `varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`;
class wO extends od {
  setupShaders() {
    return (
      this.shaderModuleService.registerModule("sepia-pass", { vs: TO, fs: SO }),
      this.shaderModuleService.getModule("sepia-pass")
    );
  }
}
const _8 = new CM();
let CO = 0;
function NO() {
  const t = new XP(),
    e = new MM(),
    n = new _M(),
    r = new IM(n),
    o = new nM(),
    l = new iM(),
    a = new bM(),
    h = new EM(),
    f = new xM(),
    v = {
      id: `${CO++}`,
      globalConfigService: _8,
      shaderModuleService: t,
      debugService: e,
      cameraService: n,
      coordinateSystemService: r,
      fontService: o,
      iconService: l,
      markerService: a,
      popupService: h,
      controlService: f,
      customRenderService: {},
    },
    E = new zM(v);
  v.layerService = E;
  const x = new OP(v);
  v.sceneService = x;
  const T = new LM(v);
  v.interactionService = T;
  const N = new kM(v);
  v.pickingService = N;
  const I = { clear: new ZP(), pixelPicking: new qP(), render: new KP() };
  v.normalPassFactory = (F) => I[F];
  const L = {
    copy: new fO(),
    bloom: new eO(),
    blurH: new iO(),
    blurV: new lO(),
    noise: new AO(),
    sepia: new wO(),
    colorHalftone: new dO(),
    hexagonalPixelate: new vO(),
    ink: new xO(),
  };
  return (
    (v.postProcessingPass = L), (v.postProcessingPassFactory = (F) => L[F]), v
  );
}
function a1(t) {
  const e = mt({}, t);
  return (
    (e.postProcessor = new $P(e.rendererService)),
    (e.multiPassRenderer = new YP(e.postProcessor)),
    (e.styleAttributeService = new ZM(e.rendererService)),
    e
  );
}
const Om = [
  "loaded",
  "fontloaded",
  "maploaded",
  "resize",
  "destroy",
  "dragstart",
  "dragging",
  "dragend",
  "dragcancel",
];
let Jo = (function (t) {
  return (
    (t.IMAGE = "image"),
    (t.CUSTOMIMAGE = "customImage"),
    (t.ARRAYBUFFER = "arraybuffer"),
    (t.RGB = "rgb"),
    (t.TERRAINRGB = "terrainRGB"),
    (t.CUSTOMRGB = "customRGB"),
    (t.CUSTOMARRAYBUFFER = "customArrayBuffer"),
    (t.CUSTOMTERRAINRGB = "customTerrainRGB"),
    t
  );
})({});
var y8 = (t, e, n) =>
    new Promise((r, o) => {
      var l = (f) => {
          try {
            h(n.next(f));
          } catch (v) {
            o(v);
          }
        },
        a = (f) => {
          try {
            h(n.throw(f));
          } catch (v) {
            o(v);
          }
        },
        h = (f) => (f.done ? r(f.value) : Promise.resolve(f.value).then(l, a));
      h((n = n.apply(t, e)).next());
    }),
  RO = (t, e, n, r) =>
    y8(void 0, null, function* () {
      return new Promise((o, l) => {
        e({ x: t.x, y: t.y, z: t.z }, (a, h) => {
          if (a || h.length === 0) {
            l(a);
            return;
          }
          h &&
            n_([{ data: h, bands: [0] }], n, r, (f, v) => {
              f ? l(f) : v && o(v);
            });
        });
      });
    }),
  IO = (t, e) =>
    y8(void 0, null, function* () {
      return new Promise((n, r) => {
        e({ x: t.x, y: t.y, z: t.z }, (o, l) => {
          if (o || !l) {
            r(o);
            return;
          }
          l instanceof ArrayBuffer
            ? SS(l, (a, h) => {
                a && r(a), n(h);
              })
            : l instanceof HTMLImageElement
            ? n(l)
            : r(o);
        });
      });
    });
function MO(t, e) {
  return Array.isArray(t)
    ? typeof t[0] == "string"
      ? t.map((n) => gp(n, e))
      : t.map((n) => ({ url: gp(n.url, e), bands: n.bands || [0] }))
    : gp(t, e);
}
function PO(t) {
  return typeof t == "string"
    ? [{ url: t, bands: [0] }]
    : typeof t[0] == "string"
    ? t.map((e) => ({ url: e, bands: [0] }))
    : t;
}
function j5(t, e) {
  t.xhrCancel = () => {
    e.map((n) => {
      n.abort();
    });
  };
}
var OO = Object.defineProperty,
  LO = Object.defineProperties,
  DO = Object.getOwnPropertyDescriptors,
  W5 = Object.getOwnPropertySymbols,
  BO = Object.prototype.hasOwnProperty,
  FO = Object.prototype.propertyIsEnumerable,
  X5 = (t, e, n) =>
    e in t
      ? OO(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  G5 = (t, e) => {
    for (var n in e || (e = {})) BO.call(e, n) && X5(t, n, e[n]);
    if (W5) for (var n of W5(e)) FO.call(e, n) && X5(t, n, e[n]);
    return t;
  },
  Z5 = (t, e) => LO(t, DO(e)),
  x8 = (t, e, n) =>
    new Promise((r, o) => {
      var l = (f) => {
          try {
            h(n.next(f));
          } catch (v) {
            o(v);
          }
        },
        a = (f) => {
          try {
            h(n.throw(f));
          } catch (v) {
            o(v);
          }
        },
        h = (f) => (f.done ? r(f.value) : Promise.resolve(f.value).then(l, a));
      h((n = n.apply(t, e)).next());
    }),
  kO = (t, e, n, r, o) =>
    x8(void 0, null, function* () {
      const l = PO(e.url);
      if (l.length > 1) {
        const { rasterFiles: a, xhrList: h, errList: f } = yield UO(l, e);
        if ((j5(t, h), f.length > 0)) {
          n(f, null);
          return;
        }
        n_(a, r, o, n);
      } else {
        const a = c3(e, (h, f) => {
          if (h) n(h);
          else if (f) {
            const v = [{ data: f, bands: l[0].bands }];
            n_(v, r, o, n);
          }
        });
        j5(t, [a]);
      }
    });
function UO(t, e) {
  return x8(this, null, function* () {
    const n = [],
      r = [],
      o = [];
    for (let l = 0; l < t.length; l++) {
      const a = t[l],
        h = Z5(G5({}, e), { url: a.url }),
        f = a.bands,
        {
          err: v,
          data: E,
          xhr: x,
        } = yield ES(Z5(G5({}, h), { type: "arrayBuffer" }));
      v && o.push(v), r.push(x), n.push({ data: E, bands: f });
    }
    return { rasterFiles: n, xhrList: r, errList: o };
  });
}
var zO = Object.defineProperty,
  VO = Object.defineProperties,
  HO = Object.getOwnPropertyDescriptors,
  Y5 = Object.getOwnPropertySymbols,
  jO = Object.prototype.hasOwnProperty,
  WO = Object.prototype.propertyIsEnumerable,
  q5 = (t, e, n) =>
    e in t
      ? zO(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  cg = (t, e) => {
    for (var n in e || (e = {})) jO.call(e, n) && q5(t, n, e[n]);
    if (Y5) for (var n of Y5(e)) WO.call(e, n) && q5(t, n, e[n]);
    return t;
  },
  b8 = (t, e) => VO(t, HO(e)),
  E8 = (t, e, n) =>
    new Promise((r, o) => {
      var l = (f) => {
          try {
            h(n.next(f));
          } catch (v) {
            o(v);
          }
        },
        a = (f) => {
          try {
            h(n.throw(f));
          } catch (v) {
            o(v);
          }
        },
        h = (f) => (f.done ? r(f.value) : Promise.resolve(f.value).then(l, a));
      h((n = n.apply(t, e)).next());
    }),
  XO = (t, e, n, r) =>
    E8(void 0, null, function* () {
      const { format: o = A8, operation: l, requestParameters: a = {} } = r,
        h = b8(cg({}, a), { url: MO(t, e) });
      return new Promise((f, v) => {
        kO(
          n,
          h,
          (E, x) => {
            E ? v(E) : x && f(x);
          },
          o,
          l
        );
      });
    }),
  $5 = (t, e, n, r) =>
    E8(void 0, null, function* () {
      let o;
      const l = Array.isArray(t) ? t[0] : t;
      return (
        r.wmtsOptions
          ? (o = ((r == null ? void 0 : r.getURLFromTemplate) || yN)(
              l,
              cg(cg({}, e), r.wmtsOptions)
            ))
          : (o = ((r == null ? void 0 : r.getURLFromTemplate) || gp)(l, e)),
        new Promise((a, h) => {
          var f;
          const v = G2(
            b8(cg({}, r == null ? void 0 : r.requestParameters), {
              url: o,
              type:
                ((f = r == null ? void 0 : r.requestParameters) == null
                  ? void 0
                  : f.type) || "arrayBuffer",
            }),
            (E, x) => {
              E ? h(E) : x && a(x);
            },
            r.transformResponse
          );
          n.xhrCancel = () => v.cancel();
        })
      );
    }),
  A8 = () => ({ rasterData: new Uint8Array([0]), width: 1, height: 1 }),
  GO = Object.defineProperty,
  ZO = Object.defineProperties,
  YO = Object.getOwnPropertyDescriptors,
  K5 = Object.getOwnPropertySymbols,
  qO = Object.prototype.hasOwnProperty,
  $O = Object.prototype.propertyIsEnumerable,
  Q5 = (t, e, n) =>
    e in t
      ? GO(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  J5 = (t, e) => {
    for (var n in e || (e = {})) qO.call(e, n) && Q5(t, n, e[n]);
    if (K5) for (var n of K5(e)) $O.call(e, n) && Q5(t, n, e[n]);
    return t;
  },
  KO = (t, e) => ZO(t, YO(e)),
  QO = { tileSize: 256, minZoom: 0, maxZoom: 1 / 0, zoomOffset: 0, warp: !0 };
Jo.ARRAYBUFFER, Jo.RGB;
function JO(t) {
  return !!(
    (Array.isArray(t) && t.length === 0) ||
    (!Array.isArray(t) && typeof t != "string")
  );
}
function eL(t, e = {}) {
  if (JO(t)) throw new Error("tile server url is error");
  let n = (e == null ? void 0 : e.dataType) || Jo.IMAGE;
  n === Jo.RGB && (n = Jo.ARRAYBUFFER);
  const r = (l, a) => {
      switch (n) {
        case Jo.IMAGE:
          return $5(t, l, a, e);
        case Jo.CUSTOMIMAGE:
        case Jo.CUSTOMTERRAINRGB:
          return IO(a, e == null ? void 0 : e.getCustomData);
        case Jo.ARRAYBUFFER:
          return XO(t, l, a, e);
        case Jo.CUSTOMARRAYBUFFER:
        case Jo.CUSTOMRGB:
          return RO(
            a,
            e == null ? void 0 : e.getCustomData,
            (e == null ? void 0 : e.format) || A8,
            e == null ? void 0 : e.operation
          );
        default:
          return $5(t, l, a, e);
      }
    },
    o = KO(J5(J5({}, QO), e), { getTileData: r });
  return { data: t, dataArray: [], tilesetOptions: o, isTile: !0 };
}
var tL = Object.defineProperty,
  nL = Object.defineProperties,
  rL = Object.getOwnPropertyDescriptors,
  Dg = Object.getOwnPropertySymbols,
  T8 = Object.prototype.hasOwnProperty,
  S8 = Object.prototype.propertyIsEnumerable,
  ex = (t, e, n) =>
    e in t
      ? tL(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  iL = (t, e) => {
    for (var n in e || (e = {})) T8.call(e, n) && ex(t, n, e[n]);
    if (Dg) for (var n of Dg(e)) S8.call(e, n) && ex(t, n, e[n]);
    return t;
  },
  aL = (t, e) => nL(t, rL(e)),
  oL = (t, e) => {
    var n = {};
    for (var r in t) T8.call(t, r) && e.indexOf(r) < 0 && (n[r] = t[r]);
    if (t != null && Dg)
      for (var r of Dg(t)) e.indexOf(r) < 0 && S8.call(t, r) && (n[r] = t[r]);
    return n;
  };
function sL(t, e) {
  const n = e,
    {
      extent: r = [121.168, 30.2828, 121.384, 30.4219],
      coordinates: o,
      width: l,
      height: a,
    } = n,
    h = oL(n, ["extent", "coordinates", "width", "height"]);
  t.length < 2 && console.warn("RGB解析需要2个波段的数据");
  const [f, v] = h.bands || [0, 1],
    E = [t[f], t[v]],
    x = [];
  for (let I = 0; I < E[0].length; I++)
    x.push((E[1][I] - E[0][I]) / (E[1][I] + E[0][I]));
  const T = O1(o, r);
  return {
    _id: 1,
    dataArray: [
      aL(iL({ _id: 1, data: x, width: l, height: a }, h), { coordinates: T }),
    ],
  };
}
var lL = Object.defineProperty,
  cL = Object.defineProperties,
  uL = Object.getOwnPropertyDescriptors,
  Bg = Object.getOwnPropertySymbols,
  w8 = Object.prototype.hasOwnProperty,
  C8 = Object.prototype.propertyIsEnumerable,
  tx = (t, e, n) =>
    e in t
      ? lL(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  dL = (t, e) => {
    for (var n in e || (e = {})) w8.call(e, n) && tx(t, n, e[n]);
    if (Bg) for (var n of Bg(e)) C8.call(e, n) && tx(t, n, e[n]);
    return t;
  },
  hL = (t, e) => cL(t, uL(e)),
  pL = (t, e) => {
    var n = {};
    for (var r in t) w8.call(t, r) && e.indexOf(r) < 0 && (n[r] = t[r]);
    if (t != null && Bg)
      for (var r of Bg(t)) e.indexOf(r) < 0 && C8.call(t, r) && (n[r] = t[r]);
    return n;
  };
function fL(t, e) {
  const n = e,
    { extent: r, coordinates: o, width: l, height: a } = n,
    h = pL(n, ["extent", "coordinates", "width", "height"]);
  t.length < 3 && console.warn("RGB解析需要三个波段的数据");
  const [f, v, E] = h.bands || [0, 1, 2],
    x = [t[f], t[v], t[E]],
    T = [],
    [N, I] = (h == null ? void 0 : h.countCut) || [2, 98],
    L = (h == null ? void 0 : h.RMinMax) || _p(x[0], N, I),
    F = (h == null ? void 0 : h.GMinMax) || _p(x[1], N, I),
    X = (h == null ? void 0 : h.BMinMax) || _p(x[2], N, I);
  for (let Q = 0; Q < x[0].length; Q++)
    T.push(Math.max(0, x[0][Q] - L[0])),
      T.push(Math.max(0, x[1][Q] - F[0])),
      T.push(Math.max(0, x[2][Q] - X[0]));
  const G = O1(o, r);
  return {
    _id: 1,
    dataArray: [
      hL(
        dL(
          {
            _id: 1,
            data: T,
            width: l,
            height: a,
            rMinMax: L,
            gMinMax: F,
            bMinMax: X,
          },
          h
        ),
        { coordinates: G }
      ),
    ],
  };
}
var mL = Object.defineProperty,
  gL = Object.defineProperties,
  vL = Object.getOwnPropertyDescriptors,
  Fg = Object.getOwnPropertySymbols,
  N8 = Object.prototype.hasOwnProperty,
  R8 = Object.prototype.propertyIsEnumerable,
  nx = (t, e, n) =>
    e in t
      ? mL(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  _L = (t, e) => {
    for (var n in e || (e = {})) N8.call(e, n) && nx(t, n, e[n]);
    if (Fg) for (var n of Fg(e)) R8.call(e, n) && nx(t, n, e[n]);
    return t;
  },
  yL = (t, e) => gL(t, vL(e)),
  xL = (t, e) => {
    var n = {};
    for (var r in t) N8.call(t, r) && e.indexOf(r) < 0 && (n[r] = t[r]);
    if (t != null && Fg)
      for (var r of Fg(t)) e.indexOf(r) < 0 && R8.call(t, r) && (n[r] = t[r]);
    return n;
  };
function bL(t, e) {
  const n = e,
    {
      extent: r,
      coordinates: o,
      min: l,
      max: a,
      width: h,
      height: f,
      format: v,
      operation: E,
    } = n,
    x = xL(n, [
      "extent",
      "coordinates",
      "min",
      "max",
      "width",
      "height",
      "format",
      "operation",
    ]);
  let T;
  if (v === void 0 || UE(t)) T = Array.from(t);
  else {
    const L = Array.isArray(t) ? t : [t];
    T = x3(L, v, E);
  }
  const N = O1(o, r);
  return {
    _id: 1,
    dataArray: [
      yL(_L({ _id: 1, data: T, width: h, height: f }, x), {
        min: l,
        max: a,
        coordinates: N,
      }),
    ],
  };
}
var EL = Object.defineProperty,
  AL = Object.defineProperties,
  TL = Object.getOwnPropertyDescriptors,
  rx = Object.getOwnPropertySymbols,
  SL = Object.prototype.hasOwnProperty,
  wL = Object.prototype.propertyIsEnumerable,
  ix = (t, e, n) =>
    e in t
      ? EL(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  ax = (t, e) => {
    for (var n in e || (e = {})) SL.call(e, n) && ix(t, n, e[n]);
    if (rx) for (var n of rx(e)) wL.call(e, n) && ix(t, n, e[n]);
    return t;
  },
  CL = (t, e) => AL(t, TL(e)),
  NL = (t, e, n) =>
    new Promise((r, o) => {
      var l = (f) => {
          try {
            h(n.next(f));
          } catch (v) {
            o(v);
          }
        },
        a = (f) => {
          try {
            h(n.throw(f));
          } catch (v) {
            o(v);
          }
        },
        h = (f) => (f.done ? r(f.value) : Promise.resolve(f.value).then(l, a));
      h((n = n.apply(t, e)).next());
    }),
  RL = { tileSize: 256, minZoom: 0, maxZoom: 1 / 0, zoomOffset: 0 },
  IL = (t) =>
    NL(void 0, null, function* () {
      return new Promise((e) => {
        const [n, r, o, l] = t.bounds,
          a = {
            layers: {
              testTile: {
                features: [
                  {
                    type: "Feature",
                    properties: {
                      key: t.x + "/" + t.y + "/" + t.z,
                      x: (n + o) / 2,
                      y: (r + l) / 2,
                    },
                    geometry: {
                      type: "LineString",
                      coordinates: [
                        [o, l],
                        [o, r],
                        [n, r],
                        [n, r],
                      ],
                    },
                  },
                ],
              },
            },
          };
        e(a);
      });
    });
function ML(t, e) {
  const n = (o) => IL(o),
    r = CL(ax(ax({}, RL), e), { getTileData: n });
  return { data: t, dataArray: [], tilesetOptions: r, isTile: !0 };
}
var I8 = { exports: {} };
(function (t, e) {
  (function (n, r) {
    t.exports = r();
  })(cv, function () {
    function n(Ve, Ae, Be, He, nt, Ut) {
      if (!(nt - He <= Be)) {
        var Yt = (He + nt) >> 1;
        r(Ve, Ae, Yt, He, nt, Ut % 2),
          n(Ve, Ae, Be, He, Yt - 1, Ut + 1),
          n(Ve, Ae, Be, Yt + 1, nt, Ut + 1);
      }
    }
    function r(Ve, Ae, Be, He, nt, Ut) {
      for (; nt > He; ) {
        if (nt - He > 600) {
          var Yt = nt - He + 1,
            Ht = Be - He + 1,
            On = Math.log(Yt),
            gn = 0.5 * Math.exp((2 * On) / 3),
            xn =
              0.5 *
              Math.sqrt((On * gn * (Yt - gn)) / Yt) *
              (Ht - Yt / 2 < 0 ? -1 : 1),
            Kn = Math.max(He, Math.floor(Be - (Ht * gn) / Yt + xn)),
            er = Math.min(nt, Math.floor(Be + ((Yt - Ht) * gn) / Yt + xn));
          r(Ve, Ae, Be, Kn, er, Ut);
        }
        var _r = Ae[2 * Be + Ut],
          Nr = He,
          ir = nt;
        for (
          o(Ve, Ae, He, Be), Ae[2 * nt + Ut] > _r && o(Ve, Ae, He, nt);
          Nr < ir;

        ) {
          for (o(Ve, Ae, Nr, ir), Nr++, ir--; Ae[2 * Nr + Ut] < _r; ) Nr++;
          for (; Ae[2 * ir + Ut] > _r; ) ir--;
        }
        Ae[2 * He + Ut] === _r ? o(Ve, Ae, He, ir) : (ir++, o(Ve, Ae, ir, nt)),
          ir <= Be && (He = ir + 1),
          Be <= ir && (nt = ir - 1);
      }
    }
    function o(Ve, Ae, Be, He) {
      l(Ve, Be, He), l(Ae, 2 * Be, 2 * He), l(Ae, 2 * Be + 1, 2 * He + 1);
    }
    function l(Ve, Ae, Be) {
      var He = Ve[Ae];
      (Ve[Ae] = Ve[Be]), (Ve[Be] = He);
    }
    function a(Ve, Ae, Be, He, nt, Ut, Yt) {
      for (var Ht = [0, Ve.length - 1, 0], On = [], gn, xn; Ht.length; ) {
        var Kn = Ht.pop(),
          er = Ht.pop(),
          _r = Ht.pop();
        if (er - _r <= Yt) {
          for (var Nr = _r; Nr <= er; Nr++)
            (gn = Ae[2 * Nr]),
              (xn = Ae[2 * Nr + 1]),
              gn >= Be && gn <= nt && xn >= He && xn <= Ut && On.push(Ve[Nr]);
          continue;
        }
        var ir = Math.floor((_r + er) / 2);
        (gn = Ae[2 * ir]),
          (xn = Ae[2 * ir + 1]),
          gn >= Be && gn <= nt && xn >= He && xn <= Ut && On.push(Ve[ir]);
        var $i = (Kn + 1) % 2;
        (Kn === 0 ? Be <= gn : He <= xn) &&
          (Ht.push(_r), Ht.push(ir - 1), Ht.push($i)),
          (Kn === 0 ? nt >= gn : Ut >= xn) &&
            (Ht.push(ir + 1), Ht.push(er), Ht.push($i));
      }
      return On;
    }
    function h(Ve, Ae, Be, He, nt, Ut) {
      for (var Yt = [0, Ve.length - 1, 0], Ht = [], On = nt * nt; Yt.length; ) {
        var gn = Yt.pop(),
          xn = Yt.pop(),
          Kn = Yt.pop();
        if (xn - Kn <= Ut) {
          for (var er = Kn; er <= xn; er++)
            f(Ae[2 * er], Ae[2 * er + 1], Be, He) <= On && Ht.push(Ve[er]);
          continue;
        }
        var _r = Math.floor((Kn + xn) / 2),
          Nr = Ae[2 * _r],
          ir = Ae[2 * _r + 1];
        f(Nr, ir, Be, He) <= On && Ht.push(Ve[_r]);
        var $i = (gn + 1) % 2;
        (gn === 0 ? Be - nt <= Nr : He - nt <= ir) &&
          (Yt.push(Kn), Yt.push(_r - 1), Yt.push($i)),
          (gn === 0 ? Be + nt >= Nr : He + nt >= ir) &&
            (Yt.push(_r + 1), Yt.push(xn), Yt.push($i));
      }
      return Ht;
    }
    function f(Ve, Ae, Be, He) {
      var nt = Ve - Be,
        Ut = Ae - He;
      return nt * nt + Ut * Ut;
    }
    var v = function (Ve) {
        return Ve[0];
      },
      E = function (Ve) {
        return Ve[1];
      },
      x = function (Ae, Be, He, nt, Ut) {
        Be === void 0 && (Be = v),
          He === void 0 && (He = E),
          nt === void 0 && (nt = 64),
          Ut === void 0 && (Ut = Float64Array),
          (this.nodeSize = nt),
          (this.points = Ae);
        for (
          var Yt = Ae.length < 65536 ? Uint16Array : Uint32Array,
            Ht = (this.ids = new Yt(Ae.length)),
            On = (this.coords = new Ut(Ae.length * 2)),
            gn = 0;
          gn < Ae.length;
          gn++
        )
          (Ht[gn] = gn),
            (On[2 * gn] = Be(Ae[gn])),
            (On[2 * gn + 1] = He(Ae[gn]));
        n(Ht, On, nt, 0, Ht.length - 1, 0);
      };
    (x.prototype.range = function (Ae, Be, He, nt) {
      return a(this.ids, this.coords, Ae, Be, He, nt, this.nodeSize);
    }),
      (x.prototype.within = function (Ae, Be, He) {
        return h(this.ids, this.coords, Ae, Be, He, this.nodeSize);
      });
    var T = {
        minZoom: 0,
        maxZoom: 16,
        minPoints: 2,
        radius: 40,
        extent: 512,
        nodeSize: 64,
        log: !1,
        generateId: !1,
        reduce: null,
        map: function (Ve) {
          return Ve;
        },
      },
      N =
        Math.fround ||
        (function (Ve) {
          return function (Ae) {
            return (Ve[0] = +Ae), Ve[0];
          };
        })(new Float32Array(1)),
      I = function (Ae) {
        (this.options = ue(Object.create(T), Ae)),
          (this.trees = new Array(this.options.maxZoom + 1));
      };
    (I.prototype.load = function (Ae) {
      var Be = this.options,
        He = Be.log,
        nt = Be.minZoom,
        Ut = Be.maxZoom,
        Yt = Be.nodeSize;
      He && console.time("total time");
      var Ht = "prepare " + Ae.length + " points";
      He && console.time(Ht), (this.points = Ae);
      for (var On = [], gn = 0; gn < Ae.length; gn++)
        Ae[gn].geometry && On.push(F(Ae[gn], gn));
      (this.trees[Ut + 1] = new x(On, ke, ut, Yt, Float32Array)),
        He && console.timeEnd(Ht);
      for (var xn = Ut; xn >= nt; xn--) {
        var Kn = +Date.now();
        (On = this._cluster(On, xn)),
          (this.trees[xn] = new x(On, ke, ut, Yt, Float32Array)),
          He &&
            console.log(
              "z%d: %d clusters in %dms",
              xn,
              On.length,
              +Date.now() - Kn
            );
      }
      return He && console.timeEnd("total time"), this;
    }),
      (I.prototype.getClusters = function (Ae, Be) {
        var He = ((((Ae[0] + 180) % 360) + 360) % 360) - 180,
          nt = Math.max(-90, Math.min(90, Ae[1])),
          Ut =
            Ae[2] === 180 ? 180 : ((((Ae[2] + 180) % 360) + 360) % 360) - 180,
          Yt = Math.max(-90, Math.min(90, Ae[3]));
        if (Ae[2] - Ae[0] >= 360) (He = -180), (Ut = 180);
        else if (He > Ut) {
          var Ht = this.getClusters([He, nt, 180, Yt], Be),
            On = this.getClusters([-180, nt, Ut, Yt], Be);
          return Ht.concat(On);
        }
        for (
          var gn = this.trees[this._limitZoom(Be)],
            xn = gn.range(K(He), Q(Yt), K(Ut), Q(nt)),
            Kn = [],
            er = 0,
            _r = xn;
          er < _r.length;
          er += 1
        ) {
          var Nr = _r[er],
            ir = gn.points[Nr];
          Kn.push(ir.numPoints ? X(ir) : this.points[ir.index]);
        }
        return Kn;
      }),
      (I.prototype.getChildren = function (Ae) {
        var Be = this._getOriginId(Ae),
          He = this._getOriginZoom(Ae),
          nt = "No cluster with the specified id.",
          Ut = this.trees[He];
        if (!Ut) throw new Error(nt);
        var Yt = Ut.points[Be];
        if (!Yt) throw new Error(nt);
        for (
          var Ht =
              this.options.radius / (this.options.extent * Math.pow(2, He - 1)),
            On = Ut.within(Yt.x, Yt.y, Ht),
            gn = [],
            xn = 0,
            Kn = On;
          xn < Kn.length;
          xn += 1
        ) {
          var er = Kn[xn],
            _r = Ut.points[er];
          _r.parentId === Ae &&
            gn.push(_r.numPoints ? X(_r) : this.points[_r.index]);
        }
        if (gn.length === 0) throw new Error(nt);
        return gn;
      }),
      (I.prototype.getLeaves = function (Ae, Be, He) {
        (Be = Be || 10), (He = He || 0);
        var nt = [];
        return this._appendLeaves(nt, Ae, Be, He, 0), nt;
      }),
      (I.prototype.getTile = function (Ae, Be, He) {
        var nt = this.trees[this._limitZoom(Ae)],
          Ut = Math.pow(2, Ae),
          Yt = this.options,
          Ht = Yt.extent,
          On = Yt.radius,
          gn = On / Ht,
          xn = (He - gn) / Ut,
          Kn = (He + 1 + gn) / Ut,
          er = { features: [] };
        return (
          this._addTileFeatures(
            nt.range((Be - gn) / Ut, xn, (Be + 1 + gn) / Ut, Kn),
            nt.points,
            Be,
            He,
            Ut,
            er
          ),
          Be === 0 &&
            this._addTileFeatures(
              nt.range(1 - gn / Ut, xn, 1, Kn),
              nt.points,
              Ut,
              He,
              Ut,
              er
            ),
          Be === Ut - 1 &&
            this._addTileFeatures(
              nt.range(0, xn, gn / Ut, Kn),
              nt.points,
              -1,
              He,
              Ut,
              er
            ),
          er.features.length ? er : null
        );
      }),
      (I.prototype.getClusterExpansionZoom = function (Ae) {
        for (
          var Be = this._getOriginZoom(Ae) - 1;
          Be <= this.options.maxZoom;

        ) {
          var He = this.getChildren(Ae);
          if ((Be++, He.length !== 1)) break;
          Ae = He[0].properties.cluster_id;
        }
        return Be;
      }),
      (I.prototype._appendLeaves = function (Ae, Be, He, nt, Ut) {
        for (
          var Yt = this.getChildren(Be), Ht = 0, On = Yt;
          Ht < On.length;
          Ht += 1
        ) {
          var gn = On[Ht],
            xn = gn.properties;
          if (
            (xn && xn.cluster
              ? Ut + xn.point_count <= nt
                ? (Ut += xn.point_count)
                : (Ut = this._appendLeaves(Ae, xn.cluster_id, He, nt, Ut))
              : Ut < nt
              ? Ut++
              : Ae.push(gn),
            Ae.length === He)
          )
            break;
        }
        return Ut;
      }),
      (I.prototype._addTileFeatures = function (Ae, Be, He, nt, Ut, Yt) {
        for (var Ht = 0, On = Ae; Ht < On.length; Ht += 1) {
          var gn = On[Ht],
            xn = Be[gn],
            Kn = xn.numPoints,
            er = void 0,
            _r = void 0,
            Nr = void 0;
          if (Kn) (er = G(xn)), (_r = xn.x), (Nr = xn.y);
          else {
            var ir = this.points[xn.index];
            (er = ir.properties),
              (_r = K(ir.geometry.coordinates[0])),
              (Nr = Q(ir.geometry.coordinates[1]));
          }
          var $i = {
              type: 1,
              geometry: [
                [
                  Math.round(this.options.extent * (_r * Ut - He)),
                  Math.round(this.options.extent * (Nr * Ut - nt)),
                ],
              ],
              tags: er,
            },
            Tr = void 0;
          Kn
            ? (Tr = xn.id)
            : this.options.generateId
            ? (Tr = xn.index)
            : this.points[xn.index].id && (Tr = this.points[xn.index].id),
            Tr !== void 0 && ($i.id = Tr),
            Yt.features.push($i);
        }
      }),
      (I.prototype._limitZoom = function (Ae) {
        return Math.max(
          this.options.minZoom,
          Math.min(Math.floor(+Ae), this.options.maxZoom + 1)
        );
      }),
      (I.prototype._cluster = function (Ae, Be) {
        for (
          var He = [],
            nt = this.options,
            Ut = nt.radius,
            Yt = nt.extent,
            Ht = nt.reduce,
            On = nt.minPoints,
            gn = Ut / (Yt * Math.pow(2, Be)),
            xn = 0;
          xn < Ae.length;
          xn++
        ) {
          var Kn = Ae[xn];
          if (!(Kn.zoom <= Be)) {
            Kn.zoom = Be;
            for (
              var er = this.trees[Be + 1],
                _r = er.within(Kn.x, Kn.y, gn),
                Nr = Kn.numPoints || 1,
                ir = Nr,
                $i = 0,
                Tr = _r;
              $i < Tr.length;
              $i += 1
            ) {
              var Fi = Tr[$i],
                qe = er.points[Fi];
              qe.zoom > Be && (ir += qe.numPoints || 1);
            }
            if (ir > Nr && ir >= On) {
              for (
                var $t = Kn.x * Nr,
                  Cn = Kn.y * Nr,
                  St = Ht && Nr > 1 ? this._map(Kn, !0) : null,
                  An = (xn << 5) + (Be + 1) + this.points.length,
                  ar = 0,
                  yr = _r;
                ar < yr.length;
                ar += 1
              ) {
                var nr = yr[ar],
                  Qn = er.points[nr];
                if (!(Qn.zoom <= Be)) {
                  Qn.zoom = Be;
                  var Sr = Qn.numPoints || 1;
                  ($t += Qn.x * Sr),
                    (Cn += Qn.y * Sr),
                    (Qn.parentId = An),
                    Ht &&
                      (St || (St = this._map(Kn, !0)), Ht(St, this._map(Qn)));
                }
              }
              (Kn.parentId = An), He.push(L($t / ir, Cn / ir, An, ir, St));
            } else if ((He.push(Kn), ir > 1))
              for (var ta = 0, ei = _r; ta < ei.length; ta += 1) {
                var ri = ei[ta],
                  Ra = er.points[ri];
                Ra.zoom <= Be || ((Ra.zoom = Be), He.push(Ra));
              }
          }
        }
        return He;
      }),
      (I.prototype._getOriginId = function (Ae) {
        return (Ae - this.points.length) >> 5;
      }),
      (I.prototype._getOriginZoom = function (Ae) {
        return (Ae - this.points.length) % 32;
      }),
      (I.prototype._map = function (Ae, Be) {
        if (Ae.numPoints) return Be ? ue({}, Ae.properties) : Ae.properties;
        var He = this.points[Ae.index].properties,
          nt = this.options.map(He);
        return Be && nt === He ? ue({}, nt) : nt;
      });
    function L(Ve, Ae, Be, He, nt) {
      return {
        x: N(Ve),
        y: N(Ae),
        zoom: 1 / 0,
        id: Be,
        parentId: -1,
        numPoints: He,
        properties: nt,
      };
    }
    function F(Ve, Ae) {
      var Be = Ve.geometry.coordinates,
        He = Be[0],
        nt = Be[1];
      return { x: N(K(He)), y: N(Q(nt)), zoom: 1 / 0, index: Ae, parentId: -1 };
    }
    function X(Ve) {
      return {
        type: "Feature",
        id: Ve.id,
        properties: G(Ve),
        geometry: { type: "Point", coordinates: [ee(Ve.x), Se(Ve.y)] },
      };
    }
    function G(Ve) {
      var Ae = Ve.numPoints,
        Be =
          Ae >= 1e4
            ? Math.round(Ae / 1e3) + "k"
            : Ae >= 1e3
            ? Math.round(Ae / 100) / 10 + "k"
            : Ae;
      return ue(ue({}, Ve.properties), {
        cluster: !0,
        cluster_id: Ve.id,
        point_count: Ae,
        point_count_abbreviated: Be,
      });
    }
    function K(Ve) {
      return Ve / 360 + 0.5;
    }
    function Q(Ve) {
      var Ae = Math.sin((Ve * Math.PI) / 180),
        Be = 0.5 - (0.25 * Math.log((1 + Ae) / (1 - Ae))) / Math.PI;
      return Be < 0 ? 0 : Be > 1 ? 1 : Be;
    }
    function ee(Ve) {
      return (Ve - 0.5) * 360;
    }
    function Se(Ve) {
      var Ae = ((180 - Ve * 360) * Math.PI) / 180;
      return (360 * Math.atan(Math.exp(Ae))) / Math.PI - 90;
    }
    function ue(Ve, Ae) {
      for (var Be in Ae) Ve[Be] = Ae[Be];
      return Ve;
    }
    function ke(Ve) {
      return Ve.x;
    }
    function ut(Ve) {
      return Ve.y;
    }
    return I;
  });
})(I8);
var PL = I8.exports;
const OL = ea(PL);
var LL = Object.defineProperty,
  ox = Object.getOwnPropertySymbols,
  DL = Object.prototype.hasOwnProperty,
  BL = Object.prototype.propertyIsEnumerable,
  sx = (t, e, n) =>
    e in t
      ? LL(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  M8 = (t, e) => {
    for (var n in e || (e = {})) DL.call(e, n) && sx(t, n, e[n]);
    if (ox) for (var n of ox(e)) BL.call(e, n) && sx(t, n, e[n]);
    return t;
  };
function P8(t, e) {
  const { radius: n = 40, maxZoom: r = 18, minZoom: o = 0, zoom: l = 2 } = e;
  if (t.pointIndex) {
    const f = t.pointIndex.getClusters(t.extent, Math.floor(l));
    return (t.dataArray = FL(f)), t;
  }
  const a = new OL({ radius: n, minZoom: o, maxZoom: r }),
    h = { type: "FeatureCollection", features: [] };
  return (
    (h.features = t.dataArray.map((f) => ({
      type: "Feature",
      geometry: { type: "Point", coordinates: f.coordinates },
      properties: M8({}, f),
    }))),
    a.load(h.features),
    a
  );
}
function FL(t) {
  return t.map((e, n) =>
    M8({ coordinates: e.geometry.coordinates, _id: n + 1 }, e.properties)
  );
}
function kL(t) {
  if (t.length === 0) throw new Error("max requires at least one data point");
  let e = t[0];
  for (let n = 1; n < t.length; n++) t[n] > e && (e = t[n]);
  return e;
}
function UL(t) {
  if (t.length === 0) throw new Error("min requires at least one data point");
  let e = t[0];
  for (let n = 1; n < t.length; n++) t[n] < e && (e = t[n]);
  return e;
}
function O8(t) {
  if (t.length === 0) return 0;
  let e = t[0],
    n = 0,
    r;
  for (let o = 1; o < t.length; o++)
    (r = e + t[o] * 1),
      Math.abs(e) >= Math.abs(t[o]) ? (n += e - r + t[o]) : (n += t[o] - r + e),
      (e = r);
  return e + n * 1;
}
function zL(t) {
  if (t.length === 0) throw new Error("mean requires at least one data point");
  return O8(t) / t.length;
}
var VL = { min: UL, max: kL, mean: zL, sum: O8 },
  HL = Object.defineProperty,
  lx = Object.getOwnPropertySymbols,
  jL = Object.prototype.hasOwnProperty,
  WL = Object.prototype.propertyIsEnumerable,
  cx = (t, e, n) =>
    e in t
      ? HL(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  Sf = (t, e) => {
    for (var n in e || (e = {})) jL.call(e, n) && cx(t, n, e[n]);
    if (lx) for (var n of lx(e)) WL.call(e, n) && cx(t, n, e[n]);
    return t;
  },
  ux = (t, e, n) =>
    new Promise((r, o) => {
      var l = (f) => {
          try {
            h(n.next(f));
          } catch (v) {
            o(v);
          }
        },
        a = (f) => {
          try {
            h(n.throw(f));
          } catch (v) {
            o(v);
          }
        },
        h = (f) => (f.done ? r(f.value) : Promise.resolve(f.value).then(l, a));
      h((n = n.apply(t, e)).next());
    }),
  { cloneDeep: XL, isFunction: dx, isString: GL, mergeWith: ZL } = Ka;
function YL(t, e) {
  if (Array.isArray(e)) return e;
}
var qL = class extends _s.EventEmitter {
  constructor(t, e) {
    super(),
      (this.type = "source"),
      (this.isTile = !1),
      (this.inited = !1),
      (this.hooks = { init: new mu() }),
      (this.parser = { type: "geojson" }),
      (this.transforms = []),
      (this.cluster = !1),
      (this.clusterOptions = {
        enable: !1,
        radius: 40,
        maxZoom: 20,
        zoom: -99,
        method: "count",
      }),
      (this.invalidExtent = !1),
      (this.dataArrayChanged = !1),
      (this.cfg = { autoRender: !0 }),
      (this.originData = t),
      this.initCfg(e),
      this.init().then(() => {
        (this.inited = !0), this.emit("update", { type: "inited" });
      });
  }
  getSourceCfg() {
    return this.cfg;
  }
  getClusters(t) {
    return this.clusterIndex.getClusters(this.caculClusterExtent(2), t);
  }
  getClustersLeaves(t) {
    return this.clusterIndex.getLeaves(t, 1 / 0);
  }
  getParserType() {
    return this.parser.type;
  }
  updateClusterData(t) {
    const { method: e = "sum", field: n } = this.clusterOptions;
    let r = this.clusterIndex.getClusters(
      this.caculClusterExtent(2),
      Math.floor(t)
    );
    (this.clusterOptions.zoom = t),
      r.forEach((o) => {
        o.id || (o.properties.point_count = 1);
      }),
      (n || dx(e)) &&
        (r = r.map((o) => {
          const l = o.id;
          if (l) {
            const h = this.clusterIndex
              .getLeaves(l, 1 / 0)
              .map((v) => v.properties);
            let f;
            if (GL(e) && n) {
              const v = EN(h, n);
              f = VL[e](v);
            }
            dx(e) && (f = e(h)), (o.properties.stat = f);
          } else o.properties.point_count = 1;
          return o;
        })),
      (this.data = o4("geojson")({ type: "FeatureCollection", features: r })),
      this.executeTrans();
  }
  getFeatureById(t) {
    const { type: e = "geojson", geometry: n } = this.parser;
    if (e === "geojson" && !this.cluster) {
      const r =
          t < this.originData.features.length
            ? this.originData.features[t]
            : "null",
        o = XL(r);
      if (
        o != null &&
        o.properties &&
        (this.transforms.length !== 0 || this.dataArrayChanged)
      ) {
        const l = this.data.dataArray.find((a) => a._id === t);
        o.properties = l;
      }
      return o;
    } else
      return e === "json" && n
        ? this.data.dataArray.find((r) => r._id === t)
        : t < this.data.dataArray.length
        ? this.data.dataArray[t]
        : "null";
  }
  updateFeaturePropertiesById(t, e) {
    (this.data.dataArray = this.data.dataArray.map((n) =>
      n._id === t ? Sf(Sf({}, n), e) : n
    )),
      (this.dataArrayChanged = !0),
      this.emit("update", { type: "update" });
  }
  getFeatureId(t, e) {
    const n = this.data.dataArray.find((r) => r[t] === e);
    return n == null ? void 0 : n._id;
  }
  setData(t, e) {
    (this.originData = t),
      (this.dataArrayChanged = !1),
      this.initCfg(e),
      this.init().then(() => {
        this.emit("update", { type: "update" });
      });
  }
  reloadAllTile() {
    var t;
    (t = this.tileset) == null || t.reloadAll();
  }
  reloadTilebyId(t, e, n) {
    var r;
    (r = this.tileset) == null || r.reloadTileById(t, e, n);
  }
  reloadTileByLnglat(t, e, n) {
    var r;
    (r = this.tileset) == null || r.reloadTileByLnglat(t, e, n);
  }
  getTileExtent(t, e) {
    var n;
    return (n = this.tileset) == null ? void 0 : n.getTileExtent(t, e);
  }
  getTileByZXY(t, e, n) {
    var r;
    return (r = this.tileset) == null ? void 0 : r.getTileByZXY(t, e, n);
  }
  reloadTileByExtent(t, e) {
    var n;
    (n = this.tileset) == null || n.reloadTileByExtent(t, e);
  }
  destroy() {
    var t;
    this.removeAllListeners(),
      (this.originData = null),
      (this.clusterIndex = null),
      (this.data = null),
      (t = this.tileset) == null || t.destroy();
  }
  processData() {
    return ux(this, null, function* () {
      return new Promise((t, e) => {
        try {
          this.excuteParser(), this.initCluster(), this.executeTrans(), t({});
        } catch (n) {
          e(n);
        }
      });
    });
  }
  initCfg(t) {
    this.cfg = ZL(this.cfg, t, YL);
    const e = this.cfg;
    e &&
      (e.parser && (this.parser = e.parser),
      e.transforms && (this.transforms = e.transforms),
      (this.cluster = e.cluster || !1),
      e.clusterOptions &&
        ((this.cluster = !0),
        (this.clusterOptions = Sf(
          Sf({}, this.clusterOptions),
          e.clusterOptions
        ))));
  }
  init() {
    return ux(this, null, function* () {
      (this.inited = !1), yield this.processData(), (this.inited = !0);
    });
  }
  excuteParser() {
    const t = this.parser,
      e = t.type || "geojson",
      n = o4(e);
    (this.data = n(this.originData, t)),
      (this.tileset = this.initTileset()),
      !t.cancelExtent &&
        ((this.extent = BC(this.data.dataArray)),
        this.setCenter(this.extent),
        (this.invalidExtent =
          this.extent[0] === this.extent[2] ||
          this.extent[1] === this.extent[3]));
  }
  setCenter(t) {
    (this.center = [(t[0] + t[2]) / 2, (t[1] + t[3]) / 2]),
      (isNaN(this.center[0]) || isNaN(this.center[1])) &&
        (this.center = [108.92361111111111, 34.54083333333333]);
  }
  initTileset() {
    const { tilesetOptions: t } = this.data;
    return t
      ? ((this.isTile = !0),
        this.tileset
          ? (this.tileset.updateOptions(t), this.tileset)
          : new _N(Sf({}, t)))
      : void 0;
  }
  executeTrans() {
    this.transforms.forEach((e) => {
      const { type: n } = e,
        r = rS(n)(this.data, e);
      Object.assign(this.data, r);
    });
  }
  initCluster() {
    if (!this.cluster) return;
    const t = this.clusterOptions || {};
    this.clusterIndex = P8(this.data, t);
  }
  caculClusterExtent(t) {
    let e = [
      [-1 / 0, -1 / 0],
      [1 / 0, 1 / 0],
    ];
    return (
      this.invalidExtent || (e = m3(Rg(this.extent), t)), e[0].concat(e[1])
    );
  }
};
function $L(t, e) {
  const { callback: n } = e;
  return n && (t.dataArray = t.dataArray.filter(n)), t;
}
var w3 = 6378e3;
function KL(t, e) {
  const n = t.dataArray,
    { size: r = 10 } = e,
    o = ((r / (2 * Math.PI * w3)) * (256 << 20)) / 2,
    { gridHash: l, gridOffset: a } = QL(n, r),
    h = nD(l, a, e);
  return { yOffset: o, xOffset: o, radius: o, type: "grid", dataArray: h };
}
function QL(t, e) {
  let n = 1 / 0,
    r = -1 / 0,
    o;
  for (const f of t)
    (o = f.coordinates[1]),
      Number.isFinite(o) && ((n = o < n ? o : n), (r = o > r ? o : r));
  const l = (n + r) / 2,
    a = JL(e, l);
  if (a.xOffset <= 0 || a.yOffset <= 0) return { gridHash: {}, gridOffset: a };
  const h = {};
  for (const f of t) {
    const v = f.coordinates[1],
      E = f.coordinates[0];
    if (Number.isFinite(v) && Number.isFinite(E)) {
      const x = Math.floor((v + 90) / a.yOffset),
        T = Math.floor((E + 180) / a.xOffset),
        N = `${x}-${T}`;
      (h[N] = h[N] || { count: 0, points: [] }),
        (h[N].count += 1),
        h[N].points.push(f);
    }
  }
  return { gridHash: h, gridOffset: a };
}
function JL(t, e) {
  const n = eD(t),
    r = tD(e, t);
  return { yOffset: n, xOffset: r };
}
function eD(t) {
  return (t / w3) * (180 / Math.PI);
}
function tD(t, e) {
  return ((e / w3) * (180 / Math.PI)) / Math.cos((t * Math.PI) / 180);
}
function nD(t, e, n) {
  return Object.keys(t).reduce((r, o, l) => {
    const a = o.split("-"),
      h = parseInt(a[0], 10),
      f = parseInt(a[1], 10),
      v = {};
    if (n.field && n.method) {
      const E = PE(t[o].points, n.field);
      v[n.method] = g3[n.method](E);
    }
    return (
      Object.assign(v, {
        _id: l,
        coordinates: oc([
          -180 + e.xOffset * (f + 0.5),
          -90 + e.yOffset * (h + 0.5),
        ]),
        rawData: t[o].points,
        count: t[o].count,
      }),
      r.push(v),
      r
    );
  }, []);
}
var op = Math.PI / 3,
  rD = [0, op, 2 * op, 3 * op, 4 * op, 5 * op];
function iD(t) {
  return t[0];
}
function aD(t) {
  return t[1];
}
function oD() {
  var t = 0,
    e = 0,
    n = 1,
    r = 1,
    o = iD,
    l = aD,
    a,
    h,
    f;
  function v(x) {
    var T = {},
      N = [],
      I,
      L = x.length;
    for (I = 0; I < L; ++I)
      if (
        !(
          isNaN((X = +o.call(null, (F = x[I]), I, x))) ||
          isNaN((G = +l.call(null, F, I, x)))
        )
      ) {
        var F,
          X,
          G,
          K = Math.round((G = G / f)),
          Q = Math.round((X = X / h - (K & 1) / 2)),
          ee = G - K;
        if (Math.abs(ee) * 3 > 1) {
          var Se = X - Q,
            ue = Q + (X < Q ? -1 : 1) / 2,
            ke = K + (G < K ? -1 : 1),
            ut = X - ue,
            Ve = G - ke;
          Se * Se + ee * ee > ut * ut + Ve * Ve &&
            ((Q = ue + (K & 1 ? 1 : -1) / 2), (K = ke));
        }
        var Ae = Q + "-" + K,
          Be = T[Ae];
        Be
          ? Be.push(F)
          : (N.push((Be = T[Ae] = [F])),
            (Be.x = (Q + (K & 1) / 2) * h),
            (Be.y = K * f));
      }
    return N;
  }
  function E(x) {
    var T = 0,
      N = 0;
    return rD.map(function (I) {
      var L = Math.sin(I) * x,
        F = -Math.cos(I) * x,
        X = L - T,
        G = F - N;
      return (T = L), (N = F), [X, G];
    });
  }
  return (
    (v.hexagon = function (x) {
      return "m" + E(x == null ? a : +x).join("l") + "z";
    }),
    (v.centers = function () {
      for (
        var x = [], T = Math.round(e / f), N = Math.round(t / h), I = T * f;
        I < r + a;
        I += f, ++T
      )
        for (var L = N * h + ((T & 1) * h) / 2; L < n + h / 2; L += h)
          x.push([L, I]);
      return x;
    }),
    (v.mesh = function () {
      var x = E(a).slice(0, 4).join("l");
      return v
        .centers()
        .map(function (T) {
          return "M" + T + "m" + x;
        })
        .join("");
    }),
    (v.x = function (x) {
      return arguments.length ? ((o = x), v) : o;
    }),
    (v.y = function (x) {
      return arguments.length ? ((l = x), v) : l;
    }),
    (v.radius = function (x) {
      return arguments.length
        ? ((a = +x), (h = a * 2 * Math.sin(op)), (f = a * 1.5), v)
        : a;
    }),
    (v.size = function (x) {
      return arguments.length
        ? ((t = e = 0), (n = +x[0]), (r = +x[1]), v)
        : [n - t, r - e];
    }),
    (v.extent = function (x) {
      return arguments.length
        ? ((t = +x[0][0]), (e = +x[0][1]), (n = +x[1][0]), (r = +x[1][1]), v)
        : [
            [t, e],
            [n, r],
          ];
    }),
    v.radius(1)
  );
}
var sD = Object.defineProperty,
  lD = Object.defineProperties,
  cD = Object.getOwnPropertyDescriptors,
  hx = Object.getOwnPropertySymbols,
  uD = Object.prototype.hasOwnProperty,
  dD = Object.prototype.propertyIsEnumerable,
  px = (t, e, n) =>
    e in t
      ? sD(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  hD = (t, e) => {
    for (var n in e || (e = {})) uD.call(e, n) && px(t, n, e[n]);
    if (hx) for (var n of hx(e)) dD.call(e, n) && px(t, n, e[n]);
    return t;
  },
  pD = (t, e) => lD(t, cD(e)),
  fD = 6378e3;
function mD(t, e) {
  const n = t.dataArray,
    { size: r = 10, method: o = "sum" } = e,
    l = ((r / (2 * Math.PI * fD)) * (256 << 20)) / 2,
    a = n.map((E) => {
      const [x, T] = oc(E.coordinates);
      return pD(hD({}, E), { coordinates: [x, T] });
    });
  return {
    dataArray: oD()
      .radius(l)
      .x((E) => E.coordinates[0])
      .y((E) => E.coordinates[1])(a)
      .map((E, x) => {
        if (e.field && o) {
          const T = PE(E, e.field);
          E[o] = g3[o](T);
        }
        return {
          [e.method]: E[o],
          count: E.length,
          rawData: E,
          coordinates: [E.x, E.y],
          _id: x,
        };
      }),
    radius: l,
    xOffset: l,
    yOffset: l,
    type: "hexagon",
  };
}
var gD = Object.defineProperty,
  fx = Object.getOwnPropertySymbols,
  vD = Object.prototype.hasOwnProperty,
  _D = Object.prototype.propertyIsEnumerable,
  mx = (t, e, n) =>
    e in t
      ? gD(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  gx = (t, e) => {
    for (var n in e || (e = {})) vD.call(e, n) && mx(t, n, e[n]);
    if (fx) for (var n of fx(e)) _D.call(e, n) && mx(t, n, e[n]);
    return t;
  };
function yD(t, e) {
  const { sourceField: n, targetField: r, data: o } = e,
    l = {};
  return (
    o.forEach((a) => {
      l[a[n]] = a;
    }),
    (t.dataArray = t.dataArray.map((a) => {
      const h = a[r];
      return gx(gx({}, a), l[h]);
    })),
    t
  );
}
function xD(t, e) {
  const { callback: n } = e;
  return n && (t.dataArray = t.dataArray.map(n)), t;
}
Nl("rasterTile", eL);
Nl("mvt", xI);
Nl("geojsonvt", dR);
Nl("testTile", ML);
Nl("geojson", kN);
Nl("jsonTile", SR);
Nl("image", WE);
Nl("csv", NN);
Nl("json", zE);
Nl("raster", LI);
Nl("rasterRgb", bL);
Nl("rgb", fL);
Nl("ndi", sL);
Up("cluster", P8);
Up("filter", $L);
Up("join", yD);
Up("map", xD);
Up("grid", KL);
Up("hexagon", mD);
var gv = qL;
class vx extends _s.EventEmitter {
  getMarkerLayerContainerSize() {}
  constructor(e) {
    super(),
      R(this, "markerOption", void 0),
      R(this, "popup", void 0),
      R(this, "mapsService", void 0),
      R(this, "lngLat", void 0),
      R(this, "scene", void 0),
      R(this, "added", !1),
      R(this, "preLngLat", { lng: 0, lat: 0 }),
      R(this, "onMarkerDragStart", (n) => {
        const r = this.mapsService.getContainer();
        if (!r) return;
        this.mapsService.setMapStatus({ dragEnable: !1, zoomEnable: !1 });
        const { left: o, top: l } = r.getClientRects()[0],
          { x: a, y: h } = n;
        (this.preLngLat = this.mapsService.containerToLngLat([a - o, h - l])),
          this.mapsService.on("mousemove", this.onMarkerDragMove),
          document.addEventListener("mouseup", this.onMarkerDragEnd),
          this.emit("dragstart", this.lngLat);
      }),
      R(this, "onMarkerDragMove", (n) => {
        const r = n.lngLat || n.lnglat,
          { lng: o, lat: l } = this.preLngLat,
          { lng: a, lat: h } = r,
          f = { lng: this.lngLat.lng + a - o, lat: this.lngLat.lat + h - l };
        this.setLnglat(f), (this.preLngLat = r), this.emit("dragging", f);
      }),
      R(this, "onMarkerDragEnd", () => {
        this.mapsService.setMapStatus({ dragEnable: !0, zoomEnable: !0 }),
          this.mapsService.off("mousemove", this.onMarkerDragMove),
          document.removeEventListener("mouseup", this.onMarkerDragEnd),
          this.emit("dragend", this.lngLat);
      }),
      R(this, "eventHandle", (n) => {
        this.polyfillEvent(n),
          this.emit(n.type, {
            target: n,
            data: this.markerOption.extData,
            lngLat: this.lngLat,
          });
      }),
      R(this, "touchStartTime", void 0),
      (this.markerOption = mt(mt({}, this.getDefault()), e)),
      LC(["update", "onMove", "onMapClick", "updatePositionWhenZoom"], this),
      this.init();
  }
  getDefault() {
    return {
      element: void 0,
      anchor: uv.BOTTOM,
      offsets: [0, 0],
      color: "#5B8FF9",
      draggable: !1,
      overflowHide: !0,
    };
  }
  addTo(e) {
    (this.scene = e), (this.mapsService = e.mapService);
    const { element: n } = this.markerOption;
    return (
      this.mapsService.getMarkerContainer().appendChild(n),
      this.registerMarkerEvent(n),
      this.mapsService.on("camerachange", this.update),
      this.update(),
      this.updateDraggable(),
      (this.added = !0),
      this.emit("added"),
      this
    );
  }
  remove() {
    this.mapsService &&
      (this.mapsService.off("click", this.onMapClick),
      this.mapsService.off("move", this.update),
      this.mapsService.off("moveend", this.update),
      this.mapsService.off("camerachange", this.update)),
      this.unRegisterMarkerEvent(),
      this.removeAllListeners();
    const { element: e } = this.markerOption;
    return e && Dc(e), this.popup && this.popup.remove(), this;
  }
  setLnglat(e) {
    return (
      (this.lngLat = e),
      Array.isArray(e) && (this.lngLat = { lng: e[0], lat: e[1] }),
      this.popup && this.popup.setLnglat(this.lngLat),
      this.update(),
      this
    );
  }
  getLnglat() {
    return this.lngLat;
  }
  getElement() {
    return this.markerOption.element;
  }
  setElement(e) {
    if (!this.added)
      return (
        this.once("added", () => {
          this.setElement(e);
        }),
        this
      );
    const { element: n } = this.markerOption;
    return (
      n && Dc(n),
      (this.markerOption.element = e),
      this.init(),
      this.mapsService.getMarkerContainer().appendChild(e),
      this.registerMarkerEvent(e),
      this.updateDraggable(),
      this.update(),
      this
    );
  }
  openPopup() {
    if (!this.added)
      return (
        this.once("added", () => {
          this.openPopup();
        }),
        this
      );
    const e = this.popup;
    return e ? (e.isOpen() || e.addTo(this.scene), this) : this;
  }
  closePopup() {
    this.added ||
      this.once("added", () => {
        this.closePopup();
      });
    const e = this.popup;
    return e && e.remove(), this;
  }
  setPopup(e) {
    return (
      (this.popup = e), this.lngLat && this.popup.setLnglat(this.lngLat), this
    );
  }
  togglePopup() {
    const e = this.popup;
    if (e) e.isOpen() ? e.remove() : e.addTo(this.scene);
    else return this;
    return this;
  }
  getPopup() {
    return this.popup;
  }
  getOffset() {
    return this.markerOption.offsets;
  }
  setDraggable(e) {
    (this.markerOption.draggable = e), this.updateDraggable();
  }
  getDraggable() {
    return this.markerOption.draggable;
  }
  getExtData() {
    return this.markerOption.extData;
  }
  setExtData(e) {
    this.markerOption.extData = e;
  }
  update() {
    if (!this.mapsService) return;
    const { element: e, anchor: n } = this.markerOption;
    this.updatePosition(), NE(e, `${Tg[n]}`);
  }
  updatePositionWhenZoom(e) {
    if (!this.mapsService) return;
    const { element: n, offsets: r } = this.markerOption,
      { lng: o, lat: l } = this.lngLat;
    if (n) {
      (n.style.display = "block"), (n.style.whiteSpace = "nowrap");
      const {
        containerHeight: a,
        containerWidth: h,
        bounds: f,
      } = this.getMarkerLayerContainerSize() || this.getCurrentContainerSize();
      if (!f) return;
      const v = e.map,
        E = e.center,
        x = e.zoom,
        T = v.DE(this.lngLat, x, E);
      if (
        ((T.x = Math.round(T.x + r[0])),
        (T.y = Math.round(T.y - r[1])),
        Math.abs(f[0][0]) > 180 || Math.abs(f[1][0]) > 180)
      ) {
        if (T.x > h) {
          const N = this.mapsService.lngLatToContainer([o - 360, l]);
          T.x = N.x;
        }
        if (T.x < 0) {
          const N = this.mapsService.lngLatToContainer([o + 360, l]);
          T.x = N.x;
        }
      }
      (T.x > h || T.x < 0 || T.y > a || T.y < 0) && (n.style.display = "none"),
        (n.style.left = T.x + "px"),
        (n.style.top = T.y + "px"),
        (n.style.transition =
          "left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)");
    }
  }
  onMapClick(e) {
    const { element: n } = this.markerOption;
    this.popup && n && this.togglePopup();
  }
  getCurrentContainerSize() {
    const e = this.mapsService.getContainer();
    return {
      containerHeight: (e == null ? void 0 : e.scrollHeight) || 0,
      containerWidth: (e == null ? void 0 : e.scrollWidth) || 0,
      bounds: this.mapsService.getBounds(),
    };
  }
  updateDraggable() {
    const { element: e } = this.markerOption;
    e == null || e.removeEventListener("mousedown", this.onMarkerDragStart),
      this.mapsService.off("mousemove", this.onMarkerDragMove),
      document.removeEventListener("mouseup", this.onMarkerDragEnd),
      this.markerOption.draggable &&
        (e == null || e.addEventListener("mousedown", this.onMarkerDragStart));
  }
  updatePosition() {
    if (!this.mapsService) return;
    const { element: e, offsets: n } = this.markerOption,
      { lng: r, lat: o } = this.lngLat,
      l = this.mapsService.lngLatToContainer([r, o]);
    if (e) {
      (e.style.display = "block"), (e.style.whiteSpace = "nowrap");
      const {
        containerHeight: a,
        containerWidth: h,
        bounds: f,
      } = this.getMarkerLayerContainerSize() || this.getCurrentContainerSize();
      if (!f) return;
      if (Math.abs(f[0][0]) > 180 || Math.abs(f[1][0]) > 180) {
        if (l.x > h) {
          const v = this.mapsService.lngLatToContainer([r - 360, o]);
          l.x = v.x;
        }
        if (l.x < 0) {
          const v = this.mapsService.lngLatToContainer([r + 360, o]);
          l.x = v.x;
        }
      }
      this.markerOption.overflowHide &&
        (l.x > h || l.x < 0 || l.y > a || l.y < 0) &&
        (e.style.display = "none"),
        (e.style.left = l.x + n[0] + "px"),
        (e.style.top = l.y - n[1] + "px");
    }
  }
  init() {
    let { element: e } = this.markerOption;
    const { color: n, anchor: r } = this.markerOption;
    if (!e) {
      (e = ma("div")), (this.markerOption.element = e);
      const o = document.createElementNS("http://www.w3.org/2000/svg", "svg");
      o.setAttributeNS(null, "display", "block"),
        o.setAttributeNS(null, "height", "48px"),
        o.setAttributeNS(null, "width", "48px"),
        o.setAttributeNS(null, "viewBox", "0 0 1024 1024");
      const l = document.createElementNS("http://www.w3.org/2000/svg", "path");
      l.setAttributeNS(
        null,
        "d",
        "M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"
      ),
        l.setAttributeNS(null, "fill", n),
        o.appendChild(l),
        e.appendChild(o);
    }
    Jd(e, "l7-marker"),
      Object.keys(this.markerOption.style || {}).forEach((o) => {
        var l, a;
        const h =
          ((l = this.markerOption) === null || l === void 0
            ? void 0
            : l.style) &&
          ((a = this.markerOption) === null || a === void 0
            ? void 0
            : a.style[o]);
        e && (e.style[o] = h);
      }),
      lE(e, r, "marker");
  }
  registerMarkerEvent(e) {
    e.addEventListener("click", this.onMapClick),
      e.addEventListener("mousemove", this.eventHandle),
      e.addEventListener("click", this.eventHandle),
      e.addEventListener("mousedown", this.eventHandle),
      e.addEventListener("mouseup", this.eventHandle),
      e.addEventListener("dblclick", this.eventHandle),
      e.addEventListener("contextmenu", this.eventHandle),
      e.addEventListener("mouseover", this.eventHandle),
      e.addEventListener("mouseout", this.eventHandle),
      e.addEventListener("touchstart", this.eventHandle),
      e.addEventListener("touchend", this.eventHandle);
  }
  unRegisterMarkerEvent() {
    const e = this.getElement();
    e.removeEventListener("click", this.onMapClick),
      e.removeEventListener("mousemove", this.eventHandle),
      e.removeEventListener("click", this.eventHandle),
      e.removeEventListener("mousedown", this.eventHandle),
      e.removeEventListener("mouseup", this.eventHandle),
      e.removeEventListener("dblclick", this.eventHandle),
      e.removeEventListener("contextmenu", this.eventHandle),
      e.removeEventListener("mouseover", this.eventHandle),
      e.removeEventListener("mouseout", this.eventHandle),
      e.removeEventListener("touchstart", this.eventHandle),
      e.removeEventListener("touchend", this.eventHandle);
  }
  polyfillEvent(e) {
    !this.mapsService ||
      this.mapsService.getType() !== "amap" ||
      OC() ||
      (e.type === "touchstart" && (this.touchStartTime = Date.now()),
      e.type === "touchend" &&
        Date.now() - this.touchStartTime < 300 &&
        this.emit("click", {
          target: e,
          data: this.markerOption.extData,
          lngLat: this.lngLat,
        }));
  }
  addDragHandler(e) {
    return null;
  }
  onUp(e) {
    throw new Error("Method not implemented.");
  }
}
(window._iconfont_svg_string_3580659 =
  '<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>'),
  (function (t) {
    try {
      let v = function () {
          h || ((h = !0), l());
        },
        E = function () {
          try {
            a.documentElement.doScroll("left");
          } catch {
            return void setTimeout(E, 50);
          }
          v();
        };
      var n = (n = document.getElementsByTagName("script"))[n.length - 1],
        e = n.getAttribute("data-injectcss"),
        n = n.getAttribute("data-disable-injectsvg");
      if (!n) {
        var r,
          o,
          l,
          a,
          h,
          f = function (x, T) {
            T.parentNode.insertBefore(x, T);
          };
        if (e && !t.__iconfont__svg__cssinject__) {
          t.__iconfont__svg__cssinject__ = !0;
          try {
            document.write(
              "<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>"
            );
          } catch (x) {
            console && console.log(x);
          }
        }
        (r = function () {
          var x,
            T = document.createElement("div");
          (T.innerHTML = t._iconfont_svg_string_3580659),
            (T = T.getElementsByTagName("svg")[0]) &&
              (T.setAttribute("aria-hidden", "true"),
              (T.style.position = "absolute"),
              (T.style.width = 0),
              (T.style.height = 0),
              (T.style.overflow = "hidden"),
              (T = T),
              (x = document.body).firstChild
                ? f(T, x.firstChild)
                : x.appendChild(T));
        }),
          document.addEventListener
            ? ~["complete", "loaded", "interactive"].indexOf(
                document.readyState
              )
              ? setTimeout(r, 0)
              : ((o = function () {
                  document.removeEventListener("DOMContentLoaded", o, !1), r();
                }),
                document.addEventListener("DOMContentLoaded", o, !1))
            : document.attachEvent &&
              ((l = r),
              (a = t.document),
              (h = !1),
              E(),
              (a.onreadystatechange = function () {
                a.readyState == "complete" &&
                  ((a.onreadystatechange = null), v());
              }));
      }
    } catch {}
  })(window);
class r0 extends v3 {
  constructor(e) {
    super(),
      R(this, "controlOption", void 0),
      R(this, "container", void 0),
      R(this, "isShow", void 0),
      R(this, "sceneContainer", void 0),
      R(this, "scene", void 0),
      R(this, "mapsService", void 0),
      R(this, "renderService", void 0),
      R(this, "layerService", void 0),
      R(this, "controlService", void 0),
      R(this, "configService", void 0),
      r0.controlCount++,
      (this.controlOption = mt(mt({}, this.getDefault(e)), e || {}));
  }
  getOptions() {
    return this.controlOption;
  }
  setOptions(e) {
    const n = this.getDefault(e);
    Object.entries(e).forEach(([r, o]) => {
      o === void 0 && (e[r] = n[r]);
    }),
      "position" in e && this.setPosition(e.position),
      "className" in e && this.setClassName(e.className),
      "style" in e && this.setStyle(e.style),
      (this.controlOption = mt(mt({}, this.controlOption), e));
  }
  addTo(e) {
    (this.mapsService = e.mapService),
      (this.renderService = e.rendererService),
      (this.layerService = e.layerService),
      (this.controlService = e.controlService),
      (this.configService = e.globalConfigService),
      (this.scene = e.sceneService),
      (this.sceneContainer = e),
      (this.isShow = !0),
      (this.container = this.onAdd()),
      Jd(this.container, "l7-control");
    const { className: n, style: r } = this.controlOption;
    return (
      n && this.setClassName(n),
      r && this.setStyle(r),
      this.insertContainer(),
      this.emit("add", this),
      this
    );
  }
  remove() {
    if (!this.mapsService) return this;
    Dc(this.container), this.onRemove(), this.emit("remove", this);
  }
  onAdd() {
    return ma("div");
  }
  onRemove() {}
  show() {
    const e = this.container;
    Cg(e, "l7-control--hide"), (this.isShow = !0), this.emit("show", this);
  }
  hide() {
    const e = this.container;
    Jd(e, "l7-control--hide"), (this.isShow = !1), this.emit("hide", this);
  }
  getDefault(e) {
    return { position: Cp.TOPRIGHT, name: `${r0.controlCount}` };
  }
  getContainer() {
    return this.container;
  }
  getIsShow() {
    return this.isShow;
  }
  _refocusOnMap(e) {
    if (this.mapsService && e && e.screenX > 0 && e.screenY > 0) {
      const n = this.mapsService.getContainer();
      n !== null && n.focus();
    }
  }
  setPosition(e = Cp.TOPLEFT) {
    const n = this.controlService;
    return (
      n && n.removeControl(this),
      (this.controlOption.position = e),
      n && n.addControl(this, this.sceneContainer),
      this
    );
  }
  setClassName(e) {
    const n = this.container,
      { className: r } = this.controlOption;
    r && Cg(n, r), e && Jd(n, e);
  }
  setStyle(e) {
    const n = this.container;
    e ? n.setAttribute("style", e) : n.removeAttribute("style");
  }
  insertContainer() {
    const e = this.controlOption.position,
      n = this.container;
    if (e instanceof Element) e.appendChild(n);
    else {
      const r = this.controlService.controlCorners[e];
      ["bottomleft", "bottomright", "righttop", "rightbottom"].includes(e)
        ? r.insertBefore(n, r.firstChild)
        : r.appendChild(n);
    }
  }
  checkUpdateOption(e, n) {
    return n.some((r) => r in e);
  }
}
R(r0, "controlCount", 0);
class kg extends _s.EventEmitter {
  get buttonRect() {
    return this.button.getBoundingClientRect();
  }
  constructor(e, n) {
    super(),
      R(this, "popperDOM", void 0),
      R(this, "contentDOM", void 0),
      R(this, "button", void 0),
      R(this, "option", void 0),
      R(this, "isShow", !1),
      R(this, "content", void 0),
      R(this, "timeout", null),
      R(this, "show", () =>
        this.isShow || !this.contentDOM.innerHTML
          ? this
          : (this.resetPopperPosition(),
            Cg(this.popperDOM, "l7-popper-hide"),
            (this.isShow = !0),
            this.option.unique &&
              kg.conflictPopperList.forEach((r) => {
                r !== this && r.isShow && r.hide();
              }),
            this.emit("show"),
            window.addEventListener("pointerdown", this.onPopperUnClick),
            this)
      ),
      R(this, "hide", () =>
        this.isShow
          ? (Jd(this.popperDOM, "l7-popper-hide"),
            (this.isShow = !1),
            this.emit("hide"),
            window.removeEventListener("pointerdown", this.onPopperUnClick),
            this)
          : this
      ),
      R(this, "setHideTimeout", () => {
        this.timeout ||
          (this.timeout = window.setTimeout(() => {
            this.isShow && (this.hide(), (this.timeout = null));
          }, 300));
      }),
      R(this, "clearHideTimeout", () => {
        this.timeout &&
          (window.clearTimeout(this.timeout), (this.timeout = null));
      }),
      R(this, "onBtnClick", () => {
        this.isShow ? this.hide() : this.show();
      }),
      R(this, "onPopperUnClick", (r) => {
        MC(r.target, [".l7-button-control", ".l7-popper-content"]) ||
          this.hide();
      }),
      R(this, "onBtnMouseLeave", () => {
        this.setHideTimeout();
      }),
      R(this, "onBtnMouseMove", () => {
        this.clearHideTimeout(), !this.isShow && this.show();
      }),
      (this.button = e),
      (this.option = n),
      this.init(),
      n.unique && kg.conflictPopperList.push(this);
  }
  getPopperDOM() {
    return this.popperDOM;
  }
  getIsShow() {
    return this.isShow;
  }
  getContent() {
    return this.content;
  }
  setContent(e) {
    typeof e == "string"
      ? (this.contentDOM.innerHTML = e)
      : e instanceof HTMLElement &&
        (P1(this.contentDOM), this.contentDOM.appendChild(e)),
      (this.content = e);
  }
  init() {
    const { trigger: e } = this.option;
    (this.popperDOM = this.createPopper()),
      e === "click"
        ? this.button.addEventListener("click", this.onBtnClick)
        : (this.button.addEventListener("mousemove", this.onBtnMouseMove),
          this.button.addEventListener("mouseleave", this.onBtnMouseLeave),
          this.popperDOM.addEventListener("mousemove", this.onBtnMouseMove),
          this.popperDOM.addEventListener("mouseleave", this.onBtnMouseLeave));
  }
  destroy() {
    this.button.removeEventListener("click", this.onBtnClick),
      this.button.removeEventListener("mousemove", this.onBtnMouseMove),
      this.button.removeEventListener("mousemove", this.onBtnMouseLeave),
      this.popperDOM.removeEventListener("mousemove", this.onBtnMouseMove),
      this.popperDOM.removeEventListener("mouseleave", this.onBtnMouseLeave),
      Dc(this.popperDOM);
  }
  resetPopperPosition() {
    const e = {},
      { container: n, offset: r = [0, 0], placement: o } = this.option,
      [l, a] = r,
      h = this.button.getBoundingClientRect(),
      f = n.getBoundingClientRect(),
      { left: v, right: E, top: x, bottom: T } = RC(h, f);
    let N = !1,
      I = !1;
    /^(left|right)/.test(o)
      ? (o.includes("left")
          ? (e.right = `${h.width + E}px`)
          : o.includes("right") && (e.left = `${h.width + v}px`),
        o.includes("start")
          ? (e.top = `${x}px`)
          : o.includes("end")
          ? (e.bottom = `${T}px`)
          : ((e.top = `${x + h.height / 2}px`),
            (I = !0),
            (e.transform = `translate(${l}px, calc(${a}px - 50%))`)))
      : /^(top|bottom)/.test(o) &&
        (o.includes("top")
          ? (e.bottom = `${h.height + T}px`)
          : o.includes("bottom") && (e.top = `${h.height + x}px`),
        o.includes("start")
          ? (e.left = `${v}px`)
          : o.includes("end")
          ? (e.right = `${E}px`)
          : ((e.left = `${v + h.width / 2}px`),
            (N = !0),
            (e.transform = `translate(calc(${l}px - 50%), ${a}px)`))),
      (e.transform = `translate(calc(${l}px - ${
        N ? "50%" : "0%"
      }), calc(${a}px - ${I ? "50%" : "0%"})`);
    const L = o.split("-");
    L.length && Jd(this.popperDOM, L.map((F) => `l7-popper-${F}`).join(" ")),
      f3(this.popperDOM, NC(e));
  }
  createPopper() {
    const { container: e, className: n = "", content: r } = this.option,
      o = ma("div", `l7-popper l7-popper-hide ${n}`),
      l = ma("div", "l7-popper-content"),
      a = ma("div", "l7-popper-arrow");
    return (
      o.appendChild(l),
      o.appendChild(a),
      e.appendChild(o),
      (this.popperDOM = o),
      (this.contentDOM = l),
      r && this.setContent(r),
      o
    );
  }
}
R(kg, "conflictPopperList", []);
const v_ = (t) => {
    const e = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    e.classList.add("l7-iconfont"), e.setAttribute("aria-hidden", "true");
    const n = document.createElementNS("http://www.w3.org/2000/svg", "use");
    return (
      n.setAttributeNS("http://www.w3.org/1999/xlink", "href", `#${t}`),
      e.appendChild(n),
      e
    );
  },
  _x = [
    [
      "requestFullscreen",
      "exitFullscreen",
      "fullscreenElement",
      "fullscreenEnabled",
      "fullscreenchange",
      "fullscreenerror",
    ],
    [
      "webkitRequestFullscreen",
      "webkitExitFullscreen",
      "webkitFullscreenElement",
      "webkitFullscreenEnabled",
      "webkitfullscreenchange",
      "webkitfullscreenerror",
    ],
    [
      "webkitRequestFullScreen",
      "webkitCancelFullScreen",
      "webkitCurrentFullScreenElement",
      "webkitCancelFullScreen",
      "webkitfullscreenchange",
      "webkitfullscreenerror",
    ],
    [
      "mozRequestFullScreen",
      "mozCancelFullScreen",
      "mozFullScreenElement",
      "mozFullScreenEnabled",
      "mozfullscreenchange",
      "mozfullscreenerror",
    ],
    [
      "msRequestFullscreen",
      "msExitFullscreen",
      "msFullscreenElement",
      "msFullscreenEnabled",
      "MSFullscreenChange",
      "MSFullscreenError",
    ],
  ],
  id = (() => {
    if (typeof document > "u") return !1;
    const t = _x[0],
      e = {};
    for (const n of _x)
      if ((n == null ? void 0 : n[1]) in document) {
        for (const [o, l] of n.entries()) e[t[o]] = l;
        return e;
      }
    return !1;
  })(),
  yx = { change: id.fullscreenchange, error: id.fullscreenerror };
let rc = {
  request(t = document.documentElement, e) {
    return new Promise((n, r) => {
      const o = () => {
        rc.off("change", o), n();
      };
      rc.on("change", o);
      const l = t[id.requestFullscreen](e);
      l instanceof Promise && l.then(o).catch(r);
    });
  },
  exit() {
    return new Promise((t, e) => {
      if (!rc.isFullscreen) {
        t();
        return;
      }
      const n = () => {
        rc.off("change", n), t();
      };
      rc.on("change", n);
      const r = document[id.exitFullscreen]();
      r instanceof Promise && r.then(n).catch(e);
    });
  },
  toggle(t, e) {
    return rc.isFullscreen ? rc.exit() : rc.request(t, e);
  },
  onchange(t) {
    rc.on("change", t);
  },
  onerror(t) {
    rc.on("error", t);
  },
  on(t, e) {
    const n = yx[t];
    n && document.addEventListener(n, e, !1);
  },
  off(t, e) {
    const n = yx[t];
    n && document.removeEventListener(n, e, !1);
  },
  raw: id,
};
Object.defineProperties(rc, {
  isFullscreen: { get: () => !!document[id.fullscreenElement] },
  element: {
    enumerable: !0,
    get: () => {
      var t;
      return (t = document[id.fullscreenElement]) !== null && t !== void 0
        ? t
        : void 0;
    },
  },
  isEnabled: { enumerable: !0, get: () => !!document[id.fullscreenEnabled] },
});
id || (rc = { isEnabled: !1 });
class bD extends r0 {
  getDefault() {
    return {
      position: Cp.BOTTOMLEFT,
      name: "logo",
      href: "https://l7.antv.antgroup.com/",
      img: "https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ",
    };
  }
  onAdd() {
    const e = ma("div", "l7-control-logo");
    return this.setLogoContent(e), e;
  }
  onRemove() {
    return null;
  }
  setOptions(e) {
    super.setOptions(e),
      this.checkUpdateOption(e, ["img", "href"]) &&
        (P1(this.container), this.setLogoContent(this.container));
  }
  setLogoContent(e) {
    const { href: n, img: r } = this.controlOption,
      o = ma("img");
    if (
      (o.setAttribute("src", r),
      o.setAttribute("aria-label", "AntV logo"),
      IC(o),
      n)
    ) {
      const l = ma("a", "l7-control-logo-link");
      (l.target = "_blank"),
        (l.href = n),
        (l.rel = "noopener nofollow"),
        l.setAttribute("rel", "noopener nofollow"),
        l.appendChild(o),
        e.appendChild(l);
    } else e.appendChild(o);
  }
}
class ED extends r0 {
  constructor(...e) {
    super(...e),
      R(this, "mScale", void 0),
      R(this, "iScale", void 0),
      R(this, "update", () => {
        const n = this.mapsService,
          { maxWidth: r } = this.controlOption,
          o = n.getSize()[1] / 2,
          l = n.containerToLngLat([0, o]),
          a = n.containerToLngLat([r, o]),
          h = zC([l.lng, l.lat], [a.lng, a.lat]);
        this.updateScales(h);
      });
  }
  getDefault(e) {
    return mt(
      mt({}, super.getDefault(e)),
      {},
      {
        name: "scale",
        position: Cp.BOTTOMLEFT,
        maxWidth: 100,
        metric: !0,
        updateWhenIdle: !1,
        imperial: !1,
        lockWidth: !0,
      }
    );
  }
  onAdd() {
    const n = ma("div", "l7-control-scale");
    this.resetScaleLines(n);
    const { updateWhenIdle: r } = this.controlOption;
    return (
      this.mapsService.on(r ? "moveend" : "mapmove", this.update),
      this.mapsService.on(r ? "zoomend" : "zoomchange", this.update),
      n
    );
  }
  onRemove() {
    const { updateWhenIdle: e } = this.controlOption;
    this.mapsService.off(e ? "zoomend" : "zoomchange", this.update),
      this.mapsService.off(e ? "moveend" : "mapmove", this.update);
  }
  setOptions(e) {
    super.setOptions(e),
      this.checkUpdateOption(e, [
        "lockWidth",
        "maxWidth",
        "metric",
        "updateWhenIdle",
        "imperial",
      ]) && this.resetScaleLines(this.container);
  }
  updateScales(e) {
    const { metric: n, imperial: r } = this.controlOption;
    n && e && this.updateMetric(e), r && e && this.updateImperial(e);
  }
  resetScaleLines(e) {
    P1(e);
    const {
      metric: n,
      imperial: r,
      maxWidth: o,
      lockWidth: l,
    } = this.controlOption;
    l && f3(e, `width: ${o}px`),
      n && (this.mScale = ma("div", "l7-control-scale-line", e)),
      r && (this.iScale = ma("div", "l7-control-scale-line", e)),
      this.update();
  }
  updateScale(e, n, r) {
    const { maxWidth: o } = this.controlOption;
    (e.style.width = Math.round(o * r) + "px"), (e.innerHTML = n);
  }
  getRoundNum(e) {
    const n = Math.pow(10, (Math.floor(e) + "").length - 1);
    let r = e / n;
    return (r = r >= 10 ? 10 : r >= 5 ? 5 : r >= 3 ? 3 : r >= 2 ? 2 : 1), n * r;
  }
  updateMetric(e) {
    const n = this.getRoundNum(e),
      r = n < 1e3 ? n + " m" : n / 1e3 + " km";
    this.updateScale(this.mScale, r, n / e);
  }
  updateImperial(e) {
    const n = e * 3.2808399;
    let r, o, l;
    n > 5280
      ? ((r = n / 5280),
        (o = this.getRoundNum(r)),
        this.updateScale(this.iScale, o + " mi", o / r))
      : ((l = this.getRoundNum(n)),
        this.updateScale(this.iScale, l + " ft", l / n));
  }
}
class AD {
  constructor() {
    R(this, "mapService", void 0), R(this, "fontService", void 0);
  }
  apply(e, { styleAttributeService: n, mapService: r, fontService: o }) {
    var l = this;
    (this.mapService = r),
      (this.fontService = o),
      e.hooks.init.tapPromise(
        "DataMappingPlugin",
        bt(function* () {
          e.log(Io.MappingStart, es.INIT),
            l.generateMaping(e, { styleAttributeService: n }),
            e.log(Io.MappingEnd, es.INIT);
        })
      ),
      e.hooks.beforeRenderData.tapPromise(
        "DataMappingPlugin",
        (function () {
          var a = bt(function* (h) {
            if (!h) return h;
            (e.dataState.dataMappingNeedUpdate = !1),
              e.log(Io.MappingStart, es.UPDATE);
            const f = l.generateMaping(e, { styleAttributeService: n });
            return e.log(Io.MappingEnd, es.UPDATE), f;
          });
          return function (h) {
            return a.apply(this, arguments);
          };
        })()
      ),
      e.hooks.beforeRender.tap("DataMappingPlugin", () => {
        const a = e.getSource();
        if (e.layerModelNeedUpdate || !a || !a.inited) return;
        const h = n.getLayerStyleAttributes() || [],
          f = n.getLayerStyleAttribute("filter"),
          { dataArray: v } = a.data;
        if (Array.isArray(v) && v.length === 0) return;
        const E = h.filter((T) => T.needRemapping);
        let x = v;
        if (
          (f != null &&
            f.needRemapping &&
            f !== null &&
            f !== void 0 &&
            f.scale &&
            (x = v.filter((T) => this.applyAttributeMapping(f, T)[0])),
          E.length)
        ) {
          const T = this.mapping(e, E, x, e.getEncodedData());
          e.setEncodedData(T);
        }
      });
  }
  generateMaping(e, { styleAttributeService: n }) {
    const r = n.getLayerStyleAttributes() || [],
      o = n.getLayerStyleAttribute("filter"),
      { dataArray: l } = e.getSource().data;
    let a = l;
    o != null &&
      o.scale &&
      (a = l.filter((f) => this.applyAttributeMapping(o, f)[0])),
      (a = e.processData(a));
    const h = this.mapping(e, r, a, void 0);
    return e.setEncodedData(h), e.emit("dataUpdate", null), !0;
  }
  mapping(e, n, r, o) {
    const l = n
        .filter((h) => h.scale !== void 0)
        .filter((h) => h.name !== "filter"),
      a = r.map((h, f) => {
        const v = o ? o[f] : {},
          E = mt({ id: h._id, coordinates: h.coordinates }, v);
        return (
          l.forEach((x) => {
            let T = this.applyAttributeMapping(x, h);
            (x.name === "color" || x.name === "stroke") &&
              (T = T.map((N) => Bi(N))),
              (E[x.name] = Array.isArray(T) && T.length === 1 ? T[0] : T),
              x.name === "shape" &&
                (E.shape = this.fontService.getIconFontKey(E[x.name]));
          }),
          E
        );
      });
    return (
      n.forEach((h) => {
        h.needRemapping = !1;
      }),
      this.adjustData2SimpleCoordinates(a),
      a
    );
  }
  adjustData2SimpleCoordinates(e) {
    e.length > 0 &&
      this.mapService.version === "SIMPLE" &&
      e.map((n) => {
        n.simpleCoordinate ||
          ((n.coordinates = this.unProjectCoordinates(n.coordinates)),
          (n.simpleCoordinate = !0));
      });
  }
  unProjectCoordinates(e) {
    if (typeof e[0] == "number")
      return this.mapService.simpleMapCoord.unproject(e);
    if (e[0] && e[0][0] instanceof Array) {
      const n = [];
      return (
        e.map((r) => {
          const o = [];
          r.map((l) => {
            o.push(this.mapService.simpleMapCoord.unproject(l));
          }),
            n.push(o);
        }),
        n
      );
    } else {
      const n = [];
      return (
        e.map((r) => {
          n.push(this.mapService.simpleMapCoord.unproject(r));
        }),
        n
      );
    }
  }
  applyAttributeMapping(e, n) {
    var r;
    if (!e.scale) return [];
    const o =
        (e == null || (r = e.scale) === null || r === void 0
          ? void 0
          : r.scalers) || [],
      l = [];
    return (
      o.forEach(({ field: h }) => {
        var f;
        (n.hasOwnProperty(h) ||
          ((f = e.scale) === null || f === void 0 ? void 0 : f.type) ===
            "variable") &&
          l.push(n[h]);
      }),
      e.mapping ? e.mapping(l) : []
    );
  }
  getArrowPoints(e, n) {
    const r = [n[0] - e[0], n[1] - e[1]],
      o = VC(r);
    return [e[0] + o[0] * 1e-4, e[1] + o[1] * 1e-4];
  }
}
class TD {
  constructor() {
    R(this, "mapService", void 0);
  }
  apply(e) {
    var n = this;
    (this.mapService = e.getContainer().mapService),
      e.hooks.init.tapPromise(
        "DataSourcePlugin",
        bt(function* () {
          e.log(Io.SourceInitStart, es.INIT);
          let r = e.getSource();
          if (!r) {
            const { data: o, options: l } =
              e.sourceOption || e.defaultSourceConfig;
            (r = new gv(o, l)), e.setSource(r);
          }
          r.inited
            ? (n.updateClusterData(e), e.log(Io.SourceInitEnd, es.INIT))
            : yield new Promise((o) => {
                r.on("update", (l) => {
                  l.type === "inited" &&
                    (n.updateClusterData(e), e.log(Io.SourceInitEnd, es.INIT)),
                    o(null);
                });
              });
        })
      ),
      e.hooks.beforeRenderData.tapPromise(
        "DataSourcePlugin",
        bt(function* () {
          const r = n.updateClusterData(e),
            o = e.dataState.dataSourceNeedUpdate;
          return (e.dataState.dataSourceNeedUpdate = !1), r || o;
        })
      );
  }
  updateClusterData(e) {
    if (e.isTileLayer || e.tileLayer || !e.getSource()) return !1;
    const n = e.getSource(),
      r = n.cluster,
      { zoom: o = 0 } = n.clusterOptions,
      l = this.mapService.getZoom() - 1,
      a = e.dataState.dataSourceNeedUpdate;
    return (
      r && a && n.updateClusterData(Math.floor(l)),
      r && Math.abs(e.clusterZoom - l) >= 1
        ? (o !== Math.floor(l) && n.updateClusterData(Math.floor(l)),
          (e.clusterZoom = l),
          !0)
        : !1
    );
  }
}
function xx(t, e) {
  let n, r;
  for (const o of t)
    o != null &&
      (n === void 0
        ? o >= o && (n = r = o)
        : (n > o && (n = o), r < o && (r = o)));
  return [n, r];
}
function SD(t, e, n, r, o) {
  var l = t * t,
    a = l * t;
  return (
    ((1 - 3 * t + 3 * l - a) * e +
      (4 - 6 * l + 3 * a) * n +
      (1 + 3 * t + 3 * l - 3 * a) * r +
      a * o) /
    6
  );
}
function wD(t) {
  var e = t.length - 1;
  return function (n) {
    var r = n <= 0 ? (n = 0) : n >= 1 ? ((n = 1), e - 1) : Math.floor(n * e),
      o = t[r],
      l = t[r + 1],
      a = r > 0 ? t[r - 1] : 2 * o - l,
      h = r < e - 1 ? t[r + 2] : 2 * l - o;
    return SD((n - r / e) * e, a, o, l, h);
  };
}
function C3(t) {
  return function () {
    return t;
  };
}
function CD(t, e) {
  return function (n) {
    return t + n * e;
  };
}
function ND(t, e, n) {
  return (
    (t = Math.pow(t, n)),
    (e = Math.pow(e, n) - t),
    (n = 1 / n),
    function (r) {
      return Math.pow(t + r * e, n);
    }
  );
}
function RD(t) {
  return (t = +t) == 1
    ? L8
    : function (e, n) {
        return n - e ? ND(e, n, t) : C3(isNaN(e) ? n : e);
      };
}
function L8(t, e) {
  var n = e - t;
  return n ? CD(t, n) : C3(isNaN(t) ? e : t);
}
const bx = (function t(e) {
  var n = RD(e);
  function r(o, l) {
    var a = n((o = wg(o)).r, (l = wg(l)).r),
      h = n(o.g, l.g),
      f = n(o.b, l.b),
      v = L8(o.opacity, l.opacity);
    return function (E) {
      return (
        (o.r = a(E)), (o.g = h(E)), (o.b = f(E)), (o.opacity = v(E)), o + ""
      );
    };
  }
  return (r.gamma = t), r;
})(1);
function ID(t) {
  return function (e) {
    var n = e.length,
      r = new Array(n),
      o = new Array(n),
      l = new Array(n),
      a,
      h;
    for (a = 0; a < n; ++a)
      (h = wg(e[a])), (r[a] = h.r || 0), (o[a] = h.g || 0), (l[a] = h.b || 0);
    return (
      (r = t(r)),
      (o = t(o)),
      (l = t(l)),
      (h.opacity = 1),
      function (f) {
        return (h.r = r(f)), (h.g = o(f)), (h.b = l(f)), h + "";
      }
    );
  };
}
var MD = ID(wD);
function PD(t, e) {
  e || (e = []);
  var n = t ? Math.min(e.length, t.length) : 0,
    r = e.slice(),
    o;
  return function (l) {
    for (o = 0; o < n; ++o) r[o] = t[o] * (1 - l) + e[o] * l;
    return r;
  };
}
function OD(t) {
  return ArrayBuffer.isView(t) && !(t instanceof DataView);
}
function LD(t, e) {
  var n = e ? e.length : 0,
    r = t ? Math.min(n, t.length) : 0,
    o = new Array(r),
    l = new Array(n),
    a;
  for (a = 0; a < r; ++a) o[a] = N3(t[a], e[a]);
  for (; a < n; ++a) l[a] = e[a];
  return function (h) {
    for (a = 0; a < r; ++a) l[a] = o[a](h);
    return l;
  };
}
function DD(t, e) {
  var n = new Date();
  return (
    (t = +t),
    (e = +e),
    function (r) {
      return n.setTime(t * (1 - r) + e * r), n;
    }
  );
}
function Ug(t, e) {
  return (
    (t = +t),
    (e = +e),
    function (n) {
      return t * (1 - n) + e * n;
    }
  );
}
function BD(t, e) {
  var n = {},
    r = {},
    o;
  (t === null || typeof t != "object") && (t = {}),
    (e === null || typeof e != "object") && (e = {});
  for (o in e) o in t ? (n[o] = N3(t[o], e[o])) : (r[o] = e[o]);
  return function (l) {
    for (o in n) r[o] = n[o](l);
    return r;
  };
}
var __ = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,
  A2 = new RegExp(__.source, "g");
function FD(t) {
  return function () {
    return t;
  };
}
function kD(t) {
  return function (e) {
    return t(e) + "";
  };
}
function UD(t, e) {
  var n = (__.lastIndex = A2.lastIndex = 0),
    r,
    o,
    l,
    a = -1,
    h = [],
    f = [];
  for (t = t + "", e = e + ""; (r = __.exec(t)) && (o = A2.exec(e)); )
    (l = o.index) > n &&
      ((l = e.slice(n, l)), h[a] ? (h[a] += l) : (h[++a] = l)),
      (r = r[0]) === (o = o[0])
        ? h[a]
          ? (h[a] += o)
          : (h[++a] = o)
        : ((h[++a] = null), f.push({ i: a, x: Ug(r, o) })),
      (n = A2.lastIndex);
  return (
    n < e.length && ((l = e.slice(n)), h[a] ? (h[a] += l) : (h[++a] = l)),
    h.length < 2
      ? f[0]
        ? kD(f[0].x)
        : FD(e)
      : ((e = f.length),
        function (v) {
          for (var E = 0, x; E < e; ++E) h[(x = f[E]).i] = x.x(v);
          return h.join("");
        })
  );
}
function N3(t, e) {
  var n = typeof e,
    r;
  return e == null || n === "boolean"
    ? C3(e)
    : (n === "number"
        ? Ug
        : n === "string"
        ? (r = Tp(e))
          ? ((e = r), bx)
          : UD
        : e instanceof Tp
        ? bx
        : e instanceof Date
        ? DD
        : OD(e)
        ? PD
        : Array.isArray(e)
        ? LD
        : (typeof e.valueOf != "function" && typeof e.toString != "function") ||
          isNaN(e)
        ? BD
        : Ug)(t, e);
}
function zD(t, e) {
  return (
    (t = +t),
    (e = +e),
    function (n) {
      return Math.round(t * (1 - n) + e * n);
    }
  );
}
function R3(t, e) {
  return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN;
}
function D8(t) {
  return (
    t.length === 1 && (t = VD(t)),
    {
      left: function (e, n, r, o) {
        for (r == null && (r = 0), o == null && (o = e.length); r < o; ) {
          var l = (r + o) >>> 1;
          t(e[l], n) < 0 ? (r = l + 1) : (o = l);
        }
        return r;
      },
      right: function (e, n, r, o) {
        for (r == null && (r = 0), o == null && (o = e.length); r < o; ) {
          var l = (r + o) >>> 1;
          t(e[l], n) > 0 ? (o = l) : (r = l + 1);
        }
        return r;
      },
    }
  );
}
function VD(t) {
  return function (e, n) {
    return R3(t(e), n);
  };
}
var HD = D8(R3),
  vv = HD.right;
function jD(t) {
  return t === null ? NaN : +t;
}
var y_ = Math.sqrt(50),
  x_ = Math.sqrt(10),
  b_ = Math.sqrt(2);
function B8(t, e, n) {
  var r,
    o = -1,
    l,
    a,
    h;
  if (((e = +e), (t = +t), (n = +n), t === e && n > 0)) return [t];
  if (
    ((r = e < t) && ((l = t), (t = e), (e = l)),
    (h = ug(t, e, n)) === 0 || !isFinite(h))
  )
    return [];
  if (h > 0)
    for (
      t = Math.ceil(t / h),
        e = Math.floor(e / h),
        a = new Array((l = Math.ceil(e - t + 1)));
      ++o < l;

    )
      a[o] = (t + o) * h;
  else
    for (
      t = Math.floor(t * h),
        e = Math.ceil(e * h),
        a = new Array((l = Math.ceil(t - e + 1)));
      ++o < l;

    )
      a[o] = (t - o) / h;
  return r && a.reverse(), a;
}
function ug(t, e, n) {
  var r = (e - t) / Math.max(0, n),
    o = Math.floor(Math.log(r) / Math.LN10),
    l = r / Math.pow(10, o);
  return o >= 0
    ? (l >= y_ ? 10 : l >= x_ ? 5 : l >= b_ ? 2 : 1) * Math.pow(10, o)
    : -Math.pow(10, -o) / (l >= y_ ? 10 : l >= x_ ? 5 : l >= b_ ? 2 : 1);
}
function E_(t, e, n) {
  var r = Math.abs(e - t) / Math.max(0, n),
    o = Math.pow(10, Math.floor(Math.log(r) / Math.LN10)),
    l = r / o;
  return (
    l >= y_ ? (o *= 10) : l >= x_ ? (o *= 5) : l >= b_ && (o *= 2),
    e < t ? -o : o
  );
}
function WD(t, e, n) {
  if ((n == null && (n = jD), !!(r = t.length))) {
    if ((e = +e) <= 0 || r < 2) return +n(t[0], 0, t);
    if (e >= 1) return +n(t[r - 1], r - 1, t);
    var r,
      o = (r - 1) * e,
      l = Math.floor(o),
      a = +n(t[l], l, t),
      h = +n(t[l + 1], l + 1, t);
    return a + (h - a) * (o - l);
  }
}
function s0(t, e) {
  switch (arguments.length) {
    case 0:
      break;
    case 1:
      this.range(t);
      break;
    default:
      this.range(e).domain(t);
      break;
  }
  return this;
}
function F8(t, e) {
  switch (arguments.length) {
    case 0:
      break;
    case 1:
      this.interpolator(t);
      break;
    default:
      this.interpolator(e).domain(t);
      break;
  }
  return this;
}
var nc = "$";
function zg() {}
zg.prototype = Vg.prototype = {
  constructor: zg,
  has: function (t) {
    return nc + t in this;
  },
  get: function (t) {
    return this[nc + t];
  },
  set: function (t, e) {
    return (this[nc + t] = e), this;
  },
  remove: function (t) {
    var e = nc + t;
    return e in this && delete this[e];
  },
  clear: function () {
    for (var t in this) t[0] === nc && delete this[t];
  },
  keys: function () {
    var t = [];
    for (var e in this) e[0] === nc && t.push(e.slice(1));
    return t;
  },
  values: function () {
    var t = [];
    for (var e in this) e[0] === nc && t.push(this[e]);
    return t;
  },
  entries: function () {
    var t = [];
    for (var e in this)
      e[0] === nc && t.push({ key: e.slice(1), value: this[e] });
    return t;
  },
  size: function () {
    var t = 0;
    for (var e in this) e[0] === nc && ++t;
    return t;
  },
  empty: function () {
    for (var t in this) if (t[0] === nc) return !1;
    return !0;
  },
  each: function (t) {
    for (var e in this) e[0] === nc && t(this[e], e.slice(1), this);
  },
};
function Vg(t, e) {
  var n = new zg();
  if (t instanceof zg)
    t.each(function (h, f) {
      n.set(f, h);
    });
  else if (Array.isArray(t)) {
    var r = -1,
      o = t.length,
      l;
    if (e == null) for (; ++r < o; ) n.set(r, t[r]);
    else for (; ++r < o; ) n.set(e((l = t[r]), r, t), l);
  } else if (t) for (var a in t) n.set(a, t[a]);
  return n;
}
function Ex() {}
var z0 = Vg.prototype;
Ex.prototype = {
  constructor: Ex,
  has: z0.has,
  add: function (t) {
    return (t += ""), (this[nc + t] = t), this;
  },
  remove: z0.remove,
  clear: z0.clear,
  values: z0.keys,
  size: z0.size,
  empty: z0.empty,
  each: z0.each,
};
var k8 = Array.prototype,
  U8 = k8.map,
  th = k8.slice,
  Ax = { name: "implicit" };
function Hg() {
  var t = Vg(),
    e = [],
    n = [],
    r = Ax;
  function o(l) {
    var a = l + "",
      h = t.get(a);
    if (!h) {
      if (r !== Ax) return r;
      t.set(a, (h = e.push(l)));
    }
    return n[(h - 1) % n.length];
  }
  return (
    (o.domain = function (l) {
      if (!arguments.length) return e.slice();
      (e = []), (t = Vg());
      for (var a = -1, h = l.length, f, v; ++a < h; )
        t.has((v = (f = l[a]) + "")) || t.set(v, e.push(f));
      return o;
    }),
    (o.range = function (l) {
      return arguments.length ? ((n = th.call(l)), o) : n.slice();
    }),
    (o.unknown = function (l) {
      return arguments.length ? ((r = l), o) : r;
    }),
    (o.copy = function () {
      return Hg(e, n).unknown(r);
    }),
    s0.apply(o, arguments),
    o
  );
}
function XD(t) {
  return function () {
    return t;
  };
}
function GD(t) {
  return +t;
}
var Tx = [0, 1];
function gs(t) {
  return t;
}
function A_(t, e) {
  return (e -= t = +t)
    ? function (n) {
        return (n - t) / e;
      }
    : XD(isNaN(e) ? NaN : 0.5);
}
function Sx(t) {
  var e = t[0],
    n = t[t.length - 1],
    r;
  return (
    e > n && ((r = e), (e = n), (n = r)),
    function (o) {
      return Math.max(e, Math.min(n, o));
    }
  );
}
function ZD(t, e, n) {
  var r = t[0],
    o = t[1],
    l = e[0],
    a = e[1];
  return (
    o < r ? ((r = A_(o, r)), (l = n(a, l))) : ((r = A_(r, o)), (l = n(l, a))),
    function (h) {
      return l(r(h));
    }
  );
}
function YD(t, e, n) {
  var r = Math.min(t.length, e.length) - 1,
    o = new Array(r),
    l = new Array(r),
    a = -1;
  for (
    t[r] < t[0] && ((t = t.slice().reverse()), (e = e.slice().reverse()));
    ++a < r;

  )
    (o[a] = A_(t[a], t[a + 1])), (l[a] = n(e[a], e[a + 1]));
  return function (h) {
    var f = vv(t, h, 1, r) - 1;
    return l[f](o[f](h));
  };
}
function _v(t, e) {
  return e
    .domain(t.domain())
    .range(t.range())
    .interpolate(t.interpolate())
    .clamp(t.clamp())
    .unknown(t.unknown());
}
function I3() {
  var t = Tx,
    e = Tx,
    n = N3,
    r,
    o,
    l,
    a = gs,
    h,
    f,
    v;
  function E() {
    return (h = Math.min(t.length, e.length) > 2 ? YD : ZD), (f = v = null), x;
  }
  function x(T) {
    return isNaN((T = +T)) ? l : (f || (f = h(t.map(r), e, n)))(r(a(T)));
  }
  return (
    (x.invert = function (T) {
      return a(o((v || (v = h(e, t.map(r), Ug)))(T)));
    }),
    (x.domain = function (T) {
      return arguments.length
        ? ((t = U8.call(T, GD)), a === gs || (a = Sx(t)), E())
        : t.slice();
    }),
    (x.range = function (T) {
      return arguments.length ? ((e = th.call(T)), E()) : e.slice();
    }),
    (x.rangeRound = function (T) {
      return (e = th.call(T)), (n = zD), E();
    }),
    (x.clamp = function (T) {
      return arguments.length ? ((a = T ? Sx(t) : gs), x) : a !== gs;
    }),
    (x.interpolate = function (T) {
      return arguments.length ? ((n = T), E()) : n;
    }),
    (x.unknown = function (T) {
      return arguments.length ? ((l = T), x) : l;
    }),
    function (T, N) {
      return (r = T), (o = N), E();
    }
  );
}
function z8(t, e) {
  return I3()(t, e);
}
function qD(t) {
  return Math.abs((t = Math.round(t))) >= 1e21
    ? t.toLocaleString("en").replace(/,/g, "")
    : t.toString(10);
}
function jg(t, e) {
  if (
    (n = (t = e ? t.toExponential(e - 1) : t.toExponential()).indexOf("e")) < 0
  )
    return null;
  var n,
    r = t.slice(0, n);
  return [r.length > 1 ? r[0] + r.slice(2) : r, +t.slice(n + 1)];
}
function Rp(t) {
  return (t = jg(Math.abs(t))), t ? t[1] : NaN;
}
function $D(t, e) {
  return function (n, r) {
    for (
      var o = n.length, l = [], a = 0, h = t[0], f = 0;
      o > 0 &&
      h > 0 &&
      (f + h + 1 > r && (h = Math.max(1, r - f)),
      l.push(n.substring((o -= h), o + h)),
      !((f += h + 1) > r));

    )
      h = t[(a = (a + 1) % t.length)];
    return l.reverse().join(e);
  };
}
function KD(t) {
  return function (e) {
    return e.replace(/[0-9]/g, function (n) {
      return t[+n];
    });
  };
}
var QD =
  /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;
function Wg(t) {
  if (!(e = QD.exec(t))) throw new Error("invalid format: " + t);
  var e;
  return new M3({
    fill: e[1],
    align: e[2],
    sign: e[3],
    symbol: e[4],
    zero: e[5],
    width: e[6],
    comma: e[7],
    precision: e[8] && e[8].slice(1),
    trim: e[9],
    type: e[10],
  });
}
Wg.prototype = M3.prototype;
function M3(t) {
  (this.fill = t.fill === void 0 ? " " : t.fill + ""),
    (this.align = t.align === void 0 ? ">" : t.align + ""),
    (this.sign = t.sign === void 0 ? "-" : t.sign + ""),
    (this.symbol = t.symbol === void 0 ? "" : t.symbol + ""),
    (this.zero = !!t.zero),
    (this.width = t.width === void 0 ? void 0 : +t.width),
    (this.comma = !!t.comma),
    (this.precision = t.precision === void 0 ? void 0 : +t.precision),
    (this.trim = !!t.trim),
    (this.type = t.type === void 0 ? "" : t.type + "");
}
M3.prototype.toString = function () {
  return (
    this.fill +
    this.align +
    this.sign +
    this.symbol +
    (this.zero ? "0" : "") +
    (this.width === void 0 ? "" : Math.max(1, this.width | 0)) +
    (this.comma ? "," : "") +
    (this.precision === void 0 ? "" : "." + Math.max(0, this.precision | 0)) +
    (this.trim ? "~" : "") +
    this.type
  );
};
function JD(t) {
  e: for (var e = t.length, n = 1, r = -1, o; n < e; ++n)
    switch (t[n]) {
      case ".":
        r = o = n;
        break;
      case "0":
        r === 0 && (r = n), (o = n);
        break;
      default:
        if (!+t[n]) break e;
        r > 0 && (r = 0);
        break;
    }
  return r > 0 ? t.slice(0, r) + t.slice(o + 1) : t;
}
var V8;
function eB(t, e) {
  var n = jg(t, e);
  if (!n) return t + "";
  var r = n[0],
    o = n[1],
    l = o - (V8 = Math.max(-8, Math.min(8, Math.floor(o / 3))) * 3) + 1,
    a = r.length;
  return l === a
    ? r
    : l > a
    ? r + new Array(l - a + 1).join("0")
    : l > 0
    ? r.slice(0, l) + "." + r.slice(l)
    : "0." + new Array(1 - l).join("0") + jg(t, Math.max(0, e + l - 1))[0];
}
function Cx(t, e) {
  var n = jg(t, e);
  if (!n) return t + "";
  var r = n[0],
    o = n[1];
  return o < 0
    ? "0." + new Array(-o).join("0") + r
    : r.length > o + 1
    ? r.slice(0, o + 1) + "." + r.slice(o + 1)
    : r + new Array(o - r.length + 2).join("0");
}
const Nx = {
  "%": function (t, e) {
    return (t * 100).toFixed(e);
  },
  b: function (t) {
    return Math.round(t).toString(2);
  },
  c: function (t) {
    return t + "";
  },
  d: qD,
  e: function (t, e) {
    return t.toExponential(e);
  },
  f: function (t, e) {
    return t.toFixed(e);
  },
  g: function (t, e) {
    return t.toPrecision(e);
  },
  o: function (t) {
    return Math.round(t).toString(8);
  },
  p: function (t, e) {
    return Cx(t * 100, e);
  },
  r: Cx,
  s: eB,
  X: function (t) {
    return Math.round(t).toString(16).toUpperCase();
  },
  x: function (t) {
    return Math.round(t).toString(16);
  },
};
function Rx(t) {
  return t;
}
var Ix = Array.prototype.map,
  Mx = [
    "y",
    "z",
    "a",
    "f",
    "p",
    "n",
    "µ",
    "m",
    "",
    "k",
    "M",
    "G",
    "T",
    "P",
    "E",
    "Z",
    "Y",
  ];
function tB(t) {
  var e =
      t.grouping === void 0 || t.thousands === void 0
        ? Rx
        : $D(Ix.call(t.grouping, Number), t.thousands + ""),
    n = t.currency === void 0 ? "" : t.currency[0] + "",
    r = t.currency === void 0 ? "" : t.currency[1] + "",
    o = t.decimal === void 0 ? "." : t.decimal + "",
    l = t.numerals === void 0 ? Rx : KD(Ix.call(t.numerals, String)),
    a = t.percent === void 0 ? "%" : t.percent + "",
    h = t.minus === void 0 ? "-" : t.minus + "",
    f = t.nan === void 0 ? "NaN" : t.nan + "";
  function v(x) {
    x = Wg(x);
    var T = x.fill,
      N = x.align,
      I = x.sign,
      L = x.symbol,
      F = x.zero,
      X = x.width,
      G = x.comma,
      K = x.precision,
      Q = x.trim,
      ee = x.type;
    ee === "n"
      ? ((G = !0), (ee = "g"))
      : Nx[ee] || (K === void 0 && (K = 12), (Q = !0), (ee = "g")),
      (F || (T === "0" && N === "=")) && ((F = !0), (T = "0"), (N = "="));
    var Se =
        L === "$"
          ? n
          : L === "#" && /[boxX]/.test(ee)
          ? "0" + ee.toLowerCase()
          : "",
      ue = L === "$" ? r : /[%p]/.test(ee) ? a : "",
      ke = Nx[ee],
      ut = /[defgprs%]/.test(ee);
    K =
      K === void 0
        ? 6
        : /[gprs]/.test(ee)
        ? Math.max(1, Math.min(21, K))
        : Math.max(0, Math.min(20, K));
    function Ve(Ae) {
      var Be = Se,
        He = ue,
        nt,
        Ut,
        Yt;
      if (ee === "c") (He = ke(Ae) + He), (Ae = "");
      else {
        Ae = +Ae;
        var Ht = Ae < 0 || 1 / Ae < 0;
        if (
          ((Ae = isNaN(Ae) ? f : ke(Math.abs(Ae), K)),
          Q && (Ae = JD(Ae)),
          Ht && +Ae == 0 && I !== "+" && (Ht = !1),
          (Be =
            (Ht ? (I === "(" ? I : h) : I === "-" || I === "(" ? "" : I) + Be),
          (He =
            (ee === "s" ? Mx[8 + V8 / 3] : "") +
            He +
            (Ht && I === "(" ? ")" : "")),
          ut)
        ) {
          for (nt = -1, Ut = Ae.length; ++nt < Ut; )
            if (((Yt = Ae.charCodeAt(nt)), 48 > Yt || Yt > 57)) {
              (He = (Yt === 46 ? o + Ae.slice(nt + 1) : Ae.slice(nt)) + He),
                (Ae = Ae.slice(0, nt));
              break;
            }
        }
      }
      G && !F && (Ae = e(Ae, 1 / 0));
      var On = Be.length + Ae.length + He.length,
        gn = On < X ? new Array(X - On + 1).join(T) : "";
      switch (
        (G &&
          F &&
          ((Ae = e(gn + Ae, gn.length ? X - He.length : 1 / 0)), (gn = "")),
        N)
      ) {
        case "<":
          Ae = Be + Ae + He + gn;
          break;
        case "=":
          Ae = Be + gn + Ae + He;
          break;
        case "^":
          Ae = gn.slice(0, (On = gn.length >> 1)) + Be + Ae + He + gn.slice(On);
          break;
        default:
          Ae = gn + Be + Ae + He;
          break;
      }
      return l(Ae);
    }
    return (
      (Ve.toString = function () {
        return x + "";
      }),
      Ve
    );
  }
  function E(x, T) {
    var N = v(((x = Wg(x)), (x.type = "f"), x)),
      I = Math.max(-8, Math.min(8, Math.floor(Rp(T) / 3))) * 3,
      L = Math.pow(10, -I),
      F = Mx[8 + I / 3];
    return function (X) {
      return N(L * X) + F;
    };
  }
  return { format: v, formatPrefix: E };
}
var Lm, P3, H8;
nB({
  decimal: ".",
  thousands: ",",
  grouping: [3],
  currency: ["$", ""],
  minus: "-",
});
function nB(t) {
  return (Lm = tB(t)), (P3 = Lm.format), (H8 = Lm.formatPrefix), Lm;
}
function rB(t) {
  return Math.max(0, -Rp(Math.abs(t)));
}
function iB(t, e) {
  return Math.max(
    0,
    Math.max(-8, Math.min(8, Math.floor(Rp(e) / 3))) * 3 - Rp(Math.abs(t))
  );
}
function aB(t, e) {
  return (
    (t = Math.abs(t)), (e = Math.abs(e) - t), Math.max(0, Rp(e) - Rp(t)) + 1
  );
}
function oB(t, e, n, r) {
  var o = E_(t, e, n),
    l;
  switch (((r = Wg(r ?? ",f")), r.type)) {
    case "s": {
      var a = Math.max(Math.abs(t), Math.abs(e));
      return (
        r.precision == null && !isNaN((l = iB(o, a))) && (r.precision = l),
        H8(r, a)
      );
    }
    case "":
    case "e":
    case "g":
    case "p":
    case "r": {
      r.precision == null &&
        !isNaN((l = aB(o, Math.max(Math.abs(t), Math.abs(e))))) &&
        (r.precision = l - (r.type === "e"));
      break;
    }
    case "f":
    case "%": {
      r.precision == null &&
        !isNaN((l = rB(o))) &&
        (r.precision = l - (r.type === "%") * 2);
      break;
    }
  }
  return P3(r);
}
function k1(t) {
  var e = t.domain;
  return (
    (t.ticks = function (n) {
      var r = e();
      return B8(r[0], r[r.length - 1], n ?? 10);
    }),
    (t.tickFormat = function (n, r) {
      var o = e();
      return oB(o[0], o[o.length - 1], n ?? 10, r);
    }),
    (t.nice = function (n) {
      n == null && (n = 10);
      var r = e(),
        o = 0,
        l = r.length - 1,
        a = r[o],
        h = r[l],
        f;
      return (
        h < a && ((f = a), (a = h), (h = f), (f = o), (o = l), (l = f)),
        (f = ug(a, h, n)),
        f > 0
          ? ((a = Math.floor(a / f) * f),
            (h = Math.ceil(h / f) * f),
            (f = ug(a, h, n)))
          : f < 0 &&
            ((a = Math.ceil(a * f) / f),
            (h = Math.floor(h * f) / f),
            (f = ug(a, h, n))),
        f > 0
          ? ((r[o] = Math.floor(a / f) * f),
            (r[l] = Math.ceil(h / f) * f),
            e(r))
          : f < 0 &&
            ((r[o] = Math.ceil(a * f) / f),
            (r[l] = Math.floor(h * f) / f),
            e(r)),
        t
      );
    }),
    t
  );
}
function j8() {
  var t = z8(gs, gs);
  return (
    (t.copy = function () {
      return _v(t, j8());
    }),
    s0.apply(t, arguments),
    k1(t)
  );
}
function W8(t, e) {
  t = t.slice();
  var n = 0,
    r = t.length - 1,
    o = t[n],
    l = t[r],
    a;
  return (
    l < o && ((a = n), (n = r), (r = a), (a = o), (o = l), (l = a)),
    (t[n] = e.floor(o)),
    (t[r] = e.ceil(l)),
    t
  );
}
function Px(t) {
  return Math.log(t);
}
function Ox(t) {
  return Math.exp(t);
}
function sB(t) {
  return -Math.log(-t);
}
function lB(t) {
  return -Math.exp(-t);
}
function cB(t) {
  return isFinite(t) ? +("1e" + t) : t < 0 ? 0 : t;
}
function uB(t) {
  return t === 10
    ? cB
    : t === Math.E
    ? Math.exp
    : function (e) {
        return Math.pow(t, e);
      };
}
function dB(t) {
  return t === Math.E
    ? Math.log
    : (t === 10 && Math.log10) ||
        (t === 2 && Math.log2) ||
        ((t = Math.log(t)),
        function (e) {
          return Math.log(e) / t;
        });
}
function Lx(t) {
  return function (e) {
    return -t(-e);
  };
}
function hB(t) {
  var e = t(Px, Ox),
    n = e.domain,
    r = 10,
    o,
    l;
  function a() {
    return (
      (o = dB(r)),
      (l = uB(r)),
      n()[0] < 0 ? ((o = Lx(o)), (l = Lx(l)), t(sB, lB)) : t(Px, Ox),
      e
    );
  }
  return (
    (e.base = function (h) {
      return arguments.length ? ((r = +h), a()) : r;
    }),
    (e.domain = function (h) {
      return arguments.length ? (n(h), a()) : n();
    }),
    (e.ticks = function (h) {
      var f = n(),
        v = f[0],
        E = f[f.length - 1],
        x;
      (x = E < v) && ((T = v), (v = E), (E = T));
      var T = o(v),
        N = o(E),
        I,
        L,
        F,
        X = h == null ? 10 : +h,
        G = [];
      if (!(r % 1) && N - T < X) {
        if (((T = Math.round(T) - 1), (N = Math.round(N) + 1), v > 0)) {
          for (; T < N; ++T)
            for (L = 1, I = l(T); L < r; ++L)
              if (((F = I * L), !(F < v))) {
                if (F > E) break;
                G.push(F);
              }
        } else
          for (; T < N; ++T)
            for (L = r - 1, I = l(T); L >= 1; --L)
              if (((F = I * L), !(F < v))) {
                if (F > E) break;
                G.push(F);
              }
      } else G = B8(T, N, Math.min(N - T, X)).map(l);
      return x ? G.reverse() : G;
    }),
    (e.tickFormat = function (h, f) {
      if (
        (f == null && (f = r === 10 ? ".0e" : ","),
        typeof f != "function" && (f = P3(f)),
        h === 1 / 0)
      )
        return f;
      h == null && (h = 10);
      var v = Math.max(1, (r * h) / e.ticks().length);
      return function (E) {
        var x = E / l(Math.round(o(E)));
        return x * r < r - 0.5 && (x *= r), x <= v ? f(E) : "";
      };
    }),
    (e.nice = function () {
      return n(
        W8(n(), {
          floor: function (h) {
            return l(Math.floor(o(h)));
          },
          ceil: function (h) {
            return l(Math.ceil(o(h)));
          },
        })
      );
    }),
    e
  );
}
function X8() {
  var t = hB(I3()).domain([1, 10]);
  return (
    (t.copy = function () {
      return _v(t, X8()).base(t.base());
    }),
    s0.apply(t, arguments),
    t
  );
}
function Dx(t) {
  return function (e) {
    return e < 0 ? -Math.pow(-e, t) : Math.pow(e, t);
  };
}
function pB(t) {
  return t < 0 ? -Math.sqrt(-t) : Math.sqrt(t);
}
function fB(t) {
  return t < 0 ? -t * t : t * t;
}
function mB(t) {
  var e = t(gs, gs),
    n = 1;
  function r() {
    return n === 1 ? t(gs, gs) : n === 0.5 ? t(pB, fB) : t(Dx(n), Dx(1 / n));
  }
  return (
    (e.exponent = function (o) {
      return arguments.length ? ((n = +o), r()) : n;
    }),
    k1(e)
  );
}
function G8() {
  var t = mB(I3());
  return (
    (t.copy = function () {
      return _v(t, G8()).exponent(t.exponent());
    }),
    s0.apply(t, arguments),
    t
  );
}
function Z8() {
  var t = [],
    e = [],
    n = [],
    r;
  function o() {
    var a = 0,
      h = Math.max(1, e.length);
    for (n = new Array(h - 1); ++a < h; ) n[a - 1] = WD(t, a / h);
    return l;
  }
  function l(a) {
    return isNaN((a = +a)) ? r : e[vv(n, a)];
  }
  return (
    (l.invertExtent = function (a) {
      var h = e.indexOf(a);
      return h < 0
        ? [NaN, NaN]
        : [h > 0 ? n[h - 1] : t[0], h < n.length ? n[h] : t[t.length - 1]];
    }),
    (l.domain = function (a) {
      if (!arguments.length) return t.slice();
      t = [];
      for (var h = 0, f = a.length, v; h < f; ++h)
        (v = a[h]), v != null && !isNaN((v = +v)) && t.push(v);
      return t.sort(R3), o();
    }),
    (l.range = function (a) {
      return arguments.length ? ((e = th.call(a)), o()) : e.slice();
    }),
    (l.unknown = function (a) {
      return arguments.length ? ((r = a), l) : r;
    }),
    (l.quantiles = function () {
      return n.slice();
    }),
    (l.copy = function () {
      return Z8().domain(t).range(e).unknown(r);
    }),
    s0.apply(l, arguments)
  );
}
function Y8() {
  var t = 0,
    e = 1,
    n = 1,
    r = [0.5],
    o = [0, 1],
    l;
  function a(f) {
    return f <= f ? o[vv(r, f, 0, n)] : l;
  }
  function h() {
    var f = -1;
    for (r = new Array(n); ++f < n; )
      r[f] = ((f + 1) * e - (f - n) * t) / (n + 1);
    return a;
  }
  return (
    (a.domain = function (f) {
      return arguments.length ? ((t = +f[0]), (e = +f[1]), h()) : [t, e];
    }),
    (a.range = function (f) {
      return arguments.length
        ? ((n = (o = th.call(f)).length - 1), h())
        : o.slice();
    }),
    (a.invertExtent = function (f) {
      var v = o.indexOf(f);
      return v < 0
        ? [NaN, NaN]
        : v < 1
        ? [t, r[0]]
        : v >= n
        ? [r[n - 1], e]
        : [r[v - 1], r[v]];
    }),
    (a.unknown = function (f) {
      return arguments.length && (l = f), a;
    }),
    (a.thresholds = function () {
      return r.slice();
    }),
    (a.copy = function () {
      return Y8().domain([t, e]).range(o).unknown(l);
    }),
    s0.apply(k1(a), arguments)
  );
}
function q8() {
  var t = [0.5],
    e = [0, 1],
    n,
    r = 1;
  function o(l) {
    return l <= l ? e[vv(t, l, 0, r)] : n;
  }
  return (
    (o.domain = function (l) {
      return arguments.length
        ? ((t = th.call(l)), (r = Math.min(t.length, e.length - 1)), o)
        : t.slice();
    }),
    (o.range = function (l) {
      return arguments.length
        ? ((e = th.call(l)), (r = Math.min(t.length, e.length - 1)), o)
        : e.slice();
    }),
    (o.invertExtent = function (l) {
      var a = e.indexOf(l);
      return [t[a - 1], t[a]];
    }),
    (o.unknown = function (l) {
      return arguments.length ? ((n = l), o) : n;
    }),
    (o.copy = function () {
      return q8().domain(t).range(e).unknown(n);
    }),
    s0.apply(o, arguments)
  );
}
var T2 = new Date(),
  S2 = new Date();
function Ps(t, e, n, r) {
  function o(l) {
    return t((l = arguments.length === 0 ? new Date() : new Date(+l))), l;
  }
  return (
    (o.floor = function (l) {
      return t((l = new Date(+l))), l;
    }),
    (o.ceil = function (l) {
      return t((l = new Date(l - 1))), e(l, 1), t(l), l;
    }),
    (o.round = function (l) {
      var a = o(l),
        h = o.ceil(l);
      return l - a < h - l ? a : h;
    }),
    (o.offset = function (l, a) {
      return e((l = new Date(+l)), a == null ? 1 : Math.floor(a)), l;
    }),
    (o.range = function (l, a, h) {
      var f = [],
        v;
      if (
        ((l = o.ceil(l)),
        (h = h == null ? 1 : Math.floor(h)),
        !(l < a) || !(h > 0))
      )
        return f;
      do f.push((v = new Date(+l))), e(l, h), t(l);
      while (v < l && l < a);
      return f;
    }),
    (o.filter = function (l) {
      return Ps(
        function (a) {
          if (a >= a) for (; t(a), !l(a); ) a.setTime(a - 1);
        },
        function (a, h) {
          if (a >= a)
            if (h < 0) for (; ++h <= 0; ) for (; e(a, -1), !l(a); );
            else for (; --h >= 0; ) for (; e(a, 1), !l(a); );
        }
      );
    }),
    n &&
      ((o.count = function (l, a) {
        return (
          T2.setTime(+l), S2.setTime(+a), t(T2), t(S2), Math.floor(n(T2, S2))
        );
      }),
      (o.every = function (l) {
        return (
          (l = Math.floor(l)),
          !isFinite(l) || !(l > 0)
            ? null
            : l > 1
            ? o.filter(
                r
                  ? function (a) {
                      return r(a) % l === 0;
                    }
                  : function (a) {
                      return o.count(0, a) % l === 0;
                    }
              )
            : o
        );
      })),
    o
  );
}
var Xg = Ps(
  function () {},
  function (t, e) {
    t.setTime(+t + e);
  },
  function (t, e) {
    return e - t;
  }
);
Xg.every = function (t) {
  return (
    (t = Math.floor(t)),
    !isFinite(t) || !(t > 0)
      ? null
      : t > 1
      ? Ps(
          function (e) {
            e.setTime(Math.floor(e / t) * t);
          },
          function (e, n) {
            e.setTime(+e + n * t);
          },
          function (e, n) {
            return (n - e) / t;
          }
        )
      : Xg
  );
};
Xg.range;
var Gg = 1e3,
  x1 = 6e4,
  Bx = 36e5,
  $8 = 864e5,
  K8 = 6048e5,
  Q8 = Ps(
    function (t) {
      t.setTime(t - t.getMilliseconds());
    },
    function (t, e) {
      t.setTime(+t + e * Gg);
    },
    function (t, e) {
      return (e - t) / Gg;
    },
    function (t) {
      return t.getUTCSeconds();
    }
  );
Q8.range;
var J8 = Ps(
  function (t) {
    t.setTime(t - t.getMilliseconds() - t.getSeconds() * Gg);
  },
  function (t, e) {
    t.setTime(+t + e * x1);
  },
  function (t, e) {
    return (e - t) / x1;
  },
  function (t) {
    return t.getMinutes();
  }
);
J8.range;
var e7 = Ps(
  function (t) {
    t.setTime(
      t - t.getMilliseconds() - t.getSeconds() * Gg - t.getMinutes() * x1
    );
  },
  function (t, e) {
    t.setTime(+t + e * Bx);
  },
  function (t, e) {
    return (e - t) / Bx;
  },
  function (t) {
    return t.getHours();
  }
);
e7.range;
var yv = Ps(
  function (t) {
    t.setHours(0, 0, 0, 0);
  },
  function (t, e) {
    t.setDate(t.getDate() + e);
  },
  function (t, e) {
    return (e - t - (e.getTimezoneOffset() - t.getTimezoneOffset()) * x1) / $8;
  },
  function (t) {
    return t.getDate() - 1;
  }
);
yv.range;
function lh(t) {
  return Ps(
    function (e) {
      e.setDate(e.getDate() - ((e.getDay() + 7 - t) % 7)),
        e.setHours(0, 0, 0, 0);
    },
    function (e, n) {
      e.setDate(e.getDate() + n * 7);
    },
    function (e, n) {
      return (
        (n - e - (n.getTimezoneOffset() - e.getTimezoneOffset()) * x1) / K8
      );
    }
  );
}
var O3 = lh(0),
  Zg = lh(1),
  gB = lh(2),
  vB = lh(3),
  Ip = lh(4),
  _B = lh(5),
  yB = lh(6);
O3.range;
Zg.range;
gB.range;
vB.range;
Ip.range;
_B.range;
yB.range;
var t7 = Ps(
  function (t) {
    t.setDate(1), t.setHours(0, 0, 0, 0);
  },
  function (t, e) {
    t.setMonth(t.getMonth() + e);
  },
  function (t, e) {
    return (
      e.getMonth() - t.getMonth() + (e.getFullYear() - t.getFullYear()) * 12
    );
  },
  function (t) {
    return t.getMonth();
  }
);
t7.range;
var i0 = Ps(
  function (t) {
    t.setMonth(0, 1), t.setHours(0, 0, 0, 0);
  },
  function (t, e) {
    t.setFullYear(t.getFullYear() + e);
  },
  function (t, e) {
    return e.getFullYear() - t.getFullYear();
  },
  function (t) {
    return t.getFullYear();
  }
);
i0.every = function (t) {
  return !isFinite((t = Math.floor(t))) || !(t > 0)
    ? null
    : Ps(
        function (e) {
          e.setFullYear(Math.floor(e.getFullYear() / t) * t),
            e.setMonth(0, 1),
            e.setHours(0, 0, 0, 0);
        },
        function (e, n) {
          e.setFullYear(e.getFullYear() + n * t);
        }
      );
};
i0.range;
var L3 = Ps(
  function (t) {
    t.setUTCHours(0, 0, 0, 0);
  },
  function (t, e) {
    t.setUTCDate(t.getUTCDate() + e);
  },
  function (t, e) {
    return (e - t) / $8;
  },
  function (t) {
    return t.getUTCDate() - 1;
  }
);
L3.range;
function ch(t) {
  return Ps(
    function (e) {
      e.setUTCDate(e.getUTCDate() - ((e.getUTCDay() + 7 - t) % 7)),
        e.setUTCHours(0, 0, 0, 0);
    },
    function (e, n) {
      e.setUTCDate(e.getUTCDate() + n * 7);
    },
    function (e, n) {
      return (n - e) / K8;
    }
  );
}
var n7 = ch(0),
  Yg = ch(1),
  xB = ch(2),
  bB = ch(3),
  Mp = ch(4),
  EB = ch(5),
  AB = ch(6);
n7.range;
Yg.range;
xB.range;
bB.range;
Mp.range;
EB.range;
AB.range;
var nh = Ps(
  function (t) {
    t.setUTCMonth(0, 1), t.setUTCHours(0, 0, 0, 0);
  },
  function (t, e) {
    t.setUTCFullYear(t.getUTCFullYear() + e);
  },
  function (t, e) {
    return e.getUTCFullYear() - t.getUTCFullYear();
  },
  function (t) {
    return t.getUTCFullYear();
  }
);
nh.every = function (t) {
  return !isFinite((t = Math.floor(t))) || !(t > 0)
    ? null
    : Ps(
        function (e) {
          e.setUTCFullYear(Math.floor(e.getUTCFullYear() / t) * t),
            e.setUTCMonth(0, 1),
            e.setUTCHours(0, 0, 0, 0);
        },
        function (e, n) {
          e.setUTCFullYear(e.getUTCFullYear() + n * t);
        }
      );
};
nh.range;
function w2(t) {
  if (0 <= t.y && t.y < 100) {
    var e = new Date(-1, t.m, t.d, t.H, t.M, t.S, t.L);
    return e.setFullYear(t.y), e;
  }
  return new Date(t.y, t.m, t.d, t.H, t.M, t.S, t.L);
}
function C2(t) {
  if (0 <= t.y && t.y < 100) {
    var e = new Date(Date.UTC(-1, t.m, t.d, t.H, t.M, t.S, t.L));
    return e.setUTCFullYear(t.y), e;
  }
  return new Date(Date.UTC(t.y, t.m, t.d, t.H, t.M, t.S, t.L));
}
function wf(t, e, n) {
  return { y: t, m: e, d: n, H: 0, M: 0, S: 0, L: 0 };
}
function TB(t) {
  var e = t.dateTime,
    n = t.date,
    r = t.time,
    o = t.periods,
    l = t.days,
    a = t.shortDays,
    h = t.months,
    f = t.shortMonths,
    v = Cf(o),
    E = Nf(o),
    x = Cf(l),
    T = Nf(l),
    N = Cf(a),
    I = Nf(a),
    L = Cf(h),
    F = Nf(h),
    X = Cf(f),
    G = Nf(f),
    K = {
      a: Ht,
      A: On,
      b: gn,
      B: xn,
      c: null,
      d: Hx,
      e: Hx,
      f: ZB,
      g: rF,
      G: aF,
      H: WB,
      I: XB,
      j: GB,
      L: r7,
      m: YB,
      M: qB,
      p: Kn,
      q: er,
      Q: Xx,
      s: Gx,
      S: $B,
      u: KB,
      U: QB,
      V: JB,
      w: eF,
      W: tF,
      x: null,
      X: null,
      y: nF,
      Y: iF,
      Z: oF,
      "%": Wx,
    },
    Q = {
      a: _r,
      A: Nr,
      b: ir,
      B: $i,
      c: null,
      d: jx,
      e: jx,
      f: uF,
      g: xF,
      G: EF,
      H: sF,
      I: lF,
      j: cF,
      L: a7,
      m: dF,
      M: hF,
      p: Tr,
      q: Fi,
      Q: Xx,
      s: Gx,
      S: pF,
      u: fF,
      U: mF,
      V: gF,
      w: vF,
      W: _F,
      x: null,
      X: null,
      y: yF,
      Y: bF,
      Z: AF,
      "%": Wx,
    },
    ee = {
      a: Ve,
      A: Ae,
      b: Be,
      B: He,
      c: nt,
      d: zx,
      e: zx,
      f: zB,
      g: Ux,
      G: kx,
      H: Vx,
      I: Vx,
      j: BB,
      L: UB,
      m: DB,
      M: FB,
      p: ut,
      q: LB,
      Q: HB,
      s: jB,
      S: kB,
      u: RB,
      U: IB,
      V: MB,
      w: NB,
      W: PB,
      x: Ut,
      X: Yt,
      y: Ux,
      Y: kx,
      Z: OB,
      "%": VB,
    };
  (K.x = Se(n, K)),
    (K.X = Se(r, K)),
    (K.c = Se(e, K)),
    (Q.x = Se(n, Q)),
    (Q.X = Se(r, Q)),
    (Q.c = Se(e, Q));
  function Se(qe, $t) {
    return function (Cn) {
      var St = [],
        An = -1,
        ar = 0,
        yr = qe.length,
        nr,
        Qn,
        Sr;
      for (Cn instanceof Date || (Cn = new Date(+Cn)); ++An < yr; )
        qe.charCodeAt(An) === 37 &&
          (St.push(qe.slice(ar, An)),
          (Qn = Fx[(nr = qe.charAt(++An))]) != null
            ? (nr = qe.charAt(++An))
            : (Qn = nr === "e" ? " " : "0"),
          (Sr = $t[nr]) && (nr = Sr(Cn, Qn)),
          St.push(nr),
          (ar = An + 1));
      return St.push(qe.slice(ar, An)), St.join("");
    };
  }
  function ue(qe, $t) {
    return function (Cn) {
      var St = wf(1900, void 0, 1),
        An = ke(St, qe, (Cn += ""), 0),
        ar,
        yr;
      if (An != Cn.length) return null;
      if ("Q" in St) return new Date(St.Q);
      if ("s" in St) return new Date(St.s * 1e3 + ("L" in St ? St.L : 0));
      if (
        ($t && !("Z" in St) && (St.Z = 0),
        "p" in St && (St.H = (St.H % 12) + St.p * 12),
        St.m === void 0 && (St.m = "q" in St ? St.q : 0),
        "V" in St)
      ) {
        if (St.V < 1 || St.V > 53) return null;
        "w" in St || (St.w = 1),
          "Z" in St
            ? ((ar = C2(wf(St.y, 0, 1))),
              (yr = ar.getUTCDay()),
              (ar = yr > 4 || yr === 0 ? Yg.ceil(ar) : Yg(ar)),
              (ar = L3.offset(ar, (St.V - 1) * 7)),
              (St.y = ar.getUTCFullYear()),
              (St.m = ar.getUTCMonth()),
              (St.d = ar.getUTCDate() + ((St.w + 6) % 7)))
            : ((ar = w2(wf(St.y, 0, 1))),
              (yr = ar.getDay()),
              (ar = yr > 4 || yr === 0 ? Zg.ceil(ar) : Zg(ar)),
              (ar = yv.offset(ar, (St.V - 1) * 7)),
              (St.y = ar.getFullYear()),
              (St.m = ar.getMonth()),
              (St.d = ar.getDate() + ((St.w + 6) % 7)));
      } else
        ("W" in St || "U" in St) &&
          ("w" in St || (St.w = "u" in St ? St.u % 7 : "W" in St ? 1 : 0),
          (yr =
            "Z" in St
              ? C2(wf(St.y, 0, 1)).getUTCDay()
              : w2(wf(St.y, 0, 1)).getDay()),
          (St.m = 0),
          (St.d =
            "W" in St
              ? ((St.w + 6) % 7) + St.W * 7 - ((yr + 5) % 7)
              : St.w + St.U * 7 - ((yr + 6) % 7)));
      return "Z" in St
        ? ((St.H += (St.Z / 100) | 0), (St.M += St.Z % 100), C2(St))
        : w2(St);
    };
  }
  function ke(qe, $t, Cn, St) {
    for (var An = 0, ar = $t.length, yr = Cn.length, nr, Qn; An < ar; ) {
      if (St >= yr) return -1;
      if (((nr = $t.charCodeAt(An++)), nr === 37)) {
        if (
          ((nr = $t.charAt(An++)),
          (Qn = ee[nr in Fx ? $t.charAt(An++) : nr]),
          !Qn || (St = Qn(qe, Cn, St)) < 0)
        )
          return -1;
      } else if (nr != Cn.charCodeAt(St++)) return -1;
    }
    return St;
  }
  function ut(qe, $t, Cn) {
    var St = v.exec($t.slice(Cn));
    return St ? ((qe.p = E[St[0].toLowerCase()]), Cn + St[0].length) : -1;
  }
  function Ve(qe, $t, Cn) {
    var St = N.exec($t.slice(Cn));
    return St ? ((qe.w = I[St[0].toLowerCase()]), Cn + St[0].length) : -1;
  }
  function Ae(qe, $t, Cn) {
    var St = x.exec($t.slice(Cn));
    return St ? ((qe.w = T[St[0].toLowerCase()]), Cn + St[0].length) : -1;
  }
  function Be(qe, $t, Cn) {
    var St = X.exec($t.slice(Cn));
    return St ? ((qe.m = G[St[0].toLowerCase()]), Cn + St[0].length) : -1;
  }
  function He(qe, $t, Cn) {
    var St = L.exec($t.slice(Cn));
    return St ? ((qe.m = F[St[0].toLowerCase()]), Cn + St[0].length) : -1;
  }
  function nt(qe, $t, Cn) {
    return ke(qe, e, $t, Cn);
  }
  function Ut(qe, $t, Cn) {
    return ke(qe, n, $t, Cn);
  }
  function Yt(qe, $t, Cn) {
    return ke(qe, r, $t, Cn);
  }
  function Ht(qe) {
    return a[qe.getDay()];
  }
  function On(qe) {
    return l[qe.getDay()];
  }
  function gn(qe) {
    return f[qe.getMonth()];
  }
  function xn(qe) {
    return h[qe.getMonth()];
  }
  function Kn(qe) {
    return o[+(qe.getHours() >= 12)];
  }
  function er(qe) {
    return 1 + ~~(qe.getMonth() / 3);
  }
  function _r(qe) {
    return a[qe.getUTCDay()];
  }
  function Nr(qe) {
    return l[qe.getUTCDay()];
  }
  function ir(qe) {
    return f[qe.getUTCMonth()];
  }
  function $i(qe) {
    return h[qe.getUTCMonth()];
  }
  function Tr(qe) {
    return o[+(qe.getUTCHours() >= 12)];
  }
  function Fi(qe) {
    return 1 + ~~(qe.getUTCMonth() / 3);
  }
  return {
    format: function (qe) {
      var $t = Se((qe += ""), K);
      return (
        ($t.toString = function () {
          return qe;
        }),
        $t
      );
    },
    parse: function (qe) {
      var $t = ue((qe += ""), !1);
      return (
        ($t.toString = function () {
          return qe;
        }),
        $t
      );
    },
    utcFormat: function (qe) {
      var $t = Se((qe += ""), Q);
      return (
        ($t.toString = function () {
          return qe;
        }),
        $t
      );
    },
    utcParse: function (qe) {
      var $t = ue((qe += ""), !0);
      return (
        ($t.toString = function () {
          return qe;
        }),
        $t
      );
    },
  };
}
var Fx = { "-": "", _: " ", 0: "0" },
  Ho = /^\s*\d+/,
  SB = /^%/,
  wB = /[\\^$*+?|[\]().{}]/g;
function Ei(t, e, n) {
  var r = t < 0 ? "-" : "",
    o = (r ? -t : t) + "",
    l = o.length;
  return r + (l < n ? new Array(n - l + 1).join(e) + o : o);
}
function CB(t) {
  return t.replace(wB, "\\$&");
}
function Cf(t) {
  return new RegExp("^(?:" + t.map(CB).join("|") + ")", "i");
}
function Nf(t) {
  for (var e = {}, n = -1, r = t.length; ++n < r; ) e[t[n].toLowerCase()] = n;
  return e;
}
function NB(t, e, n) {
  var r = Ho.exec(e.slice(n, n + 1));
  return r ? ((t.w = +r[0]), n + r[0].length) : -1;
}
function RB(t, e, n) {
  var r = Ho.exec(e.slice(n, n + 1));
  return r ? ((t.u = +r[0]), n + r[0].length) : -1;
}
function IB(t, e, n) {
  var r = Ho.exec(e.slice(n, n + 2));
  return r ? ((t.U = +r[0]), n + r[0].length) : -1;
}
function MB(t, e, n) {
  var r = Ho.exec(e.slice(n, n + 2));
  return r ? ((t.V = +r[0]), n + r[0].length) : -1;
}
function PB(t, e, n) {
  var r = Ho.exec(e.slice(n, n + 2));
  return r ? ((t.W = +r[0]), n + r[0].length) : -1;
}
function kx(t, e, n) {
  var r = Ho.exec(e.slice(n, n + 4));
  return r ? ((t.y = +r[0]), n + r[0].length) : -1;
}
function Ux(t, e, n) {
  var r = Ho.exec(e.slice(n, n + 2));
  return r ? ((t.y = +r[0] + (+r[0] > 68 ? 1900 : 2e3)), n + r[0].length) : -1;
}
function OB(t, e, n) {
  var r = /^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n, n + 6));
  return r
    ? ((t.Z = r[1] ? 0 : -(r[2] + (r[3] || "00"))), n + r[0].length)
    : -1;
}
function LB(t, e, n) {
  var r = Ho.exec(e.slice(n, n + 1));
  return r ? ((t.q = r[0] * 3 - 3), n + r[0].length) : -1;
}
function DB(t, e, n) {
  var r = Ho.exec(e.slice(n, n + 2));
  return r ? ((t.m = r[0] - 1), n + r[0].length) : -1;
}
function zx(t, e, n) {
  var r = Ho.exec(e.slice(n, n + 2));
  return r ? ((t.d = +r[0]), n + r[0].length) : -1;
}
function BB(t, e, n) {
  var r = Ho.exec(e.slice(n, n + 3));
  return r ? ((t.m = 0), (t.d = +r[0]), n + r[0].length) : -1;
}
function Vx(t, e, n) {
  var r = Ho.exec(e.slice(n, n + 2));
  return r ? ((t.H = +r[0]), n + r[0].length) : -1;
}
function FB(t, e, n) {
  var r = Ho.exec(e.slice(n, n + 2));
  return r ? ((t.M = +r[0]), n + r[0].length) : -1;
}
function kB(t, e, n) {
  var r = Ho.exec(e.slice(n, n + 2));
  return r ? ((t.S = +r[0]), n + r[0].length) : -1;
}
function UB(t, e, n) {
  var r = Ho.exec(e.slice(n, n + 3));
  return r ? ((t.L = +r[0]), n + r[0].length) : -1;
}
function zB(t, e, n) {
  var r = Ho.exec(e.slice(n, n + 6));
  return r ? ((t.L = Math.floor(r[0] / 1e3)), n + r[0].length) : -1;
}
function VB(t, e, n) {
  var r = SB.exec(e.slice(n, n + 1));
  return r ? n + r[0].length : -1;
}
function HB(t, e, n) {
  var r = Ho.exec(e.slice(n));
  return r ? ((t.Q = +r[0]), n + r[0].length) : -1;
}
function jB(t, e, n) {
  var r = Ho.exec(e.slice(n));
  return r ? ((t.s = +r[0]), n + r[0].length) : -1;
}
function Hx(t, e) {
  return Ei(t.getDate(), e, 2);
}
function WB(t, e) {
  return Ei(t.getHours(), e, 2);
}
function XB(t, e) {
  return Ei(t.getHours() % 12 || 12, e, 2);
}
function GB(t, e) {
  return Ei(1 + yv.count(i0(t), t), e, 3);
}
function r7(t, e) {
  return Ei(t.getMilliseconds(), e, 3);
}
function ZB(t, e) {
  return r7(t, e) + "000";
}
function YB(t, e) {
  return Ei(t.getMonth() + 1, e, 2);
}
function qB(t, e) {
  return Ei(t.getMinutes(), e, 2);
}
function $B(t, e) {
  return Ei(t.getSeconds(), e, 2);
}
function KB(t) {
  var e = t.getDay();
  return e === 0 ? 7 : e;
}
function QB(t, e) {
  return Ei(O3.count(i0(t) - 1, t), e, 2);
}
function i7(t) {
  var e = t.getDay();
  return e >= 4 || e === 0 ? Ip(t) : Ip.ceil(t);
}
function JB(t, e) {
  return (t = i7(t)), Ei(Ip.count(i0(t), t) + (i0(t).getDay() === 4), e, 2);
}
function eF(t) {
  return t.getDay();
}
function tF(t, e) {
  return Ei(Zg.count(i0(t) - 1, t), e, 2);
}
function nF(t, e) {
  return Ei(t.getFullYear() % 100, e, 2);
}
function rF(t, e) {
  return (t = i7(t)), Ei(t.getFullYear() % 100, e, 2);
}
function iF(t, e) {
  return Ei(t.getFullYear() % 1e4, e, 4);
}
function aF(t, e) {
  var n = t.getDay();
  return (
    (t = n >= 4 || n === 0 ? Ip(t) : Ip.ceil(t)),
    Ei(t.getFullYear() % 1e4, e, 4)
  );
}
function oF(t) {
  var e = t.getTimezoneOffset();
  return (
    (e > 0 ? "-" : ((e *= -1), "+")) +
    Ei((e / 60) | 0, "0", 2) +
    Ei(e % 60, "0", 2)
  );
}
function jx(t, e) {
  return Ei(t.getUTCDate(), e, 2);
}
function sF(t, e) {
  return Ei(t.getUTCHours(), e, 2);
}
function lF(t, e) {
  return Ei(t.getUTCHours() % 12 || 12, e, 2);
}
function cF(t, e) {
  return Ei(1 + L3.count(nh(t), t), e, 3);
}
function a7(t, e) {
  return Ei(t.getUTCMilliseconds(), e, 3);
}
function uF(t, e) {
  return a7(t, e) + "000";
}
function dF(t, e) {
  return Ei(t.getUTCMonth() + 1, e, 2);
}
function hF(t, e) {
  return Ei(t.getUTCMinutes(), e, 2);
}
function pF(t, e) {
  return Ei(t.getUTCSeconds(), e, 2);
}
function fF(t) {
  var e = t.getUTCDay();
  return e === 0 ? 7 : e;
}
function mF(t, e) {
  return Ei(n7.count(nh(t) - 1, t), e, 2);
}
function o7(t) {
  var e = t.getUTCDay();
  return e >= 4 || e === 0 ? Mp(t) : Mp.ceil(t);
}
function gF(t, e) {
  return (t = o7(t)), Ei(Mp.count(nh(t), t) + (nh(t).getUTCDay() === 4), e, 2);
}
function vF(t) {
  return t.getUTCDay();
}
function _F(t, e) {
  return Ei(Yg.count(nh(t) - 1, t), e, 2);
}
function yF(t, e) {
  return Ei(t.getUTCFullYear() % 100, e, 2);
}
function xF(t, e) {
  return (t = o7(t)), Ei(t.getUTCFullYear() % 100, e, 2);
}
function bF(t, e) {
  return Ei(t.getUTCFullYear() % 1e4, e, 4);
}
function EF(t, e) {
  var n = t.getUTCDay();
  return (
    (t = n >= 4 || n === 0 ? Mp(t) : Mp.ceil(t)),
    Ei(t.getUTCFullYear() % 1e4, e, 4)
  );
}
function AF() {
  return "+0000";
}
function Wx() {
  return "%";
}
function Xx(t) {
  return +t;
}
function Gx(t) {
  return Math.floor(+t / 1e3);
}
var Qh, s7;
TF({
  dateTime: "%x, %X",
  date: "%-m/%-d/%Y",
  time: "%-I:%M:%S %p",
  periods: ["AM", "PM"],
  days: [
    "Sunday",
    "Monday",
    "Tuesday",
    "Wednesday",
    "Thursday",
    "Friday",
    "Saturday",
  ],
  shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  months: [
    "January",
    "February",
    "March",
    "April",
    "May",
    "June",
    "July",
    "August",
    "September",
    "October",
    "November",
    "December",
  ],
  shortMonths: [
    "Jan",
    "Feb",
    "Mar",
    "Apr",
    "May",
    "Jun",
    "Jul",
    "Aug",
    "Sep",
    "Oct",
    "Nov",
    "Dec",
  ],
});
function TF(t) {
  return (
    (Qh = TB(t)), (s7 = Qh.format), Qh.parse, Qh.utcFormat, Qh.utcParse, Qh
  );
}
var Yf = 1e3,
  qf = Yf * 60,
  $f = qf * 60,
  b1 = $f * 24,
  SF = b1 * 7,
  Zx = b1 * 30,
  N2 = b1 * 365;
function wF(t) {
  return new Date(t);
}
function CF(t) {
  return t instanceof Date ? +t : +new Date(+t);
}
function l7(t, e, n, r, o, l, a, h, f) {
  var v = z8(gs, gs),
    E = v.invert,
    x = v.domain,
    T = f(".%L"),
    N = f(":%S"),
    I = f("%I:%M"),
    L = f("%I %p"),
    F = f("%a %d"),
    X = f("%b %d"),
    G = f("%B"),
    K = f("%Y"),
    Q = [
      [a, 1, Yf],
      [a, 5, 5 * Yf],
      [a, 15, 15 * Yf],
      [a, 30, 30 * Yf],
      [l, 1, qf],
      [l, 5, 5 * qf],
      [l, 15, 15 * qf],
      [l, 30, 30 * qf],
      [o, 1, $f],
      [o, 3, 3 * $f],
      [o, 6, 6 * $f],
      [o, 12, 12 * $f],
      [r, 1, b1],
      [r, 2, 2 * b1],
      [n, 1, SF],
      [e, 1, Zx],
      [e, 3, 3 * Zx],
      [t, 1, N2],
    ];
  function ee(ue) {
    return (
      a(ue) < ue
        ? T
        : l(ue) < ue
        ? N
        : o(ue) < ue
        ? I
        : r(ue) < ue
        ? L
        : e(ue) < ue
        ? n(ue) < ue
          ? F
          : X
        : t(ue) < ue
        ? G
        : K
    )(ue);
  }
  function Se(ue, ke, ut, Ve) {
    if ((ue == null && (ue = 10), typeof ue == "number")) {
      var Ae = Math.abs(ut - ke) / ue,
        Be = D8(function (He) {
          return He[2];
        }).right(Q, Ae);
      Be === Q.length
        ? ((Ve = E_(ke / N2, ut / N2, ue)), (ue = t))
        : Be
        ? ((Be = Q[Ae / Q[Be - 1][2] < Q[Be][2] / Ae ? Be - 1 : Be]),
          (Ve = Be[1]),
          (ue = Be[0]))
        : ((Ve = Math.max(E_(ke, ut, ue), 1)), (ue = h));
    }
    return Ve == null ? ue : ue.every(Ve);
  }
  return (
    (v.invert = function (ue) {
      return new Date(E(ue));
    }),
    (v.domain = function (ue) {
      return arguments.length ? x(U8.call(ue, CF)) : x().map(wF);
    }),
    (v.ticks = function (ue, ke) {
      var ut = x(),
        Ve = ut[0],
        Ae = ut[ut.length - 1],
        Be = Ae < Ve,
        He;
      return (
        Be && ((He = Ve), (Ve = Ae), (Ae = He)),
        (He = Se(ue, Ve, Ae, ke)),
        (He = He ? He.range(Ve, Ae + 1) : []),
        Be ? He.reverse() : He
      );
    }),
    (v.tickFormat = function (ue, ke) {
      return ke == null ? ee : f(ke);
    }),
    (v.nice = function (ue, ke) {
      var ut = x();
      return (ue = Se(ue, ut[0], ut[ut.length - 1], ke)) ? x(W8(ut, ue)) : v;
    }),
    (v.copy = function () {
      return _v(v, l7(t, e, n, r, o, l, a, h, f));
    }),
    v
  );
}
function NF() {
  return s0.apply(
    l7(i0, t7, O3, yv, e7, J8, Q8, Xg, s7).domain([
      new Date(2e3, 0, 1),
      new Date(2e3, 0, 2),
    ]),
    arguments
  );
}
function RF() {
  var t = 0,
    e = 1,
    n,
    r,
    o,
    l,
    a = gs,
    h = !1,
    f;
  function v(E) {
    return isNaN((E = +E))
      ? f
      : a(
          o === 0
            ? 0.5
            : ((E = (l(E) - n) * o), h ? Math.max(0, Math.min(1, E)) : E)
        );
  }
  return (
    (v.domain = function (E) {
      return arguments.length
        ? ((n = l((t = +E[0]))),
          (r = l((e = +E[1]))),
          (o = n === r ? 0 : 1 / (r - n)),
          v)
        : [t, e];
    }),
    (v.clamp = function (E) {
      return arguments.length ? ((h = !!E), v) : h;
    }),
    (v.interpolator = function (E) {
      return arguments.length ? ((a = E), v) : a;
    }),
    (v.unknown = function (E) {
      return arguments.length ? ((f = E), v) : f;
    }),
    function (E) {
      return (
        (l = E), (n = E(t)), (r = E(e)), (o = n === r ? 0 : 1 / (r - n)), v
      );
    }
  );
}
function c7(t, e) {
  return e
    .domain(t.domain())
    .interpolator(t.interpolator())
    .clamp(t.clamp())
    .unknown(t.unknown());
}
function u7() {
  var t = k1(RF()(gs));
  return (
    (t.copy = function () {
      return c7(t, u7());
    }),
    F8.apply(t, arguments)
  );
}
function IF() {
  var t = 0,
    e = 0.5,
    n = 1,
    r,
    o,
    l,
    a,
    h,
    f = gs,
    v,
    E = !1,
    x;
  function T(N) {
    return isNaN((N = +N))
      ? x
      : ((N = 0.5 + ((N = +v(N)) - o) * (N < o ? a : h)),
        f(E ? Math.max(0, Math.min(1, N)) : N));
  }
  return (
    (T.domain = function (N) {
      return arguments.length
        ? ((r = v((t = +N[0]))),
          (o = v((e = +N[1]))),
          (l = v((n = +N[2]))),
          (a = r === o ? 0 : 0.5 / (o - r)),
          (h = o === l ? 0 : 0.5 / (l - o)),
          T)
        : [t, e, n];
    }),
    (T.clamp = function (N) {
      return arguments.length ? ((E = !!N), T) : E;
    }),
    (T.interpolator = function (N) {
      return arguments.length ? ((f = N), T) : f;
    }),
    (T.unknown = function (N) {
      return arguments.length ? ((x = N), T) : x;
    }),
    function (N) {
      return (
        (v = N),
        (r = N(t)),
        (o = N(e)),
        (l = N(n)),
        (a = r === o ? 0 : 0.5 / (o - r)),
        (h = o === l ? 0 : 0.5 / (l - o)),
        T
      );
    }
  );
}
function d7() {
  var t = k1(IF()(gs));
  return (
    (t.copy = function () {
      return c7(t, d7());
    }),
    F8.apply(t, arguments)
  );
}
function h7(t) {
  let e,
    n = [];
  function r(o) {
    return o ?? e;
  }
  return (
    (r.invert = r),
    (r.domain = r.range = (o) => (o ? ((n = o), o) : n)),
    (r.unknown = (o) => (o ? ((e = o), o) : e)),
    (r.copy = () => h7().unknown(e)),
    r
  );
}
const { isNil: R2, isString: MF, uniq: PF } = Ka,
  OF =
    /^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,
  LF = {
    [Si.LINEAR]: j8,
    [Si.POWER]: G8,
    [Si.LOG]: X8,
    [Si.IDENTITY]: h7,
    [Si.SEQUENTIAL]: u7,
    [Si.TIME]: NF,
    [Si.QUANTILE]: Z8,
    [Si.QUANTIZE]: Y8,
    [Si.THRESHOLD]: q8,
    [Si.CAT]: Hg,
    [Si.DIVERGING]: d7,
  };
class DF {
  constructor() {
    R(this, "scaleOptions", {});
  }
  apply(e, { styleAttributeService: n }) {
    var r = this;
    e.hooks.init.tapPromise(
      "FeatureScalePlugin",
      bt(function* () {
        var o;
        e.log(Io.ScaleInitStart, es.INIT),
          (r.scaleOptions = e.getScaleOptions());
        const l = n.getLayerStyleAttributes(),
          a =
            (o = e.getSource()) === null || o === void 0
              ? void 0
              : o.data.dataArray;
        (Array.isArray(a) && a.length === 0) ||
          (r.caculateScalesForAttributes(l || [], a),
          e.log(Io.ScaleInitEnd, es.INIT));
      })
    ),
      e.hooks.beforeRenderData.tapPromise(
        "FeatureScalePlugin",
        (function () {
          var o = bt(function* (l) {
            if (!l) return l;
            e.log(Io.ScaleInitStart, es.UPDATE),
              (r.scaleOptions = e.getScaleOptions());
            const a = n.getLayerStyleAttributes(),
              h = e.getSource().data.dataArray;
            return (
              (Array.isArray(h) && h.length === 0) ||
                (r.caculateScalesForAttributes(a || [], h),
                e.log(Io.ScaleInitEnd, es.UPDATE),
                (e.layerModelNeedUpdate = !0)),
              !0
            );
          });
          return function (l) {
            return o.apply(this, arguments);
          };
        })()
      ),
      e.hooks.beforeRender.tap("FeatureScalePlugin", () => {
        if (e.layerModelNeedUpdate) return;
        this.scaleOptions = e.getScaleOptions();
        const o = n.getLayerStyleAttributes(),
          l = e.getSource().data.dataArray;
        if (!(Array.isArray(l) && l.length === 0) && o) {
          const a = o.filter((h) => h.needRescale);
          a.length && this.caculateScalesForAttributes(a, l);
        }
      });
  }
  isNumber(e) {
    return !isNaN(parseFloat(e)) && isFinite(e);
  }
  caculateScalesForAttributes(e, n) {
    e.forEach((r) => {
      if (r.scale) {
        const o = r.scale,
          l = r.scale.field;
        o.names = this.parseFields(R2(l) ? [] : l);
        const a = [];
        o.names.forEach((h) => {
          var f;
          a.push(
            this.createScale(
              h,
              r.name,
              (f = r.scale) === null || f === void 0 ? void 0 : f.values,
              n
            )
          );
        }),
          a.some((h) => h.type === Kh.VARIABLE)
            ? ((o.type = Kh.VARIABLE),
              a.forEach((h) => {
                if (!o.callback && o.values !== "text") {
                  var f;
                  switch (
                    (f = h.option) === null || f === void 0 ? void 0 : f.type
                  ) {
                    case Si.LOG:
                    case Si.LINEAR:
                    case Si.POWER:
                      if (o.values && o.values.length > 2) {
                        const E = h.scale.ticks(o.values.length);
                        h.scale.domain(E);
                      }
                      o.values
                        ? h.scale.range(o.values)
                        : h.scale.range(h.option.domain);
                      break;
                    case Si.QUANTILE:
                    case Si.QUANTIZE:
                    case Si.THRESHOLD:
                      h.scale.range(o.values);
                      break;
                    case Si.IDENTITY:
                      break;
                    case Si.CAT:
                      o.values
                        ? h.scale.range(o.values)
                        : h.scale.range(h.option.domain);
                      break;
                    case Si.DIVERGING:
                    case Si.SEQUENTIAL:
                      h.scale.interpolator(MD(o.values));
                      break;
                  }
                }
                if (o.values === "text") {
                  var v;
                  h.scale.range(
                    (v = h.option) === null || v === void 0 ? void 0 : v.domain
                  );
                }
              }))
            : ((o.type = Kh.CONSTANT),
              (o.defaultValues = a.map((h, f) => h.scale(o.names[f])))),
          (o.scalers = a.map((h) => ({
            field: h.field,
            func: h.scale,
            option: h.option,
          }))),
          (r.needRescale = !1);
      }
    });
  }
  parseFields(e) {
    return Array.isArray(e) ? e : MF(e) ? e.split("*") : [e];
  }
  createScale(e, n, r, o) {
    var l, a;
    const h =
        this.scaleOptions[n] &&
        ((l = this.scaleOptions[n]) === null || l === void 0
          ? void 0
          : l.field) === e
          ? this.scaleOptions[n]
          : this.scaleOptions[e],
      f = { field: e, scale: void 0, type: Kh.VARIABLE, option: h };
    if (!o || !o.length)
      return (
        h && h.type
          ? (f.scale = this.createDefaultScale(h))
          : ((f.scale = Hg([e])), (f.type = Kh.CONSTANT)),
        f
      );
    const v =
      (a = o.find((E) => !R2(E[e]))) === null || a === void 0 ? void 0 : a[e];
    if (this.isNumber(e) || (R2(v) && !h))
      (f.scale = Hg([e])), (f.type = Kh.CONSTANT);
    else {
      let E = (h && h.type) || this.getDefaultType(v);
      r === "text" && (E = Si.CAT), r === void 0 && (E = Si.IDENTITY);
      const x = this.createScaleConfig(E, e, h, o);
      (f.scale = this.createDefaultScale(x)), (f.option = x);
    }
    return f;
  }
  getDefaultType(e) {
    let n = Si.LINEAR;
    return typeof e == "string" && (n = OF.test(e) ? Si.TIME : Si.CAT), n;
  }
  createScaleConfig(e, n, r, o) {
    const l = { type: e };
    let a = [];
    if (e === Si.QUANTILE) {
      const h = new Map();
      o == null ||
        o.forEach((f) => {
          h.set(f._id, f[n]);
        }),
        (a = Array.from(h.values()));
    } else a = (o == null ? void 0 : o.map((h) => h[n])) || [];
    if (r != null && r.domain) l.domain = r == null ? void 0 : r.domain;
    else if (e === Si.CAT || e === Si.IDENTITY) l.domain = PF(a);
    else if (e === Si.QUANTILE) l.domain = a;
    else if (e === Si.DIVERGING) {
      const h = xx(a),
        f =
          (r == null ? void 0 : r.neutral) !== void 0
            ? r == null
              ? void 0
              : r.neutral
            : (h[0] + h[1]) / 2;
      l.domain = [h[0], f, h[1]];
    } else l.domain = xx(a);
    return mt(mt({}, l), r);
  }
  createDefaultScale({ type: e, domain: n, unknown: r, clamp: o, nice: l }) {
    const a = LF[e]();
    return (
      n && a.domain && a.domain(n),
      r && a.unknown(r),
      o !== void 0 && a.clamp && a.clamp(o),
      l !== void 0 && a.nice && a.nice(l),
      a
    );
  }
}
class BF {
  apply(e) {
    e.hooks.beforeRender.tap("LayerAnimateStylePlugin", () => {
      e.animateStatus &&
        e.models.forEach((r) => {
          r.addUniforms(mt({}, e.layerModel.getAnimateUniforms()));
        });
    });
  }
}
let FF = class {
  apply(e) {
    e.hooks.afterInit.tap("LayerMaskPlugin", () => {
      const { maskLayers: n, enableMask: r } = e.getLayerConfig();
      !e.tileLayer && n && n.length > 0 && e.updateLayerConfig({ mask: r });
    });
  }
};
class kF {
  build(e) {
    return bt(function* () {
      e.prepareBuildModel(), yield e.buildModels();
    })();
  }
  initLayerModel(e) {
    var n = this;
    return bt(function* () {
      yield n.build(e), (e.styleNeedUpdate = !1);
    })();
  }
  prepareLayerModel(e) {
    var n = this;
    return bt(function* () {
      yield n.build(e), (e.styleNeedUpdate = !1);
    })();
  }
  apply(e) {
    var n = this;
    e.hooks.init.tapPromise(
      "LayerModelPlugin",
      bt(function* () {
        if (e.getSource().isTile) {
          e.prepareBuildModel();
          return;
        }
        e.log(Io.BuildModelStart, es.INIT),
          yield n.initLayerModel(e),
          e.log(Io.BuildModelEnd, es.INIT);
      })
    ),
      e.hooks.beforeRenderData.tapPromise(
        "LayerModelPlugin",
        (function () {
          var r = bt(function* (o) {
            return !o || e.getSource().isTile
              ? !1
              : (e.log(Io.BuildModelStart, es.UPDATE),
                yield n.prepareLayerModel(e),
                e.log(Io.BuildModelEnd, es.UPDATE),
                !0);
          });
          return function (o) {
            return r.apply(this, arguments);
          };
        })()
      );
  }
}
class UF {
  apply(e) {
    e.hooks.afterInit.tap("LayerStylePlugin", () => {
      const { autoFit: n, fitBoundsOptions: r } = e.getLayerConfig();
      n && e.fitBounds(r), (e.styleNeedUpdate = !1);
    });
  }
}
const zF = ["type"],
  Yx = {
    directional: {
      lights: "u_DirectionalLights",
      num: "u_NumOfDirectionalLights",
    },
    spot: { lights: "u_SpotLights", num: "u_NumOfSpotLights" },
  },
  VF = {
    type: "directional",
    direction: [1, 10.5, 12],
    ambient: [0.2, 0.2, 0.2],
    diffuse: [0.6, 0.6, 0.6],
    specular: [0.1, 0.1, 0.1],
  },
  HF = {
    direction: [0, 0, 0],
    ambient: [0, 0, 0],
    diffuse: [0, 0, 0],
    specular: [0, 0, 0],
  },
  jF = {
    position: [0, 0, 0],
    direction: [0, 0, 0],
    ambient: [0, 0, 0],
    diffuse: [0, 0, 0],
    specular: [0, 0, 0],
    constant: 1,
    linear: 0,
    quadratic: 0,
    angle: 14,
    exponent: 40,
    blur: 5,
  };
function WF(t) {
  const e = {
    u_DirectionalLights: new Array(3).fill(mt({}, HF)),
    u_NumOfDirectionalLights: 0,
    u_SpotLights: new Array(3).fill(mt({}, jF)),
    u_NumOfSpotLights: 0,
  };
  return (
    (!t || !t.length) && (t = [VF]),
    t.forEach((n) => {
      let { type: r = "directional" } = n,
        o = pc(n, zF);
      const l = Yx[r].lights,
        a = Yx[r].num,
        h = e[a];
      (e[l][h] = mt(mt({}, e[l][h]), o)), e[a]++;
    }),
    e
  );
}
class XF {
  apply(e) {
    e.hooks.beforeRender.tap("LightingPlugin", () => {
      const { enableLighting: n } = e.getLayerConfig();
      n && e.models.forEach((r) => r.addUniforms(mt({}, WF())));
    });
  }
}
function p7(t) {
  return t.map((e) => (typeof e == "string" && (e = [e, {}]), e));
}
function f7(t, e, n, r) {
  const o = t.multiPassRenderer;
  return (
    o.add(r("render")),
    p7(e).forEach((l) => {
      const [a, h] = l;
      o.add(n(a), h);
    }),
    o.add(n("copy")),
    o
  );
}
class GF {
  constructor() {
    R(this, "enabled", void 0);
  }
  apply(
    e,
    { rendererService: n, postProcessingPassFactory: r, normalPassFactory: o }
  ) {
    e.hooks.init.tapPromise("MultiPassRendererPlugin", () => {
      const { enableMultiPassRenderer: l, passes: a = [] } = e.getLayerConfig();
      (this.enabled = !!l && e.getLayerConfig().enableMultiPassRenderer !== !1),
        this.enabled &&
          ((e.multiPassRenderer = f7(e, a, r, o)),
          e.multiPassRenderer.setRenderFlag(!0));
    }),
      e.hooks.beforeRender.tap("MultiPassRendererPlugin", () => {
        if (this.enabled) {
          const { width: l, height: a } = n.getViewportSize();
          e.multiPassRenderer.resize(l, a);
        }
      });
  }
}
const $d = {
  POSITION: 0,
  POSITION_64LOW: 1,
  COLOR: 2,
  PICKING_COLOR: 3,
  STROKE: 4,
  OPACITY: 5,
  OFFSETS: 6,
  ROTATION: 7,
  MAX: 8,
};
function ZF(t) {
  switch (t) {
    case "rotation":
      return {
        name: "Rotation",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Rotation",
          shaderLocation: $d.ROTATION,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 1,
          update: (e) => {
            const { rotation: n = 0 } = e;
            return Array.isArray(n) ? [n[0]] : [n];
          },
        },
      };
    case "stroke":
      return {
        name: "stroke",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Stroke",
          shaderLocation: $d.STROKE,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 4,
          update: (e) => {
            const { stroke: n = [1, 1, 1, 1] } = e;
            return n;
          },
        },
      };
    case "opacity":
      return {
        name: "opacity",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Opacity",
          shaderLocation: $d.OPACITY,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 1,
          update: (e) => {
            const { opacity: n = 1 } = e;
            return [n];
          },
        },
      };
    case "offsets":
      return {
        name: "offsets",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Offsets",
          shaderLocation: $d.OFFSETS,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 2,
          update: (e) => {
            const { offsets: n } = e;
            return n;
          },
        },
      };
    default:
      return;
  }
}
const { isNumber: YF } = Ka,
  Jh = { NONE: 0, ENCODE: 1, HIGHLIGHT: 2 };
class qF {
  constructor() {
    R(this, "pickingUniformMap", void 0);
  }
  pickOption2Array() {
    const e = [];
    return (
      this.pickingUniformMap.forEach((n) => {
        YF(n) ? e.push(n) : e.push(...n);
      }),
      e
    );
  }
  updatePickOption(e, n) {
    Object.keys(e).forEach((a) => {
      this.pickingUniformMap.set(a, e[a]);
    });
    const r = n.getLayerConfig().pickingBuffer || 0,
      o = Number(n.getShaderPickStat());
    this.pickingUniformMap.set("u_PickingBuffer", r),
      this.pickingUniformMap.set("u_shaderPick", o),
      n
        .getPickingUniformBuffer()
        .subData({ offset: 0, data: this.pickOption2Array() });
  }
  apply(e, { styleAttributeService: n }) {
    (this.pickingUniformMap = new Map([
      ["u_HighlightColor", [1, 0, 0, 1]],
      ["u_SelectColor", [1, 0, 0, 1]],
      ["u_PickingColor", [0, 0, 0]],
      ["u_PickingStage", 0],
      ["u_CurrentSelectedId", [0, 0, 0]],
      ["u_PickingThreshold", 10],
      ["u_PickingBuffer", 0],
      ["u_shaderPick", 0],
      ["u_activeMix", 0],
    ])),
      e.hooks.init.tapPromise("PixelPickingPlugin", () => {
        const { enablePicking: r } = e.getLayerConfig();
        n.registerStyleAttribute({
          name: "pickingColor",
          type: Ln.Attribute,
          descriptor: {
            name: "a_PickingColor",
            shaderLocation: $d.PICKING_COLOR,
            buffer: { data: [], type: H.FLOAT },
            size: 3,
            update: (o) => {
              const { id: l } = o;
              return r ? Sp(l) : [0, 0, 0];
            },
          },
        });
      }),
      e.hooks.beforePickingEncode.tap("PixelPickingPlugin", () => {
        const { enablePicking: r } = e.getLayerConfig();
        r &&
          e.isVisible() &&
          (this.updatePickOption({ u_PickingStage: Jh.ENCODE }, e),
          e.models.forEach((o) =>
            o.addUniforms({ u_PickingStage: Jh.ENCODE })
          ));
      }),
      e.hooks.afterPickingEncode.tap("PixelPickingPlugin", () => {
        const { enablePicking: r } = e.getLayerConfig();
        r &&
          e.isVisible() &&
          (this.updatePickOption({ u_PickingStage: Jh.HIGHLIGHT }, e),
          e.models.forEach((o) =>
            o.addUniforms({ u_PickingStage: Jh.HIGHLIGHT })
          ));
      }),
      e.hooks.beforeHighlight.tap("PixelPickingPlugin", (r) => {
        const { highlightColor: o, activeMix: l = 0 } = e.getLayerConfig(),
          a = typeof o == "string" ? Bi(o) : o || [1, 0, 0, 1];
        e.updateLayerConfig({ pickedFeatureID: K0(new Uint8Array(r)) });
        const h = {
          u_PickingStage: Jh.HIGHLIGHT,
          u_PickingColor: r,
          u_HighlightColor: a.map((f) => f * 255),
          u_activeMix: l,
        };
        this.updatePickOption(h, e), e.models.forEach((f) => f.addUniforms(h));
      }),
      e.hooks.beforeSelect.tap("PixelPickingPlugin", (r) => {
        const { selectColor: o, selectMix: l = 0 } = e.getLayerConfig(),
          a = typeof o == "string" ? Bi(o) : o || [1, 0, 0, 1];
        e.updateLayerConfig({ pickedFeatureID: K0(new Uint8Array(r)) });
        const h = {
          u_PickingStage: Jh.HIGHLIGHT,
          u_PickingColor: r,
          u_HighlightColor: a.map((f) => f * 255),
          u_activeMix: l,
          u_CurrentSelectedId: r,
          u_SelectColor: a.map((f) => f * 255),
        };
        this.updatePickOption(h, e), e.models.forEach((f) => f.addUniforms(h));
      });
  }
}
const $F = ["mvt", "geojsonvt", "testTile"];
function KF(t) {
  const e = t.getSource();
  return $F.includes(e.parser.type);
}
class QF {
  apply(e, { styleAttributeService: n }) {
    e.hooks.init.tapPromise("RegisterStyleAttributePlugin", () => {
      KF(e) || this.registerBuiltinAttributes(n, e);
    });
  }
  registerBuiltinAttributes(e, n) {
    if (n.type === "MaskLayer") {
      this.registerPositionAttribute(e);
      return;
    }
    this.registerPositionAttribute(e), this.registerColorAttribute(e);
  }
  registerPositionAttribute(e) {
    e.registerStyleAttribute({
      name: "position",
      type: Ln.Attribute,
      descriptor: {
        name: "a_Position",
        shaderLocation: $d.POSITION,
        buffer: { data: [], type: H.FLOAT },
        size: 3,
        update: (n, r, o) =>
          o.length === 2 ? [o[0], o[1], 0] : [o[0], o[1], o[2]],
      },
    });
  }
  registerColorAttribute(e) {
    e.registerStyleAttribute({
      name: "color",
      type: Ln.Attribute,
      descriptor: {
        name: "a_Color",
        shaderLocation: $d.COLOR,
        buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
        size: 4,
        update: (n) => {
          const { color: r } = n;
          return !r || !r.length ? [1, 1, 1, 1] : r;
        },
      },
    });
  }
}
class JF {
  constructor() {
    R(this, "cameraService", void 0),
      R(this, "coordinateSystemService", void 0),
      R(this, "rendererService", void 0),
      R(this, "mapService", void 0),
      R(this, "layerService", void 0);
  }
  apply(
    e,
    {
      rendererService: n,
      mapService: r,
      layerService: o,
      coordinateSystemService: l,
      cameraService: a,
    }
  ) {
    (this.rendererService = n),
      (this.mapService = r),
      (this.layerService = o),
      (this.coordinateSystemService = l),
      (this.cameraService = a);
    let h;
    this.rendererService.uniformBuffers[0] ||
      ((h = this.rendererService.createBuffer({
        data: new Float32Array(16 * 4 + 4 * 7),
        isUBO: !0,
        label: "renderUniformBuffer",
      })),
      (this.rendererService.uniformBuffers[0] = h)),
      e.hooks.beforeRender.tap("ShaderUniformPlugin", () => {
        const f = e.getLayerConfig().tileOrigin;
        this.coordinateSystemService.refresh(f);
        const { width: v, height: E } = this.rendererService.getViewportSize(),
          { data: x, uniforms: T } = this.generateUBO(v, E);
        this.layerService.alreadyInRendering &&
          this.rendererService.uniformBuffers[0] &&
          this.rendererService.uniformBuffers[0].subData({
            offset: 0,
            data: x,
          }),
          this.rendererService.queryVerdorInfo() === "WebGL1" &&
            e.models.forEach((I) => {
              I.addUniforms(
                mt(
                  mt({}, T),
                  {},
                  {
                    u_PickingBuffer: e.getLayerConfig().pickingBuffer || 0,
                    u_shaderPick: Number(e.getShaderPickStat()),
                  }
                )
              );
            });
      });
  }
  generateUBO(e, n) {
    const r = this.cameraService.getProjectionMatrix(),
      o = this.cameraService.getViewMatrix(),
      l = this.cameraService.getViewProjectionMatrix(),
      a = this.cameraService.getModelMatrix(),
      h = this.coordinateSystemService.getViewportCenterProjection(),
      f = this.coordinateSystemService.getPixelsPerDegree(),
      v = this.cameraService.getZoom(),
      E = this.coordinateSystemService.getPixelsPerDegree2(),
      x = this.cameraService.getZoomScale(),
      T = this.coordinateSystemService.getPixelsPerMeter(),
      N = this.coordinateSystemService.getCoordinateSystem(),
      I = this.cameraService.getCameraPosition(),
      L = window.devicePixelRatio,
      F = this.coordinateSystemService.getViewportCenter(),
      X = [e, n],
      G = this.cameraService.getFocalDistance();
    return {
      data: [
        ...o,
        ...r,
        ...l,
        ...a,
        ...h,
        ...f,
        v,
        ...E,
        x,
        ...T,
        N,
        ...I,
        L,
        ...F,
        ...X,
        G,
        0,
        0,
        0,
      ],
      uniforms: {
        [U0.ProjectionMatrix]: r,
        [U0.ViewMatrix]: o,
        [U0.ViewProjectionMatrix]: l,
        [U0.Zoom]: v,
        [U0.ZoomScale]: x,
        [U0.FocalDistance]: G,
        [U0.CameraPosition]: I,
        [$h.CoordinateSystem]: N,
        [$h.ViewportCenter]: F,
        [$h.ViewportCenterProjection]: h,
        [$h.PixelsPerDegree]: f,
        [$h.PixelsPerDegree2]: E,
        [$h.PixelsPerMeter]: T,
        u_ViewportSize: X,
        u_ModelMatrix: a,
        u_DevicePixelRatio: L,
      },
    };
  }
}
class ek {
  apply(e) {
    e.hooks.beforeRender.tap("UpdateModelPlugin", () => {
      e.layerModel &&
        e.layerModel.needUpdate().then((n) => {
          n && e.renderLayers();
        });
    }),
      e.hooks.afterRender.tap("UpdateModelPlugin", () => {
        e.layerModelNeedUpdate = !1;
      });
  }
}
class tk {
  apply(e, { styleAttributeService: n }) {
    e.hooks.init.tapPromise("UpdateStyleAttributePlugin", () => {
      this.initStyleAttribute(e, { styleAttributeService: n });
    }),
      e.hooks.beforeRender.tap("UpdateStyleAttributePlugin", () => {
        e.layerModelNeedUpdate ||
          (e.inited &&
            this.updateStyleAttribute(e, { styleAttributeService: n }));
      });
  }
  updateStyleAttribute(e, { styleAttributeService: n }) {
    const r = n.getLayerStyleAttributes() || [],
      o = n.getLayerStyleAttribute("filter");
    if (o && o.needRegenerateVertices) {
      (e.layerModelNeedUpdate = !0),
        r.forEach((l) => (l.needRegenerateVertices = !1));
      return;
    }
    r.filter((l) => l.needRegenerateVertices).forEach((l) => {
      n.updateAttributeByFeatureRange(
        l.name,
        e.getEncodedData(),
        l.featureRange.startIndex,
        l.featureRange.endIndex,
        e
      ),
        (l.needRegenerateVertices = !1);
    });
  }
  initStyleAttribute(e, { styleAttributeService: n }) {
    (n.getLayerStyleAttributes() || [])
      .filter((o) => o.needRegenerateVertices)
      .forEach((o) => {
        n.updateAttributeByFeatureRange(
          o.name,
          e.getEncodedData(),
          o.featureRange.startIndex,
          o.featureRange.endIndex
        ),
          (o.needRegenerateVertices = !1);
      });
  }
}
function nk() {
  return [
    new TD(),
    new QF(),
    new DF(),
    new AD(),
    new UF(),
    new FF(),
    new tk(),
    new ek(),
    new GF(),
    new JF(),
    new BF(),
    new XF(),
    new qF(),
    new kF(),
  ];
}
const m7 = {
  [Xd.additive]: {
    enable: !0,
    func: { srcRGB: H.ONE, dstRGB: H.ONE, srcAlpha: 1, dstAlpha: 1 },
  },
  [Xd.none]: { enable: !1 },
  [Xd.normal]: {
    enable: !0,
    func: {
      srcRGB: H.SRC_ALPHA,
      dstRGB: H.ONE_MINUS_SRC_ALPHA,
      srcAlpha: 1,
      dstAlpha: 1,
    },
  },
  [Xd.subtractive]: {
    enable: !0,
    func: {
      srcRGB: H.ONE,
      dstRGB: H.ONE,
      srcAlpha: H.ZERO,
      dstAlpha: H.ONE_MINUS_SRC_COLOR,
    },
    equation: { rgb: H.FUNC_SUBTRACT, alpha: H.FUNC_SUBTRACT },
  },
  [Xd.max]: {
    enable: !0,
    func: { srcRGB: H.ONE, dstRGB: H.ONE },
    equation: { rgb: H.MAX_EXT },
  },
  [Xd.min]: {
    enable: !0,
    func: { srcRGB: H.ONE, dstRGB: H.ONE },
    equation: { rgb: H.MIN_EXT },
  },
};
class rk {
  constructor(e) {
    R(this, "layer", void 0), (this.layer = e);
  }
  pickRender(e) {
    const r = this.layer.getContainer().layerService,
      o = this.layer;
    if (o.tileLayer) return o.tileLayer.pickRender(e);
    o.hooks.beforePickingEncode.call(),
      r.renderTileLayerMask(o),
      o.renderModels({ ispick: !0 }),
      o.hooks.afterPickingEncode.call();
  }
  pick(e, n) {
    var r = this;
    return bt(function* () {
      const l = r.layer.getContainer().pickingService;
      return e.type === "RasterLayer"
        ? r.pickRasterLayer(e, n)
        : (r.pickRender(n), l.pickFromPickingFBO(e, n));
    })();
  }
  pickRasterLayer(e, n, r) {
    const o = this.layer.getContainer(),
      l = o.pickingService,
      a = o.mapService,
      h = this.layer.getSource().extent,
      f = DC(n.lngLat, h),
      v = {
        x: n.x,
        y: n.y,
        type: n.type,
        lngLat: n.lngLat,
        target: n,
        rasterValue: null,
      },
      E = r || e;
    if (f) {
      const x = this.readRasterValue(e, h, a, n.x, n.y);
      return (v.rasterValue = x), l.triggerHoverOnLayer(E, v), !0;
    } else
      return (
        (v.type = n.type === "mousemove" ? "mouseout" : "un" + n.type),
        l.triggerHoverOnLayer(E, mt(mt({}, v), {}, { type: "unpick" })),
        l.triggerHoverOnLayer(E, v),
        !1
      );
  }
  readRasterValue(e, n, r, o, l) {
    const a = e.getSource().data.dataArray[0],
      [h = 0, f = 0, v = 10, E = -10] = n,
      x = r.lngLatToContainer([h, f]),
      T = r.lngLatToContainer([v, E]),
      N = T.x - x.x,
      I = x.y - T.y,
      L = [(o - x.x) / N, (l - T.y) / I],
      F = a.width || 1,
      X = a.height || 1,
      G = Math.floor(L[0] * F),
      K = Math.floor(L[1] * X),
      Q = Math.max(0, K - 1) * F + G;
    return a.data[Q];
  }
  selectFeature(e) {
    const n = this.layer,
      [r, o, l] = e;
    n.hooks.beforeSelect.call([r, o, l]);
  }
  highlightPickedFeature(e) {
    const [n, r, o] = e;
    this.layer.hooks.beforeHighlight.call([n, r, o]);
  }
  getFeatureById(e) {
    return this.layer.getSource().getFeatureById(e);
  }
}
class ik {
  constructor(e) {
    R(this, "layer", void 0),
      R(this, "rendererService", void 0),
      R(this, "colorTexture", void 0),
      R(this, "key", void 0),
      (this.layer = e);
    const n = this.layer.getContainer();
    this.rendererService = n.rendererService;
  }
  getColorTexture(e, n) {
    const r = this.getTextureKey(e, n);
    return this.key === r
      ? this.colorTexture
      : (this.createColorTexture(e, n), (this.key = r), this.colorTexture);
  }
  createColorTexture(e, n) {
    const { createTexture2D: r } = this.rendererService,
      o = this.getColorRampBar(e, n),
      l = r({
        data: new Uint8Array(o.data),
        width: o.width,
        height: o.height,
        flipY: !1,
        unorm: !0,
      });
    return (this.colorTexture = l), l;
  }
  setColorTexture(e, n, r) {
    (this.key = this.getTextureKey(n, r)), (this.colorTexture = e);
  }
  destroy() {
    var e;
    (e = this.colorTexture) === null || e === void 0 || e.destroy();
  }
  getColorRampBar(e, n) {
    switch (e.type) {
      case "cat":
        return kS(e);
      case "quantize":
        return US(e);
      case "custom":
        return zS(e, n);
      case "linear":
        return FS(e, n);
      default:
        return BS(e);
    }
  }
  getTextureKey(e, n) {
    var r;
    return `${e.colors.join("_")}_${
      e == null || (r = e.positions) === null || r === void 0
        ? void 0
        : r.join("_")
    }_${e.type}_${n == null ? void 0 : n.join("_")}`;
  }
}
const ak = ["passes"],
  ok = [
    "moduleName",
    "vertexShader",
    "fragmentShader",
    "defines",
    "inject",
    "triangulation",
    "styleOption",
    "pickingEnabled",
  ],
  {
    isEqual: I2,
    isFunction: qx,
    isNumber: $x,
    isObject: Qo,
    isPlainObject: sk,
    isUndefined: lk,
  } = Ka;
let Kx = 0;
class Vp extends _s.EventEmitter {
  get shaderModuleService() {
    return this.container.shaderModuleService;
  }
  get cameraService() {
    return this.container.cameraService;
  }
  get coordinateService() {
    return this.container.coordinateSystemService;
  }
  get iconService() {
    return this.container.iconService;
  }
  get fontService() {
    return this.container.fontService;
  }
  get pickingService() {
    return this.container.pickingService;
  }
  get rendererService() {
    return this.container.rendererService;
  }
  get layerService() {
    return this.container.layerService;
  }
  get debugService() {
    return this.container.debugService;
  }
  get interactionService() {
    return this.container.interactionService;
  }
  get mapService() {
    var e;
    return (e = this.container) === null || e === void 0
      ? void 0
      : e.mapService;
  }
  get normalPassFactory() {
    return this.container.normalPassFactory;
  }
  constructor(e = {}) {
    super(),
      R(this, "id", `${Kx++}`),
      R(this, "name", `${Kx}`),
      R(this, "parent", void 0),
      R(this, "coordCenter", void 0),
      R(this, "type", void 0),
      R(this, "visible", !0),
      R(this, "zIndex", 0),
      R(this, "minZoom", void 0),
      R(this, "maxZoom", void 0),
      R(this, "inited", !1),
      R(this, "layerModelNeedUpdate", !1),
      R(this, "pickedFeatureID", null),
      R(this, "selectedFeatureID", null),
      R(this, "styleNeedUpdate", !1),
      R(this, "rendering", void 0),
      R(this, "forceRender", !1),
      R(this, "clusterZoom", 0),
      R(this, "layerType", void 0),
      R(this, "triangulation", void 0),
      R(this, "layerPickService", void 0),
      R(this, "textureService", void 0),
      R(this, "defaultSourceConfig", {
        data: [],
        options: { parser: { type: "json" } },
      }),
      R(this, "dataState", {
        dataSourceNeedUpdate: !1,
        dataMappingNeedUpdate: !1,
        filterNeedUpdate: !1,
        featureScaleNeedUpdate: !1,
        StyleAttrNeedUpdate: !1,
      }),
      R(this, "hooks", {
        init: new aP(),
        afterInit: new I5(),
        beforeRender: new I5(),
        beforeRenderData: new oP(),
        afterRender: new mu(),
        beforePickingEncode: new mu(),
        afterPickingEncode: new mu(),
        beforeHighlight: new mu(["pickedColor"]),
        afterHighlight: new mu(),
        beforeSelect: new mu(["pickedColor"]),
        afterSelect: new mu(),
        beforeDestroy: new mu(),
        afterDestroy: new mu(),
      }),
      R(this, "models", []),
      R(this, "multiPassRenderer", void 0),
      R(this, "plugins", void 0),
      R(this, "startInit", !1),
      R(this, "sourceOption", void 0),
      R(this, "layerModel", void 0),
      R(this, "shapeOption", void 0),
      R(this, "tileLayer", void 0),
      R(this, "layerChildren", []),
      R(this, "masks", []),
      R(this, "configService", _8),
      R(this, "styleAttributeService", void 0),
      R(this, "layerSource", void 0),
      R(this, "postProcessingPassFactory", void 0),
      R(this, "animateOptions", { enable: !1 }),
      R(this, "container", void 0),
      R(this, "encodedData", void 0),
      R(this, "currentPickId", null),
      R(this, "rawConfig", void 0),
      R(this, "needUpdateConfig", void 0),
      R(this, "encodeStyleAttribute", {}),
      R(this, "enableShaderEncodeStyles", []),
      R(this, "enableDataEncodeStyles", []),
      R(this, "pendingStyleAttributes", []),
      R(this, "scaleOptions", {}),
      R(this, "animateStartTime", void 0),
      R(this, "animateStatus", !1),
      R(this, "isDestroyed", !1),
      R(this, "uniformBuffers", []),
      R(this, "encodeDataLength", 0),
      R(this, "sourceEvent", () => {
        this.dataState.dataSourceNeedUpdate = !0;
        const n = this.getLayerConfig();
        n && n.autoFit && this.fitBounds(n.fitBoundsOptions),
          this.layerSource.getSourceCfg().autoRender &&
            setTimeout(() => {
              this.reRender();
            }, 10);
      }),
      (this.name = e.name || this.id),
      (this.zIndex = e.zIndex || 0),
      (this.rawConfig = e),
      (this.masks = e.maskLayers || []);
  }
  addMask(e) {
    this.masks.push(e),
      this.updateLayerConfig({ maskLayers: this.masks }),
      this.enableMask();
  }
  removeMask(e) {
    const n = this.masks.indexOf(e);
    n > -1 && this.masks.splice(n, 1),
      this.updateLayerConfig({ maskLayers: this.masks });
  }
  disableMask() {
    this.updateLayerConfig({ enableMask: !1 });
  }
  enableMask() {
    this.updateLayerConfig({ enableMask: !0 });
  }
  addMaskLayer(e) {
    this.masks.push(e);
  }
  removeMaskLayer(e) {
    const n = this.masks.indexOf(e);
    n > -1 && this.masks.splice(n, 1), e.destroy();
  }
  getAttribute(e) {
    return this.styleAttributeService.getLayerStyleAttribute(e);
  }
  getLayerConfig() {
    return this.configService.getLayerConfig(this.id);
  }
  updateLayerConfig(e) {
    if (
      (Object.keys(e).map((n) => {
        n in this.rawConfig && (this.rawConfig[n] = e[n]);
      }),
      !this.startInit)
    )
      this.needUpdateConfig = mt(mt({}, this.needUpdateConfig), e);
    else {
      const n = this.container.id;
      this.configService.setLayerConfig(
        n,
        this.id,
        mt(
          mt(
            mt({}, this.configService.getLayerConfig(this.id)),
            this.needUpdateConfig
          ),
          e
        )
      ),
        (this.needUpdateConfig = {});
    }
  }
  setContainer(e) {
    this.container = e;
  }
  getContainer() {
    return this.container;
  }
  addPlugin(e) {
    return this.plugins.push(e), this;
  }
  init() {
    var e = this;
    return bt(function* () {
      const n = e.container.id;
      (e.startInit = !0),
        e.configService.setLayerConfig(n, e.id, e.rawConfig),
        (e.layerType = e.rawConfig.layerType);
      const { enableMultiPassRenderer: r, passes: o } = e.getLayerConfig();
      r &&
        o !== null &&
        o !== void 0 &&
        o.length &&
        o.length > 0 &&
        e.mapService.on("mapAfterFrameChange", () => {
          e.renderLayers();
        }),
        (e.postProcessingPassFactory = e.container.postProcessingPassFactory),
        (e.styleAttributeService = e.container.styleAttributeService),
        r &&
          ((e.multiPassRenderer = e.container.multiPassRenderer),
          e.multiPassRenderer.setLayer(e)),
        e.pendingStyleAttributes.forEach(
          ({
            attributeName: l,
            attributeField: a,
            attributeValues: h,
            updateOptions: f,
          }) => {
            e.styleAttributeService.updateStyleAttribute(
              l,
              {
                scale: mt(
                  { field: a },
                  e.splitValuesAndCallbackInAttribute(
                    h,
                    a ? void 0 : e.getLayerConfig()[l]
                  )
                ),
              },
              f
            );
          }
        ),
        (e.pendingStyleAttributes = []),
        (e.plugins = nk());
      for (const l of e.plugins) l.apply(e, e.container);
      (e.layerPickService = new rk(e)),
        (e.textureService = new ik(e)),
        e.log(Io.LayerInitStart),
        yield e.hooks.init.promise(),
        e.log(Io.LayerInitEnd),
        (e.inited = !0),
        e.emit("inited", { target: e, type: "inited" }),
        e.emit("add", { target: e, type: "add" }),
        e.hooks.afterInit.call();
    })();
  }
  log(e, n = "init") {
    var r;
    if (this.tileLayer || this.isTileLayer) return;
    const o = `${this.id}.${n}.${e}`,
      l = { id: this.id, type: this.type };
    (r = this.debugService) === null || r === void 0 || r.log(o, l);
  }
  updateModelData(e) {
    e.attributes && e.elements
      ? this.models.map((n) => {
          n.updateAttributesAndElements(e.attributes, e.elements);
        })
      : console.warn("data error");
  }
  setLayerPickService(e) {
    this.layerPickService = e;
  }
  prepareBuildModel() {
    Object.keys(this.needUpdateConfig || {}).length !== 0 &&
      this.updateLayerConfig({});
    const { animateOption: e } = this.getLayerConfig();
    e != null &&
      e.enable &&
      (this.layerService.startAnimate(), (this.animateStatus = !0));
  }
  color(e, n, r) {
    return this.updateStyleAttribute("color", e, n, r), this;
  }
  texture(e, n, r) {
    return this.updateStyleAttribute("texture", e, n, r), this;
  }
  rotate(e, n, r) {
    return this.updateStyleAttribute("rotate", e, n, r), this;
  }
  size(e, n, r) {
    return this.updateStyleAttribute("size", e, n, r), this;
  }
  filter(e, n, r) {
    const o = this.updateStyleAttribute("filter", e, n, r);
    return (this.dataState.dataSourceNeedUpdate = o && this.inited), this;
  }
  shape(e, n, r) {
    this.shapeOption = { field: e, values: n };
    const o = this.updateStyleAttribute("shape", e, n, r);
    return (this.dataState.dataSourceNeedUpdate = o && this.inited), this;
  }
  label(e, n, r) {
    return (
      this.pendingStyleAttributes.push({
        attributeName: "label",
        attributeField: e,
        attributeValues: n,
        updateOptions: r,
      }),
      this
    );
  }
  animate(e) {
    let n = {};
    return (
      Qo(e) ? ((n.enable = !0), (n = mt(mt({}, n), e))) : (n.enable = e),
      this.updateLayerConfig({ animateOption: n }),
      this
    );
  }
  source(e, n) {
    return (e == null ? void 0 : e.type) === "source"
      ? (this.setSource(e), this)
      : ((this.sourceOption = { data: e, options: n }),
        (this.clusterZoom = 0),
        this);
  }
  setData(e, n) {
    return (
      this.inited
        ? (this.dataUpdatelog(), this.layerSource.setData(e, n))
        : this.on("inited", () => {
            this.dataUpdatelog(), this.layerSource.setData(e, n);
          }),
      this
    );
  }
  dataUpdatelog() {
    this.log(Io.SourceInitStart, es.UPDATE),
      this.layerSource.once("update", () => {
        this.log(Io.SourceInitEnd, es.UPDATE);
      });
  }
  style(e) {
    const { passes: n } = e,
      r = pc(e, ak);
    n &&
      p7(n).forEach((l) => {
        const a = this.multiPassRenderer
          .getPostProcessor()
          .getPostProcessingPassByName(l[0]);
        a && a.updateOptions(l[1]);
      }),
      r.borderColor && (r.stroke = r.borderColor),
      r.borderWidth && (r.strokeWidth = r.borderWidth);
    const o = r;
    return (
      Object.keys(r).forEach((l) => {
        const a = r[l];
        Array.isArray(a) &&
          a.length === 2 &&
          !$x(a[0]) &&
          !$x(a[1]) &&
          (o[l] = { field: a[0], value: a[1] });
      }),
      this.encodeStyle(o),
      this.updateLayerConfig(o),
      this
    );
  }
  encodeStyle(e) {
    Object.keys(e).forEach((n) => {
      [
        ...this.enableShaderEncodeStyles,
        ...this.enableDataEncodeStyles,
      ].includes(n) &&
      sk(e[n]) &&
      (e[n].field || e[n].value) &&
      !I2(this.encodeStyleAttribute[n], e[n])
        ? ((this.encodeStyleAttribute[n] = e[n]),
          this.updateStyleAttribute(n, e[n].field, e[n].value),
          this.inited && (this.dataState.dataMappingNeedUpdate = !0))
        : this.encodeStyleAttribute[n] &&
          (delete this.encodeStyleAttribute[n],
          (this.dataState.dataSourceNeedUpdate = !0));
    });
  }
  scale(e, n) {
    const r = mt({}, this.scaleOptions);
    if (
      (Qo(e)
        ? (this.scaleOptions = mt(mt({}, this.scaleOptions), e))
        : (this.scaleOptions[e] = n),
      this.styleAttributeService && !I2(r, this.scaleOptions))
    ) {
      const o = Qo(e) ? e : { [e]: n };
      this.styleAttributeService.updateScaleAttribute(o);
    }
    return this;
  }
  renderLayers() {
    (this.rendering = !0), this.layerService.reRender(), (this.rendering = !1);
  }
  prerender() {}
  render(e = {}) {
    return this.tileLayer
      ? (this.tileLayer.render(), this)
      : (this.layerService.beforeRenderData(this),
        this.encodeDataLength <= 0 && !this.forceRender
          ? this
          : (this.renderModels(e), this));
  }
  renderMultiPass() {
    var e = this;
    return bt(function* () {
      (e.encodeDataLength <= 0 && !e.forceRender) ||
        (e.multiPassRenderer && e.multiPassRenderer.getRenderFlag()
          ? yield e.multiPassRenderer.render()
          : e.renderModels());
    })();
  }
  active(e) {
    const n = {};
    return (
      (n.enableHighlight = Qo(e) ? !0 : e),
      Qo(e)
        ? ((n.enableHighlight = !0),
          e.color && (n.highlightColor = e.color),
          e.mix && (n.activeMix = e.mix))
        : (n.enableHighlight = !!e),
      this.updateLayerConfig(n),
      this
    );
  }
  setActive(e, n) {
    if (Qo(e)) {
      const { x: r = 0, y: o = 0 } = e;
      this.updateLayerConfig({
        highlightColor: Qo(n) ? n.color : this.getLayerConfig().highlightColor,
        activeMix: Qo(n) ? n.mix : this.getLayerConfig().activeMix,
      }),
        this.pick({ x: r, y: o });
    } else
      this.updateLayerConfig({
        pickedFeatureID: e,
        highlightColor: Qo(n) ? n.color : this.getLayerConfig().highlightColor,
        activeMix: Qo(n) ? n.mix : this.getLayerConfig().activeMix,
      }),
        this.hooks.beforeHighlight.call(Sp(e)).then(() => {
          setTimeout(() => {
            this.reRender();
          }, 1);
        });
  }
  select(e) {
    const n = {};
    return (
      (n.enableSelect = Qo(e) ? !0 : e),
      Qo(e)
        ? ((n.enableSelect = !0),
          e.color && (n.selectColor = e.color),
          e.mix && (n.selectMix = e.mix))
        : (n.enableSelect = !!e),
      this.updateLayerConfig(n),
      this
    );
  }
  setSelect(e, n) {
    if (Qo(e)) {
      const { x: r = 0, y: o = 0 } = e;
      this.updateLayerConfig({
        selectColor: Qo(n) ? n.color : this.getLayerConfig().selectColor,
        selectMix: Qo(n) ? n.mix : this.getLayerConfig().selectMix,
      }),
        this.pick({ x: r, y: o });
    } else
      this.updateLayerConfig({
        pickedFeatureID: e,
        selectColor: Qo(n) ? n.color : this.getLayerConfig().selectColor,
        selectMix: Qo(n) ? n.mix : this.getLayerConfig().selectMix,
      }),
        this.hooks.beforeSelect.call(Sp(e)).then(() => {
          setTimeout(() => {
            this.reRender();
          }, 1);
        });
  }
  setBlend(e) {
    return this.updateLayerConfig({ blend: e }), this.reRender(), this;
  }
  show() {
    return (
      this.updateLayerConfig({ visible: !0 }),
      this.reRender(),
      this.emit("show"),
      this
    );
  }
  hide() {
    return (
      this.updateLayerConfig({ visible: !1 }),
      this.reRender(),
      this.emit("hide"),
      this
    );
  }
  setIndex(e) {
    return (
      (this.zIndex = e),
      this.layerService.updateLayerRenderList(),
      this.layerService.renderLayers(),
      this
    );
  }
  setCurrentPickId(e) {
    this.currentPickId = e;
  }
  getCurrentPickId() {
    return this.currentPickId;
  }
  setCurrentSelectedId(e) {
    this.selectedFeatureID = e;
  }
  getCurrentSelectedId() {
    return this.selectedFeatureID;
  }
  isVisible() {
    const e = this.mapService.getZoom(),
      {
        visible: n,
        minZoom: r = -1 / 0,
        maxZoom: o = 1 / 0,
      } = this.getLayerConfig();
    return !!n && e >= r && e < o;
  }
  setMultiPass(e, n) {
    if (
      (this.updateLayerConfig({ enableMultiPassRenderer: e }),
      n && this.updateLayerConfig({ passes: n }),
      e)
    ) {
      const { passes: r = [] } = this.getLayerConfig();
      (this.multiPassRenderer = f7(
        this,
        r,
        this.postProcessingPassFactory,
        this.normalPassFactory
      )),
        this.multiPassRenderer.setRenderFlag(!0);
      const { width: o, height: l } = this.rendererService.getViewportSize();
      this.multiPassRenderer.resize(o, l);
    }
    return this;
  }
  setMinZoom(e) {
    return this.updateLayerConfig({ minZoom: e }), this;
  }
  getMinZoom() {
    const { minZoom: e } = this.getLayerConfig();
    return e;
  }
  getMaxZoom() {
    const { maxZoom: e } = this.getLayerConfig();
    return e;
  }
  get(e) {
    return this.getLayerConfig()[e];
  }
  setMaxZoom(e) {
    return this.updateLayerConfig({ maxZoom: e }), this;
  }
  setAutoFit(e) {
    return this.updateLayerConfig({ autoFit: e }), this;
  }
  fitBounds(e) {
    if (!this.inited) return this.updateLayerConfig({ autoFit: !0 }), this;
    const r = this.getSource().extent;
    return r.some((l) => Math.abs(l) === 1 / 0)
      ? this
      : (this.mapService.fitBounds(
          [
            [r[0], r[1]],
            [r[2], r[3]],
          ],
          e
        ),
        this);
  }
  destroy(e = !0) {
    var n, r, o, l, a;
    if (this.isDestroyed) return;
    (n = this.layerModel) === null ||
      n === void 0 ||
      n.uniformBuffers.forEach((f) => {
        f.destroy();
      }),
      this.layerChildren.map((f) => f.destroy(!1)),
      (this.layerChildren = []);
    const { maskfence: h } = this.getLayerConfig();
    h && (this.masks.map((f) => f.destroy(!1)), (this.masks = [])),
      this.hooks.beforeDestroy.call(),
      this.layerSource.off("update", this.sourceEvent),
      (r = this.multiPassRenderer) === null || r === void 0 || r.destroy(),
      this.textureService.destroy(),
      this.styleAttributeService.clearAllAttributes(),
      this.hooks.afterDestroy.call(),
      (o = this.layerModel) === null || o === void 0 || o.clearModels(e),
      (l = this.tileLayer) === null || l === void 0 || l.destroy(),
      (this.models = []),
      (a = this.debugService) === null || a === void 0 || a.removeLog(this.id),
      this.emit("remove", { target: this, type: "remove" }),
      this.emit("destroy", { target: this, type: "destroy" }),
      this.removeAllListeners(),
      (this.isDestroyed = !0);
  }
  clear() {
    this.styleAttributeService.clearAllAttributes();
  }
  clearModels() {
    var e;
    this.models.forEach((n) => n.destroy()),
      (e = this.layerModel) === null || e === void 0 || e.clearModels(),
      (this.models = []);
  }
  isDirty() {
    return !!(
      this.styleAttributeService.getLayerStyleAttributes() || []
    ).filter(
      (e) => e.needRescale || e.needRemapping || e.needRegenerateVertices
    ).length;
  }
  setSource(e) {
    if (
      (this.layerSource && this.layerSource.off("update", this.sourceEvent),
      (this.layerSource = e),
      (this.clusterZoom = 0),
      this.inited && this.layerSource.cluster)
    ) {
      const n = this.mapService.getZoom();
      this.layerSource.updateClusterData(n);
    }
    this.layerSource.inited && this.sourceEvent(),
      this.layerSource.on("update", ({ type: n }) => {
        if (this.coordCenter === void 0) {
          const r = this.layerSource.center;
          this.coordCenter = r;
        }
        if (n === "update") {
          if (this.tileLayer) {
            this.tileLayer.reload();
            return;
          }
          this.sourceEvent();
        }
      });
  }
  getSource() {
    return this.layerSource;
  }
  getScaleOptions() {
    return this.scaleOptions;
  }
  setEncodedData(e) {
    (this.encodedData = e), (this.encodeDataLength = e.length);
  }
  getEncodedData() {
    return this.encodedData;
  }
  getScale(e) {
    return this.styleAttributeService.getLayerAttributeScale(e);
  }
  getLegend(e) {
    var n, r, o;
    const l = this.styleAttributeService.getLayerStyleAttribute(e);
    return {
      type:
        (r = ((l == null || (n = l.scale) === null || n === void 0
          ? void 0
          : n.scalers) || [])[0]) === null ||
        r === void 0 ||
        (r = r.option) === null ||
        r === void 0
          ? void 0
          : r.type,
      field:
        l == null || (o = l.scale) === null || o === void 0 ? void 0 : o.field,
      items: this.getLegendItems(e),
    };
  }
  getLegendItems(e) {
    const n = this.styleAttributeService.getLayerAttributeScale(e);
    return n
      ? n.invertExtent
        ? n.range().map((o) => ({ value: n.invertExtent(o), [e]: o }))
        : n.ticks
        ? n.ticks().map((o) => ({ value: o, [e]: n(o) }))
        : n != null && n.domain
        ? n
            .domain()
            .filter((o) => !lk(o))
            .map((o) => ({ value: o, [e]: n(o) }))
        : []
      : [];
  }
  pick({ x: e, y: n }) {
    this.interactionService.triggerHover({ x: e, y: n });
  }
  boxSelect(e, n) {
    this.pickingService.boxPickLayer(this, e, n);
  }
  buildLayerModel(e) {
    var n = this;
    return bt(function* () {
      const {
          moduleName: r,
          vertexShader: o,
          fragmentShader: l,
          defines: a,
          inject: h,
          triangulation: f,
          styleOption: v,
          pickingEnabled: E = !0,
        } = e,
        x = pc(e, ok);
      n.shaderModuleService.registerModule(r, {
        vs: o,
        fs: l,
        defines: a,
        inject: h,
      });
      const { vs: T, fs: N, uniforms: I } = n.shaderModuleService.getModule(r),
        { createModel: L } = n.rendererService;
      return new Promise((F) => {
        const {
            attributes: X,
            elements: G,
            count: K,
          } = n.styleAttributeService.createAttributesAndIndices(
            n.encodedData,
            f,
            v,
            n
          ),
          Q = [
            ...n.layerModel.uniformBuffers,
            ...n.rendererService.uniformBuffers,
          ];
        E && Q.push(n.getPickingUniformBuffer());
        const ee = mt(
          {
            attributes: X,
            uniforms: I,
            fs: N,
            vs: T,
            elements: G,
            blend: m7[Xd.normal],
            uniformBuffers: Q,
            textures: n.layerModel.textures,
          },
          x
        );
        K && (ee.count = K);
        const Se = L(ee);
        F(Se);
      });
    })();
  }
  createAttributes(e) {
    const { triangulation: n } = e,
      { attributes: r } = this.styleAttributeService.createAttributes(
        this.encodedData,
        n
      );
    return r;
  }
  getTime() {
    return this.layerService.clock.getDelta();
  }
  setAnimateStartTime() {
    this.animateStartTime = this.layerService.clock.getElapsedTime();
  }
  stopAnimate() {
    this.animateStatus &&
      (this.layerService.stopAnimate(),
      (this.animateStatus = !1),
      this.updateLayerConfig({ animateOption: { enable: !1 } }));
  }
  getLayerAnimateTime() {
    return this.layerService.clock.getElapsedTime() - this.animateStartTime;
  }
  needPick(e) {
    const { enableHighlight: n = !0, enableSelect: r = !0 } =
      this.getLayerConfig();
    let o =
      this.eventNames().indexOf(e) !== -1 ||
      this.eventNames().indexOf("un" + e) !== -1;
    return (
      (e === "click" || e === "dblclick") && r && (o = !0),
      e === "mousemove" &&
        (n ||
          this.eventNames().indexOf("mouseenter") !== -1 ||
          this.eventNames().indexOf("unmousemove") !== -1 ||
          this.eventNames().indexOf("mouseout") !== -1) &&
        (o = !0),
      this.isVisible() && o
    );
  }
  buildModels() {
    return bt(function* () {
      throw new Error("Method not implemented.");
    })();
  }
  rebuildModels() {
    var e = this;
    return bt(function* () {
      yield e.buildModels();
    })();
  }
  renderMulPass(e) {
    return bt(function* () {
      yield e.render();
    })();
  }
  renderModels(e = {}) {
    return this.encodeDataLength <= 0 && !this.forceRender
      ? (this.clearModels(), this)
      : (this.hooks.beforeRender.call(),
        this.models.forEach((n) => {
          n.draw(
            {
              uniforms: this.layerModel.getUninforms(),
              blend: this.layerModel.getBlend(),
              stencil: this.layerModel.getStencil(e),
              textures: this.layerModel.textures,
            },
            (e == null ? void 0 : e.ispick) || !1
          );
        }),
        this.hooks.afterRender.call(),
        this);
  }
  updateStyleAttribute(e, n, r, o) {
    const l = this.configService.getAttributeConfig(this.id) || {};
    return I2(l[e], { field: n, values: r })
      ? !1
      : ([
          "color",
          "size",
          "texture",
          "rotate",
          "filter",
          "label",
          "shape",
        ].indexOf(e) !== -1 &&
          this.configService.setAttributeConfig(this.id, {
            [e]: { field: n, values: r },
          }),
        this.startInit
          ? this.styleAttributeService.updateStyleAttribute(
              e,
              {
                scale: mt(
                  { field: n },
                  this.splitValuesAndCallbackInAttribute(
                    r,
                    this.getLayerConfig()[n]
                  )
                ),
              },
              o
            )
          : this.pendingStyleAttributes.push({
              attributeName: e,
              attributeField: n,
              attributeValues: r,
              updateOptions: o,
            }),
        !0);
  }
  getLayerAttributeConfig() {
    return this.configService.getAttributeConfig(this.id);
  }
  getShaderPickStat() {
    return this.layerService.getShaderPickStat();
  }
  setEarthTime(e) {
    console.warn("empty fn");
  }
  processData(e) {
    return e;
  }
  getModelType() {
    throw new Error("Method not implemented.");
  }
  getDefaultConfig() {
    return {};
  }
  initLayerModels() {
    var e = this;
    return bt(function* () {
      e.models.forEach((r) => r.destroy()),
        (e.models = []),
        e.uniformBuffers.forEach((r) => {
          r.destroy();
        }),
        (e.uniformBuffers = []);
      const n = e.rendererService.createBuffer({
        data: new Float32Array(20).fill(0),
        isUBO: !0,
        label: "pickingUniforms",
      });
      e.uniformBuffers.push(n), (e.models = yield e.layerModel.initModels());
    })();
  }
  getPickingUniformBuffer() {
    return this.uniformBuffers[0];
  }
  reRender() {
    this.inited && this.layerService.reRender();
  }
  splitValuesAndCallbackInAttribute(e) {
    return { values: qx(e) ? void 0 : e, callback: qx(e) ? e : void 0 };
  }
}
function ck(t, e) {
  return {
    enable: t,
    mask: 255,
    func: { cmp: H.EQUAL, ref: e ? 1 : 0, mask: 1 },
  };
}
function Qx(t) {
  return t.maskOperation === pv.OR
    ? {
        enable: !0,
        mask: 255,
        func: { cmp: H.ALWAYS, ref: 1, mask: 255 },
        opFront: { fail: H.KEEP, zfail: H.REPLACE, zpass: H.REPLACE },
      }
    : {
        enable: !0,
        mask: 255,
        func: {
          cmp:
            t.stencilType === q0.SINGLE || t.stencilIndex === 0
              ? H.ALWAYS
              : H.LESS,
          ref: t.stencilType === q0.SINGLE ? 1 : t.stencilIndex === 0 ? 2 : 1,
          mask: 255,
        },
        opFront: { fail: H.KEEP, zfail: H.REPLACE, zpass: H.REPLACE },
      };
}
const uk = {
    opacity: 1,
    stroke: [1, 0, 0, 1],
    offsets: [0, 0],
    rotation: 0,
    extrusionBase: 0,
    strokeOpacity: 1,
    thetaOffset: 0.314,
  },
  Dm = {
    opacity: "float",
    stroke: "vec4",
    offsets: "vec2",
    textOffset: "vec2",
    rotation: "float",
    extrusionBase: "float",
    strokeOpacity: "float",
    thetaOffset: "float",
  };
var D3 = { exports: {} };
D3.exports = xv;
D3.exports.default = xv;
function xv(t, e, n) {
  n = n || 2;
  var r = e && e.length,
    o = r ? e[0] * n : t.length,
    l = g7(t, 0, o, n, !0),
    a = [];
  if (!l || l.next === l.prev) return a;
  var h, f, v, E, x, T, N;
  if ((r && (l = mk(t, e, l, n)), t.length > 80 * n)) {
    (h = v = t[0]), (f = E = t[1]);
    for (var I = n; I < o; I += n)
      (x = t[I]),
        (T = t[I + 1]),
        x < h && (h = x),
        T < f && (f = T),
        x > v && (v = x),
        T > E && (E = T);
    (N = Math.max(v - h, E - f)), (N = N !== 0 ? 32767 / N : 0);
  }
  return E1(l, a, n, h, f, N, 0), a;
}
function g7(t, e, n, r, o) {
  var l, a;
  if (o === w_(t, e, n, r) > 0)
    for (l = e; l < n; l += r) a = Jx(l, t[l], t[l + 1], a);
  else for (l = n - r; l >= e; l -= r) a = Jx(l, t[l], t[l + 1], a);
  return a && bv(a, a.next) && (T1(a), (a = a.next)), a;
}
function rh(t, e) {
  if (!t) return t;
  e || (e = t);
  var n = t,
    r;
  do
    if (
      ((r = !1), !n.steiner && (bv(n, n.next) || Ha(n.prev, n, n.next) === 0))
    ) {
      if ((T1(n), (n = e = n.prev), n === n.next)) break;
      r = !0;
    } else n = n.next;
  while (r || n !== e);
  return e;
}
function E1(t, e, n, r, o, l, a) {
  if (t) {
    !a && l && xk(t, r, o, l);
    for (var h = t, f, v; t.prev !== t.next; ) {
      if (((f = t.prev), (v = t.next), l ? hk(t, r, o, l) : dk(t))) {
        e.push((f.i / n) | 0),
          e.push((t.i / n) | 0),
          e.push((v.i / n) | 0),
          T1(t),
          (t = v.next),
          (h = v.next);
        continue;
      }
      if (((t = v), t === h)) {
        a
          ? a === 1
            ? ((t = pk(rh(t), e, n)), E1(t, e, n, r, o, l, 2))
            : a === 2 && fk(t, e, n, r, o, l)
          : E1(rh(t), e, n, r, o, l, 1);
        break;
      }
    }
  }
}
function dk(t) {
  var e = t.prev,
    n = t,
    r = t.next;
  if (Ha(e, n, r) >= 0) return !1;
  for (
    var o = e.x,
      l = n.x,
      a = r.x,
      h = e.y,
      f = n.y,
      v = r.y,
      E = o < l ? (o < a ? o : a) : l < a ? l : a,
      x = h < f ? (h < v ? h : v) : f < v ? f : v,
      T = o > l ? (o > a ? o : a) : l > a ? l : a,
      N = h > f ? (h > v ? h : v) : f > v ? f : v,
      I = r.next;
    I !== e;

  ) {
    if (
      I.x >= E &&
      I.x <= T &&
      I.y >= x &&
      I.y <= N &&
      cp(o, h, l, f, a, v, I.x, I.y) &&
      Ha(I.prev, I, I.next) >= 0
    )
      return !1;
    I = I.next;
  }
  return !0;
}
function hk(t, e, n, r) {
  var o = t.prev,
    l = t,
    a = t.next;
  if (Ha(o, l, a) >= 0) return !1;
  for (
    var h = o.x,
      f = l.x,
      v = a.x,
      E = o.y,
      x = l.y,
      T = a.y,
      N = h < f ? (h < v ? h : v) : f < v ? f : v,
      I = E < x ? (E < T ? E : T) : x < T ? x : T,
      L = h > f ? (h > v ? h : v) : f > v ? f : v,
      F = E > x ? (E > T ? E : T) : x > T ? x : T,
      X = T_(N, I, e, n, r),
      G = T_(L, F, e, n, r),
      K = t.prevZ,
      Q = t.nextZ;
    K && K.z >= X && Q && Q.z <= G;

  ) {
    if (
      (K.x >= N &&
        K.x <= L &&
        K.y >= I &&
        K.y <= F &&
        K !== o &&
        K !== a &&
        cp(h, E, f, x, v, T, K.x, K.y) &&
        Ha(K.prev, K, K.next) >= 0) ||
      ((K = K.prevZ),
      Q.x >= N &&
        Q.x <= L &&
        Q.y >= I &&
        Q.y <= F &&
        Q !== o &&
        Q !== a &&
        cp(h, E, f, x, v, T, Q.x, Q.y) &&
        Ha(Q.prev, Q, Q.next) >= 0)
    )
      return !1;
    Q = Q.nextZ;
  }
  for (; K && K.z >= X; ) {
    if (
      K.x >= N &&
      K.x <= L &&
      K.y >= I &&
      K.y <= F &&
      K !== o &&
      K !== a &&
      cp(h, E, f, x, v, T, K.x, K.y) &&
      Ha(K.prev, K, K.next) >= 0
    )
      return !1;
    K = K.prevZ;
  }
  for (; Q && Q.z <= G; ) {
    if (
      Q.x >= N &&
      Q.x <= L &&
      Q.y >= I &&
      Q.y <= F &&
      Q !== o &&
      Q !== a &&
      cp(h, E, f, x, v, T, Q.x, Q.y) &&
      Ha(Q.prev, Q, Q.next) >= 0
    )
      return !1;
    Q = Q.nextZ;
  }
  return !0;
}
function pk(t, e, n) {
  var r = t;
  do {
    var o = r.prev,
      l = r.next.next;
    !bv(o, l) &&
      v7(o, r, r.next, l) &&
      A1(o, l) &&
      A1(l, o) &&
      (e.push((o.i / n) | 0),
      e.push((r.i / n) | 0),
      e.push((l.i / n) | 0),
      T1(r),
      T1(r.next),
      (r = t = l)),
      (r = r.next);
  } while (r !== t);
  return rh(r);
}
function fk(t, e, n, r, o, l) {
  var a = t;
  do {
    for (var h = a.next.next; h !== a.prev; ) {
      if (a.i !== h.i && Ak(a, h)) {
        var f = _7(a, h);
        (a = rh(a, a.next)),
          (f = rh(f, f.next)),
          E1(a, e, n, r, o, l, 0),
          E1(f, e, n, r, o, l, 0);
        return;
      }
      h = h.next;
    }
    a = a.next;
  } while (a !== t);
}
function mk(t, e, n, r) {
  var o = [],
    l,
    a,
    h,
    f,
    v;
  for (l = 0, a = e.length; l < a; l++)
    (h = e[l] * r),
      (f = l < a - 1 ? e[l + 1] * r : t.length),
      (v = g7(t, h, f, r, !1)),
      v === v.next && (v.steiner = !0),
      o.push(Ek(v));
  for (o.sort(gk), l = 0; l < o.length; l++) n = vk(o[l], n);
  return n;
}
function gk(t, e) {
  return t.x - e.x;
}
function vk(t, e) {
  var n = _k(t, e);
  if (!n) return e;
  var r = _7(n, t);
  return rh(r, r.next), rh(n, n.next);
}
function _k(t, e) {
  var n = e,
    r = t.x,
    o = t.y,
    l = -1 / 0,
    a;
  do {
    if (o <= n.y && o >= n.next.y && n.next.y !== n.y) {
      var h = n.x + ((o - n.y) * (n.next.x - n.x)) / (n.next.y - n.y);
      if (
        h <= r &&
        h > l &&
        ((l = h), (a = n.x < n.next.x ? n : n.next), h === r)
      )
        return a;
    }
    n = n.next;
  } while (n !== e);
  if (!a) return null;
  var f = a,
    v = a.x,
    E = a.y,
    x = 1 / 0,
    T;
  n = a;
  do
    r >= n.x &&
      n.x >= v &&
      r !== n.x &&
      cp(o < E ? r : l, o, v, E, o < E ? l : r, o, n.x, n.y) &&
      ((T = Math.abs(o - n.y) / (r - n.x)),
      A1(n, t) &&
        (T < x || (T === x && (n.x > a.x || (n.x === a.x && yk(a, n))))) &&
        ((a = n), (x = T))),
      (n = n.next);
  while (n !== f);
  return a;
}
function yk(t, e) {
  return Ha(t.prev, t, e.prev) < 0 && Ha(e.next, t, t.next) < 0;
}
function xk(t, e, n, r) {
  var o = t;
  do
    o.z === 0 && (o.z = T_(o.x, o.y, e, n, r)),
      (o.prevZ = o.prev),
      (o.nextZ = o.next),
      (o = o.next);
  while (o !== t);
  (o.prevZ.nextZ = null), (o.prevZ = null), bk(o);
}
function bk(t) {
  var e,
    n,
    r,
    o,
    l,
    a,
    h,
    f,
    v = 1;
  do {
    for (n = t, t = null, l = null, a = 0; n; ) {
      for (a++, r = n, h = 0, e = 0; e < v && (h++, (r = r.nextZ), !!r); e++);
      for (f = v; h > 0 || (f > 0 && r); )
        h !== 0 && (f === 0 || !r || n.z <= r.z)
          ? ((o = n), (n = n.nextZ), h--)
          : ((o = r), (r = r.nextZ), f--),
          l ? (l.nextZ = o) : (t = o),
          (o.prevZ = l),
          (l = o);
      n = r;
    }
    (l.nextZ = null), (v *= 2);
  } while (a > 1);
  return t;
}
function T_(t, e, n, r, o) {
  return (
    (t = ((t - n) * o) | 0),
    (e = ((e - r) * o) | 0),
    (t = (t | (t << 8)) & 16711935),
    (t = (t | (t << 4)) & 252645135),
    (t = (t | (t << 2)) & 858993459),
    (t = (t | (t << 1)) & 1431655765),
    (e = (e | (e << 8)) & 16711935),
    (e = (e | (e << 4)) & 252645135),
    (e = (e | (e << 2)) & 858993459),
    (e = (e | (e << 1)) & 1431655765),
    t | (e << 1)
  );
}
function Ek(t) {
  var e = t,
    n = t;
  do (e.x < n.x || (e.x === n.x && e.y < n.y)) && (n = e), (e = e.next);
  while (e !== t);
  return n;
}
function cp(t, e, n, r, o, l, a, h) {
  return (
    (o - a) * (e - h) >= (t - a) * (l - h) &&
    (t - a) * (r - h) >= (n - a) * (e - h) &&
    (n - a) * (l - h) >= (o - a) * (r - h)
  );
}
function Ak(t, e) {
  return (
    t.next.i !== e.i &&
    t.prev.i !== e.i &&
    !Tk(t, e) &&
    ((A1(t, e) &&
      A1(e, t) &&
      Sk(t, e) &&
      (Ha(t.prev, t, e.prev) || Ha(t, e.prev, e))) ||
      (bv(t, e) && Ha(t.prev, t, t.next) > 0 && Ha(e.prev, e, e.next) > 0))
  );
}
function Ha(t, e, n) {
  return (e.y - t.y) * (n.x - e.x) - (e.x - t.x) * (n.y - e.y);
}
function bv(t, e) {
  return t.x === e.x && t.y === e.y;
}
function v7(t, e, n, r) {
  var o = Fm(Ha(t, e, n)),
    l = Fm(Ha(t, e, r)),
    a = Fm(Ha(n, r, t)),
    h = Fm(Ha(n, r, e));
  return !!(
    (o !== l && a !== h) ||
    (o === 0 && Bm(t, n, e)) ||
    (l === 0 && Bm(t, r, e)) ||
    (a === 0 && Bm(n, t, r)) ||
    (h === 0 && Bm(n, e, r))
  );
}
function Bm(t, e, n) {
  return (
    e.x <= Math.max(t.x, n.x) &&
    e.x >= Math.min(t.x, n.x) &&
    e.y <= Math.max(t.y, n.y) &&
    e.y >= Math.min(t.y, n.y)
  );
}
function Fm(t) {
  return t > 0 ? 1 : t < 0 ? -1 : 0;
}
function Tk(t, e) {
  var n = t;
  do {
    if (
      n.i !== t.i &&
      n.next.i !== t.i &&
      n.i !== e.i &&
      n.next.i !== e.i &&
      v7(n, n.next, t, e)
    )
      return !0;
    n = n.next;
  } while (n !== t);
  return !1;
}
function A1(t, e) {
  return Ha(t.prev, t, t.next) < 0
    ? Ha(t, e, t.next) >= 0 && Ha(t, t.prev, e) >= 0
    : Ha(t, e, t.prev) < 0 || Ha(t, t.next, e) < 0;
}
function Sk(t, e) {
  var n = t,
    r = !1,
    o = (t.x + e.x) / 2,
    l = (t.y + e.y) / 2;
  do
    n.y > l != n.next.y > l &&
      n.next.y !== n.y &&
      o < ((n.next.x - n.x) * (l - n.y)) / (n.next.y - n.y) + n.x &&
      (r = !r),
      (n = n.next);
  while (n !== t);
  return r;
}
function _7(t, e) {
  var n = new S_(t.i, t.x, t.y),
    r = new S_(e.i, e.x, e.y),
    o = t.next,
    l = e.prev;
  return (
    (t.next = e),
    (e.prev = t),
    (n.next = o),
    (o.prev = n),
    (r.next = n),
    (n.prev = r),
    (l.next = r),
    (r.prev = l),
    r
  );
}
function Jx(t, e, n, r) {
  var o = new S_(t, e, n);
  return (
    r
      ? ((o.next = r.next), (o.prev = r), (r.next.prev = o), (r.next = o))
      : ((o.prev = o), (o.next = o)),
    o
  );
}
function T1(t) {
  (t.next.prev = t.prev),
    (t.prev.next = t.next),
    t.prevZ && (t.prevZ.nextZ = t.nextZ),
    t.nextZ && (t.nextZ.prevZ = t.prevZ);
}
function S_(t, e, n) {
  (this.i = t),
    (this.x = e),
    (this.y = n),
    (this.prev = null),
    (this.next = null),
    (this.z = 0),
    (this.prevZ = null),
    (this.nextZ = null),
    (this.steiner = !1);
}
xv.deviation = function (t, e, n, r) {
  var o = e && e.length,
    l = o ? e[0] * n : t.length,
    a = Math.abs(w_(t, 0, l, n));
  if (o)
    for (var h = 0, f = e.length; h < f; h++) {
      var v = e[h] * n,
        E = h < f - 1 ? e[h + 1] * n : t.length;
      a -= Math.abs(w_(t, v, E, n));
    }
  var x = 0;
  for (h = 0; h < r.length; h += 3) {
    var T = r[h] * n,
      N = r[h + 1] * n,
      I = r[h + 2] * n;
    x += Math.abs(
      (t[T] - t[I]) * (t[N + 1] - t[T + 1]) -
        (t[T] - t[N]) * (t[I + 1] - t[T + 1])
    );
  }
  return a === 0 && x === 0 ? 0 : Math.abs((x - a) / a);
};
function w_(t, e, n, r) {
  for (var o = 0, l = e, a = n - r; l < n; l += r)
    (o += (t[a] - t[l]) * (t[l + 1] + t[a + 1])), (a = l);
  return o;
}
xv.flatten = function (t) {
  for (
    var e = t[0][0].length,
      n = { vertices: [], holes: [], dimensions: e },
      r = 0,
      o = 0;
    o < t.length;
    o++
  ) {
    for (var l = 0; l < t[o].length; l++)
      for (var a = 0; a < e; a++) n.vertices.push(t[o][l][a]);
    o > 0 && ((r += t[o - 1].length), n.holes.push(r));
  }
  return n;
};
var wk = D3.exports;
const S1 = ea(wk);
function e6(t) {
  return Math.max(Math.ceil(t / 4) * 4, 4);
}
function y7(t, e, n, r = !0) {
  const o = n === 3;
  if (r) {
    t = t.slice();
    const a = [];
    for (let h = 0; h < t.length; h += n) {
      (a[0] = t[h]), (a[1] = t[h + 1]), o && (a[2] = t[h + 2]);
      const f = og(a, !0, { enable: !1, decimal: 1 });
      (t[h] = f[0]), (t[h + 1] = f[1]), o && (t[h + 2] = f[2]);
    }
  }
  return S1(t, e, n);
}
const x7 = "ATTRIBUTE_LOCATION_";
class qi {
  get attributeLocation() {
    return mt({}, $d);
  }
  constructor(e) {
    R(this, "triangulation", void 0),
      R(this, "uniformBuffers", []),
      R(this, "textures", []),
      R(this, "createTexture2D", void 0),
      R(this, "preStyleAttribute", {}),
      R(this, "encodeStyleAttribute", {}),
      R(this, "layer", void 0),
      R(this, "dataTexture", void 0),
      R(this, "DATA_TEXTURE_WIDTH", void 0),
      R(this, "dataTextureTest", void 0),
      R(this, "configService", void 0),
      R(this, "shaderModuleService", void 0),
      R(this, "rendererService", void 0),
      R(this, "iconService", void 0),
      R(this, "fontService", void 0),
      R(this, "styleAttributeService", void 0),
      R(this, "mapService", void 0),
      R(this, "cameraService", void 0),
      R(this, "layerService", void 0),
      R(this, "pickingService", void 0),
      R(this, "attributeUnifoms", void 0),
      R(this, "commonUnifoms", void 0),
      (this.layer = e),
      (this.configService = e.getContainer().globalConfigService),
      (this.rendererService = e.getContainer().rendererService),
      (this.pickingService = e.getContainer().pickingService),
      (this.shaderModuleService = e.getContainer().shaderModuleService),
      (this.styleAttributeService = e.getContainer().styleAttributeService),
      (this.mapService = e.getContainer().mapService),
      (this.iconService = e.getContainer().iconService),
      (this.fontService = e.getContainer().fontService),
      (this.cameraService = e.getContainer().cameraService),
      (this.layerService = e.getContainer().layerService),
      this.registerStyleAttribute(),
      this.registerBuiltinAttributes(),
      this.startModelAnimate();
    const { createTexture2D: n } = this.rendererService;
    this.createTexture2D = n;
  }
  getBlend() {
    const { blend: e = "normal" } = this.layer.getLayerConfig();
    return m7[Xd[e]];
  }
  getStencil(e) {
    const {
      mask: n = !1,
      maskInside: r = !0,
      enableMask: o,
      maskOperation: l = pv.AND,
    } = this.layer.getLayerConfig();
    if (this.layer.type === "MaskLayer")
      return Qx({ isStencil: !0, stencilType: q0.SINGLE });
    if (e.isStencil) return Qx(mt(mt({}, e), {}, { maskOperation: l }));
    const a =
      n ||
      (o && this.layer.masks.length !== 0) ||
      this.layer.tileMask !== void 0;
    return ck(a, r);
  }
  getDefaultStyle() {
    return {};
  }
  getUninforms() {
    const e = this.getCommonUniformsInfo(),
      n = this.getUniformsBufferInfo(this.getStyleAttribute());
    this.updateStyleUnifoms();
    const r = mt(mt({}, n.uniformsOption), e.uniformsOption);
    return (
      Object.keys(r).forEach((o) => {
        typeof r[o] == "boolean" && (r[o] = r[o] ? 1 : 0);
      }),
      !this.rendererService.hasOwnProperty("device") &&
        this.textures &&
        this.textures.length === 1 &&
        (r.u_texture = this.textures[0]),
      r
    );
  }
  getAnimateUniforms() {
    return {};
  }
  needUpdate() {
    return bt(function* () {
      return !1;
    })();
  }
  buildModels() {
    return bt(function* () {
      throw new Error("Method not implemented.");
    })();
  }
  initModels() {
    return bt(function* () {
      throw new Error("Method not implemented.");
    })();
  }
  clearModels(e = !0) {}
  getAttribute() {
    throw new Error("Method not implemented.");
  }
  prerender() {}
  render(e) {
    throw new Error("Method not implemented.");
  }
  registerBuiltinAttributes() {
    throw new Error("Method not implemented.");
  }
  animateOption2Array(e) {
    return [
      e.enable ? 0 : 1,
      e.duration || 4,
      e.interval || 0.2,
      e.trailLength || 0.1,
    ];
  }
  startModelAnimate() {
    const { animateOption: e } = this.layer.getLayerConfig();
    e.enable && this.layer.setAnimateStartTime();
  }
  getInject() {
    return Ck(
      this.layer.enableShaderEncodeStyles,
      this.layer.encodeStyleAttribute
    );
  }
  getDefines() {
    const e = Object.keys(this.attributeLocation).reduce((n, r) => {
      const o = x7 + r;
      return (n[o] = this.attributeLocation[r]), n;
    }, {});
    return mt({}, e);
  }
  getStyleAttribute() {
    const e = {};
    return (
      this.layer.enableShaderEncodeStyles.forEach((n) => {
        if (!this.layer.encodeStyleAttribute[n]) {
          const r = this.layer.getLayerConfig()[n];
          let o = typeof r > "u" ? uk[n] : r;
          n === "stroke" && (o = Bi(o)), (e["u_" + n] = o);
        }
      }),
      e
    );
  }
  registerStyleAttribute() {
    Object.keys(this.layer.encodeStyleAttribute).forEach((e) => {
      const n = ZF(e);
      n && this.styleAttributeService.registerStyleAttribute(n);
    });
  }
  registerPosition64LowAttribute(e = !0) {
    this.styleAttributeService.registerStyleAttribute({
      name: "position64Low",
      type: Ln.Attribute,
      descriptor: {
        name: "a_Position64Low",
        shaderLocation: this.attributeLocation.POSITION_64LOW,
        buffer: { data: [], type: H.FLOAT },
        size: 2,
        update: (n, r, o) => (e ? [_o(o[0]), _o(o[1])] : [0, 0]),
      },
    });
  }
  updateEncodeAttribute(e, n) {
    this.encodeStyleAttribute[e] = n;
  }
  initUniformsBuffer() {
    const e = this.getUniformsBufferInfo(this.getStyleAttribute()),
      n = this.getCommonUniformsInfo();
    e.uniformsLength !== 0 &&
      ((this.attributeUnifoms = this.rendererService.createBuffer({
        data: new Float32Array(e6(e.uniformsLength)).fill(0),
        isUBO: !0,
        label: "layerModelAttributeUnifoms",
      })),
      this.uniformBuffers.push(this.attributeUnifoms)),
      n.uniformsLength !== 0 &&
        ((this.commonUnifoms = this.rendererService.createBuffer({
          data: new Float32Array(e6(n.uniformsLength)).fill(0),
          isUBO: !0,
          label: "layerModelCommonUnifoms",
        })),
        this.uniformBuffers.push(this.commonUnifoms));
  }
  getUniformsBufferInfo(e) {
    let n = 0;
    const r = [];
    return (
      Object.values(e).forEach((o) => {
        Array.isArray(o)
          ? (r.push(...o), (n += o.length))
          : typeof o == "number"
          ? (r.push(o), (n += 1))
          : typeof o == "boolean" && (r.push(Number(o)), (n += 1));
      }),
      { uniformsOption: e, uniformsLength: n, uniformsArray: r }
    );
  }
  getCommonUniformsInfo() {
    return { uniformsLength: 0, uniformsArray: [], uniformsOption: {} };
  }
  updateStyleUnifoms() {
    var e, n;
    const { uniformsArray: r } = this.getUniformsBufferInfo(
        this.getStyleAttribute()
      ),
      { uniformsArray: o } = this.getCommonUniformsInfo();
    (e = this.attributeUnifoms) === null ||
      e === void 0 ||
      e.subData({
        offset: 0,
        data: new Uint8Array(new Float32Array(r).buffer),
      }),
      (n = this.commonUnifoms) === null ||
        n === void 0 ||
        n.subData({
          offset: 0,
          data: new Uint8Array(new Float32Array(o).buffer),
        });
  }
}
function Ck(t, e) {
  const n = [];
  let r = "";
  t.forEach((a) => {
    const h = a.replace(/([a-z])([A-Z])/g, "$1_$2").toUpperCase(),
      f = x7 + h;
    e[a]
      ? (r += `#define USE_ATTRIBUTE_${h} 0.0 
`)
      : n.push(`  ${Dm[a]} u_${a};`),
      (r += `
#ifdef USE_ATTRIBUTE_${h}
layout(location = ${f}) in ${Dm[a]} a_${a.charAt(0).toUpperCase() + a.slice(1)};
#endif 
`);
  });
  const o = n.length
    ? `
layout(std140) uniform AttributeUniforms {
  ${n.join(`
`)}
};
`
    : "";
  r += o;
  let l = "";
  return (
    t.forEach((a) => {
      const h = a.replace(/([a-z])([A-Z])/g, "$1_$2").toUpperCase();
      l += `
  #ifdef USE_ATTRIBUTE_${h}
    ${Dm[a]} ${a} = a_${a.charAt(0).toUpperCase() + a.slice(1)};
  #else
    ${Dm[a]} ${a} = u_${a};
  #endif
  `;
    }),
    { "vs:#decl": r, "fs:#decl": o, "vs:#main-start": l }
  );
}
let t6 = (function (t) {
    return (t.VERTICAL = "vertical"), (t.HORIZONTAL = "horizontal"), t;
  })({}),
  Nk = (function (t) {
    return (t.NORMAL = "normal"), (t.REPLACE = "replace"), t;
  })({}),
  B3 = (function (t) {
    return (t[(t.pixel = 0)] = "pixel"), (t[(t.meter = 1)] = "meter"), t;
  })({});
const b7 = 100;
function n6(t) {
  return (t / 180) * Math.acos(-1);
}
function E7(t) {
  const e = n6(t[0]) + Math.PI / 2,
    n = n6(t[1]),
    r = b7 + Math.random() * 0.4,
    o = r * Math.cos(n) * Math.cos(e),
    l = r * Math.cos(n) * Math.sin(e),
    a = r * Math.sin(n);
  return [l, a, o];
}
const r6 = tl();
tl();
const ec = tl(),
  Rf = tl(),
  km = tl();
function i6(t, e, n, r, o) {
  Zd(t, n, r), Pg(t, t), (e = i_(-t[1], t[0]));
  const l = i_(-n[1], n[0]);
  return [o / o_(e, l), e];
}
function If(t, e) {
  return mM(t, -e[1], e[0]);
}
function Um(t, e, n) {
  return r8(t, e, n), Pg(t, t), t;
}
function a6(t, e) {
  return t[0] === e[0] && t[1] === e[1];
}
class Rk {
  constructor(e = {}) {
    R(this, "complex", void 0),
      R(this, "join", void 0),
      R(this, "cap", void 0),
      R(this, "miterLimit", void 0),
      R(this, "thickness", void 0),
      R(this, "normal", void 0),
      R(this, "lastFlip", -1),
      R(this, "miter", i_(0, 0)),
      R(this, "started", !1),
      R(this, "dash", !1),
      R(this, "totalDistance", 0),
      R(this, "currentIndex", 0),
      (this.join = e.join || "miter"),
      (this.cap = e.cap || "butt"),
      (this.miterLimit = e.miterLimit || 10),
      (this.thickness = e.thickness || 1),
      (this.dash = e.dash || !1),
      (this.complex = {
        positions: [],
        indices: [],
        normals: [],
        startIndex: 0,
        indexes: [],
      });
  }
  simpleExtrude(e) {
    const n = this.complex;
    if (e.length <= 1) return n;
    (this.lastFlip = -1),
      (this.started = !1),
      (this.normal = null),
      (this.totalDistance = 0);
    const r = e.length;
    let o = n.startIndex;
    for (let l = 1; l < r; l++) {
      const a = e[l - 1],
        h = e[l],
        f = l < e.length - 1 ? e[l + 1] : null,
        v = this.simpleSegment(n, o, a, h, f);
      o += v;
    }
    if (this.dash)
      for (let l = 0; l < n.positions.length / 6; l++)
        n.positions[l * 6 + 5] = this.totalDistance;
    return (n.startIndex = n.positions.length / 6), n;
  }
  extrude(e) {
    const n = this.complex;
    if (e.length <= 1) return n;
    (this.lastFlip = -1),
      (this.started = !1),
      (this.normal = null),
      (this.totalDistance = 0);
    const r = e.length;
    let o = n.startIndex;
    for (let l = 1; l < r; l++) {
      const a = e[l - 1],
        h = e[l],
        f = l < e.length - 1 ? e[l + 1] : null,
        v = this.segment(n, o, a, h, f);
      o += v;
    }
    if (this.dash)
      for (let l = 0; l < n.positions.length / 6; l++)
        n.positions[l * 6 + 5] = this.totalDistance;
    return (n.startIndex = n.positions.length / 6), n;
  }
  simpleSegment(e, n, r, o, l) {
    let a = 0;
    const h = e.indices,
      f = e.positions,
      v = e.normals,
      E = oc([o[0], o[1]]),
      x = oc([r[0], r[1]]);
    Um(ec, E, x);
    let T = 0;
    if (
      (this.dash &&
        ((T = this.lineSegmentDistance(E, x)), (this.totalDistance += T)),
      this.normal || ((this.normal = tl()), If(this.normal, ec)),
      this.started ||
        ((this.started = !0),
        this.extrusions(
          f,
          v,
          r,
          this.normal,
          this.thickness,
          this.totalDistance - T
        )),
      h.push(n + 0, n + 1, n + 2),
      !l)
    )
      If(this.normal, ec),
        this.extrusions(
          f,
          v,
          o,
          this.normal,
          this.thickness,
          this.totalDistance
        ),
        h.push(
          ...(this.lastFlip === 1 ? [n, n + 2, n + 3] : [n + 2, n + 1, n + 3])
        ),
        (a += 2);
    else {
      const N = oc([l[0], l[1]]);
      a6(E, N) && Zd(N, E, Pg(N, a_(N, E, x))), Um(Rf, N, E);
      const [I, L] = i6(km, tl(), ec, Rf, this.thickness);
      let F = o_(km, this.normal) < 0 ? -1 : 1;
      this.extrusions(f, v, o, L, I, this.totalDistance),
        h.push(
          ...(this.lastFlip === 1 ? [n, n + 2, n + 3] : [n + 2, n + 1, n + 3])
        ),
        (F = -1),
        x2(this.normal, L),
        (a += 2),
        (this.lastFlip = F);
    }
    return a;
  }
  segment(e, n, r, o, l) {
    let a = 0;
    const h = e.indices,
      f = e.positions,
      v = e.normals,
      E = this.cap === "square",
      x = this.join === "bevel",
      T = oc([o[0], o[1]]),
      N = oc([r[0], r[1]]);
    Um(ec, T, N);
    let I = 0;
    if (
      (this.dash &&
        ((I = this.lineSegmentDistance(T, N)), (this.totalDistance += I)),
      this.normal || ((this.normal = tl()), If(this.normal, ec)),
      !this.started)
    )
      if (((this.started = !0), E)) {
        const L = tl(),
          F = tl();
        Zd(L, this.normal, ec),
          Zd(F, this.normal, ec),
          v.push(F[0], F[1], 0),
          v.push(L[0], L[1], 0),
          f.push(
            r[0],
            r[1],
            r[2] | 0,
            this.totalDistance - I,
            -this.thickness,
            r[2] | 0
          ),
          this.complex.indexes.push(this.currentIndex),
          f.push(
            r[0],
            r[1],
            r[2] | 0,
            this.totalDistance - I,
            this.thickness,
            r[2] | 0
          ),
          this.complex.indexes.push(this.currentIndex),
          this.currentIndex++;
      } else
        this.extrusions(
          f,
          v,
          r,
          this.normal,
          this.thickness,
          this.totalDistance - I
        );
    if ((h.push(n + 0, n + 1, n + 2), l)) {
      const L = oc([l[0], l[1]]);
      a6(T, L) && Zd(L, T, Pg(L, a_(L, T, N))), Um(Rf, L, T);
      const [F, X] = i6(km, tl(), ec, Rf, this.thickness);
      let G = o_(km, this.normal) < 0 ? -1 : 1,
        K = x;
      !K && this.join === "miter" && F > this.miterLimit && (K = !0),
        K
          ? (v.push(this.normal[0], this.normal[1], 0),
            v.push(X[0], X[1], 0),
            f.push(
              o[0],
              o[1],
              o[2] | 0,
              this.totalDistance,
              -this.thickness * G,
              o[2] | 0
            ),
            this.complex.indexes.push(this.currentIndex),
            f.push(
              o[0],
              o[1],
              o[2] | 0,
              this.totalDistance,
              this.thickness * G,
              o[2] | 0
            ),
            this.complex.indexes.push(this.currentIndex),
            this.currentIndex++,
            h.push(
              ...(this.lastFlip !== -G
                ? [n, n + 2, n + 3]
                : [n + 2, n + 1, n + 3])
            ),
            h.push(n + 2, n + 3, n + 4),
            If(r6, Rf),
            x2(this.normal, r6),
            v.push(this.normal[0], this.normal[1], 0),
            f.push(
              o[0],
              o[1],
              o[2] | 0,
              this.totalDistance,
              -this.thickness * G,
              o[2] | 0
            ),
            this.complex.indexes.push(this.currentIndex),
            this.currentIndex++,
            (a += 3))
          : (this.extrusions(f, v, o, X, F, this.totalDistance),
            h.push(
              ...(this.lastFlip === 1
                ? [n, n + 2, n + 3]
                : [n + 2, n + 1, n + 3])
            ),
            (G = -1),
            x2(this.normal, X),
            (a += 2)),
        (this.lastFlip = G);
    } else {
      if ((If(this.normal, ec), E)) {
        const L = tl(),
          F = tl();
        r8(F, ec, this.normal),
          Zd(L, ec, this.normal),
          v.push(F[0], F[1], 0),
          v.push(L[0], L[1], 0),
          f.push(
            o[0],
            o[1],
            o[2] | 0,
            this.totalDistance,
            this.thickness,
            o[2] | 0
          ),
          this.complex.indexes.push(this.currentIndex),
          f.push(
            o[0],
            o[1],
            o[2] | 0,
            this.totalDistance,
            this.thickness,
            o[2] | 0
          ),
          this.complex.indexes.push(this.currentIndex),
          this.currentIndex++;
      } else
        this.extrusions(
          f,
          v,
          o,
          this.normal,
          this.thickness,
          this.totalDistance
        );
      h.push(
        ...(this.lastFlip === 1 ? [n, n + 2, n + 3] : [n + 2, n + 1, n + 3])
      ),
        (a += 2);
    }
    return a;
  }
  extrusions(e, n, r, o, l, a) {
    n.push(o[0], o[1], 0),
      n.push(o[0], o[1], 0),
      e.push(r[0], r[1], r[2] | 0, a, -l, r[2] | 0),
      this.complex.indexes.push(this.currentIndex),
      e.push(r[0], r[1], r[2] | 0, a, l, r[2] | 0),
      this.complex.indexes.push(this.currentIndex),
      this.currentIndex++;
  }
  lineSegmentDistance(e, n) {
    const r = n[0] - e[0],
      o = n[1] - e[1];
    return Math.sqrt(r * r + o * o);
  }
}
let Mf = (function (t) {
    return (
      (t.CYLINDER = "cylinder"),
      (t.SQUARECOLUMN = "squareColumn"),
      (t.TRIANGLECOLUMN = "triangleColumn"),
      (t.HEXAGONCOLUMN = "hexagonColumn"),
      (t.PENTAGONCOLUMN = "pentagonColumn"),
      t
    );
  })({}),
  Pf = (function (t) {
    return (
      (t.CIRCLE = "circle"),
      (t.SQUARE = "square"),
      (t.TRIANGLE = "triangle"),
      (t.HEXAGON = "hexagon"),
      (t.PENTAGON = "pentagon"),
      t
    );
  })({});
function U1(t, e = 0) {
  const n = (Math.PI * 2) / t,
    r = [];
  for (let l = 0; l < t; l++) r.push(n * l + (e * Math.PI) / 12);
  return r.map((l) => {
    const a = Math.sin(l + Math.PI / 4),
      h = Math.cos(l + Math.PI / 4);
    return [a, h, 0];
  });
}
function C_() {
  return U1(30);
}
function o6() {
  return U1(4);
}
function s6() {
  return U1(3);
}
function l6() {
  return U1(6, 1);
}
function c6() {
  return U1(5);
}
const M2 = {
  [Pf.CIRCLE]: C_,
  [Pf.HEXAGON]: l6,
  [Pf.TRIANGLE]: s6,
  [Pf.SQUARE]: o6,
  [Pf.PENTAGON]: c6,
  [Mf.CYLINDER]: C_,
  [Mf.HEXAGONCOLUMN]: l6,
  [Mf.TRIANGLECOLUMN]: s6,
  [Mf.SQUARECOLUMN]: o6,
  [Mf.PENTAGONCOLUMN]: c6,
};
function A7(t, e = !1) {
  const n = t[0][0],
    r = t[0][t[0].length - 1];
  n[0] === r[0] && n[1] === r[1] && (t[0] = t[0].slice(0, t[0].length - 1));
  const o = t[0].length,
    l = S1.flatten(t),
    { vertices: a, dimensions: h, holes: f } = l,
    v = [],
    E = [],
    x = [];
  for (let N = 0; N < a.length / h; N++)
    v.push(a[N * h], a[N * h + 1], 1, -1, -1), x.push(0, 0, 1);
  const T = y7(a, f, h, e);
  E.push(...T);
  for (let N = 0; N < o; N++) {
    const I = l.vertices.slice(N * h, (N + 1) * h);
    let L = l.vertices.slice((N + 1) * h, (N + 2) * h);
    L.length === 0 && (L = l.vertices.slice(0, h));
    const F = v.length / 5;
    v.push(
      I[0],
      I[1],
      1,
      0,
      0,
      L[0],
      L[1],
      1,
      0.1,
      0,
      I[0],
      I[1],
      0,
      0,
      0.8,
      L[0],
      L[1],
      0,
      0.1,
      0.8
    );
    const X = Ik([L[0], L[1], 1], [I[0], I[1], 0], [I[0], I[1], 1], e);
    x.push(...X, ...X, ...X, ...X),
      E.push(...[1, 2, 0, 3, 2, 1].map((G) => G + F));
  }
  return { positions: v, index: E, normals: x };
}
function Ik(t, e, n, r = !1) {
  const o = Wf(),
    l = Wf(),
    a = Wf();
  r && ((t = og(t)), (e = og(e)), (n = og(n)));
  const h = Rs(...t),
    f = Rs(...e),
    v = Rs(...n);
  S5(o, v, f), S5(l, h, f), hM(a, o, l);
  const E = Wf();
  return Xf(E, a), E;
}
const zm = {};
function Q0(t) {
  const e = J0(t.coordinates);
  return {
    vertices: [...e, ...e, ...e, ...e],
    indices: [0, 1, 2, 2, 3, 0],
    size: e.length,
  };
}
function u6(t) {
  const e = J0(t.coordinates),
    n = E7(e);
  return {
    vertices: [...n, ...n, ...n, ...n],
    indices: [0, 1, 2, 2, 3, 0],
    size: n.length,
  };
}
function T7(t) {
  const { shape: e } = t,
    { positions: n, index: r, normals: o } = Bk(e, !1);
  return { vertices: n, indices: r, normals: o, size: 5 };
}
function Mk(t) {
  const e = J0(t.coordinates);
  return { vertices: [...e], indices: [0], size: e.length };
}
function N_(t) {
  const { coordinates: e } = t,
    n = new Rk({ dash: !0, join: "bevel" });
  let r = e;
  r[0] && !Array.isArray(r[0][0]) && (r = [e]),
    r.forEach((l) => {
      n.extrude(l);
    });
  const o = n.complex;
  return {
    vertices: o.positions,
    indices: o.indices,
    normals: o.normals,
    indexes: o.indexes,
    size: 6,
  };
}
function Pk(t) {
  const { coordinates: e } = t,
    n = [];
  if (!Array.isArray(e[0]))
    return { vertices: [], indices: [], normals: [], size: 6, count: 0 };
  const { results: r, totalDistance: o } = Ok(e);
  return (
    r.map((l) => {
      n.push(l[0], l[1], l[2], l[3], 0, o);
    }),
    { vertices: n, indices: [], normals: [], size: 6, count: r.length }
  );
}
function d6(t, e) {
  const n = e[0] - t[0],
    r = e[1] - t[1];
  return Math.sqrt(n * n + r * r);
}
function P2(t, e) {
  return t.length < 3 && t.push(0), e !== void 0 && t.push(e), t;
}
function Ok(t) {
  let e = t;
  Array.isArray(e) &&
    Array.isArray(e[0]) &&
    Array.isArray(e[0][0]) &&
    (e = t.flat());
  let n = 0;
  if (e.length < 2) return { results: e, totalDistance: 0 };
  {
    const r = [],
      o = P2(e[0], n);
    r.push(o);
    for (let a = 1; a < e.length - 1; a++) {
      const h = d6(oc(e[a - 1]), oc(e[a]));
      n += h;
      const f = P2(e[a], n);
      r.push(f), r.push(f);
    }
    const l = d6(oc(e[e.length - 2]), oc(e[e.length - 1]));
    return (
      (n += l), r.push(P2(e[e.length - 1], n)), { results: r, totalDistance: n }
    );
  }
}
function z1(t) {
  const { coordinates: e } = t,
    n = S1.flatten(e),
    { vertices: r, dimensions: o, holes: l } = n;
  return { indices: y7(r, l, o), vertices: r, size: o };
}
function Lk(t) {
  const { indices: e, vertices: n, size: r } = z1(t);
  return { indices: e, vertices: Dk(n), size: r + 4 };
}
function Dk(t) {
  const e = [],
    { center: n, radius: r } = jC(t);
  for (let o = 0; o < t.length; o += 2) {
    const l = t[o],
      a = t[o + 1];
    e.push(l, a, 0, ...n, r);
  }
  return e;
}
function S7(t) {
  const e = t.coordinates,
    { positions: n, index: r, normals: o } = A7(e, !0);
  return { vertices: n, indices: r, normals: o, size: 5 };
}
function Ev(t) {
  const e = t.coordinates;
  return {
    vertices: [
      ...e[0],
      0,
      0,
      0,
      ...e[1],
      0,
      1,
      0,
      ...e[2],
      0,
      1,
      1,
      ...e[3],
      0,
      0,
      1,
    ],
    indices: [0, 1, 2, 0, 2, 3],
    size: 5,
  };
}
function F3(t, e) {
  const { segmentNumber: n = 30 } = e,
    r = t.coordinates,
    o = [],
    l = [];
  for (let a = 0; a < n; a++)
    o.push(
      a,
      1,
      a,
      r[0][0],
      r[0][1],
      r[1][0],
      r[1][1],
      a,
      -1,
      a,
      r[0][0],
      r[0][1],
      r[1][0],
      r[1][1]
    ),
      a !== n - 1 && l.push(...[0, 1, 2, 1, 3, 2].map((h) => a * 2 + h));
  return { vertices: o, indices: l, size: 7 };
}
function Bk(t, e = !1) {
  if (zm && zm[t]) return zm[t];
  const n = M2[t] ? M2[t]() : M2.cylinder(),
    r = A7([n], e);
  return (zm[t] = r), r;
}
function Fk(t, e) {
  return {
    type: t.type,
    field: "value",
    items: t.positions.map((n, r) => ({
      [e]: r >= t.colors.length ? null : t.colors[r],
      value: n,
    })),
  };
}
const kk = `uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

in vec2 v_texCoord;
out vec4 outputColor;
vec3 setContrast(vec3 rgb, float contrast) {
  vec3 color = mix(vec3(0.5), rgb, contrast);
  color = clamp(color, 0.0, 1.0);
  return color;
}
vec3 setSaturation(vec3 rgb, float adjustment) {
  const vec3 grayVector = vec3(0.2125, 0.7154, 0.0721);
  vec3 intensity = vec3(dot(rgb, grayVector));
  vec3 color = mix(intensity, rgb, adjustment);
  color = clamp(color, 0.0, 1.0);
  return color;
}
void main() {
  vec4 color = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y));
  //brightness
  color.rgb = mix(vec3(0.0, 0.0, 0.0), color.rgb, u_brightness);
  //contrast
  color.rgb = setContrast(color.rgb, u_contrast);
  // saturation
  color.rgb = setSaturation(color.rgb, u_saturation);
  // gamma
  color.rgb = pow(color.rgb, vec3(u_gamma));
  outputColor = color;
  outputColor.a *= u_opacity;
  if(outputColor.a < 0.01)
    discard;
}
`,
  Uk = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

out vec2 v_texCoord;
#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;
let zk = class extends qi {
  constructor(...e) {
    super(...e), R(this, "texture", void 0);
  }
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      UV: 9,
    });
  }
  getCommonUniformsInfo() {
    const {
        opacity: e,
        brightness: n,
        contrast: r,
        saturation: o,
        gamma: l,
      } = this.layer.getLayerConfig(),
      a = {
        u_opacity: xf(e, 1),
        u_brightness: xf(n, 1),
        u_contrast: xf(r, 1),
        u_saturation: xf(o, 1),
        u_gamma: xf(l, 1),
      };
    return (this.textures = [this.texture]), this.getUniformsBufferInfo(a);
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return yield e.loadTexture(), e.buildModels();
    })();
  }
  clearModels() {
    var e;
    (e = this.texture) === null || e === void 0 || e.destroy();
  }
  loadTexture() {
    var e = this;
    return bt(function* () {
      const { createTexture2D: n } = e.rendererService,
        o = yield e.layer.getSource().data.images;
      e.texture = n({
        data: o[0],
        width: o[0].width,
        height: o[0].height,
        mag: H.LINEAR,
        min: H.LINEAR,
      });
    })();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      return (
        e.initUniformsBuffer(),
        [
          yield e.layer.buildLayerModel({
            moduleName: "rasterImage",
            vertexShader: Uk,
            fragmentShader: kk,
            defines: e.getDefines(),
            triangulation: Ev,
            primitive: H.TRIANGLES,
            blend: { enable: !0 },
            depth: { enable: !1 },
            pickingEnabled: !1,
          }),
        ]
      );
    })();
  }
  registerBuiltinAttributes() {
    this.registerPosition64LowAttribute(),
      this.styleAttributeService.registerStyleAttribute({
        name: "uv",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Uv",
          shaderLocation: this.attributeLocation.UV,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 2,
          update: (e, n, r) => [r[3], r[4]],
        },
      });
  }
};
const Vk = { image: zk };
class Hk extends Vp {
  constructor(...e) {
    super(...e), R(this, "type", "ImageLayer");
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      const n = e.getModelType();
      (e.layerModel = new Vk[n](e)), yield e.initLayerModels();
    })();
  }
  getDefaultConfig() {
    const e = this.getModelType();
    return { image: {} }[e];
  }
  getModelType() {
    return "image";
  }
}
const jk = `
#define Animate 0.0
#define LineTexture 1.0
uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_lineData;
//dash
in vec4 v_dash_array;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"

void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      discard;
    };
  }
  float animateSpeed = 0.0; // 运动速度
  outputColor = v_color;
  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_lineData.b, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;
  }

  // 当存在贴图时在底色上贴上贴图
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (v_lineData.r / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = v_lineData.g; // 贴图在弧线上重复的数量

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = v_lineData.a; // 横向 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
    
  } else {
     outputColor = filterColor(outputColor);
  }
}`,
  Wk = `#define Animate (0.0)
#define LineTexture (1.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_lineData;
//dash
out vec4 v_dash_array;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1.0 - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);
  if (u_lineDir == 1.0) {
    // 正向
    return mid;
  } else {
    // 逆向
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
  // dash: index / (segmentNumber - 1.);
  // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
  //  return index / (segmentNumber - 1.);
}
vec2 interpolate(vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x, t), bezier3(y, t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return dir_screenspace.xy * sign(offset_direction);
}

void main() {
  //vs中计算渐变色
  if (u_linearColor == 1.0) {
    float d_segmentIndex = a_Position.x + 1.0; // 当前顶点在弧线中所处的分段位置
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex / segmentNumber);
  } else {
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;

  vec2 source_world = a_Instance.rg; // 起始点
  vec2 target_world = a_Instance.ba; // 终点

  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  // 计算 dashArray 和 distanceRatio 输出到片元
  float total_Distance = pixelDistance(source_world, target_world) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  v_distance_ratio = segmentIndex / segmentNumber;

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;

  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

  v_lineData.b = d_distance_ratio;

  vec4 source = project_position(vec4(source_world, 0, 1.), a_Instance64Low.xy);
  vec4 target = project_position(vec4(target_world, 0, 1.), a_Instance64Low.zw);

  vec2 currPos = interpolate(source.xy, target.xy, segmentRatio, thetaOffset);
  vec2 nextPos = interpolate(source.xy, target.xy, nextSegmentRatio, thetaOffset);

  vec2 offset = project_pixel(
    getExtrusionOffset((nextPos.xy - currPos.xy) * indexDir, a_Position.y)
  );

  float d_segmentIndex = a_Position.x + 1.0; // 当前顶点在弧线中所处的分段位置
  v_lineData.r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // 开启贴图模式
    float arcDistrance = length(source - target); // 起始点和终点的距离
    arcDistrance = project_pixel(arcDistrance);

    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // 贴图沿弧线方向的长度 - 随地图缩放改变
    float texCount = floor(arcDistrance / pixelLen); // 贴图在弧线上重复的数量
    v_lineData.g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // 线横向偏移的距离
    float linePixelSize = project_pixel(a_Size); // 定点位置偏移
    v_lineData.a = lineOffsetWidth / linePixelSize; // 线图层贴图部分的 v 坐标值
  }

  gl_Position = project_common_position_to_clipspace(vec4(currPos.xy + offset, 0, 1.0));

  setPickingColor(a_PickingColor);
}
`,
  Xk = { solid: 0, dash: 1 };
class Gk extends qi {
  constructor(...e) {
    super(...e),
      R(this, "texture", void 0),
      R(this, "updateTexture", () => {
        const { createTexture2D: n } = this.rendererService;
        if (this.texture) {
          this.texture.update({ data: this.iconService.getCanvas() }),
            this.layer.render();
          return;
        }
        (this.texture = n({
          data: this.iconService.getCanvas(),
          mag: H.NEAREST,
          min: H.NEAREST,
          premultiplyAlpha: !1,
          width: 1024,
          height: this.iconService.canvasHeight || 128,
        })),
          (this.textures = [this.texture]);
      });
  }
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      SIZE: 9,
      INSTANCE: 10,
      INSTANCE_64LOW: 11,
      UV: 12,
      THETA_OFFSET: 13,
    });
  }
  getCommonUniformsInfo() {
    const {
        sourceColor: e,
        targetColor: n,
        textureBlend: r = "normal",
        lineType: o = "solid",
        dashArray: l = [10, 5],
        forward: a = !0,
        lineTexture: h = !1,
        iconStep: f = 100,
        segmentNumber: v = 30,
      } = this.layer.getLayerConfig(),
      { animateOption: E } = this.layer.getLayerConfig();
    let x = l;
    o !== "dash" && (x = [0, 0]), x.length === 2 && x.push(0, 0);
    let T = 0,
      N = [0, 0, 0, 0],
      I = [0, 0, 0, 0];
    if (
      (e && n && ((N = Bi(e)), (I = Bi(n)), (T = 1)),
      this.rendererService.getDirty())
    ) {
      var L;
      (L = this.texture) === null || L === void 0 || L.bind();
    }
    const F = {
      u_animate: this.animateOption2Array(E),
      u_dash_array: x,
      u_sourceColor: N,
      u_targetColor: I,
      u_textSize: [1024, this.iconService.canvasHeight || 128],
      segmentNumber: v,
      u_lineDir: a ? 1 : -1,
      u_icon_step: f,
      u_line_texture: h ? 1 : 0,
      u_textureBlend: r === "normal" ? 0 : 1,
      u_blur: 0.9,
      u_line_type: Xk[o || "solid"],
      u_time: this.layer.getLayerAnimateTime() || 0,
      u_linearColor: T,
    };
    return this.getUniformsBufferInfo(F);
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return (
        e.updateTexture(),
        e.iconService.on("imageUpdate", e.updateTexture),
        e.buildModels()
      );
    })();
  }
  clearModels() {
    var e;
    (e = this.texture) === null || e === void 0 || e.destroy(),
      this.iconService.off("imageUpdate", this.updateTexture);
  }
  getShaders() {
    return { frag: jk, vert: Wk, type: "" };
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      e.initUniformsBuffer();
      const { segmentNumber: n = 30 } = e.layer.getLayerConfig(),
        { frag: r, vert: o, type: l } = e.getShaders();
      return [
        yield e.layer.buildLayerModel({
          moduleName: "lineArc2d" + l,
          vertexShader: o,
          fragmentShader: r,
          defines: e.getDefines(),
          inject: e.getInject(),
          triangulation: F3,
          depth: { enable: !1 },
          styleOption: { segmentNumber: n },
        }),
      ];
    })();
  }
  registerBuiltinAttributes() {
    this.styleAttributeService.registerStyleAttribute({
      name: "size",
      type: Ln.Attribute,
      descriptor: {
        name: "a_Size",
        shaderLocation: this.attributeLocation.SIZE,
        buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
        size: 1,
        update: (e) => {
          const { size: n = 1 } = e;
          return Array.isArray(n) ? [n[0]] : [n];
        },
      },
    }),
      this.styleAttributeService.registerStyleAttribute({
        name: "instance",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Instance",
          shaderLocation: this.attributeLocation.INSTANCE,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 4,
          update: (e, n, r) => [r[3], r[4], r[5], r[6]],
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "instance64Low",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Instance64Low",
          shaderLocation: this.attributeLocation.INSTANCE_64LOW,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 4,
          update: (e, n, r) => [_o(r[3]), _o(r[4]), _o(r[5]), _o(r[6])],
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "uv",
        type: Ln.Attribute,
        descriptor: {
          name: "a_iconMapUV",
          shaderLocation: this.attributeLocation.UV,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 2,
          update: (e) => {
            const n = this.iconService.getIconMap(),
              { texture: r } = e,
              { x: o, y: l } = n[r] || { x: 0, y: 0 };
            return [o, l];
          },
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "thetaOffset",
        type: Ln.Attribute,
        descriptor: {
          name: "a_ThetaOffset",
          shaderLocation: this.attributeLocation.THETA_OFFSET,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 1,
          update: (e) => {
            const { thetaOffset: n = 1 } = e;
            return [n];
          },
        },
      });
  }
}
const Zk = `#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec4 v_dash_array;
in float v_segmentIndex;
in vec2 v_iconMapUV;
in vec4 v_line_data;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // 运动速度
  float d_distance_ratio = v_line_data.g; // 当前点位距离占线总长的比例
  outputColor = v_color;

  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    outputColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;

      // u_animate
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // // 贴图在弧线上重复的数量

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = v_line_data.a;  // 线图层贴图部分的 v 坐标值
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          outputColor = filterColor(pattern);
        }
    }

  } else {
    outputColor = filterColor(outputColor);
  }
}
`,
  Yk = `#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec4 v_dash_array;
out float v_segmentIndex;
out vec2 v_iconMapUV;
out vec4 v_line_data;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return dir_screenspace.xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 是为了对齐坐标
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // 手动增加一些偏移，减轻面的冲突
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  //vs中计算渐变色
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // 当前顶点在弧线中所处的分段位置
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0), a_Instance64Low.xy).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0), a_Instance64Low.zw).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(source, target) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  v_line_data.g = d_distance_ratio; // 当前点位距离占线总长的比例

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // 开启贴图模式

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    v_line_data.b = floor(arcDistrance/pixelLen); // 贴图在弧线上重复的数量

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // 线横向偏移的距离
    float linePixelSize = project_pixel(a_Size);  // 定点位置偏移，按地图等级缩放后的距离
    v_line_data.a = lineOffsetWidth/linePixelSize;  // 线图层贴图部分的 v 坐标值

    v_iconMapUV = a_iconMapUV;
  }


  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z * thetaOffset, 1.0));

  // 地球模式
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // 线的偏移
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // 计算起始点和终止点的距离
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // 计算飞线各个节点相应的高度
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // 地球点位
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;

    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }


  setPickingColor(a_PickingColor);
}
`,
  qk = { solid: 0, dash: 1 };
class h6 extends qi {
  constructor(...e) {
    super(...e),
      R(this, "texture", void 0),
      R(this, "updateTexture", () => {
        const { createTexture2D: n } = this.rendererService;
        if (this.texture) {
          this.texture.update({ data: this.iconService.getCanvas() }),
            this.layer.render();
          return;
        }
        (this.texture = n({
          data: this.iconService.getCanvas(),
          mag: H.NEAREST,
          min: H.NEAREST,
          premultiplyAlpha: !1,
          width: 1024,
          height: this.iconService.canvasHeight || 128,
        })),
          (this.textures = [this.texture]);
      });
  }
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      SIZE: 9,
      INSTANCE: 10,
      INSTANCE_64LOW: 11,
      UV: 12,
      THETA_OFFSET: 13,
    });
  }
  getCommonUniformsInfo() {
    const {
        sourceColor: e,
        targetColor: n,
        textureBlend: r = "normal",
        lineType: o = "solid",
        dashArray: l = [10, 5],
        lineTexture: a = !1,
        iconStep: h = 100,
        segmentNumber: f = 30,
        globalArcHeight: v = 10,
      } = this.layer.getLayerConfig(),
      { animateOption: E } = this.layer.getLayerConfig();
    l.length === 2 && l.push(0, 0);
    let x = 0,
      T = [0, 0, 0, 0],
      N = [0, 0, 0, 0];
    if (
      (e && n && ((T = Bi(e)), (N = Bi(n)), (x = 1)),
      this.rendererService.getDirty())
    ) {
      var I;
      (I = this.texture) === null || I === void 0 || I.bind();
    }
    const L = {
      u_animate: this.animateOption2Array(E),
      u_dash_array: l,
      u_sourceColor: T,
      u_targetColor: N,
      u_textSize: [1024, this.iconService.canvasHeight || 128],
      u_globel: this.mapService.version === "GLOBEL" ? 1 : 0,
      u_globel_radius: b7,
      u_global_height: v,
      segmentNumber: f,
      u_line_type: qk[o] || 0,
      u_icon_step: h,
      u_line_texture: a ? 1 : 0,
      u_textureBlend: r === "normal" ? 0 : 1,
      u_time: this.layer.getLayerAnimateTime() || 0,
      u_linearColor: x,
    };
    return this.getUniformsBufferInfo(L);
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return (
        e.initUniformsBuffer(),
        e.updateTexture(),
        e.iconService.on("imageUpdate", e.updateTexture),
        e.buildModels()
      );
    })();
  }
  clearModels() {
    var e;
    (e = this.texture) === null || e === void 0 || e.destroy(),
      this.iconService.off("imageUpdate", this.updateTexture);
  }
  getShaders() {
    return { frag: Zk, vert: Yk, type: "" };
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      const { segmentNumber: n = 30 } = e.layer.getLayerConfig(),
        { frag: r, vert: o, type: l } = e.getShaders();
      return [
        yield e.layer.buildLayerModel({
          moduleName: "lineArc3d" + l,
          vertexShader: o,
          fragmentShader: r,
          defines: e.getDefines(),
          inject: e.getInject(),
          triangulation: F3,
          styleOption: { segmentNumber: n },
        }),
      ];
    })();
  }
  registerBuiltinAttributes() {
    this.styleAttributeService.registerStyleAttribute({
      name: "size",
      type: Ln.Attribute,
      descriptor: {
        name: "a_Size",
        shaderLocation: this.attributeLocation.SIZE,
        buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
        size: 1,
        update: (e) => {
          const { size: n = 1 } = e;
          return Array.isArray(n) ? [n[0]] : [n];
        },
      },
    }),
      this.styleAttributeService.registerStyleAttribute({
        name: "instance",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Instance",
          shaderLocation: this.attributeLocation.INSTANCE,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 4,
          update: (e, n, r) => [r[3], r[4], r[5], r[6]],
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "instance64Low",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Instance64Low",
          shaderLocation: this.attributeLocation.INSTANCE_64LOW,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 4,
          update: (e, n, r) => [_o(r[3]), _o(r[4]), _o(r[5]), _o(r[6])],
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "uv",
        type: Ln.Attribute,
        descriptor: {
          name: "a_iconMapUV",
          shaderLocation: this.attributeLocation.UV,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 2,
          update: (e) => {
            const n = this.iconService.getIconMap(),
              { texture: r } = e,
              { x: o, y: l } = n[r] || { x: 0, y: 0 };
            return [o, l];
          },
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "thetaOffset",
        type: Ln.Attribute,
        descriptor: {
          name: "a_ThetaOffset",
          shaderLocation: this.attributeLocation.THETA_OFFSET,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 1,
          update: (e) => {
            const { thetaOffset: n = 1 } = e;
            return [n];
          },
        },
      });
  }
}
const p6 = {
    circle: 2,
    triangle: 2,
    diamond: 4,
    rect: 2,
    classic: 3,
    halfTriangle: 2,
    none: 0,
  },
  nl = 1 / 2;
function $k(t, e) {
  const { width: n = 2, height: r = 1 } = e;
  return {
    vertices: [
      0,
      nl * t,
      1 * t * n,
      -(r + nl) * t,
      1 * t * n,
      (r - nl) * t,
      0,
      nl * t,
      1 * t * n,
      -(r + nl) * t,
      1 * t * n,
      (r - nl) * t,
    ],
    indices: [3, 4, 5],
    outLineIndices: [0, 1, 2],
    normals: [
      1 * t,
      -2 * t,
      1,
      -2 * t,
      1.5 * t,
      1,
      1 * t,
      1.5 * t,
      1,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
    ],
    dimensions: 2,
  };
}
function Kk(t, e) {
  const { width: n = 2, height: r = 3 } = e;
  return {
    vertices: [
      0,
      0,
      1 * t * n,
      1 * r,
      1 * t * n,
      -1 * r,
      0,
      0,
      1 * t * n,
      1 * r,
      1 * t * n,
      -1 * r,
    ],
    outLineIndices: [0, 1, 2],
    indices: [3, 4, 5],
    normals: [
      0,
      -1.5 * t,
      1,
      2,
      1 * t,
      1,
      -2,
      1 * t,
      1,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
    ],
    dimensions: 2,
  };
}
function Qk(t, e) {
  const { width: n = 2, height: r = 2 } = e;
  return {
    vertices: [
      0,
      r / 2,
      t * n * 1,
      r / 2,
      t * n * 1,
      -r / 2,
      0,
      -r / 2,
      0,
      r / 2,
      t * n * 1,
      r / 2,
      t * n * 1,
      -r / 2,
      0,
      -r / 2,
    ],
    dimensions: 2,
    indices: [4, 5, 6, 4, 6, 7],
    outLineIndices: [0, 1, 2, 0, 2, 3],
    normals: [
      0,
      -t,
      1,
      1,
      0,
      1,
      0,
      -t,
      1,
      -1,
      -0,
      1,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
    ],
  };
}
function Jk(t, e) {
  const { width: n = 2, height: r = 3 } = e;
  return {
    vertices: [
      0,
      0,
      1 * n * t,
      0.5 * r,
      2 * n * t,
      0,
      1 * n * t,
      -0.5 * r,
      0,
      0,
      1 * n * t,
      0.5 * r,
      2 * n * t,
      0,
      1 * n * t,
      -0.5 * r,
    ],
    dimensions: 2,
    indices: [4, 5, 6, 4, 6, 7],
    outLineIndices: [0, 1, 2, 0, 2, 3],
    normals: [
      0,
      -t,
      1,
      1,
      0,
      1,
      0,
      -t,
      1,
      -1,
      -0,
      1,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
    ],
  };
}
function eU(t, e) {
  const { width: n = 2, height: r = 3 } = e;
  return {
    vertices: [
      0,
      0,
      2 * t * n,
      1 * r,
      1.5 * t * n,
      0,
      2 * t * n,
      -1 * r,
      0,
      0,
      2 * t * n,
      1 * r,
      1.5 * t * n,
      0,
      2 * t * n,
      -1 * r,
    ],
    dimensions: 2,
    indices: [4, 5, 6, 4, 6, 7],
    outLineIndices: [0, 1, 2, 0, 2, 3],
    normals: [
      0,
      -t,
      1,
      1,
      0,
      1,
      0,
      -t,
      1,
      -1,
      -0,
      1,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
    ],
  };
}
function tU(t, e) {
  const { width: n = 2, height: r = 2 } = e,
    o = C_(),
    l = S1.flatten([o]),
    a = S1(l.vertices, l.holes, l.dimensions),
    h = o.map((f) => [f[0] * n * t, f[1] * r]).flat();
  return {
    vertices: [...h, ...h],
    dimensions: 2,
    indices: a.map((f) => f + o.length),
    outLineIndices: a,
    normals: [
      ...o.map((f) => [f[1] * r, f[0] * n * t, 1]).flat(),
      ...new Array(o.length * 3).fill(0),
    ],
  };
}
function nU(t, e = 0, n) {
  const r = typeof n.source == "object" ? n.source.type : n.source,
    o = typeof n.target == "object" ? n.target.type : n.target,
    { width: l = r ? p6[r] : 0 } = typeof n.source == "object" ? n.source : {},
    { width: a = o ? p6[o] : 0 } = typeof n.target == "object" ? n.target : {};
  return {
    vertices: [
      0,
      nl,
      1 * l,
      ...t,
      1,
      nl,
      -1 * a,
      ...t,
      1,
      -nl,
      -1 * a,
      ...t,
      0,
      -nl,
      1 * l,
      ...t,
      0,
      nl,
      1 * l,
      ...t,
      1,
      nl,
      -1 * a,
      ...t,
      1,
      -nl,
      -1 * a,
      ...t,
      0,
      -nl,
      1 * l,
      ...t,
    ],
    outLineIndices: [0, 1, 2, 0, 2, 3].map((h) => h + e),
    indices: [4, 5, 6, 4, 6, 7].map((h) => h + e),
    normals: [
      1, -1, 1, 1, 1, 1, -1, 0, 1, -1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    ],
    dimensions: 2,
  };
}
function f6(t, e) {
  const n = typeof t == "object" ? t.type : t,
    r = e === "source" ? 1 : -1,
    o = typeof t == "object" ? t : {};
  switch (n) {
    case "circle":
      return tU(r, o);
    case "triangle":
      return Kk(r, o);
    case "diamond":
      return Jk(r, o);
    case "rect":
      return Qk(r, o);
    case "classic":
      return eU(r, o);
    case "halfTriangle":
      return $k(r, o);
    default:
      return {
        vertices: [],
        indices: [],
        normals: [],
        dimensions: 2,
        outLineIndices: [],
        outLineNormals: [],
      };
  }
}
function rU(t) {
  const e = t.coordinates.flat(),
    n = 1,
    r = 1;
  return {
    vertices: [
      1,
      0,
      0,
      ...e,
      1,
      2,
      -3,
      ...e,
      1,
      1,
      -3,
      ...e,
      0,
      1,
      0,
      ...e,
      0,
      0,
      0,
      ...e,
      1,
      0,
      0,
      ...e,
      1,
      2,
      -3,
      ...e,
      1,
      1,
      -3,
      ...e,
      0,
      1,
      0,
      ...e,
      0,
      0,
      0,
      ...e,
    ],
    normals: [
      -n,
      2 * r,
      1,
      2 * r,
      -r,
      1,
      r,
      -r,
      1,
      r,
      -r,
      1,
      -n,
      -r,
      1,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
    ],
    indices: [0, 1, 2, 0, 2, 3, 0, 3, 4, 5, 6, 7, 5, 7, 8, 5, 8, 9],
    size: 7,
  };
}
function iU(t, e) {
  return e ? aU(t, e) : rU(t);
}
function aU(t, e) {
  const n = t.coordinates.flat(),
    { target: r = "classic", source: o = "circle" } = e,
    l = m6(f6(o, "source"), n, 0, 0),
    a = nU(n, l.vertices.length / 7, e),
    h = m6(
      f6(r, "target"),
      n,
      1,
      l.vertices.length / 7 + a.vertices.length / 7
    );
  return {
    vertices: [...l.vertices, ...a.vertices, ...h.vertices],
    indices: [
      ...l.outLineIndices,
      ...a.outLineIndices,
      ...h.outLineIndices,
      ...l.indices,
      ...a.indices,
      ...h.indices,
    ],
    normals: [...l.normals, ...a.normals, ...h.normals],
    size: 7,
  };
}
function m6(t, e, n = 1, r = 0) {
  const o = [],
    { vertices: l, indices: a, dimensions: h, outLineIndices: f } = t;
  for (let v = 0; v < l.length; v += h) o.push(n, l[v + 1], l[v], ...e);
  return mt(
    mt({}, t),
    {},
    {
      vertices: o,
      indices: a.map((v) => v + r),
      outLineIndices: f.map((v) => v + r),
    }
  );
}
const oU = `// #extension GL_OES_standard_derivatives : enable

in vec4 v_color;
out vec4 outputColor;


// line texture

#pragma include "picking"

void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,
  sU = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniorm {
  float u_gap_width: 1.0;
  float u_stroke_width: 1.0;
  float u_stroke_opacity: 1.0;
};

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

out vec4 v_color;

vec2 project_pixel_offset(vec2 offsets) {
  vec2 data = project_pixel(offsets);

  return vec2(data.x, -data.y);
}

vec2 line_dir(vec2 target, vec2 source) {
  return normalize(ProjectFlat(target) - ProjectFlat(source));
}


void main() {
  // 透明度计算
  vec2 source_world = a_Instance.rg; // 起点
  vec2 target_world = a_Instance.ba; // 终点
  vec2 flowlineDir = line_dir(target_world, source_world);
  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x);

  vec2 position = mix(source_world, target_world, a_Position.x);
  vec2 position64Low = mix(a_Instance64Low.rg, a_Instance64Low.ba, a_Position.x);

  float lengthCommon = length(
    project_position(vec4(target_world, 0, 1)) - project_position(vec4(source_world, 0, 1))
  );
  vec2 offsetDistances = a_Size.x * project_pixel_offset(vec2(a_Position.y, a_Position.z)); // Mapbox || 高德
  vec2 limitedOffsetDistances = clamp(
    offsetDistances,
    project_pixel(-lengthCommon * 0.2),
    project_pixel(lengthCommon * 0.2)
  );

  float startOffsetCommon = project_pixel(offsets[0]);
  float endOffsetCommon = project_pixel(offsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon * 0.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon * 0.2),
    a_Position.x
  );

  vec2 normalsCommon = u_stroke_width * project_pixel_offset(vec2(a_Normal.x, a_Normal.y));

  float gapCommon = -1. * project_pixel(u_gap_width);
  vec3 offsetCommon = vec3(
    flowlineDir * (limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
      perpendicularDir * (limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );

  vec4 project_pos = project_position(vec4(position.xy, 0, 1.0), position64Low);

  vec4 fillColor = vec4(a_Color.rgb, a_Color.a * opacity);
  v_color = mix(fillColor, vec4(u_stroke.xyz, u_stroke.w * fillColor.w * u_stroke_opacity), a_Normal.z);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy +  offsetCommon.xy, 0., 1.0));

  setPickingColor(a_PickingColor);
}
`;
class lU extends qi {
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      SIZE: 9,
      INSTANCE: 10,
      INSTANCE_64LOW: 11,
      NORMAL: 12,
    });
  }
  getCommonUniformsInfo() {
    const {
        gapWidth: e = 2,
        strokeWidth: n = 1,
        strokeOpacity: r = 1,
      } = this.layer.getLayerConfig(),
      o = { u_gap_width: e, u_stroke_width: n, u_stroke_opacity: r };
    return this.getUniformsBufferInfo(o);
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return e.initUniformsBuffer(), e.buildModels();
    })();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      return [
        yield e.layer.buildLayerModel({
          moduleName: "flow_line",
          vertexShader: sU,
          fragmentShader: oU,
          defines: e.getDefines(),
          inject: e.getInject(),
          triangulation: iU,
          styleOption: e.layer.getLayerConfig().symbol,
          primitive: H.TRIANGLES,
          depth: { enable: !1 },
          pick: !1,
        }),
      ];
    })();
  }
  registerBuiltinAttributes() {
    this.styleAttributeService.registerStyleAttribute({
      name: "size",
      type: Ln.Attribute,
      descriptor: {
        name: "a_Size",
        shaderLocation: this.attributeLocation.SIZE,
        buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
        size: 2,
        update: (e) => {
          const { size: n = 1 } = e;
          return Array.isArray(n) ? [n[0], n[1]] : [n, 0];
        },
      },
    }),
      this.styleAttributeService.registerStyleAttribute({
        name: "instance",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Instance",
          shaderLocation: this.attributeLocation.INSTANCE,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 4,
          update: (e, n, r) => [r[3], r[4], r[5], r[6]],
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "instance64Low",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Instance64Low",
          shaderLocation: this.attributeLocation.INSTANCE_64LOW,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 4,
          update: (e, n, r) => [_o(r[3]), _o(r[4]), _o(r[5]), _o(r[6])],
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "normal",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Normal",
          shaderLocation: this.attributeLocation.NORMAL,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 3,
          update: (e, n, r, o, l) => l,
        },
      });
  }
}
const cU = `#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

in vec4 v_dash_array;
in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_line_data;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {

  float animateSpeed = 0.0;
  float d_segmentIndex = v_line_data.g;

  // 设置弧线的底色
  if(u_linearColor == 1.0) { // 使用渐变颜色
    outputColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
    outputColor.a *= v_color.a;
  } else { // 使用 color 方法传入的颜色
    outputColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // 实线部分
    } else {
      // 虚线部分
      discard;
    };
  }

  // 设置弧线的动画模式
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  // 设置弧线的贴图
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) {
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // 贴图在弧线上重复的数量
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = outputColor.a/v_color.a;
    }

    float v = v_line_data.a; // 线图层贴图部分的 v 坐标值

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // 设置贴图和底色的叠加模式
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  } else {
    outputColor = filterColor(outputColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}
`,
  uU = `#define LineTypeSolid (0.0)
#define LineTypeDash (1.0)
#define Animate (0.0)
#define LineTexture (1.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

out vec4 v_dash_array;
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_line_data;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps(float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return index / (segmentNumber - 1.0);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(mix(source, target, segmentRatio), sqrt(max(0.0, vertex_height)));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return dir_screenspace.xy * sign(offset_direction);
}
float getAngularDist(vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) * sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1.0 - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate(vec2 source, vec2 target, float angularDist, float t) {
  if (abs(angularDist - PI) < 0.001) {
    return (1.0 - t) * source + t * target;
  }
  float a = sin((1.0 - t) * angularDist) / sin(angularDist);
  float b = sin(t * angularDist) / sin(angularDist);
  vec2 sin_source = sin(source);
  vec2 cos_source = cos(source);
  vec2 sin_target = sin(target);
  vec2 cos_target = cos(target);
  float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
  float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
  float z = a * sin_source.y + b * sin_target.y;
  return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));

}

void main() {
  v_color = a_Color;
  v_color.a = v_color.a * opacity;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if (u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(source, target) / 2.0 * PI;
    total_Distance = total_Distance * 16.0; // total_Distance*16.0 调整默认的效果
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if (u_animate.x == Animate) {
    v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;

  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0), a_Instance64Low.xy);
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0), a_Instance64Low.zw);

  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  v_line_data.g = a_Position.x; // 该顶点在弧线上的分段排序
  if (LineTexture == u_line_texture) {
    float d_arcDistrance = length(source - target);
    d_arcDistrance = project_pixel(d_arcDistrance);

    float d_pixelLen = project_pixel(u_icon_step) / 8.0;
    v_line_data.b = floor(d_arcDistrance / d_pixelLen); // 贴图在弧线上重复的数量

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // 线横向偏移的距离
    float linePixelSize = project_pixel(a_Size); // 定点位置偏移，按地图等级缩放后的距离
    v_line_data.a = lineOffsetWidth / linePixelSize; // 线图层贴图部分的 v 坐标值

    v_iconMapUV = a_iconMapUV;
  }

  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}

`,
  dU = { solid: 0, dash: 1 };
class hU extends qi {
  constructor(...e) {
    super(...e),
      R(this, "texture", void 0),
      R(this, "updateTexture", () => {
        const { createTexture2D: n } = this.rendererService;
        if (this.texture) {
          this.texture.update({ data: this.iconService.getCanvas() }),
            this.layer.render();
          return;
        }
        (this.texture = n({
          data: this.iconService.getCanvas(),
          mag: H.NEAREST,
          min: H.NEAREST,
          premultiplyAlpha: !1,
          width: 1024,
          height: this.iconService.canvasHeight || 128,
        })),
          (this.textures = [this.texture]);
      });
  }
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      SIZE: 9,
      INSTANCE: 10,
      INSTANCE_64LOW: 11,
      UV: 12,
    });
  }
  getCommonUniformsInfo() {
    const {
        sourceColor: e,
        targetColor: n,
        textureBlend: r = "normal",
        lineType: o = "solid",
        dashArray: l = [10, 5],
        lineTexture: a = !1,
        iconStep: h = 100,
        segmentNumber: f = 30,
      } = this.layer.getLayerConfig(),
      { animateOption: v } = this.layer.getLayerConfig();
    if ((l.length === 2 && l.push(0, 0), this.rendererService.getDirty())) {
      var E;
      (E = this.texture) === null || E === void 0 || E.bind();
    }
    let x = 0,
      T = [0, 0, 0, 0],
      N = [0, 0, 0, 0];
    e && n && ((T = Bi(e)), (N = Bi(n)), (x = 1));
    let I = this.layer.getLayerAnimateTime();
    isNaN(I) && (I = 0);
    const L = {
      u_animate: this.animateOption2Array(v),
      u_dash_array: l,
      u_sourceColor: T,
      u_targetColor: N,
      u_textSize: [1024, this.iconService.canvasHeight || 128],
      segmentNumber: f,
      u_line_type: dU[o] || 0,
      u_icon_step: h,
      u_line_texture: a ? 1 : 0,
      u_textureBlend: r === "normal" ? 0 : 1,
      u_time: I,
      u_linearColor: x,
    };
    return this.getUniformsBufferInfo(L);
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return (
        e.initUniformsBuffer(),
        e.updateTexture(),
        e.iconService.on("imageUpdate", e.updateTexture),
        e.buildModels()
      );
    })();
  }
  clearModels() {
    var e;
    (e = this.texture) === null || e === void 0 || e.destroy(),
      this.iconService.off("imageUpdate", this.updateTexture);
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      const { segmentNumber: n = 30 } = e.layer.getLayerConfig();
      return [
        yield e.layer.buildLayerModel({
          moduleName: "lineGreatCircle",
          vertexShader: uU,
          fragmentShader: cU,
          triangulation: F3,
          styleOption: { segmentNumber: n },
          defines: e.getDefines(),
          inject: e.getInject(),
          depth: { enable: !1 },
        }),
      ];
    })();
  }
  registerBuiltinAttributes() {
    this.styleAttributeService.registerStyleAttribute({
      name: "size",
      type: Ln.Attribute,
      descriptor: {
        name: "a_Size",
        shaderLocation: this.attributeLocation.SIZE,
        buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
        size: 1,
        update: (e) => {
          const { size: n = 1 } = e;
          return Array.isArray(n) ? [n[0]] : [n];
        },
      },
    }),
      this.styleAttributeService.registerStyleAttribute({
        name: "instance",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Instance",
          shaderLocation: this.attributeLocation.INSTANCE,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 4,
          update: (e, n, r) => [r[3], r[4], r[5], r[6]],
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "instance64Low",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Instance64Low",
          shaderLocation: this.attributeLocation.INSTANCE_64LOW,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 4,
          update: (e, n, r) => [_o(r[3]), _o(r[4]), _o(r[5]), _o(r[6])],
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "uv",
        type: Ln.Attribute,
        descriptor: {
          name: "a_iconMapUV",
          shaderLocation: this.attributeLocation.UV,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 2,
          update: (e) => {
            const n = this.iconService.getIconMap(),
              { texture: r } = e,
              { x: o, y: l } = n[r] || { x: 0, y: 0 };
            return [o, l];
          },
        },
      });
  }
}
const pU = `// #extension GL_OES_standard_derivatives : enable
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

in vec4 v_color;
in vec4 v_stroke;
// dash
in vec4 v_dash_array;
in float v_d_distance_ratio;
in vec2 v_iconMapUV;
in vec4 v_texture_data;

out vec4 outputColor;
#pragma include "picking"

// [animate, duration, interval, trailLength],
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // 虚线部分
      discard;
    };
  }
  float animateSpeed = 0.0; // 运动速度
  float d_distance_ratio = v_texture_data.r; // 当前点位距离占线总长的比例
  if(u_linearDir < 1.0) {
    d_distance_ratio = v_texture_data.a;
  }
  if(u_linearColor == 1.0) { // 使用渐变颜色
    outputColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
    outputColor.a *= v_color.a;
  } else { // 使用 color 方法传入的颜色
     outputColor = v_color;
  }
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_texture_data.g;      // 当前顶点的距离
    float d_texPixelLen = v_texture_data.b;  // 贴图的像素长度，根据地图层级缩放
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_texture_data.a;  // 线图层贴图部分的 v 坐标值

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
     vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor += pattern;
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = pattern;
    }
  } 

  float v = v_texture_data.a;
  float strokeWidth = min(0.5, u_strokeWidth);
  // 绘制 border
  if(strokeWidth > 0.01) {
    float borderOuterWidth = strokeWidth / 2.0;


    if(v >= 1.0 - strokeWidth || v <= strokeWidth) {
      if(v > strokeWidth) { // 外侧
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - strokeWidth))/strokeWidth);
        //  float linear = step(0.0, (v - (1.0 - borderWidth))/borderWidth);
        outputColor.rgb = mix(outputColor.rgb, v_stroke.rgb, linear);
      } else if(v <= strokeWidth) {
        float linear = smoothstep(0.0, 1.0, v/strokeWidth);
        outputColor.rgb = mix(v_stroke.rgb, outputColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      outputColor.a = mix(0.0, outputColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = v_texture_data.a;
  if(blurV < 0.5) {
    outputColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    outputColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  outputColor = filterColor(outputColor);
}
`,
  fU = `#define Animate (0.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_DISTANCE_INDEX) in vec3 a_DistanceAndIndexAndMiter;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec4 a_Normal_Total_Distance;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

out vec4 v_color;
out vec4 v_stroke;
//dash
out vec4 v_dash_array;
out float v_d_distance_ratio;
// texV 线图层 - 贴图部分的 v 坐标（线的宽度方向）
out vec2 v_iconMapUV;
out vec4 v_texture_data;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec2 a_DistanceAndIndex = a_DistanceAndIndexAndMiter.xy;
  float a_Miter = a_DistanceAndIndexAndMiter.z;
  vec3 a_Normal = a_Normal_Total_Distance.xyz;
  float a_Total_Distance = a_Normal_Total_Distance.w;
  //dash输出
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_d_distance_ratio = a_DistanceAndIndex.x / a_Total_Distance;

  // cal style mapping - 数据纹理映射部分的计算
  float d_texPixelLen; // 贴图的像素长度，根据地图层级缩放
  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);

  v_color = a_Color;
  v_color.a *= opacity;
  v_stroke = stroke;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * a_Normal;

  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // 线横向偏移的距离（向两侧偏移的和）
  float linePixelSize = project_pixel(a_Size.x) * 2.0; // 定点位置偏移，按地图等级缩放后的距离 单侧 * 2
  float texV = lineOffsetWidth / linePixelSize; // 线图层贴图部分的 v 坐标值

  v_texture_data = vec4(currentLinePointRatio, lineDistance, d_texPixelLen, texV);
  // 设置数据集的参数

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // 线顶点的高度 - 兼容不存在第三个数值的情况 vertex height
  float lineHeight = a_Size.y; // size 第二个参数代表的高度 [linewidth, lineheight]

  // 兼容 mapbox 在线高度上的效果表现基本一致
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox
    // 保持高度相对不变
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    h *= mapboxZoomScale;
    h += u_raisingHeight * mapboxZoomScale;
    if (u_heightfixed > 0.0) {
      lineHeight *= mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(
    vec4(project_pos.xy + offset, lineHeight + h, 1.0)
  );

  setPickingColor(a_PickingColor);
}
`;
class w7 extends qi {
  constructor(...e) {
    super(...e),
      R(this, "textureEventFlag", !1),
      R(
        this,
        "texture",
        this.createTexture2D({
          data: new Uint8Array([0, 0, 0, 0]),
          width: 1,
          height: 1,
        })
      ),
      R(this, "updateTexture", () => {
        const { createTexture2D: n } = this.rendererService;
        if (
          (this.textures.length === 0 && (this.textures = [this.texture]),
          this.texture)
        ) {
          this.texture.update({ data: this.iconService.getCanvas() }),
            this.layer.render();
          return;
        }
        this.texture = n({
          data: this.iconService.getCanvas(),
          mag: H.NEAREST,
          min: H.NEAREST,
          premultiplyAlpha: !1,
          width: 1024,
          height: this.iconService.canvasHeight || 128,
        });
      });
  }
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      SIZE: 9,
      DISTANCE_INDEX: 10,
      NORMAL: 11,
      UV: 12,
    });
  }
  getCommonUniformsInfo() {
    const {
      sourceColor: e,
      targetColor: n,
      textureBlend: r = "normal",
      lineType: o = "solid",
      dashArray: l = [10, 5, 0, 0],
      lineTexture: a = !1,
      iconStep: h = 100,
      vertexHeightScale: f = 20,
      strokeWidth: v = 0,
      raisingHeight: E = 0,
      heightfixed: x = !1,
      linearDir: T = t6.VERTICAL,
      blur: N = [1, 1, 1, 0],
    } = this.layer.getLayerConfig();
    let I = l;
    if (
      (o !== "dash" && (I = [0, 0, 0, 0]),
      I.length === 2 && I.push(0, 0),
      this.rendererService.getDirty() && this.texture)
    ) {
      var L;
      (L = this.texture) === null || L === void 0 || L.bind();
    }
    const { animateOption: F } = this.layer.getLayerConfig();
    let X = 0,
      G = [0, 0, 0, 0],
      K = [0, 0, 0, 0];
    e && n && ((G = Bi(e)), (K = Bi(n)), (X = 1));
    const Q = {
      u_animate: this.animateOption2Array(F),
      u_dash_array: I,
      u_blur: N,
      u_sourceColor: G,
      u_targetColor: K,
      u_textSize: [1024, this.iconService.canvasHeight || 128],
      u_icon_step: h,
      u_heightfixed: Number(x),
      u_vertexScale: f,
      u_raisingHeight: Number(E),
      u_strokeWidth: v,
      u_textureBlend: r === Nk.NORMAL ? 0 : 1,
      u_line_texture: a ? 1 : 0,
      u_linearDir: T === t6.VERTICAL ? 1 : 0,
      u_linearColor: X,
      u_time: this.layer.getLayerAnimateTime() || 0,
    };
    return this.getUniformsBufferInfo(Q);
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return (
        e.initUniformsBuffer(),
        e.textureEventFlag ||
          ((e.textureEventFlag = !0),
          e.updateTexture(),
          e.iconService.on("imageUpdate", e.updateTexture)),
        e.buildModels()
      );
    })();
  }
  clearModels() {
    var e;
    (e = this.texture) === null || e === void 0 || e.destroy(),
      this.iconService.off("imageUpdate", this.updateTexture);
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      const { depth: n = !1 } = e.layer.getLayerConfig(),
        { frag: r, vert: o, type: l } = e.getShaders();
      return (
        (e.layer.triangulation = N_),
        [
          yield e.layer.buildLayerModel({
            moduleName: "line" + l,
            vertexShader: o,
            fragmentShader: r,
            triangulation: N_,
            defines: e.getDefines(),
            inject: e.getInject(),
            depth: { enable: n },
          }),
        ]
      );
    })();
  }
  getShaders() {
    return { frag: pU, vert: fU, type: "" };
  }
  registerBuiltinAttributes() {
    this.registerPosition64LowAttribute(),
      this.styleAttributeService.registerStyleAttribute({
        name: "distanceAndIndex",
        type: Ln.Attribute,
        descriptor: {
          name: "a_DistanceAndIndexAndMiter",
          shaderLocation: this.attributeLocation.DISTANCE_INDEX,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 3,
          update: (e, n, r, o, l, a) =>
            a === void 0 ? [r[3], 10, r[4]] : [r[3], a, r[4]],
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "size",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Size",
          shaderLocation: this.attributeLocation.SIZE,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 2,
          update: (e) => {
            const { size: n = 1 } = e;
            return Array.isArray(n) ? [n[0], n[1]] : [n, 0];
          },
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "normal_total_distance",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Normal_Total_Distance",
          shaderLocation: this.attributeLocation.NORMAL,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 4,
          update: (e, n, r, o, l) => [...l, r[5]],
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "uv",
        type: Ln.Attribute,
        descriptor: {
          name: "a_iconMapUV",
          shaderLocation: this.attributeLocation.UV,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 2,
          update: (e) => {
            const n = this.iconService.getIconMap(),
              { texture: r } = e,
              { x: o, y: l } = n[r] || { x: 0, y: 0 };
            return [o, l];
          },
        },
      });
  }
}
const mU = `
layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};
in float v_distanceScale;
in vec4 v_color;
//dash
in vec4 v_dash_array;

out vec4 outputColor;
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distanceScale, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // 虚线部分
      discard;
    };
  }
  if(u_linearColor==1.0){
    outputColor = mix(u_sourceColor, u_targetColor, v_distanceScale);
    outputColor.a *= v_color.a; // 全局透明度
  }
  else{
    outputColor = v_color;
  }
}
`,
  gU = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec4 a_SizeDistanceAndTotalDistance;

layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};

#pragma include "projection"
#pragma include "picking"

out vec4 v_color;
out float v_distanceScale;
out vec4 v_dash_array;

void main() {
  //dash输出
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_SizeDistanceAndTotalDistance.a;

  v_color = a_Color;
  v_distanceScale = a_SizeDistanceAndTotalDistance.b / a_SizeDistanceAndTotalDistance.a;
  v_color.a = v_color.a * opacity;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  float h = float(a_Position.z) * u_vertexScale; // 线顶点的高度 - 兼容不存在第三个数值的情况

  float lineHeight = a_SizeDistanceAndTotalDistance.y;
  // 兼容 mapbox 在线高度上的效果表现基本一致
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // 保持高度相对不变
    h *= 2.0 / pow(2.0, 20.0 - u_Zoom);
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
  gl_PointSize = 10.0;

}
`;
class vU extends qi {
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      SIZE: 9,
    });
  }
  getCommonUniformsInfo() {
    const {
      sourceColor: e,
      targetColor: n,
      lineType: r = "solid",
      dashArray: o = [10, 5, 0, 0],
      vertexHeightScale: l = 20,
    } = this.layer.getLayerConfig();
    let a = o;
    r !== "dash" && (a = [0, 0, 0, 0]), a.length === 2 && a.push(0, 0);
    let h = 0,
      f = [0, 0, 0, 0],
      v = [0, 0, 0, 0];
    e && n && ((f = Bi(e)), (v = Bi(n)), (h = 1));
    const E = {
      u_sourceColor: f,
      u_targetColor: v,
      u_dash_array: a,
      u_vertexScale: l,
      u_linearColor: h,
    };
    return this.getUniformsBufferInfo(E);
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return e.buildModels();
    })();
  }
  getShaders() {
    return { frag: mU, vert: gU, type: "lineSimpleNormal" };
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      e.initUniformsBuffer();
      const { frag: n, vert: r, type: o } = e.getShaders();
      return [
        yield e.layer.buildLayerModel({
          moduleName: o,
          vertexShader: r,
          fragmentShader: n,
          triangulation: Pk,
          defines: e.getDefines(),
          inject: e.getInject(),
          primitive: H.LINES,
          depth: { enable: !1 },
          pick: !1,
        }),
      ];
    })();
  }
  registerBuiltinAttributes() {
    this.registerPosition64LowAttribute(),
      this.styleAttributeService.registerStyleAttribute({
        name: "sizeDistanceAndTotalDistance",
        type: Ln.Attribute,
        descriptor: {
          name: "a_SizeDistanceAndTotalDistance",
          shaderLocation: this.attributeLocation.SIZE,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 4,
          update: (e, n, r) => {
            const { size: o = 1 } = e,
              l = Array.isArray(o) ? [o[0], o[1]] : [o, 0];
            return [l[0], l[1], r[3], r[5]];
          },
        },
      });
  }
}
const _U = `#define Animate 0.0
#define LineTexture 1.0

// line texture

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};


in vec2 v_iconMapUV;
in vec4 v_color;
in float v_blur;
in vec4 v_dataset;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // 运动速度
  float d_distance_ratio = v_dataset.r; // 当前点位距离占线总长的比例
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // 使用渐变颜色
    outputColor = mix(u_sourceColor, u_targetColor, v);
  } else { // 使用 color 方法传入的颜色
     outputColor = v_color;
  }

  outputColor.a *= v_color.a; // 全局透明度
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // 当前顶点的距离
    float d_texPixelLen = v_dataset.b;  // 贴图的像素长度，根据地图层级缩放
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  // 线图层贴图部分的 v 坐标值

    // 计算纹理间隔 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // 计算纹理间隔 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // Tip: 判断纹理间隔
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  }


  // blur - AA
  if(v < v_blur) {
    outputColor.a = mix(0.0, outputColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  outputColor = filterColor(outputColor);
}
`,
  yU = `#define Animate 0.0
layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;
layout(location = ATTRIBUTE_LOCATION_DISTANCE_MITER_TOTAL) in vec3 a_Distance_Total_Miter;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};

// texV 线图层 - 贴图部分的 v 坐标（线的宽度方向）
out vec2 v_iconMapUV;
out vec4 v_color;
out float v_blur;
out vec4 v_dataset;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  float a_Distance = a_Distance_Total_Miter.x;
  float a_Miter = a_Distance_Total_Miter.y;
  float a_Total_Distance = a_Distance_Total_Miter.z;

  float d_distance_ratio; // 当前点位距离占线总长的比例
  float d_texPixelLen; // 贴图的像素长度，根据地图层级缩放

  v_iconMapUV = a_iconMapUV;
  if (u_heightfixed < 1.0) {
    // 高度随 zoom 调整
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }

  if (u_animate.x == Animate || u_linearColor == 1.0) {
    d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0) / 2.0;
  // 设置数据集的参数
  v_dataset[0] = d_distance_ratio; // 当前点位距离占线总长的比例
  v_dataset[1] = a_Distance; // 当前顶点的距离
  v_dataset[2] = d_texPixelLen; // 贴图的像素长度，根据地图层级缩放
  v_dataset[3] = miter; // 线图层贴图部分的 v 坐标值 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  float originSize = a_Size.x; // 固定高度
  if (u_heightfixed < 1.0) {
    originSize = project_float_meter(a_Size.x); // 高度随 zoom 调整
  }

  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  // 兼容 mapbox 在线高度上的效果表现基本一致
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox
    // 保持高度相对不变
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    if (u_heightfixed > 0.0) {
      wallHeight *= mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`;
class xU extends qi {
  constructor(...e) {
    super(...e),
      R(this, "texture", void 0),
      R(this, "updateTexture", () => {
        const { createTexture2D: n } = this.rendererService;
        if (this.texture) {
          this.texture.update({ data: this.iconService.getCanvas() }),
            this.layer.render();
          return;
        }
        (this.texture = n({
          data: this.iconService.getCanvas(),
          mag: H.NEAREST,
          min: H.NEAREST,
          premultiplyAlpha: !1,
          width: 1024,
          height: this.iconService.canvasHeight || 128,
        })),
          (this.textures = [this.texture]);
      });
  }
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      SIZE: 9,
      NORMAL: 12,
      UV: 13,
      DISTANCE_MITER_TOTAL: 15,
    });
  }
  getCommonUniformsInfo() {
    const {
        sourceColor: e,
        targetColor: n,
        textureBlend: r = "normal",
        heightfixed: o = !1,
        lineTexture: l = !1,
        iconStep: a = 100,
        iconStepCount: h = 1,
      } = this.layer.getLayerConfig(),
      { animateOption: f } = this.layer.getLayerConfig();
    if (this.rendererService.getDirty()) {
      var v;
      (v = this.texture) === null || v === void 0 || v.bind();
    }
    let E = 0,
      x = [0, 0, 0, 0],
      T = [0, 0, 0, 0];
    e && n && ((x = Bi(e)), (T = Bi(n)), (E = 1));
    const N = {
      u_animate: this.animateOption2Array(f),
      u_sourceColor: x,
      u_targetColor: T,
      u_textSize: [1024, this.iconService.canvasHeight || 128],
      u_icon_step: a,
      u_heightfixed: Number(o),
      u_linearColor: E,
      u_line_texture: l ? 1 : 0,
      u_textureBlend: r === "normal" ? 0 : 1,
      u_iconStepCount: h,
      u_time: this.layer.getLayerAnimateTime() || 0,
    };
    return this.getUniformsBufferInfo(N);
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return (
        e.initUniformsBuffer(),
        e.updateTexture(),
        e.iconService.on("imageUpdate", e.updateTexture),
        e.buildModels()
      );
    })();
  }
  clearModels() {
    var e;
    (e = this.texture) === null || e === void 0 || e.destroy(),
      this.iconService.off("imageUpdate", this.updateTexture);
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      return [
        yield e.layer.buildLayerModel({
          moduleName: "lineWall",
          vertexShader: yU,
          fragmentShader: _U,
          triangulation: N_,
          defines: e.getDefines(),
          inject: e.getInject(),
          depth: { enable: !1 },
          blend: e.getBlend(),
        }),
      ];
    })();
  }
  registerBuiltinAttributes() {
    this.registerPosition64LowAttribute(),
      this.styleAttributeService.registerStyleAttribute({
        name: "size",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Size",
          shaderLocation: this.attributeLocation.SIZE,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 2,
          update: (e) => {
            const { size: n = 1 } = e;
            return Array.isArray(n) ? [n[0], n[1]] : [n, 0];
          },
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "normal",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Normal",
          shaderLocation: this.attributeLocation.NORMAL,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 3,
          update: (e, n, r, o, l) => l,
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "distanceAndTotalAndMiter",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Distance_Total_Miter",
          shaderLocation: this.attributeLocation.DISTANCE_MITER_TOTAL,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 3,
          update: (e, n, r) => [r[3], r[4], r[5]],
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "uv",
        type: Ln.Attribute,
        descriptor: {
          name: "a_iconMapUV",
          shaderLocation: this.attributeLocation.UV,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 2,
          update: (e) => {
            const n = this.iconService.getIconMap(),
              { texture: r } = e,
              { x: o, y: l } = n[r] || { x: 0, y: 0 };
            return [o, l];
          },
        },
      });
  }
}
const bU = {
  arc: Gk,
  arc3d: h6,
  greatcircle: hU,
  wall: xU,
  line: w7,
  simple: vU,
  flowline: lU,
  earthArc3d: h6,
};
class xp extends Vp {
  constructor(...e) {
    super(...e),
      R(this, "type", "LineLayer"),
      R(this, "enableShaderEncodeStyles", [
        "stroke",
        "offsets",
        "opacity",
        "thetaOffset",
      ]),
      R(this, "arrowInsertCount", 0),
      R(this, "defaultSourceConfig", {
        data: [{ lng1: 100, lat1: 30, lng2: 130, lat2: 30 }],
        options: {
          parser: {
            type: "json",
            x: "lng1",
            y: "lat1",
            x1: "lng2",
            y1: "lat2",
          },
        },
      });
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      const n = e.getModelType();
      (e.layerModel = new bU[n](e)), yield e.initLayerModels();
    })();
  }
  getDefaultConfig() {
    const e = this.getModelType();
    return {
      line: {},
      linearline: {},
      simple: {},
      wall: {},
      arc3d: { blend: "additive" },
      arc: { blend: "additive" },
      greatcircle: { blend: "additive" },
      tileLine: {},
      earthArc3d: {},
      flowline: {},
      arrow: {},
    }[e];
  }
  getModelType() {
    var e;
    if (this.layerType) return this.layerType;
    const n = this.styleAttributeService.getLayerStyleAttribute("shape");
    return (
      (n == null || (e = n.scale) === null || e === void 0
        ? void 0
        : e.field) || "line"
    );
  }
  processData(e) {
    if (this.getModelType() !== "simple") return e;
    const n = [];
    return (
      e.map((r) => {
        if (
          Array.isArray(r.coordinates) &&
          Array.isArray(r.coordinates[0]) &&
          Array.isArray(r.coordinates[0][0])
        ) {
          const o = mt({}, r);
          r.coordinates.map((l) => {
            n.push(mt(mt({}, o), {}, { coordinates: l }));
          });
        } else n.push(r);
      }),
      n
    );
  }
}
const EU = `
layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

in vec4 v_color;
in float v_blur;
in float v_innerRadius;

out vec4 outputColor;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  // Tip: 片元到中心点的距离 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: 片元的剪切成圆形
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // 当存在 stroke 且 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      outputColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      outputColor = mix(v_color, stroke, mixR);
    } else {
      outputColor = v_color;
    }
  } else {
    // 当不存在 stroke 或 stroke <= 0.01
    outputColor = v_color;
  }

  outputColor = filterColor(outputColor);
  
  if(u_additive > 0.0) {
    outputColor *= circleClipOpacity;
  } else {
    outputColor.a *= circleClipOpacity;
  }

}
`,
  AU = `
layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;

layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

out vec4 v_color;
out float v_blur;
out float v_innerRadius;

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_blur = 1.0 - max(2.0 / a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);

  vec2 offset = project_pixel(u_offsets);

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;
function g6(t) {
  const e = t.coordinates;
  return { vertices: [...e], indices: [0], size: e.length };
}
class TU extends qi {
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      SIZE: 9,
    });
  }
  getDefaultStyle() {
    return { blend: "additive" };
  }
  getCommonUniformsInfo() {
    const {
        blend: e,
        strokeOpacity: n = 1,
        strokeWidth: r = 0,
        stroke: o = "#fff",
      } = this.layer.getLayerConfig(),
      l = {
        u_stroke_color: Bi(o),
        u_additive: e === "additive" ? 1 : 0,
        u_stroke_opacity: n,
        u_stroke_width: r,
      };
    return this.getUniformsBufferInfo(l);
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return e.buildModels();
    })();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      return (
        (e.layer.triangulation = g6),
        e.initUniformsBuffer(),
        [
          yield e.layer.buildLayerModel({
            moduleName: "pointSimple",
            vertexShader: AU,
            fragmentShader: EU,
            defines: e.getDefines(),
            inject: e.getInject(),
            triangulation: g6,
            depth: { enable: !1 },
            primitive: H.POINTS,
          }),
        ]
      );
    })();
  }
  registerBuiltinAttributes() {
    this.registerPosition64LowAttribute(),
      this.styleAttributeService.registerStyleAttribute({
        name: "size",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Size",
          shaderLocation: this.attributeLocation.SIZE,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 1,
          update: (e) => {
            const { size: n = 1 } = e;
            return Array.isArray(n) ? [n[0]] : [n];
          },
        },
      });
  }
}
const SU = `precision highp float;
in vec4 v_color;

#pragma include "picking"

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // 默认不固定
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};
in float v_lightWeight;
in float v_barLinearZ;
out vec4 outputColor;
void main() {

   outputColor = v_color;

  // 开启透明度渐变
  if(u_opacitylinear > 0.0) {
    outputColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_barLinearZ): v_barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,
  wU = `precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;
layout(location = ATTRIBUTE_LOCATION_POS) in vec3 a_Pos;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // 默认不固定
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};

out vec4 v_color;
out float v_lightWeight;
out float v_barLinearZ;
// 用于将在顶点着色器中计算好的样式值传递给片元


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) +
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - 数据纹理映射部分的计算
  vec3 size = a_Size * a_Position;

  // a_Position.z 是在构建网格的时候传入的标准值 0 - 1，在插值器插值可以获取 0～1 线性渐变的值
  v_barLinearZ =  a_Position.z;

  vec3 offset = size; // 控制圆柱体的大小 - 从标准单位圆柱体进行偏移
  if(u_heightfixed < 1.0) { // 圆柱体不固定高度
    //
  } else {// 圆柱体固定高度 （ 处理 mapbox ）
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r 控制圆柱的生长
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // 圆柱光照效果
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // 取消三元表达式，增强健壮性
    lightWeight = calc_lighting(pos);
  }
  v_lightWeight = lightWeight;
  // 设置圆柱的底色
  if(u_linearColor == 1.0) { // 使用渐变颜色
    v_color = mix(u_sourceColor, u_targetColor, v_barLinearZ);
    v_color.rgb *= lightWeight;
  } else { // 使用 color 方法传入的颜色
     v_color = a_Color;
  }
  v_color.a *= u_opacity;


  // 在地球模式下，将原本垂直于 xy 平面的圆柱调整姿态到适应圆的角度
  //旋转矩阵mx，创建绕x轴旋转矩阵
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//求解旋转角度余弦值
  float xsin = sin(xRadian);//求解旋转角度正弦值
  mat4 mx = mat4(
    1,0,0,0,
    0,xcos,-xsin,0,
    0,xsin,xcos,0,
    0,0,0,1);

  //旋转矩阵my，创建绕y轴旋转矩阵
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//求解旋转角度余弦值
  float ysin = sin(yRadian);//求解旋转角度正弦值
  mat4 my = mat4(
    ycos,0,-ysin,0,
    0,1,0,0,
    ysin,0,ycos,0,
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);


  setPickingColor(a_PickingColor);
}
`,
  { isNumber: CU } = Ka;
let NU = class extends qi {
  constructor(...e) {
    super(...e), R(this, "raiseCount", 0), R(this, "raiseRepeat", 0);
  }
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      SIZE: 9,
      POS: 10,
      NORMAL: 11,
    });
  }
  getCommonUniformsInfo() {
    const {
      animateOption: e = { enable: !1, speed: 0.01, repeat: !1 },
      opacity: n = 1,
      sourceColor: r,
      targetColor: o,
      pickLight: l = !1,
      heightfixed: a = !0,
      opacityLinear: h = { enable: !1, dir: "up" },
      lightEnable: f = !0,
    } = this.layer.getLayerConfig();
    let v = 0,
      E = [0, 0, 0, 0],
      x = [0, 0, 0, 0];
    if (
      (r && o && ((E = Bi(r)), (x = Bi(o)), (v = 1)),
      this.raiseCount < 1 && this.raiseRepeat > 0 && e.enable)
    ) {
      const { speed: I = 0.01 } = e;
      (this.raiseCount += I),
        this.raiseCount >= 1 &&
          (this.raiseRepeat > 1
            ? ((this.raiseCount = 0), this.raiseRepeat--)
            : (this.raiseCount = 1));
    }
    const T = {
      u_sourceColor: E,
      u_targetColor: x,
      u_linearColor: v,
      u_pickLight: Number(l),
      u_heightfixed: Number(a),
      u_r: e.enable && this.raiseRepeat > 0 ? this.raiseCount : 1,
      u_opacity: CU(n) ? n : 1,
      u_opacitylinear: Number(h.enable),
      u_opacitylinear_dir: h.dir === "up" ? 1 : 0,
      u_lightEnable: Number(f),
    };
    return this.getUniformsBufferInfo(T);
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return e.initUniformsBuffer(), e.buildModels();
    })();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      const {
        animateOption: { repeat: n = 1 },
      } = e.layer.getLayerConfig();
      return (
        (e.raiseRepeat = n),
        [
          yield e.layer.buildLayerModel({
            moduleName: "pointEarthExtrude",
            vertexShader: wU,
            fragmentShader: SU,
            triangulation: T7,
            depth: { enable: !0 },
            defines: e.getDefines(),
            inject: e.getInject(),
            cull: { enable: !0, face: H.FRONT },
            blend: e.getBlend(),
          }),
        ]
      );
    })();
  }
  registerBuiltinAttributes() {
    this.styleAttributeService.registerStyleAttribute({
      name: "size",
      type: Ln.Attribute,
      descriptor: {
        name: "a_Size",
        shaderLocation: this.attributeLocation.SIZE,
        buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
        size: 3,
        update: (e) => {
          const { size: n } = e;
          if (n) {
            let r = [];
            return (
              Array.isArray(n) && (r = n.length === 2 ? [n[0], n[0], n[1]] : n),
              Array.isArray(n) || (r = [n, n, n]),
              r
            );
          } else return [2, 2, 2];
        },
      },
    }),
      this.styleAttributeService.registerStyleAttribute({
        name: "normal",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Normal",
          shaderLocation: this.attributeLocation.NORMAL,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 3,
          update: (e, n, r, o, l) => l,
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "pos",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Pos",
          shaderLocation: this.attributeLocation.POS,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 3,
          update: (e) => {
            const n = J0(e.coordinates);
            return E7([n[0], n[1]]);
          },
        },
      });
  }
};
const RU = `in vec4 v_data;
in vec4 v_color;
in float v_radius;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 strokeColor = u_stroke == vec4(0.0) ? v_color : u_stroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(u_stroke_width < 0.01) {
    outputColor = vec4(v_color.rgb, v_color.a * u_opacity);
  } else {
    outputColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor = filterColor(outputColor);
  }
}
`,
  IU = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
out vec4 v_data;
out vec4 v_color;
out float v_radius;

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize 设置拾取大小
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) 是为了兼容地球模式
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1 + vec3(u_offsets,0.0), 1.0);

  setPickingColor(a_PickingColor);
}
`;
let MU = class extends qi {
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      SIZE: 9,
      SHAPE: 10,
      EXTRUDE: 11,
    });
  }
  getCommonUniformsInfo() {
    const {
      strokeOpacity: e = 1,
      strokeWidth: n = 0,
      blend: r,
      blur: o = 0,
    } = this.layer.getLayerConfig();
    this.layer.getLayerConfig();
    const l = {
      u_additive: r === "additive" ? 1 : 0,
      u_stroke_opacity: e,
      u_stroke_width: n,
      u_blur: o,
    };
    return this.getUniformsBufferInfo(l);
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return e.initUniformsBuffer(), e.buildModels();
    })();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      return (
        (e.layer.triangulation = u6),
        [
          yield e.layer.buildLayerModel({
            moduleName: "pointEarthFill",
            vertexShader: IU,
            fragmentShader: RU,
            triangulation: u6,
            defines: e.getDefines(),
            inject: e.getInject(),
            depth: { enable: !0 },
            blend: e.getBlend(),
          }),
        ]
      );
    })();
  }
  animateOption2Array(e) {
    return [e.enable ? 0 : 1, e.speed || 1, e.rings || 3, 0];
  }
  registerBuiltinAttributes() {
    this.styleAttributeService.registerStyleAttribute({
      name: "extrude",
      type: Ln.Attribute,
      descriptor: {
        name: "a_Extrude",
        shaderLocation: this.attributeLocation.EXTRUDE,
        buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
        size: 3,
        update: (e, n, r, o) => {
          const [l, a, h] = r,
            f = Rs(0, 0, 1),
            v = Rs(l, 0, h),
            E = l >= 0 ? T5(f, v) : Math.PI * 2 - T5(f, v),
            x = Math.PI * 2 - Math.asin(a / 100),
            T = B1();
          fv(T, T, E), zp(T, T, x);
          const N = Rs(1, 1, 0);
          Pm(N, N, T), Xf(N, N);
          const I = Rs(-1, 1, 0);
          Pm(I, I, T), Xf(I, I);
          const L = Rs(-1, -1, 0);
          Pm(L, L, T), Xf(L, L);
          const F = Rs(1, -1, 0);
          Pm(F, F, T), Xf(F, F);
          const X = [...N, ...I, ...L, ...F],
            G = (o % 4) * 3;
          return [X[G], X[G + 1], X[G + 2]];
        },
      },
    }),
      this.styleAttributeService.registerStyleAttribute({
        name: "size",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Size",
          shaderLocation: this.attributeLocation.SIZE,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 1,
          update: (e) => {
            const { size: n = 5 } = e;
            return Array.isArray(n) ? [n[0]] : [n];
          },
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "shape",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Shape",
          shaderLocation: this.attributeLocation.SHAPE,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 1,
          update: (e) => {
            const { shape: n = 2 } = e;
            return [this.layer.getLayerConfig().shape2d.indexOf(n)];
          },
        },
      });
  }
};
const PU = `
in vec4 v_color;
in float v_lightWeight;
out vec4 outputColor;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {

  outputColor = v_color;
  // 开启透明度渐变
  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,
  OU = `#define pi (3.1415926535)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec4 a_Extrude;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};
out vec4 v_color;
out float v_lightWeight;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if (x > 0.0 && z > 0.0) {
    return atan(x / z);
  } else if (x > 0.0 && z <= 0.0) {
    return atan(-z / x) + pi / 2.0;
  } else if (x <= 0.0 && z <= 0.0) {
    return pi + atan(x / z); //atan(x/z) +
  } else {
    return atan(z / -x) + pi * 3.0 / 2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y / r);
}

void main() {
  vec3 size = a_Size * a_Position;

  vec3 offset = size; // 控制圆柱体的大小 - 从标准单位圆柱体进行偏移

  if (u_heightfixed < 1.0) {
    // 圆柱体不固定高度
  } else {
    // 圆柱体固定高度 （ 处理 mapbox ）
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      offset *= 4.0 / pow(2.0, 21.0 - u_Zoom);
    }
  }

  vec2 positions = a_Extrude.xy;
  vec2 positions64Low = a_Extrude.zw;
  vec4 project_pos = project_position(vec4(positions, 0.0, 1.0), positions64Low);

  // u_r 控制圆柱的生长
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // // 圆柱光照效果
  float lightWeight = 1.0;

  if (u_lightEnable > 0.0) {
    // 取消三元表达式，增强健壮性
    lightWeight = calc_lighting(pos);
  }

  v_lightWeight = lightWeight;

  v_color = a_Color;

  // 设置圆柱的底色
  if (u_linearColor == 1.0) {
    // 使用渐变颜色
    v_color = mix(u_sourceColor, u_targetColor, a_Position.z);
    v_color.a = v_color.a * opacity;
  } else {
    v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);
  }

  if (u_opacitylinear > 0.0) {
    v_color.a *= u_opacitylinear_dir > 0.0 ? 1.0 - a_Position.z : a_Position.z;
  }

  gl_Position = project_common_position_to_clipspace(pos);

  setPickingColor(a_PickingColor);
}
`;
let C7 = class extends qi {
  constructor(...e) {
    super(...e), R(this, "raiseCount", 0), R(this, "raiseRepeat", 0);
  }
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      SIZE: 9,
      EXTRUDE: 10,
      NORMAL: 11,
    });
  }
  getCommonUniformsInfo() {
    const {
      animateOption: e = { enable: !1, speed: 0.01, repeat: !1 },
      sourceColor: n,
      targetColor: r,
      pickLight: o = !1,
      heightfixed: l = !1,
      opacityLinear: a = { enable: !1, dir: "up" },
      lightEnable: h = !0,
    } = this.layer.getLayerConfig();
    let f = 0,
      v = [0, 0, 0, 0],
      E = [0, 0, 0, 0];
    if (
      (n && r && ((v = Bi(n)), (E = Bi(r)), (f = 1)),
      this.raiseCount < 1 && this.raiseRepeat > 0 && e.enable)
    ) {
      const { speed: N = 0.01 } = e;
      (this.raiseCount += N),
        this.raiseCount >= 1 &&
          (this.raiseRepeat > 1
            ? ((this.raiseCount = 0), this.raiseRepeat--)
            : (this.raiseCount = 1));
    }
    const x = {
      u_pickLight: Number(o),
      u_heightfixed: Number(l),
      u_r: e.enable && this.raiseRepeat > 0 ? this.raiseCount : 1,
      u_linearColor: f,
      u_sourceColor: v,
      u_targetColor: E,
      u_opacitylinear: Number(a.enable),
      u_opacitylinear_dir: a.dir === "up" ? 1 : 0,
      u_lightEnable: Number(h),
    };
    return this.getUniformsBufferInfo(x);
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return e.buildModels();
    })();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      const {
        depth: n = !0,
        animateOption: { repeat: r = 1 },
      } = e.layer.getLayerConfig();
      return (
        (e.raiseRepeat = r),
        e.initUniformsBuffer(),
        [
          yield e.layer.buildLayerModel({
            moduleName: "pointExtrude",
            vertexShader: OU,
            fragmentShader: PU,
            triangulation: T7,
            defines: e.getDefines(),
            inject: e.getInject(),
            cull: { enable: !0, face: H.FRONT },
            depth: { enable: n },
          }),
        ]
      );
    })();
  }
  registerBuiltinAttributes() {
    this.styleAttributeService.registerStyleAttribute({
      name: "size",
      type: Ln.Attribute,
      descriptor: {
        name: "a_Size",
        shaderLocation: this.attributeLocation.SIZE,
        buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
        size: 3,
        update: (e) => {
          const { size: n } = e;
          if (n) {
            let r = [];
            return (
              Array.isArray(n) && (r = n.length === 2 ? [n[0], n[0], n[1]] : n),
              Array.isArray(n) || (r = [n, n, n]),
              r
            );
          } else return [2, 2, 2];
        },
      },
    }),
      this.styleAttributeService.registerStyleAttribute({
        name: "normal",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Normal",
          shaderLocation: this.attributeLocation.NORMAL,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 3,
          update: (e, n, r, o, l) => l,
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "extrude",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Extrude",
          shaderLocation: this.attributeLocation.EXTRUDE,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 4,
          update: (e) => {
            const n = J0(e.coordinates);
            return [n[0], n[1], _o(n[0]), _o(n[1])];
          },
        },
      });
  }
};
const LU = `
layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

in vec4 v_color;
in vec4 v_stroke;
in vec4 v_data;
in float v_radius;

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));
  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  if(u_stroke_width < 0.01) {
    outputColor = v_color;
  } else {
    outputColor = mix(v_color, v_stroke * u_stroke_opacity, color_t);
  }
  float intensity = 1.0;
  if(u_time!=-1.0){
    //wave相关逻辑
    float d = length(v_data.xy);
    if(d > 0.5) {
      discard;
    }
    intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor *= intensity;//wave
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor.a *= intensity;//wave 
    outputColor = filterColor(outputColor);
  }
   // 作为 mask 模板时需要丢弃透明的像素
  if(outputColor.a < 0.01) {
    discard;
  } 
}
`,
  DU = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

out vec4 v_color;
out vec4 v_stroke;
out vec4 v_data;
out float v_radius;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // 透明度计算
   v_stroke = stroke;
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize 设置拾取大小
  *  u_meter2coord 在等面积大小的时候设置单位
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;



  // unpack color(vec2)
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur_height_fixed.x);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + u_offsets);

  offset = project_pixel(offset);
  offset = rotate_matrix(offset,rotation);

  // TODP: /abs(extrude.x) 是为了兼容地球模式
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_blur_height_fixed.y;

  if(u_blur_height_fixed.z < 1.0) { // false
    raisingHeight = project_pixel(u_blur_height_fixed.y);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_blur_height_fixed.y * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`;
let N7 = class extends qi {
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      SIZE: 9,
      SHAPE: 10,
      EXTRUDE: 11,
    });
  }
  getCommonUniformsInfo() {
    const {
      strokeOpacity: e = 1,
      strokeWidth: n = 0,
      blend: r,
      blur: o = 0,
      raisingHeight: l = 0,
      heightfixed: a = !1,
      unit: h = "pixel",
    } = this.layer.getLayerConfig();
    let f = this.getAnimateUniforms().u_time;
    isNaN(f) && (f = -1);
    const v = {
      u_blur_height_fixed: [o, Number(l), Number(a)],
      u_stroke_width: n,
      u_additive: r === "additive" ? 1 : 0,
      u_stroke_opacity: e,
      u_size_unit: B3[h],
      u_time: f,
      u_animate: this.getAnimateUniforms().u_animate,
    };
    return this.getUniformsBufferInfo(v);
  }
  getAnimateUniforms() {
    const { animateOption: e = { enable: !1 } } = this.layer.getLayerConfig();
    return {
      u_animate: this.animateOption2Array(e),
      u_time: this.layer.getLayerAnimateTime(),
    };
  }
  getAttribute() {
    return this.styleAttributeService.createAttributesAndIndices(
      this.layer.getEncodedData(),
      Q0
    );
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return e.buildModels();
    })();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      const { frag: n, vert: r, type: o } = e.getShaders();
      return (
        (e.layer.triangulation = Q0),
        e.initUniformsBuffer(),
        [
          yield e.layer.buildLayerModel({
            moduleName: o,
            vertexShader: r,
            fragmentShader: n,
            defines: e.getDefines(),
            inject: e.getInject(),
            triangulation: Q0,
            depth: { enable: !1 },
          }),
        ]
      );
    })();
  }
  getShaders() {
    return { frag: LU, vert: DU, type: "pointFill" };
  }
  animateOption2Array(e) {
    return [e.enable ? 0 : 1, e.speed || 1, e.rings || 3, 0];
  }
  registerBuiltinAttributes() {
    const e = this.layer.getLayerConfig().shape2d;
    this.registerPosition64LowAttribute(),
      this.styleAttributeService.registerStyleAttribute({
        name: "extrude",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Extrude",
          shaderLocation: this.attributeLocation.EXTRUDE,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 3,
          update: (n, r, o, l) => {
            const a = [1, 1, 0, -1, 1, 0, -1, -1, 0, 1, -1, 0],
              h = (l % 4) * 3;
            return [a[h], a[h + 1], a[h + 2]];
          },
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "size",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Size",
          shaderLocation: this.attributeLocation.SIZE,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 1,
          update: (n) => {
            const { size: r = 5 } = n;
            return Array.isArray(r) ? [r[0]] : [r];
          },
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "shape",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Shape",
          shaderLocation: this.attributeLocation.SHAPE,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 1,
          update: (n) => {
            const { shape: r = 2 } = n;
            return [e.indexOf(r)];
          },
        },
      });
  }
};
const BU = `in vec2 v_uv;// 本身的 uv 坐标
in vec2 v_Iconuv;
in float v_opacity;
out vec4 outputColor;

uniform sampler2D u_texture;
layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  outputColor = texture(SAMPLER_2D(u_texture), pos);
  outputColor.a *= v_opacity;
  outputColor = filterColor(outputColor);
}
`,
  FU = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed;
  float u_raisingHeight;
  float u_size_unit;
};

out vec2 v_uv;
out vec2 v_Iconuv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  vec3 extrude = a_Extrude;
  v_uv = (a_Extrude.xy + 1.0) / 2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;
  v_opacity = opacity;
  float newSize = a_Size;
  if (u_size_unit == 1.0) {
    newSize = newSize * u_PixelsPerMeter.z;
  }

  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = extrude.xy * newSize + offsets;

  offset = rotate_matrix(offset, rotation);

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`;
class kU extends qi {
  constructor(...e) {
    super(...e),
      R(this, "meter2coord", 1),
      R(this, "texture", void 0),
      R(this, "isMeter", !1),
      R(this, "radian", 0),
      R(this, "updateTexture", () => {
        const { createTexture2D: n } = this.rendererService;
        if (this.texture) {
          this.texture.update({
            data: this.iconService.getCanvas(),
            mag: "linear",
            min: "linear mipmap nearest",
            mipmap: !0,
          }),
            this.layerService.throttleRenderLayers();
          return;
        }
        (this.texture = n({
          data: this.iconService.getCanvas(),
          mag: H.LINEAR,
          min: H.LINEAR_MIPMAP_LINEAR,
          premultiplyAlpha: !1,
          width: 1024,
          height: this.iconService.canvasHeight || 128,
          mipmap: !0,
        })),
          (this.textures = [this.texture]);
      });
  }
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      SIZE: 9,
      EXTRUDE: 10,
      UV: 11,
    });
  }
  getCommonUniformsInfo() {
    const {
      raisingHeight: e = 0,
      heightfixed: n = !1,
      unit: r = "pixel",
    } = this.layer.getLayerConfig();
    if (this.rendererService.getDirty()) {
      var o;
      (o = this.texture) === null || o === void 0 || o.bind();
    }
    const l = {
      u_textSize: [1024, this.iconService.canvasHeight || 128],
      u_heightfixed: Number(n),
      u_raisingHeight: Number(e),
      u_size_unit: B3[r],
    };
    return this.getUniformsBufferInfo(l);
  }
  getAttribute() {
    return this.styleAttributeService.createAttributesAndIndices(
      this.layer.getEncodedData(),
      Q0
    );
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return (
        e.iconService.on("imageUpdate", e.updateTexture),
        e.updateTexture(),
        e.buildModels()
      );
    })();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      return (
        e.initUniformsBuffer(),
        [
          yield e.layer.buildLayerModel({
            moduleName: "pointFillImage",
            vertexShader: FU,
            fragmentShader: BU,
            triangulation: Q0,
            depth: { enable: !1 },
            defines: e.getDefines(),
            inject: e.getInject(),
            cull: { enable: !0, face: H.FRONT },
          }),
        ]
      );
    })();
  }
  clearModels() {
    var e;
    this.iconService.off("imageUpdate", this.updateTexture),
      (e = this.texture) === null || e === void 0 || e.destroy();
  }
  registerBuiltinAttributes() {
    this.registerPosition64LowAttribute(),
      this.styleAttributeService.registerStyleAttribute({
        name: "uv",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Uv",
          shaderLocation: this.attributeLocation.UV,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 2,
          update: (e) => {
            const n = this.iconService.getIconMap(),
              { shape: r } = e,
              { x: o, y: l } = n[r] || { x: -64, y: -64 };
            return [o, l];
          },
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "extrude",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Extrude",
          shaderLocation: this.attributeLocation.EXTRUDE,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 3,
          update: (e, n, r, o) => {
            const l = [1, 1, 0, -1, 1, 0, -1, -1, 0, 1, -1, 0],
              a = (o % 4) * 3;
            return [l[a], l[a + 1], l[a + 2]];
          },
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "size",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Size",
          shaderLocation: this.attributeLocation.SIZE,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 1,
          update: (e) => {
            const { size: n = 5 } = e;
            return Array.isArray(n) ? [n[0]] : [n];
          },
        },
      });
  }
}
const UU = `layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

uniform sampler2D u_texture;

in vec4 v_color;
in vec2 v_uv;
in float v_opacity;

#pragma include "picking"

out vec4 outputColor;

void main(){
  vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
  vec4 textureColor;

  // Y = 0.299R + 0.587G + 0.114B // 亮度提取
  
  textureColor = texture(SAMPLER_2D(u_texture), pos);

  // Tip: 去除边缘部分 mipmap 导致的混合变暗
  float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
  if(fragmengTocenter >= 0.5) {
        float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
        textureColor.a *= luma;
  }
  
  if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
        outputColor= textureColor;
  }else {
        outputColor= step(0.01, textureColor.z) * v_color;
  }
  outputColor.a *= v_opacity;
  if (outputColor.a < 0.01) {
      discard;
  }
  outputColor = filterColor(outputColor);
}
`,
  zU = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

out vec4 v_color;
out vec2 v_uv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - 数据纹理映射部分的计算
  v_color = a_Color;
  v_opacity = opacity;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);

  vec2 offset = project_pixel(offsets);

  float raisingHeight = u_raisingHeight;
  if (u_heightfixed < 1.0) {
    // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;
class R7 extends qi {
  constructor(...e) {
    super(...e),
      R(this, "texture", void 0),
      R(this, "updateTexture", () => {
        const { createTexture2D: n } = this.rendererService;
        if (this.texture) {
          this.texture.update({
            data: this.iconService.getCanvas(),
            mag: "linear",
            min: "linear mipmap nearest",
            mipmap: !0,
          }),
            setTimeout(() => {
              this.layerService.throttleRenderLayers();
            });
          return;
        }
        this.texture = n({
          data: this.iconService.getCanvas(),
          mag: H.LINEAR,
          min: H.LINEAR_MIPMAP_LINEAR,
          premultiplyAlpha: !1,
          width: 1024,
          height: this.iconService.canvasHeight || 128,
          mipmap: !0,
        });
      });
  }
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      SIZE: 9,
      UV: 10,
    });
  }
  getUninforms() {
    if (this.rendererService.getDirty()) {
      var e;
      (e = this.texture) === null || e === void 0 || e.bind();
    }
    const n = this.getCommonUniformsInfo(),
      r = this.getUniformsBufferInfo(this.getStyleAttribute());
    return (
      this.updateStyleUnifoms(), mt(mt({}, n.uniformsOption), r.uniformsOption)
    );
  }
  getCommonUniformsInfo() {
    const { raisingHeight: e = 0, heightfixed: n = !1 } =
        this.layer.getLayerConfig(),
      r = {
        u_textSize: [1024, this.iconService.canvasHeight || 128],
        u_raisingHeight: Number(e),
        u_heightfixed: Number(n),
        u_texture: this.texture,
      };
    return (this.textures = [this.texture]), this.getUniformsBufferInfo(r);
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return (
        e.iconService.on("imageUpdate", e.updateTexture),
        e.updateTexture(),
        e.buildModels()
      );
    })();
  }
  clearModels() {
    var e;
    (e = this.texture) === null || e === void 0 || e.destroy(),
      this.iconService.off("imageUpdate", this.updateTexture);
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      return (
        e.initUniformsBuffer(),
        [
          yield e.layer.buildLayerModel({
            moduleName: "pointImage",
            vertexShader: zU,
            fragmentShader: UU,
            triangulation: Mk,
            defines: e.getDefines(),
            inject: e.getInject(),
            depth: { enable: !1 },
            primitive: H.POINTS,
          }),
        ]
      );
    })();
  }
  registerBuiltinAttributes() {
    this.registerPosition64LowAttribute(),
      this.styleAttributeService.registerStyleAttribute({
        name: "size",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Size",
          shaderLocation: this.attributeLocation.SIZE,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 1,
          update: (e) => {
            const { size: n = 5 } = e;
            return Array.isArray(n) ? [n[0]] : [n];
          },
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "uv",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Uv",
          shaderLocation: this.attributeLocation.UV,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 2,
          update: (e) => {
            const n = this.iconService.getIconMap(),
              { shape: r } = e,
              { x: o, y: l } = n[r] || { x: -64, y: -64 };
            return [o, l];
          },
        },
      });
  }
}
const VU = `in vec4 v_color;
out vec4 outputColor;
void main() {
  outputColor = v_color;
}`,
  HU = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;

layout(std140) uniform u_Common {
  float u_size_scale;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(project_pos);

  gl_PointSize = a_Size * u_size_scale * 2.0 * u_DevicePixelRatio;
}
`;
function v6(t) {
  const e = t.coordinates;
  return { vertices: [...e], indices: [0], size: e.length };
}
class I7 extends qi {
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      SIZE: 9,
    });
  }
  getDefaultStyle() {
    return { blend: "additive" };
  }
  getCommonUniformsInfo() {
    const e = { u_size_scale: 0.5 };
    return this.getUniformsBufferInfo(e);
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return e.buildModels();
    })();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      return (
        (e.layer.triangulation = v6),
        e.initUniformsBuffer(),
        [
          yield e.layer.buildLayerModel({
            moduleName: "pointNormal",
            vertexShader: HU,
            fragmentShader: VU,
            triangulation: v6,
            defines: e.getDefines(),
            inject: e.getInject(),
            depth: { enable: !1 },
            primitive: H.POINTS,
            pick: !1,
          }),
        ]
      );
    })();
  }
  clearModels() {}
  registerBuiltinAttributes() {
    this.registerPosition64LowAttribute(),
      this.styleAttributeService.registerStyleAttribute({
        name: "size",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Size",
          shaderLocation: this.attributeLocation.SIZE,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 1,
          update: (e) => {
            const { size: n = 1 } = e;
            return Array.isArray(n) ? [n[0]] : [n];
          },
        },
      });
  }
}
const jU = `
layout(std140) uniform commonUniorm{
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};
in vec4 v_data;
in vec4 v_color;
in float v_radius;
in vec2 v_extrude;
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  outputColor = vec4(v_color.rgb, v_color.a);

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
  } else {
    outputColor.a *= opacity_t;
  }

  if(outputColor.a > 0.0) {
    outputColor = filterColor(outputColor);
  }

  vec2 extrude =  v_extrude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  outputColor.a *= radar_v;
}
`,
  WU = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniorm {
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};

out vec4 v_data;
out vec4 v_color;
out float v_radius;
out vec2 v_extrude;

#pragma include "projection"
#pragma include "picking"

void main() {
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2(
    cos(time), sin(time),
    -sin(time), cos(time)
  );
  v_extrude = rotateMatrix * a_Extrude.xy;

  v_color = a_Color;
  v_color.a *= opacity;

  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  if(u_size_unit == 1.) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  v_radius = newSize;

  vec2 offset = (a_Extrude.xy * (newSize));

  offset = project_pixel(offset);

  v_data = vec4(a_Extrude.x, a_Extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  setPickingColor(a_PickingColor);
}
`;
class XU extends qi {
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      SIZE: 9,
      EXTRUDE: 10,
    });
  }
  getCommonUniformsInfo() {
    const {
        blend: e,
        speed: n = 1,
        unit: r = "pixel",
      } = this.layer.getLayerConfig(),
      o = {
        u_additive: e === "additive" ? 1 : 0,
        u_size_unit: B3[r],
        u_speed: n,
        u_time: this.layer.getLayerAnimateTime(),
      };
    return this.getUniformsBufferInfo(o);
  }
  getAnimateUniforms() {
    return {};
  }
  getAttribute() {
    return this.styleAttributeService.createAttributesAndIndices(
      this.layer.getEncodedData(),
      Q0
    );
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return e.buildModels();
    })();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      return (
        e.initUniformsBuffer(),
        [
          yield e.layer.buildLayerModel({
            moduleName: "pointRadar",
            vertexShader: WU,
            fragmentShader: jU,
            triangulation: Q0,
            defines: e.getDefines(),
            inject: e.getInject(),
            depth: { enable: !1 },
          }),
        ]
      );
    })();
  }
  animateOption2Array(e) {
    return [e.enable ? 0 : 1, e.speed || 1, e.rings || 3, 0];
  }
  registerBuiltinAttributes() {
    this.registerPosition64LowAttribute(),
      this.styleAttributeService.registerStyleAttribute({
        name: "extrude",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Extrude",
          shaderLocation: this.attributeLocation.EXTRUDE,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 3,
          update: (e, n, r, o) => {
            const l = [1, 1, 0, -1, 1, 0, -1, -1, 0, 1, -1, 0],
              a = (o % 4) * 3;
            return [l[a], l[a + 1], l[a + 2]];
          },
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "size",
        type: Ln.Attribute,
        descriptor: {
          shaderLocation: this.attributeLocation.SIZE,
          name: "a_Size",
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 1,
          update: (e) => {
            const { size: n = 5 } = e;
            return Array.isArray(n) ? [n[0]] : [n];
          },
        },
      });
  }
}
class GU {
  constructor(e, n, r) {
    R(this, "boxCells", []),
      R(this, "xCellCount", void 0),
      R(this, "yCellCount", void 0),
      R(this, "boxKeys", void 0),
      R(this, "bboxes", void 0),
      R(this, "width", void 0),
      R(this, "height", void 0),
      R(this, "xScale", void 0),
      R(this, "yScale", void 0),
      R(this, "boxUid", void 0);
    const o = this.boxCells;
    (this.xCellCount = Math.ceil(e / r)), (this.yCellCount = Math.ceil(n / r));
    for (let l = 0; l < this.xCellCount * this.yCellCount; l++) o.push([]);
    (this.boxKeys = []),
      (this.bboxes = []),
      (this.width = e),
      (this.height = n),
      (this.xScale = this.xCellCount / e),
      (this.yScale = this.yCellCount / n),
      (this.boxUid = 0);
  }
  insert(e, n, r, o, l) {
    this.forEachCell(n, r, o, l, this.insertBoxCell, this.boxUid++),
      this.boxKeys.push(e),
      this.bboxes.push(n),
      this.bboxes.push(r),
      this.bboxes.push(o),
      this.bboxes.push(l);
  }
  query(e, n, r, o, l) {
    return this.queryHitTest(e, n, r, o, !1, l);
  }
  hitTest(e, n, r, o, l) {
    return this.queryHitTest(e, n, r, o, !0, l);
  }
  insertBoxCell(e, n, r, o, l, a) {
    this.boxCells[l].push(a);
  }
  queryHitTest(e, n, r, o, l, a) {
    if (r < 0 || e > this.width || o < 0 || n > this.height) return l ? !1 : [];
    const h = [];
    if (e <= 0 && n <= 0 && this.width <= r && this.height <= o) {
      if (l) return !0;
      for (let v = 0; v < this.boxKeys.length; v++)
        h.push({
          key: this.boxKeys[v],
          x1: this.bboxes[v * 4],
          y1: this.bboxes[v * 4 + 1],
          x2: this.bboxes[v * 4 + 2],
          y2: this.bboxes[v * 4 + 3],
        });
      return a ? h.filter(a) : h;
    }
    const f = { hitTest: l, seenUids: { box: {}, circle: {} } };
    return (
      this.forEachCell(e, n, r, o, this.queryCell, h, f, a),
      l ? h.length > 0 : h
    );
  }
  queryCell(e, n, r, o, l, a, h, f) {
    const v = h.seenUids,
      E = this.boxCells[l];
    if (E !== null) {
      const x = this.bboxes;
      for (const T of E)
        if (!v.box[T]) {
          v.box[T] = !0;
          const N = T * 4;
          if (
            e <= x[N + 2] &&
            n <= x[N + 3] &&
            r >= x[N + 0] &&
            o >= x[N + 1] &&
            (!f || f(this.boxKeys[T]))
          ) {
            if (h.hitTest) return a.push(!0), !0;
            a.push({
              key: this.boxKeys[T],
              x1: x[N],
              y1: x[N + 1],
              x2: x[N + 2],
              y2: x[N + 3],
            });
          }
        }
    }
    return !1;
  }
  forEachCell(e, n, r, o, l, a, h, f) {
    const v = this.convertToXCellCoord(e),
      E = this.convertToYCellCoord(n),
      x = this.convertToXCellCoord(r),
      T = this.convertToYCellCoord(o);
    for (let N = v; N <= x; N++)
      for (let I = E; I <= T; I++) {
        const L = this.xCellCount * I + N;
        if (l.call(this, e, n, r, o, L, a, h, f)) return;
      }
  }
  convertToXCellCoord(e) {
    return Math.max(
      0,
      Math.min(this.xCellCount - 1, Math.floor(e * this.xScale))
    );
  }
  convertToYCellCoord(e) {
    return Math.max(
      0,
      Math.min(this.yCellCount - 1, Math.floor(e * this.yScale))
    );
  }
}
class ZU {
  constructor(e, n) {
    R(this, "width", void 0),
      R(this, "height", void 0),
      R(this, "grid", void 0),
      R(this, "viewportPadding", 100),
      R(this, "screenRightBoundary", void 0),
      R(this, "screenBottomBoundary", void 0),
      R(this, "gridRightBoundary", void 0),
      R(this, "gridBottomBoundary", void 0),
      (this.width = e),
      (this.height = n),
      (this.viewportPadding = Math.max(e, n)),
      (this.grid = new GU(
        e + this.viewportPadding,
        n + this.viewportPadding,
        25
      )),
      (this.screenRightBoundary = e + this.viewportPadding),
      (this.screenBottomBoundary = n + this.viewportPadding),
      (this.gridRightBoundary = e + 2 * this.viewportPadding),
      (this.gridBottomBoundary = n + 2 * this.viewportPadding);
  }
  placeCollisionBox(e) {
    const n = e.x1 + e.anchorPointX + this.viewportPadding,
      r = e.y1 + e.anchorPointY + this.viewportPadding,
      o = e.x2 + e.anchorPointX + this.viewportPadding,
      l = e.y2 + e.anchorPointY + this.viewportPadding;
    return !this.isInsideGrid(n, r, o, l) || this.grid.hitTest(n, r, o, l)
      ? { box: [] }
      : { box: [n, r, o, l] };
  }
  insertCollisionBox(e, n) {
    const r = { featureIndex: n };
    this.grid.insert(r, e[0], e[1], e[2], e[3]);
  }
  project(e, n, r) {
    const o = pM(n, r, 0, 1),
      l = n8(),
      a = sM(...e);
    return (
      Gd(l, o, a),
      {
        x: ((l[0] / l[3] + 1) / 2) * this.width + this.viewportPadding,
        y: ((-l[1] / l[3] + 1) / 2) * this.height + this.viewportPadding,
      }
    );
  }
  isInsideGrid(e, n, r, o) {
    return (
      r >= 0 &&
      e < this.gridRightBoundary &&
      o >= 0 &&
      n < this.gridBottomBoundary
    );
  }
}
function M7(t) {
  let e = 0.5,
    n = 0.5;
  switch (t) {
    case "right":
    case "top-right":
    case "bottom-right":
      e = 1;
      break;
    case "left":
    case "top-left":
    case "bottom-left":
      e = 0;
      break;
    default:
      e = 0.5;
  }
  switch (t) {
    case "bottom":
    case "bottom-right":
    case "bottom-left":
      n = 1;
      break;
    case "top":
    case "top-right":
    case "top-left":
      n = 0;
      break;
    default:
      n = 0.5;
  }
  return { horizontalAlign: e, verticalAlign: n };
}
function P7(t, e, n, r, o, l, a) {
  const h = (e - n) * o,
    f = (-r * a + 0.5) * l;
  for (const v of t) (v.x += h), (v.y += f);
}
function YU(t, e, n, r, o, l, a) {
  let f = 0,
    v = -8,
    E = 0;
  const x = t.positionedGlyphs,
    T = 0,
    N = x.length;
  n.forEach((X) => {
    if (
      (X.split("").forEach((G) => {
        const K = e[G];
        K &&
          (x.push({
            glyph: G,
            x: f,
            y: v + 0,
            vertical: !1,
            scale: 1,
            metrics: K,
          }),
          (f += K.advance + a));
      }),
      x.length !== N)
    ) {
      const G = f - a;
      (E = Math.max(G, E)), x.length - 1;
    }
    (f = 0), (v -= r + 5);
  });
  const { horizontalAlign: I, verticalAlign: L } = M7(o);
  P7(x, T, I, L, E, r, n.length);
  const F = v - -8;
  (t.top += -L * F),
    (t.bottom = t.top - F),
    (t.left += -I * E),
    (t.right = t.left + E);
}
function qU(t, e, n, r, o, l, a) {
  let f = 0,
    v = -8,
    E = 0;
  const x = t.positionedGlyphs,
    T = 0,
    N = x.length;
  n.forEach((X) => {
    const G = e[X];
    if (
      (G &&
        (x.push({
          glyph: X,
          x: G.advance / 2,
          y: v + 0,
          vertical: !1,
          scale: 1,
          metrics: G,
        }),
        (f += G.advance + a)),
      x.length !== N)
    ) {
      const Q = f - a;
      (E = Math.max(Q, E)), x.length - 1;
    }
    (f = 0), (v -= r + 5);
  });
  const { horizontalAlign: I, verticalAlign: L } = M7(o);
  P7(x, T, I, L, E, r, n.length);
  const F = v - -8;
  (t.top += -L * F),
    (t.bottom = t.top - F),
    (t.left += -I * E),
    (t.right = t.left + E);
}
function $U(t, e, n, r, o, l, a = [0, 0], h) {
  const f = t.split(`
`),
    v = [],
    E = {
      positionedGlyphs: v,
      top: a[1],
      bottom: a[1],
      left: a[0],
      right: a[0],
      lineCount: f.length,
      text: t,
    };
  return (
    h ? qU(E, e, f, n, r, o, l) : YU(E, e, f, n, r, o, l), v.length ? E : !1
  );
}
function KU(t, e = [0, 0], n) {
  const { positionedGlyphs: r = [] } = t,
    o = [];
  for (const l of r) {
    const a = l.metrics,
      h = 4,
      f = (a.advance * l.scale) / 2,
      v = [0, 0],
      E = [l.x + f + e[0], l.y + e[1]],
      x = (0 - h) * l.scale - f + E[0],
      T = (0 - h) * l.scale + E[1],
      N = x + a.width * l.scale,
      I = T + a.height * l.scale,
      L = { x, y: T },
      F = { x: N, y: T },
      X = { x, y: I },
      G = { x: N, y: I };
    o.push({ tl: L, tr: F, bl: X, br: G, tex: a, glyphOffset: v });
  }
  return o;
}
const _6 = `#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0

uniform sampler2D u_sdf_map;
layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

in vec2 v_uv;
in float v_gamma_scale;
in vec4 v_color;
in vec4 v_stroke_color;
in float v_fontScale;

out vec4 outputColor;

#pragma include "picking"
void main() {
  // get style data mapping

  // get sdf from atlas
  float dist = texture(SAMPLER_2D(u_sdf_map), v_uv).a;

  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);

  outputColor = mix(v_color, v_stroke_color, smoothstep(0., 0.5, 1.- dist));

  outputColor.a *= alpha;
   // 作为 mask 模板时需要丢弃透明的像素
  if (outputColor.a < 0.01) {
    discard;
  }
  outputColor = filterColor(outputColor);
}
`,
  y6 = `#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_TEXT_OFFSETS) in vec2 a_textOffsets;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_tex;

layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

out vec2 v_uv;
out float v_gamma_scale;
out vec4 v_color;
out vec4 v_stroke_color;
out float v_fontScale;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // cal style mapping - 数据纹理映射部分的计算

  v_uv = a_tex / u_sdf_map_size;



  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_stroke_color = vec4(u_stroke_color.xyz, u_stroke_color.w * opacity);

  // 文本缩放比例
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  vec2 offset = rotate_matrix(a_textOffsets,rotation);

  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position = project_common_position_to_clipspace(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));

  gl_Position = vec4(
    projected_position.xy / projected_position.w + offset * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`,
  { isEqual: Of } = Ka;
function x6(t) {
  const e = this,
    n = t.id,
    r = [],
    o = [];
  if (!e.glyphInfoMap || !e.glyphInfoMap[n])
    return { vertices: [], indices: [], size: 7 };
  const l = e.glyphInfoMap[n].centroid,
    a = l.length === 2 ? [l[0], l[1], 0] : l;
  return (
    e.glyphInfoMap[n].glyphQuads.forEach((h, f) => {
      r.push(
        ...a,
        h.tex.x,
        h.tex.y + h.tex.height,
        h.tl.x,
        h.tl.y,
        ...a,
        h.tex.x + h.tex.width,
        h.tex.y + h.tex.height,
        h.tr.x,
        h.tr.y,
        ...a,
        h.tex.x + h.tex.width,
        h.tex.y,
        h.br.x,
        h.br.y,
        ...a,
        h.tex.x,
        h.tex.y,
        h.bl.x,
        h.bl.y
      ),
        o.push(
          0 + f * 4,
          1 + f * 4,
          2 + f * 4,
          2 + f * 4,
          3 + f * 4,
          0 + f * 4
        );
    }),
    { vertices: r, indices: o, size: 7 }
  );
}
class O7 extends qi {
  constructor(...e) {
    var n;
    super(...e),
      (n = this),
      R(this, "glyphInfo", void 0),
      R(this, "glyphInfoMap", {}),
      R(this, "rawEncodeData", void 0),
      R(this, "texture", void 0),
      R(this, "currentZoom", -1),
      R(this, "extent", void 0),
      R(this, "textureHeight", 0),
      R(this, "textCount", 0),
      R(this, "preTextStyle", {}),
      R(
        this,
        "mapping",
        bt(function* () {
          n.initGlyph(), n.updateTexture(), yield n.reBuildModel();
        })
      );
  }
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      SIZE: 9,
      TEXT_OFFSETS: 10,
      UV: 11,
    });
  }
  getUninforms() {
    const e = this.getCommonUniformsInfo(),
      n = this.getUniformsBufferInfo(this.getStyleAttribute());
    return (
      this.updateStyleUnifoms(),
      mt(mt(mt({}, e.uniformsOption), n.uniformsOption), {
        u_sdf_map: this.textures[0],
      })
    );
  }
  getCommonUniformsInfo() {
    const {
        stroke: e = "#fff",
        strokeWidth: n = 0,
        halo: r = 0.5,
        gamma: o = 2,
        raisingHeight: l = 0,
      } = this.layer.getLayerConfig(),
      a = this.getFontServiceMapping(),
      h = this.getFontServiceCanvas();
    a &&
      Object.keys(a).length !== this.textCount &&
      h &&
      (this.updateTexture(), (this.textCount = Object.keys(a).length)),
      (this.preTextStyle = this.getTextStyle());
    const f = {
      u_stroke_color: Bi(e),
      u_sdf_map_size: [
        (h == null ? void 0 : h.width) || 1,
        (h == null ? void 0 : h.height) || 1,
      ],
      u_raisingHeight: Number(l),
      u_stroke_width: n,
      u_gamma_scale: o,
      u_halo_blur: r,
    };
    return this.getUniformsBufferInfo(f);
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return (
        e.bindEvent(),
        (e.extent = e.textExtent()),
        (e.rawEncodeData = e.layer.getEncodedData()),
        (e.preTextStyle = e.getTextStyle()),
        e.initUniformsBuffer(),
        e.buildModels()
      );
    })();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      const { textAllowOverlap: n = !1 } = e.layer.getLayerConfig();
      return (
        e.initGlyph(),
        e.updateTexture(),
        n || e.filterGlyphs(),
        [
          yield e.layer.buildLayerModel({
            moduleName: "pointText",
            vertexShader: y6,
            fragmentShader: _6,
            defines: e.getDefines(),
            inject: e.getInject(),
            triangulation: x6.bind(e),
            depth: { enable: !1 },
          }),
        ]
      );
    })();
  }
  needUpdate() {
    var e = this;
    return bt(function* () {
      const {
        textAllowOverlap: n = !1,
        textAnchor: r = "center",
        textOffset: o,
        padding: l,
        fontFamily: a,
        fontWeight: h,
      } = e.getTextStyle();
      if (
        !Of(l, e.preTextStyle.padding) ||
        !Of(o, e.preTextStyle.textOffset) ||
        !Of(r, e.preTextStyle.textAnchor) ||
        !Of(a, e.preTextStyle.fontFamily) ||
        !Of(h, e.preTextStyle.fontWeight)
      )
        return yield e.mapping(), !0;
      if (n) return !1;
      const f = e.mapService.getZoom(),
        v = e.mapService.getBounds(),
        E = IE(e.extent, v);
      return Math.abs(e.currentZoom - f) > 0.5 ||
        !E ||
        n !== e.preTextStyle.textAllowOverlap
        ? (yield e.reBuildModel(), !0)
        : !1;
    })();
  }
  clearModels() {
    var e;
    (e = this.texture) === null || e === void 0 || e.destroy(),
      this.layer.off("remapping", this.mapping);
  }
  registerBuiltinAttributes() {
    this.registerPosition64LowAttribute(),
      this.styleAttributeService.registerStyleAttribute({
        name: "textOffsets",
        type: Ln.Attribute,
        descriptor: {
          shaderLocation: this.attributeLocation.TEXT_OFFSETS,
          name: "a_textOffsets",
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 2,
          update: (e, n, r) => [r[5], r[6]],
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "textUv",
        type: Ln.Attribute,
        descriptor: {
          name: "a_tex",
          shaderLocation: this.attributeLocation.UV,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 2,
          update: (e, n, r) => [r[3], r[4]],
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "size",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Size",
          shaderLocation: this.attributeLocation.SIZE,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 1,
          update: (e) => {
            const { size: n = 12 } = e;
            return Array.isArray(n) ? [n[0]] : [n];
          },
        },
      });
  }
  bindEvent() {
    this.layer.isTileLayer || this.layer.on("remapping", this.mapping);
  }
  textExtent() {
    const e = this.mapService.getBounds();
    return m3(e, 0.5);
  }
  initTextFont() {
    const { fontWeight: e, fontFamily: n } = this.getTextStyle(),
      r = this.rawEncodeData,
      o = [];
    r.forEach((l) => {
      let { shape: a = "" } = l;
      a = a.toString();
      for (const h of a) o.indexOf(h) === -1 && o.push(h);
    }),
      this.fontService.setFontOptions({
        characterSet: o,
        fontWeight: e,
        fontFamily: n,
        iconfont: !1,
      });
  }
  initIconFontTex() {
    const { fontWeight: e, fontFamily: n } = this.getTextStyle(),
      r = this.rawEncodeData,
      o = [];
    r.forEach((l) => {
      let { shape: a = "" } = l;
      (a = `${a}`), o.indexOf(a) === -1 && o.push(a);
    }),
      this.fontService.setFontOptions({
        characterSet: o,
        fontWeight: e,
        fontFamily: n,
        iconfont: !0,
      });
  }
  getTextStyle() {
    const {
      fontWeight: e = "400",
      fontFamily: n = "sans-serif",
      textAllowOverlap: r = !1,
      padding: o = [0, 0],
      textAnchor: l = "center",
      textOffset: a = [0, 0],
      opacity: h = 1,
      strokeOpacity: f = 1,
      strokeWidth: v = 0,
      stroke: E = "#000",
    } = this.layer.getLayerConfig();
    return {
      fontWeight: e,
      fontFamily: n,
      textAllowOverlap: r,
      padding: o,
      textAnchor: l,
      textOffset: a,
      opacity: h,
      strokeOpacity: f,
      strokeWidth: v,
      stroke: E,
    };
  }
  generateGlyphLayout(e) {
    const n = this.getFontServiceMapping(),
      {
        spacing: r = 2,
        textAnchor: o = "center",
        textOffset: l,
      } = this.layer.getLayerConfig(),
      a = this.rawEncodeData;
    this.glyphInfo = a.map((h) => {
      const { shape: f = "", id: v, size: E = 1 } = h,
        x = h.textOffset ? h.textOffset : l || [0, 0],
        T = h.textAnchor ? h.textAnchor : o || "center",
        N = $U(f.toString(), n, E, T, "left", r, x, e),
        I = KU(N, x);
      return (
        (h.shaping = N),
        (h.glyphQuads = I),
        (h.centroid = J0(h.coordinates)),
        (this.glyphInfoMap[v] = {
          shaping: N,
          glyphQuads: I,
          centroid: J0(h.coordinates),
        }),
        h
      );
    });
  }
  getFontServiceMapping() {
    const { fontWeight: e = "400", fontFamily: n = "sans-serif" } =
      this.layer.getLayerConfig();
    return this.fontService.getMappingByKey(`${n}_${e}`);
  }
  getFontServiceCanvas() {
    const { fontWeight: e = "400", fontFamily: n = "sans-serif" } =
      this.layer.getLayerConfig();
    return this.fontService.getCanvasByKey(`${n}_${e}`);
  }
  filterGlyphs() {
    const { padding: e = [0, 0], textAllowOverlap: n = !1 } =
      this.layer.getLayerConfig();
    if (n) return;
    (this.glyphInfoMap = {}),
      (this.currentZoom = this.mapService.getZoom()),
      (this.extent = this.textExtent());
    const { width: r, height: o } = this.rendererService.getViewportSize(),
      l = new ZU(r, o);
    this.glyphInfo
      .filter((h) => {
        const { shaping: f, id: v = 0 } = h,
          E = h.centroid,
          T = h.size / 16,
          N = this.mapService.lngLatToContainer(E),
          { box: I } = l.placeCollisionBox({
            x1: f.left * T - e[0],
            x2: f.right * T + e[0],
            y1: f.top * T - e[1],
            y2: f.bottom * T + e[1],
            anchorPointX: N.x,
            anchorPointY: N.y,
          });
        return I && I.length ? (l.insertCollisionBox(I, v), !0) : !1;
      })
      .forEach((h) => {
        this.glyphInfoMap[h.id] = h;
      });
  }
  initGlyph() {
    const { iconfont: e = !1 } = this.layer.getLayerConfig();
    e ? this.initIconFontTex() : this.initTextFont(),
      this.generateGlyphLayout(e);
  }
  updateTexture() {
    const { createTexture2D: e } = this.rendererService,
      n = this.getFontServiceCanvas();
    (this.textureHeight = n.height),
      this.texture && this.texture.destroy(),
      (this.texture = e({
        data: n,
        mag: H.LINEAR,
        min: H.LINEAR,
        width: n.width,
        height: n.height,
      })),
      (this.textures = [this.texture]);
  }
  reBuildModel() {
    var e = this;
    return bt(function* () {
      e.filterGlyphs();
      const n = yield e.layer.buildLayerModel({
        moduleName: "pointText",
        vertexShader: y6,
        fragmentShader: _6,
        triangulation: x6.bind(e),
        defines: e.getDefines(),
        inject: e.getInject(),
        depth: { enable: !1 },
      });
      e.layer.models = [n];
    })();
  }
}
const QU = {
  fillImage: kU,
  fill: N7,
  radar: XU,
  image: R7,
  normal: I7,
  simplePoint: TU,
  extrude: C7,
  text: O7,
  earthFill: MU,
  earthExtrude: NU,
};
class qg extends Vp {
  constructor(...e) {
    super(...e),
      R(this, "type", "PointLayer"),
      R(this, "enableShaderEncodeStyles", [
        "stroke",
        "offsets",
        "opacity",
        "rotation",
      ]),
      R(this, "enableDataEncodeStyles", ["textOffset", "textAnchor"]),
      R(this, "defaultSourceConfig", {
        data: [],
        options: { parser: { type: "json", x: "lng", y: "lat" } },
      });
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      const n = e.getModelType();
      e.layerModel && e.layerModel.clearModels(),
        (e.layerModel = new QU[n](e)),
        yield e.initLayerModels();
    })();
  }
  rebuildModels() {
    var e = this;
    return bt(function* () {
      yield e.buildModels();
    })();
  }
  getModelTypeWillEmptyData() {
    if (this.shapeOption) {
      const { field: e, values: n } = this.shapeOption,
        { shape2d: r } = this.getLayerConfig(),
        o = this.iconService.getIconMap();
      if (e && (r == null ? void 0 : r.indexOf(e)) !== -1) return "fill";
      if (n === "text") return "text";
      if (n && n instanceof Array) {
        for (const l of n)
          if (typeof l == "string" && o.hasOwnProperty(l)) return "image";
      }
    }
    return "normal";
  }
  getDefaultConfig() {
    const e = this.getModelType();
    return {
      fillImage: {},
      normal: { blend: "additive" },
      radar: {},
      simplePoint: {},
      fill: { blend: "normal" },
      extrude: {},
      image: {},
      text: { blend: "normal" },
      tile: {},
      tileText: {},
      earthFill: {},
      earthExtrude: {},
    }[e];
  }
  getModelType() {
    const e = this.getEncodedData(),
      { shape2d: n, shape3d: r, billboard: o = !0 } = this.getLayerConfig(),
      l = this.iconService.getIconMap(),
      a = e.find((h) => h.hasOwnProperty("shape"));
    if (a) {
      const h = a.shape;
      return h === "dot"
        ? "normal"
        : h === "simple"
        ? "simplePoint"
        : h === "radar"
        ? "radar"
        : this.layerType === "fillImage" || o === !1
        ? "fillImage"
        : (n == null ? void 0 : n.indexOf(h)) !== -1
        ? this.mapService.version === "GLOBEL"
          ? "earthFill"
          : "fill"
        : (r == null ? void 0 : r.indexOf(h)) !== -1
        ? this.mapService.version === "GLOBEL"
          ? "earthExtrude"
          : "extrude"
        : l.hasOwnProperty(h)
        ? "image"
        : "text";
    } else return this.getModelTypeWillEmptyData();
  }
}
function JU(t) {
  return R_.apply(this, arguments);
}
function R_() {
  return (
    (R_ = bt(function* (t) {
      if (window.createImageBitmap) {
        const e = yield fetch(t);
        return yield createImageBitmap(yield e.blob());
      } else {
        const e = new window.Image();
        return new Promise((n) => {
          (e.onload = () => n(e)), (e.src = t), (e.crossOrigin = "Anonymous");
        });
      }
    })),
    R_.apply(this, arguments)
  );
}
const ez = `layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 默认不固定
  float u_raisingHeight;
};

in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    outputColor = v_Color;
  
  outputColor = filterColor(outputColor);
}
`,
  tz = `
layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 默认不固定
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;
out vec4 outputColor;

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  float isSide =  v_texture_data.x;
  float sidey = v_uvs[2];
  float lightWeight = v_texture_data.y;

  // Tip: 部分机型 GPU 计算精度兼容
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      // side notuse linear
       outputColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    outputColor = v_Color;
  }

  outputColor = filterColorAlpha(outputColor, lightWeight);
}
`,
  nz = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 默认不固定
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  v_uvs = a_uvs;
  // cal style mapping - 数据纹理映射部分的计算
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos, a_Position64Low);

  if (u_heightfixed > 0.0) {
    // 判断几何体是否固定高度
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  float lightWeight = calc_lighting(project_pos);
  v_texture_data = vec2(a_Position.z, lightWeight);

  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,
  rz = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 默认不固定
  float u_raisingHeight;
};

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  float isSide = a_Position.z;
  float topU = a_uvs[0];
  float topV = 1.0 - a_uvs[1];
  float sidey = a_uvs[2];

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);

  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);

  if (u_heightfixed > 0.0) {
    // 判断几何体是否固定高度
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

 gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  // Tip: 部分机型 GPU 计算精度兼容
  if (isSide < 0.999) {
    // side face
    // if(u_sidesurface < 1.0) {
    //   discard;
    // }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      v_Color = linearColor;
    } else {
      v_Color = a_Color;
    }

  } else {
    v_Color = a_Color;
  }

  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,
  iz = `uniform sampler2D u_texture;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 默认不固定
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;

#pragma include "scene_uniforms"
#pragma include "picking"

out vec4 outputColor;

void main() {
  float opacity = u_opacity;
  float isSide = v_texture_data.x;
  float lightWeight = v_texture_data.y;
  float topU = v_uvs[0];
  float topV = 1.0 - v_uvs[1];
  float sidey = v_uvs[2];

  outputColor = texture(SAMPLER_2D(u_texture), vec2(topU, topV));
  // Tip: 部分机型 GPU 计算精度兼容
  if (isSide < 0.999) {// 是否是边缘
    // side face
    if (u_sidesurface < 1.0) {
      discard;
    }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      outputColor = v_Color;
    }
  } else {
     // top face
    if (u_topsurface < 1.0) {
      discard;
    }
  }
  
  outputColor.a *= opacity;
  outputColor = filterColor(outputColor);
}
`,
  az = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 默认不固定
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);
  v_uvs = a_uvs;
  v_Color = a_Color;
  v_Color.a *= opacity;

  v_texture_data = vec2(a_Position.z, lightWeight);

  if (u_heightfixed > 0.0) {
    // 判断几何体是否固定高度
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`;
class oz extends qi {
  constructor(...e) {
    super(...e), R(this, "texture", void 0);
  }
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      SIZE: 9,
      NORMAL: 10,
      UV: 11,
    });
  }
  getUninforms() {
    const e = this.getCommonUniformsInfo(),
      n = this.getUniformsBufferInfo(this.getStyleAttribute());
    return (
      this.updateStyleUnifoms(), mt(mt({}, e.uniformsOption), n.uniformsOption)
    );
  }
  getCommonUniformsInfo() {
    const {
      mapTexture: e,
      heightfixed: n = !1,
      raisingHeight: r = 0,
      topsurface: o = !0,
      sidesurface: l = !0,
      sourceColor: a,
      targetColor: h,
    } = this.layer.getLayerConfig();
    let f = 0,
      v = [1, 1, 1, 1],
      E = [1, 1, 1, 1];
    a && h && ((v = Bi(a)), (E = Bi(h)), (f = 1));
    const x = {
      u_sourceColor: v,
      u_targetColor: E,
      u_linearColor: f,
      u_topsurface: Number(o),
      u_sidesurface: Number(l),
      u_heightfixed: Number(n),
      u_raisingHeight: Number(r),
    };
    return (
      e &&
        this.texture &&
        ((x.u_texture = this.texture), (this.textures = [this.texture])),
      this.getUniformsBufferInfo(x)
    );
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return yield e.loadTexture(), e.buildModels();
    })();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      const { frag: n, vert: r, type: o } = e.getShaders();
      return (
        e.initUniformsBuffer(),
        [
          yield e.layer.buildLayerModel({
            moduleName: o,
            vertexShader: r,
            fragmentShader: n,
            depth: { enable: !0 },
            defines: e.getDefines(),
            inject: e.getInject(),
            triangulation: S7,
          }),
        ]
      );
    })();
  }
  getShaders() {
    const { pickLight: e, mapTexture: n } = this.layer.getLayerConfig();
    return n
      ? { frag: iz, vert: az, type: "polygonExtrudeTexture" }
      : e
      ? { frag: tz, vert: nz, type: "polygonExtrudePickLight" }
      : { frag: ez, vert: rz, type: "polygonExtrude" };
  }
  clearModels() {
    var e;
    (e = this.texture) === null || e === void 0 || e.destroy(),
      (this.textures = []);
  }
  registerBuiltinAttributes() {
    const e = this.layer.getSource().extent,
      n = e[2] - e[0],
      r = e[3] - e[1];
    this.registerPosition64LowAttribute(),
      this.styleAttributeService.registerStyleAttribute({
        name: "uvs",
        type: Ln.Attribute,
        descriptor: {
          name: "a_uvs",
          shaderLocation: this.attributeLocation.UV,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 3,
          update: (o, l, a) => {
            const h = a[0],
              f = a[1];
            return [(h - e[0]) / n, (f - e[1]) / r, a[4]];
          },
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "normal",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Normal",
          shaderLocation: this.attributeLocation.NORMAL,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 3,
          update: (o, l, a, h, f) => f,
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "size",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Size",
          shaderLocation: this.attributeLocation.SIZE,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 1,
          update: (o) => {
            const { size: l = 10 } = o;
            return Array.isArray(l) ? [l[0]] : [l];
          },
        },
      });
  }
  loadTexture() {
    var e = this;
    return bt(function* () {
      const { mapTexture: n } = e.layer.getLayerConfig(),
        { createTexture2D: r } = e.rendererService;
      if (((e.texture = r({ height: 1, width: 1 })), n)) {
        const o = yield JU(n);
        e.texture = r({
          data: o,
          width: o.width,
          height: o.height,
          wrapS: H.CLAMP_TO_EDGE,
          wrapT: H.CLAMP_TO_EDGE,
          min: H.LINEAR,
          mag: H.LINEAR,
        });
      }
    })();
  }
}
const sz = `
in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

  outputColor = v_Color;
  outputColor = filterColor(outputColor);
}
`,
  lz = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size + (1.0 - a_Position.z) * extrusionBase, 1.0);

  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);
  v_Color = a_Color;
  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`;
class cz extends qi {
  constructor(...e) {
    super(...e), R(this, "texture", void 0);
  }
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      SIZE: 9,
      NORMAL: 10,
      EXTRUSION_BASE: 11,
    });
  }
  getUninforms() {
    const e = this.getCommonUniformsInfo(),
      n = this.getUniformsBufferInfo(this.getStyleAttribute());
    return (
      this.updateStyleUnifoms(), mt(mt({}, e.uniformsOption), n.uniformsOption)
    );
  }
  getCommonUniformsInfo() {
    const e = {};
    return this.getUniformsBufferInfo(e);
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return e.buildModels();
    })();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      const { frag: n, vert: r, type: o } = e.getShaders();
      return (
        e.initUniformsBuffer(),
        [
          yield e.layer.buildLayerModel({
            moduleName: o,
            vertexShader: r,
            fragmentShader: n,
            defines: e.getDefines(),
            inject: e.getInject(),
            triangulation: S7,
            depth: { enable: !0 },
          }),
        ]
      );
    })();
  }
  getShaders() {
    return { frag: sz, vert: lz, type: "polygonExtrude" };
  }
  clearModels() {
    var e;
    (e = this.texture) === null || e === void 0 || e.destroy();
  }
  registerBuiltinAttributes() {
    this.registerPosition64LowAttribute(),
      this.styleAttributeService.registerStyleAttribute({
        name: "normal",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Normal",
          shaderLocation: this.attributeLocation.NORMAL,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 3,
          update: (e, n, r, o, l) => l,
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "size",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Size",
          shaderLocation: this.attributeLocation.SIZE,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 1,
          update: (e) => {
            const { size: n = 10 } = e;
            return Array.isArray(n) ? [n[0]] : [n];
          },
        },
      }),
      this.styleAttributeService.registerStyleAttribute({
        name: "extrusionBase",
        type: Ln.Attribute,
        descriptor: {
          name: "a_ExtrusionBase",
          shaderLocation: this.attributeLocation.EXTRUSION_BASE,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 1,
          update: (e) => {
            const { extrusionBase: n = 0 } = e;
            return [n];
          },
        },
      });
  }
}
const uz = `in vec4 v_color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,
  dz = `
layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

in vec4 v_color;
in vec3 v_linear;
in vec2 v_pos;
out vec4 outputColor;
#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  outputColor = v_color;
  if (u_opacitylinear > 0.0) {
    outputColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }
  outputColor = filterColor(outputColor);
}
`,
  hz = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_LINEAR) in vec3 a_linear;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

out vec4 v_color;
out vec3 v_linear;
out vec2 v_pos;

#pragma include "projection"
#pragma include "picking"

void main() {
  if (u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  project_pos.z += u_raisingHeight;

  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  setPickingColor(a_PickingColor);
}
`,
  pz = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - 数据纹理映射部分的计算

  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);

  project_pos.z += u_raisingHeight;

  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`;
class fz extends qi {
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      LINEAR: 9,
    });
  }
  getUninforms() {
    const e = this.getCommonUniformsInfo(),
      n = this.getUniformsBufferInfo(this.getStyleAttribute());
    return (
      this.updateStyleUnifoms(), mt(mt({}, e.uniformsOption), n.uniformsOption)
    );
  }
  getCommonUniformsInfo() {
    const {
        raisingHeight: e = 0,
        opacityLinear: n = { enable: !1, dir: "in" },
      } = this.layer.getLayerConfig(),
      r = {
        u_raisingHeight: Number(e),
        u_opacitylinear: Number(n.enable),
        u_dir: n.dir === "in" ? 1 : 0,
      };
    return this.getUniformsBufferInfo(r);
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return e.buildModels();
    })();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      const {
        frag: n,
        vert: r,
        triangulation: o,
        type: l,
      } = e.getModelParams();
      return (
        e.initUniformsBuffer(),
        (e.layer.triangulation = o),
        [
          yield e.layer.buildLayerModel({
            moduleName: l,
            vertexShader: r,
            fragmentShader: n,
            defines: e.getDefines(),
            inject: e.getInject(),
            triangulation: o,
            primitive: H.TRIANGLES,
            depth: { enable: !1 },
          }),
        ]
      );
    })();
  }
  registerBuiltinAttributes() {
    this.registerPosition64LowAttribute();
    const { opacityLinear: e = { enable: !1, dir: "in" } } =
      this.layer.getLayerConfig();
    e.enable &&
      this.styleAttributeService.registerStyleAttribute({
        name: "linear",
        type: Ln.Attribute,
        descriptor: {
          name: "a_linear",
          shaderLocation: this.attributeLocation.LINEAR,
          buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
          size: 3,
          update: (n, r, o) => [o[3], o[4], o[5]],
        },
      });
  }
  getModelParams() {
    const { opacityLinear: e = { enable: !1 } } = this.layer.getLayerConfig();
    return e.enable
      ? { frag: dz, vert: hz, type: "polygonLinear", triangulation: Lk }
      : { frag: uz, vert: pz, type: "polygonFill", triangulation: z1 };
  }
}
const mz = `
layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

in vec2 v_uv;
in float v_opacity;
out vec4 outputColor;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;

vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture(SAMPLER_2D(u_texture2),p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture(SAMPLER_2D(u_texture1),fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture(SAMPLER_2D(u_texture3), fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    
  outputColor = vec4(col, v_opacity);  
}
`,
  gz = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

out vec2 v_uv;
out float v_opacity;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_opacity = opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;
class vz extends qi {
  constructor(...e) {
    super(...e),
      R(this, "texture1", void 0),
      R(this, "texture2", void 0),
      R(this, "texture3", void 0);
  }
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      UV: 9,
    });
  }
  getUninforms() {
    const e = this.getCommonUniformsInfo(),
      n = this.getUniformsBufferInfo(this.getStyleAttribute());
    return (
      this.updateStyleUnifoms(), mt(mt({}, e.uniformsOption), n.uniformsOption)
    );
  }
  getCommonUniformsInfo() {
    const { watercolor: e = "#6D99A8", watercolor2: n = "#0F121C" } =
        this.layer.getLayerConfig(),
      r = {
        u_watercolor: Bi(e),
        u_watercolor2: Bi(n),
        u_time: this.layer.getLayerAnimateTime(),
        u_texture1: this.texture1,
        u_texture2: this.texture2,
        u_texture3: this.texture3,
      };
    return (
      (this.textures = [this.texture1, this.texture2, this.texture3]),
      this.getUniformsBufferInfo(r)
    );
  }
  getAnimateUniforms() {
    return { u_time: this.layer.getLayerAnimateTime() };
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return e.loadTexture(), e.buildModels();
    })();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      return (
        e.initUniformsBuffer(),
        [
          yield e.layer.buildLayerModel({
            moduleName: "polygonOcean",
            vertexShader: gz,
            fragmentShader: mz,
            defines: e.getDefines(),
            inject: e.getInject(),
            triangulation: z1,
            primitive: H.TRIANGLES,
            depth: { enable: !1 },
          }),
        ]
      );
    })();
  }
  clearModels() {
    var e, n, r;
    (e = this.texture1) === null || e === void 0 || e.destroy(),
      (n = this.texture2) === null || n === void 0 || n.destroy(),
      (r = this.texture3) === null || r === void 0 || r.destroy();
  }
  registerBuiltinAttributes() {
    const e = this.layer.getSource().extent,
      [n, r, o, l] = e,
      a = o - n,
      h = l - r;
    this.styleAttributeService.registerStyleAttribute({
      name: "oceanUv",
      type: Ln.Attribute,
      descriptor: {
        name: "a_uv",
        shaderLocation: this.attributeLocation.UV,
        buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
        size: 2,
        update: (f, v, E) => {
          const [x, T] = E;
          return [(x - n) / a, (T - r) / h];
        },
      },
    });
  }
  loadTexture() {
    const { createTexture2D: e } = this.rendererService,
      n = { height: 0, width: 0 };
    (this.texture1 = e(n)),
      (this.texture2 = e(n)),
      (this.texture3 = e(n)),
      r((l) => {
        (this.texture1 = o(l[0])),
          (this.texture2 = o(l[1])),
          (this.texture3 = o(l[2])),
          this.layerService.reRender();
      });
    function r(l) {
      let a = 0;
      const h = [];
      [
        "https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",
        "https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ",
        "https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ",
      ].map((v) => {
        const E = new Image();
        (E.crossOrigin = ""),
          (E.src = v),
          h.push(E),
          (E.onload = () => {
            a++, a === 3 && l(h);
          });
      });
    }
    function o(l) {
      return e({
        data: l,
        width: l.width,
        height: l.height,
        wrapS: H.MIRRORED_REPEAT,
        wrapT: H.MIRRORED_REPEAT,
        min: H.LINEAR,
        mag: H.LINEAR,
      });
    }
  }
}
const _z = `uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};

out vec4 outputColor;


in vec4 v_Color;
in vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {

  outputColor = v_Color;
  float spc = calSpc();
  outputColor += spc * 0.4;
}
`,
  yz = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};
out vec4 v_Color;
out vec2 v_uv;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_Color = a_Color;
  v_Color.a *= opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;
class xz extends qi {
  constructor(...e) {
    super(...e), R(this, "texture", void 0);
  }
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      UV: 9,
    });
  }
  getUninforms() {
    const e = this.getCommonUniformsInfo(),
      n = this.getUniformsBufferInfo(this.getStyleAttribute());
    return (
      this.updateStyleUnifoms(), mt(mt({}, e.uniformsOption), n.uniformsOption)
    );
  }
  getCommonUniformsInfo() {
    const { speed: e = 0.5 } = this.layer.getLayerConfig(),
      n = {
        u_speed: e,
        u_time: this.layer.getLayerAnimateTime(),
        u_texture: this.texture,
      };
    return (this.textures = [this.texture]), this.getUniformsBufferInfo(n);
  }
  getAnimateUniforms() {
    return { u_time: this.layer.getLayerAnimateTime() };
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return e.loadTexture(), e.buildModels();
    })();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      return (
        e.initUniformsBuffer(),
        [
          yield e.layer.buildLayerModel({
            moduleName: "polygonWater",
            vertexShader: yz,
            fragmentShader: _z,
            triangulation: z1,
            defines: e.getDefines(),
            inject: e.getInject(),
            primitive: H.TRIANGLES,
            depth: { enable: !1 },
            pickingEnabled: !1,
            diagnosticDerivativeUniformityEnabled: !1,
          }),
        ]
      );
    })();
  }
  clearModels() {
    var e;
    (e = this.texture) === null || e === void 0 || e.destroy();
  }
  registerBuiltinAttributes() {
    const e = this.layer.getSource().extent,
      [n, r, o, l] = e,
      a = o - n,
      h = l - r;
    this.styleAttributeService.registerStyleAttribute({
      name: "waterUv",
      type: Ln.Attribute,
      descriptor: {
        name: "a_uv",
        shaderLocation: this.attributeLocation.UV,
        buffer: { usage: H.STATIC_DRAW, data: [], type: H.FLOAT },
        size: 2,
        update: (f, v, E) => {
          const [x, T] = E;
          return [(x - n) / a, (T - r) / h];
        },
      },
    });
  }
  loadTexture() {
    const { waterTexture: e } = this.layer.getLayerConfig(),
      { createTexture2D: n } = this.rendererService;
    this.texture = n({ height: 1, width: 1 });
    const r = new Image();
    (r.crossOrigin = ""),
      e
        ? (console.warn(
            "L7 recommend：https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"
          ),
          (r.src = e))
        : (r.src =
            "https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),
      (r.onload = () => {
        (this.texture = n({
          data: r,
          width: r.width,
          height: r.height,
          wrapS: H.MIRRORED_REPEAT,
          wrapT: H.MIRRORED_REPEAT,
          min: H.LINEAR,
          mag: H.LINEAR,
        })),
          this.layerService.reRender();
      });
  }
}
const bz = {
  fill: fz,
  line: w7,
  extrude: oz,
  text: O7,
  point_fill: N7,
  point_image: R7,
  point_normal: I7,
  point_extrude: C7,
  water: xz,
  ocean: vz,
  extrusion: cz,
};
class $g extends Vp {
  constructor(...e) {
    super(...e),
      R(this, "type", "PolygonLayer"),
      R(this, "enableShaderEncodeStyles", [
        "opacity",
        "extrusionBase",
        "rotation",
        "offsets",
        "stroke",
      ]);
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      const n = e.getModelType();
      (e.layerModel = new bz[n](e)), yield e.initLayerModels();
    })();
  }
  getModelType() {
    var e;
    const n = this.styleAttributeService.getLayerStyleAttribute("shape"),
      r =
        n == null || (e = n.scale) === null || e === void 0 ? void 0 : e.field;
    return r === "fill" || !r
      ? "fill"
      : r === "extrude"
      ? "extrude"
      : r === "extrusion"
      ? "extrusion"
      : r === "water"
      ? "water"
      : r === "ocean"
      ? "ocean"
      : r === "line"
      ? "line"
      : this.getPointModelType();
  }
  getPointModelType() {
    const e = this.getEncodedData(),
      { shape2d: n, shape3d: r } = this.getLayerConfig(),
      o = this.iconService.getIconMap(),
      l = e.find((a) => a.hasOwnProperty("shape"));
    if (l) {
      const a = l.shape;
      return a === "dot"
        ? "point_normal"
        : (n == null ? void 0 : n.indexOf(a)) !== -1
        ? "point_fill"
        : (r == null ? void 0 : r.indexOf(a)) !== -1
        ? "point_extrude"
        : o.hasOwnProperty(a)
        ? "point_image"
        : "text";
    } else return "fill";
  }
}
const Ez = `layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

uniform sampler2D u_rasterTexture;
uniform sampler2D u_colorTexture;

in vec2 v_texCoord;

bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }

out vec4 outputColor;

void main() {
  // Can use any component here since u_rasterTexture is under luminance format.
  float value = texture(SAMPLER_2D(u_rasterTexture), vec2(v_texCoord.x, v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value)) {
    discard;
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
    discard;
  } else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(normalisedValue, 0));
    
    outputColor = color;
    outputColor.a = outputColor.a * u_opacity ;
    if (outputColor.a < 0.01)
      discard;
  }
}
`,
  Az = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;
let b6 = class extends qi {
  constructor(...e) {
    super(...e), R(this, "texture", void 0), R(this, "colorTexture", void 0);
  }
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      UV: 9,
    });
  }
  getUninforms() {
    const e = this.getCommonUniformsInfo(),
      n = this.getUniformsBufferInfo(this.getStyleAttribute());
    return (
      this.updateStyleUnifoms(), mt(mt({}, e.uniformsOption), n.uniformsOption)
    );
  }
  getCommonUniformsInfo() {
    const {
        opacity: e = 1,
        clampLow: n = !0,
        clampHigh: r = !0,
        noDataValue: o = -9999999,
        domain: l,
        rampColors: a,
      } = this.layer.getLayerConfig(),
      h = l || h3(a);
    this.colorTexture = this.layer.textureService.getColorTexture(a, h);
    const f = {
      u_domain: h,
      u_opacity: e || 1,
      u_noDataValue: o,
      u_clampLow: n ? 1 : 0,
      u_clampHigh: (typeof r < "u" ? r : n) ? 1 : 0,
      u_rasterTexture: this.texture,
      u_colorTexture: this.colorTexture,
    };
    return (
      (this.textures = [this.texture, this.colorTexture]),
      this.getUniformsBufferInfo(f)
    );
  }
  getRasterData(e) {
    return bt(function* () {
      if (Array.isArray(e.data))
        return { data: e.data, width: e.width, height: e.height };
      {
        const { rasterData: n, width: r, height: o } = yield e.data;
        return { data: Array.from(n), width: r, height: o };
      }
    })();
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return e.buildModels();
    })();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      e.initUniformsBuffer();
      const n = e.layer.getSource(),
        { createTexture2D: r, queryVerdorInfo: o } = e.rendererService,
        l = n.data.dataArray[0],
        { data: a, width: h, height: f } = yield e.getRasterData(l);
      return (
        (e.texture = r({
          data: new Float32Array(a),
          width: h,
          height: f,
          format: o() === "WebGL1" ? H.LUMINANCE : H.RED,
          type: H.FLOAT,
          alignment: 1,
        })),
        [
          yield e.layer.buildLayerModel({
            moduleName: "rasterImageData",
            vertexShader: Az,
            fragmentShader: Ez,
            defines: e.getDefines(),
            triangulation: Ev,
            primitive: H.TRIANGLES,
            depth: { enable: !1 },
            pickingEnabled: !1,
          }),
        ]
      );
    })();
  }
  clearModels() {
    var e, n;
    (e = this.texture) === null || e === void 0 || e.destroy(),
      (n = this.colorTexture) === null || n === void 0 || n.destroy();
  }
  registerBuiltinAttributes() {
    this.registerPosition64LowAttribute(),
      this.styleAttributeService.registerStyleAttribute({
        name: "uv",
        type: Ln.Attribute,
        descriptor: {
          shaderLocation: this.attributeLocation.UV,
          name: "a_Uv",
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 2,
          update: (e, n, r) => [r[3], r[4]],
        },
      });
  }
};
const Tz = ["data"],
  Sz = ["rasterData"],
  wz = `uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

in vec2 v_texCoord;

out vec4 outputColor;

void main() {

  vec3 rgb = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y)).rgb;

  if(rgb == vec3(u_noDataValue)) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
    outputColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }

  if(outputColor.a < 0.01)
    discard;
 
}`,
  Cz = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_rminmax;
  vec2 u_gminmax;
  vec2 u_bminmax;
  float u_opacity;
  float u_noDataValue;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;
class Nz extends qi {
  constructor(...e) {
    super(...e), R(this, "texture", void 0), R(this, "dataOption", {});
  }
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      UV: 9,
    });
  }
  getUninforms() {
    const e = this.getCommonUniformsInfo(),
      n = this.getUniformsBufferInfo(this.getStyleAttribute());
    return (
      this.updateStyleUnifoms(), mt(mt({}, e.uniformsOption), n.uniformsOption)
    );
  }
  getCommonUniformsInfo() {
    const { opacity: e = 1, noDataValue: n = 0 } = this.layer.getLayerConfig(),
      {
        rMinMax: r = [0, 255],
        gMinMax: o = [0, 255],
        bMinMax: l = [0, 255],
      } = this.dataOption,
      a = {
        u_rminmax: r,
        u_gminmax: o,
        u_bminmax: l,
        u_opacity: e || 1,
        u_noDataValue: n,
        u_texture: this.texture,
      };
    return (this.textures = [this.texture]), this.getUniformsBufferInfo(a);
  }
  getRasterData(e) {
    var n = this;
    return bt(function* () {
      if (Array.isArray(e.data)) {
        const { data: a } = e,
          h = pc(e, Tz);
        return (n.dataOption = h), mt({ data: a }, h);
      }
      const r = yield e.data,
        { rasterData: o } = r,
        l = pc(r, Sz);
      return (
        (n.dataOption = l),
        Array.isArray(o) ? mt({ data: o }, l) : mt({ data: Array.from(o) }, l)
      );
    })();
  }
  initModels() {
    var e = this;
    return bt(function* () {
      e.initUniformsBuffer();
      const n = e.layer.getSource(),
        { createTexture2D: r } = e.rendererService,
        o = n.data.dataArray[0],
        { data: l, width: a, height: h } = yield e.getRasterData(o);
      return (
        (e.texture = r({
          data: new Float32Array(l),
          width: a,
          height: h,
          format: H.RGB,
          type: H.FLOAT,
        })),
        [
          yield e.layer.buildLayerModel({
            moduleName: "rasterImageDataRGBA",
            vertexShader: Cz,
            fragmentShader: wz,
            defines: e.getDefines(),
            triangulation: Ev,
            primitive: H.TRIANGLES,
            depth: { enable: !1 },
            pickingEnabled: !1,
          }),
        ]
      );
    })();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      return e.initModels();
    })();
  }
  clearModels() {
    var e;
    (e = this.texture) === null || e === void 0 || e.destroy();
  }
  registerBuiltinAttributes() {
    this.registerPosition64LowAttribute(),
      this.styleAttributeService.registerStyleAttribute({
        name: "uv",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Uv",
          shaderLocation: this.attributeLocation.UV,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 2,
          update: (e, n, r) => [r[3], r[4]],
        },
      });
  }
}
const Rz = `uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

layout(std140) uniform commonUniforms {
 vec4 u_unpack;
 vec2 u_domain;
 float u_opacity;
 float u_noDataValue;
 float u_clampLow;
 float u_clampHigh;
};

in vec2 v_texCoord;
out vec4 outputColor;


float getElevation(vec2 coord, float bias) {
    // Convert encoded elevation value to meters
    vec4 data =  texture(SAMPLER_2D(u_texture), coord,bias) * 255.0;
    data.a = -1.0;
    return dot(data, u_unpack);
}

vec4 getColor(float value) {
   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec2 coord = vec2(normalisedValue, 0);
    return  texture(SAMPLER_2D(u_colorTexture), coord);
}

void main() {
  float value = getElevation(v_texCoord,0.0);
  if (value == u_noDataValue) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
     outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
   
    outputColor = getColor(value);
    outputColor.a =  outputColor.a * u_opacity ;
      if(outputColor.a < 0.01)
      discard;
  }
}
`,
  Iz = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec4 u_unpack;
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};
out vec2 v_texCoord;
#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;
class Mz extends qi {
  constructor(...e) {
    super(...e), R(this, "texture", void 0);
  }
  get attributeLocation() {
    return Object.assign(super.attributeLocation, {
      MAX: super.attributeLocation.MAX,
      UV: 9,
    });
  }
  getCommonUniformsInfo() {
    const {
        opacity: e,
        clampLow: n = !0,
        clampHigh: r = !0,
        noDataValue: o = -9999999,
        domain: l,
        rampColors: a,
        colorTexture: h,
        rScaler: f = 6553.6,
        gScaler: v = 25.6,
        bScaler: E = 0.1,
        offset: x = 1e4,
      } = this.layer.getLayerConfig(),
      T = l || h3(a);
    let N = h;
    h
      ? this.layer.textureService.setColorTexture(h, a, T)
      : (N = this.layer.textureService.getColorTexture(a, T));
    const I = {
      u_unpack: [f, v, E, x],
      u_domain: T,
      u_opacity: e || 1,
      u_noDataValue: o,
      u_clampLow: n,
      u_clampHigh: typeof r < "u" ? r : n,
      u_texture: this.texture,
      u_colorTexture: N,
    };
    return (this.textures = [this.texture, N]), this.getUniformsBufferInfo(I);
  }
  initModels() {
    var e = this;
    return bt(function* () {
      e.initUniformsBuffer();
      const n = e.layer.getSource(),
        { createTexture2D: r } = e.rendererService,
        o = yield n.data.images;
      return (
        (e.texture = r({
          data: o[0],
          width: o[0].width,
          height: o[0].height,
          min: H.LINEAR,
          mag: H.LINEAR,
        })),
        [
          yield e.layer.buildLayerModel({
            moduleName: "RasterTileDataImage",
            vertexShader: Iz,
            fragmentShader: Rz,
            defines: e.getDefines(),
            triangulation: Ev,
            primitive: H.TRIANGLES,
            depth: { enable: !1 },
          }),
        ]
      );
    })();
  }
  clearModels() {
    var e;
    (e = this.texture) === null || e === void 0 || e.destroy();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      return e.initModels();
    })();
  }
  registerBuiltinAttributes() {
    this.registerPosition64LowAttribute(),
      this.styleAttributeService.registerStyleAttribute({
        name: "uv",
        type: Ln.Attribute,
        descriptor: {
          name: "a_Uv",
          shaderLocation: this.attributeLocation.UV,
          buffer: { usage: H.DYNAMIC_DRAW, data: [], type: H.FLOAT },
          size: 2,
          update: (e, n, r) => [r[3], r[4]],
        },
      });
  }
}
const Pz = { raster: b6, rasterRgb: Nz, raster3d: b6, rasterTerrainRgb: Mz };
class k3 extends Vp {
  constructor(...e) {
    super(...e), R(this, "type", "RasterLayer");
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      const n = e.getModelType();
      (e.layerModel = new Pz[n](e)), yield e.initLayerModels();
    })();
  }
  getDefaultConfig() {
    const e = this.getModelType();
    return { raster: {}, rasterRgb: {}, raster3d: {}, rasterTerrainRgb: {} }[e];
  }
  getModelType() {
    switch (this.layerSource.getParserType()) {
      case "raster":
        return "raster";
      case "rasterRgb":
        return "rasterRgb";
      case "rgb":
        return "rasterRgb";
      case "image":
        return "rasterTerrainRgb";
      default:
        return "raster";
    }
  }
  getLegend(e) {
    if (e !== "color") return { type: void 0, field: void 0, items: [] };
    const n = this.getLayerConfig().rampColors;
    return Fk(n, e);
  }
}
class Oz {
  constructor({ rendererService: e, layerService: n, parent: r }) {
    R(this, "tileResource", new Map()),
      R(this, "rendererService", void 0),
      R(this, "layerService", void 0),
      R(this, "parent", void 0),
      R(this, "layerTiles", []),
      (this.rendererService = e),
      (this.layerService = n),
      (this.parent = r);
  }
  get tiles() {
    return this.layerTiles;
  }
  hasTile(e) {
    return this.layerTiles.some((n) => n.key === e);
  }
  addTile(e) {
    this.layerTiles.push(e);
  }
  getTile(e) {
    return this.layerTiles.find((n) => n.key === e);
  }
  getVisibleTileBylngLat(e) {
    return this.layerTiles.find(
      (n) => n.isLoaded && n.visible && n.lnglatInBounds(e)
    );
  }
  removeTile(e) {
    const n = this.layerTiles.findIndex((o) => o.key === e),
      r = this.layerTiles.splice(n, 1);
    r[0] && r[0].destroy();
  }
  updateTileVisible(e) {
    const n = this.getTile(e.key);
    if (e.isVisible)
      if (e.parent) {
        const r = this.isChildrenLoaded(e.parent);
        n == null || n.updateVisible(r);
      } else n == null || n.updateVisible(!0);
    else if (e.parent) {
      const r = this.isChildrenLoaded(e.parent);
      n == null || n.updateVisible(!r);
    } else n == null || n.updateVisible(!1);
  }
  isParentLoaded(e) {
    const n = e.parent;
    if (!n) return !0;
    const r = this.getTile(n == null ? void 0 : n.key);
    return !!(r != null && r.isLoaded);
  }
  isChildrenLoaded(e) {
    const n = e == null ? void 0 : e.children;
    return n.length === 0
      ? !0
      : n.every((r) => {
          const o = this.getTile(r == null ? void 0 : r.key);
          return o ? (o == null ? void 0 : o.isLoaded) === !0 : !0;
        });
  }
  render() {
    var e = this;
    return bt(function* () {
      const r = e.getRenderLayers().map(
        (function () {
          var o = bt(function* (l) {
            yield e.layerService.renderTileLayer(l);
          });
          return function (l) {
            return o.apply(this, arguments);
          };
        })()
      );
      yield Promise.all(r);
    })();
  }
  getRenderLayers() {
    const e = this.layerTiles.filter((r) => r.visible && r.isLoaded),
      n = [];
    return e.map((r) => n.push(...r.getLayers())), n;
  }
  getLayers() {
    const e = this.layerTiles.filter((r) => r.isLoaded),
      n = [];
    return e.map((r) => n.push(...r.getLayers())), n;
  }
  getTiles() {
    return this.layerTiles;
  }
  destroy() {
    this.layerTiles.forEach((e) => e.destroy()), this.tileResource.clear();
  }
}
/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */ /*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */ function Lz(
  t,
  e
) {
  var n = {
      label: 0,
      sent: function () {
        if (l[0] & 1) throw l[1];
        return l[1];
      },
      trys: [],
      ops: [],
    },
    r,
    o,
    l,
    a;
  return (
    (a = { next: h(0), throw: h(1), return: h(2) }),
    typeof Symbol == "function" &&
      (a[Symbol.iterator] = function () {
        return this;
      }),
    a
  );
  function h(v) {
    return function (E) {
      return f([v, E]);
    };
  }
  function f(v) {
    if (r) throw new TypeError("Generator is already executing.");
    for (; n; )
      try {
        if (
          ((r = 1),
          o &&
            (l =
              v[0] & 2
                ? o.return
                : v[0]
                ? o.throw || ((l = o.return) && l.call(o), 0)
                : o.next) &&
            !(l = l.call(o, v[1])).done)
        )
          return l;
        switch (((o = 0), l && (v = [v[0] & 2, l.value]), v[0])) {
          case 0:
          case 1:
            l = v;
            break;
          case 4:
            return n.label++, { value: v[1], done: !1 };
          case 5:
            n.label++, (o = v[1]), (v = [0]);
            continue;
          case 7:
            (v = n.ops.pop()), n.trys.pop();
            continue;
          default:
            if (
              ((l = n.trys),
              !(l = l.length > 0 && l[l.length - 1]) &&
                (v[0] === 6 || v[0] === 2))
            ) {
              n = 0;
              continue;
            }
            if (v[0] === 3 && (!l || (v[1] > l[0] && v[1] < l[3]))) {
              n.label = v[1];
              break;
            }
            if (v[0] === 6 && n.label < l[1]) {
              (n.label = l[1]), (l = v);
              break;
            }
            if (l && n.label < l[2]) {
              (n.label = l[2]), n.ops.push(v);
              break;
            }
            l[2] && n.ops.pop(), n.trys.pop();
            continue;
        }
        v = e.call(t, n);
      } catch (E) {
        (v = [6, E]), (o = 0);
      } finally {
        r = l = 0;
      }
    if (v[0] & 5) throw v[1];
    return { value: v[0] ? v[1] : void 0, done: !0 };
  }
}
var a0 = (function () {
  function t(e, n) {
    (this.next = null),
      (this.key = e),
      (this.data = n),
      (this.left = null),
      (this.right = null);
  }
  return t;
})();
function Dz(t, e) {
  return t > e ? 1 : t < e ? -1 : 0;
}
function Yd(t, e, n) {
  for (var r = new a0(null, null), o = r, l = r; ; ) {
    var a = n(t, e.key);
    if (a < 0) {
      if (e.left === null) break;
      if (n(t, e.left.key) < 0) {
        var h = e.left;
        if (((e.left = h.right), (h.right = e), (e = h), e.left === null))
          break;
      }
      (l.left = e), (l = e), (e = e.left);
    } else if (a > 0) {
      if (e.right === null) break;
      if (n(t, e.right.key) > 0) {
        var h = e.right;
        if (((e.right = h.left), (h.left = e), (e = h), e.right === null))
          break;
      }
      (o.right = e), (o = e), (e = e.right);
    } else break;
  }
  return (
    (o.right = e.left),
    (l.left = e.right),
    (e.left = r.right),
    (e.right = r.left),
    e
  );
}
function O2(t, e, n, r) {
  var o = new a0(t, e);
  if (n === null) return (o.left = o.right = null), o;
  n = Yd(t, n, r);
  var l = r(t, n.key);
  return (
    l < 0
      ? ((o.left = n.left), (o.right = n), (n.left = null))
      : l >= 0 && ((o.right = n.right), (o.left = n), (n.right = null)),
    o
  );
}
function E6(t, e, n) {
  var r = null,
    o = null;
  if (e) {
    e = Yd(t, e, n);
    var l = n(e.key, t);
    l === 0
      ? ((r = e.left), (o = e.right))
      : l < 0
      ? ((o = e.right), (e.right = null), (r = e))
      : ((r = e.left), (e.left = null), (o = e));
  }
  return { left: r, right: o };
}
function Bz(t, e, n) {
  return e === null
    ? t
    : (t === null || ((e = Yd(t.key, e, n)), (e.left = t)), e);
}
function I_(t, e, n, r, o) {
  if (t) {
    r(
      "" +
        e +
        (n ? "└── " : "├── ") +
        o(t) +
        `
`
    );
    var l = e + (n ? "    " : "│   ");
    t.left && I_(t.left, l, !1, r, o), t.right && I_(t.right, l, !0, r, o);
  }
}
var U3 = (function () {
  function t(e) {
    e === void 0 && (e = Dz),
      (this._root = null),
      (this._size = 0),
      (this._comparator = e);
  }
  return (
    (t.prototype.insert = function (e, n) {
      return (
        this._size++, (this._root = O2(e, n, this._root, this._comparator))
      );
    }),
    (t.prototype.add = function (e, n) {
      var r = new a0(e, n);
      this._root === null &&
        ((r.left = r.right = null), this._size++, (this._root = r));
      var o = this._comparator,
        l = Yd(e, this._root, o),
        a = o(e, l.key);
      return (
        a === 0
          ? (this._root = l)
          : (a < 0
              ? ((r.left = l.left), (r.right = l), (l.left = null))
              : a > 0 && ((r.right = l.right), (r.left = l), (l.right = null)),
            this._size++,
            (this._root = r)),
        this._root
      );
    }),
    (t.prototype.remove = function (e) {
      this._root = this._remove(e, this._root, this._comparator);
    }),
    (t.prototype._remove = function (e, n, r) {
      var o;
      if (n === null) return null;
      n = Yd(e, n, r);
      var l = r(e, n.key);
      return l === 0
        ? (n.left === null
            ? (o = n.right)
            : ((o = Yd(e, n.left, r)), (o.right = n.right)),
          this._size--,
          o)
        : n;
    }),
    (t.prototype.pop = function () {
      var e = this._root;
      if (e) {
        for (; e.left; ) e = e.left;
        return (
          (this._root = Yd(e.key, this._root, this._comparator)),
          (this._root = this._remove(e.key, this._root, this._comparator)),
          { key: e.key, data: e.data }
        );
      }
      return null;
    }),
    (t.prototype.findStatic = function (e) {
      for (var n = this._root, r = this._comparator; n; ) {
        var o = r(e, n.key);
        if (o === 0) return n;
        o < 0 ? (n = n.left) : (n = n.right);
      }
      return null;
    }),
    (t.prototype.find = function (e) {
      return this._root &&
        ((this._root = Yd(e, this._root, this._comparator)),
        this._comparator(e, this._root.key) !== 0)
        ? null
        : this._root;
    }),
    (t.prototype.contains = function (e) {
      for (var n = this._root, r = this._comparator; n; ) {
        var o = r(e, n.key);
        if (o === 0) return !0;
        o < 0 ? (n = n.left) : (n = n.right);
      }
      return !1;
    }),
    (t.prototype.forEach = function (e, n) {
      for (var r = this._root, o = [], l = !1; !l; )
        r !== null
          ? (o.push(r), (r = r.left))
          : o.length !== 0
          ? ((r = o.pop()), e.call(n, r), (r = r.right))
          : (l = !0);
      return this;
    }),
    (t.prototype.range = function (e, n, r, o) {
      for (
        var l = [], a = this._comparator, h = this._root, f;
        l.length !== 0 || h;

      )
        if (h) l.push(h), (h = h.left);
        else {
          if (((h = l.pop()), (f = a(h.key, n)), f > 0)) break;
          if (a(h.key, e) >= 0 && r.call(o, h)) return this;
          h = h.right;
        }
      return this;
    }),
    (t.prototype.keys = function () {
      var e = [];
      return (
        this.forEach(function (n) {
          var r = n.key;
          return e.push(r);
        }),
        e
      );
    }),
    (t.prototype.values = function () {
      var e = [];
      return (
        this.forEach(function (n) {
          var r = n.data;
          return e.push(r);
        }),
        e
      );
    }),
    (t.prototype.min = function () {
      return this._root ? this.minNode(this._root).key : null;
    }),
    (t.prototype.max = function () {
      return this._root ? this.maxNode(this._root).key : null;
    }),
    (t.prototype.minNode = function (e) {
      if ((e === void 0 && (e = this._root), e)) for (; e.left; ) e = e.left;
      return e;
    }),
    (t.prototype.maxNode = function (e) {
      if ((e === void 0 && (e = this._root), e)) for (; e.right; ) e = e.right;
      return e;
    }),
    (t.prototype.at = function (e) {
      for (var n = this._root, r = !1, o = 0, l = []; !r; )
        if (n) l.push(n), (n = n.left);
        else if (l.length > 0) {
          if (((n = l.pop()), o === e)) return n;
          o++, (n = n.right);
        } else r = !0;
      return null;
    }),
    (t.prototype.next = function (e) {
      var n = this._root,
        r = null;
      if (e.right) {
        for (r = e.right; r.left; ) r = r.left;
        return r;
      }
      for (var o = this._comparator; n; ) {
        var l = o(e.key, n.key);
        if (l === 0) break;
        l < 0 ? ((r = n), (n = n.left)) : (n = n.right);
      }
      return r;
    }),
    (t.prototype.prev = function (e) {
      var n = this._root,
        r = null;
      if (e.left !== null) {
        for (r = e.left; r.right; ) r = r.right;
        return r;
      }
      for (var o = this._comparator; n; ) {
        var l = o(e.key, n.key);
        if (l === 0) break;
        l < 0 ? (n = n.left) : ((r = n), (n = n.right));
      }
      return r;
    }),
    (t.prototype.clear = function () {
      return (this._root = null), (this._size = 0), this;
    }),
    (t.prototype.toList = function () {
      return kz(this._root);
    }),
    (t.prototype.load = function (e, n, r) {
      n === void 0 && (n = []), r === void 0 && (r = !1);
      var o = e.length,
        l = this._comparator;
      if ((r && O_(e, n, 0, o - 1, l), this._root === null))
        (this._root = M_(e, n, 0, o)), (this._size = o);
      else {
        var a = Uz(this.toList(), Fz(e, n), l);
        (o = this._size + o), (this._root = P_({ head: a }, 0, o));
      }
      return this;
    }),
    (t.prototype.isEmpty = function () {
      return this._root === null;
    }),
    Object.defineProperty(t.prototype, "size", {
      get: function () {
        return this._size;
      },
      enumerable: !0,
      configurable: !0,
    }),
    Object.defineProperty(t.prototype, "root", {
      get: function () {
        return this._root;
      },
      enumerable: !0,
      configurable: !0,
    }),
    (t.prototype.toString = function (e) {
      e === void 0 &&
        (e = function (r) {
          return String(r.key);
        });
      var n = [];
      return (
        I_(
          this._root,
          "",
          !0,
          function (r) {
            return n.push(r);
          },
          e
        ),
        n.join("")
      );
    }),
    (t.prototype.update = function (e, n, r) {
      var o = this._comparator,
        l = E6(e, this._root, o),
        a = l.left,
        h = l.right;
      o(e, n) < 0 ? (h = O2(n, r, h, o)) : (a = O2(n, r, a, o)),
        (this._root = Bz(a, h, o));
    }),
    (t.prototype.split = function (e) {
      return E6(e, this._root, this._comparator);
    }),
    (t.prototype[Symbol.iterator] = function () {
      var e, n, r;
      return Lz(this, function (o) {
        switch (o.label) {
          case 0:
            (e = this._root), (n = []), (r = !1), (o.label = 1);
          case 1:
            return r
              ? [3, 6]
              : e === null
              ? [3, 2]
              : (n.push(e), (e = e.left), [3, 5]);
          case 2:
            return n.length === 0 ? [3, 4] : ((e = n.pop()), [4, e]);
          case 3:
            return o.sent(), (e = e.right), [3, 5];
          case 4:
            (r = !0), (o.label = 5);
          case 5:
            return [3, 1];
          case 6:
            return [2];
        }
      });
    }),
    t
  );
})();
function M_(t, e, n, r) {
  var o = r - n;
  if (o > 0) {
    var l = n + Math.floor(o / 2),
      a = t[l],
      h = e[l],
      f = new a0(a, h);
    return (f.left = M_(t, e, n, l)), (f.right = M_(t, e, l + 1, r)), f;
  }
  return null;
}
function Fz(t, e) {
  for (var n = new a0(null, null), r = n, o = 0; o < t.length; o++)
    r = r.next = new a0(t[o], e[o]);
  return (r.next = null), n.next;
}
function kz(t) {
  for (var e = t, n = [], r = !1, o = new a0(null, null), l = o; !r; )
    e
      ? (n.push(e), (e = e.left))
      : n.length > 0
      ? ((e = l = l.next = n.pop()), (e = e.right))
      : (r = !0);
  return (l.next = null), o.next;
}
function P_(t, e, n) {
  var r = n - e;
  if (r > 0) {
    var o = e + Math.floor(r / 2),
      l = P_(t, e, o),
      a = t.head;
    return (a.left = l), (t.head = t.head.next), (a.right = P_(t, o + 1, n)), a;
  }
  return null;
}
function Uz(t, e, n) {
  for (
    var r = new a0(null, null), o = r, l = t, a = e;
    l !== null && a !== null;

  )
    n(l.key, a.key) < 0
      ? ((o.next = l), (l = l.next))
      : ((o.next = a), (a = a.next)),
      (o = o.next);
  return l !== null ? (o.next = l) : a !== null && (o.next = a), r.next;
}
function O_(t, e, n, r, o) {
  if (!(n >= r)) {
    for (var l = t[(n + r) >> 1], a = n - 1, h = r + 1; ; ) {
      do a++;
      while (o(t[a], l) < 0);
      do h--;
      while (o(t[h], l) > 0);
      if (a >= h) break;
      var f = t[a];
      (t[a] = t[h]), (t[h] = f), (f = e[a]), (e[a] = e[h]), (e[h] = f);
    }
    O_(t, e, n, h, o), O_(t, e, h + 1, r, o);
  }
}
const ad = 11102230246251565e-32,
  fs = 134217729,
  zz = (3 + 8 * ad) * ad;
function L2(t, e, n, r, o) {
  let l,
    a,
    h,
    f,
    v = e[0],
    E = r[0],
    x = 0,
    T = 0;
  E > v == E > -v ? ((l = v), (v = e[++x])) : ((l = E), (E = r[++T]));
  let N = 0;
  if (x < t && T < n)
    for (
      E > v == E > -v
        ? ((a = v + l), (h = l - (a - v)), (v = e[++x]))
        : ((a = E + l), (h = l - (a - E)), (E = r[++T])),
        l = a,
        h !== 0 && (o[N++] = h);
      x < t && T < n;

    )
      E > v == E > -v
        ? ((a = l + v), (f = a - l), (h = l - (a - f) + (v - f)), (v = e[++x]))
        : ((a = l + E), (f = a - l), (h = l - (a - f) + (E - f)), (E = r[++T])),
        (l = a),
        h !== 0 && (o[N++] = h);
  for (; x < t; )
    (a = l + v),
      (f = a - l),
      (h = l - (a - f) + (v - f)),
      (v = e[++x]),
      (l = a),
      h !== 0 && (o[N++] = h);
  for (; T < n; )
    (a = l + E),
      (f = a - l),
      (h = l - (a - f) + (E - f)),
      (E = r[++T]),
      (l = a),
      h !== 0 && (o[N++] = h);
  return (l !== 0 || N === 0) && (o[N++] = l), N;
}
function Vz(t, e) {
  let n = e[0];
  for (let r = 1; r < t; r++) n += e[r];
  return n;
}
function V1(t) {
  return new Float64Array(t);
}
const Hz = (3 + 16 * ad) * ad,
  jz = (2 + 12 * ad) * ad,
  Wz = (9 + 64 * ad) * ad * ad,
  ep = V1(4),
  A6 = V1(8),
  T6 = V1(12),
  S6 = V1(16),
  Cs = V1(4);
function Xz(t, e, n, r, o, l, a) {
  let h, f, v, E, x, T, N, I, L, F, X, G, K, Q, ee, Se, ue, ke;
  const ut = t - o,
    Ve = n - o,
    Ae = e - l,
    Be = r - l;
  (Q = ut * Be),
    (T = fs * ut),
    (N = T - (T - ut)),
    (I = ut - N),
    (T = fs * Be),
    (L = T - (T - Be)),
    (F = Be - L),
    (ee = I * F - (Q - N * L - I * L - N * F)),
    (Se = Ae * Ve),
    (T = fs * Ae),
    (N = T - (T - Ae)),
    (I = Ae - N),
    (T = fs * Ve),
    (L = T - (T - Ve)),
    (F = Ve - L),
    (ue = I * F - (Se - N * L - I * L - N * F)),
    (X = ee - ue),
    (x = ee - X),
    (ep[0] = ee - (X + x) + (x - ue)),
    (G = Q + X),
    (x = G - Q),
    (K = Q - (G - x) + (X - x)),
    (X = K - Se),
    (x = K - X),
    (ep[1] = K - (X + x) + (x - Se)),
    (ke = G + X),
    (x = ke - G),
    (ep[2] = G - (ke - x) + (X - x)),
    (ep[3] = ke);
  let He = Vz(4, ep),
    nt = jz * a;
  if (
    He >= nt ||
    -He >= nt ||
    ((x = t - ut),
    (h = t - (ut + x) + (x - o)),
    (x = n - Ve),
    (v = n - (Ve + x) + (x - o)),
    (x = e - Ae),
    (f = e - (Ae + x) + (x - l)),
    (x = r - Be),
    (E = r - (Be + x) + (x - l)),
    h === 0 && f === 0 && v === 0 && E === 0) ||
    ((nt = Wz * a + zz * Math.abs(He)),
    (He += ut * E + Be * h - (Ae * v + Ve * f)),
    He >= nt || -He >= nt)
  )
    return He;
  (Q = h * Be),
    (T = fs * h),
    (N = T - (T - h)),
    (I = h - N),
    (T = fs * Be),
    (L = T - (T - Be)),
    (F = Be - L),
    (ee = I * F - (Q - N * L - I * L - N * F)),
    (Se = f * Ve),
    (T = fs * f),
    (N = T - (T - f)),
    (I = f - N),
    (T = fs * Ve),
    (L = T - (T - Ve)),
    (F = Ve - L),
    (ue = I * F - (Se - N * L - I * L - N * F)),
    (X = ee - ue),
    (x = ee - X),
    (Cs[0] = ee - (X + x) + (x - ue)),
    (G = Q + X),
    (x = G - Q),
    (K = Q - (G - x) + (X - x)),
    (X = K - Se),
    (x = K - X),
    (Cs[1] = K - (X + x) + (x - Se)),
    (ke = G + X),
    (x = ke - G),
    (Cs[2] = G - (ke - x) + (X - x)),
    (Cs[3] = ke);
  const Ut = L2(4, ep, 4, Cs, A6);
  (Q = ut * E),
    (T = fs * ut),
    (N = T - (T - ut)),
    (I = ut - N),
    (T = fs * E),
    (L = T - (T - E)),
    (F = E - L),
    (ee = I * F - (Q - N * L - I * L - N * F)),
    (Se = Ae * v),
    (T = fs * Ae),
    (N = T - (T - Ae)),
    (I = Ae - N),
    (T = fs * v),
    (L = T - (T - v)),
    (F = v - L),
    (ue = I * F - (Se - N * L - I * L - N * F)),
    (X = ee - ue),
    (x = ee - X),
    (Cs[0] = ee - (X + x) + (x - ue)),
    (G = Q + X),
    (x = G - Q),
    (K = Q - (G - x) + (X - x)),
    (X = K - Se),
    (x = K - X),
    (Cs[1] = K - (X + x) + (x - Se)),
    (ke = G + X),
    (x = ke - G),
    (Cs[2] = G - (ke - x) + (X - x)),
    (Cs[3] = ke);
  const Yt = L2(Ut, A6, 4, Cs, T6);
  (Q = h * E),
    (T = fs * h),
    (N = T - (T - h)),
    (I = h - N),
    (T = fs * E),
    (L = T - (T - E)),
    (F = E - L),
    (ee = I * F - (Q - N * L - I * L - N * F)),
    (Se = f * v),
    (T = fs * f),
    (N = T - (T - f)),
    (I = f - N),
    (T = fs * v),
    (L = T - (T - v)),
    (F = v - L),
    (ue = I * F - (Se - N * L - I * L - N * F)),
    (X = ee - ue),
    (x = ee - X),
    (Cs[0] = ee - (X + x) + (x - ue)),
    (G = Q + X),
    (x = G - Q),
    (K = Q - (G - x) + (X - x)),
    (X = K - Se),
    (x = K - X),
    (Cs[1] = K - (X + x) + (x - Se)),
    (ke = G + X),
    (x = ke - G),
    (Cs[2] = G - (ke - x) + (X - x)),
    (Cs[3] = ke);
  const Ht = L2(Yt, T6, 4, Cs, S6);
  return S6[Ht - 1];
}
function Gz(t, e, n, r, o, l) {
  const a = (e - l) * (n - o),
    h = (t - o) * (r - l),
    f = a - h,
    v = Math.abs(a + h);
  return Math.abs(f) >= Hz * v ? f : -Xz(t, e, n, r, o, l, v);
}
var L7 = {};
const Lf = (t, e) =>
    t.ll.x <= e.x && e.x <= t.ur.x && t.ll.y <= e.y && e.y <= t.ur.y,
  L_ = (t, e) => {
    if (
      e.ur.x < t.ll.x ||
      t.ur.x < e.ll.x ||
      e.ur.y < t.ll.y ||
      t.ur.y < e.ll.y
    )
      return null;
    const n = t.ll.x < e.ll.x ? e.ll.x : t.ll.x,
      r = t.ur.x < e.ur.x ? t.ur.x : e.ur.x,
      o = t.ll.y < e.ll.y ? e.ll.y : t.ll.y,
      l = t.ur.y < e.ur.y ? t.ur.y : e.ur.y;
    return { ll: { x: n, y: o }, ur: { x: r, y: l } };
  };
let Kd = Number.EPSILON;
Kd === void 0 && (Kd = Math.pow(2, -52));
const Zz = Kd * Kd,
  w6 = (t, e) => {
    if (-Kd < t && t < Kd && -Kd < e && e < Kd) return 0;
    const n = t - e;
    return n * n < Zz * t * e ? 0 : t < e ? -1 : 1;
  };
class Yz {
  constructor() {
    this.reset();
  }
  reset() {
    (this.xRounder = new C6()), (this.yRounder = new C6());
  }
  round(e, n) {
    return { x: this.xRounder.round(e), y: this.yRounder.round(n) };
  }
}
class C6 {
  constructor() {
    (this.tree = new U3()), this.round(0);
  }
  round(e) {
    const n = this.tree.add(e),
      r = this.tree.prev(n);
    if (r !== null && w6(n.key, r.key) === 0) return this.tree.remove(e), r.key;
    const o = this.tree.next(n);
    return o !== null && w6(n.key, o.key) === 0
      ? (this.tree.remove(e), o.key)
      : e;
  }
}
const w1 = new Yz(),
  dg = (t, e) => t.x * e.y - t.y * e.x,
  D7 = (t, e) => t.x * e.x + t.y * e.y,
  N6 = (t, e, n) => {
    const r = Gz(t.x, t.y, e.x, e.y, n.x, n.y);
    return r > 0 ? -1 : r < 0 ? 1 : 0;
  },
  Kg = (t) => Math.sqrt(D7(t, t)),
  qz = (t, e, n) => {
    const r = { x: e.x - t.x, y: e.y - t.y },
      o = { x: n.x - t.x, y: n.y - t.y };
    return dg(o, r) / Kg(o) / Kg(r);
  },
  $z = (t, e, n) => {
    const r = { x: e.x - t.x, y: e.y - t.y },
      o = { x: n.x - t.x, y: n.y - t.y };
    return D7(o, r) / Kg(o) / Kg(r);
  },
  R6 = (t, e, n) =>
    e.y === 0 ? null : { x: t.x + (e.x / e.y) * (n - t.y), y: n },
  I6 = (t, e, n) =>
    e.x === 0 ? null : { x: n, y: t.y + (e.y / e.x) * (n - t.x) },
  Kz = (t, e, n, r) => {
    if (e.x === 0) return I6(n, r, t.x);
    if (r.x === 0) return I6(t, e, n.x);
    if (e.y === 0) return R6(n, r, t.y);
    if (r.y === 0) return R6(t, e, n.y);
    const o = dg(e, r);
    if (o == 0) return null;
    const l = { x: n.x - t.x, y: n.y - t.y },
      a = dg(l, e) / o,
      h = dg(l, r) / o,
      f = t.x + h * e.x,
      v = n.x + a * r.x,
      E = t.y + h * e.y,
      x = n.y + a * r.y,
      T = (f + v) / 2,
      N = (E + x) / 2;
    return { x: T, y: N };
  };
class ic {
  static compare(e, n) {
    const r = ic.comparePoints(e.point, n.point);
    return r !== 0
      ? r
      : (e.point !== n.point && e.link(n),
        e.isLeft !== n.isLeft
          ? e.isLeft
            ? 1
            : -1
          : t0.compare(e.segment, n.segment));
  }
  static comparePoints(e, n) {
    return e.x < n.x ? -1 : e.x > n.x ? 1 : e.y < n.y ? -1 : e.y > n.y ? 1 : 0;
  }
  constructor(e, n) {
    e.events === void 0 ? (e.events = [this]) : e.events.push(this),
      (this.point = e),
      (this.isLeft = n);
  }
  link(e) {
    if (e.point === this.point)
      throw new Error("Tried to link already linked events");
    const n = e.point.events;
    for (let r = 0, o = n.length; r < o; r++) {
      const l = n[r];
      this.point.events.push(l), (l.point = this.point);
    }
    this.checkForConsuming();
  }
  checkForConsuming() {
    const e = this.point.events.length;
    for (let n = 0; n < e; n++) {
      const r = this.point.events[n];
      if (r.segment.consumedBy === void 0)
        for (let o = n + 1; o < e; o++) {
          const l = this.point.events[o];
          l.consumedBy === void 0 &&
            r.otherSE.point.events === l.otherSE.point.events &&
            r.segment.consume(l.segment);
        }
    }
  }
  getAvailableLinkedEvents() {
    const e = [];
    for (let n = 0, r = this.point.events.length; n < r; n++) {
      const o = this.point.events[n];
      o !== this && !o.segment.ringOut && o.segment.isInResult() && e.push(o);
    }
    return e;
  }
  getLeftmostComparator(e) {
    const n = new Map(),
      r = (o) => {
        const l = o.otherSE;
        n.set(o, {
          sine: qz(this.point, e.point, l.point),
          cosine: $z(this.point, e.point, l.point),
        });
      };
    return (o, l) => {
      n.has(o) || r(o), n.has(l) || r(l);
      const { sine: a, cosine: h } = n.get(o),
        { sine: f, cosine: v } = n.get(l);
      return a >= 0 && f >= 0
        ? h < v
          ? 1
          : h > v
          ? -1
          : 0
        : a < 0 && f < 0
        ? h < v
          ? -1
          : h > v
          ? 1
          : 0
        : f < a
        ? -1
        : f > a
        ? 1
        : 0;
    };
  }
}
let Qz = 0;
class t0 {
  static compare(e, n) {
    const r = e.leftSE.point.x,
      o = n.leftSE.point.x,
      l = e.rightSE.point.x,
      a = n.rightSE.point.x;
    if (a < r) return 1;
    if (l < o) return -1;
    const h = e.leftSE.point.y,
      f = n.leftSE.point.y,
      v = e.rightSE.point.y,
      E = n.rightSE.point.y;
    if (r < o) {
      if (f < h && f < v) return 1;
      if (f > h && f > v) return -1;
      const x = e.comparePoint(n.leftSE.point);
      if (x < 0) return 1;
      if (x > 0) return -1;
      const T = n.comparePoint(e.rightSE.point);
      return T !== 0 ? T : -1;
    }
    if (r > o) {
      if (h < f && h < E) return -1;
      if (h > f && h > E) return 1;
      const x = n.comparePoint(e.leftSE.point);
      if (x !== 0) return x;
      const T = e.comparePoint(n.rightSE.point);
      return T < 0 ? 1 : T > 0 ? -1 : 1;
    }
    if (h < f) return -1;
    if (h > f) return 1;
    if (l < a) {
      const x = n.comparePoint(e.rightSE.point);
      if (x !== 0) return x;
    }
    if (l > a) {
      const x = e.comparePoint(n.rightSE.point);
      if (x < 0) return 1;
      if (x > 0) return -1;
    }
    if (l !== a) {
      const x = v - h,
        T = l - r,
        N = E - f,
        I = a - o;
      if (x > T && N < I) return 1;
      if (x < T && N > I) return -1;
    }
    return l > a
      ? 1
      : l < a || v < E
      ? -1
      : v > E
      ? 1
      : e.id < n.id
      ? -1
      : e.id > n.id
      ? 1
      : 0;
  }
  constructor(e, n, r, o) {
    (this.id = ++Qz),
      (this.leftSE = e),
      (e.segment = this),
      (e.otherSE = n),
      (this.rightSE = n),
      (n.segment = this),
      (n.otherSE = e),
      (this.rings = r),
      (this.windings = o);
  }
  static fromRing(e, n, r) {
    let o, l, a;
    const h = ic.comparePoints(e, n);
    if (h < 0) (o = e), (l = n), (a = 1);
    else if (h > 0) (o = n), (l = e), (a = -1);
    else
      throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);
    const f = new ic(o, !0),
      v = new ic(l, !1);
    return new t0(f, v, [r], [a]);
  }
  replaceRightSE(e) {
    (this.rightSE = e),
      (this.rightSE.segment = this),
      (this.rightSE.otherSE = this.leftSE),
      (this.leftSE.otherSE = this.rightSE);
  }
  bbox() {
    const e = this.leftSE.point.y,
      n = this.rightSE.point.y;
    return {
      ll: { x: this.leftSE.point.x, y: e < n ? e : n },
      ur: { x: this.rightSE.point.x, y: e > n ? e : n },
    };
  }
  vector() {
    return {
      x: this.rightSE.point.x - this.leftSE.point.x,
      y: this.rightSE.point.y - this.leftSE.point.y,
    };
  }
  isAnEndpoint(e) {
    return (
      (e.x === this.leftSE.point.x && e.y === this.leftSE.point.y) ||
      (e.x === this.rightSE.point.x && e.y === this.rightSE.point.y)
    );
  }
  comparePoint(e) {
    if (this.isAnEndpoint(e)) return 0;
    const n = this.leftSE.point,
      r = this.rightSE.point,
      o = this.vector();
    if (n.x === r.x) return e.x === n.x ? 0 : e.x < n.x ? 1 : -1;
    const l = (e.y - n.y) / o.y,
      a = n.x + l * o.x;
    if (e.x === a) return 0;
    const h = (e.x - n.x) / o.x,
      f = n.y + h * o.y;
    return e.y === f ? 0 : e.y < f ? -1 : 1;
  }
  getIntersection(e) {
    const n = this.bbox(),
      r = e.bbox(),
      o = L_(n, r);
    if (o === null) return null;
    const l = this.leftSE.point,
      a = this.rightSE.point,
      h = e.leftSE.point,
      f = e.rightSE.point,
      v = Lf(n, h) && this.comparePoint(h) === 0,
      E = Lf(r, l) && e.comparePoint(l) === 0,
      x = Lf(n, f) && this.comparePoint(f) === 0,
      T = Lf(r, a) && e.comparePoint(a) === 0;
    if (E && v) return T && !x ? a : !T && x ? f : null;
    if (E) return x && l.x === f.x && l.y === f.y ? null : l;
    if (v) return T && a.x === h.x && a.y === h.y ? null : h;
    if (T && x) return null;
    if (T) return a;
    if (x) return f;
    const N = Kz(l, this.vector(), h, e.vector());
    return N === null || !Lf(o, N) ? null : w1.round(N.x, N.y);
  }
  split(e) {
    const n = [],
      r = e.events !== void 0,
      o = new ic(e, !0),
      l = new ic(e, !1),
      a = this.rightSE;
    this.replaceRightSE(l), n.push(l), n.push(o);
    const h = new t0(o, a, this.rings.slice(), this.windings.slice());
    return (
      ic.comparePoints(h.leftSE.point, h.rightSE.point) > 0 && h.swapEvents(),
      ic.comparePoints(this.leftSE.point, this.rightSE.point) > 0 &&
        this.swapEvents(),
      r && (o.checkForConsuming(), l.checkForConsuming()),
      n
    );
  }
  swapEvents() {
    const e = this.rightSE;
    (this.rightSE = this.leftSE),
      (this.leftSE = e),
      (this.leftSE.isLeft = !0),
      (this.rightSE.isLeft = !1);
    for (let n = 0, r = this.windings.length; n < r; n++)
      this.windings[n] *= -1;
  }
  consume(e) {
    let n = this,
      r = e;
    for (; n.consumedBy; ) n = n.consumedBy;
    for (; r.consumedBy; ) r = r.consumedBy;
    const o = t0.compare(n, r);
    if (o !== 0) {
      if (o > 0) {
        const l = n;
        (n = r), (r = l);
      }
      if (n.prev === r) {
        const l = n;
        (n = r), (r = l);
      }
      for (let l = 0, a = r.rings.length; l < a; l++) {
        const h = r.rings[l],
          f = r.windings[l],
          v = n.rings.indexOf(h);
        v === -1 ? (n.rings.push(h), n.windings.push(f)) : (n.windings[v] += f);
      }
      (r.rings = null),
        (r.windings = null),
        (r.consumedBy = n),
        (r.leftSE.consumedBy = n.leftSE),
        (r.rightSE.consumedBy = n.rightSE);
    }
  }
  prevInResult() {
    return this._prevInResult !== void 0
      ? this._prevInResult
      : (this.prev
          ? this.prev.isInResult()
            ? (this._prevInResult = this.prev)
            : (this._prevInResult = this.prev.prevInResult())
          : (this._prevInResult = null),
        this._prevInResult);
  }
  beforeState() {
    if (this._beforeState !== void 0) return this._beforeState;
    if (!this.prev)
      this._beforeState = { rings: [], windings: [], multiPolys: [] };
    else {
      const e = this.prev.consumedBy || this.prev;
      this._beforeState = e.afterState();
    }
    return this._beforeState;
  }
  afterState() {
    if (this._afterState !== void 0) return this._afterState;
    const e = this.beforeState();
    this._afterState = {
      rings: e.rings.slice(0),
      windings: e.windings.slice(0),
      multiPolys: [],
    };
    const n = this._afterState.rings,
      r = this._afterState.windings,
      o = this._afterState.multiPolys;
    for (let h = 0, f = this.rings.length; h < f; h++) {
      const v = this.rings[h],
        E = this.windings[h],
        x = n.indexOf(v);
      x === -1 ? (n.push(v), r.push(E)) : (r[x] += E);
    }
    const l = [],
      a = [];
    for (let h = 0, f = n.length; h < f; h++) {
      if (r[h] === 0) continue;
      const v = n[h],
        E = v.poly;
      if (a.indexOf(E) === -1)
        if (v.isExterior) l.push(E);
        else {
          a.indexOf(E) === -1 && a.push(E);
          const x = l.indexOf(v.poly);
          x !== -1 && l.splice(x, 1);
        }
    }
    for (let h = 0, f = l.length; h < f; h++) {
      const v = l[h].multiPoly;
      o.indexOf(v) === -1 && o.push(v);
    }
    return this._afterState;
  }
  isInResult() {
    if (this.consumedBy) return !1;
    if (this._isInResult !== void 0) return this._isInResult;
    const e = this.beforeState().multiPolys,
      n = this.afterState().multiPolys;
    switch (Fc.type) {
      case "union": {
        const r = e.length === 0,
          o = n.length === 0;
        this._isInResult = r !== o;
        break;
      }
      case "intersection": {
        let r, o;
        e.length < n.length
          ? ((r = e.length), (o = n.length))
          : ((r = n.length), (o = e.length)),
          (this._isInResult = o === Fc.numMultiPolys && r < o);
        break;
      }
      case "xor": {
        const r = Math.abs(e.length - n.length);
        this._isInResult = r % 2 === 1;
        break;
      }
      case "difference": {
        const r = (o) => o.length === 1 && o[0].isSubject;
        this._isInResult = r(e) !== r(n);
        break;
      }
      default:
        throw new Error(`Unrecognized operation type found ${Fc.type}`);
    }
    return this._isInResult;
  }
}
class M6 {
  constructor(e, n, r) {
    if (!Array.isArray(e) || e.length === 0)
      throw new Error("Input geometry is not a valid Polygon or MultiPolygon");
    if (
      ((this.poly = n),
      (this.isExterior = r),
      (this.segments = []),
      typeof e[0][0] != "number" || typeof e[0][1] != "number")
    )
      throw new Error("Input geometry is not a valid Polygon or MultiPolygon");
    const o = w1.round(e[0][0], e[0][1]);
    this.bbox = { ll: { x: o.x, y: o.y }, ur: { x: o.x, y: o.y } };
    let l = o;
    for (let a = 1, h = e.length; a < h; a++) {
      if (typeof e[a][0] != "number" || typeof e[a][1] != "number")
        throw new Error(
          "Input geometry is not a valid Polygon or MultiPolygon"
        );
      let f = w1.round(e[a][0], e[a][1]);
      (f.x === l.x && f.y === l.y) ||
        (this.segments.push(t0.fromRing(l, f, this)),
        f.x < this.bbox.ll.x && (this.bbox.ll.x = f.x),
        f.y < this.bbox.ll.y && (this.bbox.ll.y = f.y),
        f.x > this.bbox.ur.x && (this.bbox.ur.x = f.x),
        f.y > this.bbox.ur.y && (this.bbox.ur.y = f.y),
        (l = f));
    }
    (o.x !== l.x || o.y !== l.y) && this.segments.push(t0.fromRing(l, o, this));
  }
  getSweepEvents() {
    const e = [];
    for (let n = 0, r = this.segments.length; n < r; n++) {
      const o = this.segments[n];
      e.push(o.leftSE), e.push(o.rightSE);
    }
    return e;
  }
}
class Jz {
  constructor(e, n) {
    if (!Array.isArray(e))
      throw new Error("Input geometry is not a valid Polygon or MultiPolygon");
    (this.exteriorRing = new M6(e[0], this, !0)),
      (this.bbox = {
        ll: { x: this.exteriorRing.bbox.ll.x, y: this.exteriorRing.bbox.ll.y },
        ur: { x: this.exteriorRing.bbox.ur.x, y: this.exteriorRing.bbox.ur.y },
      }),
      (this.interiorRings = []);
    for (let r = 1, o = e.length; r < o; r++) {
      const l = new M6(e[r], this, !1);
      l.bbox.ll.x < this.bbox.ll.x && (this.bbox.ll.x = l.bbox.ll.x),
        l.bbox.ll.y < this.bbox.ll.y && (this.bbox.ll.y = l.bbox.ll.y),
        l.bbox.ur.x > this.bbox.ur.x && (this.bbox.ur.x = l.bbox.ur.x),
        l.bbox.ur.y > this.bbox.ur.y && (this.bbox.ur.y = l.bbox.ur.y),
        this.interiorRings.push(l);
    }
    this.multiPoly = n;
  }
  getSweepEvents() {
    const e = this.exteriorRing.getSweepEvents();
    for (let n = 0, r = this.interiorRings.length; n < r; n++) {
      const o = this.interiorRings[n].getSweepEvents();
      for (let l = 0, a = o.length; l < a; l++) e.push(o[l]);
    }
    return e;
  }
}
class P6 {
  constructor(e, n) {
    if (!Array.isArray(e))
      throw new Error("Input geometry is not a valid Polygon or MultiPolygon");
    try {
      typeof e[0][0][0] == "number" && (e = [e]);
    } catch {}
    (this.polys = []),
      (this.bbox = {
        ll: { x: Number.POSITIVE_INFINITY, y: Number.POSITIVE_INFINITY },
        ur: { x: Number.NEGATIVE_INFINITY, y: Number.NEGATIVE_INFINITY },
      });
    for (let r = 0, o = e.length; r < o; r++) {
      const l = new Jz(e[r], this);
      l.bbox.ll.x < this.bbox.ll.x && (this.bbox.ll.x = l.bbox.ll.x),
        l.bbox.ll.y < this.bbox.ll.y && (this.bbox.ll.y = l.bbox.ll.y),
        l.bbox.ur.x > this.bbox.ur.x && (this.bbox.ur.x = l.bbox.ur.x),
        l.bbox.ur.y > this.bbox.ur.y && (this.bbox.ur.y = l.bbox.ur.y),
        this.polys.push(l);
    }
    this.isSubject = n;
  }
  getSweepEvents() {
    const e = [];
    for (let n = 0, r = this.polys.length; n < r; n++) {
      const o = this.polys[n].getSweepEvents();
      for (let l = 0, a = o.length; l < a; l++) e.push(o[l]);
    }
    return e;
  }
}
class Qg {
  static factory(e) {
    const n = [];
    for (let r = 0, o = e.length; r < o; r++) {
      const l = e[r];
      if (!l.isInResult() || l.ringOut) continue;
      let a = null,
        h = l.leftSE,
        f = l.rightSE;
      const v = [h],
        E = h.point,
        x = [];
      for (; (a = h), (h = f), v.push(h), h.point !== E; )
        for (;;) {
          const T = h.getAvailableLinkedEvents();
          if (T.length === 0) {
            const L = v[0].point,
              F = v[v.length - 1].point;
            throw new Error(
              `Unable to complete output ring starting at [${L.x}, ${L.y}]. Last matching segment found ends at [${F.x}, ${F.y}].`
            );
          }
          if (T.length === 1) {
            f = T[0].otherSE;
            break;
          }
          let N = null;
          for (let L = 0, F = x.length; L < F; L++)
            if (x[L].point === h.point) {
              N = L;
              break;
            }
          if (N !== null) {
            const L = x.splice(N)[0],
              F = v.splice(L.index);
            F.unshift(F[0].otherSE), n.push(new Qg(F.reverse()));
            continue;
          }
          x.push({ index: v.length, point: h.point });
          const I = h.getLeftmostComparator(a);
          f = T.sort(I)[0].otherSE;
          break;
        }
      n.push(new Qg(v));
    }
    return n;
  }
  constructor(e) {
    this.events = e;
    for (let n = 0, r = e.length; n < r; n++) e[n].segment.ringOut = this;
    this.poly = null;
  }
  getGeom() {
    let e = this.events[0].point;
    const n = [e];
    for (let v = 1, E = this.events.length - 1; v < E; v++) {
      const x = this.events[v].point,
        T = this.events[v + 1].point;
      N6(x, e, T) !== 0 && (n.push(x), (e = x));
    }
    if (n.length === 1) return null;
    const r = n[0],
      o = n[1];
    N6(r, e, o) === 0 && n.shift(), n.push(n[0]);
    const l = this.isExteriorRing() ? 1 : -1,
      a = this.isExteriorRing() ? 0 : n.length - 1,
      h = this.isExteriorRing() ? n.length : -1,
      f = [];
    for (let v = a; v != h; v += l) f.push([n[v].x, n[v].y]);
    return f;
  }
  isExteriorRing() {
    if (this._isExteriorRing === void 0) {
      const e = this.enclosingRing();
      this._isExteriorRing = e ? !e.isExteriorRing() : !0;
    }
    return this._isExteriorRing;
  }
  enclosingRing() {
    return (
      this._enclosingRing === void 0 &&
        (this._enclosingRing = this._calcEnclosingRing()),
      this._enclosingRing
    );
  }
  _calcEnclosingRing() {
    let e = this.events[0];
    for (let o = 1, l = this.events.length; o < l; o++) {
      const a = this.events[o];
      ic.compare(e, a) > 0 && (e = a);
    }
    let n = e.segment.prevInResult(),
      r = n ? n.prevInResult() : null;
    for (;;) {
      if (!n) return null;
      if (!r) return n.ringOut;
      if (r.ringOut !== n.ringOut)
        return r.ringOut.enclosingRing() !== n.ringOut
          ? n.ringOut
          : n.ringOut.enclosingRing();
      (n = r.prevInResult()), (r = n ? n.prevInResult() : null);
    }
  }
}
class O6 {
  constructor(e) {
    (this.exteriorRing = e), (e.poly = this), (this.interiorRings = []);
  }
  addInterior(e) {
    this.interiorRings.push(e), (e.poly = this);
  }
  getGeom() {
    const e = [this.exteriorRing.getGeom()];
    if (e[0] === null) return null;
    for (let n = 0, r = this.interiorRings.length; n < r; n++) {
      const o = this.interiorRings[n].getGeom();
      o !== null && e.push(o);
    }
    return e;
  }
}
class eV {
  constructor(e) {
    (this.rings = e), (this.polys = this._composePolys(e));
  }
  getGeom() {
    const e = [];
    for (let n = 0, r = this.polys.length; n < r; n++) {
      const o = this.polys[n].getGeom();
      o !== null && e.push(o);
    }
    return e;
  }
  _composePolys(e) {
    const n = [];
    for (let r = 0, o = e.length; r < o; r++) {
      const l = e[r];
      if (!l.poly)
        if (l.isExteriorRing()) n.push(new O6(l));
        else {
          const a = l.enclosingRing();
          a.poly || n.push(new O6(a)), a.poly.addInterior(l);
        }
    }
    return n;
  }
}
class tV {
  constructor(e) {
    let n =
      arguments.length > 1 && arguments[1] !== void 0
        ? arguments[1]
        : t0.compare;
    (this.queue = e), (this.tree = new U3(n)), (this.segments = []);
  }
  process(e) {
    const n = e.segment,
      r = [];
    if (e.consumedBy)
      return e.isLeft ? this.queue.remove(e.otherSE) : this.tree.remove(n), r;
    const o = e.isLeft ? this.tree.add(n) : this.tree.find(n);
    if (!o)
      throw new Error(
        `Unable to find segment #${n.id} [${n.leftSE.point.x}, ${n.leftSE.point.y}] -> [${n.rightSE.point.x}, ${n.rightSE.point.y}] in SweepLine tree.`
      );
    let l = o,
      a = o,
      h,
      f;
    for (; h === void 0; )
      (l = this.tree.prev(l)),
        l === null ? (h = null) : l.key.consumedBy === void 0 && (h = l.key);
    for (; f === void 0; )
      (a = this.tree.next(a)),
        a === null ? (f = null) : a.key.consumedBy === void 0 && (f = a.key);
    if (e.isLeft) {
      let v = null;
      if (h) {
        const x = h.getIntersection(n);
        if (x !== null && (n.isAnEndpoint(x) || (v = x), !h.isAnEndpoint(x))) {
          const T = this._splitSafely(h, x);
          for (let N = 0, I = T.length; N < I; N++) r.push(T[N]);
        }
      }
      let E = null;
      if (f) {
        const x = f.getIntersection(n);
        if (x !== null && (n.isAnEndpoint(x) || (E = x), !f.isAnEndpoint(x))) {
          const T = this._splitSafely(f, x);
          for (let N = 0, I = T.length; N < I; N++) r.push(T[N]);
        }
      }
      if (v !== null || E !== null) {
        let x = null;
        v === null
          ? (x = E)
          : E === null
          ? (x = v)
          : (x = ic.comparePoints(v, E) <= 0 ? v : E),
          this.queue.remove(n.rightSE),
          r.push(n.rightSE);
        const T = n.split(x);
        for (let N = 0, I = T.length; N < I; N++) r.push(T[N]);
      }
      r.length > 0
        ? (this.tree.remove(n), r.push(e))
        : (this.segments.push(n), (n.prev = h));
    } else {
      if (h && f) {
        const v = h.getIntersection(f);
        if (v !== null) {
          if (!h.isAnEndpoint(v)) {
            const E = this._splitSafely(h, v);
            for (let x = 0, T = E.length; x < T; x++) r.push(E[x]);
          }
          if (!f.isAnEndpoint(v)) {
            const E = this._splitSafely(f, v);
            for (let x = 0, T = E.length; x < T; x++) r.push(E[x]);
          }
        }
      }
      this.tree.remove(n);
    }
    return r;
  }
  _splitSafely(e, n) {
    this.tree.remove(e);
    const r = e.rightSE;
    this.queue.remove(r);
    const o = e.split(n);
    return o.push(r), e.consumedBy === void 0 && this.tree.add(e), o;
  }
}
const L6 = (typeof process < "u" && L7.POLYGON_CLIPPING_MAX_QUEUE_SIZE) || 1e6,
  nV =
    (typeof process < "u" && L7.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS) || 1e6;
class rV {
  run(e, n, r) {
    (Fc.type = e), w1.reset();
    const o = [new P6(n, !0)];
    for (let x = 0, T = r.length; x < T; x++) o.push(new P6(r[x], !1));
    if (((Fc.numMultiPolys = o.length), Fc.type === "difference")) {
      const x = o[0];
      let T = 1;
      for (; T < o.length; )
        L_(o[T].bbox, x.bbox) !== null ? T++ : o.splice(T, 1);
    }
    if (Fc.type === "intersection")
      for (let x = 0, T = o.length; x < T; x++) {
        const N = o[x];
        for (let I = x + 1, L = o.length; I < L; I++)
          if (L_(N.bbox, o[I].bbox) === null) return [];
      }
    const l = new U3(ic.compare);
    for (let x = 0, T = o.length; x < T; x++) {
      const N = o[x].getSweepEvents();
      for (let I = 0, L = N.length; I < L; I++)
        if ((l.insert(N[I]), l.size > L6))
          throw new Error(
            "Infinite loop when putting segment endpoints in a priority queue (queue size too big)."
          );
    }
    const a = new tV(l);
    let h = l.size,
      f = l.pop();
    for (; f; ) {
      const x = f.key;
      if (l.size === h) {
        const N = x.segment;
        throw new Error(
          `Unable to pop() ${x.isLeft ? "left" : "right"} SweepEvent [${
            x.point.x
          }, ${x.point.y}] from segment #${N.id} [${N.leftSE.point.x}, ${
            N.leftSE.point.y
          }] -> [${N.rightSE.point.x}, ${N.rightSE.point.y}] from queue.`
        );
      }
      if (l.size > L6)
        throw new Error(
          "Infinite loop when passing sweep line over endpoints (queue size too big)."
        );
      if (a.segments.length > nV)
        throw new Error(
          "Infinite loop when passing sweep line over endpoints (too many sweep line segments)."
        );
      const T = a.process(x);
      for (let N = 0, I = T.length; N < I; N++) {
        const L = T[N];
        L.consumedBy === void 0 && l.insert(L);
      }
      (h = l.size), (f = l.pop());
    }
    w1.reset();
    const v = Qg.factory(a.segments);
    return new eV(v).getGeom();
  }
}
const Fc = new rV(),
  iV = function (t) {
    for (
      var e = arguments.length, n = new Array(e > 1 ? e - 1 : 0), r = 1;
      r < e;
      r++
    )
      n[r - 1] = arguments[r];
    return Fc.run("union", t, n);
  },
  aV = function (t) {
    for (
      var e = arguments.length, n = new Array(e > 1 ? e - 1 : 0), r = 1;
      r < e;
      r++
    )
      n[r - 1] = arguments[r];
    return Fc.run("intersection", t, n);
  },
  oV = function (t) {
    for (
      var e = arguments.length, n = new Array(e > 1 ? e - 1 : 0), r = 1;
      r < e;
      r++
    )
      n[r - 1] = arguments[r];
    return Fc.run("xor", t, n);
  },
  sV = function (t) {
    for (
      var e = arguments.length, n = new Array(e > 1 ? e - 1 : 0), r = 1;
      r < e;
      r++
    )
      n[r - 1] = arguments[r];
    return Fc.run("difference", t, n);
  };
var lV = { union: iV, intersection: aV, xor: oV, difference: sV };
function cV(t, e, n) {
  n === void 0 && (n = {});
  var r = c4(t),
    o = c4(e),
    l = lV.union(r.coordinates, o.coordinates);
  return l.length === 0
    ? null
    : l.length === 1
    ? i3(l[0], n.properties)
    : pS(l, n.properties);
}
class uV {
  getCombineFeature(e) {
    let n = null;
    const r = e[0];
    return (
      e.map((o) => {
        const l = i3(o.coordinates);
        n === null ? (n = l) : (n = cV(n, l));
      }),
      r && (n.properties = mt({}, r)),
      n
    );
  }
}
const Df = "select",
  Bf = "active";
class dV {
  constructor({ layerService: e, tileLayerService: n, parent: r }) {
    R(this, "layerService", void 0),
      R(this, "tileLayerService", void 0),
      R(this, "tileSourceService", void 0),
      R(this, "parent", void 0),
      R(this, "tilePickID", new Map()),
      (this.layerService = e),
      (this.tileLayerService = n),
      (this.parent = r),
      (this.tileSourceService = new uV());
  }
  pickRender(e) {
    const n = this.tileLayerService.getVisibleTileBylngLat(e.lngLat);
    if (n) {
      const r = n.getMainLayer();
      r == null || r.layerPickService.pickRender(e);
    }
  }
  pick(e, n) {
    var r = this;
    return bt(function* () {
      const l = r.parent.getContainer().pickingService;
      if (e.type === "RasterLayer") {
        const a = r.tileLayerService.getVisibleTileBylngLat(n.lngLat);
        if (a && a.getMainLayer() !== void 0) {
          const h = a.getMainLayer();
          return h.layerPickService.pickRasterLayer(h, n, r.parent);
        }
        return !1;
      }
      return r.pickRender(n), l.pickFromPickingFBO(e, n);
    })();
  }
  selectFeature(e) {
    const [n, r, o] = e,
      l = this.color2PickId(n, r, o);
    this.tilePickID.set(Df, l), this.updateHighLight(n, r, o, Df);
  }
  highlightPickedFeature(e) {
    const [n, r, o] = e,
      l = this.color2PickId(n, r, o);
    this.tilePickID.set(Bf, l), this.updateHighLight(n, r, o, Bf);
  }
  updateHighLight(e, n, r, o) {
    this.tileLayerService.tiles.map((l) => {
      const a = l.getMainLayer();
      switch (o) {
        case Df:
          a == null || a.hooks.beforeSelect.call([e, n, r]);
          break;
        case Bf:
          a == null || a.hooks.beforeHighlight.call([e, n, r]);
          break;
      }
    });
  }
  setPickState() {
    const e = this.tilePickID.get(Df),
      n = this.tilePickID.get(Bf);
    if (e) {
      const [r, o, l] = this.pickId2Color(e);
      this.updateHighLight(r, o, l, Df);
      return;
    }
    if (n) {
      const [r, o, l] = this.pickId2Color(n);
      this.updateHighLight(r, o, l, Bf);
      return;
    }
  }
  color2PickId(e, n, r) {
    return K0(new Uint8Array([e, n, r]));
  }
  pickId2Color(e) {
    return Sp(e);
  }
  getFeatureById(e) {
    const n = this.tileLayerService.getTiles().filter((o) => o.visible),
      r = [];
    return (
      n.forEach((o) => {
        r.push(...o.getFeatureById(e));
      }),
      r
    );
  }
  pickRasterLayer() {
    return !1;
  }
}
function hV(t) {
  return t === "PolygonLayer" ? $g : t === "LineLayer" ? xp : qg;
}
function pV(t) {
  return ["PolygonLayer", "LineLayer"].indexOf(t) !== -1;
}
class uh extends _s.EventEmitter {
  constructor(e, n) {
    super(),
      R(this, "x", void 0),
      R(this, "y", void 0),
      R(this, "z", void 0),
      R(this, "key", void 0),
      R(this, "parent", void 0),
      R(this, "sourceTile", void 0),
      R(this, "visible", !0),
      R(this, "layers", []),
      R(this, "isLoaded", !1),
      R(this, "tileMaskLayers", []),
      R(this, "tileMask", void 0),
      (this.parent = n),
      (this.sourceTile = e),
      (this.x = e.x),
      (this.y = e.y),
      (this.z = e.z),
      (this.key = `${this.x}_${this.y}_${this.z}`);
  }
  getLayers() {
    return this.layers;
  }
  styleUpdate(...e) {}
  lnglatInBounds(e) {
    const [n, r, o, l] = this.sourceTile.bounds,
      { lng: a, lat: h } = e;
    return a >= n && a <= o && h >= r && h <= l;
  }
  getLayerOptions() {
    var e;
    const n = this.parent.getLayerConfig();
    return mt(
      mt({}, n),
      {},
      {
        textAllowOverlap: !0,
        autoFit: !1,
        maskLayers: this.getMaskLayer(),
        tileMask: pV(this.parent.type),
        mask:
          n.mask ||
          (((e = n.maskLayers) === null || e === void 0 ? void 0 : e.length) !==
            0 &&
            n.enableMask),
      }
    );
  }
  getMaskLayer() {
    const { maskLayers: e } = this.parent.getLayerConfig(),
      n = [];
    return (
      e == null ||
        e.forEach((r) => {
          if (!r.tileLayer) return n.push(r), r;
          const l = r.tileLayer.getTile(this.sourceTile.key),
            a = l == null ? void 0 : l.getLayers()[0];
          a && n.push(a);
        }),
      n
    );
  }
  addTileMask() {
    var e = this;
    return bt(function* () {
      const n = new $g({ name: "mask", visible: !0, enablePicking: !1 })
          .source(
            { type: "FeatureCollection", features: [e.sourceTile.bboxPolygon] },
            { parser: { type: "geojson", featureId: "id" } }
          )
          .shape("fill")
          .color("#0f0")
          .style({ opacity: 0.5 }),
        r = a1(e.parent.container);
      n.setContainer(r), yield n.init(), (e.tileMask = n);
      const o = e.getMainLayer();
      return o !== void 0 && (o.tileMask = n), n;
    })();
  }
  addMask(e, n) {
    var r = this;
    return bt(function* () {
      const o = a1(r.parent.container);
      n.setContainer(o), yield n.init(), e.addMask(n), r.tileMaskLayers.push(n);
    })();
  }
  addLayer(e) {
    var n = this;
    return bt(function* () {
      e.isTileLayer = !0;
      const r = a1(n.parent.container);
      e.setContainer(r), n.layers.push(e), yield e.init();
    })();
  }
  updateVisible(e) {
    (this.visible = e), this.updateOptions("visible", e);
  }
  updateOptions(e, n) {
    this.layers.forEach((r) => {
      r.updateLayerConfig({ [e]: n });
    });
  }
  getMainLayer() {
    return this.layers[0];
  }
  getFeatures(e) {
    return [];
  }
  getFeatureById(e) {
    return [];
  }
  destroy() {
    var e;
    (e = this.tileMask) === null || e === void 0 || e.destroy(),
      this.layers.forEach((n) => n.destroy());
  }
}
class fV extends uh {
  initTileLayer() {
    var e = this;
    return bt(function* () {
      const n = e.getSourceOption(),
        r = n.data.features[0].properties,
        o = new xp()
          .source(n.data, n.options)
          .size(1)
          .shape("line")
          .color("red"),
        l = new qg({ minZoom: e.z - 1, maxZoom: e.z + 1, textAllowOverlap: !0 })
          .source([r], { parser: { type: "json", x: "x", y: "y" } })
          .size(20)
          .color("red")
          .shape(e.key)
          .style({ stroke: "#fff", strokeWidth: 2 });
      yield e.addLayer(o), yield e.addLayer(l), (e.isLoaded = !0);
    })();
  }
  getSourceOption() {
    const e = this.parent.getSource();
    return {
      data: {
        type: "FeatureCollection",
        features: this.sourceTile.data.layers.testTile.features,
      },
      options: { parser: { type: "geojson" }, transforms: e.transforms },
    };
  }
}
class mV extends uh {
  initTileLayer() {
    var e = this;
    return bt(function* () {
      const n = e.parent.getLayerAttributeConfig(),
        r = e.getLayerOptions(),
        o = e.getSourceOption(),
        l = new Hk(mt({}, r)).source(o.data, o.options);
      n &&
        Object.keys(n).forEach((a) => {
          var h, f;
          const v = a;
          l[v](
            (h = n[v]) === null || h === void 0 ? void 0 : h.field,
            (f = n[v]) === null || f === void 0 ? void 0 : f.values
          );
        }),
        yield e.addLayer(l),
        (e.isLoaded = !0);
    })();
  }
  getSourceOption() {
    const e = this.parent.getSource();
    return {
      data: this.sourceTile.data,
      options: {
        parser: { type: "image", extent: this.sourceTile.bounds },
        transforms: e.transforms,
      },
    };
  }
}
const gV = `layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

out vec4 outputColor;

void main() {
  outputColor = u_color;
  outputColor.a *= u_opacity;
}
`,
  vV = `layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;

layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;
class _V extends qi {
  getUninforms() {
    const e = this.getCommonUniformsInfo(),
      n = this.getUniformsBufferInfo(this.getStyleAttribute());
    return (
      this.updateStyleUnifoms(), mt(mt({}, e.uniformsOption), n.uniformsOption)
    );
  }
  getCommonUniformsInfo() {
    const { opacity: e = 1, color: n = "#000" } = this.layer.getLayerConfig(),
      r = { u_color: Bi(n), u_opacity: e || 1 };
    return this.getUniformsBufferInfo(r);
  }
  initModels() {
    var e = this;
    return bt(function* () {
      return e.buildModels();
    })();
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      return (
        e.initUniformsBuffer(),
        [
          yield e.layer.buildLayerModel({
            moduleName: "mask",
            vertexShader: vV,
            fragmentShader: gV,
            defines: e.getDefines(),
            triangulation: z1,
            depth: { enable: !1 },
            pick: !1,
          }),
        ]
      );
    })();
  }
  clearModels(e = !0) {
    e && this.layerService.clear();
  }
  registerBuiltinAttributes() {
    return "";
  }
}
const yV = { fill: _V };
class B7 extends Vp {
  constructor(...e) {
    super(...e), R(this, "type", "MaskLayer");
  }
  buildModels() {
    var e = this;
    return bt(function* () {
      const n = e.getModelType();
      (e.layerModel = new yV[n](e)), yield e.initLayerModels();
    })();
  }
  getModelType() {
    return "fill";
  }
}
class xV extends uh {
  initTileLayer() {
    var e = this;
    return bt(function* () {
      const n = e.parent.getLayerAttributeConfig(),
        r = e.getLayerOptions(),
        o = e.getSourceOption(),
        l = new B7(mt({}, r)).source(o.data, o.options);
      n &&
        Object.keys(n).forEach((a) => {
          var h, f;
          const v = a;
          l[v](
            (h = n[v]) === null || h === void 0 ? void 0 : h.field,
            (f = n[v]) === null || f === void 0 ? void 0 : f.values
          );
        }),
        yield e.addLayer(l),
        (e.isLoaded = !0);
    })();
  }
  getFeatures(e) {
    return e ? this.sourceTile.data.getTileData(e) : [];
  }
  getSourceOption() {
    const e = this.parent.getSource(),
      { sourceLayer: n, featureId: r } = this.parent.getLayerConfig();
    return {
      data: { type: "FeatureCollection", features: this.getFeatures(n) },
      options: {
        parser: { type: "geojson", featureId: r },
        transforms: e.transforms,
      },
    };
  }
}
const bV = ["rasterData"];
let EV = class extends uh {
  initTileLayer() {
    var e = this;
    return bt(function* () {
      const n = e.parent.getLayerAttributeConfig(),
        r = e.getLayerOptions(),
        o = e.getSourceOption(),
        l = new k3(mt({}, r)).source(o.data, o.options);
      n &&
        Object.keys(n).forEach((a) => {
          var h, f;
          const v = a;
          l[v](
            (h = n[v]) === null || h === void 0 ? void 0 : h.field,
            (f = n[v]) === null || f === void 0 ? void 0 : f.values
          );
        }),
        yield e.addLayer(l),
        (e.isLoaded = !0);
    })();
  }
  getSourceOption() {
    const e = this.parent.getSource(),
      n = this.sourceTile.data.data,
      { rasterData: r } = n,
      o = pc(n, bV);
    return {
      data: r,
      options: {
        parser: mt({ type: "rasterRgb", extent: this.sourceTile.bounds }, o),
        transforms: e.transforms,
      },
    };
  }
};
class AV extends uh {
  initTileLayer() {
    var e = this;
    return bt(function* () {
      const n = e.parent.getLayerAttributeConfig(),
        r = e.getLayerOptions(),
        o = e.getSourceOption(),
        l = new k3(mt({}, r)).source(o.data, o.options);
      n &&
        Object.keys(n).forEach((a) => {
          var h, f;
          const v = a;
          l[v](
            (h = n[v]) === null || h === void 0 ? void 0 : h.field,
            (f = n[v]) === null || f === void 0 ? void 0 : f.values
          );
        }),
        yield e.addLayer(l),
        (e.isLoaded = !0);
    })();
  }
  getSourceOption() {
    const e = this.parent.getSource();
    return {
      data: this.sourceTile.data,
      options: {
        parser: { type: "image", extent: this.sourceTile.bounds },
        transforms: e.transforms,
      },
    };
  }
}
const TV = ["rasterData"],
  SV = { positions: [0, 1], colors: ["#000", "#fff"] };
class wV extends uh {
  constructor(...e) {
    super(...e), R(this, "colorTexture", void 0);
  }
  initTileLayer() {
    var e = this;
    return bt(function* () {
      const n = e.parent.getLayerAttributeConfig(),
        r = e.getLayerOptions(),
        o = e.getSourceOption(),
        { rampColors: l, domain: a } = e.getLayerOptions();
      e.colorTexture = e.parent.textureService.getColorTexture(l, a);
      const h = new k3(
        mt(mt({}, r), {}, { colorTexture: e.colorTexture })
      ).source(o.data, o.options);
      n &&
        Object.keys(n).forEach((f) => {
          var v, E;
          const x = f;
          h[x](
            (v = n[x]) === null || v === void 0 ? void 0 : v.field,
            (E = n[x]) === null || E === void 0 ? void 0 : E.values
          );
        }),
        yield e.addLayer(h),
        (e.isLoaded = !0);
    })();
  }
  getSourceOption() {
    const e = this.parent.getSource(),
      n = this.sourceTile.data.data,
      { rasterData: r } = n,
      o = pc(n, TV);
    return {
      data: r,
      options: {
        parser: mt({ type: "raster", extent: this.sourceTile.bounds }, o),
        transforms: e.transforms,
      },
    };
  }
  styleUpdate(...e) {
    const { rampColors: n = SV, domain: r } = e;
    (this.colorTexture = this.parent.textureService.getColorTexture(
      n,
      r || h3(n)
    )),
      this.layers.forEach((o) => o.style({ colorTexture: this.colorTexture }));
  }
  destroy() {
    this.layers.forEach((e) => e.destroy());
  }
}
class Vm extends uh {
  initTileLayer() {
    var e = this;
    return bt(function* () {
      const n = e.parent.getLayerAttributeConfig(),
        r = e.getLayerOptions(),
        o = hV(e.parent.type),
        l = e.getSourceOption();
      if (!l) {
        (e.isLoaded = !0), e.emit("loaded");
        return;
      }
      const a = new o(mt({}, r)).source(l.data, l.options);
      Object.keys(n).forEach((h) => {
        var f, v;
        const E = h;
        a[E](
          (f = n[E]) === null || f === void 0 ? void 0 : f.field,
          (v = n[E]) === null || v === void 0 ? void 0 : v.values
        );
      }),
        yield e.addLayer(a),
        r.tileMask && (yield e.addTileMask()),
        e.setLayerMinMaxZoom(a),
        (e.isLoaded = !0),
        e.emit("loaded");
    })();
  }
  getSourceOption() {
    const e = this.parent.getSource(),
      { sourceLayer: n = "defaultLayer", featureId: r = "id" } =
        this.parent.getLayerConfig();
    return {
      data: { type: "FeatureCollection", features: this.getFeatures(n) },
      options: {
        parser: { type: "geojson", featureId: r },
        transforms: e.transforms,
      },
    };
  }
  setLayerMinMaxZoom(e) {
    e.getModelType() === "text" &&
      e.updateLayerConfig({ maxZoom: this.z + 1, minZoom: this.z - 1 });
  }
  getFeatures(e) {
    return this.sourceTile.data.getTileData(e);
  }
  getFeatureById(e) {
    const n = this.getMainLayer();
    return n ? n.getSource().data.dataArray.filter((o) => o._id === e) : [];
  }
}
function CV(t) {
  switch (t.type) {
    case "PolygonLayer":
      return Vm;
    case "LineLayer":
      return Vm;
    case "PointLayer":
      return Vm;
    case "TileDebugLayer":
      return fV;
    case "MaskLayer":
      return xV;
    case "RasterLayer":
      const { dataType: n } = t.getSource().parser;
      switch (n) {
        case Jo.RGB:
        case Jo.CUSTOMRGB:
          return EV;
        case Jo.ARRAYBUFFER:
        case Jo.CUSTOMARRAYBUFFER:
          return wV;
        case Jo.TERRAINRGB:
        case Jo.CUSTOMTERRAINRGB:
          return AV;
        default:
          return mV;
      }
    default:
      return Vm;
  }
}
const NV = [
    "shape",
    "color",
    "size",
    "style",
    "animate",
    "filter",
    "rotate",
    "scale",
    "setBlend",
    "setSelect",
    "setActive",
    "disableMask",
    "enableMask",
    "addMask",
    "removeMask",
  ],
  { debounce: RV } = Ka;
class IV {
  constructor(e) {
    R(this, "parent", void 0),
      R(this, "tileLayerService", void 0),
      R(this, "mapService", void 0),
      R(this, "layerService", void 0),
      R(this, "rendererService", void 0),
      R(this, "pickingService", void 0),
      R(this, "tilePickService", void 0),
      R(this, "tilesetManager", void 0),
      R(this, "initedTileset", !1),
      R(this, "lastViewStates", void 0),
      R(this, "mapchange", () => {
        var r;
        if (this.parent.isVisible() === !1) return;
        const { latLonBounds: o, zoom: l } = this.getCurrentView();
        (this.lastViewStates &&
          this.lastViewStates.zoom === l &&
          this.lastViewStates.latLonBounds.toString() === o.toString()) ||
          ((this.lastViewStates = { zoom: l, latLonBounds: o }),
          (r = this.tilesetManager) === null ||
            r === void 0 ||
            r.throttleUpdate(l, o));
      }),
      R(this, "viewchange", RV(this.mapchange, 24)),
      (this.parent = e);
    const n = this.parent.getContainer();
    (this.rendererService = n.rendererService),
      (this.layerService = n.layerService),
      (this.mapService = n.mapService),
      (this.pickingService = n.pickingService),
      (this.tileLayerService = new Oz({
        rendererService: this.rendererService,
        layerService: this.layerService,
        parent: e,
      })),
      (this.tilePickService = new dV({
        tileLayerService: this.tileLayerService,
        layerService: this.layerService,
        parent: e,
      })),
      this.parent.setLayerPickService(this.tilePickService),
      this.proxy(e),
      this.initTileSetManager();
  }
  initTileSetManager() {
    var e;
    const n = this.parent.getSource();
    if (
      ((this.tilesetManager = n.tileset),
      this.initedTileset ||
        (this.bindTilesetEvent(), (this.initedTileset = !0)),
      this.parent.isVisible() === !1)
    )
      return;
    const { latLonBounds: r, zoom: o } = this.getCurrentView();
    (e = this.tilesetManager) === null || e === void 0 || e.update(o, r);
  }
  getCurrentView() {
    const e = this.mapService.getBounds(),
      n = [e[0][0], e[0][1], e[1][0], e[1][1]],
      r = this.mapService.getZoom();
    return { latLonBounds: n, zoom: r };
  }
  bindTilesetEvent() {
    this.tilesetManager.on("tile-loaded", (e) => {}),
      this.tilesetManager.on("tile-unload", (e) => {
        this.tileUnLoad(e);
      }),
      this.tilesetManager.on("tile-error", (e, n) => {
        this.tileError(e);
      }),
      this.tilesetManager.on("tile-update", () => {
        this.tileUpdate();
      }),
      this.mapService.on("zoomend", this.mapchange),
      this.mapService.on("moveend", this.viewchange);
  }
  render() {
    this.tileLayerService.render();
  }
  getLayers() {
    return this.tileLayerService.getLayers();
  }
  getTiles() {
    return this.tileLayerService.getTiles();
  }
  getTile(e) {
    return this.tileLayerService.getTile(e);
  }
  tileLoaded(e) {}
  tileError(e) {
    console.warn("error:", e);
  }
  destroy() {
    var e;
    this.mapService.off("zoomend", this.mapchange),
      this.mapService.off("moveend", this.viewchange),
      (e = this.tilesetManager) === null || e === void 0 || e.destroy(),
      this.tileLayerService.destroy();
  }
  reload() {
    var e;
    this.tilesetManager.clear();
    const { latLonBounds: n, zoom: r } = this.getCurrentView();
    (e = this.tilesetManager) === null || e === void 0 || e.update(r, n);
  }
  tileUnLoad(e) {
    this.tileLayerService.removeTile(e.key);
  }
  tileUpdate() {
    var e = this;
    return bt(function* () {
      if (!e.tilesetManager) return;
      const n = e.parent.getMinZoom(),
        r = e.parent.getMaxZoom(),
        o = e.tilesetManager.tiles
          .filter((l) => l.isLoaded)
          .filter((l) => l.isVisibleChange)
          .filter((l) => l.data)
          .filter((l) => l.z >= n && l.z < r);
      yield Promise.all(
        o.map(
          (function () {
            var l = bt(function* (a) {
              if (e.tileLayerService.hasTile(a.key))
                e.tileLayerService.updateTileVisible(a),
                  e.tilePickService.setPickState(),
                  e.layerService.reRender();
              else {
                const h = CV(e.parent),
                  f = new h(a, e.parent);
                yield f.initTileLayer(),
                  e.tilePickService.setPickState(),
                  f.getLayers().length !== 0 &&
                    (e.tileLayerService.addTile(f),
                    e.tileLayerService.updateTileVisible(a),
                    e.layerService.reRender());
              }
            });
            return function (a) {
              return l.apply(this, arguments);
            };
          })()
        )
      ),
        e.tilesetManager.isLoaded &&
          e.parent.emit("tiles-loaded", e.tilesetManager.currentTiles);
    })();
  }
  setPickState(e) {}
  pickRender(e) {
    this.tilePickService.pickRender(e);
  }
  selectFeature(e) {
    this.tilePickService.selectFeature(e);
  }
  highlightPickedFeature(e) {
    this.tilePickService.highlightPickedFeature(e);
  }
  proxy(e) {
    NV.forEach((n) => {
      const r = e[n].bind(e);
      e[n] = (...o) => (
        r(...o),
        this.getLayers().map((l) => {
          l[n](...o);
        }),
        n === "style" && this.getTiles().forEach((l) => l.styleUpdate(...o)),
        e
      );
    });
  }
}
class MV extends r0 {
  constructor(...e) {
    super(...e),
      R(this, "disabled", void 0),
      R(this, "zoomInButton", void 0),
      R(this, "zoomOutButton", void 0),
      R(this, "zoomNumDiv", void 0),
      R(this, "zoomIn", () => {
        !this.disabled &&
          this.mapsService.getZoom() < this.mapsService.getMaxZoom() &&
          this.mapsService.zoomIn();
      }),
      R(this, "zoomOut", () => {
        !this.disabled &&
          this.mapsService.getZoom() > this.mapsService.getMinZoom() &&
          this.mapsService.zoomOut();
      }),
      R(this, "updateDisabled", () => {
        const n = this.mapsService;
        this.zoomInButton.removeAttribute("disabled"),
          this.zoomOutButton.removeAttribute("disabled"),
          (this.disabled || n.getZoom() <= n.getMinZoom()) &&
            this.zoomOutButton.setAttribute("disabled", "true"),
          this.controlOption.showZoom &&
            this.zoomNumDiv &&
            (this.zoomNumDiv.innerText = String(Math.floor(n.getZoom()))),
          (this.disabled || n.getZoom() >= n.getMaxZoom()) &&
            this.zoomInButton.setAttribute("disabled", "true");
      });
  }
  getDefault(e) {
    return mt(
      mt({}, super.getDefault(e)),
      {},
      {
        position: Cp.BOTTOMRIGHT,
        name: "zoom",
        zoomInText: v_("l7-icon-enlarge"),
        zoomInTitle: "Zoom in",
        zoomOutText: v_("l7-icon-narrow"),
        zoomOutTitle: "Zoom out",
        showZoom: !1,
      }
    );
  }
  setOptions(e) {
    super.setOptions(e),
      this.checkUpdateOption(e, [
        "zoomInText",
        "zoomInTitle",
        "zoomOutText",
        "zoomOutTitle",
        "showZoom",
      ]) && this.resetButtonGroup(this.container);
  }
  onAdd() {
    const e = ma("div", "l7-control-zoom");
    return (
      this.resetButtonGroup(e),
      this.mapsService.on("zoomend", this.updateDisabled),
      this.mapsService.on("zoomchange", this.updateDisabled),
      e
    );
  }
  onRemove() {
    this.mapsService.off("zoomend", this.updateDisabled),
      this.mapsService.off("zoomchange", this.updateDisabled);
  }
  disable() {
    return (this.disabled = !0), this.updateDisabled(), this;
  }
  enable() {
    return (this.disabled = !1), this.updateDisabled(), this;
  }
  resetButtonGroup(e) {
    P1(e),
      (this.zoomInButton = this.createButton(
        this.controlOption.zoomInText,
        this.controlOption.zoomInTitle,
        "l7-button-control",
        e,
        this.zoomIn
      )),
      this.controlOption.showZoom &&
        (this.zoomNumDiv = this.createButton(
          "0",
          "",
          "l7-button-control l7-control-zoom__number",
          e
        )),
      (this.zoomOutButton = this.createButton(
        this.controlOption.zoomOutText,
        this.controlOption.zoomOutTitle,
        "l7-button-control",
        e,
        this.zoomOut
      )),
      this.updateDisabled();
  }
  createButton(e, n, r, o, l) {
    const a = ma("button", r, o);
    return (
      typeof e == "string" ? (a.innerHTML = e) : a.append(e),
      (a.title = n),
      l && a.addEventListener("click", l),
      a
    );
  }
}
class qY extends _s.EventEmitter {
  get lngLat() {
    var e;
    return (e = this.popupOption.lngLat) !== null && e !== void 0
      ? e
      : { lng: 0, lat: 0 };
  }
  set lngLat(e) {
    this.popupOption.lngLat = e;
  }
  constructor(e) {
    super(),
      R(this, "popupOption", void 0),
      R(this, "mapsService", void 0),
      R(this, "sceneService", void 0),
      R(this, "layerService", void 0),
      R(this, "scene", void 0),
      R(this, "closeButton", void 0),
      R(this, "container", void 0),
      R(this, "content", void 0),
      R(this, "contentTitle", void 0),
      R(this, "contentPanel", void 0),
      R(this, "tip", void 0),
      R(this, "isShow", !0),
      R(this, "onMouseMove", (r) => {
        var o;
        const l = this.mapsService.getMapContainer(),
          { left: a = 0, top: h = 0 } =
            (o = l == null ? void 0 : l.getBoundingClientRect()) !== null &&
            o !== void 0
              ? o
              : {};
        this.setPopupPosition(r.clientX - a, r.clientY - h);
      }),
      R(this, "updateLngLatPosition", () => {
        if (!this.mapsService || this.popupOption.followCursor) return;
        const { lng: r, lat: o } = this.lngLat,
          { x: l, y: a } = this.mapsService.lngLatToContainer([r, o]);
        this.setPopupPosition(l, a);
      }),
      R(this, "updateLngLatPositionWhenZoom", (r) => {
        if (!this.mapsService || this.popupOption.followCursor) return;
        const o = r.map,
          l = o.getSize();
        (l.x = l.x / 2), (l.y = l.y / 2);
        const a = r.center,
          h = r.zoom,
          f = o.DE(this.lngLat, h, a);
        (f.x = Math.round(f.x)),
          (f.y = Math.round(f.y)),
          this.setPopupPosition(f.x, f.y, !0);
      }),
      R(this, "onKeyDown", (r) => {
        r.keyCode === 27 && this.remove();
      }),
      R(this, "onCloseButtonClick", (r) => {
        r.stopPropagation && r.stopPropagation(), this.hide();
      }),
      R(this, "updatePosition", (r, o = !0) => {
        const l = !!this.lngLat,
          {
            className: a,
            style: h,
            maxWidth: f,
            anchor: v,
            stopPropagation: E,
          } = this.popupOption;
        if (!this.mapsService || !l || !this.content) return;
        const x = this.mapsService.getMarkerContainer();
        if (
          (!this.container &&
            x &&
            ((this.container = ma(
              "div",
              `l7-popup ${a ?? ""} ${this.isShow ? "" : "l7-popup-hide"}`,
              x
            )),
            h && this.container.setAttribute("style", h),
            (this.tip = ma("div", "l7-popup-tip", this.container)),
            this.container.appendChild(this.content),
            E &&
              [
                "mousemove",
                "mousedown",
                "mouseup",
                "click",
                "dblclick",
              ].forEach((T) => {
                this.container.addEventListener(T, (N) => {
                  N.stopPropagation();
                });
              }),
            (this.container.style.whiteSpace = "nowrap")),
          o
            ? this.updateLngLatPositionWhenZoom(r)
            : this.updateLngLatPosition(),
          NE(this.container, `${Tg[v]}`),
          lE(this.container, v, "popup"),
          f)
        ) {
          const { width: T } = this.container.getBoundingClientRect();
          T > parseFloat(f) && (this.container.style.width = f);
        } else this.container.style.removeProperty("width");
      }),
      R(this, "updateWhenZoom", (r) => {
        this.updatePosition(r, !0);
      }),
      R(this, "update", () => {
        this.updatePosition(null, !1);
      }),
      (this.popupOption = mt(mt({}, this.getDefault(e ?? {})), e));
    const { lngLat: n } = this.popupOption;
    n && (this.lngLat = n);
  }
  getIsShow() {
    return this.isShow;
  }
  addTo(e) {
    (this.mapsService = e.mapService),
      (this.sceneService = e.sceneService),
      (this.layerService = e.layerService),
      this.mapsService.on("camerachange", this.update),
      this.mapsService.on("viewchange", this.update),
      (this.scene = e),
      this.update(),
      this.updateCloseOnClick(),
      this.updateCloseOnEsc(),
      this.updateFollowCursor();
    const { html: n, text: r, title: o } = this.popupOption;
    return (
      n ? this.setHTML(n) : r && this.setText(r),
      o && this.setTitle(o),
      this.emit("open"),
      this
    );
  }
  remove() {
    if (this !== null && this !== void 0 && this.isOpen())
      return (
        this.content && Dc(this.content),
        this.container && (Dc(this.container), delete this.container),
        this.mapsService &&
          (this.mapsService.off("camerachange", this.update),
          this.mapsService.off("viewchange", this.update),
          this.updateCloseOnClick(!0),
          this.updateCloseOnEsc(!0),
          this.updateFollowCursor(!0),
          delete this.mapsService),
        this.emit("close"),
        this
      );
  }
  getOptions() {
    return this.popupOption;
  }
  setOptions(e) {
    this.show();
    const { className: n } = this.popupOption;
    if (
      ((this.popupOption = mt(mt({}, this.popupOption), e)),
      this.checkUpdateOption(e, [
        "html",
        "text",
        "title",
        "closeButton",
        "closeButtonOffsets",
        "maxWidth",
        "anchor",
        "stopPropagation",
        "lngLat",
        "offsets",
      ]) &&
        (this.container && (Dc(this.container), (this.container = void 0)),
        this.popupOption.html
          ? this.setHTML(this.popupOption.html)
          : this.popupOption.text && this.setText(this.popupOption.text),
        this.popupOption.title && this.setTitle(this.popupOption.title)),
      this.checkUpdateOption(e, ["closeOnEsc"]) && this.updateCloseOnEsc(),
      this.checkUpdateOption(e, ["closeOnClick"]) && this.updateCloseOnClick(),
      this.checkUpdateOption(e, ["followCursor"]) && this.updateFollowCursor(),
      this.checkUpdateOption(e, ["html"]) && e.html
        ? this.setHTML(e.html)
        : this.checkUpdateOption(e, ["text"]) && e.text && this.setText(e.text),
      this.checkUpdateOption(e, ["className"]))
    ) {
      var r;
      n && this.container.classList.remove(n ?? ""),
        this.container.classList.add(
          (r = e.className) !== null && r !== void 0 ? r : ""
        );
    }
    if (this.checkUpdateOption(e, ["style"])) {
      var o;
      f3(this.container, (o = e.style) !== null && o !== void 0 ? o : "");
    }
    return (
      this.checkUpdateOption(e, ["lngLat"]) &&
        e.lngLat &&
        this.setLnglat(e.lngLat),
      this
    );
  }
  open() {
    return this.addTo(this.scene), this;
  }
  close() {
    return this.remove(), this;
  }
  show() {
    if (!this.isShow)
      return (
        this.container && Cg(this.container, "l7-popup-hide"),
        (this.isShow = !0),
        this.emit("show"),
        this
      );
  }
  hide() {
    if (this.isShow)
      return (
        this.container && Jd(this.container, "l7-popup-hide"),
        (this.isShow = !1),
        this.emit("hide"),
        this
      );
  }
  setHTML(e) {
    return (this.popupOption.html = e), this.setDOMContent(e);
  }
  setText(e) {
    return (
      (this.popupOption.text = e),
      this.setDOMContent(window.document.createTextNode(e))
    );
  }
  setTitle(e) {
    this.show(),
      (this.popupOption.title = e),
      e
        ? (this.contentTitle ||
            ((this.contentTitle = ma("div", "l7-popup-content__title")),
            this.content.firstChild
              ? this.content.insertBefore(
                  this.contentTitle,
                  this.content.firstChild
                )
              : this.content.append(this.contentTitle)),
          P1(this.contentTitle),
          S4(this.contentTitle, e))
        : this.contentTitle &&
          (Dc(this.contentTitle), (this.contentTitle = void 0));
  }
  panToPopup() {
    const { lng: e, lat: n } = this.lngLat;
    return this.popupOption.autoPan && this.mapsService.panTo([e, n]), this;
  }
  setLngLat(e) {
    return this.setLnglat(e);
  }
  setLnglat(e) {
    return (
      this.show(),
      (this.lngLat = e),
      Array.isArray(e) && (this.lngLat = { lng: e[0], lat: e[1] }),
      this.mapsService &&
        (this.mapsService.off("camerachange", this.update),
        this.mapsService.off("viewchange", this.update),
        this.mapsService.on("camerachange", this.update),
        this.mapsService.on("viewchange", this.update)),
      this.update(),
      this.popupOption.autoPan &&
        setTimeout(() => {
          this.panToPopup();
        }, 0),
      this
    );
  }
  getLnglat() {
    return this.lngLat;
  }
  setMaxWidth(e) {
    return (this.popupOption.maxWidth = e), this.update(), this;
  }
  isOpen() {
    return !!this.mapsService;
  }
  getDefault(e) {
    return {
      closeButton: !0,
      closeOnClick: !1,
      maxWidth: "240px",
      offsets: [0, 0],
      anchor: uv.BOTTOM,
      stopPropagation: !0,
      autoPan: !1,
      autoClose: !0,
      closeOnEsc: !1,
      followCursor: !1,
    };
  }
  setDOMContent(e) {
    return (
      this.show(),
      this.createContent(),
      S4(this.contentPanel, e),
      this.update(),
      this
    );
  }
  updateCloseOnClick(e) {
    const n = this.mapsService;
    n &&
      (n == null || n.off("click", this.onCloseButtonClick),
      this.popupOption.closeOnClick &&
        !e &&
        requestAnimationFrame(() => {
          n == null || n.on("click", this.onCloseButtonClick);
        }));
  }
  updateCloseOnEsc(e) {
    window.removeEventListener("keydown", this.onKeyDown),
      this.popupOption.closeOnEsc &&
        !e &&
        window.addEventListener("keydown", this.onKeyDown);
  }
  updateFollowCursor(e) {
    var n;
    const r =
      (n = this.mapsService) === null || n === void 0
        ? void 0
        : n.getContainer();
    r &&
      (r == null || r.removeEventListener("mousemove", this.onMouseMove),
      this.popupOption.followCursor &&
        !e &&
        (r == null || r.addEventListener("mousemove", this.onMouseMove)));
  }
  createContent() {
    if (
      (this.content && Dc(this.content),
      (this.contentTitle = void 0),
      (this.content = ma("div", "l7-popup-content", this.container)),
      this.setTitle(this.popupOption.title),
      this.popupOption.closeButton)
    ) {
      const e = v_("l7-icon-guanbi");
      Jd(e, "l7-popup-close-button"),
        this.content.appendChild(e),
        this.popupOption.closeButtonOffsets &&
          ((e.style.right = this.popupOption.closeButtonOffsets[0] + "px"),
          (e.style.top = this.popupOption.closeButtonOffsets[1] + "px")),
        e.setAttribute("aria-label", "Close popup"),
        e.addEventListener("click", () => {
          this.hide();
        }),
        e.addEventListener("pointerup", (n) => {
          n.stopPropagation();
        }),
        e.addEventListener("pointerdown", (n) => {
          n.stopPropagation();
        }),
        (this.closeButton = e);
    } else this.closeButton = void 0;
    this.contentPanel = ma("div", "l7-popup-content__panel", this.content);
  }
  setPopupPosition(e, n, r = !1) {
    if (this.container) {
      const { offsets: o } = this.popupOption;
      (this.container.style.left = e + o[0] + "px"),
        (this.container.style.top = n - o[1] + "px"),
        r
          ? (this.container.style.transition =
              "left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)")
          : (this.container.style.transition = "");
    }
  }
  checkUpdateOption(e, n) {
    return n.some((r) => r in e);
  }
}
function PV(t, e) {
  var n =
      typeof my < "u" &&
      !!my &&
      typeof my.showToast == "function" &&
      my.isFRM !== !0,
    r =
      typeof wx < "u" &&
      wx !== null &&
      (typeof wx.request < "u" || typeof wx.miniProgram < "u");
  if (!(n || r) && (e || (e = document), !!e)) {
    var o = e.head || e.getElementsByTagName("head")[0];
    if (!o) {
      o = e.createElement("head");
      var l = e.body || e.getElementsByTagName("body")[0];
      l ? l.parentNode.insertBefore(o, l) : e.documentElement.appendChild(o);
    }
    var a = e.createElement("style");
    return (
      (a.type = "text/css"),
      a.styleSheet
        ? (a.styleSheet.cssText = t)
        : a.appendChild(e.createTextNode(t)),
      o.appendChild(a),
      a
    );
  }
}
PV(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font:
    12px 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 999;
  box-sizing: border-box;
}
.l7-control-container {
  font:
    12px/1.5 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 999;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: flex;
  justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  align-items: flex-end;
}
.l7-control-container .l7-column {
  flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 6px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  align-items: flex-start;
}
.l7-popper.l7-popper-end {
  align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  display: flex;
  align-items: center;
  height: 24px;
  padding: 0 16px;
  font-size: 12px;
  line-height: 24px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  width: 14px;
  height: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  box-sizing: content-box;
  max-width: 460px;
  max-height: 400px;
  margin: 12px 0 0 12px;
  overflow-x: hidden;
  overflow-y: auto;
}
.l7-select-control--image .l7-select-control-item {
  position: relative;
  display: flex;
  flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
  flex-direction: column;
  justify-content: center;
  box-sizing: content-box;
  margin-right: 12px;
  margin-bottom: 12px;
  overflow: hidden;
  font-size: 12px;
  border: 1px solid #fff;
  border-radius: 2px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 100%;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  overflow: hidden;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-control-zoom .l7-button-control {
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  border-radius: 0;
  box-shadow: 0 0 0;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:last-child {
  border-bottom: 0;
}
.l7-control-zoom .l7-control-zoom__number {
  color: #595959;
  padding: 0;
}
.l7-control-zoom .l7-control-zoom__number:hover {
  background-color: #fff;
}
.l7-control-scale {
  display: flex;
  flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: flex;
  align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
.l7-control-swipe {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 6;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  touch-action: none;
}
.l7-control-swipe_hide {
  display: none;
}
.l7-control-swipe:before {
  position: absolute;
  top: -5000px;
  bottom: -5000px;
  left: 50%;
  z-index: -1;
  width: 4px;
  background: #fff;
  -webkit-transform: translate(-2px, 0);
          transform: translate(-2px, 0);
  content: '';
}
.l7-control-swipe.horizontal:before {
  top: 50%;
  right: -5000px;
  bottom: auto;
  left: -5000px;
  width: auto;
  height: 4px;
}
.l7-control-swipe__button {
  display: block;
  width: 28px;
  height: 28px;
  margin: 0;
  padding: 0;
  color: #595959;
  font-weight: bold;
  font-size: inherit;
  text-align: center;
  text-decoration: none;
  background-color: #fff;
  border: none;
  border-radius: 2px;
  outline: none;
}
.l7-control-swipe,
.l7-control-swipe__button {
  cursor: ew-resize;
}
.l7-control-swipe.horizontal,
.l7-control-swipe.horizontal button {
  cursor: ns-resize;
}
.l7-control-swipe:after,
.l7-control-swipe__button:before,
.l7-control-swipe__button:after {
  position: absolute;
  top: 25%;
  bottom: 25%;
  left: 50%;
  width: 2px;
  background: currentColor;
  -webkit-transform: translate(-1px, 0);
          transform: translate(-1px, 0);
  content: '';
}
.l7-control-swipe__button:after {
  -webkit-transform: translateX(4px);
          transform: translateX(4px);
}
.l7-control-swipe__button:before {
  -webkit-transform: translateX(-6px);
          transform: translateX(-6px);
}
`);
class z3 {
  constructor(e) {
    R(this, "configService", void 0),
      R(this, "config", void 0),
      (this.config = e);
  }
  setContainer(e, n) {
    (this.configService = e.globalConfigService),
      (e.mapConfig = mt(mt({}, this.config), {}, { id: n })),
      (e.mapService = new (this.getServiceConstructor())(e));
  }
  getServiceConstructor() {
    throw new Error("Method not implemented.");
  }
}
var F7 = { exports: {} };
(function (t, e) {
  (function (n, r) {
    t.exports = r();
  })(cv, function () {
    function n(x) {
      var T = [];
      return (
        x.AMapUI && T.push(r(x.AMapUI)),
        x.Loca && T.push(o(x.Loca)),
        Promise.all(T)
      );
    }
    function r(x) {
      return new Promise(function (T, N) {
        var I = [];
        if (x.plugins)
          for (var L = 0; L < x.plugins.length; L += 1)
            a.AMapUI.plugins.indexOf(x.plugins[L]) == -1 &&
              I.push(x.plugins[L]);
        if (h.AMapUI === l.failed) N("前次请求 AMapUI 失败");
        else if (h.AMapUI === l.notload) {
          (h.AMapUI = l.loading),
            (a.AMapUI.version = x.version || a.AMapUI.version),
            (L = a.AMapUI.version);
          var F = document.body || document.head,
            X = document.createElement("script");
          (X.type = "text/javascript"),
            (X.src = "https://webapi.amap.com/ui/" + L + "/main.js"),
            (X.onerror = function (G) {
              (h.AMapUI = l.failed), N("请求 AMapUI 失败");
            }),
            (X.onload = function () {
              if (((h.AMapUI = l.loaded), I.length))
                window.AMapUI.loadUI(I, function () {
                  for (var G = 0, K = I.length; G < K; G++) {
                    var Q = I[G].split("/").slice(-1)[0];
                    window.AMapUI[Q] = arguments[G];
                  }
                  for (T(); f.AMapUI.length; ) f.AMapUI.splice(0, 1)[0]();
                });
              else for (T(); f.AMapUI.length; ) f.AMapUI.splice(0, 1)[0]();
            }),
            F.appendChild(X);
        } else
          h.AMapUI === l.loaded
            ? x.version && x.version !== a.AMapUI.version
              ? N("不允许多个版本 AMapUI 混用")
              : I.length
              ? window.AMapUI.loadUI(I, function () {
                  for (var G = 0, K = I.length; G < K; G++) {
                    var Q = I[G].split("/").slice(-1)[0];
                    window.AMapUI[Q] = arguments[G];
                  }
                  T();
                })
              : T()
            : x.version && x.version !== a.AMapUI.version
            ? N("不允许多个版本 AMapUI 混用")
            : f.AMapUI.push(function (G) {
                G
                  ? N(G)
                  : I.length
                  ? window.AMapUI.loadUI(I, function () {
                      for (var K = 0, Q = I.length; K < Q; K++) {
                        var ee = I[K].split("/").slice(-1)[0];
                        window.AMapUI[ee] = arguments[K];
                      }
                      T();
                    })
                  : T();
              });
      });
    }
    function o(x) {
      return new Promise(function (T, N) {
        if (h.Loca === l.failed) N("前次请求 Loca 失败");
        else if (h.Loca === l.notload) {
          (h.Loca = l.loading), (a.Loca.version = x.version || a.Loca.version);
          var I = a.Loca.version,
            L = a.AMap.version.startsWith("2"),
            F = I.startsWith("2");
          if ((L && !F) || (!L && F)) N("JSAPI 与 Loca 版本不对应！！");
          else {
            (L = a.key), (F = document.body || document.head);
            var X = document.createElement("script");
            (X.type = "text/javascript"),
              (X.src = "https://webapi.amap.com/loca?v=" + I + "&key=" + L),
              (X.onerror = function (G) {
                (h.Loca = l.failed), N("请求 AMapUI 失败");
              }),
              (X.onload = function () {
                for (h.Loca = l.loaded, T(); f.Loca.length; )
                  f.Loca.splice(0, 1)[0]();
              }),
              F.appendChild(X);
          }
        } else
          h.Loca === l.loaded
            ? x.version && x.version !== a.Loca.version
              ? N("不允许多个版本 Loca 混用")
              : T()
            : x.version && x.version !== a.Loca.version
            ? N("不允许多个版本 Loca 混用")
            : f.Loca.push(function (G) {
                G ? N(G) : N();
              });
      });
    }
    if (!window) throw Error("AMap JSAPI can only be used in Browser.");
    var l;
    (function (x) {
      (x.notload = "notload"),
        (x.loading = "loading"),
        (x.loaded = "loaded"),
        (x.failed = "failed");
    })(l || (l = {}));
    var a = {
        key: "",
        AMap: { version: "1.4.15", plugins: [] },
        AMapUI: { version: "1.1", plugins: [] },
        Loca: { version: "1.3.2" },
      },
      h = { AMap: l.notload, AMapUI: l.notload, Loca: l.notload },
      f = { AMap: [], AMapUI: [], Loca: [] },
      v = [],
      E = function (x) {
        typeof x == "function" &&
          (h.AMap === l.loaded ? x(window.AMap) : v.push(x));
      };
    return {
      load: function (x) {
        return new Promise(function (T, N) {
          if (h.AMap == l.failed) N("");
          else if (h.AMap == l.notload) {
            var I = x.key,
              L = x.version,
              F = x.plugins;
            I
              ? (window.AMap &&
                  location.host !== "lbs.amap.com" &&
                  N("禁止多种API加载方式混用"),
                (a.key = I),
                (a.AMap.version = L || a.AMap.version),
                (a.AMap.plugins = F || a.AMap.plugins),
                (h.AMap = l.loading),
                (L = document.body || document.head),
                (window.___onAPILoaded = function (G) {
                  if ((delete window.___onAPILoaded, G))
                    (h.AMap = l.failed), N(G);
                  else
                    for (
                      h.AMap = l.loaded,
                        n(x)
                          .then(function () {
                            T(window.AMap);
                          })
                          .catch(N);
                      v.length;

                    )
                      v.splice(0, 1)[0]();
                }),
                (F = document.createElement("script")),
                (F.type = "text/javascript"),
                (F.src =
                  "https://webapi.amap.com/maps?callback=___onAPILoaded&v=" +
                  a.AMap.version +
                  "&key=" +
                  I +
                  "&plugin=" +
                  a.AMap.plugins.join(",")),
                (F.onerror = function (G) {
                  (h.AMap = l.failed), N(G);
                }),
                L.appendChild(F))
              : N("请填写key");
          } else if (h.AMap == l.loaded)
            if (x.key && x.key !== a.key) N("多个不一致的 key");
            else if (x.version && x.version !== a.AMap.version)
              N("不允许多个版本 JSAPI 混用");
            else {
              if (((I = []), x.plugins))
                for (L = 0; L < x.plugins.length; L += 1)
                  a.AMap.plugins.indexOf(x.plugins[L]) == -1 &&
                    I.push(x.plugins[L]);
              I.length
                ? window.AMap.plugin(I, function () {
                    n(x)
                      .then(function () {
                        T(window.AMap);
                      })
                      .catch(N);
                  })
                : n(x)
                    .then(function () {
                      T(window.AMap);
                    })
                    .catch(N);
            }
          else if (x.key && x.key !== a.key) N("多个不一致的 key");
          else if (x.version && x.version !== a.AMap.version)
            N("不允许多个版本 JSAPI 混用");
          else {
            var X = [];
            if (x.plugins)
              for (L = 0; L < x.plugins.length; L += 1)
                a.AMap.plugins.indexOf(x.plugins[L]) == -1 &&
                  X.push(x.plugins[L]);
            E(function () {
              X.length
                ? window.AMap.plugin(X, function () {
                    n(x)
                      .then(function () {
                        T(window.AMap);
                      })
                      .catch(N);
                  })
                : n(x)
                    .then(function () {
                      T(window.AMap);
                    })
                    .catch(N);
            });
          }
        });
      },
      reset: function () {
        delete window.AMap,
          delete window.AMapUI,
          delete window.Loca,
          (a = {
            key: "",
            AMap: { version: "1.4.15", plugins: [] },
            AMapUI: { version: "1.1", plugins: [] },
            Loca: { version: "1.3.2" },
          }),
          (h = { AMap: l.notload, AMapUI: l.notload, Loca: l.notload }),
          (f = { AMap: [], AMapUI: [], Loca: [] });
      },
    };
  });
})(F7);
var OV = F7.exports;
const LV = ea(OV);
class k7 {
  constructor(e) {
    R(this, "size", 1e4), (this.size = e || 1e4);
  }
  setSize(e) {
    this.size = e;
  }
  getSize() {
    return [this.size, this.size];
  }
  mercatorXfromLng(e) {
    return ((180 + e) / 360) * this.size;
  }
  mercatorYfromLat(e) {
    return (
      (1 -
        (180 -
          (180 / Math.PI) *
            Math.log(Math.tan(Math.PI / 4 + (e * Math.PI) / 360))) /
          360) *
      this.size
    );
  }
  lngFromMercatorX(e) {
    return (e / this.size) * 360 - 180;
  }
  latFromMercatorY(e) {
    const n = 180 - (1 - e / this.size) * 360;
    return (360 / Math.PI) * Math.atan(Math.exp((n * Math.PI) / 180)) - 90;
  }
  project(e) {
    const n = this.mercatorXfromLng(e[0]),
      r = this.mercatorYfromLat(e[1]);
    return [n, r];
  }
  unproject(e) {
    const n = this.lngFromMercatorX(e[0]),
      r = this.latFromMercatorY(e[1]);
    return [n, r];
  }
}
const DV = 12;
class BV {
  constructor(e) {
    R(this, "map", void 0),
      R(this, "simpleMapCoord", new k7()),
      R(this, "bgColor", "rgba(0.0, 0.0, 0.0, 0.0)"),
      R(this, "config", void 0),
      R(this, "configService", void 0),
      R(this, "coordinateSystemService", void 0),
      R(this, "eventEmitter", void 0),
      R(this, "markerContainer", void 0),
      R(this, "mapContainer", void 0),
      R(this, "cameraChangedCallback", void 0),
      (this.config = e.mapConfig),
      (this.configService = e.globalConfigService),
      (this.coordinateSystemService = e.coordinateSystemService),
      (this.eventEmitter = new _s.EventEmitter());
  }
  onCameraChanged(e) {
    this.cameraChangedCallback = e;
  }
  updateView(e) {
    var n;
    this.emit("mapchange"),
      this.viewport.syncWithMapCamera({
        bearing: e.bearing,
        center: e.center,
        viewportHeight: e.viewportHeight,
        pitch: e.pitch,
        viewportWidth: e.viewportWidth,
        zoom: e.zoom,
      }),
      this.updateCoordinateSystemService(),
      (n = this.cameraChangedCallback) === null ||
        n === void 0 ||
        n.call(this, this.viewport);
  }
  updateCoordinateSystemService() {
    const { offsetCoordinate: e = !0 } = this.config;
    this.viewport.getZoom() > DV && e
      ? this.coordinateSystemService.setCoordinateSystem(Np.LNGLAT_OFFSET)
      : this.coordinateSystemService.setCoordinateSystem(Np.LNGLAT);
  }
  creatMapContainer(e) {
    let n;
    return typeof e == "string" ? (n = document.getElementById(e)) : (n = e), n;
  }
  getMapStyleValue(e) {
    var n;
    return (n = this.getMapStyleConfig()[e]) !== null && n !== void 0 ? n : e;
  }
  setBgColor(e) {
    this.bgColor = e;
  }
  getMapContainer() {
    return this.mapContainer;
  }
  getMarkerContainer() {
    return this.markerContainer;
  }
  getOverlayContainer() {}
  getCanvasOverlays() {}
  emit(e, ...n) {
    this.eventEmitter.emit(e, ...n);
  }
  once(e, n) {
    this.eventEmitter.once(e, n);
  }
  meterToCoord(e, n) {
    return 1;
  }
  destroy() {
    this.eventEmitter.removeAllListeners();
  }
}
function U7(t, e) {
  if (!(t instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
function FV(t, e) {
  for (var n = 0; n < e.length; n++) {
    var r = e[n];
    (r.enumerable = r.enumerable || !1),
      (r.configurable = !0),
      "value" in r && (r.writable = !0),
      Object.defineProperty(t, bT(r.key), r);
  }
}
function z7(t, e, n) {
  return (
    e && FV(t.prototype, e),
    Object.defineProperty(t, "prototype", { writable: !1 }),
    t
  );
}
function Kf(t) {
  if (t === void 0)
    throw new ReferenceError(
      "this hasn't been initialised - super() hasn't been called"
    );
  return t;
}
function kV(t, e) {
  if (e && (ET(e) == "object" || typeof e == "function")) return e;
  if (e !== void 0)
    throw new TypeError(
      "Derived constructors may only return object or undefined"
    );
  return Kf(t);
}
function D_(t) {
  return (
    (D_ = Object.setPrototypeOf
      ? Object.getPrototypeOf.bind()
      : function (e) {
          return e.__proto__ || Object.getPrototypeOf(e);
        }),
    D_(t)
  );
}
function B_(t, e) {
  return (
    (B_ = Object.setPrototypeOf
      ? Object.setPrototypeOf.bind()
      : function (n, r) {
          return (n.__proto__ = r), n;
        }),
    B_(t, e)
  );
}
function UV(t, e) {
  if (typeof e != "function" && e !== null)
    throw new TypeError("Super expression must either be null or a function");
  (t.prototype = Object.create(e && e.prototype, {
    constructor: { value: t, writable: !0, configurable: !0 },
  })),
    Object.defineProperty(t, "prototype", { writable: !1 }),
    e && B_(t, e);
}
function zV(t) {
  if (Array.isArray(t)) return t;
}
function VV(t, e) {
  var n =
    t == null
      ? null
      : (typeof Symbol < "u" && t[Symbol.iterator]) || t["@@iterator"];
  if (n != null) {
    var r,
      o,
      l,
      a,
      h = [],
      f = !0,
      v = !1;
    try {
      if (((l = (n = n.call(t)).next), e === 0)) {
        if (Object(n) !== n) return;
        f = !1;
      } else
        for (
          ;
          !(f = (r = l.call(n)).done) && (h.push(r.value), h.length !== e);
          f = !0
        );
    } catch (E) {
      (v = !0), (o = E);
    } finally {
      try {
        if (!f && n.return != null && ((a = n.return()), Object(a) !== a))
          return;
      } finally {
        if (v) throw o;
      }
    }
    return h;
  }
}
function D6(t, e) {
  (e == null || e > t.length) && (e = t.length);
  for (var n = 0, r = Array(e); n < e; n++) r[n] = t[n];
  return r;
}
function HV(t, e) {
  if (t) {
    if (typeof t == "string") return D6(t, e);
    var n = {}.toString.call(t).slice(8, -1);
    return (
      n === "Object" && t.constructor && (n = t.constructor.name),
      n === "Map" || n === "Set"
        ? Array.from(t)
        : n === "Arguments" ||
          /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
        ? D6(t, e)
        : void 0
    );
  }
}
function jV() {
  throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function cc(t, e) {
  return zV(t) || VV(t, e) || HV(t, e) || jV();
}
function o1() {
  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
}
function hg(t, e) {
  var n = Gd([], e, t);
  return fM(n, n, 1 / n[3]), n;
}
function ih(t, e) {
  if (!t) throw new Error(e || "viewport-mercator-project: assertion failed.");
}
var kc = Math.PI,
  V7 = kc / 4,
  n0 = kc / 180,
  B6 = 180 / kc,
  V3 = 512,
  F6 = 4003e4,
  WV = 1.5;
function H7(t) {
  return Math.pow(2, t);
}
function D2(t, e) {
  var n = cc(t, 2),
    r = n[0],
    o = n[1];
  ih(Number.isFinite(r) && Number.isFinite(e)),
    ih(Number.isFinite(o) && o >= -90 && o <= 90, "invalid latitude"),
    (e *= V3);
  var l = r * n0,
    a = o * n0,
    h = (e * (l + kc)) / (2 * kc),
    f = (e * (kc - Math.log(Math.tan(V7 + a * 0.5)))) / (2 * kc);
  return [h, f];
}
function k6(t, e) {
  var n = cc(t, 2),
    r = n[0],
    o = n[1];
  e *= V3;
  var l = (r / e) * (2 * kc) - kc,
    a = 2 * (Math.atan(Math.exp(kc - (o / e) * (2 * kc))) - V7);
  return [l * B6, a * B6];
}
function XV(t) {
  var e = t.latitude,
    n = t.longitude,
    r = t.zoom,
    o = t.scale,
    l = t.highPrecision,
    a = l === void 0 ? !1 : l;
  (o = o !== void 0 ? o : H7(r)),
    ih(Number.isFinite(e) && Number.isFinite(n) && Number.isFinite(o));
  var h = {},
    f = V3 * o,
    v = Math.cos(e * n0),
    E = f / 360,
    x = E / v,
    T = f / F6 / v;
  if (
    ((h.pixelsPerMeter = [T, -T, T]),
    (h.metersPerPixel = [1 / T, -1 / T, 1 / T]),
    (h.pixelsPerDegree = [E, -x, T]),
    (h.degreesPerPixel = [1 / E, -1 / x, 1 / T]),
    a)
  ) {
    var N = (n0 * Math.tan(e * n0)) / v,
      I = (E * N) / 2,
      L = (f / F6) * N,
      F = (L / x) * T;
    (h.pixelsPerDegree2 = [0, -I, L]), (h.pixelsPerMeter2 = [F, 0, F]);
  }
  return h;
}
function GV(t) {
  var e = t.height,
    n = t.pitch,
    r = t.bearing,
    o = t.altitude,
    l = t.center,
    a = l === void 0 ? null : l,
    h = t.flipY,
    f = h === void 0 ? !1 : h,
    v = o1();
  return (
    sc(v, v, [0, 0, -o]),
    lc(v, v, [1, 1, 1 / e]),
    zp(v, v, -n * n0),
    F1(v, v, r * n0),
    f && lc(v, v, [1, -1, 1]),
    a && sc(v, v, uM([], a)),
    v
  );
}
function ZV(t) {
  var e = t.width,
    n = t.height,
    r = t.altitude,
    o = r === void 0 ? WV : r,
    l = t.pitch,
    a = l === void 0 ? 0 : l,
    h = t.nearZMultiplier,
    f = h === void 0 ? 1 : h,
    v = t.farZMultiplier,
    E = v === void 0 ? 1 : v,
    x = a * n0,
    T = Math.atan(0.5 / o),
    N = (Math.sin(T) * o) / Math.sin(Math.PI / 2 - x - T),
    I = Math.cos(Math.PI / 2 - x) * N + o;
  return {
    fov: 2 * Math.atan(n / 2 / o),
    aspect: e / n,
    focalDistance: o,
    near: f,
    far: I * E,
  };
}
function YV(t) {
  var e = t.width,
    n = t.height,
    r = t.pitch,
    o = t.altitude,
    l = t.nearZMultiplier,
    a = t.farZMultiplier,
    h = ZV({
      width: e,
      height: n,
      altitude: o,
      pitch: r,
      nearZMultiplier: l,
      farZMultiplier: a,
    }),
    f = h.fov,
    v = h.aspect,
    E = h.near,
    x = h.far,
    T = t8([], f, v, E, x);
  return T;
}
function qV(t, e) {
  var n = cc(t, 3),
    r = n[0],
    o = n[1],
    l = n[2],
    a = l === void 0 ? 0 : l;
  return (
    ih(Number.isFinite(r) && Number.isFinite(o) && Number.isFinite(a)),
    hg(e, [r, o, a, 1])
  );
}
function j7(t, e) {
  var n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0,
    r = cc(t, 3),
    o = r[0],
    l = r[1],
    a = r[2];
  if (
    (ih(Number.isFinite(o) && Number.isFinite(l), "invalid pixel coordinate"),
    Number.isFinite(a))
  ) {
    var h = hg(e, [o, l, a, 1]);
    return h;
  }
  var f = hg(e, [o, l, 0, 1]),
    v = hg(e, [o, l, 1, 1]),
    E = f[2],
    x = v[2],
    T = E === x ? 0 : ((n || 0) - E) / (x - E);
  return vM([], f, v, T);
}
var U6 = o1(),
  $V = (function () {
    function t() {
      var e =
          arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {},
        n = e.width,
        r = e.height,
        o = e.viewMatrix,
        l = o === void 0 ? U6 : o,
        a = e.projectionMatrix,
        h = a === void 0 ? U6 : a;
      U7(this, t),
        (this.width = n || 1),
        (this.height = r || 1),
        (this.scale = 1),
        (this.pixelsPerMeter = 1),
        (this.viewMatrix = l),
        (this.projectionMatrix = h);
      var f = o1();
      e0(f, f, this.projectionMatrix),
        e0(f, f, this.viewMatrix),
        (this.viewProjectionMatrix = f);
      var v = o1();
      lc(v, v, [this.width / 2, -this.height / 2, 1]),
        sc(v, v, [1, -1, 0]),
        e0(v, v, this.viewProjectionMatrix);
      var E = Mg(o1(), v);
      if (!E) throw new Error("Pixel project matrix not invertible");
      (this.pixelProjectionMatrix = v),
        (this.pixelUnprojectionMatrix = E),
        (this.equals = this.equals.bind(this)),
        (this.project = this.project.bind(this)),
        (this.unproject = this.unproject.bind(this)),
        (this.projectPosition = this.projectPosition.bind(this)),
        (this.unprojectPosition = this.unprojectPosition.bind(this)),
        (this.projectFlat = this.projectFlat.bind(this)),
        (this.unprojectFlat = this.unprojectFlat.bind(this));
    }
    return (
      z7(t, [
        {
          key: "equals",
          value: function (n) {
            return n instanceof t
              ? n.width === this.width &&
                  n.height === this.height &&
                  A5(n.projectionMatrix, this.projectionMatrix) &&
                  A5(n.viewMatrix, this.viewMatrix)
              : !1;
          },
        },
        {
          key: "project",
          value: function (n) {
            var r =
                arguments.length > 1 && arguments[1] !== void 0
                  ? arguments[1]
                  : {},
              o = r.topLeft,
              l = o === void 0 ? !0 : o,
              a = this.projectPosition(n),
              h = qV(a, this.pixelProjectionMatrix),
              f = cc(h, 2),
              v = f[0],
              E = f[1],
              x = l ? E : this.height - E;
            return n.length === 2 ? [v, x] : [v, x, h[2]];
          },
        },
        {
          key: "unproject",
          value: function (n) {
            var r =
                arguments.length > 1 && arguments[1] !== void 0
                  ? arguments[1]
                  : {},
              o = r.topLeft,
              l = o === void 0 ? !0 : o,
              a = r.targetZ,
              h = cc(n, 3),
              f = h[0],
              v = h[1],
              E = h[2],
              x = l ? v : this.height - v,
              T = a && a * this.pixelsPerMeter,
              N = j7([f, x, E], this.pixelUnprojectionMatrix, T),
              I = this.unprojectPosition(N),
              L = cc(I, 3),
              F = L[0],
              X = L[1],
              G = L[2];
            return Number.isFinite(E)
              ? [F, X, G]
              : Number.isFinite(a)
              ? [F, X, a]
              : [F, X];
          },
        },
        {
          key: "projectPosition",
          value: function (n) {
            var r = this.projectFlat(n),
              o = cc(r, 2),
              l = o[0],
              a = o[1],
              h = (n[2] || 0) * this.pixelsPerMeter;
            return [l, a, h];
          },
        },
        {
          key: "unprojectPosition",
          value: function (n) {
            var r = this.unprojectFlat(n),
              o = cc(r, 2),
              l = o[0],
              a = o[1],
              h = (n[2] || 0) / this.pixelsPerMeter;
            return [l, a, h];
          },
        },
        {
          key: "projectFlat",
          value: function (n) {
            return (
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : this.scale,
              n
            );
          },
        },
        {
          key: "unprojectFlat",
          value: function (n) {
            return (
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : this.scale,
              n
            );
          },
        },
      ]),
      t
    );
  })();
function KV(t) {
  var e = t.width,
    n = t.height,
    r = t.bounds,
    o = t.minExtent,
    l = o === void 0 ? 0 : o,
    a = t.maxZoom,
    h = a === void 0 ? 24 : a,
    f = t.padding,
    v = f === void 0 ? 0 : f,
    E = t.offset,
    x = E === void 0 ? [0, 0] : E,
    T = cc(r, 2),
    N = cc(T[0], 2),
    I = N[0],
    L = N[1],
    F = cc(T[1], 2),
    X = F[0],
    G = F[1];
  if (Number.isFinite(v)) {
    var K = v;
    v = { top: K, bottom: K, left: K, right: K };
  } else
    ih(
      Number.isFinite(v.top) &&
        Number.isFinite(v.bottom) &&
        Number.isFinite(v.left) &&
        Number.isFinite(v.right)
    );
  var Q = new F_({ width: e, height: n, longitude: 0, latitude: 0, zoom: 0 }),
    ee = Q.project([I, G]),
    Se = Q.project([X, L]),
    ue = [
      Math.max(Math.abs(Se[0] - ee[0]), l),
      Math.max(Math.abs(Se[1] - ee[1]), l),
    ],
    ke = [
      e - v.left - v.right - Math.abs(x[0]) * 2,
      n - v.top - v.bottom - Math.abs(x[1]) * 2,
    ];
  ih(ke[0] > 0 && ke[1] > 0);
  var ut = ke[0] / ue[0],
    Ve = ke[1] / ue[1],
    Ae = (v.right - v.left) / 2 / ut,
    Be = (v.bottom - v.top) / 2 / Ve,
    He = [(Se[0] + ee[0]) / 2 + Ae, (Se[1] + ee[1]) / 2 + Be],
    nt = Q.unproject(He),
    Ut = Q.zoom + Math.log2(Math.abs(Math.min(ut, Ve)));
  return { longitude: nt[0], latitude: nt[1], zoom: Math.min(Ut, h) };
}
var F_ = (function (t) {
  UV(e, t);
  function e() {
    var n,
      r = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {},
      o = r.width,
      l = r.height,
      a = r.latitude,
      h = a === void 0 ? 0 : a,
      f = r.longitude,
      v = f === void 0 ? 0 : f,
      E = r.zoom,
      x = E === void 0 ? 0 : E,
      T = r.pitch,
      N = T === void 0 ? 0 : T,
      I = r.bearing,
      L = I === void 0 ? 0 : I,
      F = r.altitude,
      X = F === void 0 ? 1.5 : F,
      G = r.nearZMultiplier,
      K = r.farZMultiplier;
    U7(this, e), (o = o || 1), (l = l || 1);
    var Q = H7(x);
    X = Math.max(0.75, X);
    var ee = D2([v, h], Q);
    ee[2] = 0;
    var Se = YV({
        width: o,
        height: l,
        pitch: N,
        bearing: L,
        altitude: X,
        nearZMultiplier: G || 1 / l,
        farZMultiplier: K || 1.01,
      }),
      ue = GV({
        height: l,
        center: ee,
        pitch: N,
        bearing: L,
        altitude: X,
        flipY: !0,
      });
    return (
      (n = kV(
        this,
        D_(e).call(this, {
          width: o,
          height: l,
          viewMatrix: ue,
          projectionMatrix: Se,
        })
      )),
      (n.latitude = h),
      (n.longitude = v),
      (n.zoom = x),
      (n.pitch = N),
      (n.bearing = L),
      (n.altitude = X),
      (n.scale = Q),
      (n.center = ee),
      (n.pixelsPerMeter = XV(Kf(Kf(n))).pixelsPerMeter[2]),
      Object.freeze(Kf(Kf(n))),
      n
    );
  }
  return (
    z7(e, [
      {
        key: "projectFlat",
        value: function (r) {
          var o =
            arguments.length > 1 && arguments[1] !== void 0
              ? arguments[1]
              : this.scale;
          return D2(r, o);
        },
      },
      {
        key: "unprojectFlat",
        value: function (r) {
          var o =
            arguments.length > 1 && arguments[1] !== void 0
              ? arguments[1]
              : this.scale;
          return k6(r, o);
        },
      },
      {
        key: "getMapCenterByLngLatPosition",
        value: function (r) {
          var o = r.lngLat,
            l = r.pos,
            a = j7(l, this.pixelUnprojectionMatrix),
            h = D2(o, this.scale),
            f = Zd([], h, gM([], a)),
            v = Zd([], this.center, f);
          return k6(v, this.scale);
        },
      },
      {
        key: "getLocationAtPoint",
        value: function (r) {
          var o = r.lngLat,
            l = r.pos;
          return this.getMapCenterByLngLatPosition({ lngLat: o, pos: l });
        },
      },
      {
        key: "fitBounds",
        value: function (r) {
          var o =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : {},
            l = this.width,
            a = this.height,
            h = KV(Object.assign({ width: l, height: a, bounds: r }, o)),
            f = h.longitude,
            v = h.latitude,
            E = h.zoom;
          return new e({
            width: l,
            height: a,
            longitude: f,
            latitude: v,
            zoom: E,
          });
        },
      },
    ]),
    e
  );
})($V);
class H3 {
  constructor() {
    R(this, "viewport", new F_());
  }
  syncWithMapCamera(e) {
    const {
        center: n,
        zoom: r,
        pitch: o,
        bearing: l,
        viewportHeight: a,
        viewportWidth: h,
      } = e,
      f = {
        width: this.viewport.width,
        height: this.viewport.height,
        longitude: this.viewport.center[0],
        latitude: this.viewport.center[1],
        zoom: this.viewport.zoom,
        pitch: this.viewport.pitch,
        bearing: this.viewport.bearing,
      };
    this.viewport = new F_(
      mt(
        mt({}, f),
        {},
        {
          width: h,
          height: a,
          longitude: n && n[0],
          latitude: n && n[1],
          zoom: r,
          pitch: o,
          bearing: l,
        }
      )
    );
  }
  getZoom() {
    return this.viewport.zoom;
  }
  getZoomScale() {
    return Math.pow(2, this.getZoom());
  }
  getCenter() {
    return [this.viewport.longitude, this.viewport.latitude];
  }
  getProjectionMatrix() {
    return this.viewport.projectionMatrix;
  }
  getModelMatrix() {
    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
  }
  getViewMatrix() {
    return this.viewport.viewMatrix;
  }
  getViewMatrixUncentered() {
    return this.viewport.viewMatrixUncentered;
  }
  getViewProjectionMatrix() {
    return this.viewport.viewProjectionMatrix;
  }
  getViewProjectionMatrixUncentered() {
    return this.viewport.viewProjectionMatrix;
  }
  getFocalDistance() {
    return 1;
  }
  projectFlat(e, n) {
    return this.viewport.projectFlat(e, n);
  }
}
let W7 = (function (t) {
  return (
    (t.GAODE = "GAODE"),
    (t.MAPBOX = "MAPBOX"),
    (t.DEFAULT = "DEFAUlTMAP"),
    (t.SIMPLE = "SIMPLE"),
    (t.GLOBEL = "GLOBEL"),
    t
  );
})({});
function z6(t = {}) {
  const e = { top: 0, right: 0, bottom: 0, left: 0 };
  if (typeof t == "number") return { top: t, right: t, bottom: t, left: t };
  if (Array.isArray(t)) {
    if (t.length === 4)
      return { top: t[0], right: t[1], bottom: t[2], left: t[3] };
    if (t.length === 2)
      return { top: t[0], right: t[1], bottom: t[0], left: t[1] };
  }
  return mt(mt({}, e), t);
}
const QV = {
    normal: "amap://styles/normal",
    light: "amap://styles/c422f5c0cfced5be9fe3a83f05f28a68?isPublic=true",
    dark: "amap://styles/c9f1d10cae34f8ab05e425462c5a58d7?isPublic=true",
    blank: "amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true",
    fresh: "amap://styles/fresh",
    grey: "amap://styles/grey",
    graffiti: "amap://styles/graffiti",
    macaron: "amap://styles/macaron",
    darkblue: "amap://styles/darkblue",
    wine: "amap://styles/wine",
  },
  JV = ["id", "style", "minZoom", "maxZoom", "token", "mapInstance", "plugin"];
function eH(t, e) {
  var n =
      typeof my < "u" &&
      !!my &&
      typeof my.showToast == "function" &&
      my.isFRM !== !0,
    r =
      typeof wx < "u" &&
      wx !== null &&
      (typeof wx.request < "u" || typeof wx.miniProgram < "u");
  if (!(n || r) && (e || (e = document), !!e)) {
    var o = e.head || e.getElementsByTagName("head")[0];
    if (!o) {
      o = e.createElement("head");
      var l = e.body || e.getElementsByTagName("body")[0];
      l ? l.parentNode.insertBefore(o, l) : e.documentElement.appendChild(o);
    }
    var a = e.createElement("style");
    return (
      (a.type = "text/css"),
      a.styleSheet
        ? (a.styleSheet.cssText = t)
        : a.appendChild(e.createTextNode(t)),
      o.appendChild(a),
      a
    );
  }
}
eH(`.amap-logo {
  display: none !important;
}
.amap-copyright {
  display: none !important;
}
.amap-overlays {
  z-index: 3 !important;
}
`);
const tH = "2.0",
  V6 = "f59bcf249433f8b05caaee19f349b3d7",
  V0 = 1,
  H6 = { contextmenu: "rightclick", camerachange: "viewchange" };
class nH extends BV {
  constructor(...e) {
    super(...e),
      R(this, "viewport", new H3()),
      R(this, "version", W7.GAODE),
      R(this, "handleCameraChanged", () => {
        const n = this.getViewState();
        this.updateView(n);
      });
  }
  getType() {
    return "amap";
  }
  init() {
    var e = this;
    return bt(function* () {
      const n = e.config,
        {
          id: r,
          style: o = "light",
          minZoom: l = 0,
          maxZoom: a = 24,
          token: h = V6,
          mapInstance: f,
          plugin: v = [],
        } = n,
        E = pc(n, JV);
      if (
        (window.AMap ||
          f ||
          (v.push("Map3D"), yield LV.load({ key: h, version: tH, plugins: v })),
        f)
      )
        (e.map = f),
          (e.mapContainer = e.map.getContainer()),
          e.map.on("viewchange", e.handleCameraChanged);
      else {
        const x = mt(
          { mapStyle: e.getMapStyleValue(o), zooms: [l, a], viewMode: "3D" },
          E
        );
        if (
          (x.zoom && (x.zoom += V0),
          h === V6 &&
            ((window._AMapSecurityConfig = {
              securityJsCode: "2653011adeb04230b3a26cc9a780a800",
            }),
            console.warn(
              `%c${e.configService.getSceneWarninfo("MapToken")}!`,
              "color: #873bf4;font-weigh:900;font-size: 16px;"
            )),
          !r)
        )
          throw Error("No container id specified");
        (window.forceWebGL = !0), (e.mapContainer = e.creatMapContainer(r));
        const T = new AMap.Map(e.mapContainer, x);
        (e.map = T), T.on("viewchange", e.handleCameraChanged);
      }
      e.syncInitViewPort();
    })();
  }
  syncInitViewPort() {
    const e = this.getViewState();
    this.updateView(e);
  }
  getViewState() {
    const { center: e, zoom: n } = rH(this.map);
    return {
      center: e,
      viewportWidth: this.map.getContainer().clientWidth,
      viewportHeight: this.map.getContainer().clientHeight,
      bearing: -this.map.getRotation(),
      pitch: this.map.getPitch(),
      zoom: n - V0,
    };
  }
  creatMapContainer(e) {
    const n = super.creatMapContainer(e),
      r = document.createElement("div");
    return (
      (r.style.cssText += `
       position: absolute;
       top: 0;
       height: 100%;
       width: 100%;
     `),
      (r.id = Ka.uniqueId("l7_amap_div")),
      n.appendChild(r),
      r
    );
  }
  getContainer() {
    return this.map.getContainer();
  }
  addMarkerContainer() {
    if (!this.map) return;
    const e = this.map.getContainer();
    if (e !== null) {
      const n = e.getElementsByClassName("amap-maps")[0];
      (n.style.zIndex = "auto"),
        (this.markerContainer = ma("div", "l7-marker-container2", n));
    }
  }
  getMarkerContainer() {
    return this.markerContainer;
  }
  getCanvasOverlays() {
    var e;
    return (e = this.mapContainer) === null || e === void 0
      ? void 0
      : e.querySelector(".amap-overlays");
  }
  on(e, n) {
    r_.indexOf(e) !== -1
      ? this.eventEmitter.on(e, n)
      : this.map.on(H6[e] || e, n);
  }
  off(e, n) {
    r_.indexOf(e) !== -1
      ? this.eventEmitter.off(e, n)
      : this.map.off(H6[e] || e, n);
  }
  getSize() {
    const e = this.map.getSize();
    return [e.getWidth(), e.getHeight()];
  }
  getMinZoom() {
    return this.map.getZooms()[0] - V0;
  }
  getMaxZoom() {
    return this.map.getZooms()[1] - V0;
  }
  getZoom() {
    return this.map.getZoom() - V0;
  }
  getCenter(e) {
    if (e != null && e.padding) {
      const r = this.getCenter(),
        o = z6(e.padding),
        l = this.lngLatToPixel([r.lng, r.lat]),
        a = [(o.right - o.left) / 2, (o.bottom - o.top) / 2];
      return this.pixelToLngLat([l.x - a[0], l.y - a[1]]);
    }
    const n = this.map.getCenter();
    return { lng: n.getLng(), lat: n.getLat() };
  }
  getPitch() {
    return this.map.getPitch();
  }
  getRotation() {
    return 360 - this.map.getRotation();
  }
  getBounds() {
    const e = this.map.getBounds(),
      n = e.getNorthEast(),
      r = e.getSouthWest(),
      o = this.getCenter(),
      l =
        o.lng > n.getLng() || o.lng < r.getLng()
          ? 180 - n.getLng()
          : n.getLng();
    return [
      [o.lng < r.getLng() ? r.getLng() - 180 : r.getLng(), r.getLat()],
      [l, n.getLat()],
    ];
  }
  getMapContainer() {
    return this.mapContainer;
  }
  getMapCanvasContainer() {
    var e;
    return (e = this.map.getContainer()) === null || e === void 0
      ? void 0
      : e.getElementsByClassName("amap-maps")[0];
  }
  getMapStyleConfig() {
    return QV;
  }
  getMapStyleValue(e) {
    return this.getMapStyleConfig()[e] || e;
  }
  getMapStyle() {
    return this.map.getMapStyle();
  }
  setMapStyle(e) {
    this.map.setMapStyle(this.getMapStyleValue(e));
  }
  setRotation(e) {
    return this.map.setRotation(e);
  }
  zoomIn() {
    this.map.zoomIn();
  }
  zoomOut() {
    this.map.zoomOut();
  }
  panTo(e) {
    this.map.panTo(e);
  }
  panBy(e = 0, n = 0) {
    this.map.panBy(e, n);
  }
  fitBounds(e) {
    this.map.setBounds(
      new AMap.Bounds([e[0][0], e[0][1], e[1][0], e[1][1]]),
      !0
    );
  }
  setZoomAndCenter(e, n) {
    this.map.setZoomAndCenter(e + V0, n);
  }
  setCenter(e, n) {
    if (n != null && n.padding) {
      const r = z6(n.padding),
        o = this.lngLatToPixel(e),
        l = [(r.right - r.left) / 2, (r.bottom - r.top) / 2],
        a = this.pixelToLngLat([o.x + l[0], o.y + l[1]]);
      this.map.setCenter([a.lng, a.lat]);
    } else this.map.setCenter(e);
  }
  setPitch(e) {
    return this.map.setPitch(e);
  }
  setZoom(e) {
    return this.map.setZoom(e + V0);
  }
  setMaxZoom(e) {
    throw new Error("Method not implemented.");
  }
  setMinZoom(e) {
    throw new Error("Method not implemented.");
  }
  setMapStatus(e) {
    this.map.setStatus(e);
  }
  meterToCoord(e, n) {
    const r = AMap.GeometryUtil.distance(
        new AMap.LngLat(...e),
        new AMap.LngLat(...n)
      ),
      [o, l] = h2(...e),
      [a, h] = h2(...n);
    return Math.sqrt(Math.pow(o - a, 2) + Math.pow(l - h, 2)) / r;
  }
  pixelToLngLat(e) {
    const n = this.map.pixelToLngLat(new AMap.Pixel(e[0], e[1]));
    return { lng: n.getLng(), lat: n.getLat() };
  }
  lngLatToPixel(e) {
    const n = this.map.lnglatToPixel(e);
    return { x: n.getX(), y: n.getY() };
  }
  containerToLngLat(e) {
    const n = new AMap.Pixel(e[0], e[1]),
      r = this.map.containerToLngLat(n);
    return {
      lng: r == null ? void 0 : r.getLng(),
      lat: r == null ? void 0 : r.getLat(),
    };
  }
  lngLatToContainer(e) {
    const n = this.map.lngLatToContainer(e);
    return { x: n.getX(), y: n.getY() };
  }
  lngLatToMercator([e, n], r) {
    const [o, l] = h2(e, n);
    return { x: o, y: l, z: r };
  }
  getModelMatrix(e, n, r, o = [1, 1, 1]) {
    const l = this.viewport.projectFlat(e),
      a = B1();
    return (
      sc(a, a, Rs(l[0], l[1], n)),
      lc(a, a, Rs(o[0], o[1], o[2])),
      zp(a, a, r[0]),
      fv(a, a, r[1]),
      F1(a, a, r[2]),
      a
    );
  }
  exportMap(e) {
    var n;
    const r =
      (n = this.getContainer()) === null || n === void 0
        ? void 0
        : n.getElementsByClassName("amap-layer")[0];
    return e === "jpg"
      ? r == null
        ? void 0
        : r.toDataURL("image/jpeg")
      : r == null
      ? void 0
      : r.toDataURL("image/png");
  }
  destroy() {
    var e;
    super.destroy(),
      (e = this.mapContainer) === null ||
        e === void 0 ||
        (e = e.parentNode) === null ||
        e === void 0 ||
        e.removeChild(this.mapContainer),
      delete window.initAMap;
    const n = document.getElementById("amap-script");
    n && document.head.removeChild(n), this.map.destroy();
  }
}
function rH(t) {
  const e = t._view.getOptions(),
    n = e.center,
    r = e.zoom;
  return { center: n, zoom: r };
}
class j3 extends z3 {
  getServiceConstructor() {
    return nH;
  }
}
const iH = {
    light: "mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",
    dark: "mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",
    normal: "mapbox://styles/mapbox/streets-v11",
    blank: {
      version: 8,
      sources: {},
      layers: [
        {
          id: "background",
          type: "background",
          layout: { visibility: "none" },
        },
      ],
    },
  },
  j6 = {
    mapmove: "move",
    camerachange: "move",
    zoomchange: "zoom",
    dragging: "drag",
  },
  aH = 12;
class X7 {
  constructor(e) {
    R(this, "version", "DEFAUlTMAP"),
      R(this, "map", void 0),
      R(this, "simpleMapCoord", new k7()),
      R(this, "bgColor", "rgba(0.0, 0.0, 0.0, 0.0)"),
      R(this, "config", void 0),
      R(this, "configService", void 0),
      R(this, "coordinateSystemService", void 0),
      R(this, "eventEmitter", void 0),
      R(this, "markerContainer", void 0),
      R(this, "cameraChangedCallback", void 0),
      R(this, "$mapContainer", void 0),
      R(this, "handleCameraChanged", (n) => {
        const { lat: r, lng: o } = this.map.getCenter();
        this.emit("mapchange"),
          this.viewport.syncWithMapCamera({
            bearing: this.map.getBearing(),
            center: [o, r],
            viewportHeight: this.map.transform.height,
            pitch: this.map.getPitch(),
            viewportWidth: this.map.transform.width,
            zoom: this.map.getZoom(),
            cameraHeight: 0,
          }),
          this.updateCoordinateSystemService(),
          this.cameraChangedCallback(this.viewport);
      }),
      (this.config = e.mapConfig),
      (this.configService = e.globalConfigService),
      (this.coordinateSystemService = e.coordinateSystemService),
      (this.eventEmitter = new _s.EventEmitter());
  }
  setBgColor(e) {
    this.bgColor = e;
  }
  addMarkerContainer() {
    const e = this.map.getCanvasContainer();
    (this.markerContainer = ma("div", "l7-marker-container", e)),
      this.markerContainer.setAttribute("tabindex", "-1");
  }
  getMarkerContainer() {
    return this.markerContainer;
  }
  getOverlayContainer() {}
  getCanvasOverlays() {}
  on(e, n) {
    r_.indexOf(e) !== -1
      ? this.eventEmitter.on(e, n)
      : this.map.on(j6[e] || e, n);
  }
  off(e, n) {
    this.map.off(j6[e] || e, n), this.eventEmitter.off(e, n);
  }
  getContainer() {
    return this.map.getContainer();
  }
  getMapCanvasContainer() {
    return this.map.getCanvasContainer();
  }
  getSize() {
    if (this.version === "SIMPLE") return this.simpleMapCoord.getSize();
    const e = this.map.transform;
    return [e.width, e.height];
  }
  getType() {
    return "default";
  }
  getZoom() {
    return this.map.getZoom();
  }
  setZoom(e) {
    return this.map.setZoom(e);
  }
  getCenter() {
    return this.map.getCenter();
  }
  setCenter(e) {
    this.map.setCenter(e);
  }
  getPitch() {
    return this.map.getPitch();
  }
  getRotation() {
    return this.map.getBearing();
  }
  getBounds() {
    return this.map.getBounds().toArray();
  }
  getMinZoom() {
    return this.map.getMinZoom();
  }
  getMaxZoom() {
    return this.map.getMaxZoom();
  }
  setRotation(e) {
    this.map.setBearing(e);
  }
  zoomIn(e, n) {
    this.map.zoomIn(e, n);
  }
  zoomOut(e, n) {
    this.map.zoomOut(e, n);
  }
  setPitch(e) {
    return this.map.setPitch(e);
  }
  panTo(e) {
    this.map.panTo(e);
  }
  panBy(e = 0, n = 0) {
    this.map.panBy([e, n]);
  }
  fitBounds(e, n) {
    this.map.fitBounds(e, n);
  }
  setMaxZoom(e) {
    this.map.setMaxZoom(e);
  }
  setMinZoom(e) {
    this.map.setMinZoom(e);
  }
  setMapStatus(e) {
    e.doubleClickZoom === !0 && this.map.doubleClickZoom.enable(),
      e.doubleClickZoom === !1 && this.map.doubleClickZoom.disable(),
      e.dragEnable === !1 && this.map.dragPan.disable(),
      e.dragEnable === !0 && this.map.dragPan.enable(),
      e.rotateEnable === !1 && this.map.dragRotate.disable(),
      e.dragEnable === !0 && this.map.dragRotate.enable(),
      e.keyboardEnable === !1 && this.map.keyboard.disable(),
      e.keyboardEnable === !0 && this.map.keyboard.enable(),
      e.zoomEnable === !1 && this.map.scrollZoom.disable(),
      e.zoomEnable === !0 && this.map.scrollZoom.enable();
  }
  setZoomAndCenter(e, n) {
    this.map.flyTo({ zoom: e, center: n });
  }
  setMapStyle(e) {
    var n;
    (n = this.map) === null ||
      n === void 0 ||
      n.setStyle(this.getMapStyleValue(e));
  }
  meterToCoord(e, n) {
    return 1;
  }
  pixelToLngLat(e) {
    return this.map.unproject(e);
  }
  lngLatToPixel(e) {
    return this.map.project(e);
  }
  containerToLngLat(e) {
    return this.map.unproject(e);
  }
  lngLatToContainer(e) {
    return this.map.project(e);
  }
  getMapStyle() {
    try {
      var e;
      const n =
        (e = this.map.getStyle().sprite) !== null && e !== void 0 ? e : "";
      return /^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(n)
        ? n == null
          ? void 0
          : n.replace(/\/\w+$/, "").replace(/sprites/, "styles")
        : n;
    } catch {
      return "";
    }
  }
  getMapStyleConfig() {
    return iH;
  }
  getMapStyleValue(e) {
    var n;
    return (n = this.getMapStyleConfig()[e]) !== null && n !== void 0 ? n : e;
  }
  destroy() {
    this.eventEmitter.removeAllListeners(),
      this.map && (this.map.remove(), (this.$mapContainer = null));
  }
  emit(e, ...n) {
    this.eventEmitter.emit(e, ...n);
  }
  once(e, ...n) {
    this.eventEmitter.once(e, ...n);
  }
  getMapContainer() {
    return this.$mapContainer;
  }
  exportMap(e) {
    var n;
    const r = (n = this.map) === null || n === void 0 ? void 0 : n.getCanvas();
    return e === "jpg"
      ? r == null
        ? void 0
        : r.toDataURL("image/jpeg")
      : r == null
      ? void 0
      : r.toDataURL("image/png");
  }
  onCameraChanged(e) {
    this.cameraChangedCallback = e;
  }
  creatMapContainer(e) {
    let n = e;
    return typeof e == "string" && (n = document.getElementById(e)), n;
  }
  updateView(e) {
    this.emit("mapchange"),
      this.viewport.syncWithMapCamera({
        bearing: e.bearing,
        center: e.center,
        viewportHeight: e.viewportHeight,
        pitch: e.pitch,
        viewportWidth: e.viewportWidth,
        zoom: e.zoom,
        cameraHeight: 0,
      }),
      this.updateCoordinateSystemService(),
      this.cameraChangedCallback(this.viewport);
  }
  updateCoordinateSystemService() {
    const { offsetCoordinate: e = !0 } = this.config;
    this.viewport.getZoom() > aH && e
      ? this.coordinateSystemService.setCoordinateSystem(Np.LNGLAT_OFFSET)
      : this.coordinateSystemService.setCoordinateSystem(Np.LNGLAT);
  }
}
var oH = G7;
function G7(t, e, n, r) {
  (this.cx = 3 * t),
    (this.bx = 3 * (n - t) - this.cx),
    (this.ax = 1 - this.cx - this.bx),
    (this.cy = 3 * e),
    (this.by = 3 * (r - e) - this.cy),
    (this.ay = 1 - this.cy - this.by),
    (this.p1x = t),
    (this.p1y = e),
    (this.p2x = n),
    (this.p2y = r);
}
G7.prototype = {
  sampleCurveX: function (t) {
    return ((this.ax * t + this.bx) * t + this.cx) * t;
  },
  sampleCurveY: function (t) {
    return ((this.ay * t + this.by) * t + this.cy) * t;
  },
  sampleCurveDerivativeX: function (t) {
    return (3 * this.ax * t + 2 * this.bx) * t + this.cx;
  },
  solveCurveX: function (t, e) {
    if ((e === void 0 && (e = 1e-6), t < 0)) return 0;
    if (t > 1) return 1;
    for (var n = t, r = 0; r < 8; r++) {
      var o = this.sampleCurveX(n) - t;
      if (Math.abs(o) < e) return n;
      var l = this.sampleCurveDerivativeX(n);
      if (Math.abs(l) < 1e-6) break;
      n = n - o / l;
    }
    var a = 0,
      h = 1;
    for (
      n = t, r = 0;
      r < 20 && ((o = this.sampleCurveX(n)), !(Math.abs(o - t) < e));
      r++
    )
      t > o ? (a = n) : (h = n), (n = (h - a) * 0.5 + a);
    return n;
  },
  solve: function (t, e) {
    return this.sampleCurveY(this.solveCurveX(t, e));
  },
};
const sH = ea(oH),
  uc = {
    number: function (e, n, r) {
      return e + r * (n - e);
    },
  };
function vu(t, e, n) {
  return Math.min(n, Math.max(e, t));
}
function up(t, e, n) {
  const r = n - e,
    o = ((((t - e) % r) + r) % r) + e;
  return o === e ? n : o;
}
let lH = 1;
function cH() {
  return lH++;
}
function Va(t, ...e) {
  for (const n of e) for (const r in n) t[r] = n[r];
  return t;
}
function uH(t, e) {
  const n = {};
  for (let r = 0; r < e.length; r++) {
    const o = e[r];
    o in t && (n[o] = t[o]);
  }
  return n;
}
function W3(t, e, n, r) {
  const o = new sH(t, e, n, r);
  return (l) => o.solve(l);
}
const k_ = W3(0.25, 0.1, 0.25, 1),
  W6 = {};
function dH(t) {
  W6[t] || (typeof console < "u" && console.warn(t), (W6[t] = !0));
}
function X6(t) {
  return (t * Math.PI) / 180;
}
const Z7 = 63710088e-1;
class pi {
  constructor(e, n) {
    if ((R(this, "lng", void 0), R(this, "lat", void 0), isNaN(e) || isNaN(n)))
      throw new Error(`Invalid LngLat object: (${e}, ${n})`);
    if (((this.lng = +e), (this.lat = +n), this.lat > 90 || this.lat < -90))
      throw new Error(
        "Invalid LngLat latitude value: must be between -90 and 90"
      );
  }
  wrap() {
    return new pi(up(this.lng, -180, 180), this.lat);
  }
  toArray() {
    return [this.lng, this.lat];
  }
  toString() {
    return `LngLat(${this.lng}, ${this.lat})`;
  }
  distanceTo(e) {
    const n = Math.PI / 180,
      r = this.lat * n,
      o = e.lat * n,
      l =
        Math.sin(r) * Math.sin(o) +
        Math.cos(r) * Math.cos(o) * Math.cos((e.lng - this.lng) * n);
    return Z7 * Math.acos(Math.min(l, 1));
  }
  static convert(e) {
    if (e instanceof pi) return e;
    if (Array.isArray(e) && (e.length === 2 || e.length === 3))
      return new pi(Number(e[0]), Number(e[1]));
    if (!Array.isArray(e) && typeof e == "object" && e !== null)
      return new pi(Number("lng" in e ? e.lng : e.lon), Number(e.lat));
    throw new Error(
      "`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]"
    );
  }
}
const Y7 = 2 * Math.PI * Z7;
function q7(t) {
  return Y7 * Math.cos((t * Math.PI) / 180);
}
function pg(t) {
  return (180 + t) / 360;
}
function fg(t) {
  return (
    (180 -
      (180 / Math.PI) * Math.log(Math.tan(Math.PI / 4 + (t * Math.PI) / 360))) /
    360
  );
}
function $7(t, e) {
  return t / q7(e);
}
function hH(t) {
  return t * 360 - 180;
}
function U_(t) {
  const e = 180 - t * 360;
  return (360 / Math.PI) * Math.atan(Math.exp((e * Math.PI) / 180)) - 90;
}
function pH(t, e) {
  return t * q7(U_(e));
}
function fH(t) {
  return 1 / Math.cos((t * Math.PI) / 180);
}
class yu {
  constructor(e, n, r = 0) {
    R(this, "x", void 0),
      R(this, "y", void 0),
      R(this, "z", void 0),
      (this.x = +e),
      (this.y = +n),
      (this.z = +r);
  }
  static fromLngLat(e, n = 0) {
    const r = pi.convert(e);
    return new yu(pg(r.lng), fg(r.lat), $7(n, r.lat));
  }
  toLngLat() {
    return new pi(hH(this.x), U_(this.y));
  }
  toAltitude() {
    return pH(this.z, this.y);
  }
  meterInMercatorCoordinateUnits() {
    return (1 / Y7) * fH(U_(this.y));
  }
}
class Bc {
  constructor(e, n) {
    R(this, "_ne", void 0),
      R(this, "_sw", void 0),
      e &&
        (n
          ? this.setSouthWest(e).setNorthEast(n)
          : Array.isArray(e) &&
            (e.length === 4
              ? this.setSouthWest([e[0], e[1]]).setNorthEast([e[2], e[3]])
              : this.setSouthWest(e[0]).setNorthEast(e[1])));
  }
  setNorthEast(e) {
    return (
      (this._ne = e instanceof pi ? new pi(e.lng, e.lat) : pi.convert(e)), this
    );
  }
  setSouthWest(e) {
    return (
      (this._sw = e instanceof pi ? new pi(e.lng, e.lat) : pi.convert(e)), this
    );
  }
  extend(e) {
    const n = this._sw,
      r = this._ne;
    let o, l;
    if (e instanceof pi) (o = e), (l = e);
    else if (e instanceof Bc) {
      if (((o = e._sw), (l = e._ne), !o || !l)) return this;
    } else {
      if (Array.isArray(e))
        if (e.length === 4 || e.every(Array.isArray)) {
          const a = e;
          return this.extend(Bc.convert(a));
        } else {
          const a = e;
          return this.extend(pi.convert(a));
        }
      else if (e && ("lng" in e || "lon" in e) && "lat" in e)
        return this.extend(pi.convert(e));
      return this;
    }
    return (
      !n && !r
        ? ((this._sw = new pi(o.lng, o.lat)), (this._ne = new pi(l.lng, l.lat)))
        : ((n.lng = Math.min(o.lng, n.lng)),
          (n.lat = Math.min(o.lat, n.lat)),
          (r.lng = Math.max(l.lng, r.lng)),
          (r.lat = Math.max(l.lat, r.lat))),
      this
    );
  }
  getCenter() {
    return new pi(
      (this._sw.lng + this._ne.lng) / 2,
      (this._sw.lat + this._ne.lat) / 2
    );
  }
  getSouthWest() {
    return this._sw;
  }
  getNorthEast() {
    return this._ne;
  }
  getNorthWest() {
    return new pi(this.getWest(), this.getNorth());
  }
  getSouthEast() {
    return new pi(this.getEast(), this.getSouth());
  }
  getWest() {
    return this._sw.lng;
  }
  getSouth() {
    return this._sw.lat;
  }
  getEast() {
    return this._ne.lng;
  }
  getNorth() {
    return this._ne.lat;
  }
  toArray() {
    return [this._sw.toArray(), this._ne.toArray()];
  }
  toString() {
    return `LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`;
  }
  isEmpty() {
    return !(this._sw && this._ne);
  }
  contains(e) {
    const { lng: n, lat: r } = pi.convert(e),
      o = this._sw.lat <= r && r <= this._ne.lat;
    let l = this._sw.lng <= n && n <= this._ne.lng;
    return (
      this._sw.lng > this._ne.lng &&
        (l = this._sw.lng >= n && n >= this._ne.lng),
      o && l
    );
  }
  static convert(e) {
    return e instanceof Bc ? e : new Bc(e);
  }
  static fromLngLat(e, n = 0) {
    const o = (360 * n) / 40075017,
      l = o / Math.cos((Math.PI / 180) * e.lat);
    return new Bc(new pi(e.lng - l, e.lat - o), new pi(e.lng + l, e.lat + o));
  }
}
const mH = "AbortError";
function gH() {
  return new Error(mH);
}
const vH =
  typeof performance < "u" && performance && performance.now
    ? performance.now.bind(performance)
    : Date.now.bind(Date);
let B2;
const dc = {
  now: vH,
  frameAsync(t) {
    return new Promise((e, n) => {
      const r = requestAnimationFrame(e);
      t.signal.addEventListener("abort", () => {
        cancelAnimationFrame(r), n(gH());
      });
    });
  },
  get prefersReducedMotion() {
    return window.matchMedia
      ? (B2 == null &&
          (B2 = window.matchMedia("(prefers-reduced-motion: reduce)")),
        B2.matches)
      : !1;
  },
};
function G6(t, e, n) {
  (n[t] && n[t].indexOf(e) !== -1) || ((n[t] = n[t] || []), n[t].push(e));
}
function F2(t, e, n) {
  if (n && n[t]) {
    const r = n[t].indexOf(e);
    r !== -1 && n[t].splice(r, 1);
  }
}
let Zr = class {
  constructor(e, n = {}) {
    R(this, "type", void 0), Va(this, n), (this.type = e);
  }
};
class _H extends Zr {
  constructor(e, n = {}) {
    super("error", n), R(this, "error", void 0), (this.error = e);
  }
}
class yH {
  constructor() {
    R(this, "_listeners", void 0),
      R(this, "_oneTimeListeners", void 0),
      R(this, "_eventedParent", void 0),
      R(this, "_eventedParentData", void 0);
  }
  on(e, n) {
    return (
      (this._listeners = this._listeners || {}), G6(e, n, this._listeners), this
    );
  }
  off(e, n) {
    return F2(e, n, this._listeners), F2(e, n, this._oneTimeListeners), this;
  }
  once(e, n) {
    return n
      ? ((this._oneTimeListeners = this._oneTimeListeners || {}),
        G6(e, n, this._oneTimeListeners),
        this)
      : new Promise((r) => this.once(e, r));
  }
  fire(e, n) {
    typeof e == "string" && (e = new Zr(e, n || {}));
    const r = e.type;
    if (this.listens(r)) {
      e.target = this;
      const o =
        this._listeners && this._listeners[r] ? this._listeners[r].slice() : [];
      for (const h of o) h.call(this, e);
      const l =
        this._oneTimeListeners && this._oneTimeListeners[r]
          ? this._oneTimeListeners[r].slice()
          : [];
      for (const h of l) F2(r, h, this._oneTimeListeners), h.call(this, e);
      const a = this._eventedParent;
      a &&
        (Va(
          e,
          typeof this._eventedParentData == "function"
            ? this._eventedParentData()
            : this._eventedParentData
        ),
        a.fire(e));
    } else e instanceof _H && console.error(e.error);
    return this;
  }
  emit(e, n) {
    return this.fire(e, n);
  }
  listens(e) {
    return (
      (this._listeners &&
        this._listeners[e] &&
        this._listeners[e].length > 0) ||
      (this._oneTimeListeners &&
        this._oneTimeListeners[e] &&
        this._oneTimeListeners[e].length > 0) ||
      (this._eventedParent && this._eventedParent.listens(e))
    );
  }
  setEventedParent(e, n) {
    return e && (this._eventedParent = e), (this._eventedParentData = n), this;
  }
}
class xH extends yH {
  constructor(e, n) {
    super(),
      R(this, "transform", void 0),
      R(this, "handlers", void 0),
      R(this, "_moving", void 0),
      R(this, "_zooming", void 0),
      R(this, "_rotating", void 0),
      R(this, "_pitching", void 0),
      R(this, "_padding", void 0),
      R(this, "_bearingSnap", void 0),
      R(this, "_easeStart", void 0),
      R(this, "_easeOptions", void 0),
      R(this, "_easeId", void 0),
      R(this, "_onEaseFrame", void 0),
      R(this, "_onEaseEnd", void 0),
      R(this, "_easeFrameId", void 0),
      R(this, "_requestedCameraState", void 0),
      R(this, "transformCameraUpdate", void 0),
      R(this, "_renderFrameCallback", () => {
        const r = Math.min(
          (dc.now() - this._easeStart) / this._easeOptions.duration,
          1
        );
        this._onEaseFrame(this._easeOptions.easing(r)),
          r < 1 && this._easeFrameId
            ? (this._easeFrameId = this._requestRenderFrame(
                this._renderFrameCallback
              ))
            : this.stop();
      }),
      (this._moving = !1),
      (this._zooming = !1),
      (this.transform = e),
      (this._bearingSnap = n.bearingSnap),
      this.on("moveend", () => {
        delete this._requestedCameraState;
      });
  }
  getCenter() {
    return new pi(this.transform.center.lng, this.transform.center.lat);
  }
  setCenter(e, n) {
    return this.jumpTo({ center: e }, n);
  }
  panBy(e, n, r) {
    return (
      (e = oi.convert(e).mult(-1)),
      this.panTo(this.transform.center, Va({ offset: e }, n), r)
    );
  }
  panTo(e, n, r) {
    return this.easeTo(Va({ center: e }, n), r);
  }
  getZoom() {
    return this.transform.zoom;
  }
  setZoom(e, n) {
    return this.jumpTo({ zoom: e }, n), this;
  }
  zoomTo(e, n, r) {
    return this.easeTo(Va({ zoom: e }, n), r);
  }
  zoomIn(e, n) {
    return this.zoomTo(this.getZoom() + 1, e, n), this;
  }
  zoomOut(e, n) {
    return this.zoomTo(this.getZoom() - 1, e, n), this;
  }
  getBearing() {
    return this.transform.bearing;
  }
  setBearing(e, n) {
    return this.jumpTo({ bearing: e }, n), this;
  }
  getPadding() {
    return this.transform.padding;
  }
  setPadding(e, n) {
    return this.jumpTo({ padding: e }, n), this;
  }
  rotateTo(e, n, r) {
    return this.easeTo(Va({ bearing: e }, n), r);
  }
  resetNorth(e, n) {
    return this.rotateTo(0, Va({ duration: 1e3 }, e), n), this;
  }
  resetNorthPitch(e, n) {
    return this.easeTo(Va({ bearing: 0, pitch: 0, duration: 1e3 }, e), n), this;
  }
  snapToNorth(e, n) {
    return Math.abs(this.getBearing()) < this._bearingSnap
      ? this.resetNorth(e, n)
      : this;
  }
  getPitch() {
    return this.transform.pitch;
  }
  setPitch(e, n) {
    return this.jumpTo({ pitch: e }, n), this;
  }
  cameraForBounds(e, n) {
    e = Bc.convert(e);
    const r = (n && n.bearing) || 0;
    return this._cameraForBoxAndBearing(
      e.getNorthWest(),
      e.getSouthEast(),
      r,
      n
    );
  }
  _cameraForBoxAndBearing(e, n, r, o) {
    const l = { top: 0, bottom: 0, right: 0, left: 0 };
    if (
      ((o = Va(
        { padding: l, offset: [0, 0], maxZoom: this.transform.maxZoom },
        o
      )),
      typeof o.padding == "number")
    ) {
      const Yt = o.padding;
      o.padding = { top: Yt, bottom: Yt, right: Yt, left: Yt };
    }
    o.padding = Va(l, o.padding);
    const a = this.transform,
      h = a.padding,
      f = new Bc(e, n),
      v = a.project(f.getNorthWest()),
      E = a.project(f.getNorthEast()),
      x = a.project(f.getSouthEast()),
      T = a.project(f.getSouthWest()),
      N = X6(-r),
      I = v.rotate(N),
      L = E.rotate(N),
      F = x.rotate(N),
      X = T.rotate(N),
      G = new oi(Math.max(I.x, L.x, X.x, F.x), Math.max(I.y, L.y, X.y, F.y)),
      K = new oi(Math.min(I.x, L.x, X.x, F.x), Math.min(I.y, L.y, X.y, F.y)),
      Q = G.sub(K),
      ee =
        (a.width - (h.left + h.right + o.padding.left + o.padding.right)) / Q.x,
      Se =
        (a.height - (h.top + h.bottom + o.padding.top + o.padding.bottom)) /
        Q.y;
    if (Se < 0 || ee < 0) {
      dH(
        "Map cannot fit within canvas with the given bounds, padding, and/or offset."
      );
      return;
    }
    const ue = Math.min(a.scaleZoom(a.scale * Math.min(ee, Se)), o.maxZoom),
      ke = oi.convert(o.offset),
      ut = (o.padding.left - o.padding.right) / 2,
      Ve = (o.padding.top - o.padding.bottom) / 2,
      Be = new oi(ut, Ve).rotate(X6(r)),
      nt = ke.add(Be).mult(a.scale / a.zoomScale(ue));
    return {
      center: a.unproject(v.add(x).div(2).sub(nt)),
      zoom: ue,
      bearing: r,
    };
  }
  fitBounds(e, n, r) {
    return this._fitInternal(this.cameraForBounds(e, n), n, r);
  }
  fitScreenCoordinates(e, n, r, o, l) {
    return this._fitInternal(
      this._cameraForBoxAndBearing(
        this.transform.pointLocation(oi.convert(e)),
        this.transform.pointLocation(oi.convert(n)),
        r,
        o
      ),
      o,
      l
    );
  }
  _fitInternal(e, n, r) {
    return e
      ? ((n = Va(e, n)),
        delete n.padding,
        n.linear ? this.easeTo(n, r) : this.flyTo(n, r))
      : this;
  }
  jumpTo(e, n) {
    this.stop();
    const r = this._getTransformForUpdate();
    let o = !1,
      l = !1,
      a = !1;
    return (
      "zoom" in e && r.zoom !== +e.zoom && ((o = !0), (r.zoom = +e.zoom)),
      e.center !== void 0 && (r.center = pi.convert(e.center)),
      "bearing" in e &&
        r.bearing !== +e.bearing &&
        ((l = !0), (r.bearing = +e.bearing)),
      "pitch" in e && r.pitch !== +e.pitch && ((a = !0), (r.pitch = +e.pitch)),
      e.padding != null &&
        !r.isPaddingEqual(e.padding) &&
        (r.padding = e.padding),
      this._applyUpdatedTransform(r),
      this.fire(new Zr("movestart", n)).fire(new Zr("move", n)),
      o &&
        this.fire(new Zr("zoomstart", n))
          .fire(new Zr("zoom", n))
          .fire(new Zr("zoomend", n)),
      l &&
        this.fire(new Zr("rotatestart", n))
          .fire(new Zr("rotate", n))
          .fire(new Zr("rotateend", n)),
      a &&
        this.fire(new Zr("pitchstart", n))
          .fire(new Zr("pitch", n))
          .fire(new Zr("pitchend", n)),
      this.fire(new Zr("moveend", n))
    );
  }
  calculateCameraOptionsFromTo(e, n, r, o = 0) {
    const l = yu.fromLngLat(e, n),
      a = yu.fromLngLat(r, o),
      h = a.x - l.x,
      f = a.y - l.y,
      v = a.z - l.z,
      E = Math.hypot(h, f, v);
    if (E === 0)
      throw new Error("Can't calculate camera options with same From and To");
    const x = Math.hypot(h, f),
      T = this.transform.scaleZoom(
        this.transform.cameraToCenterDistance / E / this.transform.tileSize
      ),
      N = (Math.atan2(h, -f) * 180) / Math.PI;
    let I = (Math.acos(x / E) * 180) / Math.PI;
    return (
      (I = v < 0 ? 90 - I : 90 + I),
      { center: a.toLngLat(), zoom: T, pitch: I, bearing: N }
    );
  }
  easeTo(e, n) {
    var r;
    this._stop(!1, e.easeId),
      (e = Va({ offset: [0, 0], duration: 500, easing: k_ }, e)),
      (e.animate === !1 || (!e.essential && dc.prefersReducedMotion)) &&
        (e.duration = 0);
    const o = this._getTransformForUpdate(),
      l = this.getZoom(),
      a = this.getBearing(),
      h = this.getPitch(),
      f = this.getPadding(),
      v = "bearing" in e ? this._normalizeBearing(e.bearing, a) : a,
      E = "pitch" in e ? +e.pitch : h,
      x = "padding" in e ? e.padding : o.padding,
      T = oi.convert(e.offset);
    let N = o.centerPoint.add(T);
    const I = o.pointLocation(N),
      { center: L, zoom: F } = o.getConstrained(
        pi.convert(e.center || I),
        (r = e.zoom) !== null && r !== void 0 ? r : l
      );
    this._normalizeCenter(L);
    const X = o.project(I),
      G = o.project(L).sub(X),
      K = o.zoomScale(F - l);
    let Q, ee;
    e.around && ((Q = pi.convert(e.around)), (ee = o.locationPoint(Q)));
    const Se = {
      moving: this._moving,
      zooming: this._zooming,
      rotating: this._rotating,
      pitching: this._pitching,
    };
    return (
      (this._zooming = this._zooming || F !== l),
      (this._rotating = this._rotating || a !== v),
      (this._pitching = this._pitching || E !== h),
      (this._padding = !o.isPaddingEqual(x)),
      (this._easeId = e.easeId),
      this._prepareEase(n, e.noMoveStart, Se),
      this._ease(
        (ue) => {
          if (
            (this._zooming && (o.zoom = uc.number(l, F, ue)),
            this._rotating && (o.bearing = uc.number(a, v, ue)),
            this._pitching && (o.pitch = uc.number(h, E, ue)),
            this._padding &&
              (o.interpolatePadding(f, x, ue), (N = o.centerPoint.add(T))),
            Q)
          )
            o.setLocationAtPoint(Q, ee);
          else {
            const ke = o.zoomScale(o.zoom - l),
              ut = F > l ? Math.min(2, K) : Math.max(0.5, K),
              Ve = Math.pow(ut, 1 - ue),
              Ae = o.unproject(X.add(G.mult(ue * Ve)).mult(ke));
            o.setLocationAtPoint(o.renderWorldCopies ? Ae.wrap() : Ae, N);
          }
          this._applyUpdatedTransform(o), this._fireMoveEvents(n);
        },
        (ue) => {
          this._afterEase(n, ue);
        },
        e
      ),
      this
    );
  }
  _prepareEase(e, n, r = {}) {
    (this._moving = !0),
      !n && !r.moving && this.fire(new Zr("movestart", e)),
      this._zooming && !r.zooming && this.fire(new Zr("zoomstart", e)),
      this._rotating && !r.rotating && this.fire(new Zr("rotatestart", e)),
      this._pitching && !r.pitching && this.fire(new Zr("pitchstart", e));
  }
  _getTransformForUpdate() {
    return this.transformCameraUpdate
      ? (this._requestedCameraState ||
          (this._requestedCameraState = this.transform.clone()),
        this._requestedCameraState)
      : this.transform;
  }
  _applyUpdatedTransform(e) {
    if (!this.transformCameraUpdate) return;
    const n = e.clone(),
      {
        center: r,
        zoom: o,
        pitch: l,
        bearing: a,
        elevation: h,
      } = this.transformCameraUpdate(n);
    r && (n.center = r),
      o !== void 0 && (n.zoom = o),
      l !== void 0 && (n.pitch = l),
      a !== void 0 && (n.bearing = a),
      h !== void 0 && (n.elevation = h),
      this.transform.apply(n);
  }
  _fireMoveEvents(e) {
    this.fire(new Zr("move", e)),
      this._zooming && this.fire(new Zr("zoom", e)),
      this._rotating && this.fire(new Zr("rotate", e)),
      this._pitching && this.fire(new Zr("pitch", e));
  }
  _afterEase(e, n) {
    if (this._easeId && n && this._easeId === n) return;
    delete this._easeId;
    const r = this._zooming,
      o = this._rotating,
      l = this._pitching;
    (this._moving = !1),
      (this._zooming = !1),
      (this._rotating = !1),
      (this._pitching = !1),
      (this._padding = !1),
      r && this.fire(new Zr("zoomend", e)),
      o && this.fire(new Zr("rotateend", e)),
      l && this.fire(new Zr("pitchend", e)),
      this.fire(new Zr("moveend", e));
  }
  flyTo(e, n) {
    var r;
    if (!e.essential && dc.prefersReducedMotion) {
      const Ht = uH(e, ["center", "zoom", "bearing", "pitch", "around"]);
      return this.jumpTo(Ht, n);
    }
    this.stop(),
      (e = Va({ offset: [0, 0], speed: 1.2, curve: 1.42, easing: k_ }, e));
    const o = this._getTransformForUpdate(),
      l = this.getZoom(),
      a = this.getBearing(),
      h = this.getPitch(),
      f = this.getPadding(),
      v = "bearing" in e ? this._normalizeBearing(e.bearing, a) : a,
      E = "pitch" in e ? +e.pitch : h,
      x = "padding" in e ? e.padding : o.padding,
      T = oi.convert(e.offset);
    let N = o.centerPoint.add(T);
    const I = o.pointLocation(N),
      { center: L, zoom: F } = o.getConstrained(
        pi.convert(e.center || I),
        (r = e.zoom) !== null && r !== void 0 ? r : l
      );
    this._normalizeCenter(L);
    const X = o.zoomScale(F - l),
      G = o.project(I),
      K = o.project(L).sub(G);
    let Q = e.curve;
    const ee = Math.max(o.width, o.height),
      Se = ee / X,
      ue = K.mag();
    if ("minZoom" in e) {
      const Ht = vu(Math.min(e.minZoom, l, F), o.minZoom, o.maxZoom),
        On = ee / o.zoomScale(Ht - l);
      Q = Math.sqrt((On / ue) * 2);
    }
    const ke = Q * Q;
    function ut(Ht) {
      const On =
        (Se * Se - ee * ee + (Ht ? -1 : 1) * ke * ke * ue * ue) /
        (2 * (Ht ? Se : ee) * ke * ue);
      return Math.log(Math.sqrt(On * On + 1) - On);
    }
    function Ve(Ht) {
      return (Math.exp(Ht) - Math.exp(-Ht)) / 2;
    }
    function Ae(Ht) {
      return (Math.exp(Ht) + Math.exp(-Ht)) / 2;
    }
    function Be(Ht) {
      return Ve(Ht) / Ae(Ht);
    }
    const He = ut(!1);
    let nt = function (Ht) {
        return Ae(He) / Ae(He + Q * Ht);
      },
      Ut = function (Ht) {
        return (ee * ((Ae(He) * Be(He + Q * Ht) - Ve(He)) / ke)) / ue;
      },
      Yt = (ut(!0) - He) / Q;
    if (Math.abs(ue) < 1e-6 || !isFinite(Yt)) {
      if (Math.abs(ee - Se) < 1e-6) return this.easeTo(e, n);
      const Ht = Se < ee ? -1 : 1;
      (Yt = Math.abs(Math.log(Se / ee)) / Q),
        (Ut = () => 0),
        (nt = (On) => Math.exp(Ht * Q * On));
    }
    if ("duration" in e) e.duration = +e.duration;
    else {
      const Ht = "screenSpeed" in e ? +e.screenSpeed / Q : +e.speed;
      e.duration = (1e3 * Yt) / Ht;
    }
    return (
      e.maxDuration && e.duration > e.maxDuration && (e.duration = 0),
      (this._zooming = !0),
      (this._rotating = a !== v),
      (this._pitching = E !== h),
      (this._padding = !o.isPaddingEqual(x)),
      this._prepareEase(n, !1),
      this._ease(
        (Ht) => {
          const On = Ht * Yt,
            gn = 1 / nt(On);
          (o.zoom = Ht === 1 ? F : l + o.scaleZoom(gn)),
            this._rotating && (o.bearing = uc.number(a, v, Ht)),
            this._pitching && (o.pitch = uc.number(h, E, Ht)),
            this._padding &&
              (o.interpolatePadding(f, x, Ht), (N = o.centerPoint.add(T)));
          const xn = Ht === 1 ? L : o.unproject(G.add(K.mult(Ut(On))).mult(gn));
          o.setLocationAtPoint(o.renderWorldCopies ? xn.wrap() : xn, N),
            this._applyUpdatedTransform(o),
            this._fireMoveEvents(n);
        },
        () => {
          this._afterEase(n);
        },
        e
      ),
      this
    );
  }
  isEasing() {
    return !!this._easeFrameId;
  }
  stop() {
    return this._stop();
  }
  _stop(e, n) {
    if (
      (this._easeFrameId &&
        (this._cancelRenderFrame(this._easeFrameId),
        delete this._easeFrameId,
        delete this._onEaseFrame),
      this._onEaseEnd)
    ) {
      const o = this._onEaseEnd;
      delete this._onEaseEnd, o.call(this, n);
    }
    if (!e) {
      var r;
      (r = this.handlers) === null || r === void 0 || r.stop(!1);
    }
    return this;
  }
  _ease(e, n, r) {
    r.animate === !1 || r.duration === 0
      ? (e(1), n())
      : ((this._easeStart = dc.now()),
        (this._easeOptions = r),
        (this._onEaseFrame = e),
        (this._onEaseEnd = n),
        (this._easeFrameId = this._requestRenderFrame(
          this._renderFrameCallback
        )));
  }
  _normalizeBearing(e, n) {
    e = up(e, -180, 180);
    const r = Math.abs(e - n);
    return (
      Math.abs(e - 360 - n) < r && (e -= 360),
      Math.abs(e + 360 - n) < r && (e += 360),
      e
    );
  }
  _normalizeCenter(e) {
    const n = this.transform;
    if (!n.renderWorldCopies || n.lngRange) return;
    const r = e.lng - n.center.lng;
    e.lng += r > 180 ? -360 : r < -180 ? 360 : 0;
  }
}
class X3 {
  constructor(e = 0, n = 0, r = 0, o = 0) {
    if (
      (R(this, "top", void 0),
      R(this, "bottom", void 0),
      R(this, "left", void 0),
      R(this, "right", void 0),
      isNaN(e) ||
        e < 0 ||
        isNaN(n) ||
        n < 0 ||
        isNaN(r) ||
        r < 0 ||
        isNaN(o) ||
        o < 0)
    )
      throw new Error(
        "Invalid value for edge-insets, top, bottom, left and right must all be numbers"
      );
    (this.top = e), (this.bottom = n), (this.left = r), (this.right = o);
  }
  interpolate(e, n, r) {
    return (
      n.top != null && e.top != null && (this.top = uc.number(e.top, n.top, r)),
      n.bottom != null &&
        e.bottom != null &&
        (this.bottom = uc.number(e.bottom, n.bottom, r)),
      n.left != null &&
        e.left != null &&
        (this.left = uc.number(e.left, n.left, r)),
      n.right != null &&
        e.right != null &&
        (this.right = uc.number(e.right, n.right, r)),
      this
    );
  }
  getCenter(e, n) {
    const r = vu((this.left + e - this.right) / 2, 0, e),
      o = vu((this.top + n - this.bottom) / 2, 0, n);
    return new oi(r, o);
  }
  equals(e) {
    return (
      this.top === e.top &&
      this.bottom === e.bottom &&
      this.left === e.left &&
      this.right === e.right
    );
  }
  clone() {
    return new X3(this.top, this.bottom, this.left, this.right);
  }
  toJSON() {
    return {
      top: this.top,
      bottom: this.bottom,
      left: this.left,
      right: this.right,
    };
  }
}
const Hm = 85.051129;
class G3 {
  constructor(e, n, r, o, l) {
    R(this, "tileSize", void 0),
      R(this, "tileZoom", void 0),
      R(this, "lngRange", void 0),
      R(this, "latRange", void 0),
      R(this, "scale", void 0),
      R(this, "width", void 0),
      R(this, "height", void 0),
      R(this, "angle", void 0),
      R(this, "rotationMatrix", void 0),
      R(this, "pixelsToGLUnits", void 0),
      R(this, "cameraToCenterDistance", void 0),
      R(this, "mercatorMatrix", void 0),
      R(this, "projMatrix", void 0),
      R(this, "invProjMatrix", void 0),
      R(this, "alignedProjMatrix", void 0),
      R(this, "pixelMatrix", void 0),
      R(this, "pixelMatrix3D", void 0),
      R(this, "pixelMatrixInverse", void 0),
      R(this, "glCoordMatrix", void 0),
      R(this, "labelPlaneMatrix", void 0),
      R(this, "minElevationForCurrentTile", void 0),
      R(this, "_fov", void 0),
      R(this, "_pitch", void 0),
      R(this, "_zoom", void 0),
      R(this, "_unmodified", void 0),
      R(this, "_renderWorldCopies", void 0),
      R(this, "_minZoom", void 0),
      R(this, "_maxZoom", void 0),
      R(this, "_minPitch", void 0),
      R(this, "_maxPitch", void 0),
      R(this, "_center", void 0),
      R(this, "_elevation", void 0),
      R(this, "_pixelPerMeter", void 0),
      R(this, "_edgeInsets", void 0),
      R(this, "_constraining", void 0),
      R(this, "_posMatrixCache", void 0),
      R(this, "_alignedPosMatrixCache", void 0),
      (this.tileSize = 512),
      (this._renderWorldCopies = l === void 0 ? !0 : !!l),
      (this._minZoom = e || 0),
      (this._maxZoom = n || 22),
      (this._minPitch = r ?? 0),
      (this._maxPitch = o ?? 60),
      this.setMaxBounds(),
      (this.width = 0),
      (this.height = 0),
      (this._center = new pi(0, 0)),
      (this._elevation = 0),
      (this.zoom = 0),
      (this.angle = 0),
      (this._fov = 0.6435011087932844),
      (this._pitch = 0),
      (this._unmodified = !0),
      (this._edgeInsets = new X3()),
      (this._posMatrixCache = {}),
      (this._alignedPosMatrixCache = {}),
      (this.minElevationForCurrentTile = 0);
  }
  clone() {
    const e = new G3(
      this._minZoom,
      this._maxZoom,
      this._minPitch,
      this.maxPitch,
      this._renderWorldCopies
    );
    return e.apply(this), e;
  }
  apply(e) {
    (this.tileSize = e.tileSize),
      (this.latRange = e.latRange),
      (this.width = e.width),
      (this.height = e.height),
      (this._center = e._center),
      (this._elevation = e._elevation),
      (this.minElevationForCurrentTile = e.minElevationForCurrentTile),
      (this.zoom = e.zoom),
      (this.angle = e.angle),
      (this._fov = e._fov),
      (this._pitch = e._pitch),
      (this._unmodified = e._unmodified),
      (this._edgeInsets = e._edgeInsets.clone()),
      this._calcMatrices();
  }
  get minZoom() {
    return this._minZoom;
  }
  set minZoom(e) {
    this._minZoom !== e &&
      ((this._minZoom = e), (this.zoom = Math.max(this.zoom, e)));
  }
  get maxZoom() {
    return this._maxZoom;
  }
  set maxZoom(e) {
    this._maxZoom !== e &&
      ((this._maxZoom = e), (this.zoom = Math.min(this.zoom, e)));
  }
  get minPitch() {
    return this._minPitch;
  }
  set minPitch(e) {
    this._minPitch !== e &&
      ((this._minPitch = e), (this.pitch = Math.max(this.pitch, e)));
  }
  get maxPitch() {
    return this._maxPitch;
  }
  set maxPitch(e) {
    this._maxPitch !== e &&
      ((this._maxPitch = e), (this.pitch = Math.min(this.pitch, e)));
  }
  get renderWorldCopies() {
    return this._renderWorldCopies;
  }
  set renderWorldCopies(e) {
    e === void 0 ? (e = !0) : e === null && (e = !1),
      (this._renderWorldCopies = e);
  }
  get worldSize() {
    return this.tileSize * this.scale;
  }
  get centerOffset() {
    return this.centerPoint._sub(this.size._div(2));
  }
  get size() {
    return new oi(this.width, this.height);
  }
  get bearing() {
    return (-this.angle / Math.PI) * 180;
  }
  set bearing(e) {
    const n = (-up(e, -180, 180) * Math.PI) / 180;
    this.angle !== n &&
      ((this._unmodified = !1),
      (this.angle = n),
      this._calcMatrices(),
      (this.rotationMatrix = aM()),
      oM(this.rotationMatrix, this.rotationMatrix, this.angle));
  }
  get pitch() {
    return (this._pitch / Math.PI) * 180;
  }
  set pitch(e) {
    const n = (vu(e, this.minPitch, this.maxPitch) / 180) * Math.PI;
    this._pitch !== n &&
      ((this._unmodified = !1), (this._pitch = n), this._calcMatrices());
  }
  get fov() {
    return (this._fov / Math.PI) * 180;
  }
  set fov(e) {
    (e = Math.max(0.01, Math.min(60, e))),
      this._fov !== e &&
        ((this._unmodified = !1),
        (this._fov = (e / 180) * Math.PI),
        this._calcMatrices());
  }
  get zoom() {
    return this._zoom;
  }
  set zoom(e) {
    const n = Math.min(Math.max(e, this.minZoom), this.maxZoom);
    this._zoom !== n &&
      ((this._unmodified = !1),
      (this._zoom = n),
      (this.tileZoom = Math.max(0, Math.floor(n))),
      (this.scale = this.zoomScale(n)),
      this._constrain(),
      this._calcMatrices());
  }
  get center() {
    return this._center;
  }
  set center(e) {
    (e.lat === this._center.lat && e.lng === this._center.lng) ||
      ((this._unmodified = !1),
      (this._center = e),
      this._constrain(),
      this._calcMatrices());
  }
  get elevation() {
    return this._elevation;
  }
  set elevation(e) {
    e !== this._elevation &&
      ((this._elevation = e), this._constrain(), this._calcMatrices());
  }
  get padding() {
    return this._edgeInsets.toJSON();
  }
  set padding(e) {
    this._edgeInsets.equals(e) ||
      ((this._unmodified = !1),
      this._edgeInsets.interpolate(this._edgeInsets, e, 1),
      this._calcMatrices());
  }
  get centerPoint() {
    return this._edgeInsets.getCenter(this.width, this.height);
  }
  isPaddingEqual(e) {
    return this._edgeInsets.equals(e);
  }
  interpolatePadding(e, n, r) {
    (this._unmodified = !1),
      this._edgeInsets.interpolate(e, n, r),
      this._constrain(),
      this._calcMatrices();
  }
  coveringZoomLevel(e) {
    const n = (e.roundZoom ? Math.round : Math.floor)(
      this.zoom + this.scaleZoom(this.tileSize / e.tileSize)
    );
    return Math.max(0, n);
  }
  resize(e, n) {
    (this.width = e),
      (this.height = n),
      (this.pixelsToGLUnits = [2 / e, -2 / n]),
      this._constrain(),
      this._calcMatrices();
  }
  get unmodified() {
    return this._unmodified;
  }
  zoomScale(e) {
    return Math.pow(2, e);
  }
  scaleZoom(e) {
    return Math.log(e) / Math.LN2;
  }
  project(e) {
    const n = vu(e.lat, -Hm, Hm);
    return new oi(pg(e.lng) * this.worldSize, fg(n) * this.worldSize);
  }
  unproject(e) {
    return new yu(e.x / this.worldSize, e.y / this.worldSize).toLngLat();
  }
  get point() {
    return this.project(this.center);
  }
  getCameraPosition() {
    const e = this.pointLocation(this.getCameraPoint()),
      n =
        (Math.cos(this._pitch) * this.cameraToCenterDistance) /
        this._pixelPerMeter;
    return { lngLat: e, altitude: n + this.elevation };
  }
  setLocationAtPoint(e, n) {
    const r = this.pointCoordinate(n),
      o = this.pointCoordinate(this.centerPoint),
      l = this.locationCoordinate(e),
      a = new yu(l.x - (r.x - o.x), l.y - (r.y - o.y));
    (this.center = this.coordinateLocation(a)),
      this._renderWorldCopies && (this.center = this.center.wrap());
  }
  locationPoint(e) {
    return this.coordinatePoint(this.locationCoordinate(e));
  }
  pointLocation(e) {
    return this.coordinateLocation(this.pointCoordinate(e));
  }
  locationCoordinate(e) {
    return yu.fromLngLat(e);
  }
  coordinateLocation(e) {
    return e && e.toLngLat();
  }
  pointCoordinate(e) {
    const r = [e.x, e.y, 0, 1],
      o = [e.x, e.y, 1, 1];
    Gd(r, r, this.pixelMatrixInverse), Gd(o, o, this.pixelMatrixInverse);
    const l = r[3],
      a = o[3],
      h = r[0] / l,
      f = o[0] / a,
      v = r[1] / l,
      E = o[1] / a,
      x = r[2] / l,
      T = o[2] / a,
      N = x === T ? 0 : (0 - x) / (T - x);
    return new yu(
      uc.number(h, f, N) / this.worldSize,
      uc.number(v, E, N) / this.worldSize
    );
  }
  coordinatePoint(e, n = 0, r = this.pixelMatrix) {
    const o = [e.x * this.worldSize, e.y * this.worldSize, n, 1];
    return Gd(o, o, r), new oi(o[0] / o[3], o[1] / o[3]);
  }
  getBounds() {
    const e = Math.max(0, this.height / 2 - this.getHorizon());
    return new Bc()
      .extend(this.pointLocation(new oi(0, e)))
      .extend(this.pointLocation(new oi(this.width, e)))
      .extend(this.pointLocation(new oi(this.width, this.height)))
      .extend(this.pointLocation(new oi(0, this.height)));
  }
  getMaxBounds() {
    return !this.latRange ||
      this.latRange.length !== 2 ||
      !this.lngRange ||
      this.lngRange.length !== 2
      ? null
      : new Bc(
          [this.lngRange[0], this.latRange[0]],
          [this.lngRange[1], this.latRange[1]]
        );
  }
  getHorizon() {
    return (
      Math.tan(Math.PI / 2 - this._pitch) * this.cameraToCenterDistance * 0.85
    );
  }
  setMaxBounds(e) {
    e
      ? ((this.lngRange = [e.getWest(), e.getEast()]),
        (this.latRange = [e.getSouth(), e.getNorth()]),
        this._constrain())
      : ((this.lngRange = null), (this.latRange = [-Hm, Hm]));
  }
  customLayerMatrix() {
    return this.mercatorMatrix.slice();
  }
  getConstrained(e, n) {
    n = vu(+n, this.minZoom, this.maxZoom);
    const r = { center: new pi(e.lng, e.lat), zoom: n };
    let o = this.lngRange;
    if (!this._renderWorldCopies && o === null) {
      const ee = 179.9999999999;
      o = [-ee, ee];
    }
    const l = this.tileSize * this.zoomScale(r.zoom);
    let a = 0,
      h = l,
      f = 0,
      v = l,
      E = 0,
      x = 0;
    const { x: T, y: N } = this.size;
    if (this.latRange) {
      const ee = this.latRange;
      (a = fg(ee[1]) * l), (h = fg(ee[0]) * l), h - a < N && (E = N / (h - a));
    }
    o &&
      ((f = up(pg(o[0]) * l, 0, l)),
      (v = up(pg(o[1]) * l, 0, l)),
      v < f && (v += l),
      v - f < T && (x = T / (v - f)));
    const { x: I, y: L } = this.project.call({ worldSize: l }, e);
    let F, X;
    const G = Math.max(x || 0, E || 0);
    if (G) {
      const ee = new oi(x ? (v + f) / 2 : I, E ? (h + a) / 2 : L);
      return (
        (r.center = this.unproject.call({ worldSize: l }, ee).wrap()),
        (r.zoom += this.scaleZoom(G)),
        r
      );
    }
    if (this.latRange) {
      const ee = N / 2;
      L - ee < a && (X = a + ee), L + ee > h && (X = h - ee);
    }
    if (o) {
      const ee = (f + v) / 2;
      let Se = I;
      this._renderWorldCopies && (Se = up(I, ee - l / 2, ee + l / 2));
      const ue = T / 2;
      Se - ue < f && (F = f + ue), Se + ue > v && (F = v - ue);
    }
    if (F !== void 0 || X !== void 0) {
      var K, Q;
      const ee = new oi(
        (K = F) !== null && K !== void 0 ? K : I,
        (Q = X) !== null && Q !== void 0 ? Q : L
      );
      r.center = this.unproject.call({ worldSize: l }, ee).wrap();
    }
    return r;
  }
  _constrain() {
    if (!this.center || !this.width || !this.height || this._constraining)
      return;
    this._constraining = !0;
    const e = this._unmodified,
      { center: n, zoom: r } = this.getConstrained(this.center, this.zoom);
    (this.center = n),
      (this.zoom = r),
      (this._unmodified = e),
      (this._constraining = !1);
  }
  _calcMatrices() {
    if (!this.height) return;
    const e = this._fov / 2,
      n = this.centerOffset,
      r = this.point.x,
      o = this.point.y;
    (this.cameraToCenterDistance = (0.5 / Math.tan(e)) * this.height),
      (this._pixelPerMeter = $7(1, this.center.lat) * this.worldSize);
    let l = E5(new Float64Array(16));
    lc(l, l, [this.width / 2, -this.height / 2, 1]),
      sc(l, l, [1, -1, 0]),
      (this.labelPlaneMatrix = l),
      (l = E5(new Float64Array(16))),
      lc(l, l, [1, -1, 1]),
      sc(l, l, [-1, -1, 0]),
      lc(l, l, [2 / this.width, 2 / this.height, 1]),
      (this.glCoordMatrix = l);
    const a =
        this.cameraToCenterDistance +
        (this._elevation * this._pixelPerMeter) / Math.cos(this._pitch),
      h = Math.min(this.elevation, this.minElevationForCurrentTile),
      f = a - (h * this._pixelPerMeter) / Math.cos(this._pitch),
      v = h < 0 ? f : a,
      E = Math.PI / 2 + this._pitch,
      x = this._fov * (0.5 + n.y / this.height),
      T =
        (Math.sin(x) * v) / Math.sin(vu(Math.PI - E - x, 0.01, Math.PI - 0.01)),
      N = this.getHorizon(),
      L =
        2 * Math.atan(N / this.cameraToCenterDistance) * (0.5 + n.y / (N * 2)),
      F =
        (Math.sin(L) * v) / Math.sin(vu(Math.PI - E - L, 0.01, Math.PI - 0.01)),
      X = Math.min(T, F),
      G = (Math.cos(Math.PI / 2 - this._pitch) * X + v) * 1.01,
      K = this.height / 50;
    (l = new Float64Array(16)),
      t8(l, this._fov, this.width / this.height, K, G),
      (l[8] = (-n.x * 2) / this.width),
      (l[9] = (n.y * 2) / this.height),
      lc(l, l, [1, -1, 1]),
      sc(l, l, [0, 0, -this.cameraToCenterDistance]),
      zp(l, l, this._pitch),
      F1(l, l, this.angle),
      sc(l, l, [-r, -o, 0]),
      (this.mercatorMatrix = lc([], l, [
        this.worldSize,
        this.worldSize,
        this.worldSize,
      ])),
      lc(l, l, [1, 1, this._pixelPerMeter]),
      (this.pixelMatrix = e0(new Float64Array(16), this.labelPlaneMatrix, l)),
      sc(l, l, [0, 0, -this.elevation]),
      (this.projMatrix = l),
      (this.invProjMatrix = Mg([], l)),
      (this.pixelMatrix3D = e0(new Float64Array(16), this.labelPlaneMatrix, l));
    const Q = (this.width % 2) / 2,
      ee = (this.height % 2) / 2,
      Se = Math.cos(this.angle),
      ue = Math.sin(this.angle),
      ke = r - Math.round(r) + Se * Q + ue * ee,
      ut = o - Math.round(o) + Se * ee + ue * Q,
      Ve = new Float64Array(l);
    if (
      (sc(Ve, Ve, [ke > 0.5 ? ke - 1 : ke, ut > 0.5 ? ut - 1 : ut, 0]),
      (this.alignedProjMatrix = Ve),
      (l = Mg(new Float64Array(16), this.pixelMatrix)),
      !l)
    )
      throw new Error("failed to invert matrix");
    (this.pixelMatrixInverse = l),
      (this._posMatrixCache = {}),
      (this._alignedPosMatrixCache = {});
  }
  maxPitchScaleFactor() {
    if (!this.pixelMatrixInverse) return 1;
    const e = this.pointCoordinate(new oi(0, 0)),
      n = [e.x * this.worldSize, e.y * this.worldSize, 0, 1];
    return Gd(n, n, this.pixelMatrix)[3] / this.cameraToCenterDistance;
  }
  getCameraPoint() {
    const e = this._pitch,
      n = Math.tan(e) * (this.cameraToCenterDistance || 1);
    return this.centerPoint.add(new oi(0, n));
  }
  getCameraQueryGeometry(e) {
    const n = this.getCameraPoint();
    if (e.length === 1) return [e[0], n];
    {
      let r = n.x,
        o = n.y,
        l = n.x,
        a = n.y;
      for (const h of e)
        (r = Math.min(r, h.x)),
          (o = Math.min(o, h.y)),
          (l = Math.max(l, h.x)),
          (a = Math.max(a, h.y));
      return [
        new oi(r, o),
        new oi(l, o),
        new oi(l, a),
        new oi(r, a),
        new oi(r, o),
      ];
    }
  }
  lngLatToCameraDepth(e, n) {
    const r = this.locationCoordinate(e),
      o = [r.x * this.worldSize, r.y * this.worldSize, n, 1];
    return Gd(o, o, this.projMatrix), o[2] / o[3];
  }
}
var Z3;
class hr {
  static testProp(e) {
    if (!hr.docStyle) return e[0];
    for (let n = 0; n < e.length; n++) if (e[n] in hr.docStyle) return e[n];
    return e[0];
  }
  static create(e, n, r) {
    const o = window.document.createElement(e);
    return n !== void 0 && (o.className = n), r && r.appendChild(o), o;
  }
  static createNS(e, n) {
    return window.document.createElementNS(e, n);
  }
  static disableDrag() {
    hr.docStyle &&
      hr.selectProp &&
      ((hr.userSelect = hr.docStyle[hr.selectProp]),
      (hr.docStyle[hr.selectProp] = "none"));
  }
  static enableDrag() {
    hr.docStyle &&
      hr.selectProp &&
      (hr.docStyle[hr.selectProp] = hr.userSelect);
  }
  static setTransform(e, n) {
    e.style[hr.transformProp] = n;
  }
  static addEventListener(e, n, r, o = {}) {
    "passive" in o
      ? e.addEventListener(n, r, o)
      : e.addEventListener(n, r, o.capture);
  }
  static removeEventListener(e, n, r, o = {}) {
    "passive" in o
      ? e.removeEventListener(n, r, o)
      : e.removeEventListener(n, r, o.capture);
  }
  static suppressClickInternal(e) {
    e.preventDefault(),
      e.stopPropagation(),
      window.removeEventListener("click", hr.suppressClickInternal, !0);
  }
  static suppressClick() {
    window.addEventListener("click", hr.suppressClickInternal, !0),
      window.setTimeout(() => {
        window.removeEventListener("click", hr.suppressClickInternal, !0);
      }, 0);
  }
  static getScale(e) {
    const n = e.getBoundingClientRect();
    return {
      x: n.width / e.offsetWidth || 1,
      y: n.height / e.offsetHeight || 1,
      boundingClientRect: n,
    };
  }
  static getPoint(e, n, r) {
    const o = n.boundingClientRect;
    return new oi(
      (r.clientX - o.left) / n.x - e.clientLeft,
      (r.clientY - o.top) / n.y - e.clientTop
    );
  }
  static mousePos(e, n) {
    const r = hr.getScale(e);
    return hr.getPoint(e, r, n);
  }
  static touchPos(e, n) {
    const r = [],
      o = hr.getScale(e);
    for (let l = 0; l < n.length; l++) r.push(hr.getPoint(e, o, n[l]));
    return r;
  }
  static mouseButton(e) {
    return e.button;
  }
  static remove(e) {
    e.parentNode && e.parentNode.removeChild(e);
  }
}
Z3 = hr;
R(
  hr,
  "docStyle",
  typeof window < "u" &&
    window.document &&
    window.document.documentElement.style
);
R(hr, "userSelect", void 0);
R(
  hr,
  "selectProp",
  Z3.testProp([
    "userSelect",
    "MozUserSelect",
    "WebkitUserSelect",
    "msUserSelect",
  ])
);
R(hr, "transformProp", Z3.testProp(["transform", "WebkitTransform"]));
class H1 {
  constructor(e) {
    R(this, "_map", void 0), (this._map = e);
  }
  get transform() {
    return this._map._requestedCameraState || this._map.transform;
  }
  get center() {
    return { lng: this.transform.center.lng, lat: this.transform.center.lat };
  }
  get zoom() {
    return this.transform.zoom;
  }
  get pitch() {
    return this.transform.pitch;
  }
  get bearing() {
    return this.transform.bearing;
  }
  unproject(e) {
    return this.transform.pointLocation(oi.convert(e));
  }
}
class bH {
  constructor(e, n) {
    R(this, "_map", void 0),
      R(this, "_tr", void 0),
      R(this, "_el", void 0),
      R(this, "_container", void 0),
      R(this, "_enabled", void 0),
      R(this, "_active", void 0),
      R(this, "_startPos", void 0),
      R(this, "_lastPos", void 0),
      R(this, "_box", void 0),
      R(this, "_clickTolerance", void 0),
      (this._map = e),
      (this._tr = new H1(e)),
      (this._el = e.getCanvasContainer()),
      (this._container = e.getContainer()),
      (this._clickTolerance = n.clickTolerance || 1);
  }
  isEnabled() {
    return !!this._enabled;
  }
  isActive() {
    return !!this._active;
  }
  enable() {
    this.isEnabled() || (this._enabled = !0);
  }
  disable() {
    this.isEnabled() && (this._enabled = !1);
  }
  mousedown(e, n) {
    this.isEnabled() &&
      e.shiftKey &&
      e.button === 0 &&
      (hr.disableDrag(),
      (this._startPos = this._lastPos = n),
      (this._active = !0));
  }
  mousemoveWindow(e, n) {
    if (!this._active) return;
    const r = n;
    if (
      this._lastPos.equals(r) ||
      (!this._box && r.dist(this._startPos) < this._clickTolerance)
    )
      return;
    const o = this._startPos;
    (this._lastPos = r),
      this._box ||
        ((this._box = hr.create("div", "l7-boxzoom", this._container)),
        this._container.classList.add("l7-crosshair"),
        this._fireEvent("boxzoomstart", e));
    const l = Math.min(o.x, r.x),
      a = Math.max(o.x, r.x),
      h = Math.min(o.y, r.y),
      f = Math.max(o.y, r.y);
    hr.setTransform(this._box, `translate(${l}px,${h}px)`),
      (this._box.style.width = `${a - l}px`),
      (this._box.style.height = `${f - h}px`);
  }
  mouseupWindow(e, n) {
    if (!this._active || e.button !== 0) return;
    const r = this._startPos,
      o = n;
    if ((this.reset(), hr.suppressClick(), r.x === o.x && r.y === o.y))
      this._fireEvent("boxzoomcancel", e);
    else
      return (
        this._map.fire(new Zr("boxzoomend", { originalEvent: e })),
        {
          cameraAnimation: (l) =>
            l.fitScreenCoordinates(r, o, this._tr.bearing, { linear: !0 }),
        }
      );
  }
  keydown(e) {
    this._active &&
      e.keyCode === 27 &&
      (this.reset(), this._fireEvent("boxzoomcancel", e));
  }
  reset() {
    (this._active = !1),
      this._container.classList.remove("l7-crosshair"),
      this._box && (hr.remove(this._box), (this._box = null)),
      hr.enableDrag(),
      delete this._startPos,
      delete this._lastPos;
  }
  _fireEvent(e, n) {
    return this._map.fire(new Zr(e, { originalEvent: n }));
  }
}
class EH {
  constructor(e) {
    R(this, "_tr", void 0),
      R(this, "_enabled", void 0),
      R(this, "_active", void 0),
      (this._tr = new H1(e)),
      this.reset();
  }
  reset() {
    this._active = !1;
  }
  dblclick(e, n) {
    return (
      e.preventDefault(),
      {
        cameraAnimation: (r) => {
          r.easeTo(
            {
              duration: 300,
              zoom: this._tr.zoom + (e.shiftKey ? -1 : 1),
              around: this._tr.unproject(n),
            },
            { originalEvent: e }
          );
        },
      }
    );
  }
  enable() {
    this._enabled = !0;
  }
  disable() {
    (this._enabled = !1), this.reset();
  }
  isEnabled() {
    return this._enabled;
  }
  isActive() {
    return this._active;
  }
}
class AH {
  constructor(e, n) {
    R(this, "_options", void 0),
      R(this, "_map", void 0),
      R(this, "_container", void 0),
      R(
        this,
        "_bypassKey",
        navigator.userAgent.indexOf("Mac") !== -1 ? "metaKey" : "ctrlKey"
      ),
      R(this, "_enabled", void 0),
      (this._map = e),
      (this._options = n),
      (this._enabled = !1);
  }
  isActive() {
    return !1;
  }
  reset() {}
  _setupUI() {
    if (this._container) return;
    const e = this._map.getCanvasContainer();
    e.classList.add("l7-cooperative-gestures"),
      (this._container = hr.create("div", "l7-cooperative-gesture-screen", e));
    const n = document.createElement("div");
    (n.className = "l7-desktop-message"),
      (n.textContent = "Missing UI string"),
      this._container.appendChild(n);
    const r = document.createElement("div");
    (r.className = "l7-mobile-message"),
      (r.textContent = "Missing UI string"),
      this._container.appendChild(r),
      this._container.setAttribute("aria-hidden", "true");
  }
  _destoryUI() {
    this._container &&
      (hr.remove(this._container),
      this._map
        .getCanvasContainer()
        .classList.remove("l7-cooperative-gestures")),
      delete this._container;
  }
  enable() {
    this._setupUI(), (this._enabled = !0);
  }
  disable() {
    (this._enabled = !1), this._destoryUI();
  }
  isEnabled() {
    return this._enabled;
  }
  touchmove(e) {
    this._onCooperativeGesture(e.touches.length === 1);
  }
  wheel(e) {
    this._map.scrollZoom.isEnabled() &&
      this._onCooperativeGesture(!e[this._bypassKey]);
  }
  _onCooperativeGesture(e) {
    !this._enabled ||
      !e ||
      (this._container.classList.add("l7-show"),
      setTimeout(() => {
        this._container.classList.remove("l7-show");
      }, 100));
  }
}
const TH = { panStep: 100, bearingStep: 15, pitchStep: 10 };
class SH {
  constructor(e) {
    R(this, "_tr", void 0),
      R(this, "_enabled", void 0),
      R(this, "_active", void 0),
      R(this, "_panStep", void 0),
      R(this, "_bearingStep", void 0),
      R(this, "_pitchStep", void 0),
      R(this, "_rotationDisabled", void 0),
      (this._tr = new H1(e));
    const n = TH;
    (this._panStep = n.panStep),
      (this._bearingStep = n.bearingStep),
      (this._pitchStep = n.pitchStep),
      (this._rotationDisabled = !1);
  }
  reset() {
    this._active = !1;
  }
  keydown(e) {
    if (e.altKey || e.ctrlKey || e.metaKey) return;
    let n = 0,
      r = 0,
      o = 0,
      l = 0,
      a = 0;
    switch (e.keyCode) {
      case 61:
      case 107:
      case 171:
      case 187:
        n = 1;
        break;
      case 189:
      case 109:
      case 173:
        n = -1;
        break;
      case 37:
        e.shiftKey ? (r = -1) : (e.preventDefault(), (l = -1));
        break;
      case 39:
        e.shiftKey ? (r = 1) : (e.preventDefault(), (l = 1));
        break;
      case 38:
        e.shiftKey ? (o = 1) : (e.preventDefault(), (a = -1));
        break;
      case 40:
        e.shiftKey ? (o = -1) : (e.preventDefault(), (a = 1));
        break;
      default:
        return;
    }
    return (
      this._rotationDisabled && ((r = 0), (o = 0)),
      {
        cameraAnimation: (h) => {
          const f = this._tr;
          h.easeTo(
            {
              duration: 300,
              easeId: "keyboardHandler",
              easing: wH,
              zoom: n ? Math.round(f.zoom) + n * (e.shiftKey ? 2 : 1) : f.zoom,
              bearing: f.bearing + r * this._bearingStep,
              pitch: f.pitch + o * this._pitchStep,
              offset: [-l * this._panStep, -a * this._panStep],
              center: f.center,
            },
            { originalEvent: e }
          );
        },
      }
    );
  }
  enable() {
    this._enabled = !0;
  }
  disable() {
    (this._enabled = !1), this.reset();
  }
  isEnabled() {
    return this._enabled;
  }
  isActive() {
    return this._active;
  }
  disableRotation() {
    this._rotationDisabled = !0;
  }
  enableRotation() {
    this._rotationDisabled = !1;
  }
}
function wH(t) {
  return t * (2 - t);
}
class nd extends Zr {
  preventDefault() {
    this._defaultPrevented = !0;
  }
  get defaultPrevented() {
    return this._defaultPrevented;
  }
  constructor(e, n, r, o = {}) {
    super(e, o),
      R(this, "target", void 0),
      R(this, "originalEvent", void 0),
      R(this, "point", void 0),
      R(this, "lngLat", void 0),
      R(this, "_defaultPrevented", void 0);
    const l = hr.mousePos(n.getCanvasContainer(), r),
      a = n.unproject(l);
    (this.point = l),
      (this.lngLat = a),
      (this.originalEvent = r),
      (this._defaultPrevented = !1),
      (this.target = n);
  }
}
class jm extends Zr {
  preventDefault() {
    this._defaultPrevented = !0;
  }
  get defaultPrevented() {
    return this._defaultPrevented;
  }
  constructor(e, n, r) {
    super(e),
      R(this, "target", void 0),
      R(this, "originalEvent", void 0),
      R(this, "lngLat", void 0),
      R(this, "point", void 0),
      R(this, "points", void 0),
      R(this, "lngLats", void 0),
      R(this, "_defaultPrevented", void 0);
    const o = e === "touchend" ? r.changedTouches : r.touches,
      l = hr.touchPos(n.getCanvasContainer(), o),
      a = l.map((v) => n.unproject(v)),
      h = l.reduce((v, E, x, T) => v.add(E.div(T.length)), new oi(0, 0)),
      f = n.unproject(h);
    (this.target = n),
      (this.points = l),
      (this.point = h),
      (this.lngLats = a),
      (this.lngLat = f),
      (this.originalEvent = r),
      (this._defaultPrevented = !1);
  }
}
class CH extends Zr {
  preventDefault() {
    this._defaultPrevented = !0;
  }
  get defaultPrevented() {
    return this._defaultPrevented;
  }
  constructor(e, n, r) {
    super(e),
      R(this, "target", void 0),
      R(this, "originalEvent", void 0),
      R(this, "_defaultPrevented", void 0),
      (this.target = n),
      (this._defaultPrevented = !1),
      (this.originalEvent = r);
  }
}
class NH {
  constructor(e, n) {
    R(this, "_mousedownPos", void 0),
      R(this, "_clickTolerance", void 0),
      R(this, "_map", void 0),
      (this._map = e),
      (this._clickTolerance = n.clickTolerance);
  }
  reset() {
    delete this._mousedownPos;
  }
  wheel(e) {
    return this._firePreventable(new CH(e.type, this._map, e));
  }
  mousedown(e, n) {
    return (
      (this._mousedownPos = n),
      this._firePreventable(new nd(e.type, this._map, e))
    );
  }
  mouseup(e) {
    this._map.fire(new nd(e.type, this._map, e));
  }
  click(e, n) {
    (this._mousedownPos &&
      this._mousedownPos.dist(n) >= this._clickTolerance) ||
      this._map.fire(new nd(e.type, this._map, e));
  }
  dblclick(e) {
    return this._firePreventable(new nd(e.type, this._map, e));
  }
  mouseover(e) {
    this._map.fire(new nd(e.type, this._map, e));
  }
  mouseout(e) {
    this._map.fire(new nd(e.type, this._map, e));
  }
  touchstart(e) {
    return this._firePreventable(new jm(e.type, this._map, e));
  }
  touchmove(e) {
    this._map.fire(new jm(e.type, this._map, e));
  }
  touchend(e) {
    this._map.fire(new jm(e.type, this._map, e));
  }
  touchcancel(e) {
    this._map.fire(new jm(e.type, this._map, e));
  }
  _firePreventable(e) {
    if ((this._map.fire(e), e.defaultPrevented)) return {};
  }
  isEnabled() {
    return !0;
  }
  isActive() {
    return !1;
  }
  enable() {}
  disable() {}
}
class RH {
  constructor(e) {
    R(this, "_map", void 0),
      R(this, "_delayContextMenu", void 0),
      R(this, "_ignoreContextMenu", void 0),
      R(this, "_contextMenuEvent", void 0),
      (this._map = e);
  }
  reset() {
    (this._delayContextMenu = !1),
      (this._ignoreContextMenu = !0),
      delete this._contextMenuEvent;
  }
  mousemove(e) {
    this._map.fire(new nd(e.type, this._map, e));
  }
  mousedown() {
    (this._delayContextMenu = !0), (this._ignoreContextMenu = !1);
  }
  mouseup() {
    (this._delayContextMenu = !1),
      this._contextMenuEvent &&
        (this._map.fire(
          new nd("contextmenu", this._map, this._contextMenuEvent)
        ),
        delete this._contextMenuEvent);
  }
  contextmenu(e) {
    this._delayContextMenu
      ? (this._contextMenuEvent = e)
      : this._ignoreContextMenu || this._map.fire(new nd(e.type, this._map, e)),
      this._map.listens("contextmenu") && e.preventDefault();
  }
  isEnabled() {
    return !0;
  }
  isActive() {
    return !1;
  }
  enable() {}
  disable() {}
}
class Y3 {
  constructor(e) {
    R(this, "contextmenu", void 0),
      R(this, "mousedown", void 0),
      R(this, "mousemoveWindow", void 0),
      R(this, "mouseup", void 0),
      R(this, "touchstart", void 0),
      R(this, "touchmoveWindow", void 0),
      R(this, "touchend", void 0),
      R(this, "_clickTolerance", void 0),
      R(this, "_moveFunction", void 0),
      R(this, "_activateOnStart", void 0),
      R(this, "_active", void 0),
      R(this, "_enabled", void 0),
      R(this, "_moved", void 0),
      R(this, "_lastPoint", void 0),
      R(this, "_moveStateManager", void 0),
      (this._enabled = !!e.enable),
      (this._moveStateManager = e.moveStateManager),
      (this._clickTolerance = e.clickTolerance || 1),
      (this._moveFunction = e.move),
      (this._activateOnStart = !!e.activateOnStart),
      e.assignEvents(this),
      this.reset();
  }
  reset(e) {
    (this._active = !1),
      (this._moved = !1),
      delete this._lastPoint,
      this._moveStateManager.endMove(e);
  }
  _move(...e) {
    const n = this._moveFunction(...e);
    if (n.bearingDelta || n.pitchDelta || n.around || n.panDelta)
      return (this._active = !0), n;
  }
  dragStart(e, n) {
    !this.isEnabled() ||
      this._lastPoint ||
      (this._moveStateManager.isValidStartEvent(e) &&
        (this._moveStateManager.startMove(e),
        (this._lastPoint = n.length ? n[0] : n),
        this._activateOnStart && this._lastPoint && (this._active = !0)));
  }
  dragMove(e, n) {
    if (!this.isEnabled()) return;
    const r = this._lastPoint;
    if (!r) return;
    if ((e.preventDefault(), !this._moveStateManager.isValidMoveEvent(e))) {
      this.reset(e);
      return;
    }
    const o = n.length ? n[0] : n;
    if (!(!this._moved && o.dist(r) < this._clickTolerance))
      return (this._moved = !0), (this._lastPoint = o), this._move(r, o);
  }
  dragEnd(e) {
    !this.isEnabled() ||
      !this._lastPoint ||
      (this._moveStateManager.isValidEndEvent(e) &&
        (this._moved && hr.suppressClick(), this.reset(e)));
  }
  enable() {
    this._enabled = !0;
  }
  disable() {
    (this._enabled = !1), this.reset();
  }
  isEnabled() {
    return this._enabled;
  }
  isActive() {
    return this._active;
  }
  getClickTolerance() {
    return this._clickTolerance;
  }
}
const IH = 0,
  MH = 2,
  PH = { [IH]: 1, [MH]: 2 };
function OH(t, e) {
  const n = PH[e];
  return t.buttons === void 0 || (t.buttons & n) !== n;
}
class q3 {
  constructor(e) {
    R(this, "_eventButton", void 0),
      R(this, "_correctEvent", void 0),
      (this._correctEvent = e.checkCorrectEvent);
  }
  startMove(e) {
    const n = hr.mouseButton(e);
    this._eventButton = n;
  }
  endMove(e) {
    delete this._eventButton;
  }
  isValidStartEvent(e) {
    return this._correctEvent(e);
  }
  isValidMoveEvent(e) {
    return !OH(e, this._eventButton);
  }
  isValidEndEvent(e) {
    return hr.mouseButton(e) === this._eventButton;
  }
}
const $3 = 0,
  K7 = 2,
  K3 = (t) => {
    (t.mousedown = t.dragStart),
      (t.mousemoveWindow = t.dragMove),
      (t.mouseup = t.dragEnd),
      (t.contextmenu = (e) => {
        e.preventDefault();
      });
  },
  LH = ({ enable: t, clickTolerance: e }) => {
    const n = new q3({
      checkCorrectEvent: (r) => hr.mouseButton(r) === $3 && !r.ctrlKey,
    });
    return new Y3({
      clickTolerance: e,
      move: (r, o) => ({ around: o, panDelta: o.sub(r) }),
      activateOnStart: !0,
      moveStateManager: n,
      enable: t,
      assignEvents: K3,
    });
  },
  DH = ({
    enable: t,
    clickTolerance: e,
    bearingDegreesPerPixelMoved: n = 0.8,
  }) => {
    const r = new q3({
      checkCorrectEvent: (o) =>
        (hr.mouseButton(o) === $3 && o.ctrlKey) || hr.mouseButton(o) === K7,
    });
    return new Y3({
      clickTolerance: e,
      move: (o, l) => ({ bearingDelta: (l.x - o.x) * n }),
      moveStateManager: r,
      enable: t,
      assignEvents: K3,
    });
  },
  BH = ({
    enable: t,
    clickTolerance: e,
    pitchDegreesPerPixelMoved: n = -0.5,
  }) => {
    const r = new q3({
      checkCorrectEvent: (o) =>
        (hr.mouseButton(o) === $3 && o.ctrlKey) || hr.mouseButton(o) === K7,
    });
    return new Y3({
      clickTolerance: e,
      move: (o, l) => ({ pitchDelta: (l.y - o.y) * n }),
      moveStateManager: r,
      enable: t,
      assignEvents: K3,
    });
  },
  Z6 = 4.000244140625,
  FH = 1 / 100,
  kH = 1 / 450,
  UH = 2;
class zH {
  constructor(e, n) {
    R(this, "_map", void 0),
      R(this, "_tr", void 0),
      R(this, "_enabled", void 0),
      R(this, "_active", void 0),
      R(this, "_zooming", void 0),
      R(this, "_aroundCenter", void 0),
      R(this, "_around", void 0),
      R(this, "_aroundPoint", void 0),
      R(this, "_type", void 0),
      R(this, "_lastValue", void 0),
      R(this, "_timeout", void 0),
      R(this, "_finishTimeout", void 0),
      R(this, "_lastWheelEvent", void 0),
      R(this, "_lastWheelEventTime", void 0),
      R(this, "_startZoom", void 0),
      R(this, "_targetZoom", void 0),
      R(this, "_delta", void 0),
      R(this, "_easing", void 0),
      R(this, "_prevEase", void 0),
      R(this, "_frameId", void 0),
      R(this, "_triggerRenderFrame", void 0),
      R(this, "_defaultZoomRate", void 0),
      R(this, "_wheelZoomRate", void 0),
      R(this, "_onTimeout", (r) => {
        (this._type = "wheel"),
          (this._delta -= this._lastValue),
          this._active || this._start(r);
      }),
      (this._map = e),
      (this._tr = new H1(e)),
      (this._triggerRenderFrame = n),
      (this._delta = 0),
      (this._defaultZoomRate = FH),
      (this._wheelZoomRate = kH);
  }
  setZoomRate(e) {
    this._defaultZoomRate = e;
  }
  setWheelZoomRate(e) {
    this._wheelZoomRate = e;
  }
  isEnabled() {
    return !!this._enabled;
  }
  isActive() {
    return !!this._active || this._finishTimeout !== void 0;
  }
  isZooming() {
    return !!this._zooming;
  }
  enable(e) {
    this.isEnabled() ||
      ((this._enabled = !0),
      (this._aroundCenter = !!e && e.around === "center"));
  }
  disable() {
    this.isEnabled() && (this._enabled = !1);
  }
  wheel(e) {
    if (
      !this.isEnabled() ||
      (this._map.cooperativeGestures.isEnabled() &&
        !e[this._map.cooperativeGestures._bypassKey])
    )
      return;
    let n =
      e.deltaMode === WheelEvent.DOM_DELTA_LINE ? e.deltaY * 40 : e.deltaY;
    const r = dc.now(),
      o = r - (this._lastWheelEventTime || 0);
    (this._lastWheelEventTime = r),
      n !== 0 && n % Z6 === 0
        ? (this._type = "wheel")
        : n !== 0 && Math.abs(n) < 4
        ? (this._type = "trackpad")
        : o > 400
        ? ((this._type = null),
          (this._lastValue = n),
          (this._timeout = setTimeout(this._onTimeout, 40, e)))
        : this._type ||
          ((this._type = Math.abs(o * n) < 200 ? "trackpad" : "wheel"),
          this._timeout &&
            (clearTimeout(this._timeout),
            (this._timeout = null),
            (n += this._lastValue))),
      e.shiftKey && n && (n = n / 4),
      this._type &&
        ((this._lastWheelEvent = e),
        (this._delta -= n),
        this._active || this._start(e)),
      e.preventDefault();
  }
  _start(e) {
    if (!this._delta) return;
    this._frameId && (this._frameId = null),
      (this._active = !0),
      this.isZooming() || (this._zooming = !0),
      this._finishTimeout &&
        (clearTimeout(this._finishTimeout), delete this._finishTimeout);
    const n = hr.mousePos(this._map.getCanvasContainer(), e),
      r = this._tr;
    n.y > r.transform.height / 2 - r.transform.getHorizon()
      ? (this._around = pi.convert(
          this._aroundCenter ? r.center : r.unproject(n)
        ))
      : (this._around = pi.convert(r.center)),
      (this._aroundPoint = r.transform.locationPoint(this._around)),
      this._frameId || ((this._frameId = !0), this._triggerRenderFrame());
  }
  renderFrame() {
    if (!this._frameId || ((this._frameId = null), !this.isActive())) return;
    const e = this._tr.transform;
    if (this._delta !== 0) {
      const h =
        this._type === "wheel" && Math.abs(this._delta) > Z6
          ? this._wheelZoomRate
          : this._defaultZoomRate;
      let f = UH / (1 + Math.exp(-Math.abs(this._delta * h)));
      this._delta < 0 && f !== 0 && (f = 1 / f);
      const v =
        typeof this._targetZoom == "number"
          ? e.zoomScale(this._targetZoom)
          : e.scale;
      (this._targetZoom = Math.min(
        e.maxZoom,
        Math.max(e.minZoom, e.scaleZoom(v * f))
      )),
        this._type === "wheel" &&
          ((this._startZoom = e.zoom),
          (this._easing = this._smoothOutEasing(200))),
        (this._delta = 0);
    }
    const n = typeof this._targetZoom == "number" ? this._targetZoom : e.zoom,
      r = this._startZoom,
      o = this._easing;
    let l = !1,
      a;
    if (this._type === "wheel" && r && o) {
      const h = Math.min((dc.now() - this._lastWheelEventTime) / 200, 1),
        f = o(h);
      (a = uc.number(r, n, f)),
        h < 1 ? this._frameId || (this._frameId = !0) : (l = !0);
    } else (a = n), (l = !0);
    return (
      (this._active = !0),
      l &&
        ((this._active = !1),
        (this._finishTimeout = setTimeout(() => {
          (this._zooming = !1),
            this._triggerRenderFrame(),
            delete this._targetZoom,
            delete this._finishTimeout;
        }, 200))),
      {
        noInertia: !0,
        needsRenderFrame: !l,
        zoomDelta: a - e.zoom,
        around: this._aroundPoint,
        originalEvent: this._lastWheelEvent,
      }
    );
  }
  _smoothOutEasing(e) {
    let n = k_;
    if (this._prevEase) {
      const r = this._prevEase,
        o = (dc.now() - r.start) / r.duration,
        l = r.easing(o + 0.01) - r.easing(o),
        a = (0.27 / Math.sqrt(l * l + 1e-4)) * 0.01,
        h = Math.sqrt(0.27 * 0.27 - a * a);
      n = W3(a, h, 0.25, 1);
    }
    return (this._prevEase = { start: dc.now(), duration: e, easing: n }), n;
  }
  reset() {
    (this._active = !1),
      (this._zooming = !1),
      delete this._targetZoom,
      this._finishTimeout &&
        (clearTimeout(this._finishTimeout), delete this._finishTimeout);
  }
}
class VH {
  constructor(e, n) {
    R(this, "_clickZoom", void 0),
      R(this, "_tapZoom", void 0),
      (this._clickZoom = e),
      (this._tapZoom = n);
  }
  enable() {
    this._clickZoom.enable(), this._tapZoom.enable();
  }
  disable() {
    this._clickZoom.disable(), this._tapZoom.disable();
  }
  isEnabled() {
    return this._clickZoom.isEnabled() && this._tapZoom.isEnabled();
  }
  isActive() {
    return this._clickZoom.isActive() || this._tapZoom.isActive();
  }
}
class HH {
  constructor(e, n, r) {
    R(this, "_el", void 0),
      R(this, "_mousePan", void 0),
      R(this, "_touchPan", void 0),
      R(this, "_inertiaOptions", void 0),
      (this._el = e),
      (this._mousePan = n),
      (this._touchPan = r);
  }
  enable(e) {
    (this._inertiaOptions = e || {}),
      this._mousePan.enable(),
      this._touchPan.enable(),
      this._el.classList.add("l7-touch-drag-pan");
  }
  disable() {
    this._mousePan.disable(),
      this._touchPan.disable(),
      this._el.classList.remove("l7-touch-drag-pan");
  }
  isEnabled() {
    return this._mousePan.isEnabled() && this._touchPan.isEnabled();
  }
  isActive() {
    return this._mousePan.isActive() || this._touchPan.isActive();
  }
}
class jH {
  constructor(e, n, r) {
    R(this, "_mouseRotate", void 0),
      R(this, "_mousePitch", void 0),
      R(this, "_pitchWithRotate", void 0),
      (this._pitchWithRotate = e.pitchWithRotate),
      (this._mouseRotate = n),
      (this._mousePitch = r);
  }
  enable() {
    this._mouseRotate.enable(),
      this._pitchWithRotate && this._mousePitch.enable();
  }
  disable() {
    this._mouseRotate.disable(), this._mousePitch.disable();
  }
  isEnabled() {
    return (
      this._mouseRotate.isEnabled() &&
      (!this._pitchWithRotate || this._mousePitch.isEnabled())
    );
  }
  isActive() {
    return this._mouseRotate.isActive() || this._mousePitch.isActive();
  }
}
class WH {
  constructor(e, n, r, o) {
    R(this, "_el", void 0),
      R(this, "_touchZoom", void 0),
      R(this, "_touchRotate", void 0),
      R(this, "_tapDragZoom", void 0),
      R(this, "_rotationDisabled", void 0),
      R(this, "_enabled", void 0),
      (this._el = e),
      (this._touchZoom = n),
      (this._touchRotate = r),
      (this._tapDragZoom = o),
      (this._rotationDisabled = !1),
      (this._enabled = !0);
  }
  enable(e) {
    this._touchZoom.enable(e),
      this._rotationDisabled || this._touchRotate.enable(e),
      this._tapDragZoom.enable(),
      this._el.classList.add("l7-touch-zoom-rotate");
  }
  disable() {
    this._touchZoom.disable(),
      this._touchRotate.disable(),
      this._tapDragZoom.disable(),
      this._el.classList.remove("l7-touch-zoom-rotate");
  }
  isEnabled() {
    return (
      this._touchZoom.isEnabled() &&
      (this._rotationDisabled || this._touchRotate.isEnabled()) &&
      this._tapDragZoom.isEnabled()
    );
  }
  isActive() {
    return (
      this._touchZoom.isActive() ||
      this._touchRotate.isActive() ||
      this._tapDragZoom.isActive()
    );
  }
  disableRotation() {
    (this._rotationDisabled = !0), this._touchRotate.disable();
  }
  enableRotation() {
    (this._rotationDisabled = !1),
      this._touchZoom.isEnabled() && this._touchRotate.enable();
  }
}
function z_(t, e) {
  if (t.length !== e.length)
    throw new Error(
      `The number of touches and points are not equal - touches ${t.length}, points ${e.length}`
    );
  const n = {};
  for (let r = 0; r < t.length; r++) n[t[r].identifier] = e[r];
  return n;
}
function XH(t) {
  const e = new oi(0, 0);
  for (const n of t) e._add(n);
  return e.div(t.length);
}
const Q7 = 500,
  GH = 500,
  Q3 = 30;
class ZH {
  constructor(e) {
    R(this, "numTouches", void 0),
      R(this, "centroid", void 0),
      R(this, "startTime", void 0),
      R(this, "aborted", void 0),
      R(this, "touches", void 0),
      this.reset(),
      (this.numTouches = e.numTouches);
  }
  reset() {
    delete this.centroid,
      delete this.startTime,
      delete this.touches,
      (this.aborted = !1);
  }
  touchstart(e, n, r) {
    (this.centroid || r.length > this.numTouches) && (this.aborted = !0),
      !this.aborted &&
        (this.startTime === void 0 && (this.startTime = e.timeStamp),
        r.length === this.numTouches &&
          ((this.centroid = XH(n)), (this.touches = z_(r, n))));
  }
  touchmove(e, n, r) {
    if (this.aborted || !this.centroid) return;
    const o = z_(r, n);
    for (const l in this.touches) {
      const a = this.touches[l],
        h = o[l];
      (!h || h.dist(a) > Q3) && (this.aborted = !0);
    }
  }
  touchend(e, n, r) {
    if (
      ((!this.centroid || e.timeStamp - this.startTime > GH) &&
        (this.aborted = !0),
      r.length === 0)
    ) {
      const o = !this.aborted && this.centroid;
      if ((this.reset(), o)) return o;
    }
  }
}
class V_ {
  constructor(e) {
    R(this, "singleTap", void 0),
      R(this, "numTaps", void 0),
      R(this, "lastTime", void 0),
      R(this, "lastTap", void 0),
      R(this, "count", void 0),
      (this.singleTap = new ZH(e)),
      (this.numTaps = e.numTaps),
      this.reset();
  }
  reset() {
    (this.lastTime = 1 / 0),
      delete this.lastTap,
      (this.count = 0),
      this.singleTap.reset();
  }
  touchstart(e, n, r) {
    this.singleTap.touchstart(e, n, r);
  }
  touchmove(e, n, r) {
    this.singleTap.touchmove(e, n, r);
  }
  touchend(e, n, r) {
    const o = this.singleTap.touchend(e, n, r);
    if (o) {
      const l = e.timeStamp - this.lastTime < Q7,
        a = !this.lastTap || this.lastTap.dist(o) < Q3;
      if (
        ((!l || !a) && this.reset(),
        this.count++,
        (this.lastTime = e.timeStamp),
        (this.lastTap = o),
        this.count === this.numTaps)
      )
        return this.reset(), o;
    }
  }
}
class YH {
  constructor() {
    R(this, "_enabled", void 0),
      R(this, "_active", void 0),
      R(this, "_swipePoint", void 0),
      R(this, "_swipeTouch", void 0),
      R(this, "_tapTime", void 0),
      R(this, "_tapPoint", void 0),
      R(this, "_tap", void 0),
      (this._tap = new V_({ numTouches: 1, numTaps: 1 })),
      this.reset();
  }
  reset() {
    (this._active = !1),
      delete this._swipePoint,
      delete this._swipeTouch,
      delete this._tapTime,
      delete this._tapPoint,
      this._tap.reset();
  }
  touchstart(e, n, r) {
    if (!this._swipePoint)
      if (!this._tapTime) this._tap.touchstart(e, n, r);
      else {
        const o = n[0],
          l = e.timeStamp - this._tapTime < Q7,
          a = this._tapPoint.dist(o) < Q3;
        !l || !a
          ? this.reset()
          : r.length > 0 &&
            ((this._swipePoint = o), (this._swipeTouch = r[0].identifier));
      }
  }
  touchmove(e, n, r) {
    if (!this._tapTime) this._tap.touchmove(e, n, r);
    else if (this._swipePoint) {
      if (r[0].identifier !== this._swipeTouch) return;
      const o = n[0],
        l = o.y - this._swipePoint.y;
      return (
        (this._swipePoint = o),
        e.preventDefault(),
        (this._active = !0),
        { zoomDelta: l / 128 }
      );
    }
  }
  touchend(e, n, r) {
    if (this._tapTime) this._swipePoint && r.length === 0 && this.reset();
    else {
      const o = this._tap.touchend(e, n, r);
      o && ((this._tapTime = e.timeStamp), (this._tapPoint = o));
    }
  }
  touchcancel() {
    this.reset();
  }
  enable() {
    this._enabled = !0;
  }
  disable() {
    (this._enabled = !1), this.reset();
  }
  isEnabled() {
    return this._enabled;
  }
  isActive() {
    return this._active;
  }
}
class qH {
  constructor(e) {
    R(this, "_tr", void 0),
      R(this, "_enabled", void 0),
      R(this, "_active", void 0),
      R(this, "_zoomIn", void 0),
      R(this, "_zoomOut", void 0),
      (this._tr = new H1(e)),
      (this._zoomIn = new V_({ numTouches: 1, numTaps: 2 })),
      (this._zoomOut = new V_({ numTouches: 2, numTaps: 1 })),
      this.reset();
  }
  reset() {
    (this._active = !1), this._zoomIn.reset(), this._zoomOut.reset();
  }
  touchstart(e, n, r) {
    this._zoomIn.touchstart(e, n, r), this._zoomOut.touchstart(e, n, r);
  }
  touchmove(e, n, r) {
    this._zoomIn.touchmove(e, n, r), this._zoomOut.touchmove(e, n, r);
  }
  touchend(e, n, r) {
    const o = this._zoomIn.touchend(e, n, r),
      l = this._zoomOut.touchend(e, n, r),
      a = this._tr;
    if (o)
      return (
        (this._active = !0),
        e.preventDefault(),
        setTimeout(() => this.reset(), 0),
        {
          cameraAnimation: (h) =>
            h.easeTo(
              { duration: 300, zoom: a.zoom + 1, around: a.unproject(o) },
              { originalEvent: e }
            ),
        }
      );
    if (l)
      return (
        (this._active = !0),
        e.preventDefault(),
        setTimeout(() => this.reset(), 0),
        {
          cameraAnimation: (h) =>
            h.easeTo(
              { duration: 300, zoom: a.zoom - 1, around: a.unproject(l) },
              { originalEvent: e }
            ),
        }
      );
  }
  touchcancel() {
    this.reset();
  }
  enable() {
    this._enabled = !0;
  }
  disable() {
    (this._enabled = !1), this.reset();
  }
  isEnabled() {
    return this._enabled;
  }
  isActive() {
    return this._active;
  }
}
class $H {
  constructor(e, n) {
    R(this, "_enabled", void 0),
      R(this, "_active", void 0),
      R(this, "_touches", void 0),
      R(this, "_clickTolerance", void 0),
      R(this, "_sum", void 0),
      R(this, "_map", void 0),
      (this._clickTolerance = e.clickTolerance || 1),
      (this._map = n),
      this.reset();
  }
  reset() {
    (this._active = !1), (this._touches = {}), (this._sum = new oi(0, 0));
  }
  minTouchs() {
    return this._map.cooperativeGestures.isEnabled() ? 2 : 1;
  }
  touchstart(e, n, r) {
    return this._calculateTransform(e, n, r);
  }
  touchmove(e, n, r) {
    if (!(!this._active || r.length < this.minTouchs()))
      return e.preventDefault(), this._calculateTransform(e, n, r);
  }
  touchend(e, n, r) {
    this._calculateTransform(e, n, r),
      this._active && r.length < this.minTouchs() && this.reset();
  }
  touchcancel() {
    this.reset();
  }
  _calculateTransform(e, n, r) {
    r.length > 0 && (this._active = !0);
    const o = z_(r, n),
      l = new oi(0, 0),
      a = new oi(0, 0);
    let h = 0;
    for (const E in o) {
      const x = o[E],
        T = this._touches[E];
      T && (l._add(x), a._add(x.sub(T)), h++, (o[E] = x));
    }
    if (((this._touches = o), h < this.minTouchs() || !a.mag())) return;
    const f = a.div(h);
    return (
      this._sum._add(f),
      this._sum.mag() < this._clickTolerance
        ? void 0
        : { around: l.div(h), panDelta: f }
    );
  }
  enable() {
    this._enabled = !0;
  }
  disable() {
    (this._enabled = !1), this.reset();
  }
  isEnabled() {
    return this._enabled;
  }
  isActive() {
    return this._active;
  }
}
class J3 {
  constructor() {
    R(this, "_enabled", void 0),
      R(this, "_active", void 0),
      R(this, "_firstTwoTouches", void 0),
      R(this, "_vector", void 0),
      R(this, "_startVector", void 0),
      R(this, "_aroundCenter", void 0),
      this.reset();
  }
  reset() {
    (this._active = !1), delete this._firstTwoTouches;
  }
  touchstart(e, n, r) {
    this._firstTwoTouches ||
      r.length < 2 ||
      ((this._firstTwoTouches = [r[0].identifier, r[1].identifier]),
      this._start([n[0], n[1]]));
  }
  touchmove(e, n, r) {
    if (!this._firstTwoTouches) return;
    e.preventDefault();
    const [o, l] = this._firstTwoTouches,
      a = Wm(r, n, o),
      h = Wm(r, n, l);
    if (!a || !h) return;
    const f = this._aroundCenter ? null : a.add(h).div(2);
    return this._move([a, h], f, e);
  }
  touchend(e, n, r) {
    if (!this._firstTwoTouches) return;
    const [o, l] = this._firstTwoTouches,
      a = Wm(r, n, o),
      h = Wm(r, n, l);
    (a && h) || (this._active && hr.suppressClick(), this.reset());
  }
  touchcancel() {
    this.reset();
  }
  enable(e) {
    (this._enabled = !0), (this._aroundCenter = !!e && e.around === "center");
  }
  disable() {
    (this._enabled = !1), this.reset();
  }
  isEnabled() {
    return !!this._enabled;
  }
  isActive() {
    return !!this._active;
  }
}
function Wm(t, e, n) {
  for (let r = 0; r < t.length; r++) if (t[r].identifier === n) return e[r];
}
const KH = 0.1;
function Y6(t, e) {
  return Math.log(t / e) / Math.LN2;
}
class QH extends J3 {
  constructor(...e) {
    super(...e),
      R(this, "_distance", void 0),
      R(this, "_startDistance", void 0);
  }
  reset() {
    super.reset(), delete this._distance, delete this._startDistance;
  }
  _start(e) {
    this._startDistance = this._distance = e[0].dist(e[1]);
  }
  _move(e, n) {
    const r = this._distance;
    if (
      ((this._distance = e[0].dist(e[1])),
      !(
        !this._active && Math.abs(Y6(this._distance, this._startDistance)) < KH
      ))
    )
      return (
        (this._active = !0),
        { zoomDelta: Y6(this._distance, r), pinchAround: n }
      );
  }
}
const JH = 25;
function q6(t, e) {
  return (t.angleWith(e) * 180) / Math.PI;
}
class ej extends J3 {
  constructor(...e) {
    super(...e), R(this, "_minDiameter", void 0);
  }
  reset() {
    super.reset(),
      delete this._minDiameter,
      delete this._startVector,
      delete this._vector;
  }
  _start(e) {
    (this._startVector = this._vector = e[0].sub(e[1])),
      (this._minDiameter = e[0].dist(e[1]));
  }
  _move(e, n, r) {
    const o = this._vector;
    if (
      ((this._vector = e[0].sub(e[1])),
      !(!this._active && this._isBelowThreshold(this._vector)))
    )
      return (
        (this._active = !0),
        { bearingDelta: q6(this._vector, o), pinchAround: n }
      );
  }
  _isBelowThreshold(e) {
    this._minDiameter = Math.min(this._minDiameter, e.mag());
    const n = Math.PI * this._minDiameter,
      r = (JH / n) * 360,
      o = q6(e, this._startVector);
    return Math.abs(o) < r;
  }
}
function k2(t) {
  return Math.abs(t.y) > Math.abs(t.x);
}
const tj = 100;
class nj extends J3 {
  constructor(e) {
    super(),
      R(this, "_valid", void 0),
      R(this, "_firstMove", void 0),
      R(this, "_lastPoints", void 0),
      R(this, "_map", void 0),
      R(this, "_currentTouchCount", 0),
      (this._map = e);
  }
  reset() {
    super.reset(),
      (this._valid = void 0),
      delete this._firstMove,
      delete this._lastPoints;
  }
  touchstart(e, n, r) {
    super.touchstart(e, n, r), (this._currentTouchCount = r.length);
  }
  _start(e) {
    (this._lastPoints = e), k2(e[0].sub(e[1])) && (this._valid = !1);
  }
  _move(e, n, r) {
    if (
      this._map.cooperativeGestures.isEnabled() &&
      this._currentTouchCount < 3
    )
      return;
    const o = e[0].sub(this._lastPoints[0]),
      l = e[1].sub(this._lastPoints[1]);
    return (
      (this._valid = this.gestureBeginsVertically(o, l, r.timeStamp)),
      this._valid
        ? ((this._lastPoints = e),
          (this._active = !0),
          { pitchDelta: ((o.y + l.y) / 2) * -0.5 })
        : void 0
    );
  }
  gestureBeginsVertically(e, n, r) {
    if (this._valid !== void 0) return this._valid;
    const o = 2,
      l = e.mag() >= o,
      a = n.mag() >= o;
    if (!l && !a) return;
    if (!l || !a)
      return (
        this._firstMove === void 0 && (this._firstMove = r),
        r - this._firstMove < tj ? void 0 : !1
      );
    const h = e.y > 0 == n.y > 0;
    return k2(e) && k2(n) && h;
  }
}
const Av = { linearity: 0.3, easing: W3(0, 0, 0.3, 1) },
  rj = Va({ deceleration: 2500, maxSpeed: 1400 }, Av),
  ij = Va({ deceleration: 20, maxSpeed: 1400 }, Av),
  aj = Va({ deceleration: 1e3, maxSpeed: 360 }, Av),
  oj = Va({ deceleration: 1e3, maxSpeed: 90 }, Av);
class sj {
  constructor(e) {
    R(this, "_map", void 0),
      R(this, "_inertiaBuffer", void 0),
      (this._map = e),
      this.clear();
  }
  clear() {
    this._inertiaBuffer = [];
  }
  record(e) {
    this._drainInertiaBuffer(),
      this._inertiaBuffer.push({ time: dc.now(), settings: e });
  }
  _drainInertiaBuffer() {
    const e = this._inertiaBuffer,
      n = dc.now(),
      r = 160;
    for (; e.length > 0 && n - e[0].time > r; ) e.shift();
  }
  _onMoveEnd(e) {
    if ((this._drainInertiaBuffer(), this._inertiaBuffer.length < 2)) return;
    const n = {
      zoom: 0,
      bearing: 0,
      pitch: 0,
      pan: new oi(0, 0),
      pinchAround: void 0,
      around: void 0,
    };
    for (const { settings: a } of this._inertiaBuffer)
      (n.zoom += a.zoomDelta || 0),
        (n.bearing += a.bearingDelta || 0),
        (n.pitch += a.pitchDelta || 0),
        a.panDelta && n.pan._add(a.panDelta),
        a.around && (n.around = a.around),
        a.pinchAround && (n.pinchAround = a.pinchAround);
    const o =
        this._inertiaBuffer[this._inertiaBuffer.length - 1].time -
        this._inertiaBuffer[0].time,
      l = {};
    if (n.pan.mag()) {
      const a = Gm(n.pan.mag(), o, Va({}, rj, e || {}));
      (l.offset = n.pan.mult(a.amount / n.pan.mag())),
        (l.center = this._map.transform.center),
        Xm(l, a);
    }
    if (n.zoom) {
      const a = Gm(n.zoom, o, ij);
      (l.zoom = this._map.transform.zoom + a.amount), Xm(l, a);
    }
    if (n.bearing) {
      const a = Gm(n.bearing, o, aj);
      (l.bearing = this._map.transform.bearing + vu(a.amount, -179, 179)),
        Xm(l, a);
    }
    if (n.pitch) {
      const a = Gm(n.pitch, o, oj);
      (l.pitch = this._map.transform.pitch + a.amount), Xm(l, a);
    }
    if (l.zoom || l.bearing) {
      const a = n.pinchAround === void 0 ? n.around : n.pinchAround;
      l.around = a ? this._map.unproject(a) : this._map.getCenter();
    }
    return this.clear(), Va(l, { noMoveStart: !0 });
  }
}
function Xm(t, e) {
  (!t.duration || t.duration < e.duration) &&
    ((t.duration = e.duration), (t.easing = e.easing));
}
function Gm(t, e, n) {
  const { maxSpeed: r, linearity: o, deceleration: l } = n,
    a = vu((t * o) / (e / 1e3), -r, r),
    h = Math.abs(a) / (l * o);
  return { easing: n.easing, duration: h * 1e3, amount: a * (h / 2) };
}
const Zm = (t) => t.zoom || t.drag || t.pitch || t.rotate;
class lj extends Zr {
  constructor(e, n) {
    super(e),
      R(this, "type", "renderFrame"),
      R(this, "timeStamp", void 0),
      (this.timeStamp = n);
  }
}
function U2(t) {
  return (
    (t.panDelta && t.panDelta.mag()) ||
    t.zoomDelta ||
    t.bearingDelta ||
    t.pitchDelta
  );
}
class cj {
  constructor(e, n) {
    R(this, "_map", void 0),
      R(this, "_el", void 0),
      R(this, "_handlers", void 0),
      R(this, "_eventsInProgress", void 0),
      R(this, "_frameId", void 0),
      R(this, "_inertia", void 0),
      R(this, "_bearingSnap", void 0),
      R(this, "_handlersById", void 0),
      R(this, "_updatingCamera", void 0),
      R(this, "_changes", void 0),
      R(this, "_zoom", void 0),
      R(this, "_previousActiveHandlers", void 0),
      R(this, "_listeners", void 0),
      R(this, "handleWindowEvent", (o) => {
        this.handleEvent(o, `${o.type}Window`);
      }),
      R(this, "handleEvent", (o, l) => {
        if (o.type === "blur") {
          this.stop(!0);
          return;
        }
        this._updatingCamera = !0;
        const a = o.type === "renderFrame" ? void 0 : o,
          h = { needsRenderFrame: !1 },
          f = {},
          v = {},
          E = o.touches,
          x = E ? this._getMapTouches(E) : void 0,
          T = x
            ? hr.touchPos(this._map.getCanvasContainer(), x)
            : hr.mousePos(this._map.getCanvasContainer(), o);
        for (const { handlerName: L, handler: F, allowed: X } of this
          ._handlers) {
          if (!F.isEnabled()) continue;
          let G;
          this._blockedByActive(v, X, L)
            ? F.reset()
            : F[l || o.type] &&
              ((G = F[l || o.type](o, T, x)),
              this.mergeHandlerResult(h, f, G, L, a),
              G && G.needsRenderFrame && this._triggerRenderFrame()),
            (G || F.isActive()) && (v[L] = F);
        }
        const N = {};
        for (const L in this._previousActiveHandlers) v[L] || (N[L] = a);
        (this._previousActiveHandlers = v),
          (Object.keys(N).length || U2(h)) &&
            (this._changes.push([h, f, N]), this._triggerRenderFrame()),
          (Object.keys(v).length || U2(h)) && this._map._stop(!0),
          (this._updatingCamera = !1);
        const { cameraAnimation: I } = h;
        I &&
          (this._inertia.clear(),
          this._fireEvents({}, {}, !0),
          (this._changes = []),
          I(this._map));
      }),
      (this._map = e),
      (this._el = this._map.getCanvasContainer()),
      (this._handlers = []),
      (this._handlersById = {}),
      (this._changes = []),
      (this._inertia = new sj(e)),
      (this._bearingSnap = n.bearingSnap || 7),
      (this._previousActiveHandlers = {}),
      (this._eventsInProgress = {}),
      this._addDefaultHandlers(n);
    const r = this._el;
    this._listeners = [
      [r, "touchstart", { passive: !0 }],
      [r, "touchmove", { passive: !1 }],
      [r, "touchend", void 0],
      [r, "touchcancel", void 0],
      [r, "mousedown", void 0],
      [r, "mousemove", void 0],
      [r, "mouseup", void 0],
      [document, "mousemove", { capture: !0 }],
      [document, "mouseup", void 0],
      [r, "mouseover", void 0],
      [r, "mouseout", void 0],
      [r, "dblclick", void 0],
      [r, "click", void 0],
      [r, "keydown", { capture: !1 }],
      [r, "keyup", void 0],
      [r, "wheel", { passive: !1 }],
      [r, "contextmenu", void 0],
      [window, "blur", void 0],
    ];
    for (const [o, l, a] of this._listeners)
      hr.addEventListener(
        o,
        l,
        o === document ? this.handleWindowEvent : this.handleEvent,
        a
      );
  }
  destroy() {
    for (const [e, n, r] of this._listeners)
      hr.removeEventListener(
        e,
        n,
        e === document ? this.handleWindowEvent : this.handleEvent,
        r
      );
  }
  _addDefaultHandlers(e) {
    const n = this._map,
      r = n.getCanvasContainer();
    this._add("mapEvent", new NH(n, e));
    const o = (n.boxZoom = new bH(n, e));
    this._add("boxZoom", o), e.interactive && e.boxZoom && o.enable();
    const l = (n.cooperativeGestures = new AH(n, e.cooperativeGestures));
    this._add("cooperativeGestures", l), e.cooperativeGestures && l.enable();
    const a = new qH(n),
      h = new EH(n);
    (n.doubleClickZoom = new VH(h, a)),
      this._add("tapZoom", a),
      this._add("clickZoom", h),
      e.interactive && e.doubleClickZoom && n.doubleClickZoom.enable();
    const f = new YH();
    this._add("tapDragZoom", f);
    const v = (n.touchPitch = new nj(n));
    this._add("touchPitch", v),
      e.interactive && e.touchPitch && n.touchPitch.enable(e.touchPitch);
    const E = DH(e),
      x = BH(e);
    (n.dragRotate = new jH(e, E, x)),
      this._add("mouseRotate", E, ["mousePitch"]),
      this._add("mousePitch", x, ["mouseRotate"]),
      e.interactive && e.dragRotate && n.dragRotate.enable();
    const T = LH(e),
      N = new $H(e, n);
    (n.dragPan = new HH(r, T, N)),
      this._add("mousePan", T),
      this._add("touchPan", N, ["touchZoom", "touchRotate"]),
      e.interactive && e.dragPan && n.dragPan.enable(e.dragPan);
    const I = new ej(),
      L = new QH();
    (n.touchZoomRotate = new WH(r, L, I, f)),
      this._add("touchRotate", I, ["touchPan", "touchZoom"]),
      this._add("touchZoom", L, ["touchPan", "touchRotate"]),
      e.interactive &&
        e.touchZoomRotate &&
        n.touchZoomRotate.enable(e.touchZoomRotate);
    const F = (n.scrollZoom = new zH(n, () => this._triggerRenderFrame()));
    this._add("scrollZoom", F, ["mousePan"]),
      e.interactive && e.scrollZoom && n.scrollZoom.enable(e.scrollZoom);
    const X = (n.keyboard = new SH(n));
    this._add("keyboard", X),
      e.interactive && e.keyboard && n.keyboard.enable(),
      this._add("blockableMapEvent", new RH(n));
  }
  _add(e, n, r) {
    this._handlers.push({ handlerName: e, handler: n, allowed: r }),
      (this._handlersById[e] = n);
  }
  stop(e) {
    if (!this._updatingCamera) {
      for (const { handler: n } of this._handlers) n.reset();
      this._inertia.clear(), this._fireEvents({}, {}, e), (this._changes = []);
    }
  }
  isActive() {
    for (const { handler: e } of this._handlers) if (e.isActive()) return !0;
    return !1;
  }
  isZooming() {
    return !!this._eventsInProgress.zoom || this._map.scrollZoom.isZooming();
  }
  isRotating() {
    return !!this._eventsInProgress.rotate;
  }
  isMoving() {
    return !!Zm(this._eventsInProgress) || this.isZooming();
  }
  _blockedByActive(e, n, r) {
    for (const o in e) if (o !== r && (!n || n.indexOf(o) < 0)) return !0;
    return !1;
  }
  _getMapTouches(e) {
    const n = [];
    for (const r of e) {
      const o = r.target;
      this._el.contains(o) && n.push(r);
    }
    return n;
  }
  mergeHandlerResult(e, n, r, o, l) {
    if (!r) return;
    Va(e, r);
    const a = { handlerName: o, originalEvent: r.originalEvent || l };
    r.zoomDelta !== void 0 && (n.zoom = a),
      r.panDelta !== void 0 && (n.drag = a),
      r.pitchDelta !== void 0 && (n.pitch = a),
      r.bearingDelta !== void 0 && (n.rotate = a);
  }
  _applyChanges() {
    const e = {},
      n = {},
      r = {};
    for (const [o, l, a] of this._changes)
      o.panDelta &&
        (e.panDelta = (e.panDelta || new oi(0, 0))._add(o.panDelta)),
        o.zoomDelta && (e.zoomDelta = (e.zoomDelta || 0) + o.zoomDelta),
        o.bearingDelta &&
          (e.bearingDelta = (e.bearingDelta || 0) + o.bearingDelta),
        o.pitchDelta && (e.pitchDelta = (e.pitchDelta || 0) + o.pitchDelta),
        o.around !== void 0 && (e.around = o.around),
        o.pinchAround !== void 0 && (e.pinchAround = o.pinchAround),
        o.noInertia && (e.noInertia = o.noInertia),
        Va(n, l),
        Va(r, a);
    this._updateMapTransform(e, n, r), (this._changes = []);
  }
  _updateMapTransform(e, n, r) {
    const o = this._map,
      l = o._getTransformForUpdate();
    if (!U2(e)) return this._fireEvents(n, r, !0);
    const {
      panDelta: a,
      zoomDelta: h,
      bearingDelta: f,
      pitchDelta: v,
      pinchAround: E,
    } = e;
    let { around: x } = e;
    E !== void 0 && (x = E), o._stop(!0), (x = x || o.transform.centerPoint);
    const T = l.pointLocation(a ? x.sub(a) : x);
    f && (l.bearing += f),
      v && (l.pitch += v),
      h && (l.zoom += h),
      l.setLocationAtPoint(T, x),
      o._applyUpdatedTransform(l),
      this._map._update(),
      e.noInertia || this._inertia.record(e),
      this._fireEvents(n, r, !0);
  }
  _fireEvents(e, n, r) {
    const o = Zm(this._eventsInProgress),
      l = Zm(e),
      a = {};
    for (const x in e) {
      const { originalEvent: T } = e[x];
      this._eventsInProgress[x] || (a[`${x}start`] = T),
        (this._eventsInProgress[x] = e[x]);
    }
    !o && l && this._fireEvent("movestart", l.originalEvent);
    for (const x in a) this._fireEvent(x, a[x]);
    l && this._fireEvent("move", l.originalEvent);
    for (const x in e) {
      const { originalEvent: T } = e[x];
      this._fireEvent(x, T);
    }
    const h = {};
    let f;
    for (const x in this._eventsInProgress) {
      const { handlerName: T, originalEvent: N } = this._eventsInProgress[x];
      this._handlersById[T].isActive() ||
        (delete this._eventsInProgress[x], (f = n[T] || N), (h[`${x}end`] = f));
    }
    for (const x in h) this._fireEvent(x, h[x]);
    const v = Zm(this._eventsInProgress);
    if (r && (o || l) && !v) {
      this._updatingCamera = !0;
      const x = this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),
        T = (N) => N !== 0 && -this._bearingSnap < N && N < this._bearingSnap;
      x && (x.essential || !dc.prefersReducedMotion)
        ? (T(x.bearing || this._map.getBearing()) && (x.bearing = 0),
          (x.freezeElevation = !0),
          this._map.easeTo(x, { originalEvent: f }))
        : (this._map.fire(new Zr("moveend", { originalEvent: f })),
          T(this._map.getBearing()) && this._map.resetNorth()),
        (this._updatingCamera = !1);
    }
  }
  _fireEvent(e, n) {
    this._map.fire(new Zr(e, n ? { originalEvent: n } : {}));
  }
  _requestFrame() {
    return (
      this._map.triggerRepaint(),
      this._map._renderTaskQueue.add((e) => {
        delete this._frameId,
          this.handleEvent(new lj("renderFrame", e)),
          this._applyChanges();
      })
    );
  }
  _triggerRenderFrame() {
    this._frameId === void 0 && (this._frameId = this._requestFrame());
  }
}
class uj {
  constructor() {
    R(this, "_queue", void 0),
      R(this, "_id", void 0),
      R(this, "_cleared", void 0),
      R(this, "_currentlyRunning", void 0),
      (this._queue = []),
      (this._id = 0),
      (this._cleared = !1),
      (this._currentlyRunning = !1);
  }
  add(e) {
    const n = ++this._id;
    return this._queue.push({ callback: e, id: n, cancelled: !1 }), n;
  }
  remove(e) {
    const n = this._currentlyRunning,
      r = n ? this._queue.concat(n) : this._queue;
    for (const o of r)
      if (o.id === e) {
        o.cancelled = !0;
        return;
      }
  }
  run(e = 0) {
    if (this._currentlyRunning)
      throw new Error("Attempting to run(), but is already running.");
    const n = (this._currentlyRunning = this._queue);
    this._queue = [];
    for (const r of n)
      if (!r.cancelled && (r.callback(e), this._cleared)) break;
    (this._cleared = !1), (this._currentlyRunning = !1);
  }
  clear() {
    this._currentlyRunning && (this._cleared = !0), (this._queue = []);
  }
}
function dj(t, e) {
  var n =
      typeof my < "u" &&
      !!my &&
      typeof my.showToast == "function" &&
      my.isFRM !== !0,
    r =
      typeof wx < "u" &&
      wx !== null &&
      (typeof wx.request < "u" || typeof wx.miniProgram < "u");
  if (!(n || r) && (e || (e = document), !!e)) {
    var o = e.head || e.getElementsByTagName("head")[0];
    if (!o) {
      o = e.createElement("head");
      var l = e.body || e.getElementsByTagName("body")[0];
      l ? l.parentNode.insertBefore(o, l) : e.documentElement.appendChild(o);
    }
    var a = e.createElement("style");
    return (
      (a.type = "text/css"),
      a.styleSheet
        ? (a.styleSheet.cssText = t)
        : a.appendChild(e.createTextNode(t)),
      o.appendChild(a),
      a
    );
  }
}
dj(`.l7-map {
  font:
    12px/20px 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: grab;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  touch-action: none;
}

.l7-canvas-container.l7-touch-drag-pan.l7-cooperative-gestures,
.l7-canvas-container.l7-touch-drag-pan.l7-cooperative-gestures .l7-canvas {
  touch-action: pan-x pan-y;
}

.l7-cooperative-gesture-screen {
  background: rgba(0 0 0 / 40%);
  position: absolute;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  color: white;
  padding: 1rem;
  font-size: 1.4em;
  line-height: 1.2;
  opacity: 0;
  pointer-events: none;
  transition: opacity 1s ease 1s;
  z-index: 99999;
}

.l7-cooperative-gesture-screen.l7-show {
  opacity: 1;
  transition: opacity 0.05s;
}

.l7-cooperative-gesture-screen .l7-mobile-message {
  display: none;
}

@media (hover: none), (width <= 480px) {
  .l7-cooperative-gesture-screen .l7-desktop-message {
    display: none;
  }

  .l7-cooperative-gesture-screen .l7-mobile-message {
    display: block;
  }
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right {
  position: absolute;
  pointer-events: none;
  z-index: 2;
}
.l7-ctrl-top-left {
  top: 0;
  left: 0;
}
.l7-ctrl-top-right {
  top: 0;
  right: 0;
}
.l7-ctrl-bottom-left {
  bottom: 0;
  left: 0;
}
.l7-ctrl-bottom-right {
  right: 0;
  bottom: 0;
}

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl {
  margin: 10px 0 0 10px;
  float: left;
}
.l7-ctrl-top-right .l7-ctrl {
  margin: 10px 10px 0 0;
  float: right;
}
.l7-ctrl-bottom-left .l7-ctrl {
  margin: 0 0 10px 10px;
  float: left;
}
.l7-ctrl-bottom-right .l7-ctrl {
  margin: 0 10px 10px 0;
  float: right;
}

.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
  cursor: crosshair;
}

.l7-boxzoom {
  position: absolute;
  top: 0;
  left: 0;
  width: 0;
  height: 0;
  background: #fff;
  border: 2px dotted #202020;
  opacity: 0.5;
  z-index: 10;
}
`);
const mg = -2,
  J7 = 22,
  Wd = 0,
  eA = 60,
  Ym = 85,
  hj = {
    interactive: !0,
    bearingSnap: 7,
    scrollZoom: !0,
    minZoom: mg,
    maxZoom: J7,
    minPitch: Wd,
    maxPitch: eA,
    boxZoom: !0,
    dragRotate: !0,
    dragPan: !0,
    keyboard: !0,
    doubleClickZoom: !0,
    touchZoomRotate: !0,
    touchPitch: !0,
    cooperativeGestures: !1,
    trackResize: !0,
    center: [0, 0],
    zoom: 0,
    bearing: 0,
    pitch: 0,
    renderWorldCopies: !0,
    fadeDuration: 300,
    clickTolerance: 3,
    pitchWithRotate: !0,
  };
let pj = class extends xH {
  constructor(e) {
    const n = mt(mt({}, hj), e);
    if (n.minZoom != null && n.maxZoom != null && n.minZoom > n.maxZoom)
      throw new Error("maxZoom must be greater than or equal to minZoom");
    if (n.minPitch != null && n.maxPitch != null && n.minPitch > n.maxPitch)
      throw new Error("maxPitch must be greater than or equal to minPitch");
    if (n.minPitch != null && n.minPitch < Wd)
      throw new Error(`minPitch must be greater than or equal to ${Wd}`);
    if (n.maxPitch != null && n.maxPitch > Ym)
      throw new Error(`maxPitch must be less than or equal to ${Ym}`);
    const r = new G3(
      n.minZoom,
      n.maxZoom,
      n.minPitch,
      n.maxPitch,
      n.renderWorldCopies
    );
    if (
      (super(r, { bearingSnap: n.bearingSnap }),
      R(this, "_container", void 0),
      R(this, "_canvasContainer", void 0),
      R(this, "_interactive", void 0),
      R(this, "_frameRequest", void 0),
      R(this, "_loaded", void 0),
      R(this, "_idleTriggered", !1),
      R(this, "_fullyLoaded", void 0),
      R(this, "_trackResize", void 0),
      R(this, "_resizeObserver", void 0),
      R(this, "_preserveDrawingBuffer", void 0),
      R(this, "_failIfMajorPerformanceCaveat", void 0),
      R(this, "_fadeDuration", void 0),
      R(this, "_crossSourceCollisions", void 0),
      R(this, "_crossFadingFactor", 1),
      R(this, "_collectResourceTiming", void 0),
      R(this, "_renderTaskQueue", new uj()),
      R(this, "_mapId", cH()),
      R(this, "_removed", void 0),
      R(this, "_clickTolerance", void 0),
      R(this, "scrollZoom", void 0),
      R(this, "boxZoom", void 0),
      R(this, "dragRotate", void 0),
      R(this, "dragPan", void 0),
      R(this, "keyboard", void 0),
      R(this, "doubleClickZoom", void 0),
      R(this, "touchZoomRotate", void 0),
      R(this, "touchPitch", void 0),
      R(this, "cooperativeGestures", void 0),
      R(this, "_onMapScroll", (o) => {
        if (o.target === this._container)
          return (
            (this._container.scrollTop = 0),
            (this._container.scrollLeft = 0),
            !1
          );
      }),
      (this._interactive = n.interactive),
      (this._trackResize = n.trackResize === !0),
      (this._bearingSnap = n.bearingSnap),
      (this._fadeDuration = n.fadeDuration),
      (this._clickTolerance = n.clickTolerance),
      typeof n.container == "string")
    ) {
      if (
        ((this._container = document.getElementById(n.container)),
        !this._container)
      )
        throw new Error(`Container '${n.container}' not found.`);
    } else if (n.container instanceof HTMLElement)
      this._container = n.container;
    else
      throw new Error(
        "Invalid type: 'container' must be a String or HTMLElement."
      );
    if (
      (n.maxBounds && this.setMaxBounds(n.maxBounds),
      this._setupContainer(),
      this.on("move", () => this._update())
        .on("moveend", () => this._update())
        .on("zoom", () => this._update())
        .once("idle", () => {
          this._idleTriggered = !0;
        }),
      typeof window < "u")
    ) {
      let o = !1;
      const l = Ka.throttle((a) => {
        this._trackResize && !this._removed && this.resize(a)._update();
      }, 50);
      (this._resizeObserver = new ResizeObserver((a) => {
        if (!o) {
          o = !0;
          return;
        }
        l(a);
      })),
        this._resizeObserver.observe(this._container);
    }
    (this.handlers = new cj(this, n)),
      this.jumpTo({
        center: n.center,
        zoom: n.zoom,
        bearing: n.bearing,
        pitch: n.pitch,
      }),
      n.bounds &&
        (this.resize(),
        this.fitBounds(n.bounds, Va({}, n.fitBoundsOptions, { duration: 0 }))),
      this.resize();
  }
  _getMapId() {
    return this._mapId;
  }
  calculateCameraOptionsFromTo(e, n, r, o) {
    return super.calculateCameraOptionsFromTo(e, n, r, o);
  }
  resize(e) {
    var n;
    const r = this._containerDimensions(),
      o = r[0],
      l = r[1];
    this.transform.resize(o, l),
      (n = this._requestedCameraState) === null ||
        n === void 0 ||
        n.resize(o, l);
    const a = !this._moving;
    return (
      a &&
        (this.stop(),
        this.fire(new Zr("movestart", e)).fire(new Zr("move", e))),
      this.fire(new Zr("resize", e)),
      a && this.fire(new Zr("moveend", e)),
      this
    );
  }
  getBounds() {
    return this.transform.getBounds();
  }
  getMaxBounds() {
    return this.transform.getMaxBounds();
  }
  setMaxBounds(e) {
    return this.transform.setMaxBounds(e && Bc.convert(e)), this._update();
  }
  setMinZoom(e) {
    if (((e = e ?? mg), e >= mg && e <= this.transform.maxZoom))
      return (
        (this.transform.minZoom = e),
        this._update(),
        this.getZoom() < e && this.setZoom(e),
        this
      );
    throw new Error(
      `minZoom must be between ${mg} and the current maxZoom, inclusive`
    );
  }
  getMinZoom() {
    return this.transform.minZoom;
  }
  setMaxZoom(e) {
    if (((e = e ?? J7), e >= this.transform.minZoom))
      return (
        (this.transform.maxZoom = e),
        this.getZoom() > e && this.setZoom(e),
        this
      );
    throw new Error("maxZoom must be greater than the current minZoom");
  }
  getMaxZoom() {
    return this.transform.maxZoom;
  }
  setMinPitch(e) {
    if (((e = e ?? Wd), e < Wd))
      throw new Error(`minPitch must be greater than or equal to ${Wd}`);
    if (e >= Wd && e <= this.transform.maxPitch)
      return (
        (this.transform.minPitch = e),
        this.getPitch() < e && this.setPitch(e),
        this
      );
    throw new Error(
      `minPitch must be between ${Wd} and the current maxPitch, inclusive`
    );
  }
  getMinPitch() {
    return this.transform.minPitch;
  }
  setMaxPitch(e) {
    if (((e = e ?? eA), e > Ym))
      throw new Error(`maxPitch must be less than or equal to ${Ym}`);
    if (e >= this.transform.minPitch)
      return (
        (this.transform.maxPitch = e),
        this.getPitch() > e && this.setPitch(e),
        this
      );
    throw new Error("maxPitch must be greater than the current minPitch");
  }
  getMaxPitch() {
    return this.transform.maxPitch;
  }
  getRenderWorldCopies() {
    return this.transform.renderWorldCopies;
  }
  setRenderWorldCopies(e) {
    this.transform.renderWorldCopies = e;
  }
  project(e) {
    return this.transform.locationPoint(pi.convert(e));
  }
  unproject(e) {
    return this.transform.pointLocation(oi.convert(e));
  }
  isMoving() {
    var e;
    return (
      this._moving ||
      ((e = this.handlers) === null || e === void 0 ? void 0 : e.isMoving())
    );
  }
  isZooming() {
    var e;
    return (
      this._zooming ||
      ((e = this.handlers) === null || e === void 0 ? void 0 : e.isZooming())
    );
  }
  isRotating() {
    var e;
    return (
      this._rotating ||
      ((e = this.handlers) === null || e === void 0 ? void 0 : e.isRotating())
    );
  }
  on(e, n) {
    return super.on(e, n);
  }
  once(e, n) {
    return super.once(e, n);
  }
  off(e, n) {
    return super.off(e, n);
  }
  getContainer() {
    return this._container;
  }
  getCanvasContainer() {
    return this._canvasContainer;
  }
  _containerDimensions() {
    let e = 0,
      n = 0;
    return (
      this._container &&
        ((e = this._container.clientWidth || 400),
        (n = this._container.clientHeight || 300)),
      [e, n]
    );
  }
  _setupContainer() {
    const e = this._container;
    e.classList.add("l7-map");
    const n = (this._canvasContainer = hr.create(
      "div",
      "l7-canvas-container",
      e
    ));
    this._interactive && n.classList.add("l7-interactive"),
      this._container.addEventListener("scroll", this._onMapScroll, !1);
  }
  _update() {
    return this.triggerRepaint(), this;
  }
  _requestRenderFrame(e) {
    return this._update(), this._renderTaskQueue.add(e);
  }
  _cancelRenderFrame(e) {
    this._renderTaskQueue.remove(e);
  }
  _render(e) {
    if ((this._renderTaskQueue.run(e), !this._removed))
      return (
        this.fire(new Zr("render")),
        this.isMoving() || this.fire(new Zr("idle")),
        this
      );
  }
  remove() {
    var e;
    this._frameRequest &&
      (this._frameRequest.abort(), (this._frameRequest = null)),
      this._renderTaskQueue.clear(),
      this.handlers.destroy(),
      delete this.handlers,
      (e = this._resizeObserver) === null || e === void 0 || e.disconnect(),
      hr.remove(this._canvasContainer),
      this._container.classList.remove("l7-map"),
      (this._removed = !0),
      this.fire(new Zr("remove"));
  }
  triggerRepaint() {
    this._frameRequest ||
      ((this._frameRequest = new AbortController()),
      dc
        .frameAsync(this._frameRequest)
        .then((e) => {
          (this._frameRequest = null), this._render(e);
        })
        .catch(() => {}));
  }
  getCameraTargetElevation() {
    return this.transform.elevation;
  }
};
const fj = [
  "id",
  "style",
  "rotation",
  "mapInstance",
  "version",
  "mapSize",
  "interactive",
];
class mj extends X7 {
  constructor(...e) {
    super(...e), R(this, "version", W7.DEFAULT), R(this, "viewport", void 0);
  }
  lngLatToCoord(e, n = { x: 0, y: 0, z: 0 }) {
    const { x: r, y: o } = this.lngLatToMercator(e, 0);
    return [r - n.x, o - n.y];
  }
  lngLatToMercator(e, n) {
    const { x: r = 0, y: o = 0, z: l = 0 } = yu.fromLngLat(e, n);
    return { x: r, y: o, z: l };
  }
  getModelMatrix(e, n, r, o = [1, 1, 1], l = { x: 0, y: 0, z: 0 }) {
    const a = yu.fromLngLat(e, n),
      h = a.meterInMercatorCoordinateUnits(),
      f = B1();
    return (
      sc(f, f, Rs(a.x - l.x, a.y - l.y, a.z || 0 - l.z)),
      lc(f, f, Rs(h * o[0], -h * o[1], h * o[2])),
      zp(f, f, r[0]),
      fv(f, f, r[1]),
      F1(f, f, r[2]),
      f
    );
  }
  init() {
    var e = this;
    return bt(function* () {
      const n = e.config,
        {
          id: r = "map",
          style: o = "light",
          rotation: l = 0,
          mapInstance: a,
          version: h = "DEFAULTMAP",
          mapSize: f = 1e4,
          interactive: v = !0,
        } = n,
        E = pc(n, fj);
      (e.viewport = new H3()),
        (e.version = h),
        e.simpleMapCoord.setSize(f),
        h === "SIMPLE" &&
          E.center &&
          (E.center = e.simpleMapCoord.unproject(E.center)),
        a
          ? ((e.map = a), (e.$mapContainer = e.map.getContainer()))
          : ((e.$mapContainer = e.creatMapContainer(r)),
            (e.map = new pj(
              mt({ container: e.$mapContainer, bearing: l }, E)
            ))),
        e.map.on("load", () => {
          e.handleCameraChanged();
        }),
        v && e.map.on("move", e.handleCameraChanged),
        setTimeout(() => {
          e.handleCameraChanged();
        }, 100),
        e.handleCameraChanged();
    })();
  }
  creatMapContainer(e) {
    let n = e;
    typeof e == "string" && (n = document.getElementById(e));
    const r = document.createElement("div");
    return (
      (r.style.cssText += `
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `),
      n.appendChild(r),
      r
    );
  }
  exportMap(e) {
    return "";
  }
  setMapStyle(e) {}
  getCanvasOverlays() {
    return this.getContainer();
  }
}
let gj = class extends z3 {
  getServiceConstructor() {
    return mj;
  }
};
var tA = { exports: {} };
(function (t, e) {
  (function (n, r) {
    t.exports = r();
  })(cv, function () {
    var n, r, o;
    function l(a, h) {
      if (!n) n = h;
      else if (!r) r = h;
      else {
        var f =
            "var sharedChunk = {}; (" +
            n +
            ")(sharedChunk); (" +
            r +
            ")(sharedChunk);",
          v = {};
        n(v),
          (o = h(v)),
          typeof window < "u" &&
            (o.workerUrl = window.URL.createObjectURL(
              new Blob([f], { type: "text/javascript" })
            ));
      }
    }
    return (
      l(["exports"], function (a) {
        function h(i, s) {
          return i((s = { exports: {} }), s.exports), s.exports;
        }
        var f = v;
        function v(i, s, c, m) {
          (this.cx = 3 * i),
            (this.bx = 3 * (c - i) - this.cx),
            (this.ax = 1 - this.cx - this.bx),
            (this.cy = 3 * s),
            (this.by = 3 * (m - s) - this.cy),
            (this.ay = 1 - this.cy - this.by),
            (this.p1x = i),
            (this.p1y = m),
            (this.p2x = c),
            (this.p2y = m);
        }
        (v.prototype.sampleCurveX = function (i) {
          return ((this.ax * i + this.bx) * i + this.cx) * i;
        }),
          (v.prototype.sampleCurveY = function (i) {
            return ((this.ay * i + this.by) * i + this.cy) * i;
          }),
          (v.prototype.sampleCurveDerivativeX = function (i) {
            return (3 * this.ax * i + 2 * this.bx) * i + this.cx;
          }),
          (v.prototype.solveCurveX = function (i, s) {
            var c, m, _, y, A;
            for (s === void 0 && (s = 1e-6), _ = i, A = 0; A < 8; A++) {
              if (((y = this.sampleCurveX(_) - i), Math.abs(y) < s)) return _;
              var C = this.sampleCurveDerivativeX(_);
              if (Math.abs(C) < 1e-6) break;
              _ -= y / C;
            }
            if ((_ = i) < (c = 0)) return c;
            if (_ > (m = 1)) return m;
            for (; c < m; ) {
              if (((y = this.sampleCurveX(_)), Math.abs(y - i) < s)) return _;
              i > y ? (c = _) : (m = _), (_ = 0.5 * (m - c) + c);
            }
            return _;
          }),
          (v.prototype.solve = function (i, s) {
            return this.sampleCurveY(this.solveCurveX(i, s));
          });
        var E = x;
        function x(i, s) {
          (this.x = i), (this.y = s);
        }
        (x.prototype = {
          clone: function () {
            return new x(this.x, this.y);
          },
          add: function (i) {
            return this.clone()._add(i);
          },
          sub: function (i) {
            return this.clone()._sub(i);
          },
          multByPoint: function (i) {
            return this.clone()._multByPoint(i);
          },
          divByPoint: function (i) {
            return this.clone()._divByPoint(i);
          },
          mult: function (i) {
            return this.clone()._mult(i);
          },
          div: function (i) {
            return this.clone()._div(i);
          },
          rotate: function (i) {
            return this.clone()._rotate(i);
          },
          rotateAround: function (i, s) {
            return this.clone()._rotateAround(i, s);
          },
          matMult: function (i) {
            return this.clone()._matMult(i);
          },
          unit: function () {
            return this.clone()._unit();
          },
          perp: function () {
            return this.clone()._perp();
          },
          round: function () {
            return this.clone()._round();
          },
          mag: function () {
            return Math.sqrt(this.x * this.x + this.y * this.y);
          },
          equals: function (i) {
            return this.x === i.x && this.y === i.y;
          },
          dist: function (i) {
            return Math.sqrt(this.distSqr(i));
          },
          distSqr: function (i) {
            var s = i.x - this.x,
              c = i.y - this.y;
            return s * s + c * c;
          },
          angle: function () {
            return Math.atan2(this.y, this.x);
          },
          angleTo: function (i) {
            return Math.atan2(this.y - i.y, this.x - i.x);
          },
          angleWith: function (i) {
            return this.angleWithSep(i.x, i.y);
          },
          angleWithSep: function (i, s) {
            return Math.atan2(this.x * s - this.y * i, this.x * i + this.y * s);
          },
          _matMult: function (i) {
            var s = i[2] * this.x + i[3] * this.y;
            return (this.x = i[0] * this.x + i[1] * this.y), (this.y = s), this;
          },
          _add: function (i) {
            return (this.x += i.x), (this.y += i.y), this;
          },
          _sub: function (i) {
            return (this.x -= i.x), (this.y -= i.y), this;
          },
          _mult: function (i) {
            return (this.x *= i), (this.y *= i), this;
          },
          _div: function (i) {
            return (this.x /= i), (this.y /= i), this;
          },
          _multByPoint: function (i) {
            return (this.x *= i.x), (this.y *= i.y), this;
          },
          _divByPoint: function (i) {
            return (this.x /= i.x), (this.y /= i.y), this;
          },
          _unit: function () {
            return this._div(this.mag()), this;
          },
          _perp: function () {
            var i = this.y;
            return (this.y = this.x), (this.x = -i), this;
          },
          _rotate: function (i) {
            var s = Math.cos(i),
              c = Math.sin(i),
              m = c * this.x + s * this.y;
            return (this.x = s * this.x - c * this.y), (this.y = m), this;
          },
          _rotateAround: function (i, s) {
            var c = Math.cos(i),
              m = Math.sin(i),
              _ = s.y + m * (this.x - s.x) + c * (this.y - s.y);
            return (
              (this.x = s.x + c * (this.x - s.x) - m * (this.y - s.y)),
              (this.y = _),
              this
            );
          },
          _round: function () {
            return (
              (this.x = Math.round(this.x)), (this.y = Math.round(this.y)), this
            );
          },
        }),
          (x.convert = function (i) {
            return i instanceof x
              ? i
              : Array.isArray(i)
              ? new x(i[0], i[1])
              : i;
          });
        var T = typeof self < "u" ? self : {},
          N = Math.pow(2, 53) - 1;
        function I(i, s, c, m) {
          var _ = new f(i, s, c, m);
          return function (y) {
            return _.solve(y);
          };
        }
        var L = I(0.25, 0.1, 0.25, 1);
        function F(i, s, c) {
          return Math.min(c, Math.max(s, i));
        }
        function X(i, s, c) {
          var m = c - s,
            _ = ((((i - s) % m) + m) % m) + s;
          return _ === s ? c : _;
        }
        function G(i) {
          for (var s = [], c = arguments.length - 1; c-- > 0; )
            s[c] = arguments[c + 1];
          for (var m = 0, _ = s; m < _.length; m += 1) {
            var y = _[m];
            for (var A in y) i[A] = y[A];
          }
          return i;
        }
        var K = 1;
        function Q() {
          return K++;
        }
        function ee() {
          return (function i(s) {
            return s
              ? (s ^ ((16 * Math.random()) >> (s / 4))).toString(16)
              : ([1e7] + -[1e3] + -4e3 + -8e3 + -1e11).replace(/[018]/g, i);
          })();
        }
        function Se(i) {
          return (
            !!i &&
            /^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(
              i
            )
          );
        }
        function ue(i, s) {
          i.forEach(function (c) {
            s[c] && (s[c] = s[c].bind(s));
          });
        }
        function ke(i, s) {
          return i.indexOf(s, i.length - s.length) !== -1;
        }
        function ut(i, s, c) {
          var m = {};
          for (var _ in i) m[_] = s.call(c || this, i[_], _, i);
          return m;
        }
        function Ve(i, s, c) {
          var m = {};
          for (var _ in i) s.call(c || this, i[_], _, i) && (m[_] = i[_]);
          return m;
        }
        function Ae(i) {
          return Array.isArray(i)
            ? i.map(Ae)
            : typeof i == "object" && i
            ? ut(i, Ae)
            : i;
        }
        var Be = {};
        function He(i) {
          Be[i] || (typeof console < "u" && console.warn(i), (Be[i] = !0));
        }
        function nt(i, s, c) {
          return (c.y - i.y) * (s.x - i.x) > (s.y - i.y) * (c.x - i.x);
        }
        function Ut(i) {
          for (
            var s = 0, c = 0, m = i.length, _ = m - 1, y = void 0, A = void 0;
            c < m;
            _ = c++
          )
            s += ((A = i[_]).x - (y = i[c]).x) * (y.y + A.y);
          return s;
        }
        function Yt() {
          return (
            typeof WorkerGlobalScope < "u" &&
            typeof self < "u" &&
            self instanceof WorkerGlobalScope
          );
        }
        function Ht(i) {
          var s = {};
          if (
            (i.replace(
              /(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,
              function (m, _, y, A) {
                var C = y || A;
                return (s[_] = !C || C.toLowerCase()), "";
              }
            ),
            s["max-age"])
          ) {
            var c = parseInt(s["max-age"], 10);
            isNaN(c) ? delete s["max-age"] : (s["max-age"] = c);
          }
          return s;
        }
        var On = null;
        function gn(i) {
          if (On == null) {
            var s = i.navigator ? i.navigator.userAgent : null;
            On =
              !!i.safari ||
              !(
                !s ||
                !(
                  /\b(iPad|iPhone|iPod)\b/.test(s) ||
                  (s.match("Safari") && !s.match("Chrome"))
                )
              );
          }
          return On;
        }
        function xn(i) {
          try {
            var s = T[i];
            return (
              s.setItem("_mapbox_test_", 1), s.removeItem("_mapbox_test_"), !0
            );
          } catch {
            return !1;
          }
        }
        var Kn,
          er,
          _r,
          Nr,
          ir =
            T.performance && T.performance.now
              ? T.performance.now.bind(T.performance)
              : Date.now.bind(Date),
          $i =
            T.requestAnimationFrame ||
            T.mozRequestAnimationFrame ||
            T.webkitRequestAnimationFrame ||
            T.msRequestAnimationFrame,
          Tr =
            T.cancelAnimationFrame ||
            T.mozCancelAnimationFrame ||
            T.webkitCancelAnimationFrame ||
            T.msCancelAnimationFrame,
          Fi = {
            now: ir,
            frame: function (i) {
              var s = $i(i);
              return {
                cancel: function () {
                  return Tr(s);
                },
              };
            },
            getImageData: function (i, s) {
              s === void 0 && (s = 0);
              var c = T.document.createElement("canvas"),
                m = c.getContext("2d");
              if (!m) throw new Error("failed to create canvas 2d context");
              return (
                (c.width = i.width),
                (c.height = i.height),
                m.drawImage(i, 0, 0, i.width, i.height),
                m.getImageData(-s, -s, i.width + 2 * s, i.height + 2 * s)
              );
            },
            resolveURL: function (i) {
              return (
                Kn || (Kn = T.document.createElement("a")),
                (Kn.href = i),
                Kn.href
              );
            },
            hardwareConcurrency:
              (T.navigator && T.navigator.hardwareConcurrency) || 4,
            get devicePixelRatio() {
              return T.devicePixelRatio;
            },
            get prefersReducedMotion() {
              return (
                !!T.matchMedia &&
                (er == null &&
                  (er = T.matchMedia("(prefers-reduced-motion: reduce)")),
                er.matches)
              );
            },
          },
          qe = {
            API_URL: "https://api.mapbox.com",
            get EVENTS_URL() {
              return this.API_URL
                ? this.API_URL.indexOf("https://api.mapbox.cn") === 0
                  ? "https://events.mapbox.cn/events/v2"
                  : this.API_URL.indexOf("https://api.mapbox.com") === 0
                  ? "https://events.mapbox.com/events/v2"
                  : null
                : null;
            },
            FEEDBACK_URL: "https://apps.mapbox.com/feedback",
            REQUIRE_ACCESS_TOKEN: !0,
            ACCESS_TOKEN: null,
            MAX_PARALLEL_IMAGE_REQUESTS: 16,
          },
          $t = {
            supported: !1,
            testSupport: function (i) {
              !Cn && Nr && (St ? An(i) : (_r = i));
            },
          },
          Cn = !1,
          St = !1;
        function An(i) {
          var s = i.createTexture();
          i.bindTexture(i.TEXTURE_2D, s);
          try {
            if (
              (i.texImage2D(
                i.TEXTURE_2D,
                0,
                i.RGBA,
                i.RGBA,
                i.UNSIGNED_BYTE,
                Nr
              ),
              i.isContextLost())
            )
              return;
            $t.supported = !0;
          } catch {}
          i.deleteTexture(s), (Cn = !0);
        }
        T.document &&
          (((Nr = T.document.createElement("img")).onload = function () {
            _r && An(_r), (_r = null), (St = !0);
          }),
          (Nr.onerror = function () {
            (Cn = !0), (_r = null);
          }),
          (Nr.src =
            "data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="));
        var ar = "01",
          yr = function (i, s) {
            (this._transformRequestFn = i),
              (this._customAccessToken = s),
              this._createSkuToken();
          };
        function nr(i) {
          return i.indexOf("mapbox:") === 0;
        }
        (yr.prototype._createSkuToken = function () {
          var i = (function () {
            for (var s = "", c = 0; c < 10; c++)
              s +=
                "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[
                  Math.floor(62 * Math.random())
                ];
            return {
              token: ["1", ar, s].join(""),
              tokenExpiresAt: Date.now() + 432e5,
            };
          })();
          (this._skuToken = i.token),
            (this._skuTokenExpiresAt = i.tokenExpiresAt);
        }),
          (yr.prototype._isSkuTokenExpired = function () {
            return Date.now() > this._skuTokenExpiresAt;
          }),
          (yr.prototype.transformRequest = function (i, s) {
            return (
              (this._transformRequestFn && this._transformRequestFn(i, s)) || {
                url: i,
              }
            );
          }),
          (yr.prototype.normalizeStyleURL = function (i, s) {
            if (!nr(i)) return i;
            var c = ei(i);
            return (
              (c.path = "/styles/v1" + c.path),
              this._makeAPIURL(c, this._customAccessToken || s)
            );
          }),
          (yr.prototype.normalizeGlyphsURL = function (i, s) {
            if (!nr(i)) return i;
            var c = ei(i);
            return (
              (c.path = "/fonts/v1" + c.path),
              this._makeAPIURL(c, this._customAccessToken || s)
            );
          }),
          (yr.prototype.normalizeSourceURL = function (i, s) {
            if (!nr(i)) return i;
            var c = ei(i);
            return (
              (c.path = "/v4/" + c.authority + ".json"),
              c.params.push("secure"),
              this._makeAPIURL(c, this._customAccessToken || s)
            );
          }),
          (yr.prototype.normalizeSpriteURL = function (i, s, c, m) {
            var _ = ei(i);
            return nr(i)
              ? ((_.path = "/styles/v1" + _.path + "/sprite" + s + c),
                this._makeAPIURL(_, this._customAccessToken || m))
              : ((_.path += "" + s + c), ri(_));
          }),
          (yr.prototype.normalizeTileURL = function (i, s) {
            if (
              (this._isSkuTokenExpired() && this._createSkuToken(), i && !nr(i))
            )
              return i;
            var c = ei(i);
            (c.path = c.path.replace(
              /(\.(png|jpg)\d*)(?=$)/,
              (Fi.devicePixelRatio >= 2 || s === 512 ? "@2x" : "") +
                ($t.supported ? ".webp" : "$1")
            )),
              (c.path = c.path.replace(/^.+\/v4\//, "/")),
              (c.path = "/v4" + c.path);
            var m =
              this._customAccessToken ||
              (function (_) {
                for (var y = 0, A = _; y < A.length; y += 1) {
                  var C = A[y].match(/^access_token=(.*)$/);
                  if (C) return C[1];
                }
                return null;
              })(c.params) ||
              qe.ACCESS_TOKEN;
            return (
              qe.REQUIRE_ACCESS_TOKEN &&
                m &&
                this._skuToken &&
                c.params.push("sku=" + this._skuToken),
              this._makeAPIURL(c, m)
            );
          }),
          (yr.prototype.canonicalizeTileURL = function (i, s) {
            var c = ei(i);
            if (!c.path.match(/(^\/v4\/)/) || !c.path.match(/\.[\w]+$/))
              return i;
            var m = "mapbox://tiles/";
            m += c.path.replace("/v4/", "");
            var _ = c.params;
            return (
              s &&
                (_ = _.filter(function (y) {
                  return !y.match(/^access_token=/);
                })),
              _.length && (m += "?" + _.join("&")),
              m
            );
          }),
          (yr.prototype.canonicalizeTileset = function (i, s) {
            for (
              var c = !!s && nr(s), m = [], _ = 0, y = i.tiles || [];
              _ < y.length;
              _ += 1
            ) {
              var A = y[_];
              Sr(A) ? m.push(this.canonicalizeTileURL(A, c)) : m.push(A);
            }
            return m;
          }),
          (yr.prototype._makeAPIURL = function (i, s) {
            var c =
                "See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",
              m = ei(qe.API_URL);
            if (
              ((i.protocol = m.protocol),
              (i.authority = m.authority),
              i.protocol === "http")
            ) {
              var _ = i.params.indexOf("secure");
              _ >= 0 && i.params.splice(_, 1);
            }
            if (
              (m.path !== "/" && (i.path = "" + m.path + i.path),
              !qe.REQUIRE_ACCESS_TOKEN)
            )
              return ri(i);
            if (!(s = s || qe.ACCESS_TOKEN))
              throw new Error(
                "An API access token is required to use Mapbox GL. " + c
              );
            if (s[0] === "s")
              throw new Error(
                "Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). " +
                  c
              );
            return (
              (i.params = i.params.filter(function (y) {
                return y.indexOf("access_token") === -1;
              })),
              i.params.push("access_token=" + s),
              ri(i)
            );
          });
        var Qn = /^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;
        function Sr(i) {
          return Qn.test(i);
        }
        var ta = /^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;
        function ei(i) {
          var s = i.match(ta);
          if (!s) throw new Error("Unable to parse URL object");
          return {
            protocol: s[1],
            authority: s[2],
            path: s[3] || "/",
            params: s[4] ? s[4].split("&") : [],
          };
        }
        function ri(i) {
          var s = i.params.length ? "?" + i.params.join("&") : "";
          return i.protocol + "://" + i.authority + i.path + s;
        }
        function Ra(i) {
          if (!i) return null;
          var s = i.split(".");
          if (!s || s.length !== 3) return null;
          try {
            return JSON.parse(
              decodeURIComponent(
                T.atob(s[1])
                  .split("")
                  .map(function (c) {
                    return (
                      "%" + ("00" + c.charCodeAt(0).toString(16)).slice(-2)
                    );
                  })
                  .join("")
              )
            );
          } catch {
            return null;
          }
        }
        var le = function (i) {
          (this.type = i),
            (this.anonId = null),
            (this.eventData = {}),
            (this.queue = []),
            (this.pendingRequest = null);
        };
        (le.prototype.getStorageKey = function (i) {
          var s,
            c = Ra(qe.ACCESS_TOKEN);
          return (
            (s =
              c && c.u
                ? T.btoa(
                    encodeURIComponent(c.u).replace(
                      /%([0-9A-F]{2})/g,
                      function (m, _) {
                        return String.fromCharCode(+("0x" + _));
                      }
                    )
                  )
                : qe.ACCESS_TOKEN || ""),
            i ? "mapbox.eventData." + i + ":" + s : "mapbox.eventData:" + s
          );
        }),
          (le.prototype.fetchEventData = function () {
            var i = xn("localStorage"),
              s = this.getStorageKey(),
              c = this.getStorageKey("uuid");
            if (i)
              try {
                var m = T.localStorage.getItem(s);
                m && (this.eventData = JSON.parse(m));
                var _ = T.localStorage.getItem(c);
                _ && (this.anonId = _);
              } catch {
                He("Unable to read from LocalStorage");
              }
          }),
          (le.prototype.saveEventData = function () {
            var i = xn("localStorage"),
              s = this.getStorageKey(),
              c = this.getStorageKey("uuid");
            if (i)
              try {
                T.localStorage.setItem(c, this.anonId),
                  Object.keys(this.eventData).length >= 1 &&
                    T.localStorage.setItem(s, JSON.stringify(this.eventData));
              } catch {
                He("Unable to write to LocalStorage");
              }
          }),
          (le.prototype.processRequests = function (i) {}),
          (le.prototype.postEvent = function (i, s, c, m) {
            var _ = this;
            if (qe.EVENTS_URL) {
              var y = ei(qe.EVENTS_URL);
              y.params.push("access_token=" + (m || qe.ACCESS_TOKEN || ""));
              var A = {
                  event: this.type,
                  created: new Date(i).toISOString(),
                  sdkIdentifier: "mapbox-gl-js",
                  sdkVersion: "1.13.3",
                  skuId: ar,
                  userId: this.anonId,
                },
                C = s ? G(A, s) : A,
                P = {
                  url: ri(y),
                  headers: { "Content-Type": "text/plain" },
                  body: JSON.stringify([C]),
                };
              this.pendingRequest = Wr(P, function (O) {
                (_.pendingRequest = null),
                  c(O),
                  _.saveEventData(),
                  _.processRequests(m);
              });
            }
          }),
          (le.prototype.queueRequest = function (i, s) {
            this.queue.push(i), this.processRequests(s);
          });
        var Ia,
          ts,
          Ma = (function (i) {
            function s() {
              i.call(this, "map.load"),
                (this.success = {}),
                (this.skuToken = "");
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.postMapLoadEvent = function (c, m, _, y) {
                this.skuToken = _;
                var A = !(!y && !qe.ACCESS_TOKEN),
                  C =
                    Array.isArray(c) &&
                    c.some(function (P) {
                      return nr(P) || Sr(P);
                    });
                qe.EVENTS_URL &&
                  A &&
                  C &&
                  this.queueRequest({ id: m, timestamp: Date.now() }, y);
              }),
              (s.prototype.processRequests = function (c) {
                var m = this;
                if (!this.pendingRequest && this.queue.length !== 0) {
                  var _ = this.queue.shift(),
                    y = _.id,
                    A = _.timestamp;
                  (y && this.success[y]) ||
                    (this.anonId || this.fetchEventData(),
                    Se(this.anonId) || (this.anonId = ee()),
                    this.postEvent(
                      A,
                      { skuToken: this.skuToken },
                      function (C) {
                        C || (y && (m.success[y] = !0));
                      },
                      c
                    ));
                }
              }),
              s
            );
          })(le),
          ys = new ((function (i) {
            function s(c) {
              i.call(this, "appUserTurnstile"), (this._customAccessToken = c);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.postTurnstileEvent = function (c, m) {
                qe.EVENTS_URL &&
                  qe.ACCESS_TOKEN &&
                  Array.isArray(c) &&
                  c.some(function (_) {
                    return nr(_) || Sr(_);
                  }) &&
                  this.queueRequest(Date.now(), m);
              }),
              (s.prototype.processRequests = function (c) {
                var m = this;
                if (!this.pendingRequest && this.queue.length !== 0) {
                  (this.anonId &&
                    this.eventData.lastSuccess &&
                    this.eventData.tokenU) ||
                    this.fetchEventData();
                  var _ = Ra(qe.ACCESS_TOKEN),
                    y = _ ? _.u : qe.ACCESS_TOKEN,
                    A = y !== this.eventData.tokenU;
                  Se(this.anonId) || ((this.anonId = ee()), (A = !0));
                  var C = this.queue.shift();
                  if (this.eventData.lastSuccess) {
                    var P = new Date(this.eventData.lastSuccess),
                      O = new Date(C),
                      k = (C - this.eventData.lastSuccess) / 864e5;
                    A = A || k >= 1 || k < -1 || P.getDate() !== O.getDate();
                  } else A = !0;
                  if (!A) return this.processRequests();
                  this.postEvent(
                    C,
                    { "enabled.telemetry": !1 },
                    function (U) {
                      U ||
                        ((m.eventData.lastSuccess = C),
                        (m.eventData.tokenU = y));
                    },
                    c
                  );
                }
              }),
              s
            );
          })(le))(),
          di = ys.postTurnstileEvent.bind(ys),
          Pa = new Ma(),
          yo = Pa.postMapLoadEvent.bind(Pa),
          Oa = 500,
          Os = 50;
        function Wi() {
          T.caches && !Ia && (Ia = T.caches.open("mapbox-tiles"));
        }
        function xs(i) {
          var s = i.indexOf("?");
          return s < 0 ? i : i.slice(0, s);
        }
        var Mo,
          sl = 1 / 0;
        function mc() {
          return (
            Mo == null &&
              (Mo =
                T.OffscreenCanvas &&
                new T.OffscreenCanvas(1, 1).getContext("2d") &&
                typeof T.createImageBitmap == "function"),
            Mo
          );
        }
        var ll = {
          Unknown: "Unknown",
          Style: "Style",
          Source: "Source",
          Tile: "Tile",
          Glyphs: "Glyphs",
          SpriteImage: "SpriteImage",
          SpriteJSON: "SpriteJSON",
          Image: "Image",
        };
        typeof Object.freeze == "function" && Object.freeze(ll);
        var jc = (function (i) {
            function s(c, m, _) {
              m === 401 &&
                Sr(_) &&
                (c +=
                  ": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),
                i.call(this, c),
                (this.status = m),
                (this.url = _),
                (this.name = this.constructor.name),
                (this.message = c);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.toString = function () {
                return (
                  this.name +
                  ": " +
                  this.message +
                  " (" +
                  this.status +
                  "): " +
                  this.url
                );
              }),
              s
            );
          })(Error),
          cl = Yt()
            ? function () {
                return self.worker && self.worker.referrer;
              }
            : function () {
                return (T.location.protocol === "blob:" ? T.parent : T).location
                  .href;
              },
          jo,
          Wo,
          Ls = function (i, s) {
            if (
              !(
                /^file:/.test((c = i.url)) ||
                (/^file:/.test(cl()) && !/^\w+:/.test(c))
              )
            ) {
              if (
                T.fetch &&
                T.Request &&
                T.AbortController &&
                T.Request.prototype.hasOwnProperty("signal")
              )
                return (function (m, _) {
                  var y,
                    A = new T.AbortController(),
                    C = new T.Request(m.url, {
                      method: m.method || "GET",
                      body: m.body,
                      credentials: m.credentials,
                      headers: m.headers,
                      referrer: cl(),
                      signal: A.signal,
                    }),
                    P = !1,
                    O = !1,
                    k = (y = C.url).indexOf("sku=") > 0 && Sr(y);
                  m.type === "json" &&
                    C.headers.set("Accept", "application/json");
                  var U = function ($, he, me) {
                      if (!O) {
                        if (
                          ($ && $.message !== "SecurityError" && He($),
                          he && me)
                        )
                          return W(he);
                        var Ie = Date.now();
                        T.fetch(C)
                          .then(function (Te) {
                            if (Te.ok) {
                              var je = k ? Te.clone() : null;
                              return W(Te, je, Ie);
                            }
                            return _(new jc(Te.statusText, Te.status, m.url));
                          })
                          .catch(function (Te) {
                            Te.code !== 20 && _(new Error(Te.message));
                          });
                      }
                    },
                    W = function ($, he, me) {
                      (m.type === "arrayBuffer"
                        ? $.arrayBuffer()
                        : m.type === "json"
                        ? $.json()
                        : $.text()
                      )
                        .then(function (Ie) {
                          O ||
                            (he &&
                              me &&
                              (function (Te, je, Ze) {
                                if ((Wi(), Ia)) {
                                  var at = {
                                    status: je.status,
                                    statusText: je.statusText,
                                    headers: new T.Headers(),
                                  };
                                  je.headers.forEach(function (yt, zt) {
                                    return at.headers.set(zt, yt);
                                  });
                                  var lt = Ht(
                                    je.headers.get("Cache-Control") || ""
                                  );
                                  lt["no-store"] ||
                                    (lt["max-age"] &&
                                      at.headers.set(
                                        "Expires",
                                        new Date(
                                          Ze + 1e3 * lt["max-age"]
                                        ).toUTCString()
                                      ),
                                    new Date(
                                      at.headers.get("Expires")
                                    ).getTime() -
                                      Ze <
                                      42e4 ||
                                      (function (yt, zt) {
                                        if (ts === void 0)
                                          try {
                                            new Response(new ReadableStream()),
                                              (ts = !0);
                                          } catch {
                                            ts = !1;
                                          }
                                        ts ? zt(yt.body) : yt.blob().then(zt);
                                      })(je, function (yt) {
                                        var zt = new T.Response(yt, at);
                                        Wi(),
                                          Ia &&
                                            Ia.then(function (Qt) {
                                              return Qt.put(xs(Te.url), zt);
                                            }).catch(function (Qt) {
                                              return He(Qt.message);
                                            });
                                      }));
                                }
                              })(C, he, me),
                            (P = !0),
                            _(
                              null,
                              Ie,
                              $.headers.get("Cache-Control"),
                              $.headers.get("Expires")
                            ));
                        })
                        .catch(function (Ie) {
                          O || _(new Error(Ie.message));
                        });
                    };
                  return (
                    k
                      ? (function ($, he) {
                          if ((Wi(), !Ia)) return he(null);
                          var me = xs($.url);
                          Ia.then(function (Ie) {
                            Ie.match(me)
                              .then(function (Te) {
                                var je = (function (Ze) {
                                  if (!Ze) return !1;
                                  var at = new Date(
                                      Ze.headers.get("Expires") || 0
                                    ),
                                    lt = Ht(
                                      Ze.headers.get("Cache-Control") || ""
                                    );
                                  return at > Date.now() && !lt["no-cache"];
                                })(Te);
                                Ie.delete(me),
                                  je && Ie.put(me, Te.clone()),
                                  he(null, Te, je);
                              })
                              .catch(he);
                          }).catch(he);
                        })(C, U)
                      : U(null, null),
                    {
                      cancel: function () {
                        (O = !0), P || A.abort();
                      },
                    }
                  );
                })(i, s);
              if (Yt() && self.worker && self.worker.actor)
                return self.worker.actor.send("getResource", i, s, void 0, !0);
            }
            var c;
            return (function (m, _) {
              var y = new T.XMLHttpRequest();
              for (var A in (y.open(m.method || "GET", m.url, !0),
              m.type === "arrayBuffer" && (y.responseType = "arraybuffer"),
              m.headers))
                y.setRequestHeader(A, m.headers[A]);
              return (
                m.type === "json" &&
                  ((y.responseType = "text"),
                  y.setRequestHeader("Accept", "application/json")),
                (y.withCredentials = m.credentials === "include"),
                (y.onerror = function () {
                  _(new Error(y.statusText));
                }),
                (y.onload = function () {
                  if (
                    ((y.status >= 200 && y.status < 300) || y.status === 0) &&
                    y.response !== null
                  ) {
                    var C = y.response;
                    if (m.type === "json")
                      try {
                        C = JSON.parse(y.response);
                      } catch (P) {
                        return _(P);
                      }
                    _(
                      null,
                      C,
                      y.getResponseHeader("Cache-Control"),
                      y.getResponseHeader("Expires")
                    );
                  } else _(new jc(y.statusText, y.status, m.url));
                }),
                y.send(m.body),
                {
                  cancel: function () {
                    return y.abort();
                  },
                }
              );
            })(i, s);
          },
          gc = function (i, s) {
            return Ls(G(i, { type: "arrayBuffer" }), s);
          },
          Wr = function (i, s) {
            return Ls(G(i, { method: "POST" }), s);
          },
          z =
            "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";
        (jo = []), (Wo = 0);
        var j = function (i, s) {
          if (
            ($t.supported &&
              (i.headers || (i.headers = {}),
              (i.headers.accept = "image/webp,*/*")),
            Wo >= qe.MAX_PARALLEL_IMAGE_REQUESTS)
          ) {
            var c = {
              requestParameters: i,
              callback: s,
              cancelled: !1,
              cancel: function () {
                this.cancelled = !0;
              },
            };
            return jo.push(c), c;
          }
          Wo++;
          var m = !1,
            _ = function () {
              if (!m)
                for (
                  m = !0, Wo--;
                  jo.length && Wo < qe.MAX_PARALLEL_IMAGE_REQUESTS;

                ) {
                  var A = jo.shift();
                  A.cancelled ||
                    (A.cancel = j(A.requestParameters, A.callback).cancel);
                }
            },
            y = gc(i, function (A, C, P, O) {
              _(),
                A
                  ? s(A)
                  : C &&
                    (mc()
                      ? (function (k, U) {
                          var W = new T.Blob([new Uint8Array(k)], {
                            type: "image/png",
                          });
                          T.createImageBitmap(W)
                            .then(function ($) {
                              U(null, $);
                            })
                            .catch(function ($) {
                              U(
                                new Error(
                                  "Could not load image because of " +
                                    $.message +
                                    ". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."
                                )
                              );
                            });
                        })(C, s)
                      : (function (k, U, W, $) {
                          var he = new T.Image(),
                            me = T.URL;
                          (he.onload = function () {
                            U(null, he),
                              me.revokeObjectURL(he.src),
                              (he.onload = null),
                              T.requestAnimationFrame(function () {
                                he.src = z;
                              });
                          }),
                            (he.onerror = function () {
                              return U(
                                new Error(
                                  "Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."
                                )
                              );
                            });
                          var Ie = new T.Blob([new Uint8Array(k)], {
                            type: "image/png",
                          });
                          (he.cacheControl = W),
                            (he.expires = $),
                            (he.src = k.byteLength
                              ? me.createObjectURL(Ie)
                              : z);
                        })(C, s, P, O));
            });
          return {
            cancel: function () {
              y.cancel(), _();
            },
          };
        };
        function Z(i, s, c) {
          (c[i] && c[i].indexOf(s) !== -1) ||
            ((c[i] = c[i] || []), c[i].push(s));
        }
        function ae(i, s, c) {
          if (c && c[i]) {
            var m = c[i].indexOf(s);
            m !== -1 && c[i].splice(m, 1);
          }
        }
        var fe = function (i, s) {
            s === void 0 && (s = {}), G(this, s), (this.type = i);
          },
          Pe = (function (i) {
            function s(c, m) {
              m === void 0 && (m = {}),
                i.call(this, "error", G({ error: c }, m));
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              s
            );
          })(fe),
          Fe = function () {};
        (Fe.prototype.on = function (i, s) {
          return (
            (this._listeners = this._listeners || {}),
            Z(i, s, this._listeners),
            this
          );
        }),
          (Fe.prototype.off = function (i, s) {
            return (
              ae(i, s, this._listeners), ae(i, s, this._oneTimeListeners), this
            );
          }),
          (Fe.prototype.once = function (i, s) {
            return (
              (this._oneTimeListeners = this._oneTimeListeners || {}),
              Z(i, s, this._oneTimeListeners),
              this
            );
          }),
          (Fe.prototype.fire = function (i, s) {
            typeof i == "string" && (i = new fe(i, s || {}));
            var c = i.type;
            if (this.listens(c)) {
              i.target = this;
              for (
                var m = 0,
                  _ =
                    this._listeners && this._listeners[c]
                      ? this._listeners[c].slice()
                      : [];
                m < _.length;
                m += 1
              )
                _[m].call(this, i);
              for (
                var y = 0,
                  A =
                    this._oneTimeListeners && this._oneTimeListeners[c]
                      ? this._oneTimeListeners[c].slice()
                      : [];
                y < A.length;
                y += 1
              ) {
                var C = A[y];
                ae(c, C, this._oneTimeListeners), C.call(this, i);
              }
              var P = this._eventedParent;
              P &&
                (G(
                  i,
                  typeof this._eventedParentData == "function"
                    ? this._eventedParentData()
                    : this._eventedParentData
                ),
                P.fire(i));
            } else i instanceof Pe && console.error(i.error);
            return this;
          }),
          (Fe.prototype.listens = function (i) {
            return (
              (this._listeners &&
                this._listeners[i] &&
                this._listeners[i].length > 0) ||
              (this._oneTimeListeners &&
                this._oneTimeListeners[i] &&
                this._oneTimeListeners[i].length > 0) ||
              (this._eventedParent && this._eventedParent.listens(i))
            );
          }),
          (Fe.prototype.setEventedParent = function (i, s) {
            return (
              (this._eventedParent = i), (this._eventedParentData = s), this
            );
          });
        var te = {
            $version: 8,
            $root: {
              version: { required: !0, type: "enum", values: [8] },
              name: { type: "string" },
              metadata: { type: "*" },
              center: { type: "array", value: "number" },
              zoom: { type: "number" },
              bearing: {
                type: "number",
                default: 0,
                period: 360,
                units: "degrees",
              },
              pitch: { type: "number", default: 0, units: "degrees" },
              light: { type: "light" },
              sources: { required: !0, type: "sources" },
              sprite: { type: "string" },
              glyphs: { type: "string" },
              transition: { type: "transition" },
              layers: { required: !0, type: "array", value: "layer" },
            },
            sources: { "*": { type: "source" } },
            source: [
              "source_vector",
              "source_raster",
              "source_raster_dem",
              "source_geojson",
              "source_video",
              "source_image",
            ],
            source_vector: {
              type: { required: !0, type: "enum", values: { vector: {} } },
              url: { type: "string" },
              tiles: { type: "array", value: "string" },
              bounds: {
                type: "array",
                value: "number",
                length: 4,
                default: [-180, -85.051129, 180, 85.051129],
              },
              scheme: {
                type: "enum",
                values: { xyz: {}, tms: {} },
                default: "xyz",
              },
              minzoom: { type: "number", default: 0 },
              maxzoom: { type: "number", default: 22 },
              attribution: { type: "string" },
              promoteId: { type: "promoteId" },
              volatile: { type: "boolean", default: !1 },
              "*": { type: "*" },
            },
            source_raster: {
              type: { required: !0, type: "enum", values: { raster: {} } },
              url: { type: "string" },
              tiles: { type: "array", value: "string" },
              bounds: {
                type: "array",
                value: "number",
                length: 4,
                default: [-180, -85.051129, 180, 85.051129],
              },
              minzoom: { type: "number", default: 0 },
              maxzoom: { type: "number", default: 22 },
              tileSize: { type: "number", default: 512, units: "pixels" },
              scheme: {
                type: "enum",
                values: { xyz: {}, tms: {} },
                default: "xyz",
              },
              attribution: { type: "string" },
              volatile: { type: "boolean", default: !1 },
              "*": { type: "*" },
            },
            source_raster_dem: {
              type: {
                required: !0,
                type: "enum",
                values: { "raster-dem": {} },
              },
              url: { type: "string" },
              tiles: { type: "array", value: "string" },
              bounds: {
                type: "array",
                value: "number",
                length: 4,
                default: [-180, -85.051129, 180, 85.051129],
              },
              minzoom: { type: "number", default: 0 },
              maxzoom: { type: "number", default: 22 },
              tileSize: { type: "number", default: 512, units: "pixels" },
              attribution: { type: "string" },
              encoding: {
                type: "enum",
                values: { terrarium: {}, mapbox: {} },
                default: "mapbox",
              },
              volatile: { type: "boolean", default: !1 },
              "*": { type: "*" },
            },
            source_geojson: {
              type: { required: !0, type: "enum", values: { geojson: {} } },
              data: { type: "*" },
              maxzoom: { type: "number", default: 18 },
              attribution: { type: "string" },
              buffer: {
                type: "number",
                default: 128,
                maximum: 512,
                minimum: 0,
              },
              filter: { type: "*" },
              tolerance: { type: "number", default: 0.375 },
              cluster: { type: "boolean", default: !1 },
              clusterRadius: { type: "number", default: 50, minimum: 0 },
              clusterMaxZoom: { type: "number" },
              clusterMinPoints: { type: "number" },
              clusterProperties: { type: "*" },
              lineMetrics: { type: "boolean", default: !1 },
              generateId: { type: "boolean", default: !1 },
              promoteId: { type: "promoteId" },
            },
            source_video: {
              type: { required: !0, type: "enum", values: { video: {} } },
              urls: { required: !0, type: "array", value: "string" },
              coordinates: {
                required: !0,
                type: "array",
                length: 4,
                value: { type: "array", length: 2, value: "number" },
              },
            },
            source_image: {
              type: { required: !0, type: "enum", values: { image: {} } },
              url: { required: !0, type: "string" },
              coordinates: {
                required: !0,
                type: "array",
                length: 4,
                value: { type: "array", length: 2, value: "number" },
              },
            },
            layer: {
              id: { type: "string", required: !0 },
              type: {
                type: "enum",
                values: {
                  fill: {},
                  line: {},
                  symbol: {},
                  circle: {},
                  heatmap: {},
                  "fill-extrusion": {},
                  raster: {},
                  hillshade: {},
                  background: {},
                },
                required: !0,
              },
              metadata: { type: "*" },
              source: { type: "string" },
              "source-layer": { type: "string" },
              minzoom: { type: "number", minimum: 0, maximum: 24 },
              maxzoom: { type: "number", minimum: 0, maximum: 24 },
              filter: { type: "filter" },
              layout: { type: "layout" },
              paint: { type: "paint" },
            },
            layout: [
              "layout_fill",
              "layout_line",
              "layout_circle",
              "layout_heatmap",
              "layout_fill-extrusion",
              "layout_symbol",
              "layout_raster",
              "layout_hillshade",
              "layout_background",
            ],
            layout_background: {
              visibility: {
                type: "enum",
                values: { visible: {}, none: {} },
                default: "visible",
                "property-type": "constant",
              },
            },
            layout_fill: {
              "fill-sort-key": {
                type: "number",
                expression: {
                  interpolated: !1,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              visibility: {
                type: "enum",
                values: { visible: {}, none: {} },
                default: "visible",
                "property-type": "constant",
              },
            },
            layout_circle: {
              "circle-sort-key": {
                type: "number",
                expression: {
                  interpolated: !1,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              visibility: {
                type: "enum",
                values: { visible: {}, none: {} },
                default: "visible",
                "property-type": "constant",
              },
            },
            layout_heatmap: {
              visibility: {
                type: "enum",
                values: { visible: {}, none: {} },
                default: "visible",
                "property-type": "constant",
              },
            },
            "layout_fill-extrusion": {
              visibility: {
                type: "enum",
                values: { visible: {}, none: {} },
                default: "visible",
                "property-type": "constant",
              },
            },
            layout_line: {
              "line-cap": {
                type: "enum",
                values: { butt: {}, round: {}, square: {} },
                default: "butt",
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "line-join": {
                type: "enum",
                values: { bevel: {}, round: {}, miter: {} },
                default: "miter",
                expression: {
                  interpolated: !1,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              "line-miter-limit": {
                type: "number",
                default: 2,
                requires: [{ "line-join": "miter" }],
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "line-round-limit": {
                type: "number",
                default: 1.05,
                requires: [{ "line-join": "round" }],
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "line-sort-key": {
                type: "number",
                expression: {
                  interpolated: !1,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              visibility: {
                type: "enum",
                values: { visible: {}, none: {} },
                default: "visible",
                "property-type": "constant",
              },
            },
            layout_symbol: {
              "symbol-placement": {
                type: "enum",
                values: { point: {}, line: {}, "line-center": {} },
                default: "point",
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "symbol-spacing": {
                type: "number",
                default: 250,
                minimum: 1,
                units: "pixels",
                requires: [{ "symbol-placement": "line" }],
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "symbol-avoid-edges": {
                type: "boolean",
                default: !1,
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "symbol-sort-key": {
                type: "number",
                expression: {
                  interpolated: !1,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              "symbol-z-order": {
                type: "enum",
                values: { auto: {}, "viewport-y": {}, source: {} },
                default: "auto",
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "icon-allow-overlap": {
                type: "boolean",
                default: !1,
                requires: ["icon-image"],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "icon-ignore-placement": {
                type: "boolean",
                default: !1,
                requires: ["icon-image"],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "icon-optional": {
                type: "boolean",
                default: !1,
                requires: ["icon-image", "text-field"],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "icon-rotation-alignment": {
                type: "enum",
                values: { map: {}, viewport: {}, auto: {} },
                default: "auto",
                requires: ["icon-image"],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "icon-size": {
                type: "number",
                default: 1,
                minimum: 0,
                units: "factor of the original icon size",
                requires: ["icon-image"],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              "icon-text-fit": {
                type: "enum",
                values: { none: {}, width: {}, height: {}, both: {} },
                default: "none",
                requires: ["icon-image", "text-field"],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "icon-text-fit-padding": {
                type: "array",
                value: "number",
                length: 4,
                default: [0, 0, 0, 0],
                units: "pixels",
                requires: [
                  "icon-image",
                  "text-field",
                  { "icon-text-fit": ["both", "width", "height"] },
                ],
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "icon-image": {
                type: "resolvedImage",
                tokens: !0,
                expression: {
                  interpolated: !1,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              "icon-rotate": {
                type: "number",
                default: 0,
                period: 360,
                units: "degrees",
                requires: ["icon-image"],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              "icon-padding": {
                type: "number",
                default: 2,
                minimum: 0,
                units: "pixels",
                requires: ["icon-image"],
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "icon-keep-upright": {
                type: "boolean",
                default: !1,
                requires: [
                  "icon-image",
                  { "icon-rotation-alignment": "map" },
                  { "symbol-placement": ["line", "line-center"] },
                ],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "icon-offset": {
                type: "array",
                value: "number",
                length: 2,
                default: [0, 0],
                requires: ["icon-image"],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              "icon-anchor": {
                type: "enum",
                values: {
                  center: {},
                  left: {},
                  right: {},
                  top: {},
                  bottom: {},
                  "top-left": {},
                  "top-right": {},
                  "bottom-left": {},
                  "bottom-right": {},
                },
                default: "center",
                requires: ["icon-image"],
                expression: {
                  interpolated: !1,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              "icon-pitch-alignment": {
                type: "enum",
                values: { map: {}, viewport: {}, auto: {} },
                default: "auto",
                requires: ["icon-image"],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "text-pitch-alignment": {
                type: "enum",
                values: { map: {}, viewport: {}, auto: {} },
                default: "auto",
                requires: ["text-field"],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "text-rotation-alignment": {
                type: "enum",
                values: { map: {}, viewport: {}, auto: {} },
                default: "auto",
                requires: ["text-field"],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "text-field": {
                type: "formatted",
                default: "",
                tokens: !0,
                expression: {
                  interpolated: !1,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              "text-font": {
                type: "array",
                value: "string",
                default: ["Open Sans Regular", "Arial Unicode MS Regular"],
                requires: ["text-field"],
                expression: {
                  interpolated: !1,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              "text-size": {
                type: "number",
                default: 16,
                minimum: 0,
                units: "pixels",
                requires: ["text-field"],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              "text-max-width": {
                type: "number",
                default: 10,
                minimum: 0,
                units: "ems",
                requires: ["text-field"],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              "text-line-height": {
                type: "number",
                default: 1.2,
                units: "ems",
                requires: ["text-field"],
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "text-letter-spacing": {
                type: "number",
                default: 0,
                units: "ems",
                requires: ["text-field"],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              "text-justify": {
                type: "enum",
                values: { auto: {}, left: {}, center: {}, right: {} },
                default: "center",
                requires: ["text-field"],
                expression: {
                  interpolated: !1,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              "text-radial-offset": {
                type: "number",
                units: "ems",
                default: 0,
                requires: ["text-field"],
                "property-type": "data-driven",
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature"],
                },
              },
              "text-variable-anchor": {
                type: "array",
                value: "enum",
                values: {
                  center: {},
                  left: {},
                  right: {},
                  top: {},
                  bottom: {},
                  "top-left": {},
                  "top-right": {},
                  "bottom-left": {},
                  "bottom-right": {},
                },
                requires: ["text-field", { "symbol-placement": ["point"] }],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "text-anchor": {
                type: "enum",
                values: {
                  center: {},
                  left: {},
                  right: {},
                  top: {},
                  bottom: {},
                  "top-left": {},
                  "top-right": {},
                  "bottom-left": {},
                  "bottom-right": {},
                },
                default: "center",
                requires: ["text-field", { "!": "text-variable-anchor" }],
                expression: {
                  interpolated: !1,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              "text-max-angle": {
                type: "number",
                default: 45,
                units: "degrees",
                requires: [
                  "text-field",
                  { "symbol-placement": ["line", "line-center"] },
                ],
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "text-writing-mode": {
                type: "array",
                value: "enum",
                values: { horizontal: {}, vertical: {} },
                requires: ["text-field", { "symbol-placement": ["point"] }],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "text-rotate": {
                type: "number",
                default: 0,
                period: 360,
                units: "degrees",
                requires: ["text-field"],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              "text-padding": {
                type: "number",
                default: 2,
                minimum: 0,
                units: "pixels",
                requires: ["text-field"],
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "text-keep-upright": {
                type: "boolean",
                default: !0,
                requires: [
                  "text-field",
                  { "text-rotation-alignment": "map" },
                  { "symbol-placement": ["line", "line-center"] },
                ],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "text-transform": {
                type: "enum",
                values: { none: {}, uppercase: {}, lowercase: {} },
                default: "none",
                requires: ["text-field"],
                expression: {
                  interpolated: !1,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              "text-offset": {
                type: "array",
                value: "number",
                units: "ems",
                length: 2,
                default: [0, 0],
                requires: ["text-field", { "!": "text-radial-offset" }],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "data-driven",
              },
              "text-allow-overlap": {
                type: "boolean",
                default: !1,
                requires: ["text-field"],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "text-ignore-placement": {
                type: "boolean",
                default: !1,
                requires: ["text-field"],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "text-optional": {
                type: "boolean",
                default: !1,
                requires: ["text-field", "icon-image"],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              visibility: {
                type: "enum",
                values: { visible: {}, none: {} },
                default: "visible",
                "property-type": "constant",
              },
            },
            layout_raster: {
              visibility: {
                type: "enum",
                values: { visible: {}, none: {} },
                default: "visible",
                "property-type": "constant",
              },
            },
            layout_hillshade: {
              visibility: {
                type: "enum",
                values: { visible: {}, none: {} },
                default: "visible",
                "property-type": "constant",
              },
            },
            filter: { type: "array", value: "*" },
            filter_operator: {
              type: "enum",
              values: {
                "==": {},
                "!=": {},
                ">": {},
                ">=": {},
                "<": {},
                "<=": {},
                in: {},
                "!in": {},
                all: {},
                any: {},
                none: {},
                has: {},
                "!has": {},
                within: {},
              },
            },
            geometry_type: {
              type: "enum",
              values: { Point: {}, LineString: {}, Polygon: {} },
            },
            function: {
              expression: { type: "expression" },
              stops: { type: "array", value: "function_stop" },
              base: { type: "number", default: 1, minimum: 0 },
              property: { type: "string", default: "$zoom" },
              type: {
                type: "enum",
                values: {
                  identity: {},
                  exponential: {},
                  interval: {},
                  categorical: {},
                },
                default: "exponential",
              },
              colorSpace: {
                type: "enum",
                values: { rgb: {}, lab: {}, hcl: {} },
                default: "rgb",
              },
              default: { type: "*", required: !1 },
            },
            function_stop: {
              type: "array",
              minimum: 0,
              maximum: 24,
              value: ["number", "color"],
              length: 2,
            },
            expression: { type: "array", value: "*", minimum: 1 },
            light: {
              anchor: {
                type: "enum",
                default: "viewport",
                values: { map: {}, viewport: {} },
                "property-type": "data-constant",
                transition: !1,
                expression: { interpolated: !1, parameters: ["zoom"] },
              },
              position: {
                type: "array",
                default: [1.15, 210, 30],
                length: 3,
                value: "number",
                "property-type": "data-constant",
                transition: !0,
                expression: { interpolated: !0, parameters: ["zoom"] },
              },
              color: {
                type: "color",
                "property-type": "data-constant",
                default: "#ffffff",
                expression: { interpolated: !0, parameters: ["zoom"] },
                transition: !0,
              },
              intensity: {
                type: "number",
                "property-type": "data-constant",
                default: 0.5,
                minimum: 0,
                maximum: 1,
                expression: { interpolated: !0, parameters: ["zoom"] },
                transition: !0,
              },
            },
            paint: [
              "paint_fill",
              "paint_line",
              "paint_circle",
              "paint_heatmap",
              "paint_fill-extrusion",
              "paint_symbol",
              "paint_raster",
              "paint_hillshade",
              "paint_background",
            ],
            paint_fill: {
              "fill-antialias": {
                type: "boolean",
                default: !0,
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "fill-opacity": {
                type: "number",
                default: 1,
                minimum: 0,
                maximum: 1,
                transition: !0,
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "fill-color": {
                type: "color",
                default: "#000000",
                transition: !0,
                requires: [{ "!": "fill-pattern" }],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "fill-outline-color": {
                type: "color",
                transition: !0,
                requires: [{ "!": "fill-pattern" }, { "fill-antialias": !0 }],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "fill-translate": {
                type: "array",
                value: "number",
                length: 2,
                default: [0, 0],
                transition: !0,
                units: "pixels",
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "fill-translate-anchor": {
                type: "enum",
                values: { map: {}, viewport: {} },
                default: "map",
                requires: ["fill-translate"],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "fill-pattern": {
                type: "resolvedImage",
                transition: !0,
                expression: {
                  interpolated: !1,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "cross-faded-data-driven",
              },
            },
            "paint_fill-extrusion": {
              "fill-extrusion-opacity": {
                type: "number",
                default: 1,
                minimum: 0,
                maximum: 1,
                transition: !0,
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "fill-extrusion-color": {
                type: "color",
                default: "#000000",
                transition: !0,
                requires: [{ "!": "fill-extrusion-pattern" }],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "fill-extrusion-translate": {
                type: "array",
                value: "number",
                length: 2,
                default: [0, 0],
                transition: !0,
                units: "pixels",
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "fill-extrusion-translate-anchor": {
                type: "enum",
                values: { map: {}, viewport: {} },
                default: "map",
                requires: ["fill-extrusion-translate"],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "fill-extrusion-pattern": {
                type: "resolvedImage",
                transition: !0,
                expression: {
                  interpolated: !1,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "cross-faded-data-driven",
              },
              "fill-extrusion-height": {
                type: "number",
                default: 0,
                minimum: 0,
                units: "meters",
                transition: !0,
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "fill-extrusion-base": {
                type: "number",
                default: 0,
                minimum: 0,
                units: "meters",
                transition: !0,
                requires: ["fill-extrusion-height"],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "fill-extrusion-vertical-gradient": {
                type: "boolean",
                default: !0,
                transition: !1,
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
            },
            paint_line: {
              "line-opacity": {
                type: "number",
                default: 1,
                minimum: 0,
                maximum: 1,
                transition: !0,
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "line-color": {
                type: "color",
                default: "#000000",
                transition: !0,
                requires: [{ "!": "line-pattern" }],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "line-translate": {
                type: "array",
                value: "number",
                length: 2,
                default: [0, 0],
                transition: !0,
                units: "pixels",
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "line-translate-anchor": {
                type: "enum",
                values: { map: {}, viewport: {} },
                default: "map",
                requires: ["line-translate"],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "line-width": {
                type: "number",
                default: 1,
                minimum: 0,
                transition: !0,
                units: "pixels",
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "line-gap-width": {
                type: "number",
                default: 0,
                minimum: 0,
                transition: !0,
                units: "pixels",
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "line-offset": {
                type: "number",
                default: 0,
                transition: !0,
                units: "pixels",
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "line-blur": {
                type: "number",
                default: 0,
                minimum: 0,
                transition: !0,
                units: "pixels",
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "line-dasharray": {
                type: "array",
                value: "number",
                minimum: 0,
                transition: !0,
                units: "line widths",
                requires: [{ "!": "line-pattern" }],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "cross-faded",
              },
              "line-pattern": {
                type: "resolvedImage",
                transition: !0,
                expression: {
                  interpolated: !1,
                  parameters: ["zoom", "feature"],
                },
                "property-type": "cross-faded-data-driven",
              },
              "line-gradient": {
                type: "color",
                transition: !1,
                requires: [
                  { "!": "line-dasharray" },
                  { "!": "line-pattern" },
                  { source: "geojson", has: { lineMetrics: !0 } },
                ],
                expression: { interpolated: !0, parameters: ["line-progress"] },
                "property-type": "color-ramp",
              },
            },
            paint_circle: {
              "circle-radius": {
                type: "number",
                default: 5,
                minimum: 0,
                transition: !0,
                units: "pixels",
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "circle-color": {
                type: "color",
                default: "#000000",
                transition: !0,
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "circle-blur": {
                type: "number",
                default: 0,
                transition: !0,
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "circle-opacity": {
                type: "number",
                default: 1,
                minimum: 0,
                maximum: 1,
                transition: !0,
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "circle-translate": {
                type: "array",
                value: "number",
                length: 2,
                default: [0, 0],
                transition: !0,
                units: "pixels",
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "circle-translate-anchor": {
                type: "enum",
                values: { map: {}, viewport: {} },
                default: "map",
                requires: ["circle-translate"],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "circle-pitch-scale": {
                type: "enum",
                values: { map: {}, viewport: {} },
                default: "map",
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "circle-pitch-alignment": {
                type: "enum",
                values: { map: {}, viewport: {} },
                default: "viewport",
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "circle-stroke-width": {
                type: "number",
                default: 0,
                minimum: 0,
                transition: !0,
                units: "pixels",
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "circle-stroke-color": {
                type: "color",
                default: "#000000",
                transition: !0,
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "circle-stroke-opacity": {
                type: "number",
                default: 1,
                minimum: 0,
                maximum: 1,
                transition: !0,
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
            },
            paint_heatmap: {
              "heatmap-radius": {
                type: "number",
                default: 30,
                minimum: 1,
                transition: !0,
                units: "pixels",
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "heatmap-weight": {
                type: "number",
                default: 1,
                minimum: 0,
                transition: !1,
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "heatmap-intensity": {
                type: "number",
                default: 1,
                minimum: 0,
                transition: !0,
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "heatmap-color": {
                type: "color",
                default: [
                  "interpolate",
                  ["linear"],
                  ["heatmap-density"],
                  0,
                  "rgba(0, 0, 255, 0)",
                  0.1,
                  "royalblue",
                  0.3,
                  "cyan",
                  0.5,
                  "lime",
                  0.7,
                  "yellow",
                  1,
                  "red",
                ],
                transition: !1,
                expression: {
                  interpolated: !0,
                  parameters: ["heatmap-density"],
                },
                "property-type": "color-ramp",
              },
              "heatmap-opacity": {
                type: "number",
                default: 1,
                minimum: 0,
                maximum: 1,
                transition: !0,
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
            },
            paint_symbol: {
              "icon-opacity": {
                type: "number",
                default: 1,
                minimum: 0,
                maximum: 1,
                transition: !0,
                requires: ["icon-image"],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "icon-color": {
                type: "color",
                default: "#000000",
                transition: !0,
                requires: ["icon-image"],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "icon-halo-color": {
                type: "color",
                default: "rgba(0, 0, 0, 0)",
                transition: !0,
                requires: ["icon-image"],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "icon-halo-width": {
                type: "number",
                default: 0,
                minimum: 0,
                transition: !0,
                units: "pixels",
                requires: ["icon-image"],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "icon-halo-blur": {
                type: "number",
                default: 0,
                minimum: 0,
                transition: !0,
                units: "pixels",
                requires: ["icon-image"],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "icon-translate": {
                type: "array",
                value: "number",
                length: 2,
                default: [0, 0],
                transition: !0,
                units: "pixels",
                requires: ["icon-image"],
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "icon-translate-anchor": {
                type: "enum",
                values: { map: {}, viewport: {} },
                default: "map",
                requires: ["icon-image", "icon-translate"],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "text-opacity": {
                type: "number",
                default: 1,
                minimum: 0,
                maximum: 1,
                transition: !0,
                requires: ["text-field"],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "text-color": {
                type: "color",
                default: "#000000",
                transition: !0,
                overridable: !0,
                requires: ["text-field"],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "text-halo-color": {
                type: "color",
                default: "rgba(0, 0, 0, 0)",
                transition: !0,
                requires: ["text-field"],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "text-halo-width": {
                type: "number",
                default: 0,
                minimum: 0,
                transition: !0,
                units: "pixels",
                requires: ["text-field"],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "text-halo-blur": {
                type: "number",
                default: 0,
                minimum: 0,
                transition: !0,
                units: "pixels",
                requires: ["text-field"],
                expression: {
                  interpolated: !0,
                  parameters: ["zoom", "feature", "feature-state"],
                },
                "property-type": "data-driven",
              },
              "text-translate": {
                type: "array",
                value: "number",
                length: 2,
                default: [0, 0],
                transition: !0,
                units: "pixels",
                requires: ["text-field"],
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "text-translate-anchor": {
                type: "enum",
                values: { map: {}, viewport: {} },
                default: "map",
                requires: ["text-field", "text-translate"],
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
            },
            paint_raster: {
              "raster-opacity": {
                type: "number",
                default: 1,
                minimum: 0,
                maximum: 1,
                transition: !0,
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "raster-hue-rotate": {
                type: "number",
                default: 0,
                period: 360,
                transition: !0,
                units: "degrees",
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "raster-brightness-min": {
                type: "number",
                default: 0,
                minimum: 0,
                maximum: 1,
                transition: !0,
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "raster-brightness-max": {
                type: "number",
                default: 1,
                minimum: 0,
                maximum: 1,
                transition: !0,
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "raster-saturation": {
                type: "number",
                default: 0,
                minimum: -1,
                maximum: 1,
                transition: !0,
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "raster-contrast": {
                type: "number",
                default: 0,
                minimum: -1,
                maximum: 1,
                transition: !0,
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "raster-resampling": {
                type: "enum",
                values: { linear: {}, nearest: {} },
                default: "linear",
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "raster-fade-duration": {
                type: "number",
                default: 300,
                minimum: 0,
                transition: !1,
                units: "milliseconds",
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
            },
            paint_hillshade: {
              "hillshade-illumination-direction": {
                type: "number",
                default: 335,
                minimum: 0,
                maximum: 359,
                transition: !1,
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "hillshade-illumination-anchor": {
                type: "enum",
                values: { map: {}, viewport: {} },
                default: "viewport",
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "hillshade-exaggeration": {
                type: "number",
                default: 0.5,
                minimum: 0,
                maximum: 1,
                transition: !0,
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "hillshade-shadow-color": {
                type: "color",
                default: "#000000",
                transition: !0,
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "hillshade-highlight-color": {
                type: "color",
                default: "#FFFFFF",
                transition: !0,
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "hillshade-accent-color": {
                type: "color",
                default: "#000000",
                transition: !0,
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
            },
            paint_background: {
              "background-color": {
                type: "color",
                default: "#000000",
                transition: !0,
                requires: [{ "!": "background-pattern" }],
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
              "background-pattern": {
                type: "resolvedImage",
                transition: !0,
                expression: { interpolated: !1, parameters: ["zoom"] },
                "property-type": "cross-faded",
              },
              "background-opacity": {
                type: "number",
                default: 1,
                minimum: 0,
                maximum: 1,
                transition: !0,
                expression: { interpolated: !0, parameters: ["zoom"] },
                "property-type": "data-constant",
              },
            },
            transition: {
              duration: {
                type: "number",
                default: 300,
                minimum: 0,
                units: "milliseconds",
              },
              delay: {
                type: "number",
                default: 0,
                minimum: 0,
                units: "milliseconds",
              },
            },
            "property-type": {
              "data-driven": { type: "property-type" },
              "cross-faded": { type: "property-type" },
              "cross-faded-data-driven": { type: "property-type" },
              "color-ramp": { type: "property-type" },
              "data-constant": { type: "property-type" },
              constant: { type: "property-type" },
            },
            promoteId: { "*": { type: "string" } },
          },
          ye = function (i, s, c, m) {
            (this.message = (i ? i + ": " : "") + c),
              m && (this.identifier = m),
              s != null && s.__line__ && (this.line = s.__line__);
          };
        function Xe(i) {
          var s = i.value;
          return s
            ? [new ye(i.key, s, "constants have been deprecated as of v8")]
            : [];
        }
        function gt(i) {
          for (var s = [], c = arguments.length - 1; c-- > 0; )
            s[c] = arguments[c + 1];
          for (var m = 0, _ = s; m < _.length; m += 1) {
            var y = _[m];
            for (var A in y) i[A] = y[A];
          }
          return i;
        }
        function Ot(i) {
          return i instanceof Number ||
            i instanceof String ||
            i instanceof Boolean
            ? i.valueOf()
            : i;
        }
        function dt(i) {
          if (Array.isArray(i)) return i.map(dt);
          if (
            i instanceof Object &&
            !(
              i instanceof Number ||
              i instanceof String ||
              i instanceof Boolean
            )
          ) {
            var s = {};
            for (var c in i) s[c] = dt(i[c]);
            return s;
          }
          return Ot(i);
        }
        var Nt = (function (i) {
            function s(c, m) {
              i.call(this, m), (this.message = m), (this.key = c);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              s
            );
          })(Error),
          yn = function (i, s) {
            s === void 0 && (s = []), (this.parent = i), (this.bindings = {});
            for (var c = 0, m = s; c < m.length; c += 1) {
              var _ = m[c];
              this.bindings[_[0]] = _[1];
            }
          };
        (yn.prototype.concat = function (i) {
          return new yn(this, i);
        }),
          (yn.prototype.get = function (i) {
            if (this.bindings[i]) return this.bindings[i];
            if (this.parent) return this.parent.get(i);
            throw new Error(i + " not found in scope.");
          }),
          (yn.prototype.has = function (i) {
            return !!this.bindings[i] || (!!this.parent && this.parent.has(i));
          });
        var mn = { kind: "null" },
          pt = { kind: "number" },
          on = { kind: "string" },
          Gt = { kind: "boolean" },
          qt = { kind: "color" },
          or = { kind: "object" },
          nn = { kind: "value" },
          wr = { kind: "collator" },
          ti = { kind: "formatted" },
          xr = { kind: "resolvedImage" };
        function Or(i, s) {
          return { kind: "array", itemType: i, N: s };
        }
        function sr(i) {
          if (i.kind === "array") {
            var s = sr(i.itemType);
            return typeof i.N == "number"
              ? "array<" + s + ", " + i.N + ">"
              : i.itemType.kind === "value"
              ? "array"
              : "array<" + s + ">";
          }
          return i.kind;
        }
        var Xi = [mn, pt, on, Gt, qt, ti, or, Or(nn), xr];
        function Rr(i, s) {
          if (s.kind === "error") return null;
          if (i.kind === "array") {
            if (
              s.kind === "array" &&
              ((s.N === 0 && s.itemType.kind === "value") ||
                !Rr(i.itemType, s.itemType)) &&
              (typeof i.N != "number" || i.N === s.N)
            )
              return null;
          } else {
            if (i.kind === s.kind) return null;
            if (i.kind === "value") {
              for (var c = 0, m = Xi; c < m.length; c += 1)
                if (!Rr(m[c], s)) return null;
            }
          }
          return "Expected " + sr(i) + " but found " + sr(s) + " instead.";
        }
        function ni(i, s) {
          return s.some(function (c) {
            return c.kind === i.kind;
          });
        }
        function zr(i, s) {
          return s.some(function (c) {
            return c === "null"
              ? i === null
              : c === "array"
              ? Array.isArray(i)
              : c === "object"
              ? i && !Array.isArray(i) && typeof i == "object"
              : c === typeof i;
          });
        }
        var lr = h(function (i, s) {
            var c = {
              transparent: [0, 0, 0, 0],
              aliceblue: [240, 248, 255, 1],
              antiquewhite: [250, 235, 215, 1],
              aqua: [0, 255, 255, 1],
              aquamarine: [127, 255, 212, 1],
              azure: [240, 255, 255, 1],
              beige: [245, 245, 220, 1],
              bisque: [255, 228, 196, 1],
              black: [0, 0, 0, 1],
              blanchedalmond: [255, 235, 205, 1],
              blue: [0, 0, 255, 1],
              blueviolet: [138, 43, 226, 1],
              brown: [165, 42, 42, 1],
              burlywood: [222, 184, 135, 1],
              cadetblue: [95, 158, 160, 1],
              chartreuse: [127, 255, 0, 1],
              chocolate: [210, 105, 30, 1],
              coral: [255, 127, 80, 1],
              cornflowerblue: [100, 149, 237, 1],
              cornsilk: [255, 248, 220, 1],
              crimson: [220, 20, 60, 1],
              cyan: [0, 255, 255, 1],
              darkblue: [0, 0, 139, 1],
              darkcyan: [0, 139, 139, 1],
              darkgoldenrod: [184, 134, 11, 1],
              darkgray: [169, 169, 169, 1],
              darkgreen: [0, 100, 0, 1],
              darkgrey: [169, 169, 169, 1],
              darkkhaki: [189, 183, 107, 1],
              darkmagenta: [139, 0, 139, 1],
              darkolivegreen: [85, 107, 47, 1],
              darkorange: [255, 140, 0, 1],
              darkorchid: [153, 50, 204, 1],
              darkred: [139, 0, 0, 1],
              darksalmon: [233, 150, 122, 1],
              darkseagreen: [143, 188, 143, 1],
              darkslateblue: [72, 61, 139, 1],
              darkslategray: [47, 79, 79, 1],
              darkslategrey: [47, 79, 79, 1],
              darkturquoise: [0, 206, 209, 1],
              darkviolet: [148, 0, 211, 1],
              deeppink: [255, 20, 147, 1],
              deepskyblue: [0, 191, 255, 1],
              dimgray: [105, 105, 105, 1],
              dimgrey: [105, 105, 105, 1],
              dodgerblue: [30, 144, 255, 1],
              firebrick: [178, 34, 34, 1],
              floralwhite: [255, 250, 240, 1],
              forestgreen: [34, 139, 34, 1],
              fuchsia: [255, 0, 255, 1],
              gainsboro: [220, 220, 220, 1],
              ghostwhite: [248, 248, 255, 1],
              gold: [255, 215, 0, 1],
              goldenrod: [218, 165, 32, 1],
              gray: [128, 128, 128, 1],
              green: [0, 128, 0, 1],
              greenyellow: [173, 255, 47, 1],
              grey: [128, 128, 128, 1],
              honeydew: [240, 255, 240, 1],
              hotpink: [255, 105, 180, 1],
              indianred: [205, 92, 92, 1],
              indigo: [75, 0, 130, 1],
              ivory: [255, 255, 240, 1],
              khaki: [240, 230, 140, 1],
              lavender: [230, 230, 250, 1],
              lavenderblush: [255, 240, 245, 1],
              lawngreen: [124, 252, 0, 1],
              lemonchiffon: [255, 250, 205, 1],
              lightblue: [173, 216, 230, 1],
              lightcoral: [240, 128, 128, 1],
              lightcyan: [224, 255, 255, 1],
              lightgoldenrodyellow: [250, 250, 210, 1],
              lightgray: [211, 211, 211, 1],
              lightgreen: [144, 238, 144, 1],
              lightgrey: [211, 211, 211, 1],
              lightpink: [255, 182, 193, 1],
              lightsalmon: [255, 160, 122, 1],
              lightseagreen: [32, 178, 170, 1],
              lightskyblue: [135, 206, 250, 1],
              lightslategray: [119, 136, 153, 1],
              lightslategrey: [119, 136, 153, 1],
              lightsteelblue: [176, 196, 222, 1],
              lightyellow: [255, 255, 224, 1],
              lime: [0, 255, 0, 1],
              limegreen: [50, 205, 50, 1],
              linen: [250, 240, 230, 1],
              magenta: [255, 0, 255, 1],
              maroon: [128, 0, 0, 1],
              mediumaquamarine: [102, 205, 170, 1],
              mediumblue: [0, 0, 205, 1],
              mediumorchid: [186, 85, 211, 1],
              mediumpurple: [147, 112, 219, 1],
              mediumseagreen: [60, 179, 113, 1],
              mediumslateblue: [123, 104, 238, 1],
              mediumspringgreen: [0, 250, 154, 1],
              mediumturquoise: [72, 209, 204, 1],
              mediumvioletred: [199, 21, 133, 1],
              midnightblue: [25, 25, 112, 1],
              mintcream: [245, 255, 250, 1],
              mistyrose: [255, 228, 225, 1],
              moccasin: [255, 228, 181, 1],
              navajowhite: [255, 222, 173, 1],
              navy: [0, 0, 128, 1],
              oldlace: [253, 245, 230, 1],
              olive: [128, 128, 0, 1],
              olivedrab: [107, 142, 35, 1],
              orange: [255, 165, 0, 1],
              orangered: [255, 69, 0, 1],
              orchid: [218, 112, 214, 1],
              palegoldenrod: [238, 232, 170, 1],
              palegreen: [152, 251, 152, 1],
              paleturquoise: [175, 238, 238, 1],
              palevioletred: [219, 112, 147, 1],
              papayawhip: [255, 239, 213, 1],
              peachpuff: [255, 218, 185, 1],
              peru: [205, 133, 63, 1],
              pink: [255, 192, 203, 1],
              plum: [221, 160, 221, 1],
              powderblue: [176, 224, 230, 1],
              purple: [128, 0, 128, 1],
              rebeccapurple: [102, 51, 153, 1],
              red: [255, 0, 0, 1],
              rosybrown: [188, 143, 143, 1],
              royalblue: [65, 105, 225, 1],
              saddlebrown: [139, 69, 19, 1],
              salmon: [250, 128, 114, 1],
              sandybrown: [244, 164, 96, 1],
              seagreen: [46, 139, 87, 1],
              seashell: [255, 245, 238, 1],
              sienna: [160, 82, 45, 1],
              silver: [192, 192, 192, 1],
              skyblue: [135, 206, 235, 1],
              slateblue: [106, 90, 205, 1],
              slategray: [112, 128, 144, 1],
              slategrey: [112, 128, 144, 1],
              snow: [255, 250, 250, 1],
              springgreen: [0, 255, 127, 1],
              steelblue: [70, 130, 180, 1],
              tan: [210, 180, 140, 1],
              teal: [0, 128, 128, 1],
              thistle: [216, 191, 216, 1],
              tomato: [255, 99, 71, 1],
              turquoise: [64, 224, 208, 1],
              violet: [238, 130, 238, 1],
              wheat: [245, 222, 179, 1],
              white: [255, 255, 255, 1],
              whitesmoke: [245, 245, 245, 1],
              yellow: [255, 255, 0, 1],
              yellowgreen: [154, 205, 50, 1],
            };
            function m(C) {
              return (C = Math.round(C)) < 0 ? 0 : C > 255 ? 255 : C;
            }
            function _(C) {
              return m(
                C[C.length - 1] === "%"
                  ? (parseFloat(C) / 100) * 255
                  : parseInt(C)
              );
            }
            function y(C) {
              return (P =
                C[C.length - 1] === "%" ? parseFloat(C) / 100 : parseFloat(C)) <
                0
                ? 0
                : P > 1
                ? 1
                : P;
              var P;
            }
            function A(C, P, O) {
              return (
                O < 0 ? (O += 1) : O > 1 && (O -= 1),
                6 * O < 1
                  ? C + (P - C) * O * 6
                  : 2 * O < 1
                  ? P
                  : 3 * O < 2
                  ? C + (P - C) * (2 / 3 - O) * 6
                  : C
              );
            }
            try {
              s.parseCSSColor = function (C) {
                var P,
                  O = C.replace(/ /g, "").toLowerCase();
                if (O in c) return c[O].slice();
                if (O[0] === "#")
                  return O.length === 4
                    ? (P = parseInt(O.substr(1), 16)) >= 0 && P <= 4095
                      ? [
                          ((3840 & P) >> 4) | ((3840 & P) >> 8),
                          (240 & P) | ((240 & P) >> 4),
                          (15 & P) | ((15 & P) << 4),
                          1,
                        ]
                      : null
                    : O.length === 7 &&
                      (P = parseInt(O.substr(1), 16)) >= 0 &&
                      P <= 16777215
                    ? [(16711680 & P) >> 16, (65280 & P) >> 8, 255 & P, 1]
                    : null;
                var k = O.indexOf("("),
                  U = O.indexOf(")");
                if (k !== -1 && U + 1 === O.length) {
                  var W = O.substr(0, k),
                    $ = O.substr(k + 1, U - (k + 1)).split(","),
                    he = 1;
                  switch (W) {
                    case "rgba":
                      if ($.length !== 4) return null;
                      he = y($.pop());
                    case "rgb":
                      return $.length !== 3
                        ? null
                        : [_($[0]), _($[1]), _($[2]), he];
                    case "hsla":
                      if ($.length !== 4) return null;
                      he = y($.pop());
                    case "hsl":
                      if ($.length !== 3) return null;
                      var me = (((parseFloat($[0]) % 360) + 360) % 360) / 360,
                        Ie = y($[1]),
                        Te = y($[2]),
                        je = Te <= 0.5 ? Te * (Ie + 1) : Te + Ie - Te * Ie,
                        Ze = 2 * Te - je;
                      return [
                        m(255 * A(Ze, je, me + 1 / 3)),
                        m(255 * A(Ze, je, me)),
                        m(255 * A(Ze, je, me - 1 / 3)),
                        he,
                      ];
                    default:
                      return null;
                  }
                }
                return null;
              };
            } catch {}
          }).parseCSSColor,
          br = function (i, s, c, m) {
            m === void 0 && (m = 1),
              (this.r = i),
              (this.g = s),
              (this.b = c),
              (this.a = m);
          };
        (br.parse = function (i) {
          if (i) {
            if (i instanceof br) return i;
            if (typeof i == "string") {
              var s = lr(i);
              if (s)
                return new br(
                  (s[0] / 255) * s[3],
                  (s[1] / 255) * s[3],
                  (s[2] / 255) * s[3],
                  s[3]
                );
            }
          }
        }),
          (br.prototype.toString = function () {
            var i = this.toArray(),
              s = i[1],
              c = i[2],
              m = i[3];
            return (
              "rgba(" +
              Math.round(i[0]) +
              "," +
              Math.round(s) +
              "," +
              Math.round(c) +
              "," +
              m +
              ")"
            );
          }),
          (br.prototype.toArray = function () {
            var i = this.a;
            return i === 0
              ? [0, 0, 0, 0]
              : [(255 * this.r) / i, (255 * this.g) / i, (255 * this.b) / i, i];
          }),
          (br.black = new br(0, 0, 0, 1)),
          (br.white = new br(1, 1, 1, 1)),
          (br.transparent = new br(0, 0, 0, 0)),
          (br.red = new br(1, 0, 0, 1));
        var ja = function (i, s, c) {
          (this.sensitivity = i
            ? s
              ? "variant"
              : "case"
            : s
            ? "accent"
            : "base"),
            (this.locale = c),
            (this.collator = new Intl.Collator(this.locale ? this.locale : [], {
              sensitivity: this.sensitivity,
              usage: "search",
            }));
        };
        (ja.prototype.compare = function (i, s) {
          return this.collator.compare(i, s);
        }),
          (ja.prototype.resolvedLocale = function () {
            return new Intl.Collator(
              this.locale ? this.locale : []
            ).resolvedOptions().locale;
          });
        var Rl = function (i, s, c, m, _) {
            (this.text = i),
              (this.image = s),
              (this.scale = c),
              (this.fontStack = m),
              (this.textColor = _);
          },
          ki = function (i) {
            this.sections = i;
          };
        (ki.fromString = function (i) {
          return new ki([new Rl(i, null, null, null, null)]);
        }),
          (ki.prototype.isEmpty = function () {
            return (
              this.sections.length === 0 ||
              !this.sections.some(function (i) {
                return (
                  i.text.length !== 0 || (i.image && i.image.name.length !== 0)
                );
              })
            );
          }),
          (ki.factory = function (i) {
            return i instanceof ki ? i : ki.fromString(i);
          }),
          (ki.prototype.toString = function () {
            return this.sections.length === 0
              ? ""
              : this.sections
                  .map(function (i) {
                    return i.text;
                  })
                  .join("");
          }),
          (ki.prototype.serialize = function () {
            for (
              var i = ["format"], s = 0, c = this.sections;
              s < c.length;
              s += 1
            ) {
              var m = c[s];
              if (m.image) i.push(["image", m.image.name]);
              else {
                i.push(m.text);
                var _ = {};
                m.fontStack &&
                  (_["text-font"] = ["literal", m.fontStack.split(",")]),
                  m.scale && (_["font-scale"] = m.scale),
                  m.textColor &&
                    (_["text-color"] = ["rgba"].concat(m.textColor.toArray())),
                  i.push(_);
              }
            }
            return i;
          });
        var Ai = function (i) {
          (this.name = i.name), (this.available = i.available);
        };
        function Il(i, s, c, m) {
          return typeof i == "number" &&
            i >= 0 &&
            i <= 255 &&
            typeof s == "number" &&
            s >= 0 &&
            s <= 255 &&
            typeof c == "number" &&
            c >= 0 &&
            c <= 255
            ? m === void 0 || (typeof m == "number" && m >= 0 && m <= 1)
              ? null
              : "Invalid rgba value [" +
                [i, s, c, m].join(", ") +
                "]: 'a' must be between 0 and 1."
            : "Invalid rgba value [" +
                (typeof m == "number" ? [i, s, c, m] : [i, s, c]).join(", ") +
                "]: 'r', 'g', and 'b' must be between 0 and 255.";
        }
        function ns(i) {
          if (
            i === null ||
            typeof i == "string" ||
            typeof i == "boolean" ||
            typeof i == "number" ||
            i instanceof br ||
            i instanceof ja ||
            i instanceof ki ||
            i instanceof Ai
          )
            return !0;
          if (Array.isArray(i)) {
            for (var s = 0, c = i; s < c.length; s += 1)
              if (!ns(c[s])) return !1;
            return !0;
          }
          if (typeof i == "object") {
            for (var m in i) if (!ns(i[m])) return !1;
            return !0;
          }
          return !1;
        }
        function yi(i) {
          if (i === null) return mn;
          if (typeof i == "string") return on;
          if (typeof i == "boolean") return Gt;
          if (typeof i == "number") return pt;
          if (i instanceof br) return qt;
          if (i instanceof ja) return wr;
          if (i instanceof ki) return ti;
          if (i instanceof Ai) return xr;
          if (Array.isArray(i)) {
            for (var s, c = i.length, m = 0, _ = i; m < _.length; m += 1) {
              var y = yi(_[m]);
              if (s) {
                if (s === y) continue;
                s = nn;
                break;
              }
              s = y;
            }
            return Or(s || nn, c);
          }
          return or;
        }
        function ul(i) {
          var s = typeof i;
          return i === null
            ? ""
            : s === "string" || s === "number" || s === "boolean"
            ? String(i)
            : i instanceof br || i instanceof ki || i instanceof Ai
            ? i.toString()
            : JSON.stringify(i);
        }
        (Ai.prototype.toString = function () {
          return this.name;
        }),
          (Ai.fromString = function (i) {
            return i ? new Ai({ name: i, available: !1 }) : null;
          }),
          (Ai.prototype.serialize = function () {
            return ["image", this.name];
          });
        var va = function (i, s) {
          (this.type = i), (this.value = s);
        };
        (va.parse = function (i, s) {
          if (i.length !== 2)
            return s.error(
              "'literal' expression requires exactly one argument, but found " +
                (i.length - 1) +
                " instead."
            );
          if (!ns(i[1])) return s.error("invalid value");
          var c = i[1],
            m = yi(c),
            _ = s.expectedType;
          return (
            m.kind !== "array" ||
              m.N !== 0 ||
              !_ ||
              _.kind !== "array" ||
              (typeof _.N == "number" && _.N !== 0) ||
              (m = _),
            new va(m, c)
          );
        }),
          (va.prototype.evaluate = function () {
            return this.value;
          }),
          (va.prototype.eachChild = function () {}),
          (va.prototype.outputDefined = function () {
            return !0;
          }),
          (va.prototype.serialize = function () {
            return this.type.kind === "array" || this.type.kind === "object"
              ? ["literal", this.value]
              : this.value instanceof br
              ? ["rgba"].concat(this.value.toArray())
              : this.value instanceof ki
              ? this.value.serialize()
              : this.value;
          });
        var xi = function (i) {
          (this.name = "ExpressionEvaluationError"), (this.message = i);
        };
        xi.prototype.toJSON = function () {
          return this.message;
        };
        var Gi = { string: on, number: pt, boolean: Gt, object: or },
          hi = function (i, s) {
            (this.type = i), (this.args = s);
          };
        (hi.parse = function (i, s) {
          if (i.length < 2) return s.error("Expected at least one argument.");
          var c,
            m = 1,
            _ = i[0];
          if (_ === "array") {
            var y, A;
            if (i.length > 2) {
              var C = i[1];
              if (typeof C != "string" || !(C in Gi) || C === "object")
                return s.error(
                  'The item type argument of "array" must be one of string, number, boolean',
                  1
                );
              (y = Gi[C]), m++;
            } else y = nn;
            if (i.length > 3) {
              if (
                i[2] !== null &&
                (typeof i[2] != "number" ||
                  i[2] < 0 ||
                  i[2] !== Math.floor(i[2]))
              )
                return s.error(
                  'The length argument to "array" must be a positive integer literal',
                  2
                );
              (A = i[2]), m++;
            }
            c = Or(y, A);
          } else c = Gi[_];
          for (var P = []; m < i.length; m++) {
            var O = s.parse(i[m], m, nn);
            if (!O) return null;
            P.push(O);
          }
          return new hi(c, P);
        }),
          (hi.prototype.evaluate = function (i) {
            for (var s = 0; s < this.args.length; s++) {
              var c = this.args[s].evaluate(i);
              if (!Rr(this.type, yi(c))) return c;
              if (s === this.args.length - 1)
                throw new xi(
                  "Expected value to be of type " +
                    sr(this.type) +
                    ", but found " +
                    sr(yi(c)) +
                    " instead."
                );
            }
            return null;
          }),
          (hi.prototype.eachChild = function (i) {
            this.args.forEach(i);
          }),
          (hi.prototype.outputDefined = function () {
            return this.args.every(function (i) {
              return i.outputDefined();
            });
          }),
          (hi.prototype.serialize = function () {
            var i = this.type,
              s = [i.kind];
            if (i.kind === "array") {
              var c = i.itemType;
              if (
                c.kind === "string" ||
                c.kind === "number" ||
                c.kind === "boolean"
              ) {
                s.push(c.kind);
                var m = i.N;
                (typeof m == "number" || this.args.length > 1) && s.push(m);
              }
            }
            return s.concat(
              this.args.map(function (_) {
                return _.serialize();
              })
            );
          });
        var lo = function (i) {
          (this.type = ti), (this.sections = i);
        };
        (lo.parse = function (i, s) {
          if (i.length < 2) return s.error("Expected at least one argument.");
          var c = i[1];
          if (!Array.isArray(c) && typeof c == "object")
            return s.error("First argument must be an image or text section.");
          for (var m = [], _ = !1, y = 1; y <= i.length - 1; ++y) {
            var A = i[y];
            if (_ && typeof A == "object" && !Array.isArray(A)) {
              _ = !1;
              var C = null;
              if (A["font-scale"] && !(C = s.parse(A["font-scale"], 1, pt)))
                return null;
              var P = null;
              if (A["text-font"] && !(P = s.parse(A["text-font"], 1, Or(on))))
                return null;
              var O = null;
              if (A["text-color"] && !(O = s.parse(A["text-color"], 1, qt)))
                return null;
              var k = m[m.length - 1];
              (k.scale = C), (k.font = P), (k.textColor = O);
            } else {
              var U = s.parse(i[y], 1, nn);
              if (!U) return null;
              var W = U.type.kind;
              if (
                W !== "string" &&
                W !== "value" &&
                W !== "null" &&
                W !== "resolvedImage"
              )
                return s.error(
                  "Formatted text type must be 'string', 'value', 'image' or 'null'."
                );
              (_ = !0),
                m.push({
                  content: U,
                  scale: null,
                  font: null,
                  textColor: null,
                });
            }
          }
          return new lo(m);
        }),
          (lo.prototype.evaluate = function (i) {
            return new ki(
              this.sections.map(function (s) {
                var c = s.content.evaluate(i);
                return yi(c) === xr
                  ? new Rl("", c, null, null, null)
                  : new Rl(
                      ul(c),
                      null,
                      s.scale ? s.scale.evaluate(i) : null,
                      s.font ? s.font.evaluate(i).join(",") : null,
                      s.textColor ? s.textColor.evaluate(i) : null
                    );
              })
            );
          }),
          (lo.prototype.eachChild = function (i) {
            for (var s = 0, c = this.sections; s < c.length; s += 1) {
              var m = c[s];
              i(m.content),
                m.scale && i(m.scale),
                m.font && i(m.font),
                m.textColor && i(m.textColor);
            }
          }),
          (lo.prototype.outputDefined = function () {
            return !1;
          }),
          (lo.prototype.serialize = function () {
            for (
              var i = ["format"], s = 0, c = this.sections;
              s < c.length;
              s += 1
            ) {
              var m = c[s];
              i.push(m.content.serialize());
              var _ = {};
              m.scale && (_["font-scale"] = m.scale.serialize()),
                m.font && (_["text-font"] = m.font.serialize()),
                m.textColor && (_["text-color"] = m.textColor.serialize()),
                i.push(_);
            }
            return i;
          });
        var Qa = function (i) {
          (this.type = xr), (this.input = i);
        };
        (Qa.parse = function (i, s) {
          if (i.length !== 2) return s.error("Expected two arguments.");
          var c = s.parse(i[1], 1, on);
          return c ? new Qa(c) : s.error("No image name provided.");
        }),
          (Qa.prototype.evaluate = function (i) {
            var s = this.input.evaluate(i),
              c = Ai.fromString(s);
            return (
              c &&
                i.availableImages &&
                (c.available = i.availableImages.indexOf(s) > -1),
              c
            );
          }),
          (Qa.prototype.eachChild = function (i) {
            i(this.input);
          }),
          (Qa.prototype.outputDefined = function () {
            return !1;
          }),
          (Qa.prototype.serialize = function () {
            return ["image", this.input.serialize()];
          });
        var Au = {
            "to-boolean": Gt,
            "to-color": qt,
            "to-number": pt,
            "to-string": on,
          },
          Po = function (i, s) {
            (this.type = i), (this.args = s);
          };
        (Po.parse = function (i, s) {
          if (i.length < 2) return s.error("Expected at least one argument.");
          var c = i[0];
          if ((c === "to-boolean" || c === "to-string") && i.length !== 2)
            return s.error("Expected one argument.");
          for (var m = Au[c], _ = [], y = 1; y < i.length; y++) {
            var A = s.parse(i[y], y, nn);
            if (!A) return null;
            _.push(A);
          }
          return new Po(m, _);
        }),
          (Po.prototype.evaluate = function (i) {
            if (this.type.kind === "boolean") return !!this.args[0].evaluate(i);
            if (this.type.kind === "color") {
              for (var s, c, m = 0, _ = this.args; m < _.length; m += 1) {
                if (((c = null), (s = _[m].evaluate(i)) instanceof br))
                  return s;
                if (typeof s == "string") {
                  var y = i.parseColor(s);
                  if (y) return y;
                } else if (
                  Array.isArray(s) &&
                  !(c =
                    s.length < 3 || s.length > 4
                      ? "Invalid rbga value " +
                        JSON.stringify(s) +
                        ": expected an array containing either three or four numeric values."
                      : Il(s[0], s[1], s[2], s[3]))
                )
                  return new br(s[0] / 255, s[1] / 255, s[2] / 255, s[3]);
              }
              throw new xi(
                c ||
                  "Could not parse color from value '" +
                    (typeof s == "string" ? s : String(JSON.stringify(s))) +
                    "'"
              );
            }
            if (this.type.kind === "number") {
              for (var A = null, C = 0, P = this.args; C < P.length; C += 1) {
                if ((A = P[C].evaluate(i)) === null) return 0;
                var O = Number(A);
                if (!isNaN(O)) return O;
              }
              throw new xi(
                "Could not convert " + JSON.stringify(A) + " to number."
              );
            }
            return this.type.kind === "formatted"
              ? ki.fromString(ul(this.args[0].evaluate(i)))
              : this.type.kind === "resolvedImage"
              ? Ai.fromString(ul(this.args[0].evaluate(i)))
              : ul(this.args[0].evaluate(i));
          }),
          (Po.prototype.eachChild = function (i) {
            this.args.forEach(i);
          }),
          (Po.prototype.outputDefined = function () {
            return this.args.every(function (i) {
              return i.outputDefined();
            });
          }),
          (Po.prototype.serialize = function () {
            if (this.type.kind === "formatted")
              return new lo([
                {
                  content: this.args[0],
                  scale: null,
                  font: null,
                  textColor: null,
                },
              ]).serialize();
            if (this.type.kind === "resolvedImage")
              return new Qa(this.args[0]).serialize();
            var i = ["to-" + this.type.kind];
            return (
              this.eachChild(function (s) {
                i.push(s.serialize());
              }),
              i
            );
          });
        var l0 = ["Unknown", "Point", "LineString", "Polygon"],
          Y = function () {
            (this.globals = null),
              (this.feature = null),
              (this.featureState = null),
              (this.formattedSection = null),
              (this._parseColorCache = {}),
              (this.availableImages = null),
              (this.canonical = null);
          };
        (Y.prototype.id = function () {
          return this.feature && "id" in this.feature ? this.feature.id : null;
        }),
          (Y.prototype.geometryType = function () {
            return this.feature
              ? typeof this.feature.type == "number"
                ? l0[this.feature.type]
                : this.feature.type
              : null;
          }),
          (Y.prototype.geometry = function () {
            return this.feature && "geometry" in this.feature
              ? this.feature.geometry
              : null;
          }),
          (Y.prototype.canonicalID = function () {
            return this.canonical;
          }),
          (Y.prototype.properties = function () {
            return (this.feature && this.feature.properties) || {};
          }),
          (Y.prototype.parseColor = function (i) {
            var s = this._parseColorCache[i];
            return s || (s = this._parseColorCache[i] = br.parse(i)), s;
          });
        var ie = function (i, s, c, m) {
          (this.name = i),
            (this.type = s),
            (this._evaluate = c),
            (this.args = m);
        };
        (ie.prototype.evaluate = function (i) {
          return this._evaluate(i, this.args);
        }),
          (ie.prototype.eachChild = function (i) {
            this.args.forEach(i);
          }),
          (ie.prototype.outputDefined = function () {
            return !1;
          }),
          (ie.prototype.serialize = function () {
            return [this.name].concat(
              this.args.map(function (i) {
                return i.serialize();
              })
            );
          }),
          (ie.parse = function (i, s) {
            var c,
              m = i[0],
              _ = ie.definitions[m];
            if (!_)
              return s.error(
                'Unknown expression "' +
                  m +
                  '". If you wanted a literal array, use ["literal", [...]].',
                0
              );
            for (
              var y = Array.isArray(_) ? _[0] : _.type,
                A = Array.isArray(_) ? [[_[1], _[2]]] : _.overloads,
                C = A.filter(function (Un) {
                  var fn = Un[0];
                  return !Array.isArray(fn) || fn.length === i.length - 1;
                }),
                P = null,
                O = 0,
                k = C;
              O < k.length;
              O += 1
            ) {
              var U = k[O],
                W = U[0],
                $ = U[1];
              P = new dl(s.registry, s.path, null, s.scope);
              for (var he = [], me = !1, Ie = 1; Ie < i.length; Ie++) {
                var Te = i[Ie],
                  je = Array.isArray(W) ? W[Ie - 1] : W.type,
                  Ze = P.parse(Te, 1 + he.length, je);
                if (!Ze) {
                  me = !0;
                  break;
                }
                he.push(Ze);
              }
              if (!me)
                if (Array.isArray(W) && W.length !== he.length)
                  P.error(
                    "Expected " +
                      W.length +
                      " arguments, but found " +
                      he.length +
                      " instead."
                  );
                else {
                  for (var at = 0; at < he.length; at++) {
                    var lt = Array.isArray(W) ? W[at] : W.type,
                      yt = he[at];
                    P.concat(at + 1).checkSubtype(lt, yt.type);
                  }
                  if (P.errors.length === 0) return new ie(m, y, $, he);
                }
            }
            if (C.length === 1) (c = s.errors).push.apply(c, P.errors);
            else {
              for (
                var zt = (C.length ? C : A)
                    .map(function (Un) {
                      var fn;
                      return (
                        (fn = Un[0]),
                        Array.isArray(fn)
                          ? "(" + fn.map(sr).join(", ") + ")"
                          : "(" + sr(fn.type) + "...)"
                      );
                    })
                    .join(" | "),
                  Qt = [],
                  Mn = 1;
                Mn < i.length;
                Mn++
              ) {
                var dn = s.parse(i[Mn], 1 + Qt.length);
                if (!dn) return null;
                Qt.push(sr(dn.type));
              }
              s.error(
                "Expected arguments of type " +
                  zt +
                  ", but found (" +
                  Qt.join(", ") +
                  ") instead."
              );
            }
            return null;
          }),
          (ie.register = function (i, s) {
            for (var c in ((ie.definitions = s), s)) i[c] = ie;
          });
        var Re = function (i, s, c) {
          (this.type = wr),
            (this.locale = c),
            (this.caseSensitive = i),
            (this.diacriticSensitive = s);
        };
        function rt(i, s) {
          (i[0] = Math.min(i[0], s[0])),
            (i[1] = Math.min(i[1], s[1])),
            (i[2] = Math.max(i[2], s[0])),
            (i[3] = Math.max(i[3], s[1]));
        }
        function Vt(i, s) {
          return !(
            i[0] <= s[0] ||
            i[2] >= s[2] ||
            i[1] <= s[1] ||
            i[3] >= s[3]
          );
        }
        function Nn(i, s) {
          var c = (180 + i[0]) / 360,
            m =
              (180 -
                (180 / Math.PI) *
                  Math.log(Math.tan(Math.PI / 4 + (i[1] * Math.PI) / 360))) /
              360,
            _ = Math.pow(2, s.z);
          return [Math.round(c * _ * 8192), Math.round(m * _ * 8192)];
        }
        function Br(i, s, c) {
          return (
            s[1] > i[1] != c[1] > i[1] &&
            i[0] < ((c[0] - s[0]) * (i[1] - s[1])) / (c[1] - s[1]) + s[0]
          );
        }
        function Ki(i, s) {
          for (var c, m, _, y, A, C, P, O = !1, k = 0, U = s.length; k < U; k++)
            for (var W = s[k], $ = 0, he = W.length; $ < he - 1; $++) {
              if (
                (y = (c = i)[0] - (m = W[$])[0]) *
                  (P = c[1] - (_ = W[$ + 1])[1]) -
                  (C = c[0] - _[0]) * (A = c[1] - m[1]) ==
                  0 &&
                y * C <= 0 &&
                A * P <= 0
              )
                return !1;
              Br(i, W[$], W[$ + 1]) && (O = !O);
            }
          return O;
        }
        function La(i, s) {
          for (var c = 0; c < s.length; c++) if (Ki(i, s[c])) return !0;
          return !1;
        }
        function _a(i, s, c, m) {
          var _ = m[0] - c[0],
            y = m[1] - c[1],
            A = (i[0] - c[0]) * y - _ * (i[1] - c[1]),
            C = (s[0] - c[0]) * y - _ * (s[1] - c[1]);
          return (A > 0 && C < 0) || (A < 0 && C > 0);
        }
        function rs(i, s, c) {
          for (var m = 0, _ = c; m < _.length; m += 1)
            for (var y = _[m], A = 0; A < y.length - 1; ++A)
              if (
                (U = [(k = y[A + 1])[0] - (O = y[A])[0], k[1] - O[1]])[0] *
                  (W = [(P = s)[0] - (C = i)[0], P[1] - C[1]])[1] -
                  U[1] * W[0] !=
                  0 &&
                _a(C, P, O, k) &&
                _a(O, k, C, P)
              )
                return !0;
          var C, P, O, k, U, W;
          return !1;
        }
        function dh(i, s) {
          for (var c = 0; c < i.length; ++c) if (!Ki(i[c], s)) return !1;
          for (var m = 0; m < i.length - 1; ++m)
            if (rs(i[m], i[m + 1], s)) return !1;
          return !0;
        }
        function hh(i, s) {
          for (var c = 0; c < s.length; c++) if (dh(i, s[c])) return !0;
          return !1;
        }
        function Wc(i, s, c) {
          for (var m = [], _ = 0; _ < i.length; _++) {
            for (var y = [], A = 0; A < i[_].length; A++) {
              var C = Nn(i[_][A], c);
              rt(s, C), y.push(C);
            }
            m.push(y);
          }
          return m;
        }
        function c0(i, s, c) {
          for (var m = [], _ = 0; _ < i.length; _++) {
            var y = Wc(i[_], s, c);
            m.push(y);
          }
          return m;
        }
        function Tu(i, s, c, m) {
          if (i[0] < c[0] || i[0] > c[2]) {
            var _ = 0.5 * m,
              y = i[0] - c[0] > _ ? -m : c[0] - i[0] > _ ? m : 0;
            y === 0 && (y = i[0] - c[2] > _ ? -m : c[2] - i[0] > _ ? m : 0),
              (i[0] += y);
          }
          rt(s, i);
        }
        function ph(i, s, c, m) {
          for (
            var _ = 8192 * Math.pow(2, m.z),
              y = [8192 * m.x, 8192 * m.y],
              A = [],
              C = 0,
              P = i;
            C < P.length;
            C += 1
          )
            for (var O = 0, k = P[C]; O < k.length; O += 1) {
              var U = k[O],
                W = [U.x + y[0], U.y + y[1]];
              Tu(W, s, c, _), A.push(W);
            }
          return A;
        }
        function sd(i, s, c, m) {
          for (
            var _,
              y = 8192 * Math.pow(2, m.z),
              A = [8192 * m.x, 8192 * m.y],
              C = [],
              P = 0,
              O = i;
            P < O.length;
            P += 1
          ) {
            for (var k = [], U = 0, W = O[P]; U < W.length; U += 1) {
              var $ = W[U],
                he = [$.x + A[0], $.y + A[1]];
              rt(s, he), k.push(he);
            }
            C.push(k);
          }
          if (s[2] - s[0] <= y / 2) {
            ((_ = s)[0] = _[1] = 1 / 0), (_[2] = _[3] = -1 / 0);
            for (var me = 0, Ie = C; me < Ie.length; me += 1)
              for (var Te = 0, je = Ie[me]; Te < je.length; Te += 1)
                Tu(je[Te], s, c, y);
          }
          return C;
        }
        (Re.parse = function (i, s) {
          if (i.length !== 2) return s.error("Expected one argument.");
          var c = i[1];
          if (typeof c != "object" || Array.isArray(c))
            return s.error("Collator options argument must be an object.");
          var m = s.parse(
            c["case-sensitive"] !== void 0 && c["case-sensitive"],
            1,
            Gt
          );
          if (!m) return null;
          var _ = s.parse(
            c["diacritic-sensitive"] !== void 0 && c["diacritic-sensitive"],
            1,
            Gt
          );
          if (!_) return null;
          var y = null;
          return c.locale && !(y = s.parse(c.locale, 1, on))
            ? null
            : new Re(m, _, y);
        }),
          (Re.prototype.evaluate = function (i) {
            return new ja(
              this.caseSensitive.evaluate(i),
              this.diacriticSensitive.evaluate(i),
              this.locale ? this.locale.evaluate(i) : null
            );
          }),
          (Re.prototype.eachChild = function (i) {
            i(this.caseSensitive),
              i(this.diacriticSensitive),
              this.locale && i(this.locale);
          }),
          (Re.prototype.outputDefined = function () {
            return !1;
          }),
          (Re.prototype.serialize = function () {
            var i = {};
            return (
              (i["case-sensitive"] = this.caseSensitive.serialize()),
              (i["diacritic-sensitive"] = this.diacriticSensitive.serialize()),
              this.locale && (i.locale = this.locale.serialize()),
              ["collator", i]
            );
          });
        var Wa = function (i, s) {
          (this.type = Gt), (this.geojson = i), (this.geometries = s);
        };
        function Ml(i) {
          if (
            (i instanceof ie &&
              ((i.name === "get" && i.args.length === 1) ||
                i.name === "feature-state" ||
                (i.name === "has" && i.args.length === 1) ||
                i.name === "properties" ||
                i.name === "geometry-type" ||
                i.name === "id" ||
                /^filter-/.test(i.name))) ||
            i instanceof Wa
          )
            return !1;
          var s = !0;
          return (
            i.eachChild(function (c) {
              s && !Ml(c) && (s = !1);
            }),
            s
          );
        }
        function Pl(i) {
          if (i instanceof ie && i.name === "feature-state") return !1;
          var s = !0;
          return (
            i.eachChild(function (c) {
              s && !Pl(c) && (s = !1);
            }),
            s
          );
        }
        function Ds(i, s) {
          if (i instanceof ie && s.indexOf(i.name) >= 0) return !1;
          var c = !0;
          return (
            i.eachChild(function (m) {
              c && !Ds(m, s) && (c = !1);
            }),
            c
          );
        }
        (Wa.parse = function (i, s) {
          if (i.length !== 2)
            return s.error(
              "'within' expression requires exactly one argument, but found " +
                (i.length - 1) +
                " instead."
            );
          if (ns(i[1])) {
            var c = i[1];
            if (c.type === "FeatureCollection")
              for (var m = 0; m < c.features.length; ++m) {
                var _ = c.features[m].geometry.type;
                if (_ === "Polygon" || _ === "MultiPolygon")
                  return new Wa(c, c.features[m].geometry);
              }
            else if (c.type === "Feature") {
              var y = c.geometry.type;
              if (y === "Polygon" || y === "MultiPolygon")
                return new Wa(c, c.geometry);
            } else if (c.type === "Polygon" || c.type === "MultiPolygon")
              return new Wa(c, c);
          }
          return s.error(
            "'within' expression requires valid geojson object that contains polygon geometry type."
          );
        }),
          (Wa.prototype.evaluate = function (i) {
            if (i.geometry() != null && i.canonicalID() != null) {
              if (i.geometryType() === "Point")
                return (function (s, c) {
                  var m = [1 / 0, 1 / 0, -1 / 0, -1 / 0],
                    _ = [1 / 0, 1 / 0, -1 / 0, -1 / 0],
                    y = s.canonicalID();
                  if (c.type === "Polygon") {
                    var A = Wc(c.coordinates, _, y),
                      C = ph(s.geometry(), m, _, y);
                    if (!Vt(m, _)) return !1;
                    for (var P = 0, O = C; P < O.length; P += 1)
                      if (!Ki(O[P], A)) return !1;
                  }
                  if (c.type === "MultiPolygon") {
                    var k = c0(c.coordinates, _, y),
                      U = ph(s.geometry(), m, _, y);
                    if (!Vt(m, _)) return !1;
                    for (var W = 0, $ = U; W < $.length; W += 1)
                      if (!La($[W], k)) return !1;
                  }
                  return !0;
                })(i, this.geometries);
              if (i.geometryType() === "LineString")
                return (function (s, c) {
                  var m = [1 / 0, 1 / 0, -1 / 0, -1 / 0],
                    _ = [1 / 0, 1 / 0, -1 / 0, -1 / 0],
                    y = s.canonicalID();
                  if (c.type === "Polygon") {
                    var A = Wc(c.coordinates, _, y),
                      C = sd(s.geometry(), m, _, y);
                    if (!Vt(m, _)) return !1;
                    for (var P = 0, O = C; P < O.length; P += 1)
                      if (!dh(O[P], A)) return !1;
                  }
                  if (c.type === "MultiPolygon") {
                    var k = c0(c.coordinates, _, y),
                      U = sd(s.geometry(), m, _, y);
                    if (!Vt(m, _)) return !1;
                    for (var W = 0, $ = U; W < $.length; W += 1)
                      if (!hh($[W], k)) return !1;
                  }
                  return !0;
                })(i, this.geometries);
            }
            return !1;
          }),
          (Wa.prototype.eachChild = function () {}),
          (Wa.prototype.outputDefined = function () {
            return !0;
          }),
          (Wa.prototype.serialize = function () {
            return ["within", this.geojson];
          });
        var Bs = function (i, s) {
          (this.type = s.type), (this.name = i), (this.boundExpression = s);
        };
        (Bs.parse = function (i, s) {
          if (i.length !== 2 || typeof i[1] != "string")
            return s.error(
              "'var' expression requires exactly one string literal argument."
            );
          var c = i[1];
          return s.scope.has(c)
            ? new Bs(c, s.scope.get(c))
            : s.error(
                'Unknown variable "' +
                  c +
                  '". Make sure "' +
                  c +
                  '" has been bound in an enclosing "let" expression before using it.',
                1
              );
        }),
          (Bs.prototype.evaluate = function (i) {
            return this.boundExpression.evaluate(i);
          }),
          (Bs.prototype.eachChild = function () {}),
          (Bs.prototype.outputDefined = function () {
            return !1;
          }),
          (Bs.prototype.serialize = function () {
            return ["var", this.name];
          });
        var dl = function (i, s, c, m, _) {
          s === void 0 && (s = []),
            m === void 0 && (m = new yn()),
            _ === void 0 && (_ = []),
            (this.registry = i),
            (this.path = s),
            (this.key = s
              .map(function (y) {
                return "[" + y + "]";
              })
              .join("")),
            (this.scope = m),
            (this.errors = _),
            (this.expectedType = c);
        };
        function Su(i, s) {
          for (var c, m = i.length - 1, _ = 0, y = m, A = 0; _ <= y; )
            if ((c = i[(A = Math.floor((_ + y) / 2))]) <= s) {
              if (A === m || s < i[A + 1]) return A;
              _ = A + 1;
            } else {
              if (!(c > s)) throw new xi("Input is not a number.");
              y = A - 1;
            }
          return 0;
        }
        (dl.prototype.parse = function (i, s, c, m, _) {
          return (
            _ === void 0 && (_ = {}),
            s ? this.concat(s, c, m)._parse(i, _) : this._parse(i, _)
          );
        }),
          (dl.prototype._parse = function (i, s) {
            function c(O, k, U) {
              return U === "assert"
                ? new hi(k, [O])
                : U === "coerce"
                ? new Po(k, [O])
                : O;
            }
            if (
              ((i !== null &&
                typeof i != "string" &&
                typeof i != "boolean" &&
                typeof i != "number") ||
                (i = ["literal", i]),
              Array.isArray(i))
            ) {
              if (i.length === 0)
                return this.error(
                  'Expected an array with at least one element. If you wanted a literal array, use ["literal", []].'
                );
              var m = i[0];
              if (typeof m != "string")
                return (
                  this.error(
                    "Expression name must be a string, but found " +
                      typeof m +
                      ' instead. If you wanted a literal array, use ["literal", [...]].',
                    0
                  ),
                  null
                );
              var _ = this.registry[m];
              if (_) {
                var y = _.parse(i, this);
                if (!y) return null;
                if (this.expectedType) {
                  var A = this.expectedType,
                    C = y.type;
                  if (
                    (A.kind !== "string" &&
                      A.kind !== "number" &&
                      A.kind !== "boolean" &&
                      A.kind !== "object" &&
                      A.kind !== "array") ||
                    C.kind !== "value"
                  )
                    if (
                      (A.kind !== "color" &&
                        A.kind !== "formatted" &&
                        A.kind !== "resolvedImage") ||
                      (C.kind !== "value" && C.kind !== "string")
                    ) {
                      if (this.checkSubtype(A, C)) return null;
                    } else y = c(y, A, s.typeAnnotation || "coerce");
                  else y = c(y, A, s.typeAnnotation || "assert");
                }
                if (
                  !(y instanceof va) &&
                  y.type.kind !== "resolvedImage" &&
                  (function O(k) {
                    if (k instanceof Bs) return O(k.boundExpression);
                    if (
                      (k instanceof ie && k.name === "error") ||
                      k instanceof Re ||
                      k instanceof Wa
                    )
                      return !1;
                    var U = k instanceof Po || k instanceof hi,
                      W = !0;
                    return (
                      k.eachChild(function ($) {
                        W = U ? W && O($) : W && $ instanceof va;
                      }),
                      !!W &&
                        Ml(k) &&
                        Ds(k, [
                          "zoom",
                          "heatmap-density",
                          "line-progress",
                          "accumulated",
                          "is-supported-script",
                        ])
                    );
                  })(y)
                ) {
                  var P = new Y();
                  try {
                    y = new va(y.type, y.evaluate(P));
                  } catch (O) {
                    return this.error(O.message), null;
                  }
                }
                return y;
              }
              return this.error(
                'Unknown expression "' +
                  m +
                  '". If you wanted a literal array, use ["literal", [...]].',
                0
              );
            }
            return this.error(
              i === void 0
                ? "'undefined' value invalid. Use null instead."
                : typeof i == "object"
                ? 'Bare objects invalid. Use ["literal", {...}] instead.'
                : "Expected an array, but found " + typeof i + " instead."
            );
          }),
          (dl.prototype.concat = function (i, s, c) {
            var m = typeof i == "number" ? this.path.concat(i) : this.path,
              _ = c ? this.scope.concat(c) : this.scope;
            return new dl(this.registry, m, s || null, _, this.errors);
          }),
          (dl.prototype.error = function (i) {
            for (var s = [], c = arguments.length - 1; c-- > 0; )
              s[c] = arguments[c + 1];
            var m =
              "" +
              this.key +
              s
                .map(function (_) {
                  return "[" + _ + "]";
                })
                .join("");
            this.errors.push(new Nt(m, i));
          }),
          (dl.prototype.checkSubtype = function (i, s) {
            var c = Rr(i, s);
            return c && this.error(c), c;
          });
        var Oo = function (i, s, c) {
          (this.type = i),
            (this.input = s),
            (this.labels = []),
            (this.outputs = []);
          for (var m = 0, _ = c; m < _.length; m += 1) {
            var y = _[m],
              A = y[1];
            this.labels.push(y[0]), this.outputs.push(A);
          }
        };
        function Ui(i, s, c) {
          return i * (1 - c) + s * c;
        }
        (Oo.parse = function (i, s) {
          if (i.length - 1 < 4)
            return s.error(
              "Expected at least 4 arguments, but found only " +
                (i.length - 1) +
                "."
            );
          if ((i.length - 1) % 2 != 0)
            return s.error("Expected an even number of arguments.");
          var c = s.parse(i[1], 1, pt);
          if (!c) return null;
          var m = [],
            _ = null;
          s.expectedType &&
            s.expectedType.kind !== "value" &&
            (_ = s.expectedType);
          for (var y = 1; y < i.length; y += 2) {
            var A = y === 1 ? -1 / 0 : i[y],
              C = i[y + 1],
              P = y,
              O = y + 1;
            if (typeof A != "number")
              return s.error(
                'Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',
                P
              );
            if (m.length && m[m.length - 1][0] >= A)
              return s.error(
                'Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',
                P
              );
            var k = s.parse(C, O, _);
            if (!k) return null;
            (_ = _ || k.type), m.push([A, k]);
          }
          return new Oo(_, c, m);
        }),
          (Oo.prototype.evaluate = function (i) {
            var s = this.labels,
              c = this.outputs;
            if (s.length === 1) return c[0].evaluate(i);
            var m = this.input.evaluate(i);
            if (m <= s[0]) return c[0].evaluate(i);
            var _ = s.length;
            return m >= s[_ - 1]
              ? c[_ - 1].evaluate(i)
              : c[Su(s, m)].evaluate(i);
          }),
          (Oo.prototype.eachChild = function (i) {
            i(this.input);
            for (var s = 0, c = this.outputs; s < c.length; s += 1) i(c[s]);
          }),
          (Oo.prototype.outputDefined = function () {
            return this.outputs.every(function (i) {
              return i.outputDefined();
            });
          }),
          (Oo.prototype.serialize = function () {
            for (
              var i = ["step", this.input.serialize()], s = 0;
              s < this.labels.length;
              s++
            )
              s > 0 && i.push(this.labels[s]),
                i.push(this.outputs[s].serialize());
            return i;
          });
        var Ol = Object.freeze({
            __proto__: null,
            number: Ui,
            color: function (i, s, c) {
              return new br(
                Ui(i.r, s.r, c),
                Ui(i.g, s.g, c),
                Ui(i.b, s.b, c),
                Ui(i.a, s.a, c)
              );
            },
            array: function (i, s, c) {
              return i.map(function (m, _) {
                return Ui(m, s[_], c);
              });
            },
          }),
          hl = (6 / 29) * 3 * (6 / 29),
          ld = Math.PI / 180,
          fh = 180 / Math.PI;
        function cd(i) {
          return i > 0.008856451679035631
            ? Math.pow(i, 1 / 3)
            : i / hl + 4 / 29;
        }
        function u0(i) {
          return i > 6 / 29 ? i * i * i : hl * (i - 4 / 29);
        }
        function d0(i) {
          return (
            255 *
            (i <= 0.0031308 ? 12.92 * i : 1.055 * Math.pow(i, 1 / 2.4) - 0.055)
          );
        }
        function h0(i) {
          return (i /= 255) <= 0.04045
            ? i / 12.92
            : Math.pow((i + 0.055) / 1.055, 2.4);
        }
        function mh(i) {
          var s = h0(i.r),
            c = h0(i.g),
            m = h0(i.b),
            _ = cd((0.4124564 * s + 0.3575761 * c + 0.1804375 * m) / 0.95047),
            y = cd((0.2126729 * s + 0.7151522 * c + 0.072175 * m) / 1);
          return {
            l: 116 * y - 16,
            a: 500 * (_ - y),
            b:
              200 *
              (y -
                cd((0.0193339 * s + 0.119192 * c + 0.9503041 * m) / 1.08883)),
            alpha: i.a,
          };
        }
        function gh(i) {
          var s = (i.l + 16) / 116,
            c = isNaN(i.a) ? s : s + i.a / 500,
            m = isNaN(i.b) ? s : s - i.b / 200;
          return (
            (s = 1 * u0(s)),
            (c = 0.95047 * u0(c)),
            (m = 1.08883 * u0(m)),
            new br(
              d0(3.2404542 * c - 1.5371385 * s - 0.4985314 * m),
              d0(-0.969266 * c + 1.8760108 * s + 0.041556 * m),
              d0(0.0556434 * c - 0.2040259 * s + 1.0572252 * m),
              i.alpha
            )
          );
        }
        function jp(i, s, c) {
          var m = s - i;
          return (
            i + c * (m > 180 || m < -180 ? m - 360 * Math.round(m / 360) : m)
          );
        }
        var wu = {
            forward: mh,
            reverse: gh,
            interpolate: function (i, s, c) {
              return {
                l: Ui(i.l, s.l, c),
                a: Ui(i.a, s.a, c),
                b: Ui(i.b, s.b, c),
                alpha: Ui(i.alpha, s.alpha, c),
              };
            },
          },
          Fs = {
            forward: function (i) {
              var s = mh(i),
                c = s.l,
                m = s.a,
                _ = s.b,
                y = Math.atan2(_, m) * fh;
              return {
                h: y < 0 ? y + 360 : y,
                c: Math.sqrt(m * m + _ * _),
                l: c,
                alpha: i.a,
              };
            },
            reverse: function (i) {
              var s = i.h * ld,
                c = i.c;
              return gh({
                l: i.l,
                a: Math.cos(s) * c,
                b: Math.sin(s) * c,
                alpha: i.alpha,
              });
            },
            interpolate: function (i, s, c) {
              return {
                h: jp(i.h, s.h, c),
                c: Ui(i.c, s.c, c),
                l: Ui(i.l, s.l, c),
                alpha: Ui(i.alpha, s.alpha, c),
              };
            },
          },
          vh = Object.freeze({ __proto__: null, lab: wu, hcl: Fs }),
          Xa = function (i, s, c, m, _) {
            (this.type = i),
              (this.operator = s),
              (this.interpolation = c),
              (this.input = m),
              (this.labels = []),
              (this.outputs = []);
            for (var y = 0, A = _; y < A.length; y += 1) {
              var C = A[y],
                P = C[1];
              this.labels.push(C[0]), this.outputs.push(P);
            }
          };
        function vc(i, s, c, m) {
          var _ = m - c,
            y = i - c;
          return _ === 0
            ? 0
            : s === 1
            ? y / _
            : (Math.pow(s, y) - 1) / (Math.pow(s, _) - 1);
        }
        (Xa.interpolationFactor = function (i, s, c, m) {
          var _ = 0;
          if (i.name === "exponential") _ = vc(s, i.base, c, m);
          else if (i.name === "linear") _ = vc(s, 1, c, m);
          else if (i.name === "cubic-bezier") {
            var y = i.controlPoints;
            _ = new f(y[0], y[1], y[2], y[3]).solve(vc(s, 1, c, m));
          }
          return _;
        }),
          (Xa.parse = function (i, s) {
            var c = i[0],
              m = i[1],
              _ = i[2],
              y = i.slice(3);
            if (!Array.isArray(m) || m.length === 0)
              return s.error("Expected an interpolation type expression.", 1);
            if (m[0] === "linear") m = { name: "linear" };
            else if (m[0] === "exponential") {
              var A = m[1];
              if (typeof A != "number")
                return s.error(
                  "Exponential interpolation requires a numeric base.",
                  1,
                  1
                );
              m = { name: "exponential", base: A };
            } else {
              if (m[0] !== "cubic-bezier")
                return s.error(
                  "Unknown interpolation type " + String(m[0]),
                  1,
                  0
                );
              var C = m.slice(1);
              if (
                C.length !== 4 ||
                C.some(function (Ie) {
                  return typeof Ie != "number" || Ie < 0 || Ie > 1;
                })
              )
                return s.error(
                  "Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",
                  1
                );
              m = { name: "cubic-bezier", controlPoints: C };
            }
            if (i.length - 1 < 4)
              return s.error(
                "Expected at least 4 arguments, but found only " +
                  (i.length - 1) +
                  "."
              );
            if ((i.length - 1) % 2 != 0)
              return s.error("Expected an even number of arguments.");
            if (!(_ = s.parse(_, 2, pt))) return null;
            var P = [],
              O = null;
            c === "interpolate-hcl" || c === "interpolate-lab"
              ? (O = qt)
              : s.expectedType &&
                s.expectedType.kind !== "value" &&
                (O = s.expectedType);
            for (var k = 0; k < y.length; k += 2) {
              var U = y[k],
                W = y[k + 1],
                $ = k + 3,
                he = k + 4;
              if (typeof U != "number")
                return s.error(
                  'Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',
                  $
                );
              if (P.length && P[P.length - 1][0] >= U)
                return s.error(
                  'Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',
                  $
                );
              var me = s.parse(W, he, O);
              if (!me) return null;
              (O = O || me.type), P.push([U, me]);
            }
            return O.kind === "number" ||
              O.kind === "color" ||
              (O.kind === "array" &&
                O.itemType.kind === "number" &&
                typeof O.N == "number")
              ? new Xa(O, c, m, _, P)
              : s.error("Type " + sr(O) + " is not interpolatable.");
          }),
          (Xa.prototype.evaluate = function (i) {
            var s = this.labels,
              c = this.outputs;
            if (s.length === 1) return c[0].evaluate(i);
            var m = this.input.evaluate(i);
            if (m <= s[0]) return c[0].evaluate(i);
            var _ = s.length;
            if (m >= s[_ - 1]) return c[_ - 1].evaluate(i);
            var y = Su(s, m),
              A = Xa.interpolationFactor(this.interpolation, m, s[y], s[y + 1]),
              C = c[y].evaluate(i),
              P = c[y + 1].evaluate(i);
            return this.operator === "interpolate"
              ? Ol[this.type.kind.toLowerCase()](C, P, A)
              : this.operator === "interpolate-hcl"
              ? Fs.reverse(Fs.interpolate(Fs.forward(C), Fs.forward(P), A))
              : wu.reverse(wu.interpolate(wu.forward(C), wu.forward(P), A));
          }),
          (Xa.prototype.eachChild = function (i) {
            i(this.input);
            for (var s = 0, c = this.outputs; s < c.length; s += 1) i(c[s]);
          }),
          (Xa.prototype.outputDefined = function () {
            return this.outputs.every(function (i) {
              return i.outputDefined();
            });
          }),
          (Xa.prototype.serialize = function () {
            var i;
            i =
              this.interpolation.name === "linear"
                ? ["linear"]
                : this.interpolation.name === "exponential"
                ? this.interpolation.base === 1
                  ? ["linear"]
                  : ["exponential", this.interpolation.base]
                : ["cubic-bezier"].concat(this.interpolation.controlPoints);
            for (
              var s = [this.operator, i, this.input.serialize()], c = 0;
              c < this.labels.length;
              c++
            )
              s.push(this.labels[c], this.outputs[c].serialize());
            return s;
          });
        var Ll = function (i, s) {
          (this.type = i), (this.args = s);
        };
        (Ll.parse = function (i, s) {
          if (i.length < 2)
            return s.error("Expectected at least one argument.");
          var c = null,
            m = s.expectedType;
          m && m.kind !== "value" && (c = m);
          for (var _ = [], y = 0, A = i.slice(1); y < A.length; y += 1) {
            var C = s.parse(A[y], 1 + _.length, c, void 0, {
              typeAnnotation: "omit",
            });
            if (!C) return null;
            (c = c || C.type), _.push(C);
          }
          var P =
            m &&
            _.some(function (O) {
              return Rr(m, O.type);
            });
          return new Ll(P ? nn : c, _);
        }),
          (Ll.prototype.evaluate = function (i) {
            for (
              var s, c = null, m = 0, _ = 0, y = this.args;
              _ < y.length &&
              (m++,
              (c = y[_].evaluate(i)) &&
                c instanceof Ai &&
                !c.available &&
                (s || (s = c.name),
                (c = null),
                m === this.args.length && (c = s)),
              c === null);
              _ += 1
            );
            return c;
          }),
          (Ll.prototype.eachChild = function (i) {
            this.args.forEach(i);
          }),
          (Ll.prototype.outputDefined = function () {
            return this.args.every(function (i) {
              return i.outputDefined();
            });
          }),
          (Ll.prototype.serialize = function () {
            var i = ["coalesce"];
            return (
              this.eachChild(function (s) {
                i.push(s.serialize());
              }),
              i
            );
          });
        var Xo = function (i, s) {
          (this.type = s.type),
            (this.bindings = [].concat(i)),
            (this.result = s);
        };
        (Xo.prototype.evaluate = function (i) {
          return this.result.evaluate(i);
        }),
          (Xo.prototype.eachChild = function (i) {
            for (var s = 0, c = this.bindings; s < c.length; s += 1) i(c[s][1]);
            i(this.result);
          }),
          (Xo.parse = function (i, s) {
            if (i.length < 4)
              return s.error(
                "Expected at least 3 arguments, but found " +
                  (i.length - 1) +
                  " instead."
              );
            for (var c = [], m = 1; m < i.length - 1; m += 2) {
              var _ = i[m];
              if (typeof _ != "string")
                return s.error(
                  "Expected string, but found " + typeof _ + " instead.",
                  m
                );
              if (/[^a-zA-Z0-9_]/.test(_))
                return s.error(
                  "Variable names must contain only alphanumeric characters or '_'.",
                  m
                );
              var y = s.parse(i[m + 1], m + 1);
              if (!y) return null;
              c.push([_, y]);
            }
            var A = s.parse(i[i.length - 1], i.length - 1, s.expectedType, c);
            return A ? new Xo(c, A) : null;
          }),
          (Xo.prototype.outputDefined = function () {
            return this.result.outputDefined();
          }),
          (Xo.prototype.serialize = function () {
            for (
              var i = ["let"], s = 0, c = this.bindings;
              s < c.length;
              s += 1
            ) {
              var m = c[s];
              i.push(m[0], m[1].serialize());
            }
            return i.push(this.result.serialize()), i;
          });
        var Dl = function (i, s, c) {
          (this.type = i), (this.index = s), (this.input = c);
        };
        (Dl.parse = function (i, s) {
          if (i.length !== 3)
            return s.error(
              "Expected 2 arguments, but found " + (i.length - 1) + " instead."
            );
          var c = s.parse(i[1], 1, pt),
            m = s.parse(i[2], 2, Or(s.expectedType || nn));
          return c && m ? new Dl(m.type.itemType, c, m) : null;
        }),
          (Dl.prototype.evaluate = function (i) {
            var s = this.index.evaluate(i),
              c = this.input.evaluate(i);
            if (s < 0)
              throw new xi("Array index out of bounds: " + s + " < 0.");
            if (s >= c.length)
              throw new xi(
                "Array index out of bounds: " + s + " > " + (c.length - 1) + "."
              );
            if (s !== Math.floor(s))
              throw new xi(
                "Array index must be an integer, but found " + s + " instead."
              );
            return c[s];
          }),
          (Dl.prototype.eachChild = function (i) {
            i(this.index), i(this.input);
          }),
          (Dl.prototype.outputDefined = function () {
            return !1;
          }),
          (Dl.prototype.serialize = function () {
            return ["at", this.index.serialize(), this.input.serialize()];
          });
        var is = function (i, s) {
          (this.type = Gt), (this.needle = i), (this.haystack = s);
        };
        (is.parse = function (i, s) {
          if (i.length !== 3)
            return s.error(
              "Expected 2 arguments, but found " + (i.length - 1) + " instead."
            );
          var c = s.parse(i[1], 1, nn),
            m = s.parse(i[2], 2, nn);
          return c && m
            ? ni(c.type, [Gt, on, pt, mn, nn])
              ? new is(c, m)
              : s.error(
                  "Expected first argument to be of type boolean, string, number or null, but found " +
                    sr(c.type) +
                    " instead"
                )
            : null;
        }),
          (is.prototype.evaluate = function (i) {
            var s = this.needle.evaluate(i),
              c = this.haystack.evaluate(i);
            if (!c) return !1;
            if (!zr(s, ["boolean", "string", "number", "null"]))
              throw new xi(
                "Expected first argument to be of type boolean, string, number or null, but found " +
                  sr(yi(s)) +
                  " instead."
              );
            if (!zr(c, ["string", "array"]))
              throw new xi(
                "Expected second argument to be of type array or string, but found " +
                  sr(yi(c)) +
                  " instead."
              );
            return c.indexOf(s) >= 0;
          }),
          (is.prototype.eachChild = function (i) {
            i(this.needle), i(this.haystack);
          }),
          (is.prototype.outputDefined = function () {
            return !0;
          }),
          (is.prototype.serialize = function () {
            return ["in", this.needle.serialize(), this.haystack.serialize()];
          });
        var pl = function (i, s, c) {
          (this.type = pt),
            (this.needle = i),
            (this.haystack = s),
            (this.fromIndex = c);
        };
        (pl.parse = function (i, s) {
          if (i.length <= 2 || i.length >= 5)
            return s.error(
              "Expected 3 or 4 arguments, but found " +
                (i.length - 1) +
                " instead."
            );
          var c = s.parse(i[1], 1, nn),
            m = s.parse(i[2], 2, nn);
          if (!c || !m) return null;
          if (!ni(c.type, [Gt, on, pt, mn, nn]))
            return s.error(
              "Expected first argument to be of type boolean, string, number or null, but found " +
                sr(c.type) +
                " instead"
            );
          if (i.length === 4) {
            var _ = s.parse(i[3], 3, pt);
            return _ ? new pl(c, m, _) : null;
          }
          return new pl(c, m);
        }),
          (pl.prototype.evaluate = function (i) {
            var s = this.needle.evaluate(i),
              c = this.haystack.evaluate(i);
            if (!zr(s, ["boolean", "string", "number", "null"]))
              throw new xi(
                "Expected first argument to be of type boolean, string, number or null, but found " +
                  sr(yi(s)) +
                  " instead."
              );
            if (!zr(c, ["string", "array"]))
              throw new xi(
                "Expected second argument to be of type array or string, but found " +
                  sr(yi(c)) +
                  " instead."
              );
            if (this.fromIndex) {
              var m = this.fromIndex.evaluate(i);
              return c.indexOf(s, m);
            }
            return c.indexOf(s);
          }),
          (pl.prototype.eachChild = function (i) {
            i(this.needle),
              i(this.haystack),
              this.fromIndex && i(this.fromIndex);
          }),
          (pl.prototype.outputDefined = function () {
            return !1;
          }),
          (pl.prototype.serialize = function () {
            if (this.fromIndex != null && this.fromIndex !== void 0) {
              var i = this.fromIndex.serialize();
              return [
                "index-of",
                this.needle.serialize(),
                this.haystack.serialize(),
                i,
              ];
            }
            return [
              "index-of",
              this.needle.serialize(),
              this.haystack.serialize(),
            ];
          });
        var Go = function (i, s, c, m, _, y) {
          (this.inputType = i),
            (this.type = s),
            (this.input = c),
            (this.cases = m),
            (this.outputs = _),
            (this.otherwise = y);
        };
        (Go.parse = function (i, s) {
          if (i.length < 5)
            return s.error(
              "Expected at least 4 arguments, but found only " +
                (i.length - 1) +
                "."
            );
          if (i.length % 2 != 1)
            return s.error("Expected an even number of arguments.");
          var c, m;
          s.expectedType &&
            s.expectedType.kind !== "value" &&
            (m = s.expectedType);
          for (var _ = {}, y = [], A = 2; A < i.length - 1; A += 2) {
            var C = i[A],
              P = i[A + 1];
            Array.isArray(C) || (C = [C]);
            var O = s.concat(A);
            if (C.length === 0)
              return O.error("Expected at least one branch label.");
            for (var k = 0, U = C; k < U.length; k += 1) {
              var W = U[k];
              if (typeof W != "number" && typeof W != "string")
                return O.error("Branch labels must be numbers or strings.");
              if (typeof W == "number" && Math.abs(W) > Number.MAX_SAFE_INTEGER)
                return O.error(
                  "Branch labels must be integers no larger than " +
                    Number.MAX_SAFE_INTEGER +
                    "."
                );
              if (typeof W == "number" && Math.floor(W) !== W)
                return O.error("Numeric branch labels must be integer values.");
              if (c) {
                if (O.checkSubtype(c, yi(W))) return null;
              } else c = yi(W);
              if (_[String(W)] !== void 0)
                return O.error("Branch labels must be unique.");
              _[String(W)] = y.length;
            }
            var $ = s.parse(P, A, m);
            if (!$) return null;
            (m = m || $.type), y.push($);
          }
          var he = s.parse(i[1], 1, nn);
          if (!he) return null;
          var me = s.parse(i[i.length - 1], i.length - 1, m);
          return me
            ? he.type.kind !== "value" && s.concat(1).checkSubtype(c, he.type)
              ? null
              : new Go(c, m, he, _, y, me)
            : null;
        }),
          (Go.prototype.evaluate = function (i) {
            var s = this.input.evaluate(i);
            return (
              (yi(s) === this.inputType && this.outputs[this.cases[s]]) ||
              this.otherwise
            ).evaluate(i);
          }),
          (Go.prototype.eachChild = function (i) {
            i(this.input), this.outputs.forEach(i), i(this.otherwise);
          }),
          (Go.prototype.outputDefined = function () {
            return (
              this.outputs.every(function (i) {
                return i.outputDefined();
              }) && this.otherwise.outputDefined()
            );
          }),
          (Go.prototype.serialize = function () {
            for (
              var i = this,
                s = ["match", this.input.serialize()],
                c = [],
                m = {},
                _ = 0,
                y = Object.keys(this.cases).sort();
              _ < y.length;
              _ += 1
            ) {
              var A = y[_];
              (U = m[this.cases[A]]) === void 0
                ? ((m[this.cases[A]] = c.length), c.push([this.cases[A], [A]]))
                : c[U][1].push(A);
            }
            for (
              var C = function ($) {
                  return i.inputType.kind === "number" ? Number($) : $;
                },
                P = 0,
                O = c;
              P < O.length;
              P += 1
            ) {
              var k = O[P],
                U = k[0],
                W = k[1];
              s.push(W.length === 1 ? C(W[0]) : W.map(C)),
                s.push(this.outputs[outputIndex$1].serialize());
            }
            return s.push(this.otherwise.serialize()), s;
          });
        var fl = function (i, s, c) {
          (this.type = i), (this.branches = s), (this.otherwise = c);
        };
        (fl.parse = function (i, s) {
          if (i.length < 4)
            return s.error(
              "Expected at least 3 arguments, but found only " +
                (i.length - 1) +
                "."
            );
          if (i.length % 2 != 0)
            return s.error("Expected an odd number of arguments.");
          var c;
          s.expectedType &&
            s.expectedType.kind !== "value" &&
            (c = s.expectedType);
          for (var m = [], _ = 1; _ < i.length - 1; _ += 2) {
            var y = s.parse(i[_], _, Gt);
            if (!y) return null;
            var A = s.parse(i[_ + 1], _ + 1, c);
            if (!A) return null;
            m.push([y, A]), (c = c || A.type);
          }
          var C = s.parse(i[i.length - 1], i.length - 1, c);
          return C ? new fl(c, m, C) : null;
        }),
          (fl.prototype.evaluate = function (i) {
            for (var s = 0, c = this.branches; s < c.length; s += 1) {
              var m = c[s],
                _ = m[1];
              if (m[0].evaluate(i)) return _.evaluate(i);
            }
            return this.otherwise.evaluate(i);
          }),
          (fl.prototype.eachChild = function (i) {
            for (var s = 0, c = this.branches; s < c.length; s += 1) {
              var m = c[s],
                _ = m[1];
              i(m[0]), i(_);
            }
            i(this.otherwise);
          }),
          (fl.prototype.outputDefined = function () {
            return (
              this.branches.every(function (i) {
                return i[1].outputDefined();
              }) && this.otherwise.outputDefined()
            );
          }),
          (fl.prototype.serialize = function () {
            var i = ["case"];
            return (
              this.eachChild(function (s) {
                i.push(s.serialize());
              }),
              i
            );
          });
        var Bl = function (i, s, c, m) {
          (this.type = i),
            (this.input = s),
            (this.beginIndex = c),
            (this.endIndex = m);
        };
        function _h(i, s) {
          return i === "==" || i === "!="
            ? s.kind === "boolean" ||
                s.kind === "string" ||
                s.kind === "number" ||
                s.kind === "null" ||
                s.kind === "value"
            : s.kind === "string" || s.kind === "number" || s.kind === "value";
        }
        function yh(i, s, c, m) {
          return m.compare(s, c) === 0;
        }
        function ii(i, s, c) {
          var m = i !== "==" && i !== "!=";
          return (function () {
            function _(y, A, C) {
              (this.type = Gt),
                (this.lhs = y),
                (this.rhs = A),
                (this.collator = C),
                (this.hasUntypedArgument =
                  y.type.kind === "value" || A.type.kind === "value");
            }
            return (
              (_.parse = function (y, A) {
                if (y.length !== 3 && y.length !== 4)
                  return A.error("Expected two or three arguments.");
                var C = y[0],
                  P = A.parse(y[1], 1, nn);
                if (!P) return null;
                if (!_h(C, P.type))
                  return A.concat(1).error(
                    '"' +
                      C +
                      `" comparisons are not supported for type '` +
                      sr(P.type) +
                      "'."
                  );
                var O = A.parse(y[2], 2, nn);
                if (!O) return null;
                if (!_h(C, O.type))
                  return A.concat(2).error(
                    '"' +
                      C +
                      `" comparisons are not supported for type '` +
                      sr(O.type) +
                      "'."
                  );
                if (
                  P.type.kind !== O.type.kind &&
                  P.type.kind !== "value" &&
                  O.type.kind !== "value"
                )
                  return A.error(
                    "Cannot compare types '" +
                      sr(P.type) +
                      "' and '" +
                      sr(O.type) +
                      "'."
                  );
                m &&
                  (P.type.kind === "value" && O.type.kind !== "value"
                    ? (P = new hi(O.type, [P]))
                    : P.type.kind !== "value" &&
                      O.type.kind === "value" &&
                      (O = new hi(P.type, [O])));
                var k = null;
                if (y.length === 4) {
                  if (
                    P.type.kind !== "string" &&
                    O.type.kind !== "string" &&
                    P.type.kind !== "value" &&
                    O.type.kind !== "value"
                  )
                    return A.error(
                      "Cannot use collator to compare non-string types."
                    );
                  if (!(k = A.parse(y[3], 3, wr))) return null;
                }
                return new _(P, O, k);
              }),
              (_.prototype.evaluate = function (y) {
                var A = this.lhs.evaluate(y),
                  C = this.rhs.evaluate(y);
                if (m && this.hasUntypedArgument) {
                  var P = yi(A),
                    O = yi(C);
                  if (
                    P.kind !== O.kind ||
                    (P.kind !== "string" && P.kind !== "number")
                  )
                    throw new xi(
                      'Expected arguments for "' +
                        i +
                        '" to be (string, string) or (number, number), but found (' +
                        P.kind +
                        ", " +
                        O.kind +
                        ") instead."
                    );
                }
                if (this.collator && !m && this.hasUntypedArgument) {
                  var k = yi(A),
                    U = yi(C);
                  if (k.kind !== "string" || U.kind !== "string")
                    return s(y, A, C);
                }
                return this.collator
                  ? c(y, A, C, this.collator.evaluate(y))
                  : s(y, A, C);
              }),
              (_.prototype.eachChild = function (y) {
                y(this.lhs), y(this.rhs), this.collator && y(this.collator);
              }),
              (_.prototype.outputDefined = function () {
                return !0;
              }),
              (_.prototype.serialize = function () {
                var y = [i];
                return (
                  this.eachChild(function (A) {
                    y.push(A.serialize());
                  }),
                  y
                );
              }),
              _
            );
          })();
        }
        (Bl.parse = function (i, s) {
          if (i.length <= 2 || i.length >= 5)
            return s.error(
              "Expected 3 or 4 arguments, but found " +
                (i.length - 1) +
                " instead."
            );
          var c = s.parse(i[1], 1, nn),
            m = s.parse(i[2], 2, pt);
          if (!c || !m) return null;
          if (!ni(c.type, [Or(nn), on, nn]))
            return s.error(
              "Expected first argument to be of type array or string, but found " +
                sr(c.type) +
                " instead"
            );
          if (i.length === 4) {
            var _ = s.parse(i[3], 3, pt);
            return _ ? new Bl(c.type, c, m, _) : null;
          }
          return new Bl(c.type, c, m);
        }),
          (Bl.prototype.evaluate = function (i) {
            var s = this.input.evaluate(i),
              c = this.beginIndex.evaluate(i);
            if (!zr(s, ["string", "array"]))
              throw new xi(
                "Expected first argument to be of type array or string, but found " +
                  sr(yi(s)) +
                  " instead."
              );
            if (this.endIndex) {
              var m = this.endIndex.evaluate(i);
              return s.slice(c, m);
            }
            return s.slice(c);
          }),
          (Bl.prototype.eachChild = function (i) {
            i(this.input),
              i(this.beginIndex),
              this.endIndex && i(this.endIndex);
          }),
          (Bl.prototype.outputDefined = function () {
            return !1;
          }),
          (Bl.prototype.serialize = function () {
            if (this.endIndex != null && this.endIndex !== void 0) {
              var i = this.endIndex.serialize();
              return [
                "slice",
                this.input.serialize(),
                this.beginIndex.serialize(),
                i,
              ];
            }
            return [
              "slice",
              this.input.serialize(),
              this.beginIndex.serialize(),
            ];
          });
        var Wp = ii(
            "==",
            function (i, s, c) {
              return s === c;
            },
            yh
          ),
          ud = ii(
            "!=",
            function (i, s, c) {
              return s !== c;
            },
            function (i, s, c, m) {
              return !yh(0, s, c, m);
            }
          ),
          p0 = ii(
            "<",
            function (i, s, c) {
              return s < c;
            },
            function (i, s, c, m) {
              return m.compare(s, c) < 0;
            }
          ),
          zi = ii(
            ">",
            function (i, s, c) {
              return s > c;
            },
            function (i, s, c, m) {
              return m.compare(s, c) > 0;
            }
          ),
          f0 = ii(
            "<=",
            function (i, s, c) {
              return s <= c;
            },
            function (i, s, c, m) {
              return m.compare(s, c) <= 0;
            }
          ),
          xh = ii(
            ">=",
            function (i, s, c) {
              return s >= c;
            },
            function (i, s, c, m) {
              return m.compare(s, c) >= 0;
            }
          ),
          xo = function (i, s, c, m, _) {
            (this.type = on),
              (this.number = i),
              (this.locale = s),
              (this.currency = c),
              (this.minFractionDigits = m),
              (this.maxFractionDigits = _);
          };
        (xo.parse = function (i, s) {
          if (i.length !== 3) return s.error("Expected two arguments.");
          var c = s.parse(i[1], 1, pt);
          if (!c) return null;
          var m = i[2];
          if (typeof m != "object" || Array.isArray(m))
            return s.error("NumberFormat options argument must be an object.");
          var _ = null;
          if (m.locale && !(_ = s.parse(m.locale, 1, on))) return null;
          var y = null;
          if (m.currency && !(y = s.parse(m.currency, 1, on))) return null;
          var A = null;
          if (
            m["min-fraction-digits"] &&
            !(A = s.parse(m["min-fraction-digits"], 1, pt))
          )
            return null;
          var C = null;
          return m["max-fraction-digits"] &&
            !(C = s.parse(m["max-fraction-digits"], 1, pt))
            ? null
            : new xo(c, _, y, A, C);
        }),
          (xo.prototype.evaluate = function (i) {
            return new Intl.NumberFormat(
              this.locale ? this.locale.evaluate(i) : [],
              {
                style: this.currency ? "currency" : "decimal",
                currency: this.currency ? this.currency.evaluate(i) : void 0,
                minimumFractionDigits: this.minFractionDigits
                  ? this.minFractionDigits.evaluate(i)
                  : void 0,
                maximumFractionDigits: this.maxFractionDigits
                  ? this.maxFractionDigits.evaluate(i)
                  : void 0,
              }
            ).format(this.number.evaluate(i));
          }),
          (xo.prototype.eachChild = function (i) {
            i(this.number),
              this.locale && i(this.locale),
              this.currency && i(this.currency),
              this.minFractionDigits && i(this.minFractionDigits),
              this.maxFractionDigits && i(this.maxFractionDigits);
          }),
          (xo.prototype.outputDefined = function () {
            return !1;
          }),
          (xo.prototype.serialize = function () {
            var i = {};
            return (
              this.locale && (i.locale = this.locale.serialize()),
              this.currency && (i.currency = this.currency.serialize()),
              this.minFractionDigits &&
                (i["min-fraction-digits"] = this.minFractionDigits.serialize()),
              this.maxFractionDigits &&
                (i["max-fraction-digits"] = this.maxFractionDigits.serialize()),
              ["number-format", this.number.serialize(), i]
            );
          });
        var ml = function (i) {
          (this.type = pt), (this.input = i);
        };
        (ml.parse = function (i, s) {
          if (i.length !== 2)
            return s.error(
              "Expected 1 argument, but found " + (i.length - 1) + " instead."
            );
          var c = s.parse(i[1], 1);
          return c
            ? c.type.kind !== "array" &&
              c.type.kind !== "string" &&
              c.type.kind !== "value"
              ? s.error(
                  "Expected argument of type string or array, but found " +
                    sr(c.type) +
                    " instead."
                )
              : new ml(c)
            : null;
        }),
          (ml.prototype.evaluate = function (i) {
            var s = this.input.evaluate(i);
            if (typeof s == "string" || Array.isArray(s)) return s.length;
            throw new xi(
              "Expected value to be of type string or array, but found " +
                sr(yi(s)) +
                " instead."
            );
          }),
          (ml.prototype.eachChild = function (i) {
            i(this.input);
          }),
          (ml.prototype.outputDefined = function () {
            return !1;
          }),
          (ml.prototype.serialize = function () {
            var i = ["length"];
            return (
              this.eachChild(function (s) {
                i.push(s.serialize());
              }),
              i
            );
          });
        var ks = {
          "==": Wp,
          "!=": ud,
          ">": zi,
          "<": p0,
          ">=": xh,
          "<=": f0,
          array: hi,
          at: Dl,
          boolean: hi,
          case: fl,
          coalesce: Ll,
          collator: Re,
          format: lo,
          image: Qa,
          in: is,
          "index-of": pl,
          interpolate: Xa,
          "interpolate-hcl": Xa,
          "interpolate-lab": Xa,
          length: ml,
          let: Xo,
          literal: va,
          match: Go,
          number: hi,
          "number-format": xo,
          object: hi,
          slice: Bl,
          step: Oo,
          string: hi,
          "to-boolean": Po,
          "to-color": Po,
          "to-number": Po,
          "to-string": Po,
          var: Bs,
          within: Wa,
        };
        function Fl(i, s) {
          var c = s[0],
            m = s[1],
            _ = s[2],
            y = s[3];
          (c = c.evaluate(i)), (m = m.evaluate(i)), (_ = _.evaluate(i));
          var A = y ? y.evaluate(i) : 1,
            C = Il(c, m, _, A);
          if (C) throw new xi(C);
          return new br((c / 255) * A, (m / 255) * A, (_ / 255) * A, A);
        }
        function dd(i, s) {
          return i in s;
        }
        function Xc(i, s) {
          var c = s[i];
          return c === void 0 ? null : c;
        }
        function bs(i) {
          return { type: i };
        }
        function Cu(i) {
          return { result: "success", value: i };
        }
        function kl(i) {
          return { result: "error", value: i };
        }
        function gl(i) {
          return (
            i["property-type"] === "data-driven" ||
            i["property-type"] === "cross-faded-data-driven"
          );
        }
        function m0(i) {
          return !!i.expression && i.expression.parameters.indexOf("zoom") > -1;
        }
        function Nu(i) {
          return !!i.expression && i.expression.interpolated;
        }
        function mi(i) {
          return i instanceof Number
            ? "number"
            : i instanceof String
            ? "string"
            : i instanceof Boolean
            ? "boolean"
            : Array.isArray(i)
            ? "array"
            : i === null
            ? "null"
            : typeof i;
        }
        function hd(i) {
          return typeof i == "object" && i !== null && !Array.isArray(i);
        }
        function Xp(i) {
          return i;
        }
        function Ul(i, s, c) {
          return i !== void 0
            ? i
            : s !== void 0
            ? s
            : c !== void 0
            ? c
            : void 0;
        }
        function Ru(i, s, c, m, _) {
          return Ul(typeof c === _ ? m[c] : void 0, i.default, s.default);
        }
        function g0(i, s, c) {
          if (mi(c) !== "number") return Ul(i.default, s.default);
          var m = i.stops.length;
          if (m === 1 || c <= i.stops[0][0]) return i.stops[0][1];
          if (c >= i.stops[m - 1][0]) return i.stops[m - 1][1];
          var _ = Su(
            i.stops.map(function (y) {
              return y[0];
            }),
            c
          );
          return i.stops[_][1];
        }
        function pd(i, s, c) {
          var m = i.base !== void 0 ? i.base : 1;
          if (mi(c) !== "number") return Ul(i.default, s.default);
          var _ = i.stops.length;
          if (_ === 1 || c <= i.stops[0][0]) return i.stops[0][1];
          if (c >= i.stops[_ - 1][0]) return i.stops[_ - 1][1];
          var y = Su(
              i.stops.map(function (U) {
                return U[0];
              }),
              c
            ),
            A = (function (U, W, $, he) {
              var me = he - $,
                Ie = U - $;
              return me === 0
                ? 0
                : W === 1
                ? Ie / me
                : (Math.pow(W, Ie) - 1) / (Math.pow(W, me) - 1);
            })(c, m, i.stops[y][0], i.stops[y + 1][0]),
            C = i.stops[y][1],
            P = i.stops[y + 1][1],
            O = Ol[s.type] || Xp;
          if (i.colorSpace && i.colorSpace !== "rgb") {
            var k = vh[i.colorSpace];
            O = function (U, W) {
              return k.reverse(k.interpolate(k.forward(U), k.forward(W), A));
            };
          }
          return typeof C.evaluate == "function"
            ? {
                evaluate: function () {
                  for (var U = [], W = arguments.length; W--; )
                    U[W] = arguments[W];
                  var $ = C.evaluate.apply(void 0, U),
                    he = P.evaluate.apply(void 0, U);
                  if ($ !== void 0 && he !== void 0) return O($, he, A);
                },
              }
            : O(C, P, A);
        }
        function vl(i, s, c) {
          return (
            s.type === "color"
              ? (c = br.parse(c))
              : s.type === "formatted"
              ? (c = ki.fromString(c.toString()))
              : s.type === "resolvedImage"
              ? (c = Ai.fromString(c.toString()))
              : mi(c) === s.type ||
                (s.type === "enum" && s.values[c]) ||
                (c = void 0),
            Ul(c, i.default, s.default)
          );
        }
        ie.register(ks, {
          error: [
            { kind: "error" },
            [on],
            function (i, s) {
              throw new xi(s[0].evaluate(i));
            },
          ],
          typeof: [
            on,
            [nn],
            function (i, s) {
              return sr(yi(s[0].evaluate(i)));
            },
          ],
          "to-rgba": [
            Or(pt, 4),
            [qt],
            function (i, s) {
              return s[0].evaluate(i).toArray();
            },
          ],
          rgb: [qt, [pt, pt, pt], Fl],
          rgba: [qt, [pt, pt, pt, pt], Fl],
          has: {
            type: Gt,
            overloads: [
              [
                [on],
                function (i, s) {
                  return dd(s[0].evaluate(i), i.properties());
                },
              ],
              [
                [on, or],
                function (i, s) {
                  var c = s[1];
                  return dd(s[0].evaluate(i), c.evaluate(i));
                },
              ],
            ],
          },
          get: {
            type: nn,
            overloads: [
              [
                [on],
                function (i, s) {
                  return Xc(s[0].evaluate(i), i.properties());
                },
              ],
              [
                [on, or],
                function (i, s) {
                  var c = s[1];
                  return Xc(s[0].evaluate(i), c.evaluate(i));
                },
              ],
            ],
          },
          "feature-state": [
            nn,
            [on],
            function (i, s) {
              return Xc(s[0].evaluate(i), i.featureState || {});
            },
          ],
          properties: [
            or,
            [],
            function (i) {
              return i.properties();
            },
          ],
          "geometry-type": [
            on,
            [],
            function (i) {
              return i.geometryType();
            },
          ],
          id: [
            nn,
            [],
            function (i) {
              return i.id();
            },
          ],
          zoom: [
            pt,
            [],
            function (i) {
              return i.globals.zoom;
            },
          ],
          "heatmap-density": [
            pt,
            [],
            function (i) {
              return i.globals.heatmapDensity || 0;
            },
          ],
          "line-progress": [
            pt,
            [],
            function (i) {
              return i.globals.lineProgress || 0;
            },
          ],
          accumulated: [
            nn,
            [],
            function (i) {
              return i.globals.accumulated === void 0
                ? null
                : i.globals.accumulated;
            },
          ],
          "+": [
            pt,
            bs(pt),
            function (i, s) {
              for (var c = 0, m = 0, _ = s; m < _.length; m += 1)
                c += _[m].evaluate(i);
              return c;
            },
          ],
          "*": [
            pt,
            bs(pt),
            function (i, s) {
              for (var c = 1, m = 0, _ = s; m < _.length; m += 1)
                c *= _[m].evaluate(i);
              return c;
            },
          ],
          "-": {
            type: pt,
            overloads: [
              [
                [pt, pt],
                function (i, s) {
                  var c = s[1];
                  return s[0].evaluate(i) - c.evaluate(i);
                },
              ],
              [
                [pt],
                function (i, s) {
                  return -s[0].evaluate(i);
                },
              ],
            ],
          },
          "/": [
            pt,
            [pt, pt],
            function (i, s) {
              var c = s[1];
              return s[0].evaluate(i) / c.evaluate(i);
            },
          ],
          "%": [
            pt,
            [pt, pt],
            function (i, s) {
              var c = s[1];
              return s[0].evaluate(i) % c.evaluate(i);
            },
          ],
          ln2: [
            pt,
            [],
            function () {
              return Math.LN2;
            },
          ],
          pi: [
            pt,
            [],
            function () {
              return Math.PI;
            },
          ],
          e: [
            pt,
            [],
            function () {
              return Math.E;
            },
          ],
          "^": [
            pt,
            [pt, pt],
            function (i, s) {
              var c = s[1];
              return Math.pow(s[0].evaluate(i), c.evaluate(i));
            },
          ],
          sqrt: [
            pt,
            [pt],
            function (i, s) {
              return Math.sqrt(s[0].evaluate(i));
            },
          ],
          log10: [
            pt,
            [pt],
            function (i, s) {
              return Math.log(s[0].evaluate(i)) / Math.LN10;
            },
          ],
          ln: [
            pt,
            [pt],
            function (i, s) {
              return Math.log(s[0].evaluate(i));
            },
          ],
          log2: [
            pt,
            [pt],
            function (i, s) {
              return Math.log(s[0].evaluate(i)) / Math.LN2;
            },
          ],
          sin: [
            pt,
            [pt],
            function (i, s) {
              return Math.sin(s[0].evaluate(i));
            },
          ],
          cos: [
            pt,
            [pt],
            function (i, s) {
              return Math.cos(s[0].evaluate(i));
            },
          ],
          tan: [
            pt,
            [pt],
            function (i, s) {
              return Math.tan(s[0].evaluate(i));
            },
          ],
          asin: [
            pt,
            [pt],
            function (i, s) {
              return Math.asin(s[0].evaluate(i));
            },
          ],
          acos: [
            pt,
            [pt],
            function (i, s) {
              return Math.acos(s[0].evaluate(i));
            },
          ],
          atan: [
            pt,
            [pt],
            function (i, s) {
              return Math.atan(s[0].evaluate(i));
            },
          ],
          min: [
            pt,
            bs(pt),
            function (i, s) {
              return Math.min.apply(
                Math,
                s.map(function (c) {
                  return c.evaluate(i);
                })
              );
            },
          ],
          max: [
            pt,
            bs(pt),
            function (i, s) {
              return Math.max.apply(
                Math,
                s.map(function (c) {
                  return c.evaluate(i);
                })
              );
            },
          ],
          abs: [
            pt,
            [pt],
            function (i, s) {
              return Math.abs(s[0].evaluate(i));
            },
          ],
          round: [
            pt,
            [pt],
            function (i, s) {
              var c = s[0].evaluate(i);
              return c < 0 ? -Math.round(-c) : Math.round(c);
            },
          ],
          floor: [
            pt,
            [pt],
            function (i, s) {
              return Math.floor(s[0].evaluate(i));
            },
          ],
          ceil: [
            pt,
            [pt],
            function (i, s) {
              return Math.ceil(s[0].evaluate(i));
            },
          ],
          "filter-==": [
            Gt,
            [on, nn],
            function (i, s) {
              var c = s[0],
                m = s[1];
              return i.properties()[c.value] === m.value;
            },
          ],
          "filter-id-==": [
            Gt,
            [nn],
            function (i, s) {
              var c = s[0];
              return i.id() === c.value;
            },
          ],
          "filter-type-==": [
            Gt,
            [on],
            function (i, s) {
              var c = s[0];
              return i.geometryType() === c.value;
            },
          ],
          "filter-<": [
            Gt,
            [on, nn],
            function (i, s) {
              var c = s[0],
                m = s[1],
                _ = i.properties()[c.value],
                y = m.value;
              return typeof _ == typeof y && _ < y;
            },
          ],
          "filter-id-<": [
            Gt,
            [nn],
            function (i, s) {
              var c = s[0],
                m = i.id(),
                _ = c.value;
              return typeof m == typeof _ && m < _;
            },
          ],
          "filter->": [
            Gt,
            [on, nn],
            function (i, s) {
              var c = s[0],
                m = s[1],
                _ = i.properties()[c.value],
                y = m.value;
              return typeof _ == typeof y && _ > y;
            },
          ],
          "filter-id->": [
            Gt,
            [nn],
            function (i, s) {
              var c = s[0],
                m = i.id(),
                _ = c.value;
              return typeof m == typeof _ && m > _;
            },
          ],
          "filter-<=": [
            Gt,
            [on, nn],
            function (i, s) {
              var c = s[0],
                m = s[1],
                _ = i.properties()[c.value],
                y = m.value;
              return typeof _ == typeof y && _ <= y;
            },
          ],
          "filter-id-<=": [
            Gt,
            [nn],
            function (i, s) {
              var c = s[0],
                m = i.id(),
                _ = c.value;
              return typeof m == typeof _ && m <= _;
            },
          ],
          "filter->=": [
            Gt,
            [on, nn],
            function (i, s) {
              var c = s[0],
                m = s[1],
                _ = i.properties()[c.value],
                y = m.value;
              return typeof _ == typeof y && _ >= y;
            },
          ],
          "filter-id->=": [
            Gt,
            [nn],
            function (i, s) {
              var c = s[0],
                m = i.id(),
                _ = c.value;
              return typeof m == typeof _ && m >= _;
            },
          ],
          "filter-has": [
            Gt,
            [nn],
            function (i, s) {
              return s[0].value in i.properties();
            },
          ],
          "filter-has-id": [
            Gt,
            [],
            function (i) {
              return i.id() !== null && i.id() !== void 0;
            },
          ],
          "filter-type-in": [
            Gt,
            [Or(on)],
            function (i, s) {
              return s[0].value.indexOf(i.geometryType()) >= 0;
            },
          ],
          "filter-id-in": [
            Gt,
            [Or(nn)],
            function (i, s) {
              return s[0].value.indexOf(i.id()) >= 0;
            },
          ],
          "filter-in-small": [
            Gt,
            [on, Or(nn)],
            function (i, s) {
              var c = s[0];
              return s[1].value.indexOf(i.properties()[c.value]) >= 0;
            },
          ],
          "filter-in-large": [
            Gt,
            [on, Or(nn)],
            function (i, s) {
              var c = s[0],
                m = s[1];
              return (function (_, y, A, C) {
                for (; A <= C; ) {
                  var P = (A + C) >> 1;
                  if (y[P] === _) return !0;
                  y[P] > _ ? (C = P - 1) : (A = P + 1);
                }
                return !1;
              })(i.properties()[c.value], m.value, 0, m.value.length - 1);
            },
          ],
          all: {
            type: Gt,
            overloads: [
              [
                [Gt, Gt],
                function (i, s) {
                  var c = s[1];
                  return s[0].evaluate(i) && c.evaluate(i);
                },
              ],
              [
                bs(Gt),
                function (i, s) {
                  for (var c = 0, m = s; c < m.length; c += 1)
                    if (!m[c].evaluate(i)) return !1;
                  return !0;
                },
              ],
            ],
          },
          any: {
            type: Gt,
            overloads: [
              [
                [Gt, Gt],
                function (i, s) {
                  var c = s[1];
                  return s[0].evaluate(i) || c.evaluate(i);
                },
              ],
              [
                bs(Gt),
                function (i, s) {
                  for (var c = 0, m = s; c < m.length; c += 1)
                    if (m[c].evaluate(i)) return !0;
                  return !1;
                },
              ],
            ],
          },
          "!": [
            Gt,
            [Gt],
            function (i, s) {
              return !s[0].evaluate(i);
            },
          ],
          "is-supported-script": [
            Gt,
            [on],
            function (i, s) {
              var c = i.globals && i.globals.isSupportedScript;
              return !c || c(s[0].evaluate(i));
            },
          ],
          upcase: [
            on,
            [on],
            function (i, s) {
              return s[0].evaluate(i).toUpperCase();
            },
          ],
          downcase: [
            on,
            [on],
            function (i, s) {
              return s[0].evaluate(i).toLowerCase();
            },
          ],
          concat: [
            on,
            bs(nn),
            function (i, s) {
              return s
                .map(function (c) {
                  return ul(c.evaluate(i));
                })
                .join("");
            },
          ],
          "resolved-locale": [
            on,
            [wr],
            function (i, s) {
              return s[0].evaluate(i).resolvedLocale();
            },
          ],
        });
        var zl = function (i, s) {
          (this.expression = i),
            (this._warningHistory = {}),
            (this._evaluator = new Y()),
            (this._defaultValue = s
              ? (function (c) {
                  return c.type === "color" && hd(c.default)
                    ? new br(0, 0, 0, 0)
                    : c.type === "color"
                    ? br.parse(c.default) || null
                    : c.default === void 0
                    ? null
                    : c.default;
                })(s)
              : null),
            (this._enumValues = s && s.type === "enum" ? s.values : null);
        };
        function _c(i) {
          return (
            Array.isArray(i) &&
            i.length > 0 &&
            typeof i[0] == "string" &&
            i[0] in ks
          );
        }
        function Gc(i, s) {
          var c = new dl(
              ks,
              [],
              s
                ? (function (_) {
                    var y = {
                      color: qt,
                      string: on,
                      number: pt,
                      enum: on,
                      boolean: Gt,
                      formatted: ti,
                      resolvedImage: xr,
                    };
                    return _.type === "array"
                      ? Or(y[_.value] || nn, _.length)
                      : y[_.type];
                  })(s)
                : void 0
            ),
            m = c.parse(
              i,
              void 0,
              void 0,
              void 0,
              s && s.type === "string" ? { typeAnnotation: "coerce" } : void 0
            );
          return m ? Cu(new zl(m, s)) : kl(c.errors);
        }
        (zl.prototype.evaluateWithoutErrorHandling = function (
          i,
          s,
          c,
          m,
          _,
          y
        ) {
          return (
            (this._evaluator.globals = i),
            (this._evaluator.feature = s),
            (this._evaluator.featureState = c),
            (this._evaluator.canonical = m),
            (this._evaluator.availableImages = _ || null),
            (this._evaluator.formattedSection = y),
            this.expression.evaluate(this._evaluator)
          );
        }),
          (zl.prototype.evaluate = function (i, s, c, m, _, y) {
            (this._evaluator.globals = i),
              (this._evaluator.feature = s || null),
              (this._evaluator.featureState = c || null),
              (this._evaluator.canonical = m),
              (this._evaluator.availableImages = _ || null),
              (this._evaluator.formattedSection = y || null);
            try {
              var A = this.expression.evaluate(this._evaluator);
              if (A == null || (typeof A == "number" && A != A))
                return this._defaultValue;
              if (this._enumValues && !(A in this._enumValues))
                throw new xi(
                  "Expected value to be one of " +
                    Object.keys(this._enumValues)
                      .map(function (C) {
                        return JSON.stringify(C);
                      })
                      .join(", ") +
                    ", but found " +
                    JSON.stringify(A) +
                    " instead."
                );
              return A;
            } catch (C) {
              return (
                this._warningHistory[C.message] ||
                  ((this._warningHistory[C.message] = !0),
                  typeof console < "u" && console.warn(C.message)),
                this._defaultValue
              );
            }
          });
        var yc = function (i, s) {
          (this.kind = i),
            (this._styleExpression = s),
            (this.isStateDependent = i !== "constant" && !Pl(s.expression));
        };
        (yc.prototype.evaluateWithoutErrorHandling = function (
          i,
          s,
          c,
          m,
          _,
          y
        ) {
          return this._styleExpression.evaluateWithoutErrorHandling(
            i,
            s,
            c,
            m,
            _,
            y
          );
        }),
          (yc.prototype.evaluate = function (i, s, c, m, _, y) {
            return this._styleExpression.evaluate(i, s, c, m, _, y);
          });
        var xc = function (i, s, c, m) {
          (this.kind = i),
            (this.zoomStops = c),
            (this._styleExpression = s),
            (this.isStateDependent = i !== "camera" && !Pl(s.expression)),
            (this.interpolationType = m);
        };
        function v0(i, s) {
          if ((i = Gc(i, s)).result === "error") return i;
          var c = i.value.expression,
            m = Ml(c);
          if (!m && !gl(s))
            return kl([new Nt("", "data expressions not supported")]);
          var _ = Ds(c, ["zoom"]);
          if (!_ && !m0(s))
            return kl([new Nt("", "zoom expressions not supported")]);
          var y = (function A(C) {
            var P = null;
            if (C instanceof Xo) P = A(C.result);
            else if (C instanceof Ll)
              for (
                var O = 0, k = C.args;
                O < k.length && !(P = A(k[O]));
                O += 1
              );
            else
              (C instanceof Oo || C instanceof Xa) &&
                C.input instanceof ie &&
                C.input.name === "zoom" &&
                (P = C);
            return (
              P instanceof Nt ||
                C.eachChild(function (U) {
                  var W = A(U);
                  W instanceof Nt
                    ? (P = W)
                    : !P && W
                    ? (P = new Nt(
                        "",
                        '"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'
                      ))
                    : P &&
                      W &&
                      P !== W &&
                      (P = new Nt(
                        "",
                        'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'
                      ));
                }),
              P
            );
          })(c);
          return y || _
            ? y instanceof Nt
              ? kl([y])
              : y instanceof Xa && !Nu(s)
              ? kl([
                  new Nt(
                    "",
                    '"interpolate" expressions cannot be used with this property'
                  ),
                ])
              : Cu(
                  y
                    ? new xc(
                        m ? "camera" : "composite",
                        i.value,
                        y.labels,
                        y instanceof Xa ? y.interpolation : void 0
                      )
                    : new yc(m ? "constant" : "source", i.value)
                )
            : kl([
                new Nt(
                  "",
                  '"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'
                ),
              ]);
        }
        (xc.prototype.evaluateWithoutErrorHandling = function (
          i,
          s,
          c,
          m,
          _,
          y
        ) {
          return this._styleExpression.evaluateWithoutErrorHandling(
            i,
            s,
            c,
            m,
            _,
            y
          );
        }),
          (xc.prototype.evaluate = function (i, s, c, m, _, y) {
            return this._styleExpression.evaluate(i, s, c, m, _, y);
          }),
          (xc.prototype.interpolationFactor = function (i, s, c) {
            return this.interpolationType
              ? Xa.interpolationFactor(this.interpolationType, i, s, c)
              : 0;
          });
        var bc = function (i, s) {
          (this._parameters = i),
            (this._specification = s),
            gt(
              this,
              (function c(m, _) {
                var y,
                  A,
                  C,
                  P = _.type === "color",
                  O = m.stops && typeof m.stops[0][0] == "object",
                  k = O || !(O || m.property !== void 0),
                  U = m.type || (Nu(_) ? "exponential" : "interval");
                if (
                  (P &&
                    ((m = gt({}, m)).stops &&
                      (m.stops = m.stops.map(function (dn) {
                        return [dn[0], br.parse(dn[1])];
                      })),
                    (m.default = br.parse(m.default ? m.default : _.default))),
                  m.colorSpace && m.colorSpace !== "rgb" && !vh[m.colorSpace])
                )
                  throw new Error("Unknown color space: " + m.colorSpace);
                if (U === "exponential") y = pd;
                else if (U === "interval") y = g0;
                else if (U === "categorical") {
                  (y = Ru), (A = Object.create(null));
                  for (var W = 0, $ = m.stops; W < $.length; W += 1) {
                    var he = $[W];
                    A[he[0]] = he[1];
                  }
                  C = typeof m.stops[0][0];
                } else {
                  if (U !== "identity")
                    throw new Error('Unknown function type "' + U + '"');
                  y = vl;
                }
                if (O) {
                  for (
                    var me = {}, Ie = [], Te = 0;
                    Te < m.stops.length;
                    Te++
                  ) {
                    var je = m.stops[Te],
                      Ze = je[0].zoom;
                    me[Ze] === void 0 &&
                      ((me[Ze] = {
                        zoom: Ze,
                        type: m.type,
                        property: m.property,
                        default: m.default,
                        stops: [],
                      }),
                      Ie.push(Ze)),
                      me[Ze].stops.push([je[0].value, je[1]]);
                  }
                  for (var at = [], lt = 0, yt = Ie; lt < yt.length; lt += 1) {
                    var zt = yt[lt];
                    at.push([me[zt].zoom, c(me[zt], _)]);
                  }
                  var Qt = { name: "linear" };
                  return {
                    kind: "composite",
                    interpolationType: Qt,
                    interpolationFactor: Xa.interpolationFactor.bind(
                      void 0,
                      Qt
                    ),
                    zoomStops: at.map(function (dn) {
                      return dn[0];
                    }),
                    evaluate: function (dn, Un) {
                      var fn = dn.zoom;
                      return pd({ stops: at, base: m.base }, _, fn).evaluate(
                        fn,
                        Un
                      );
                    },
                  };
                }
                if (k) {
                  var Mn =
                    U === "exponential"
                      ? {
                          name: "exponential",
                          base: m.base !== void 0 ? m.base : 1,
                        }
                      : null;
                  return {
                    kind: "camera",
                    interpolationType: Mn,
                    interpolationFactor: Xa.interpolationFactor.bind(
                      void 0,
                      Mn
                    ),
                    zoomStops: m.stops.map(function (dn) {
                      return dn[0];
                    }),
                    evaluate: function (dn) {
                      return y(m, _, dn.zoom, A, C);
                    },
                  };
                }
                return {
                  kind: "source",
                  evaluate: function (dn, Un) {
                    var fn =
                      Un && Un.properties ? Un.properties[m.property] : void 0;
                    return fn === void 0
                      ? Ul(m.default, _.default)
                      : y(m, _, fn, A, C);
                  },
                };
              })(this._parameters, this._specification)
            );
        };
        function as(i) {
          var s = i.key,
            c = i.value,
            m = i.valueSpec || {},
            _ = i.objectElementValidators || {},
            y = i.style,
            A = i.styleSpec,
            C = [],
            P = mi(c);
          if (P !== "object")
            return [new ye(s, c, "object expected, " + P + " found")];
          for (var O in c) {
            var k = O.split(".")[0],
              U = m[k] || m["*"],
              W = void 0;
            if (_[k]) W = _[k];
            else if (m[k]) W = Lr;
            else if (_["*"]) W = _["*"];
            else {
              if (!m["*"]) {
                C.push(new ye(s, c[O], 'unknown property "' + O + '"'));
                continue;
              }
              W = Lr;
            }
            C = C.concat(
              W(
                {
                  key: (s && s + ".") + O,
                  value: c[O],
                  valueSpec: U,
                  style: y,
                  styleSpec: A,
                  object: c,
                  objectKey: O,
                },
                c
              )
            );
          }
          for (var $ in m)
            _[$] ||
              (m[$].required &&
                m[$].default === void 0 &&
                c[$] === void 0 &&
                C.push(new ye(s, c, 'missing required property "' + $ + '"')));
          return C;
        }
        function _0(i) {
          var s = i.value,
            c = i.valueSpec,
            m = i.style,
            _ = i.styleSpec,
            y = i.key,
            A = i.arrayElementValidator || Lr;
          if (mi(s) !== "array")
            return [new ye(y, s, "array expected, " + mi(s) + " found")];
          if (c.length && s.length !== c.length)
            return [
              new ye(
                y,
                s,
                "array length " +
                  c.length +
                  " expected, length " +
                  s.length +
                  " found"
              ),
            ];
          if (c["min-length"] && s.length < c["min-length"])
            return [
              new ye(
                y,
                s,
                "array length at least " +
                  c["min-length"] +
                  " expected, length " +
                  s.length +
                  " found"
              ),
            ];
          var C = { type: c.value, values: c.values };
          _.$version < 7 && (C.function = c.function),
            mi(c.value) === "object" && (C = c.value);
          for (var P = [], O = 0; O < s.length; O++)
            P = P.concat(
              A({
                array: s,
                arrayIndex: O,
                value: s[O],
                valueSpec: C,
                style: m,
                styleSpec: _,
                key: y + "[" + O + "]",
              })
            );
          return P;
        }
        function y0(i) {
          var s = i.key,
            c = i.value,
            m = i.valueSpec,
            _ = mi(c);
          return (
            _ === "number" && c != c && (_ = "NaN"),
            _ !== "number"
              ? [new ye(s, c, "number expected, " + _ + " found")]
              : "minimum" in m && c < m.minimum
              ? [
                  new ye(
                    s,
                    c,
                    c + " is less than the minimum value " + m.minimum
                  ),
                ]
              : "maximum" in m && c > m.maximum
              ? [
                  new ye(
                    s,
                    c,
                    c + " is greater than the maximum value " + m.maximum
                  ),
                ]
              : []
          );
        }
        function x0(i) {
          var s,
            c,
            m,
            _ = i.valueSpec,
            y = Ot(i.value.type),
            A = {},
            C = y !== "categorical" && i.value.property === void 0,
            P = !C,
            O =
              mi(i.value.stops) === "array" &&
              mi(i.value.stops[0]) === "array" &&
              mi(i.value.stops[0][0]) === "object",
            k = as({
              key: i.key,
              value: i.value,
              valueSpec: i.styleSpec.function,
              style: i.style,
              styleSpec: i.styleSpec,
              objectElementValidators: {
                stops: function ($) {
                  if (y === "identity")
                    return [
                      new ye(
                        $.key,
                        $.value,
                        'identity function may not have a "stops" property'
                      ),
                    ];
                  var he = [],
                    me = $.value;
                  return (
                    (he = he.concat(
                      _0({
                        key: $.key,
                        value: me,
                        valueSpec: $.valueSpec,
                        style: $.style,
                        styleSpec: $.styleSpec,
                        arrayElementValidator: U,
                      })
                    )),
                    mi(me) === "array" &&
                      me.length === 0 &&
                      he.push(
                        new ye($.key, me, "array must have at least one stop")
                      ),
                    he
                  );
                },
                default: function ($) {
                  return Lr({
                    key: $.key,
                    value: $.value,
                    valueSpec: _,
                    style: $.style,
                    styleSpec: $.styleSpec,
                  });
                },
              },
            });
          return (
            y === "identity" &&
              C &&
              k.push(
                new ye(i.key, i.value, 'missing required property "property"')
              ),
            y === "identity" ||
              i.value.stops ||
              k.push(
                new ye(i.key, i.value, 'missing required property "stops"')
              ),
            y === "exponential" &&
              i.valueSpec.expression &&
              !Nu(i.valueSpec) &&
              k.push(
                new ye(i.key, i.value, "exponential functions not supported")
              ),
            i.styleSpec.$version >= 8 &&
              (P && !gl(i.valueSpec)
                ? k.push(
                    new ye(i.key, i.value, "property functions not supported")
                  )
                : C &&
                  !m0(i.valueSpec) &&
                  k.push(
                    new ye(i.key, i.value, "zoom functions not supported")
                  )),
            (y !== "categorical" && !O) ||
              i.value.property !== void 0 ||
              k.push(new ye(i.key, i.value, '"property" property is required')),
            k
          );
          function U($) {
            var he = [],
              me = $.value,
              Ie = $.key;
            if (mi(me) !== "array")
              return [new ye(Ie, me, "array expected, " + mi(me) + " found")];
            if (me.length !== 2)
              return [
                new ye(
                  Ie,
                  me,
                  "array length 2 expected, length " + me.length + " found"
                ),
              ];
            if (O) {
              if (mi(me[0]) !== "object")
                return [
                  new ye(Ie, me, "object expected, " + mi(me[0]) + " found"),
                ];
              if (me[0].zoom === void 0)
                return [new ye(Ie, me, "object stop key must have zoom")];
              if (me[0].value === void 0)
                return [new ye(Ie, me, "object stop key must have value")];
              if (m && m > Ot(me[0].zoom))
                return [
                  new ye(
                    Ie,
                    me[0].zoom,
                    "stop zoom values must appear in ascending order"
                  ),
                ];
              Ot(me[0].zoom) !== m &&
                ((m = Ot(me[0].zoom)), (c = void 0), (A = {})),
                (he = he.concat(
                  as({
                    key: Ie + "[0]",
                    value: me[0],
                    valueSpec: { zoom: {} },
                    style: $.style,
                    styleSpec: $.styleSpec,
                    objectElementValidators: { zoom: y0, value: W },
                  })
                ));
            } else he = he.concat(W({ key: Ie + "[0]", value: me[0], valueSpec: {}, style: $.style, styleSpec: $.styleSpec }, me));
            return _c(dt(me[1]))
              ? he.concat([
                  new ye(
                    Ie + "[1]",
                    me[1],
                    "expressions are not allowed in function stops."
                  ),
                ])
              : he.concat(
                  Lr({
                    key: Ie + "[1]",
                    value: me[1],
                    valueSpec: _,
                    style: $.style,
                    styleSpec: $.styleSpec,
                  })
                );
          }
          function W($, he) {
            var me = mi($.value),
              Ie = Ot($.value),
              Te = $.value !== null ? $.value : he;
            if (s) {
              if (me !== s)
                return [
                  new ye(
                    $.key,
                    Te,
                    me +
                      " stop domain type must match previous stop domain type " +
                      s
                  ),
                ];
            } else s = me;
            if (me !== "number" && me !== "string" && me !== "boolean")
              return [
                new ye(
                  $.key,
                  Te,
                  "stop domain value must be a number, string, or boolean"
                ),
              ];
            if (me !== "number" && y !== "categorical") {
              var je = "number expected, " + me + " found";
              return (
                gl(_) &&
                  y === void 0 &&
                  (je +=
                    '\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),
                [new ye($.key, Te, je)]
              );
            }
            return y !== "categorical" ||
              me !== "number" ||
              (isFinite(Ie) && Math.floor(Ie) === Ie)
              ? y !== "categorical" && me === "number" && c !== void 0 && Ie < c
                ? [
                    new ye(
                      $.key,
                      Te,
                      "stop domain values must appear in ascending order"
                    ),
                  ]
                : ((c = Ie),
                  y === "categorical" && Ie in A
                    ? [new ye($.key, Te, "stop domain values must be unique")]
                    : ((A[Ie] = !0), []))
              : [new ye($.key, Te, "integer expected, found " + Ie)];
          }
        }
        function Vl(i) {
          var s = (i.expressionContext === "property" ? v0 : Gc)(
            dt(i.value),
            i.valueSpec
          );
          if (s.result === "error")
            return s.value.map(function (m) {
              return new ye("" + i.key + m.key, i.value, m.message);
            });
          var c = s.value.expression || s.value._styleExpression.expression;
          if (
            i.expressionContext === "property" &&
            i.propertyKey === "text-font" &&
            !c.outputDefined()
          )
            return [
              new ye(
                i.key,
                i.value,
                'Invalid data expression for "' +
                  i.propertyKey +
                  '". Output values must be contained as literals within the expression.'
              ),
            ];
          if (
            i.expressionContext === "property" &&
            i.propertyType === "layout" &&
            !Pl(c)
          )
            return [
              new ye(
                i.key,
                i.value,
                '"feature-state" data expressions are not supported with layout properties.'
              ),
            ];
          if (i.expressionContext === "filter" && !Pl(c))
            return [
              new ye(
                i.key,
                i.value,
                '"feature-state" data expressions are not supported with filters.'
              ),
            ];
          if (
            i.expressionContext &&
            i.expressionContext.indexOf("cluster") === 0
          ) {
            if (!Ds(c, ["zoom", "feature-state"]))
              return [
                new ye(
                  i.key,
                  i.value,
                  '"zoom" and "feature-state" expressions are not supported with cluster properties.'
                ),
              ];
            if (i.expressionContext === "cluster-initial" && !Ml(c))
              return [
                new ye(
                  i.key,
                  i.value,
                  "Feature data expressions are not supported with initial expression part of cluster properties."
                ),
              ];
          }
          return [];
        }
        function Us(i) {
          var s = i.key,
            c = i.value,
            m = i.valueSpec,
            _ = [];
          return (
            Array.isArray(m.values)
              ? m.values.indexOf(Ot(c)) === -1 &&
                _.push(
                  new ye(
                    s,
                    c,
                    "expected one of [" +
                      m.values.join(", ") +
                      "], " +
                      JSON.stringify(c) +
                      " found"
                  )
                )
              : Object.keys(m.values).indexOf(Ot(c)) === -1 &&
                _.push(
                  new ye(
                    s,
                    c,
                    "expected one of [" +
                      Object.keys(m.values).join(", ") +
                      "], " +
                      JSON.stringify(c) +
                      " found"
                  )
                ),
            _
          );
        }
        function Zc(i) {
          if (i === !0 || i === !1) return !0;
          if (!Array.isArray(i) || i.length === 0) return !1;
          switch (i[0]) {
            case "has":
              return i.length >= 2 && i[1] !== "$id" && i[1] !== "$type";
            case "in":
              return (
                i.length >= 3 &&
                (typeof i[1] != "string" || Array.isArray(i[2]))
              );
            case "!in":
            case "!has":
            case "none":
              return !1;
            case "==":
            case "!=":
            case ">":
            case ">=":
            case "<":
            case "<=":
              return (
                i.length !== 3 || Array.isArray(i[1]) || Array.isArray(i[2])
              );
            case "any":
            case "all":
              for (var s = 0, c = i.slice(1); s < c.length; s += 1) {
                var m = c[s];
                if (!Zc(m) && typeof m != "boolean") return !1;
              }
              return !0;
            default:
              return !0;
          }
        }
        (bc.deserialize = function (i) {
          return new bc(i._parameters, i._specification);
        }),
          (bc.serialize = function (i) {
            return {
              _parameters: i._parameters,
              _specification: i._specification,
            };
          });
        var Iu = {
          type: "boolean",
          default: !1,
          transition: !1,
          "property-type": "data-driven",
          expression: { interpolated: !1, parameters: ["zoom", "feature"] },
        };
        function Hl(i) {
          if (i == null)
            return {
              filter: function () {
                return !0;
              },
              needGeometry: !1,
            };
          Zc(i) || (i = fd(i));
          var s = Gc(i, Iu);
          if (s.result === "error")
            throw new Error(
              s.value
                .map(function (c) {
                  return c.key + ": " + c.message;
                })
                .join(", ")
            );
          return {
            filter: function (c, m, _) {
              return s.value.evaluate(c, m, {}, _);
            },
            needGeometry: (function c(m) {
              if (!Array.isArray(m)) return !1;
              if (m[0] === "within") return !0;
              for (var _ = 1; _ < m.length; _++) if (c(m[_])) return !0;
              return !1;
            })(i),
          };
        }
        function Gp(i, s) {
          return i < s ? -1 : i > s ? 1 : 0;
        }
        function fd(i) {
          if (!i) return !0;
          var s,
            c = i[0];
          return i.length <= 1
            ? c !== "any"
            : c === "=="
            ? b0(i[1], i[2], "==")
            : c === "!="
            ? gd(b0(i[1], i[2], "=="))
            : c === "<" || c === ">" || c === "<=" || c === ">="
            ? b0(i[1], i[2], c)
            : c === "any"
            ? ((s = i.slice(1)), ["any"].concat(s.map(fd)))
            : c === "all"
            ? ["all"].concat(i.slice(1).map(fd))
            : c === "none"
            ? ["all"].concat(i.slice(1).map(fd).map(gd))
            : c === "in"
            ? md(i[1], i.slice(2))
            : c === "!in"
            ? gd(md(i[1], i.slice(2)))
            : c === "has"
            ? bh(i[1])
            : c === "!has"
            ? gd(bh(i[1]))
            : c !== "within" || i;
        }
        function b0(i, s, c) {
          switch (i) {
            case "$type":
              return ["filter-type-" + c, s];
            case "$id":
              return ["filter-id-" + c, s];
            default:
              return ["filter-" + c, i, s];
          }
        }
        function md(i, s) {
          if (s.length === 0) return !1;
          switch (i) {
            case "$type":
              return ["filter-type-in", ["literal", s]];
            case "$id":
              return ["filter-id-in", ["literal", s]];
            default:
              return s.length > 200 &&
                !s.some(function (c) {
                  return typeof c != typeof s[0];
                })
                ? ["filter-in-large", i, ["literal", s.sort(Gp)]]
                : ["filter-in-small", i, ["literal", s]];
          }
        }
        function bh(i) {
          switch (i) {
            case "$type":
              return !0;
            case "$id":
              return ["filter-has-id"];
            default:
              return ["filter-has", i];
          }
        }
        function gd(i) {
          return ["!", i];
        }
        function E0(i) {
          return Zc(dt(i.value))
            ? Vl(
                gt({}, i, {
                  expressionContext: "filter",
                  valueSpec: { value: "boolean" },
                })
              )
            : (function s(c) {
                var m = c.value,
                  _ = c.key;
                if (mi(m) !== "array")
                  return [new ye(_, m, "array expected, " + mi(m) + " found")];
                var y,
                  A = c.styleSpec,
                  C = [];
                if (m.length < 1)
                  return [
                    new ye(_, m, "filter array must have at least 1 element"),
                  ];
                switch (
                  ((C = C.concat(
                    Us({
                      key: _ + "[0]",
                      value: m[0],
                      valueSpec: A.filter_operator,
                      style: c.style,
                      styleSpec: c.styleSpec,
                    })
                  )),
                  Ot(m[0]))
                ) {
                  case "<":
                  case "<=":
                  case ">":
                  case ">=":
                    m.length >= 2 &&
                      Ot(m[1]) === "$type" &&
                      C.push(
                        new ye(
                          _,
                          m,
                          '"$type" cannot be use with operator "' + m[0] + '"'
                        )
                      );
                  case "==":
                  case "!=":
                    m.length !== 3 &&
                      C.push(
                        new ye(
                          _,
                          m,
                          'filter array for operator "' +
                            m[0] +
                            '" must have 3 elements'
                        )
                      );
                  case "in":
                  case "!in":
                    m.length >= 2 &&
                      (y = mi(m[1])) !== "string" &&
                      C.push(
                        new ye(
                          _ + "[1]",
                          m[1],
                          "string expected, " + y + " found"
                        )
                      );
                    for (var P = 2; P < m.length; P++)
                      (y = mi(m[P])),
                        Ot(m[1]) === "$type"
                          ? (C = C.concat(
                              Us({
                                key: _ + "[" + P + "]",
                                value: m[P],
                                valueSpec: A.geometry_type,
                                style: c.style,
                                styleSpec: c.styleSpec,
                              })
                            ))
                          : y !== "string" &&
                            y !== "number" &&
                            y !== "boolean" &&
                            C.push(
                              new ye(
                                _ + "[" + P + "]",
                                m[P],
                                "string, number, or boolean expected, " +
                                  y +
                                  " found"
                              )
                            );
                    break;
                  case "any":
                  case "all":
                  case "none":
                    for (var O = 1; O < m.length; O++)
                      C = C.concat(
                        s({
                          key: _ + "[" + O + "]",
                          value: m[O],
                          style: c.style,
                          styleSpec: c.styleSpec,
                        })
                      );
                    break;
                  case "has":
                  case "!has":
                    (y = mi(m[1])),
                      m.length !== 2
                        ? C.push(
                            new ye(
                              _,
                              m,
                              'filter array for "' +
                                m[0] +
                                '" operator must have 2 elements'
                            )
                          )
                        : y !== "string" &&
                          C.push(
                            new ye(
                              _ + "[1]",
                              m[1],
                              "string expected, " + y + " found"
                            )
                          );
                    break;
                  case "within":
                    (y = mi(m[1])),
                      m.length !== 2
                        ? C.push(
                            new ye(
                              _,
                              m,
                              'filter array for "' +
                                m[0] +
                                '" operator must have 2 elements'
                            )
                          )
                        : y !== "object" &&
                          C.push(
                            new ye(
                              _ + "[1]",
                              m[1],
                              "object expected, " + y + " found"
                            )
                          );
                }
                return C;
              })(i);
        }
        function Mu(i, s) {
          var c = i.key,
            m = i.style,
            _ = i.styleSpec,
            y = i.value,
            A = i.objectKey,
            C = _[s + "_" + i.layerType];
          if (!C) return [];
          var P = A.match(/^(.*)-transition$/);
          if (s === "paint" && P && C[P[1]] && C[P[1]].transition)
            return Lr({
              key: c,
              value: y,
              valueSpec: _.transition,
              style: m,
              styleSpec: _,
            });
          var O,
            k = i.valueSpec || C[A];
          if (!k) return [new ye(c, y, 'unknown property "' + A + '"')];
          if (
            mi(y) === "string" &&
            gl(k) &&
            !k.tokens &&
            (O = /^{([^}]+)}$/.exec(y))
          )
            return [
              new ye(
                c,
                y,
                '"' +
                  A +
                  '" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ' +
                  JSON.stringify(O[1]) +
                  " }`."
              ),
            ];
          var U = [];
          return (
            i.layerType === "symbol" &&
              (A === "text-field" &&
                m &&
                !m.glyphs &&
                U.push(
                  new ye(
                    c,
                    y,
                    'use of "text-field" requires a style "glyphs" property'
                  )
                ),
              A === "text-font" &&
                hd(dt(y)) &&
                Ot(y.type) === "identity" &&
                U.push(
                  new ye(
                    c,
                    y,
                    '"text-font" does not support identity functions'
                  )
                )),
            U.concat(
              Lr({
                key: i.key,
                value: y,
                valueSpec: k,
                style: m,
                styleSpec: _,
                expressionContext: "property",
                propertyType: s,
                propertyKey: A,
              })
            )
          );
        }
        function A0(i) {
          return Mu(i, "paint");
        }
        function Ec(i) {
          return Mu(i, "layout");
        }
        function T0(i) {
          var s = [],
            c = i.value,
            m = i.key,
            _ = i.style,
            y = i.styleSpec;
          c.type ||
            c.ref ||
            s.push(new ye(m, c, 'either "type" or "ref" is required'));
          var A,
            C = Ot(c.type),
            P = Ot(c.ref);
          if (c.id)
            for (var O = Ot(c.id), k = 0; k < i.arrayIndex; k++) {
              var U = _.layers[k];
              Ot(U.id) === O &&
                s.push(
                  new ye(
                    m,
                    c.id,
                    'duplicate layer id "' +
                      c.id +
                      '", previously used at line ' +
                      U.id.__line__
                  )
                );
            }
          if ("ref" in c)
            ["type", "source", "source-layer", "filter", "layout"].forEach(
              function (he) {
                he in c &&
                  s.push(
                    new ye(
                      m,
                      c[he],
                      '"' + he + '" is prohibited for ref layers'
                    )
                  );
              }
            ),
              _.layers.forEach(function (he) {
                Ot(he.id) === P && (A = he);
              }),
              A
                ? A.ref
                  ? s.push(
                      new ye(m, c.ref, "ref cannot reference another ref layer")
                    )
                  : (C = Ot(A.type))
                : s.push(new ye(m, c.ref, 'ref layer "' + P + '" not found'));
          else if (C !== "background")
            if (c.source) {
              var W = _.sources && _.sources[c.source],
                $ = W && Ot(W.type);
              W
                ? $ === "vector" && C === "raster"
                  ? s.push(
                      new ye(
                        m,
                        c.source,
                        'layer "' + c.id + '" requires a raster source'
                      )
                    )
                  : $ === "raster" && C !== "raster"
                  ? s.push(
                      new ye(
                        m,
                        c.source,
                        'layer "' + c.id + '" requires a vector source'
                      )
                    )
                  : $ !== "vector" || c["source-layer"]
                  ? $ === "raster-dem" && C !== "hillshade"
                    ? s.push(
                        new ye(
                          m,
                          c.source,
                          "raster-dem source can only be used with layer type 'hillshade'."
                        )
                      )
                    : C !== "line" ||
                      !c.paint ||
                      !c.paint["line-gradient"] ||
                      ($ === "geojson" && W.lineMetrics) ||
                      s.push(
                        new ye(
                          m,
                          c,
                          'layer "' +
                            c.id +
                            '" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'
                        )
                      )
                  : s.push(
                      new ye(
                        m,
                        c,
                        'layer "' + c.id + '" must specify a "source-layer"'
                      )
                    )
                : s.push(
                    new ye(m, c.source, 'source "' + c.source + '" not found')
                  );
            } else s.push(new ye(m, c, 'missing required property "source"'));
          return (s = s.concat(
            as({
              key: m,
              value: c,
              valueSpec: y.layer,
              style: i.style,
              styleSpec: i.styleSpec,
              objectElementValidators: {
                "*": function () {
                  return [];
                },
                type: function () {
                  return Lr({
                    key: m + ".type",
                    value: c.type,
                    valueSpec: y.layer.type,
                    style: i.style,
                    styleSpec: i.styleSpec,
                    object: c,
                    objectKey: "type",
                  });
                },
                filter: E0,
                layout: function (he) {
                  return as({
                    layer: c,
                    key: he.key,
                    value: he.value,
                    style: he.style,
                    styleSpec: he.styleSpec,
                    objectElementValidators: {
                      "*": function (me) {
                        return Ec(gt({ layerType: C }, me));
                      },
                    },
                  });
                },
                paint: function (he) {
                  return as({
                    layer: c,
                    key: he.key,
                    value: he.value,
                    style: he.style,
                    styleSpec: he.styleSpec,
                    objectElementValidators: {
                      "*": function (me) {
                        return A0(gt({ layerType: C }, me));
                      },
                    },
                  });
                },
              },
            })
          ));
        }
        function jl(i) {
          var s = i.value,
            c = i.key,
            m = mi(s);
          return m !== "string"
            ? [new ye(c, s, "string expected, " + m + " found")]
            : [];
        }
        var gi = {
          promoteId: function (i) {
            var s = i.key,
              c = i.value;
            if (mi(c) === "string") return jl({ key: s, value: c });
            var m = [];
            for (var _ in c)
              m.push.apply(m, jl({ key: s + "." + _, value: c[_] }));
            return m;
          },
        };
        function vd(i) {
          var s = i.value,
            c = i.key,
            m = i.styleSpec,
            _ = i.style;
          if (!s.type) return [new ye(c, s, '"type" is required')];
          var y,
            A = Ot(s.type);
          switch (A) {
            case "vector":
            case "raster":
            case "raster-dem":
              return as({
                key: c,
                value: s,
                valueSpec: m["source_" + A.replace("-", "_")],
                style: i.style,
                styleSpec: m,
                objectElementValidators: gi,
              });
            case "geojson":
              if (
                ((y = as({
                  key: c,
                  value: s,
                  valueSpec: m.source_geojson,
                  style: _,
                  styleSpec: m,
                  objectElementValidators: gi,
                })),
                s.cluster)
              )
                for (var C in s.clusterProperties) {
                  var P = s.clusterProperties[C],
                    O = P[0],
                    k =
                      typeof O == "string"
                        ? [O, ["accumulated"], ["get", C]]
                        : O;
                  y.push.apply(
                    y,
                    Vl({
                      key: c + "." + C + ".map",
                      value: P[1],
                      expressionContext: "cluster-map",
                    })
                  ),
                    y.push.apply(
                      y,
                      Vl({
                        key: c + "." + C + ".reduce",
                        value: k,
                        expressionContext: "cluster-reduce",
                      })
                    );
                }
              return y;
            case "video":
              return as({
                key: c,
                value: s,
                valueSpec: m.source_video,
                style: _,
                styleSpec: m,
              });
            case "image":
              return as({
                key: c,
                value: s,
                valueSpec: m.source_image,
                style: _,
                styleSpec: m,
              });
            case "canvas":
              return [
                new ye(
                  c,
                  null,
                  "Please use runtime APIs to add canvas sources, rather than including them in stylesheets.",
                  "source.canvas"
                ),
              ];
            default:
              return Us({
                key: c + ".type",
                value: s.type,
                valueSpec: {
                  values: [
                    "vector",
                    "raster",
                    "raster-dem",
                    "geojson",
                    "video",
                    "image",
                  ],
                },
                style: _,
                styleSpec: m,
              });
          }
        }
        function zs(i) {
          var s = i.value,
            c = i.styleSpec,
            m = c.light,
            _ = i.style,
            y = [],
            A = mi(s);
          if (s === void 0) return y;
          if (A !== "object")
            return y.concat([
              new ye("light", s, "object expected, " + A + " found"),
            ]);
          for (var C in s) {
            var P = C.match(/^(.*)-transition$/);
            y = y.concat(
              P && m[P[1]] && m[P[1]].transition
                ? Lr({
                    key: C,
                    value: s[C],
                    valueSpec: c.transition,
                    style: _,
                    styleSpec: c,
                  })
                : m[C]
                ? Lr({
                    key: C,
                    value: s[C],
                    valueSpec: m[C],
                    style: _,
                    styleSpec: c,
                  })
                : [new ye(C, s[C], 'unknown property "' + C + '"')]
            );
          }
          return y;
        }
        var Wl = {
          "*": function () {
            return [];
          },
          array: _0,
          boolean: function (i) {
            var s = i.value,
              c = i.key,
              m = mi(s);
            return m !== "boolean"
              ? [new ye(c, s, "boolean expected, " + m + " found")]
              : [];
          },
          number: y0,
          color: function (i) {
            var s = i.key,
              c = i.value,
              m = mi(c);
            return m !== "string"
              ? [new ye(s, c, "color expected, " + m + " found")]
              : lr(c) === null
              ? [new ye(s, c, 'color expected, "' + c + '" found')]
              : [];
          },
          constants: Xe,
          enum: Us,
          filter: E0,
          function: x0,
          layer: T0,
          object: as,
          source: vd,
          light: zs,
          string: jl,
          formatted: function (i) {
            return jl(i).length === 0 ? [] : Vl(i);
          },
          resolvedImage: function (i) {
            return jl(i).length === 0 ? [] : Vl(i);
          },
        };
        function Lr(i) {
          var s = i.value,
            c = i.valueSpec,
            m = i.styleSpec;
          return c.expression && hd(Ot(s))
            ? x0(i)
            : c.expression && _c(dt(s))
            ? Vl(i)
            : c.type && Wl[c.type]
            ? Wl[c.type](i)
            : as(gt({}, i, { valueSpec: c.type ? m[c.type] : c }));
        }
        function vi(i) {
          var s = i.value,
            c = i.key,
            m = jl(i);
          return (
            m.length ||
              (s.indexOf("{fontstack}") === -1 &&
                m.push(
                  new ye(
                    c,
                    s,
                    '"glyphs" url must include a "{fontstack}" token'
                  )
                ),
              s.indexOf("{range}") === -1 &&
                m.push(
                  new ye(c, s, '"glyphs" url must include a "{range}" token')
                )),
            m
          );
        }
        function Zo(i, s) {
          s === void 0 && (s = te);
          var c = [];
          return (
            (c = c.concat(
              Lr({
                key: "",
                value: i,
                valueSpec: s.$root,
                styleSpec: s,
                style: i,
                objectElementValidators: {
                  glyphs: vi,
                  "*": function () {
                    return [];
                  },
                },
              })
            )),
            i.constants &&
              (c = c.concat(
                Xe({
                  key: "constants",
                  value: i.constants,
                  style: i,
                  styleSpec: s,
                })
              )),
            Pu(c)
          );
        }
        function Pu(i) {
          return [].concat(i).sort(function (s, c) {
            return s.line - c.line;
          });
        }
        function Yc(i) {
          return function () {
            for (var s = [], c = arguments.length; c--; ) s[c] = arguments[c];
            return Pu(i.apply(this, s));
          };
        }
        (Zo.source = Yc(vd)),
          (Zo.light = Yc(zs)),
          (Zo.layer = Yc(T0)),
          (Zo.filter = Yc(E0)),
          (Zo.paintProperty = Yc(A0)),
          (Zo.layoutProperty = Yc(Ec));
        var Ou = Zo,
          Eh = Ou.light,
          _d = Ou.paintProperty,
          Lu = Ou.layoutProperty;
        function Xl(i, s) {
          var c = !1;
          if (s && s.length)
            for (var m = 0, _ = s; m < _.length; m += 1)
              i.fire(new Pe(new Error(_[m].message))), (c = !0);
          return c;
        }
        var ya = Ci;
        function Ci(i, s, c) {
          var m = (this.cells = []);
          if (i instanceof ArrayBuffer) {
            this.arrayBuffer = i;
            var _ = new Int32Array(this.arrayBuffer);
            (i = _[0]), (this.d = (s = _[1]) + 2 * (c = _[2]));
            for (var y = 0; y < this.d * this.d; y++) {
              var A = _[3 + y],
                C = _[3 + y + 1];
              m.push(A === C ? null : _.subarray(A, C));
            }
            var P = _[3 + m.length + 1];
            (this.keys = _.subarray(_[3 + m.length], P)),
              (this.bboxes = _.subarray(P)),
              (this.insert = this._insertReadonly);
          } else {
            this.d = s + 2 * c;
            for (var O = 0; O < this.d * this.d; O++) m.push([]);
            (this.keys = []), (this.bboxes = []);
          }
          (this.n = s),
            (this.extent = i),
            (this.padding = c),
            (this.scale = s / i),
            (this.uid = 0);
          var k = (c / s) * i;
          (this.min = -k), (this.max = i + k);
        }
        (Ci.prototype.insert = function (i, s, c, m, _) {
          this._forEachCell(s, c, m, _, this._insertCell, this.uid++),
            this.keys.push(i),
            this.bboxes.push(s),
            this.bboxes.push(c),
            this.bboxes.push(m),
            this.bboxes.push(_);
        }),
          (Ci.prototype._insertReadonly = function () {
            throw "Cannot insert into a GridIndex created from an ArrayBuffer.";
          }),
          (Ci.prototype._insertCell = function (i, s, c, m, _, y) {
            this.cells[_].push(y);
          }),
          (Ci.prototype.query = function (i, s, c, m, _) {
            var y = this.min,
              A = this.max;
            if (i <= y && s <= y && A <= c && A <= m && !_)
              return Array.prototype.slice.call(this.keys);
            var C = [];
            return this._forEachCell(i, s, c, m, this._queryCell, C, {}, _), C;
          }),
          (Ci.prototype._queryCell = function (i, s, c, m, _, y, A, C) {
            var P = this.cells[_];
            if (P !== null)
              for (
                var O = this.keys, k = this.bboxes, U = 0;
                U < P.length;
                U++
              ) {
                var W = P[U];
                if (A[W] === void 0) {
                  var $ = 4 * W;
                  (
                    C
                      ? C(k[$ + 0], k[$ + 1], k[$ + 2], k[$ + 3])
                      : i <= k[$ + 2] &&
                        s <= k[$ + 3] &&
                        c >= k[$ + 0] &&
                        m >= k[$ + 1]
                  )
                    ? ((A[W] = !0), y.push(O[W]))
                    : (A[W] = !1);
                }
              }
          }),
          (Ci.prototype._forEachCell = function (i, s, c, m, _, y, A, C) {
            for (
              var P = this._convertToCellCoord(i),
                O = this._convertToCellCoord(s),
                k = this._convertToCellCoord(c),
                U = this._convertToCellCoord(m),
                W = P;
              W <= k;
              W++
            )
              for (var $ = O; $ <= U; $++) {
                var he = this.d * $ + W;
                if (
                  (!C ||
                    C(
                      this._convertFromCellCoord(W),
                      this._convertFromCellCoord($),
                      this._convertFromCellCoord(W + 1),
                      this._convertFromCellCoord($ + 1)
                    )) &&
                  _.call(this, i, s, c, m, he, y, A, C)
                )
                  return;
              }
          }),
          (Ci.prototype._convertFromCellCoord = function (i) {
            return (i - this.padding) / this.scale;
          }),
          (Ci.prototype._convertToCellCoord = function (i) {
            return Math.max(
              0,
              Math.min(this.d - 1, Math.floor(i * this.scale) + this.padding)
            );
          }),
          (Ci.prototype.toArrayBuffer = function () {
            if (this.arrayBuffer) return this.arrayBuffer;
            for (
              var i = this.cells,
                s = 3 + this.cells.length + 1 + 1,
                c = 0,
                m = 0;
              m < this.cells.length;
              m++
            )
              c += this.cells[m].length;
            var _ = new Int32Array(
              s + c + this.keys.length + this.bboxes.length
            );
            (_[0] = this.extent), (_[1] = this.n), (_[2] = this.padding);
            for (var y = s, A = 0; A < i.length; A++) {
              var C = i[A];
              (_[3 + A] = y), _.set(C, y), (y += C.length);
            }
            return (
              (_[3 + i.length] = y),
              _.set(this.keys, y),
              (_[3 + i.length + 1] = y += this.keys.length),
              _.set(this.bboxes, y),
              (y += this.bboxes.length),
              _.buffer
            );
          });
        var qc = T.ImageData,
          S0 = T.ImageBitmap,
          Zi = {};
        function vn(i, s, c) {
          c === void 0 && (c = {}),
            Object.defineProperty(s, "_classRegistryKey", {
              value: i,
              writeable: !1,
            }),
            (Zi[i] = {
              klass: s,
              omit: c.omit || [],
              shallow: c.shallow || [],
            });
        }
        for (var bo in (vn("Object", Object),
        (ya.serialize = function (i, s) {
          var c = i.toArrayBuffer();
          return s && s.push(c), { buffer: c };
        }),
        (ya.deserialize = function (i) {
          return new ya(i.buffer);
        }),
        vn("Grid", ya),
        vn("Color", br),
        vn("Error", Error),
        vn("ResolvedImage", Ai),
        vn("StylePropertyFunction", bc),
        vn("StyleExpression", zl, { omit: ["_evaluator"] }),
        vn("ZoomDependentExpression", xc),
        vn("ZoomConstantExpression", yc),
        vn("CompoundExpression", ie, { omit: ["_evaluate"] }),
        ks))
          ks[bo]._classRegistryKey || vn("Expression_" + bo, ks[bo]);
        function Du(i) {
          return (
            i &&
            typeof ArrayBuffer < "u" &&
            (i instanceof ArrayBuffer ||
              (i.constructor && i.constructor.name === "ArrayBuffer"))
          );
        }
        function $c(i) {
          return S0 && i instanceof S0;
        }
        function co(i, s) {
          if (
            i == null ||
            typeof i == "boolean" ||
            typeof i == "number" ||
            typeof i == "string" ||
            i instanceof Boolean ||
            i instanceof Number ||
            i instanceof String ||
            i instanceof Date ||
            i instanceof RegExp
          )
            return i;
          if (Du(i) || $c(i)) return s && s.push(i), i;
          if (ArrayBuffer.isView(i)) {
            var c = i;
            return s && s.push(c.buffer), c;
          }
          if (i instanceof qc) return s && s.push(i.data.buffer), i;
          if (Array.isArray(i)) {
            for (var m = [], _ = 0, y = i; _ < y.length; _ += 1)
              m.push(co(y[_], s));
            return m;
          }
          if (typeof i == "object") {
            var A = i.constructor,
              C = A._classRegistryKey;
            if (!C)
              throw new Error("can't serialize object of unregistered class");
            var P = A.serialize ? A.serialize(i, s) : {};
            if (!A.serialize) {
              for (var O in i)
                if (i.hasOwnProperty(O) && !(Zi[C].omit.indexOf(O) >= 0)) {
                  var k = i[O];
                  P[O] = Zi[C].shallow.indexOf(O) >= 0 ? k : co(k, s);
                }
              i instanceof Error && (P.message = i.message);
            }
            if (P.$name)
              throw new Error(
                "$name property is reserved for worker serialization logic."
              );
            return C !== "Object" && (P.$name = C), P;
          }
          throw new Error("can't serialize object of type " + typeof i);
        }
        function si(i) {
          if (
            i == null ||
            typeof i == "boolean" ||
            typeof i == "number" ||
            typeof i == "string" ||
            i instanceof Boolean ||
            i instanceof Number ||
            i instanceof String ||
            i instanceof Date ||
            i instanceof RegExp ||
            Du(i) ||
            $c(i) ||
            ArrayBuffer.isView(i) ||
            i instanceof qc
          )
            return i;
          if (Array.isArray(i)) return i.map(si);
          if (typeof i == "object") {
            var s = i.$name || "Object",
              c = Zi[s].klass;
            if (!c)
              throw new Error("can't deserialize unregistered class " + s);
            if (c.deserialize) return c.deserialize(i);
            for (
              var m = Object.create(c.prototype), _ = 0, y = Object.keys(i);
              _ < y.length;
              _ += 1
            ) {
              var A = y[_];
              if (A !== "$name") {
                var C = i[A];
                m[A] = Zi[s].shallow.indexOf(A) >= 0 ? C : si(C);
              }
            }
            return m;
          }
          throw new Error("can't deserialize object of type " + typeof i);
        }
        var yd = function () {
          this.first = !0;
        };
        yd.prototype.update = function (i, s) {
          var c = Math.floor(i);
          return this.first
            ? ((this.first = !1),
              (this.lastIntegerZoom = c),
              (this.lastIntegerZoomTime = 0),
              (this.lastZoom = i),
              (this.lastFloorZoom = c),
              !0)
            : (this.lastFloorZoom > c
                ? ((this.lastIntegerZoom = c + 1),
                  (this.lastIntegerZoomTime = s))
                : this.lastFloorZoom < c &&
                  ((this.lastIntegerZoom = c), (this.lastIntegerZoomTime = s)),
              i !== this.lastZoom &&
                ((this.lastZoom = i), (this.lastFloorZoom = c), !0));
        };
        var Jt = {
          "Latin-1 Supplement": function (i) {
            return i >= 128 && i <= 255;
          },
          Arabic: function (i) {
            return i >= 1536 && i <= 1791;
          },
          "Arabic Supplement": function (i) {
            return i >= 1872 && i <= 1919;
          },
          "Arabic Extended-A": function (i) {
            return i >= 2208 && i <= 2303;
          },
          "Hangul Jamo": function (i) {
            return i >= 4352 && i <= 4607;
          },
          "Unified Canadian Aboriginal Syllabics": function (i) {
            return i >= 5120 && i <= 5759;
          },
          Khmer: function (i) {
            return i >= 6016 && i <= 6143;
          },
          "Unified Canadian Aboriginal Syllabics Extended": function (i) {
            return i >= 6320 && i <= 6399;
          },
          "General Punctuation": function (i) {
            return i >= 8192 && i <= 8303;
          },
          "Letterlike Symbols": function (i) {
            return i >= 8448 && i <= 8527;
          },
          "Number Forms": function (i) {
            return i >= 8528 && i <= 8591;
          },
          "Miscellaneous Technical": function (i) {
            return i >= 8960 && i <= 9215;
          },
          "Control Pictures": function (i) {
            return i >= 9216 && i <= 9279;
          },
          "Optical Character Recognition": function (i) {
            return i >= 9280 && i <= 9311;
          },
          "Enclosed Alphanumerics": function (i) {
            return i >= 9312 && i <= 9471;
          },
          "Geometric Shapes": function (i) {
            return i >= 9632 && i <= 9727;
          },
          "Miscellaneous Symbols": function (i) {
            return i >= 9728 && i <= 9983;
          },
          "Miscellaneous Symbols and Arrows": function (i) {
            return i >= 11008 && i <= 11263;
          },
          "CJK Radicals Supplement": function (i) {
            return i >= 11904 && i <= 12031;
          },
          "Kangxi Radicals": function (i) {
            return i >= 12032 && i <= 12255;
          },
          "Ideographic Description Characters": function (i) {
            return i >= 12272 && i <= 12287;
          },
          "CJK Symbols and Punctuation": function (i) {
            return i >= 12288 && i <= 12351;
          },
          Hiragana: function (i) {
            return i >= 12352 && i <= 12447;
          },
          Katakana: function (i) {
            return i >= 12448 && i <= 12543;
          },
          Bopomofo: function (i) {
            return i >= 12544 && i <= 12591;
          },
          "Hangul Compatibility Jamo": function (i) {
            return i >= 12592 && i <= 12687;
          },
          Kanbun: function (i) {
            return i >= 12688 && i <= 12703;
          },
          "Bopomofo Extended": function (i) {
            return i >= 12704 && i <= 12735;
          },
          "CJK Strokes": function (i) {
            return i >= 12736 && i <= 12783;
          },
          "Katakana Phonetic Extensions": function (i) {
            return i >= 12784 && i <= 12799;
          },
          "Enclosed CJK Letters and Months": function (i) {
            return i >= 12800 && i <= 13055;
          },
          "CJK Compatibility": function (i) {
            return i >= 13056 && i <= 13311;
          },
          "CJK Unified Ideographs Extension A": function (i) {
            return i >= 13312 && i <= 19903;
          },
          "Yijing Hexagram Symbols": function (i) {
            return i >= 19904 && i <= 19967;
          },
          "CJK Unified Ideographs": function (i) {
            return i >= 19968 && i <= 40959;
          },
          "Yi Syllables": function (i) {
            return i >= 40960 && i <= 42127;
          },
          "Yi Radicals": function (i) {
            return i >= 42128 && i <= 42191;
          },
          "Hangul Jamo Extended-A": function (i) {
            return i >= 43360 && i <= 43391;
          },
          "Hangul Syllables": function (i) {
            return i >= 44032 && i <= 55215;
          },
          "Hangul Jamo Extended-B": function (i) {
            return i >= 55216 && i <= 55295;
          },
          "Private Use Area": function (i) {
            return i >= 57344 && i <= 63743;
          },
          "CJK Compatibility Ideographs": function (i) {
            return i >= 63744 && i <= 64255;
          },
          "Arabic Presentation Forms-A": function (i) {
            return i >= 64336 && i <= 65023;
          },
          "Vertical Forms": function (i) {
            return i >= 65040 && i <= 65055;
          },
          "CJK Compatibility Forms": function (i) {
            return i >= 65072 && i <= 65103;
          },
          "Small Form Variants": function (i) {
            return i >= 65104 && i <= 65135;
          },
          "Arabic Presentation Forms-B": function (i) {
            return i >= 65136 && i <= 65279;
          },
          "Halfwidth and Fullwidth Forms": function (i) {
            return i >= 65280 && i <= 65519;
          },
        };
        function _l(i) {
          for (var s = 0, c = i; s < c.length; s += 1)
            if (Bu(c[s].charCodeAt(0))) return !0;
          return !1;
        }
        function Bu(i) {
          return !(
            i !== 746 &&
            i !== 747 &&
            (i < 4352 ||
              !(
                Jt["Bopomofo Extended"](i) ||
                Jt.Bopomofo(i) ||
                (Jt["CJK Compatibility Forms"](i) &&
                  !(i >= 65097 && i <= 65103)) ||
                Jt["CJK Compatibility Ideographs"](i) ||
                Jt["CJK Compatibility"](i) ||
                Jt["CJK Radicals Supplement"](i) ||
                Jt["CJK Strokes"](i) ||
                !(
                  !Jt["CJK Symbols and Punctuation"](i) ||
                  (i >= 12296 && i <= 12305) ||
                  (i >= 12308 && i <= 12319) ||
                  i === 12336
                ) ||
                Jt["CJK Unified Ideographs Extension A"](i) ||
                Jt["CJK Unified Ideographs"](i) ||
                Jt["Enclosed CJK Letters and Months"](i) ||
                Jt["Hangul Compatibility Jamo"](i) ||
                Jt["Hangul Jamo Extended-A"](i) ||
                Jt["Hangul Jamo Extended-B"](i) ||
                Jt["Hangul Jamo"](i) ||
                Jt["Hangul Syllables"](i) ||
                Jt.Hiragana(i) ||
                Jt["Ideographic Description Characters"](i) ||
                Jt.Kanbun(i) ||
                Jt["Kangxi Radicals"](i) ||
                Jt["Katakana Phonetic Extensions"](i) ||
                (Jt.Katakana(i) && i !== 12540) ||
                !(
                  !Jt["Halfwidth and Fullwidth Forms"](i) ||
                  i === 65288 ||
                  i === 65289 ||
                  i === 65293 ||
                  (i >= 65306 && i <= 65310) ||
                  i === 65339 ||
                  i === 65341 ||
                  i === 65343 ||
                  (i >= 65371 && i <= 65503) ||
                  i === 65507 ||
                  (i >= 65512 && i <= 65519)
                ) ||
                !(
                  !Jt["Small Form Variants"](i) ||
                  (i >= 65112 && i <= 65118) ||
                  (i >= 65123 && i <= 65126)
                ) ||
                Jt["Unified Canadian Aboriginal Syllabics"](i) ||
                Jt["Unified Canadian Aboriginal Syllabics Extended"](i) ||
                Jt["Vertical Forms"](i) ||
                Jt["Yijing Hexagram Symbols"](i) ||
                Jt["Yi Syllables"](i) ||
                Jt["Yi Radicals"](i)
              ))
          );
        }
        function xd(i) {
          return !(
            Bu(i) ||
            (function (s) {
              return !!(
                (Jt["Latin-1 Supplement"](s) &&
                  (s === 167 ||
                    s === 169 ||
                    s === 174 ||
                    s === 177 ||
                    s === 188 ||
                    s === 189 ||
                    s === 190 ||
                    s === 215 ||
                    s === 247)) ||
                (Jt["General Punctuation"](s) &&
                  (s === 8214 ||
                    s === 8224 ||
                    s === 8225 ||
                    s === 8240 ||
                    s === 8241 ||
                    s === 8251 ||
                    s === 8252 ||
                    s === 8258 ||
                    s === 8263 ||
                    s === 8264 ||
                    s === 8265 ||
                    s === 8273)) ||
                Jt["Letterlike Symbols"](s) ||
                Jt["Number Forms"](s) ||
                (Jt["Miscellaneous Technical"](s) &&
                  ((s >= 8960 && s <= 8967) ||
                    (s >= 8972 && s <= 8991) ||
                    (s >= 8996 && s <= 9e3) ||
                    s === 9003 ||
                    (s >= 9085 && s <= 9114) ||
                    (s >= 9150 && s <= 9165) ||
                    s === 9167 ||
                    (s >= 9169 && s <= 9179) ||
                    (s >= 9186 && s <= 9215))) ||
                (Jt["Control Pictures"](s) && s !== 9251) ||
                Jt["Optical Character Recognition"](s) ||
                Jt["Enclosed Alphanumerics"](s) ||
                Jt["Geometric Shapes"](s) ||
                (Jt["Miscellaneous Symbols"](s) && !(s >= 9754 && s <= 9759)) ||
                (Jt["Miscellaneous Symbols and Arrows"](s) &&
                  ((s >= 11026 && s <= 11055) ||
                    (s >= 11088 && s <= 11097) ||
                    (s >= 11192 && s <= 11243))) ||
                Jt["CJK Symbols and Punctuation"](s) ||
                Jt.Katakana(s) ||
                Jt["Private Use Area"](s) ||
                Jt["CJK Compatibility Forms"](s) ||
                Jt["Small Form Variants"](s) ||
                Jt["Halfwidth and Fullwidth Forms"](s) ||
                s === 8734 ||
                s === 8756 ||
                s === 8757 ||
                (s >= 9984 && s <= 10087) ||
                (s >= 10102 && s <= 10131) ||
                s === 65532 ||
                s === 65533
              );
            })(i)
          );
        }
        function os(i) {
          return (
            (i >= 1424 && i <= 2303) ||
            Jt["Arabic Presentation Forms-A"](i) ||
            Jt["Arabic Presentation Forms-B"](i)
          );
        }
        function Lo(i, s) {
          return !(
            (!s && os(i)) ||
            (i >= 2304 && i <= 3583) ||
            (i >= 3840 && i <= 4255) ||
            Jt.Khmer(i)
          );
        }
        function bd(i) {
          for (var s = 0, c = i; s < c.length; s += 1)
            if (os(c[s].charCodeAt(0))) return !0;
          return !1;
        }
        var Ed = null,
          uo = "unavailable",
          Vs = null,
          Ah = function (i) {
            i &&
              typeof i == "string" &&
              i.indexOf("NetworkError") > -1 &&
              (uo = "error"),
              Ed && Ed(i);
          };
        function Kc() {
          Ad.fire(
            new fe("pluginStateChange", { pluginStatus: uo, pluginURL: Vs })
          );
        }
        var Ad = new Fe(),
          w0 = function () {
            return uo;
          },
          Do = function () {
            if (uo !== "deferred" || !Vs)
              throw new Error(
                "rtl-text-plugin cannot be downloaded unless a pluginURL is specified"
              );
            (uo = "loading"),
              Kc(),
              Vs &&
                gc({ url: Vs }, function (i) {
                  i ? Ah(i) : ((uo = "loaded"), Kc());
                });
          },
          Yo = {
            applyArabicShaping: null,
            processBidirectionalText: null,
            processStyledBidirectionalText: null,
            isLoaded: function () {
              return uo === "loaded" || Yo.applyArabicShaping != null;
            },
            isLoading: function () {
              return uo === "loading";
            },
            setState: function (i) {
              (uo = i.pluginStatus), (Vs = i.pluginURL);
            },
            isParsed: function () {
              return (
                Yo.applyArabicShaping != null &&
                Yo.processBidirectionalText != null &&
                Yo.processStyledBidirectionalText != null
              );
            },
            getPluginURL: function () {
              return Vs;
            },
          },
          ur = function (i, s) {
            (this.zoom = i),
              s
                ? ((this.now = s.now),
                  (this.fadeDuration = s.fadeDuration),
                  (this.zoomHistory = s.zoomHistory),
                  (this.transition = s.transition))
                : ((this.now = 0),
                  (this.fadeDuration = 0),
                  (this.zoomHistory = new yd()),
                  (this.transition = {}));
          };
        (ur.prototype.isSupportedScript = function (i) {
          return (function (s, c) {
            for (var m = 0, _ = s; m < _.length; m += 1)
              if (!Lo(_[m].charCodeAt(0), c)) return !1;
            return !0;
          })(i, Yo.isLoaded());
        }),
          (ur.prototype.crossFadingFactor = function () {
            return this.fadeDuration === 0
              ? 1
              : Math.min(
                  (this.now - this.zoomHistory.lastIntegerZoomTime) /
                    this.fadeDuration,
                  1
                );
          }),
          (ur.prototype.getCrossfadeParameters = function () {
            var i = this.zoom,
              s = i - Math.floor(i),
              c = this.crossFadingFactor();
            return i > this.zoomHistory.lastIntegerZoom
              ? { fromScale: 2, toScale: 1, t: s + (1 - s) * c }
              : { fromScale: 0.5, toScale: 1, t: 1 - (1 - c) * s };
          });
        var qo = function (i, s) {
          (this.property = i),
            (this.value = s),
            (this.expression = (function (c, m) {
              if (hd(c)) return new bc(c, m);
              if (_c(c)) {
                var _ = v0(c, m);
                if (_.result === "error")
                  throw new Error(
                    _.value
                      .map(function (A) {
                        return A.key + ": " + A.message;
                      })
                      .join(", ")
                  );
                return _.value;
              }
              var y = c;
              return (
                typeof c == "string" && m.type === "color" && (y = br.parse(c)),
                {
                  kind: "constant",
                  evaluate: function () {
                    return y;
                  },
                }
              );
            })(s === void 0 ? i.specification.default : s, i.specification));
        };
        (qo.prototype.isDataDriven = function () {
          return (
            this.expression.kind === "source" ||
            this.expression.kind === "composite"
          );
        }),
          (qo.prototype.possiblyEvaluate = function (i, s, c) {
            return this.property.possiblyEvaluate(this, i, s, c);
          });
        var $o = function (i) {
          (this.property = i), (this.value = new qo(i, void 0));
        };
        ($o.prototype.transitioned = function (i, s) {
          return new Gl(
            this.property,
            this.value,
            s,
            G({}, i.transition, this.transition),
            i.now
          );
        }),
          ($o.prototype.untransitioned = function () {
            return new Gl(this.property, this.value, null, {}, 0);
          });
        var Da = function (i) {
          (this._properties = i),
            (this._values = Object.create(
              i.defaultTransitionablePropertyValues
            ));
        };
        (Da.prototype.getValue = function (i) {
          return Ae(this._values[i].value.value);
        }),
          (Da.prototype.setValue = function (i, s) {
            this._values.hasOwnProperty(i) ||
              (this._values[i] = new $o(this._values[i].property)),
              (this._values[i].value = new qo(
                this._values[i].property,
                s === null ? void 0 : Ae(s)
              ));
          }),
          (Da.prototype.getTransition = function (i) {
            return Ae(this._values[i].transition);
          }),
          (Da.prototype.setTransition = function (i, s) {
            this._values.hasOwnProperty(i) ||
              (this._values[i] = new $o(this._values[i].property)),
              (this._values[i].transition = Ae(s) || void 0);
          }),
          (Da.prototype.serialize = function () {
            for (
              var i = {}, s = 0, c = Object.keys(this._values);
              s < c.length;
              s += 1
            ) {
              var m = c[s],
                _ = this.getValue(m);
              _ !== void 0 && (i[m] = _);
              var y = this.getTransition(m);
              y !== void 0 && (i[m + "-transition"] = y);
            }
            return i;
          }),
          (Da.prototype.transitioned = function (i, s) {
            for (
              var c = new yl(this._properties),
                m = 0,
                _ = Object.keys(this._values);
              m < _.length;
              m += 1
            ) {
              var y = _[m];
              c._values[y] = this._values[y].transitioned(i, s._values[y]);
            }
            return c;
          }),
          (Da.prototype.untransitioned = function () {
            for (
              var i = new yl(this._properties),
                s = 0,
                c = Object.keys(this._values);
              s < c.length;
              s += 1
            ) {
              var m = c[s];
              i._values[m] = this._values[m].untransitioned();
            }
            return i;
          });
        var Gl = function (i, s, c, m, _) {
          (this.property = i),
            (this.value = s),
            (this.begin = _ + m.delay || 0),
            (this.end = this.begin + m.duration || 0),
            i.specification.transition &&
              (m.delay || m.duration) &&
              (this.prior = c);
        };
        Gl.prototype.possiblyEvaluate = function (i, s, c) {
          var m = i.now || 0,
            _ = this.value.possiblyEvaluate(i, s, c),
            y = this.prior;
          if (y) {
            if (m > this.end) return (this.prior = null), _;
            if (this.value.isDataDriven()) return (this.prior = null), _;
            if (m < this.begin) return y.possiblyEvaluate(i, s, c);
            var A = (m - this.begin) / (this.end - this.begin);
            return this.property.interpolate(
              y.possiblyEvaluate(i, s, c),
              _,
              (function (C) {
                if (C <= 0) return 0;
                if (C >= 1) return 1;
                var P = C * C,
                  O = P * C;
                return 4 * (C < 0.5 ? O : 3 * (C - P) + O - 0.75);
              })(A)
            );
          }
          return _;
        };
        var yl = function (i) {
          (this._properties = i),
            (this._values = Object.create(
              i.defaultTransitioningPropertyValues
            ));
        };
        (yl.prototype.possiblyEvaluate = function (i, s, c) {
          for (
            var m = new Qc(this._properties),
              _ = 0,
              y = Object.keys(this._values);
            _ < y.length;
            _ += 1
          ) {
            var A = y[_];
            m._values[A] = this._values[A].possiblyEvaluate(i, s, c);
          }
          return m;
        }),
          (yl.prototype.hasTransition = function () {
            for (var i = 0, s = Object.keys(this._values); i < s.length; i += 1)
              if (this._values[s[i]].prior) return !0;
            return !1;
          });
        var ss = function (i) {
          (this._properties = i),
            (this._values = Object.create(i.defaultPropertyValues));
        };
        (ss.prototype.getValue = function (i) {
          return Ae(this._values[i].value);
        }),
          (ss.prototype.setValue = function (i, s) {
            this._values[i] = new qo(
              this._values[i].property,
              s === null ? void 0 : Ae(s)
            );
          }),
          (ss.prototype.serialize = function () {
            for (
              var i = {}, s = 0, c = Object.keys(this._values);
              s < c.length;
              s += 1
            ) {
              var m = c[s],
                _ = this.getValue(m);
              _ !== void 0 && (i[m] = _);
            }
            return i;
          }),
          (ss.prototype.possiblyEvaluate = function (i, s, c) {
            for (
              var m = new Qc(this._properties),
                _ = 0,
                y = Object.keys(this._values);
              _ < y.length;
              _ += 1
            ) {
              var A = y[_];
              m._values[A] = this._values[A].possiblyEvaluate(i, s, c);
            }
            return m;
          });
        var Ja = function (i, s, c) {
          (this.property = i), (this.value = s), (this.parameters = c);
        };
        (Ja.prototype.isConstant = function () {
          return this.value.kind === "constant";
        }),
          (Ja.prototype.constantOr = function (i) {
            return this.value.kind === "constant" ? this.value.value : i;
          }),
          (Ja.prototype.evaluate = function (i, s, c, m) {
            return this.property.evaluate(
              this.value,
              this.parameters,
              i,
              s,
              c,
              m
            );
          });
        var Qc = function (i) {
          (this._properties = i),
            (this._values = Object.create(i.defaultPossiblyEvaluatedValues));
        };
        Qc.prototype.get = function (i) {
          return this._values[i];
        };
        var Rn = function (i) {
          this.specification = i;
        };
        (Rn.prototype.possiblyEvaluate = function (i, s) {
          return i.expression.evaluate(s);
        }),
          (Rn.prototype.interpolate = function (i, s, c) {
            var m = Ol[this.specification.type];
            return m ? m(i, s, c) : i;
          });
        var bn = function (i, s) {
          (this.specification = i), (this.overrides = s);
        };
        (bn.prototype.possiblyEvaluate = function (i, s, c, m) {
          return new Ja(
            this,
            i.expression.kind === "constant" || i.expression.kind === "camera"
              ? {
                  kind: "constant",
                  value: i.expression.evaluate(s, null, {}, c, m),
                }
              : i.expression,
            s
          );
        }),
          (bn.prototype.interpolate = function (i, s, c) {
            if (i.value.kind !== "constant" || s.value.kind !== "constant")
              return i;
            if (i.value.value === void 0 || s.value.value === void 0)
              return new Ja(
                this,
                { kind: "constant", value: void 0 },
                i.parameters
              );
            var m = Ol[this.specification.type];
            return m
              ? new Ja(
                  this,
                  {
                    kind: "constant",
                    value: m(i.value.value, s.value.value, c),
                  },
                  i.parameters
                )
              : i;
          }),
          (bn.prototype.evaluate = function (i, s, c, m, _, y) {
            return i.kind === "constant" ? i.value : i.evaluate(s, c, m, _, y);
          });
        var Bo = (function (i) {
            function s() {
              i.apply(this, arguments);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.possiblyEvaluate = function (c, m, _, y) {
                if (c.value === void 0)
                  return new Ja(this, { kind: "constant", value: void 0 }, m);
                if (c.expression.kind === "constant") {
                  var A = c.expression.evaluate(m, null, {}, _, y),
                    C =
                      c.property.specification.type === "resolvedImage" &&
                      typeof A != "string"
                        ? A.name
                        : A,
                    P = this._calculate(C, C, C, m);
                  return new Ja(this, { kind: "constant", value: P }, m);
                }
                if (c.expression.kind === "camera") {
                  var O = this._calculate(
                    c.expression.evaluate({ zoom: m.zoom - 1 }),
                    c.expression.evaluate({ zoom: m.zoom }),
                    c.expression.evaluate({ zoom: m.zoom + 1 }),
                    m
                  );
                  return new Ja(this, { kind: "constant", value: O }, m);
                }
                return new Ja(this, c.expression, m);
              }),
              (s.prototype.evaluate = function (c, m, _, y, A, C) {
                if (c.kind === "source") {
                  var P = c.evaluate(m, _, y, A, C);
                  return this._calculate(P, P, P, m);
                }
                return c.kind === "composite"
                  ? this._calculate(
                      c.evaluate({ zoom: Math.floor(m.zoom) - 1 }, _, y),
                      c.evaluate({ zoom: Math.floor(m.zoom) }, _, y),
                      c.evaluate({ zoom: Math.floor(m.zoom) + 1 }, _, y),
                      m
                    )
                  : c.value;
              }),
              (s.prototype._calculate = function (c, m, _, y) {
                return y.zoom > y.zoomHistory.lastIntegerZoom
                  ? { from: c, to: m }
                  : { from: _, to: m };
              }),
              (s.prototype.interpolate = function (c) {
                return c;
              }),
              s
            );
          })(bn),
          eo = function (i) {
            this.specification = i;
          };
        (eo.prototype.possiblyEvaluate = function (i, s, c, m) {
          if (i.value !== void 0) {
            if (i.expression.kind === "constant") {
              var _ = i.expression.evaluate(s, null, {}, c, m);
              return this._calculate(_, _, _, s);
            }
            return this._calculate(
              i.expression.evaluate(new ur(Math.floor(s.zoom - 1), s)),
              i.expression.evaluate(new ur(Math.floor(s.zoom), s)),
              i.expression.evaluate(new ur(Math.floor(s.zoom + 1), s)),
              s
            );
          }
        }),
          (eo.prototype._calculate = function (i, s, c, m) {
            return m.zoom > m.zoomHistory.lastIntegerZoom
              ? { from: i, to: s }
              : { from: c, to: s };
          }),
          (eo.prototype.interpolate = function (i) {
            return i;
          });
        var Es = function (i) {
          this.specification = i;
        };
        (Es.prototype.possiblyEvaluate = function (i, s, c, m) {
          return !!i.expression.evaluate(s, null, {}, c, m);
        }),
          (Es.prototype.interpolate = function () {
            return !1;
          });
        var Ni = function (i) {
          for (var s in ((this.properties = i),
          (this.defaultPropertyValues = {}),
          (this.defaultTransitionablePropertyValues = {}),
          (this.defaultTransitioningPropertyValues = {}),
          (this.defaultPossiblyEvaluatedValues = {}),
          (this.overridableProperties = []),
          i)) {
            var c = i[s];
            c.specification.overridable && this.overridableProperties.push(s);
            var m = (this.defaultPropertyValues[s] = new qo(c, void 0)),
              _ = (this.defaultTransitionablePropertyValues[s] = new $o(c));
            (this.defaultTransitioningPropertyValues[s] = _.untransitioned()),
              (this.defaultPossiblyEvaluatedValues[s] = m.possiblyEvaluate({}));
          }
        };
        vn("DataDrivenProperty", bn),
          vn("DataConstantProperty", Rn),
          vn("CrossFadedDataDrivenProperty", Bo),
          vn("CrossFadedProperty", eo),
          vn("ColorRampProperty", Es);
        var ls = (function (i) {
            function s(c, m) {
              if (
                (i.call(this),
                (this.id = c.id),
                (this.type = c.type),
                (this._featureFilter = {
                  filter: function () {
                    return !0;
                  },
                  needGeometry: !1,
                }),
                c.type !== "custom" &&
                  ((this.metadata = (c = c).metadata),
                  (this.minzoom = c.minzoom),
                  (this.maxzoom = c.maxzoom),
                  c.type !== "background" &&
                    ((this.source = c.source),
                    (this.sourceLayer = c["source-layer"]),
                    (this.filter = c.filter)),
                  m.layout && (this._unevaluatedLayout = new ss(m.layout)),
                  m.paint))
              ) {
                for (var _ in ((this._transitionablePaint = new Da(m.paint)),
                c.paint))
                  this.setPaintProperty(_, c.paint[_], { validate: !1 });
                for (var y in c.layout)
                  this.setLayoutProperty(y, c.layout[y], { validate: !1 });
                (this._transitioningPaint =
                  this._transitionablePaint.untransitioned()),
                  (this.paint = new Qc(m.paint));
              }
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.getCrossfadeParameters = function () {
                return this._crossfadeParameters;
              }),
              (s.prototype.getLayoutProperty = function (c) {
                return c === "visibility"
                  ? this.visibility
                  : this._unevaluatedLayout.getValue(c);
              }),
              (s.prototype.setLayoutProperty = function (c, m, _) {
                _ === void 0 && (_ = {}),
                  (m != null &&
                    this._validate(
                      Lu,
                      "layers." + this.id + ".layout." + c,
                      c,
                      m,
                      _
                    )) ||
                    (c !== "visibility"
                      ? this._unevaluatedLayout.setValue(c, m)
                      : (this.visibility = m));
              }),
              (s.prototype.getPaintProperty = function (c) {
                return ke(c, "-transition")
                  ? this._transitionablePaint.getTransition(c.slice(0, -11))
                  : this._transitionablePaint.getValue(c);
              }),
              (s.prototype.setPaintProperty = function (c, m, _) {
                if (
                  (_ === void 0 && (_ = {}),
                  m != null &&
                    this._validate(
                      _d,
                      "layers." + this.id + ".paint." + c,
                      c,
                      m,
                      _
                    ))
                )
                  return !1;
                if (ke(c, "-transition"))
                  return (
                    this._transitionablePaint.setTransition(
                      c.slice(0, -11),
                      m || void 0
                    ),
                    !1
                  );
                var y = this._transitionablePaint._values[c],
                  A =
                    y.property.specification["property-type"] ===
                    "cross-faded-data-driven",
                  C = y.value.isDataDriven(),
                  P = y.value;
                this._transitionablePaint.setValue(c, m),
                  this._handleSpecialPaintPropertyUpdate(c);
                var O = this._transitionablePaint._values[c].value;
                return (
                  O.isDataDriven() ||
                  C ||
                  A ||
                  this._handleOverridablePaintPropertyUpdate(c, P, O)
                );
              }),
              (s.prototype._handleSpecialPaintPropertyUpdate = function (c) {}),
              (s.prototype._handleOverridablePaintPropertyUpdate = function (
                c,
                m,
                _
              ) {
                return !1;
              }),
              (s.prototype.isHidden = function (c) {
                return (
                  !!(this.minzoom && c < this.minzoom) ||
                  !!(this.maxzoom && c >= this.maxzoom) ||
                  this.visibility === "none"
                );
              }),
              (s.prototype.updateTransitions = function (c) {
                this._transitioningPaint =
                  this._transitionablePaint.transitioned(
                    c,
                    this._transitioningPaint
                  );
              }),
              (s.prototype.hasTransition = function () {
                return this._transitioningPaint.hasTransition();
              }),
              (s.prototype.recalculate = function (c, m) {
                c.getCrossfadeParameters &&
                  (this._crossfadeParameters = c.getCrossfadeParameters()),
                  this._unevaluatedLayout &&
                    (this.layout = this._unevaluatedLayout.possiblyEvaluate(
                      c,
                      void 0,
                      m
                    )),
                  (this.paint = this._transitioningPaint.possiblyEvaluate(
                    c,
                    void 0,
                    m
                  ));
              }),
              (s.prototype.serialize = function () {
                var c = {
                  id: this.id,
                  type: this.type,
                  source: this.source,
                  "source-layer": this.sourceLayer,
                  metadata: this.metadata,
                  minzoom: this.minzoom,
                  maxzoom: this.maxzoom,
                  filter: this.filter,
                  layout:
                    this._unevaluatedLayout &&
                    this._unevaluatedLayout.serialize(),
                  paint:
                    this._transitionablePaint &&
                    this._transitionablePaint.serialize(),
                };
                return (
                  this.visibility &&
                    ((c.layout = c.layout || {}),
                    (c.layout.visibility = this.visibility)),
                  Ve(c, function (m, _) {
                    return !(
                      m === void 0 ||
                      (_ === "layout" && !Object.keys(m).length) ||
                      (_ === "paint" && !Object.keys(m).length)
                    );
                  })
                );
              }),
              (s.prototype._validate = function (c, m, _, y, A) {
                return (
                  A === void 0 && (A = {}),
                  (!A || A.validate !== !1) &&
                    Xl(
                      this,
                      c.call(Ou, {
                        key: m,
                        layerType: this.type,
                        objectKey: _,
                        value: y,
                        styleSpec: te,
                        style: { glyphs: !0, sprite: !0 },
                      })
                    )
                );
              }),
              (s.prototype.is3D = function () {
                return !1;
              }),
              (s.prototype.isTileClipped = function () {
                return !1;
              }),
              (s.prototype.hasOffscreenPass = function () {
                return !1;
              }),
              (s.prototype.resize = function () {}),
              (s.prototype.isStateDependent = function () {
                for (var c in this.paint._values) {
                  var m = this.paint.get(c);
                  if (
                    m instanceof Ja &&
                    gl(m.property.specification) &&
                    (m.value.kind === "source" ||
                      m.value.kind === "composite") &&
                    m.value.isStateDependent
                  )
                    return !0;
                }
                return !1;
              }),
              s
            );
          })(Fe),
          xl = {
            Int8: Int8Array,
            Uint8: Uint8Array,
            Int16: Int16Array,
            Uint16: Uint16Array,
            Int32: Int32Array,
            Uint32: Uint32Array,
            Float32: Float32Array,
          },
          Ac = function (i, s) {
            (this._structArray = i),
              (this._pos1 = s * this.size),
              (this._pos2 = this._pos1 / 2),
              (this._pos4 = this._pos1 / 4),
              (this._pos8 = this._pos1 / 8);
          },
          Yr = function () {
            (this.isTransferred = !1), (this.capacity = -1), this.resize(0);
          };
        function xa(i, s) {
          s === void 0 && (s = 1);
          var c = 0,
            m = 0;
          return {
            members: i.map(function (_) {
              var y = xl[_.type].BYTES_PER_ELEMENT,
                A = (c = C0(c, Math.max(s, y))),
                C = _.components || 1;
              return (
                (m = Math.max(m, y)),
                (c += y * C),
                { name: _.name, type: _.type, components: C, offset: A }
              );
            }),
            size: C0(c, Math.max(m, s)),
            alignment: s,
          };
        }
        function C0(i, s) {
          return Math.ceil(i / s) * s;
        }
        (Yr.serialize = function (i, s) {
          return (
            i._trim(),
            s && ((i.isTransferred = !0), s.push(i.arrayBuffer)),
            { length: i.length, arrayBuffer: i.arrayBuffer }
          );
        }),
          (Yr.deserialize = function (i) {
            var s = Object.create(this.prototype);
            return (
              (s.arrayBuffer = i.arrayBuffer),
              (s.length = i.length),
              (s.capacity = i.arrayBuffer.byteLength / s.bytesPerElement),
              s._refreshViews(),
              s
            );
          }),
          (Yr.prototype._trim = function () {
            this.length !== this.capacity &&
              ((this.capacity = this.length),
              (this.arrayBuffer = this.arrayBuffer.slice(
                0,
                this.length * this.bytesPerElement
              )),
              this._refreshViews());
          }),
          (Yr.prototype.clear = function () {
            this.length = 0;
          }),
          (Yr.prototype.resize = function (i) {
            this.reserve(i), (this.length = i);
          }),
          (Yr.prototype.reserve = function (i) {
            if (i > this.capacity) {
              (this.capacity = Math.max(i, Math.floor(5 * this.capacity), 128)),
                (this.arrayBuffer = new ArrayBuffer(
                  this.capacity * this.bytesPerElement
                ));
              var s = this.uint8;
              this._refreshViews(), s && this.uint8.set(s);
            }
          }),
          (Yr.prototype._refreshViews = function () {
            throw new Error(
              "_refreshViews() must be implemented by each concrete StructArray layout"
            );
          });
        var Zl = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.int16 = new Int16Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (c, m) {
              var _ = this.length;
              return this.resize(_ + 1), this.emplace(_, c, m);
            }),
            (s.prototype.emplace = function (c, m, _) {
              var y = 2 * c;
              return (this.int16[y + 0] = m), (this.int16[y + 1] = _), c;
            }),
            s
          );
        })(Yr);
        (Zl.prototype.bytesPerElement = 4), vn("StructArrayLayout2i4", Zl);
        var Td = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.int16 = new Int16Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (c, m, _, y) {
              var A = this.length;
              return this.resize(A + 1), this.emplace(A, c, m, _, y);
            }),
            (s.prototype.emplace = function (c, m, _, y, A) {
              var C = 4 * c;
              return (
                (this.int16[C + 0] = m),
                (this.int16[C + 1] = _),
                (this.int16[C + 2] = y),
                (this.int16[C + 3] = A),
                c
              );
            }),
            s
          );
        })(Yr);
        (Td.prototype.bytesPerElement = 8), vn("StructArrayLayout4i8", Td);
        var bl = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.int16 = new Int16Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (c, m, _, y, A, C) {
              var P = this.length;
              return this.resize(P + 1), this.emplace(P, c, m, _, y, A, C);
            }),
            (s.prototype.emplace = function (c, m, _, y, A, C, P) {
              var O = 6 * c;
              return (
                (this.int16[O + 0] = m),
                (this.int16[O + 1] = _),
                (this.int16[O + 2] = y),
                (this.int16[O + 3] = A),
                (this.int16[O + 4] = C),
                (this.int16[O + 5] = P),
                c
              );
            }),
            s
          );
        })(Yr);
        (bl.prototype.bytesPerElement = 12), vn("StructArrayLayout2i4i12", bl);
        var Fo = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.int16 = new Int16Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (c, m, _, y, A, C) {
              var P = this.length;
              return this.resize(P + 1), this.emplace(P, c, m, _, y, A, C);
            }),
            (s.prototype.emplace = function (c, m, _, y, A, C, P) {
              var O = 4 * c,
                k = 8 * c;
              return (
                (this.int16[O + 0] = m),
                (this.int16[O + 1] = _),
                (this.uint8[k + 4] = y),
                (this.uint8[k + 5] = A),
                (this.uint8[k + 6] = C),
                (this.uint8[k + 7] = P),
                c
              );
            }),
            s
          );
        })(Yr);
        (Fo.prototype.bytesPerElement = 8), vn("StructArrayLayout2i4ub8", Fo);
        var Jc = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.float32 = new Float32Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (c, m) {
              var _ = this.length;
              return this.resize(_ + 1), this.emplace(_, c, m);
            }),
            (s.prototype.emplace = function (c, m, _) {
              var y = 2 * c;
              return (this.float32[y + 0] = m), (this.float32[y + 1] = _), c;
            }),
            s
          );
        })(Yr);
        (Jc.prototype.bytesPerElement = 8), vn("StructArrayLayout2f8", Jc);
        var Hs = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.uint16 = new Uint16Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (c, m, _, y, A, C, P, O, k, U) {
              var W = this.length;
              return (
                this.resize(W + 1),
                this.emplace(W, c, m, _, y, A, C, P, O, k, U)
              );
            }),
            (s.prototype.emplace = function (c, m, _, y, A, C, P, O, k, U, W) {
              var $ = 10 * c;
              return (
                (this.uint16[$ + 0] = m),
                (this.uint16[$ + 1] = _),
                (this.uint16[$ + 2] = y),
                (this.uint16[$ + 3] = A),
                (this.uint16[$ + 4] = C),
                (this.uint16[$ + 5] = P),
                (this.uint16[$ + 6] = O),
                (this.uint16[$ + 7] = k),
                (this.uint16[$ + 8] = U),
                (this.uint16[$ + 9] = W),
                c
              );
            }),
            s
          );
        })(Yr);
        (Hs.prototype.bytesPerElement = 20), vn("StructArrayLayout10ui20", Hs);
        var Sd = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.int16 = new Int16Array(this.arrayBuffer)),
                (this.uint16 = new Uint16Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (
              c,
              m,
              _,
              y,
              A,
              C,
              P,
              O,
              k,
              U,
              W,
              $
            ) {
              var he = this.length;
              return (
                this.resize(he + 1),
                this.emplace(he, c, m, _, y, A, C, P, O, k, U, W, $)
              );
            }),
            (s.prototype.emplace = function (
              c,
              m,
              _,
              y,
              A,
              C,
              P,
              O,
              k,
              U,
              W,
              $,
              he
            ) {
              var me = 12 * c;
              return (
                (this.int16[me + 0] = m),
                (this.int16[me + 1] = _),
                (this.int16[me + 2] = y),
                (this.int16[me + 3] = A),
                (this.uint16[me + 4] = C),
                (this.uint16[me + 5] = P),
                (this.uint16[me + 6] = O),
                (this.uint16[me + 7] = k),
                (this.int16[me + 8] = U),
                (this.int16[me + 9] = W),
                (this.int16[me + 10] = $),
                (this.int16[me + 11] = he),
                c
              );
            }),
            s
          );
        })(Yr);
        (Sd.prototype.bytesPerElement = 24),
          vn("StructArrayLayout4i4ui4i24", Sd);
        var eu = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.float32 = new Float32Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (c, m, _) {
              var y = this.length;
              return this.resize(y + 1), this.emplace(y, c, m, _);
            }),
            (s.prototype.emplace = function (c, m, _, y) {
              var A = 3 * c;
              return (
                (this.float32[A + 0] = m),
                (this.float32[A + 1] = _),
                (this.float32[A + 2] = y),
                c
              );
            }),
            s
          );
        })(Yr);
        (eu.prototype.bytesPerElement = 12), vn("StructArrayLayout3f12", eu);
        var Fu = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.uint32 = new Uint32Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (c) {
              var m = this.length;
              return this.resize(m + 1), this.emplace(m, c);
            }),
            (s.prototype.emplace = function (c, m) {
              return (this.uint32[1 * c + 0] = m), c;
            }),
            s
          );
        })(Yr);
        (Fu.prototype.bytesPerElement = 4), vn("StructArrayLayout1ul4", Fu);
        var wd = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.int16 = new Int16Array(this.arrayBuffer)),
                (this.uint32 = new Uint32Array(this.arrayBuffer)),
                (this.uint16 = new Uint16Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (c, m, _, y, A, C, P, O, k) {
              var U = this.length;
              return (
                this.resize(U + 1), this.emplace(U, c, m, _, y, A, C, P, O, k)
              );
            }),
            (s.prototype.emplace = function (c, m, _, y, A, C, P, O, k, U) {
              var W = 10 * c,
                $ = 5 * c;
              return (
                (this.int16[W + 0] = m),
                (this.int16[W + 1] = _),
                (this.int16[W + 2] = y),
                (this.int16[W + 3] = A),
                (this.int16[W + 4] = C),
                (this.int16[W + 5] = P),
                (this.uint32[$ + 3] = O),
                (this.uint16[W + 8] = k),
                (this.uint16[W + 9] = U),
                c
              );
            }),
            s
          );
        })(Yr);
        (wd.prototype.bytesPerElement = 20),
          vn("StructArrayLayout6i1ul2ui20", wd);
        var Tc = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.int16 = new Int16Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (c, m, _, y, A, C) {
              var P = this.length;
              return this.resize(P + 1), this.emplace(P, c, m, _, y, A, C);
            }),
            (s.prototype.emplace = function (c, m, _, y, A, C, P) {
              var O = 6 * c;
              return (
                (this.int16[O + 0] = m),
                (this.int16[O + 1] = _),
                (this.int16[O + 2] = y),
                (this.int16[O + 3] = A),
                (this.int16[O + 4] = C),
                (this.int16[O + 5] = P),
                c
              );
            }),
            s
          );
        })(Yr);
        (Tc.prototype.bytesPerElement = 12),
          vn("StructArrayLayout2i2i2i12", Tc);
        var Sc = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.float32 = new Float32Array(this.arrayBuffer)),
                (this.int16 = new Int16Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (c, m, _, y, A) {
              var C = this.length;
              return this.resize(C + 1), this.emplace(C, c, m, _, y, A);
            }),
            (s.prototype.emplace = function (c, m, _, y, A, C) {
              var P = 4 * c,
                O = 8 * c;
              return (
                (this.float32[P + 0] = m),
                (this.float32[P + 1] = _),
                (this.float32[P + 2] = y),
                (this.int16[O + 6] = A),
                (this.int16[O + 7] = C),
                c
              );
            }),
            s
          );
        })(Yr);
        (Sc.prototype.bytesPerElement = 16),
          vn("StructArrayLayout2f1f2i16", Sc);
        var N0 = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.float32 = new Float32Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (c, m, _, y) {
              var A = this.length;
              return this.resize(A + 1), this.emplace(A, c, m, _, y);
            }),
            (s.prototype.emplace = function (c, m, _, y, A) {
              var C = 12 * c,
                P = 3 * c;
              return (
                (this.uint8[C + 0] = m),
                (this.uint8[C + 1] = _),
                (this.float32[P + 1] = y),
                (this.float32[P + 2] = A),
                c
              );
            }),
            s
          );
        })(Yr);
        (N0.prototype.bytesPerElement = 12), vn("StructArrayLayout2ub2f12", N0);
        var js = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.uint16 = new Uint16Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (c, m, _) {
              var y = this.length;
              return this.resize(y + 1), this.emplace(y, c, m, _);
            }),
            (s.prototype.emplace = function (c, m, _, y) {
              var A = 3 * c;
              return (
                (this.uint16[A + 0] = m),
                (this.uint16[A + 1] = _),
                (this.uint16[A + 2] = y),
                c
              );
            }),
            s
          );
        })(Yr);
        (js.prototype.bytesPerElement = 6), vn("StructArrayLayout3ui6", js);
        var As = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.int16 = new Int16Array(this.arrayBuffer)),
                (this.uint16 = new Uint16Array(this.arrayBuffer)),
                (this.uint32 = new Uint32Array(this.arrayBuffer)),
                (this.float32 = new Float32Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (
              c,
              m,
              _,
              y,
              A,
              C,
              P,
              O,
              k,
              U,
              W,
              $,
              he,
              me,
              Ie,
              Te,
              je
            ) {
              var Ze = this.length;
              return (
                this.resize(Ze + 1),
                this.emplace(
                  Ze,
                  c,
                  m,
                  _,
                  y,
                  A,
                  C,
                  P,
                  O,
                  k,
                  U,
                  W,
                  $,
                  he,
                  me,
                  Ie,
                  Te,
                  je
                )
              );
            }),
            (s.prototype.emplace = function (
              c,
              m,
              _,
              y,
              A,
              C,
              P,
              O,
              k,
              U,
              W,
              $,
              he,
              me,
              Ie,
              Te,
              je,
              Ze
            ) {
              var at = 24 * c,
                lt = 12 * c,
                yt = 48 * c;
              return (
                (this.int16[at + 0] = m),
                (this.int16[at + 1] = _),
                (this.uint16[at + 2] = y),
                (this.uint16[at + 3] = A),
                (this.uint32[lt + 2] = C),
                (this.uint32[lt + 3] = P),
                (this.uint32[lt + 4] = O),
                (this.uint16[at + 10] = k),
                (this.uint16[at + 11] = U),
                (this.uint16[at + 12] = W),
                (this.float32[lt + 7] = $),
                (this.float32[lt + 8] = he),
                (this.uint8[yt + 36] = me),
                (this.uint8[yt + 37] = Ie),
                (this.uint8[yt + 38] = Te),
                (this.uint32[lt + 10] = je),
                (this.int16[at + 22] = Ze),
                c
              );
            }),
            s
          );
        })(Yr);
        (As.prototype.bytesPerElement = 48),
          vn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48", As);
        var Cd = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.int16 = new Int16Array(this.arrayBuffer)),
                (this.uint16 = new Uint16Array(this.arrayBuffer)),
                (this.uint32 = new Uint32Array(this.arrayBuffer)),
                (this.float32 = new Float32Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (
              c,
              m,
              _,
              y,
              A,
              C,
              P,
              O,
              k,
              U,
              W,
              $,
              he,
              me,
              Ie,
              Te,
              je,
              Ze,
              at,
              lt,
              yt,
              zt,
              Qt,
              Mn,
              dn,
              Un,
              fn,
              Ar
            ) {
              var qn = this.length;
              return (
                this.resize(qn + 1),
                this.emplace(
                  qn,
                  c,
                  m,
                  _,
                  y,
                  A,
                  C,
                  P,
                  O,
                  k,
                  U,
                  W,
                  $,
                  he,
                  me,
                  Ie,
                  Te,
                  je,
                  Ze,
                  at,
                  lt,
                  yt,
                  zt,
                  Qt,
                  Mn,
                  dn,
                  Un,
                  fn,
                  Ar
                )
              );
            }),
            (s.prototype.emplace = function (
              c,
              m,
              _,
              y,
              A,
              C,
              P,
              O,
              k,
              U,
              W,
              $,
              he,
              me,
              Ie,
              Te,
              je,
              Ze,
              at,
              lt,
              yt,
              zt,
              Qt,
              Mn,
              dn,
              Un,
              fn,
              Ar,
              qn
            ) {
              var Tn = 34 * c,
                Mr = 17 * c;
              return (
                (this.int16[Tn + 0] = m),
                (this.int16[Tn + 1] = _),
                (this.int16[Tn + 2] = y),
                (this.int16[Tn + 3] = A),
                (this.int16[Tn + 4] = C),
                (this.int16[Tn + 5] = P),
                (this.int16[Tn + 6] = O),
                (this.int16[Tn + 7] = k),
                (this.uint16[Tn + 8] = U),
                (this.uint16[Tn + 9] = W),
                (this.uint16[Tn + 10] = $),
                (this.uint16[Tn + 11] = he),
                (this.uint16[Tn + 12] = me),
                (this.uint16[Tn + 13] = Ie),
                (this.uint16[Tn + 14] = Te),
                (this.uint16[Tn + 15] = je),
                (this.uint16[Tn + 16] = Ze),
                (this.uint16[Tn + 17] = at),
                (this.uint16[Tn + 18] = lt),
                (this.uint16[Tn + 19] = yt),
                (this.uint16[Tn + 20] = zt),
                (this.uint16[Tn + 21] = Qt),
                (this.uint16[Tn + 22] = Mn),
                (this.uint32[Mr + 12] = dn),
                (this.float32[Mr + 13] = Un),
                (this.float32[Mr + 14] = fn),
                (this.float32[Mr + 15] = Ar),
                (this.float32[Mr + 16] = qn),
                c
              );
            }),
            s
          );
        })(Yr);
        (Cd.prototype.bytesPerElement = 68),
          vn("StructArrayLayout8i15ui1ul4f68", Cd);
        var Yl = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.float32 = new Float32Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (c) {
              var m = this.length;
              return this.resize(m + 1), this.emplace(m, c);
            }),
            (s.prototype.emplace = function (c, m) {
              return (this.float32[1 * c + 0] = m), c;
            }),
            s
          );
        })(Yr);
        (Yl.prototype.bytesPerElement = 4), vn("StructArrayLayout1f4", Yl);
        var cs = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.int16 = new Int16Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (c, m, _) {
              var y = this.length;
              return this.resize(y + 1), this.emplace(y, c, m, _);
            }),
            (s.prototype.emplace = function (c, m, _, y) {
              var A = 3 * c;
              return (
                (this.int16[A + 0] = m),
                (this.int16[A + 1] = _),
                (this.int16[A + 2] = y),
                c
              );
            }),
            s
          );
        })(Yr);
        (cs.prototype.bytesPerElement = 6), vn("StructArrayLayout3i6", cs);
        var R0 = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.uint32 = new Uint32Array(this.arrayBuffer)),
                (this.uint16 = new Uint16Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (c, m, _) {
              var y = this.length;
              return this.resize(y + 1), this.emplace(y, c, m, _);
            }),
            (s.prototype.emplace = function (c, m, _, y) {
              var A = 4 * c;
              return (
                (this.uint32[2 * c + 0] = m),
                (this.uint16[A + 2] = _),
                (this.uint16[A + 3] = y),
                c
              );
            }),
            s
          );
        })(Yr);
        (R0.prototype.bytesPerElement = 8), vn("StructArrayLayout1ul2ui8", R0);
        var ku = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.uint16 = new Uint16Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (c, m) {
              var _ = this.length;
              return this.resize(_ + 1), this.emplace(_, c, m);
            }),
            (s.prototype.emplace = function (c, m, _) {
              var y = 2 * c;
              return (this.uint16[y + 0] = m), (this.uint16[y + 1] = _), c;
            }),
            s
          );
        })(Yr);
        (ku.prototype.bytesPerElement = 4), vn("StructArrayLayout2ui4", ku);
        var Nd = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.uint16 = new Uint16Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (c) {
              var m = this.length;
              return this.resize(m + 1), this.emplace(m, c);
            }),
            (s.prototype.emplace = function (c, m) {
              return (this.uint16[1 * c + 0] = m), c;
            }),
            s
          );
        })(Yr);
        (Nd.prototype.bytesPerElement = 2), vn("StructArrayLayout1ui2", Nd);
        var Rd = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._refreshViews = function () {
              (this.uint8 = new Uint8Array(this.arrayBuffer)),
                (this.float32 = new Float32Array(this.arrayBuffer));
            }),
            (s.prototype.emplaceBack = function (c, m, _, y) {
              var A = this.length;
              return this.resize(A + 1), this.emplace(A, c, m, _, y);
            }),
            (s.prototype.emplace = function (c, m, _, y, A) {
              var C = 4 * c;
              return (
                (this.float32[C + 0] = m),
                (this.float32[C + 1] = _),
                (this.float32[C + 2] = y),
                (this.float32[C + 3] = A),
                c
              );
            }),
            s
          );
        })(Yr);
        (Rd.prototype.bytesPerElement = 16), vn("StructArrayLayout4f16", Rd);
        var u = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s);
          var c = {
            anchorPointX: { configurable: !0 },
            anchorPointY: { configurable: !0 },
            x1: { configurable: !0 },
            y1: { configurable: !0 },
            x2: { configurable: !0 },
            y2: { configurable: !0 },
            featureIndex: { configurable: !0 },
            sourceLayerIndex: { configurable: !0 },
            bucketIndex: { configurable: !0 },
            anchorPoint: { configurable: !0 },
          };
          return (
            (c.anchorPointX.get = function () {
              return this._structArray.int16[this._pos2 + 0];
            }),
            (c.anchorPointY.get = function () {
              return this._structArray.int16[this._pos2 + 1];
            }),
            (c.x1.get = function () {
              return this._structArray.int16[this._pos2 + 2];
            }),
            (c.y1.get = function () {
              return this._structArray.int16[this._pos2 + 3];
            }),
            (c.x2.get = function () {
              return this._structArray.int16[this._pos2 + 4];
            }),
            (c.y2.get = function () {
              return this._structArray.int16[this._pos2 + 5];
            }),
            (c.featureIndex.get = function () {
              return this._structArray.uint32[this._pos4 + 3];
            }),
            (c.sourceLayerIndex.get = function () {
              return this._structArray.uint16[this._pos2 + 8];
            }),
            (c.bucketIndex.get = function () {
              return this._structArray.uint16[this._pos2 + 9];
            }),
            (c.anchorPoint.get = function () {
              return new E(this.anchorPointX, this.anchorPointY);
            }),
            Object.defineProperties(s.prototype, c),
            s
          );
        })(Ac);
        u.prototype.size = 20;
        var p = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype.get = function (c) {
              return new u(this, c);
            }),
            s
          );
        })(wd);
        vn("CollisionBoxArray", p);
        var d = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s);
          var c = {
            anchorX: { configurable: !0 },
            anchorY: { configurable: !0 },
            glyphStartIndex: { configurable: !0 },
            numGlyphs: { configurable: !0 },
            vertexStartIndex: { configurable: !0 },
            lineStartIndex: { configurable: !0 },
            lineLength: { configurable: !0 },
            segment: { configurable: !0 },
            lowerSize: { configurable: !0 },
            upperSize: { configurable: !0 },
            lineOffsetX: { configurable: !0 },
            lineOffsetY: { configurable: !0 },
            writingMode: { configurable: !0 },
            placedOrientation: { configurable: !0 },
            hidden: { configurable: !0 },
            crossTileID: { configurable: !0 },
            associatedIconIndex: { configurable: !0 },
          };
          return (
            (c.anchorX.get = function () {
              return this._structArray.int16[this._pos2 + 0];
            }),
            (c.anchorY.get = function () {
              return this._structArray.int16[this._pos2 + 1];
            }),
            (c.glyphStartIndex.get = function () {
              return this._structArray.uint16[this._pos2 + 2];
            }),
            (c.numGlyphs.get = function () {
              return this._structArray.uint16[this._pos2 + 3];
            }),
            (c.vertexStartIndex.get = function () {
              return this._structArray.uint32[this._pos4 + 2];
            }),
            (c.lineStartIndex.get = function () {
              return this._structArray.uint32[this._pos4 + 3];
            }),
            (c.lineLength.get = function () {
              return this._structArray.uint32[this._pos4 + 4];
            }),
            (c.segment.get = function () {
              return this._structArray.uint16[this._pos2 + 10];
            }),
            (c.lowerSize.get = function () {
              return this._structArray.uint16[this._pos2 + 11];
            }),
            (c.upperSize.get = function () {
              return this._structArray.uint16[this._pos2 + 12];
            }),
            (c.lineOffsetX.get = function () {
              return this._structArray.float32[this._pos4 + 7];
            }),
            (c.lineOffsetY.get = function () {
              return this._structArray.float32[this._pos4 + 8];
            }),
            (c.writingMode.get = function () {
              return this._structArray.uint8[this._pos1 + 36];
            }),
            (c.placedOrientation.get = function () {
              return this._structArray.uint8[this._pos1 + 37];
            }),
            (c.placedOrientation.set = function (m) {
              this._structArray.uint8[this._pos1 + 37] = m;
            }),
            (c.hidden.get = function () {
              return this._structArray.uint8[this._pos1 + 38];
            }),
            (c.hidden.set = function (m) {
              this._structArray.uint8[this._pos1 + 38] = m;
            }),
            (c.crossTileID.get = function () {
              return this._structArray.uint32[this._pos4 + 10];
            }),
            (c.crossTileID.set = function (m) {
              this._structArray.uint32[this._pos4 + 10] = m;
            }),
            (c.associatedIconIndex.get = function () {
              return this._structArray.int16[this._pos2 + 22];
            }),
            Object.defineProperties(s.prototype, c),
            s
          );
        })(Ac);
        d.prototype.size = 48;
        var g = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype.get = function (c) {
              return new d(this, c);
            }),
            s
          );
        })(As);
        vn("PlacedSymbolArray", g);
        var b = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s);
          var c = {
            anchorX: { configurable: !0 },
            anchorY: { configurable: !0 },
            rightJustifiedTextSymbolIndex: { configurable: !0 },
            centerJustifiedTextSymbolIndex: { configurable: !0 },
            leftJustifiedTextSymbolIndex: { configurable: !0 },
            verticalPlacedTextSymbolIndex: { configurable: !0 },
            placedIconSymbolIndex: { configurable: !0 },
            verticalPlacedIconSymbolIndex: { configurable: !0 },
            key: { configurable: !0 },
            textBoxStartIndex: { configurable: !0 },
            textBoxEndIndex: { configurable: !0 },
            verticalTextBoxStartIndex: { configurable: !0 },
            verticalTextBoxEndIndex: { configurable: !0 },
            iconBoxStartIndex: { configurable: !0 },
            iconBoxEndIndex: { configurable: !0 },
            verticalIconBoxStartIndex: { configurable: !0 },
            verticalIconBoxEndIndex: { configurable: !0 },
            featureIndex: { configurable: !0 },
            numHorizontalGlyphVertices: { configurable: !0 },
            numVerticalGlyphVertices: { configurable: !0 },
            numIconVertices: { configurable: !0 },
            numVerticalIconVertices: { configurable: !0 },
            useRuntimeCollisionCircles: { configurable: !0 },
            crossTileID: { configurable: !0 },
            textBoxScale: { configurable: !0 },
            textOffset0: { configurable: !0 },
            textOffset1: { configurable: !0 },
            collisionCircleDiameter: { configurable: !0 },
          };
          return (
            (c.anchorX.get = function () {
              return this._structArray.int16[this._pos2 + 0];
            }),
            (c.anchorY.get = function () {
              return this._structArray.int16[this._pos2 + 1];
            }),
            (c.rightJustifiedTextSymbolIndex.get = function () {
              return this._structArray.int16[this._pos2 + 2];
            }),
            (c.centerJustifiedTextSymbolIndex.get = function () {
              return this._structArray.int16[this._pos2 + 3];
            }),
            (c.leftJustifiedTextSymbolIndex.get = function () {
              return this._structArray.int16[this._pos2 + 4];
            }),
            (c.verticalPlacedTextSymbolIndex.get = function () {
              return this._structArray.int16[this._pos2 + 5];
            }),
            (c.placedIconSymbolIndex.get = function () {
              return this._structArray.int16[this._pos2 + 6];
            }),
            (c.verticalPlacedIconSymbolIndex.get = function () {
              return this._structArray.int16[this._pos2 + 7];
            }),
            (c.key.get = function () {
              return this._structArray.uint16[this._pos2 + 8];
            }),
            (c.textBoxStartIndex.get = function () {
              return this._structArray.uint16[this._pos2 + 9];
            }),
            (c.textBoxEndIndex.get = function () {
              return this._structArray.uint16[this._pos2 + 10];
            }),
            (c.verticalTextBoxStartIndex.get = function () {
              return this._structArray.uint16[this._pos2 + 11];
            }),
            (c.verticalTextBoxEndIndex.get = function () {
              return this._structArray.uint16[this._pos2 + 12];
            }),
            (c.iconBoxStartIndex.get = function () {
              return this._structArray.uint16[this._pos2 + 13];
            }),
            (c.iconBoxEndIndex.get = function () {
              return this._structArray.uint16[this._pos2 + 14];
            }),
            (c.verticalIconBoxStartIndex.get = function () {
              return this._structArray.uint16[this._pos2 + 15];
            }),
            (c.verticalIconBoxEndIndex.get = function () {
              return this._structArray.uint16[this._pos2 + 16];
            }),
            (c.featureIndex.get = function () {
              return this._structArray.uint16[this._pos2 + 17];
            }),
            (c.numHorizontalGlyphVertices.get = function () {
              return this._structArray.uint16[this._pos2 + 18];
            }),
            (c.numVerticalGlyphVertices.get = function () {
              return this._structArray.uint16[this._pos2 + 19];
            }),
            (c.numIconVertices.get = function () {
              return this._structArray.uint16[this._pos2 + 20];
            }),
            (c.numVerticalIconVertices.get = function () {
              return this._structArray.uint16[this._pos2 + 21];
            }),
            (c.useRuntimeCollisionCircles.get = function () {
              return this._structArray.uint16[this._pos2 + 22];
            }),
            (c.crossTileID.get = function () {
              return this._structArray.uint32[this._pos4 + 12];
            }),
            (c.crossTileID.set = function (m) {
              this._structArray.uint32[this._pos4 + 12] = m;
            }),
            (c.textBoxScale.get = function () {
              return this._structArray.float32[this._pos4 + 13];
            }),
            (c.textOffset0.get = function () {
              return this._structArray.float32[this._pos4 + 14];
            }),
            (c.textOffset1.get = function () {
              return this._structArray.float32[this._pos4 + 15];
            }),
            (c.collisionCircleDiameter.get = function () {
              return this._structArray.float32[this._pos4 + 16];
            }),
            Object.defineProperties(s.prototype, c),
            s
          );
        })(Ac);
        b.prototype.size = 68;
        var S = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype.get = function (c) {
              return new b(this, c);
            }),
            s
          );
        })(Cd);
        vn("SymbolInstanceArray", S);
        var w = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype.getoffsetX = function (c) {
              return this.float32[1 * c + 0];
            }),
            s
          );
        })(Yl);
        vn("GlyphOffsetArray", w);
        var M = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype.getx = function (c) {
              return this.int16[3 * c + 0];
            }),
            (s.prototype.gety = function (c) {
              return this.int16[3 * c + 1];
            }),
            (s.prototype.gettileUnitDistanceFromAnchor = function (c) {
              return this.int16[3 * c + 2];
            }),
            s
          );
        })(cs);
        vn("SymbolLineVertexArray", M);
        var B = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s);
          var c = {
            featureIndex: { configurable: !0 },
            sourceLayerIndex: { configurable: !0 },
            bucketIndex: { configurable: !0 },
          };
          return (
            (c.featureIndex.get = function () {
              return this._structArray.uint32[this._pos4 + 0];
            }),
            (c.sourceLayerIndex.get = function () {
              return this._structArray.uint16[this._pos2 + 2];
            }),
            (c.bucketIndex.get = function () {
              return this._structArray.uint16[this._pos2 + 3];
            }),
            Object.defineProperties(s.prototype, c),
            s
          );
        })(Ac);
        B.prototype.size = 8;
        var V = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype.get = function (c) {
              return new B(this, c);
            }),
            s
          );
        })(R0);
        vn("FeatureIndexArray", V);
        var J = xa(
            [{ name: "a_pos", components: 2, type: "Int16" }],
            4
          ).members,
          ne = function (i) {
            i === void 0 && (i = []), (this.segments = i);
          };
        function re(i, s) {
          return (
            256 * (i = F(Math.floor(i), 0, 255)) + F(Math.floor(s), 0, 255)
          );
        }
        (ne.prototype.prepareSegment = function (i, s, c, m) {
          var _ = this.segments[this.segments.length - 1];
          return (
            i > ne.MAX_VERTEX_ARRAY_LENGTH &&
              He(
                "Max vertices per segment is " +
                  ne.MAX_VERTEX_ARRAY_LENGTH +
                  ": bucket requested " +
                  i
              ),
            (!_ ||
              _.vertexLength + i > ne.MAX_VERTEX_ARRAY_LENGTH ||
              _.sortKey !== m) &&
              ((_ = {
                vertexOffset: s.length,
                primitiveOffset: c.length,
                vertexLength: 0,
                primitiveLength: 0,
              }),
              m !== void 0 && (_.sortKey = m),
              this.segments.push(_)),
            _
          );
        }),
          (ne.prototype.get = function () {
            return this.segments;
          }),
          (ne.prototype.destroy = function () {
            for (var i = 0, s = this.segments; i < s.length; i += 1) {
              var c = s[i];
              for (var m in c.vaos) c.vaos[m].destroy();
            }
          }),
          (ne.simpleSegment = function (i, s, c, m) {
            return new ne([
              {
                vertexOffset: i,
                primitiveOffset: s,
                vertexLength: c,
                primitiveLength: m,
                vaos: {},
                sortKey: 0,
              },
            ]);
          }),
          (ne.MAX_VERTEX_ARRAY_LENGTH = Math.pow(2, 16) - 1),
          vn("SegmentVector", ne);
        var _e = xa([
            { name: "a_pattern_from", components: 4, type: "Uint16" },
            { name: "a_pattern_to", components: 4, type: "Uint16" },
            { name: "a_pixel_ratio_from", components: 1, type: "Uint16" },
            { name: "a_pixel_ratio_to", components: 1, type: "Uint16" },
          ]),
          pe = h(function (i) {
            i.exports = function (s, c) {
              var m, _, y, A, C, P, O, k;
              for (
                _ = s.length - (m = 3 & s.length),
                  y = c,
                  C = 3432918353,
                  P = 461845907,
                  k = 0;
                k < _;

              )
                (O =
                  (255 & s.charCodeAt(k)) |
                  ((255 & s.charCodeAt(++k)) << 8) |
                  ((255 & s.charCodeAt(++k)) << 16) |
                  ((255 & s.charCodeAt(++k)) << 24)),
                  ++k,
                  (y =
                    27492 +
                    (65535 &
                      (A =
                        (5 *
                          (65535 &
                            (y =
                              ((y ^= O =
                                ((65535 &
                                  (O =
                                    ((O =
                                      ((65535 & O) * C +
                                        ((((O >>> 16) * C) & 65535) << 16)) &
                                      4294967295) <<
                                      15) |
                                    (O >>> 17))) *
                                  P +
                                  ((((O >>> 16) * P) & 65535) << 16)) &
                                4294967295) <<
                                13) |
                              (y >>> 19))) +
                          (((5 * (y >>> 16)) & 65535) << 16)) &
                        4294967295)) +
                    (((58964 + (A >>> 16)) & 65535) << 16));
              switch (((O = 0), m)) {
                case 3:
                  O ^= (255 & s.charCodeAt(k + 2)) << 16;
                case 2:
                  O ^= (255 & s.charCodeAt(k + 1)) << 8;
                case 1:
                  y ^= O =
                    ((65535 &
                      (O =
                        ((O =
                          ((65535 & (O ^= 255 & s.charCodeAt(k))) * C +
                            ((((O >>> 16) * C) & 65535) << 16)) &
                          4294967295) <<
                          15) |
                        (O >>> 17))) *
                      P +
                      ((((O >>> 16) * P) & 65535) << 16)) &
                    4294967295;
              }
              return (
                (y ^= s.length),
                (y =
                  (2246822507 * (65535 & (y ^= y >>> 16)) +
                    (((2246822507 * (y >>> 16)) & 65535) << 16)) &
                  4294967295),
                (y =
                  (3266489909 * (65535 & (y ^= y >>> 13)) +
                    (((3266489909 * (y >>> 16)) & 65535) << 16)) &
                  4294967295),
                (y ^= y >>> 16) >>> 0
              );
            };
          }),
          Ce = h(function (i) {
            i.exports = function (s, c) {
              for (var m, _ = s.length, y = c ^ _, A = 0; _ >= 4; )
                (m =
                  1540483477 *
                    (65535 &
                      (m =
                        (255 & s.charCodeAt(A)) |
                        ((255 & s.charCodeAt(++A)) << 8) |
                        ((255 & s.charCodeAt(++A)) << 16) |
                        ((255 & s.charCodeAt(++A)) << 24))) +
                  (((1540483477 * (m >>> 16)) & 65535) << 16)),
                  (y =
                    (1540483477 * (65535 & y) +
                      (((1540483477 * (y >>> 16)) & 65535) << 16)) ^
                    (m =
                      1540483477 * (65535 & (m ^= m >>> 24)) +
                      (((1540483477 * (m >>> 16)) & 65535) << 16))),
                  (_ -= 4),
                  ++A;
              switch (_) {
                case 3:
                  y ^= (255 & s.charCodeAt(A + 2)) << 16;
                case 2:
                  y ^= (255 & s.charCodeAt(A + 1)) << 8;
                case 1:
                  y =
                    1540483477 * (65535 & (y ^= 255 & s.charCodeAt(A))) +
                    (((1540483477 * (y >>> 16)) & 65535) << 16);
              }
              return (
                (y =
                  1540483477 * (65535 & (y ^= y >>> 13)) +
                  (((1540483477 * (y >>> 16)) & 65535) << 16)),
                (y ^= y >>> 15) >>> 0
              );
            };
          }),
          de = pe,
          we = Ce;
        (de.murmur3 = pe), (de.murmur2 = we);
        var De = function () {
          (this.ids = []), (this.positions = []), (this.indexed = !1);
        };
        (De.prototype.add = function (i, s, c, m) {
          this.ids.push(st(i)), this.positions.push(s, c, m);
        }),
          (De.prototype.getPositions = function (i) {
            for (var s = st(i), c = 0, m = this.ids.length - 1; c < m; ) {
              var _ = (c + m) >> 1;
              this.ids[_] >= s ? (m = _) : (c = _ + 1);
            }
            for (var y = []; this.ids[c] === s; )
              y.push({
                index: this.positions[3 * c],
                start: this.positions[3 * c + 1],
                end: this.positions[3 * c + 2],
              }),
                c++;
            return y;
          }),
          (De.serialize = function (i, s) {
            var c = new Float64Array(i.ids),
              m = new Uint32Array(i.positions);
            return (
              (function _(y, A, C, P) {
                for (; C < P; ) {
                  for (var O = y[(C + P) >> 1], k = C - 1, U = P + 1; ; ) {
                    do k++;
                    while (y[k] < O);
                    do U--;
                    while (y[U] > O);
                    if (k >= U) break;
                    Je(y, k, U),
                      Je(A, 3 * k, 3 * U),
                      Je(A, 3 * k + 1, 3 * U + 1),
                      Je(A, 3 * k + 2, 3 * U + 2);
                  }
                  U - C < P - U
                    ? (_(y, A, C, U), (C = U + 1))
                    : (_(y, A, U + 1, P), (P = U));
                }
              })(c, m, 0, c.length - 1),
              s && s.push(c.buffer, m.buffer),
              { ids: c, positions: m }
            );
          }),
          (De.deserialize = function (i) {
            var s = new De();
            return (
              (s.ids = i.ids), (s.positions = i.positions), (s.indexed = !0), s
            );
          });
        var Ge = Math.pow(2, 53) - 1;
        function st(i) {
          var s = +i;
          return !isNaN(s) && s <= Ge ? s : de(String(i));
        }
        function Je(i, s, c) {
          var m = i[s];
          (i[s] = i[c]), (i[c] = m);
        }
        vn("FeaturePositionMap", De);
        var ht = function (i, s) {
            (this.gl = i.gl), (this.location = s);
          },
          Et = (function (i) {
            function s(c, m) {
              i.call(this, c, m), (this.current = 0);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.set = function (c) {
                this.current !== c &&
                  ((this.current = c), this.gl.uniform1i(this.location, c));
              }),
              s
            );
          })(ht),
          jt = (function (i) {
            function s(c, m) {
              i.call(this, c, m), (this.current = 0);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.set = function (c) {
                this.current !== c &&
                  ((this.current = c), this.gl.uniform1f(this.location, c));
              }),
              s
            );
          })(ht),
          Ft = (function (i) {
            function s(c, m) {
              i.call(this, c, m), (this.current = [0, 0]);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.set = function (c) {
                (c[0] === this.current[0] && c[1] === this.current[1]) ||
                  ((this.current = c),
                  this.gl.uniform2f(this.location, c[0], c[1]));
              }),
              s
            );
          })(ht),
          sn = (function (i) {
            function s(c, m) {
              i.call(this, c, m), (this.current = [0, 0, 0]);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.set = function (c) {
                (c[0] === this.current[0] &&
                  c[1] === this.current[1] &&
                  c[2] === this.current[2]) ||
                  ((this.current = c),
                  this.gl.uniform3f(this.location, c[0], c[1], c[2]));
              }),
              s
            );
          })(ht),
          In = (function (i) {
            function s(c, m) {
              i.call(this, c, m), (this.current = [0, 0, 0, 0]);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.set = function (c) {
                (c[0] === this.current[0] &&
                  c[1] === this.current[1] &&
                  c[2] === this.current[2] &&
                  c[3] === this.current[3]) ||
                  ((this.current = c),
                  this.gl.uniform4f(this.location, c[0], c[1], c[2], c[3]));
              }),
              s
            );
          })(ht),
          Bn = (function (i) {
            function s(c, m) {
              i.call(this, c, m), (this.current = br.transparent);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.set = function (c) {
                (c.r === this.current.r &&
                  c.g === this.current.g &&
                  c.b === this.current.b &&
                  c.a === this.current.a) ||
                  ((this.current = c),
                  this.gl.uniform4f(this.location, c.r, c.g, c.b, c.a));
              }),
              s
            );
          })(ht),
          Dn = new Float32Array(16),
          Fr = (function (i) {
            function s(c, m) {
              i.call(this, c, m), (this.current = Dn);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.set = function (c) {
                if (c[12] !== this.current[12] || c[0] !== this.current[0])
                  return (
                    (this.current = c),
                    void this.gl.uniformMatrix4fv(this.location, !1, c)
                  );
                for (var m = 1; m < 16; m++)
                  if (c[m] !== this.current[m]) {
                    (this.current = c),
                      this.gl.uniformMatrix4fv(this.location, !1, c);
                    break;
                  }
              }),
              s
            );
          })(ht);
        function pn(i) {
          return [re(255 * i.r, 255 * i.g), re(255 * i.b, 255 * i.a)];
        }
        var $n = function (i, s, c) {
          (this.value = i),
            (this.uniformNames = s.map(function (m) {
              return "u_" + m;
            })),
            (this.type = c);
        };
        ($n.prototype.setUniform = function (i, s, c) {
          i.set(c.constantOr(this.value));
        }),
          ($n.prototype.getBinding = function (i, s, c) {
            return this.type === "color" ? new Bn(i, s) : new jt(i, s);
          });
        var dr = function (i, s) {
          (this.uniformNames = s.map(function (c) {
            return "u_" + c;
          })),
            (this.patternFrom = null),
            (this.patternTo = null),
            (this.pixelRatioFrom = 1),
            (this.pixelRatioTo = 1);
        };
        (dr.prototype.setConstantPatternPositions = function (i, s) {
          (this.pixelRatioFrom = s.pixelRatio),
            (this.pixelRatioTo = i.pixelRatio),
            (this.patternFrom = s.tlbr),
            (this.patternTo = i.tlbr);
        }),
          (dr.prototype.setUniform = function (i, s, c, m) {
            var _ =
              m === "u_pattern_to"
                ? this.patternTo
                : m === "u_pattern_from"
                ? this.patternFrom
                : m === "u_pixel_ratio_to"
                ? this.pixelRatioTo
                : m === "u_pixel_ratio_from"
                ? this.pixelRatioFrom
                : null;
            _ && i.set(_);
          }),
          (dr.prototype.getBinding = function (i, s, c) {
            return c.substr(0, 9) === "u_pattern" ? new In(i, s) : new jt(i, s);
          });
        var Yn = function (i, s, c, m) {
          (this.expression = i),
            (this.type = c),
            (this.maxValue = 0),
            (this.paintVertexAttributes = s.map(function (_) {
              return {
                name: "a_" + _,
                type: "Float32",
                components: c === "color" ? 2 : 1,
                offset: 0,
              };
            })),
            (this.paintVertexArray = new m());
        };
        (Yn.prototype.populatePaintArray = function (i, s, c, m, _) {
          var y = this.paintVertexArray.length,
            A = this.expression.evaluate(new ur(0), s, {}, m, [], _);
          this.paintVertexArray.resize(i), this._setPaintValue(y, i, A);
        }),
          (Yn.prototype.updatePaintArray = function (i, s, c, m) {
            var _ = this.expression.evaluate({ zoom: 0 }, c, m);
            this._setPaintValue(i, s, _);
          }),
          (Yn.prototype._setPaintValue = function (i, s, c) {
            if (this.type === "color")
              for (var m = pn(c), _ = i; _ < s; _++)
                this.paintVertexArray.emplace(_, m[0], m[1]);
            else {
              for (var y = i; y < s; y++) this.paintVertexArray.emplace(y, c);
              this.maxValue = Math.max(this.maxValue, Math.abs(c));
            }
          }),
          (Yn.prototype.upload = function (i) {
            this.paintVertexArray &&
              this.paintVertexArray.arrayBuffer &&
              (this.paintVertexBuffer && this.paintVertexBuffer.buffer
                ? this.paintVertexBuffer.updateData(this.paintVertexArray)
                : (this.paintVertexBuffer = i.createVertexBuffer(
                    this.paintVertexArray,
                    this.paintVertexAttributes,
                    this.expression.isStateDependent
                  )));
          }),
          (Yn.prototype.destroy = function () {
            this.paintVertexBuffer && this.paintVertexBuffer.destroy();
          });
        var Xn = function (i, s, c, m, _, y) {
          (this.expression = i),
            (this.uniformNames = s.map(function (A) {
              return "u_" + A + "_t";
            })),
            (this.type = c),
            (this.useIntegerZoom = m),
            (this.zoom = _),
            (this.maxValue = 0),
            (this.paintVertexAttributes = s.map(function (A) {
              return {
                name: "a_" + A,
                type: "Float32",
                components: c === "color" ? 4 : 2,
                offset: 0,
              };
            })),
            (this.paintVertexArray = new y());
        };
        (Xn.prototype.populatePaintArray = function (i, s, c, m, _) {
          var y = this.expression.evaluate(new ur(this.zoom), s, {}, m, [], _),
            A = this.expression.evaluate(
              new ur(this.zoom + 1),
              s,
              {},
              m,
              [],
              _
            ),
            C = this.paintVertexArray.length;
          this.paintVertexArray.resize(i), this._setPaintValue(C, i, y, A);
        }),
          (Xn.prototype.updatePaintArray = function (i, s, c, m) {
            var _ = this.expression.evaluate({ zoom: this.zoom }, c, m),
              y = this.expression.evaluate({ zoom: this.zoom + 1 }, c, m);
            this._setPaintValue(i, s, _, y);
          }),
          (Xn.prototype._setPaintValue = function (i, s, c, m) {
            if (this.type === "color")
              for (var _ = pn(c), y = pn(m), A = i; A < s; A++)
                this.paintVertexArray.emplace(A, _[0], _[1], y[0], y[1]);
            else {
              for (var C = i; C < s; C++)
                this.paintVertexArray.emplace(C, c, m);
              this.maxValue = Math.max(this.maxValue, Math.abs(c), Math.abs(m));
            }
          }),
          (Xn.prototype.upload = function (i) {
            this.paintVertexArray &&
              this.paintVertexArray.arrayBuffer &&
              (this.paintVertexBuffer && this.paintVertexBuffer.buffer
                ? this.paintVertexBuffer.updateData(this.paintVertexArray)
                : (this.paintVertexBuffer = i.createVertexBuffer(
                    this.paintVertexArray,
                    this.paintVertexAttributes,
                    this.expression.isStateDependent
                  )));
          }),
          (Xn.prototype.destroy = function () {
            this.paintVertexBuffer && this.paintVertexBuffer.destroy();
          }),
          (Xn.prototype.setUniform = function (i, s) {
            var c = this.useIntegerZoom ? Math.floor(s.zoom) : s.zoom,
              m = F(
                this.expression.interpolationFactor(
                  c,
                  this.zoom,
                  this.zoom + 1
                ),
                0,
                1
              );
            i.set(m);
          }),
          (Xn.prototype.getBinding = function (i, s, c) {
            return new jt(i, s);
          });
        var cr = function (i, s, c, m, _, y) {
          (this.expression = i),
            (this.type = s),
            (this.useIntegerZoom = c),
            (this.zoom = m),
            (this.layerId = y),
            (this.zoomInPaintVertexArray = new _()),
            (this.zoomOutPaintVertexArray = new _());
        };
        (cr.prototype.populatePaintArray = function (i, s, c) {
          var m = this.zoomInPaintVertexArray.length;
          this.zoomInPaintVertexArray.resize(i),
            this.zoomOutPaintVertexArray.resize(i),
            this._setPaintValues(
              m,
              i,
              s.patterns && s.patterns[this.layerId],
              c
            );
        }),
          (cr.prototype.updatePaintArray = function (i, s, c, m, _) {
            this._setPaintValues(
              i,
              s,
              c.patterns && c.patterns[this.layerId],
              _
            );
          }),
          (cr.prototype._setPaintValues = function (i, s, c, m) {
            if (m && c) {
              var _ = m[c.min],
                y = m[c.mid],
                A = m[c.max];
              if (_ && y && A)
                for (var C = i; C < s; C++)
                  this.zoomInPaintVertexArray.emplace(
                    C,
                    y.tl[0],
                    y.tl[1],
                    y.br[0],
                    y.br[1],
                    _.tl[0],
                    _.tl[1],
                    _.br[0],
                    _.br[1],
                    y.pixelRatio,
                    _.pixelRatio
                  ),
                    this.zoomOutPaintVertexArray.emplace(
                      C,
                      y.tl[0],
                      y.tl[1],
                      y.br[0],
                      y.br[1],
                      A.tl[0],
                      A.tl[1],
                      A.br[0],
                      A.br[1],
                      y.pixelRatio,
                      A.pixelRatio
                    );
            }
          }),
          (cr.prototype.upload = function (i) {
            this.zoomInPaintVertexArray &&
              this.zoomInPaintVertexArray.arrayBuffer &&
              this.zoomOutPaintVertexArray &&
              this.zoomOutPaintVertexArray.arrayBuffer &&
              ((this.zoomInPaintVertexBuffer = i.createVertexBuffer(
                this.zoomInPaintVertexArray,
                _e.members,
                this.expression.isStateDependent
              )),
              (this.zoomOutPaintVertexBuffer = i.createVertexBuffer(
                this.zoomOutPaintVertexArray,
                _e.members,
                this.expression.isStateDependent
              )));
          }),
          (cr.prototype.destroy = function () {
            this.zoomOutPaintVertexBuffer &&
              this.zoomOutPaintVertexBuffer.destroy(),
              this.zoomInPaintVertexBuffer &&
                this.zoomInPaintVertexBuffer.destroy();
          });
        var Gn = function (i, s, c) {
          (this.binders = {}), (this._buffers = []);
          var m = [];
          for (var _ in i.paint._values)
            if (c(_)) {
              var y = i.paint.get(_);
              if (y instanceof Ja && gl(y.property.specification)) {
                var A = na(_, i.type),
                  C = y.value,
                  P = y.property.specification.type,
                  O = y.property.useIntegerZoom,
                  k = y.property.specification["property-type"],
                  U = k === "cross-faded" || k === "cross-faded-data-driven";
                if (C.kind === "constant")
                  (this.binders[_] = U
                    ? new dr(C.value, A)
                    : new $n(C.value, A, P)),
                    m.push("/u_" + _);
                else if (C.kind === "source" || U) {
                  var W = Mi(_, P, "source");
                  (this.binders[_] = U
                    ? new cr(C, P, O, s, W, i.id)
                    : new Yn(C, A, P, W)),
                    m.push("/a_" + _);
                } else {
                  var $ = Mi(_, P, "composite");
                  (this.binders[_] = new Xn(C, A, P, O, s, $)),
                    m.push("/z_" + _);
                }
              }
            }
          this.cacheKey = m.sort().join("");
        };
        (Gn.prototype.getMaxValue = function (i) {
          var s = this.binders[i];
          return s instanceof Yn || s instanceof Xn ? s.maxValue : 0;
        }),
          (Gn.prototype.populatePaintArrays = function (i, s, c, m, _) {
            for (var y in this.binders) {
              var A = this.binders[y];
              (A instanceof Yn || A instanceof Xn || A instanceof cr) &&
                A.populatePaintArray(i, s, c, m, _);
            }
          }),
          (Gn.prototype.setConstantPatternPositions = function (i, s) {
            for (var c in this.binders) {
              var m = this.binders[c];
              m instanceof dr && m.setConstantPatternPositions(i, s);
            }
          }),
          (Gn.prototype.updatePaintArrays = function (i, s, c, m, _) {
            var y = !1;
            for (var A in i)
              for (var C = 0, P = s.getPositions(A); C < P.length; C += 1) {
                var O = P[C],
                  k = c.feature(O.index);
                for (var U in this.binders) {
                  var W = this.binders[U];
                  if (
                    (W instanceof Yn || W instanceof Xn || W instanceof cr) &&
                    W.expression.isStateDependent === !0
                  ) {
                    var $ = m.paint.get(U);
                    (W.expression = $.value),
                      W.updatePaintArray(O.start, O.end, k, i[A], _),
                      (y = !0);
                  }
                }
              }
            return y;
          }),
          (Gn.prototype.defines = function () {
            var i = [];
            for (var s in this.binders) {
              var c = this.binders[s];
              (c instanceof $n || c instanceof dr) &&
                i.push.apply(
                  i,
                  c.uniformNames.map(function (m) {
                    return "#define HAS_UNIFORM_" + m;
                  })
                );
            }
            return i;
          }),
          (Gn.prototype.getBinderAttributes = function () {
            var i = [];
            for (var s in this.binders) {
              var c = this.binders[s];
              if (c instanceof Yn || c instanceof Xn)
                for (var m = 0; m < c.paintVertexAttributes.length; m++)
                  i.push(c.paintVertexAttributes[m].name);
              else if (c instanceof cr)
                for (var _ = 0; _ < _e.members.length; _++)
                  i.push(_e.members[_].name);
            }
            return i;
          }),
          (Gn.prototype.getBinderUniforms = function () {
            var i = [];
            for (var s in this.binders) {
              var c = this.binders[s];
              if (c instanceof $n || c instanceof dr || c instanceof Xn)
                for (var m = 0, _ = c.uniformNames; m < _.length; m += 1)
                  i.push(_[m]);
            }
            return i;
          }),
          (Gn.prototype.getPaintVertexBuffers = function () {
            return this._buffers;
          }),
          (Gn.prototype.getUniforms = function (i, s) {
            var c = [];
            for (var m in this.binders) {
              var _ = this.binders[m];
              if (_ instanceof $n || _ instanceof dr || _ instanceof Xn)
                for (var y = 0, A = _.uniformNames; y < A.length; y += 1) {
                  var C = A[y];
                  if (s[C]) {
                    var P = _.getBinding(i, s[C], C);
                    c.push({ name: C, property: m, binding: P });
                  }
                }
            }
            return c;
          }),
          (Gn.prototype.setUniforms = function (i, s, c, m) {
            for (var _ = 0, y = s; _ < y.length; _ += 1) {
              var A = y[_],
                C = A.name,
                P = A.property;
              this.binders[P].setUniform(A.binding, m, c.get(P), C);
            }
          }),
          (Gn.prototype.updatePaintBuffers = function (i) {
            for (var s in ((this._buffers = []), this.binders)) {
              var c = this.binders[s];
              if (i && c instanceof cr) {
                var m =
                  i.fromScale === 2
                    ? c.zoomInPaintVertexBuffer
                    : c.zoomOutPaintVertexBuffer;
                m && this._buffers.push(m);
              } else
                (c instanceof Yn || c instanceof Xn) &&
                  c.paintVertexBuffer &&
                  this._buffers.push(c.paintVertexBuffer);
            }
          }),
          (Gn.prototype.upload = function (i) {
            for (var s in this.binders) {
              var c = this.binders[s];
              (c instanceof Yn || c instanceof Xn || c instanceof cr) &&
                c.upload(i);
            }
            this.updatePaintBuffers();
          }),
          (Gn.prototype.destroy = function () {
            for (var i in this.binders) {
              var s = this.binders[i];
              (s instanceof Yn || s instanceof Xn || s instanceof cr) &&
                s.destroy();
            }
          });
        var Hn = function (i, s, c) {
          c === void 0 &&
            (c = function () {
              return !0;
            }),
            (this.programConfigurations = {});
          for (var m = 0, _ = i; m < _.length; m += 1) {
            var y = _[m];
            this.programConfigurations[y.id] = new Gn(y, s, c);
          }
          (this.needsUpload = !1),
            (this._featureMap = new De()),
            (this._bufferOffset = 0);
        };
        function na(i, s) {
          return (
            {
              "text-opacity": ["opacity"],
              "icon-opacity": ["opacity"],
              "text-color": ["fill_color"],
              "icon-color": ["fill_color"],
              "text-halo-color": ["halo_color"],
              "icon-halo-color": ["halo_color"],
              "text-halo-blur": ["halo_blur"],
              "icon-halo-blur": ["halo_blur"],
              "text-halo-width": ["halo_width"],
              "icon-halo-width": ["halo_width"],
              "line-gap-width": ["gapwidth"],
              "line-pattern": [
                "pattern_to",
                "pattern_from",
                "pixel_ratio_to",
                "pixel_ratio_from",
              ],
              "fill-pattern": [
                "pattern_to",
                "pattern_from",
                "pixel_ratio_to",
                "pixel_ratio_from",
              ],
              "fill-extrusion-pattern": [
                "pattern_to",
                "pattern_from",
                "pixel_ratio_to",
                "pixel_ratio_from",
              ],
            }[i] || [i.replace(s + "-", "").replace(/-/g, "_")]
          );
        }
        function Mi(i, s, c) {
          var m = {
              color: { source: Jc, composite: Rd },
              number: { source: Yl, composite: Jc },
            },
            _ = (function (y) {
              return {
                "line-pattern": { source: Hs, composite: Hs },
                "fill-pattern": { source: Hs, composite: Hs },
                "fill-extrusion-pattern": { source: Hs, composite: Hs },
              }[y];
            })(i);
          return (_ && _[c]) || m[s][c];
        }
        (Hn.prototype.populatePaintArrays = function (i, s, c, m, _, y) {
          for (var A in this.programConfigurations)
            this.programConfigurations[A].populatePaintArrays(i, s, m, _, y);
          s.id !== void 0 &&
            this._featureMap.add(s.id, c, this._bufferOffset, i),
            (this._bufferOffset = i),
            (this.needsUpload = !0);
        }),
          (Hn.prototype.updatePaintArrays = function (i, s, c, m) {
            for (var _ = 0, y = c; _ < y.length; _ += 1) {
              var A = y[_];
              this.needsUpload =
                this.programConfigurations[A.id].updatePaintArrays(
                  i,
                  this._featureMap,
                  s,
                  A,
                  m
                ) || this.needsUpload;
            }
          }),
          (Hn.prototype.get = function (i) {
            return this.programConfigurations[i];
          }),
          (Hn.prototype.upload = function (i) {
            if (this.needsUpload) {
              for (var s in this.programConfigurations)
                this.programConfigurations[s].upload(i);
              this.needsUpload = !1;
            }
          }),
          (Hn.prototype.destroy = function () {
            for (var i in this.programConfigurations)
              this.programConfigurations[i].destroy();
          }),
          vn("ConstantBinder", $n),
          vn("CrossFadedConstantBinder", dr),
          vn("SourceExpressionBinder", Yn),
          vn("CrossFadedCompositeBinder", cr),
          vn("CompositeExpressionBinder", Xn),
          vn("ProgramConfiguration", Gn, { omit: ["_buffers"] }),
          vn("ProgramConfigurationSet", Hn);
        var Ba = Math.pow(2, 14) - 1,
          ba = -Ba - 1;
        function Ri(i) {
          for (
            var s = 8192 / i.extent, c = i.loadGeometry(), m = 0;
            m < c.length;
            m++
          )
            for (var _ = c[m], y = 0; y < _.length; y++) {
              var A = _[y],
                C = Math.round(A.x * s),
                P = Math.round(A.y * s);
              (A.x = F(C, ba, Ba)),
                (A.y = F(P, ba, Ba)),
                (C < A.x || C > A.x + 1 || P < A.y || P > A.y + 1) &&
                  He(
                    "Geometry exceeds allowed extent, reduce your vector tile buffer size"
                  );
            }
          return c;
        }
        function Pi(i, s) {
          return {
            type: i.type,
            id: i.id,
            properties: i.properties,
            geometry: s ? Ri(i) : [],
          };
        }
        function ho(i, s, c, m, _) {
          i.emplaceBack(2 * s + (m + 1) / 2, 2 * c + (_ + 1) / 2);
        }
        var to = function (i) {
          (this.zoom = i.zoom),
            (this.overscaling = i.overscaling),
            (this.layers = i.layers),
            (this.layerIds = this.layers.map(function (s) {
              return s.id;
            })),
            (this.index = i.index),
            (this.hasPattern = !1),
            (this.layoutVertexArray = new Zl()),
            (this.indexArray = new js()),
            (this.segments = new ne()),
            (this.programConfigurations = new Hn(i.layers, i.zoom)),
            (this.stateDependentLayerIds = this.layers
              .filter(function (s) {
                return s.isStateDependent();
              })
              .map(function (s) {
                return s.id;
              }));
        };
        function Ws(i, s) {
          for (var c = 0; c < i.length; c++) if (Ts(s, i[c])) return !0;
          for (var m = 0; m < s.length; m++) if (Ts(i, s[m])) return !0;
          return !!tu(i, s);
        }
        function po(i, s, c) {
          return !!Ts(i, s) || !!Xs(s, i, c);
        }
        function us(i, s) {
          if (i.length === 1) return El(s, i[0]);
          for (var c = 0; c < s.length; c++)
            for (var m = s[c], _ = 0; _ < m.length; _++)
              if (Ts(i, m[_])) return !0;
          for (var y = 0; y < i.length; y++) if (El(s, i[y])) return !0;
          for (var A = 0; A < s.length; A++) if (tu(i, s[A])) return !0;
          return !1;
        }
        function ko(i, s, c) {
          if (i.length > 1) {
            if (tu(i, s)) return !0;
            for (var m = 0; m < s.length; m++) if (Xs(s[m], i, c)) return !0;
          }
          for (var _ = 0; _ < i.length; _++) if (Xs(i[_], s, c)) return !0;
          return !1;
        }
        function tu(i, s) {
          if (i.length === 0 || s.length === 0) return !1;
          for (var c = 0; c < i.length - 1; c++)
            for (var m = i[c], _ = i[c + 1], y = 0; y < s.length - 1; y++)
              if (wc(m, _, s[y], s[y + 1])) return !0;
          return !1;
        }
        function wc(i, s, c, m) {
          return nt(i, c, m) !== nt(s, c, m) && nt(i, s, c) !== nt(i, s, m);
        }
        function Xs(i, s, c) {
          var m = c * c;
          if (s.length === 1) return i.distSqr(s[0]) < m;
          for (var _ = 1; _ < s.length; _++)
            if (ql(i, s[_ - 1], s[_]) < m) return !0;
          return !1;
        }
        function ql(i, s, c) {
          var m = s.distSqr(c);
          if (m === 0) return i.distSqr(s);
          var _ = ((i.x - s.x) * (c.x - s.x) + (i.y - s.y) * (c.y - s.y)) / m;
          return i.distSqr(_ < 0 ? s : _ > 1 ? c : c.sub(s)._mult(_)._add(s));
        }
        function El(i, s) {
          for (var c, m, _, y = !1, A = 0; A < i.length; A++)
            for (var C = 0, P = (c = i[A]).length - 1; C < c.length; P = C++)
              (m = c[C]).y > s.y != (_ = c[P]).y > s.y &&
                s.x < ((_.x - m.x) * (s.y - m.y)) / (_.y - m.y) + m.x &&
                (y = !y);
          return y;
        }
        function Ts(i, s) {
          for (var c = !1, m = 0, _ = i.length - 1; m < i.length; _ = m++) {
            var y = i[m],
              A = i[_];
            y.y > s.y != A.y > s.y &&
              s.x < ((A.x - y.x) * (s.y - y.y)) / (A.y - y.y) + y.x &&
              (c = !c);
          }
          return c;
        }
        function $l(i, s, c) {
          var m = c[0],
            _ = c[2];
          if (
            (i.x < m.x && s.x < m.x) ||
            (i.x > _.x && s.x > _.x) ||
            (i.y < m.y && s.y < m.y) ||
            (i.y > _.y && s.y > _.y)
          )
            return !1;
          var y = nt(i, s, c[0]);
          return (
            y !== nt(i, s, c[1]) || y !== nt(i, s, c[2]) || y !== nt(i, s, c[3])
          );
        }
        function Ga(i, s, c) {
          var m = s.paint.get(i).value;
          return m.kind === "constant"
            ? m.value
            : c.programConfigurations.get(s.id).getMaxValue(i);
        }
        function Vi(i) {
          return Math.sqrt(i[0] * i[0] + i[1] * i[1]);
        }
        function Eo(i, s, c, m, _) {
          if (!s[0] && !s[1]) return i;
          var y = E.convert(s)._mult(_);
          c === "viewport" && y._rotate(-m);
          for (var A = [], C = 0; C < i.length; C++) A.push(i[C].sub(y));
          return A;
        }
        (to.prototype.populate = function (i, s, c) {
          var m = this.layers[0],
            _ = [],
            y = null;
          m.type === "circle" && (y = m.layout.get("circle-sort-key"));
          for (var A = 0, C = i; A < C.length; A += 1) {
            var P = C[A],
              O = P.feature,
              k = P.id,
              U = P.index,
              W = P.sourceLayerIndex,
              $ = this.layers[0]._featureFilter.needGeometry,
              he = Pi(O, $);
            if (
              this.layers[0]._featureFilter.filter(new ur(this.zoom), he, c)
            ) {
              var me = y ? y.evaluate(he, {}, c) : void 0,
                Ie = {
                  id: k,
                  properties: O.properties,
                  type: O.type,
                  sourceLayerIndex: W,
                  index: U,
                  geometry: $ ? he.geometry : Ri(O),
                  patterns: {},
                  sortKey: me,
                };
              _.push(Ie);
            }
          }
          y &&
            _.sort(function (Qt, Mn) {
              return Qt.sortKey - Mn.sortKey;
            });
          for (var Te = 0, je = _; Te < je.length; Te += 1) {
            var Ze = je[Te],
              at = Ze.geometry,
              lt = Ze.index,
              yt = Ze.sourceLayerIndex,
              zt = i[lt].feature;
            this.addFeature(Ze, at, lt, c),
              s.featureIndex.insert(zt, at, lt, yt, this.index);
          }
        }),
          (to.prototype.update = function (i, s, c) {
            this.stateDependentLayers.length &&
              this.programConfigurations.updatePaintArrays(
                i,
                s,
                this.stateDependentLayers,
                c
              );
          }),
          (to.prototype.isEmpty = function () {
            return this.layoutVertexArray.length === 0;
          }),
          (to.prototype.uploadPending = function () {
            return !this.uploaded || this.programConfigurations.needsUpload;
          }),
          (to.prototype.upload = function (i) {
            this.uploaded ||
              ((this.layoutVertexBuffer = i.createVertexBuffer(
                this.layoutVertexArray,
                J
              )),
              (this.indexBuffer = i.createIndexBuffer(this.indexArray))),
              this.programConfigurations.upload(i),
              (this.uploaded = !0);
          }),
          (to.prototype.destroy = function () {
            this.layoutVertexBuffer &&
              (this.layoutVertexBuffer.destroy(),
              this.indexBuffer.destroy(),
              this.programConfigurations.destroy(),
              this.segments.destroy());
          }),
          (to.prototype.addFeature = function (i, s, c, m) {
            for (var _ = 0, y = s; _ < y.length; _ += 1)
              for (var A = 0, C = y[_]; A < C.length; A += 1) {
                var P = C[A],
                  O = P.x,
                  k = P.y;
                if (!(O < 0 || O >= 8192 || k < 0 || k >= 8192)) {
                  var U = this.segments.prepareSegment(
                      4,
                      this.layoutVertexArray,
                      this.indexArray,
                      i.sortKey
                    ),
                    W = U.vertexLength;
                  ho(this.layoutVertexArray, O, k, -1, -1),
                    ho(this.layoutVertexArray, O, k, 1, -1),
                    ho(this.layoutVertexArray, O, k, 1, 1),
                    ho(this.layoutVertexArray, O, k, -1, 1),
                    this.indexArray.emplaceBack(W, W + 1, W + 2),
                    this.indexArray.emplaceBack(W, W + 3, W + 2),
                    (U.vertexLength += 4),
                    (U.primitiveLength += 2);
                }
              }
            this.programConfigurations.populatePaintArrays(
              this.layoutVertexArray.length,
              i,
              c,
              {},
              m
            );
          }),
          vn("CircleBucket", to, { omit: ["layers"] });
        var ds = new Ni({
            "circle-sort-key": new bn(te.layout_circle["circle-sort-key"]),
          }),
          Ss = {
            paint: new Ni({
              "circle-radius": new bn(te.paint_circle["circle-radius"]),
              "circle-color": new bn(te.paint_circle["circle-color"]),
              "circle-blur": new bn(te.paint_circle["circle-blur"]),
              "circle-opacity": new bn(te.paint_circle["circle-opacity"]),
              "circle-translate": new Rn(te.paint_circle["circle-translate"]),
              "circle-translate-anchor": new Rn(
                te.paint_circle["circle-translate-anchor"]
              ),
              "circle-pitch-scale": new Rn(
                te.paint_circle["circle-pitch-scale"]
              ),
              "circle-pitch-alignment": new Rn(
                te.paint_circle["circle-pitch-alignment"]
              ),
              "circle-stroke-width": new bn(
                te.paint_circle["circle-stroke-width"]
              ),
              "circle-stroke-color": new bn(
                te.paint_circle["circle-stroke-color"]
              ),
              "circle-stroke-opacity": new bn(
                te.paint_circle["circle-stroke-opacity"]
              ),
            }),
            layout: ds,
          },
          Pr = typeof Float32Array < "u" ? Float32Array : Array;
        function Fa(i) {
          return (
            (i[0] = 1),
            (i[1] = 0),
            (i[2] = 0),
            (i[3] = 0),
            (i[4] = 0),
            (i[5] = 1),
            (i[6] = 0),
            (i[7] = 0),
            (i[8] = 0),
            (i[9] = 0),
            (i[10] = 1),
            (i[11] = 0),
            (i[12] = 0),
            (i[13] = 0),
            (i[14] = 0),
            (i[15] = 1),
            i
          );
        }
        function ra(i, s, c) {
          var m = s[0],
            _ = s[1],
            y = s[2],
            A = s[3],
            C = s[4],
            P = s[5],
            O = s[6],
            k = s[7],
            U = s[8],
            W = s[9],
            $ = s[10],
            he = s[11],
            me = s[12],
            Ie = s[13],
            Te = s[14],
            je = s[15],
            Ze = c[0],
            at = c[1],
            lt = c[2],
            yt = c[3];
          return (
            (i[0] = Ze * m + at * C + lt * U + yt * me),
            (i[1] = Ze * _ + at * P + lt * W + yt * Ie),
            (i[2] = Ze * y + at * O + lt * $ + yt * Te),
            (i[3] = Ze * A + at * k + lt * he + yt * je),
            (i[4] =
              (Ze = c[4]) * m +
              (at = c[5]) * C +
              (lt = c[6]) * U +
              (yt = c[7]) * me),
            (i[5] = Ze * _ + at * P + lt * W + yt * Ie),
            (i[6] = Ze * y + at * O + lt * $ + yt * Te),
            (i[7] = Ze * A + at * k + lt * he + yt * je),
            (i[8] =
              (Ze = c[8]) * m +
              (at = c[9]) * C +
              (lt = c[10]) * U +
              (yt = c[11]) * me),
            (i[9] = Ze * _ + at * P + lt * W + yt * Ie),
            (i[10] = Ze * y + at * O + lt * $ + yt * Te),
            (i[11] = Ze * A + at * k + lt * he + yt * je),
            (i[12] =
              (Ze = c[12]) * m +
              (at = c[13]) * C +
              (lt = c[14]) * U +
              (yt = c[15]) * me),
            (i[13] = Ze * _ + at * P + lt * W + yt * Ie),
            (i[14] = Ze * y + at * O + lt * $ + yt * Te),
            (i[15] = Ze * A + at * k + lt * he + yt * je),
            i
          );
        }
        Math.hypot ||
          (Math.hypot = function () {
            for (var i = arguments, s = 0, c = arguments.length; c--; )
              s += i[c] * i[c];
            return Math.sqrt(s);
          });
        var Gs,
          Id = ra;
        function Kl(i, s, c) {
          var m = s[0],
            _ = s[1],
            y = s[2],
            A = s[3];
          return (
            (i[0] = c[0] * m + c[4] * _ + c[8] * y + c[12] * A),
            (i[1] = c[1] * m + c[5] * _ + c[9] * y + c[13] * A),
            (i[2] = c[2] * m + c[6] * _ + c[10] * y + c[14] * A),
            (i[3] = c[3] * m + c[7] * _ + c[11] * y + c[15] * A),
            i
          );
        }
        (Gs = new Pr(3)),
          Pr != Float32Array && ((Gs[0] = 0), (Gs[1] = 0), (Gs[2] = 0)),
          (function () {
            var i = new Pr(4);
            Pr != Float32Array &&
              ((i[0] = 0), (i[1] = 0), (i[2] = 0), (i[3] = 0));
          })();
        var I0 =
          ((function () {
            var i = new Pr(2);
            Pr != Float32Array && ((i[0] = 0), (i[1] = 0));
          })(),
          (function (i) {
            function s(c) {
              i.call(this, c, Ss);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.createBucket = function (c) {
                return new to(c);
              }),
              (s.prototype.queryRadius = function (c) {
                var m = c;
                return (
                  Ga("circle-radius", this, m) +
                  Ga("circle-stroke-width", this, m) +
                  Vi(this.paint.get("circle-translate"))
                );
              }),
              (s.prototype.queryIntersectsFeature = function (
                c,
                m,
                _,
                y,
                A,
                C,
                P,
                O
              ) {
                for (
                  var k = Eo(
                      c,
                      this.paint.get("circle-translate"),
                      this.paint.get("circle-translate-anchor"),
                      C.angle,
                      P
                    ),
                    U =
                      this.paint.get("circle-radius").evaluate(m, _) +
                      this.paint.get("circle-stroke-width").evaluate(m, _),
                    W = this.paint.get("circle-pitch-alignment") === "map",
                    $ = W
                      ? k
                      : (function (zt, Qt) {
                          return zt.map(function (Mn) {
                            return Cc(Mn, Qt);
                          });
                        })(k, O),
                    he = W ? U * P : U,
                    me = 0,
                    Ie = y;
                  me < Ie.length;
                  me += 1
                )
                  for (var Te = 0, je = Ie[me]; Te < je.length; Te += 1) {
                    var Ze = je[Te],
                      at = W ? Ze : Cc(Ze, O),
                      lt = he,
                      yt = Kl([], [Ze.x, Ze.y, 0, 1], O);
                    if (
                      (this.paint.get("circle-pitch-scale") === "viewport" &&
                      this.paint.get("circle-pitch-alignment") === "map"
                        ? (lt *= yt[3] / C.cameraToCenterDistance)
                        : this.paint.get("circle-pitch-scale") === "map" &&
                          this.paint.get("circle-pitch-alignment") ===
                            "viewport" &&
                          (lt *= C.cameraToCenterDistance / yt[3]),
                      po($, at, lt))
                    )
                      return !0;
                  }
                return !1;
              }),
              s
            );
          })(ls));
        function Cc(i, s) {
          var c = Kl([], [i.x, i.y, 0, 1], s);
          return new E(c[0] / c[3], c[1] / c[3]);
        }
        var Nc = (function (i) {
          function s() {
            i.apply(this, arguments);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            s
          );
        })(to);
        function ws(i, s, c, m) {
          var _ = s.width,
            y = s.height;
          if (m) {
            if (m instanceof Uint8ClampedArray) m = new Uint8Array(m.buffer);
            else if (m.length !== _ * y * c)
              throw new RangeError("mismatched image size");
          } else m = new Uint8Array(_ * y * c);
          return (i.width = _), (i.height = y), (i.data = m), i;
        }
        function Md(i, s, c) {
          var m = s.width,
            _ = s.height;
          if (m !== i.width || _ !== i.height) {
            var y = ws({}, { width: m, height: _ }, c);
            Zp(
              i,
              y,
              { x: 0, y: 0 },
              { x: 0, y: 0 },
              { width: Math.min(i.width, m), height: Math.min(i.height, _) },
              c
            ),
              (i.width = m),
              (i.height = _),
              (i.data = y.data);
          }
        }
        function Zp(i, s, c, m, _, y) {
          if (_.width === 0 || _.height === 0) return s;
          if (
            _.width > i.width ||
            _.height > i.height ||
            c.x > i.width - _.width ||
            c.y > i.height - _.height
          )
            throw new RangeError(
              "out of range source coordinates for image copy"
            );
          if (
            _.width > s.width ||
            _.height > s.height ||
            m.x > s.width - _.width ||
            m.y > s.height - _.height
          )
            throw new RangeError(
              "out of range destination coordinates for image copy"
            );
          for (var A = i.data, C = s.data, P = 0; P < _.height; P++)
            for (
              var O = ((c.y + P) * i.width + c.x) * y,
                k = ((m.y + P) * s.width + m.x) * y,
                U = 0;
              U < _.width * y;
              U++
            )
              C[k + U] = A[O + U];
          return s;
        }
        vn("HeatmapBucket", Nc, { omit: ["layers"] });
        var nu = function (i, s) {
          ws(this, i, 1, s);
        };
        (nu.prototype.resize = function (i) {
          Md(this, i, 1);
        }),
          (nu.prototype.clone = function () {
            return new nu(
              { width: this.width, height: this.height },
              new Uint8Array(this.data)
            );
          }),
          (nu.copy = function (i, s, c, m, _) {
            Zp(i, s, c, m, _, 1);
          });
        var Ao = function (i, s) {
          ws(this, i, 4, s);
        };
        (Ao.prototype.resize = function (i) {
          Md(this, i, 4);
        }),
          (Ao.prototype.replace = function (i, s) {
            s
              ? this.data.set(i)
              : (this.data =
                  i instanceof Uint8ClampedArray
                    ? new Uint8Array(i.buffer)
                    : i);
          }),
          (Ao.prototype.clone = function () {
            return new Ao(
              { width: this.width, height: this.height },
              new Uint8Array(this.data)
            );
          }),
          (Ao.copy = function (i, s, c, m, _) {
            Zp(i, s, c, m, _, 4);
          }),
          vn("AlphaImage", nu),
          vn("RGBAImage", Ao);
        var G1 = {
          paint: new Ni({
            "heatmap-radius": new bn(te.paint_heatmap["heatmap-radius"]),
            "heatmap-weight": new bn(te.paint_heatmap["heatmap-weight"]),
            "heatmap-intensity": new Rn(te.paint_heatmap["heatmap-intensity"]),
            "heatmap-color": new Es(te.paint_heatmap["heatmap-color"]),
            "heatmap-opacity": new Rn(te.paint_heatmap["heatmap-opacity"]),
          }),
        };
        function Z1(i) {
          var s = {},
            c = i.resolution || 256,
            m = i.clips ? i.clips.length : 1,
            _ = i.image || new Ao({ width: c, height: m }),
            y = function (he, me, Ie) {
              s[i.evaluationKey] = Ie;
              var Te = i.expression.evaluate(s);
              (_.data[he + me + 0] = Math.floor((255 * Te.r) / Te.a)),
                (_.data[he + me + 1] = Math.floor((255 * Te.g) / Te.a)),
                (_.data[he + me + 2] = Math.floor((255 * Te.b) / Te.a)),
                (_.data[he + me + 3] = Math.floor(255 * Te.a));
            };
          if (i.clips)
            for (var A = 0, C = 0; A < m; ++A, C += 4 * c)
              for (var P = 0, O = 0; P < c; P++, O += 4) {
                var k = P / (c - 1),
                  U = i.clips[A];
                y(C, O, U.start * (1 - k) + U.end * k);
              }
          else for (var W = 0, $ = 0; W < c; W++, $ += 4) y(0, $, W / (c - 1));
          return _;
        }
        var Pd = (function (i) {
            function s(c) {
              i.call(this, c, G1), this._updateColorRamp();
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.createBucket = function (c) {
                return new Nc(c);
              }),
              (s.prototype._handleSpecialPaintPropertyUpdate = function (c) {
                c === "heatmap-color" && this._updateColorRamp();
              }),
              (s.prototype._updateColorRamp = function () {
                (this.colorRamp = Z1({
                  expression:
                    this._transitionablePaint._values["heatmap-color"].value
                      .expression,
                  evaluationKey: "heatmapDensity",
                  image: this.colorRamp,
                })),
                  (this.colorRampTexture = null);
              }),
              (s.prototype.resize = function () {
                this.heatmapFbo &&
                  (this.heatmapFbo.destroy(), (this.heatmapFbo = null));
              }),
              (s.prototype.queryRadius = function () {
                return 0;
              }),
              (s.prototype.queryIntersectsFeature = function () {
                return !1;
              }),
              (s.prototype.hasOffscreenPass = function () {
                return (
                  this.paint.get("heatmap-opacity") !== 0 &&
                  this.visibility !== "none"
                );
              }),
              s
            );
          })(ls),
          Rv = {
            paint: new Ni({
              "hillshade-illumination-direction": new Rn(
                te.paint_hillshade["hillshade-illumination-direction"]
              ),
              "hillshade-illumination-anchor": new Rn(
                te.paint_hillshade["hillshade-illumination-anchor"]
              ),
              "hillshade-exaggeration": new Rn(
                te.paint_hillshade["hillshade-exaggeration"]
              ),
              "hillshade-shadow-color": new Rn(
                te.paint_hillshade["hillshade-shadow-color"]
              ),
              "hillshade-highlight-color": new Rn(
                te.paint_hillshade["hillshade-highlight-color"]
              ),
              "hillshade-accent-color": new Rn(
                te.paint_hillshade["hillshade-accent-color"]
              ),
            }),
          },
          Iv = (function (i) {
            function s(c) {
              i.call(this, c, Rv);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.hasOffscreenPass = function () {
                return (
                  this.paint.get("hillshade-exaggeration") !== 0 &&
                  this.visibility !== "none"
                );
              }),
              s
            );
          })(ls),
          Mv = xa([{ name: "a_pos", components: 2, type: "Int16" }], 4).members,
          Th = Sh,
          Pv = Sh;
        function Sh(i, s, c) {
          c = c || 2;
          var m,
            _,
            y,
            A,
            C,
            P,
            O,
            k = s && s.length,
            U = k ? s[0] * c : i.length,
            W = Y1(i, 0, U, c, !0),
            $ = [];
          if (!W || W.next === W.prev) return $;
          if (
            (k &&
              (W = (function (me, Ie, Te, je) {
                var Ze,
                  at,
                  lt,
                  yt = [];
                for (Ze = 0, at = Ie.length; Ze < at; Ze++)
                  (lt = Y1(
                    me,
                    Ie[Ze] * je,
                    Ze < at - 1 ? Ie[Ze + 1] * je : me.length,
                    je,
                    !1
                  )) === lt.next && (lt.steiner = !0),
                    yt.push(Ch(lt));
                for (yt.sort(Fv), Ze = 0; Ze < yt.length; Ze++)
                  Yp(yt[Ze], Te), (Te = ru(Te, Te.next));
                return Te;
              })(i, s, W, c)),
            i.length > 80 * c)
          ) {
            (m = y = i[0]), (_ = A = i[1]);
            for (var he = c; he < U; he += c)
              (C = i[he]) < m && (m = C),
                (P = i[he + 1]) < _ && (_ = P),
                C > y && (y = C),
                P > A && (A = P);
            O = (O = Math.max(y - m, A - _)) !== 0 ? 1 / O : 0;
          }
          return M0(W, $, c, m, _, O), $;
        }
        function Y1(i, s, c, m, _) {
          var y, A;
          if (_ === ju(i, s, c, m) > 0)
            for (y = s; y < c; y += m) A = Dd(y, i[y], i[y + 1], A);
          else for (y = c - m; y >= s; y -= m) A = Dd(y, i[y], i[y + 1], A);
          return A && Uu(A, A.next) && (Rc(A), (A = A.next)), A;
        }
        function ru(i, s) {
          if (!i) return i;
          s || (s = i);
          var c,
            m = i;
          do
            if (
              ((c = !1),
              m.steiner || (!Uu(m, m.next) && Hi(m.prev, m, m.next) !== 0))
            )
              m = m.next;
            else {
              if ((Rc(m), (m = s = m.prev) === m.next)) break;
              c = !0;
            }
          while (c || m !== s);
          return s;
        }
        function M0(i, s, c, m, _, y, A) {
          if (i) {
            !A &&
              y &&
              (function (k, U, W, $) {
                var he = k;
                do
                  he.z === null && (he.z = Od(he.x, he.y, U, W, $)),
                    (he.prevZ = he.prev),
                    (he.nextZ = he.next),
                    (he = he.next);
                while (he !== k);
                (he.prevZ.nextZ = null),
                  (he.prevZ = null),
                  (function (me) {
                    var Ie,
                      Te,
                      je,
                      Ze,
                      at,
                      lt,
                      yt,
                      zt,
                      Qt = 1;
                    do {
                      for (Te = me, me = null, at = null, lt = 0; Te; ) {
                        for (
                          lt++, je = Te, yt = 0, Ie = 0;
                          Ie < Qt && (yt++, (je = je.nextZ));
                          Ie++
                        );
                        for (zt = Qt; yt > 0 || (zt > 0 && je); )
                          yt !== 0 && (zt === 0 || !je || Te.z <= je.z)
                            ? ((Ze = Te), (Te = Te.nextZ), yt--)
                            : ((Ze = je), (je = je.nextZ), zt--),
                            at ? (at.nextZ = Ze) : (me = Ze),
                            (Ze.prevZ = at),
                            (at = Ze);
                        Te = je;
                      }
                      (at.nextZ = null), (Qt *= 2);
                    } while (lt > 1);
                  })(he);
              })(i, m, _, y);
            for (var C, P, O = i; i.prev !== i.next; )
              if (((C = i.prev), (P = i.next), y ? Lv(i, m, _, y) : Ov(i)))
                s.push(C.i / c),
                  s.push(i.i / c),
                  s.push(P.i / c),
                  Rc(i),
                  (i = P.next),
                  (O = P.next);
              else if ((i = P) === O) {
                A
                  ? A === 1
                    ? M0((i = Dv(ru(i), s, c)), s, c, m, _, y, 2)
                    : A === 2 && Bv(i, s, c, m, _, y)
                  : M0(ru(i), s, c, m, _, y, 1);
                break;
              }
          }
        }
        function Ov(i) {
          var s = i.prev,
            c = i,
            m = i.next;
          if (Hi(s, c, m) >= 0) return !1;
          for (var _ = i.next.next; _ !== i.prev; ) {
            if (
              iu(s.x, s.y, c.x, c.y, m.x, m.y, _.x, _.y) &&
              Hi(_.prev, _, _.next) >= 0
            )
              return !1;
            _ = _.next;
          }
          return !0;
        }
        function Lv(i, s, c, m) {
          var _ = i.prev,
            y = i,
            A = i.next;
          if (Hi(_, y, A) >= 0) return !1;
          for (
            var C = _.x > y.x ? (_.x > A.x ? _.x : A.x) : y.x > A.x ? y.x : A.x,
              P = _.y > y.y ? (_.y > A.y ? _.y : A.y) : y.y > A.y ? y.y : A.y,
              O = Od(
                _.x < y.x ? (_.x < A.x ? _.x : A.x) : y.x < A.x ? y.x : A.x,
                _.y < y.y ? (_.y < A.y ? _.y : A.y) : y.y < A.y ? y.y : A.y,
                s,
                c,
                m
              ),
              k = Od(C, P, s, c, m),
              U = i.prevZ,
              W = i.nextZ;
            U && U.z >= O && W && W.z <= k;

          ) {
            if (
              (U !== i.prev &&
                U !== i.next &&
                iu(_.x, _.y, y.x, y.y, A.x, A.y, U.x, U.y) &&
                Hi(U.prev, U, U.next) >= 0) ||
              ((U = U.prevZ),
              W !== i.prev &&
                W !== i.next &&
                iu(_.x, _.y, y.x, y.y, A.x, A.y, W.x, W.y) &&
                Hi(W.prev, W, W.next) >= 0)
            )
              return !1;
            W = W.nextZ;
          }
          for (; U && U.z >= O; ) {
            if (
              U !== i.prev &&
              U !== i.next &&
              iu(_.x, _.y, y.x, y.y, A.x, A.y, U.x, U.y) &&
              Hi(U.prev, U, U.next) >= 0
            )
              return !1;
            U = U.prevZ;
          }
          for (; W && W.z <= k; ) {
            if (
              W !== i.prev &&
              W !== i.next &&
              iu(_.x, _.y, y.x, y.y, A.x, A.y, W.x, W.y) &&
              Hi(W.prev, W, W.next) >= 0
            )
              return !1;
            W = W.nextZ;
          }
          return !0;
        }
        function Dv(i, s, c) {
          var m = i;
          do {
            var _ = m.prev,
              y = m.next.next;
            !Uu(_, y) &&
              Rh(_, m, m.next, y) &&
              au(_, y) &&
              au(y, _) &&
              (s.push(_.i / c),
              s.push(m.i / c),
              s.push(y.i / c),
              Rc(m),
              Rc(m.next),
              (m = i = y)),
              (m = m.next);
          } while (m !== i);
          return ru(m);
        }
        function Bv(i, s, c, m, _, y) {
          var A = i;
          do {
            for (var C = A.next.next; C !== A.prev; ) {
              if (A.i !== C.i && Nh(A, C)) {
                var P = Ld(A, C);
                return (
                  (A = ru(A, A.next)),
                  (P = ru(P, P.next)),
                  M0(A, s, c, m, _, y),
                  void M0(P, s, c, m, _, y)
                );
              }
              C = C.next;
            }
            A = A.next;
          } while (A !== i);
        }
        function Fv(i, s) {
          return i.x - s.x;
        }
        function Yp(i, s) {
          if (
            (s = (function (m, _) {
              var y,
                A = _,
                C = m.x,
                P = m.y,
                O = -1 / 0;
              do {
                if (P <= A.y && P >= A.next.y && A.next.y !== A.y) {
                  var k =
                    A.x + ((P - A.y) * (A.next.x - A.x)) / (A.next.y - A.y);
                  if (k <= C && k > O) {
                    if (((O = k), k === C)) {
                      if (P === A.y) return A;
                      if (P === A.next.y) return A.next;
                    }
                    y = A.x < A.next.x ? A : A.next;
                  }
                }
                A = A.next;
              } while (A !== _);
              if (!y) return null;
              if (C === O) return y;
              var U,
                W = y,
                $ = y.x,
                he = y.y,
                me = 1 / 0;
              A = y;
              do
                C >= A.x &&
                  A.x >= $ &&
                  C !== A.x &&
                  iu(P < he ? C : O, P, $, he, P < he ? O : C, P, A.x, A.y) &&
                  ((U = Math.abs(P - A.y) / (C - A.x)),
                  au(A, m) &&
                    (U < me ||
                      (U === me && (A.x > y.x || (A.x === y.x && wh(y, A))))) &&
                    ((y = A), (me = U))),
                  (A = A.next);
              while (A !== W);
              return y;
            })(i, s))
          ) {
            var c = Ld(s, i);
            ru(s, s.next), ru(c, c.next);
          }
        }
        function wh(i, s) {
          return Hi(i.prev, i, s.prev) < 0 && Hi(s.next, i, i.next) < 0;
        }
        function Od(i, s, c, m, _) {
          return (
            (i =
              1431655765 &
              ((i =
                858993459 &
                ((i =
                  252645135 &
                  ((i = 16711935 & ((i = 32767 * (i - c) * _) | (i << 8))) |
                    (i << 4))) |
                  (i << 2))) |
                (i << 1))) |
            ((s =
              1431655765 &
              ((s =
                858993459 &
                ((s =
                  252645135 &
                  ((s = 16711935 & ((s = 32767 * (s - m) * _) | (s << 8))) |
                    (s << 4))) |
                  (s << 2))) |
                (s << 1))) <<
              1)
          );
        }
        function Ch(i) {
          var s = i,
            c = i;
          do (s.x < c.x || (s.x === c.x && s.y < c.y)) && (c = s), (s = s.next);
          while (s !== i);
          return c;
        }
        function iu(i, s, c, m, _, y, A, C) {
          return (
            (_ - A) * (s - C) - (i - A) * (y - C) >= 0 &&
            (i - A) * (m - C) - (c - A) * (s - C) >= 0 &&
            (c - A) * (y - C) - (_ - A) * (m - C) >= 0
          );
        }
        function Nh(i, s) {
          return (
            i.next.i !== s.i &&
            i.prev.i !== s.i &&
            !(function (c, m) {
              var _ = c;
              do {
                if (
                  _.i !== c.i &&
                  _.next.i !== c.i &&
                  _.i !== m.i &&
                  _.next.i !== m.i &&
                  Rh(_, _.next, c, m)
                )
                  return !0;
                _ = _.next;
              } while (_ !== c);
              return !1;
            })(i, s) &&
            ((au(i, s) &&
              au(s, i) &&
              (function (c, m) {
                var _ = c,
                  y = !1,
                  A = (c.x + m.x) / 2,
                  C = (c.y + m.y) / 2;
                do
                  _.y > C != _.next.y > C &&
                    _.next.y !== _.y &&
                    A <
                      ((_.next.x - _.x) * (C - _.y)) / (_.next.y - _.y) + _.x &&
                    (y = !y),
                    (_ = _.next);
                while (_ !== c);
                return y;
              })(i, s) &&
              (Hi(i.prev, i, s.prev) || Hi(i, s.prev, s))) ||
              (Uu(i, s) &&
                Hi(i.prev, i, i.next) > 0 &&
                Hi(s.prev, s, s.next) > 0))
          );
        }
        function Hi(i, s, c) {
          return (s.y - i.y) * (c.x - s.x) - (s.x - i.x) * (c.y - s.y);
        }
        function Uu(i, s) {
          return i.x === s.x && i.y === s.y;
        }
        function Rh(i, s, c, m) {
          var _ = Vu(Hi(i, s, c)),
            y = Vu(Hi(i, s, m)),
            A = Vu(Hi(c, m, i)),
            C = Vu(Hi(c, m, s));
          return (
            (_ !== y && A !== C) ||
            !(_ !== 0 || !zu(i, c, s)) ||
            !(y !== 0 || !zu(i, m, s)) ||
            !(A !== 0 || !zu(c, i, m)) ||
            !(C !== 0 || !zu(c, s, m))
          );
        }
        function zu(i, s, c) {
          return (
            s.x <= Math.max(i.x, c.x) &&
            s.x >= Math.min(i.x, c.x) &&
            s.y <= Math.max(i.y, c.y) &&
            s.y >= Math.min(i.y, c.y)
          );
        }
        function Vu(i) {
          return i > 0 ? 1 : i < 0 ? -1 : 0;
        }
        function au(i, s) {
          return Hi(i.prev, i, i.next) < 0
            ? Hi(i, s, i.next) >= 0 && Hi(i, i.prev, s) >= 0
            : Hi(i, s, i.prev) < 0 || Hi(i, i.next, s) < 0;
        }
        function Ld(i, s) {
          var c = new Hu(i.i, i.x, i.y),
            m = new Hu(s.i, s.x, s.y),
            _ = i.next,
            y = s.prev;
          return (
            (i.next = s),
            (s.prev = i),
            (c.next = _),
            (_.prev = c),
            (m.next = c),
            (c.prev = m),
            (y.next = m),
            (m.prev = y),
            m
          );
        }
        function Dd(i, s, c, m) {
          var _ = new Hu(i, s, c);
          return (
            m
              ? ((_.next = m.next),
                (_.prev = m),
                (m.next.prev = _),
                (m.next = _))
              : ((_.prev = _), (_.next = _)),
            _
          );
        }
        function Rc(i) {
          (i.next.prev = i.prev),
            (i.prev.next = i.next),
            i.prevZ && (i.prevZ.nextZ = i.nextZ),
            i.nextZ && (i.nextZ.prevZ = i.prevZ);
        }
        function Hu(i, s, c) {
          (this.i = i),
            (this.x = s),
            (this.y = c),
            (this.prev = null),
            (this.next = null),
            (this.z = null),
            (this.prevZ = null),
            (this.nextZ = null),
            (this.steiner = !1);
        }
        function ju(i, s, c, m) {
          for (var _ = 0, y = s, A = c - m; y < c; y += m)
            (_ += (i[A] - i[y]) * (i[y + 1] + i[A + 1])), (A = y);
          return _;
        }
        function q1(i, s, c, m, _) {
          (function y(A, C, P, O, k) {
            for (; O > P; ) {
              if (O - P > 600) {
                var U = O - P + 1,
                  W = C - P + 1,
                  $ = Math.log(U),
                  he = 0.5 * Math.exp((2 * $) / 3),
                  me =
                    0.5 *
                    Math.sqrt(($ * he * (U - he)) / U) *
                    (W - U / 2 < 0 ? -1 : 1);
                y(
                  A,
                  C,
                  Math.max(P, Math.floor(C - (W * he) / U + me)),
                  Math.min(O, Math.floor(C + ((U - W) * he) / U + me)),
                  k
                );
              }
              var Ie = A[C],
                Te = P,
                je = O;
              for (Ic(A, P, C), k(A[O], Ie) > 0 && Ic(A, P, O); Te < je; ) {
                for (Ic(A, Te, je), Te++, je--; k(A[Te], Ie) < 0; ) Te++;
                for (; k(A[je], Ie) > 0; ) je--;
              }
              k(A[P], Ie) === 0 ? Ic(A, P, je) : Ic(A, ++je, O),
                je <= C && (P = je + 1),
                C <= je && (O = je - 1);
            }
          })(i, s, c, m || i.length - 1, _ || Wu);
        }
        function Ic(i, s, c) {
          var m = i[s];
          (i[s] = i[c]), (i[c] = m);
        }
        function Wu(i, s) {
          return i < s ? -1 : i > s ? 1 : 0;
        }
        function Ih(i, s) {
          var c = i.length;
          if (c <= 1) return [i];
          for (var m, _, y = [], A = 0; A < c; A++) {
            var C = Ut(i[A]);
            C !== 0 &&
              ((i[A].area = Math.abs(C)),
              _ === void 0 && (_ = C < 0),
              _ === C < 0 ? (m && y.push(m), (m = [i[A]])) : m.push(i[A]));
          }
          if ((m && y.push(m), s > 1))
            for (var P = 0; P < y.length; P++)
              y[P].length <= s ||
                (q1(y[P], s, 1, y[P].length - 1, qp),
                (y[P] = y[P].slice(0, s)));
          return y;
        }
        function qp(i, s) {
          return s.area - i.area;
        }
        function $p(i, s, c) {
          for (
            var m = c.patternDependencies, _ = !1, y = 0, A = s;
            y < A.length;
            y += 1
          ) {
            var C = A[y].paint.get(i + "-pattern");
            C.isConstant() || (_ = !0);
            var P = C.constantOr(null);
            P && ((_ = !0), (m[P.to] = !0), (m[P.from] = !0));
          }
          return _;
        }
        function Kp(i, s, c, m, _) {
          for (
            var y = _.patternDependencies, A = 0, C = s;
            A < C.length;
            A += 1
          ) {
            var P = C[A],
              O = P.paint.get(i + "-pattern").value;
            if (O.kind !== "constant") {
              var k = O.evaluate({ zoom: m - 1 }, c, {}, _.availableImages),
                U = O.evaluate({ zoom: m }, c, {}, _.availableImages),
                W = O.evaluate({ zoom: m + 1 }, c, {}, _.availableImages);
              (U = U && U.name ? U.name : U),
                (W = W && W.name ? W.name : W),
                (y[(k = k && k.name ? k.name : k)] = !0),
                (y[U] = !0),
                (y[W] = !0),
                (c.patterns[P.id] = { min: k, mid: U, max: W });
            }
          }
          return c;
        }
        (Sh.deviation = function (i, s, c, m) {
          var _ = s && s.length,
            y = Math.abs(ju(i, 0, _ ? s[0] * c : i.length, c));
          if (_)
            for (var A = 0, C = s.length; A < C; A++)
              y -= Math.abs(
                ju(i, s[A] * c, A < C - 1 ? s[A + 1] * c : i.length, c)
              );
          var P = 0;
          for (A = 0; A < m.length; A += 3) {
            var O = m[A] * c,
              k = m[A + 1] * c,
              U = m[A + 2] * c;
            P += Math.abs(
              (i[O] - i[U]) * (i[k + 1] - i[O + 1]) -
                (i[O] - i[k]) * (i[U + 1] - i[O + 1])
            );
          }
          return y === 0 && P === 0 ? 0 : Math.abs((P - y) / y);
        }),
          (Sh.flatten = function (i) {
            for (
              var s = i[0][0].length,
                c = { vertices: [], holes: [], dimensions: s },
                m = 0,
                _ = 0;
              _ < i.length;
              _++
            ) {
              for (var y = 0; y < i[_].length; y++)
                for (var A = 0; A < s; A++) c.vertices.push(i[_][y][A]);
              _ > 0 && c.holes.push((m += i[_ - 1].length));
            }
            return c;
          }),
          (Th.default = Pv);
        var Al = function (i) {
          (this.zoom = i.zoom),
            (this.overscaling = i.overscaling),
            (this.layers = i.layers),
            (this.layerIds = this.layers.map(function (s) {
              return s.id;
            })),
            (this.index = i.index),
            (this.hasPattern = !1),
            (this.patternFeatures = []),
            (this.layoutVertexArray = new Zl()),
            (this.indexArray = new js()),
            (this.indexArray2 = new ku()),
            (this.programConfigurations = new Hn(i.layers, i.zoom)),
            (this.segments = new ne()),
            (this.segments2 = new ne()),
            (this.stateDependentLayerIds = this.layers
              .filter(function (s) {
                return s.isStateDependent();
              })
              .map(function (s) {
                return s.id;
              }));
        };
        (Al.prototype.populate = function (i, s, c) {
          this.hasPattern = $p("fill", this.layers, s);
          for (
            var m = this.layers[0].layout.get("fill-sort-key"),
              _ = [],
              y = 0,
              A = i;
            y < A.length;
            y += 1
          ) {
            var C = A[y],
              P = C.feature,
              O = C.id,
              k = C.index,
              U = C.sourceLayerIndex,
              W = this.layers[0]._featureFilter.needGeometry,
              $ = Pi(P, W);
            if (this.layers[0]._featureFilter.filter(new ur(this.zoom), $, c)) {
              var he = m ? m.evaluate($, {}, c, s.availableImages) : void 0,
                me = {
                  id: O,
                  properties: P.properties,
                  type: P.type,
                  sourceLayerIndex: U,
                  index: k,
                  geometry: W ? $.geometry : Ri(P),
                  patterns: {},
                  sortKey: he,
                };
              _.push(me);
            }
          }
          m &&
            _.sort(function (zt, Qt) {
              return zt.sortKey - Qt.sortKey;
            });
          for (var Ie = 0, Te = _; Ie < Te.length; Ie += 1) {
            var je = Te[Ie],
              Ze = je.geometry,
              at = je.index,
              lt = je.sourceLayerIndex;
            if (this.hasPattern) {
              var yt = Kp("fill", this.layers, je, this.zoom, s);
              this.patternFeatures.push(yt);
            } else this.addFeature(je, Ze, at, c, {});
            s.featureIndex.insert(i[at].feature, Ze, at, lt, this.index);
          }
        }),
          (Al.prototype.update = function (i, s, c) {
            this.stateDependentLayers.length &&
              this.programConfigurations.updatePaintArrays(
                i,
                s,
                this.stateDependentLayers,
                c
              );
          }),
          (Al.prototype.addFeatures = function (i, s, c) {
            for (var m = 0, _ = this.patternFeatures; m < _.length; m += 1) {
              var y = _[m];
              this.addFeature(y, y.geometry, y.index, s, c);
            }
          }),
          (Al.prototype.isEmpty = function () {
            return this.layoutVertexArray.length === 0;
          }),
          (Al.prototype.uploadPending = function () {
            return !this.uploaded || this.programConfigurations.needsUpload;
          }),
          (Al.prototype.upload = function (i) {
            this.uploaded ||
              ((this.layoutVertexBuffer = i.createVertexBuffer(
                this.layoutVertexArray,
                Mv
              )),
              (this.indexBuffer = i.createIndexBuffer(this.indexArray)),
              (this.indexBuffer2 = i.createIndexBuffer(this.indexArray2))),
              this.programConfigurations.upload(i),
              (this.uploaded = !0);
          }),
          (Al.prototype.destroy = function () {
            this.layoutVertexBuffer &&
              (this.layoutVertexBuffer.destroy(),
              this.indexBuffer.destroy(),
              this.indexBuffer2.destroy(),
              this.programConfigurations.destroy(),
              this.segments.destroy(),
              this.segments2.destroy());
          }),
          (Al.prototype.addFeature = function (i, s, c, m, _) {
            for (var y = 0, A = Ih(s, 500); y < A.length; y += 1) {
              for (var C = A[y], P = 0, O = 0, k = C; O < k.length; O += 1)
                P += k[O].length;
              for (
                var U = this.segments.prepareSegment(
                    P,
                    this.layoutVertexArray,
                    this.indexArray
                  ),
                  W = U.vertexLength,
                  $ = [],
                  he = [],
                  me = 0,
                  Ie = C;
                me < Ie.length;
                me += 1
              ) {
                var Te = Ie[me];
                if (Te.length !== 0) {
                  Te !== C[0] && he.push($.length / 2);
                  var je = this.segments2.prepareSegment(
                      Te.length,
                      this.layoutVertexArray,
                      this.indexArray2
                    ),
                    Ze = je.vertexLength;
                  this.layoutVertexArray.emplaceBack(Te[0].x, Te[0].y),
                    this.indexArray2.emplaceBack(Ze + Te.length - 1, Ze),
                    $.push(Te[0].x),
                    $.push(Te[0].y);
                  for (var at = 1; at < Te.length; at++)
                    this.layoutVertexArray.emplaceBack(Te[at].x, Te[at].y),
                      this.indexArray2.emplaceBack(Ze + at - 1, Ze + at),
                      $.push(Te[at].x),
                      $.push(Te[at].y);
                  (je.vertexLength += Te.length),
                    (je.primitiveLength += Te.length);
                }
              }
              for (var lt = Th($, he), yt = 0; yt < lt.length; yt += 3)
                this.indexArray.emplaceBack(
                  W + lt[yt],
                  W + lt[yt + 1],
                  W + lt[yt + 2]
                );
              (U.vertexLength += P), (U.primitiveLength += lt.length / 3);
            }
            this.programConfigurations.populatePaintArrays(
              this.layoutVertexArray.length,
              i,
              c,
              _,
              m
            );
          }),
          vn("FillBucket", Al, { omit: ["layers", "patternFeatures"] });
        var ou = new Ni({
            "fill-sort-key": new bn(te.layout_fill["fill-sort-key"]),
          }),
          $1 = {
            paint: new Ni({
              "fill-antialias": new Rn(te.paint_fill["fill-antialias"]),
              "fill-opacity": new bn(te.paint_fill["fill-opacity"]),
              "fill-color": new bn(te.paint_fill["fill-color"]),
              "fill-outline-color": new bn(te.paint_fill["fill-outline-color"]),
              "fill-translate": new Rn(te.paint_fill["fill-translate"]),
              "fill-translate-anchor": new Rn(
                te.paint_fill["fill-translate-anchor"]
              ),
              "fill-pattern": new Bo(te.paint_fill["fill-pattern"]),
            }),
            layout: ou,
          },
          K1 = (function (i) {
            function s(c) {
              i.call(this, c, $1);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.recalculate = function (c, m) {
                i.prototype.recalculate.call(this, c, m);
                var _ = this.paint._values["fill-outline-color"];
                _.value.kind === "constant" &&
                  _.value.value === void 0 &&
                  (this.paint._values["fill-outline-color"] =
                    this.paint._values["fill-color"]);
              }),
              (s.prototype.createBucket = function (c) {
                return new Al(c);
              }),
              (s.prototype.queryRadius = function () {
                return Vi(this.paint.get("fill-translate"));
              }),
              (s.prototype.queryIntersectsFeature = function (
                c,
                m,
                _,
                y,
                A,
                C,
                P
              ) {
                return us(
                  Eo(
                    c,
                    this.paint.get("fill-translate"),
                    this.paint.get("fill-translate-anchor"),
                    C.angle,
                    P
                  ),
                  y
                );
              }),
              (s.prototype.isTileClipped = function () {
                return !0;
              }),
              s
            );
          })(ls),
          Q1 = xa(
            [
              { name: "a_pos", components: 2, type: "Int16" },
              { name: "a_normal_ed", components: 4, type: "Int16" },
            ],
            4
          ).members,
          J1 = Xu;
        function Xu(i, s, c, m, _) {
          (this.properties = {}),
            (this.extent = c),
            (this.type = 0),
            (this._pbf = i),
            (this._geometry = -1),
            (this._keys = m),
            (this._values = _),
            i.readFields(kv, this, s);
        }
        function kv(i, s, c) {
          i == 1
            ? (s.id = c.readVarint())
            : i == 2
            ? (function (m, _) {
                for (var y = m.readVarint() + m.pos; m.pos < y; ) {
                  var A = _._keys[m.readVarint()],
                    C = _._values[m.readVarint()];
                  _.properties[A] = C;
                }
              })(c, s)
            : i == 3
            ? (s.type = c.readVarint())
            : i == 4 && (s._geometry = c.pos);
        }
        function Ql(i) {
          for (var s, c, m = 0, _ = 0, y = i.length, A = y - 1; _ < y; A = _++)
            m += ((c = i[A]).x - (s = i[_]).x) * (s.y + c.y);
          return m;
        }
        (Xu.types = ["Unknown", "Point", "LineString", "Polygon"]),
          (Xu.prototype.loadGeometry = function () {
            var i = this._pbf;
            i.pos = this._geometry;
            for (
              var s,
                c = i.readVarint() + i.pos,
                m = 1,
                _ = 0,
                y = 0,
                A = 0,
                C = [];
              i.pos < c;

            ) {
              if (_ <= 0) {
                var P = i.readVarint();
                (m = 7 & P), (_ = P >> 3);
              }
              if ((_--, m === 1 || m === 2))
                (y += i.readSVarint()),
                  (A += i.readSVarint()),
                  m === 1 && (s && C.push(s), (s = [])),
                  s.push(new E(y, A));
              else {
                if (m !== 7) throw new Error("unknown command " + m);
                s && s.push(s[0].clone());
              }
            }
            return s && C.push(s), C;
          }),
          (Xu.prototype.bbox = function () {
            var i = this._pbf;
            i.pos = this._geometry;
            for (
              var s = i.readVarint() + i.pos,
                c = 1,
                m = 0,
                _ = 0,
                y = 0,
                A = 1 / 0,
                C = -1 / 0,
                P = 1 / 0,
                O = -1 / 0;
              i.pos < s;

            ) {
              if (m <= 0) {
                var k = i.readVarint();
                (c = 7 & k), (m = k >> 3);
              }
              if ((m--, c === 1 || c === 2))
                (_ += i.readSVarint()) < A && (A = _),
                  _ > C && (C = _),
                  (y += i.readSVarint()) < P && (P = y),
                  y > O && (O = y);
              else if (c !== 7) throw new Error("unknown command " + c);
            }
            return [A, P, C, O];
          }),
          (Xu.prototype.toGeoJSON = function (i, s, c) {
            var m,
              _,
              y = this.extent * Math.pow(2, c),
              A = this.extent * i,
              C = this.extent * s,
              P = this.loadGeometry(),
              O = Xu.types[this.type];
            function k($) {
              for (var he = 0; he < $.length; he++) {
                var me = $[he];
                $[he] = [
                  (360 * (me.x + A)) / y - 180,
                  (360 / Math.PI) *
                    Math.atan(
                      Math.exp(((180 - (360 * (me.y + C)) / y) * Math.PI) / 180)
                    ) -
                    90,
                ];
              }
            }
            switch (this.type) {
              case 1:
                var U = [];
                for (m = 0; m < P.length; m++) U[m] = P[m][0];
                k((P = U));
                break;
              case 2:
                for (m = 0; m < P.length; m++) k(P[m]);
                break;
              case 3:
                for (
                  P = (function ($) {
                    var he = $.length;
                    if (he <= 1) return [$];
                    for (var me, Ie, Te = [], je = 0; je < he; je++) {
                      var Ze = Ql($[je]);
                      Ze !== 0 &&
                        (Ie === void 0 && (Ie = Ze < 0),
                        Ie === Ze < 0
                          ? (me && Te.push(me), (me = [$[je]]))
                          : me.push($[je]));
                    }
                    return me && Te.push(me), Te;
                  })(P),
                    m = 0;
                  m < P.length;
                  m++
                )
                  for (_ = 0; _ < P[m].length; _++) k(P[m][_]);
            }
            P.length === 1 ? (P = P[0]) : (O = "Multi" + O);
            var W = {
              type: "Feature",
              geometry: { type: O, coordinates: P },
              properties: this.properties,
            };
            return "id" in this && (W.id = this.id), W;
          });
        var Qp = Gu;
        function Gu(i, s) {
          (this.version = 1),
            (this.name = null),
            (this.extent = 4096),
            (this.length = 0),
            (this._pbf = i),
            (this._keys = []),
            (this._values = []),
            (this._features = []),
            i.readFields(su, this, s),
            (this.length = this._features.length);
        }
        function su(i, s, c) {
          i === 15
            ? (s.version = c.readVarint())
            : i === 1
            ? (s.name = c.readString())
            : i === 5
            ? (s.extent = c.readVarint())
            : i === 2
            ? s._features.push(c.pos)
            : i === 3
            ? s._keys.push(c.readString())
            : i === 4 &&
              s._values.push(
                (function (m) {
                  for (var _ = null, y = m.readVarint() + m.pos; m.pos < y; ) {
                    var A = m.readVarint() >> 3;
                    _ =
                      A === 1
                        ? m.readString()
                        : A === 2
                        ? m.readFloat()
                        : A === 3
                        ? m.readDouble()
                        : A === 4
                        ? m.readVarint64()
                        : A === 5
                        ? m.readVarint()
                        : A === 6
                        ? m.readSVarint()
                        : A === 7
                        ? m.readBoolean()
                        : null;
                  }
                  return _;
                })(c)
              );
        }
        function em(i, s, c) {
          if (i === 3) {
            var m = new Qp(c, c.readVarint() + c.pos);
            m.length && (s[m.name] = m);
          }
        }
        Gu.prototype.feature = function (i) {
          if (i < 0 || i >= this._features.length)
            throw new Error("feature index out of bounds");
          this._pbf.pos = this._features[i];
          var s = this._pbf.readVarint() + this._pbf.pos;
          return new J1(this._pbf, s, this.extent, this._keys, this._values);
        };
        var lu = {
            VectorTile: function (i, s) {
              this.layers = i.readFields(em, {}, s);
            },
            VectorTileFeature: J1,
            VectorTileLayer: Qp,
          },
          Mh = lu.VectorTileFeature.types,
          Ph = Math.pow(2, 13);
        function To(i, s, c, m, _, y, A, C) {
          i.emplaceBack(
            s,
            c,
            2 * Math.floor(m * Ph) + A,
            _ * Ph * 2,
            y * Ph * 2,
            Math.round(C)
          );
        }
        var fo = function (i) {
          (this.zoom = i.zoom),
            (this.overscaling = i.overscaling),
            (this.layers = i.layers),
            (this.layerIds = this.layers.map(function (s) {
              return s.id;
            })),
            (this.index = i.index),
            (this.hasPattern = !1),
            (this.layoutVertexArray = new bl()),
            (this.indexArray = new js()),
            (this.programConfigurations = new Hn(i.layers, i.zoom)),
            (this.segments = new ne()),
            (this.stateDependentLayerIds = this.layers
              .filter(function (s) {
                return s.isStateDependent();
              })
              .map(function (s) {
                return s.id;
              }));
        };
        function Ea(i, s) {
          return (
            (i.x === s.x && (i.x < 0 || i.x > 8192)) ||
            (i.y === s.y && (i.y < 0 || i.y > 8192))
          );
        }
        (fo.prototype.populate = function (i, s, c) {
          (this.features = []),
            (this.hasPattern = $p("fill-extrusion", this.layers, s));
          for (var m = 0, _ = i; m < _.length; m += 1) {
            var y = _[m],
              A = y.feature,
              C = y.id,
              P = y.index,
              O = y.sourceLayerIndex,
              k = this.layers[0]._featureFilter.needGeometry,
              U = Pi(A, k);
            if (this.layers[0]._featureFilter.filter(new ur(this.zoom), U, c)) {
              var W = {
                id: C,
                sourceLayerIndex: O,
                index: P,
                geometry: k ? U.geometry : Ri(A),
                properties: A.properties,
                type: A.type,
                patterns: {},
              };
              this.hasPattern
                ? this.features.push(
                    Kp("fill-extrusion", this.layers, W, this.zoom, s)
                  )
                : this.addFeature(W, W.geometry, P, c, {}),
                s.featureIndex.insert(A, W.geometry, P, O, this.index, !0);
            }
          }
        }),
          (fo.prototype.addFeatures = function (i, s, c) {
            for (var m = 0, _ = this.features; m < _.length; m += 1) {
              var y = _[m];
              this.addFeature(y, y.geometry, y.index, s, c);
            }
          }),
          (fo.prototype.update = function (i, s, c) {
            this.stateDependentLayers.length &&
              this.programConfigurations.updatePaintArrays(
                i,
                s,
                this.stateDependentLayers,
                c
              );
          }),
          (fo.prototype.isEmpty = function () {
            return this.layoutVertexArray.length === 0;
          }),
          (fo.prototype.uploadPending = function () {
            return !this.uploaded || this.programConfigurations.needsUpload;
          }),
          (fo.prototype.upload = function (i) {
            this.uploaded ||
              ((this.layoutVertexBuffer = i.createVertexBuffer(
                this.layoutVertexArray,
                Q1
              )),
              (this.indexBuffer = i.createIndexBuffer(this.indexArray))),
              this.programConfigurations.upload(i),
              (this.uploaded = !0);
          }),
          (fo.prototype.destroy = function () {
            this.layoutVertexBuffer &&
              (this.layoutVertexBuffer.destroy(),
              this.indexBuffer.destroy(),
              this.programConfigurations.destroy(),
              this.segments.destroy());
          }),
          (fo.prototype.addFeature = function (i, s, c, m, _) {
            for (var y = 0, A = Ih(s, 500); y < A.length; y += 1) {
              for (var C = A[y], P = 0, O = 0, k = C; O < k.length; O += 1)
                P += k[O].length;
              for (
                var U = this.segments.prepareSegment(
                    4,
                    this.layoutVertexArray,
                    this.indexArray
                  ),
                  W = 0,
                  $ = C;
                W < $.length;
                W += 1
              ) {
                var he = $[W];
                if (
                  he.length !== 0 &&
                  !(
                    (Mr = he).every(function (pr) {
                      return pr.x < 0;
                    }) ||
                    Mr.every(function (pr) {
                      return pr.x > 8192;
                    }) ||
                    Mr.every(function (pr) {
                      return pr.y < 0;
                    }) ||
                    Mr.every(function (pr) {
                      return pr.y > 8192;
                    })
                  )
                )
                  for (var me = 0, Ie = 0; Ie < he.length; Ie++) {
                    var Te = he[Ie];
                    if (Ie >= 1) {
                      var je = he[Ie - 1];
                      if (!Ea(Te, je)) {
                        U.vertexLength + 4 > ne.MAX_VERTEX_ARRAY_LENGTH &&
                          (U = this.segments.prepareSegment(
                            4,
                            this.layoutVertexArray,
                            this.indexArray
                          ));
                        var Ze = Te.sub(je)._perp()._unit(),
                          at = je.dist(Te);
                        me + at > 32768 && (me = 0),
                          To(
                            this.layoutVertexArray,
                            Te.x,
                            Te.y,
                            Ze.x,
                            Ze.y,
                            0,
                            0,
                            me
                          ),
                          To(
                            this.layoutVertexArray,
                            Te.x,
                            Te.y,
                            Ze.x,
                            Ze.y,
                            0,
                            1,
                            me
                          ),
                          To(
                            this.layoutVertexArray,
                            je.x,
                            je.y,
                            Ze.x,
                            Ze.y,
                            0,
                            0,
                            (me += at)
                          ),
                          To(
                            this.layoutVertexArray,
                            je.x,
                            je.y,
                            Ze.x,
                            Ze.y,
                            0,
                            1,
                            me
                          );
                        var lt = U.vertexLength;
                        this.indexArray.emplaceBack(lt, lt + 2, lt + 1),
                          this.indexArray.emplaceBack(lt + 1, lt + 2, lt + 3),
                          (U.vertexLength += 4),
                          (U.primitiveLength += 2);
                      }
                    }
                  }
              }
              if (
                (U.vertexLength + P > ne.MAX_VERTEX_ARRAY_LENGTH &&
                  (U = this.segments.prepareSegment(
                    P,
                    this.layoutVertexArray,
                    this.indexArray
                  )),
                Mh[i.type] === "Polygon")
              ) {
                for (
                  var yt = [], zt = [], Qt = U.vertexLength, Mn = 0, dn = C;
                  Mn < dn.length;
                  Mn += 1
                ) {
                  var Un = dn[Mn];
                  if (Un.length !== 0) {
                    Un !== C[0] && zt.push(yt.length / 2);
                    for (var fn = 0; fn < Un.length; fn++) {
                      var Ar = Un[fn];
                      To(this.layoutVertexArray, Ar.x, Ar.y, 0, 0, 1, 1, 0),
                        yt.push(Ar.x),
                        yt.push(Ar.y);
                    }
                  }
                }
                for (var qn = Th(yt, zt), Tn = 0; Tn < qn.length; Tn += 3)
                  this.indexArray.emplaceBack(
                    Qt + qn[Tn],
                    Qt + qn[Tn + 2],
                    Qt + qn[Tn + 1]
                  );
                (U.primitiveLength += qn.length / 3), (U.vertexLength += P);
              }
            }
            var Mr;
            this.programConfigurations.populatePaintArrays(
              this.layoutVertexArray.length,
              i,
              c,
              _,
              m
            );
          }),
          vn("FillExtrusionBucket", fo, { omit: ["layers", "features"] });
        var hs = {
            paint: new Ni({
              "fill-extrusion-opacity": new Rn(
                te["paint_fill-extrusion"]["fill-extrusion-opacity"]
              ),
              "fill-extrusion-color": new bn(
                te["paint_fill-extrusion"]["fill-extrusion-color"]
              ),
              "fill-extrusion-translate": new Rn(
                te["paint_fill-extrusion"]["fill-extrusion-translate"]
              ),
              "fill-extrusion-translate-anchor": new Rn(
                te["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]
              ),
              "fill-extrusion-pattern": new Bo(
                te["paint_fill-extrusion"]["fill-extrusion-pattern"]
              ),
              "fill-extrusion-height": new bn(
                te["paint_fill-extrusion"]["fill-extrusion-height"]
              ),
              "fill-extrusion-base": new bn(
                te["paint_fill-extrusion"]["fill-extrusion-base"]
              ),
              "fill-extrusion-vertical-gradient": new Rn(
                te["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]
              ),
            }),
          },
          tm = (function (i) {
            function s(c) {
              i.call(this, c, hs);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.createBucket = function (c) {
                return new fo(c);
              }),
              (s.prototype.queryRadius = function () {
                return Vi(this.paint.get("fill-extrusion-translate"));
              }),
              (s.prototype.is3D = function () {
                return !0;
              }),
              (s.prototype.queryIntersectsFeature = function (
                c,
                m,
                _,
                y,
                A,
                C,
                P,
                O
              ) {
                var k = Eo(
                    c,
                    this.paint.get("fill-extrusion-translate"),
                    this.paint.get("fill-extrusion-translate-anchor"),
                    C.angle,
                    P
                  ),
                  U = this.paint.get("fill-extrusion-height").evaluate(m, _),
                  W = this.paint.get("fill-extrusion-base").evaluate(m, _),
                  $ = (function (me, Ie, Te, je) {
                    for (
                      var Ze = [], at = 0, lt = me;
                      at < lt.length;
                      at += 1
                    ) {
                      var yt = lt[at],
                        zt = [yt.x, yt.y, 0, 1];
                      Kl(zt, zt, Ie),
                        Ze.push(new E(zt[0] / zt[3], zt[1] / zt[3]));
                    }
                    return Ze;
                  })(k, O),
                  he = (function (me, Ie, Te, je) {
                    for (
                      var Ze = [],
                        at = [],
                        lt = je[8] * Ie,
                        yt = je[9] * Ie,
                        zt = je[10] * Ie,
                        Qt = je[11] * Ie,
                        Mn = je[8] * Te,
                        dn = je[9] * Te,
                        Un = je[10] * Te,
                        fn = je[11] * Te,
                        Ar = 0,
                        qn = me;
                      Ar < qn.length;
                      Ar += 1
                    ) {
                      for (
                        var Tn = [], Mr = [], pr = 0, Hr = qn[Ar];
                        pr < Hr.length;
                        pr += 1
                      ) {
                        var zn = Hr[pr],
                          Kr = zn.x,
                          Li = zn.y,
                          Qi = je[0] * Kr + je[4] * Li + je[12],
                          Yi = je[1] * Kr + je[5] * Li + je[13],
                          Di = je[2] * Kr + je[6] * Li + je[14],
                          Ji = je[3] * Kr + je[7] * Li + je[15],
                          Ya = Di + zt,
                          qa = Ji + Qt,
                          Uo = Qi + Mn,
                          io = Yi + dn,
                          zo = Di + Un,
                          sa = Ji + fn,
                          ao = new E((Qi + lt) / qa, (Yi + yt) / qa);
                        (ao.z = Ya / qa), Tn.push(ao);
                        var Dr = new E(Uo / sa, io / sa);
                        (Dr.z = zo / sa), Mr.push(Dr);
                      }
                      Ze.push(Tn), at.push(Mr);
                    }
                    return [Ze, at];
                  })(y, W, U, O);
                return (function (me, Ie, Te) {
                  var je = 1 / 0;
                  us(Te, Ie) && (je = nm(Te, Ie[0]));
                  for (var Ze = 0; Ze < Ie.length; Ze++)
                    for (
                      var at = Ie[Ze], lt = me[Ze], yt = 0;
                      yt < at.length - 1;
                      yt++
                    ) {
                      var zt = at[yt],
                        Qt = [zt, at[yt + 1], lt[yt + 1], lt[yt], zt];
                      Ws(Te, Qt) && (je = Math.min(je, nm(Te, Qt)));
                    }
                  return je !== 1 / 0 && je;
                })(he[0], he[1], $);
              }),
              s
            );
          })(ls);
        function P0(i, s) {
          return i.x * s.x + i.y * s.y;
        }
        function nm(i, s) {
          if (i.length === 1) {
            for (var c, m = 0, _ = s[m++]; !c || _.equals(c); )
              if (!(c = s[m++])) return 1 / 0;
            for (; m < s.length; m++) {
              var y = s[m],
                A = i[0],
                C = c.sub(_),
                P = y.sub(_),
                O = A.sub(_),
                k = P0(C, C),
                U = P0(C, P),
                W = P0(P, P),
                $ = P0(O, C),
                he = P0(O, P),
                me = k * W - U * U,
                Ie = (W * $ - U * he) / me,
                Te = (k * he - U * $) / me,
                je = _.z * (1 - Ie - Te) + c.z * Ie + y.z * Te;
              if (isFinite(je)) return je;
            }
            return 1 / 0;
          }
          for (var Ze = 1 / 0, at = 0, lt = s; at < lt.length; at += 1)
            Ze = Math.min(Ze, lt[at].z);
          return Ze;
        }
        var Uv = xa(
            [
              { name: "a_pos_normal", components: 2, type: "Int16" },
              { name: "a_data", components: 4, type: "Uint8" },
            ],
            4
          ).members,
          zv = xa([
            { name: "a_uv_x", components: 1, type: "Float32" },
            { name: "a_split_index", components: 1, type: "Float32" },
          ]).members,
          rm = lu.VectorTileFeature.types,
          Vv = Math.cos((Math.PI / 180) * 37.5),
          im = Math.pow(2, 14) / 0.5,
          So = function (i) {
            var s = this;
            (this.zoom = i.zoom),
              (this.overscaling = i.overscaling),
              (this.layers = i.layers),
              (this.layerIds = this.layers.map(function (c) {
                return c.id;
              })),
              (this.index = i.index),
              (this.hasPattern = !1),
              (this.patternFeatures = []),
              (this.lineClipsArray = []),
              (this.gradients = {}),
              this.layers.forEach(function (c) {
                s.gradients[c.id] = {};
              }),
              (this.layoutVertexArray = new Fo()),
              (this.layoutVertexArray2 = new Jc()),
              (this.indexArray = new js()),
              (this.programConfigurations = new Hn(i.layers, i.zoom)),
              (this.segments = new ne()),
              (this.maxLineLength = 0),
              (this.stateDependentLayerIds = this.layers
                .filter(function (c) {
                  return c.isStateDependent();
                })
                .map(function (c) {
                  return c.id;
                }));
          };
        (So.prototype.populate = function (i, s, c) {
          this.hasPattern = $p("line", this.layers, s);
          for (
            var m = this.layers[0].layout.get("line-sort-key"),
              _ = [],
              y = 0,
              A = i;
            y < A.length;
            y += 1
          ) {
            var C = A[y],
              P = C.feature,
              O = C.id,
              k = C.index,
              U = C.sourceLayerIndex,
              W = this.layers[0]._featureFilter.needGeometry,
              $ = Pi(P, W);
            if (this.layers[0]._featureFilter.filter(new ur(this.zoom), $, c)) {
              var he = m ? m.evaluate($, {}, c) : void 0,
                me = {
                  id: O,
                  properties: P.properties,
                  type: P.type,
                  sourceLayerIndex: U,
                  index: k,
                  geometry: W ? $.geometry : Ri(P),
                  patterns: {},
                  sortKey: he,
                };
              _.push(me);
            }
          }
          m &&
            _.sort(function (zt, Qt) {
              return zt.sortKey - Qt.sortKey;
            });
          for (var Ie = 0, Te = _; Ie < Te.length; Ie += 1) {
            var je = Te[Ie],
              Ze = je.geometry,
              at = je.index,
              lt = je.sourceLayerIndex;
            if (this.hasPattern) {
              var yt = Kp("line", this.layers, je, this.zoom, s);
              this.patternFeatures.push(yt);
            } else this.addFeature(je, Ze, at, c, {});
            s.featureIndex.insert(i[at].feature, Ze, at, lt, this.index);
          }
        }),
          (So.prototype.update = function (i, s, c) {
            this.stateDependentLayers.length &&
              this.programConfigurations.updatePaintArrays(
                i,
                s,
                this.stateDependentLayers,
                c
              );
          }),
          (So.prototype.addFeatures = function (i, s, c) {
            for (var m = 0, _ = this.patternFeatures; m < _.length; m += 1) {
              var y = _[m];
              this.addFeature(y, y.geometry, y.index, s, c);
            }
          }),
          (So.prototype.isEmpty = function () {
            return this.layoutVertexArray.length === 0;
          }),
          (So.prototype.uploadPending = function () {
            return !this.uploaded || this.programConfigurations.needsUpload;
          }),
          (So.prototype.upload = function (i) {
            this.uploaded ||
              (this.layoutVertexArray2.length !== 0 &&
                (this.layoutVertexBuffer2 = i.createVertexBuffer(
                  this.layoutVertexArray2,
                  zv
                )),
              (this.layoutVertexBuffer = i.createVertexBuffer(
                this.layoutVertexArray,
                Uv
              )),
              (this.indexBuffer = i.createIndexBuffer(this.indexArray))),
              this.programConfigurations.upload(i),
              (this.uploaded = !0);
          }),
          (So.prototype.destroy = function () {
            this.layoutVertexBuffer &&
              (this.layoutVertexBuffer.destroy(),
              this.indexBuffer.destroy(),
              this.programConfigurations.destroy(),
              this.segments.destroy());
          }),
          (So.prototype.lineFeatureClips = function (i) {
            if (
              i.properties &&
              i.properties.hasOwnProperty("mapbox_clip_start") &&
              i.properties.hasOwnProperty("mapbox_clip_end")
            )
              return {
                start: +i.properties.mapbox_clip_start,
                end: +i.properties.mapbox_clip_end,
              };
          }),
          (So.prototype.addFeature = function (i, s, c, m, _) {
            var y = this.layers[0].layout,
              A = y.get("line-join").evaluate(i, {}),
              C = y.get("line-cap"),
              P = y.get("line-miter-limit"),
              O = y.get("line-round-limit");
            this.lineClips = this.lineFeatureClips(i);
            for (var k = 0, U = s; k < U.length; k += 1)
              this.addLine(U[k], i, A, C, P, O);
            this.programConfigurations.populatePaintArrays(
              this.layoutVertexArray.length,
              i,
              c,
              _,
              m
            );
          }),
          (So.prototype.addLine = function (i, s, c, m, _, y) {
            if (
              ((this.distance = 0),
              (this.scaledDistance = 0),
              (this.totalDistance = 0),
              this.lineClips)
            ) {
              this.lineClipsArray.push(this.lineClips);
              for (var A = 0; A < i.length - 1; A++)
                this.totalDistance += i[A].dist(i[A + 1]);
              this.updateScaledDistance(),
                (this.maxLineLength = Math.max(
                  this.maxLineLength,
                  this.totalDistance
                ));
            }
            for (
              var C = rm[s.type] === "Polygon", P = i.length;
              P >= 2 && i[P - 1].equals(i[P - 2]);

            )
              P--;
            for (var O = 0; O < P - 1 && i[O].equals(i[O + 1]); ) O++;
            if (!(P < (C ? 3 : 2))) {
              c === "bevel" && (_ = 1.05);
              var k,
                U =
                  this.overscaling <= 16
                    ? 122880 / (512 * this.overscaling)
                    : 0,
                W = this.segments.prepareSegment(
                  10 * P,
                  this.layoutVertexArray,
                  this.indexArray
                ),
                $ = void 0,
                he = void 0,
                me = void 0,
                Ie = void 0;
              (this.e1 = this.e2 = -1),
                C &&
                  (Ie = i[O].sub((k = i[P - 2]))
                    ._unit()
                    ._perp());
              for (var Te = O; Te < P; Te++)
                if (
                  !(he = Te === P - 1 ? (C ? i[O + 1] : void 0) : i[Te + 1]) ||
                  !i[Te].equals(he)
                ) {
                  Ie && (me = Ie),
                    k && ($ = k),
                    (k = i[Te]),
                    (Ie = he ? he.sub(k)._unit()._perp() : me);
                  var je = (me = me || Ie).add(Ie);
                  (je.x === 0 && je.y === 0) || je._unit();
                  var Ze = me.x * Ie.x + me.y * Ie.y,
                    at = je.x * Ie.x + je.y * Ie.y,
                    lt = at !== 0 ? 1 / at : 1 / 0,
                    yt = 2 * Math.sqrt(2 - 2 * at),
                    zt = at < Vv && $ && he,
                    Qt = me.x * Ie.y - me.y * Ie.x > 0;
                  if (zt && Te > O) {
                    var Mn = k.dist($);
                    if (Mn > 2 * U) {
                      var dn = k.sub(
                        k
                          .sub($)
                          ._mult(U / Mn)
                          ._round()
                      );
                      this.updateDistance($, dn),
                        this.addCurrentVertex(dn, me, 0, 0, W),
                        ($ = dn);
                    }
                  }
                  var Un = $ && he,
                    fn = Un ? c : C ? "butt" : m;
                  if (
                    (Un &&
                      fn === "round" &&
                      (lt < y ? (fn = "miter") : lt <= 2 && (fn = "fakeround")),
                    fn === "miter" && lt > _ && (fn = "bevel"),
                    fn === "bevel" &&
                      (lt > 2 && (fn = "flipbevel"), lt < _ && (fn = "miter")),
                    $ && this.updateDistance($, k),
                    fn === "miter")
                  )
                    je._mult(lt), this.addCurrentVertex(k, je, 0, 0, W);
                  else if (fn === "flipbevel") {
                    if (lt > 100) je = Ie.mult(-1);
                    else {
                      var Ar = (lt * me.add(Ie).mag()) / me.sub(Ie).mag();
                      je._perp()._mult(Ar * (Qt ? -1 : 1));
                    }
                    this.addCurrentVertex(k, je, 0, 0, W),
                      this.addCurrentVertex(k, je.mult(-1), 0, 0, W);
                  } else if (fn === "bevel" || fn === "fakeround") {
                    var qn = -Math.sqrt(lt * lt - 1),
                      Tn = Qt ? qn : 0,
                      Mr = Qt ? 0 : qn;
                    if (
                      ($ && this.addCurrentVertex(k, me, Tn, Mr, W),
                      fn === "fakeround")
                    )
                      for (
                        var pr = Math.round((180 * yt) / Math.PI / 20), Hr = 1;
                        Hr < pr;
                        Hr++
                      ) {
                        var zn = Hr / pr;
                        if (zn !== 0.5) {
                          var Kr = zn - 0.5;
                          zn +=
                            zn *
                            Kr *
                            (zn - 1) *
                            ((1.0904 +
                              Ze * (Ze * (3.55645 - 1.43519 * Ze) - 3.2452)) *
                              Kr *
                              Kr +
                              (0.848013 + Ze * (0.215638 * Ze - 1.06021)));
                        }
                        var Li = Ie.sub(me)
                          ._mult(zn)
                          ._add(me)
                          ._unit()
                          ._mult(Qt ? -1 : 1);
                        this.addHalfVertex(k, Li.x, Li.y, !1, Qt, 0, W);
                      }
                    he && this.addCurrentVertex(k, Ie, -Tn, -Mr, W);
                  } else if (fn === "butt")
                    this.addCurrentVertex(k, je, 0, 0, W);
                  else if (fn === "square") {
                    var Qi = $ ? 1 : -1;
                    this.addCurrentVertex(k, je, Qi, Qi, W);
                  } else
                    fn === "round" &&
                      ($ &&
                        (this.addCurrentVertex(k, me, 0, 0, W),
                        this.addCurrentVertex(k, me, 1, 1, W, !0)),
                      he &&
                        (this.addCurrentVertex(k, Ie, -1, -1, W, !0),
                        this.addCurrentVertex(k, Ie, 0, 0, W)));
                  if (zt && Te < P - 1) {
                    var Yi = k.dist(he);
                    if (Yi > 2 * U) {
                      var Di = k.add(
                        he
                          .sub(k)
                          ._mult(U / Yi)
                          ._round()
                      );
                      this.updateDistance(k, Di),
                        this.addCurrentVertex(Di, Ie, 0, 0, W),
                        (k = Di);
                    }
                  }
                }
            }
          }),
          (So.prototype.addCurrentVertex = function (i, s, c, m, _, y) {
            y === void 0 && (y = !1);
            var A = s.y * m - s.x,
              C = -s.y - s.x * m;
            this.addHalfVertex(i, s.x + s.y * c, s.y - s.x * c, y, !1, c, _),
              this.addHalfVertex(i, A, C, y, !0, -m, _),
              this.distance > im / 2 &&
                this.totalDistance === 0 &&
                ((this.distance = 0), this.addCurrentVertex(i, s, c, m, _, y));
          }),
          (So.prototype.addHalfVertex = function (i, s, c, m, _, y, A) {
            var C =
              0.5 *
              (this.lineClips
                ? this.scaledDistance * (im - 1)
                : this.scaledDistance);
            this.layoutVertexArray.emplaceBack(
              (i.x << 1) + (m ? 1 : 0),
              (i.y << 1) + (_ ? 1 : 0),
              Math.round(63 * s) + 128,
              Math.round(63 * c) + 128,
              (1 + (y === 0 ? 0 : y < 0 ? -1 : 1)) | ((63 & C) << 2),
              C >> 6
            ),
              this.lineClips &&
                this.layoutVertexArray2.emplaceBack(
                  (this.scaledDistance - this.lineClips.start) /
                    (this.lineClips.end - this.lineClips.start),
                  this.lineClipsArray.length
                );
            var P = A.vertexLength++;
            this.e1 >= 0 &&
              this.e2 >= 0 &&
              (this.indexArray.emplaceBack(this.e1, this.e2, P),
              A.primitiveLength++),
              _ ? (this.e2 = P) : (this.e1 = P);
          }),
          (So.prototype.updateScaledDistance = function () {
            this.scaledDistance = this.lineClips
              ? this.lineClips.start +
                ((this.lineClips.end - this.lineClips.start) * this.distance) /
                  this.totalDistance
              : this.distance;
          }),
          (So.prototype.updateDistance = function (i, s) {
            (this.distance += i.dist(s)), this.updateScaledDistance();
          }),
          vn("LineBucket", So, { omit: ["layers", "patternFeatures"] });
        var Hv = new Ni({
            "line-cap": new Rn(te.layout_line["line-cap"]),
            "line-join": new bn(te.layout_line["line-join"]),
            "line-miter-limit": new Rn(te.layout_line["line-miter-limit"]),
            "line-round-limit": new Rn(te.layout_line["line-round-limit"]),
            "line-sort-key": new bn(te.layout_line["line-sort-key"]),
          }),
          am = {
            paint: new Ni({
              "line-opacity": new bn(te.paint_line["line-opacity"]),
              "line-color": new bn(te.paint_line["line-color"]),
              "line-translate": new Rn(te.paint_line["line-translate"]),
              "line-translate-anchor": new Rn(
                te.paint_line["line-translate-anchor"]
              ),
              "line-width": new bn(te.paint_line["line-width"]),
              "line-gap-width": new bn(te.paint_line["line-gap-width"]),
              "line-offset": new bn(te.paint_line["line-offset"]),
              "line-blur": new bn(te.paint_line["line-blur"]),
              "line-dasharray": new eo(te.paint_line["line-dasharray"]),
              "line-pattern": new Bo(te.paint_line["line-pattern"]),
              "line-gradient": new Es(te.paint_line["line-gradient"]),
            }),
            layout: Hv,
          },
          Jp = new ((function (i) {
            function s() {
              i.apply(this, arguments);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.possiblyEvaluate = function (c, m) {
                return (
                  (m = new ur(Math.floor(m.zoom), {
                    now: m.now,
                    fadeDuration: m.fadeDuration,
                    zoomHistory: m.zoomHistory,
                    transition: m.transition,
                  })),
                  i.prototype.possiblyEvaluate.call(this, c, m)
                );
              }),
              (s.prototype.evaluate = function (c, m, _, y) {
                return (
                  (m = G({}, m, { zoom: Math.floor(m.zoom) })),
                  i.prototype.evaluate.call(this, c, m, _, y)
                );
              }),
              s
            );
          })(bn))(am.paint.properties["line-width"].specification);
        Jp.useIntegerZoom = !0;
        var om = (function (i) {
          function s(c) {
            i.call(this, c, am), (this.gradientVersion = 0);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype._handleSpecialPaintPropertyUpdate = function (c) {
              c === "line-gradient" &&
                ((this.stepInterpolant =
                  this._transitionablePaint._values["line-gradient"].value
                    .expression._styleExpression.expression instanceof Oo),
                (this.gradientVersion = (this.gradientVersion + 1) % N));
            }),
            (s.prototype.gradientExpression = function () {
              return this._transitionablePaint._values["line-gradient"].value
                .expression;
            }),
            (s.prototype.recalculate = function (c, m) {
              i.prototype.recalculate.call(this, c, m),
                (this.paint._values["line-floorwidth"] = Jp.possiblyEvaluate(
                  this._transitioningPaint._values["line-width"].value,
                  c
                ));
            }),
            (s.prototype.createBucket = function (c) {
              return new So(c);
            }),
            (s.prototype.queryRadius = function (c) {
              var m = c,
                _ = ef(
                  Ga("line-width", this, m),
                  Ga("line-gap-width", this, m)
                ),
                y = Ga("line-offset", this, m);
              return _ / 2 + Math.abs(y) + Vi(this.paint.get("line-translate"));
            }),
            (s.prototype.queryIntersectsFeature = function (
              c,
              m,
              _,
              y,
              A,
              C,
              P
            ) {
              var O = Eo(
                  c,
                  this.paint.get("line-translate"),
                  this.paint.get("line-translate-anchor"),
                  C.angle,
                  P
                ),
                k =
                  (P / 2) *
                  ef(
                    this.paint.get("line-width").evaluate(m, _),
                    this.paint.get("line-gap-width").evaluate(m, _)
                  ),
                U = this.paint.get("line-offset").evaluate(m, _);
              return (
                U &&
                  (y = (function (W, $) {
                    for (
                      var he = [], me = new E(0, 0), Ie = 0;
                      Ie < W.length;
                      Ie++
                    ) {
                      for (
                        var Te = W[Ie], je = [], Ze = 0;
                        Ze < Te.length;
                        Ze++
                      ) {
                        var at = Te[Ze],
                          lt = Te[Ze + 1],
                          yt =
                            Ze === 0
                              ? me
                              : at
                                  .sub(Te[Ze - 1])
                                  ._unit()
                                  ._perp(),
                          zt =
                            Ze === Te.length - 1
                              ? me
                              : lt.sub(at)._unit()._perp(),
                          Qt = yt._add(zt)._unit();
                        Qt._mult(1 / (Qt.x * zt.x + Qt.y * zt.y)),
                          je.push(Qt._mult($)._add(at));
                      }
                      he.push(je);
                    }
                    return he;
                  })(y, U * P)),
                (function (W, $, he) {
                  for (var me = 0; me < $.length; me++) {
                    var Ie = $[me];
                    if (W.length >= 3) {
                      for (var Te = 0; Te < Ie.length; Te++)
                        if (Ts(W, Ie[Te])) return !0;
                    }
                    if (ko(W, Ie, he)) return !0;
                  }
                  return !1;
                })(O, y, k)
              );
            }),
            (s.prototype.isTileClipped = function () {
              return !0;
            }),
            s
          );
        })(ls);
        function ef(i, s) {
          return s > 0 ? s + 2 * i : i;
        }
        var jv = xa(
            [
              { name: "a_pos_offset", components: 4, type: "Int16" },
              { name: "a_data", components: 4, type: "Uint16" },
              { name: "a_pixeloffset", components: 4, type: "Int16" },
            ],
            4
          ),
          Wv = xa(
            [{ name: "a_projected_pos", components: 3, type: "Float32" }],
            4
          ),
          sm =
            (xa([{ name: "a_fade_opacity", components: 1, type: "Uint32" }], 4),
            xa([
              { name: "a_placed", components: 2, type: "Uint8" },
              { name: "a_shift", components: 2, type: "Float32" },
            ])),
          lm =
            (xa([
              { type: "Int16", name: "anchorPointX" },
              { type: "Int16", name: "anchorPointY" },
              { type: "Int16", name: "x1" },
              { type: "Int16", name: "y1" },
              { type: "Int16", name: "x2" },
              { type: "Int16", name: "y2" },
              { type: "Uint32", name: "featureIndex" },
              { type: "Uint16", name: "sourceLayerIndex" },
              { type: "Uint16", name: "bucketIndex" },
            ]),
            xa(
              [
                { name: "a_pos", components: 2, type: "Int16" },
                { name: "a_anchor_pos", components: 2, type: "Int16" },
                { name: "a_extrude", components: 2, type: "Int16" },
              ],
              4
            )),
          D = xa(
            [
              { name: "a_pos", components: 2, type: "Float32" },
              { name: "a_radius", components: 1, type: "Float32" },
              { name: "a_flags", components: 2, type: "Int16" },
            ],
            4
          );
        function oe(i, s, c) {
          return (
            i.sections.forEach(function (m) {
              m.text = (function (_, y, A) {
                var C = y.layout.get("text-transform").evaluate(A, {});
                return (
                  C === "uppercase"
                    ? (_ = _.toLocaleUpperCase())
                    : C === "lowercase" && (_ = _.toLocaleLowerCase()),
                  Yo.applyArabicShaping && (_ = Yo.applyArabicShaping(_)),
                  _
                );
              })(m.text, s, c);
            }),
            i
          );
        }
        xa([{ name: "triangle", components: 3, type: "Uint16" }]),
          xa([
            { type: "Int16", name: "anchorX" },
            { type: "Int16", name: "anchorY" },
            { type: "Uint16", name: "glyphStartIndex" },
            { type: "Uint16", name: "numGlyphs" },
            { type: "Uint32", name: "vertexStartIndex" },
            { type: "Uint32", name: "lineStartIndex" },
            { type: "Uint32", name: "lineLength" },
            { type: "Uint16", name: "segment" },
            { type: "Uint16", name: "lowerSize" },
            { type: "Uint16", name: "upperSize" },
            { type: "Float32", name: "lineOffsetX" },
            { type: "Float32", name: "lineOffsetY" },
            { type: "Uint8", name: "writingMode" },
            { type: "Uint8", name: "placedOrientation" },
            { type: "Uint8", name: "hidden" },
            { type: "Uint32", name: "crossTileID" },
            { type: "Int16", name: "associatedIconIndex" },
          ]),
          xa([
            { type: "Int16", name: "anchorX" },
            { type: "Int16", name: "anchorY" },
            { type: "Int16", name: "rightJustifiedTextSymbolIndex" },
            { type: "Int16", name: "centerJustifiedTextSymbolIndex" },
            { type: "Int16", name: "leftJustifiedTextSymbolIndex" },
            { type: "Int16", name: "verticalPlacedTextSymbolIndex" },
            { type: "Int16", name: "placedIconSymbolIndex" },
            { type: "Int16", name: "verticalPlacedIconSymbolIndex" },
            { type: "Uint16", name: "key" },
            { type: "Uint16", name: "textBoxStartIndex" },
            { type: "Uint16", name: "textBoxEndIndex" },
            { type: "Uint16", name: "verticalTextBoxStartIndex" },
            { type: "Uint16", name: "verticalTextBoxEndIndex" },
            { type: "Uint16", name: "iconBoxStartIndex" },
            { type: "Uint16", name: "iconBoxEndIndex" },
            { type: "Uint16", name: "verticalIconBoxStartIndex" },
            { type: "Uint16", name: "verticalIconBoxEndIndex" },
            { type: "Uint16", name: "featureIndex" },
            { type: "Uint16", name: "numHorizontalGlyphVertices" },
            { type: "Uint16", name: "numVerticalGlyphVertices" },
            { type: "Uint16", name: "numIconVertices" },
            { type: "Uint16", name: "numVerticalIconVertices" },
            { type: "Uint16", name: "useRuntimeCollisionCircles" },
            { type: "Uint32", name: "crossTileID" },
            { type: "Float32", name: "textBoxScale" },
            { type: "Float32", components: 2, name: "textOffset" },
            { type: "Float32", name: "collisionCircleDiameter" },
          ]),
          xa([{ type: "Float32", name: "offsetX" }]),
          xa([
            { type: "Int16", name: "x" },
            { type: "Int16", name: "y" },
            { type: "Int16", name: "tileUnitDistanceFromAnchor" },
          ]);
        var be = {
            "!": "︕",
            "#": "＃",
            $: "＄",
            "%": "％",
            "&": "＆",
            "(": "︵",
            ")": "︶",
            "*": "＊",
            "+": "＋",
            ",": "︐",
            "-": "︲",
            ".": "・",
            "/": "／",
            ":": "︓",
            ";": "︔",
            "<": "︿",
            "=": "＝",
            ">": "﹀",
            "?": "︖",
            "@": "＠",
            "[": "﹇",
            "\\": "＼",
            "]": "﹈",
            "^": "＾",
            _: "︳",
            "`": "｀",
            "{": "︷",
            "|": "―",
            "}": "︸",
            "~": "～",
            "¢": "￠",
            "£": "￡",
            "¥": "￥",
            "¦": "￤",
            "¬": "￢",
            "¯": "￣",
            "–": "︲",
            "—": "︱",
            "‘": "﹃",
            "’": "﹄",
            "“": "﹁",
            "”": "﹂",
            "…": "︙",
            "‧": "・",
            "₩": "￦",
            "、": "︑",
            "。": "︒",
            "〈": "︿",
            "〉": "﹀",
            "《": "︽",
            "》": "︾",
            "「": "﹁",
            "」": "﹂",
            "『": "﹃",
            "』": "﹄",
            "【": "︻",
            "】": "︼",
            "〔": "︹",
            "〕": "︺",
            "〖": "︗",
            "〗": "︘",
            "！": "︕",
            "（": "︵",
            "）": "︶",
            "，": "︐",
            "－": "︲",
            "．": "・",
            "：": "︓",
            "；": "︔",
            "＜": "︿",
            "＞": "﹀",
            "？": "︖",
            "［": "﹇",
            "］": "﹈",
            "＿": "︳",
            "｛": "︷",
            "｜": "―",
            "｝": "︸",
            "｟": "︵",
            "｠": "︶",
            "｡": "︒",
            "｢": "﹁",
            "｣": "﹂",
          },
          et = function (i, s, c, m, _) {
            var y,
              A,
              C = 8 * _ - m - 1,
              P = (1 << C) - 1,
              O = P >> 1,
              k = -7,
              U = _ - 1,
              W = -1,
              $ = i[s + U];
            for (
              U += W, y = $ & ((1 << -k) - 1), $ >>= -k, k += C;
              k > 0;
              y = 256 * y + i[s + U], U += W, k -= 8
            );
            for (
              A = y & ((1 << -k) - 1), y >>= -k, k += m;
              k > 0;
              A = 256 * A + i[s + U], U += W, k -= 8
            );
            if (y === 0) y = 1 - O;
            else {
              if (y === P) return A ? NaN : (1 / 0) * ($ ? -1 : 1);
              (A += Math.pow(2, m)), (y -= O);
            }
            return ($ ? -1 : 1) * A * Math.pow(2, y - m);
          },
          vt = function (i, s, c, m, _, y) {
            var A,
              C,
              P,
              O = 8 * y - _ - 1,
              k = (1 << O) - 1,
              U = k >> 1,
              W = _ === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0,
              $ = 0,
              he = 1,
              me = s < 0 || (s === 0 && 1 / s < 0) ? 1 : 0;
            for (
              s = Math.abs(s),
                isNaN(s) || s === 1 / 0
                  ? ((C = isNaN(s) ? 1 : 0), (A = k))
                  : ((A = Math.floor(Math.log(s) / Math.LN2)),
                    s * (P = Math.pow(2, -A)) < 1 && (A--, (P *= 2)),
                    (s += A + U >= 1 ? W / P : W * Math.pow(2, 1 - U)) * P >=
                      2 && (A++, (P /= 2)),
                    A + U >= k
                      ? ((C = 0), (A = k))
                      : A + U >= 1
                      ? ((C = (s * P - 1) * Math.pow(2, _)), (A += U))
                      : ((C = s * Math.pow(2, U - 1) * Math.pow(2, _)),
                        (A = 0)));
              _ >= 8;
              i[c + $] = 255 & C, $ += he, C /= 256, _ -= 8
            );
            for (
              A = (A << _) | C, O += _;
              O > 0;
              i[c + $] = 255 & A, $ += he, A /= 256, O -= 8
            );
            i[c + $ - he] |= 128 * me;
          },
          tt = Ye;
        function Ye(i) {
          (this.buf =
            ArrayBuffer.isView && ArrayBuffer.isView(i)
              ? i
              : new Uint8Array(i || 0)),
            (this.pos = 0),
            (this.type = 0),
            (this.length = this.buf.length);
        }
        (Ye.Varint = 0), (Ye.Fixed64 = 1), (Ye.Bytes = 2), (Ye.Fixed32 = 5);
        var Dt = typeof TextDecoder > "u" ? null : new TextDecoder("utf8");
        function Rt(i) {
          return i.type === Ye.Bytes ? i.readVarint() + i.pos : i.pos + 1;
        }
        function Zt(i, s, c) {
          return c
            ? 4294967296 * s + (i >>> 0)
            : 4294967296 * (s >>> 0) + (i >>> 0);
        }
        function kt(i, s, c) {
          var m =
            s <= 16383
              ? 1
              : s <= 2097151
              ? 2
              : s <= 268435455
              ? 3
              : Math.floor(Math.log(s) / (7 * Math.LN2));
          c.realloc(m);
          for (var _ = c.pos - 1; _ >= i; _--) c.buf[_ + m] = c.buf[_];
        }
        function Wt(i, s) {
          for (var c = 0; c < i.length; c++) s.writeVarint(i[c]);
        }
        function Kt(i, s) {
          for (var c = 0; c < i.length; c++) s.writeSVarint(i[c]);
        }
        function It(i, s) {
          for (var c = 0; c < i.length; c++) s.writeFloat(i[c]);
        }
        function Xt(i, s) {
          for (var c = 0; c < i.length; c++) s.writeDouble(i[c]);
        }
        function We(i, s) {
          for (var c = 0; c < i.length; c++) s.writeBoolean(i[c]);
        }
        function ct(i, s) {
          for (var c = 0; c < i.length; c++) s.writeFixed32(i[c]);
        }
        function Bt(i, s) {
          for (var c = 0; c < i.length; c++) s.writeSFixed32(i[c]);
        }
        function rn(i, s) {
          for (var c = 0; c < i.length; c++) s.writeFixed64(i[c]);
        }
        function Tt(i, s) {
          for (var c = 0; c < i.length; c++) s.writeSFixed64(i[c]);
        }
        function ln(i, s) {
          return (
            (i[s] | (i[s + 1] << 8) | (i[s + 2] << 16)) + 16777216 * i[s + 3]
          );
        }
        function Pt(i, s, c) {
          (i[c] = s),
            (i[c + 1] = s >>> 8),
            (i[c + 2] = s >>> 16),
            (i[c + 3] = s >>> 24);
        }
        function an(i, s) {
          return (i[s] | (i[s + 1] << 8) | (i[s + 2] << 16)) + (i[s + 3] << 24);
        }
        function wt(i, s, c) {
          i === 1 && c.readMessage(en, s);
        }
        function en(i, s, c) {
          if (i === 3) {
            var m = c.readMessage(Fn, {}),
              _ = m.width,
              y = m.height,
              A = m.left,
              C = m.top,
              P = m.advance;
            s.push({
              id: m.id,
              bitmap: new nu({ width: _ + 6, height: y + 6 }, m.bitmap),
              metrics: { width: _, height: y, left: A, top: C, advance: P },
            });
          }
        }
        function Fn(i, s, c) {
          i === 1
            ? (s.id = c.readVarint())
            : i === 2
            ? (s.bitmap = c.readBytes())
            : i === 3
            ? (s.width = c.readVarint())
            : i === 4
            ? (s.height = c.readVarint())
            : i === 5
            ? (s.left = c.readSVarint())
            : i === 6
            ? (s.top = c.readSVarint())
            : i === 7 && (s.advance = c.readVarint());
        }
        function rr(i) {
          for (var s = 0, c = 0, m = 0, _ = i; m < _.length; m += 1) {
            var y = _[m];
            (s += y.w * y.h), (c = Math.max(c, y.w));
          }
          i.sort(function (me, Ie) {
            return Ie.h - me.h;
          });
          for (
            var A = [
                {
                  x: 0,
                  y: 0,
                  w: Math.max(Math.ceil(Math.sqrt(s / 0.95)), c),
                  h: 1 / 0,
                },
              ],
              C = 0,
              P = 0,
              O = 0,
              k = i;
            O < k.length;
            O += 1
          )
            for (var U = k[O], W = A.length - 1; W >= 0; W--) {
              var $ = A[W];
              if (!(U.w > $.w || U.h > $.h)) {
                if (
                  ((U.x = $.x),
                  (U.y = $.y),
                  (P = Math.max(P, U.y + U.h)),
                  (C = Math.max(C, U.x + U.w)),
                  U.w === $.w && U.h === $.h)
                ) {
                  var he = A.pop();
                  W < A.length && (A[W] = he);
                } else
                  U.h === $.h
                    ? (($.x += U.w), ($.w -= U.w))
                    : U.w === $.w
                    ? (($.y += U.h), ($.h -= U.h))
                    : (A.push({ x: $.x + U.w, y: $.y, w: $.w - U.w, h: U.h }),
                      ($.y += U.h),
                      ($.h -= U.h));
                break;
              }
            }
          return { w: C, h: P, fill: s / (C * P) || 0 };
        }
        Ye.prototype = {
          destroy: function () {
            this.buf = null;
          },
          readFields: function (i, s, c) {
            for (c = c || this.length; this.pos < c; ) {
              var m = this.readVarint(),
                _ = m >> 3,
                y = this.pos;
              (this.type = 7 & m),
                i(_, s, this),
                this.pos === y && this.skip(m);
            }
            return s;
          },
          readMessage: function (i, s) {
            return this.readFields(i, s, this.readVarint() + this.pos);
          },
          readFixed32: function () {
            var i = ln(this.buf, this.pos);
            return (this.pos += 4), i;
          },
          readSFixed32: function () {
            var i = an(this.buf, this.pos);
            return (this.pos += 4), i;
          },
          readFixed64: function () {
            var i =
              ln(this.buf, this.pos) + 4294967296 * ln(this.buf, this.pos + 4);
            return (this.pos += 8), i;
          },
          readSFixed64: function () {
            var i =
              ln(this.buf, this.pos) + 4294967296 * an(this.buf, this.pos + 4);
            return (this.pos += 8), i;
          },
          readFloat: function () {
            var i = et(this.buf, this.pos, !0, 23, 4);
            return (this.pos += 4), i;
          },
          readDouble: function () {
            var i = et(this.buf, this.pos, !0, 52, 8);
            return (this.pos += 8), i;
          },
          readVarint: function (i) {
            var s,
              c,
              m = this.buf;
            return (
              (s = 127 & (c = m[this.pos++])),
              c < 128
                ? s
                : ((s |= (127 & (c = m[this.pos++])) << 7),
                  c < 128
                    ? s
                    : ((s |= (127 & (c = m[this.pos++])) << 14),
                      c < 128
                        ? s
                        : ((s |= (127 & (c = m[this.pos++])) << 21),
                          c < 128
                            ? s
                            : (function (_, y, A) {
                                var C,
                                  P,
                                  O = A.buf;
                                if (
                                  ((C = (112 & (P = O[A.pos++])) >> 4),
                                  P < 128 ||
                                    ((C |= (127 & (P = O[A.pos++])) << 3),
                                    P < 128) ||
                                    ((C |= (127 & (P = O[A.pos++])) << 10),
                                    P < 128) ||
                                    ((C |= (127 & (P = O[A.pos++])) << 17),
                                    P < 128) ||
                                    ((C |= (127 & (P = O[A.pos++])) << 24),
                                    P < 128) ||
                                    ((C |= (1 & (P = O[A.pos++])) << 31),
                                    P < 128))
                                )
                                  return Zt(_, C, y);
                                throw new Error(
                                  "Expected varint not more than 10 bytes"
                                );
                              })(
                                (s |= (15 & (c = m[this.pos])) << 28),
                                i,
                                this
                              ))))
            );
          },
          readVarint64: function () {
            return this.readVarint(!0);
          },
          readSVarint: function () {
            var i = this.readVarint();
            return i % 2 == 1 ? (i + 1) / -2 : i / 2;
          },
          readBoolean: function () {
            return !!this.readVarint();
          },
          readString: function () {
            var i = this.readVarint() + this.pos,
              s = this.pos;
            return (
              (this.pos = i),
              i - s >= 12 && Dt
                ? (function (c, m, _) {
                    return Dt.decode(c.subarray(m, _));
                  })(this.buf, s, i)
                : (function (c, m, _) {
                    for (var y = "", A = m; A < _; ) {
                      var C,
                        P,
                        O,
                        k = c[A],
                        U = null,
                        W = k > 239 ? 4 : k > 223 ? 3 : k > 191 ? 2 : 1;
                      if (A + W > _) break;
                      W === 1
                        ? k < 128 && (U = k)
                        : W === 2
                        ? (192 & (C = c[A + 1])) == 128 &&
                          (U = ((31 & k) << 6) | (63 & C)) <= 127 &&
                          (U = null)
                        : W === 3
                        ? ((P = c[A + 2]),
                          (192 & (C = c[A + 1])) == 128 &&
                            (192 & P) == 128 &&
                            ((U =
                              ((15 & k) << 12) | ((63 & C) << 6) | (63 & P)) <=
                              2047 ||
                              (U >= 55296 && U <= 57343)) &&
                            (U = null))
                        : W === 4 &&
                          ((P = c[A + 2]),
                          (O = c[A + 3]),
                          (192 & (C = c[A + 1])) == 128 &&
                            (192 & P) == 128 &&
                            (192 & O) == 128 &&
                            ((U =
                              ((15 & k) << 18) |
                              ((63 & C) << 12) |
                              ((63 & P) << 6) |
                              (63 & O)) <= 65535 ||
                              U >= 1114112) &&
                            (U = null)),
                        U === null
                          ? ((U = 65533), (W = 1))
                          : U > 65535 &&
                            ((U -= 65536),
                            (y += String.fromCharCode(
                              ((U >>> 10) & 1023) | 55296
                            )),
                            (U = 56320 | (1023 & U))),
                        (y += String.fromCharCode(U)),
                        (A += W);
                    }
                    return y;
                  })(this.buf, s, i)
            );
          },
          readBytes: function () {
            var i = this.readVarint() + this.pos,
              s = this.buf.subarray(this.pos, i);
            return (this.pos = i), s;
          },
          readPackedVarint: function (i, s) {
            if (this.type !== Ye.Bytes) return i.push(this.readVarint(s));
            var c = Rt(this);
            for (i = i || []; this.pos < c; ) i.push(this.readVarint(s));
            return i;
          },
          readPackedSVarint: function (i) {
            if (this.type !== Ye.Bytes) return i.push(this.readSVarint());
            var s = Rt(this);
            for (i = i || []; this.pos < s; ) i.push(this.readSVarint());
            return i;
          },
          readPackedBoolean: function (i) {
            if (this.type !== Ye.Bytes) return i.push(this.readBoolean());
            var s = Rt(this);
            for (i = i || []; this.pos < s; ) i.push(this.readBoolean());
            return i;
          },
          readPackedFloat: function (i) {
            if (this.type !== Ye.Bytes) return i.push(this.readFloat());
            var s = Rt(this);
            for (i = i || []; this.pos < s; ) i.push(this.readFloat());
            return i;
          },
          readPackedDouble: function (i) {
            if (this.type !== Ye.Bytes) return i.push(this.readDouble());
            var s = Rt(this);
            for (i = i || []; this.pos < s; ) i.push(this.readDouble());
            return i;
          },
          readPackedFixed32: function (i) {
            if (this.type !== Ye.Bytes) return i.push(this.readFixed32());
            var s = Rt(this);
            for (i = i || []; this.pos < s; ) i.push(this.readFixed32());
            return i;
          },
          readPackedSFixed32: function (i) {
            if (this.type !== Ye.Bytes) return i.push(this.readSFixed32());
            var s = Rt(this);
            for (i = i || []; this.pos < s; ) i.push(this.readSFixed32());
            return i;
          },
          readPackedFixed64: function (i) {
            if (this.type !== Ye.Bytes) return i.push(this.readFixed64());
            var s = Rt(this);
            for (i = i || []; this.pos < s; ) i.push(this.readFixed64());
            return i;
          },
          readPackedSFixed64: function (i) {
            if (this.type !== Ye.Bytes) return i.push(this.readSFixed64());
            var s = Rt(this);
            for (i = i || []; this.pos < s; ) i.push(this.readSFixed64());
            return i;
          },
          skip: function (i) {
            var s = 7 & i;
            if (s === Ye.Varint) for (; this.buf[this.pos++] > 127; );
            else if (s === Ye.Bytes) this.pos = this.readVarint() + this.pos;
            else if (s === Ye.Fixed32) this.pos += 4;
            else {
              if (s !== Ye.Fixed64) throw new Error("Unimplemented type: " + s);
              this.pos += 8;
            }
          },
          writeTag: function (i, s) {
            this.writeVarint((i << 3) | s);
          },
          realloc: function (i) {
            for (var s = this.length || 16; s < this.pos + i; ) s *= 2;
            if (s !== this.length) {
              var c = new Uint8Array(s);
              c.set(this.buf), (this.buf = c), (this.length = s);
            }
          },
          finish: function () {
            return (
              (this.length = this.pos),
              (this.pos = 0),
              this.buf.subarray(0, this.length)
            );
          },
          writeFixed32: function (i) {
            this.realloc(4), Pt(this.buf, i, this.pos), (this.pos += 4);
          },
          writeSFixed32: function (i) {
            this.realloc(4), Pt(this.buf, i, this.pos), (this.pos += 4);
          },
          writeFixed64: function (i) {
            this.realloc(8),
              Pt(this.buf, -1 & i, this.pos),
              Pt(this.buf, Math.floor(i * (1 / 4294967296)), this.pos + 4),
              (this.pos += 8);
          },
          writeSFixed64: function (i) {
            this.realloc(8),
              Pt(this.buf, -1 & i, this.pos),
              Pt(this.buf, Math.floor(i * (1 / 4294967296)), this.pos + 4),
              (this.pos += 8);
          },
          writeVarint: function (i) {
            (i = +i || 0) > 268435455 || i < 0
              ? (function (s, c) {
                  var m, _;
                  if (
                    (s >= 0
                      ? ((m = s % 4294967296 | 0), (_ = (s / 4294967296) | 0))
                      : ((_ = ~(-s / 4294967296)),
                        4294967295 ^ (m = ~(-s % 4294967296))
                          ? (m = (m + 1) | 0)
                          : ((m = 0), (_ = (_ + 1) | 0))),
                    s >= 18446744073709552e3 || s < -18446744073709552e3)
                  )
                    throw new Error("Given varint doesn't fit into 10 bytes");
                  c.realloc(10),
                    (function (y, A, C) {
                      (C.buf[C.pos++] = (127 & y) | 128),
                        (y >>>= 7),
                        (C.buf[C.pos++] = (127 & y) | 128),
                        (y >>>= 7),
                        (C.buf[C.pos++] = (127 & y) | 128),
                        (y >>>= 7),
                        (C.buf[C.pos++] = (127 & y) | 128),
                        (C.buf[C.pos] = 127 & (y >>>= 7));
                    })(m, 0, c),
                    (function (y, A) {
                      var C = (7 & y) << 4;
                      (A.buf[A.pos++] |= C | ((y >>>= 3) ? 128 : 0)),
                        y &&
                          ((A.buf[A.pos++] =
                            (127 & y) | ((y >>>= 7) ? 128 : 0)),
                          y &&
                            ((A.buf[A.pos++] =
                              (127 & y) | ((y >>>= 7) ? 128 : 0)),
                            y &&
                              ((A.buf[A.pos++] =
                                (127 & y) | ((y >>>= 7) ? 128 : 0)),
                              y &&
                                ((A.buf[A.pos++] =
                                  (127 & y) | ((y >>>= 7) ? 128 : 0)),
                                y && (A.buf[A.pos++] = 127 & y)))));
                    })(_, c);
                })(i, this)
              : (this.realloc(4),
                (this.buf[this.pos++] = (127 & i) | (i > 127 ? 128 : 0)),
                i <= 127 ||
                  ((this.buf[this.pos++] =
                    (127 & (i >>>= 7)) | (i > 127 ? 128 : 0)),
                  i <= 127 ||
                    ((this.buf[this.pos++] =
                      (127 & (i >>>= 7)) | (i > 127 ? 128 : 0)),
                    i <= 127 || (this.buf[this.pos++] = (i >>> 7) & 127))));
          },
          writeSVarint: function (i) {
            this.writeVarint(i < 0 ? 2 * -i - 1 : 2 * i);
          },
          writeBoolean: function (i) {
            this.writeVarint(!!i);
          },
          writeString: function (i) {
            (i = String(i)), this.realloc(4 * i.length), this.pos++;
            var s = this.pos;
            this.pos = (function (m, _, y) {
              for (var A, C, P = 0; P < _.length; P++) {
                if ((A = _.charCodeAt(P)) > 55295 && A < 57344) {
                  if (!C) {
                    A > 56319 || P + 1 === _.length
                      ? ((m[y++] = 239), (m[y++] = 191), (m[y++] = 189))
                      : (C = A);
                    continue;
                  }
                  if (A < 56320) {
                    (m[y++] = 239), (m[y++] = 191), (m[y++] = 189), (C = A);
                    continue;
                  }
                  (A = ((C - 55296) << 10) | (A - 56320) | 65536), (C = null);
                } else
                  C &&
                    ((m[y++] = 239),
                    (m[y++] = 191),
                    (m[y++] = 189),
                    (C = null));
                A < 128
                  ? (m[y++] = A)
                  : (A < 2048
                      ? (m[y++] = (A >> 6) | 192)
                      : (A < 65536
                          ? (m[y++] = (A >> 12) | 224)
                          : ((m[y++] = (A >> 18) | 240),
                            (m[y++] = ((A >> 12) & 63) | 128)),
                        (m[y++] = ((A >> 6) & 63) | 128)),
                    (m[y++] = (63 & A) | 128));
              }
              return y;
            })(this.buf, i, this.pos);
            var c = this.pos - s;
            c >= 128 && kt(s, c, this),
              (this.pos = s - 1),
              this.writeVarint(c),
              (this.pos += c);
          },
          writeFloat: function (i) {
            this.realloc(4),
              vt(this.buf, i, this.pos, !0, 23, 4),
              (this.pos += 4);
          },
          writeDouble: function (i) {
            this.realloc(8),
              vt(this.buf, i, this.pos, !0, 52, 8),
              (this.pos += 8);
          },
          writeBytes: function (i) {
            var s = i.length;
            this.writeVarint(s), this.realloc(s);
            for (var c = 0; c < s; c++) this.buf[this.pos++] = i[c];
          },
          writeRawMessage: function (i, s) {
            this.pos++;
            var c = this.pos;
            i(s, this);
            var m = this.pos - c;
            m >= 128 && kt(c, m, this),
              (this.pos = c - 1),
              this.writeVarint(m),
              (this.pos += m);
          },
          writeMessage: function (i, s, c) {
            this.writeTag(i, Ye.Bytes), this.writeRawMessage(s, c);
          },
          writePackedVarint: function (i, s) {
            s.length && this.writeMessage(i, Wt, s);
          },
          writePackedSVarint: function (i, s) {
            s.length && this.writeMessage(i, Kt, s);
          },
          writePackedBoolean: function (i, s) {
            s.length && this.writeMessage(i, We, s);
          },
          writePackedFloat: function (i, s) {
            s.length && this.writeMessage(i, It, s);
          },
          writePackedDouble: function (i, s) {
            s.length && this.writeMessage(i, Xt, s);
          },
          writePackedFixed32: function (i, s) {
            s.length && this.writeMessage(i, ct, s);
          },
          writePackedSFixed32: function (i, s) {
            s.length && this.writeMessage(i, Bt, s);
          },
          writePackedFixed64: function (i, s) {
            s.length && this.writeMessage(i, rn, s);
          },
          writePackedSFixed64: function (i, s) {
            s.length && this.writeMessage(i, Tt, s);
          },
          writeBytesField: function (i, s) {
            this.writeTag(i, Ye.Bytes), this.writeBytes(s);
          },
          writeFixed32Field: function (i, s) {
            this.writeTag(i, Ye.Fixed32), this.writeFixed32(s);
          },
          writeSFixed32Field: function (i, s) {
            this.writeTag(i, Ye.Fixed32), this.writeSFixed32(s);
          },
          writeFixed64Field: function (i, s) {
            this.writeTag(i, Ye.Fixed64), this.writeFixed64(s);
          },
          writeSFixed64Field: function (i, s) {
            this.writeTag(i, Ye.Fixed64), this.writeSFixed64(s);
          },
          writeVarintField: function (i, s) {
            this.writeTag(i, Ye.Varint), this.writeVarint(s);
          },
          writeSVarintField: function (i, s) {
            this.writeTag(i, Ye.Varint), this.writeSVarint(s);
          },
          writeStringField: function (i, s) {
            this.writeTag(i, Ye.Bytes), this.writeString(s);
          },
          writeFloatField: function (i, s) {
            this.writeTag(i, Ye.Fixed32), this.writeFloat(s);
          },
          writeDoubleField: function (i, s) {
            this.writeTag(i, Ye.Fixed64), this.writeDouble(s);
          },
          writeBooleanField: function (i, s) {
            this.writeVarintField(i, !!s);
          },
        };
        var tn = function (i, s) {
            var c = s.pixelRatio,
              m = s.version,
              _ = s.stretchX,
              y = s.stretchY,
              A = s.content;
            (this.paddedRect = i),
              (this.pixelRatio = c),
              (this.stretchX = _),
              (this.stretchY = y),
              (this.content = A),
              (this.version = m);
          },
          Lt = {
            tl: { configurable: !0 },
            br: { configurable: !0 },
            tlbr: { configurable: !0 },
            displaySize: { configurable: !0 },
          };
        (Lt.tl.get = function () {
          return [this.paddedRect.x + 1, this.paddedRect.y + 1];
        }),
          (Lt.br.get = function () {
            return [
              this.paddedRect.x + this.paddedRect.w - 1,
              this.paddedRect.y + this.paddedRect.h - 1,
            ];
          }),
          (Lt.tlbr.get = function () {
            return this.tl.concat(this.br);
          }),
          (Lt.displaySize.get = function () {
            return [
              (this.paddedRect.w - 2) / this.pixelRatio,
              (this.paddedRect.h - 2) / this.pixelRatio,
            ];
          }),
          Object.defineProperties(tn.prototype, Lt);
        var _t = function (i, s) {
          var c = {},
            m = {};
          this.haveRenderCallbacks = [];
          var _ = [];
          this.addImages(i, c, _), this.addImages(s, m, _);
          var y = rr(_),
            A = new Ao({ width: y.w || 1, height: y.h || 1 });
          for (var C in i) {
            var P = i[C],
              O = c[C].paddedRect;
            Ao.copy(
              P.data,
              A,
              { x: 0, y: 0 },
              { x: O.x + 1, y: O.y + 1 },
              P.data
            );
          }
          for (var k in s) {
            var U = s[k],
              W = m[k].paddedRect,
              $ = W.x + 1,
              he = W.y + 1,
              me = U.data.width,
              Ie = U.data.height;
            Ao.copy(U.data, A, { x: 0, y: 0 }, { x: $, y: he }, U.data),
              Ao.copy(
                U.data,
                A,
                { x: 0, y: Ie - 1 },
                { x: $, y: he - 1 },
                { width: me, height: 1 }
              ),
              Ao.copy(
                U.data,
                A,
                { x: 0, y: 0 },
                { x: $, y: he + Ie },
                { width: me, height: 1 }
              ),
              Ao.copy(
                U.data,
                A,
                { x: me - 1, y: 0 },
                { x: $ - 1, y: he },
                { width: 1, height: Ie }
              ),
              Ao.copy(
                U.data,
                A,
                { x: 0, y: 0 },
                { x: $ + me, y: he },
                { width: 1, height: Ie }
              );
          }
          (this.image = A),
            (this.iconPositions = c),
            (this.patternPositions = m);
        };
        (_t.prototype.addImages = function (i, s, c) {
          for (var m in i) {
            var _ = i[m],
              y = { x: 0, y: 0, w: _.data.width + 2, h: _.data.height + 2 };
            c.push(y),
              (s[m] = new tn(y, _)),
              _.hasRenderCallback && this.haveRenderCallbacks.push(m);
          }
        }),
          (_t.prototype.patchUpdatedImages = function (i, s) {
            for (var c in (i.dispatchRenderCallbacks(this.haveRenderCallbacks),
            i.updatedImages))
              this.patchUpdatedImage(this.iconPositions[c], i.getImage(c), s),
                this.patchUpdatedImage(
                  this.patternPositions[c],
                  i.getImage(c),
                  s
                );
          }),
          (_t.prototype.patchUpdatedImage = function (i, s, c) {
            if (i && s && i.version !== s.version) {
              i.version = s.version;
              var m = i.tl;
              c.update(s.data, void 0, { x: m[0], y: m[1] });
            }
          }),
          vn("ImagePosition", tn),
          vn("ImageAtlas", _t);
        var kn = { horizontal: 1, vertical: 2, horizontalOnly: 3 },
          Er = function () {
            (this.scale = 1), (this.fontStack = ""), (this.imageName = null);
          };
        (Er.forText = function (i, s) {
          var c = new Er();
          return (c.scale = i || 1), (c.fontStack = s), c;
        }),
          (Er.forImage = function (i) {
            var s = new Er();
            return (s.imageName = i), s;
          });
        var cn = function () {
          (this.text = ""),
            (this.sectionIndex = []),
            (this.sections = []),
            (this.imageSectionID = null);
        };
        function mr(i, s, c, m, _, y, A, C, P, O, k, U, W, $, he, me) {
          var Ie,
            Te = cn.fromFeature(i, _);
          U === kn.vertical && Te.verticalizePunctuation();
          var je = Yo.processBidirectionalText,
            Ze = Yo.processStyledBidirectionalText;
          if (je && Te.sections.length === 1) {
            Ie = [];
            for (
              var at = 0, lt = je(Te.toString(), aa(Te, O, y, s, m, $, he));
              at < lt.length;
              at += 1
            ) {
              var yt = lt[at],
                zt = new cn();
              (zt.text = yt), (zt.sections = Te.sections);
              for (var Qt = 0; Qt < yt.length; Qt++) zt.sectionIndex.push(0);
              Ie.push(zt);
            }
          } else if (Ze) {
            Ie = [];
            for (
              var Mn = 0,
                dn = Ze(Te.text, Te.sectionIndex, aa(Te, O, y, s, m, $, he));
              Mn < dn.length;
              Mn += 1
            ) {
              var Un = dn[Mn],
                fn = new cn();
              (fn.text = Un[0]),
                (fn.sectionIndex = Un[1]),
                (fn.sections = Te.sections),
                Ie.push(fn);
            }
          } else
            Ie = (function (Tn, Mr) {
              for (
                var pr = [], Hr = Tn.text, zn = 0, Kr = 0, Li = Mr;
                Kr < Li.length;
                Kr += 1
              ) {
                var Qi = Li[Kr];
                pr.push(Tn.substring(zn, Qi)), (zn = Qi);
              }
              return zn < Hr.length && pr.push(Tn.substring(zn, Hr.length)), pr;
            })(Te, aa(Te, O, y, s, m, $, he));
          var Ar = [],
            qn = {
              positionedLines: Ar,
              text: Te.toString(),
              top: k[1],
              bottom: k[1],
              left: k[0],
              right: k[0],
              writingMode: U,
              iconsInText: !1,
              verticalizable: !1,
            };
          return (
            (function (Tn, Mr, pr, Hr, zn, Kr, Li, Qi, Yi, Di, Ji, Ya) {
              for (
                var qa = 0,
                  Uo = -17,
                  io = 0,
                  zo = 0,
                  sa = Qi === "right" ? 1 : Qi === "left" ? 0 : 0.5,
                  ao = 0,
                  Dr = 0,
                  _i = zn;
                Dr < _i.length;
                Dr += 1
              ) {
                var ci = _i[Dr];
                ci.trim();
                var Gr = ci.getMaxScale(),
                  Ko = 24 * (Gr - 1),
                  wo = { positionedGlyphs: [], lineOffset: 0 };
                Tn.positionedLines[ao] = wo;
                var Ii = wo.positionedGlyphs,
                  Ca = 0;
                if (ci.length()) {
                  for (var Co = 0; Co < ci.length(); Co++) {
                    var Qr = ci.getSection(Co),
                      cu = ci.getSectionIndex(Co),
                      Ys = ci.getCharCode(Co),
                      uu = 0,
                      la = null,
                      du = null,
                      Jl = null,
                      Dh = 24,
                      B0 = !(
                        Yi === kn.horizontal ||
                        (!Ji && !Bu(Ys)) ||
                        (Ji &&
                          (tr[Ys] ||
                            (($u = Ys),
                            Jt.Arabic($u) ||
                              Jt["Arabic Supplement"]($u) ||
                              Jt["Arabic Extended-A"]($u) ||
                              Jt["Arabic Presentation Forms-A"]($u) ||
                              Jt["Arabic Presentation Forms-B"]($u))))
                      );
                    if (Qr.imageName) {
                      var Bh = Hr[Qr.imageName];
                      if (!Bh) continue;
                      (Jl = Qr.imageName),
                        (Tn.iconsInText = Tn.iconsInText || !0),
                        (du = Bh.paddedRect);
                      var qu = Bh.displaySize;
                      (Qr.scale = (24 * Qr.scale) / Ya),
                        (uu = Ko + (24 - qu[1] * Qr.scale)),
                        (Dh = (la = {
                          width: qu[0],
                          height: qu[1],
                          left: 1,
                          top: -3,
                          advance: B0 ? qu[1] : qu[0],
                        }).advance);
                      var Fh = B0
                        ? qu[0] * Qr.scale - 24 * Gr
                        : qu[1] * Qr.scale - 24 * Gr;
                      Fh > 0 && Fh > Ca && (Ca = Fh);
                    } else {
                      var pm = pr[Qr.fontStack],
                        kh = pm && pm[Ys];
                      if (kh && kh.rect) (du = kh.rect), (la = kh.metrics);
                      else {
                        var af = Mr[Qr.fontStack],
                          fm = af && af[Ys];
                        if (!fm) continue;
                        la = fm.metrics;
                      }
                      uu = 24 * (Gr - Qr.scale);
                    }
                    B0
                      ? ((Tn.verticalizable = !0),
                        Ii.push({
                          glyph: Ys,
                          imageName: Jl,
                          x: qa,
                          y: Uo + uu,
                          vertical: B0,
                          scale: Qr.scale,
                          fontStack: Qr.fontStack,
                          sectionIndex: cu,
                          metrics: la,
                          rect: du,
                        }),
                        (qa += Dh * Qr.scale + Di))
                      : (Ii.push({
                          glyph: Ys,
                          imageName: Jl,
                          x: qa,
                          y: Uo + uu,
                          vertical: B0,
                          scale: Qr.scale,
                          fontStack: Qr.fontStack,
                          sectionIndex: cu,
                          metrics: la,
                          rect: du,
                        }),
                        (qa += la.advance * Qr.scale + Di));
                  }
                  Ii.length !== 0 &&
                    ((io = Math.max(qa - Di, io)),
                    Aa(Ii, 0, Ii.length - 1, sa, Ca)),
                    (qa = 0);
                  var mm = Kr * Gr + Ca;
                  (wo.lineOffset = Math.max(Ca, Ko)),
                    (Uo += mm),
                    (zo = Math.max(mm, zo)),
                    ++ao;
                } else (Uo += Kr), ++ao;
              }
              var $u,
                of = Uo - -17,
                Uh = bi(Li),
                Fd = Uh.horizontalAlign,
                zh = Uh.verticalAlign;
              (function (gm, vm, sf, lf, _m, cf, uf, df, ym) {
                var Vh,
                  xm = (vm - sf) * _m;
                Vh = cf !== uf ? -df * lf - -17 : (-lf * ym + 0.5) * uf;
                for (var Hh = 0, hf = gm; Hh < hf.length; Hh += 1)
                  for (
                    var F0 = 0, pf = hf[Hh].positionedGlyphs;
                    F0 < pf.length;
                    F0 += 1
                  ) {
                    var jh = pf[F0];
                    (jh.x += xm), (jh.y += Vh);
                  }
              })(Tn.positionedLines, sa, Fd, zh, io, zo, Kr, of, zn.length),
                (Tn.top += -zh * of),
                (Tn.bottom = Tn.top + of),
                (Tn.left += -Fd * io),
                (Tn.right = Tn.left + io);
            })(qn, s, c, m, Ie, A, C, P, U, O, W, me),
            !(function (Tn) {
              for (var Mr = 0, pr = Tn; Mr < pr.length; Mr += 1)
                if (pr[Mr].positionedGlyphs.length !== 0) return !1;
              return !0;
            })(Ar) && qn
          );
        }
        (cn.fromFeature = function (i, s) {
          for (var c = new cn(), m = 0; m < i.sections.length; m++) {
            var _ = i.sections[m];
            _.image ? c.addImageSection(_) : c.addTextSection(_, s);
          }
          return c;
        }),
          (cn.prototype.length = function () {
            return this.text.length;
          }),
          (cn.prototype.getSection = function (i) {
            return this.sections[this.sectionIndex[i]];
          }),
          (cn.prototype.getSectionIndex = function (i) {
            return this.sectionIndex[i];
          }),
          (cn.prototype.getCharCode = function (i) {
            return this.text.charCodeAt(i);
          }),
          (cn.prototype.verticalizePunctuation = function () {
            this.text = (function (i) {
              for (var s = "", c = 0; c < i.length; c++) {
                var m = i.charCodeAt(c + 1) || null,
                  _ = i.charCodeAt(c - 1) || null;
                s +=
                  (m && xd(m) && !be[i[c + 1]]) ||
                  (_ && xd(_) && !be[i[c - 1]]) ||
                  !be[i[c]]
                    ? i[c]
                    : be[i[c]];
              }
              return s;
            })(this.text);
          }),
          (cn.prototype.trim = function () {
            for (
              var i = 0, s = 0;
              s < this.text.length && tr[this.text.charCodeAt(s)];
              s++
            )
              i++;
            for (
              var c = this.text.length, m = this.text.length - 1;
              m >= 0 && m >= i && tr[this.text.charCodeAt(m)];
              m--
            )
              c--;
            (this.text = this.text.substring(i, c)),
              (this.sectionIndex = this.sectionIndex.slice(i, c));
          }),
          (cn.prototype.substring = function (i, s) {
            var c = new cn();
            return (
              (c.text = this.text.substring(i, s)),
              (c.sectionIndex = this.sectionIndex.slice(i, s)),
              (c.sections = this.sections),
              c
            );
          }),
          (cn.prototype.toString = function () {
            return this.text;
          }),
          (cn.prototype.getMaxScale = function () {
            var i = this;
            return this.sectionIndex.reduce(function (s, c) {
              return Math.max(s, i.sections[c].scale);
            }, 0);
          }),
          (cn.prototype.addTextSection = function (i, s) {
            (this.text += i.text),
              this.sections.push(Er.forText(i.scale, i.fontStack || s));
            for (
              var c = this.sections.length - 1, m = 0;
              m < i.text.length;
              ++m
            )
              this.sectionIndex.push(c);
          }),
          (cn.prototype.addImageSection = function (i) {
            var s = i.image ? i.image.name : "";
            if (s.length !== 0) {
              var c = this.getNextImageSectionCharCode();
              c
                ? ((this.text += String.fromCharCode(c)),
                  this.sections.push(Er.forImage(s)),
                  this.sectionIndex.push(this.sections.length - 1))
                : He("Reached maximum number of images 6401");
            } else He("Can't add FormattedSection with an empty image.");
          }),
          (cn.prototype.getNextImageSectionCharCode = function () {
            return this.imageSectionID
              ? this.imageSectionID >= 63743
                ? null
                : ++this.imageSectionID
              : ((this.imageSectionID = 57344), this.imageSectionID);
          });
        var tr = { 9: !0, 10: !0, 11: !0, 12: !0, 13: !0, 32: !0 },
          Zn = {};
        function Xr(i, s, c, m, _, y) {
          if (s.imageName) {
            var A = m[s.imageName];
            return A ? (A.displaySize[0] * s.scale * 24) / y + _ : 0;
          }
          var C = c[s.fontStack],
            P = C && C[i];
          return P ? P.metrics.advance * s.scale + _ : 0;
        }
        function ia(i, s, c, m) {
          var _ = Math.pow(i - s, 2);
          return m ? (i < s ? _ / 2 : 2 * _) : _ + Math.abs(c) * c;
        }
        function Za(i, s, c) {
          var m = 0;
          return (
            i === 10 && (m -= 1e4),
            c && (m += 150),
            (i !== 40 && i !== 65288) || (m += 50),
            (s !== 41 && s !== 65289) || (m += 50),
            m
          );
        }
        function Ir(i, s, c, m, _, y) {
          for (
            var A = null, C = ia(s, c, _, y), P = 0, O = m;
            P < O.length;
            P += 1
          ) {
            var k = O[P],
              U = ia(s - k.x, c, _, y) + k.badness;
            U <= C && ((A = k), (C = U));
          }
          return { index: i, x: s, priorBreak: A, badness: C };
        }
        function aa(i, s, c, m, _, y, A) {
          if (y !== "point") return [];
          if (!i) return [];
          for (
            var C,
              P = [],
              O = (function (Ie, Te, je, Ze, at, lt) {
                for (var yt = 0, zt = 0; zt < Ie.length(); zt++) {
                  var Qt = Ie.getSection(zt);
                  yt += Xr(Ie.getCharCode(zt), Qt, Ze, at, Te, lt);
                }
                return yt / Math.max(1, Math.ceil(yt / je));
              })(i, s, c, m, _, A),
              k = i.text.indexOf("​") >= 0,
              U = 0,
              W = 0;
            W < i.length();
            W++
          ) {
            var $ = i.getSection(W),
              he = i.getCharCode(W);
            if ((tr[he] || (U += Xr(he, $, m, _, s, A)), W < i.length() - 1)) {
              var me = !(
                (C = he) < 11904 ||
                !(
                  Jt["Bopomofo Extended"](C) ||
                  Jt.Bopomofo(C) ||
                  Jt["CJK Compatibility Forms"](C) ||
                  Jt["CJK Compatibility Ideographs"](C) ||
                  Jt["CJK Compatibility"](C) ||
                  Jt["CJK Radicals Supplement"](C) ||
                  Jt["CJK Strokes"](C) ||
                  Jt["CJK Symbols and Punctuation"](C) ||
                  Jt["CJK Unified Ideographs Extension A"](C) ||
                  Jt["CJK Unified Ideographs"](C) ||
                  Jt["Enclosed CJK Letters and Months"](C) ||
                  Jt["Halfwidth and Fullwidth Forms"](C) ||
                  Jt.Hiragana(C) ||
                  Jt["Ideographic Description Characters"](C) ||
                  Jt["Kangxi Radicals"](C) ||
                  Jt["Katakana Phonetic Extensions"](C) ||
                  Jt.Katakana(C) ||
                  Jt["Vertical Forms"](C) ||
                  Jt["Yi Radicals"](C) ||
                  Jt["Yi Syllables"](C)
                )
              );
              (Zn[he] || me || $.imageName) &&
                P.push(
                  Ir(W + 1, U, O, P, Za(he, i.getCharCode(W + 1), me && k), !1)
                );
            }
          }
          return (function Ie(Te) {
            return Te ? Ie(Te.priorBreak).concat(Te.index) : [];
          })(Ir(i.length(), U, O, P, 0, !0));
        }
        function bi(i) {
          var s = 0.5,
            c = 0.5;
          switch (i) {
            case "right":
            case "top-right":
            case "bottom-right":
              s = 1;
              break;
            case "left":
            case "top-left":
            case "bottom-left":
              s = 0;
          }
          switch (i) {
            case "bottom":
            case "bottom-right":
            case "bottom-left":
              c = 1;
              break;
            case "top":
            case "top-right":
            case "top-left":
              c = 0;
          }
          return { horizontalAlign: s, verticalAlign: c };
        }
        function Aa(i, s, c, m, _) {
          if (m || _)
            for (
              var y = i[c],
                A = (i[c].x + y.metrics.advance * y.scale) * m,
                C = s;
              C <= c;
              C++
            )
              (i[C].x -= A), (i[C].y += _);
        }
        function Ta(i, s, c, m, _, y) {
          var A,
            C = i.image;
          if (C.content) {
            var P = C.content,
              O = C.pixelRatio || 1;
            A = [
              P[0] / O,
              P[1] / O,
              C.displaySize[0] - P[2] / O,
              C.displaySize[1] - P[3] / O,
            ];
          }
          var k,
            U,
            W,
            $,
            he = s.left * y,
            me = s.right * y;
          c === "width" || c === "both"
            ? (($ = _[0] + he - m[3]), (U = _[0] + me + m[1]))
            : (U =
                ($ = _[0] + (he + me - C.displaySize[0]) / 2) +
                C.displaySize[0]);
          var Ie = s.top * y,
            Te = s.bottom * y;
          return (
            c === "height" || c === "both"
              ? ((k = _[1] + Ie - m[0]), (W = _[1] + Te + m[2]))
              : (W =
                  (k = _[1] + (Ie + Te - C.displaySize[1]) / 2) +
                  C.displaySize[1]),
            {
              image: C,
              top: k,
              right: U,
              bottom: W,
              left: $,
              collisionPadding: A,
            }
          );
        }
        (Zn[10] = !0),
          (Zn[32] = !0),
          (Zn[38] = !0),
          (Zn[40] = !0),
          (Zn[41] = !0),
          (Zn[43] = !0),
          (Zn[45] = !0),
          (Zn[47] = !0),
          (Zn[173] = !0),
          (Zn[183] = !0),
          (Zn[8203] = !0),
          (Zn[8208] = !0),
          (Zn[8211] = !0),
          (Zn[8231] = !0);
        var ji = (function (i) {
          function s(c, m, _, y) {
            i.call(this, c, m),
              (this.angle = _),
              y !== void 0 && (this.segment = y);
          }
          return (
            i && (s.__proto__ = i),
            ((s.prototype = Object.create(i && i.prototype)).constructor = s),
            (s.prototype.clone = function () {
              return new s(this.x, this.y, this.angle, this.segment);
            }),
            s
          );
        })(E);
        function ka(i, s) {
          var c = s.expression;
          if (c.kind === "constant")
            return { kind: "constant", layoutSize: c.evaluate(new ur(i + 1)) };
          if (c.kind === "source") return { kind: "source" };
          for (
            var m = c.zoomStops, _ = c.interpolationType, y = 0;
            y < m.length && m[y] <= i;

          )
            y++;
          for (var A = (y = Math.max(0, y - 1)); A < m.length && m[A] < i + 1; )
            A++;
          A = Math.min(m.length - 1, A);
          var C = m[y],
            P = m[A];
          return c.kind === "composite"
            ? {
                kind: "composite",
                minZoom: C,
                maxZoom: P,
                interpolationType: _,
              }
            : {
                kind: "camera",
                minZoom: C,
                maxZoom: P,
                minSize: c.evaluate(new ur(C)),
                maxSize: c.evaluate(new ur(P)),
                interpolationType: _,
              };
        }
        function mo(i, s, c) {
          var m = s.uSize,
            _ = c.lowerSize;
          return i.kind === "source"
            ? _ / 128
            : i.kind === "composite"
            ? Ui(_ / 128, c.upperSize / 128, s.uSizeT)
            : m;
        }
        function Sa(i, s) {
          var c = 0,
            m = 0;
          if (i.kind === "constant") m = i.layoutSize;
          else if (i.kind !== "source") {
            var _ = i.interpolationType,
              y = _
                ? F(Xa.interpolationFactor(_, s, i.minZoom, i.maxZoom), 0, 1)
                : 0;
            i.kind === "camera" ? (m = Ui(i.minSize, i.maxSize, y)) : (c = y);
          }
          return { uSizeT: c, uSize: m };
        }
        vn("Anchor", ji);
        var fr = Object.freeze({
          __proto__: null,
          getSizeData: ka,
          evaluateSizeForFeature: mo,
          evaluateSizeForZoom: Sa,
          SIZE_PACK_FACTOR: 128,
        });
        function no(i, s, c, m, _) {
          if (s.segment === void 0) return !0;
          for (var y = s, A = s.segment + 1, C = 0; C > -c / 2; ) {
            if (--A < 0) return !1;
            (C -= i[A].dist(y)), (y = i[A]);
          }
          (C += i[A].dist(i[A + 1])), A++;
          for (var P = [], O = 0; C < c / 2; ) {
            var k = i[A],
              U = i[A + 1];
            if (!U) return !1;
            var W = i[A - 1].angleTo(k) - k.angleTo(U);
            for (
              W = Math.abs(((W + 3 * Math.PI) % (2 * Math.PI)) - Math.PI),
                P.push({ distance: C, angleDelta: W }),
                O += W;
              C - P[0].distance > m;

            )
              O -= P.shift().angleDelta;
            if (O > _) return !1;
            A++, (C += k.dist(U));
          }
          return !0;
        }
        function qr(i) {
          for (var s = 0, c = 0; c < i.length - 1; c++)
            s += i[c].dist(i[c + 1]);
          return s;
        }
        function jn(i, s, c) {
          return i ? 0.6 * s * c : 0;
        }
        function Cr(i, s) {
          return Math.max(i ? i.right - i.left : 0, s ? s.right - s.left : 0);
        }
        function Vr(i, s, c, m, _, y) {
          for (
            var A = jn(c, _, y), C = Cr(c, m) * y, P = 0, O = qr(i) / 2, k = 0;
            k < i.length - 1;
            k++
          ) {
            var U = i[k],
              W = i[k + 1],
              $ = U.dist(W);
            if (P + $ > O) {
              var he = (O - P) / $,
                me = Ui(U.x, W.x, he),
                Ie = Ui(U.y, W.y, he),
                Te = new ji(me, Ie, W.angleTo(U), k);
              return Te._round(), !A || no(i, Te, C, A, s) ? Te : void 0;
            }
            P += $;
          }
        }
        function oa(i, s, c, m, _, y, A, C, P) {
          var O = jn(m, y, A),
            k = Cr(m, _),
            U = k * A,
            W = i[0].x === 0 || i[0].x === P || i[0].y === 0 || i[0].y === P;
          return (
            s - U < s / 4 && (s = U + s / 4),
            (function $(he, me, Ie, Te, je, Ze, at, lt, yt) {
              for (
                var zt = Ze / 2,
                  Qt = qr(he),
                  Mn = 0,
                  dn = me - Ie,
                  Un = [],
                  fn = 0;
                fn < he.length - 1;
                fn++
              ) {
                for (
                  var Ar = he[fn],
                    qn = he[fn + 1],
                    Tn = Ar.dist(qn),
                    Mr = qn.angleTo(Ar);
                  dn + Ie < Mn + Tn;

                ) {
                  var pr = ((dn += Ie) - Mn) / Tn,
                    Hr = Ui(Ar.x, qn.x, pr),
                    zn = Ui(Ar.y, qn.y, pr);
                  if (
                    Hr >= 0 &&
                    Hr < yt &&
                    zn >= 0 &&
                    zn < yt &&
                    dn - zt >= 0 &&
                    dn + zt <= Qt
                  ) {
                    var Kr = new ji(Hr, zn, Mr, fn);
                    Kr._round(), (Te && !no(he, Kr, Ze, Te, je)) || Un.push(Kr);
                  }
                }
                Mn += Tn;
              }
              return (
                lt ||
                  Un.length ||
                  at ||
                  (Un = $(he, Mn / 2, Ie, Te, je, Ze, at, !0, yt)),
                Un
              );
            })(
              i,
              W ? ((s / 2) * C) % s : ((k / 2 + 2 * y) * A * C) % s,
              s,
              O,
              c,
              U,
              W,
              !1,
              P
            )
          );
        }
        function Tl(i, s, c, m, _) {
          for (var y = [], A = 0; A < i.length; A++)
            for (var C = i[A], P = void 0, O = 0; O < C.length - 1; O++) {
              var k = C[O],
                U = C[O + 1];
              (k.x < s && U.x < s) ||
                (k.x < s
                  ? (k = new E(
                      s,
                      k.y + ((s - k.x) / (U.x - k.x)) * (U.y - k.y)
                    )._round())
                  : U.x < s &&
                    (U = new E(
                      s,
                      k.y + ((s - k.x) / (U.x - k.x)) * (U.y - k.y)
                    )._round()),
                (k.y < c && U.y < c) ||
                  (k.y < c
                    ? (k = new E(
                        k.x + ((c - k.y) / (U.y - k.y)) * (U.x - k.x),
                        c
                      )._round())
                    : U.y < c &&
                      (U = new E(
                        k.x + ((c - k.y) / (U.y - k.y)) * (U.x - k.x),
                        c
                      )._round()),
                  (k.x >= m && U.x >= m) ||
                    (k.x >= m
                      ? (k = new E(
                          m,
                          k.y + ((m - k.x) / (U.x - k.x)) * (U.y - k.y)
                        )._round())
                      : U.x >= m &&
                        (U = new E(
                          m,
                          k.y + ((m - k.x) / (U.x - k.x)) * (U.y - k.y)
                        )._round()),
                    (k.y >= _ && U.y >= _) ||
                      (k.y >= _
                        ? (k = new E(
                            k.x + ((_ - k.y) / (U.y - k.y)) * (U.x - k.x),
                            _
                          )._round())
                        : U.y >= _ &&
                          (U = new E(
                            k.x + ((_ - k.y) / (U.y - k.y)) * (U.x - k.x),
                            _
                          )._round()),
                      (P && k.equals(P[P.length - 1])) || y.push((P = [k])),
                      P.push(U)))));
            }
          return y;
        }
        function ge(i, s, c, m) {
          var _ = [],
            y = i.image,
            A = y.pixelRatio,
            C = y.paddedRect.w - 2,
            P = y.paddedRect.h - 2,
            O = i.right - i.left,
            k = i.bottom - i.top,
            U = y.stretchX || [[0, C]],
            W = y.stretchY || [[0, P]],
            $ = function (Hr, zn) {
              return Hr + zn[1] - zn[0];
            },
            he = U.reduce($, 0),
            me = W.reduce($, 0),
            Ie = C - he,
            Te = P - me,
            je = 0,
            Ze = he,
            at = 0,
            lt = me,
            yt = 0,
            zt = Ie,
            Qt = 0,
            Mn = Te;
          if (y.content && m) {
            var dn = y.content;
            (je = it(U, 0, dn[0])),
              (at = it(W, 0, dn[1])),
              (Ze = it(U, dn[0], dn[2])),
              (lt = it(W, dn[1], dn[3])),
              (yt = dn[0] - je),
              (Qt = dn[1] - at),
              (zt = dn[2] - dn[0] - Ze),
              (Mn = dn[3] - dn[1] - lt);
          }
          var Un = function (Hr, zn, Kr, Li) {
            var Qi = un(Hr.stretch - je, Ze, O, i.left),
              Yi = gr(Hr.fixed - yt, zt, Hr.stretch, he),
              Di = un(zn.stretch - at, lt, k, i.top),
              Ji = gr(zn.fixed - Qt, Mn, zn.stretch, me),
              Ya = un(Kr.stretch - je, Ze, O, i.left),
              qa = gr(Kr.fixed - yt, zt, Kr.stretch, he),
              Uo = un(Li.stretch - at, lt, k, i.top),
              io = gr(Li.fixed - Qt, Mn, Li.stretch, me),
              zo = new E(Qi, Di),
              sa = new E(Ya, Di),
              ao = new E(Ya, Uo),
              Dr = new E(Qi, Uo),
              _i = new E(Yi / A, Ji / A),
              ci = new E(qa / A, io / A),
              Gr = (s * Math.PI) / 180;
            if (Gr) {
              var Ko = Math.sin(Gr),
                wo = Math.cos(Gr),
                Ii = [wo, -Ko, Ko, wo];
              zo._matMult(Ii),
                sa._matMult(Ii),
                Dr._matMult(Ii),
                ao._matMult(Ii);
            }
            var Ca = Hr.stretch + Hr.fixed,
              Co = zn.stretch + zn.fixed;
            return {
              tl: zo,
              tr: sa,
              bl: Dr,
              br: ao,
              tex: {
                x: y.paddedRect.x + 1 + Ca,
                y: y.paddedRect.y + 1 + Co,
                w: Kr.stretch + Kr.fixed - Ca,
                h: Li.stretch + Li.fixed - Co,
              },
              writingMode: void 0,
              glyphOffset: [0, 0],
              sectionIndex: 0,
              pixelOffsetTL: _i,
              pixelOffsetBR: ci,
              minFontScaleX: zt / A / O,
              minFontScaleY: Mn / A / k,
              isSDF: c,
            };
          };
          if (m && (y.stretchX || y.stretchY))
            for (
              var fn = Ke(U, Ie, he), Ar = Ke(W, Te, me), qn = 0;
              qn < fn.length - 1;
              qn++
            )
              for (
                var Tn = fn[qn], Mr = fn[qn + 1], pr = 0;
                pr < Ar.length - 1;
                pr++
              )
                _.push(Un(Tn, Ar[pr], Mr, Ar[pr + 1]));
          else
            _.push(
              Un(
                { fixed: 0, stretch: -1 },
                { fixed: 0, stretch: -1 },
                { fixed: 0, stretch: C + 1 },
                { fixed: 0, stretch: P + 1 }
              )
            );
          return _;
        }
        function it(i, s, c) {
          for (var m = 0, _ = 0, y = i; _ < y.length; _ += 1) {
            var A = y[_];
            m +=
              Math.max(s, Math.min(c, A[1])) - Math.max(s, Math.min(c, A[0]));
          }
          return m;
        }
        function Ke(i, s, c) {
          for (
            var m = [{ fixed: -1, stretch: 0 }], _ = 0, y = i;
            _ < y.length;
            _ += 1
          ) {
            var A = y[_],
              C = A[0],
              P = A[1],
              O = m[m.length - 1];
            m.push({ fixed: C - O.stretch, stretch: O.stretch }),
              m.push({ fixed: C - O.stretch, stretch: O.stretch + (P - C) });
          }
          return m.push({ fixed: s + 1, stretch: c }), m;
        }
        function un(i, s, c, m) {
          return (i / s) * c + m;
        }
        function gr(i, s, c, m) {
          return i - (s * c) / m;
        }
        var li = function (i, s, c, m, _, y, A, C, P, O) {
            if (((this.boxStartIndex = i.length), P)) {
              var k = y.top,
                U = y.bottom,
                W = y.collisionPadding;
              W && ((k -= W[1]), (U += W[3]));
              var $ = U - k;
              $ > 0 && (($ = Math.max(10, $)), (this.circleDiameter = $));
            } else {
              var he = y.top * A - C,
                me = y.bottom * A + C,
                Ie = y.left * A - C,
                Te = y.right * A + C,
                je = y.collisionPadding;
              if (
                (je &&
                  ((Ie -= je[0] * A),
                  (he -= je[1] * A),
                  (Te += je[2] * A),
                  (me += je[3] * A)),
                O)
              ) {
                var Ze = new E(Ie, he),
                  at = new E(Te, he),
                  lt = new E(Ie, me),
                  yt = new E(Te, me),
                  zt = (O * Math.PI) / 180;
                Ze._rotate(zt),
                  at._rotate(zt),
                  lt._rotate(zt),
                  yt._rotate(zt),
                  (Ie = Math.min(Ze.x, at.x, lt.x, yt.x)),
                  (Te = Math.max(Ze.x, at.x, lt.x, yt.x)),
                  (he = Math.min(Ze.y, at.y, lt.y, yt.y)),
                  (me = Math.max(Ze.y, at.y, lt.y, yt.y));
              }
              i.emplaceBack(s.x, s.y, Ie, he, Te, me, c, m, _);
            }
            this.boxEndIndex = i.length;
          },
          q = function (i, s) {
            if (
              (i === void 0 && (i = []),
              s === void 0 && (s = ce),
              (this.data = i),
              (this.length = this.data.length),
              (this.compare = s),
              this.length > 0)
            )
              for (var c = (this.length >> 1) - 1; c >= 0; c--) this._down(c);
          };
        function ce(i, s) {
          return i < s ? -1 : i > s ? 1 : 0;
        }
        function Ee(i, s, c) {
          c === void 0 && (c = !1);
          for (
            var m = 1 / 0, _ = 1 / 0, y = -1 / 0, A = -1 / 0, C = i[0], P = 0;
            P < C.length;
            P++
          ) {
            var O = C[P];
            (!P || O.x < m) && (m = O.x),
              (!P || O.y < _) && (_ = O.y),
              (!P || O.x > y) && (y = O.x),
              (!P || O.y > A) && (A = O.y);
          }
          var k = Math.min(y - m, A - _),
            U = k / 2,
            W = new q([], Qe);
          if (k === 0) return new E(m, _);
          for (var $ = m; $ < y; $ += k)
            for (var he = _; he < A; he += k)
              W.push(new $e($ + U, he + U, U, i));
          for (
            var me = (function (je) {
                for (
                  var Ze = 0,
                    at = 0,
                    lt = 0,
                    yt = je[0],
                    zt = 0,
                    Qt = yt.length,
                    Mn = Qt - 1;
                  zt < Qt;
                  Mn = zt++
                ) {
                  var dn = yt[zt],
                    Un = yt[Mn],
                    fn = dn.x * Un.y - Un.x * dn.y;
                  (at += (dn.x + Un.x) * fn),
                    (lt += (dn.y + Un.y) * fn),
                    (Ze += 3 * fn);
                }
                return new $e(at / Ze, lt / Ze, 0, je);
              })(i),
              Ie = W.length;
            W.length;

          ) {
            var Te = W.pop();
            (Te.d > me.d || !me.d) &&
              ((me = Te),
              c &&
                console.log(
                  "found best %d after %d probes",
                  Math.round(1e4 * Te.d) / 1e4,
                  Ie
                )),
              Te.max - me.d <= s ||
                (W.push(new $e(Te.p.x - (U = Te.h / 2), Te.p.y - U, U, i)),
                W.push(new $e(Te.p.x + U, Te.p.y - U, U, i)),
                W.push(new $e(Te.p.x - U, Te.p.y + U, U, i)),
                W.push(new $e(Te.p.x + U, Te.p.y + U, U, i)),
                (Ie += 4));
          }
          return (
            c &&
              (console.log("num probes: " + Ie),
              console.log("best distance: " + me.d)),
            me.p
          );
        }
        function Qe(i, s) {
          return s.max - i.max;
        }
        function $e(i, s, c, m) {
          (this.p = new E(i, s)),
            (this.h = c),
            (this.d = (function (_, y) {
              for (var A = !1, C = 1 / 0, P = 0; P < y.length; P++)
                for (
                  var O = y[P], k = 0, U = O.length, W = U - 1;
                  k < U;
                  W = k++
                ) {
                  var $ = O[k],
                    he = O[W];
                  $.y > _.y != he.y > _.y &&
                    _.x < ((he.x - $.x) * (_.y - $.y)) / (he.y - $.y) + $.x &&
                    (A = !A),
                    (C = Math.min(C, ql(_, $, he)));
                }
              return (A ? 1 : -1) * Math.sqrt(C);
            })(this.p, m)),
            (this.max = this.d + this.h * Math.SQRT2);
        }
        (q.prototype.push = function (i) {
          this.data.push(i), this.length++, this._up(this.length - 1);
        }),
          (q.prototype.pop = function () {
            if (this.length !== 0) {
              var i = this.data[0],
                s = this.data.pop();
              return (
                this.length--,
                this.length > 0 && ((this.data[0] = s), this._down(0)),
                i
              );
            }
          }),
          (q.prototype.peek = function () {
            return this.data[0];
          }),
          (q.prototype._up = function (i) {
            for (var s = this.data, c = this.compare, m = s[i]; i > 0; ) {
              var _ = (i - 1) >> 1,
                y = s[_];
              if (c(m, y) >= 0) break;
              (s[i] = y), (i = _);
            }
            s[i] = m;
          }),
          (q.prototype._down = function (i) {
            for (
              var s = this.data,
                c = this.compare,
                m = this.length >> 1,
                _ = s[i];
              i < m;

            ) {
              var y = 1 + (i << 1),
                A = s[y],
                C = y + 1;
              if (
                (C < this.length && c(s[C], A) < 0 && ((y = C), (A = s[C])),
                c(A, _) >= 0)
              )
                break;
              (s[i] = A), (i = y);
            }
            s[i] = _;
          });
        var Ne = Number.POSITIVE_INFINITY;
        function Le(i, s) {
          return s[1] !== Ne
            ? (function (c, m, _) {
                var y = 0,
                  A = 0;
                switch (((m = Math.abs(m)), (_ = Math.abs(_)), c)) {
                  case "top-right":
                  case "top-left":
                  case "top":
                    A = _ - 7;
                    break;
                  case "bottom-right":
                  case "bottom-left":
                  case "bottom":
                    A = 7 - _;
                }
                switch (c) {
                  case "top-right":
                  case "bottom-right":
                  case "right":
                    y = -m;
                    break;
                  case "top-left":
                  case "bottom-left":
                  case "left":
                    y = m;
                }
                return [y, A];
              })(i, s[0], s[1])
            : (function (c, m) {
                var _ = 0,
                  y = 0;
                m < 0 && (m = 0);
                var A = m / Math.sqrt(2);
                switch (c) {
                  case "top-right":
                  case "top-left":
                    y = A - 7;
                    break;
                  case "bottom-right":
                  case "bottom-left":
                    y = 7 - A;
                    break;
                  case "bottom":
                    y = 7 - m;
                    break;
                  case "top":
                    y = m - 7;
                }
                switch (c) {
                  case "top-right":
                  case "bottom-right":
                    _ = -A;
                    break;
                  case "top-left":
                  case "bottom-left":
                    _ = A;
                    break;
                  case "left":
                    _ = m;
                    break;
                  case "right":
                    _ = -m;
                }
                return [_, y];
              })(i, s[0]);
        }
        function Ue(i) {
          switch (i) {
            case "right":
            case "top-right":
            case "bottom-right":
              return "right";
            case "left":
            case "top-left":
            case "bottom-left":
              return "left";
          }
          return "center";
        }
        function ve(i, s, c, m, _, y, A, C, P, O, k, U, W, $, he) {
          var me = (function (at, lt, yt, zt, Qt, Mn, dn, Un) {
              for (
                var fn =
                    (zt.layout.get("text-rotate").evaluate(Mn, {}) * Math.PI) /
                    180,
                  Ar = [],
                  qn = 0,
                  Tn = lt.positionedLines;
                qn < Tn.length;
                qn += 1
              )
                for (
                  var Mr = Tn[qn], pr = 0, Hr = Mr.positionedGlyphs;
                  pr < Hr.length;
                  pr += 1
                ) {
                  var zn = Hr[pr];
                  if (zn.rect) {
                    var Kr = zn.rect || {},
                      Li = 4,
                      Qi = !0,
                      Yi = 1,
                      Di = 0,
                      Ji = (Qt || Un) && zn.vertical,
                      Ya = (zn.metrics.advance * zn.scale) / 2;
                    if (
                      (Un &&
                        lt.verticalizable &&
                        (Di =
                          Mr.lineOffset / 2 -
                          (zn.imageName
                            ? -(24 - zn.metrics.width * zn.scale) / 2
                            : 24 * (zn.scale - 1))),
                      zn.imageName)
                    ) {
                      var qa = dn[zn.imageName];
                      (Qi = qa.sdf), (Li = 1 / (Yi = qa.pixelRatio));
                    }
                    var Uo = Qt ? [zn.x + Ya, zn.y] : [0, 0],
                      io = Qt ? [0, 0] : [zn.x + Ya + yt[0], zn.y + yt[1] - Di],
                      zo = [0, 0];
                    Ji && ((zo = io), (io = [0, 0]));
                    var sa = (zn.metrics.left - Li) * zn.scale - Ya + io[0],
                      ao = (-zn.metrics.top - Li) * zn.scale + io[1],
                      Dr = sa + (Kr.w * zn.scale) / Yi,
                      _i = ao + (Kr.h * zn.scale) / Yi,
                      ci = new E(sa, ao),
                      Gr = new E(Dr, ao),
                      Ko = new E(sa, _i),
                      wo = new E(Dr, _i);
                    if (Ji) {
                      var Ii = new E(-Ya, Ya - -17),
                        Ca = -Math.PI / 2,
                        Co = 12 - Ya,
                        Qr = new E(22 - Co, -(zn.imageName ? Co : 0)),
                        cu = new (Function.prototype.bind.apply(
                          E,
                          [null].concat(zo)
                        ))();
                      ci._rotateAround(Ca, Ii)._add(Qr)._add(cu),
                        Gr._rotateAround(Ca, Ii)._add(Qr)._add(cu),
                        Ko._rotateAround(Ca, Ii)._add(Qr)._add(cu),
                        wo._rotateAround(Ca, Ii)._add(Qr)._add(cu);
                    }
                    if (fn) {
                      var Ys = Math.sin(fn),
                        uu = Math.cos(fn),
                        la = [uu, -Ys, Ys, uu];
                      ci._matMult(la),
                        Gr._matMult(la),
                        Ko._matMult(la),
                        wo._matMult(la);
                    }
                    var du = new E(0, 0),
                      Jl = new E(0, 0);
                    Ar.push({
                      tl: ci,
                      tr: Gr,
                      bl: Ko,
                      br: wo,
                      tex: Kr,
                      writingMode: lt.writingMode,
                      glyphOffset: Uo,
                      sectionIndex: zn.sectionIndex,
                      isSDF: Qi,
                      pixelOffsetTL: du,
                      pixelOffsetBR: Jl,
                      minFontScaleX: 0,
                      minFontScaleY: 0,
                    });
                  }
                }
              return Ar;
            })(0, c, C, _, y, A, m, i.allowVerticalPlacement),
            Ie = i.textSizeData,
            Te = null;
          Ie.kind === "source"
            ? (Te = [128 * _.layout.get("text-size").evaluate(A, {})])[0] >
                32640 &&
              He(
                i.layerIds[0] +
                  ': Value for "text-size" is >= 255. Reduce your "text-size".'
              )
            : Ie.kind === "composite" &&
              ((Te = [
                128 * $.compositeTextSizes[0].evaluate(A, {}, he),
                128 * $.compositeTextSizes[1].evaluate(A, {}, he),
              ])[0] > 32640 ||
                Te[1] > 32640) &&
              He(
                i.layerIds[0] +
                  ': Value for "text-size" is >= 255. Reduce your "text-size".'
              ),
            i.addSymbols(
              i.text,
              me,
              Te,
              C,
              y,
              A,
              O,
              s,
              P.lineStartIndex,
              P.lineLength,
              W,
              he
            );
          for (var je = 0, Ze = k; je < Ze.length; je += 1)
            U[Ze[je]] = i.text.placedSymbolArray.length - 1;
          return 4 * me.length;
        }
        function Me(i) {
          for (var s in i) return i[s];
          return null;
        }
        function se(i, s, c, m) {
          var _ = i.compareText;
          if (s in _) {
            for (var y = _[s], A = y.length - 1; A >= 0; A--)
              if (m.dist(y[A]) < c) return !0;
          } else _[s] = [];
          return _[s].push(m), !1;
        }
        var Oe = lu.VectorTileFeature.types,
          ot = [
            { name: "a_fade_opacity", components: 1, type: "Uint8", offset: 0 },
          ];
        function ft(i, s, c, m, _, y, A, C, P, O, k, U, W) {
          var $ = C ? Math.min(32640, Math.round(C[0])) : 0,
            he = C ? Math.min(32640, Math.round(C[1])) : 0;
          i.emplaceBack(
            s,
            c,
            Math.round(32 * m),
            Math.round(32 * _),
            y,
            A,
            ($ << 1) + (P ? 1 : 0),
            he,
            16 * O,
            16 * k,
            256 * U,
            256 * W
          );
        }
        function Ct(i, s, c) {
          i.emplaceBack(s.x, s.y, c),
            i.emplaceBack(s.x, s.y, c),
            i.emplaceBack(s.x, s.y, c),
            i.emplaceBack(s.x, s.y, c);
        }
        function xt(i) {
          for (var s = 0, c = i.sections; s < c.length; s += 1)
            if (bd(c[s].text)) return !0;
          return !1;
        }
        var Mt = function (i) {
          (this.layoutVertexArray = new Sd()),
            (this.indexArray = new js()),
            (this.programConfigurations = i),
            (this.segments = new ne()),
            (this.dynamicLayoutVertexArray = new eu()),
            (this.opacityVertexArray = new Fu()),
            (this.placedSymbolArray = new g());
        };
        (Mt.prototype.isEmpty = function () {
          return (
            this.layoutVertexArray.length === 0 &&
            this.indexArray.length === 0 &&
            this.dynamicLayoutVertexArray.length === 0 &&
            this.opacityVertexArray.length === 0
          );
        }),
          (Mt.prototype.upload = function (i, s, c, m) {
            this.isEmpty() ||
              (c &&
                ((this.layoutVertexBuffer = i.createVertexBuffer(
                  this.layoutVertexArray,
                  jv.members
                )),
                (this.indexBuffer = i.createIndexBuffer(this.indexArray, s)),
                (this.dynamicLayoutVertexBuffer = i.createVertexBuffer(
                  this.dynamicLayoutVertexArray,
                  Wv.members,
                  !0
                )),
                (this.opacityVertexBuffer = i.createVertexBuffer(
                  this.opacityVertexArray,
                  ot,
                  !0
                )),
                (this.opacityVertexBuffer.itemSize = 1)),
              (c || m) && this.programConfigurations.upload(i));
          }),
          (Mt.prototype.destroy = function () {
            this.layoutVertexBuffer &&
              (this.layoutVertexBuffer.destroy(),
              this.indexBuffer.destroy(),
              this.programConfigurations.destroy(),
              this.segments.destroy(),
              this.dynamicLayoutVertexBuffer.destroy(),
              this.opacityVertexBuffer.destroy());
          }),
          vn("SymbolBuffers", Mt);
        var wn = function (i, s, c) {
          (this.layoutVertexArray = new i()),
            (this.layoutAttributes = s),
            (this.indexArray = new c()),
            (this.segments = new ne()),
            (this.collisionVertexArray = new N0());
        };
        (wn.prototype.upload = function (i) {
          (this.layoutVertexBuffer = i.createVertexBuffer(
            this.layoutVertexArray,
            this.layoutAttributes
          )),
            (this.indexBuffer = i.createIndexBuffer(this.indexArray)),
            (this.collisionVertexBuffer = i.createVertexBuffer(
              this.collisionVertexArray,
              sm.members,
              !0
            ));
        }),
          (wn.prototype.destroy = function () {
            this.layoutVertexBuffer &&
              (this.layoutVertexBuffer.destroy(),
              this.indexBuffer.destroy(),
              this.segments.destroy(),
              this.collisionVertexBuffer.destroy());
          }),
          vn("CollisionBuffers", wn);
        var _n = function (i) {
          (this.collisionBoxArray = i.collisionBoxArray),
            (this.zoom = i.zoom),
            (this.overscaling = i.overscaling),
            (this.layers = i.layers),
            (this.layerIds = this.layers.map(function (y) {
              return y.id;
            })),
            (this.index = i.index),
            (this.pixelRatio = i.pixelRatio),
            (this.sourceLayerIndex = i.sourceLayerIndex),
            (this.hasPattern = !1),
            (this.hasRTLText = !1),
            (this.sortKeyRanges = []),
            (this.collisionCircleArray = []),
            (this.placementInvProjMatrix = Fa([])),
            (this.placementViewportMatrix = Fa([]));
          var s = this.layers[0]._unevaluatedLayout._values;
          (this.textSizeData = ka(this.zoom, s["text-size"])),
            (this.iconSizeData = ka(this.zoom, s["icon-size"]));
          var c = this.layers[0].layout,
            m = c.get("symbol-sort-key"),
            _ = c.get("symbol-z-order");
          (this.canOverlap =
            c.get("text-allow-overlap") ||
            c.get("icon-allow-overlap") ||
            c.get("text-ignore-placement") ||
            c.get("icon-ignore-placement")),
            (this.sortFeaturesByKey =
              _ !== "viewport-y" && m.constantOr(1) !== void 0),
            (this.sortFeaturesByY =
              (_ === "viewport-y" ||
                (_ === "auto" && !this.sortFeaturesByKey)) &&
              this.canOverlap),
            c.get("symbol-placement") === "point" &&
              (this.writingModes = c.get("text-writing-mode").map(function (y) {
                return kn[y];
              })),
            (this.stateDependentLayerIds = this.layers
              .filter(function (y) {
                return y.isStateDependent();
              })
              .map(function (y) {
                return y.id;
              })),
            (this.sourceID = i.sourceID);
        };
        (_n.prototype.createArrays = function () {
          (this.text = new Mt(
            new Hn(this.layers, this.zoom, function (i) {
              return /^text/.test(i);
            })
          )),
            (this.icon = new Mt(
              new Hn(this.layers, this.zoom, function (i) {
                return /^icon/.test(i);
              })
            )),
            (this.glyphOffsetArray = new w()),
            (this.lineVertexArray = new M()),
            (this.symbolInstances = new S());
        }),
          (_n.prototype.calculateGlyphDependencies = function (i, s, c, m, _) {
            for (var y = 0; y < i.length; y++)
              if (((s[i.charCodeAt(y)] = !0), (c || m) && _)) {
                var A = be[i.charAt(y)];
                A && (s[A.charCodeAt(0)] = !0);
              }
          }),
          (_n.prototype.populate = function (i, s, c) {
            var m = this.layers[0],
              _ = m.layout,
              y = _.get("text-font"),
              A = _.get("text-field"),
              C = _.get("icon-image"),
              P =
                (A.value.kind !== "constant" ||
                  (A.value.value instanceof ki && !A.value.value.isEmpty()) ||
                  A.value.value.toString().length > 0) &&
                (y.value.kind !== "constant" || y.value.value.length > 0),
              O =
                C.value.kind !== "constant" ||
                !!C.value.value ||
                Object.keys(C.parameters).length > 0,
              k = _.get("symbol-sort-key");
            if (((this.features = []), P || O)) {
              for (
                var U = s.iconDependencies,
                  W = s.glyphDependencies,
                  $ = s.availableImages,
                  he = new ur(this.zoom),
                  me = 0,
                  Ie = i;
                me < Ie.length;
                me += 1
              ) {
                var Te = Ie[me],
                  je = Te.feature,
                  Ze = Te.id,
                  at = Te.index,
                  lt = Te.sourceLayerIndex,
                  yt = m._featureFilter.needGeometry,
                  zt = Pi(je, yt);
                if (m._featureFilter.filter(he, zt, c)) {
                  yt || (zt.geometry = Ri(je));
                  var Qt = void 0;
                  if (P) {
                    var Mn = m.getValueAndResolveTokens("text-field", zt, c, $),
                      dn = ki.factory(Mn);
                    xt(dn) && (this.hasRTLText = !0),
                      (!this.hasRTLText ||
                        w0() === "unavailable" ||
                        (this.hasRTLText && Yo.isParsed())) &&
                        (Qt = oe(dn, m, zt));
                  }
                  var Un = void 0;
                  if (O) {
                    var fn = m.getValueAndResolveTokens("icon-image", zt, c, $);
                    Un = fn instanceof Ai ? fn : Ai.fromString(fn);
                  }
                  if (Qt || Un) {
                    var Ar = this.sortFeaturesByKey
                      ? k.evaluate(zt, {}, c)
                      : void 0;
                    if (
                      (this.features.push({
                        id: Ze,
                        text: Qt,
                        icon: Un,
                        index: at,
                        sourceLayerIndex: lt,
                        geometry: zt.geometry,
                        properties: je.properties,
                        type: Oe[je.type],
                        sortKey: Ar,
                      }),
                      Un && (U[Un.name] = !0),
                      Qt)
                    ) {
                      var qn = y.evaluate(zt, {}, c).join(","),
                        Tn =
                          _.get("text-rotation-alignment") === "map" &&
                          _.get("symbol-placement") !== "point";
                      this.allowVerticalPlacement =
                        this.writingModes &&
                        this.writingModes.indexOf(kn.vertical) >= 0;
                      for (
                        var Mr = 0, pr = Qt.sections;
                        Mr < pr.length;
                        Mr += 1
                      ) {
                        var Hr = pr[Mr];
                        if (Hr.image) U[Hr.image.name] = !0;
                        else {
                          var zn = _l(Qt.toString()),
                            Kr = Hr.fontStack || qn,
                            Li = (W[Kr] = W[Kr] || {});
                          this.calculateGlyphDependencies(
                            Hr.text,
                            Li,
                            Tn,
                            this.allowVerticalPlacement,
                            zn
                          );
                        }
                      }
                    }
                  }
                }
              }
              _.get("symbol-placement") === "line" &&
                (this.features = (function (Qi) {
                  var Yi = {},
                    Di = {},
                    Ji = [],
                    Ya = 0;
                  function qa(Ii) {
                    Ji.push(Qi[Ii]), Ya++;
                  }
                  function Uo(Ii, Ca, Co) {
                    var Qr = Di[Ii];
                    return (
                      delete Di[Ii],
                      (Di[Ca] = Qr),
                      Ji[Qr].geometry[0].pop(),
                      (Ji[Qr].geometry[0] = Ji[Qr].geometry[0].concat(Co[0])),
                      Qr
                    );
                  }
                  function io(Ii, Ca, Co) {
                    var Qr = Yi[Ca];
                    return (
                      delete Yi[Ca],
                      (Yi[Ii] = Qr),
                      Ji[Qr].geometry[0].shift(),
                      (Ji[Qr].geometry[0] = Co[0].concat(Ji[Qr].geometry[0])),
                      Qr
                    );
                  }
                  function zo(Ii, Ca, Co) {
                    var Qr = Co ? Ca[0][Ca[0].length - 1] : Ca[0][0];
                    return Ii + ":" + Qr.x + ":" + Qr.y;
                  }
                  for (var sa = 0; sa < Qi.length; sa++) {
                    var ao = Qi[sa],
                      Dr = ao.geometry,
                      _i = ao.text ? ao.text.toString() : null;
                    if (_i) {
                      var ci = zo(_i, Dr),
                        Gr = zo(_i, Dr, !0);
                      if (ci in Di && Gr in Yi && Di[ci] !== Yi[Gr]) {
                        var Ko = io(ci, Gr, Dr),
                          wo = Uo(ci, Gr, Ji[Ko].geometry);
                        delete Yi[ci],
                          delete Di[Gr],
                          (Di[zo(_i, Ji[wo].geometry, !0)] = wo),
                          (Ji[Ko].geometry = null);
                      } else
                        ci in Di
                          ? Uo(ci, Gr, Dr)
                          : Gr in Yi
                          ? io(ci, Gr, Dr)
                          : (qa(sa), (Yi[ci] = Ya - 1), (Di[Gr] = Ya - 1));
                    } else qa(sa);
                  }
                  return Ji.filter(function (Ii) {
                    return Ii.geometry;
                  });
                })(this.features)),
                this.sortFeaturesByKey &&
                  this.features.sort(function (Qi, Yi) {
                    return Qi.sortKey - Yi.sortKey;
                  });
            }
          }),
          (_n.prototype.update = function (i, s, c) {
            this.stateDependentLayers.length &&
              (this.text.programConfigurations.updatePaintArrays(
                i,
                s,
                this.layers,
                c
              ),
              this.icon.programConfigurations.updatePaintArrays(
                i,
                s,
                this.layers,
                c
              ));
          }),
          (_n.prototype.isEmpty = function () {
            return this.symbolInstances.length === 0 && !this.hasRTLText;
          }),
          (_n.prototype.uploadPending = function () {
            return (
              !this.uploaded ||
              this.text.programConfigurations.needsUpload ||
              this.icon.programConfigurations.needsUpload
            );
          }),
          (_n.prototype.upload = function (i) {
            !this.uploaded &&
              this.hasDebugData() &&
              (this.textCollisionBox.upload(i),
              this.iconCollisionBox.upload(i)),
              this.text.upload(
                i,
                this.sortFeaturesByY,
                !this.uploaded,
                this.text.programConfigurations.needsUpload
              ),
              this.icon.upload(
                i,
                this.sortFeaturesByY,
                !this.uploaded,
                this.icon.programConfigurations.needsUpload
              ),
              (this.uploaded = !0);
          }),
          (_n.prototype.destroyDebugData = function () {
            this.textCollisionBox.destroy(), this.iconCollisionBox.destroy();
          }),
          (_n.prototype.destroy = function () {
            this.text.destroy(),
              this.icon.destroy(),
              this.hasDebugData() && this.destroyDebugData();
          }),
          (_n.prototype.addToLineVertexArray = function (i, s) {
            var c = this.lineVertexArray.length;
            if (i.segment !== void 0) {
              for (
                var m = i.dist(s[i.segment + 1]),
                  _ = i.dist(s[i.segment]),
                  y = {},
                  A = i.segment + 1;
                A < s.length;
                A++
              )
                (y[A] = {
                  x: s[A].x,
                  y: s[A].y,
                  tileUnitDistanceFromAnchor: m,
                }),
                  A < s.length - 1 && (m += s[A + 1].dist(s[A]));
              for (var C = i.segment || 0; C >= 0; C--)
                (y[C] = {
                  x: s[C].x,
                  y: s[C].y,
                  tileUnitDistanceFromAnchor: _,
                }),
                  C > 0 && (_ += s[C - 1].dist(s[C]));
              for (var P = 0; P < s.length; P++) {
                var O = y[P];
                this.lineVertexArray.emplaceBack(
                  O.x,
                  O.y,
                  O.tileUnitDistanceFromAnchor
                );
              }
            }
            return {
              lineStartIndex: c,
              lineLength: this.lineVertexArray.length - c,
            };
          }),
          (_n.prototype.addSymbols = function (
            i,
            s,
            c,
            m,
            _,
            y,
            A,
            C,
            P,
            O,
            k,
            U
          ) {
            for (
              var W = i.indexArray,
                $ = i.layoutVertexArray,
                he = i.segments.prepareSegment(
                  4 * s.length,
                  $,
                  W,
                  this.canOverlap ? y.sortKey : void 0
                ),
                me = this.glyphOffsetArray.length,
                Ie = he.vertexLength,
                Te =
                  this.allowVerticalPlacement && A === kn.vertical
                    ? Math.PI / 2
                    : 0,
                je = y.text && y.text.sections,
                Ze = 0;
              Ze < s.length;
              Ze++
            ) {
              var at = s[Ze],
                lt = at.tl,
                yt = at.tr,
                zt = at.bl,
                Qt = at.br,
                Mn = at.tex,
                dn = at.pixelOffsetTL,
                Un = at.pixelOffsetBR,
                fn = at.minFontScaleX,
                Ar = at.minFontScaleY,
                qn = at.glyphOffset,
                Tn = at.isSDF,
                Mr = at.sectionIndex,
                pr = he.vertexLength,
                Hr = qn[1];
              ft(
                $,
                C.x,
                C.y,
                lt.x,
                Hr + lt.y,
                Mn.x,
                Mn.y,
                c,
                Tn,
                dn.x,
                dn.y,
                fn,
                Ar
              ),
                ft(
                  $,
                  C.x,
                  C.y,
                  yt.x,
                  Hr + yt.y,
                  Mn.x + Mn.w,
                  Mn.y,
                  c,
                  Tn,
                  Un.x,
                  dn.y,
                  fn,
                  Ar
                ),
                ft(
                  $,
                  C.x,
                  C.y,
                  zt.x,
                  Hr + zt.y,
                  Mn.x,
                  Mn.y + Mn.h,
                  c,
                  Tn,
                  dn.x,
                  Un.y,
                  fn,
                  Ar
                ),
                ft(
                  $,
                  C.x,
                  C.y,
                  Qt.x,
                  Hr + Qt.y,
                  Mn.x + Mn.w,
                  Mn.y + Mn.h,
                  c,
                  Tn,
                  Un.x,
                  Un.y,
                  fn,
                  Ar
                ),
                Ct(i.dynamicLayoutVertexArray, C, Te),
                W.emplaceBack(pr, pr + 1, pr + 2),
                W.emplaceBack(pr + 1, pr + 2, pr + 3),
                (he.vertexLength += 4),
                (he.primitiveLength += 2),
                this.glyphOffsetArray.emplaceBack(qn[0]),
                (Ze !== s.length - 1 && Mr === s[Ze + 1].sectionIndex) ||
                  i.programConfigurations.populatePaintArrays(
                    $.length,
                    y,
                    y.index,
                    {},
                    U,
                    je && je[Mr]
                  );
            }
            i.placedSymbolArray.emplaceBack(
              C.x,
              C.y,
              me,
              this.glyphOffsetArray.length - me,
              Ie,
              P,
              O,
              C.segment,
              c ? c[0] : 0,
              c ? c[1] : 0,
              m[0],
              m[1],
              A,
              0,
              !1,
              0,
              k
            );
          }),
          (_n.prototype._addCollisionDebugVertex = function (i, s, c, m, _, y) {
            return (
              s.emplaceBack(0, 0),
              i.emplaceBack(c.x, c.y, m, _, Math.round(y.x), Math.round(y.y))
            );
          }),
          (_n.prototype.addCollisionDebugVertices = function (
            i,
            s,
            c,
            m,
            _,
            y,
            A
          ) {
            var C = _.segments.prepareSegment(
                4,
                _.layoutVertexArray,
                _.indexArray
              ),
              P = C.vertexLength,
              O = _.layoutVertexArray,
              k = _.collisionVertexArray,
              U = A.anchorX,
              W = A.anchorY;
            this._addCollisionDebugVertex(O, k, y, U, W, new E(i, s)),
              this._addCollisionDebugVertex(O, k, y, U, W, new E(c, s)),
              this._addCollisionDebugVertex(O, k, y, U, W, new E(c, m)),
              this._addCollisionDebugVertex(O, k, y, U, W, new E(i, m)),
              (C.vertexLength += 4);
            var $ = _.indexArray;
            $.emplaceBack(P, P + 1),
              $.emplaceBack(P + 1, P + 2),
              $.emplaceBack(P + 2, P + 3),
              $.emplaceBack(P + 3, P),
              (C.primitiveLength += 4);
          }),
          (_n.prototype.addDebugCollisionBoxes = function (i, s, c, m) {
            for (var _ = i; _ < s; _++) {
              var y = this.collisionBoxArray.get(_);
              this.addCollisionDebugVertices(
                y.x1,
                y.y1,
                y.x2,
                y.y2,
                m ? this.textCollisionBox : this.iconCollisionBox,
                y.anchorPoint,
                c
              );
            }
          }),
          (_n.prototype.generateCollisionDebugBuffers = function () {
            this.hasDebugData() && this.destroyDebugData(),
              (this.textCollisionBox = new wn(Tc, lm.members, ku)),
              (this.iconCollisionBox = new wn(Tc, lm.members, ku));
            for (var i = 0; i < this.symbolInstances.length; i++) {
              var s = this.symbolInstances.get(i);
              this.addDebugCollisionBoxes(
                s.textBoxStartIndex,
                s.textBoxEndIndex,
                s,
                !0
              ),
                this.addDebugCollisionBoxes(
                  s.verticalTextBoxStartIndex,
                  s.verticalTextBoxEndIndex,
                  s,
                  !0
                ),
                this.addDebugCollisionBoxes(
                  s.iconBoxStartIndex,
                  s.iconBoxEndIndex,
                  s,
                  !1
                ),
                this.addDebugCollisionBoxes(
                  s.verticalIconBoxStartIndex,
                  s.verticalIconBoxEndIndex,
                  s,
                  !1
                );
            }
          }),
          (_n.prototype._deserializeCollisionBoxesForSymbol = function (
            i,
            s,
            c,
            m,
            _,
            y,
            A,
            C,
            P
          ) {
            for (var O = {}, k = s; k < c; k++) {
              var U = i.get(k);
              (O.textBox = {
                x1: U.x1,
                y1: U.y1,
                x2: U.x2,
                y2: U.y2,
                anchorPointX: U.anchorPointX,
                anchorPointY: U.anchorPointY,
              }),
                (O.textFeatureIndex = U.featureIndex);
              break;
            }
            for (var W = m; W < _; W++) {
              var $ = i.get(W);
              (O.verticalTextBox = {
                x1: $.x1,
                y1: $.y1,
                x2: $.x2,
                y2: $.y2,
                anchorPointX: $.anchorPointX,
                anchorPointY: $.anchorPointY,
              }),
                (O.verticalTextFeatureIndex = $.featureIndex);
              break;
            }
            for (var he = y; he < A; he++) {
              var me = i.get(he);
              (O.iconBox = {
                x1: me.x1,
                y1: me.y1,
                x2: me.x2,
                y2: me.y2,
                anchorPointX: me.anchorPointX,
                anchorPointY: me.anchorPointY,
              }),
                (O.iconFeatureIndex = me.featureIndex);
              break;
            }
            for (var Ie = C; Ie < P; Ie++) {
              var Te = i.get(Ie);
              (O.verticalIconBox = {
                x1: Te.x1,
                y1: Te.y1,
                x2: Te.x2,
                y2: Te.y2,
                anchorPointX: Te.anchorPointX,
                anchorPointY: Te.anchorPointY,
              }),
                (O.verticalIconFeatureIndex = Te.featureIndex);
              break;
            }
            return O;
          }),
          (_n.prototype.deserializeCollisionBoxes = function (i) {
            this.collisionArrays = [];
            for (var s = 0; s < this.symbolInstances.length; s++) {
              var c = this.symbolInstances.get(s);
              this.collisionArrays.push(
                this._deserializeCollisionBoxesForSymbol(
                  i,
                  c.textBoxStartIndex,
                  c.textBoxEndIndex,
                  c.verticalTextBoxStartIndex,
                  c.verticalTextBoxEndIndex,
                  c.iconBoxStartIndex,
                  c.iconBoxEndIndex,
                  c.verticalIconBoxStartIndex,
                  c.verticalIconBoxEndIndex
                )
              );
            }
          }),
          (_n.prototype.hasTextData = function () {
            return this.text.segments.get().length > 0;
          }),
          (_n.prototype.hasIconData = function () {
            return this.icon.segments.get().length > 0;
          }),
          (_n.prototype.hasDebugData = function () {
            return this.textCollisionBox && this.iconCollisionBox;
          }),
          (_n.prototype.hasTextCollisionBoxData = function () {
            return (
              this.hasDebugData() &&
              this.textCollisionBox.segments.get().length > 0
            );
          }),
          (_n.prototype.hasIconCollisionBoxData = function () {
            return (
              this.hasDebugData() &&
              this.iconCollisionBox.segments.get().length > 0
            );
          }),
          (_n.prototype.addIndicesForPlacedSymbol = function (i, s) {
            for (
              var c = i.placedSymbolArray.get(s),
                m = c.vertexStartIndex + 4 * c.numGlyphs,
                _ = c.vertexStartIndex;
              _ < m;
              _ += 4
            )
              i.indexArray.emplaceBack(_, _ + 1, _ + 2),
                i.indexArray.emplaceBack(_ + 1, _ + 2, _ + 3);
          }),
          (_n.prototype.getSortedSymbolIndexes = function (i) {
            if (this.sortedAngle === i && this.symbolInstanceIndexes !== void 0)
              return this.symbolInstanceIndexes;
            for (
              var s = Math.sin(i),
                c = Math.cos(i),
                m = [],
                _ = [],
                y = [],
                A = 0;
              A < this.symbolInstances.length;
              ++A
            ) {
              y.push(A);
              var C = this.symbolInstances.get(A);
              m.push(0 | Math.round(s * C.anchorX + c * C.anchorY)),
                _.push(C.featureIndex);
            }
            return (
              y.sort(function (P, O) {
                return m[P] - m[O] || _[O] - _[P];
              }),
              y
            );
          }),
          (_n.prototype.addToSortKeyRanges = function (i, s) {
            var c = this.sortKeyRanges[this.sortKeyRanges.length - 1];
            c && c.sortKey === s
              ? (c.symbolInstanceEnd = i + 1)
              : this.sortKeyRanges.push({
                  sortKey: s,
                  symbolInstanceStart: i,
                  symbolInstanceEnd: i + 1,
                });
          }),
          (_n.prototype.sortFeatures = function (i) {
            var s = this;
            if (
              this.sortFeaturesByY &&
              this.sortedAngle !== i &&
              !(
                this.text.segments.get().length > 1 ||
                this.icon.segments.get().length > 1
              )
            ) {
              (this.symbolInstanceIndexes = this.getSortedSymbolIndexes(i)),
                (this.sortedAngle = i),
                this.text.indexArray.clear(),
                this.icon.indexArray.clear(),
                (this.featureSortOrder = []);
              for (
                var c = 0, m = this.symbolInstanceIndexes;
                c < m.length;
                c += 1
              ) {
                var _ = this.symbolInstances.get(m[c]);
                this.featureSortOrder.push(_.featureIndex),
                  [
                    _.rightJustifiedTextSymbolIndex,
                    _.centerJustifiedTextSymbolIndex,
                    _.leftJustifiedTextSymbolIndex,
                  ].forEach(function (y, A, C) {
                    y >= 0 &&
                      C.indexOf(y) === A &&
                      s.addIndicesForPlacedSymbol(s.text, y);
                  }),
                  _.verticalPlacedTextSymbolIndex >= 0 &&
                    this.addIndicesForPlacedSymbol(
                      this.text,
                      _.verticalPlacedTextSymbolIndex
                    ),
                  _.placedIconSymbolIndex >= 0 &&
                    this.addIndicesForPlacedSymbol(
                      this.icon,
                      _.placedIconSymbolIndex
                    ),
                  _.verticalPlacedIconSymbolIndex >= 0 &&
                    this.addIndicesForPlacedSymbol(
                      this.icon,
                      _.verticalPlacedIconSymbolIndex
                    );
              }
              this.text.indexBuffer &&
                this.text.indexBuffer.updateData(this.text.indexArray),
                this.icon.indexBuffer &&
                  this.icon.indexBuffer.updateData(this.icon.indexArray);
            }
          }),
          vn("SymbolBucket", _n, {
            omit: ["layers", "collisionBoxArray", "features", "compareText"],
          }),
          (_n.MAX_GLYPHS = 65535),
          (_n.addDynamicAttributes = Ct);
        var En = new Ni({
            "symbol-placement": new Rn(te.layout_symbol["symbol-placement"]),
            "symbol-spacing": new Rn(te.layout_symbol["symbol-spacing"]),
            "symbol-avoid-edges": new Rn(
              te.layout_symbol["symbol-avoid-edges"]
            ),
            "symbol-sort-key": new bn(te.layout_symbol["symbol-sort-key"]),
            "symbol-z-order": new Rn(te.layout_symbol["symbol-z-order"]),
            "icon-allow-overlap": new Rn(
              te.layout_symbol["icon-allow-overlap"]
            ),
            "icon-ignore-placement": new Rn(
              te.layout_symbol["icon-ignore-placement"]
            ),
            "icon-optional": new Rn(te.layout_symbol["icon-optional"]),
            "icon-rotation-alignment": new Rn(
              te.layout_symbol["icon-rotation-alignment"]
            ),
            "icon-size": new bn(te.layout_symbol["icon-size"]),
            "icon-text-fit": new Rn(te.layout_symbol["icon-text-fit"]),
            "icon-text-fit-padding": new Rn(
              te.layout_symbol["icon-text-fit-padding"]
            ),
            "icon-image": new bn(te.layout_symbol["icon-image"]),
            "icon-rotate": new bn(te.layout_symbol["icon-rotate"]),
            "icon-padding": new Rn(te.layout_symbol["icon-padding"]),
            "icon-keep-upright": new Rn(te.layout_symbol["icon-keep-upright"]),
            "icon-offset": new bn(te.layout_symbol["icon-offset"]),
            "icon-anchor": new bn(te.layout_symbol["icon-anchor"]),
            "icon-pitch-alignment": new Rn(
              te.layout_symbol["icon-pitch-alignment"]
            ),
            "text-pitch-alignment": new Rn(
              te.layout_symbol["text-pitch-alignment"]
            ),
            "text-rotation-alignment": new Rn(
              te.layout_symbol["text-rotation-alignment"]
            ),
            "text-field": new bn(te.layout_symbol["text-field"]),
            "text-font": new bn(te.layout_symbol["text-font"]),
            "text-size": new bn(te.layout_symbol["text-size"]),
            "text-max-width": new bn(te.layout_symbol["text-max-width"]),
            "text-line-height": new Rn(te.layout_symbol["text-line-height"]),
            "text-letter-spacing": new bn(
              te.layout_symbol["text-letter-spacing"]
            ),
            "text-justify": new bn(te.layout_symbol["text-justify"]),
            "text-radial-offset": new bn(
              te.layout_symbol["text-radial-offset"]
            ),
            "text-variable-anchor": new Rn(
              te.layout_symbol["text-variable-anchor"]
            ),
            "text-anchor": new bn(te.layout_symbol["text-anchor"]),
            "text-max-angle": new Rn(te.layout_symbol["text-max-angle"]),
            "text-writing-mode": new Rn(te.layout_symbol["text-writing-mode"]),
            "text-rotate": new bn(te.layout_symbol["text-rotate"]),
            "text-padding": new Rn(te.layout_symbol["text-padding"]),
            "text-keep-upright": new Rn(te.layout_symbol["text-keep-upright"]),
            "text-transform": new bn(te.layout_symbol["text-transform"]),
            "text-offset": new bn(te.layout_symbol["text-offset"]),
            "text-allow-overlap": new Rn(
              te.layout_symbol["text-allow-overlap"]
            ),
            "text-ignore-placement": new Rn(
              te.layout_symbol["text-ignore-placement"]
            ),
            "text-optional": new Rn(te.layout_symbol["text-optional"]),
          }),
          Wn = {
            paint: new Ni({
              "icon-opacity": new bn(te.paint_symbol["icon-opacity"]),
              "icon-color": new bn(te.paint_symbol["icon-color"]),
              "icon-halo-color": new bn(te.paint_symbol["icon-halo-color"]),
              "icon-halo-width": new bn(te.paint_symbol["icon-halo-width"]),
              "icon-halo-blur": new bn(te.paint_symbol["icon-halo-blur"]),
              "icon-translate": new Rn(te.paint_symbol["icon-translate"]),
              "icon-translate-anchor": new Rn(
                te.paint_symbol["icon-translate-anchor"]
              ),
              "text-opacity": new bn(te.paint_symbol["text-opacity"]),
              "text-color": new bn(te.paint_symbol["text-color"], {
                runtimeType: qt,
                getOverride: function (i) {
                  return i.textColor;
                },
                hasOverride: function (i) {
                  return !!i.textColor;
                },
              }),
              "text-halo-color": new bn(te.paint_symbol["text-halo-color"]),
              "text-halo-width": new bn(te.paint_symbol["text-halo-width"]),
              "text-halo-blur": new bn(te.paint_symbol["text-halo-blur"]),
              "text-translate": new Rn(te.paint_symbol["text-translate"]),
              "text-translate-anchor": new Rn(
                te.paint_symbol["text-translate-anchor"]
              ),
            }),
            layout: En,
          },
          Jn = function (i) {
            (this.type = i.property.overrides
              ? i.property.overrides.runtimeType
              : mn),
              (this.defaultValue = i);
          };
        (Jn.prototype.evaluate = function (i) {
          if (i.formattedSection) {
            var s = this.defaultValue.property.overrides;
            if (s && s.hasOverride(i.formattedSection))
              return s.getOverride(i.formattedSection);
          }
          return i.feature && i.featureState
            ? this.defaultValue.evaluate(i.feature, i.featureState)
            : this.defaultValue.property.specification.default;
        }),
          (Jn.prototype.eachChild = function (i) {
            this.defaultValue.isConstant() ||
              i(this.defaultValue.value._styleExpression.expression);
          }),
          (Jn.prototype.outputDefined = function () {
            return !1;
          }),
          (Jn.prototype.serialize = function () {
            return null;
          }),
          vn("FormatSectionOverride", Jn, { omit: ["defaultValue"] });
        var $r = (function (i) {
            function s(c) {
              i.call(this, c, Wn);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.recalculate = function (c, m) {
                if (
                  (i.prototype.recalculate.call(this, c, m),
                  this.layout.get("icon-rotation-alignment") === "auto" &&
                    (this.layout._values["icon-rotation-alignment"] =
                      this.layout.get("symbol-placement") !== "point"
                        ? "map"
                        : "viewport"),
                  this.layout.get("text-rotation-alignment") === "auto" &&
                    (this.layout._values["text-rotation-alignment"] =
                      this.layout.get("symbol-placement") !== "point"
                        ? "map"
                        : "viewport"),
                  this.layout.get("text-pitch-alignment") === "auto" &&
                    (this.layout._values["text-pitch-alignment"] =
                      this.layout.get("text-rotation-alignment")),
                  this.layout.get("icon-pitch-alignment") === "auto" &&
                    (this.layout._values["icon-pitch-alignment"] =
                      this.layout.get("icon-rotation-alignment")),
                  this.layout.get("symbol-placement") === "point")
                ) {
                  var _ = this.layout.get("text-writing-mode");
                  if (_) {
                    for (var y = [], A = 0, C = _; A < C.length; A += 1) {
                      var P = C[A];
                      y.indexOf(P) < 0 && y.push(P);
                    }
                    this.layout._values["text-writing-mode"] = y;
                  } else
                    this.layout._values["text-writing-mode"] = ["horizontal"];
                }
                this._setPaintOverrides();
              }),
              (s.prototype.getValueAndResolveTokens = function (c, m, _, y) {
                var A = this.layout.get(c).evaluate(m, {}, _, y),
                  C = this._unevaluatedLayout._values[c];
                return C.isDataDriven() || _c(C.value) || !A
                  ? A
                  : (function (P, O) {
                      return O.replace(/{([^{}]+)}/g, function (k, U) {
                        return U in P ? String(P[U]) : "";
                      });
                    })(m.properties, A);
              }),
              (s.prototype.createBucket = function (c) {
                return new _n(c);
              }),
              (s.prototype.queryRadius = function () {
                return 0;
              }),
              (s.prototype.queryIntersectsFeature = function () {
                return !1;
              }),
              (s.prototype._setPaintOverrides = function () {
                for (
                  var c = 0, m = Wn.paint.overridableProperties;
                  c < m.length;
                  c += 1
                ) {
                  var _ = m[c];
                  if (s.hasPaintOverride(this.layout, _)) {
                    var y,
                      A = this.paint.get(_),
                      C = new Jn(A),
                      P = new zl(C, A.property.specification);
                    (y =
                      A.value.kind === "constant" || A.value.kind === "source"
                        ? new yc("source", P)
                        : new xc(
                            "composite",
                            P,
                            A.value.zoomStops,
                            A.value._interpolationType
                          )),
                      (this.paint._values[_] = new Ja(
                        A.property,
                        y,
                        A.parameters
                      ));
                  }
                }
              }),
              (s.prototype._handleOverridablePaintPropertyUpdate = function (
                c,
                m,
                _
              ) {
                return (
                  !(!this.layout || m.isDataDriven() || _.isDataDriven()) &&
                  s.hasPaintOverride(this.layout, c)
                );
              }),
              (s.hasPaintOverride = function (c, m) {
                var _ = c.get("text-field"),
                  y = Wn.paint.properties[m],
                  A = !1,
                  C = function (k) {
                    for (var U = 0, W = k; U < W.length; U += 1)
                      if (y.overrides && y.overrides.hasOverride(W[U]))
                        return void (A = !0);
                  };
                if (_.value.kind === "constant" && _.value.value instanceof ki)
                  C(_.value.value.sections);
                else if (_.value.kind === "source") {
                  var P = function (k) {
                      A ||
                        (k instanceof va && yi(k.value) === ti
                          ? C(k.value.sections)
                          : k instanceof lo
                          ? C(k.sections)
                          : k.eachChild(P));
                    },
                    O = _.value;
                  O._styleExpression && P(O._styleExpression.expression);
                }
                return A;
              }),
              s
            );
          })(ls),
          wa = {
            paint: new Ni({
              "background-color": new Rn(
                te.paint_background["background-color"]
              ),
              "background-pattern": new eo(
                te.paint_background["background-pattern"]
              ),
              "background-opacity": new Rn(
                te.paint_background["background-opacity"]
              ),
            }),
          },
          Sl = (function (i) {
            function s(c) {
              i.call(this, c, wa);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              s
            );
          })(ls),
          tf = {
            paint: new Ni({
              "raster-opacity": new Rn(te.paint_raster["raster-opacity"]),
              "raster-hue-rotate": new Rn(te.paint_raster["raster-hue-rotate"]),
              "raster-brightness-min": new Rn(
                te.paint_raster["raster-brightness-min"]
              ),
              "raster-brightness-max": new Rn(
                te.paint_raster["raster-brightness-max"]
              ),
              "raster-saturation": new Rn(te.paint_raster["raster-saturation"]),
              "raster-contrast": new Rn(te.paint_raster["raster-contrast"]),
              "raster-resampling": new Rn(te.paint_raster["raster-resampling"]),
              "raster-fade-duration": new Rn(
                te.paint_raster["raster-fade-duration"]
              ),
            }),
          },
          Zs = (function (i) {
            function s(c) {
              i.call(this, c, tf);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              s
            );
          })(ls),
          cm = (function (i) {
            function s(c) {
              i.call(this, c, {}), (this.implementation = c);
            }
            return (
              i && (s.__proto__ = i),
              ((s.prototype = Object.create(i && i.prototype)).constructor = s),
              (s.prototype.is3D = function () {
                return this.implementation.renderingMode === "3d";
              }),
              (s.prototype.hasOffscreenPass = function () {
                return this.implementation.prerender !== void 0;
              }),
              (s.prototype.recalculate = function () {}),
              (s.prototype.updateTransitions = function () {}),
              (s.prototype.hasTransition = function () {}),
              (s.prototype.serialize = function () {}),
              (s.prototype.onAdd = function (c) {
                this.implementation.onAdd &&
                  this.implementation.onAdd(c, c.painter.context.gl);
              }),
              (s.prototype.onRemove = function (c) {
                this.implementation.onRemove &&
                  this.implementation.onRemove(c, c.painter.context.gl);
              }),
              s
            );
          })(ls),
          Mc = {
            circle: I0,
            heatmap: Pd,
            hillshade: Iv,
            fill: K1,
            "fill-extrusion": tm,
            line: om,
            symbol: $r,
            background: Sl,
            raster: Zs,
          },
          nf = T.HTMLImageElement,
          _y = T.HTMLCanvasElement,
          yy = T.HTMLVideoElement,
          xy = T.ImageData,
          um = T.ImageBitmap,
          O0 = function (i, s, c, m) {
            (this.context = i),
              (this.format = c),
              (this.texture = i.gl.createTexture()),
              this.update(s, m);
          };
        (O0.prototype.update = function (i, s, c) {
          var m = i.width,
            _ = i.height,
            y = !((this.size && this.size[0] === m && this.size[1] === _) || c),
            A = this.context,
            C = A.gl;
          if (
            ((this.useMipmap = !!(s && s.useMipmap)),
            C.bindTexture(C.TEXTURE_2D, this.texture),
            A.pixelStoreUnpackFlipY.set(!1),
            A.pixelStoreUnpack.set(1),
            A.pixelStoreUnpackPremultiplyAlpha.set(
              this.format === C.RGBA && (!s || s.premultiply !== !1)
            ),
            y)
          )
            (this.size = [m, _]),
              i instanceof nf ||
              i instanceof _y ||
              i instanceof yy ||
              i instanceof xy ||
              (um && i instanceof um)
                ? C.texImage2D(
                    C.TEXTURE_2D,
                    0,
                    this.format,
                    this.format,
                    C.UNSIGNED_BYTE,
                    i
                  )
                : C.texImage2D(
                    C.TEXTURE_2D,
                    0,
                    this.format,
                    m,
                    _,
                    0,
                    this.format,
                    C.UNSIGNED_BYTE,
                    i.data
                  );
          else {
            var P = c || { x: 0, y: 0 },
              O = P.x,
              k = P.y;
            i instanceof nf ||
            i instanceof _y ||
            i instanceof yy ||
            i instanceof xy ||
            (um && i instanceof um)
              ? C.texSubImage2D(
                  C.TEXTURE_2D,
                  0,
                  O,
                  k,
                  C.RGBA,
                  C.UNSIGNED_BYTE,
                  i
                )
              : C.texSubImage2D(
                  C.TEXTURE_2D,
                  0,
                  O,
                  k,
                  m,
                  _,
                  C.RGBA,
                  C.UNSIGNED_BYTE,
                  i.data
                );
          }
          this.useMipmap &&
            this.isSizePowerOfTwo() &&
            C.generateMipmap(C.TEXTURE_2D);
        }),
          (O0.prototype.bind = function (i, s, c) {
            var m = this.context.gl;
            m.bindTexture(m.TEXTURE_2D, this.texture),
              c !== m.LINEAR_MIPMAP_NEAREST ||
                this.isSizePowerOfTwo() ||
                (c = m.LINEAR),
              i !== this.filter &&
                (m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MAG_FILTER, i),
                m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MIN_FILTER, c || i),
                (this.filter = i)),
              s !== this.wrap &&
                (m.texParameteri(m.TEXTURE_2D, m.TEXTURE_WRAP_S, s),
                m.texParameteri(m.TEXTURE_2D, m.TEXTURE_WRAP_T, s),
                (this.wrap = s));
          }),
          (O0.prototype.isSizePowerOfTwo = function () {
            return (
              this.size[0] === this.size[1] &&
              (Math.log(this.size[0]) / Math.LN2) % 1 == 0
            );
          }),
          (O0.prototype.destroy = function () {
            this.context.gl.deleteTexture(this.texture), (this.texture = null);
          });
        var Xv = function (i) {
          var s = this;
          (this._callback = i),
            (this._triggered = !1),
            typeof MessageChannel < "u" &&
              ((this._channel = new MessageChannel()),
              (this._channel.port2.onmessage = function () {
                (s._triggered = !1), s._callback();
              }));
        };
        (Xv.prototype.trigger = function () {
          var i = this;
          this._triggered ||
            ((this._triggered = !0),
            this._channel
              ? this._channel.port1.postMessage(!0)
              : setTimeout(function () {
                  (i._triggered = !1), i._callback();
                }, 0));
        }),
          (Xv.prototype.remove = function () {
            delete this._channel, (this._callback = function () {});
          });
        var Oh = function (i, s, c) {
          (this.target = i),
            (this.parent = s),
            (this.mapId = c),
            (this.callbacks = {}),
            (this.tasks = {}),
            (this.taskQueue = []),
            (this.cancelCallbacks = {}),
            ue(["receive", "process"], this),
            (this.invoker = new Xv(this.process)),
            this.target.addEventListener("message", this.receive, !1),
            (this.globalScope = Yt() ? i : T);
        };
        function by(i, s, c) {
          var m = (2 * Math.PI * 6378137) / 256 / Math.pow(2, c);
          return [
            i * m - (2 * Math.PI * 6378137) / 2,
            s * m - (2 * Math.PI * 6378137) / 2,
          ];
        }
        (Oh.prototype.send = function (i, s, c, m, _) {
          var y = this;
          _ === void 0 && (_ = !1);
          var A = Math.round(1e18 * Math.random())
            .toString(36)
            .substring(0, 10);
          c && (this.callbacks[A] = c);
          var C = gn(this.globalScope) ? void 0 : [];
          return (
            this.target.postMessage(
              {
                id: A,
                type: i,
                hasCallback: !!c,
                targetMapId: m,
                mustQueue: _,
                sourceMapId: this.mapId,
                data: co(s, C),
              },
              C
            ),
            {
              cancel: function () {
                c && delete y.callbacks[A],
                  y.target.postMessage({
                    id: A,
                    type: "<cancel>",
                    targetMapId: m,
                    sourceMapId: y.mapId,
                  });
              },
            }
          );
        }),
          (Oh.prototype.receive = function (i) {
            var s = i.data,
              c = s.id;
            if (c && (!s.targetMapId || this.mapId === s.targetMapId))
              if (s.type === "<cancel>") {
                delete this.tasks[c];
                var m = this.cancelCallbacks[c];
                delete this.cancelCallbacks[c], m && m();
              } else
                Yt() || s.mustQueue
                  ? ((this.tasks[c] = s),
                    this.taskQueue.push(c),
                    this.invoker.trigger())
                  : this.processTask(c, s);
          }),
          (Oh.prototype.process = function () {
            if (this.taskQueue.length) {
              var i = this.taskQueue.shift(),
                s = this.tasks[i];
              delete this.tasks[i],
                this.taskQueue.length && this.invoker.trigger(),
                s && this.processTask(i, s);
            }
          }),
          (Oh.prototype.processTask = function (i, s) {
            var c = this;
            if (s.type === "<response>") {
              var m = this.callbacks[i];
              delete this.callbacks[i],
                m && (s.error ? m(si(s.error)) : m(null, si(s.data)));
            } else {
              var _ = !1,
                y = gn(this.globalScope) ? void 0 : [],
                A = s.hasCallback
                  ? function (k, U) {
                      (_ = !0),
                        delete c.cancelCallbacks[i],
                        c.target.postMessage(
                          {
                            id: i,
                            type: "<response>",
                            sourceMapId: c.mapId,
                            error: k ? co(k) : null,
                            data: co(U, y),
                          },
                          y
                        );
                    }
                  : function (k) {
                      _ = !0;
                    },
                C = null,
                P = si(s.data);
              if (this.parent[s.type])
                C = this.parent[s.type](s.sourceMapId, P, A);
              else if (this.parent.getWorkerSource) {
                var O = s.type.split(".");
                C = this.parent
                  .getWorkerSource(s.sourceMapId, O[0], P.source)
                  [O[1]](P, A);
              } else A(new Error("Could not find function " + s.type));
              !_ && C && C.cancel && (this.cancelCallbacks[i] = C.cancel);
            }
          }),
          (Oh.prototype.remove = function () {
            this.invoker.remove(),
              this.target.removeEventListener("message", this.receive, !1);
          });
        var Ua = function (i, s) {
          i &&
            (s
              ? this.setSouthWest(i).setNorthEast(s)
              : i.length === 4
              ? this.setSouthWest([i[0], i[1]]).setNorthEast([i[2], i[3]])
              : this.setSouthWest(i[0]).setNorthEast(i[1]));
        };
        (Ua.prototype.setNorthEast = function (i) {
          return (
            (this._ne = i instanceof Oi ? new Oi(i.lng, i.lat) : Oi.convert(i)),
            this
          );
        }),
          (Ua.prototype.setSouthWest = function (i) {
            return (
              (this._sw =
                i instanceof Oi ? new Oi(i.lng, i.lat) : Oi.convert(i)),
              this
            );
          }),
          (Ua.prototype.extend = function (i) {
            var s,
              c,
              m = this._sw,
              _ = this._ne;
            if (i instanceof Oi) (s = i), (c = i);
            else {
              if (!(i instanceof Ua))
                return Array.isArray(i)
                  ? i.length === 4 || i.every(Array.isArray)
                    ? this.extend(Ua.convert(i))
                    : this.extend(Oi.convert(i))
                  : this;
              if (((c = i._ne), !(s = i._sw) || !c)) return this;
            }
            return (
              m || _
                ? ((m.lng = Math.min(s.lng, m.lng)),
                  (m.lat = Math.min(s.lat, m.lat)),
                  (_.lng = Math.max(c.lng, _.lng)),
                  (_.lat = Math.max(c.lat, _.lat)))
                : ((this._sw = new Oi(s.lng, s.lat)),
                  (this._ne = new Oi(c.lng, c.lat))),
              this
            );
          }),
          (Ua.prototype.getCenter = function () {
            return new Oi(
              (this._sw.lng + this._ne.lng) / 2,
              (this._sw.lat + this._ne.lat) / 2
            );
          }),
          (Ua.prototype.getSouthWest = function () {
            return this._sw;
          }),
          (Ua.prototype.getNorthEast = function () {
            return this._ne;
          }),
          (Ua.prototype.getNorthWest = function () {
            return new Oi(this.getWest(), this.getNorth());
          }),
          (Ua.prototype.getSouthEast = function () {
            return new Oi(this.getEast(), this.getSouth());
          }),
          (Ua.prototype.getWest = function () {
            return this._sw.lng;
          }),
          (Ua.prototype.getSouth = function () {
            return this._sw.lat;
          }),
          (Ua.prototype.getEast = function () {
            return this._ne.lng;
          }),
          (Ua.prototype.getNorth = function () {
            return this._ne.lat;
          }),
          (Ua.prototype.toArray = function () {
            return [this._sw.toArray(), this._ne.toArray()];
          }),
          (Ua.prototype.toString = function () {
            return (
              "LngLatBounds(" +
              this._sw.toString() +
              ", " +
              this._ne.toString() +
              ")"
            );
          }),
          (Ua.prototype.isEmpty = function () {
            return !(this._sw && this._ne);
          }),
          (Ua.prototype.contains = function (i) {
            var s = Oi.convert(i),
              c = s.lng,
              m = s.lat,
              _ = this._sw.lng <= c && c <= this._ne.lng;
            return (
              this._sw.lng > this._ne.lng &&
                (_ = this._sw.lng >= c && c >= this._ne.lng),
              this._sw.lat <= m && m <= this._ne.lat && _
            );
          }),
          (Ua.convert = function (i) {
            return !i || i instanceof Ua ? i : new Ua(i);
          });
        var Oi = function (i, s) {
          if (isNaN(i) || isNaN(s))
            throw new Error("Invalid LngLat object: (" + i + ", " + s + ")");
          if (
            ((this.lng = +i), (this.lat = +s), this.lat > 90 || this.lat < -90)
          )
            throw new Error(
              "Invalid LngLat latitude value: must be between -90 and 90"
            );
        };
        (Oi.prototype.wrap = function () {
          return new Oi(X(this.lng, -180, 180), this.lat);
        }),
          (Oi.prototype.toArray = function () {
            return [this.lng, this.lat];
          }),
          (Oi.prototype.toString = function () {
            return "LngLat(" + this.lng + ", " + this.lat + ")";
          }),
          (Oi.prototype.distanceTo = function (i) {
            var s = Math.PI / 180,
              c = this.lat * s,
              m = i.lat * s,
              _ =
                Math.sin(c) * Math.sin(m) +
                Math.cos(c) * Math.cos(m) * Math.cos((i.lng - this.lng) * s);
            return 63710088e-1 * Math.acos(Math.min(_, 1));
          }),
          (Oi.prototype.toBounds = function (i) {
            i === void 0 && (i = 0);
            var s = (360 * i) / 40075017,
              c = s / Math.cos((Math.PI / 180) * this.lat);
            return new Ua(
              new Oi(this.lng - c, this.lat - s),
              new Oi(this.lng + c, this.lat + s)
            );
          }),
          (Oi.convert = function (i) {
            if (i instanceof Oi) return i;
            if (Array.isArray(i) && (i.length === 2 || i.length === 3))
              return new Oi(Number(i[0]), Number(i[1]));
            if (!Array.isArray(i) && typeof i == "object" && i !== null)
              return new Oi(Number("lng" in i ? i.lng : i.lon), Number(i.lat));
            throw new Error(
              "`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]"
            );
          });
        var Ey = 2 * Math.PI * 63710088e-1;
        function Ay(i) {
          return Ey * Math.cos((i * Math.PI) / 180);
        }
        function Ty(i) {
          return (180 + i) / 360;
        }
        function Sy(i) {
          return (
            (180 -
              (180 / Math.PI) *
                Math.log(Math.tan(Math.PI / 4 + (i * Math.PI) / 360))) /
            360
          );
        }
        function wy(i, s) {
          return i / Ay(s);
        }
        function Gv(i) {
          return (
            (360 / Math.PI) *
              Math.atan(Math.exp(((180 - 360 * i) * Math.PI) / 180)) -
            90
          );
        }
        var L0 = function (i, s, c) {
          c === void 0 && (c = 0), (this.x = +i), (this.y = +s), (this.z = +c);
        };
        (L0.fromLngLat = function (i, s) {
          s === void 0 && (s = 0);
          var c = Oi.convert(i);
          return new L0(Ty(c.lng), Sy(c.lat), wy(s, c.lat));
        }),
          (L0.prototype.toLngLat = function () {
            return new Oi(360 * this.x - 180, Gv(this.y));
          }),
          (L0.prototype.toAltitude = function () {
            return this.z * Ay(Gv(this.y));
          }),
          (L0.prototype.meterInMercatorCoordinateUnits = function () {
            return (
              (1 / Ey) * ((i = Gv(this.y)), 1 / Math.cos((i * Math.PI) / 180))
            );
            var i;
          });
        var D0 = function (i, s, c) {
          (this.z = i),
            (this.x = s),
            (this.y = c),
            (this.key = rf(0, i, i, s, c));
        };
        (D0.prototype.equals = function (i) {
          return this.z === i.z && this.x === i.x && this.y === i.y;
        }),
          (D0.prototype.url = function (i, s) {
            var c,
              m,
              _,
              y,
              A,
              C =
                ((m = this.y),
                (_ = this.z),
                (y = by(
                  256 * (c = this.x),
                  256 * (m = Math.pow(2, _) - m - 1),
                  _
                )),
                (A = by(256 * (c + 1), 256 * (m + 1), _)),
                y[0] + "," + y[1] + "," + A[0] + "," + A[1]),
              P = (function (O, k, U) {
                for (var W, $ = "", he = O; he > 0; he--)
                  $ += (k & (W = 1 << (he - 1)) ? 1 : 0) + (U & W ? 2 : 0);
                return $;
              })(this.z, this.x, this.y);
            return i[(this.x + this.y) % i.length]
              .replace(
                "{prefix}",
                (this.x % 16).toString(16) + (this.y % 16).toString(16)
              )
              .replace("{z}", String(this.z))
              .replace("{x}", String(this.x))
              .replace(
                "{y}",
                String(s === "tms" ? Math.pow(2, this.z) - this.y - 1 : this.y)
              )
              .replace("{quadkey}", P)
              .replace("{bbox-epsg-3857}", C);
          }),
          (D0.prototype.getTilePoint = function (i) {
            var s = Math.pow(2, this.z);
            return new E(8192 * (i.x * s - this.x), 8192 * (i.y * s - this.y));
          }),
          (D0.prototype.toString = function () {
            return this.z + "/" + this.x + "/" + this.y;
          });
        var Cy = function (i, s) {
            (this.wrap = i),
              (this.canonical = s),
              (this.key = rf(i, s.z, s.z, s.x, s.y));
          },
          za = function (i, s, c, m, _) {
            (this.overscaledZ = i),
              (this.wrap = s),
              (this.canonical = new D0(c, +m, +_)),
              (this.key = rf(s, i, c, m, _));
          };
        function rf(i, s, c, m, _) {
          (i *= 2) < 0 && (i = -1 * i - 1);
          var y = 1 << c;
          return (
            (y * y * i + y * _ + m).toString(36) +
            c.toString(36) +
            s.toString(36)
          );
        }
        (za.prototype.equals = function (i) {
          return (
            this.overscaledZ === i.overscaledZ &&
            this.wrap === i.wrap &&
            this.canonical.equals(i.canonical)
          );
        }),
          (za.prototype.scaledTo = function (i) {
            var s = this.canonical.z - i;
            return i > this.canonical.z
              ? new za(
                  i,
                  this.wrap,
                  this.canonical.z,
                  this.canonical.x,
                  this.canonical.y
                )
              : new za(
                  i,
                  this.wrap,
                  i,
                  this.canonical.x >> s,
                  this.canonical.y >> s
                );
          }),
          (za.prototype.calculateScaledKey = function (i, s) {
            var c = this.canonical.z - i;
            return i > this.canonical.z
              ? rf(
                  this.wrap * +s,
                  i,
                  this.canonical.z,
                  this.canonical.x,
                  this.canonical.y
                )
              : rf(
                  this.wrap * +s,
                  i,
                  i,
                  this.canonical.x >> c,
                  this.canonical.y >> c
                );
          }),
          (za.prototype.isChildOf = function (i) {
            if (i.wrap !== this.wrap) return !1;
            var s = this.canonical.z - i.canonical.z;
            return (
              i.overscaledZ === 0 ||
              (i.overscaledZ < this.overscaledZ &&
                i.canonical.x === this.canonical.x >> s &&
                i.canonical.y === this.canonical.y >> s)
            );
          }),
          (za.prototype.children = function (i) {
            if (this.overscaledZ >= i)
              return [
                new za(
                  this.overscaledZ + 1,
                  this.wrap,
                  this.canonical.z,
                  this.canonical.x,
                  this.canonical.y
                ),
              ];
            var s = this.canonical.z + 1,
              c = 2 * this.canonical.x,
              m = 2 * this.canonical.y;
            return [
              new za(s, this.wrap, s, c, m),
              new za(s, this.wrap, s, c + 1, m),
              new za(s, this.wrap, s, c, m + 1),
              new za(s, this.wrap, s, c + 1, m + 1),
            ];
          }),
          (za.prototype.isLessThan = function (i) {
            return (
              this.wrap < i.wrap ||
              (!(this.wrap > i.wrap) &&
                (this.overscaledZ < i.overscaledZ ||
                  (!(this.overscaledZ > i.overscaledZ) &&
                    (this.canonical.x < i.canonical.x ||
                      (!(this.canonical.x > i.canonical.x) &&
                        this.canonical.y < i.canonical.y)))))
            );
          }),
          (za.prototype.wrapped = function () {
            return new za(
              this.overscaledZ,
              0,
              this.canonical.z,
              this.canonical.x,
              this.canonical.y
            );
          }),
          (za.prototype.unwrapTo = function (i) {
            return new za(
              this.overscaledZ,
              i,
              this.canonical.z,
              this.canonical.x,
              this.canonical.y
            );
          }),
          (za.prototype.overscaleFactor = function () {
            return Math.pow(2, this.overscaledZ - this.canonical.z);
          }),
          (za.prototype.toUnwrapped = function () {
            return new Cy(this.wrap, this.canonical);
          }),
          (za.prototype.toString = function () {
            return (
              this.overscaledZ + "/" + this.canonical.x + "/" + this.canonical.y
            );
          }),
          (za.prototype.getTilePoint = function (i) {
            return this.canonical.getTilePoint(new L0(i.x - this.wrap, i.y));
          }),
          vn("CanonicalTileID", D0),
          vn("OverscaledTileID", za, { omit: ["posMatrix"] });
        var Zu = function (i, s, c) {
          if (((this.uid = i), s.height !== s.width))
            throw new RangeError("DEM tiles must be square");
          if (c && c !== "mapbox" && c !== "terrarium")
            return He(
              '"' +
                c +
                '" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'
            );
          this.stride = s.height;
          var m = (this.dim = s.height - 2);
          (this.data = new Uint32Array(s.data.buffer)),
            (this.encoding = c || "mapbox");
          for (var _ = 0; _ < m; _++)
            (this.data[this._idx(-1, _)] = this.data[this._idx(0, _)]),
              (this.data[this._idx(m, _)] = this.data[this._idx(m - 1, _)]),
              (this.data[this._idx(_, -1)] = this.data[this._idx(_, 0)]),
              (this.data[this._idx(_, m)] = this.data[this._idx(_, m - 1)]);
          (this.data[this._idx(-1, -1)] = this.data[this._idx(0, 0)]),
            (this.data[this._idx(m, -1)] = this.data[this._idx(m - 1, 0)]),
            (this.data[this._idx(-1, m)] = this.data[this._idx(0, m - 1)]),
            (this.data[this._idx(m, m)] = this.data[this._idx(m - 1, m - 1)]);
        };
        (Zu.prototype.get = function (i, s) {
          var c = new Uint8Array(this.data.buffer),
            m = 4 * this._idx(i, s);
          return (
            this.encoding === "terrarium"
              ? this._unpackTerrarium
              : this._unpackMapbox
          )(c[m], c[m + 1], c[m + 2]);
        }),
          (Zu.prototype.getUnpackVector = function () {
            return this.encoding === "terrarium"
              ? [256, 1, 1 / 256, 32768]
              : [6553.6, 25.6, 0.1, 1e4];
          }),
          (Zu.prototype._idx = function (i, s) {
            if (i < -1 || i >= this.dim + 1 || s < -1 || s >= this.dim + 1)
              throw new RangeError(
                "out of range source coordinates for DEM data"
              );
            return (s + 1) * this.stride + (i + 1);
          }),
          (Zu.prototype._unpackMapbox = function (i, s, c) {
            return (256 * i * 256 + 256 * s + c) / 10 - 1e4;
          }),
          (Zu.prototype._unpackTerrarium = function (i, s, c) {
            return 256 * i + s + c / 256 - 32768;
          }),
          (Zu.prototype.getPixels = function () {
            return new Ao(
              { width: this.stride, height: this.stride },
              new Uint8Array(this.data.buffer)
            );
          }),
          (Zu.prototype.backfillBorder = function (i, s, c) {
            if (this.dim !== i.dim) throw new Error("dem dimension mismatch");
            var m = s * this.dim,
              _ = s * this.dim + this.dim,
              y = c * this.dim,
              A = c * this.dim + this.dim;
            switch (s) {
              case -1:
                m = _ - 1;
                break;
              case 1:
                _ = m + 1;
            }
            switch (c) {
              case -1:
                y = A - 1;
                break;
              case 1:
                A = y + 1;
            }
            for (var C = -s * this.dim, P = -c * this.dim, O = y; O < A; O++)
              for (var k = m; k < _; k++)
                this.data[this._idx(k, O)] = i.data[this._idx(k + C, O + P)];
          }),
          vn("DEMData", Zu);
        var dm = function (i) {
          (this._stringToNumber = {}), (this._numberToString = []);
          for (var s = 0; s < i.length; s++) {
            var c = i[s];
            (this._stringToNumber[c] = s), (this._numberToString[s] = c);
          }
        };
        (dm.prototype.encode = function (i) {
          return this._stringToNumber[i];
        }),
          (dm.prototype.decode = function (i) {
            return this._numberToString[i];
          });
        var hm = function (i, s, c, m, _) {
            (this.type = "Feature"),
              (this._vectorTileFeature = i),
              (i._z = s),
              (i._x = c),
              (i._y = m),
              (this.properties = i.properties),
              (this.id = _);
          },
          Zv = { geometry: { configurable: !0 } };
        (Zv.geometry.get = function () {
          return (
            this._geometry === void 0 &&
              (this._geometry = this._vectorTileFeature.toGeoJSON(
                this._vectorTileFeature._x,
                this._vectorTileFeature._y,
                this._vectorTileFeature._z
              ).geometry),
            this._geometry
          );
        }),
          (Zv.geometry.set = function (i) {
            this._geometry = i;
          }),
          (hm.prototype.toJSON = function () {
            var i = { geometry: this.geometry };
            for (var s in this)
              s !== "_geometry" &&
                s !== "_vectorTileFeature" &&
                (i[s] = this[s]);
            return i;
          }),
          Object.defineProperties(hm.prototype, Zv);
        var Lh = function () {
          (this.state = {}),
            (this.stateChanges = {}),
            (this.deletedStates = {});
        };
        (Lh.prototype.updateState = function (i, s, c) {
          var m = String(s);
          if (
            ((this.stateChanges[i] = this.stateChanges[i] || {}),
            (this.stateChanges[i][m] = this.stateChanges[i][m] || {}),
            G(this.stateChanges[i][m], c),
            this.deletedStates[i] === null)
          )
            for (var _ in ((this.deletedStates[i] = {}), this.state[i]))
              _ !== m && (this.deletedStates[i][_] = null);
          else if (this.deletedStates[i] && this.deletedStates[i][m] === null)
            for (var y in ((this.deletedStates[i][m] = {}), this.state[i][m]))
              c[y] || (this.deletedStates[i][m][y] = null);
          else
            for (var A in c)
              this.deletedStates[i] &&
                this.deletedStates[i][m] &&
                this.deletedStates[i][m][A] === null &&
                delete this.deletedStates[i][m][A];
        }),
          (Lh.prototype.removeFeatureState = function (i, s, c) {
            if (this.deletedStates[i] !== null) {
              var m = String(s);
              if (
                ((this.deletedStates[i] = this.deletedStates[i] || {}),
                c && s !== void 0)
              )
                this.deletedStates[i][m] !== null &&
                  ((this.deletedStates[i][m] = this.deletedStates[i][m] || {}),
                  (this.deletedStates[i][m][c] = null));
              else if (s !== void 0)
                if (this.stateChanges[i] && this.stateChanges[i][m])
                  for (c in ((this.deletedStates[i][m] = {}),
                  this.stateChanges[i][m]))
                    this.deletedStates[i][m][c] = null;
                else this.deletedStates[i][m] = null;
              else this.deletedStates[i] = null;
            }
          }),
          (Lh.prototype.getState = function (i, s) {
            var c = String(s),
              m = G(
                {},
                (this.state[i] || {})[c],
                (this.stateChanges[i] || {})[c]
              );
            if (this.deletedStates[i] === null) return {};
            if (this.deletedStates[i]) {
              var _ = this.deletedStates[i][s];
              if (_ === null) return {};
              for (var y in _) delete m[y];
            }
            return m;
          }),
          (Lh.prototype.initializeTileState = function (i, s) {
            i.setFeatureState(this.state, s);
          }),
          (Lh.prototype.coalesceChanges = function (i, s) {
            var c = {};
            for (var m in this.stateChanges) {
              this.state[m] = this.state[m] || {};
              var _ = {};
              for (var y in this.stateChanges[m])
                this.state[m][y] || (this.state[m][y] = {}),
                  G(this.state[m][y], this.stateChanges[m][y]),
                  (_[y] = this.state[m][y]);
              c[m] = _;
            }
            for (var A in this.deletedStates) {
              this.state[A] = this.state[A] || {};
              var C = {};
              if (this.deletedStates[A] === null)
                for (var P in this.state[A])
                  (C[P] = {}), (this.state[A][P] = {});
              else
                for (var O in this.deletedStates[A]) {
                  if (this.deletedStates[A][O] === null) this.state[A][O] = {};
                  else
                    for (
                      var k = 0, U = Object.keys(this.deletedStates[A][O]);
                      k < U.length;
                      k += 1
                    )
                      delete this.state[A][O][U[k]];
                  C[O] = this.state[A][O];
                }
              (c[A] = c[A] || {}), G(c[A], C);
            }
            if (
              ((this.stateChanges = {}),
              (this.deletedStates = {}),
              Object.keys(c).length !== 0)
            )
              for (var W in i) i[W].setFeatureState(c, s);
          });
        var Yu = function (i, s) {
          (this.tileID = i),
            (this.x = i.canonical.x),
            (this.y = i.canonical.y),
            (this.z = i.canonical.z),
            (this.grid = new ya(8192, 16, 0)),
            (this.grid3D = new ya(8192, 16, 0)),
            (this.featureIndexArray = new V()),
            (this.promoteId = s);
        };
        function Ny(i, s, c, m, _) {
          return ut(i, function (y, A) {
            var C = s instanceof Qc ? s.get(A) : null;
            return C && C.evaluate ? C.evaluate(c, m, _) : C;
          });
        }
        function Ry(i) {
          for (
            var s = 1 / 0, c = 1 / 0, m = -1 / 0, _ = -1 / 0, y = 0, A = i;
            y < A.length;
            y += 1
          ) {
            var C = A[y];
            (s = Math.min(s, C.x)),
              (c = Math.min(c, C.y)),
              (m = Math.max(m, C.x)),
              (_ = Math.max(_, C.y));
          }
          return { minX: s, minY: c, maxX: m, maxY: _ };
        }
        function lT(i, s) {
          return s - i;
        }
        (Yu.prototype.insert = function (i, s, c, m, _, y) {
          var A = this.featureIndexArray.length;
          this.featureIndexArray.emplaceBack(c, m, _);
          for (var C = y ? this.grid3D : this.grid, P = 0; P < s.length; P++) {
            for (
              var O = s[P], k = [1 / 0, 1 / 0, -1 / 0, -1 / 0], U = 0;
              U < O.length;
              U++
            ) {
              var W = O[U];
              (k[0] = Math.min(k[0], W.x)),
                (k[1] = Math.min(k[1], W.y)),
                (k[2] = Math.max(k[2], W.x)),
                (k[3] = Math.max(k[3], W.y));
            }
            k[0] < 8192 &&
              k[1] < 8192 &&
              k[2] >= 0 &&
              k[3] >= 0 &&
              C.insert(A, k[0], k[1], k[2], k[3]);
          }
        }),
          (Yu.prototype.loadVTLayers = function () {
            return (
              this.vtLayers ||
                ((this.vtLayers = new lu.VectorTile(
                  new tt(this.rawTileData)
                ).layers),
                (this.sourceLayerCoder = new dm(
                  this.vtLayers
                    ? Object.keys(this.vtLayers).sort()
                    : ["_geojsonTileLayer"]
                ))),
              this.vtLayers
            );
          }),
          (Yu.prototype.query = function (i, s, c, m) {
            var _ = this;
            this.loadVTLayers();
            for (
              var y = i.params || {},
                A = 8192 / i.tileSize / i.scale,
                C = Hl(y.filter),
                P = i.queryGeometry,
                O = i.queryPadding * A,
                k = Ry(P),
                U = this.grid.query(
                  k.minX - O,
                  k.minY - O,
                  k.maxX + O,
                  k.maxY + O
                ),
                W = Ry(i.cameraQueryGeometry),
                $ = this.grid3D.query(
                  W.minX - O,
                  W.minY - O,
                  W.maxX + O,
                  W.maxY + O,
                  function (at, lt, yt, zt) {
                    return (function (Qt, Mn, dn, Un, fn) {
                      for (var Ar = 0, qn = Qt; Ar < qn.length; Ar += 1) {
                        var Tn = qn[Ar];
                        if (
                          Mn <= Tn.x &&
                          dn <= Tn.y &&
                          Un >= Tn.x &&
                          fn >= Tn.y
                        )
                          return !0;
                      }
                      var Mr = [
                        new E(Mn, dn),
                        new E(Mn, fn),
                        new E(Un, fn),
                        new E(Un, dn),
                      ];
                      if (Qt.length > 2) {
                        for (var pr = 0, Hr = Mr; pr < Hr.length; pr += 1)
                          if (Ts(Qt, Hr[pr])) return !0;
                      }
                      for (var zn = 0; zn < Qt.length - 1; zn++)
                        if ($l(Qt[zn], Qt[zn + 1], Mr)) return !0;
                      return !1;
                    })(i.cameraQueryGeometry, at - O, lt - O, yt + O, zt + O);
                  }
                ),
                he = 0,
                me = $;
              he < me.length;
              he += 1
            )
              U.push(me[he]);
            U.sort(lT);
            for (
              var Ie,
                Te = {},
                je = function (at) {
                  var lt = U[at];
                  if (lt !== Ie) {
                    Ie = lt;
                    var yt = _.featureIndexArray.get(lt),
                      zt = null;
                    _.loadMatchingFeature(
                      Te,
                      yt.bucketIndex,
                      yt.sourceLayerIndex,
                      yt.featureIndex,
                      C,
                      y.layers,
                      y.availableImages,
                      s,
                      c,
                      m,
                      function (Qt, Mn, dn) {
                        return (
                          zt || (zt = Ri(Qt)),
                          Mn.queryIntersectsFeature(
                            P,
                            Qt,
                            dn,
                            zt,
                            _.z,
                            i.transform,
                            A,
                            i.pixelPosMatrix
                          )
                        );
                      }
                    );
                  }
                },
                Ze = 0;
              Ze < U.length;
              Ze++
            )
              je(Ze);
            return Te;
          }),
          (Yu.prototype.loadMatchingFeature = function (
            i,
            s,
            c,
            m,
            _,
            y,
            A,
            C,
            P,
            O,
            k
          ) {
            var U = this.bucketLayerIDs[s];
            if (
              !y ||
              (function (Qt, Mn) {
                for (var dn = 0; dn < Qt.length; dn++)
                  if (Mn.indexOf(Qt[dn]) >= 0) return !0;
                return !1;
              })(y, U)
            ) {
              var W = this.sourceLayerCoder.decode(c),
                $ = this.vtLayers[W].feature(m);
              if (_.needGeometry) {
                var he = Pi($, !0);
                if (
                  !_.filter(
                    new ur(this.tileID.overscaledZ),
                    he,
                    this.tileID.canonical
                  )
                )
                  return;
              } else if (!_.filter(new ur(this.tileID.overscaledZ), $)) return;
              for (var me = this.getId($, W), Ie = 0; Ie < U.length; Ie++) {
                var Te = U[Ie];
                if (!(y && y.indexOf(Te) < 0)) {
                  var je = C[Te];
                  if (je) {
                    var Ze = {};
                    me !== void 0 &&
                      O &&
                      (Ze = O.getState(
                        je.sourceLayer || "_geojsonTileLayer",
                        me
                      ));
                    var at = G({}, P[Te]);
                    (at.paint = Ny(at.paint, je.paint, $, Ze, A)),
                      (at.layout = Ny(at.layout, je.layout, $, Ze, A));
                    var lt = !k || k($, je, Ze);
                    if (lt) {
                      var yt = new hm($, this.z, this.x, this.y, me);
                      yt.layer = at;
                      var zt = i[Te];
                      zt === void 0 && (zt = i[Te] = []),
                        zt.push({
                          featureIndex: m,
                          feature: yt,
                          intersectionZ: lt,
                        });
                    }
                  }
                }
              }
            }
          }),
          (Yu.prototype.lookupSymbolFeatures = function (
            i,
            s,
            c,
            m,
            _,
            y,
            A,
            C
          ) {
            var P = {};
            this.loadVTLayers();
            for (var O = Hl(_), k = 0, U = i; k < U.length; k += 1)
              this.loadMatchingFeature(P, c, m, U[k], O, y, A, C, s);
            return P;
          }),
          (Yu.prototype.hasLayer = function (i) {
            for (var s = 0, c = this.bucketLayerIDs; s < c.length; s += 1)
              for (var m = 0, _ = c[s]; m < _.length; m += 1)
                if (i === _[m]) return !0;
            return !1;
          }),
          (Yu.prototype.getId = function (i, s) {
            var c = i.id;
            return (
              this.promoteId &&
                typeof (c =
                  i.properties[
                    typeof this.promoteId == "string"
                      ? this.promoteId
                      : this.promoteId[s]
                  ]) == "boolean" &&
                (c = Number(c)),
              c
            );
          }),
          vn("FeatureIndex", Yu, { omit: ["rawTileData", "sourceLayerCoder"] });
        var ro = function (i, s) {
          (this.tileID = i),
            (this.uid = Q()),
            (this.uses = 0),
            (this.tileSize = s),
            (this.buckets = {}),
            (this.expirationTime = null),
            (this.queryPadding = 0),
            (this.hasSymbolBuckets = !1),
            (this.hasRTLText = !1),
            (this.dependencies = {}),
            (this.expiredRequestCount = 0),
            (this.state = "loading");
        };
        (ro.prototype.registerFadeDuration = function (i) {
          var s = i + this.timeAdded;
          s < Fi.now() ||
            (this.fadeEndTime && s < this.fadeEndTime) ||
            (this.fadeEndTime = s);
        }),
          (ro.prototype.wasRequested = function () {
            return (
              this.state === "errored" ||
              this.state === "loaded" ||
              this.state === "reloading"
            );
          }),
          (ro.prototype.loadVectorData = function (i, s, c) {
            if (
              (this.hasData() && this.unloadVectorData(),
              (this.state = "loaded"),
              i)
            ) {
              for (var m in (i.featureIndex &&
                ((this.latestFeatureIndex = i.featureIndex),
                i.rawTileData
                  ? ((this.latestRawTileData = i.rawTileData),
                    (this.latestFeatureIndex.rawTileData = i.rawTileData))
                  : this.latestRawTileData &&
                    (this.latestFeatureIndex.rawTileData =
                      this.latestRawTileData)),
              (this.collisionBoxArray = i.collisionBoxArray),
              (this.buckets = (function (O, k) {
                var U = {};
                if (!k) return U;
                for (
                  var W = function () {
                      var me = he[$],
                        Ie = me.layerIds
                          .map(function (Ze) {
                            return k.getLayer(Ze);
                          })
                          .filter(Boolean);
                      if (Ie.length !== 0) {
                        (me.layers = Ie),
                          me.stateDependentLayerIds &&
                            (me.stateDependentLayers =
                              me.stateDependentLayerIds.map(function (Ze) {
                                return Ie.filter(function (at) {
                                  return at.id === Ze;
                                })[0];
                              }));
                        for (var Te = 0, je = Ie; Te < je.length; Te += 1)
                          U[je[Te].id] = me;
                      }
                    },
                    $ = 0,
                    he = O;
                  $ < he.length;
                  $ += 1
                )
                  W();
                return U;
              })(i.buckets, s.style)),
              (this.hasSymbolBuckets = !1),
              this.buckets)) {
                var _ = this.buckets[m];
                if (_ instanceof _n) {
                  if (((this.hasSymbolBuckets = !0), !c)) break;
                  _.justReloaded = !0;
                }
              }
              if (((this.hasRTLText = !1), this.hasSymbolBuckets))
                for (var y in this.buckets) {
                  var A = this.buckets[y];
                  if (A instanceof _n && A.hasRTLText) {
                    (this.hasRTLText = !0),
                      Yo.isLoading() ||
                        Yo.isLoaded() ||
                        w0() !== "deferred" ||
                        Do();
                    break;
                  }
                }
              for (var C in ((this.queryPadding = 0), this.buckets)) {
                var P = this.buckets[C];
                this.queryPadding = Math.max(
                  this.queryPadding,
                  s.style.getLayer(C).queryRadius(P)
                );
              }
              i.imageAtlas && (this.imageAtlas = i.imageAtlas),
                i.glyphAtlasImage && (this.glyphAtlasImage = i.glyphAtlasImage);
            } else this.collisionBoxArray = new p();
          }),
          (ro.prototype.unloadVectorData = function () {
            for (var i in this.buckets) this.buckets[i].destroy();
            (this.buckets = {}),
              this.imageAtlasTexture && this.imageAtlasTexture.destroy(),
              this.imageAtlas && (this.imageAtlas = null),
              this.glyphAtlasTexture && this.glyphAtlasTexture.destroy(),
              (this.latestFeatureIndex = null),
              (this.state = "unloaded");
          }),
          (ro.prototype.getBucket = function (i) {
            return this.buckets[i.id];
          }),
          (ro.prototype.upload = function (i) {
            for (var s in this.buckets) {
              var c = this.buckets[s];
              c.uploadPending() && c.upload(i);
            }
            var m = i.gl;
            this.imageAtlas &&
              !this.imageAtlas.uploaded &&
              ((this.imageAtlasTexture = new O0(
                i,
                this.imageAtlas.image,
                m.RGBA
              )),
              (this.imageAtlas.uploaded = !0)),
              this.glyphAtlasImage &&
                ((this.glyphAtlasTexture = new O0(
                  i,
                  this.glyphAtlasImage,
                  m.ALPHA
                )),
                (this.glyphAtlasImage = null));
          }),
          (ro.prototype.prepare = function (i) {
            this.imageAtlas &&
              this.imageAtlas.patchUpdatedImages(i, this.imageAtlasTexture);
          }),
          (ro.prototype.queryRenderedFeatures = function (
            i,
            s,
            c,
            m,
            _,
            y,
            A,
            C,
            P,
            O
          ) {
            return this.latestFeatureIndex &&
              this.latestFeatureIndex.rawTileData
              ? this.latestFeatureIndex.query(
                  {
                    queryGeometry: m,
                    cameraQueryGeometry: _,
                    scale: y,
                    tileSize: this.tileSize,
                    pixelPosMatrix: O,
                    transform: C,
                    params: A,
                    queryPadding: this.queryPadding * P,
                  },
                  i,
                  s,
                  c
                )
              : {};
          }),
          (ro.prototype.querySourceFeatures = function (i, s) {
            var c = this.latestFeatureIndex;
            if (c && c.rawTileData) {
              var m = c.loadVTLayers(),
                _ = s ? s.sourceLayer : "",
                y = m._geojsonTileLayer || m[_];
              if (y)
                for (
                  var A = Hl(s && s.filter),
                    C = this.tileID.canonical,
                    P = C.z,
                    O = C.x,
                    k = C.y,
                    U = { z: P, x: O, y: k },
                    W = 0;
                  W < y.length;
                  W++
                ) {
                  var $ = y.feature(W);
                  if (A.needGeometry) {
                    var he = Pi($, !0);
                    if (
                      !A.filter(
                        new ur(this.tileID.overscaledZ),
                        he,
                        this.tileID.canonical
                      )
                    )
                      continue;
                  } else if (!A.filter(new ur(this.tileID.overscaledZ), $))
                    continue;
                  var me = c.getId($, _),
                    Ie = new hm($, P, O, k, me);
                  (Ie.tile = U), i.push(Ie);
                }
            }
          }),
          (ro.prototype.hasData = function () {
            return (
              this.state === "loaded" ||
              this.state === "reloading" ||
              this.state === "expired"
            );
          }),
          (ro.prototype.patternsLoaded = function () {
            return (
              this.imageAtlas &&
              !!Object.keys(this.imageAtlas.patternPositions).length
            );
          }),
          (ro.prototype.setExpiryData = function (i) {
            var s = this.expirationTime;
            if (i.cacheControl) {
              var c = Ht(i.cacheControl);
              c["max-age"] &&
                (this.expirationTime = Date.now() + 1e3 * c["max-age"]);
            } else
              i.expires &&
                (this.expirationTime = new Date(i.expires).getTime());
            if (this.expirationTime) {
              var m = Date.now(),
                _ = !1;
              if (this.expirationTime > m) _ = !1;
              else if (s)
                if (this.expirationTime < s) _ = !0;
                else {
                  var y = this.expirationTime - s;
                  y ? (this.expirationTime = m + Math.max(y, 3e4)) : (_ = !0);
                }
              else _ = !0;
              _
                ? (this.expiredRequestCount++, (this.state = "expired"))
                : (this.expiredRequestCount = 0);
            }
          }),
          (ro.prototype.getExpiryTimeout = function () {
            if (this.expirationTime)
              return this.expiredRequestCount
                ? 1e3 * (1 << Math.min(this.expiredRequestCount - 1, 31))
                : Math.min(
                    this.expirationTime - new Date().getTime(),
                    Math.pow(2, 31) - 1
                  );
          }),
          (ro.prototype.setFeatureState = function (i, s) {
            if (
              this.latestFeatureIndex &&
              this.latestFeatureIndex.rawTileData &&
              Object.keys(i).length !== 0
            ) {
              var c = this.latestFeatureIndex.loadVTLayers();
              for (var m in this.buckets)
                if (s.style.hasLayer(m)) {
                  var _ = this.buckets[m],
                    y = _.layers[0].sourceLayer || "_geojsonTileLayer",
                    A = c[y],
                    C = i[y];
                  if (A && C && Object.keys(C).length !== 0) {
                    _.update(
                      C,
                      A,
                      (this.imageAtlas && this.imageAtlas.patternPositions) ||
                        {}
                    );
                    var P = s && s.style && s.style.getLayer(m);
                    P &&
                      (this.queryPadding = Math.max(
                        this.queryPadding,
                        P.queryRadius(_)
                      ));
                  }
                }
            }
          }),
          (ro.prototype.holdingForFade = function () {
            return this.symbolFadeHoldUntil !== void 0;
          }),
          (ro.prototype.symbolFadeFinished = function () {
            return (
              !this.symbolFadeHoldUntil || this.symbolFadeHoldUntil < Fi.now()
            );
          }),
          (ro.prototype.clearFadeHold = function () {
            this.symbolFadeHoldUntil = void 0;
          }),
          (ro.prototype.setHoldDuration = function (i) {
            this.symbolFadeHoldUntil = Fi.now() + i;
          }),
          (ro.prototype.setDependencies = function (i, s) {
            for (var c = {}, m = 0, _ = s; m < _.length; m += 1) c[_[m]] = !0;
            this.dependencies[i] = c;
          }),
          (ro.prototype.hasDependency = function (i, s) {
            for (var c = 0, m = i; c < m.length; c += 1) {
              var _ = this.dependencies[m[c]];
              if (_) {
                for (var y = 0, A = s; y < A.length; y += 1)
                  if (_[A[y]]) return !0;
              }
            }
            return !1;
          });
        var Bd = T.performance,
          Iy = function (i) {
            (this._marks = {
              start: [i.url, "start"].join("#"),
              end: [i.url, "end"].join("#"),
              measure: i.url.toString(),
            }),
              Bd.mark(this._marks.start);
          };
        (Iy.prototype.finish = function () {
          Bd.mark(this._marks.end);
          var i = Bd.getEntriesByName(this._marks.measure);
          return (
            i.length === 0 &&
              (Bd.measure(
                this._marks.measure,
                this._marks.start,
                this._marks.end
              ),
              (i = Bd.getEntriesByName(this._marks.measure)),
              Bd.clearMarks(this._marks.start),
              Bd.clearMarks(this._marks.end),
              Bd.clearMeasures(this._marks.measure)),
            i
          );
        }),
          (a.Actor = Oh),
          (a.AlphaImage = nu),
          (a.CanonicalTileID = D0),
          (a.CollisionBoxArray = p),
          (a.Color = br),
          (a.DEMData = Zu),
          (a.DataConstantProperty = Rn),
          (a.DictionaryCoder = dm),
          (a.EXTENT = 8192),
          (a.ErrorEvent = Pe),
          (a.EvaluationParameters = ur),
          (a.Event = fe),
          (a.Evented = Fe),
          (a.FeatureIndex = Yu),
          (a.FillBucket = Al),
          (a.FillExtrusionBucket = fo),
          (a.ImageAtlas = _t),
          (a.ImagePosition = tn),
          (a.LineBucket = So),
          (a.LngLat = Oi),
          (a.LngLatBounds = Ua),
          (a.MercatorCoordinate = L0),
          (a.ONE_EM = 24),
          (a.OverscaledTileID = za),
          (a.Point = E),
          (a.Point$1 = E),
          (a.Properties = Ni),
          (a.Protobuf = tt),
          (a.RGBAImage = Ao),
          (a.RequestManager = yr),
          (a.RequestPerformance = Iy),
          (a.ResourceType = ll),
          (a.SegmentVector = ne),
          (a.SourceFeatureState = Lh),
          (a.StructArrayLayout1ui2 = Nd),
          (a.StructArrayLayout2f1f2i16 = Sc),
          (a.StructArrayLayout2i4 = Zl),
          (a.StructArrayLayout3ui6 = js),
          (a.StructArrayLayout4i8 = Td),
          (a.SymbolBucket = _n),
          (a.Texture = O0),
          (a.Tile = ro),
          (a.Transitionable = Da),
          (a.Uniform1f = jt),
          (a.Uniform1i = Et),
          (a.Uniform2f = Ft),
          (a.Uniform3f = sn),
          (a.Uniform4f = In),
          (a.UniformColor = Bn),
          (a.UniformMatrix4f = Fr),
          (a.UnwrappedTileID = Cy),
          (a.ValidationError = ye),
          (a.WritingMode = kn),
          (a.ZoomHistory = yd),
          (a.add = function (i, s, c) {
            return (
              (i[0] = s[0] + c[0]),
              (i[1] = s[1] + c[1]),
              (i[2] = s[2] + c[2]),
              i
            );
          }),
          (a.addDynamicAttributes = Ct),
          (a.asyncAll = function (i, s, c) {
            if (!i.length) return c(null, []);
            var m = i.length,
              _ = new Array(i.length),
              y = null;
            i.forEach(function (A, C) {
              s(A, function (P, O) {
                P && (y = P), (_[C] = O), --m == 0 && c(y, _);
              });
            });
          }),
          (a.bezier = I),
          (a.bindAll = ue),
          (a.browser = Fi),
          (a.cacheEntryPossiblyAdded = function (i) {
            ++sl > Os &&
              (i.getActor().send("enforceCacheSizeLimit", Oa), (sl = 0));
          }),
          (a.clamp = F),
          (a.clearTileCache = function (i) {
            var s = T.caches.delete("mapbox-tiles");
            i &&
              s.catch(i).then(function () {
                return i();
              });
          }),
          (a.clipLine = Tl),
          (a.clone = function (i) {
            var s = new Pr(16);
            return (
              (s[0] = i[0]),
              (s[1] = i[1]),
              (s[2] = i[2]),
              (s[3] = i[3]),
              (s[4] = i[4]),
              (s[5] = i[5]),
              (s[6] = i[6]),
              (s[7] = i[7]),
              (s[8] = i[8]),
              (s[9] = i[9]),
              (s[10] = i[10]),
              (s[11] = i[11]),
              (s[12] = i[12]),
              (s[13] = i[13]),
              (s[14] = i[14]),
              (s[15] = i[15]),
              s
            );
          }),
          (a.clone$1 = Ae),
          (a.clone$2 = function (i) {
            var s = new Pr(3);
            return (s[0] = i[0]), (s[1] = i[1]), (s[2] = i[2]), s;
          }),
          (a.collisionCircleLayout = D),
          (a.config = qe),
          (a.create = function () {
            var i = new Pr(16);
            return (
              Pr != Float32Array &&
                ((i[1] = 0),
                (i[2] = 0),
                (i[3] = 0),
                (i[4] = 0),
                (i[6] = 0),
                (i[7] = 0),
                (i[8] = 0),
                (i[9] = 0),
                (i[11] = 0),
                (i[12] = 0),
                (i[13] = 0),
                (i[14] = 0)),
              (i[0] = 1),
              (i[5] = 1),
              (i[10] = 1),
              (i[15] = 1),
              i
            );
          }),
          (a.create$1 = function () {
            var i = new Pr(9);
            return (
              Pr != Float32Array &&
                ((i[1] = 0),
                (i[2] = 0),
                (i[3] = 0),
                (i[5] = 0),
                (i[6] = 0),
                (i[7] = 0)),
              (i[0] = 1),
              (i[4] = 1),
              (i[8] = 1),
              i
            );
          }),
          (a.create$2 = function () {
            var i = new Pr(4);
            return (
              Pr != Float32Array && ((i[1] = 0), (i[2] = 0)),
              (i[0] = 1),
              (i[3] = 1),
              i
            );
          }),
          (a.createCommonjsModule = h),
          (a.createExpression = Gc),
          (a.createLayout = xa),
          (a.createStyleLayer = function (i) {
            return i.type === "custom" ? new cm(i) : new Mc[i.type](i);
          }),
          (a.cross = function (i, s, c) {
            var m = s[0],
              _ = s[1],
              y = s[2],
              A = c[0],
              C = c[1],
              P = c[2];
            return (
              (i[0] = _ * P - y * C),
              (i[1] = y * A - m * P),
              (i[2] = m * C - _ * A),
              i
            );
          }),
          (a.deepEqual = function i(s, c) {
            if (Array.isArray(s)) {
              if (!Array.isArray(c) || s.length !== c.length) return !1;
              for (var m = 0; m < s.length; m++) if (!i(s[m], c[m])) return !1;
              return !0;
            }
            if (typeof s == "object" && s !== null && c !== null) {
              if (
                typeof c != "object" ||
                Object.keys(s).length !== Object.keys(c).length
              )
                return !1;
              for (var _ in s) if (!i(s[_], c[_])) return !1;
              return !0;
            }
            return s === c;
          }),
          (a.dot = function (i, s) {
            return i[0] * s[0] + i[1] * s[1] + i[2] * s[2];
          }),
          (a.dot$1 = function (i, s) {
            return i[0] * s[0] + i[1] * s[1] + i[2] * s[2] + i[3] * s[3];
          }),
          (a.ease = L),
          (a.emitValidationErrors = Xl),
          (a.endsWith = ke),
          (a.enforceCacheSizeLimit = function (i) {
            Wi(),
              Ia &&
                Ia.then(function (s) {
                  s.keys().then(function (c) {
                    for (var m = 0; m < c.length - i; m++) s.delete(c[m]);
                  });
                });
          }),
          (a.evaluateSizeForFeature = mo),
          (a.evaluateSizeForZoom = Sa),
          (a.evaluateVariableOffset = Le),
          (a.evented = Ad),
          (a.extend = G),
          (a.featureFilter = Hl),
          (a.filterObject = Ve),
          (a.fromRotation = function (i, s) {
            var c = Math.sin(s),
              m = Math.cos(s);
            return (
              (i[0] = m),
              (i[1] = c),
              (i[2] = 0),
              (i[3] = -c),
              (i[4] = m),
              (i[5] = 0),
              (i[6] = 0),
              (i[7] = 0),
              (i[8] = 1),
              i
            );
          }),
          (a.getAnchorAlignment = bi),
          (a.getAnchorJustification = Ue),
          (a.getArrayBuffer = gc),
          (a.getImage = j),
          (a.getJSON = function (i, s) {
            return Ls(G(i, { type: "json" }), s);
          }),
          (a.getRTLTextPluginStatus = w0),
          (a.getReferrer = cl),
          (a.getVideo = function (i, s) {
            var c,
              m,
              _ = T.document.createElement("video");
            (_.muted = !0),
              (_.onloadstart = function () {
                s(null, _);
              });
            for (var y = 0; y < i.length; y++) {
              var A = T.document.createElement("source");
              (c = i[y]),
                (m = void 0),
                ((m = T.document.createElement("a")).href = c),
                (m.protocol !== T.document.location.protocol ||
                  m.host !== T.document.location.host) &&
                  (_.crossOrigin = "Anonymous"),
                (A.src = i[y]),
                _.appendChild(A);
            }
            return { cancel: function () {} };
          }),
          (a.identity = Fa),
          (a.invert = function (i, s) {
            var c = s[0],
              m = s[1],
              _ = s[2],
              y = s[3],
              A = s[4],
              C = s[5],
              P = s[6],
              O = s[7],
              k = s[8],
              U = s[9],
              W = s[10],
              $ = s[11],
              he = s[12],
              me = s[13],
              Ie = s[14],
              Te = s[15],
              je = c * C - m * A,
              Ze = c * P - _ * A,
              at = c * O - y * A,
              lt = m * P - _ * C,
              yt = m * O - y * C,
              zt = _ * O - y * P,
              Qt = k * me - U * he,
              Mn = k * Ie - W * he,
              dn = k * Te - $ * he,
              Un = U * Ie - W * me,
              fn = U * Te - $ * me,
              Ar = W * Te - $ * Ie,
              qn = je * Ar - Ze * fn + at * Un + lt * dn - yt * Mn + zt * Qt;
            return qn
              ? ((i[0] = (C * Ar - P * fn + O * Un) * (qn = 1 / qn)),
                (i[1] = (_ * fn - m * Ar - y * Un) * qn),
                (i[2] = (me * zt - Ie * yt + Te * lt) * qn),
                (i[3] = (W * yt - U * zt - $ * lt) * qn),
                (i[4] = (P * dn - A * Ar - O * Mn) * qn),
                (i[5] = (c * Ar - _ * dn + y * Mn) * qn),
                (i[6] = (Ie * at - he * zt - Te * Ze) * qn),
                (i[7] = (k * zt - W * at + $ * Ze) * qn),
                (i[8] = (A * fn - C * dn + O * Qt) * qn),
                (i[9] = (m * dn - c * fn - y * Qt) * qn),
                (i[10] = (he * yt - me * at + Te * je) * qn),
                (i[11] = (U * at - k * yt - $ * je) * qn),
                (i[12] = (C * Mn - A * Un - P * Qt) * qn),
                (i[13] = (c * Un - m * Mn + _ * Qt) * qn),
                (i[14] = (me * Ze - he * lt - Ie * je) * qn),
                (i[15] = (k * lt - U * Ze + W * je) * qn),
                i)
              : null;
          }),
          (a.isChar = Jt),
          (a.isMapboxURL = nr),
          (a.keysDifference = function (i, s) {
            var c = [];
            for (var m in i) m in s || c.push(m);
            return c;
          }),
          (a.makeRequest = Ls),
          (a.mapObject = ut),
          (a.mercatorXfromLng = Ty),
          (a.mercatorYfromLat = Sy),
          (a.mercatorZfromAltitude = wy),
          (a.mul = Id),
          (a.multiply = ra),
          (a.mvt = lu),
          (a.nextPowerOfTwo = function (i) {
            return i <= 1 ? 1 : Math.pow(2, Math.ceil(Math.log(i) / Math.LN2));
          }),
          (a.normalize = function (i, s) {
            var c = s[0],
              m = s[1],
              _ = s[2],
              y = c * c + m * m + _ * _;
            return (
              y > 0 && (y = 1 / Math.sqrt(y)),
              (i[0] = s[0] * y),
              (i[1] = s[1] * y),
              (i[2] = s[2] * y),
              i
            );
          }),
          (a.number = Ui),
          (a.offscreenCanvasSupported = mc),
          (a.ortho = function (i, s, c, m, _, y, A) {
            var C = 1 / (s - c),
              P = 1 / (m - _),
              O = 1 / (y - A);
            return (
              (i[0] = -2 * C),
              (i[1] = 0),
              (i[2] = 0),
              (i[3] = 0),
              (i[4] = 0),
              (i[5] = -2 * P),
              (i[6] = 0),
              (i[7] = 0),
              (i[8] = 0),
              (i[9] = 0),
              (i[10] = 2 * O),
              (i[11] = 0),
              (i[12] = (s + c) * C),
              (i[13] = (_ + m) * P),
              (i[14] = (A + y) * O),
              (i[15] = 1),
              i
            );
          }),
          (a.parseGlyphPBF = function (i) {
            return new tt(i).readFields(wt, []);
          }),
          (a.pbf = tt),
          (a.performSymbolLayout = function (i, s, c, m, _, y, A) {
            i.createArrays(),
              (i.tilePixelRatio = 8192 / (512 * i.overscaling)),
              (i.compareText = {}),
              (i.iconsNeedLinear = !1);
            var C = i.layers[0].layout,
              P = i.layers[0]._unevaluatedLayout._values,
              O = {};
            if (i.textSizeData.kind === "composite") {
              var k = i.textSizeData,
                U = k.maxZoom;
              O.compositeTextSizes = [
                P["text-size"].possiblyEvaluate(new ur(k.minZoom), A),
                P["text-size"].possiblyEvaluate(new ur(U), A),
              ];
            }
            if (i.iconSizeData.kind === "composite") {
              var W = i.iconSizeData,
                $ = W.maxZoom;
              O.compositeIconSizes = [
                P["icon-size"].possiblyEvaluate(new ur(W.minZoom), A),
                P["icon-size"].possiblyEvaluate(new ur($), A),
              ];
            }
            (O.layoutTextSize = P["text-size"].possiblyEvaluate(
              new ur(i.zoom + 1),
              A
            )),
              (O.layoutIconSize = P["icon-size"].possiblyEvaluate(
                new ur(i.zoom + 1),
                A
              )),
              (O.textMaxSize = P["text-size"].possiblyEvaluate(new ur(18)));
            for (
              var he = 24 * C.get("text-line-height"),
                me =
                  C.get("text-rotation-alignment") === "map" &&
                  C.get("symbol-placement") !== "point",
                Ie = C.get("text-keep-upright"),
                Te = C.get("text-size"),
                je = function () {
                  var lt = at[Ze],
                    yt = C.get("text-font").evaluate(lt, {}, A).join(","),
                    zt = Te.evaluate(lt, {}, A),
                    Qt = O.layoutTextSize.evaluate(lt, {}, A),
                    Mn = O.layoutIconSize.evaluate(lt, {}, A),
                    dn = { horizontal: {}, vertical: void 0 },
                    Un = lt.text,
                    fn = [0, 0];
                  if (Un) {
                    var Ar = Un.toString(),
                      qn =
                        24 * C.get("text-letter-spacing").evaluate(lt, {}, A),
                      Tn = (function (Dr) {
                        for (var _i = 0, ci = Dr; _i < ci.length; _i += 1)
                          if (
                            ((Gr = ci[_i].charCodeAt(0)),
                            Jt.Arabic(Gr) ||
                              Jt["Arabic Supplement"](Gr) ||
                              Jt["Arabic Extended-A"](Gr) ||
                              Jt["Arabic Presentation Forms-A"](Gr) ||
                              Jt["Arabic Presentation Forms-B"](Gr))
                          )
                            return !1;
                        var Gr;
                        return !0;
                      })(Ar)
                        ? qn
                        : 0,
                      Mr = C.get("text-anchor").evaluate(lt, {}, A),
                      pr = C.get("text-variable-anchor");
                    if (!pr) {
                      var Hr = C.get("text-radial-offset").evaluate(lt, {}, A);
                      fn = Hr
                        ? Le(Mr, [24 * Hr, Ne])
                        : C.get("text-offset")
                            .evaluate(lt, {}, A)
                            .map(function (Dr) {
                              return 24 * Dr;
                            });
                    }
                    var zn = me
                        ? "center"
                        : C.get("text-justify").evaluate(lt, {}, A),
                      Kr = C.get("symbol-placement"),
                      Li =
                        Kr === "point"
                          ? 24 * C.get("text-max-width").evaluate(lt, {}, A)
                          : 0,
                      Qi = function () {
                        i.allowVerticalPlacement &&
                          _l(Ar) &&
                          (dn.vertical = mr(
                            Un,
                            s,
                            c,
                            _,
                            yt,
                            Li,
                            he,
                            Mr,
                            "left",
                            Tn,
                            fn,
                            kn.vertical,
                            !0,
                            Kr,
                            Qt,
                            zt
                          ));
                      };
                    if (!me && pr) {
                      for (
                        var Yi =
                            zn === "auto"
                              ? pr.map(function (Dr) {
                                  return Ue(Dr);
                                })
                              : [zn],
                          Di = !1,
                          Ji = 0;
                        Ji < Yi.length;
                        Ji++
                      ) {
                        var Ya = Yi[Ji];
                        if (!dn.horizontal[Ya])
                          if (Di) dn.horizontal[Ya] = dn.horizontal[0];
                          else {
                            var qa = mr(
                              Un,
                              s,
                              c,
                              _,
                              yt,
                              Li,
                              he,
                              "center",
                              Ya,
                              Tn,
                              fn,
                              kn.horizontal,
                              !1,
                              Kr,
                              Qt,
                              zt
                            );
                            qa &&
                              ((dn.horizontal[Ya] = qa),
                              (Di = qa.positionedLines.length === 1));
                          }
                      }
                      Qi();
                    } else {
                      zn === "auto" && (zn = Ue(Mr));
                      var Uo = mr(
                        Un,
                        s,
                        c,
                        _,
                        yt,
                        Li,
                        he,
                        Mr,
                        zn,
                        Tn,
                        fn,
                        kn.horizontal,
                        !1,
                        Kr,
                        Qt,
                        zt
                      );
                      Uo && (dn.horizontal[zn] = Uo),
                        Qi(),
                        _l(Ar) &&
                          me &&
                          Ie &&
                          (dn.vertical = mr(
                            Un,
                            s,
                            c,
                            _,
                            yt,
                            Li,
                            he,
                            Mr,
                            zn,
                            Tn,
                            fn,
                            kn.vertical,
                            !1,
                            Kr,
                            Qt,
                            zt
                          ));
                    }
                  }
                  var io = void 0,
                    zo = !1;
                  if (lt.icon && lt.icon.name) {
                    var sa = m[lt.icon.name];
                    sa &&
                      ((io = (function (Dr, _i, ci) {
                        var Gr = bi(ci),
                          Ko = _i[0] - Dr.displaySize[0] * Gr.horizontalAlign,
                          wo = _i[1] - Dr.displaySize[1] * Gr.verticalAlign;
                        return {
                          image: Dr,
                          top: wo,
                          bottom: wo + Dr.displaySize[1],
                          left: Ko,
                          right: Ko + Dr.displaySize[0],
                        };
                      })(
                        _[lt.icon.name],
                        C.get("icon-offset").evaluate(lt, {}, A),
                        C.get("icon-anchor").evaluate(lt, {}, A)
                      )),
                      (zo = sa.sdf),
                      i.sdfIcons === void 0
                        ? (i.sdfIcons = sa.sdf)
                        : i.sdfIcons !== sa.sdf &&
                          He(
                            "Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"
                          ),
                      (sa.pixelRatio !== i.pixelRatio ||
                        C.get("icon-rotate").constantOr(1) !== 0) &&
                        (i.iconsNeedLinear = !0));
                  }
                  var ao = Me(dn.horizontal) || dn.vertical;
                  (i.iconsInText = !!ao && ao.iconsInText),
                    (ao || io) &&
                      (function (Dr, _i, ci, Gr, Ko, wo, Ii, Ca, Co, Qr, cu) {
                        var Ys = wo.textMaxSize.evaluate(_i, {});
                        Ys === void 0 && (Ys = Ii);
                        var uu,
                          la = Dr.layers[0].layout,
                          du = la.get("icon-offset").evaluate(_i, {}, cu),
                          Jl = Me(ci.horizontal),
                          Dh = Ii / 24,
                          B0 = Dr.tilePixelRatio * Dh,
                          Bh = (Dr.tilePixelRatio * Ys) / 24,
                          qu = Dr.tilePixelRatio * Ca,
                          Fh = Dr.tilePixelRatio * la.get("symbol-spacing"),
                          pm = la.get("text-padding") * Dr.tilePixelRatio,
                          kh = la.get("icon-padding") * Dr.tilePixelRatio,
                          af = (la.get("text-max-angle") / 180) * Math.PI,
                          fm =
                            la.get("text-rotation-alignment") === "map" &&
                            la.get("symbol-placement") !== "point",
                          mm =
                            la.get("icon-rotation-alignment") === "map" &&
                            la.get("symbol-placement") !== "point",
                          $u = la.get("symbol-placement"),
                          of = Fh / 2,
                          Uh = la.get("icon-text-fit");
                        Gr &&
                          Uh !== "none" &&
                          (Dr.allowVerticalPlacement &&
                            ci.vertical &&
                            (uu = Ta(
                              Gr,
                              ci.vertical,
                              Uh,
                              la.get("icon-text-fit-padding"),
                              du,
                              Dh
                            )),
                          Jl &&
                            (Gr = Ta(
                              Gr,
                              Jl,
                              Uh,
                              la.get("icon-text-fit-padding"),
                              du,
                              Dh
                            )));
                        var Fd = function (cT, ff) {
                          ff.x < 0 ||
                            ff.x >= 8192 ||
                            ff.y < 0 ||
                            ff.y >= 8192 ||
                            (function (
                              ca,
                              Pc,
                              uT,
                              kd,
                              Kv,
                              Oy,
                              bm,
                              hu,
                              Em,
                              mf,
                              Am,
                              Tm,
                              Qv,
                              Ly,
                              gf,
                              Dy,
                              By,
                              Fy,
                              ky,
                              Uy,
                              qs,
                              Sm,
                              zy,
                              pu,
                              dT
                            ) {
                              var Vy,
                                k0,
                                Wh,
                                Xh,
                                Gh,
                                Zh = ca.addToLineVertexArray(Pc, uT),
                                Hy = 0,
                                jy = 0,
                                Wy = 0,
                                Xy = 0,
                                Jv = -1,
                                e2 = -1,
                                Ku = {},
                                Gy = de(""),
                                t2 = 0,
                                n2 = 0;
                              if (
                                (hu._unevaluatedLayout.getValue(
                                  "text-radial-offset"
                                ) === void 0
                                  ? ((t2 = (Vy = hu.layout
                                      .get("text-offset")
                                      .evaluate(qs, {}, pu)
                                      .map(function (_f) {
                                        return 24 * _f;
                                      }))[0]),
                                    (n2 = Vy[1]))
                                  : ((t2 =
                                      24 *
                                      hu.layout
                                        .get("text-radial-offset")
                                        .evaluate(qs, {}, pu)),
                                    (n2 = Ne)),
                                ca.allowVerticalPlacement && kd.vertical)
                              ) {
                                var Zy =
                                  hu.layout
                                    .get("text-rotate")
                                    .evaluate(qs, {}, pu) + 90;
                                (Xh = new li(
                                  Em,
                                  Pc,
                                  mf,
                                  Am,
                                  Tm,
                                  kd.vertical,
                                  Qv,
                                  Ly,
                                  gf,
                                  Zy
                                )),
                                  bm &&
                                    (Gh = new li(
                                      Em,
                                      Pc,
                                      mf,
                                      Am,
                                      Tm,
                                      bm,
                                      By,
                                      Fy,
                                      gf,
                                      Zy
                                    ));
                              }
                              if (Kv) {
                                var r2 = hu.layout
                                    .get("icon-rotate")
                                    .evaluate(qs, {}),
                                  Yy =
                                    hu.layout.get("icon-text-fit") !== "none",
                                  qy = ge(Kv, r2, zy, Yy),
                                  i2 = bm ? ge(bm, r2, zy, Yy) : void 0;
                                (Wh = new li(
                                  Em,
                                  Pc,
                                  mf,
                                  Am,
                                  Tm,
                                  Kv,
                                  By,
                                  Fy,
                                  !1,
                                  r2
                                )),
                                  (Hy = 4 * qy.length);
                                var $y = ca.iconSizeData,
                                  vf = null;
                                $y.kind === "source"
                                  ? (vf = [
                                      128 *
                                        hu.layout
                                          .get("icon-size")
                                          .evaluate(qs, {}),
                                    ])[0] > 32640 &&
                                    He(
                                      ca.layerIds[0] +
                                        ': Value for "icon-size" is >= 255. Reduce your "icon-size".'
                                    )
                                  : $y.kind === "composite" &&
                                    ((vf = [
                                      128 *
                                        Sm.compositeIconSizes[0].evaluate(
                                          qs,
                                          {},
                                          pu
                                        ),
                                      128 *
                                        Sm.compositeIconSizes[1].evaluate(
                                          qs,
                                          {},
                                          pu
                                        ),
                                    ])[0] > 32640 ||
                                      vf[1] > 32640) &&
                                    He(
                                      ca.layerIds[0] +
                                        ': Value for "icon-size" is >= 255. Reduce your "icon-size".'
                                    ),
                                  ca.addSymbols(
                                    ca.icon,
                                    qy,
                                    vf,
                                    Uy,
                                    ky,
                                    qs,
                                    !1,
                                    Pc,
                                    Zh.lineStartIndex,
                                    Zh.lineLength,
                                    -1,
                                    pu
                                  ),
                                  (Jv = ca.icon.placedSymbolArray.length - 1),
                                  i2 &&
                                    ((jy = 4 * i2.length),
                                    ca.addSymbols(
                                      ca.icon,
                                      i2,
                                      vf,
                                      Uy,
                                      ky,
                                      qs,
                                      kn.vertical,
                                      Pc,
                                      Zh.lineStartIndex,
                                      Zh.lineLength,
                                      -1,
                                      pu
                                    ),
                                    (e2 =
                                      ca.icon.placedSymbolArray.length - 1));
                              }
                              for (var Ky in kd.horizontal) {
                                var wm = kd.horizontal[Ky];
                                if (!k0) {
                                  Gy = de(wm.text);
                                  var hT = hu.layout
                                    .get("text-rotate")
                                    .evaluate(qs, {}, pu);
                                  k0 = new li(
                                    Em,
                                    Pc,
                                    mf,
                                    Am,
                                    Tm,
                                    wm,
                                    Qv,
                                    Ly,
                                    gf,
                                    hT
                                  );
                                }
                                var Qy = wm.positionedLines.length === 1;
                                if (
                                  ((Wy += ve(
                                    ca,
                                    Pc,
                                    wm,
                                    Oy,
                                    hu,
                                    gf,
                                    qs,
                                    Dy,
                                    Zh,
                                    kd.vertical
                                      ? kn.horizontal
                                      : kn.horizontalOnly,
                                    Qy ? Object.keys(kd.horizontal) : [Ky],
                                    Ku,
                                    Jv,
                                    Sm,
                                    pu
                                  )),
                                  Qy)
                                )
                                  break;
                              }
                              kd.vertical &&
                                (Xy += ve(
                                  ca,
                                  Pc,
                                  kd.vertical,
                                  Oy,
                                  hu,
                                  gf,
                                  qs,
                                  Dy,
                                  Zh,
                                  kn.vertical,
                                  ["vertical"],
                                  Ku,
                                  e2,
                                  Sm,
                                  pu
                                ));
                              var pT = k0
                                  ? k0.boxStartIndex
                                  : ca.collisionBoxArray.length,
                                fT = k0
                                  ? k0.boxEndIndex
                                  : ca.collisionBoxArray.length,
                                mT = Xh
                                  ? Xh.boxStartIndex
                                  : ca.collisionBoxArray.length,
                                gT = Xh
                                  ? Xh.boxEndIndex
                                  : ca.collisionBoxArray.length,
                                vT = Wh
                                  ? Wh.boxStartIndex
                                  : ca.collisionBoxArray.length,
                                _T = Wh
                                  ? Wh.boxEndIndex
                                  : ca.collisionBoxArray.length,
                                yT = Gh
                                  ? Gh.boxStartIndex
                                  : ca.collisionBoxArray.length,
                                xT = Gh
                                  ? Gh.boxEndIndex
                                  : ca.collisionBoxArray.length,
                                fu = -1,
                                Cm = function (_f, e4) {
                                  return _f && _f.circleDiameter
                                    ? Math.max(_f.circleDiameter, e4)
                                    : e4;
                                };
                              (fu = Cm(k0, fu)),
                                (fu = Cm(Xh, fu)),
                                (fu = Cm(Wh, fu));
                              var Jy = (fu = Cm(Gh, fu)) > -1 ? 1 : 0;
                              Jy && (fu *= dT / 24),
                                ca.glyphOffsetArray.length >= _n.MAX_GLYPHS &&
                                  He(
                                    "Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"
                                  ),
                                qs.sortKey !== void 0 &&
                                  ca.addToSortKeyRanges(
                                    ca.symbolInstances.length,
                                    qs.sortKey
                                  ),
                                ca.symbolInstances.emplaceBack(
                                  Pc.x,
                                  Pc.y,
                                  Ku.right >= 0 ? Ku.right : -1,
                                  Ku.center >= 0 ? Ku.center : -1,
                                  Ku.left >= 0 ? Ku.left : -1,
                                  Ku.vertical || -1,
                                  Jv,
                                  e2,
                                  Gy,
                                  pT,
                                  fT,
                                  mT,
                                  gT,
                                  vT,
                                  _T,
                                  yT,
                                  xT,
                                  mf,
                                  Wy,
                                  Xy,
                                  Hy,
                                  jy,
                                  Jy,
                                  0,
                                  Qv,
                                  t2,
                                  n2,
                                  fu
                                );
                            })(
                              Dr,
                              ff,
                              cT,
                              ci,
                              Gr,
                              Ko,
                              uu,
                              Dr.layers[0],
                              Dr.collisionBoxArray,
                              _i.index,
                              _i.sourceLayerIndex,
                              Dr.index,
                              B0,
                              pm,
                              fm,
                              Co,
                              qu,
                              kh,
                              mm,
                              du,
                              _i,
                              wo,
                              Qr,
                              cu,
                              Ii
                            );
                        };
                        if ($u === "line")
                          for (
                            var zh = 0, gm = Tl(_i.geometry, 0, 0, 8192, 8192);
                            zh < gm.length;
                            zh += 1
                          )
                            for (
                              var vm = gm[zh],
                                sf = 0,
                                lf = oa(
                                  vm,
                                  Fh,
                                  af,
                                  ci.vertical || Jl,
                                  Gr,
                                  24,
                                  Bh,
                                  Dr.overscaling,
                                  8192
                                );
                              sf < lf.length;
                              sf += 1
                            ) {
                              var _m = lf[sf];
                              (Jl && se(Dr, Jl.text, of, _m)) || Fd(vm, _m);
                            }
                        else if ($u === "line-center")
                          for (
                            var cf = 0, uf = _i.geometry;
                            cf < uf.length;
                            cf += 1
                          ) {
                            var df = uf[cf];
                            if (df.length > 1) {
                              var ym = Vr(
                                df,
                                af,
                                ci.vertical || Jl,
                                Gr,
                                24,
                                Bh
                              );
                              ym && Fd(df, ym);
                            }
                          }
                        else if (_i.type === "Polygon")
                          for (
                            var Vh = 0, xm = Ih(_i.geometry, 0);
                            Vh < xm.length;
                            Vh += 1
                          ) {
                            var Hh = xm[Vh],
                              hf = Ee(Hh, 16);
                            Fd(Hh[0], new ji(hf.x, hf.y, 0));
                          }
                        else if (_i.type === "LineString")
                          for (
                            var F0 = 0, pf = _i.geometry;
                            F0 < pf.length;
                            F0 += 1
                          ) {
                            var jh = pf[F0];
                            Fd(jh, new ji(jh[0].x, jh[0].y, 0));
                          }
                        else if (_i.type === "Point")
                          for (
                            var Yv = 0, My = _i.geometry;
                            Yv < My.length;
                            Yv += 1
                          )
                            for (
                              var qv = 0, Py = My[Yv];
                              qv < Py.length;
                              qv += 1
                            ) {
                              var $v = Py[qv];
                              Fd([$v], new ji($v.x, $v.y, 0));
                            }
                      })(i, lt, dn, io, m, O, Qt, Mn, fn, zo, A);
                },
                Ze = 0,
                at = i.features;
              Ze < at.length;
              Ze += 1
            )
              je();
            y && i.generateCollisionDebugBuffers();
          }),
          (a.perspective = function (i, s, c, m, _) {
            var y,
              A = 1 / Math.tan(s / 2);
            return (
              (i[0] = A / c),
              (i[1] = 0),
              (i[2] = 0),
              (i[3] = 0),
              (i[4] = 0),
              (i[5] = A),
              (i[6] = 0),
              (i[7] = 0),
              (i[8] = 0),
              (i[9] = 0),
              (i[11] = -1),
              (i[12] = 0),
              (i[13] = 0),
              (i[15] = 0),
              _ != null && _ !== 1 / 0
                ? ((i[10] = (_ + m) * (y = 1 / (m - _))),
                  (i[14] = 2 * _ * m * y))
                : ((i[10] = -1), (i[14] = -2 * m)),
              i
            );
          }),
          (a.pick = function (i, s) {
            for (var c = {}, m = 0; m < s.length; m++) {
              var _ = s[m];
              _ in i && (c[_] = i[_]);
            }
            return c;
          }),
          (a.plugin = Yo),
          (a.polygonIntersectsPolygon = Ws),
          (a.postMapLoadEvent = yo),
          (a.postTurnstileEvent = di),
          (a.potpack = rr),
          (a.refProperties = [
            "type",
            "source",
            "source-layer",
            "minzoom",
            "maxzoom",
            "filter",
            "layout",
          ]),
          (a.register = vn),
          (a.registerForPluginStateChange = function (i) {
            return (
              i({ pluginStatus: uo, pluginURL: Vs }),
              Ad.on("pluginStateChange", i),
              i
            );
          }),
          (a.renderColorRamp = Z1),
          (a.rotate = function (i, s, c) {
            var m = s[0],
              _ = s[1],
              y = s[2],
              A = s[3],
              C = Math.sin(c),
              P = Math.cos(c);
            return (
              (i[0] = m * P + y * C),
              (i[1] = _ * P + A * C),
              (i[2] = m * -C + y * P),
              (i[3] = _ * -C + A * P),
              i
            );
          }),
          (a.rotateX = function (i, s, c) {
            var m = Math.sin(c),
              _ = Math.cos(c),
              y = s[4],
              A = s[5],
              C = s[6],
              P = s[7],
              O = s[8],
              k = s[9],
              U = s[10],
              W = s[11];
            return (
              s !== i &&
                ((i[0] = s[0]),
                (i[1] = s[1]),
                (i[2] = s[2]),
                (i[3] = s[3]),
                (i[12] = s[12]),
                (i[13] = s[13]),
                (i[14] = s[14]),
                (i[15] = s[15])),
              (i[4] = y * _ + O * m),
              (i[5] = A * _ + k * m),
              (i[6] = C * _ + U * m),
              (i[7] = P * _ + W * m),
              (i[8] = O * _ - y * m),
              (i[9] = k * _ - A * m),
              (i[10] = U * _ - C * m),
              (i[11] = W * _ - P * m),
              i
            );
          }),
          (a.rotateZ = function (i, s, c) {
            var m = Math.sin(c),
              _ = Math.cos(c),
              y = s[0],
              A = s[1],
              C = s[2],
              P = s[3],
              O = s[4],
              k = s[5],
              U = s[6],
              W = s[7];
            return (
              s !== i &&
                ((i[8] = s[8]),
                (i[9] = s[9]),
                (i[10] = s[10]),
                (i[11] = s[11]),
                (i[12] = s[12]),
                (i[13] = s[13]),
                (i[14] = s[14]),
                (i[15] = s[15])),
              (i[0] = y * _ + O * m),
              (i[1] = A * _ + k * m),
              (i[2] = C * _ + U * m),
              (i[3] = P * _ + W * m),
              (i[4] = O * _ - y * m),
              (i[5] = k * _ - A * m),
              (i[6] = U * _ - C * m),
              (i[7] = W * _ - P * m),
              i
            );
          }),
          (a.scale = function (i, s, c) {
            var m = c[0],
              _ = c[1],
              y = c[2];
            return (
              (i[0] = s[0] * m),
              (i[1] = s[1] * m),
              (i[2] = s[2] * m),
              (i[3] = s[3] * m),
              (i[4] = s[4] * _),
              (i[5] = s[5] * _),
              (i[6] = s[6] * _),
              (i[7] = s[7] * _),
              (i[8] = s[8] * y),
              (i[9] = s[9] * y),
              (i[10] = s[10] * y),
              (i[11] = s[11] * y),
              (i[12] = s[12]),
              (i[13] = s[13]),
              (i[14] = s[14]),
              (i[15] = s[15]),
              i
            );
          }),
          (a.scale$1 = function (i, s, c) {
            return (
              (i[0] = s[0] * c),
              (i[1] = s[1] * c),
              (i[2] = s[2] * c),
              (i[3] = s[3] * c),
              i
            );
          }),
          (a.scale$2 = function (i, s, c) {
            return (i[0] = s[0] * c), (i[1] = s[1] * c), (i[2] = s[2] * c), i;
          }),
          (a.setCacheLimits = function (i, s) {
            (Oa = i), (Os = s);
          }),
          (a.setRTLTextPlugin = function (i, s, c) {
            if (
              (c === void 0 && (c = !1),
              uo === "deferred" || uo === "loading" || uo === "loaded")
            )
              throw new Error(
                "setRTLTextPlugin cannot be called multiple times."
              );
            (Vs = Fi.resolveURL(i)),
              (uo = "deferred"),
              (Ed = s),
              Kc(),
              c || Do();
          }),
          (a.sphericalToCartesian = function (i) {
            var s = i[0],
              c = i[1],
              m = i[2];
            return (
              (c += 90),
              (c *= Math.PI / 180),
              (m *= Math.PI / 180),
              {
                x: s * Math.cos(c) * Math.sin(m),
                y: s * Math.sin(c) * Math.sin(m),
                z: s * Math.cos(m),
              }
            );
          }),
          (a.sqrLen = function (i) {
            var s = i[0],
              c = i[1];
            return s * s + c * c;
          }),
          (a.styleSpec = te),
          (a.sub = function (i, s, c) {
            return (
              (i[0] = s[0] - c[0]),
              (i[1] = s[1] - c[1]),
              (i[2] = s[2] - c[2]),
              i
            );
          }),
          (a.symbolSize = fr),
          (a.transformMat3 = function (i, s, c) {
            var m = s[0],
              _ = s[1],
              y = s[2];
            return (
              (i[0] = m * c[0] + _ * c[3] + y * c[6]),
              (i[1] = m * c[1] + _ * c[4] + y * c[7]),
              (i[2] = m * c[2] + _ * c[5] + y * c[8]),
              i
            );
          }),
          (a.transformMat4 = Kl),
          (a.translate = function (i, s, c) {
            var m,
              _,
              y,
              A,
              C,
              P,
              O,
              k,
              U,
              W,
              $,
              he,
              me = c[0],
              Ie = c[1],
              Te = c[2];
            return (
              s === i
                ? ((i[12] = s[0] * me + s[4] * Ie + s[8] * Te + s[12]),
                  (i[13] = s[1] * me + s[5] * Ie + s[9] * Te + s[13]),
                  (i[14] = s[2] * me + s[6] * Ie + s[10] * Te + s[14]),
                  (i[15] = s[3] * me + s[7] * Ie + s[11] * Te + s[15]))
                : ((_ = s[1]),
                  (y = s[2]),
                  (A = s[3]),
                  (C = s[4]),
                  (P = s[5]),
                  (O = s[6]),
                  (k = s[7]),
                  (U = s[8]),
                  (W = s[9]),
                  ($ = s[10]),
                  (he = s[11]),
                  (i[0] = m = s[0]),
                  (i[1] = _),
                  (i[2] = y),
                  (i[3] = A),
                  (i[4] = C),
                  (i[5] = P),
                  (i[6] = O),
                  (i[7] = k),
                  (i[8] = U),
                  (i[9] = W),
                  (i[10] = $),
                  (i[11] = he),
                  (i[12] = m * me + C * Ie + U * Te + s[12]),
                  (i[13] = _ * me + P * Ie + W * Te + s[13]),
                  (i[14] = y * me + O * Ie + $ * Te + s[14]),
                  (i[15] = A * me + k * Ie + he * Te + s[15])),
              i
            );
          }),
          (a.triggerPluginCompletionEvent = Ah),
          (a.uniqueId = Q),
          (a.validateCustomStyleLayer = function (i) {
            var s = [],
              c = i.id;
            return (
              c === void 0 &&
                s.push({
                  message: "layers." + c + ': missing required property "id"',
                }),
              i.render === void 0 &&
                s.push({
                  message: "layers." + c + ': missing required method "render"',
                }),
              i.renderingMode &&
                i.renderingMode !== "2d" &&
                i.renderingMode !== "3d" &&
                s.push({
                  message:
                    "layers." +
                    c +
                    ': property "renderingMode" must be either "2d" or "3d"',
                }),
              s
            );
          }),
          (a.validateLight = Eh),
          (a.validateStyle = Ou),
          (a.values = function (i) {
            var s = [];
            for (var c in i) s.push(i[c]);
            return s;
          }),
          (a.vectorTile = lu),
          (a.version = "1.13.3"),
          (a.warnOnce = He),
          (a.webpSupported = $t),
          (a.window = T),
          (a.wrap = X);
      }),
      l(["./shared"], function (a) {
        function h(z) {
          var j = typeof z;
          if (j === "number" || j === "boolean" || j === "string" || z == null)
            return JSON.stringify(z);
          if (Array.isArray(z)) {
            for (var Z = "[", ae = 0, fe = z; ae < fe.length; ae += 1)
              Z += h(fe[ae]) + ",";
            return Z + "]";
          }
          for (
            var Pe = Object.keys(z).sort(), Fe = "{", te = 0;
            te < Pe.length;
            te++
          )
            Fe += JSON.stringify(Pe[te]) + ":" + h(z[Pe[te]]) + ",";
          return Fe + "}";
        }
        function f(z) {
          for (var j = "", Z = 0, ae = a.refProperties; Z < ae.length; Z += 1)
            j += "/" + h(z[ae[Z]]);
          return j;
        }
        var v = function (z) {
          (this.keyCache = {}), z && this.replace(z);
        };
        (v.prototype.replace = function (z) {
          (this._layerConfigs = {}), (this._layers = {}), this.update(z, []);
        }),
          (v.prototype.update = function (z, j) {
            for (var Z = this, ae = 0, fe = z; ae < fe.length; ae += 1) {
              var Pe = fe[ae];
              this._layerConfigs[Pe.id] = Pe;
              var Fe = (this._layers[Pe.id] = a.createStyleLayer(Pe));
              (Fe._featureFilter = a.featureFilter(Fe.filter)),
                this.keyCache[Pe.id] && delete this.keyCache[Pe.id];
            }
            for (var te = 0, ye = j; te < ye.length; te += 1) {
              var Xe = ye[te];
              delete this.keyCache[Xe],
                delete this._layerConfigs[Xe],
                delete this._layers[Xe];
            }
            this.familiesBySource = {};
            for (
              var gt = 0,
                Ot = (function (Gt, qt) {
                  for (var or = {}, nn = 0; nn < Gt.length; nn++) {
                    var wr = (qt && qt[Gt[nn].id]) || f(Gt[nn]);
                    qt && (qt[Gt[nn].id] = wr);
                    var ti = or[wr];
                    ti || (ti = or[wr] = []), ti.push(Gt[nn]);
                  }
                  var xr = [];
                  for (var Or in or) xr.push(or[Or]);
                  return xr;
                })(a.values(this._layerConfigs), this.keyCache);
              gt < Ot.length;
              gt += 1
            ) {
              var dt = Ot[gt].map(function (Gt) {
                  return Z._layers[Gt.id];
                }),
                Nt = dt[0];
              if (Nt.visibility !== "none") {
                var yn = Nt.source || "",
                  mn = this.familiesBySource[yn];
                mn || (mn = this.familiesBySource[yn] = {});
                var pt = Nt.sourceLayer || "_geojsonTileLayer",
                  on = mn[pt];
                on || (on = mn[pt] = []), on.push(dt);
              }
            }
          });
        var E = function (z) {
          var j = {},
            Z = [];
          for (var ae in z) {
            var fe = z[ae],
              Pe = (j[ae] = {});
            for (var Fe in fe) {
              var te = fe[+Fe];
              if (te && te.bitmap.width !== 0 && te.bitmap.height !== 0) {
                var ye = {
                  x: 0,
                  y: 0,
                  w: te.bitmap.width + 2,
                  h: te.bitmap.height + 2,
                };
                Z.push(ye), (Pe[Fe] = { rect: ye, metrics: te.metrics });
              }
            }
          }
          var Xe = a.potpack(Z),
            gt = new a.AlphaImage({ width: Xe.w || 1, height: Xe.h || 1 });
          for (var Ot in z) {
            var dt = z[Ot];
            for (var Nt in dt) {
              var yn = dt[+Nt];
              if (yn && yn.bitmap.width !== 0 && yn.bitmap.height !== 0) {
                var mn = j[Ot][Nt].rect;
                a.AlphaImage.copy(
                  yn.bitmap,
                  gt,
                  { x: 0, y: 0 },
                  { x: mn.x + 1, y: mn.y + 1 },
                  yn.bitmap
                );
              }
            }
          }
          (this.image = gt), (this.positions = j);
        };
        a.register("GlyphAtlas", E);
        var x = function (z) {
          (this.tileID = new a.OverscaledTileID(
            z.tileID.overscaledZ,
            z.tileID.wrap,
            z.tileID.canonical.z,
            z.tileID.canonical.x,
            z.tileID.canonical.y
          )),
            (this.uid = z.uid),
            (this.zoom = z.zoom),
            (this.pixelRatio = z.pixelRatio),
            (this.tileSize = z.tileSize),
            (this.source = z.source),
            (this.overscaling = this.tileID.overscaleFactor()),
            (this.showCollisionBoxes = z.showCollisionBoxes),
            (this.collectResourceTiming = !!z.collectResourceTiming),
            (this.returnDependencies = !!z.returnDependencies),
            (this.promoteId = z.promoteId);
        };
        function T(z, j, Z) {
          for (
            var ae = new a.EvaluationParameters(j), fe = 0, Pe = z;
            fe < Pe.length;
            fe += 1
          )
            Pe[fe].recalculate(ae, Z);
        }
        function N(z, j) {
          var Z = a.getArrayBuffer(z.request, function (ae, fe, Pe, Fe) {
            ae
              ? j(ae)
              : fe &&
                j(null, {
                  vectorTile: new a.vectorTile.VectorTile(new a.pbf(fe)),
                  rawData: fe,
                  cacheControl: Pe,
                  expires: Fe,
                });
          });
          return function () {
            Z.cancel(), j();
          };
        }
        x.prototype.parse = function (z, j, Z, ae, fe) {
          var Pe = this;
          (this.status = "parsing"),
            (this.data = z),
            (this.collisionBoxArray = new a.CollisionBoxArray());
          var Fe = new a.DictionaryCoder(Object.keys(z.layers).sort()),
            te = new a.FeatureIndex(this.tileID, this.promoteId);
          te.bucketLayerIDs = [];
          var ye,
            Xe,
            gt,
            Ot,
            dt = {},
            Nt = {
              featureIndex: te,
              iconDependencies: {},
              patternDependencies: {},
              glyphDependencies: {},
              availableImages: Z,
            },
            yn = j.familiesBySource[this.source];
          for (var mn in yn) {
            var pt = z.layers[mn];
            if (pt) {
              pt.version === 1 &&
                a.warnOnce(
                  'Vector tile source "' +
                    this.source +
                    '" layer "' +
                    mn +
                    '" does not use vector tile spec v2 and therefore may have some rendering errors.'
                );
              for (
                var on = Fe.encode(mn), Gt = [], qt = 0;
                qt < pt.length;
                qt++
              ) {
                var or = pt.feature(qt),
                  nn = te.getId(or, mn);
                Gt.push({
                  feature: or,
                  id: nn,
                  index: qt,
                  sourceLayerIndex: on,
                });
              }
              for (var wr = 0, ti = yn[mn]; wr < ti.length; wr += 1) {
                var xr = ti[wr],
                  Or = xr[0];
                (Or.minzoom && this.zoom < Math.floor(Or.minzoom)) ||
                  (Or.maxzoom && this.zoom >= Or.maxzoom) ||
                  (Or.visibility !== "none" &&
                    (T(xr, this.zoom, Z),
                    (dt[Or.id] = Or.createBucket({
                      index: te.bucketLayerIDs.length,
                      layers: xr,
                      zoom: this.zoom,
                      pixelRatio: this.pixelRatio,
                      overscaling: this.overscaling,
                      collisionBoxArray: this.collisionBoxArray,
                      sourceLayerIndex: on,
                      sourceID: this.source,
                    })).populate(Gt, Nt, this.tileID.canonical),
                    te.bucketLayerIDs.push(
                      xr.map(function (zr) {
                        return zr.id;
                      })
                    )));
              }
            }
          }
          var sr = a.mapObject(Nt.glyphDependencies, function (zr) {
            return Object.keys(zr).map(Number);
          });
          Object.keys(sr).length
            ? ae.send(
                "getGlyphs",
                { uid: this.uid, stacks: sr },
                function (zr, lr) {
                  ye || ((ye = zr), (Xe = lr), ni.call(Pe));
                }
              )
            : (Xe = {});
          var Xi = Object.keys(Nt.iconDependencies);
          Xi.length
            ? ae.send(
                "getImages",
                {
                  icons: Xi,
                  source: this.source,
                  tileID: this.tileID,
                  type: "icons",
                },
                function (zr, lr) {
                  ye || ((ye = zr), (gt = lr), ni.call(Pe));
                }
              )
            : (gt = {});
          var Rr = Object.keys(Nt.patternDependencies);
          function ni() {
            if (ye) return fe(ye);
            if (Xe && gt && Ot) {
              var zr = new E(Xe),
                lr = new a.ImageAtlas(gt, Ot);
              for (var br in dt) {
                var ja = dt[br];
                ja instanceof a.SymbolBucket
                  ? (T(ja.layers, this.zoom, Z),
                    a.performSymbolLayout(
                      ja,
                      Xe,
                      zr.positions,
                      gt,
                      lr.iconPositions,
                      this.showCollisionBoxes,
                      this.tileID.canonical
                    ))
                  : ja.hasPattern &&
                    (ja instanceof a.LineBucket ||
                      ja instanceof a.FillBucket ||
                      ja instanceof a.FillExtrusionBucket) &&
                    (T(ja.layers, this.zoom, Z),
                    ja.addFeatures(
                      Nt,
                      this.tileID.canonical,
                      lr.patternPositions
                    ));
              }
              (this.status = "done"),
                fe(null, {
                  buckets: a.values(dt).filter(function (Rl) {
                    return !Rl.isEmpty();
                  }),
                  featureIndex: te,
                  collisionBoxArray: this.collisionBoxArray,
                  glyphAtlasImage: zr.image,
                  imageAtlas: lr,
                  glyphMap: this.returnDependencies ? Xe : null,
                  iconMap: this.returnDependencies ? gt : null,
                  glyphPositions: this.returnDependencies ? zr.positions : null,
                });
            }
          }
          Rr.length
            ? ae.send(
                "getImages",
                {
                  icons: Rr,
                  source: this.source,
                  tileID: this.tileID,
                  type: "patterns",
                },
                function (zr, lr) {
                  ye || ((ye = zr), (Ot = lr), ni.call(Pe));
                }
              )
            : (Ot = {}),
            ni.call(this);
        };
        var I = function (z, j, Z, ae) {
          (this.actor = z),
            (this.layerIndex = j),
            (this.availableImages = Z),
            (this.loadVectorData = ae || N),
            (this.loading = {}),
            (this.loaded = {});
        };
        (I.prototype.loadTile = function (z, j) {
          var Z = this,
            ae = z.uid;
          this.loading || (this.loading = {});
          var fe =
              !!(z && z.request && z.request.collectResourceTiming) &&
              new a.RequestPerformance(z.request),
            Pe = (this.loading[ae] = new x(z));
          Pe.abort = this.loadVectorData(z, function (Fe, te) {
            if ((delete Z.loading[ae], Fe || !te))
              return (Pe.status = "done"), (Z.loaded[ae] = Pe), j(Fe);
            var ye = te.rawData,
              Xe = {};
            te.expires && (Xe.expires = te.expires),
              te.cacheControl && (Xe.cacheControl = te.cacheControl);
            var gt = {};
            if (fe) {
              var Ot = fe.finish();
              Ot && (gt.resourceTiming = JSON.parse(JSON.stringify(Ot)));
            }
            (Pe.vectorTile = te.vectorTile),
              Pe.parse(
                te.vectorTile,
                Z.layerIndex,
                Z.availableImages,
                Z.actor,
                function (dt, Nt) {
                  if (dt || !Nt) return j(dt);
                  j(null, a.extend({ rawTileData: ye.slice(0) }, Nt, Xe, gt));
                }
              ),
              (Z.loaded = Z.loaded || {}),
              (Z.loaded[ae] = Pe);
          });
        }),
          (I.prototype.reloadTile = function (z, j) {
            var Z = this,
              ae = this.loaded,
              fe = z.uid,
              Pe = this;
            if (ae && ae[fe]) {
              var Fe = ae[fe];
              Fe.showCollisionBoxes = z.showCollisionBoxes;
              var te = function (ye, Xe) {
                var gt = Fe.reloadCallback;
                gt &&
                  (delete Fe.reloadCallback,
                  Fe.parse(
                    Fe.vectorTile,
                    Pe.layerIndex,
                    Z.availableImages,
                    Pe.actor,
                    gt
                  )),
                  j(ye, Xe);
              };
              Fe.status === "parsing"
                ? (Fe.reloadCallback = te)
                : Fe.status === "done" &&
                  (Fe.vectorTile
                    ? Fe.parse(
                        Fe.vectorTile,
                        this.layerIndex,
                        this.availableImages,
                        this.actor,
                        te
                      )
                    : te());
            }
          }),
          (I.prototype.abortTile = function (z, j) {
            var Z = this.loading,
              ae = z.uid;
            Z && Z[ae] && Z[ae].abort && (Z[ae].abort(), delete Z[ae]), j();
          }),
          (I.prototype.removeTile = function (z, j) {
            var Z = this.loaded,
              ae = z.uid;
            Z && Z[ae] && delete Z[ae], j();
          });
        var L = a.window.ImageBitmap,
          F = function () {
            this.loaded = {};
          };
        function X(z, j) {
          if (z.length !== 0) {
            G(z[0], j);
            for (var Z = 1; Z < z.length; Z++) G(z[Z], !j);
          }
        }
        function G(z, j) {
          for (
            var Z = 0, ae = 0, fe = 0, Pe = z.length, Fe = Pe - 1;
            fe < Pe;
            Fe = fe++
          ) {
            var te = (z[fe][0] - z[Fe][0]) * (z[Fe][1] + z[fe][1]),
              ye = Z + te;
            (ae += Math.abs(Z) >= Math.abs(te) ? Z - ye + te : te - ye + Z),
              (Z = ye);
          }
          Z + ae >= 0 != !!j && z.reverse();
        }
        (F.prototype.loadTile = function (z, j) {
          var Z = z.uid,
            ae = z.encoding,
            fe = z.rawImageData,
            Pe = L && fe instanceof L ? this.getImageData(fe) : fe,
            Fe = new a.DEMData(Z, Pe, ae);
          (this.loaded = this.loaded || {}), (this.loaded[Z] = Fe), j(null, Fe);
        }),
          (F.prototype.getImageData = function (z) {
            (this.offscreenCanvas && this.offscreenCanvasContext) ||
              ((this.offscreenCanvas = new OffscreenCanvas(z.width, z.height)),
              (this.offscreenCanvasContext =
                this.offscreenCanvas.getContext("2d"))),
              (this.offscreenCanvas.width = z.width),
              (this.offscreenCanvas.height = z.height),
              this.offscreenCanvasContext.drawImage(z, 0, 0, z.width, z.height);
            var j = this.offscreenCanvasContext.getImageData(
              -1,
              -1,
              z.width + 2,
              z.height + 2
            );
            return (
              this.offscreenCanvasContext.clearRect(
                0,
                0,
                this.offscreenCanvas.width,
                this.offscreenCanvas.height
              ),
              new a.RGBAImage({ width: j.width, height: j.height }, j.data)
            );
          }),
          (F.prototype.removeTile = function (z) {
            var j = this.loaded,
              Z = z.uid;
            j && j[Z] && delete j[Z];
          });
        var K = a.vectorTile.VectorTileFeature.prototype.toGeoJSON,
          Q = function (z) {
            (this._feature = z),
              (this.extent = a.EXTENT),
              (this.type = z.type),
              (this.properties = z.tags),
              "id" in z && !isNaN(z.id) && (this.id = parseInt(z.id, 10));
          };
        (Q.prototype.loadGeometry = function () {
          if (this._feature.type === 1) {
            for (
              var z = [], j = 0, Z = this._feature.geometry;
              j < Z.length;
              j += 1
            ) {
              var ae = Z[j];
              z.push([new a.Point$1(ae[0], ae[1])]);
            }
            return z;
          }
          for (
            var fe = [], Pe = 0, Fe = this._feature.geometry;
            Pe < Fe.length;
            Pe += 1
          ) {
            for (var te = [], ye = 0, Xe = Fe[Pe]; ye < Xe.length; ye += 1) {
              var gt = Xe[ye];
              te.push(new a.Point$1(gt[0], gt[1]));
            }
            fe.push(te);
          }
          return fe;
        }),
          (Q.prototype.toGeoJSON = function (z, j, Z) {
            return K.call(this, z, j, Z);
          });
        var ee = function (z) {
          (this.layers = { _geojsonTileLayer: this }),
            (this.name = "_geojsonTileLayer"),
            (this.extent = a.EXTENT),
            (this.length = z.length),
            (this._features = z);
        };
        ee.prototype.feature = function (z) {
          return new Q(this._features[z]);
        };
        var Se = a.vectorTile.VectorTileFeature,
          ue = ke;
        function ke(z, j) {
          (this.options = j || {}),
            (this.features = z),
            (this.length = z.length);
        }
        function ut(z, j) {
          (this.id = typeof z.id == "number" ? z.id : void 0),
            (this.type = z.type),
            (this.rawGeometry = z.type === 1 ? [z.geometry] : z.geometry),
            (this.properties = z.tags),
            (this.extent = j || 4096);
        }
        (ke.prototype.feature = function (z) {
          return new ut(this.features[z], this.options.extent);
        }),
          (ut.prototype.loadGeometry = function () {
            var z = this.rawGeometry;
            this.geometry = [];
            for (var j = 0; j < z.length; j++) {
              for (var Z = z[j], ae = [], fe = 0; fe < Z.length; fe++)
                ae.push(new a.Point$1(Z[fe][0], Z[fe][1]));
              this.geometry.push(ae);
            }
            return this.geometry;
          }),
          (ut.prototype.bbox = function () {
            this.geometry || this.loadGeometry();
            for (
              var z = this.geometry,
                j = 1 / 0,
                Z = -1 / 0,
                ae = 1 / 0,
                fe = -1 / 0,
                Pe = 0;
              Pe < z.length;
              Pe++
            )
              for (var Fe = z[Pe], te = 0; te < Fe.length; te++) {
                var ye = Fe[te];
                (j = Math.min(j, ye.x)),
                  (Z = Math.max(Z, ye.x)),
                  (ae = Math.min(ae, ye.y)),
                  (fe = Math.max(fe, ye.y));
              }
            return [j, ae, Z, fe];
          }),
          (ut.prototype.toGeoJSON = Se.prototype.toGeoJSON);
        var Ve = Be,
          Ae = ue;
        function Be(z) {
          var j = new a.pbf();
          return (
            (function (Z, ae) {
              for (var fe in Z.layers) ae.writeMessage(3, He, Z.layers[fe]);
            })(z, j),
            j.finish()
          );
        }
        function He(z, j) {
          var Z;
          j.writeVarintField(15, z.version || 1),
            j.writeStringField(1, z.name || ""),
            j.writeVarintField(5, z.extent || 4096);
          var ae = { keys: [], values: [], keycache: {}, valuecache: {} };
          for (Z = 0; Z < z.length; Z++)
            (ae.feature = z.feature(Z)), j.writeMessage(2, nt, ae);
          var fe = ae.keys;
          for (Z = 0; Z < fe.length; Z++) j.writeStringField(3, fe[Z]);
          var Pe = ae.values;
          for (Z = 0; Z < Pe.length; Z++) j.writeMessage(4, gn, Pe[Z]);
        }
        function nt(z, j) {
          var Z = z.feature;
          Z.id !== void 0 && j.writeVarintField(1, Z.id),
            j.writeMessage(2, Ut, z),
            j.writeVarintField(3, Z.type),
            j.writeMessage(4, On, Z);
        }
        function Ut(z, j) {
          var Z = z.feature,
            ae = z.keys,
            fe = z.values,
            Pe = z.keycache,
            Fe = z.valuecache;
          for (var te in Z.properties) {
            var ye = Pe[te];
            ye === void 0 && (ae.push(te), (Pe[te] = ye = ae.length - 1)),
              j.writeVarint(ye);
            var Xe = Z.properties[te],
              gt = typeof Xe;
            gt !== "string" &&
              gt !== "boolean" &&
              gt !== "number" &&
              (Xe = JSON.stringify(Xe));
            var Ot = gt + ":" + Xe,
              dt = Fe[Ot];
            dt === void 0 && (fe.push(Xe), (Fe[Ot] = dt = fe.length - 1)),
              j.writeVarint(dt);
          }
        }
        function Yt(z, j) {
          return (j << 3) + (7 & z);
        }
        function Ht(z) {
          return (z << 1) ^ (z >> 31);
        }
        function On(z, j) {
          for (
            var Z = z.loadGeometry(),
              ae = z.type,
              fe = 0,
              Pe = 0,
              Fe = Z.length,
              te = 0;
            te < Fe;
            te++
          ) {
            var ye = Z[te],
              Xe = 1;
            ae === 1 && (Xe = ye.length), j.writeVarint(Yt(1, Xe));
            for (
              var gt = ae === 3 ? ye.length - 1 : ye.length, Ot = 0;
              Ot < gt;
              Ot++
            ) {
              Ot === 1 && ae !== 1 && j.writeVarint(Yt(2, gt - 1));
              var dt = ye[Ot].x - fe,
                Nt = ye[Ot].y - Pe;
              j.writeVarint(Ht(dt)),
                j.writeVarint(Ht(Nt)),
                (fe += dt),
                (Pe += Nt);
            }
            ae === 3 && j.writeVarint(Yt(7, 1));
          }
        }
        function gn(z, j) {
          var Z = typeof z;
          Z === "string"
            ? j.writeStringField(1, z)
            : Z === "boolean"
            ? j.writeBooleanField(7, z)
            : Z === "number" &&
              (z % 1 != 0
                ? j.writeDoubleField(3, z)
                : z < 0
                ? j.writeSVarintField(6, z)
                : j.writeVarintField(5, z));
        }
        function xn(z, j, Z, ae) {
          Kn(z, Z, ae), Kn(j, 2 * Z, 2 * ae), Kn(j, 2 * Z + 1, 2 * ae + 1);
        }
        function Kn(z, j, Z) {
          var ae = z[j];
          (z[j] = z[Z]), (z[Z] = ae);
        }
        function er(z, j, Z, ae) {
          var fe = z - Z,
            Pe = j - ae;
          return fe * fe + Pe * Pe;
        }
        (Ve.fromVectorTileJs = Be),
          (Ve.fromGeojsonVt = function (z, j) {
            j = j || {};
            var Z = {};
            for (var ae in z)
              (Z[ae] = new ue(z[ae].features, j)),
                (Z[ae].name = ae),
                (Z[ae].version = j.version),
                (Z[ae].extent = j.extent);
            return Be({ layers: Z });
          }),
          (Ve.GeoJSONWrapper = Ae);
        var _r = function (z) {
            return z[0];
          },
          Nr = function (z) {
            return z[1];
          },
          ir = function (z, j, Z, ae, fe) {
            j === void 0 && (j = _r),
              Z === void 0 && (Z = Nr),
              ae === void 0 && (ae = 64),
              fe === void 0 && (fe = Float64Array),
              (this.nodeSize = ae),
              (this.points = z);
            for (
              var Pe = z.length < 65536 ? Uint16Array : Uint32Array,
                Fe = (this.ids = new Pe(z.length)),
                te = (this.coords = new fe(2 * z.length)),
                ye = 0;
              ye < z.length;
              ye++
            )
              (Fe[ye] = ye),
                (te[2 * ye] = j(z[ye])),
                (te[2 * ye + 1] = Z(z[ye]));
            (function Xe(gt, Ot, dt, Nt, yn, mn) {
              if (!(yn - Nt <= dt)) {
                var pt = (Nt + yn) >> 1;
                (function on(Gt, qt, or, nn, wr, ti) {
                  for (; wr > nn; ) {
                    if (wr - nn > 600) {
                      var xr = wr - nn + 1,
                        Or = or - nn + 1,
                        sr = Math.log(xr),
                        Xi = 0.5 * Math.exp((2 * sr) / 3),
                        Rr =
                          0.5 *
                          Math.sqrt((sr * Xi * (xr - Xi)) / xr) *
                          (Or - xr / 2 < 0 ? -1 : 1);
                      on(
                        Gt,
                        qt,
                        or,
                        Math.max(nn, Math.floor(or - (Or * Xi) / xr + Rr)),
                        Math.min(
                          wr,
                          Math.floor(or + ((xr - Or) * Xi) / xr + Rr)
                        ),
                        ti
                      );
                    }
                    var ni = qt[2 * or + ti],
                      zr = nn,
                      lr = wr;
                    for (
                      xn(Gt, qt, nn, or),
                        qt[2 * wr + ti] > ni && xn(Gt, qt, nn, wr);
                      zr < lr;

                    ) {
                      for (
                        xn(Gt, qt, zr, lr), zr++, lr--;
                        qt[2 * zr + ti] < ni;

                      )
                        zr++;
                      for (; qt[2 * lr + ti] > ni; ) lr--;
                    }
                    qt[2 * nn + ti] === ni
                      ? xn(Gt, qt, nn, lr)
                      : xn(Gt, qt, ++lr, wr),
                      lr <= or && (nn = lr + 1),
                      or <= lr && (wr = lr - 1);
                  }
                })(gt, Ot, pt, Nt, yn, mn % 2),
                  Xe(gt, Ot, dt, Nt, pt - 1, mn + 1),
                  Xe(gt, Ot, dt, pt + 1, yn, mn + 1);
              }
            })(Fe, te, ae, 0, Fe.length - 1, 0);
          };
        (ir.prototype.range = function (z, j, Z, ae) {
          return (function (fe, Pe, Fe, te, ye, Xe, gt) {
            for (var Ot, dt, Nt = [0, fe.length - 1, 0], yn = []; Nt.length; ) {
              var mn = Nt.pop(),
                pt = Nt.pop(),
                on = Nt.pop();
              if (pt - on <= gt)
                for (var Gt = on; Gt <= pt; Gt++)
                  (dt = Pe[2 * Gt + 1]),
                    (Ot = Pe[2 * Gt]) >= Fe &&
                      Ot <= ye &&
                      dt >= te &&
                      dt <= Xe &&
                      yn.push(fe[Gt]);
              else {
                var qt = Math.floor((on + pt) / 2);
                (dt = Pe[2 * qt + 1]),
                  (Ot = Pe[2 * qt]) >= Fe &&
                    Ot <= ye &&
                    dt >= te &&
                    dt <= Xe &&
                    yn.push(fe[qt]);
                var or = (mn + 1) % 2;
                (mn === 0 ? Fe <= Ot : te <= dt) &&
                  (Nt.push(on), Nt.push(qt - 1), Nt.push(or)),
                  (mn === 0 ? ye >= Ot : Xe >= dt) &&
                    (Nt.push(qt + 1), Nt.push(pt), Nt.push(or));
              }
            }
            return yn;
          })(this.ids, this.coords, z, j, Z, ae, this.nodeSize);
        }),
          (ir.prototype.within = function (z, j, Z) {
            return (function (ae, fe, Pe, Fe, te, ye) {
              for (
                var Xe = [0, ae.length - 1, 0], gt = [], Ot = te * te;
                Xe.length;

              ) {
                var dt = Xe.pop(),
                  Nt = Xe.pop(),
                  yn = Xe.pop();
                if (Nt - yn <= ye)
                  for (var mn = yn; mn <= Nt; mn++)
                    er(fe[2 * mn], fe[2 * mn + 1], Pe, Fe) <= Ot &&
                      gt.push(ae[mn]);
                else {
                  var pt = Math.floor((yn + Nt) / 2),
                    on = fe[2 * pt],
                    Gt = fe[2 * pt + 1];
                  er(on, Gt, Pe, Fe) <= Ot && gt.push(ae[pt]);
                  var qt = (dt + 1) % 2;
                  (dt === 0 ? Pe - te <= on : Fe - te <= Gt) &&
                    (Xe.push(yn), Xe.push(pt - 1), Xe.push(qt)),
                    (dt === 0 ? Pe + te >= on : Fe + te >= Gt) &&
                      (Xe.push(pt + 1), Xe.push(Nt), Xe.push(qt));
                }
              }
              return gt;
            })(this.ids, this.coords, z, j, Z, this.nodeSize);
          });
        var $i = {
            minZoom: 0,
            maxZoom: 16,
            minPoints: 2,
            radius: 40,
            extent: 512,
            nodeSize: 64,
            log: !1,
            generateId: !1,
            reduce: null,
            map: function (z) {
              return z;
            },
          },
          Tr = function (z) {
            (this.options = ar(Object.create($i), z)),
              (this.trees = new Array(this.options.maxZoom + 1));
          };
        function Fi(z, j, Z, ae, fe) {
          return {
            x: z,
            y: j,
            zoom: 1 / 0,
            id: Z,
            parentId: -1,
            numPoints: ae,
            properties: fe,
          };
        }
        function qe(z, j) {
          var Z = z.geometry.coordinates,
            ae = Z[1];
          return {
            x: St(Z[0]),
            y: An(ae),
            zoom: 1 / 0,
            index: j,
            parentId: -1,
          };
        }
        function $t(z) {
          return {
            type: "Feature",
            id: z.id,
            properties: Cn(z),
            geometry: {
              type: "Point",
              coordinates: [
                ((ae = z.x), 360 * (ae - 0.5)),
                ((j = z.y),
                (Z = ((180 - 360 * j) * Math.PI) / 180),
                (360 * Math.atan(Math.exp(Z))) / Math.PI - 90),
              ],
            },
          };
          var j, Z, ae;
        }
        function Cn(z) {
          var j = z.numPoints,
            Z =
              j >= 1e4
                ? Math.round(j / 1e3) + "k"
                : j >= 1e3
                ? Math.round(j / 100) / 10 + "k"
                : j;
          return ar(ar({}, z.properties), {
            cluster: !0,
            cluster_id: z.id,
            point_count: j,
            point_count_abbreviated: Z,
          });
        }
        function St(z) {
          return z / 360 + 0.5;
        }
        function An(z) {
          var j = Math.sin((z * Math.PI) / 180),
            Z = 0.5 - (0.25 * Math.log((1 + j) / (1 - j))) / Math.PI;
          return Z < 0 ? 0 : Z > 1 ? 1 : Z;
        }
        function ar(z, j) {
          for (var Z in j) z[Z] = j[Z];
          return z;
        }
        function yr(z) {
          return z.x;
        }
        function nr(z) {
          return z.y;
        }
        function Qn(z, j, Z, ae, fe, Pe) {
          var Fe = fe - Z,
            te = Pe - ae;
          if (Fe !== 0 || te !== 0) {
            var ye = ((z - Z) * Fe + (j - ae) * te) / (Fe * Fe + te * te);
            ye > 1
              ? ((Z = fe), (ae = Pe))
              : ye > 0 && ((Z += Fe * ye), (ae += te * ye));
          }
          return (Fe = z - Z) * Fe + (te = j - ae) * te;
        }
        function Sr(z, j, Z, ae) {
          var fe = {
            id: z === void 0 ? null : z,
            type: j,
            geometry: Z,
            tags: ae,
            minX: 1 / 0,
            minY: 1 / 0,
            maxX: -1 / 0,
            maxY: -1 / 0,
          };
          return (
            (function (Pe) {
              var Fe = Pe.geometry,
                te = Pe.type;
              if (te === "Point" || te === "MultiPoint" || te === "LineString")
                ta(Pe, Fe);
              else if (te === "Polygon" || te === "MultiLineString")
                for (var ye = 0; ye < Fe.length; ye++) ta(Pe, Fe[ye]);
              else if (te === "MultiPolygon")
                for (ye = 0; ye < Fe.length; ye++)
                  for (var Xe = 0; Xe < Fe[ye].length; Xe++) ta(Pe, Fe[ye][Xe]);
            })(fe),
            fe
          );
        }
        function ta(z, j) {
          for (var Z = 0; Z < j.length; Z += 3)
            (z.minX = Math.min(z.minX, j[Z])),
              (z.minY = Math.min(z.minY, j[Z + 1])),
              (z.maxX = Math.max(z.maxX, j[Z])),
              (z.maxY = Math.max(z.maxY, j[Z + 1]));
        }
        function ei(z, j, Z, ae) {
          if (j.geometry) {
            var fe = j.geometry.coordinates,
              Pe = j.geometry.type,
              Fe = Math.pow(Z.tolerance / ((1 << Z.maxZoom) * Z.extent), 2),
              te = [],
              ye = j.id;
            if (
              (Z.promoteId
                ? (ye = j.properties[Z.promoteId])
                : Z.generateId && (ye = ae || 0),
              Pe === "Point")
            )
              ri(fe, te);
            else if (Pe === "MultiPoint")
              for (var Xe = 0; Xe < fe.length; Xe++) ri(fe[Xe], te);
            else if (Pe === "LineString") Ra(fe, te, Fe, !1);
            else if (Pe === "MultiLineString") {
              if (Z.lineMetrics) {
                for (Xe = 0; Xe < fe.length; Xe++)
                  Ra(fe[Xe], (te = []), Fe, !1),
                    z.push(Sr(ye, "LineString", te, j.properties));
                return;
              }
              le(fe, te, Fe, !1);
            } else if (Pe === "Polygon") le(fe, te, Fe, !0);
            else {
              if (Pe !== "MultiPolygon") {
                if (Pe === "GeometryCollection") {
                  for (Xe = 0; Xe < j.geometry.geometries.length; Xe++)
                    ei(
                      z,
                      {
                        id: ye,
                        geometry: j.geometry.geometries[Xe],
                        properties: j.properties,
                      },
                      Z,
                      ae
                    );
                  return;
                }
                throw new Error("Input data is not a valid GeoJSON object.");
              }
              for (Xe = 0; Xe < fe.length; Xe++) {
                var gt = [];
                le(fe[Xe], gt, Fe, !0), te.push(gt);
              }
            }
            z.push(Sr(ye, Pe, te, j.properties));
          }
        }
        function ri(z, j) {
          j.push(Ia(z[0])), j.push(ts(z[1])), j.push(0);
        }
        function Ra(z, j, Z, ae) {
          for (var fe, Pe, Fe = 0, te = 0; te < z.length; te++) {
            var ye = Ia(z[te][0]),
              Xe = ts(z[te][1]);
            j.push(ye),
              j.push(Xe),
              j.push(0),
              te > 0 &&
                (Fe += ae
                  ? (fe * Xe - ye * Pe) / 2
                  : Math.sqrt(Math.pow(ye - fe, 2) + Math.pow(Xe - Pe, 2))),
              (fe = ye),
              (Pe = Xe);
          }
          var gt = j.length - 3;
          (j[2] = 1),
            (function Ot(dt, Nt, yn, mn) {
              for (
                var pt,
                  on = mn,
                  Gt = (yn - Nt) >> 1,
                  qt = yn - Nt,
                  or = dt[Nt],
                  nn = dt[Nt + 1],
                  wr = dt[yn],
                  ti = dt[yn + 1],
                  xr = Nt + 3;
                xr < yn;
                xr += 3
              ) {
                var Or = Qn(dt[xr], dt[xr + 1], or, nn, wr, ti);
                if (Or > on) (pt = xr), (on = Or);
                else if (Or === on) {
                  var sr = Math.abs(xr - Gt);
                  sr < qt && ((pt = xr), (qt = sr));
                }
              }
              on > mn &&
                (pt - Nt > 3 && Ot(dt, Nt, pt, mn),
                (dt[pt + 2] = on),
                yn - pt > 3 && Ot(dt, pt, yn, mn));
            })(j, 0, gt, Z),
            (j[gt + 2] = 1),
            (j.size = Math.abs(Fe)),
            (j.start = 0),
            (j.end = j.size);
        }
        function le(z, j, Z, ae) {
          for (var fe = 0; fe < z.length; fe++) {
            var Pe = [];
            Ra(z[fe], Pe, Z, ae), j.push(Pe);
          }
        }
        function Ia(z) {
          return z / 360 + 0.5;
        }
        function ts(z) {
          var j = Math.sin((z * Math.PI) / 180),
            Z = 0.5 - (0.25 * Math.log((1 + j) / (1 - j))) / Math.PI;
          return Z < 0 ? 0 : Z > 1 ? 1 : Z;
        }
        function Ma(z, j, Z, ae, fe, Pe, Fe, te) {
          if (((ae /= j), Pe >= (Z /= j) && Fe < ae)) return z;
          if (Fe < Z || Pe >= ae) return null;
          for (var ye = [], Xe = 0; Xe < z.length; Xe++) {
            var gt = z[Xe],
              Ot = gt.geometry,
              dt = gt.type,
              Nt = fe === 0 ? gt.minX : gt.minY,
              yn = fe === 0 ? gt.maxX : gt.maxY;
            if (Nt >= Z && yn < ae) ye.push(gt);
            else if (!(yn < Z || Nt >= ae)) {
              var mn = [];
              if (dt === "Point" || dt === "MultiPoint") ys(Ot, mn, Z, ae, fe);
              else if (dt === "LineString")
                di(Ot, mn, Z, ae, fe, !1, te.lineMetrics);
              else if (dt === "MultiLineString") yo(Ot, mn, Z, ae, fe, !1);
              else if (dt === "Polygon") yo(Ot, mn, Z, ae, fe, !0);
              else if (dt === "MultiPolygon")
                for (var pt = 0; pt < Ot.length; pt++) {
                  var on = [];
                  yo(Ot[pt], on, Z, ae, fe, !0), on.length && mn.push(on);
                }
              if (mn.length) {
                if (te.lineMetrics && dt === "LineString") {
                  for (pt = 0; pt < mn.length; pt++)
                    ye.push(Sr(gt.id, dt, mn[pt], gt.tags));
                  continue;
                }
                (dt !== "LineString" && dt !== "MultiLineString") ||
                  (mn.length === 1
                    ? ((dt = "LineString"), (mn = mn[0]))
                    : (dt = "MultiLineString")),
                  (dt !== "Point" && dt !== "MultiPoint") ||
                    (dt = mn.length === 3 ? "Point" : "MultiPoint"),
                  ye.push(Sr(gt.id, dt, mn, gt.tags));
              }
            }
          }
          return ye.length ? ye : null;
        }
        function ys(z, j, Z, ae, fe) {
          for (var Pe = 0; Pe < z.length; Pe += 3) {
            var Fe = z[Pe + fe];
            Fe >= Z &&
              Fe <= ae &&
              (j.push(z[Pe]), j.push(z[Pe + 1]), j.push(z[Pe + 2]));
          }
        }
        function di(z, j, Z, ae, fe, Pe, Fe) {
          for (
            var te,
              ye,
              Xe = Pa(z),
              gt = fe === 0 ? Os : Wi,
              Ot = z.start,
              dt = 0;
            dt < z.length - 3;
            dt += 3
          ) {
            var Nt = z[dt],
              yn = z[dt + 1],
              mn = z[dt + 2],
              pt = z[dt + 3],
              on = z[dt + 4],
              Gt = fe === 0 ? Nt : yn,
              qt = fe === 0 ? pt : on,
              or = !1;
            Fe && (te = Math.sqrt(Math.pow(Nt - pt, 2) + Math.pow(yn - on, 2))),
              Gt < Z
                ? qt > Z &&
                  ((ye = gt(Xe, Nt, yn, pt, on, Z)),
                  Fe && (Xe.start = Ot + te * ye))
                : Gt > ae
                ? qt < ae &&
                  ((ye = gt(Xe, Nt, yn, pt, on, ae)),
                  Fe && (Xe.start = Ot + te * ye))
                : Oa(Xe, Nt, yn, mn),
              qt < Z &&
                Gt >= Z &&
                ((ye = gt(Xe, Nt, yn, pt, on, Z)), (or = !0)),
              qt > ae &&
                Gt <= ae &&
                ((ye = gt(Xe, Nt, yn, pt, on, ae)), (or = !0)),
              !Pe &&
                or &&
                (Fe && (Xe.end = Ot + te * ye), j.push(Xe), (Xe = Pa(z))),
              Fe && (Ot += te);
          }
          var nn = z.length - 3;
          (Nt = z[nn]),
            (yn = z[nn + 1]),
            (mn = z[nn + 2]),
            (Gt = fe === 0 ? Nt : yn) >= Z && Gt <= ae && Oa(Xe, Nt, yn, mn),
            (nn = Xe.length - 3),
            Pe &&
              nn >= 3 &&
              (Xe[nn] !== Xe[0] || Xe[nn + 1] !== Xe[1]) &&
              Oa(Xe, Xe[0], Xe[1], Xe[2]),
            Xe.length && j.push(Xe);
        }
        function Pa(z) {
          var j = [];
          return (j.size = z.size), (j.start = z.start), (j.end = z.end), j;
        }
        function yo(z, j, Z, ae, fe, Pe) {
          for (var Fe = 0; Fe < z.length; Fe++) di(z[Fe], j, Z, ae, fe, Pe, !1);
        }
        function Oa(z, j, Z, ae) {
          z.push(j), z.push(Z), z.push(ae);
        }
        function Os(z, j, Z, ae, fe, Pe) {
          var Fe = (Pe - j) / (ae - j);
          return z.push(Pe), z.push(Z + (fe - Z) * Fe), z.push(1), Fe;
        }
        function Wi(z, j, Z, ae, fe, Pe) {
          var Fe = (Pe - Z) / (fe - Z);
          return z.push(j + (ae - j) * Fe), z.push(Pe), z.push(1), Fe;
        }
        function xs(z, j) {
          for (var Z = [], ae = 0; ae < z.length; ae++) {
            var fe,
              Pe = z[ae],
              Fe = Pe.type;
            if (Fe === "Point" || Fe === "MultiPoint" || Fe === "LineString")
              fe = Mo(Pe.geometry, j);
            else if (Fe === "MultiLineString" || Fe === "Polygon") {
              fe = [];
              for (var te = 0; te < Pe.geometry.length; te++)
                fe.push(Mo(Pe.geometry[te], j));
            } else if (Fe === "MultiPolygon")
              for (fe = [], te = 0; te < Pe.geometry.length; te++) {
                for (var ye = [], Xe = 0; Xe < Pe.geometry[te].length; Xe++)
                  ye.push(Mo(Pe.geometry[te][Xe], j));
                fe.push(ye);
              }
            Z.push(Sr(Pe.id, Fe, fe, Pe.tags));
          }
          return Z;
        }
        function Mo(z, j) {
          var Z = [];
          (Z.size = z.size),
            z.start !== void 0 && ((Z.start = z.start), (Z.end = z.end));
          for (var ae = 0; ae < z.length; ae += 3)
            Z.push(z[ae] + j, z[ae + 1], z[ae + 2]);
          return Z;
        }
        function sl(z, j) {
          if (z.transformed) return z;
          var Z,
            ae,
            fe,
            Pe = 1 << z.z,
            Fe = z.x,
            te = z.y;
          for (Z = 0; Z < z.features.length; Z++) {
            var ye = z.features[Z],
              Xe = ye.geometry,
              gt = ye.type;
            if (((ye.geometry = []), gt === 1))
              for (ae = 0; ae < Xe.length; ae += 2)
                ye.geometry.push(mc(Xe[ae], Xe[ae + 1], j, Pe, Fe, te));
            else
              for (ae = 0; ae < Xe.length; ae++) {
                var Ot = [];
                for (fe = 0; fe < Xe[ae].length; fe += 2)
                  Ot.push(mc(Xe[ae][fe], Xe[ae][fe + 1], j, Pe, Fe, te));
                ye.geometry.push(Ot);
              }
          }
          return (z.transformed = !0), z;
        }
        function mc(z, j, Z, ae, fe, Pe) {
          return [Math.round(Z * (z * ae - fe)), Math.round(Z * (j * ae - Pe))];
        }
        function ll(z, j, Z, ae, fe) {
          for (
            var Pe =
                j === fe.maxZoom ? 0 : fe.tolerance / ((1 << j) * fe.extent),
              Fe = {
                features: [],
                numPoints: 0,
                numSimplified: 0,
                numFeatures: 0,
                source: null,
                x: Z,
                y: ae,
                z: j,
                transformed: !1,
                minX: 2,
                minY: 1,
                maxX: -1,
                maxY: 0,
              },
              te = 0;
            te < z.length;
            te++
          ) {
            Fe.numFeatures++, jc(Fe, z[te], Pe, fe);
            var ye = z[te].minX,
              Xe = z[te].minY,
              gt = z[te].maxX,
              Ot = z[te].maxY;
            ye < Fe.minX && (Fe.minX = ye),
              Xe < Fe.minY && (Fe.minY = Xe),
              gt > Fe.maxX && (Fe.maxX = gt),
              Ot > Fe.maxY && (Fe.maxY = Ot);
          }
          return Fe;
        }
        function jc(z, j, Z, ae) {
          var fe = j.geometry,
            Pe = j.type,
            Fe = [];
          if (Pe === "Point" || Pe === "MultiPoint")
            for (var te = 0; te < fe.length; te += 3)
              Fe.push(fe[te]),
                Fe.push(fe[te + 1]),
                z.numPoints++,
                z.numSimplified++;
          else if (Pe === "LineString") cl(Fe, fe, z, Z, !1, !1);
          else if (Pe === "MultiLineString" || Pe === "Polygon")
            for (te = 0; te < fe.length; te++)
              cl(Fe, fe[te], z, Z, Pe === "Polygon", te === 0);
          else if (Pe === "MultiPolygon")
            for (var ye = 0; ye < fe.length; ye++) {
              var Xe = fe[ye];
              for (te = 0; te < Xe.length; te++)
                cl(Fe, Xe[te], z, Z, !0, te === 0);
            }
          if (Fe.length) {
            var gt = j.tags || null;
            if (Pe === "LineString" && ae.lineMetrics) {
              for (var Ot in ((gt = {}), j.tags)) gt[Ot] = j.tags[Ot];
              (gt.mapbox_clip_start = fe.start / fe.size),
                (gt.mapbox_clip_end = fe.end / fe.size);
            }
            var dt = {
              geometry: Fe,
              type:
                Pe === "Polygon" || Pe === "MultiPolygon"
                  ? 3
                  : Pe === "LineString" || Pe === "MultiLineString"
                  ? 2
                  : 1,
              tags: gt,
            };
            j.id !== null && (dt.id = j.id), z.features.push(dt);
          }
        }
        function cl(z, j, Z, ae, fe, Pe) {
          var Fe = ae * ae;
          if (ae > 0 && j.size < (fe ? Fe : ae)) Z.numPoints += j.length / 3;
          else {
            for (var te = [], ye = 0; ye < j.length; ye += 3)
              (ae === 0 || j[ye + 2] > Fe) &&
                (Z.numSimplified++, te.push(j[ye]), te.push(j[ye + 1])),
                Z.numPoints++;
            fe &&
              (function (Xe, gt) {
                for (
                  var Ot = 0, dt = 0, Nt = Xe.length, yn = Nt - 2;
                  dt < Nt;
                  yn = dt, dt += 2
                )
                  Ot += (Xe[dt] - Xe[yn]) * (Xe[dt + 1] + Xe[yn + 1]);
                if (Ot > 0 === gt)
                  for (dt = 0, Nt = Xe.length; dt < Nt / 2; dt += 2) {
                    var mn = Xe[dt],
                      pt = Xe[dt + 1];
                    (Xe[dt] = Xe[Nt - 2 - dt]),
                      (Xe[dt + 1] = Xe[Nt - 1 - dt]),
                      (Xe[Nt - 2 - dt] = mn),
                      (Xe[Nt - 1 - dt] = pt);
                  }
              })(te, Pe),
              z.push(te);
          }
        }
        function jo(z, j) {
          var Z = (j = this.options =
            (function (fe, Pe) {
              for (var Fe in Pe) fe[Fe] = Pe[Fe];
              return fe;
            })(Object.create(this.options), j)).debug;
          if (
            (Z && console.time("preprocess data"),
            j.maxZoom < 0 || j.maxZoom > 24)
          )
            throw new Error("maxZoom should be in the 0-24 range");
          if (j.promoteId && j.generateId)
            throw new Error(
              "promoteId and generateId cannot be used together."
            );
          var ae = (function (fe, Pe) {
            var Fe = [];
            if (fe.type === "FeatureCollection")
              for (var te = 0; te < fe.features.length; te++)
                ei(Fe, fe.features[te], Pe, te);
            else ei(Fe, fe.type === "Feature" ? fe : { geometry: fe }, Pe);
            return Fe;
          })(z, j);
          (this.tiles = {}),
            (this.tileCoords = []),
            Z &&
              (console.timeEnd("preprocess data"),
              console.log(
                "index: maxZoom: %d, maxPoints: %d",
                j.indexMaxZoom,
                j.indexMaxPoints
              ),
              console.time("generate tiles"),
              (this.stats = {}),
              (this.total = 0)),
            (ae = (function (fe, Pe) {
              var Fe = Pe.buffer / Pe.extent,
                te = fe,
                ye = Ma(fe, 1, -1 - Fe, Fe, 0, -1, 2, Pe),
                Xe = Ma(fe, 1, 1 - Fe, 2 + Fe, 0, -1, 2, Pe);
              return (
                (ye || Xe) &&
                  ((te = Ma(fe, 1, -Fe, 1 + Fe, 0, -1, 2, Pe) || []),
                  ye && (te = xs(ye, 1).concat(te)),
                  Xe && (te = te.concat(xs(Xe, -1)))),
                te
              );
            })(ae, j)).length && this.splitTile(ae, 0, 0, 0),
            Z &&
              (ae.length &&
                console.log(
                  "features: %d, points: %d",
                  this.tiles[0].numFeatures,
                  this.tiles[0].numPoints
                ),
              console.timeEnd("generate tiles"),
              console.log(
                "tiles generated:",
                this.total,
                JSON.stringify(this.stats)
              ));
        }
        function Wo(z, j, Z) {
          return 32 * ((1 << z) * Z + j) + z;
        }
        function Ls(z, j) {
          var Z = z.tileID.canonical;
          if (!this._geoJSONIndex) return j(null, null);
          var ae = this._geoJSONIndex.getTile(Z.z, Z.x, Z.y);
          if (!ae) return j(null, null);
          var fe = new ee(ae.features),
            Pe = Ve(fe);
          (Pe.byteOffset === 0 && Pe.byteLength === Pe.buffer.byteLength) ||
            (Pe = new Uint8Array(Pe)),
            j(null, { vectorTile: fe, rawData: Pe.buffer });
        }
        (Tr.prototype.load = function (z) {
          var j = this.options,
            Z = j.log,
            ae = j.minZoom,
            fe = j.maxZoom,
            Pe = j.nodeSize;
          Z && console.time("total time");
          var Fe = "prepare " + z.length + " points";
          Z && console.time(Fe), (this.points = z);
          for (var te = [], ye = 0; ye < z.length; ye++)
            z[ye].geometry && te.push(qe(z[ye], ye));
          (this.trees[fe + 1] = new ir(te, yr, nr, Pe, Float32Array)),
            Z && console.timeEnd(Fe);
          for (var Xe = fe; Xe >= ae; Xe--) {
            var gt = +Date.now();
            (te = this._cluster(te, Xe)),
              (this.trees[Xe] = new ir(te, yr, nr, Pe, Float32Array)),
              Z &&
                console.log(
                  "z%d: %d clusters in %dms",
                  Xe,
                  te.length,
                  +Date.now() - gt
                );
          }
          return Z && console.timeEnd("total time"), this;
        }),
          (Tr.prototype.getClusters = function (z, j) {
            var Z = ((((z[0] + 180) % 360) + 360) % 360) - 180,
              ae = Math.max(-90, Math.min(90, z[1])),
              fe =
                z[2] === 180 ? 180 : ((((z[2] + 180) % 360) + 360) % 360) - 180,
              Pe = Math.max(-90, Math.min(90, z[3]));
            if (z[2] - z[0] >= 360) (Z = -180), (fe = 180);
            else if (Z > fe) {
              var Fe = this.getClusters([Z, ae, 180, Pe], j),
                te = this.getClusters([-180, ae, fe, Pe], j);
              return Fe.concat(te);
            }
            for (
              var ye = this.trees[this._limitZoom(j)],
                Xe = [],
                gt = 0,
                Ot = ye.range(St(Z), An(Pe), St(fe), An(ae));
              gt < Ot.length;
              gt += 1
            ) {
              var dt = ye.points[Ot[gt]];
              Xe.push(dt.numPoints ? $t(dt) : this.points[dt.index]);
            }
            return Xe;
          }),
          (Tr.prototype.getChildren = function (z) {
            var j = this._getOriginId(z),
              Z = this._getOriginZoom(z),
              ae = "No cluster with the specified id.",
              fe = this.trees[Z];
            if (!fe) throw new Error(ae);
            var Pe = fe.points[j];
            if (!Pe) throw new Error(ae);
            for (
              var Fe =
                  this.options.radius /
                  (this.options.extent * Math.pow(2, Z - 1)),
                te = [],
                ye = 0,
                Xe = fe.within(Pe.x, Pe.y, Fe);
              ye < Xe.length;
              ye += 1
            ) {
              var gt = fe.points[Xe[ye]];
              gt.parentId === z &&
                te.push(gt.numPoints ? $t(gt) : this.points[gt.index]);
            }
            if (te.length === 0) throw new Error(ae);
            return te;
          }),
          (Tr.prototype.getLeaves = function (z, j, Z) {
            var ae = [];
            return (
              this._appendLeaves(ae, z, (j = j || 10), (Z = Z || 0), 0), ae
            );
          }),
          (Tr.prototype.getTile = function (z, j, Z) {
            var ae = this.trees[this._limitZoom(z)],
              fe = Math.pow(2, z),
              Pe = this.options,
              Fe = Pe.radius / Pe.extent,
              te = (Z - Fe) / fe,
              ye = (Z + 1 + Fe) / fe,
              Xe = { features: [] };
            return (
              this._addTileFeatures(
                ae.range((j - Fe) / fe, te, (j + 1 + Fe) / fe, ye),
                ae.points,
                j,
                Z,
                fe,
                Xe
              ),
              j === 0 &&
                this._addTileFeatures(
                  ae.range(1 - Fe / fe, te, 1, ye),
                  ae.points,
                  fe,
                  Z,
                  fe,
                  Xe
                ),
              j === fe - 1 &&
                this._addTileFeatures(
                  ae.range(0, te, Fe / fe, ye),
                  ae.points,
                  -1,
                  Z,
                  fe,
                  Xe
                ),
              Xe.features.length ? Xe : null
            );
          }),
          (Tr.prototype.getClusterExpansionZoom = function (z) {
            for (
              var j = this._getOriginZoom(z) - 1;
              j <= this.options.maxZoom;

            ) {
              var Z = this.getChildren(z);
              if ((j++, Z.length !== 1)) break;
              z = Z[0].properties.cluster_id;
            }
            return j;
          }),
          (Tr.prototype._appendLeaves = function (z, j, Z, ae, fe) {
            for (
              var Pe = 0, Fe = this.getChildren(j);
              Pe < Fe.length;
              Pe += 1
            ) {
              var te = Fe[Pe],
                ye = te.properties;
              if (
                (ye && ye.cluster
                  ? fe + ye.point_count <= ae
                    ? (fe += ye.point_count)
                    : (fe = this._appendLeaves(z, ye.cluster_id, Z, ae, fe))
                  : fe < ae
                  ? fe++
                  : z.push(te),
                z.length === Z)
              )
                break;
            }
            return fe;
          }),
          (Tr.prototype._addTileFeatures = function (z, j, Z, ae, fe, Pe) {
            for (var Fe = 0, te = z; Fe < te.length; Fe += 1) {
              var ye = j[te[Fe]],
                Xe = ye.numPoints,
                gt = {
                  type: 1,
                  geometry: [
                    [
                      Math.round(this.options.extent * (ye.x * fe - Z)),
                      Math.round(this.options.extent * (ye.y * fe - ae)),
                    ],
                  ],
                  tags: Xe ? Cn(ye) : this.points[ye.index].properties,
                },
                Ot = void 0;
              Xe
                ? (Ot = ye.id)
                : this.options.generateId
                ? (Ot = ye.index)
                : this.points[ye.index].id && (Ot = this.points[ye.index].id),
                Ot !== void 0 && (gt.id = Ot),
                Pe.features.push(gt);
            }
          }),
          (Tr.prototype._limitZoom = function (z) {
            return Math.max(
              this.options.minZoom,
              Math.min(+z, this.options.maxZoom + 1)
            );
          }),
          (Tr.prototype._cluster = function (z, j) {
            for (
              var Z = [],
                ae = this.options,
                fe = ae.reduce,
                Pe = ae.minPoints,
                Fe = ae.radius / (ae.extent * Math.pow(2, j)),
                te = 0;
              te < z.length;
              te++
            ) {
              var ye = z[te];
              if (!(ye.zoom <= j)) {
                ye.zoom = j;
                for (
                  var Xe = this.trees[j + 1],
                    gt = Xe.within(ye.x, ye.y, Fe),
                    Ot = ye.numPoints || 1,
                    dt = Ot,
                    Nt = 0,
                    yn = gt;
                  Nt < yn.length;
                  Nt += 1
                ) {
                  var mn = Xe.points[yn[Nt]];
                  mn.zoom > j && (dt += mn.numPoints || 1);
                }
                if (dt >= Pe) {
                  for (
                    var pt = ye.x * Ot,
                      on = ye.y * Ot,
                      Gt = fe && Ot > 1 ? this._map(ye, !0) : null,
                      qt = (te << 5) + (j + 1) + this.points.length,
                      or = 0,
                      nn = gt;
                    or < nn.length;
                    or += 1
                  ) {
                    var wr = Xe.points[nn[or]];
                    if (!(wr.zoom <= j)) {
                      wr.zoom = j;
                      var ti = wr.numPoints || 1;
                      (pt += wr.x * ti),
                        (on += wr.y * ti),
                        (wr.parentId = qt),
                        fe &&
                          (Gt || (Gt = this._map(ye, !0)),
                          fe(Gt, this._map(wr)));
                    }
                  }
                  (ye.parentId = qt), Z.push(Fi(pt / dt, on / dt, qt, dt, Gt));
                } else if ((Z.push(ye), dt > 1))
                  for (var xr = 0, Or = gt; xr < Or.length; xr += 1) {
                    var sr = Xe.points[Or[xr]];
                    sr.zoom <= j || ((sr.zoom = j), Z.push(sr));
                  }
              }
            }
            return Z;
          }),
          (Tr.prototype._getOriginId = function (z) {
            return (z - this.points.length) >> 5;
          }),
          (Tr.prototype._getOriginZoom = function (z) {
            return (z - this.points.length) % 32;
          }),
          (Tr.prototype._map = function (z, j) {
            if (z.numPoints) return j ? ar({}, z.properties) : z.properties;
            var Z = this.points[z.index].properties,
              ae = this.options.map(Z);
            return j && ae === Z ? ar({}, ae) : ae;
          }),
          (jo.prototype.options = {
            maxZoom: 14,
            indexMaxZoom: 5,
            indexMaxPoints: 1e5,
            tolerance: 3,
            extent: 4096,
            buffer: 64,
            lineMetrics: !1,
            promoteId: null,
            generateId: !1,
            debug: 0,
          }),
          (jo.prototype.splitTile = function (z, j, Z, ae, fe, Pe, Fe) {
            for (
              var te = [z, j, Z, ae], ye = this.options, Xe = ye.debug;
              te.length;

            ) {
              (ae = te.pop()), (Z = te.pop()), (j = te.pop()), (z = te.pop());
              var gt = 1 << j,
                Ot = Wo(j, Z, ae),
                dt = this.tiles[Ot];
              if (
                !dt &&
                (Xe > 1 && console.time("creation"),
                (dt = this.tiles[Ot] = ll(z, j, Z, ae, ye)),
                this.tileCoords.push({ z: j, x: Z, y: ae }),
                Xe)
              ) {
                Xe > 1 &&
                  (console.log(
                    "tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",
                    j,
                    Z,
                    ae,
                    dt.numFeatures,
                    dt.numPoints,
                    dt.numSimplified
                  ),
                  console.timeEnd("creation"));
                var Nt = "z" + j;
                (this.stats[Nt] = (this.stats[Nt] || 0) + 1), this.total++;
              }
              if (((dt.source = z), fe)) {
                if (j === ye.maxZoom || j === fe) continue;
                var yn = 1 << (fe - j);
                if (Z !== Math.floor(Pe / yn) || ae !== Math.floor(Fe / yn))
                  continue;
              } else if (
                j === ye.indexMaxZoom ||
                dt.numPoints <= ye.indexMaxPoints
              )
                continue;
              if (((dt.source = null), z.length !== 0)) {
                Xe > 1 && console.time("clipping");
                var mn,
                  pt,
                  on,
                  Gt,
                  qt,
                  or,
                  nn = (0.5 * ye.buffer) / ye.extent,
                  wr = 0.5 - nn,
                  ti = 0.5 + nn,
                  xr = 1 + nn;
                (mn = pt = on = Gt = null),
                  (qt = Ma(z, gt, Z - nn, Z + ti, 0, dt.minX, dt.maxX, ye)),
                  (or = Ma(z, gt, Z + wr, Z + xr, 0, dt.minX, dt.maxX, ye)),
                  (z = null),
                  qt &&
                    ((mn = Ma(
                      qt,
                      gt,
                      ae - nn,
                      ae + ti,
                      1,
                      dt.minY,
                      dt.maxY,
                      ye
                    )),
                    (pt = Ma(
                      qt,
                      gt,
                      ae + wr,
                      ae + xr,
                      1,
                      dt.minY,
                      dt.maxY,
                      ye
                    )),
                    (qt = null)),
                  or &&
                    ((on = Ma(
                      or,
                      gt,
                      ae - nn,
                      ae + ti,
                      1,
                      dt.minY,
                      dt.maxY,
                      ye
                    )),
                    (Gt = Ma(
                      or,
                      gt,
                      ae + wr,
                      ae + xr,
                      1,
                      dt.minY,
                      dt.maxY,
                      ye
                    )),
                    (or = null)),
                  Xe > 1 && console.timeEnd("clipping"),
                  te.push(mn || [], j + 1, 2 * Z, 2 * ae),
                  te.push(pt || [], j + 1, 2 * Z, 2 * ae + 1),
                  te.push(on || [], j + 1, 2 * Z + 1, 2 * ae),
                  te.push(Gt || [], j + 1, 2 * Z + 1, 2 * ae + 1);
              }
            }
          }),
          (jo.prototype.getTile = function (z, j, Z) {
            var ae = this.options,
              fe = ae.extent,
              Pe = ae.debug;
            if (z < 0 || z > 24) return null;
            var Fe = 1 << z,
              te = Wo(z, (j = ((j % Fe) + Fe) % Fe), Z);
            if (this.tiles[te]) return sl(this.tiles[te], fe);
            Pe > 1 && console.log("drilling down to z%d-%d-%d", z, j, Z);
            for (var ye, Xe = z, gt = j, Ot = Z; !ye && Xe > 0; )
              Xe--,
                (gt = Math.floor(gt / 2)),
                (Ot = Math.floor(Ot / 2)),
                (ye = this.tiles[Wo(Xe, gt, Ot)]);
            return ye && ye.source
              ? (Pe > 1 &&
                  console.log("found parent tile z%d-%d-%d", Xe, gt, Ot),
                Pe > 1 && console.time("drilling down"),
                this.splitTile(ye.source, Xe, gt, Ot, z, j, Z),
                Pe > 1 && console.timeEnd("drilling down"),
                this.tiles[te] ? sl(this.tiles[te], fe) : null)
              : null;
          });
        var gc = (function (z) {
            function j(Z, ae, fe, Pe) {
              z.call(this, Z, ae, fe, Ls), Pe && (this.loadGeoJSON = Pe);
            }
            return (
              z && (j.__proto__ = z),
              ((j.prototype = Object.create(z && z.prototype)).constructor = j),
              (j.prototype.loadData = function (Z, ae) {
                this._pendingCallback &&
                  this._pendingCallback(null, { abandoned: !0 }),
                  (this._pendingCallback = ae),
                  (this._pendingLoadDataParams = Z),
                  this._state && this._state !== "Idle"
                    ? (this._state = "NeedsLoadData")
                    : ((this._state = "Coalescing"), this._loadData());
              }),
              (j.prototype._loadData = function () {
                var Z = this;
                if (this._pendingCallback && this._pendingLoadDataParams) {
                  var ae = this._pendingCallback,
                    fe = this._pendingLoadDataParams;
                  delete this._pendingCallback,
                    delete this._pendingLoadDataParams;
                  var Pe =
                    !!(fe && fe.request && fe.request.collectResourceTiming) &&
                    new a.RequestPerformance(fe.request);
                  this.loadGeoJSON(fe, function (Fe, te) {
                    if (Fe || !te) return ae(Fe);
                    if (typeof te != "object")
                      return ae(
                        new Error(
                          "Input data given to '" +
                            fe.source +
                            "' is not a valid GeoJSON object."
                        )
                      );
                    (function dt(Nt, yn) {
                      var mn,
                        pt = Nt && Nt.type;
                      if (pt === "FeatureCollection")
                        for (mn = 0; mn < Nt.features.length; mn++)
                          dt(Nt.features[mn], yn);
                      else if (pt === "GeometryCollection")
                        for (mn = 0; mn < Nt.geometries.length; mn++)
                          dt(Nt.geometries[mn], yn);
                      else if (pt === "Feature") dt(Nt.geometry, yn);
                      else if (pt === "Polygon") X(Nt.coordinates, yn);
                      else if (pt === "MultiPolygon")
                        for (mn = 0; mn < Nt.coordinates.length; mn++)
                          X(Nt.coordinates[mn], yn);
                      return Nt;
                    })(te, !0);
                    try {
                      if (fe.filter) {
                        var ye = a.createExpression(fe.filter, {
                          type: "boolean",
                          "property-type": "data-driven",
                          overridable: !1,
                          transition: !1,
                        });
                        if (ye.result === "error")
                          throw new Error(
                            ye.value
                              .map(function (dt) {
                                return dt.key + ": " + dt.message;
                              })
                              .join(", ")
                          );
                        var Xe = te.features.filter(function (dt) {
                          return ye.value.evaluate({ zoom: 0 }, dt);
                        });
                        te = { type: "FeatureCollection", features: Xe };
                      }
                      Z._geoJSONIndex = fe.cluster
                        ? new Tr(
                            (function (dt) {
                              var Nt = dt.superclusterOptions,
                                yn = dt.clusterProperties;
                              if (!yn || !Nt) return Nt;
                              for (
                                var mn = {},
                                  pt = {},
                                  on = { accumulated: null, zoom: 0 },
                                  Gt = { properties: null },
                                  qt = Object.keys(yn),
                                  or = 0,
                                  nn = qt;
                                or < nn.length;
                                or += 1
                              ) {
                                var wr = nn[or],
                                  ti = yn[wr],
                                  xr = ti[0],
                                  Or = a.createExpression(ti[1]),
                                  sr = a.createExpression(
                                    typeof xr == "string"
                                      ? [xr, ["accumulated"], ["get", wr]]
                                      : xr
                                  );
                                (mn[wr] = Or.value), (pt[wr] = sr.value);
                              }
                              return (
                                (Nt.map = function (Xi) {
                                  Gt.properties = Xi;
                                  for (
                                    var Rr = {}, ni = 0, zr = qt;
                                    ni < zr.length;
                                    ni += 1
                                  ) {
                                    var lr = zr[ni];
                                    Rr[lr] = mn[lr].evaluate(on, Gt);
                                  }
                                  return Rr;
                                }),
                                (Nt.reduce = function (Xi, Rr) {
                                  Gt.properties = Rr;
                                  for (
                                    var ni = 0, zr = qt;
                                    ni < zr.length;
                                    ni += 1
                                  ) {
                                    var lr = zr[ni];
                                    (on.accumulated = Xi[lr]),
                                      (Xi[lr] = pt[lr].evaluate(on, Gt));
                                  }
                                }),
                                Nt
                              );
                            })(fe)
                          ).load(te.features)
                        : (function (dt, Nt) {
                            return new jo(dt, Nt);
                          })(te, fe.geojsonVtOptions);
                    } catch (dt) {
                      return ae(dt);
                    }
                    Z.loaded = {};
                    var gt = {};
                    if (Pe) {
                      var Ot = Pe.finish();
                      Ot &&
                        ((gt.resourceTiming = {}),
                        (gt.resourceTiming[fe.source] = JSON.parse(
                          JSON.stringify(Ot)
                        )));
                    }
                    ae(null, gt);
                  });
                }
              }),
              (j.prototype.coalesce = function () {
                this._state === "Coalescing"
                  ? (this._state = "Idle")
                  : this._state === "NeedsLoadData" &&
                    ((this._state = "Coalescing"), this._loadData());
              }),
              (j.prototype.reloadTile = function (Z, ae) {
                var fe = this.loaded;
                return fe && fe[Z.uid]
                  ? z.prototype.reloadTile.call(this, Z, ae)
                  : this.loadTile(Z, ae);
              }),
              (j.prototype.loadGeoJSON = function (Z, ae) {
                if (Z.request) a.getJSON(Z.request, ae);
                else {
                  if (typeof Z.data != "string")
                    return ae(
                      new Error(
                        "Input data given to '" +
                          Z.source +
                          "' is not a valid GeoJSON object."
                      )
                    );
                  try {
                    return ae(null, JSON.parse(Z.data));
                  } catch {
                    return ae(
                      new Error(
                        "Input data given to '" +
                          Z.source +
                          "' is not a valid GeoJSON object."
                      )
                    );
                  }
                }
              }),
              (j.prototype.removeSource = function (Z, ae) {
                this._pendingCallback &&
                  this._pendingCallback(null, { abandoned: !0 }),
                  ae();
              }),
              (j.prototype.getClusterExpansionZoom = function (Z, ae) {
                try {
                  ae(
                    null,
                    this._geoJSONIndex.getClusterExpansionZoom(Z.clusterId)
                  );
                } catch (fe) {
                  ae(fe);
                }
              }),
              (j.prototype.getClusterChildren = function (Z, ae) {
                try {
                  ae(null, this._geoJSONIndex.getChildren(Z.clusterId));
                } catch (fe) {
                  ae(fe);
                }
              }),
              (j.prototype.getClusterLeaves = function (Z, ae) {
                try {
                  ae(
                    null,
                    this._geoJSONIndex.getLeaves(Z.clusterId, Z.limit, Z.offset)
                  );
                } catch (fe) {
                  ae(fe);
                }
              }),
              j
            );
          })(I),
          Wr = function (z) {
            var j = this;
            (this.self = z),
              (this.actor = new a.Actor(z, this)),
              (this.layerIndexes = {}),
              (this.availableImages = {}),
              (this.workerSourceTypes = { vector: I, geojson: gc }),
              (this.workerSources = {}),
              (this.demWorkerSources = {}),
              (this.self.registerWorkerSource = function (Z, ae) {
                if (j.workerSourceTypes[Z])
                  throw new Error(
                    'Worker source with name "' + Z + '" already registered.'
                  );
                j.workerSourceTypes[Z] = ae;
              }),
              (this.self.registerRTLTextPlugin = function (Z) {
                if (a.plugin.isParsed())
                  throw new Error("RTL text plugin already registered.");
                (a.plugin.applyArabicShaping = Z.applyArabicShaping),
                  (a.plugin.processBidirectionalText =
                    Z.processBidirectionalText),
                  (a.plugin.processStyledBidirectionalText =
                    Z.processStyledBidirectionalText);
              });
          };
        return (
          (Wr.prototype.setReferrer = function (z, j) {
            this.referrer = j;
          }),
          (Wr.prototype.setImages = function (z, j, Z) {
            for (var ae in ((this.availableImages[z] = j),
            this.workerSources[z])) {
              var fe = this.workerSources[z][ae];
              for (var Pe in fe) fe[Pe].availableImages = j;
            }
            Z();
          }),
          (Wr.prototype.setLayers = function (z, j, Z) {
            this.getLayerIndex(z).replace(j), Z();
          }),
          (Wr.prototype.updateLayers = function (z, j, Z) {
            this.getLayerIndex(z).update(j.layers, j.removedIds), Z();
          }),
          (Wr.prototype.loadTile = function (z, j, Z) {
            this.getWorkerSource(z, j.type, j.source).loadTile(j, Z);
          }),
          (Wr.prototype.loadDEMTile = function (z, j, Z) {
            this.getDEMWorkerSource(z, j.source).loadTile(j, Z);
          }),
          (Wr.prototype.reloadTile = function (z, j, Z) {
            this.getWorkerSource(z, j.type, j.source).reloadTile(j, Z);
          }),
          (Wr.prototype.abortTile = function (z, j, Z) {
            this.getWorkerSource(z, j.type, j.source).abortTile(j, Z);
          }),
          (Wr.prototype.removeTile = function (z, j, Z) {
            this.getWorkerSource(z, j.type, j.source).removeTile(j, Z);
          }),
          (Wr.prototype.removeDEMTile = function (z, j) {
            this.getDEMWorkerSource(z, j.source).removeTile(j);
          }),
          (Wr.prototype.removeSource = function (z, j, Z) {
            if (
              this.workerSources[z] &&
              this.workerSources[z][j.type] &&
              this.workerSources[z][j.type][j.source]
            ) {
              var ae = this.workerSources[z][j.type][j.source];
              delete this.workerSources[z][j.type][j.source],
                ae.removeSource !== void 0 ? ae.removeSource(j, Z) : Z();
            }
          }),
          (Wr.prototype.loadWorkerSource = function (z, j, Z) {
            try {
              this.self.importScripts(j.url), Z();
            } catch (ae) {
              Z(ae.toString());
            }
          }),
          (Wr.prototype.syncRTLPluginState = function (z, j, Z) {
            try {
              a.plugin.setState(j);
              var ae = a.plugin.getPluginURL();
              if (a.plugin.isLoaded() && !a.plugin.isParsed() && ae != null) {
                this.self.importScripts(ae);
                var fe = a.plugin.isParsed();
                Z(
                  fe
                    ? void 0
                    : new Error(
                        "RTL Text Plugin failed to import scripts from " + ae
                      ),
                  fe
                );
              }
            } catch (Pe) {
              Z(Pe.toString());
            }
          }),
          (Wr.prototype.getAvailableImages = function (z) {
            var j = this.availableImages[z];
            return j || (j = []), j;
          }),
          (Wr.prototype.getLayerIndex = function (z) {
            var j = this.layerIndexes[z];
            return j || (j = this.layerIndexes[z] = new v()), j;
          }),
          (Wr.prototype.getWorkerSource = function (z, j, Z) {
            var ae = this;
            return (
              this.workerSources[z] || (this.workerSources[z] = {}),
              this.workerSources[z][j] || (this.workerSources[z][j] = {}),
              this.workerSources[z][j][Z] ||
                (this.workerSources[z][j][Z] = new this.workerSourceTypes[j](
                  {
                    send: function (fe, Pe, Fe) {
                      ae.actor.send(fe, Pe, Fe, z);
                    },
                  },
                  this.getLayerIndex(z),
                  this.getAvailableImages(z)
                )),
              this.workerSources[z][j][Z]
            );
          }),
          (Wr.prototype.getDEMWorkerSource = function (z, j) {
            return (
              this.demWorkerSources[z] || (this.demWorkerSources[z] = {}),
              this.demWorkerSources[z][j] ||
                (this.demWorkerSources[z][j] = new F()),
              this.demWorkerSources[z][j]
            );
          }),
          (Wr.prototype.enforceCacheSizeLimit = function (z, j) {
            a.enforceCacheSizeLimit(j);
          }),
          typeof WorkerGlobalScope < "u" &&
            typeof self < "u" &&
            self instanceof WorkerGlobalScope &&
            (self.worker = new Wr(self)),
          Wr
        );
      }),
      l(["./shared"], function (a) {
        var h = a.createCommonjsModule(function (u) {
            function p(b) {
              return !d(b);
            }
            function d(b) {
              return typeof window > "u" || typeof document > "u"
                ? "not a browser"
                : Array.prototype &&
                  Array.prototype.every &&
                  Array.prototype.filter &&
                  Array.prototype.forEach &&
                  Array.prototype.indexOf &&
                  Array.prototype.lastIndexOf &&
                  Array.prototype.map &&
                  Array.prototype.some &&
                  Array.prototype.reduce &&
                  Array.prototype.reduceRight &&
                  Array.isArray
                ? Function.prototype && Function.prototype.bind
                  ? Object.keys &&
                    Object.create &&
                    Object.getPrototypeOf &&
                    Object.getOwnPropertyNames &&
                    Object.isSealed &&
                    Object.isFrozen &&
                    Object.isExtensible &&
                    Object.getOwnPropertyDescriptor &&
                    Object.defineProperty &&
                    Object.defineProperties &&
                    Object.seal &&
                    Object.freeze &&
                    Object.preventExtensions
                    ? "JSON" in window && "parse" in JSON && "stringify" in JSON
                      ? (function () {
                          if (
                            !(
                              "Worker" in window &&
                              "Blob" in window &&
                              "URL" in window
                            )
                          )
                            return !1;
                          var w,
                            M,
                            B = new Blob([""], { type: "text/javascript" }),
                            V = URL.createObjectURL(B);
                          try {
                            (M = new Worker(V)), (w = !0);
                          } catch {
                            w = !1;
                          }
                          return M && M.terminate(), URL.revokeObjectURL(V), w;
                        })()
                        ? "Uint8ClampedArray" in window
                          ? ArrayBuffer.isView
                            ? (function () {
                                var w = document.createElement("canvas");
                                w.width = w.height = 1;
                                var M = w.getContext("2d");
                                if (!M) return !1;
                                var B = M.getImageData(0, 0, 1, 1);
                                return B && B.width === w.width;
                              })()
                              ? (g[
                                  (S = b && b.failIfMajorPerformanceCaveat)
                                ] === void 0 &&
                                  (g[S] = (function (w) {
                                    var M = (function (V) {
                                      var J = document.createElement("canvas"),
                                        ne = Object.create(
                                          p.webGLContextAttributes
                                        );
                                      return (
                                        (ne.failIfMajorPerformanceCaveat = V),
                                        J.probablySupportsContext
                                          ? J.probablySupportsContext(
                                              "webgl",
                                              ne
                                            ) ||
                                            J.probablySupportsContext(
                                              "experimental-webgl",
                                              ne
                                            )
                                          : J.supportsContext
                                          ? J.supportsContext("webgl", ne) ||
                                            J.supportsContext(
                                              "experimental-webgl",
                                              ne
                                            )
                                          : J.getContext("webgl", ne) ||
                                            J.getContext(
                                              "experimental-webgl",
                                              ne
                                            )
                                      );
                                    })(w);
                                    if (!M) return !1;
                                    var B = M.createShader(M.VERTEX_SHADER);
                                    return (
                                      !(!B || M.isContextLost()) &&
                                      (M.shaderSource(B, "void main() {}"),
                                      M.compileShader(B),
                                      M.getShaderParameter(
                                        B,
                                        M.COMPILE_STATUS
                                      ) === !0)
                                    );
                                  })(S)),
                                g[S] ? void 0 : "insufficient WebGL support")
                              : "insufficient Canvas/getImageData support"
                            : "insufficient ArrayBuffer support"
                          : "insufficient Uint8ClampedArray support"
                        : "insufficient worker support"
                      : "insufficient JSON support"
                    : "insufficient Object support"
                  : "insufficient Function support"
                : "insufficent Array support";
              var S;
            }
            u.exports
              ? (u.exports = p)
              : window &&
                ((window.mapboxgl = window.mapboxgl || {}),
                (window.mapboxgl.supported = p),
                (window.mapboxgl.notSupportedReason = d));
            var g = {};
            p.webGLContextAttributes = {
              antialias: !1,
              alpha: !0,
              stencil: !0,
              depth: !0,
            };
          }),
          f = {
            create: function (u, p, d) {
              var g = a.window.document.createElement(u);
              return (
                p !== void 0 && (g.className = p), d && d.appendChild(g), g
              );
            },
            createNS: function (u, p) {
              return a.window.document.createElementNS(u, p);
            },
          },
          v = a.window.document && a.window.document.documentElement.style;
        function E(u) {
          if (!v) return u[0];
          for (var p = 0; p < u.length; p++) if (u[p] in v) return u[p];
          return u[0];
        }
        var x,
          T = E([
            "userSelect",
            "MozUserSelect",
            "WebkitUserSelect",
            "msUserSelect",
          ]);
        (f.disableDrag = function () {
          v && T && ((x = v[T]), (v[T] = "none"));
        }),
          (f.enableDrag = function () {
            v && T && (v[T] = x);
          });
        var N = E(["transform", "WebkitTransform"]);
        f.setTransform = function (u, p) {
          u.style[N] = p;
        };
        var I = !1;
        try {
          var L = Object.defineProperty({}, "passive", {
            get: function () {
              I = !0;
            },
          });
          a.window.addEventListener("test", L, L),
            a.window.removeEventListener("test", L, L);
        } catch {
          I = !1;
        }
        (f.addEventListener = function (u, p, d, g) {
          g === void 0 && (g = {}),
            u.addEventListener(p, d, "passive" in g && I ? g : g.capture);
        }),
          (f.removeEventListener = function (u, p, d, g) {
            g === void 0 && (g = {}),
              u.removeEventListener(p, d, "passive" in g && I ? g : g.capture);
          });
        var F = function (u) {
          u.preventDefault(),
            u.stopPropagation(),
            a.window.removeEventListener("click", F, !0);
        };
        function X(u) {
          var p = u.userImage;
          return (
            !!(p && p.render && p.render()) &&
            (u.data.replace(new Uint8Array(p.data.buffer)), !0)
          );
        }
        (f.suppressClick = function () {
          a.window.addEventListener("click", F, !0),
            a.window.setTimeout(function () {
              a.window.removeEventListener("click", F, !0);
            }, 0);
        }),
          (f.mousePos = function (u, p) {
            var d = u.getBoundingClientRect();
            return new a.Point(
              p.clientX - d.left - u.clientLeft,
              p.clientY - d.top - u.clientTop
            );
          }),
          (f.touchPos = function (u, p) {
            for (
              var d = u.getBoundingClientRect(), g = [], b = 0;
              b < p.length;
              b++
            )
              g.push(
                new a.Point(
                  p[b].clientX - d.left - u.clientLeft,
                  p[b].clientY - d.top - u.clientTop
                )
              );
            return g;
          }),
          (f.mouseButton = function (u) {
            return a.window.InstallTrigger !== void 0 &&
              u.button === 2 &&
              u.ctrlKey &&
              a.window.navigator.platform.toUpperCase().indexOf("MAC") >= 0
              ? 0
              : u.button;
          }),
          (f.remove = function (u) {
            u.parentNode && u.parentNode.removeChild(u);
          });
        var G = (function (u) {
            function p() {
              u.call(this),
                (this.images = {}),
                (this.updatedImages = {}),
                (this.callbackDispatchedThisFrame = {}),
                (this.loaded = !1),
                (this.requestors = []),
                (this.patterns = {}),
                (this.atlasImage = new a.RGBAImage({ width: 1, height: 1 })),
                (this.dirty = !0);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.isLoaded = function () {
                return this.loaded;
              }),
              (p.prototype.setLoaded = function (d) {
                if (this.loaded !== d && ((this.loaded = d), d)) {
                  for (var g = 0, b = this.requestors; g < b.length; g += 1) {
                    var S = b[g];
                    this._notify(S.ids, S.callback);
                  }
                  this.requestors = [];
                }
              }),
              (p.prototype.getImage = function (d) {
                return this.images[d];
              }),
              (p.prototype.addImage = function (d, g) {
                this._validate(d, g) && (this.images[d] = g);
              }),
              (p.prototype._validate = function (d, g) {
                var b = !0;
                return (
                  this._validateStretch(g.stretchX, g.data && g.data.width) ||
                    (this.fire(
                      new a.ErrorEvent(
                        new Error(
                          'Image "' + d + '" has invalid "stretchX" value'
                        )
                      )
                    ),
                    (b = !1)),
                  this._validateStretch(g.stretchY, g.data && g.data.height) ||
                    (this.fire(
                      new a.ErrorEvent(
                        new Error(
                          'Image "' + d + '" has invalid "stretchY" value'
                        )
                      )
                    ),
                    (b = !1)),
                  this._validateContent(g.content, g) ||
                    (this.fire(
                      new a.ErrorEvent(
                        new Error(
                          'Image "' + d + '" has invalid "content" value'
                        )
                      )
                    ),
                    (b = !1)),
                  b
                );
              }),
              (p.prototype._validateStretch = function (d, g) {
                if (!d) return !0;
                for (var b = 0, S = 0, w = d; S < w.length; S += 1) {
                  var M = w[S];
                  if (M[0] < b || M[1] < M[0] || g < M[1]) return !1;
                  b = M[1];
                }
                return !0;
              }),
              (p.prototype._validateContent = function (d, g) {
                return !(
                  d &&
                  (d.length !== 4 ||
                    d[0] < 0 ||
                    g.data.width < d[0] ||
                    d[1] < 0 ||
                    g.data.height < d[1] ||
                    d[2] < 0 ||
                    g.data.width < d[2] ||
                    d[3] < 0 ||
                    g.data.height < d[3] ||
                    d[2] < d[0] ||
                    d[3] < d[1])
                );
              }),
              (p.prototype.updateImage = function (d, g) {
                (g.version = this.images[d].version + 1),
                  (this.images[d] = g),
                  (this.updatedImages[d] = !0);
              }),
              (p.prototype.removeImage = function (d) {
                var g = this.images[d];
                delete this.images[d],
                  delete this.patterns[d],
                  g.userImage && g.userImage.onRemove && g.userImage.onRemove();
              }),
              (p.prototype.listImages = function () {
                return Object.keys(this.images);
              }),
              (p.prototype.getImages = function (d, g) {
                var b = !0;
                if (!this.isLoaded())
                  for (var S = 0, w = d; S < w.length; S += 1)
                    this.images[w[S]] || (b = !1);
                this.isLoaded() || b
                  ? this._notify(d, g)
                  : this.requestors.push({ ids: d, callback: g });
              }),
              (p.prototype._notify = function (d, g) {
                for (var b = {}, S = 0, w = d; S < w.length; S += 1) {
                  var M = w[S];
                  this.images[M] ||
                    this.fire(new a.Event("styleimagemissing", { id: M }));
                  var B = this.images[M];
                  B
                    ? (b[M] = {
                        data: B.data.clone(),
                        pixelRatio: B.pixelRatio,
                        sdf: B.sdf,
                        version: B.version,
                        stretchX: B.stretchX,
                        stretchY: B.stretchY,
                        content: B.content,
                        hasRenderCallback: !!(
                          B.userImage && B.userImage.render
                        ),
                      })
                    : a.warnOnce(
                        'Image "' +
                          M +
                          '" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'
                      );
                }
                g(null, b);
              }),
              (p.prototype.getPixelSize = function () {
                var d = this.atlasImage;
                return { width: d.width, height: d.height };
              }),
              (p.prototype.getPattern = function (d) {
                var g = this.patterns[d],
                  b = this.getImage(d);
                if (!b) return null;
                if (g && g.position.version === b.version) return g.position;
                if (g) g.position.version = b.version;
                else {
                  var S = {
                      w: b.data.width + 2,
                      h: b.data.height + 2,
                      x: 0,
                      y: 0,
                    },
                    w = new a.ImagePosition(S, b);
                  this.patterns[d] = { bin: S, position: w };
                }
                return this._updatePatternAtlas(), this.patterns[d].position;
              }),
              (p.prototype.bind = function (d) {
                var g = d.gl;
                this.atlasTexture
                  ? this.dirty &&
                    (this.atlasTexture.update(this.atlasImage),
                    (this.dirty = !1))
                  : (this.atlasTexture = new a.Texture(
                      d,
                      this.atlasImage,
                      g.RGBA
                    )),
                  this.atlasTexture.bind(g.LINEAR, g.CLAMP_TO_EDGE);
              }),
              (p.prototype._updatePatternAtlas = function () {
                var d = [];
                for (var g in this.patterns) d.push(this.patterns[g].bin);
                var b = a.potpack(d),
                  S = b.w,
                  w = b.h,
                  M = this.atlasImage;
                for (var B in (M.resize({ width: S || 1, height: w || 1 }),
                this.patterns)) {
                  var V = this.patterns[B].bin,
                    J = V.x + 1,
                    ne = V.y + 1,
                    re = this.images[B].data,
                    _e = re.width,
                    pe = re.height;
                  a.RGBAImage.copy(
                    re,
                    M,
                    { x: 0, y: 0 },
                    { x: J, y: ne },
                    { width: _e, height: pe }
                  ),
                    a.RGBAImage.copy(
                      re,
                      M,
                      { x: 0, y: pe - 1 },
                      { x: J, y: ne - 1 },
                      { width: _e, height: 1 }
                    ),
                    a.RGBAImage.copy(
                      re,
                      M,
                      { x: 0, y: 0 },
                      { x: J, y: ne + pe },
                      { width: _e, height: 1 }
                    ),
                    a.RGBAImage.copy(
                      re,
                      M,
                      { x: _e - 1, y: 0 },
                      { x: J - 1, y: ne },
                      { width: 1, height: pe }
                    ),
                    a.RGBAImage.copy(
                      re,
                      M,
                      { x: 0, y: 0 },
                      { x: J + _e, y: ne },
                      { width: 1, height: pe }
                    );
                }
                this.dirty = !0;
              }),
              (p.prototype.beginFrame = function () {
                this.callbackDispatchedThisFrame = {};
              }),
              (p.prototype.dispatchRenderCallbacks = function (d) {
                for (var g = 0, b = d; g < b.length; g += 1) {
                  var S = b[g];
                  if (!this.callbackDispatchedThisFrame[S]) {
                    this.callbackDispatchedThisFrame[S] = !0;
                    var w = this.images[S];
                    X(w) && this.updateImage(S, w);
                  }
                }
              }),
              p
            );
          })(a.Evented),
          K = Se,
          Q = Se,
          ee = 1e20;
        function Se(u, p, d, g, b, S) {
          (this.fontSize = u || 24),
            (this.buffer = p === void 0 ? 3 : p),
            (this.cutoff = g || 0.25),
            (this.fontFamily = b || "sans-serif"),
            (this.fontWeight = S || "normal"),
            (this.radius = d || 8);
          var w = (this.size = this.fontSize + 2 * this.buffer);
          (this.canvas = document.createElement("canvas")),
            (this.canvas.width = this.canvas.height = w),
            (this.ctx = this.canvas.getContext("2d")),
            (this.ctx.font =
              this.fontWeight + " " + this.fontSize + "px " + this.fontFamily),
            (this.ctx.textBaseline = "middle"),
            (this.ctx.fillStyle = "black"),
            (this.gridOuter = new Float64Array(w * w)),
            (this.gridInner = new Float64Array(w * w)),
            (this.f = new Float64Array(w)),
            (this.d = new Float64Array(w)),
            (this.z = new Float64Array(w + 1)),
            (this.v = new Int16Array(w)),
            (this.middle = Math.round(
              (w / 2) * (navigator.userAgent.indexOf("Gecko/") >= 0 ? 1.2 : 1)
            ));
        }
        function ue(u, p, d, g, b, S, w) {
          for (var M = 0; M < p; M++) {
            for (var B = 0; B < d; B++) g[B] = u[B * p + M];
            for (ke(g, b, S, w, d), B = 0; B < d; B++) u[B * p + M] = b[B];
          }
          for (B = 0; B < d; B++) {
            for (M = 0; M < p; M++) g[M] = u[B * p + M];
            for (ke(g, b, S, w, p), M = 0; M < p; M++)
              u[B * p + M] = Math.sqrt(b[M]);
          }
        }
        function ke(u, p, d, g, b) {
          (d[0] = 0), (g[0] = -ee), (g[1] = +ee);
          for (var S = 1, w = 0; S < b; S++) {
            for (
              var M =
                (u[S] + S * S - (u[d[w]] + d[w] * d[w])) / (2 * S - 2 * d[w]);
              M <= g[w];

            )
              w--,
                (M =
                  (u[S] + S * S - (u[d[w]] + d[w] * d[w])) /
                  (2 * S - 2 * d[w]));
            (d[++w] = S), (g[w] = M), (g[w + 1] = +ee);
          }
          for (S = 0, w = 0; S < b; S++) {
            for (; g[w + 1] < S; ) w++;
            p[S] = (S - d[w]) * (S - d[w]) + u[d[w]];
          }
        }
        (Se.prototype.draw = function (u) {
          this.ctx.clearRect(0, 0, this.size, this.size),
            this.ctx.fillText(u, this.buffer, this.middle);
          for (
            var p = this.ctx.getImageData(0, 0, this.size, this.size),
              d = new Uint8ClampedArray(this.size * this.size),
              g = 0;
            g < this.size * this.size;
            g++
          ) {
            var b = p.data[4 * g + 3] / 255;
            (this.gridOuter[g] =
              b === 1 ? 0 : b === 0 ? ee : Math.pow(Math.max(0, 0.5 - b), 2)),
              (this.gridInner[g] =
                b === 1 ? ee : b === 0 ? 0 : Math.pow(Math.max(0, b - 0.5), 2));
          }
          for (
            ue(
              this.gridOuter,
              this.size,
              this.size,
              this.f,
              this.d,
              this.v,
              this.z
            ),
              ue(
                this.gridInner,
                this.size,
                this.size,
                this.f,
                this.d,
                this.v,
                this.z
              ),
              g = 0;
            g < this.size * this.size;
            g++
          )
            d[g] = Math.max(
              0,
              Math.min(
                255,
                Math.round(
                  255 -
                    255 *
                      ((this.gridOuter[g] - this.gridInner[g]) / this.radius +
                        this.cutoff)
                )
              )
            );
          return d;
        }),
          (K.default = Q);
        var ut = function (u, p) {
          (this.requestManager = u),
            (this.localIdeographFontFamily = p),
            (this.entries = {});
        };
        (ut.prototype.setURL = function (u) {
          this.url = u;
        }),
          (ut.prototype.getGlyphs = function (u, p) {
            var d = this,
              g = [];
            for (var b in u)
              for (var S = 0, w = u[b]; S < w.length; S += 1)
                g.push({ stack: b, id: w[S] });
            a.asyncAll(
              g,
              function (M, B) {
                var V = M.stack,
                  J = M.id,
                  ne = d.entries[V];
                ne ||
                  (ne = d.entries[V] =
                    { glyphs: {}, requests: {}, ranges: {} });
                var re = ne.glyphs[J];
                if (re === void 0) {
                  if ((re = d._tinySDF(ne, V, J)))
                    return (
                      (ne.glyphs[J] = re),
                      void B(null, { stack: V, id: J, glyph: re })
                    );
                  var _e = Math.floor(J / 256);
                  if (256 * _e > 65535)
                    B(new Error("glyphs > 65535 not supported"));
                  else if (ne.ranges[_e])
                    B(null, { stack: V, id: J, glyph: re });
                  else {
                    var pe = ne.requests[_e];
                    pe ||
                      ((pe = ne.requests[_e] = []),
                      ut.loadGlyphRange(
                        V,
                        _e,
                        d.url,
                        d.requestManager,
                        function (Ce, de) {
                          if (de) {
                            for (var we in de)
                              d._doesCharSupportLocalGlyph(+we) ||
                                (ne.glyphs[+we] = de[+we]);
                            ne.ranges[_e] = !0;
                          }
                          for (var De = 0, Ge = pe; De < Ge.length; De += 1)
                            (0, Ge[De])(Ce, de);
                          delete ne.requests[_e];
                        }
                      )),
                      pe.push(function (Ce, de) {
                        Ce
                          ? B(Ce)
                          : de &&
                            B(null, { stack: V, id: J, glyph: de[J] || null });
                      });
                  }
                } else B(null, { stack: V, id: J, glyph: re });
              },
              function (M, B) {
                if (M) p(M);
                else if (B) {
                  for (var V = {}, J = 0, ne = B; J < ne.length; J += 1) {
                    var re = ne[J],
                      _e = re.stack,
                      pe = re.id,
                      Ce = re.glyph;
                    (V[_e] || (V[_e] = {}))[pe] = Ce && {
                      id: Ce.id,
                      bitmap: Ce.bitmap.clone(),
                      metrics: Ce.metrics,
                    };
                  }
                  p(null, V);
                }
              }
            );
          }),
          (ut.prototype._doesCharSupportLocalGlyph = function (u) {
            return (
              !!this.localIdeographFontFamily &&
              (a.isChar["CJK Unified Ideographs"](u) ||
                a.isChar["Hangul Syllables"](u) ||
                a.isChar.Hiragana(u) ||
                a.isChar.Katakana(u))
            );
          }),
          (ut.prototype._tinySDF = function (u, p, d) {
            var g = this.localIdeographFontFamily;
            if (g && this._doesCharSupportLocalGlyph(d)) {
              var b = u.tinySDF;
              if (!b) {
                var S = "400";
                /bold/i.test(p)
                  ? (S = "900")
                  : /medium/i.test(p)
                  ? (S = "500")
                  : /light/i.test(p) && (S = "200"),
                  (b = u.tinySDF = new ut.TinySDF(24, 3, 8, 0.25, g, S));
              }
              return {
                id: d,
                bitmap: new a.AlphaImage(
                  { width: 30, height: 30 },
                  b.draw(String.fromCharCode(d))
                ),
                metrics: {
                  width: 24,
                  height: 24,
                  left: 0,
                  top: -8,
                  advance: 24,
                },
              };
            }
          }),
          (ut.loadGlyphRange = function (u, p, d, g, b) {
            var S = 256 * p,
              w = S + 255,
              M = g.transformRequest(
                g
                  .normalizeGlyphsURL(d)
                  .replace("{fontstack}", u)
                  .replace("{range}", S + "-" + w),
                a.ResourceType.Glyphs
              );
            a.getArrayBuffer(M, function (B, V) {
              if (B) b(B);
              else if (V) {
                for (
                  var J = {}, ne = 0, re = a.parseGlyphPBF(V);
                  ne < re.length;
                  ne += 1
                ) {
                  var _e = re[ne];
                  J[_e.id] = _e;
                }
                b(null, J);
              }
            });
          }),
          (ut.TinySDF = K);
        var Ve = function () {
          this.specification = a.styleSpec.light.position;
        };
        (Ve.prototype.possiblyEvaluate = function (u, p) {
          return a.sphericalToCartesian(u.expression.evaluate(p));
        }),
          (Ve.prototype.interpolate = function (u, p, d) {
            return {
              x: a.number(u.x, p.x, d),
              y: a.number(u.y, p.y, d),
              z: a.number(u.z, p.z, d),
            };
          });
        var Ae = new a.Properties({
            anchor: new a.DataConstantProperty(a.styleSpec.light.anchor),
            position: new Ve(),
            color: new a.DataConstantProperty(a.styleSpec.light.color),
            intensity: new a.DataConstantProperty(a.styleSpec.light.intensity),
          }),
          Be = (function (u) {
            function p(d) {
              u.call(this),
                (this._transitionable = new a.Transitionable(Ae)),
                this.setLight(d),
                (this._transitioning = this._transitionable.untransitioned());
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getLight = function () {
                return this._transitionable.serialize();
              }),
              (p.prototype.setLight = function (d, g) {
                if (
                  (g === void 0 && (g = {}),
                  !this._validate(a.validateLight, d, g))
                )
                  for (var b in d) {
                    var S = d[b];
                    a.endsWith(b, "-transition")
                      ? this._transitionable.setTransition(b.slice(0, -11), S)
                      : this._transitionable.setValue(b, S);
                  }
              }),
              (p.prototype.updateTransitions = function (d) {
                this._transitioning = this._transitionable.transitioned(
                  d,
                  this._transitioning
                );
              }),
              (p.prototype.hasTransition = function () {
                return this._transitioning.hasTransition();
              }),
              (p.prototype.recalculate = function (d) {
                this.properties = this._transitioning.possiblyEvaluate(d);
              }),
              (p.prototype._validate = function (d, g, b) {
                return (
                  (!b || b.validate !== !1) &&
                  a.emitValidationErrors(
                    this,
                    d.call(
                      a.validateStyle,
                      a.extend({
                        value: g,
                        style: { glyphs: !0, sprite: !0 },
                        styleSpec: a.styleSpec,
                      })
                    )
                  )
                );
              }),
              p
            );
          })(a.Evented),
          He = function (u, p) {
            (this.width = u),
              (this.height = p),
              (this.nextRow = 0),
              (this.data = new Uint8Array(this.width * this.height)),
              (this.dashEntry = {});
          };
        (He.prototype.getDash = function (u, p) {
          var d = u.join(",") + String(p);
          return (
            this.dashEntry[d] || (this.dashEntry[d] = this.addDash(u, p)),
            this.dashEntry[d]
          );
        }),
          (He.prototype.getDashRanges = function (u, p, d) {
            var g = [],
              b = u.length % 2 == 1 ? -u[u.length - 1] * d : 0,
              S = u[0] * d,
              w = !0;
            g.push({ left: b, right: S, isDash: w, zeroLength: u[0] === 0 });
            for (var M = u[0], B = 1; B < u.length; B++) {
              var V = u[B];
              g.push({
                left: (b = M * d),
                right: (S = (M += V) * d),
                isDash: (w = !w),
                zeroLength: V === 0,
              });
            }
            return g;
          }),
          (He.prototype.addRoundDash = function (u, p, d) {
            for (var g = p / 2, b = -d; b <= d; b++)
              for (
                var S = this.width * (this.nextRow + d + b),
                  w = 0,
                  M = u[w],
                  B = 0;
                B < this.width;
                B++
              ) {
                B / M.right > 1 && (M = u[++w]);
                var V = Math.abs(B - M.left),
                  J = Math.abs(B - M.right),
                  ne = Math.min(V, J),
                  re = void 0,
                  _e = (b / d) * (g + 1);
                if (M.isDash) {
                  var pe = g - Math.abs(_e);
                  re = Math.sqrt(ne * ne + pe * pe);
                } else re = g - Math.sqrt(ne * ne + _e * _e);
                this.data[S + B] = Math.max(0, Math.min(255, re + 128));
              }
          }),
          (He.prototype.addRegularDash = function (u) {
            for (var p = u.length - 1; p >= 0; --p) {
              var d = u[p],
                g = u[p + 1];
              d.zeroLength
                ? u.splice(p, 1)
                : g &&
                  g.isDash === d.isDash &&
                  ((g.left = d.left), u.splice(p, 1));
            }
            var b = u[0],
              S = u[u.length - 1];
            b.isDash === S.isDash &&
              ((b.left = S.left - this.width),
              (S.right = b.right + this.width));
            for (
              var w = this.width * this.nextRow, M = 0, B = u[M], V = 0;
              V < this.width;
              V++
            ) {
              V / B.right > 1 && (B = u[++M]);
              var J = Math.abs(V - B.left),
                ne = Math.abs(V - B.right),
                re = Math.min(J, ne);
              this.data[w + V] = Math.max(
                0,
                Math.min(255, (B.isDash ? re : -re) + 128)
              );
            }
          }),
          (He.prototype.addDash = function (u, p) {
            var d = p ? 7 : 0,
              g = 2 * d + 1;
            if (this.nextRow + g > this.height)
              return a.warnOnce("LineAtlas out of space"), null;
            for (var b = 0, S = 0; S < u.length; S++) b += u[S];
            if (b !== 0) {
              var w = this.width / b,
                M = this.getDashRanges(u, this.width, w);
              p ? this.addRoundDash(M, w, d) : this.addRegularDash(M);
            }
            var B = {
              y: (this.nextRow + d + 0.5) / this.height,
              height: (2 * d) / this.height,
              width: b,
            };
            return (this.nextRow += g), (this.dirty = !0), B;
          }),
          (He.prototype.bind = function (u) {
            var p = u.gl;
            this.texture
              ? (p.bindTexture(p.TEXTURE_2D, this.texture),
                this.dirty &&
                  ((this.dirty = !1),
                  p.texSubImage2D(
                    p.TEXTURE_2D,
                    0,
                    0,
                    0,
                    this.width,
                    this.height,
                    p.ALPHA,
                    p.UNSIGNED_BYTE,
                    this.data
                  )))
              : ((this.texture = p.createTexture()),
                p.bindTexture(p.TEXTURE_2D, this.texture),
                p.texParameteri(p.TEXTURE_2D, p.TEXTURE_WRAP_S, p.REPEAT),
                p.texParameteri(p.TEXTURE_2D, p.TEXTURE_WRAP_T, p.REPEAT),
                p.texParameteri(p.TEXTURE_2D, p.TEXTURE_MIN_FILTER, p.LINEAR),
                p.texParameteri(p.TEXTURE_2D, p.TEXTURE_MAG_FILTER, p.LINEAR),
                p.texImage2D(
                  p.TEXTURE_2D,
                  0,
                  p.ALPHA,
                  this.width,
                  this.height,
                  0,
                  p.ALPHA,
                  p.UNSIGNED_BYTE,
                  this.data
                ));
          });
        var nt = function u(p, d) {
          (this.workerPool = p),
            (this.actors = []),
            (this.currentActor = 0),
            (this.id = a.uniqueId());
          for (
            var g = this.workerPool.acquire(this.id), b = 0;
            b < g.length;
            b++
          ) {
            var S = new u.Actor(g[b], d, this.id);
            (S.name = "Worker " + b), this.actors.push(S);
          }
        };
        function Ut(u, p, d) {
          var g = function (b, S) {
            if (b) return d(b);
            if (S) {
              var w = a.pick(a.extend(S, u), [
                "tiles",
                "minzoom",
                "maxzoom",
                "attribution",
                "mapbox_logo",
                "bounds",
                "scheme",
                "tileSize",
                "encoding",
              ]);
              S.vector_layers &&
                ((w.vectorLayers = S.vector_layers),
                (w.vectorLayerIds = w.vectorLayers.map(function (M) {
                  return M.id;
                }))),
                (w.tiles = p.canonicalizeTileset(w, u.url)),
                d(null, w);
            }
          };
          return u.url
            ? a.getJSON(
                p.transformRequest(
                  p.normalizeSourceURL(u.url),
                  a.ResourceType.Source
                ),
                g
              )
            : a.browser.frame(function () {
                return g(null, u);
              });
        }
        (nt.prototype.broadcast = function (u, p, d) {
          a.asyncAll(
            this.actors,
            function (g, b) {
              g.send(u, p, b);
            },
            (d = d || function () {})
          );
        }),
          (nt.prototype.getActor = function () {
            return (
              (this.currentActor =
                (this.currentActor + 1) % this.actors.length),
              this.actors[this.currentActor]
            );
          }),
          (nt.prototype.remove = function () {
            this.actors.forEach(function (u) {
              u.remove();
            }),
              (this.actors = []),
              this.workerPool.release(this.id);
          }),
          (nt.Actor = a.Actor);
        var Yt = function (u, p, d) {
          (this.bounds = a.LngLatBounds.convert(this.validateBounds(u))),
            (this.minzoom = p || 0),
            (this.maxzoom = d || 24);
        };
        (Yt.prototype.validateBounds = function (u) {
          return Array.isArray(u) && u.length === 4
            ? [
                Math.max(-180, u[0]),
                Math.max(-90, u[1]),
                Math.min(180, u[2]),
                Math.min(90, u[3]),
              ]
            : [-180, -90, 180, 90];
        }),
          (Yt.prototype.contains = function (u) {
            var p = Math.pow(2, u.z),
              d = Math.floor(a.mercatorXfromLng(this.bounds.getWest()) * p),
              g = Math.floor(a.mercatorYfromLat(this.bounds.getNorth()) * p),
              b = Math.ceil(a.mercatorXfromLng(this.bounds.getEast()) * p),
              S = Math.ceil(a.mercatorYfromLat(this.bounds.getSouth()) * p);
            return u.x >= d && u.x < b && u.y >= g && u.y < S;
          });
        var Ht = (function (u) {
            function p(d, g, b, S) {
              if (
                (u.call(this),
                (this.id = d),
                (this.dispatcher = b),
                (this.type = "vector"),
                (this.minzoom = 0),
                (this.maxzoom = 22),
                (this.scheme = "xyz"),
                (this.tileSize = 512),
                (this.reparseOverscaled = !0),
                (this.isTileClipped = !0),
                (this._loaded = !1),
                a.extend(
                  this,
                  a.pick(g, ["url", "scheme", "tileSize", "promoteId"])
                ),
                (this._options = a.extend({ type: "vector" }, g)),
                (this._collectResourceTiming = g.collectResourceTiming),
                this.tileSize !== 512)
              )
                throw new Error(
                  "vector tile sources must have a tileSize of 512"
                );
              this.setEventedParent(S);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.load = function () {
                var d = this;
                (this._loaded = !1),
                  this.fire(new a.Event("dataloading", { dataType: "source" })),
                  (this._tileJSONRequest = Ut(
                    this._options,
                    this.map._requestManager,
                    function (g, b) {
                      (d._tileJSONRequest = null),
                        (d._loaded = !0),
                        g
                          ? d.fire(new a.ErrorEvent(g))
                          : b &&
                            (a.extend(d, b),
                            b.bounds &&
                              (d.tileBounds = new Yt(
                                b.bounds,
                                d.minzoom,
                                d.maxzoom
                              )),
                            a.postTurnstileEvent(
                              b.tiles,
                              d.map._requestManager._customAccessToken
                            ),
                            a.postMapLoadEvent(
                              b.tiles,
                              d.map._getMapId(),
                              d.map._requestManager._skuToken,
                              d.map._requestManager._customAccessToken
                            ),
                            d.fire(
                              new a.Event("data", {
                                dataType: "source",
                                sourceDataType: "metadata",
                              })
                            ),
                            d.fire(
                              new a.Event("data", {
                                dataType: "source",
                                sourceDataType: "content",
                              })
                            ));
                    }
                  ));
              }),
              (p.prototype.loaded = function () {
                return this._loaded;
              }),
              (p.prototype.hasTile = function (d) {
                return (
                  !this.tileBounds || this.tileBounds.contains(d.canonical)
                );
              }),
              (p.prototype.onAdd = function (d) {
                (this.map = d), this.load();
              }),
              (p.prototype.setSourceProperty = function (d) {
                this._tileJSONRequest && this._tileJSONRequest.cancel(),
                  d(),
                  this.map.style.sourceCaches[this.id].clearTiles(),
                  this.load();
              }),
              (p.prototype.setTiles = function (d) {
                var g = this;
                return (
                  this.setSourceProperty(function () {
                    g._options.tiles = d;
                  }),
                  this
                );
              }),
              (p.prototype.setUrl = function (d) {
                var g = this;
                return (
                  this.setSourceProperty(function () {
                    (g.url = d), (g._options.url = d);
                  }),
                  this
                );
              }),
              (p.prototype.onRemove = function () {
                this._tileJSONRequest &&
                  (this._tileJSONRequest.cancel(),
                  (this._tileJSONRequest = null));
              }),
              (p.prototype.serialize = function () {
                return a.extend({}, this._options);
              }),
              (p.prototype.loadTile = function (d, g) {
                var b = this.map._requestManager.normalizeTileURL(
                    d.tileID.canonical.url(this.tiles, this.scheme)
                  ),
                  S = {
                    request: this.map._requestManager.transformRequest(
                      b,
                      a.ResourceType.Tile
                    ),
                    uid: d.uid,
                    tileID: d.tileID,
                    zoom: d.tileID.overscaledZ,
                    tileSize: this.tileSize * d.tileID.overscaleFactor(),
                    type: this.type,
                    source: this.id,
                    pixelRatio: a.browser.devicePixelRatio,
                    showCollisionBoxes: this.map.showCollisionBoxes,
                    promoteId: this.promoteId,
                  };
                function w(M, B) {
                  return (
                    delete d.request,
                    d.aborted
                      ? g(null)
                      : M && M.status !== 404
                      ? g(M)
                      : (B &&
                          B.resourceTiming &&
                          (d.resourceTiming = B.resourceTiming),
                        this.map._refreshExpiredTiles &&
                          B &&
                          d.setExpiryData(B),
                        d.loadVectorData(B, this.map.painter),
                        a.cacheEntryPossiblyAdded(this.dispatcher),
                        g(null),
                        void (
                          d.reloadCallback &&
                          (this.loadTile(d, d.reloadCallback),
                          (d.reloadCallback = null))
                        ))
                  );
                }
                (S.request.collectResourceTiming = this._collectResourceTiming),
                  d.actor && d.state !== "expired"
                    ? d.state === "loading"
                      ? (d.reloadCallback = g)
                      : (d.request = d.actor.send(
                          "reloadTile",
                          S,
                          w.bind(this)
                        ))
                    : ((d.actor = this.dispatcher.getActor()),
                      (d.request = d.actor.send("loadTile", S, w.bind(this))));
              }),
              (p.prototype.abortTile = function (d) {
                d.request && (d.request.cancel(), delete d.request),
                  d.actor &&
                    d.actor.send(
                      "abortTile",
                      { uid: d.uid, type: this.type, source: this.id },
                      void 0
                    );
              }),
              (p.prototype.unloadTile = function (d) {
                d.unloadVectorData(),
                  d.actor &&
                    d.actor.send(
                      "removeTile",
                      { uid: d.uid, type: this.type, source: this.id },
                      void 0
                    );
              }),
              (p.prototype.hasTransition = function () {
                return !1;
              }),
              p
            );
          })(a.Evented),
          On = (function (u) {
            function p(d, g, b, S) {
              u.call(this),
                (this.id = d),
                (this.dispatcher = b),
                this.setEventedParent(S),
                (this.type = "raster"),
                (this.minzoom = 0),
                (this.maxzoom = 22),
                (this.roundZoom = !0),
                (this.scheme = "xyz"),
                (this.tileSize = 512),
                (this._loaded = !1),
                (this._options = a.extend({ type: "raster" }, g)),
                a.extend(this, a.pick(g, ["url", "scheme", "tileSize"]));
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.load = function () {
                var d = this;
                (this._loaded = !1),
                  this.fire(new a.Event("dataloading", { dataType: "source" })),
                  (this._tileJSONRequest = Ut(
                    this._options,
                    this.map._requestManager,
                    function (g, b) {
                      (d._tileJSONRequest = null),
                        (d._loaded = !0),
                        g
                          ? d.fire(new a.ErrorEvent(g))
                          : b &&
                            (a.extend(d, b),
                            b.bounds &&
                              (d.tileBounds = new Yt(
                                b.bounds,
                                d.minzoom,
                                d.maxzoom
                              )),
                            a.postTurnstileEvent(b.tiles),
                            a.postMapLoadEvent(
                              b.tiles,
                              d.map._getMapId(),
                              d.map._requestManager._skuToken
                            ),
                            d.fire(
                              new a.Event("data", {
                                dataType: "source",
                                sourceDataType: "metadata",
                              })
                            ),
                            d.fire(
                              new a.Event("data", {
                                dataType: "source",
                                sourceDataType: "content",
                              })
                            ));
                    }
                  ));
              }),
              (p.prototype.loaded = function () {
                return this._loaded;
              }),
              (p.prototype.onAdd = function (d) {
                (this.map = d), this.load();
              }),
              (p.prototype.onRemove = function () {
                this._tileJSONRequest &&
                  (this._tileJSONRequest.cancel(),
                  (this._tileJSONRequest = null));
              }),
              (p.prototype.serialize = function () {
                return a.extend({}, this._options);
              }),
              (p.prototype.hasTile = function (d) {
                return (
                  !this.tileBounds || this.tileBounds.contains(d.canonical)
                );
              }),
              (p.prototype.loadTile = function (d, g) {
                var b = this,
                  S = this.map._requestManager.normalizeTileURL(
                    d.tileID.canonical.url(this.tiles, this.scheme),
                    this.tileSize
                  );
                d.request = a.getImage(
                  this.map._requestManager.transformRequest(
                    S,
                    a.ResourceType.Tile
                  ),
                  function (w, M) {
                    if ((delete d.request, d.aborted))
                      (d.state = "unloaded"), g(null);
                    else if (w) (d.state = "errored"), g(w);
                    else if (M) {
                      b.map._refreshExpiredTiles && d.setExpiryData(M),
                        delete M.cacheControl,
                        delete M.expires;
                      var B = b.map.painter.context,
                        V = B.gl;
                      (d.texture = b.map.painter.getTileTexture(M.width)),
                        d.texture
                          ? d.texture.update(M, { useMipmap: !0 })
                          : ((d.texture = new a.Texture(B, M, V.RGBA, {
                              useMipmap: !0,
                            })),
                            d.texture.bind(
                              V.LINEAR,
                              V.CLAMP_TO_EDGE,
                              V.LINEAR_MIPMAP_NEAREST
                            ),
                            B.extTextureFilterAnisotropic &&
                              V.texParameterf(
                                V.TEXTURE_2D,
                                B.extTextureFilterAnisotropic
                                  .TEXTURE_MAX_ANISOTROPY_EXT,
                                B.extTextureFilterAnisotropicMax
                              )),
                        (d.state = "loaded"),
                        a.cacheEntryPossiblyAdded(b.dispatcher),
                        g(null);
                    }
                  }
                );
              }),
              (p.prototype.abortTile = function (d, g) {
                d.request && (d.request.cancel(), delete d.request), g();
              }),
              (p.prototype.unloadTile = function (d, g) {
                d.texture && this.map.painter.saveTileTexture(d.texture), g();
              }),
              (p.prototype.hasTransition = function () {
                return !1;
              }),
              p
            );
          })(a.Evented),
          gn = (function (u) {
            function p(d, g, b, S) {
              u.call(this, d, g, b, S),
                (this.type = "raster-dem"),
                (this.maxzoom = 22),
                (this._options = a.extend({ type: "raster-dem" }, g)),
                (this.encoding = g.encoding || "mapbox");
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.serialize = function () {
                return {
                  type: "raster-dem",
                  url: this.url,
                  tileSize: this.tileSize,
                  tiles: this.tiles,
                  bounds: this.bounds,
                  encoding: this.encoding,
                };
              }),
              (p.prototype.loadTile = function (d, g) {
                var b = this.map._requestManager.normalizeTileURL(
                  d.tileID.canonical.url(this.tiles, this.scheme),
                  this.tileSize
                );
                function S(w, M) {
                  w && ((d.state = "errored"), g(w)),
                    M &&
                      ((d.dem = M),
                      (d.needsHillshadePrepare = !0),
                      (d.state = "loaded"),
                      g(null));
                }
                (d.request = a.getImage(
                  this.map._requestManager.transformRequest(
                    b,
                    a.ResourceType.Tile
                  ),
                  function (w, M) {
                    if ((delete d.request, d.aborted))
                      (d.state = "unloaded"), g(null);
                    else if (w) (d.state = "errored"), g(w);
                    else if (M) {
                      this.map._refreshExpiredTiles && d.setExpiryData(M),
                        delete M.cacheControl,
                        delete M.expires;
                      var B =
                          a.window.ImageBitmap &&
                          M instanceof a.window.ImageBitmap &&
                          a.offscreenCanvasSupported()
                            ? M
                            : a.browser.getImageData(M, 1),
                        V = {
                          uid: d.uid,
                          coord: d.tileID,
                          source: this.id,
                          rawImageData: B,
                          encoding: this.encoding,
                        };
                      (d.actor && d.state !== "expired") ||
                        ((d.actor = this.dispatcher.getActor()),
                        d.actor.send("loadDEMTile", V, S.bind(this)));
                    }
                  }.bind(this)
                )),
                  (d.neighboringTiles = this._getNeighboringTiles(d.tileID));
              }),
              (p.prototype._getNeighboringTiles = function (d) {
                var g = d.canonical,
                  b = Math.pow(2, g.z),
                  S = (g.x - 1 + b) % b,
                  w = g.x === 0 ? d.wrap - 1 : d.wrap,
                  M = (g.x + 1 + b) % b,
                  B = g.x + 1 === b ? d.wrap + 1 : d.wrap,
                  V = {};
                return (
                  (V[
                    new a.OverscaledTileID(d.overscaledZ, w, g.z, S, g.y).key
                  ] = { backfilled: !1 }),
                  (V[
                    new a.OverscaledTileID(d.overscaledZ, B, g.z, M, g.y).key
                  ] = { backfilled: !1 }),
                  g.y > 0 &&
                    ((V[
                      new a.OverscaledTileID(
                        d.overscaledZ,
                        w,
                        g.z,
                        S,
                        g.y - 1
                      ).key
                    ] = { backfilled: !1 }),
                    (V[
                      new a.OverscaledTileID(
                        d.overscaledZ,
                        d.wrap,
                        g.z,
                        g.x,
                        g.y - 1
                      ).key
                    ] = { backfilled: !1 }),
                    (V[
                      new a.OverscaledTileID(
                        d.overscaledZ,
                        B,
                        g.z,
                        M,
                        g.y - 1
                      ).key
                    ] = { backfilled: !1 })),
                  g.y + 1 < b &&
                    ((V[
                      new a.OverscaledTileID(
                        d.overscaledZ,
                        w,
                        g.z,
                        S,
                        g.y + 1
                      ).key
                    ] = { backfilled: !1 }),
                    (V[
                      new a.OverscaledTileID(
                        d.overscaledZ,
                        d.wrap,
                        g.z,
                        g.x,
                        g.y + 1
                      ).key
                    ] = { backfilled: !1 }),
                    (V[
                      new a.OverscaledTileID(
                        d.overscaledZ,
                        B,
                        g.z,
                        M,
                        g.y + 1
                      ).key
                    ] = { backfilled: !1 })),
                  V
                );
              }),
              (p.prototype.unloadTile = function (d) {
                d.demTexture && this.map.painter.saveTileTexture(d.demTexture),
                  d.fbo && (d.fbo.destroy(), delete d.fbo),
                  d.dem && delete d.dem,
                  delete d.neighboringTiles,
                  (d.state = "unloaded"),
                  d.actor &&
                    d.actor.send("removeDEMTile", {
                      uid: d.uid,
                      source: this.id,
                    });
              }),
              p
            );
          })(On),
          xn = (function (u) {
            function p(d, g, b, S) {
              u.call(this),
                (this.id = d),
                (this.type = "geojson"),
                (this.minzoom = 0),
                (this.maxzoom = 18),
                (this.tileSize = 512),
                (this.isTileClipped = !0),
                (this.reparseOverscaled = !0),
                (this._removed = !1),
                (this._loaded = !1),
                (this.actor = b.getActor()),
                this.setEventedParent(S),
                (this._data = g.data),
                (this._options = a.extend({}, g)),
                (this._collectResourceTiming = g.collectResourceTiming),
                (this._resourceTiming = []),
                g.maxzoom !== void 0 && (this.maxzoom = g.maxzoom),
                g.type && (this.type = g.type),
                g.attribution && (this.attribution = g.attribution),
                (this.promoteId = g.promoteId);
              var w = a.EXTENT / this.tileSize;
              this.workerOptions = a.extend(
                {
                  source: this.id,
                  cluster: g.cluster || !1,
                  geojsonVtOptions: {
                    buffer: (g.buffer !== void 0 ? g.buffer : 128) * w,
                    tolerance:
                      (g.tolerance !== void 0 ? g.tolerance : 0.375) * w,
                    extent: a.EXTENT,
                    maxZoom: this.maxzoom,
                    lineMetrics: g.lineMetrics || !1,
                    generateId: g.generateId || !1,
                  },
                  superclusterOptions: {
                    maxZoom:
                      g.clusterMaxZoom !== void 0
                        ? Math.min(g.clusterMaxZoom, this.maxzoom - 1)
                        : this.maxzoom - 1,
                    minPoints: Math.max(2, g.clusterMinPoints || 2),
                    extent: a.EXTENT,
                    radius: (g.clusterRadius || 50) * w,
                    log: !1,
                    generateId: g.generateId || !1,
                  },
                  clusterProperties: g.clusterProperties,
                  filter: g.filter,
                },
                g.workerOptions
              );
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.load = function () {
                var d = this;
                this.fire(new a.Event("dataloading", { dataType: "source" })),
                  this._updateWorkerData(function (g) {
                    if (g) d.fire(new a.ErrorEvent(g));
                    else {
                      var b = {
                        dataType: "source",
                        sourceDataType: "metadata",
                      };
                      d._collectResourceTiming &&
                        d._resourceTiming &&
                        d._resourceTiming.length > 0 &&
                        ((b.resourceTiming = d._resourceTiming),
                        (d._resourceTiming = [])),
                        d.fire(new a.Event("data", b));
                    }
                  });
              }),
              (p.prototype.onAdd = function (d) {
                (this.map = d), this.load();
              }),
              (p.prototype.setData = function (d) {
                var g = this;
                return (
                  (this._data = d),
                  this.fire(new a.Event("dataloading", { dataType: "source" })),
                  this._updateWorkerData(function (b) {
                    if (b) g.fire(new a.ErrorEvent(b));
                    else {
                      var S = { dataType: "source", sourceDataType: "content" };
                      g._collectResourceTiming &&
                        g._resourceTiming &&
                        g._resourceTiming.length > 0 &&
                        ((S.resourceTiming = g._resourceTiming),
                        (g._resourceTiming = [])),
                        g.fire(new a.Event("data", S));
                    }
                  }),
                  this
                );
              }),
              (p.prototype.getClusterExpansionZoom = function (d, g) {
                return (
                  this.actor.send(
                    "geojson.getClusterExpansionZoom",
                    { clusterId: d, source: this.id },
                    g
                  ),
                  this
                );
              }),
              (p.prototype.getClusterChildren = function (d, g) {
                return (
                  this.actor.send(
                    "geojson.getClusterChildren",
                    { clusterId: d, source: this.id },
                    g
                  ),
                  this
                );
              }),
              (p.prototype.getClusterLeaves = function (d, g, b, S) {
                return (
                  this.actor.send(
                    "geojson.getClusterLeaves",
                    { source: this.id, clusterId: d, limit: g, offset: b },
                    S
                  ),
                  this
                );
              }),
              (p.prototype._updateWorkerData = function (d) {
                var g = this;
                this._loaded = !1;
                var b = a.extend({}, this.workerOptions),
                  S = this._data;
                typeof S == "string"
                  ? ((b.request = this.map._requestManager.transformRequest(
                      a.browser.resolveURL(S),
                      a.ResourceType.Source
                    )),
                    (b.request.collectResourceTiming =
                      this._collectResourceTiming))
                  : (b.data = JSON.stringify(S)),
                  this.actor.send(this.type + ".loadData", b, function (w, M) {
                    g._removed ||
                      (M && M.abandoned) ||
                      ((g._loaded = !0),
                      M &&
                        M.resourceTiming &&
                        M.resourceTiming[g.id] &&
                        (g._resourceTiming = M.resourceTiming[g.id].slice(0)),
                      g.actor.send(
                        g.type + ".coalesce",
                        { source: b.source },
                        null
                      ),
                      d(w));
                  });
              }),
              (p.prototype.loaded = function () {
                return this._loaded;
              }),
              (p.prototype.loadTile = function (d, g) {
                var b = this,
                  S = d.actor ? "reloadTile" : "loadTile";
                (d.actor = this.actor),
                  (d.request = this.actor.send(
                    S,
                    {
                      type: this.type,
                      uid: d.uid,
                      tileID: d.tileID,
                      zoom: d.tileID.overscaledZ,
                      maxZoom: this.maxzoom,
                      tileSize: this.tileSize,
                      source: this.id,
                      pixelRatio: a.browser.devicePixelRatio,
                      showCollisionBoxes: this.map.showCollisionBoxes,
                      promoteId: this.promoteId,
                    },
                    function (w, M) {
                      return (
                        delete d.request,
                        d.unloadVectorData(),
                        d.aborted
                          ? g(null)
                          : w
                          ? g(w)
                          : (d.loadVectorData(
                              M,
                              b.map.painter,
                              S === "reloadTile"
                            ),
                            g(null))
                      );
                    }
                  ));
              }),
              (p.prototype.abortTile = function (d) {
                d.request && (d.request.cancel(), delete d.request),
                  (d.aborted = !0);
              }),
              (p.prototype.unloadTile = function (d) {
                d.unloadVectorData(),
                  this.actor.send("removeTile", {
                    uid: d.uid,
                    type: this.type,
                    source: this.id,
                  });
              }),
              (p.prototype.onRemove = function () {
                (this._removed = !0),
                  this.actor.send("removeSource", {
                    type: this.type,
                    source: this.id,
                  });
              }),
              (p.prototype.serialize = function () {
                return a.extend({}, this._options, {
                  type: this.type,
                  data: this._data,
                });
              }),
              (p.prototype.hasTransition = function () {
                return !1;
              }),
              p
            );
          })(a.Evented),
          Kn = a.createLayout([
            { name: "a_pos", type: "Int16", components: 2 },
            { name: "a_texture_pos", type: "Int16", components: 2 },
          ]),
          er = (function (u) {
            function p(d, g, b, S) {
              u.call(this),
                (this.id = d),
                (this.dispatcher = b),
                (this.coordinates = g.coordinates),
                (this.type = "image"),
                (this.minzoom = 0),
                (this.maxzoom = 22),
                (this.tileSize = 512),
                (this.tiles = {}),
                (this._loaded = !1),
                this.setEventedParent(S),
                (this.options = g);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.load = function (d, g) {
                var b = this;
                (this._loaded = !1),
                  this.fire(new a.Event("dataloading", { dataType: "source" })),
                  (this.url = this.options.url),
                  a.getImage(
                    this.map._requestManager.transformRequest(
                      this.url,
                      a.ResourceType.Image
                    ),
                    function (S, w) {
                      (b._loaded = !0),
                        S
                          ? b.fire(new a.ErrorEvent(S))
                          : w &&
                            ((b.image = w),
                            d && (b.coordinates = d),
                            g && g(),
                            b._finishLoading());
                    }
                  );
              }),
              (p.prototype.loaded = function () {
                return this._loaded;
              }),
              (p.prototype.updateImage = function (d) {
                var g = this;
                return this.image && d.url
                  ? ((this.options.url = d.url),
                    this.load(d.coordinates, function () {
                      g.texture = null;
                    }),
                    this)
                  : this;
              }),
              (p.prototype._finishLoading = function () {
                this.map &&
                  (this.setCoordinates(this.coordinates),
                  this.fire(
                    new a.Event("data", {
                      dataType: "source",
                      sourceDataType: "metadata",
                    })
                  ));
              }),
              (p.prototype.onAdd = function (d) {
                (this.map = d), this.load();
              }),
              (p.prototype.setCoordinates = function (d) {
                var g = this;
                this.coordinates = d;
                var b = d.map(a.MercatorCoordinate.fromLngLat);
                (this.tileID = (function (w) {
                  for (
                    var M = 1 / 0,
                      B = 1 / 0,
                      V = -1 / 0,
                      J = -1 / 0,
                      ne = 0,
                      re = w;
                    ne < re.length;
                    ne += 1
                  ) {
                    var _e = re[ne];
                    (M = Math.min(M, _e.x)),
                      (B = Math.min(B, _e.y)),
                      (V = Math.max(V, _e.x)),
                      (J = Math.max(J, _e.y));
                  }
                  var pe = Math.max(V - M, J - B),
                    Ce = Math.max(0, Math.floor(-Math.log(pe) / Math.LN2)),
                    de = Math.pow(2, Ce);
                  return new a.CanonicalTileID(
                    Ce,
                    Math.floor(((M + V) / 2) * de),
                    Math.floor(((B + J) / 2) * de)
                  );
                })(b)),
                  (this.minzoom = this.maxzoom = this.tileID.z);
                var S = b.map(function (w) {
                  return g.tileID.getTilePoint(w)._round();
                });
                return (
                  (this._boundsArray = new a.StructArrayLayout4i8()),
                  this._boundsArray.emplaceBack(S[0].x, S[0].y, 0, 0),
                  this._boundsArray.emplaceBack(S[1].x, S[1].y, a.EXTENT, 0),
                  this._boundsArray.emplaceBack(S[3].x, S[3].y, 0, a.EXTENT),
                  this._boundsArray.emplaceBack(
                    S[2].x,
                    S[2].y,
                    a.EXTENT,
                    a.EXTENT
                  ),
                  this.boundsBuffer &&
                    (this.boundsBuffer.destroy(), delete this.boundsBuffer),
                  this.fire(
                    new a.Event("data", {
                      dataType: "source",
                      sourceDataType: "content",
                    })
                  ),
                  this
                );
              }),
              (p.prototype.prepare = function () {
                if (Object.keys(this.tiles).length !== 0 && this.image) {
                  var d = this.map.painter.context,
                    g = d.gl;
                  for (var b in (this.boundsBuffer ||
                    (this.boundsBuffer = d.createVertexBuffer(
                      this._boundsArray,
                      Kn.members
                    )),
                  this.boundsSegments ||
                    (this.boundsSegments = a.SegmentVector.simpleSegment(
                      0,
                      0,
                      4,
                      2
                    )),
                  this.texture ||
                    ((this.texture = new a.Texture(d, this.image, g.RGBA)),
                    this.texture.bind(g.LINEAR, g.CLAMP_TO_EDGE)),
                  this.tiles)) {
                    var S = this.tiles[b];
                    S.state !== "loaded" &&
                      ((S.state = "loaded"), (S.texture = this.texture));
                  }
                }
              }),
              (p.prototype.loadTile = function (d, g) {
                this.tileID && this.tileID.equals(d.tileID.canonical)
                  ? ((this.tiles[String(d.tileID.wrap)] = d),
                    (d.buckets = {}),
                    g(null))
                  : ((d.state = "errored"), g(null));
              }),
              (p.prototype.serialize = function () {
                return {
                  type: "image",
                  url: this.options.url,
                  coordinates: this.coordinates,
                };
              }),
              (p.prototype.hasTransition = function () {
                return !1;
              }),
              p
            );
          })(a.Evented),
          _r = (function (u) {
            function p(d, g, b, S) {
              u.call(this, d, g, b, S),
                (this.roundZoom = !0),
                (this.type = "video"),
                (this.options = g);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.load = function () {
                var d = this;
                this._loaded = !1;
                var g = this.options;
                this.urls = [];
                for (var b = 0, S = g.urls; b < S.length; b += 1)
                  this.urls.push(
                    this.map._requestManager.transformRequest(
                      S[b],
                      a.ResourceType.Source
                    ).url
                  );
                a.getVideo(this.urls, function (w, M) {
                  (d._loaded = !0),
                    w
                      ? d.fire(new a.ErrorEvent(w))
                      : M &&
                        ((d.video = M),
                        (d.video.loop = !0),
                        d.video.setAttribute("playsinline", ""),
                        d.video.addEventListener("playing", function () {
                          d.map.triggerRepaint();
                        }),
                        d.map && d.video.play(),
                        d._finishLoading());
                });
              }),
              (p.prototype.pause = function () {
                this.video && this.video.pause();
              }),
              (p.prototype.play = function () {
                this.video && this.video.play();
              }),
              (p.prototype.seek = function (d) {
                if (this.video) {
                  var g = this.video.seekable;
                  d < g.start(0) || d > g.end(0)
                    ? this.fire(
                        new a.ErrorEvent(
                          new a.ValidationError(
                            "sources." + this.id,
                            null,
                            "Playback for this video can be set only between the " +
                              g.start(0) +
                              " and " +
                              g.end(0) +
                              "-second mark."
                          )
                        )
                      )
                    : (this.video.currentTime = d);
                }
              }),
              (p.prototype.getVideo = function () {
                return this.video;
              }),
              (p.prototype.onAdd = function (d) {
                this.map ||
                  ((this.map = d),
                  this.load(),
                  this.video &&
                    (this.video.play(), this.setCoordinates(this.coordinates)));
              }),
              (p.prototype.prepare = function () {
                if (
                  !(
                    Object.keys(this.tiles).length === 0 ||
                    this.video.readyState < 2
                  )
                ) {
                  var d = this.map.painter.context,
                    g = d.gl;
                  for (var b in (this.boundsBuffer ||
                    (this.boundsBuffer = d.createVertexBuffer(
                      this._boundsArray,
                      Kn.members
                    )),
                  this.boundsSegments ||
                    (this.boundsSegments = a.SegmentVector.simpleSegment(
                      0,
                      0,
                      4,
                      2
                    )),
                  this.texture
                    ? this.video.paused ||
                      (this.texture.bind(g.LINEAR, g.CLAMP_TO_EDGE),
                      g.texSubImage2D(
                        g.TEXTURE_2D,
                        0,
                        0,
                        0,
                        g.RGBA,
                        g.UNSIGNED_BYTE,
                        this.video
                      ))
                    : ((this.texture = new a.Texture(d, this.video, g.RGBA)),
                      this.texture.bind(g.LINEAR, g.CLAMP_TO_EDGE)),
                  this.tiles)) {
                    var S = this.tiles[b];
                    S.state !== "loaded" &&
                      ((S.state = "loaded"), (S.texture = this.texture));
                  }
                }
              }),
              (p.prototype.serialize = function () {
                return {
                  type: "video",
                  urls: this.urls,
                  coordinates: this.coordinates,
                };
              }),
              (p.prototype.hasTransition = function () {
                return this.video && !this.video.paused;
              }),
              p
            );
          })(er),
          Nr = (function (u) {
            function p(d, g, b, S) {
              u.call(this, d, g, b, S),
                g.coordinates
                  ? (Array.isArray(g.coordinates) &&
                      g.coordinates.length === 4 &&
                      !g.coordinates.some(function (w) {
                        return (
                          !Array.isArray(w) ||
                          w.length !== 2 ||
                          w.some(function (M) {
                            return typeof M != "number";
                          })
                        );
                      })) ||
                    this.fire(
                      new a.ErrorEvent(
                        new a.ValidationError(
                          "sources." + d,
                          null,
                          '"coordinates" property must be an array of 4 longitude/latitude array pairs'
                        )
                      )
                    )
                  : this.fire(
                      new a.ErrorEvent(
                        new a.ValidationError(
                          "sources." + d,
                          null,
                          'missing required property "coordinates"'
                        )
                      )
                    ),
                g.animate &&
                  typeof g.animate != "boolean" &&
                  this.fire(
                    new a.ErrorEvent(
                      new a.ValidationError(
                        "sources." + d,
                        null,
                        'optional "animate" property must be a boolean value'
                      )
                    )
                  ),
                g.canvas
                  ? typeof g.canvas == "string" ||
                    g.canvas instanceof a.window.HTMLCanvasElement ||
                    this.fire(
                      new a.ErrorEvent(
                        new a.ValidationError(
                          "sources." + d,
                          null,
                          '"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'
                        )
                      )
                    )
                  : this.fire(
                      new a.ErrorEvent(
                        new a.ValidationError(
                          "sources." + d,
                          null,
                          'missing required property "canvas"'
                        )
                      )
                    ),
                (this.options = g),
                (this.animate = g.animate === void 0 || g.animate);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.load = function () {
                (this._loaded = !0),
                  this.canvas ||
                    (this.canvas =
                      this.options.canvas instanceof a.window.HTMLCanvasElement
                        ? this.options.canvas
                        : a.window.document.getElementById(
                            this.options.canvas
                          )),
                  (this.width = this.canvas.width),
                  (this.height = this.canvas.height),
                  this._hasInvalidDimensions()
                    ? this.fire(
                        new a.ErrorEvent(
                          new Error(
                            "Canvas dimensions cannot be less than or equal to zero."
                          )
                        )
                      )
                    : ((this.play = function () {
                        (this._playing = !0), this.map.triggerRepaint();
                      }),
                      (this.pause = function () {
                        this._playing && (this.prepare(), (this._playing = !1));
                      }),
                      this._finishLoading());
              }),
              (p.prototype.getCanvas = function () {
                return this.canvas;
              }),
              (p.prototype.onAdd = function (d) {
                (this.map = d),
                  this.load(),
                  this.canvas && this.animate && this.play();
              }),
              (p.prototype.onRemove = function () {
                this.pause();
              }),
              (p.prototype.prepare = function () {
                var d = !1;
                if (
                  (this.canvas.width !== this.width &&
                    ((this.width = this.canvas.width), (d = !0)),
                  this.canvas.height !== this.height &&
                    ((this.height = this.canvas.height), (d = !0)),
                  !this._hasInvalidDimensions() &&
                    Object.keys(this.tiles).length !== 0)
                ) {
                  var g = this.map.painter.context,
                    b = g.gl;
                  for (var S in (this.boundsBuffer ||
                    (this.boundsBuffer = g.createVertexBuffer(
                      this._boundsArray,
                      Kn.members
                    )),
                  this.boundsSegments ||
                    (this.boundsSegments = a.SegmentVector.simpleSegment(
                      0,
                      0,
                      4,
                      2
                    )),
                  this.texture
                    ? (d || this._playing) &&
                      this.texture.update(this.canvas, { premultiply: !0 })
                    : (this.texture = new a.Texture(g, this.canvas, b.RGBA, {
                        premultiply: !0,
                      })),
                  this.tiles)) {
                    var w = this.tiles[S];
                    w.state !== "loaded" &&
                      ((w.state = "loaded"), (w.texture = this.texture));
                  }
                }
              }),
              (p.prototype.serialize = function () {
                return { type: "canvas", coordinates: this.coordinates };
              }),
              (p.prototype.hasTransition = function () {
                return this._playing;
              }),
              (p.prototype._hasInvalidDimensions = function () {
                for (
                  var d = 0, g = [this.canvas.width, this.canvas.height];
                  d < g.length;
                  d += 1
                ) {
                  var b = g[d];
                  if (isNaN(b) || b <= 0) return !0;
                }
                return !1;
              }),
              p
            );
          })(er),
          ir = {
            vector: Ht,
            raster: On,
            "raster-dem": gn,
            geojson: xn,
            video: _r,
            image: er,
            canvas: Nr,
          };
        function $i(u, p) {
          var d = a.identity([]);
          return (
            a.translate(d, d, [1, 1, 0]),
            a.scale(d, d, [0.5 * u.width, 0.5 * u.height, 1]),
            a.multiply(d, d, u.calculatePosMatrix(p.toUnwrapped()))
          );
        }
        function Tr(u, p, d, g, b, S) {
          var w = (function (Ce, de, we) {
              if (Ce)
                for (var De = 0, Ge = Ce; De < Ge.length; De += 1) {
                  var st = de[Ge[De]];
                  if (st && st.source === we && st.type === "fill-extrusion")
                    return !0;
                }
              else
                for (var Je in de) {
                  var ht = de[Je];
                  if (ht.source === we && ht.type === "fill-extrusion")
                    return !0;
                }
              return !1;
            })(b && b.layers, p, u.id),
            M = S.maxPitchScaleFactor(),
            B = u.tilesIn(g, M, w);
          B.sort(Fi);
          for (var V = [], J = 0, ne = B; J < ne.length; J += 1) {
            var re = ne[J];
            V.push({
              wrappedTileID: re.tileID.wrapped().key,
              queryResults: re.tile.queryRenderedFeatures(
                p,
                d,
                u._state,
                re.queryGeometry,
                re.cameraQueryGeometry,
                re.scale,
                b,
                S,
                M,
                $i(u.transform, re.tileID)
              ),
            });
          }
          var _e = (function (Ce) {
            for (
              var de = {}, we = {}, De = 0, Ge = Ce;
              De < Ge.length;
              De += 1
            ) {
              var st = Ge[De],
                Je = st.queryResults,
                ht = st.wrappedTileID,
                Et = (we[ht] = we[ht] || {});
              for (var jt in Je)
                for (
                  var Ft = Je[jt],
                    sn = (Et[jt] = Et[jt] || {}),
                    In = (de[jt] = de[jt] || []),
                    Bn = 0,
                    Dn = Ft;
                  Bn < Dn.length;
                  Bn += 1
                ) {
                  var Fr = Dn[Bn];
                  sn[Fr.featureIndex] ||
                    ((sn[Fr.featureIndex] = !0), In.push(Fr));
                }
            }
            return de;
          })(V);
          for (var pe in _e)
            _e[pe].forEach(function (Ce) {
              var de = Ce.feature,
                we = u.getFeatureState(de.layer["source-layer"], de.id);
              (de.source = de.layer.source),
                de.layer["source-layer"] &&
                  (de.sourceLayer = de.layer["source-layer"]),
                (de.state = we);
            });
          return _e;
        }
        function Fi(u, p) {
          var d = u.tileID,
            g = p.tileID;
          return (
            d.overscaledZ - g.overscaledZ ||
            d.canonical.y - g.canonical.y ||
            d.wrap - g.wrap ||
            d.canonical.x - g.canonical.x
          );
        }
        var qe = function (u, p) {
          (this.max = u), (this.onRemove = p), this.reset();
        };
        (qe.prototype.reset = function () {
          for (var u in this.data)
            for (var p = 0, d = this.data[u]; p < d.length; p += 1) {
              var g = d[p];
              g.timeout && clearTimeout(g.timeout), this.onRemove(g.value);
            }
          return (this.data = {}), (this.order = []), this;
        }),
          (qe.prototype.add = function (u, p, d) {
            var g = this,
              b = u.wrapped().key;
            this.data[b] === void 0 && (this.data[b] = []);
            var S = { value: p, timeout: void 0 };
            if (
              (d !== void 0 &&
                (S.timeout = setTimeout(function () {
                  g.remove(u, S);
                }, d)),
              this.data[b].push(S),
              this.order.push(b),
              this.order.length > this.max)
            ) {
              var w = this._getAndRemoveByKey(this.order[0]);
              w && this.onRemove(w);
            }
            return this;
          }),
          (qe.prototype.has = function (u) {
            return u.wrapped().key in this.data;
          }),
          (qe.prototype.getAndRemove = function (u) {
            return this.has(u)
              ? this._getAndRemoveByKey(u.wrapped().key)
              : null;
          }),
          (qe.prototype._getAndRemoveByKey = function (u) {
            var p = this.data[u].shift();
            return (
              p.timeout && clearTimeout(p.timeout),
              this.data[u].length === 0 && delete this.data[u],
              this.order.splice(this.order.indexOf(u), 1),
              p.value
            );
          }),
          (qe.prototype.getByKey = function (u) {
            var p = this.data[u];
            return p ? p[0].value : null;
          }),
          (qe.prototype.get = function (u) {
            return this.has(u) ? this.data[u.wrapped().key][0].value : null;
          }),
          (qe.prototype.remove = function (u, p) {
            if (!this.has(u)) return this;
            var d = u.wrapped().key,
              g = p === void 0 ? 0 : this.data[d].indexOf(p),
              b = this.data[d][g];
            return (
              this.data[d].splice(g, 1),
              b.timeout && clearTimeout(b.timeout),
              this.data[d].length === 0 && delete this.data[d],
              this.onRemove(b.value),
              this.order.splice(this.order.indexOf(d), 1),
              this
            );
          }),
          (qe.prototype.setMaxSize = function (u) {
            for (this.max = u; this.order.length > this.max; ) {
              var p = this._getAndRemoveByKey(this.order[0]);
              p && this.onRemove(p);
            }
            return this;
          }),
          (qe.prototype.filter = function (u) {
            var p = [];
            for (var d in this.data)
              for (var g = 0, b = this.data[d]; g < b.length; g += 1) {
                var S = b[g];
                u(S.value) || p.push(S);
              }
            for (var w = 0, M = p; w < M.length; w += 1) {
              var B = M[w];
              this.remove(B.value.tileID, B);
            }
          });
        var $t = function (u, p, d) {
          this.context = u;
          var g = u.gl;
          (this.buffer = g.createBuffer()),
            (this.dynamicDraw = !!d),
            this.context.unbindVAO(),
            u.bindElementBuffer.set(this.buffer),
            g.bufferData(
              g.ELEMENT_ARRAY_BUFFER,
              p.arrayBuffer,
              this.dynamicDraw ? g.DYNAMIC_DRAW : g.STATIC_DRAW
            ),
            this.dynamicDraw || delete p.arrayBuffer;
        };
        ($t.prototype.bind = function () {
          this.context.bindElementBuffer.set(this.buffer);
        }),
          ($t.prototype.updateData = function (u) {
            var p = this.context.gl;
            this.context.unbindVAO(),
              this.bind(),
              p.bufferSubData(p.ELEMENT_ARRAY_BUFFER, 0, u.arrayBuffer);
          }),
          ($t.prototype.destroy = function () {
            this.buffer &&
              (this.context.gl.deleteBuffer(this.buffer), delete this.buffer);
          });
        var Cn = {
            Int8: "BYTE",
            Uint8: "UNSIGNED_BYTE",
            Int16: "SHORT",
            Uint16: "UNSIGNED_SHORT",
            Int32: "INT",
            Uint32: "UNSIGNED_INT",
            Float32: "FLOAT",
          },
          St = function (u, p, d, g) {
            (this.length = p.length),
              (this.attributes = d),
              (this.itemSize = p.bytesPerElement),
              (this.dynamicDraw = g),
              (this.context = u);
            var b = u.gl;
            (this.buffer = b.createBuffer()),
              u.bindVertexBuffer.set(this.buffer),
              b.bufferData(
                b.ARRAY_BUFFER,
                p.arrayBuffer,
                this.dynamicDraw ? b.DYNAMIC_DRAW : b.STATIC_DRAW
              ),
              this.dynamicDraw || delete p.arrayBuffer;
          };
        (St.prototype.bind = function () {
          this.context.bindVertexBuffer.set(this.buffer);
        }),
          (St.prototype.updateData = function (u) {
            var p = this.context.gl;
            this.bind(), p.bufferSubData(p.ARRAY_BUFFER, 0, u.arrayBuffer);
          }),
          (St.prototype.enableAttributes = function (u, p) {
            for (var d = 0; d < this.attributes.length; d++) {
              var g = p.attributes[this.attributes[d].name];
              g !== void 0 && u.enableVertexAttribArray(g);
            }
          }),
          (St.prototype.setVertexAttribPointers = function (u, p, d) {
            for (var g = 0; g < this.attributes.length; g++) {
              var b = this.attributes[g],
                S = p.attributes[b.name];
              S !== void 0 &&
                u.vertexAttribPointer(
                  S,
                  b.components,
                  u[Cn[b.type]],
                  !1,
                  this.itemSize,
                  b.offset + this.itemSize * (d || 0)
                );
            }
          }),
          (St.prototype.destroy = function () {
            this.buffer &&
              (this.context.gl.deleteBuffer(this.buffer), delete this.buffer);
          });
        var An = function (u) {
          (this.gl = u.gl),
            (this.default = this.getDefault()),
            (this.current = this.default),
            (this.dirty = !1);
        };
        (An.prototype.get = function () {
          return this.current;
        }),
          (An.prototype.set = function (u) {}),
          (An.prototype.getDefault = function () {
            return this.default;
          }),
          (An.prototype.setDefault = function () {
            this.set(this.default);
          });
        var ar = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return a.Color.transparent;
              }),
              (p.prototype.set = function (d) {
                var g = this.current;
                (d.r !== g.r ||
                  d.g !== g.g ||
                  d.b !== g.b ||
                  d.a !== g.a ||
                  this.dirty) &&
                  (this.gl.clearColor(d.r, d.g, d.b, d.a),
                  (this.current = d),
                  (this.dirty = !1));
              }),
              p
            );
          })(An),
          yr = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return 1;
              }),
              (p.prototype.set = function (d) {
                (d !== this.current || this.dirty) &&
                  (this.gl.clearDepth(d),
                  (this.current = d),
                  (this.dirty = !1));
              }),
              p
            );
          })(An),
          nr = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return 0;
              }),
              (p.prototype.set = function (d) {
                (d !== this.current || this.dirty) &&
                  (this.gl.clearStencil(d),
                  (this.current = d),
                  (this.dirty = !1));
              }),
              p
            );
          })(An),
          Qn = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return [!0, !0, !0, !0];
              }),
              (p.prototype.set = function (d) {
                var g = this.current;
                (d[0] !== g[0] ||
                  d[1] !== g[1] ||
                  d[2] !== g[2] ||
                  d[3] !== g[3] ||
                  this.dirty) &&
                  (this.gl.colorMask(d[0], d[1], d[2], d[3]),
                  (this.current = d),
                  (this.dirty = !1));
              }),
              p
            );
          })(An),
          Sr = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return !0;
              }),
              (p.prototype.set = function (d) {
                (d !== this.current || this.dirty) &&
                  (this.gl.depthMask(d), (this.current = d), (this.dirty = !1));
              }),
              p
            );
          })(An),
          ta = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return 255;
              }),
              (p.prototype.set = function (d) {
                (d !== this.current || this.dirty) &&
                  (this.gl.stencilMask(d),
                  (this.current = d),
                  (this.dirty = !1));
              }),
              p
            );
          })(An),
          ei = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return { func: this.gl.ALWAYS, ref: 0, mask: 255 };
              }),
              (p.prototype.set = function (d) {
                var g = this.current;
                (d.func !== g.func ||
                  d.ref !== g.ref ||
                  d.mask !== g.mask ||
                  this.dirty) &&
                  (this.gl.stencilFunc(d.func, d.ref, d.mask),
                  (this.current = d),
                  (this.dirty = !1));
              }),
              p
            );
          })(An),
          ri = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                var d = this.gl;
                return [d.KEEP, d.KEEP, d.KEEP];
              }),
              (p.prototype.set = function (d) {
                var g = this.current;
                (d[0] !== g[0] ||
                  d[1] !== g[1] ||
                  d[2] !== g[2] ||
                  this.dirty) &&
                  (this.gl.stencilOp(d[0], d[1], d[2]),
                  (this.current = d),
                  (this.dirty = !1));
              }),
              p
            );
          })(An),
          Ra = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return !1;
              }),
              (p.prototype.set = function (d) {
                if (d !== this.current || this.dirty) {
                  var g = this.gl;
                  d ? g.enable(g.STENCIL_TEST) : g.disable(g.STENCIL_TEST),
                    (this.current = d),
                    (this.dirty = !1);
                }
              }),
              p
            );
          })(An),
          le = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return [0, 1];
              }),
              (p.prototype.set = function (d) {
                var g = this.current;
                (d[0] !== g[0] || d[1] !== g[1] || this.dirty) &&
                  (this.gl.depthRange(d[0], d[1]),
                  (this.current = d),
                  (this.dirty = !1));
              }),
              p
            );
          })(An),
          Ia = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return !1;
              }),
              (p.prototype.set = function (d) {
                if (d !== this.current || this.dirty) {
                  var g = this.gl;
                  d ? g.enable(g.DEPTH_TEST) : g.disable(g.DEPTH_TEST),
                    (this.current = d),
                    (this.dirty = !1);
                }
              }),
              p
            );
          })(An),
          ts = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return this.gl.LESS;
              }),
              (p.prototype.set = function (d) {
                (d !== this.current || this.dirty) &&
                  (this.gl.depthFunc(d), (this.current = d), (this.dirty = !1));
              }),
              p
            );
          })(An),
          Ma = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return !1;
              }),
              (p.prototype.set = function (d) {
                if (d !== this.current || this.dirty) {
                  var g = this.gl;
                  d ? g.enable(g.BLEND) : g.disable(g.BLEND),
                    (this.current = d),
                    (this.dirty = !1);
                }
              }),
              p
            );
          })(An),
          ys = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                var d = this.gl;
                return [d.ONE, d.ZERO];
              }),
              (p.prototype.set = function (d) {
                var g = this.current;
                (d[0] !== g[0] || d[1] !== g[1] || this.dirty) &&
                  (this.gl.blendFunc(d[0], d[1]),
                  (this.current = d),
                  (this.dirty = !1));
              }),
              p
            );
          })(An),
          di = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return a.Color.transparent;
              }),
              (p.prototype.set = function (d) {
                var g = this.current;
                (d.r !== g.r ||
                  d.g !== g.g ||
                  d.b !== g.b ||
                  d.a !== g.a ||
                  this.dirty) &&
                  (this.gl.blendColor(d.r, d.g, d.b, d.a),
                  (this.current = d),
                  (this.dirty = !1));
              }),
              p
            );
          })(An),
          Pa = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return this.gl.FUNC_ADD;
              }),
              (p.prototype.set = function (d) {
                (d !== this.current || this.dirty) &&
                  (this.gl.blendEquation(d),
                  (this.current = d),
                  (this.dirty = !1));
              }),
              p
            );
          })(An),
          yo = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return !1;
              }),
              (p.prototype.set = function (d) {
                if (d !== this.current || this.dirty) {
                  var g = this.gl;
                  d ? g.enable(g.CULL_FACE) : g.disable(g.CULL_FACE),
                    (this.current = d),
                    (this.dirty = !1);
                }
              }),
              p
            );
          })(An),
          Oa = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return this.gl.BACK;
              }),
              (p.prototype.set = function (d) {
                (d !== this.current || this.dirty) &&
                  (this.gl.cullFace(d), (this.current = d), (this.dirty = !1));
              }),
              p
            );
          })(An),
          Os = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return this.gl.CCW;
              }),
              (p.prototype.set = function (d) {
                (d !== this.current || this.dirty) &&
                  (this.gl.frontFace(d), (this.current = d), (this.dirty = !1));
              }),
              p
            );
          })(An),
          Wi = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return null;
              }),
              (p.prototype.set = function (d) {
                (d !== this.current || this.dirty) &&
                  (this.gl.useProgram(d),
                  (this.current = d),
                  (this.dirty = !1));
              }),
              p
            );
          })(An),
          xs = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return this.gl.TEXTURE0;
              }),
              (p.prototype.set = function (d) {
                (d !== this.current || this.dirty) &&
                  (this.gl.activeTexture(d),
                  (this.current = d),
                  (this.dirty = !1));
              }),
              p
            );
          })(An),
          Mo = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                var d = this.gl;
                return [0, 0, d.drawingBufferWidth, d.drawingBufferHeight];
              }),
              (p.prototype.set = function (d) {
                var g = this.current;
                (d[0] !== g[0] ||
                  d[1] !== g[1] ||
                  d[2] !== g[2] ||
                  d[3] !== g[3] ||
                  this.dirty) &&
                  (this.gl.viewport(d[0], d[1], d[2], d[3]),
                  (this.current = d),
                  (this.dirty = !1));
              }),
              p
            );
          })(An),
          sl = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return null;
              }),
              (p.prototype.set = function (d) {
                if (d !== this.current || this.dirty) {
                  var g = this.gl;
                  g.bindFramebuffer(g.FRAMEBUFFER, d),
                    (this.current = d),
                    (this.dirty = !1);
                }
              }),
              p
            );
          })(An),
          mc = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return null;
              }),
              (p.prototype.set = function (d) {
                if (d !== this.current || this.dirty) {
                  var g = this.gl;
                  g.bindRenderbuffer(g.RENDERBUFFER, d),
                    (this.current = d),
                    (this.dirty = !1);
                }
              }),
              p
            );
          })(An),
          ll = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return null;
              }),
              (p.prototype.set = function (d) {
                if (d !== this.current || this.dirty) {
                  var g = this.gl;
                  g.bindTexture(g.TEXTURE_2D, d),
                    (this.current = d),
                    (this.dirty = !1);
                }
              }),
              p
            );
          })(An),
          jc = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return null;
              }),
              (p.prototype.set = function (d) {
                if (d !== this.current || this.dirty) {
                  var g = this.gl;
                  g.bindBuffer(g.ARRAY_BUFFER, d),
                    (this.current = d),
                    (this.dirty = !1);
                }
              }),
              p
            );
          })(An),
          cl = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return null;
              }),
              (p.prototype.set = function (d) {
                var g = this.gl;
                g.bindBuffer(g.ELEMENT_ARRAY_BUFFER, d),
                  (this.current = d),
                  (this.dirty = !1);
              }),
              p
            );
          })(An),
          jo = (function (u) {
            function p(d) {
              u.call(this, d), (this.vao = d.extVertexArrayObject);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return null;
              }),
              (p.prototype.set = function (d) {
                this.vao &&
                  (d !== this.current || this.dirty) &&
                  (this.vao.bindVertexArrayOES(d),
                  (this.current = d),
                  (this.dirty = !1));
              }),
              p
            );
          })(An),
          Wo = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return 4;
              }),
              (p.prototype.set = function (d) {
                if (d !== this.current || this.dirty) {
                  var g = this.gl;
                  g.pixelStorei(g.UNPACK_ALIGNMENT, d),
                    (this.current = d),
                    (this.dirty = !1);
                }
              }),
              p
            );
          })(An),
          Ls = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return !1;
              }),
              (p.prototype.set = function (d) {
                if (d !== this.current || this.dirty) {
                  var g = this.gl;
                  g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL, d),
                    (this.current = d),
                    (this.dirty = !1);
                }
              }),
              p
            );
          })(An),
          gc = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return !1;
              }),
              (p.prototype.set = function (d) {
                if (d !== this.current || this.dirty) {
                  var g = this.gl;
                  g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL, d),
                    (this.current = d),
                    (this.dirty = !1);
                }
              }),
              p
            );
          })(An),
          Wr = (function (u) {
            function p(d, g) {
              u.call(this, d), (this.context = d), (this.parent = g);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getDefault = function () {
                return null;
              }),
              p
            );
          })(An),
          z = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.setDirty = function () {
                this.dirty = !0;
              }),
              (p.prototype.set = function (d) {
                if (d !== this.current || this.dirty) {
                  this.context.bindFramebuffer.set(this.parent);
                  var g = this.gl;
                  g.framebufferTexture2D(
                    g.FRAMEBUFFER,
                    g.COLOR_ATTACHMENT0,
                    g.TEXTURE_2D,
                    d,
                    0
                  ),
                    (this.current = d),
                    (this.dirty = !1);
                }
              }),
              p
            );
          })(Wr),
          j = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.set = function (d) {
                if (d !== this.current || this.dirty) {
                  this.context.bindFramebuffer.set(this.parent);
                  var g = this.gl;
                  g.framebufferRenderbuffer(
                    g.FRAMEBUFFER,
                    g.DEPTH_ATTACHMENT,
                    g.RENDERBUFFER,
                    d
                  ),
                    (this.current = d),
                    (this.dirty = !1);
                }
              }),
              p
            );
          })(Wr),
          Z = function (u, p, d, g) {
            (this.context = u), (this.width = p), (this.height = d);
            var b = (this.framebuffer = u.gl.createFramebuffer());
            (this.colorAttachment = new z(u, b)),
              g && (this.depthAttachment = new j(u, b));
          };
        Z.prototype.destroy = function () {
          var u = this.context.gl,
            p = this.colorAttachment.get();
          if ((p && u.deleteTexture(p), this.depthAttachment)) {
            var d = this.depthAttachment.get();
            d && u.deleteRenderbuffer(d);
          }
          u.deleteFramebuffer(this.framebuffer);
        };
        var ae = function (u, p, d) {
          (this.func = u), (this.mask = p), (this.range = d);
        };
        (ae.ReadOnly = !1),
          (ae.ReadWrite = !0),
          (ae.disabled = new ae(519, ae.ReadOnly, [0, 1]));
        var fe = function (u, p, d, g, b, S) {
          (this.test = u),
            (this.ref = p),
            (this.mask = d),
            (this.fail = g),
            (this.depthFail = b),
            (this.pass = S);
        };
        fe.disabled = new fe({ func: 519, mask: 0 }, 0, 0, 7680, 7680, 7680);
        var Pe = function (u, p, d) {
          (this.blendFunction = u), (this.blendColor = p), (this.mask = d);
        };
        (Pe.disabled = new Pe((Pe.Replace = [1, 0]), a.Color.transparent, [
          !1,
          !1,
          !1,
          !1,
        ])),
          (Pe.unblended = new Pe(Pe.Replace, a.Color.transparent, [
            !0,
            !0,
            !0,
            !0,
          ])),
          (Pe.alphaBlended = new Pe([1, 771], a.Color.transparent, [
            !0,
            !0,
            !0,
            !0,
          ]));
        var Fe = function (u, p, d) {
          (this.enable = u), (this.mode = p), (this.frontFace = d);
        };
        (Fe.disabled = new Fe(!1, 1029, 2305)),
          (Fe.backCCW = new Fe(!0, 1029, 2305));
        var te = function (u) {
          (this.gl = u),
            (this.extVertexArrayObject = this.gl.getExtension(
              "OES_vertex_array_object"
            )),
            (this.clearColor = new ar(this)),
            (this.clearDepth = new yr(this)),
            (this.clearStencil = new nr(this)),
            (this.colorMask = new Qn(this)),
            (this.depthMask = new Sr(this)),
            (this.stencilMask = new ta(this)),
            (this.stencilFunc = new ei(this)),
            (this.stencilOp = new ri(this)),
            (this.stencilTest = new Ra(this)),
            (this.depthRange = new le(this)),
            (this.depthTest = new Ia(this)),
            (this.depthFunc = new ts(this)),
            (this.blend = new Ma(this)),
            (this.blendFunc = new ys(this)),
            (this.blendColor = new di(this)),
            (this.blendEquation = new Pa(this)),
            (this.cullFace = new yo(this)),
            (this.cullFaceSide = new Oa(this)),
            (this.frontFace = new Os(this)),
            (this.program = new Wi(this)),
            (this.activeTexture = new xs(this)),
            (this.viewport = new Mo(this)),
            (this.bindFramebuffer = new sl(this)),
            (this.bindRenderbuffer = new mc(this)),
            (this.bindTexture = new ll(this)),
            (this.bindVertexBuffer = new jc(this)),
            (this.bindElementBuffer = new cl(this)),
            (this.bindVertexArrayOES =
              this.extVertexArrayObject && new jo(this)),
            (this.pixelStoreUnpack = new Wo(this)),
            (this.pixelStoreUnpackPremultiplyAlpha = new Ls(this)),
            (this.pixelStoreUnpackFlipY = new gc(this)),
            (this.extTextureFilterAnisotropic =
              u.getExtension("EXT_texture_filter_anisotropic") ||
              u.getExtension("MOZ_EXT_texture_filter_anisotropic") ||
              u.getExtension("WEBKIT_EXT_texture_filter_anisotropic")),
            this.extTextureFilterAnisotropic &&
              (this.extTextureFilterAnisotropicMax = u.getParameter(
                this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT
              )),
            (this.extTextureHalfFloat = u.getExtension(
              "OES_texture_half_float"
            )),
            this.extTextureHalfFloat &&
              (u.getExtension("OES_texture_half_float_linear"),
              (this.extRenderToTextureHalfFloat = u.getExtension(
                "EXT_color_buffer_half_float"
              ))),
            (this.extTimerQuery = u.getExtension("EXT_disjoint_timer_query")),
            (this.maxTextureSize = u.getParameter(u.MAX_TEXTURE_SIZE));
        };
        (te.prototype.setDefault = function () {
          this.unbindVAO(),
            this.clearColor.setDefault(),
            this.clearDepth.setDefault(),
            this.clearStencil.setDefault(),
            this.colorMask.setDefault(),
            this.depthMask.setDefault(),
            this.stencilMask.setDefault(),
            this.stencilFunc.setDefault(),
            this.stencilOp.setDefault(),
            this.stencilTest.setDefault(),
            this.depthRange.setDefault(),
            this.depthTest.setDefault(),
            this.depthFunc.setDefault(),
            this.blend.setDefault(),
            this.blendFunc.setDefault(),
            this.blendColor.setDefault(),
            this.blendEquation.setDefault(),
            this.cullFace.setDefault(),
            this.cullFaceSide.setDefault(),
            this.frontFace.setDefault(),
            this.program.setDefault(),
            this.activeTexture.setDefault(),
            this.bindFramebuffer.setDefault(),
            this.pixelStoreUnpack.setDefault(),
            this.pixelStoreUnpackPremultiplyAlpha.setDefault(),
            this.pixelStoreUnpackFlipY.setDefault();
        }),
          (te.prototype.setDirty = function () {
            (this.clearColor.dirty = !0),
              (this.clearDepth.dirty = !0),
              (this.clearStencil.dirty = !0),
              (this.colorMask.dirty = !0),
              (this.depthMask.dirty = !0),
              (this.stencilMask.dirty = !0),
              (this.stencilFunc.dirty = !0),
              (this.stencilOp.dirty = !0),
              (this.stencilTest.dirty = !0),
              (this.depthRange.dirty = !0),
              (this.depthTest.dirty = !0),
              (this.depthFunc.dirty = !0),
              (this.blend.dirty = !0),
              (this.blendFunc.dirty = !0),
              (this.blendColor.dirty = !0),
              (this.blendEquation.dirty = !0),
              (this.cullFace.dirty = !0),
              (this.cullFaceSide.dirty = !0),
              (this.frontFace.dirty = !0),
              (this.program.dirty = !0),
              (this.activeTexture.dirty = !0),
              (this.viewport.dirty = !0),
              (this.bindFramebuffer.dirty = !0),
              (this.bindRenderbuffer.dirty = !0),
              (this.bindTexture.dirty = !0),
              (this.bindVertexBuffer.dirty = !0),
              (this.bindElementBuffer.dirty = !0),
              this.extVertexArrayObject && (this.bindVertexArrayOES.dirty = !0),
              (this.pixelStoreUnpack.dirty = !0),
              (this.pixelStoreUnpackPremultiplyAlpha.dirty = !0),
              (this.pixelStoreUnpackFlipY.dirty = !0);
          }),
          (te.prototype.createIndexBuffer = function (u, p) {
            return new $t(this, u, p);
          }),
          (te.prototype.createVertexBuffer = function (u, p, d) {
            return new St(this, u, p, d);
          }),
          (te.prototype.createRenderbuffer = function (u, p, d) {
            var g = this.gl,
              b = g.createRenderbuffer();
            return (
              this.bindRenderbuffer.set(b),
              g.renderbufferStorage(g.RENDERBUFFER, u, p, d),
              this.bindRenderbuffer.set(null),
              b
            );
          }),
          (te.prototype.createFramebuffer = function (u, p, d) {
            return new Z(this, u, p, d);
          }),
          (te.prototype.clear = function (u) {
            var p = u.color,
              d = u.depth,
              g = this.gl,
              b = 0;
            p &&
              ((b |= g.COLOR_BUFFER_BIT),
              this.clearColor.set(p),
              this.colorMask.set([!0, !0, !0, !0])),
              d !== void 0 &&
                ((b |= g.DEPTH_BUFFER_BIT),
                this.depthRange.set([0, 1]),
                this.clearDepth.set(d),
                this.depthMask.set(!0)),
              g.clear(b);
          }),
          (te.prototype.setCullFace = function (u) {
            u.enable === !1
              ? this.cullFace.set(!1)
              : (this.cullFace.set(!0),
                this.cullFaceSide.set(u.mode),
                this.frontFace.set(u.frontFace));
          }),
          (te.prototype.setDepthMode = function (u) {
            u.func !== this.gl.ALWAYS || u.mask
              ? (this.depthTest.set(!0),
                this.depthFunc.set(u.func),
                this.depthMask.set(u.mask),
                this.depthRange.set(u.range))
              : this.depthTest.set(!1);
          }),
          (te.prototype.setStencilMode = function (u) {
            u.test.func !== this.gl.ALWAYS || u.mask
              ? (this.stencilTest.set(!0),
                this.stencilMask.set(u.mask),
                this.stencilOp.set([u.fail, u.depthFail, u.pass]),
                this.stencilFunc.set({
                  func: u.test.func,
                  ref: u.ref,
                  mask: u.test.mask,
                }))
              : this.stencilTest.set(!1);
          }),
          (te.prototype.setColorMode = function (u) {
            a.deepEqual(u.blendFunction, Pe.Replace)
              ? this.blend.set(!1)
              : (this.blend.set(!0),
                this.blendFunc.set(u.blendFunction),
                this.blendColor.set(u.blendColor)),
              this.colorMask.set(u.mask);
          }),
          (te.prototype.unbindVAO = function () {
            this.extVertexArrayObject && this.bindVertexArrayOES.set(null);
          });
        var ye = (function (u) {
          function p(d, g, b) {
            var S = this;
            u.call(this),
              (this.id = d),
              (this.dispatcher = b),
              this.on("data", function (w) {
                w.dataType === "source" &&
                  w.sourceDataType === "metadata" &&
                  (S._sourceLoaded = !0),
                  S._sourceLoaded &&
                    !S._paused &&
                    w.dataType === "source" &&
                    w.sourceDataType === "content" &&
                    (S.reload(), S.transform && S.update(S.transform));
              }),
              this.on("error", function () {
                S._sourceErrored = !0;
              }),
              (this._source = (function (w, M, B, V) {
                var J = new ir[M.type](w, M, B, V);
                if (J.id !== w)
                  throw new Error(
                    "Expected Source id to be " + w + " instead of " + J.id
                  );
                return (
                  a.bindAll(
                    ["load", "abort", "unload", "serialize", "prepare"],
                    J
                  ),
                  J
                );
              })(d, g, b, this)),
              (this._tiles = {}),
              (this._cache = new qe(0, this._unloadTile.bind(this))),
              (this._timers = {}),
              (this._cacheTimers = {}),
              (this._maxTileCacheSize = null),
              (this._loadedParentTiles = {}),
              (this._coveredTiles = {}),
              (this._state = new a.SourceFeatureState());
          }
          return (
            u && (p.__proto__ = u),
            ((p.prototype = Object.create(u && u.prototype)).constructor = p),
            (p.prototype.onAdd = function (d) {
              (this.map = d),
                (this._maxTileCacheSize = d ? d._maxTileCacheSize : null),
                this._source && this._source.onAdd && this._source.onAdd(d);
            }),
            (p.prototype.onRemove = function (d) {
              this._source && this._source.onRemove && this._source.onRemove(d);
            }),
            (p.prototype.loaded = function () {
              if (this._sourceErrored) return !0;
              if (!this._sourceLoaded || !this._source.loaded()) return !1;
              for (var d in this._tiles) {
                var g = this._tiles[d];
                if (g.state !== "loaded" && g.state !== "errored") return !1;
              }
              return !0;
            }),
            (p.prototype.getSource = function () {
              return this._source;
            }),
            (p.prototype.pause = function () {
              this._paused = !0;
            }),
            (p.prototype.resume = function () {
              if (this._paused) {
                var d = this._shouldReloadOnResume;
                (this._paused = !1),
                  (this._shouldReloadOnResume = !1),
                  d && this.reload(),
                  this.transform && this.update(this.transform);
              }
            }),
            (p.prototype._loadTile = function (d, g) {
              return this._source.loadTile(d, g);
            }),
            (p.prototype._unloadTile = function (d) {
              if (this._source.unloadTile)
                return this._source.unloadTile(d, function () {});
            }),
            (p.prototype._abortTile = function (d) {
              if (this._source.abortTile)
                return this._source.abortTile(d, function () {});
            }),
            (p.prototype.serialize = function () {
              return this._source.serialize();
            }),
            (p.prototype.prepare = function (d) {
              for (var g in (this._source.prepare && this._source.prepare(),
              this._state.coalesceChanges(
                this._tiles,
                this.map ? this.map.painter : null
              ),
              this._tiles)) {
                var b = this._tiles[g];
                b.upload(d), b.prepare(this.map.style.imageManager);
              }
            }),
            (p.prototype.getIds = function () {
              return a
                .values(this._tiles)
                .map(function (d) {
                  return d.tileID;
                })
                .sort(Xe)
                .map(function (d) {
                  return d.key;
                });
            }),
            (p.prototype.getRenderableIds = function (d) {
              var g = this,
                b = [];
              for (var S in this._tiles)
                this._isIdRenderable(S, d) && b.push(this._tiles[S]);
              return d
                ? b
                    .sort(function (w, M) {
                      var B = w.tileID,
                        V = M.tileID,
                        J = new a.Point(B.canonical.x, B.canonical.y)._rotate(
                          g.transform.angle
                        ),
                        ne = new a.Point(V.canonical.x, V.canonical.y)._rotate(
                          g.transform.angle
                        );
                      return (
                        B.overscaledZ - V.overscaledZ ||
                        ne.y - J.y ||
                        ne.x - J.x
                      );
                    })
                    .map(function (w) {
                      return w.tileID.key;
                    })
                : b
                    .map(function (w) {
                      return w.tileID;
                    })
                    .sort(Xe)
                    .map(function (w) {
                      return w.key;
                    });
            }),
            (p.prototype.hasRenderableParent = function (d) {
              var g = this.findLoadedParent(d, 0);
              return !!g && this._isIdRenderable(g.tileID.key);
            }),
            (p.prototype._isIdRenderable = function (d, g) {
              return (
                this._tiles[d] &&
                this._tiles[d].hasData() &&
                !this._coveredTiles[d] &&
                (g || !this._tiles[d].holdingForFade())
              );
            }),
            (p.prototype.reload = function () {
              if (this._paused) this._shouldReloadOnResume = !0;
              else
                for (var d in (this._cache.reset(), this._tiles))
                  this._tiles[d].state !== "errored" &&
                    this._reloadTile(d, "reloading");
            }),
            (p.prototype._reloadTile = function (d, g) {
              var b = this._tiles[d];
              b &&
                (b.state !== "loading" && (b.state = g),
                this._loadTile(b, this._tileLoaded.bind(this, b, d, g)));
            }),
            (p.prototype._tileLoaded = function (d, g, b, S) {
              if (S)
                return (
                  (d.state = "errored"),
                  void (S.status !== 404
                    ? this._source.fire(new a.ErrorEvent(S, { tile: d }))
                    : this.update(this.transform))
                );
              (d.timeAdded = a.browser.now()),
                b === "expired" && (d.refreshedUponExpiration = !0),
                this._setTileReloadTimer(g, d),
                this.getSource().type === "raster-dem" &&
                  d.dem &&
                  this._backfillDEM(d),
                this._state.initializeTileState(
                  d,
                  this.map ? this.map.painter : null
                ),
                this._source.fire(
                  new a.Event("data", {
                    dataType: "source",
                    tile: d,
                    coord: d.tileID,
                  })
                );
            }),
            (p.prototype._backfillDEM = function (d) {
              for (var g = this.getRenderableIds(), b = 0; b < g.length; b++) {
                var S = g[b];
                if (d.neighboringTiles && d.neighboringTiles[S]) {
                  var w = this.getTileByID(S);
                  M(d, w), M(w, d);
                }
              }
              function M(B, V) {
                B.needsHillshadePrepare = !0;
                var J = V.tileID.canonical.x - B.tileID.canonical.x,
                  ne = V.tileID.canonical.y - B.tileID.canonical.y,
                  re = Math.pow(2, B.tileID.canonical.z),
                  _e = V.tileID.key;
                (J === 0 && ne === 0) ||
                  Math.abs(ne) > 1 ||
                  (Math.abs(J) > 1 &&
                    (Math.abs(J + re) === 1
                      ? (J += re)
                      : Math.abs(J - re) === 1 && (J -= re)),
                  V.dem &&
                    B.dem &&
                    (B.dem.backfillBorder(V.dem, J, ne),
                    B.neighboringTiles &&
                      B.neighboringTiles[_e] &&
                      (B.neighboringTiles[_e].backfilled = !0)));
              }
            }),
            (p.prototype.getTile = function (d) {
              return this.getTileByID(d.key);
            }),
            (p.prototype.getTileByID = function (d) {
              return this._tiles[d];
            }),
            (p.prototype._retainLoadedChildren = function (d, g, b, S) {
              for (var w in this._tiles) {
                var M = this._tiles[w];
                if (
                  !(
                    S[w] ||
                    !M.hasData() ||
                    M.tileID.overscaledZ <= g ||
                    M.tileID.overscaledZ > b
                  )
                ) {
                  for (var B = M.tileID; M && M.tileID.overscaledZ > g + 1; ) {
                    var V = M.tileID.scaledTo(M.tileID.overscaledZ - 1);
                    (M = this._tiles[V.key]) && M.hasData() && (B = V);
                  }
                  for (var J = B; J.overscaledZ > g; )
                    if (d[(J = J.scaledTo(J.overscaledZ - 1)).key]) {
                      S[B.key] = B;
                      break;
                    }
                }
              }
            }),
            (p.prototype.findLoadedParent = function (d, g) {
              if (d.key in this._loadedParentTiles) {
                var b = this._loadedParentTiles[d.key];
                return b && b.tileID.overscaledZ >= g ? b : null;
              }
              for (var S = d.overscaledZ - 1; S >= g; S--) {
                var w = d.scaledTo(S),
                  M = this._getLoadedTile(w);
                if (M) return M;
              }
            }),
            (p.prototype._getLoadedTile = function (d) {
              var g = this._tiles[d.key];
              return g && g.hasData()
                ? g
                : this._cache.getByKey(d.wrapped().key);
            }),
            (p.prototype.updateCacheSize = function (d) {
              var g = Math.ceil(d.width / this._source.tileSize) + 1,
                b = Math.ceil(d.height / this._source.tileSize) + 1,
                S = Math.floor(g * b * 5),
                w =
                  typeof this._maxTileCacheSize == "number"
                    ? Math.min(this._maxTileCacheSize, S)
                    : S;
              this._cache.setMaxSize(w);
            }),
            (p.prototype.handleWrapJump = function (d) {
              var g = Math.round(
                (d - (this._prevLng === void 0 ? d : this._prevLng)) / 360
              );
              if (((this._prevLng = d), g)) {
                var b = {};
                for (var S in this._tiles) {
                  var w = this._tiles[S];
                  (w.tileID = w.tileID.unwrapTo(w.tileID.wrap + g)),
                    (b[w.tileID.key] = w);
                }
                for (var M in ((this._tiles = b), this._timers))
                  clearTimeout(this._timers[M]), delete this._timers[M];
                for (var B in this._tiles)
                  this._setTileReloadTimer(B, this._tiles[B]);
              }
            }),
            (p.prototype.update = function (d) {
              var g = this;
              if (((this.transform = d), this._sourceLoaded && !this._paused)) {
                var b;
                this.updateCacheSize(d),
                  this.handleWrapJump(this.transform.center.lng),
                  (this._coveredTiles = {}),
                  this.used
                    ? this._source.tileID
                      ? (b = d
                          .getVisibleUnwrappedCoordinates(this._source.tileID)
                          .map(function (Et) {
                            return new a.OverscaledTileID(
                              Et.canonical.z,
                              Et.wrap,
                              Et.canonical.z,
                              Et.canonical.x,
                              Et.canonical.y
                            );
                          }))
                      : ((b = d.coveringTiles({
                          tileSize: this._source.tileSize,
                          minzoom: this._source.minzoom,
                          maxzoom: this._source.maxzoom,
                          roundZoom: this._source.roundZoom,
                          reparseOverscaled: this._source.reparseOverscaled,
                        })),
                        this._source.hasTile &&
                          (b = b.filter(function (Et) {
                            return g._source.hasTile(Et);
                          })))
                    : (b = []);
                var S = d.coveringZoomLevel(this._source),
                  w = Math.max(S - p.maxOverzooming, this._source.minzoom),
                  M = Math.max(S + p.maxUnderzooming, this._source.minzoom),
                  B = this._updateRetainedTiles(b, S);
                if (gt(this._source.type)) {
                  for (
                    var V = {}, J = {}, ne = 0, re = Object.keys(B);
                    ne < re.length;
                    ne += 1
                  ) {
                    var _e = re[ne],
                      pe = B[_e],
                      Ce = this._tiles[_e];
                    if (
                      Ce &&
                      !(Ce.fadeEndTime && Ce.fadeEndTime <= a.browser.now())
                    ) {
                      var de = this.findLoadedParent(pe, w);
                      de &&
                        (this._addTile(de.tileID),
                        (V[de.tileID.key] = de.tileID)),
                        (J[_e] = pe);
                    }
                  }
                  for (var we in (this._retainLoadedChildren(J, S, M, B), V))
                    B[we] || ((this._coveredTiles[we] = !0), (B[we] = V[we]));
                }
                for (var De in B) this._tiles[De].clearFadeHold();
                for (
                  var Ge = 0, st = a.keysDifference(this._tiles, B);
                  Ge < st.length;
                  Ge += 1
                ) {
                  var Je = st[Ge],
                    ht = this._tiles[Je];
                  ht.hasSymbolBuckets && !ht.holdingForFade()
                    ? ht.setHoldDuration(this.map._fadeDuration)
                    : (ht.hasSymbolBuckets && !ht.symbolFadeFinished()) ||
                      this._removeTile(Je);
                }
                this._updateLoadedParentTileCache();
              }
            }),
            (p.prototype.releaseSymbolFadeTiles = function () {
              for (var d in this._tiles)
                this._tiles[d].holdingForFade() && this._removeTile(d);
            }),
            (p.prototype._updateRetainedTiles = function (d, g) {
              for (
                var b = {},
                  S = {},
                  w = Math.max(g - p.maxOverzooming, this._source.minzoom),
                  M = Math.max(g + p.maxUnderzooming, this._source.minzoom),
                  B = {},
                  V = 0,
                  J = d;
                V < J.length;
                V += 1
              ) {
                var ne = J[V],
                  re = this._addTile(ne);
                (b[ne.key] = ne),
                  re.hasData() ||
                    (g < this._source.maxzoom && (B[ne.key] = ne));
              }
              this._retainLoadedChildren(B, g, M, b);
              for (var _e = 0, pe = d; _e < pe.length; _e += 1) {
                var Ce = pe[_e],
                  de = this._tiles[Ce.key];
                if (!de.hasData()) {
                  if (g + 1 > this._source.maxzoom) {
                    var we = Ce.children(this._source.maxzoom)[0],
                      De = this.getTile(we);
                    if (De && De.hasData()) {
                      b[we.key] = we;
                      continue;
                    }
                  } else {
                    var Ge = Ce.children(this._source.maxzoom);
                    if (
                      b[Ge[0].key] &&
                      b[Ge[1].key] &&
                      b[Ge[2].key] &&
                      b[Ge[3].key]
                    )
                      continue;
                  }
                  for (
                    var st = de.wasRequested(), Je = Ce.overscaledZ - 1;
                    Je >= w;
                    --Je
                  ) {
                    var ht = Ce.scaledTo(Je);
                    if (
                      S[ht.key] ||
                      ((S[ht.key] = !0),
                      !(de = this.getTile(ht)) &&
                        st &&
                        (de = this._addTile(ht)),
                      de &&
                        ((b[ht.key] = ht),
                        (st = de.wasRequested()),
                        de.hasData()))
                    )
                      break;
                  }
                }
              }
              return b;
            }),
            (p.prototype._updateLoadedParentTileCache = function () {
              for (var d in ((this._loadedParentTiles = {}), this._tiles)) {
                for (
                  var g = [], b = void 0, S = this._tiles[d].tileID;
                  S.overscaledZ > 0;

                ) {
                  if (S.key in this._loadedParentTiles) {
                    b = this._loadedParentTiles[S.key];
                    break;
                  }
                  g.push(S.key);
                  var w = S.scaledTo(S.overscaledZ - 1);
                  if ((b = this._getLoadedTile(w))) break;
                  S = w;
                }
                for (var M = 0, B = g; M < B.length; M += 1)
                  this._loadedParentTiles[B[M]] = b;
              }
            }),
            (p.prototype._addTile = function (d) {
              var g = this._tiles[d.key];
              if (g) return g;
              (g = this._cache.getAndRemove(d)) &&
                (this._setTileReloadTimer(d.key, g),
                (g.tileID = d),
                this._state.initializeTileState(
                  g,
                  this.map ? this.map.painter : null
                ),
                this._cacheTimers[d.key] &&
                  (clearTimeout(this._cacheTimers[d.key]),
                  delete this._cacheTimers[d.key],
                  this._setTileReloadTimer(d.key, g)));
              var b = !!g;
              return (
                b ||
                  ((g = new a.Tile(
                    d,
                    this._source.tileSize * d.overscaleFactor()
                  )),
                  this._loadTile(
                    g,
                    this._tileLoaded.bind(this, g, d.key, g.state)
                  )),
                g
                  ? (g.uses++,
                    (this._tiles[d.key] = g),
                    b ||
                      this._source.fire(
                        new a.Event("dataloading", {
                          tile: g,
                          coord: g.tileID,
                          dataType: "source",
                        })
                      ),
                    g)
                  : null
              );
            }),
            (p.prototype._setTileReloadTimer = function (d, g) {
              var b = this;
              d in this._timers &&
                (clearTimeout(this._timers[d]), delete this._timers[d]);
              var S = g.getExpiryTimeout();
              S &&
                (this._timers[d] = setTimeout(function () {
                  b._reloadTile(d, "expired"), delete b._timers[d];
                }, S));
            }),
            (p.prototype._removeTile = function (d) {
              var g = this._tiles[d];
              g &&
                (g.uses--,
                delete this._tiles[d],
                this._timers[d] &&
                  (clearTimeout(this._timers[d]), delete this._timers[d]),
                g.uses > 0 ||
                  (g.hasData() && g.state !== "reloading"
                    ? this._cache.add(g.tileID, g, g.getExpiryTimeout())
                    : ((g.aborted = !0),
                      this._abortTile(g),
                      this._unloadTile(g))));
            }),
            (p.prototype.clearTiles = function () {
              for (var d in ((this._shouldReloadOnResume = !1),
              (this._paused = !1),
              this._tiles))
                this._removeTile(d);
              this._cache.reset();
            }),
            (p.prototype.tilesIn = function (d, g, b) {
              var S = this,
                w = [],
                M = this.transform;
              if (!M) return w;
              for (
                var B = b ? M.getCameraQueryGeometry(d) : d,
                  V = d.map(function (Je) {
                    return M.pointCoordinate(Je);
                  }),
                  J = B.map(function (Je) {
                    return M.pointCoordinate(Je);
                  }),
                  ne = this.getIds(),
                  re = 1 / 0,
                  _e = 1 / 0,
                  pe = -1 / 0,
                  Ce = -1 / 0,
                  de = 0,
                  we = J;
                de < we.length;
                de += 1
              ) {
                var De = we[de];
                (re = Math.min(re, De.x)),
                  (_e = Math.min(_e, De.y)),
                  (pe = Math.max(pe, De.x)),
                  (Ce = Math.max(Ce, De.y));
              }
              for (
                var Ge = function (Je) {
                    var ht = S._tiles[ne[Je]];
                    if (!ht.holdingForFade()) {
                      var Et = ht.tileID,
                        jt = Math.pow(2, M.zoom - ht.tileID.overscaledZ),
                        Ft =
                          (g * ht.queryPadding * a.EXTENT) / ht.tileSize / jt,
                        sn = [
                          Et.getTilePoint(new a.MercatorCoordinate(re, _e)),
                          Et.getTilePoint(new a.MercatorCoordinate(pe, Ce)),
                        ];
                      if (
                        sn[0].x - Ft < a.EXTENT &&
                        sn[0].y - Ft < a.EXTENT &&
                        sn[1].x + Ft >= 0 &&
                        sn[1].y + Ft >= 0
                      ) {
                        var In = V.map(function (Dn) {
                            return Et.getTilePoint(Dn);
                          }),
                          Bn = J.map(function (Dn) {
                            return Et.getTilePoint(Dn);
                          });
                        w.push({
                          tile: ht,
                          tileID: Et,
                          queryGeometry: In,
                          cameraQueryGeometry: Bn,
                          scale: jt,
                        });
                      }
                    }
                  },
                  st = 0;
                st < ne.length;
                st++
              )
                Ge(st);
              return w;
            }),
            (p.prototype.getVisibleCoordinates = function (d) {
              for (
                var g = this,
                  b = this.getRenderableIds(d).map(function (B) {
                    return g._tiles[B].tileID;
                  }),
                  S = 0,
                  w = b;
                S < w.length;
                S += 1
              ) {
                var M = w[S];
                M.posMatrix = this.transform.calculatePosMatrix(
                  M.toUnwrapped()
                );
              }
              return b;
            }),
            (p.prototype.hasTransition = function () {
              if (this._source.hasTransition()) return !0;
              if (gt(this._source.type))
                for (var d in this._tiles) {
                  var g = this._tiles[d];
                  if (
                    g.fadeEndTime !== void 0 &&
                    g.fadeEndTime >= a.browser.now()
                  )
                    return !0;
                }
              return !1;
            }),
            (p.prototype.setFeatureState = function (d, g, b) {
              this._state.updateState((d = d || "_geojsonTileLayer"), g, b);
            }),
            (p.prototype.removeFeatureState = function (d, g, b) {
              this._state.removeFeatureState(
                (d = d || "_geojsonTileLayer"),
                g,
                b
              );
            }),
            (p.prototype.getFeatureState = function (d, g) {
              return this._state.getState((d = d || "_geojsonTileLayer"), g);
            }),
            (p.prototype.setDependencies = function (d, g, b) {
              var S = this._tiles[d];
              S && S.setDependencies(g, b);
            }),
            (p.prototype.reloadTilesForDependencies = function (d, g) {
              for (var b in this._tiles)
                this._tiles[b].hasDependency(d, g) &&
                  this._reloadTile(b, "reloading");
              this._cache.filter(function (S) {
                return !S.hasDependency(d, g);
              });
            }),
            p
          );
        })(a.Evented);
        function Xe(u, p) {
          var d = Math.abs(2 * u.wrap) - +(u.wrap < 0),
            g = Math.abs(2 * p.wrap) - +(p.wrap < 0);
          return (
            u.overscaledZ - p.overscaledZ ||
            g - d ||
            p.canonical.y - u.canonical.y ||
            p.canonical.x - u.canonical.x
          );
        }
        function gt(u) {
          return u === "raster" || u === "image" || u === "video";
        }
        function Ot() {
          return new a.window.Worker(Rd.workerUrl);
        }
        (ye.maxOverzooming = 10), (ye.maxUnderzooming = 3);
        var dt = "mapboxgl_preloaded_worker_pool",
          Nt = function () {
            this.active = {};
          };
        (Nt.prototype.acquire = function (u) {
          if (!this.workers)
            for (this.workers = []; this.workers.length < Nt.workerCount; )
              this.workers.push(new Ot());
          return (this.active[u] = !0), this.workers.slice();
        }),
          (Nt.prototype.release = function (u) {
            delete this.active[u],
              this.numActive() === 0 &&
                (this.workers.forEach(function (p) {
                  p.terminate();
                }),
                (this.workers = null));
          }),
          (Nt.prototype.isPreloaded = function () {
            return !!this.active[dt];
          }),
          (Nt.prototype.numActive = function () {
            return Object.keys(this.active).length;
          });
        var yn,
          mn = Math.floor(a.browser.hardwareConcurrency / 2);
        function pt() {
          return yn || (yn = new Nt()), yn;
        }
        function on(u, p) {
          var d = {};
          for (var g in u) g !== "ref" && (d[g] = u[g]);
          return (
            a.refProperties.forEach(function (b) {
              b in p && (d[b] = p[b]);
            }),
            d
          );
        }
        function Gt(u) {
          u = u.slice();
          for (var p = Object.create(null), d = 0; d < u.length; d++)
            p[u[d].id] = u[d];
          for (var g = 0; g < u.length; g++)
            "ref" in u[g] && (u[g] = on(u[g], p[u[g].ref]));
          return u;
        }
        Nt.workerCount = Math.max(Math.min(mn, 6), 1);
        var qt = {
          setStyle: "setStyle",
          addLayer: "addLayer",
          removeLayer: "removeLayer",
          setPaintProperty: "setPaintProperty",
          setLayoutProperty: "setLayoutProperty",
          setFilter: "setFilter",
          addSource: "addSource",
          removeSource: "removeSource",
          setGeoJSONSourceData: "setGeoJSONSourceData",
          setLayerZoomRange: "setLayerZoomRange",
          setLayerProperty: "setLayerProperty",
          setCenter: "setCenter",
          setZoom: "setZoom",
          setBearing: "setBearing",
          setPitch: "setPitch",
          setSprite: "setSprite",
          setGlyphs: "setGlyphs",
          setTransition: "setTransition",
          setLight: "setLight",
        };
        function or(u, p, d) {
          d.push({ command: qt.addSource, args: [u, p[u]] });
        }
        function nn(u, p, d) {
          p.push({ command: qt.removeSource, args: [u] }), (d[u] = !0);
        }
        function wr(u, p, d, g) {
          nn(u, d, g), or(u, p, d);
        }
        function ti(u, p, d) {
          var g;
          for (g in u[d])
            if (
              u[d].hasOwnProperty(g) &&
              g !== "data" &&
              !a.deepEqual(u[d][g], p[d][g])
            )
              return !1;
          for (g in p[d])
            if (
              p[d].hasOwnProperty(g) &&
              g !== "data" &&
              !a.deepEqual(u[d][g], p[d][g])
            )
              return !1;
          return !0;
        }
        function xr(u, p, d, g, b, S) {
          var w;
          for (w in ((p = p || {}), (u = u || {})))
            u.hasOwnProperty(w) &&
              (a.deepEqual(u[w], p[w]) ||
                d.push({ command: S, args: [g, w, p[w], b] }));
          for (w in p)
            p.hasOwnProperty(w) &&
              !u.hasOwnProperty(w) &&
              (a.deepEqual(u[w], p[w]) ||
                d.push({ command: S, args: [g, w, p[w], b] }));
        }
        function Or(u) {
          return u.id;
        }
        function sr(u, p) {
          return (u[p.id] = p), u;
        }
        var Xi = function (u, p) {
          this.reset(u, p);
        };
        (Xi.prototype.reset = function (u, p) {
          (this.points = u || []), (this._distances = [0]);
          for (var d = 1; d < this.points.length; d++)
            this._distances[d] =
              this._distances[d - 1] + this.points[d].dist(this.points[d - 1]);
          (this.length = this._distances[this._distances.length - 1]),
            (this.padding = Math.min(p || 0, 0.5 * this.length)),
            (this.paddedLength = this.length - 2 * this.padding);
        }),
          (Xi.prototype.lerp = function (u) {
            if (this.points.length === 1) return this.points[0];
            u = a.clamp(u, 0, 1);
            for (
              var p = 1,
                d = this._distances[p],
                g = u * this.paddedLength + this.padding;
              d < g && p < this._distances.length;

            )
              d = this._distances[++p];
            var b = p - 1,
              S = this._distances[b],
              w = d - S,
              M = w > 0 ? (g - S) / w : 0;
            return this.points[b].mult(1 - M).add(this.points[p].mult(M));
          });
        var Rr = function (u, p, d) {
          var g = (this.boxCells = []),
            b = (this.circleCells = []);
          (this.xCellCount = Math.ceil(u / d)),
            (this.yCellCount = Math.ceil(p / d));
          for (var S = 0; S < this.xCellCount * this.yCellCount; S++)
            g.push([]), b.push([]);
          (this.circleKeys = []),
            (this.boxKeys = []),
            (this.bboxes = []),
            (this.circles = []),
            (this.width = u),
            (this.height = p),
            (this.xScale = this.xCellCount / u),
            (this.yScale = this.yCellCount / p),
            (this.boxUid = 0),
            (this.circleUid = 0);
        };
        function ni(u, p, d, g, b) {
          var S = a.create();
          return (
            p
              ? (a.scale(S, S, [1 / b, 1 / b, 1]),
                d || a.rotateZ(S, S, g.angle))
              : a.multiply(S, g.labelPlaneMatrix, u),
            S
          );
        }
        function zr(u, p, d, g, b) {
          if (p) {
            var S = a.clone(u);
            return a.scale(S, S, [b, b, 1]), d || a.rotateZ(S, S, -g.angle), S;
          }
          return g.glCoordMatrix;
        }
        function lr(u, p) {
          var d = [u.x, u.y, 0, 1];
          xi(d, d, p);
          var g = d[3];
          return {
            point: new a.Point(d[0] / g, d[1] / g),
            signedDistanceFromCamera: g,
          };
        }
        function br(u, p) {
          return 0.5 + (u / p) * 0.5;
        }
        function ja(u, p) {
          var d = u[0] / u[3],
            g = u[1] / u[3];
          return d >= -p[0] && d <= p[0] && g >= -p[1] && g <= p[1];
        }
        function Rl(u, p, d, g, b, S, w, M) {
          var B = g ? u.textSizeData : u.iconSizeData,
            V = a.evaluateSizeForZoom(B, d.transform.zoom),
            J = [(256 / d.width) * 2 + 1, (256 / d.height) * 2 + 1],
            ne = g
              ? u.text.dynamicLayoutVertexArray
              : u.icon.dynamicLayoutVertexArray;
          ne.clear();
          for (
            var re = u.lineVertexArray,
              _e = g ? u.text.placedSymbolArray : u.icon.placedSymbolArray,
              pe = d.transform.width / d.transform.height,
              Ce = !1,
              de = 0;
            de < _e.length;
            de++
          ) {
            var we = _e.get(de);
            if (we.hidden || (we.writingMode === a.WritingMode.vertical && !Ce))
              va(we.numGlyphs, ne);
            else {
              Ce = !1;
              var De = [we.anchorX, we.anchorY, 0, 1];
              if ((a.transformMat4(De, De, p), ja(De, J))) {
                var Ge = br(d.transform.cameraToCenterDistance, De[3]),
                  st = a.evaluateSizeForFeature(B, V, we),
                  Je = w ? st / Ge : st * Ge,
                  ht = new a.Point(we.anchorX, we.anchorY),
                  Et = lr(ht, b).point,
                  jt = {},
                  Ft = Il(
                    we,
                    Je,
                    !1,
                    M,
                    p,
                    b,
                    S,
                    u.glyphOffsetArray,
                    re,
                    ne,
                    Et,
                    ht,
                    jt,
                    pe
                  );
                (Ce = Ft.useVertical),
                  (Ft.notEnoughRoom ||
                    Ce ||
                    (Ft.needsFlipping &&
                      Il(
                        we,
                        Je,
                        !0,
                        M,
                        p,
                        b,
                        S,
                        u.glyphOffsetArray,
                        re,
                        ne,
                        Et,
                        ht,
                        jt,
                        pe
                      ).notEnoughRoom)) &&
                    va(we.numGlyphs, ne);
              } else va(we.numGlyphs, ne);
            }
          }
          g
            ? u.text.dynamicLayoutVertexBuffer.updateData(ne)
            : u.icon.dynamicLayoutVertexBuffer.updateData(ne);
        }
        function ki(u, p, d, g, b, S, w, M, B, V, J) {
          var ne = M.glyphStartIndex + M.numGlyphs,
            re = M.lineStartIndex,
            _e = M.lineStartIndex + M.lineLength,
            pe = p.getoffsetX(M.glyphStartIndex),
            Ce = p.getoffsetX(ne - 1),
            de = yi(u * pe, d, g, b, S, w, M.segment, re, _e, B, V, J);
          if (!de) return null;
          var we = yi(u * Ce, d, g, b, S, w, M.segment, re, _e, B, V, J);
          return we ? { first: de, last: we } : null;
        }
        function Ai(u, p, d, g) {
          return u === a.WritingMode.horizontal &&
            Math.abs(d.y - p.y) > Math.abs(d.x - p.x) * g
            ? { useVertical: !0 }
            : (u === a.WritingMode.vertical ? p.y < d.y : p.x > d.x)
            ? { needsFlipping: !0 }
            : null;
        }
        function Il(u, p, d, g, b, S, w, M, B, V, J, ne, re, _e) {
          var pe,
            Ce = p / 24,
            de = u.lineOffsetX * Ce,
            we = u.lineOffsetY * Ce;
          if (u.numGlyphs > 1) {
            var De = u.glyphStartIndex + u.numGlyphs,
              Ge = u.lineStartIndex,
              st = u.lineStartIndex + u.lineLength,
              Je = ki(Ce, M, de, we, d, J, ne, u, B, S, re);
            if (!Je) return { notEnoughRoom: !0 };
            var ht = lr(Je.first.point, w).point,
              Et = lr(Je.last.point, w).point;
            if (g && !d) {
              var jt = Ai(u.writingMode, ht, Et, _e);
              if (jt) return jt;
            }
            pe = [Je.first];
            for (var Ft = u.glyphStartIndex + 1; Ft < De - 1; Ft++)
              pe.push(
                yi(
                  Ce * M.getoffsetX(Ft),
                  de,
                  we,
                  d,
                  J,
                  ne,
                  u.segment,
                  Ge,
                  st,
                  B,
                  S,
                  re
                )
              );
            pe.push(Je.last);
          } else {
            if (g && !d) {
              var sn = lr(ne, b).point,
                In = u.lineStartIndex + u.segment + 1,
                Bn = new a.Point(B.getx(In), B.gety(In)),
                Dn = lr(Bn, b),
                Fr =
                  Dn.signedDistanceFromCamera > 0
                    ? Dn.point
                    : ns(ne, Bn, sn, 1, b),
                pn = Ai(u.writingMode, sn, Fr, _e);
              if (pn) return pn;
            }
            var $n = yi(
              Ce * M.getoffsetX(u.glyphStartIndex),
              de,
              we,
              d,
              J,
              ne,
              u.segment,
              u.lineStartIndex,
              u.lineStartIndex + u.lineLength,
              B,
              S,
              re
            );
            if (!$n) return { notEnoughRoom: !0 };
            pe = [$n];
          }
          for (var dr = 0, Yn = pe; dr < Yn.length; dr += 1) {
            var Xn = Yn[dr];
            a.addDynamicAttributes(V, Xn.point, Xn.angle);
          }
          return {};
        }
        function ns(u, p, d, g, b) {
          var S = lr(u.add(u.sub(p)._unit()), b).point,
            w = d.sub(S);
          return d.add(w._mult(g / w.mag()));
        }
        function yi(u, p, d, g, b, S, w, M, B, V, J, ne) {
          var re = g ? u - p : u + p,
            _e = re > 0 ? 1 : -1,
            pe = 0;
          g && ((_e *= -1), (pe = Math.PI)), _e < 0 && (pe += Math.PI);
          for (
            var Ce = _e > 0 ? M + w : M + w + 1,
              de = b,
              we = b,
              De = 0,
              Ge = 0,
              st = Math.abs(re),
              Je = [];
            De + Ge <= st;

          ) {
            if ((Ce += _e) < M || Ce >= B) return null;
            if (((we = de), Je.push(de), (de = ne[Ce]) === void 0)) {
              var ht = new a.Point(V.getx(Ce), V.gety(Ce)),
                Et = lr(ht, J);
              if (Et.signedDistanceFromCamera > 0) de = ne[Ce] = Et.point;
              else {
                var jt = Ce - _e;
                de = ns(
                  De === 0 ? S : new a.Point(V.getx(jt), V.gety(jt)),
                  ht,
                  we,
                  st - De + 1,
                  J
                );
              }
            }
            (De += Ge), (Ge = we.dist(de));
          }
          var Ft = (st - De) / Ge,
            sn = de.sub(we),
            In = sn.mult(Ft)._add(we);
          In._add(
            sn
              ._unit()
              ._perp()
              ._mult(d * _e)
          );
          var Bn = pe + Math.atan2(de.y - we.y, de.x - we.x);
          return Je.push(In), { point: In, angle: Bn, path: Je };
        }
        (Rr.prototype.keysLength = function () {
          return this.boxKeys.length + this.circleKeys.length;
        }),
          (Rr.prototype.insert = function (u, p, d, g, b) {
            this._forEachCell(p, d, g, b, this._insertBoxCell, this.boxUid++),
              this.boxKeys.push(u),
              this.bboxes.push(p),
              this.bboxes.push(d),
              this.bboxes.push(g),
              this.bboxes.push(b);
          }),
          (Rr.prototype.insertCircle = function (u, p, d, g) {
            this._forEachCell(
              p - g,
              d - g,
              p + g,
              d + g,
              this._insertCircleCell,
              this.circleUid++
            ),
              this.circleKeys.push(u),
              this.circles.push(p),
              this.circles.push(d),
              this.circles.push(g);
          }),
          (Rr.prototype._insertBoxCell = function (u, p, d, g, b, S) {
            this.boxCells[b].push(S);
          }),
          (Rr.prototype._insertCircleCell = function (u, p, d, g, b, S) {
            this.circleCells[b].push(S);
          }),
          (Rr.prototype._query = function (u, p, d, g, b, S) {
            if (d < 0 || u > this.width || g < 0 || p > this.height)
              return !b && [];
            var w = [];
            if (u <= 0 && p <= 0 && this.width <= d && this.height <= g) {
              if (b) return !0;
              for (var M = 0; M < this.boxKeys.length; M++)
                w.push({
                  key: this.boxKeys[M],
                  x1: this.bboxes[4 * M],
                  y1: this.bboxes[4 * M + 1],
                  x2: this.bboxes[4 * M + 2],
                  y2: this.bboxes[4 * M + 3],
                });
              for (var B = 0; B < this.circleKeys.length; B++) {
                var V = this.circles[3 * B],
                  J = this.circles[3 * B + 1],
                  ne = this.circles[3 * B + 2];
                w.push({
                  key: this.circleKeys[B],
                  x1: V - ne,
                  y1: J - ne,
                  x2: V + ne,
                  y2: J + ne,
                });
              }
              return S ? w.filter(S) : w;
            }
            return (
              this._forEachCell(
                u,
                p,
                d,
                g,
                this._queryCell,
                w,
                { hitTest: b, seenUids: { box: {}, circle: {} } },
                S
              ),
              b ? w.length > 0 : w
            );
          }),
          (Rr.prototype._queryCircle = function (u, p, d, g, b) {
            var S = u - d,
              w = u + d,
              M = p - d,
              B = p + d;
            if (w < 0 || S > this.width || B < 0 || M > this.height)
              return !g && [];
            var V = [];
            return (
              this._forEachCell(
                S,
                M,
                w,
                B,
                this._queryCellCircle,
                V,
                {
                  hitTest: g,
                  circle: { x: u, y: p, radius: d },
                  seenUids: { box: {}, circle: {} },
                },
                b
              ),
              g ? V.length > 0 : V
            );
          }),
          (Rr.prototype.query = function (u, p, d, g, b) {
            return this._query(u, p, d, g, !1, b);
          }),
          (Rr.prototype.hitTest = function (u, p, d, g, b) {
            return this._query(u, p, d, g, !0, b);
          }),
          (Rr.prototype.hitTestCircle = function (u, p, d, g) {
            return this._queryCircle(u, p, d, !0, g);
          }),
          (Rr.prototype._queryCell = function (u, p, d, g, b, S, w, M) {
            var B = w.seenUids,
              V = this.boxCells[b];
            if (V !== null)
              for (
                var J = this.bboxes, ne = 0, re = V;
                ne < re.length;
                ne += 1
              ) {
                var _e = re[ne];
                if (!B.box[_e]) {
                  B.box[_e] = !0;
                  var pe = 4 * _e;
                  if (
                    u <= J[pe + 2] &&
                    p <= J[pe + 3] &&
                    d >= J[pe + 0] &&
                    g >= J[pe + 1] &&
                    (!M || M(this.boxKeys[_e]))
                  ) {
                    if (w.hitTest) return S.push(!0), !0;
                    S.push({
                      key: this.boxKeys[_e],
                      x1: J[pe],
                      y1: J[pe + 1],
                      x2: J[pe + 2],
                      y2: J[pe + 3],
                    });
                  }
                }
              }
            var Ce = this.circleCells[b];
            if (Ce !== null)
              for (
                var de = this.circles, we = 0, De = Ce;
                we < De.length;
                we += 1
              ) {
                var Ge = De[we];
                if (!B.circle[Ge]) {
                  B.circle[Ge] = !0;
                  var st = 3 * Ge;
                  if (
                    this._circleAndRectCollide(
                      de[st],
                      de[st + 1],
                      de[st + 2],
                      u,
                      p,
                      d,
                      g
                    ) &&
                    (!M || M(this.circleKeys[Ge]))
                  ) {
                    if (w.hitTest) return S.push(!0), !0;
                    var Je = de[st],
                      ht = de[st + 1],
                      Et = de[st + 2];
                    S.push({
                      key: this.circleKeys[Ge],
                      x1: Je - Et,
                      y1: ht - Et,
                      x2: Je + Et,
                      y2: ht + Et,
                    });
                  }
                }
              }
          }),
          (Rr.prototype._queryCellCircle = function (u, p, d, g, b, S, w, M) {
            var B = w.circle,
              V = w.seenUids,
              J = this.boxCells[b];
            if (J !== null)
              for (
                var ne = this.bboxes, re = 0, _e = J;
                re < _e.length;
                re += 1
              ) {
                var pe = _e[re];
                if (!V.box[pe]) {
                  V.box[pe] = !0;
                  var Ce = 4 * pe;
                  if (
                    this._circleAndRectCollide(
                      B.x,
                      B.y,
                      B.radius,
                      ne[Ce + 0],
                      ne[Ce + 1],
                      ne[Ce + 2],
                      ne[Ce + 3]
                    ) &&
                    (!M || M(this.boxKeys[pe]))
                  )
                    return S.push(!0), !0;
                }
              }
            var de = this.circleCells[b];
            if (de !== null)
              for (
                var we = this.circles, De = 0, Ge = de;
                De < Ge.length;
                De += 1
              ) {
                var st = Ge[De];
                if (!V.circle[st]) {
                  V.circle[st] = !0;
                  var Je = 3 * st;
                  if (
                    this._circlesCollide(
                      we[Je],
                      we[Je + 1],
                      we[Je + 2],
                      B.x,
                      B.y,
                      B.radius
                    ) &&
                    (!M || M(this.circleKeys[st]))
                  )
                    return S.push(!0), !0;
                }
              }
          }),
          (Rr.prototype._forEachCell = function (u, p, d, g, b, S, w, M) {
            for (
              var B = this._convertToXCellCoord(u),
                V = this._convertToYCellCoord(p),
                J = this._convertToXCellCoord(d),
                ne = this._convertToYCellCoord(g),
                re = B;
              re <= J;
              re++
            )
              for (var _e = V; _e <= ne; _e++)
                if (
                  b.call(this, u, p, d, g, this.xCellCount * _e + re, S, w, M)
                )
                  return;
          }),
          (Rr.prototype._convertToXCellCoord = function (u) {
            return Math.max(
              0,
              Math.min(this.xCellCount - 1, Math.floor(u * this.xScale))
            );
          }),
          (Rr.prototype._convertToYCellCoord = function (u) {
            return Math.max(
              0,
              Math.min(this.yCellCount - 1, Math.floor(u * this.yScale))
            );
          }),
          (Rr.prototype._circlesCollide = function (u, p, d, g, b, S) {
            var w = g - u,
              M = b - p,
              B = d + S;
            return B * B > w * w + M * M;
          }),
          (Rr.prototype._circleAndRectCollide = function (u, p, d, g, b, S, w) {
            var M = (S - g) / 2,
              B = Math.abs(u - (g + M));
            if (B > M + d) return !1;
            var V = (w - b) / 2,
              J = Math.abs(p - (b + V));
            if (J > V + d) return !1;
            if (B <= M || J <= V) return !0;
            var ne = B - M,
              re = J - V;
            return ne * ne + re * re <= d * d;
          });
        var ul = new Float32Array([
          -1 / 0,
          -1 / 0,
          0,
          -1 / 0,
          -1 / 0,
          0,
          -1 / 0,
          -1 / 0,
          0,
          -1 / 0,
          -1 / 0,
          0,
        ]);
        function va(u, p) {
          for (var d = 0; d < u; d++) {
            var g = p.length;
            p.resize(g + 4), p.float32.set(ul, 3 * g);
          }
        }
        function xi(u, p, d) {
          var g = p[0],
            b = p[1];
          return (
            (u[0] = d[0] * g + d[4] * b + d[12]),
            (u[1] = d[1] * g + d[5] * b + d[13]),
            (u[3] = d[3] * g + d[7] * b + d[15]),
            u
          );
        }
        var Gi = function (u, p, d) {
          p === void 0 && (p = new Rr(u.width + 200, u.height + 200, 25)),
            d === void 0 && (d = new Rr(u.width + 200, u.height + 200, 25)),
            (this.transform = u),
            (this.grid = p),
            (this.ignoredGrid = d),
            (this.pitchfactor = Math.cos(u._pitch) * u.cameraToCenterDistance),
            (this.screenRightBoundary = u.width + 100),
            (this.screenBottomBoundary = u.height + 100),
            (this.gridRightBoundary = u.width + 200),
            (this.gridBottomBoundary = u.height + 200);
        };
        function hi(u, p, d) {
          return (
            p *
            (a.EXTENT / (u.tileSize * Math.pow(2, d - u.tileID.overscaledZ)))
          );
        }
        (Gi.prototype.placeCollisionBox = function (u, p, d, g, b) {
          var S = this.projectAndGetPerspectiveRatio(
              g,
              u.anchorPointX,
              u.anchorPointY
            ),
            w = d * S.perspectiveRatio,
            M = u.x1 * w + S.point.x,
            B = u.y1 * w + S.point.y,
            V = u.x2 * w + S.point.x,
            J = u.y2 * w + S.point.y;
          return !this.isInsideGrid(M, B, V, J) ||
            (!p && this.grid.hitTest(M, B, V, J, b))
            ? { box: [], offscreen: !1 }
            : { box: [M, B, V, J], offscreen: this.isOffscreen(M, B, V, J) };
        }),
          (Gi.prototype.placeCollisionCircles = function (
            u,
            p,
            d,
            g,
            b,
            S,
            w,
            M,
            B,
            V,
            J,
            ne,
            re
          ) {
            var _e = [],
              pe = new a.Point(p.anchorX, p.anchorY),
              Ce = lr(pe, S),
              de = br(
                this.transform.cameraToCenterDistance,
                Ce.signedDistanceFromCamera
              ),
              we = (V ? b / de : b * de) / a.ONE_EM,
              De = lr(pe, w).point,
              Ge = ki(
                we,
                g,
                p.lineOffsetX * we,
                p.lineOffsetY * we,
                !1,
                De,
                pe,
                p,
                d,
                w,
                {}
              ),
              st = !1,
              Je = !1,
              ht = !0;
            if (Ge) {
              for (
                var Et = 0.5 * ne * de + re,
                  jt = new a.Point(-100, -100),
                  Ft = new a.Point(
                    this.screenRightBoundary,
                    this.screenBottomBoundary
                  ),
                  sn = new Xi(),
                  In = Ge.first,
                  Bn = Ge.last,
                  Dn = [],
                  Fr = In.path.length - 1;
                Fr >= 1;
                Fr--
              )
                Dn.push(In.path[Fr]);
              for (var pn = 1; pn < Bn.path.length; pn++) Dn.push(Bn.path[pn]);
              var $n = 2.5 * Et;
              if (M) {
                var dr = Dn.map(function (ko) {
                  return lr(ko, M);
                });
                Dn = dr.some(function (ko) {
                  return ko.signedDistanceFromCamera <= 0;
                })
                  ? []
                  : dr.map(function (ko) {
                      return ko.point;
                    });
              }
              var Yn = [];
              if (Dn.length > 0) {
                for (
                  var Xn = Dn[0].clone(), cr = Dn[0].clone(), Gn = 1;
                  Gn < Dn.length;
                  Gn++
                )
                  (Xn.x = Math.min(Xn.x, Dn[Gn].x)),
                    (Xn.y = Math.min(Xn.y, Dn[Gn].y)),
                    (cr.x = Math.max(cr.x, Dn[Gn].x)),
                    (cr.y = Math.max(cr.y, Dn[Gn].y));
                Yn =
                  Xn.x >= jt.x && cr.x <= Ft.x && Xn.y >= jt.y && cr.y <= Ft.y
                    ? [Dn]
                    : cr.x < jt.x || Xn.x > Ft.x || cr.y < jt.y || Xn.y > Ft.y
                    ? []
                    : a.clipLine([Dn], jt.x, jt.y, Ft.x, Ft.y);
              }
              for (var Hn = 0, na = Yn; Hn < na.length; Hn += 1) {
                var Mi;
                sn.reset(na[Hn], 0.25 * Et),
                  (Mi =
                    sn.length <= 0.5 * Et
                      ? 1
                      : Math.ceil(sn.paddedLength / $n) + 1);
                for (var Ba = 0; Ba < Mi; Ba++) {
                  var ba = Ba / Math.max(Mi - 1, 1),
                    Ri = sn.lerp(ba),
                    Pi = Ri.x + 100,
                    ho = Ri.y + 100;
                  _e.push(Pi, ho, Et, 0);
                  var to = Pi - Et,
                    Ws = ho - Et,
                    po = Pi + Et,
                    us = ho + Et;
                  if (
                    ((ht = ht && this.isOffscreen(to, Ws, po, us)),
                    (Je = Je || this.isInsideGrid(to, Ws, po, us)),
                    !u &&
                      this.grid.hitTestCircle(Pi, ho, Et, J) &&
                      ((st = !0), !B))
                  )
                    return {
                      circles: [],
                      offscreen: !1,
                      collisionDetected: st,
                    };
                }
              }
            }
            return {
              circles: (!B && st) || !Je ? [] : _e,
              offscreen: ht,
              collisionDetected: st,
            };
          }),
          (Gi.prototype.queryRenderedSymbols = function (u) {
            if (
              u.length === 0 ||
              (this.grid.keysLength() === 0 &&
                this.ignoredGrid.keysLength() === 0)
            )
              return {};
            for (
              var p = [],
                d = 1 / 0,
                g = 1 / 0,
                b = -1 / 0,
                S = -1 / 0,
                w = 0,
                M = u;
              w < M.length;
              w += 1
            ) {
              var B = M[w],
                V = new a.Point(B.x + 100, B.y + 100);
              (d = Math.min(d, V.x)),
                (g = Math.min(g, V.y)),
                (b = Math.max(b, V.x)),
                (S = Math.max(S, V.y)),
                p.push(V);
            }
            for (
              var J = {},
                ne = {},
                re = 0,
                _e = this.grid
                  .query(d, g, b, S)
                  .concat(this.ignoredGrid.query(d, g, b, S));
              re < _e.length;
              re += 1
            ) {
              var pe = _e[re],
                Ce = pe.key;
              if (
                (J[Ce.bucketInstanceId] === void 0 &&
                  (J[Ce.bucketInstanceId] = {}),
                !J[Ce.bucketInstanceId][Ce.featureIndex])
              ) {
                var de = [
                  new a.Point(pe.x1, pe.y1),
                  new a.Point(pe.x2, pe.y1),
                  new a.Point(pe.x2, pe.y2),
                  new a.Point(pe.x1, pe.y2),
                ];
                a.polygonIntersectsPolygon(p, de) &&
                  ((J[Ce.bucketInstanceId][Ce.featureIndex] = !0),
                  ne[Ce.bucketInstanceId] === void 0 &&
                    (ne[Ce.bucketInstanceId] = []),
                  ne[Ce.bucketInstanceId].push(Ce.featureIndex));
              }
            }
            return ne;
          }),
          (Gi.prototype.insertCollisionBox = function (u, p, d, g, b) {
            (p ? this.ignoredGrid : this.grid).insert(
              { bucketInstanceId: d, featureIndex: g, collisionGroupID: b },
              u[0],
              u[1],
              u[2],
              u[3]
            );
          }),
          (Gi.prototype.insertCollisionCircles = function (u, p, d, g, b) {
            for (
              var S = p ? this.ignoredGrid : this.grid,
                w = {
                  bucketInstanceId: d,
                  featureIndex: g,
                  collisionGroupID: b,
                },
                M = 0;
              M < u.length;
              M += 4
            )
              S.insertCircle(w, u[M], u[M + 1], u[M + 2]);
          }),
          (Gi.prototype.projectAndGetPerspectiveRatio = function (u, p, d) {
            var g = [p, d, 0, 1];
            return (
              xi(g, g, u),
              {
                point: new a.Point(
                  ((g[0] / g[3] + 1) / 2) * this.transform.width + 100,
                  ((-g[1] / g[3] + 1) / 2) * this.transform.height + 100
                ),
                perspectiveRatio:
                  0.5 + (this.transform.cameraToCenterDistance / g[3]) * 0.5,
              }
            );
          }),
          (Gi.prototype.isOffscreen = function (u, p, d, g) {
            return (
              d < 100 ||
              u >= this.screenRightBoundary ||
              g < 100 ||
              p > this.screenBottomBoundary
            );
          }),
          (Gi.prototype.isInsideGrid = function (u, p, d, g) {
            return (
              d >= 0 &&
              u < this.gridRightBoundary &&
              g >= 0 &&
              p < this.gridBottomBoundary
            );
          }),
          (Gi.prototype.getViewportMatrix = function () {
            var u = a.identity([]);
            return a.translate(u, u, [-100, -100, 0]), u;
          });
        var lo = function (u, p, d, g) {
          (this.opacity = u
            ? Math.max(0, Math.min(1, u.opacity + (u.placed ? p : -p)))
            : g && d
            ? 1
            : 0),
            (this.placed = d);
        };
        lo.prototype.isHidden = function () {
          return this.opacity === 0 && !this.placed;
        };
        var Qa = function (u, p, d, g, b) {
          (this.text = new lo(u ? u.text : null, p, d, b)),
            (this.icon = new lo(u ? u.icon : null, p, g, b));
        };
        Qa.prototype.isHidden = function () {
          return this.text.isHidden() && this.icon.isHidden();
        };
        var Au = function (u, p, d) {
            (this.text = u), (this.icon = p), (this.skipFade = d);
          },
          Po = function () {
            (this.invProjMatrix = a.create()),
              (this.viewportMatrix = a.create()),
              (this.circles = []);
          },
          l0 = function (u, p, d, g, b) {
            (this.bucketInstanceId = u),
              (this.featureIndex = p),
              (this.sourceLayerIndex = d),
              (this.bucketIndex = g),
              (this.tileID = b);
          },
          Y = function (u) {
            (this.crossSourceCollisions = u),
              (this.maxGroupID = 0),
              (this.collisionGroups = {});
          };
        function ie(u, p, d, g, b) {
          var S = a.getAnchorAlignment(u),
            w = -(S.horizontalAlign - 0.5) * p,
            M = -(S.verticalAlign - 0.5) * d,
            B = a.evaluateVariableOffset(u, g);
          return new a.Point(w + B[0] * b, M + B[1] * b);
        }
        function Re(u, p, d, g, b, S) {
          var w = u.x1,
            M = u.x2,
            B = u.y1,
            V = u.y2,
            J = u.anchorPointX,
            ne = u.anchorPointY,
            re = new a.Point(p, d);
          return (
            g && re._rotate(b ? S : -S),
            {
              x1: w + re.x,
              y1: B + re.y,
              x2: M + re.x,
              y2: V + re.y,
              anchorPointX: J,
              anchorPointY: ne,
            }
          );
        }
        Y.prototype.get = function (u) {
          if (this.crossSourceCollisions) return { ID: 0, predicate: null };
          if (!this.collisionGroups[u]) {
            var p = ++this.maxGroupID;
            this.collisionGroups[u] = {
              ID: p,
              predicate: function (d) {
                return d.collisionGroupID === p;
              },
            };
          }
          return this.collisionGroups[u];
        };
        var rt = function (u, p, d, g) {
          (this.transform = u.clone()),
            (this.collisionIndex = new Gi(this.transform)),
            (this.placements = {}),
            (this.opacities = {}),
            (this.variableOffsets = {}),
            (this.stale = !1),
            (this.commitTime = 0),
            (this.fadeDuration = p),
            (this.retainedQueryData = {}),
            (this.collisionGroups = new Y(d)),
            (this.collisionCircleArrays = {}),
            (this.prevPlacement = g),
            g && (g.prevPlacement = void 0),
            (this.placedOrientations = {});
        };
        function Vt(u, p, d, g, b) {
          u.emplaceBack(p ? 1 : 0, d ? 1 : 0, g || 0, b || 0),
            u.emplaceBack(p ? 1 : 0, d ? 1 : 0, g || 0, b || 0),
            u.emplaceBack(p ? 1 : 0, d ? 1 : 0, g || 0, b || 0),
            u.emplaceBack(p ? 1 : 0, d ? 1 : 0, g || 0, b || 0);
        }
        (rt.prototype.getBucketParts = function (u, p, d, g) {
          var b = d.getBucket(p),
            S = d.latestFeatureIndex;
          if (b && S && p.id === b.layerIds[0]) {
            var w = d.collisionBoxArray,
              M = b.layers[0].layout,
              B = Math.pow(2, this.transform.zoom - d.tileID.overscaledZ),
              V = d.tileSize / a.EXTENT,
              J = this.transform.calculatePosMatrix(d.tileID.toUnwrapped()),
              ne = M.get("text-pitch-alignment") === "map",
              re = M.get("text-rotation-alignment") === "map",
              _e = hi(d, 1, this.transform.zoom),
              pe = ni(J, ne, re, this.transform, _e),
              Ce = null;
            if (ne) {
              var de = zr(J, ne, re, this.transform, _e);
              Ce = a.multiply([], this.transform.labelPlaneMatrix, de);
            }
            this.retainedQueryData[b.bucketInstanceId] = new l0(
              b.bucketInstanceId,
              S,
              b.sourceLayerIndex,
              b.index,
              d.tileID
            );
            var we = {
              bucket: b,
              layout: M,
              posMatrix: J,
              textLabelPlaneMatrix: pe,
              labelToScreenMatrix: Ce,
              scale: B,
              textPixelRatio: V,
              holdingForFade: d.holdingForFade(),
              collisionBoxArray: w,
              partiallyEvaluatedTextSize: a.evaluateSizeForZoom(
                b.textSizeData,
                this.transform.zoom
              ),
              collisionGroup: this.collisionGroups.get(b.sourceID),
            };
            if (g)
              for (var De = 0, Ge = b.sortKeyRanges; De < Ge.length; De += 1) {
                var st = Ge[De];
                u.push({
                  sortKey: st.sortKey,
                  symbolInstanceStart: st.symbolInstanceStart,
                  symbolInstanceEnd: st.symbolInstanceEnd,
                  parameters: we,
                });
              }
            else
              u.push({
                symbolInstanceStart: 0,
                symbolInstanceEnd: b.symbolInstances.length,
                parameters: we,
              });
          }
        }),
          (rt.prototype.attemptAnchorPlacement = function (
            u,
            p,
            d,
            g,
            b,
            S,
            w,
            M,
            B,
            V,
            J,
            ne,
            re,
            _e,
            pe
          ) {
            var Ce,
              de = [ne.textOffset0, ne.textOffset1],
              we = ie(u, d, g, de, b),
              De = this.collisionIndex.placeCollisionBox(
                Re(p, we.x, we.y, S, w, this.transform.angle),
                J,
                M,
                B,
                V.predicate
              );
            if (
              !pe ||
              this.collisionIndex.placeCollisionBox(
                Re(pe, we.x, we.y, S, w, this.transform.angle),
                J,
                M,
                B,
                V.predicate
              ).box.length !== 0
            )
              return De.box.length > 0
                ? (this.prevPlacement &&
                    this.prevPlacement.variableOffsets[ne.crossTileID] &&
                    this.prevPlacement.placements[ne.crossTileID] &&
                    this.prevPlacement.placements[ne.crossTileID].text &&
                    (Ce =
                      this.prevPlacement.variableOffsets[ne.crossTileID]
                        .anchor),
                  (this.variableOffsets[ne.crossTileID] = {
                    textOffset: de,
                    width: d,
                    height: g,
                    anchor: u,
                    textBoxScale: b,
                    prevAnchor: Ce,
                  }),
                  this.markUsedJustification(re, u, ne, _e),
                  re.allowVerticalPlacement &&
                    (this.markUsedOrientation(re, _e, ne),
                    (this.placedOrientations[ne.crossTileID] = _e)),
                  { shift: we, placedGlyphBoxes: De })
                : void 0;
          }),
          (rt.prototype.placeLayerBucketPart = function (u, p, d) {
            var g = this,
              b = u.parameters,
              S = b.bucket,
              w = b.layout,
              M = b.posMatrix,
              B = b.textLabelPlaneMatrix,
              V = b.labelToScreenMatrix,
              J = b.textPixelRatio,
              ne = b.holdingForFade,
              re = b.collisionBoxArray,
              _e = b.partiallyEvaluatedTextSize,
              pe = b.collisionGroup,
              Ce = w.get("text-optional"),
              de = w.get("icon-optional"),
              we = w.get("text-allow-overlap"),
              De = w.get("icon-allow-overlap"),
              Ge = w.get("text-rotation-alignment") === "map",
              st = w.get("text-pitch-alignment") === "map",
              Je = w.get("icon-text-fit") !== "none",
              ht = w.get("symbol-z-order") === "viewport-y",
              Et = we && (De || !S.hasIconData() || de),
              jt = De && (we || !S.hasTextData() || Ce);
            !S.collisionArrays && re && S.deserializeCollisionBoxes(re);
            var Ft = function (pn, $n) {
              if (!p[pn.crossTileID])
                if (ne) g.placements[pn.crossTileID] = new Au(!1, !1, !1);
                else {
                  var dr,
                    Yn = !1,
                    Xn = !1,
                    cr = !0,
                    Gn = null,
                    Hn = { box: null, offscreen: null },
                    na = { box: null, offscreen: null },
                    Mi = null,
                    Ba = null,
                    ba = 0,
                    Ri = 0,
                    Pi = 0;
                  $n.textFeatureIndex
                    ? (ba = $n.textFeatureIndex)
                    : pn.useRuntimeCollisionCircles && (ba = pn.featureIndex),
                    $n.verticalTextFeatureIndex &&
                      (Ri = $n.verticalTextFeatureIndex);
                  var ho = $n.textBox;
                  if (ho) {
                    var to = function (Pr) {
                        var Fa = a.WritingMode.horizontal;
                        if (
                          S.allowVerticalPlacement &&
                          !Pr &&
                          g.prevPlacement
                        ) {
                          var ra =
                            g.prevPlacement.placedOrientations[pn.crossTileID];
                          ra &&
                            ((g.placedOrientations[pn.crossTileID] = ra),
                            g.markUsedOrientation(S, (Fa = ra), pn));
                        }
                        return Fa;
                      },
                      Ws = function (Pr, Fa) {
                        if (
                          S.allowVerticalPlacement &&
                          pn.numVerticalGlyphVertices > 0 &&
                          $n.verticalTextBox
                        )
                          for (
                            var ra = 0, Gs = S.writingModes;
                            ra < Gs.length &&
                            (Gs[ra] === a.WritingMode.vertical
                              ? ((Hn = Fa()), (na = Hn))
                              : (Hn = Pr()),
                            !(Hn && Hn.box && Hn.box.length));
                            ra += 1
                          );
                        else Hn = Pr();
                      };
                    if (w.get("text-variable-anchor")) {
                      var po = w.get("text-variable-anchor");
                      if (
                        g.prevPlacement &&
                        g.prevPlacement.variableOffsets[pn.crossTileID]
                      ) {
                        var us =
                          g.prevPlacement.variableOffsets[pn.crossTileID];
                        po.indexOf(us.anchor) > 0 &&
                          (po = po.filter(function (Pr) {
                            return Pr !== us.anchor;
                          })).unshift(us.anchor);
                      }
                      var ko = function (Pr, Fa, ra) {
                        for (
                          var Gs = Pr.x2 - Pr.x1,
                            Id = Pr.y2 - Pr.y1,
                            Kl = pn.textBoxScale,
                            I0 = Je && !De ? Fa : null,
                            Cc = { box: [], offscreen: !1 },
                            Nc = we ? 2 * po.length : po.length,
                            ws = 0;
                          ws < Nc;
                          ++ws
                        ) {
                          var Md = g.attemptAnchorPlacement(
                            po[ws % po.length],
                            Pr,
                            Gs,
                            Id,
                            Kl,
                            Ge,
                            st,
                            J,
                            M,
                            pe,
                            ws >= po.length,
                            pn,
                            S,
                            ra,
                            I0
                          );
                          if (
                            Md &&
                            (Cc = Md.placedGlyphBoxes) &&
                            Cc.box &&
                            Cc.box.length
                          ) {
                            (Yn = !0), (Gn = Md.shift);
                            break;
                          }
                        }
                        return Cc;
                      };
                      Ws(
                        function () {
                          return ko(ho, $n.iconBox, a.WritingMode.horizontal);
                        },
                        function () {
                          var Pr = $n.verticalTextBox;
                          return S.allowVerticalPlacement &&
                            !(Hn && Hn.box && Hn.box.length) &&
                            pn.numVerticalGlyphVertices > 0 &&
                            Pr
                            ? ko(Pr, $n.verticalIconBox, a.WritingMode.vertical)
                            : { box: null, offscreen: null };
                        }
                      ),
                        Hn && ((Yn = Hn.box), (cr = Hn.offscreen));
                      var tu = to(Hn && Hn.box);
                      if (!Yn && g.prevPlacement) {
                        var wc =
                          g.prevPlacement.variableOffsets[pn.crossTileID];
                        wc &&
                          ((g.variableOffsets[pn.crossTileID] = wc),
                          g.markUsedJustification(S, wc.anchor, pn, tu));
                      }
                    } else {
                      var Xs = function (Pr, Fa) {
                        var ra = g.collisionIndex.placeCollisionBox(
                          Pr,
                          we,
                          J,
                          M,
                          pe.predicate
                        );
                        return (
                          ra &&
                            ra.box &&
                            ra.box.length &&
                            (g.markUsedOrientation(S, Fa, pn),
                            (g.placedOrientations[pn.crossTileID] = Fa)),
                          ra
                        );
                      };
                      Ws(
                        function () {
                          return Xs(ho, a.WritingMode.horizontal);
                        },
                        function () {
                          var Pr = $n.verticalTextBox;
                          return S.allowVerticalPlacement &&
                            pn.numVerticalGlyphVertices > 0 &&
                            Pr
                            ? Xs(Pr, a.WritingMode.vertical)
                            : { box: null, offscreen: null };
                        }
                      ),
                        to(Hn && Hn.box && Hn.box.length);
                    }
                  }
                  if (
                    ((Yn = (dr = Hn) && dr.box && dr.box.length > 0),
                    (cr = dr && dr.offscreen),
                    pn.useRuntimeCollisionCircles)
                  ) {
                    var ql = S.text.placedSymbolArray.get(
                        pn.centerJustifiedTextSymbolIndex
                      ),
                      El = a.evaluateSizeForFeature(S.textSizeData, _e, ql),
                      Ts = w.get("text-padding");
                    (Mi = g.collisionIndex.placeCollisionCircles(
                      we,
                      ql,
                      S.lineVertexArray,
                      S.glyphOffsetArray,
                      El,
                      M,
                      B,
                      V,
                      d,
                      st,
                      pe.predicate,
                      pn.collisionCircleDiameter,
                      Ts
                    )),
                      (Yn =
                        we || (Mi.circles.length > 0 && !Mi.collisionDetected)),
                      (cr = cr && Mi.offscreen);
                  }
                  if (
                    ($n.iconFeatureIndex && (Pi = $n.iconFeatureIndex),
                    $n.iconBox)
                  ) {
                    var $l = function (Pr) {
                      var Fa =
                        Je && Gn
                          ? Re(Pr, Gn.x, Gn.y, Ge, st, g.transform.angle)
                          : Pr;
                      return g.collisionIndex.placeCollisionBox(
                        Fa,
                        De,
                        J,
                        M,
                        pe.predicate
                      );
                    };
                    (Xn =
                      na && na.box && na.box.length && $n.verticalIconBox
                        ? (Ba = $l($n.verticalIconBox)).box.length > 0
                        : (Ba = $l($n.iconBox)).box.length > 0),
                      (cr = cr && Ba.offscreen);
                  }
                  var Ga =
                      Ce ||
                      (pn.numHorizontalGlyphVertices === 0 &&
                        pn.numVerticalGlyphVertices === 0),
                    Vi = de || pn.numIconVertices === 0;
                  if (
                    (Ga || Vi
                      ? Vi
                        ? Ga || (Xn = Xn && Yn)
                        : (Yn = Xn && Yn)
                      : (Xn = Yn = Xn && Yn),
                    Yn &&
                      dr &&
                      dr.box &&
                      g.collisionIndex.insertCollisionBox(
                        dr.box,
                        w.get("text-ignore-placement"),
                        S.bucketInstanceId,
                        na && na.box && Ri ? Ri : ba,
                        pe.ID
                      ),
                    Xn &&
                      Ba &&
                      g.collisionIndex.insertCollisionBox(
                        Ba.box,
                        w.get("icon-ignore-placement"),
                        S.bucketInstanceId,
                        Pi,
                        pe.ID
                      ),
                    Mi &&
                      (Yn &&
                        g.collisionIndex.insertCollisionCircles(
                          Mi.circles,
                          w.get("text-ignore-placement"),
                          S.bucketInstanceId,
                          ba,
                          pe.ID
                        ),
                      d))
                  ) {
                    var Eo = S.bucketInstanceId,
                      ds = g.collisionCircleArrays[Eo];
                    ds === void 0 &&
                      (ds = g.collisionCircleArrays[Eo] = new Po());
                    for (var Ss = 0; Ss < Mi.circles.length; Ss += 4)
                      ds.circles.push(Mi.circles[Ss + 0]),
                        ds.circles.push(Mi.circles[Ss + 1]),
                        ds.circles.push(Mi.circles[Ss + 2]),
                        ds.circles.push(Mi.collisionDetected ? 1 : 0);
                  }
                  (g.placements[pn.crossTileID] = new Au(
                    Yn || Et,
                    Xn || jt,
                    cr || S.justReloaded
                  )),
                    (p[pn.crossTileID] = !0);
                }
            };
            if (ht)
              for (
                var sn = S.getSortedSymbolIndexes(this.transform.angle),
                  In = sn.length - 1;
                In >= 0;
                --In
              ) {
                var Bn = sn[In];
                Ft(S.symbolInstances.get(Bn), S.collisionArrays[Bn]);
              }
            else
              for (
                var Dn = u.symbolInstanceStart;
                Dn < u.symbolInstanceEnd;
                Dn++
              )
                Ft(S.symbolInstances.get(Dn), S.collisionArrays[Dn]);
            if (d && S.bucketInstanceId in this.collisionCircleArrays) {
              var Fr = this.collisionCircleArrays[S.bucketInstanceId];
              a.invert(Fr.invProjMatrix, M),
                (Fr.viewportMatrix = this.collisionIndex.getViewportMatrix());
            }
            S.justReloaded = !1;
          }),
          (rt.prototype.markUsedJustification = function (u, p, d, g) {
            var b;
            b =
              g === a.WritingMode.vertical
                ? d.verticalPlacedTextSymbolIndex
                : {
                    left: d.leftJustifiedTextSymbolIndex,
                    center: d.centerJustifiedTextSymbolIndex,
                    right: d.rightJustifiedTextSymbolIndex,
                  }[a.getAnchorJustification(p)];
            for (
              var S = 0,
                w = [
                  d.leftJustifiedTextSymbolIndex,
                  d.centerJustifiedTextSymbolIndex,
                  d.rightJustifiedTextSymbolIndex,
                  d.verticalPlacedTextSymbolIndex,
                ];
              S < w.length;
              S += 1
            ) {
              var M = w[S];
              M >= 0 &&
                (u.text.placedSymbolArray.get(M).crossTileID =
                  b >= 0 && M !== b ? 0 : d.crossTileID);
            }
          }),
          (rt.prototype.markUsedOrientation = function (u, p, d) {
            for (
              var g =
                  p === a.WritingMode.horizontal ||
                  p === a.WritingMode.horizontalOnly
                    ? p
                    : 0,
                b = p === a.WritingMode.vertical ? p : 0,
                S = 0,
                w = [
                  d.leftJustifiedTextSymbolIndex,
                  d.centerJustifiedTextSymbolIndex,
                  d.rightJustifiedTextSymbolIndex,
                ];
              S < w.length;
              S += 1
            )
              u.text.placedSymbolArray.get(w[S]).placedOrientation = g;
            d.verticalPlacedTextSymbolIndex &&
              (u.text.placedSymbolArray.get(
                d.verticalPlacedTextSymbolIndex
              ).placedOrientation = b);
          }),
          (rt.prototype.commit = function (u) {
            (this.commitTime = u),
              (this.zoomAtLastRecencyCheck = this.transform.zoom);
            var p = this.prevPlacement,
              d = !1;
            this.prevZoomAdjustment = p
              ? p.zoomAdjustment(this.transform.zoom)
              : 0;
            var g = p ? p.symbolFadeChange(u) : 1,
              b = p ? p.opacities : {},
              S = p ? p.variableOffsets : {},
              w = p ? p.placedOrientations : {};
            for (var M in this.placements) {
              var B = this.placements[M],
                V = b[M];
              V
                ? ((this.opacities[M] = new Qa(V, g, B.text, B.icon)),
                  (d =
                    d || B.text !== V.text.placed || B.icon !== V.icon.placed))
                : ((this.opacities[M] = new Qa(
                    null,
                    g,
                    B.text,
                    B.icon,
                    B.skipFade
                  )),
                  (d = d || B.text || B.icon));
            }
            for (var J in b) {
              var ne = b[J];
              if (!this.opacities[J]) {
                var re = new Qa(ne, g, !1, !1);
                re.isHidden() ||
                  ((this.opacities[J] = re),
                  (d = d || ne.text.placed || ne.icon.placed));
              }
            }
            for (var _e in S)
              this.variableOffsets[_e] ||
                !this.opacities[_e] ||
                this.opacities[_e].isHidden() ||
                (this.variableOffsets[_e] = S[_e]);
            for (var pe in w)
              this.placedOrientations[pe] ||
                !this.opacities[pe] ||
                this.opacities[pe].isHidden() ||
                (this.placedOrientations[pe] = w[pe]);
            d
              ? (this.lastPlacementChangeTime = u)
              : typeof this.lastPlacementChangeTime != "number" &&
                (this.lastPlacementChangeTime = p
                  ? p.lastPlacementChangeTime
                  : u);
          }),
          (rt.prototype.updateLayerOpacities = function (u, p) {
            for (var d = {}, g = 0, b = p; g < b.length; g += 1) {
              var S = b[g],
                w = S.getBucket(u);
              w &&
                S.latestFeatureIndex &&
                u.id === w.layerIds[0] &&
                this.updateBucketOpacities(w, d, S.collisionBoxArray);
            }
          }),
          (rt.prototype.updateBucketOpacities = function (u, p, d) {
            var g = this;
            u.hasTextData() && u.text.opacityVertexArray.clear(),
              u.hasIconData() && u.icon.opacityVertexArray.clear(),
              u.hasIconCollisionBoxData() &&
                u.iconCollisionBox.collisionVertexArray.clear(),
              u.hasTextCollisionBoxData() &&
                u.textCollisionBox.collisionVertexArray.clear();
            var b = u.layers[0].layout,
              S = new Qa(null, 0, !1, !1, !0),
              w = b.get("text-allow-overlap"),
              M = b.get("icon-allow-overlap"),
              B = b.get("text-variable-anchor"),
              V = b.get("text-rotation-alignment") === "map",
              J = b.get("text-pitch-alignment") === "map",
              ne = b.get("icon-text-fit") !== "none",
              re = new Qa(
                null,
                0,
                w && (M || !u.hasIconData() || b.get("icon-optional")),
                M && (w || !u.hasTextData() || b.get("text-optional")),
                !0
              );
            !u.collisionArrays &&
              d &&
              (u.hasIconCollisionBoxData() || u.hasTextCollisionBoxData()) &&
              u.deserializeCollisionBoxes(d);
            for (
              var _e = function (we, De, Ge) {
                  for (var st = 0; st < De / 4; st++)
                    we.opacityVertexArray.emplaceBack(Ge);
                },
                pe = function (we) {
                  var De = u.symbolInstances.get(we),
                    Ge = De.numHorizontalGlyphVertices,
                    st = De.numVerticalGlyphVertices,
                    Je = De.crossTileID,
                    ht = g.opacities[Je];
                  p[Je] ? (ht = S) : ht || (g.opacities[Je] = ht = re),
                    (p[Je] = !0);
                  var Et = De.numIconVertices > 0,
                    jt = g.placedOrientations[De.crossTileID],
                    Ft = jt === a.WritingMode.vertical,
                    sn =
                      jt === a.WritingMode.horizontal ||
                      jt === a.WritingMode.horizontalOnly;
                  if (Ge > 0 || st > 0) {
                    var In = hh(ht.text);
                    _e(u.text, Ge, Ft ? Wc : In), _e(u.text, st, sn ? Wc : In);
                    var Bn = ht.text.isHidden();
                    [
                      De.rightJustifiedTextSymbolIndex,
                      De.centerJustifiedTextSymbolIndex,
                      De.leftJustifiedTextSymbolIndex,
                    ].forEach(function (Hn) {
                      Hn >= 0 &&
                        (u.text.placedSymbolArray.get(Hn).hidden =
                          Bn || Ft ? 1 : 0);
                    }),
                      De.verticalPlacedTextSymbolIndex >= 0 &&
                        (u.text.placedSymbolArray.get(
                          De.verticalPlacedTextSymbolIndex
                        ).hidden = Bn || sn ? 1 : 0);
                    var Dn = g.variableOffsets[De.crossTileID];
                    Dn && g.markUsedJustification(u, Dn.anchor, De, jt);
                    var Fr = g.placedOrientations[De.crossTileID];
                    Fr &&
                      (g.markUsedJustification(u, "left", De, Fr),
                      g.markUsedOrientation(u, Fr, De));
                  }
                  if (Et) {
                    var pn = hh(ht.icon),
                      $n = !(ne && De.verticalPlacedIconSymbolIndex && Ft);
                    De.placedIconSymbolIndex >= 0 &&
                      (_e(u.icon, De.numIconVertices, $n ? pn : Wc),
                      (u.icon.placedSymbolArray.get(
                        De.placedIconSymbolIndex
                      ).hidden = ht.icon.isHidden())),
                      De.verticalPlacedIconSymbolIndex >= 0 &&
                        (_e(u.icon, De.numVerticalIconVertices, $n ? Wc : pn),
                        (u.icon.placedSymbolArray.get(
                          De.verticalPlacedIconSymbolIndex
                        ).hidden = ht.icon.isHidden()));
                  }
                  if (
                    u.hasIconCollisionBoxData() ||
                    u.hasTextCollisionBoxData()
                  ) {
                    var dr = u.collisionArrays[we];
                    if (dr) {
                      var Yn = new a.Point(0, 0);
                      if (dr.textBox || dr.verticalTextBox) {
                        var Xn = !0;
                        if (B) {
                          var cr = g.variableOffsets[Je];
                          cr
                            ? ((Yn = ie(
                                cr.anchor,
                                cr.width,
                                cr.height,
                                cr.textOffset,
                                cr.textBoxScale
                              )),
                              V &&
                                Yn._rotate(
                                  J ? g.transform.angle : -g.transform.angle
                                ))
                            : (Xn = !1);
                        }
                        dr.textBox &&
                          Vt(
                            u.textCollisionBox.collisionVertexArray,
                            ht.text.placed,
                            !Xn || Ft,
                            Yn.x,
                            Yn.y
                          ),
                          dr.verticalTextBox &&
                            Vt(
                              u.textCollisionBox.collisionVertexArray,
                              ht.text.placed,
                              !Xn || sn,
                              Yn.x,
                              Yn.y
                            );
                      }
                      var Gn = !!(!sn && dr.verticalIconBox);
                      dr.iconBox &&
                        Vt(
                          u.iconCollisionBox.collisionVertexArray,
                          ht.icon.placed,
                          Gn,
                          ne ? Yn.x : 0,
                          ne ? Yn.y : 0
                        ),
                        dr.verticalIconBox &&
                          Vt(
                            u.iconCollisionBox.collisionVertexArray,
                            ht.icon.placed,
                            !Gn,
                            ne ? Yn.x : 0,
                            ne ? Yn.y : 0
                          );
                    }
                  }
                },
                Ce = 0;
              Ce < u.symbolInstances.length;
              Ce++
            )
              pe(Ce);
            if (
              (u.sortFeatures(this.transform.angle),
              this.retainedQueryData[u.bucketInstanceId] &&
                (this.retainedQueryData[u.bucketInstanceId].featureSortOrder =
                  u.featureSortOrder),
              u.hasTextData() &&
                u.text.opacityVertexBuffer &&
                u.text.opacityVertexBuffer.updateData(
                  u.text.opacityVertexArray
                ),
              u.hasIconData() &&
                u.icon.opacityVertexBuffer &&
                u.icon.opacityVertexBuffer.updateData(
                  u.icon.opacityVertexArray
                ),
              u.hasIconCollisionBoxData() &&
                u.iconCollisionBox.collisionVertexBuffer &&
                u.iconCollisionBox.collisionVertexBuffer.updateData(
                  u.iconCollisionBox.collisionVertexArray
                ),
              u.hasTextCollisionBoxData() &&
                u.textCollisionBox.collisionVertexBuffer &&
                u.textCollisionBox.collisionVertexBuffer.updateData(
                  u.textCollisionBox.collisionVertexArray
                ),
              u.bucketInstanceId in this.collisionCircleArrays)
            ) {
              var de = this.collisionCircleArrays[u.bucketInstanceId];
              (u.placementInvProjMatrix = de.invProjMatrix),
                (u.placementViewportMatrix = de.viewportMatrix),
                (u.collisionCircleArray = de.circles),
                delete this.collisionCircleArrays[u.bucketInstanceId];
            }
          }),
          (rt.prototype.symbolFadeChange = function (u) {
            return this.fadeDuration === 0
              ? 1
              : (u - this.commitTime) / this.fadeDuration +
                  this.prevZoomAdjustment;
          }),
          (rt.prototype.zoomAdjustment = function (u) {
            return Math.max(0, (this.transform.zoom - u) / 1.5);
          }),
          (rt.prototype.hasTransitions = function (u) {
            return (
              this.stale || u - this.lastPlacementChangeTime < this.fadeDuration
            );
          }),
          (rt.prototype.stillRecent = function (u, p) {
            var d =
              this.zoomAtLastRecencyCheck === p
                ? 1 - this.zoomAdjustment(p)
                : 1;
            return (
              (this.zoomAtLastRecencyCheck = p),
              this.commitTime + this.fadeDuration * d > u
            );
          }),
          (rt.prototype.setStale = function () {
            this.stale = !0;
          });
        var Nn = Math.pow(2, 25),
          Br = Math.pow(2, 24),
          Ki = Math.pow(2, 17),
          La = Math.pow(2, 16),
          _a = Math.pow(2, 9),
          rs = Math.pow(2, 8),
          dh = Math.pow(2, 1);
        function hh(u) {
          if (u.opacity === 0 && !u.placed) return 0;
          if (u.opacity === 1 && u.placed) return 4294967295;
          var p = u.placed ? 1 : 0,
            d = Math.floor(127 * u.opacity);
          return (
            d * Nn + p * Br + d * Ki + p * La + d * _a + p * rs + d * dh + p
          );
        }
        var Wc = 0,
          c0 = function (u) {
            (this._sortAcrossTiles =
              u.layout.get("symbol-z-order") !== "viewport-y" &&
              u.layout.get("symbol-sort-key").constantOr(1) !== void 0),
              (this._currentTileIndex = 0),
              (this._currentPartIndex = 0),
              (this._seenCrossTileIDs = {}),
              (this._bucketParts = []);
          };
        c0.prototype.continuePlacement = function (u, p, d, g, b) {
          for (var S = this._bucketParts; this._currentTileIndex < u.length; )
            if (
              (p.getBucketParts(
                S,
                g,
                u[this._currentTileIndex],
                this._sortAcrossTiles
              ),
              this._currentTileIndex++,
              b())
            )
              return !0;
          for (
            this._sortAcrossTiles &&
            ((this._sortAcrossTiles = !1),
            S.sort(function (w, M) {
              return w.sortKey - M.sortKey;
            }));
            this._currentPartIndex < S.length;

          )
            if (
              (p.placeLayerBucketPart(
                S[this._currentPartIndex],
                this._seenCrossTileIDs,
                d
              ),
              this._currentPartIndex++,
              b())
            )
              return !0;
          return !1;
        };
        var Tu = function (u, p, d, g, b, S, w) {
          (this.placement = new rt(u, b, S, w)),
            (this._currentPlacementIndex = p.length - 1),
            (this._forceFullPlacement = d),
            (this._showCollisionBoxes = g),
            (this._done = !1);
        };
        (Tu.prototype.isDone = function () {
          return this._done;
        }),
          (Tu.prototype.continuePlacement = function (u, p, d) {
            for (
              var g = this,
                b = a.browser.now(),
                S = function () {
                  var B = a.browser.now() - b;
                  return !g._forceFullPlacement && B > 2;
                };
              this._currentPlacementIndex >= 0;

            ) {
              var w = p[u[this._currentPlacementIndex]],
                M = this.placement.collisionIndex.transform.zoom;
              if (
                w.type === "symbol" &&
                (!w.minzoom || w.minzoom <= M) &&
                (!w.maxzoom || w.maxzoom > M)
              ) {
                if (
                  (this._inProgressLayer || (this._inProgressLayer = new c0(w)),
                  this._inProgressLayer.continuePlacement(
                    d[w.source],
                    this.placement,
                    this._showCollisionBoxes,
                    w,
                    S
                  ))
                )
                  return;
                delete this._inProgressLayer;
              }
              this._currentPlacementIndex--;
            }
            this._done = !0;
          }),
          (Tu.prototype.commit = function (u) {
            return this.placement.commit(u), this.placement;
          });
        var ph = 512 / a.EXTENT / 2,
          sd = function (u, p, d) {
            (this.tileID = u),
              (this.indexedSymbolInstances = {}),
              (this.bucketInstanceId = d);
            for (var g = 0; g < p.length; g++) {
              var b = p.get(g),
                S = b.key;
              this.indexedSymbolInstances[S] ||
                (this.indexedSymbolInstances[S] = []),
                this.indexedSymbolInstances[S].push({
                  crossTileID: b.crossTileID,
                  coord: this.getScaledCoordinates(b, u),
                });
            }
          };
        (sd.prototype.getScaledCoordinates = function (u, p) {
          var d = ph / Math.pow(2, p.canonical.z - this.tileID.canonical.z);
          return {
            x: Math.floor((p.canonical.x * a.EXTENT + u.anchorX) * d),
            y: Math.floor((p.canonical.y * a.EXTENT + u.anchorY) * d),
          };
        }),
          (sd.prototype.findMatches = function (u, p, d) {
            for (
              var g =
                  this.tileID.canonical.z < p.canonical.z
                    ? 1
                    : Math.pow(2, this.tileID.canonical.z - p.canonical.z),
                b = 0;
              b < u.length;
              b++
            ) {
              var S = u.get(b);
              if (!S.crossTileID) {
                var w = this.indexedSymbolInstances[S.key];
                if (w)
                  for (
                    var M = this.getScaledCoordinates(S, p), B = 0, V = w;
                    B < V.length;
                    B += 1
                  ) {
                    var J = V[B];
                    if (
                      Math.abs(J.coord.x - M.x) <= g &&
                      Math.abs(J.coord.y - M.y) <= g &&
                      !d[J.crossTileID]
                    ) {
                      (d[J.crossTileID] = !0), (S.crossTileID = J.crossTileID);
                      break;
                    }
                  }
              }
            }
          });
        var Wa = function () {
          this.maxCrossTileID = 0;
        };
        Wa.prototype.generate = function () {
          return ++this.maxCrossTileID;
        };
        var Ml = function () {
          (this.indexes = {}), (this.usedCrossTileIDs = {}), (this.lng = 0);
        };
        (Ml.prototype.handleWrapJump = function (u) {
          var p = Math.round((u - this.lng) / 360);
          if (p !== 0)
            for (var d in this.indexes) {
              var g = this.indexes[d],
                b = {};
              for (var S in g) {
                var w = g[S];
                (w.tileID = w.tileID.unwrapTo(w.tileID.wrap + p)),
                  (b[w.tileID.key] = w);
              }
              this.indexes[d] = b;
            }
          this.lng = u;
        }),
          (Ml.prototype.addBucket = function (u, p, d) {
            if (
              this.indexes[u.overscaledZ] &&
              this.indexes[u.overscaledZ][u.key]
            ) {
              if (
                this.indexes[u.overscaledZ][u.key].bucketInstanceId ===
                p.bucketInstanceId
              )
                return !1;
              this.removeBucketCrossTileIDs(
                u.overscaledZ,
                this.indexes[u.overscaledZ][u.key]
              );
            }
            for (var g = 0; g < p.symbolInstances.length; g++)
              p.symbolInstances.get(g).crossTileID = 0;
            this.usedCrossTileIDs[u.overscaledZ] ||
              (this.usedCrossTileIDs[u.overscaledZ] = {});
            var b = this.usedCrossTileIDs[u.overscaledZ];
            for (var S in this.indexes) {
              var w = this.indexes[S];
              if (Number(S) > u.overscaledZ)
                for (var M in w) {
                  var B = w[M];
                  B.tileID.isChildOf(u) &&
                    B.findMatches(p.symbolInstances, u, b);
                }
              else {
                var V = w[u.scaledTo(Number(S)).key];
                V && V.findMatches(p.symbolInstances, u, b);
              }
            }
            for (var J = 0; J < p.symbolInstances.length; J++) {
              var ne = p.symbolInstances.get(J);
              ne.crossTileID ||
                ((ne.crossTileID = d.generate()), (b[ne.crossTileID] = !0));
            }
            return (
              this.indexes[u.overscaledZ] === void 0 &&
                (this.indexes[u.overscaledZ] = {}),
              (this.indexes[u.overscaledZ][u.key] = new sd(
                u,
                p.symbolInstances,
                p.bucketInstanceId
              )),
              !0
            );
          }),
          (Ml.prototype.removeBucketCrossTileIDs = function (u, p) {
            for (var d in p.indexedSymbolInstances)
              for (
                var g = 0, b = p.indexedSymbolInstances[d];
                g < b.length;
                g += 1
              )
                delete this.usedCrossTileIDs[u][b[g].crossTileID];
          }),
          (Ml.prototype.removeStaleBuckets = function (u) {
            var p = !1;
            for (var d in this.indexes) {
              var g = this.indexes[d];
              for (var b in g)
                u[g[b].bucketInstanceId] ||
                  (this.removeBucketCrossTileIDs(d, g[b]),
                  delete g[b],
                  (p = !0));
            }
            return p;
          });
        var Pl = function () {
          (this.layerIndexes = {}),
            (this.crossTileIDs = new Wa()),
            (this.maxBucketInstanceId = 0),
            (this.bucketsInCurrentPlacement = {});
        };
        (Pl.prototype.addLayer = function (u, p, d) {
          var g = this.layerIndexes[u.id];
          g === void 0 && (g = this.layerIndexes[u.id] = new Ml());
          var b = !1,
            S = {};
          g.handleWrapJump(d);
          for (var w = 0, M = p; w < M.length; w += 1) {
            var B = M[w],
              V = B.getBucket(u);
            V &&
              u.id === V.layerIds[0] &&
              (V.bucketInstanceId ||
                (V.bucketInstanceId = ++this.maxBucketInstanceId),
              g.addBucket(B.tileID, V, this.crossTileIDs) && (b = !0),
              (S[V.bucketInstanceId] = !0));
          }
          return g.removeStaleBuckets(S) && (b = !0), b;
        }),
          (Pl.prototype.pruneUnusedLayers = function (u) {
            var p = {};
            for (var d in (u.forEach(function (g) {
              p[g] = !0;
            }),
            this.layerIndexes))
              p[d] || delete this.layerIndexes[d];
          });
        var Ds = function (u, p) {
            return a.emitValidationErrors(
              u,
              p &&
                p.filter(function (d) {
                  return d.identifier !== "source.canvas";
                })
            );
          },
          Bs = a.pick(qt, [
            "addLayer",
            "removeLayer",
            "setPaintProperty",
            "setLayoutProperty",
            "setFilter",
            "addSource",
            "removeSource",
            "setLayerZoomRange",
            "setLight",
            "setTransition",
            "setGeoJSONSourceData",
          ]),
          dl = a.pick(qt, ["setCenter", "setZoom", "setBearing", "setPitch"]),
          Su = (function () {
            var u = {},
              p = a.styleSpec.$version;
            for (var d in a.styleSpec.$root) {
              var g,
                b = a.styleSpec.$root[d];
              b.required &&
                (g = d === "version" ? p : b.type === "array" ? [] : {}) !=
                  null &&
                (u[d] = g);
            }
            return u;
          })(),
          Oo = (function (u) {
            function p(d, g) {
              var b = this;
              g === void 0 && (g = {}),
                u.call(this),
                (this.map = d),
                (this.dispatcher = new nt(pt(), this)),
                (this.imageManager = new G()),
                this.imageManager.setEventedParent(this),
                (this.glyphManager = new ut(
                  d._requestManager,
                  g.localIdeographFontFamily
                )),
                (this.lineAtlas = new He(256, 512)),
                (this.crossTileSymbolIndex = new Pl()),
                (this._layers = {}),
                (this._serializedLayers = {}),
                (this._order = []),
                (this.sourceCaches = {}),
                (this.zoomHistory = new a.ZoomHistory()),
                (this._loaded = !1),
                (this._availableImages = []),
                this._resetUpdates(),
                this.dispatcher.broadcast("setReferrer", a.getReferrer());
              var S = this;
              (this._rtlTextPluginCallback = p.registerForPluginStateChange(
                function (w) {
                  S.dispatcher.broadcast(
                    "syncRTLPluginState",
                    { pluginStatus: w.pluginStatus, pluginURL: w.pluginURL },
                    function (M, B) {
                      if (
                        (a.triggerPluginCompletionEvent(M),
                        B &&
                          B.every(function (J) {
                            return J;
                          }))
                      )
                        for (var V in S.sourceCaches)
                          S.sourceCaches[V].reload();
                    }
                  );
                }
              )),
                this.on("data", function (w) {
                  if (
                    w.dataType === "source" &&
                    w.sourceDataType === "metadata"
                  ) {
                    var M = b.sourceCaches[w.sourceId];
                    if (M) {
                      var B = M.getSource();
                      if (B && B.vectorLayerIds)
                        for (var V in b._layers) {
                          var J = b._layers[V];
                          J.source === B.id && b._validateLayer(J);
                        }
                    }
                  }
                });
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.loadURL = function (d, g) {
                var b = this;
                g === void 0 && (g = {}),
                  this.fire(new a.Event("dataloading", { dataType: "style" }));
                var S =
                  typeof g.validate == "boolean"
                    ? g.validate
                    : !a.isMapboxURL(d);
                d = this.map._requestManager.normalizeStyleURL(
                  d,
                  g.accessToken
                );
                var w = this.map._requestManager.transformRequest(
                  d,
                  a.ResourceType.Style
                );
                this._request = a.getJSON(w, function (M, B) {
                  (b._request = null),
                    M ? b.fire(new a.ErrorEvent(M)) : B && b._load(B, S);
                });
              }),
              (p.prototype.loadJSON = function (d, g) {
                var b = this;
                g === void 0 && (g = {}),
                  this.fire(new a.Event("dataloading", { dataType: "style" })),
                  (this._request = a.browser.frame(function () {
                    (b._request = null), b._load(d, g.validate !== !1);
                  }));
              }),
              (p.prototype.loadEmpty = function () {
                this.fire(new a.Event("dataloading", { dataType: "style" })),
                  this._load(Su, !1);
              }),
              (p.prototype._load = function (d, g) {
                if (!g || !Ds(this, a.validateStyle(d))) {
                  for (var b in ((this._loaded = !0),
                  (this.stylesheet = d),
                  d.sources))
                    this.addSource(b, d.sources[b], { validate: !1 });
                  d.sprite
                    ? this._loadSprite(d.sprite)
                    : this.imageManager.setLoaded(!0),
                    this.glyphManager.setURL(d.glyphs);
                  var S = Gt(this.stylesheet.layers);
                  (this._order = S.map(function (V) {
                    return V.id;
                  })),
                    (this._layers = {}),
                    (this._serializedLayers = {});
                  for (var w = 0, M = S; w < M.length; w += 1) {
                    var B = M[w];
                    (B = a.createStyleLayer(B)).setEventedParent(this, {
                      layer: { id: B.id },
                    }),
                      (this._layers[B.id] = B),
                      (this._serializedLayers[B.id] = B.serialize());
                  }
                  this.dispatcher.broadcast(
                    "setLayers",
                    this._serializeLayers(this._order)
                  ),
                    (this.light = new Be(this.stylesheet.light)),
                    this.fire(new a.Event("data", { dataType: "style" })),
                    this.fire(new a.Event("style.load"));
                }
              }),
              (p.prototype._loadSprite = function (d) {
                var g = this;
                this._spriteRequest = (function (b, S, w) {
                  var M,
                    B,
                    V,
                    J = a.browser.devicePixelRatio > 1 ? "@2x" : "",
                    ne = a.getJSON(
                      S.transformRequest(
                        S.normalizeSpriteURL(b, J, ".json"),
                        a.ResourceType.SpriteJSON
                      ),
                      function (pe, Ce) {
                        (ne = null), V || ((V = pe), (M = Ce), _e());
                      }
                    ),
                    re = a.getImage(
                      S.transformRequest(
                        S.normalizeSpriteURL(b, J, ".png"),
                        a.ResourceType.SpriteImage
                      ),
                      function (pe, Ce) {
                        (re = null), V || ((V = pe), (B = Ce), _e());
                      }
                    );
                  function _e() {
                    if (V) w(V);
                    else if (M && B) {
                      var pe = a.browser.getImageData(B),
                        Ce = {};
                      for (var de in M) {
                        var we = M[de],
                          De = we.width,
                          Ge = we.height,
                          st = we.x,
                          Je = we.y,
                          ht = we.sdf,
                          Et = we.pixelRatio,
                          jt = we.stretchX,
                          Ft = we.stretchY,
                          sn = we.content,
                          In = new a.RGBAImage({ width: De, height: Ge });
                        a.RGBAImage.copy(
                          pe,
                          In,
                          { x: st, y: Je },
                          { x: 0, y: 0 },
                          { width: De, height: Ge }
                        ),
                          (Ce[de] = {
                            data: In,
                            pixelRatio: Et,
                            sdf: ht,
                            stretchX: jt,
                            stretchY: Ft,
                            content: sn,
                          });
                      }
                      w(null, Ce);
                    }
                  }
                  return {
                    cancel: function () {
                      ne && (ne.cancel(), (ne = null)),
                        re && (re.cancel(), (re = null));
                    },
                  };
                })(d, this.map._requestManager, function (b, S) {
                  if (((g._spriteRequest = null), b))
                    g.fire(new a.ErrorEvent(b));
                  else if (S) for (var w in S) g.imageManager.addImage(w, S[w]);
                  g.imageManager.setLoaded(!0),
                    (g._availableImages = g.imageManager.listImages()),
                    g.dispatcher.broadcast("setImages", g._availableImages),
                    g.fire(new a.Event("data", { dataType: "style" }));
                });
              }),
              (p.prototype._validateLayer = function (d) {
                var g = this.sourceCaches[d.source];
                if (g) {
                  var b = d.sourceLayer;
                  if (b) {
                    var S = g.getSource();
                    (S.type === "geojson" ||
                      (S.vectorLayerIds &&
                        S.vectorLayerIds.indexOf(b) === -1)) &&
                      this.fire(
                        new a.ErrorEvent(
                          new Error(
                            'Source layer "' +
                              b +
                              '" does not exist on source "' +
                              S.id +
                              '" as specified by style layer "' +
                              d.id +
                              '"'
                          )
                        )
                      );
                  }
                }
              }),
              (p.prototype.loaded = function () {
                if (!this._loaded || Object.keys(this._updatedSources).length)
                  return !1;
                for (var d in this.sourceCaches)
                  if (!this.sourceCaches[d].loaded()) return !1;
                return !!this.imageManager.isLoaded();
              }),
              (p.prototype._serializeLayers = function (d) {
                for (var g = [], b = 0, S = d; b < S.length; b += 1) {
                  var w = this._layers[S[b]];
                  w.type !== "custom" && g.push(w.serialize());
                }
                return g;
              }),
              (p.prototype.hasTransitions = function () {
                if (this.light && this.light.hasTransition()) return !0;
                for (var d in this.sourceCaches)
                  if (this.sourceCaches[d].hasTransition()) return !0;
                for (var g in this._layers)
                  if (this._layers[g].hasTransition()) return !0;
                return !1;
              }),
              (p.prototype._checkLoaded = function () {
                if (!this._loaded) throw new Error("Style is not done loading");
              }),
              (p.prototype.update = function (d) {
                if (this._loaded) {
                  var g = this._changed;
                  if (this._changed) {
                    var b = Object.keys(this._updatedLayers),
                      S = Object.keys(this._removedLayers);
                    for (var w in ((b.length || S.length) &&
                      this._updateWorkerLayers(b, S),
                    this._updatedSources)) {
                      var M = this._updatedSources[w];
                      M === "reload"
                        ? this._reloadSource(w)
                        : M === "clear" && this._clearSource(w);
                    }
                    for (var B in (this._updateTilesForChangedImages(),
                    this._updatedPaintProps))
                      this._layers[B].updateTransitions(d);
                    this.light.updateTransitions(d), this._resetUpdates();
                  }
                  var V = {};
                  for (var J in this.sourceCaches) {
                    var ne = this.sourceCaches[J];
                    (V[J] = ne.used), (ne.used = !1);
                  }
                  for (var re = 0, _e = this._order; re < _e.length; re += 1) {
                    var pe = this._layers[_e[re]];
                    pe.recalculate(d, this._availableImages),
                      !pe.isHidden(d.zoom) &&
                        pe.source &&
                        (this.sourceCaches[pe.source].used = !0);
                  }
                  for (var Ce in V) {
                    var de = this.sourceCaches[Ce];
                    V[Ce] !== de.used &&
                      de.fire(
                        new a.Event("data", {
                          sourceDataType: "visibility",
                          dataType: "source",
                          sourceId: Ce,
                        })
                      );
                  }
                  this.light.recalculate(d),
                    (this.z = d.zoom),
                    g && this.fire(new a.Event("data", { dataType: "style" }));
                }
              }),
              (p.prototype._updateTilesForChangedImages = function () {
                var d = Object.keys(this._changedImages);
                if (d.length) {
                  for (var g in this.sourceCaches)
                    this.sourceCaches[g].reloadTilesForDependencies(
                      ["icons", "patterns"],
                      d
                    );
                  this._changedImages = {};
                }
              }),
              (p.prototype._updateWorkerLayers = function (d, g) {
                this.dispatcher.broadcast("updateLayers", {
                  layers: this._serializeLayers(d),
                  removedIds: g,
                });
              }),
              (p.prototype._resetUpdates = function () {
                (this._changed = !1),
                  (this._updatedLayers = {}),
                  (this._removedLayers = {}),
                  (this._updatedSources = {}),
                  (this._updatedPaintProps = {}),
                  (this._changedImages = {});
              }),
              (p.prototype.setState = function (d) {
                var g = this;
                if ((this._checkLoaded(), Ds(this, a.validateStyle(d))))
                  return !1;
                (d = a.clone$1(d)).layers = Gt(d.layers);
                var b = (function (w, M) {
                  if (!w) return [{ command: qt.setStyle, args: [M] }];
                  var B = [];
                  try {
                    if (!a.deepEqual(w.version, M.version))
                      return [{ command: qt.setStyle, args: [M] }];
                    a.deepEqual(w.center, M.center) ||
                      B.push({ command: qt.setCenter, args: [M.center] }),
                      a.deepEqual(w.zoom, M.zoom) ||
                        B.push({ command: qt.setZoom, args: [M.zoom] }),
                      a.deepEqual(w.bearing, M.bearing) ||
                        B.push({ command: qt.setBearing, args: [M.bearing] }),
                      a.deepEqual(w.pitch, M.pitch) ||
                        B.push({ command: qt.setPitch, args: [M.pitch] }),
                      a.deepEqual(w.sprite, M.sprite) ||
                        B.push({ command: qt.setSprite, args: [M.sprite] }),
                      a.deepEqual(w.glyphs, M.glyphs) ||
                        B.push({ command: qt.setGlyphs, args: [M.glyphs] }),
                      a.deepEqual(w.transition, M.transition) ||
                        B.push({
                          command: qt.setTransition,
                          args: [M.transition],
                        }),
                      a.deepEqual(w.light, M.light) ||
                        B.push({ command: qt.setLight, args: [M.light] });
                    var V = {},
                      J = [];
                    (function (re, _e, pe, Ce) {
                      var de;
                      for (de in ((_e = _e || {}), (re = re || {})))
                        re.hasOwnProperty(de) &&
                          (_e.hasOwnProperty(de) || nn(de, pe, Ce));
                      for (de in _e)
                        _e.hasOwnProperty(de) &&
                          (re.hasOwnProperty(de)
                            ? a.deepEqual(re[de], _e[de]) ||
                              (re[de].type === "geojson" &&
                              _e[de].type === "geojson" &&
                              ti(re, _e, de)
                                ? pe.push({
                                    command: qt.setGeoJSONSourceData,
                                    args: [de, _e[de].data],
                                  })
                                : wr(de, _e, pe, Ce))
                            : or(de, _e, pe));
                    })(w.sources, M.sources, J, V);
                    var ne = [];
                    w.layers &&
                      w.layers.forEach(function (re) {
                        V[re.source]
                          ? B.push({ command: qt.removeLayer, args: [re.id] })
                          : ne.push(re);
                      }),
                      (B = B.concat(J)),
                      (function (re, _e, pe) {
                        _e = _e || [];
                        var Ce,
                          de,
                          we,
                          De,
                          Ge,
                          st,
                          Je,
                          ht = (re = re || []).map(Or),
                          Et = _e.map(Or),
                          jt = re.reduce(sr, {}),
                          Ft = _e.reduce(sr, {}),
                          sn = ht.slice(),
                          In = Object.create(null);
                        for (Ce = 0, de = 0; Ce < ht.length; Ce++)
                          Ft.hasOwnProperty((we = ht[Ce]))
                            ? de++
                            : (pe.push({ command: qt.removeLayer, args: [we] }),
                              sn.splice(sn.indexOf(we, de), 1));
                        for (Ce = 0, de = 0; Ce < Et.length; Ce++)
                          sn[sn.length - 1 - Ce] !==
                            (we = Et[Et.length - 1 - Ce]) &&
                            (jt.hasOwnProperty(we)
                              ? (pe.push({
                                  command: qt.removeLayer,
                                  args: [we],
                                }),
                                sn.splice(
                                  sn.lastIndexOf(we, sn.length - de),
                                  1
                                ))
                              : de++,
                            pe.push({
                              command: qt.addLayer,
                              args: [Ft[we], (st = sn[sn.length - Ce])],
                            }),
                            sn.splice(sn.length - Ce, 0, we),
                            (In[we] = !0));
                        for (Ce = 0; Ce < Et.length; Ce++)
                          if (
                            ((De = jt[(we = Et[Ce])]),
                            (Ge = Ft[we]),
                            !In[we] && !a.deepEqual(De, Ge))
                          )
                            if (
                              a.deepEqual(De.source, Ge.source) &&
                              a.deepEqual(
                                De["source-layer"],
                                Ge["source-layer"]
                              ) &&
                              a.deepEqual(De.type, Ge.type)
                            ) {
                              for (Je in (xr(
                                De.layout,
                                Ge.layout,
                                pe,
                                we,
                                null,
                                qt.setLayoutProperty
                              ),
                              xr(
                                De.paint,
                                Ge.paint,
                                pe,
                                we,
                                null,
                                qt.setPaintProperty
                              ),
                              a.deepEqual(De.filter, Ge.filter) ||
                                pe.push({
                                  command: qt.setFilter,
                                  args: [we, Ge.filter],
                                }),
                              (a.deepEqual(De.minzoom, Ge.minzoom) &&
                                a.deepEqual(De.maxzoom, Ge.maxzoom)) ||
                                pe.push({
                                  command: qt.setLayerZoomRange,
                                  args: [we, Ge.minzoom, Ge.maxzoom],
                                }),
                              De))
                                De.hasOwnProperty(Je) &&
                                  Je !== "layout" &&
                                  Je !== "paint" &&
                                  Je !== "filter" &&
                                  Je !== "metadata" &&
                                  Je !== "minzoom" &&
                                  Je !== "maxzoom" &&
                                  (Je.indexOf("paint.") === 0
                                    ? xr(
                                        De[Je],
                                        Ge[Je],
                                        pe,
                                        we,
                                        Je.slice(6),
                                        qt.setPaintProperty
                                      )
                                    : a.deepEqual(De[Je], Ge[Je]) ||
                                      pe.push({
                                        command: qt.setLayerProperty,
                                        args: [we, Je, Ge[Je]],
                                      }));
                              for (Je in Ge)
                                Ge.hasOwnProperty(Je) &&
                                  !De.hasOwnProperty(Je) &&
                                  Je !== "layout" &&
                                  Je !== "paint" &&
                                  Je !== "filter" &&
                                  Je !== "metadata" &&
                                  Je !== "minzoom" &&
                                  Je !== "maxzoom" &&
                                  (Je.indexOf("paint.") === 0
                                    ? xr(
                                        De[Je],
                                        Ge[Je],
                                        pe,
                                        we,
                                        Je.slice(6),
                                        qt.setPaintProperty
                                      )
                                    : a.deepEqual(De[Je], Ge[Je]) ||
                                      pe.push({
                                        command: qt.setLayerProperty,
                                        args: [we, Je, Ge[Je]],
                                      }));
                            } else
                              pe.push({ command: qt.removeLayer, args: [we] }),
                                (st = sn[sn.lastIndexOf(we) + 1]),
                                pe.push({
                                  command: qt.addLayer,
                                  args: [Ge, st],
                                });
                      })(ne, M.layers, B);
                  } catch (re) {
                    console.warn("Unable to compute style diff:", re),
                      (B = [{ command: qt.setStyle, args: [M] }]);
                  }
                  return B;
                })(this.serialize(), d).filter(function (w) {
                  return !(w.command in dl);
                });
                if (b.length === 0) return !1;
                var S = b.filter(function (w) {
                  return !(w.command in Bs);
                });
                if (S.length > 0)
                  throw new Error(
                    "Unimplemented: " +
                      S.map(function (w) {
                        return w.command;
                      }).join(", ") +
                      "."
                  );
                return (
                  b.forEach(function (w) {
                    w.command !== "setTransition" &&
                      g[w.command].apply(g, w.args);
                  }),
                  (this.stylesheet = d),
                  !0
                );
              }),
              (p.prototype.addImage = function (d, g) {
                if (this.getImage(d))
                  return this.fire(
                    new a.ErrorEvent(
                      new Error("An image with this name already exists.")
                    )
                  );
                this.imageManager.addImage(d, g), this._afterImageUpdated(d);
              }),
              (p.prototype.updateImage = function (d, g) {
                this.imageManager.updateImage(d, g);
              }),
              (p.prototype.getImage = function (d) {
                return this.imageManager.getImage(d);
              }),
              (p.prototype.removeImage = function (d) {
                if (!this.getImage(d))
                  return this.fire(
                    new a.ErrorEvent(
                      new Error("No image with this name exists.")
                    )
                  );
                this.imageManager.removeImage(d), this._afterImageUpdated(d);
              }),
              (p.prototype._afterImageUpdated = function (d) {
                (this._availableImages = this.imageManager.listImages()),
                  (this._changedImages[d] = !0),
                  (this._changed = !0),
                  this.dispatcher.broadcast("setImages", this._availableImages),
                  this.fire(new a.Event("data", { dataType: "style" }));
              }),
              (p.prototype.listImages = function () {
                return this._checkLoaded(), this.imageManager.listImages();
              }),
              (p.prototype.addSource = function (d, g, b) {
                var S = this;
                if (
                  (b === void 0 && (b = {}),
                  this._checkLoaded(),
                  this.sourceCaches[d] !== void 0)
                )
                  throw new Error("There is already a source with this ID");
                if (!g.type)
                  throw new Error(
                    "The type property must be defined, but only the following properties were given: " +
                      Object.keys(g).join(", ") +
                      "."
                  );
                if (
                  !(
                    ["vector", "raster", "geojson", "video", "image"].indexOf(
                      g.type
                    ) >= 0 &&
                    this._validate(
                      a.validateStyle.source,
                      "sources." + d,
                      g,
                      null,
                      b
                    )
                  )
                ) {
                  this.map &&
                    this.map._collectResourceTiming &&
                    (g.collectResourceTiming = !0);
                  var w = (this.sourceCaches[d] = new ye(
                    d,
                    g,
                    this.dispatcher
                  ));
                  (w.style = this),
                    w.setEventedParent(this, function () {
                      return {
                        isSourceLoaded: S.loaded(),
                        source: w.serialize(),
                        sourceId: d,
                      };
                    }),
                    w.onAdd(this.map),
                    (this._changed = !0);
                }
              }),
              (p.prototype.removeSource = function (d) {
                if ((this._checkLoaded(), this.sourceCaches[d] === void 0))
                  throw new Error("There is no source with this ID");
                for (var g in this._layers)
                  if (this._layers[g].source === d)
                    return this.fire(
                      new a.ErrorEvent(
                        new Error(
                          'Source "' +
                            d +
                            '" cannot be removed while layer "' +
                            g +
                            '" is using it.'
                        )
                      )
                    );
                var b = this.sourceCaches[d];
                delete this.sourceCaches[d],
                  delete this._updatedSources[d],
                  b.fire(
                    new a.Event("data", {
                      sourceDataType: "metadata",
                      dataType: "source",
                      sourceId: d,
                    })
                  ),
                  b.setEventedParent(null),
                  b.clearTiles(),
                  b.onRemove && b.onRemove(this.map),
                  (this._changed = !0);
              }),
              (p.prototype.setGeoJSONSourceData = function (d, g) {
                this._checkLoaded(),
                  this.sourceCaches[d].getSource().setData(g),
                  (this._changed = !0);
              }),
              (p.prototype.getSource = function (d) {
                return this.sourceCaches[d] && this.sourceCaches[d].getSource();
              }),
              (p.prototype.addLayer = function (d, g, b) {
                b === void 0 && (b = {}), this._checkLoaded();
                var S = d.id;
                if (this.getLayer(S))
                  this.fire(
                    new a.ErrorEvent(
                      new Error(
                        'Layer with id "' + S + '" already exists on this map'
                      )
                    )
                  );
                else {
                  var w;
                  if (d.type === "custom") {
                    if (Ds(this, a.validateCustomStyleLayer(d))) return;
                    w = a.createStyleLayer(d);
                  } else {
                    if (
                      (typeof d.source == "object" &&
                        (this.addSource(S, d.source),
                        (d = a.clone$1(d)),
                        (d = a.extend(d, { source: S }))),
                      this._validate(
                        a.validateStyle.layer,
                        "layers." + S,
                        d,
                        { arrayIndex: -1 },
                        b
                      ))
                    )
                      return;
                    (w = a.createStyleLayer(d)),
                      this._validateLayer(w),
                      w.setEventedParent(this, { layer: { id: S } }),
                      (this._serializedLayers[w.id] = w.serialize());
                  }
                  var M = g ? this._order.indexOf(g) : this._order.length;
                  if (g && M === -1)
                    this.fire(
                      new a.ErrorEvent(
                        new Error(
                          'Layer with id "' +
                            g +
                            '" does not exist on this map.'
                        )
                      )
                    );
                  else {
                    if (
                      (this._order.splice(M, 0, S),
                      (this._layerOrderChanged = !0),
                      (this._layers[S] = w),
                      this._removedLayers[S] && w.source && w.type !== "custom")
                    ) {
                      var B = this._removedLayers[S];
                      delete this._removedLayers[S],
                        B.type !== w.type
                          ? (this._updatedSources[w.source] = "clear")
                          : ((this._updatedSources[w.source] = "reload"),
                            this.sourceCaches[w.source].pause());
                    }
                    this._updateLayer(w), w.onAdd && w.onAdd(this.map);
                  }
                }
              }),
              (p.prototype.moveLayer = function (d, g) {
                if (
                  (this._checkLoaded(), (this._changed = !0), this._layers[d])
                ) {
                  if (d !== g) {
                    var b = this._order.indexOf(d);
                    this._order.splice(b, 1);
                    var S = g ? this._order.indexOf(g) : this._order.length;
                    g && S === -1
                      ? this.fire(
                          new a.ErrorEvent(
                            new Error(
                              'Layer with id "' +
                                g +
                                '" does not exist on this map.'
                            )
                          )
                        )
                      : (this._order.splice(S, 0, d),
                        (this._layerOrderChanged = !0));
                  }
                } else
                  this.fire(
                    new a.ErrorEvent(
                      new Error(
                        "The layer '" +
                          d +
                          "' does not exist in the map's style and cannot be moved."
                      )
                    )
                  );
              }),
              (p.prototype.removeLayer = function (d) {
                this._checkLoaded();
                var g = this._layers[d];
                if (g) {
                  g.setEventedParent(null);
                  var b = this._order.indexOf(d);
                  this._order.splice(b, 1),
                    (this._layerOrderChanged = !0),
                    (this._changed = !0),
                    (this._removedLayers[d] = g),
                    delete this._layers[d],
                    delete this._serializedLayers[d],
                    delete this._updatedLayers[d],
                    delete this._updatedPaintProps[d],
                    g.onRemove && g.onRemove(this.map);
                } else
                  this.fire(
                    new a.ErrorEvent(
                      new Error(
                        "The layer '" +
                          d +
                          "' does not exist in the map's style and cannot be removed."
                      )
                    )
                  );
              }),
              (p.prototype.getLayer = function (d) {
                return this._layers[d];
              }),
              (p.prototype.hasLayer = function (d) {
                return d in this._layers;
              }),
              (p.prototype.setLayerZoomRange = function (d, g, b) {
                this._checkLoaded();
                var S = this.getLayer(d);
                S
                  ? (S.minzoom === g && S.maxzoom === b) ||
                    (g != null && (S.minzoom = g),
                    b != null && (S.maxzoom = b),
                    this._updateLayer(S))
                  : this.fire(
                      new a.ErrorEvent(
                        new Error(
                          "The layer '" +
                            d +
                            "' does not exist in the map's style and cannot have zoom extent."
                        )
                      )
                    );
              }),
              (p.prototype.setFilter = function (d, g, b) {
                b === void 0 && (b = {}), this._checkLoaded();
                var S = this.getLayer(d);
                if (S) {
                  if (!a.deepEqual(S.filter, g))
                    return g == null
                      ? ((S.filter = void 0), void this._updateLayer(S))
                      : void (
                          this._validate(
                            a.validateStyle.filter,
                            "layers." + S.id + ".filter",
                            g,
                            null,
                            b
                          ) || ((S.filter = a.clone$1(g)), this._updateLayer(S))
                        );
                } else
                  this.fire(
                    new a.ErrorEvent(
                      new Error(
                        "The layer '" +
                          d +
                          "' does not exist in the map's style and cannot be filtered."
                      )
                    )
                  );
              }),
              (p.prototype.getFilter = function (d) {
                return a.clone$1(this.getLayer(d).filter);
              }),
              (p.prototype.setLayoutProperty = function (d, g, b, S) {
                S === void 0 && (S = {}), this._checkLoaded();
                var w = this.getLayer(d);
                w
                  ? a.deepEqual(w.getLayoutProperty(g), b) ||
                    (w.setLayoutProperty(g, b, S), this._updateLayer(w))
                  : this.fire(
                      new a.ErrorEvent(
                        new Error(
                          "The layer '" +
                            d +
                            "' does not exist in the map's style and cannot be styled."
                        )
                      )
                    );
              }),
              (p.prototype.getLayoutProperty = function (d, g) {
                var b = this.getLayer(d);
                if (b) return b.getLayoutProperty(g);
                this.fire(
                  new a.ErrorEvent(
                    new Error(
                      "The layer '" + d + "' does not exist in the map's style."
                    )
                  )
                );
              }),
              (p.prototype.setPaintProperty = function (d, g, b, S) {
                S === void 0 && (S = {}), this._checkLoaded();
                var w = this.getLayer(d);
                w
                  ? a.deepEqual(w.getPaintProperty(g), b) ||
                    (w.setPaintProperty(g, b, S) && this._updateLayer(w),
                    (this._changed = !0),
                    (this._updatedPaintProps[d] = !0))
                  : this.fire(
                      new a.ErrorEvent(
                        new Error(
                          "The layer '" +
                            d +
                            "' does not exist in the map's style and cannot be styled."
                        )
                      )
                    );
              }),
              (p.prototype.getPaintProperty = function (d, g) {
                return this.getLayer(d).getPaintProperty(g);
              }),
              (p.prototype.setFeatureState = function (d, g) {
                this._checkLoaded();
                var b = d.source,
                  S = d.sourceLayer,
                  w = this.sourceCaches[b];
                if (w !== void 0) {
                  var M = w.getSource().type;
                  M === "geojson" && S
                    ? this.fire(
                        new a.ErrorEvent(
                          new Error(
                            "GeoJSON sources cannot have a sourceLayer parameter."
                          )
                        )
                      )
                    : M !== "vector" || S
                    ? (d.id === void 0 &&
                        this.fire(
                          new a.ErrorEvent(
                            new Error(
                              "The feature id parameter must be provided."
                            )
                          )
                        ),
                      w.setFeatureState(S, d.id, g))
                    : this.fire(
                        new a.ErrorEvent(
                          new Error(
                            "The sourceLayer parameter must be provided for vector source types."
                          )
                        )
                      );
                } else
                  this.fire(
                    new a.ErrorEvent(
                      new Error(
                        "The source '" +
                          b +
                          "' does not exist in the map's style."
                      )
                    )
                  );
              }),
              (p.prototype.removeFeatureState = function (d, g) {
                this._checkLoaded();
                var b = d.source,
                  S = this.sourceCaches[b];
                if (S !== void 0) {
                  var w = S.getSource().type,
                    M = w === "vector" ? d.sourceLayer : void 0;
                  w !== "vector" || M
                    ? g && typeof d.id != "string" && typeof d.id != "number"
                      ? this.fire(
                          new a.ErrorEvent(
                            new Error(
                              "A feature id is required to remove its specific state property."
                            )
                          )
                        )
                      : S.removeFeatureState(M, d.id, g)
                    : this.fire(
                        new a.ErrorEvent(
                          new Error(
                            "The sourceLayer parameter must be provided for vector source types."
                          )
                        )
                      );
                } else
                  this.fire(
                    new a.ErrorEvent(
                      new Error(
                        "The source '" +
                          b +
                          "' does not exist in the map's style."
                      )
                    )
                  );
              }),
              (p.prototype.getFeatureState = function (d) {
                this._checkLoaded();
                var g = d.source,
                  b = d.sourceLayer,
                  S = this.sourceCaches[g];
                if (S !== void 0) {
                  if (S.getSource().type !== "vector" || b)
                    return (
                      d.id === void 0 &&
                        this.fire(
                          new a.ErrorEvent(
                            new Error(
                              "The feature id parameter must be provided."
                            )
                          )
                        ),
                      S.getFeatureState(b, d.id)
                    );
                  this.fire(
                    new a.ErrorEvent(
                      new Error(
                        "The sourceLayer parameter must be provided for vector source types."
                      )
                    )
                  );
                } else
                  this.fire(
                    new a.ErrorEvent(
                      new Error(
                        "The source '" +
                          g +
                          "' does not exist in the map's style."
                      )
                    )
                  );
              }),
              (p.prototype.getTransition = function () {
                return a.extend(
                  { duration: 300, delay: 0 },
                  this.stylesheet && this.stylesheet.transition
                );
              }),
              (p.prototype.serialize = function () {
                return a.filterObject(
                  {
                    version: this.stylesheet.version,
                    name: this.stylesheet.name,
                    metadata: this.stylesheet.metadata,
                    light: this.stylesheet.light,
                    center: this.stylesheet.center,
                    zoom: this.stylesheet.zoom,
                    bearing: this.stylesheet.bearing,
                    pitch: this.stylesheet.pitch,
                    sprite: this.stylesheet.sprite,
                    glyphs: this.stylesheet.glyphs,
                    transition: this.stylesheet.transition,
                    sources: a.mapObject(this.sourceCaches, function (d) {
                      return d.serialize();
                    }),
                    layers: this._serializeLayers(this._order),
                  },
                  function (d) {
                    return d !== void 0;
                  }
                );
              }),
              (p.prototype._updateLayer = function (d) {
                (this._updatedLayers[d.id] = !0),
                  d.source &&
                    !this._updatedSources[d.source] &&
                    this.sourceCaches[d.source].getSource().type !== "raster" &&
                    ((this._updatedSources[d.source] = "reload"),
                    this.sourceCaches[d.source].pause()),
                  (this._changed = !0);
              }),
              (p.prototype._flattenAndSortRenderedFeatures = function (d) {
                for (
                  var g = this,
                    b = function (jt) {
                      return g._layers[jt].type === "fill-extrusion";
                    },
                    S = {},
                    w = [],
                    M = this._order.length - 1;
                  M >= 0;
                  M--
                ) {
                  var B = this._order[M];
                  if (b(B)) {
                    S[B] = M;
                    for (var V = 0, J = d; V < J.length; V += 1) {
                      var ne = J[V][B];
                      if (ne)
                        for (var re = 0, _e = ne; re < _e.length; re += 1)
                          w.push(_e[re]);
                    }
                  }
                }
                w.sort(function (jt, Ft) {
                  return Ft.intersectionZ - jt.intersectionZ;
                });
                for (var pe = [], Ce = this._order.length - 1; Ce >= 0; Ce--) {
                  var de = this._order[Ce];
                  if (b(de))
                    for (var we = w.length - 1; we >= 0; we--) {
                      var De = w[we].feature;
                      if (S[De.layer.id] < Ce) break;
                      pe.push(De), w.pop();
                    }
                  else
                    for (var Ge = 0, st = d; Ge < st.length; Ge += 1) {
                      var Je = st[Ge][de];
                      if (Je)
                        for (var ht = 0, Et = Je; ht < Et.length; ht += 1)
                          pe.push(Et[ht].feature);
                    }
                }
                return pe;
              }),
              (p.prototype.queryRenderedFeatures = function (d, g, b) {
                g &&
                  g.filter &&
                  this._validate(
                    a.validateStyle.filter,
                    "queryRenderedFeatures.filter",
                    g.filter,
                    null,
                    g
                  );
                var S = {};
                if (g && g.layers) {
                  if (!Array.isArray(g.layers))
                    return (
                      this.fire(
                        new a.ErrorEvent(
                          new Error("parameters.layers must be an Array.")
                        )
                      ),
                      []
                    );
                  for (var w = 0, M = g.layers; w < M.length; w += 1) {
                    var B = M[w],
                      V = this._layers[B];
                    if (!V)
                      return (
                        this.fire(
                          new a.ErrorEvent(
                            new Error(
                              "The layer '" +
                                B +
                                "' does not exist in the map's style and cannot be queried for features."
                            )
                          )
                        ),
                        []
                      );
                    S[V.source] = !0;
                  }
                }
                var J = [];
                for (var ne in ((g.availableImages = this._availableImages),
                this.sourceCaches))
                  (g.layers && !S[ne]) ||
                    J.push(
                      Tr(
                        this.sourceCaches[ne],
                        this._layers,
                        this._serializedLayers,
                        d,
                        g,
                        b
                      )
                    );
                return (
                  this.placement &&
                    J.push(
                      (function (re, _e, pe, Ce, de, we, De) {
                        for (
                          var Ge = {},
                            st = we.queryRenderedSymbols(Ce),
                            Je = [],
                            ht = 0,
                            Et = Object.keys(st).map(Number);
                          ht < Et.length;
                          ht += 1
                        )
                          Je.push(De[Et[ht]]);
                        Je.sort(Fi);
                        for (
                          var jt = function () {
                              var Dn = sn[Ft],
                                Fr = Dn.featureIndex.lookupSymbolFeatures(
                                  st[Dn.bucketInstanceId],
                                  _e,
                                  Dn.bucketIndex,
                                  Dn.sourceLayerIndex,
                                  de.filter,
                                  de.layers,
                                  de.availableImages,
                                  re
                                );
                              for (var pn in Fr) {
                                var $n = (Ge[pn] = Ge[pn] || []),
                                  dr = Fr[pn];
                                dr.sort(function (cr, Gn) {
                                  var Hn = Dn.featureSortOrder;
                                  if (Hn) {
                                    var na = Hn.indexOf(cr.featureIndex);
                                    return Hn.indexOf(Gn.featureIndex) - na;
                                  }
                                  return Gn.featureIndex - cr.featureIndex;
                                });
                                for (
                                  var Yn = 0, Xn = dr;
                                  Yn < Xn.length;
                                  Yn += 1
                                )
                                  $n.push(Xn[Yn]);
                              }
                            },
                            Ft = 0,
                            sn = Je;
                          Ft < sn.length;
                          Ft += 1
                        )
                          jt();
                        var In = function (Dn) {
                          Ge[Dn].forEach(function (Fr) {
                            var pn = Fr.feature,
                              $n = pe[re[Dn].source].getFeatureState(
                                pn.layer["source-layer"],
                                pn.id
                              );
                            (pn.source = pn.layer.source),
                              pn.layer["source-layer"] &&
                                (pn.sourceLayer = pn.layer["source-layer"]),
                              (pn.state = $n);
                          });
                        };
                        for (var Bn in Ge) In(Bn);
                        return Ge;
                      })(
                        this._layers,
                        this._serializedLayers,
                        this.sourceCaches,
                        d,
                        g,
                        this.placement.collisionIndex,
                        this.placement.retainedQueryData
                      )
                    ),
                  this._flattenAndSortRenderedFeatures(J)
                );
              }),
              (p.prototype.querySourceFeatures = function (d, g) {
                g &&
                  g.filter &&
                  this._validate(
                    a.validateStyle.filter,
                    "querySourceFeatures.filter",
                    g.filter,
                    null,
                    g
                  );
                var b = this.sourceCaches[d];
                return b
                  ? (function (S, w) {
                      for (
                        var M = S.getRenderableIds().map(function (_e) {
                            return S.getTileByID(_e);
                          }),
                          B = [],
                          V = {},
                          J = 0;
                        J < M.length;
                        J++
                      ) {
                        var ne = M[J],
                          re = ne.tileID.canonical.key;
                        V[re] || ((V[re] = !0), ne.querySourceFeatures(B, w));
                      }
                      return B;
                    })(b, g)
                  : [];
              }),
              (p.prototype.addSourceType = function (d, g, b) {
                return p.getSourceType(d)
                  ? b(
                      new Error(
                        'A source type called "' + d + '" already exists.'
                      )
                    )
                  : (p.setSourceType(d, g),
                    g.workerSourceURL
                      ? void this.dispatcher.broadcast(
                          "loadWorkerSource",
                          { name: d, url: g.workerSourceURL },
                          b
                        )
                      : b(null, null));
              }),
              (p.prototype.getLight = function () {
                return this.light.getLight();
              }),
              (p.prototype.setLight = function (d, g) {
                g === void 0 && (g = {}), this._checkLoaded();
                var b = this.light.getLight(),
                  S = !1;
                for (var w in d)
                  if (!a.deepEqual(d[w], b[w])) {
                    S = !0;
                    break;
                  }
                if (S) {
                  var M = {
                    now: a.browser.now(),
                    transition: a.extend(
                      { duration: 300, delay: 0 },
                      this.stylesheet.transition
                    ),
                  };
                  this.light.setLight(d, g), this.light.updateTransitions(M);
                }
              }),
              (p.prototype._validate = function (d, g, b, S, w) {
                return (
                  w === void 0 && (w = {}),
                  (!w || w.validate !== !1) &&
                    Ds(
                      this,
                      d.call(
                        a.validateStyle,
                        a.extend(
                          {
                            key: g,
                            style: this.serialize(),
                            value: b,
                            styleSpec: a.styleSpec,
                          },
                          S
                        )
                      )
                    )
                );
              }),
              (p.prototype._remove = function () {
                for (var d in (this._request &&
                  (this._request.cancel(), (this._request = null)),
                this._spriteRequest &&
                  (this._spriteRequest.cancel(), (this._spriteRequest = null)),
                a.evented.off("pluginStateChange", this._rtlTextPluginCallback),
                this._layers))
                  this._layers[d].setEventedParent(null);
                for (var g in this.sourceCaches)
                  this.sourceCaches[g].clearTiles(),
                    this.sourceCaches[g].setEventedParent(null);
                this.imageManager.setEventedParent(null),
                  this.setEventedParent(null),
                  this.dispatcher.remove();
              }),
              (p.prototype._clearSource = function (d) {
                this.sourceCaches[d].clearTiles();
              }),
              (p.prototype._reloadSource = function (d) {
                this.sourceCaches[d].resume(), this.sourceCaches[d].reload();
              }),
              (p.prototype._updateSources = function (d) {
                for (var g in this.sourceCaches) this.sourceCaches[g].update(d);
              }),
              (p.prototype._generateCollisionBoxes = function () {
                for (var d in this.sourceCaches) this._reloadSource(d);
              }),
              (p.prototype._updatePlacement = function (d, g, b, S, w) {
                w === void 0 && (w = !1);
                for (
                  var M = !1, B = !1, V = {}, J = 0, ne = this._order;
                  J < ne.length;
                  J += 1
                ) {
                  var re = this._layers[ne[J]];
                  if (re.type === "symbol") {
                    if (!V[re.source]) {
                      var _e = this.sourceCaches[re.source];
                      V[re.source] = _e
                        .getRenderableIds(!0)
                        .map(function (De) {
                          return _e.getTileByID(De);
                        })
                        .sort(function (De, Ge) {
                          return (
                            Ge.tileID.overscaledZ - De.tileID.overscaledZ ||
                            (De.tileID.isLessThan(Ge.tileID) ? -1 : 1)
                          );
                        });
                    }
                    var pe = this.crossTileSymbolIndex.addLayer(
                      re,
                      V[re.source],
                      d.center.lng
                    );
                    M = M || pe;
                  }
                }
                if (
                  (this.crossTileSymbolIndex.pruneUnusedLayers(this._order),
                  ((w = w || this._layerOrderChanged || b === 0) ||
                    !this.pauseablePlacement ||
                    (this.pauseablePlacement.isDone() &&
                      !this.placement.stillRecent(a.browser.now(), d.zoom))) &&
                    ((this.pauseablePlacement = new Tu(
                      d,
                      this._order,
                      w,
                      g,
                      b,
                      S,
                      this.placement
                    )),
                    (this._layerOrderChanged = !1)),
                  this.pauseablePlacement.isDone()
                    ? this.placement.setStale()
                    : (this.pauseablePlacement.continuePlacement(
                        this._order,
                        this._layers,
                        V
                      ),
                      this.pauseablePlacement.isDone() &&
                        ((this.placement = this.pauseablePlacement.commit(
                          a.browser.now()
                        )),
                        (B = !0)),
                      M && this.pauseablePlacement.placement.setStale()),
                  B || M)
                )
                  for (var Ce = 0, de = this._order; Ce < de.length; Ce += 1) {
                    var we = this._layers[de[Ce]];
                    we.type === "symbol" &&
                      this.placement.updateLayerOpacities(we, V[we.source]);
                  }
                return (
                  !this.pauseablePlacement.isDone() ||
                  this.placement.hasTransitions(a.browser.now())
                );
              }),
              (p.prototype._releaseSymbolFadeTiles = function () {
                for (var d in this.sourceCaches)
                  this.sourceCaches[d].releaseSymbolFadeTiles();
              }),
              (p.prototype.getImages = function (d, g, b) {
                this.imageManager.getImages(g.icons, b),
                  this._updateTilesForChangedImages();
                var S = this.sourceCaches[g.source];
                S && S.setDependencies(g.tileID.key, g.type, g.icons);
              }),
              (p.prototype.getGlyphs = function (d, g, b) {
                this.glyphManager.getGlyphs(g.stacks, b);
              }),
              (p.prototype.getResource = function (d, g, b) {
                return a.makeRequest(g, b);
              }),
              p
            );
          })(a.Evented);
        (Oo.getSourceType = function (u) {
          return ir[u];
        }),
          (Oo.setSourceType = function (u, p) {
            ir[u] = p;
          }),
          (Oo.registerForPluginStateChange = a.registerForPluginStateChange);
        var Ui = a.createLayout([
            { name: "a_pos", type: "Int16", components: 2 },
          ]),
          Ol = ii(
            `#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,
            `#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`
          ),
          hl = ii(
            `uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            "attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"
          ),
          ld = ii(
            `uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            "uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"
          ),
          fh = ii(
            `varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`
          ),
          cd = ii(
            "void main() {gl_FragColor=vec4(1.0);}",
            "attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"
          ),
          u0 = ii(
            `uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`
          ),
          d0 = ii(
            `uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,
            "uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"
          ),
          h0 = ii(
            "varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",
            "attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"
          ),
          mh = ii(
            "varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",
            "attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"
          ),
          gh = ii(
            "uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",
            "attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"
          ),
          jp = ii(
            `#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`
          ),
          wu = ii(
            `varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`
          ),
          Fs = ii(
            `uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`
          ),
          vh = ii(
            `uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`
          ),
          Xa = ii(
            `varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`
          ),
          vc = ii(
            `uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`
          ),
          Ll = ii(
            `#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            "uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"
          ),
          Xo = ii(
            `uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            "uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"
          ),
          Dl = ii(
            `uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`
          ),
          is = ii(
            `uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`
          ),
          pl = ii(
            `uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`
          ),
          Go = ii(
            `uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`
          ),
          fl = ii(
            `uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            "uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"
          ),
          Bl = ii(
            `uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`
          ),
          _h = ii(
            `#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`
          ),
          yh = ii(
            `#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`
          );
        function ii(u, p) {
          var d = /#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,
            g = p.match(/attribute ([\w]+) ([\w]+)/g),
            b = u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),
            S = p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),
            w = S ? S.concat(b) : b,
            M = {};
          return {
            fragmentSource: (u = u.replace(d, function (B, V, J, ne, re) {
              return (
                (M[re] = !0),
                V === "define"
                  ? `
#ifndef HAS_UNIFORM_u_` +
                    re +
                    `
varying ` +
                    J +
                    " " +
                    ne +
                    " " +
                    re +
                    `;
#else
uniform ` +
                    J +
                    " " +
                    ne +
                    " u_" +
                    re +
                    `;
#endif
`
                  : `
#ifdef HAS_UNIFORM_u_` +
                    re +
                    `
    ` +
                    J +
                    " " +
                    ne +
                    " " +
                    re +
                    " = u_" +
                    re +
                    `;
#endif
`
              );
            })),
            vertexSource: (p = p.replace(d, function (B, V, J, ne, re) {
              var _e = ne === "float" ? "vec2" : "vec4",
                pe = re.match(/color/) ? "color" : _e;
              return M[re]
                ? V === "define"
                  ? `
#ifndef HAS_UNIFORM_u_` +
                    re +
                    `
uniform lowp float u_` +
                    re +
                    `_t;
attribute ` +
                    J +
                    " " +
                    _e +
                    " a_" +
                    re +
                    `;
varying ` +
                    J +
                    " " +
                    ne +
                    " " +
                    re +
                    `;
#else
uniform ` +
                    J +
                    " " +
                    ne +
                    " u_" +
                    re +
                    `;
#endif
`
                  : pe === "vec4"
                  ? `
#ifndef HAS_UNIFORM_u_` +
                    re +
                    `
    ` +
                    re +
                    " = a_" +
                    re +
                    `;
#else
    ` +
                    J +
                    " " +
                    ne +
                    " " +
                    re +
                    " = u_" +
                    re +
                    `;
#endif
`
                  : `
#ifndef HAS_UNIFORM_u_` +
                    re +
                    `
    ` +
                    re +
                    " = unpack_mix_" +
                    pe +
                    "(a_" +
                    re +
                    ", u_" +
                    re +
                    `_t);
#else
    ` +
                    J +
                    " " +
                    ne +
                    " " +
                    re +
                    " = u_" +
                    re +
                    `;
#endif
`
                : V === "define"
                ? `
#ifndef HAS_UNIFORM_u_` +
                  re +
                  `
uniform lowp float u_` +
                  re +
                  `_t;
attribute ` +
                  J +
                  " " +
                  _e +
                  " a_" +
                  re +
                  `;
#else
uniform ` +
                  J +
                  " " +
                  ne +
                  " u_" +
                  re +
                  `;
#endif
`
                : pe === "vec4"
                ? `
#ifndef HAS_UNIFORM_u_` +
                  re +
                  `
    ` +
                  J +
                  " " +
                  ne +
                  " " +
                  re +
                  " = a_" +
                  re +
                  `;
#else
    ` +
                  J +
                  " " +
                  ne +
                  " " +
                  re +
                  " = u_" +
                  re +
                  `;
#endif
`
                : `
#ifndef HAS_UNIFORM_u_` +
                  re +
                  `
    ` +
                  J +
                  " " +
                  ne +
                  " " +
                  re +
                  " = unpack_mix_" +
                  pe +
                  "(a_" +
                  re +
                  ", u_" +
                  re +
                  `_t);
#else
    ` +
                  J +
                  " " +
                  ne +
                  " " +
                  re +
                  " = u_" +
                  re +
                  `;
#endif
`;
            })),
            staticAttributes: g,
            staticUniforms: w,
          };
        }
        var Wp = Object.freeze({
            __proto__: null,
            prelude: Ol,
            background: hl,
            backgroundPattern: ld,
            circle: fh,
            clippingMask: cd,
            heatmap: u0,
            heatmapTexture: d0,
            collisionBox: h0,
            collisionCircle: mh,
            debug: gh,
            fill: jp,
            fillOutline: wu,
            fillOutlinePattern: Fs,
            fillPattern: vh,
            fillExtrusion: Xa,
            fillExtrusionPattern: vc,
            hillshadePrepare: Ll,
            hillshade: Xo,
            line: Dl,
            lineGradient: is,
            linePattern: pl,
            lineSDF: Go,
            raster: fl,
            symbolIcon: Bl,
            symbolSDF: _h,
            symbolTextAndIcon: yh,
          }),
          ud = function () {
            (this.boundProgram = null),
              (this.boundLayoutVertexBuffer = null),
              (this.boundPaintVertexBuffers = []),
              (this.boundIndexBuffer = null),
              (this.boundVertexOffset = null),
              (this.boundDynamicVertexBuffer = null),
              (this.vao = null);
          };
        function p0(u) {
          for (var p = [], d = 0; d < u.length; d++)
            if (u[d] !== null) {
              var g = u[d].split(" ");
              p.push(g.pop());
            }
          return p;
        }
        (ud.prototype.bind = function (u, p, d, g, b, S, w, M) {
          this.context = u;
          for (
            var B = this.boundPaintVertexBuffers.length !== g.length, V = 0;
            !B && V < g.length;
            V++
          )
            this.boundPaintVertexBuffers[V] !== g[V] && (B = !0);
          u.extVertexArrayObject &&
          this.vao &&
          this.boundProgram === p &&
          this.boundLayoutVertexBuffer === d &&
          !B &&
          this.boundIndexBuffer === b &&
          this.boundVertexOffset === S &&
          this.boundDynamicVertexBuffer === w &&
          this.boundDynamicVertexBuffer2 === M
            ? (u.bindVertexArrayOES.set(this.vao),
              w && w.bind(),
              b && b.dynamicDraw && b.bind(),
              M && M.bind())
            : this.freshBind(p, d, g, b, S, w, M);
        }),
          (ud.prototype.freshBind = function (u, p, d, g, b, S, w) {
            var M,
              B = u.numAttributes,
              V = this.context,
              J = V.gl;
            if (V.extVertexArrayObject)
              this.vao && this.destroy(),
                (this.vao = V.extVertexArrayObject.createVertexArrayOES()),
                V.bindVertexArrayOES.set(this.vao),
                (M = 0),
                (this.boundProgram = u),
                (this.boundLayoutVertexBuffer = p),
                (this.boundPaintVertexBuffers = d),
                (this.boundIndexBuffer = g),
                (this.boundVertexOffset = b),
                (this.boundDynamicVertexBuffer = S),
                (this.boundDynamicVertexBuffer2 = w);
            else {
              M = V.currentNumAttributes || 0;
              for (var ne = B; ne < M; ne++) J.disableVertexAttribArray(ne);
            }
            p.enableAttributes(J, u);
            for (var re = 0, _e = d; re < _e.length; re += 1)
              _e[re].enableAttributes(J, u);
            S && S.enableAttributes(J, u),
              w && w.enableAttributes(J, u),
              p.bind(),
              p.setVertexAttribPointers(J, u, b);
            for (var pe = 0, Ce = d; pe < Ce.length; pe += 1) {
              var de = Ce[pe];
              de.bind(), de.setVertexAttribPointers(J, u, b);
            }
            S && (S.bind(), S.setVertexAttribPointers(J, u, b)),
              g && g.bind(),
              w && (w.bind(), w.setVertexAttribPointers(J, u, b)),
              (V.currentNumAttributes = B);
          }),
          (ud.prototype.destroy = function () {
            this.vao &&
              (this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),
              (this.vao = null));
          });
        var zi = function (u, p, d, g, b, S) {
          var w = u.gl;
          this.program = w.createProgram();
          for (
            var M = p0(d.staticAttributes),
              B = g ? g.getBinderAttributes() : [],
              V = M.concat(B),
              J = d.staticUniforms ? p0(d.staticUniforms) : [],
              ne = g ? g.getBinderUniforms() : [],
              re = [],
              _e = 0,
              pe = J.concat(ne);
            _e < pe.length;
            _e += 1
          ) {
            var Ce = pe[_e];
            re.indexOf(Ce) < 0 && re.push(Ce);
          }
          var de = g ? g.defines() : [];
          S && de.push("#define OVERDRAW_INSPECTOR;");
          var we = de.concat(Ol.fragmentSource, d.fragmentSource).join(`
`),
            De = de.concat(Ol.vertexSource, d.vertexSource).join(`
`),
            Ge = w.createShader(w.FRAGMENT_SHADER);
          if (w.isContextLost()) this.failedToCreate = !0;
          else {
            w.shaderSource(Ge, we),
              w.compileShader(Ge),
              w.attachShader(this.program, Ge);
            var st = w.createShader(w.VERTEX_SHADER);
            if (w.isContextLost()) this.failedToCreate = !0;
            else {
              w.shaderSource(st, De),
                w.compileShader(st),
                w.attachShader(this.program, st),
                (this.attributes = {});
              var Je = {};
              this.numAttributes = V.length;
              for (var ht = 0; ht < this.numAttributes; ht++)
                V[ht] &&
                  (w.bindAttribLocation(this.program, ht, V[ht]),
                  (this.attributes[V[ht]] = ht));
              w.linkProgram(this.program),
                w.deleteShader(st),
                w.deleteShader(Ge);
              for (var Et = 0; Et < re.length; Et++) {
                var jt = re[Et];
                if (jt && !Je[jt]) {
                  var Ft = w.getUniformLocation(this.program, jt);
                  Ft && (Je[jt] = Ft);
                }
              }
              (this.fixedUniforms = b(u, Je)),
                (this.binderUniforms = g ? g.getUniforms(u, Je) : []);
            }
          }
        };
        function f0(u, p, d) {
          var g = 1 / hi(d, 1, p.transform.tileZoom),
            b = Math.pow(2, d.tileID.overscaledZ),
            S = (d.tileSize * Math.pow(2, p.transform.tileZoom)) / b,
            w = S * (d.tileID.canonical.x + d.tileID.wrap * b),
            M = S * d.tileID.canonical.y;
          return {
            u_image: 0,
            u_texsize: d.imageAtlasTexture.size,
            u_scale: [g, u.fromScale, u.toScale],
            u_fade: u.t,
            u_pixel_coord_upper: [w >> 16, M >> 16],
            u_pixel_coord_lower: [65535 & w, 65535 & M],
          };
        }
        zi.prototype.draw = function (
          u,
          p,
          d,
          g,
          b,
          S,
          w,
          M,
          B,
          V,
          J,
          ne,
          re,
          _e,
          pe,
          Ce
        ) {
          var de,
            we = u.gl;
          if (!this.failedToCreate) {
            for (var De in (u.program.set(this.program),
            u.setDepthMode(d),
            u.setStencilMode(g),
            u.setColorMode(b),
            u.setCullFace(S),
            this.fixedUniforms))
              this.fixedUniforms[De].set(w[De]);
            _e && _e.setUniforms(u, this.binderUniforms, ne, { zoom: re });
            for (
              var Ge = ((de = {}),
                (de[we.LINES] = 2),
                (de[we.TRIANGLES] = 3),
                (de[we.LINE_STRIP] = 1),
                de)[p],
                st = 0,
                Je = J.get();
              st < Je.length;
              st += 1
            ) {
              var ht = Je[st],
                Et = ht.vaos || (ht.vaos = {});
              (Et[M] || (Et[M] = new ud())).bind(
                u,
                this,
                B,
                _e ? _e.getPaintVertexBuffers() : [],
                V,
                ht.vertexOffset,
                pe,
                Ce
              ),
                we.drawElements(
                  p,
                  ht.primitiveLength * Ge,
                  we.UNSIGNED_SHORT,
                  ht.primitiveOffset * Ge * 2
                );
            }
          }
        };
        var xh = function (u, p, d, g) {
            var b = p.style.light,
              S = b.properties.get("position"),
              w = [S.x, S.y, S.z],
              M = a.create$1();
            b.properties.get("anchor") === "viewport" &&
              a.fromRotation(M, -p.transform.angle),
              a.transformMat3(w, w, M);
            var B = b.properties.get("color");
            return {
              u_matrix: u,
              u_lightpos: w,
              u_lightintensity: b.properties.get("intensity"),
              u_lightcolor: [B.r, B.g, B.b],
              u_vertical_gradient: +d,
              u_opacity: g,
            };
          },
          xo = function (u, p, d, g, b, S, w) {
            return a.extend(xh(u, p, d, g), f0(S, p, w), {
              u_height_factor: -Math.pow(2, b.overscaledZ) / w.tileSize / 8,
            });
          },
          ml = function (u) {
            return { u_matrix: u };
          },
          ks = function (u, p, d, g) {
            return a.extend(ml(u), f0(d, p, g));
          },
          Fl = function (u, p) {
            return { u_matrix: u, u_world: p };
          },
          dd = function (u, p, d, g, b) {
            return a.extend(ks(u, p, d, g), { u_world: b });
          },
          Xc = function (u, p, d, g) {
            var b,
              S,
              w = u.transform;
            if (g.paint.get("circle-pitch-alignment") === "map") {
              var M = hi(d, 1, w.zoom);
              (b = !0), (S = [M, M]);
            } else (b = !1), (S = w.pixelsToGLUnits);
            return {
              u_camera_to_center_distance: w.cameraToCenterDistance,
              u_scale_with_map: +(g.paint.get("circle-pitch-scale") === "map"),
              u_matrix: u.translatePosMatrix(
                p.posMatrix,
                d,
                g.paint.get("circle-translate"),
                g.paint.get("circle-translate-anchor")
              ),
              u_pitch_with_map: +b,
              u_device_pixel_ratio: a.browser.devicePixelRatio,
              u_extrude_scale: S,
            };
          },
          bs = function (u, p, d) {
            var g = hi(d, 1, p.zoom),
              b = Math.pow(2, p.zoom - d.tileID.overscaledZ),
              S = d.tileID.overscaleFactor();
            return {
              u_matrix: u,
              u_camera_to_center_distance: p.cameraToCenterDistance,
              u_pixels_to_tile_units: g,
              u_extrude_scale: [
                p.pixelsToGLUnits[0] / (g * b),
                p.pixelsToGLUnits[1] / (g * b),
              ],
              u_overscale_factor: S,
            };
          },
          Cu = function (u, p, d) {
            return {
              u_matrix: u,
              u_inv_matrix: p,
              u_camera_to_center_distance: d.cameraToCenterDistance,
              u_viewport_size: [d.width, d.height],
            };
          },
          kl = function (u, p, d) {
            return (
              d === void 0 && (d = 1),
              { u_matrix: u, u_color: p, u_overlay: 0, u_overlay_scale: d }
            );
          },
          gl = function (u) {
            return { u_matrix: u };
          },
          m0 = function (u, p, d, g) {
            return {
              u_matrix: u,
              u_extrude_scale: hi(p, 1, d),
              u_intensity: g,
            };
          },
          Nu = function (u, p, d) {
            var g = u.transform;
            return {
              u_matrix: Ru(u, p, d),
              u_ratio: 1 / hi(p, 1, g.zoom),
              u_device_pixel_ratio: a.browser.devicePixelRatio,
              u_units_to_pixels: [
                1 / g.pixelsToGLUnits[0],
                1 / g.pixelsToGLUnits[1],
              ],
            };
          },
          mi = function (u, p, d, g) {
            return a.extend(Nu(u, p, d), { u_image: 0, u_image_height: g });
          },
          hd = function (u, p, d, g) {
            var b = u.transform,
              S = Ul(p, b);
            return {
              u_matrix: Ru(u, p, d),
              u_texsize: p.imageAtlasTexture.size,
              u_ratio: 1 / hi(p, 1, b.zoom),
              u_device_pixel_ratio: a.browser.devicePixelRatio,
              u_image: 0,
              u_scale: [S, g.fromScale, g.toScale],
              u_fade: g.t,
              u_units_to_pixels: [
                1 / b.pixelsToGLUnits[0],
                1 / b.pixelsToGLUnits[1],
              ],
            };
          },
          Xp = function (u, p, d, g, b) {
            var S = u.lineAtlas,
              w = Ul(p, u.transform),
              M = d.layout.get("line-cap") === "round",
              B = S.getDash(g.from, M),
              V = S.getDash(g.to, M),
              J = B.width * b.fromScale,
              ne = V.width * b.toScale;
            return a.extend(Nu(u, p, d), {
              u_patternscale_a: [w / J, -B.height / 2],
              u_patternscale_b: [w / ne, -V.height / 2],
              u_sdfgamma:
                S.width /
                (256 * Math.min(J, ne) * a.browser.devicePixelRatio) /
                2,
              u_image: 0,
              u_tex_y_a: B.y,
              u_tex_y_b: V.y,
              u_mix: b.t,
            });
          };
        function Ul(u, p) {
          return 1 / hi(u, 1, p.tileZoom);
        }
        function Ru(u, p, d) {
          return u.translatePosMatrix(
            p.tileID.posMatrix,
            p,
            d.paint.get("line-translate"),
            d.paint.get("line-translate-anchor")
          );
        }
        var g0 = function (u, p, d, g, b) {
          return {
            u_matrix: u,
            u_tl_parent: p,
            u_scale_parent: d,
            u_buffer_scale: 1,
            u_fade_t: g.mix,
            u_opacity: g.opacity * b.paint.get("raster-opacity"),
            u_image0: 0,
            u_image1: 1,
            u_brightness_low: b.paint.get("raster-brightness-min"),
            u_brightness_high: b.paint.get("raster-brightness-max"),
            u_saturation_factor:
              ((w = b.paint.get("raster-saturation")),
              w > 0 ? 1 - 1 / (1.001 - w) : -w),
            u_contrast_factor:
              ((S = b.paint.get("raster-contrast")),
              S > 0 ? 1 / (1 - S) : 1 + S),
            u_spin_weights: pd(b.paint.get("raster-hue-rotate")),
          };
          var S, w;
        };
        function pd(u) {
          u *= Math.PI / 180;
          var p = Math.sin(u),
            d = Math.cos(u);
          return [
            (2 * d + 1) / 3,
            (-Math.sqrt(3) * p - d + 1) / 3,
            (Math.sqrt(3) * p - d + 1) / 3,
          ];
        }
        var vl,
          zl = function (u, p, d, g, b, S, w, M, B, V) {
            var J = b.transform;
            return {
              u_is_size_zoom_constant: +(u === "constant" || u === "source"),
              u_is_size_feature_constant: +(u === "constant" || u === "camera"),
              u_size_t: p ? p.uSizeT : 0,
              u_size: p ? p.uSize : 0,
              u_camera_to_center_distance: J.cameraToCenterDistance,
              u_pitch: (J.pitch / 360) * 2 * Math.PI,
              u_rotate_symbol: +d,
              u_aspect_ratio: J.width / J.height,
              u_fade_change: b.options.fadeDuration ? b.symbolFadeChange : 1,
              u_matrix: S,
              u_label_plane_matrix: w,
              u_coord_matrix: M,
              u_is_text: +B,
              u_pitch_with_map: +g,
              u_texsize: V,
              u_texture: 0,
            };
          },
          _c = function (u, p, d, g, b, S, w, M, B, V, J) {
            var ne = b.transform;
            return a.extend(zl(u, p, d, g, b, S, w, M, B, V), {
              u_gamma_scale: g
                ? Math.cos(ne._pitch) * ne.cameraToCenterDistance
                : 1,
              u_device_pixel_ratio: a.browser.devicePixelRatio,
              u_is_halo: +J,
            });
          },
          Gc = function (u, p, d, g, b, S, w, M, B, V) {
            return a.extend(_c(u, p, d, g, b, S, w, M, !0, B, !0), {
              u_texsize_icon: V,
              u_texture_icon: 1,
            });
          },
          yc = function (u, p, d) {
            return { u_matrix: u, u_opacity: p, u_color: d };
          },
          xc = function (u, p, d, g, b, S) {
            return a.extend(
              (function (w, M, B, V) {
                var J = B.imageManager.getPattern(w.from.toString()),
                  ne = B.imageManager.getPattern(w.to.toString()),
                  re = B.imageManager.getPixelSize(),
                  _e = re.width,
                  pe = re.height,
                  Ce = Math.pow(2, V.tileID.overscaledZ),
                  de = (V.tileSize * Math.pow(2, B.transform.tileZoom)) / Ce,
                  we = de * (V.tileID.canonical.x + V.tileID.wrap * Ce),
                  De = de * V.tileID.canonical.y;
                return {
                  u_image: 0,
                  u_pattern_tl_a: J.tl,
                  u_pattern_br_a: J.br,
                  u_pattern_tl_b: ne.tl,
                  u_pattern_br_b: ne.br,
                  u_texsize: [_e, pe],
                  u_mix: M.t,
                  u_pattern_size_a: J.displaySize,
                  u_pattern_size_b: ne.displaySize,
                  u_scale_a: M.fromScale,
                  u_scale_b: M.toScale,
                  u_tile_units_to_pixels: 1 / hi(V, 1, B.transform.tileZoom),
                  u_pixel_coord_upper: [we >> 16, De >> 16],
                  u_pixel_coord_lower: [65535 & we, 65535 & De],
                };
              })(g, S, d, b),
              { u_matrix: u, u_opacity: p }
            );
          },
          v0 = {
            fillExtrusion: function (u, p) {
              return {
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_lightpos: new a.Uniform3f(u, p.u_lightpos),
                u_lightintensity: new a.Uniform1f(u, p.u_lightintensity),
                u_lightcolor: new a.Uniform3f(u, p.u_lightcolor),
                u_vertical_gradient: new a.Uniform1f(u, p.u_vertical_gradient),
                u_opacity: new a.Uniform1f(u, p.u_opacity),
              };
            },
            fillExtrusionPattern: function (u, p) {
              return {
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_lightpos: new a.Uniform3f(u, p.u_lightpos),
                u_lightintensity: new a.Uniform1f(u, p.u_lightintensity),
                u_lightcolor: new a.Uniform3f(u, p.u_lightcolor),
                u_vertical_gradient: new a.Uniform1f(u, p.u_vertical_gradient),
                u_height_factor: new a.Uniform1f(u, p.u_height_factor),
                u_image: new a.Uniform1i(u, p.u_image),
                u_texsize: new a.Uniform2f(u, p.u_texsize),
                u_pixel_coord_upper: new a.Uniform2f(u, p.u_pixel_coord_upper),
                u_pixel_coord_lower: new a.Uniform2f(u, p.u_pixel_coord_lower),
                u_scale: new a.Uniform3f(u, p.u_scale),
                u_fade: new a.Uniform1f(u, p.u_fade),
                u_opacity: new a.Uniform1f(u, p.u_opacity),
              };
            },
            fill: function (u, p) {
              return { u_matrix: new a.UniformMatrix4f(u, p.u_matrix) };
            },
            fillPattern: function (u, p) {
              return {
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_image: new a.Uniform1i(u, p.u_image),
                u_texsize: new a.Uniform2f(u, p.u_texsize),
                u_pixel_coord_upper: new a.Uniform2f(u, p.u_pixel_coord_upper),
                u_pixel_coord_lower: new a.Uniform2f(u, p.u_pixel_coord_lower),
                u_scale: new a.Uniform3f(u, p.u_scale),
                u_fade: new a.Uniform1f(u, p.u_fade),
              };
            },
            fillOutline: function (u, p) {
              return {
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_world: new a.Uniform2f(u, p.u_world),
              };
            },
            fillOutlinePattern: function (u, p) {
              return {
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_world: new a.Uniform2f(u, p.u_world),
                u_image: new a.Uniform1i(u, p.u_image),
                u_texsize: new a.Uniform2f(u, p.u_texsize),
                u_pixel_coord_upper: new a.Uniform2f(u, p.u_pixel_coord_upper),
                u_pixel_coord_lower: new a.Uniform2f(u, p.u_pixel_coord_lower),
                u_scale: new a.Uniform3f(u, p.u_scale),
                u_fade: new a.Uniform1f(u, p.u_fade),
              };
            },
            circle: function (u, p) {
              return {
                u_camera_to_center_distance: new a.Uniform1f(
                  u,
                  p.u_camera_to_center_distance
                ),
                u_scale_with_map: new a.Uniform1i(u, p.u_scale_with_map),
                u_pitch_with_map: new a.Uniform1i(u, p.u_pitch_with_map),
                u_extrude_scale: new a.Uniform2f(u, p.u_extrude_scale),
                u_device_pixel_ratio: new a.Uniform1f(
                  u,
                  p.u_device_pixel_ratio
                ),
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
              };
            },
            collisionBox: function (u, p) {
              return {
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_camera_to_center_distance: new a.Uniform1f(
                  u,
                  p.u_camera_to_center_distance
                ),
                u_pixels_to_tile_units: new a.Uniform1f(
                  u,
                  p.u_pixels_to_tile_units
                ),
                u_extrude_scale: new a.Uniform2f(u, p.u_extrude_scale),
                u_overscale_factor: new a.Uniform1f(u, p.u_overscale_factor),
              };
            },
            collisionCircle: function (u, p) {
              return {
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_inv_matrix: new a.UniformMatrix4f(u, p.u_inv_matrix),
                u_camera_to_center_distance: new a.Uniform1f(
                  u,
                  p.u_camera_to_center_distance
                ),
                u_viewport_size: new a.Uniform2f(u, p.u_viewport_size),
              };
            },
            debug: function (u, p) {
              return {
                u_color: new a.UniformColor(u, p.u_color),
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_overlay: new a.Uniform1i(u, p.u_overlay),
                u_overlay_scale: new a.Uniform1f(u, p.u_overlay_scale),
              };
            },
            clippingMask: function (u, p) {
              return { u_matrix: new a.UniformMatrix4f(u, p.u_matrix) };
            },
            heatmap: function (u, p) {
              return {
                u_extrude_scale: new a.Uniform1f(u, p.u_extrude_scale),
                u_intensity: new a.Uniform1f(u, p.u_intensity),
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
              };
            },
            heatmapTexture: function (u, p) {
              return {
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_world: new a.Uniform2f(u, p.u_world),
                u_image: new a.Uniform1i(u, p.u_image),
                u_color_ramp: new a.Uniform1i(u, p.u_color_ramp),
                u_opacity: new a.Uniform1f(u, p.u_opacity),
              };
            },
            hillshade: function (u, p) {
              return {
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_image: new a.Uniform1i(u, p.u_image),
                u_latrange: new a.Uniform2f(u, p.u_latrange),
                u_light: new a.Uniform2f(u, p.u_light),
                u_shadow: new a.UniformColor(u, p.u_shadow),
                u_highlight: new a.UniformColor(u, p.u_highlight),
                u_accent: new a.UniformColor(u, p.u_accent),
              };
            },
            hillshadePrepare: function (u, p) {
              return {
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_image: new a.Uniform1i(u, p.u_image),
                u_dimension: new a.Uniform2f(u, p.u_dimension),
                u_zoom: new a.Uniform1f(u, p.u_zoom),
                u_unpack: new a.Uniform4f(u, p.u_unpack),
              };
            },
            line: function (u, p) {
              return {
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_ratio: new a.Uniform1f(u, p.u_ratio),
                u_device_pixel_ratio: new a.Uniform1f(
                  u,
                  p.u_device_pixel_ratio
                ),
                u_units_to_pixels: new a.Uniform2f(u, p.u_units_to_pixels),
              };
            },
            lineGradient: function (u, p) {
              return {
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_ratio: new a.Uniform1f(u, p.u_ratio),
                u_device_pixel_ratio: new a.Uniform1f(
                  u,
                  p.u_device_pixel_ratio
                ),
                u_units_to_pixels: new a.Uniform2f(u, p.u_units_to_pixels),
                u_image: new a.Uniform1i(u, p.u_image),
                u_image_height: new a.Uniform1f(u, p.u_image_height),
              };
            },
            linePattern: function (u, p) {
              return {
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_texsize: new a.Uniform2f(u, p.u_texsize),
                u_ratio: new a.Uniform1f(u, p.u_ratio),
                u_device_pixel_ratio: new a.Uniform1f(
                  u,
                  p.u_device_pixel_ratio
                ),
                u_image: new a.Uniform1i(u, p.u_image),
                u_units_to_pixels: new a.Uniform2f(u, p.u_units_to_pixels),
                u_scale: new a.Uniform3f(u, p.u_scale),
                u_fade: new a.Uniform1f(u, p.u_fade),
              };
            },
            lineSDF: function (u, p) {
              return {
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_ratio: new a.Uniform1f(u, p.u_ratio),
                u_device_pixel_ratio: new a.Uniform1f(
                  u,
                  p.u_device_pixel_ratio
                ),
                u_units_to_pixels: new a.Uniform2f(u, p.u_units_to_pixels),
                u_patternscale_a: new a.Uniform2f(u, p.u_patternscale_a),
                u_patternscale_b: new a.Uniform2f(u, p.u_patternscale_b),
                u_sdfgamma: new a.Uniform1f(u, p.u_sdfgamma),
                u_image: new a.Uniform1i(u, p.u_image),
                u_tex_y_a: new a.Uniform1f(u, p.u_tex_y_a),
                u_tex_y_b: new a.Uniform1f(u, p.u_tex_y_b),
                u_mix: new a.Uniform1f(u, p.u_mix),
              };
            },
            raster: function (u, p) {
              return {
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_tl_parent: new a.Uniform2f(u, p.u_tl_parent),
                u_scale_parent: new a.Uniform1f(u, p.u_scale_parent),
                u_buffer_scale: new a.Uniform1f(u, p.u_buffer_scale),
                u_fade_t: new a.Uniform1f(u, p.u_fade_t),
                u_opacity: new a.Uniform1f(u, p.u_opacity),
                u_image0: new a.Uniform1i(u, p.u_image0),
                u_image1: new a.Uniform1i(u, p.u_image1),
                u_brightness_low: new a.Uniform1f(u, p.u_brightness_low),
                u_brightness_high: new a.Uniform1f(u, p.u_brightness_high),
                u_saturation_factor: new a.Uniform1f(u, p.u_saturation_factor),
                u_contrast_factor: new a.Uniform1f(u, p.u_contrast_factor),
                u_spin_weights: new a.Uniform3f(u, p.u_spin_weights),
              };
            },
            symbolIcon: function (u, p) {
              return {
                u_is_size_zoom_constant: new a.Uniform1i(
                  u,
                  p.u_is_size_zoom_constant
                ),
                u_is_size_feature_constant: new a.Uniform1i(
                  u,
                  p.u_is_size_feature_constant
                ),
                u_size_t: new a.Uniform1f(u, p.u_size_t),
                u_size: new a.Uniform1f(u, p.u_size),
                u_camera_to_center_distance: new a.Uniform1f(
                  u,
                  p.u_camera_to_center_distance
                ),
                u_pitch: new a.Uniform1f(u, p.u_pitch),
                u_rotate_symbol: new a.Uniform1i(u, p.u_rotate_symbol),
                u_aspect_ratio: new a.Uniform1f(u, p.u_aspect_ratio),
                u_fade_change: new a.Uniform1f(u, p.u_fade_change),
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_label_plane_matrix: new a.UniformMatrix4f(
                  u,
                  p.u_label_plane_matrix
                ),
                u_coord_matrix: new a.UniformMatrix4f(u, p.u_coord_matrix),
                u_is_text: new a.Uniform1i(u, p.u_is_text),
                u_pitch_with_map: new a.Uniform1i(u, p.u_pitch_with_map),
                u_texsize: new a.Uniform2f(u, p.u_texsize),
                u_texture: new a.Uniform1i(u, p.u_texture),
              };
            },
            symbolSDF: function (u, p) {
              return {
                u_is_size_zoom_constant: new a.Uniform1i(
                  u,
                  p.u_is_size_zoom_constant
                ),
                u_is_size_feature_constant: new a.Uniform1i(
                  u,
                  p.u_is_size_feature_constant
                ),
                u_size_t: new a.Uniform1f(u, p.u_size_t),
                u_size: new a.Uniform1f(u, p.u_size),
                u_camera_to_center_distance: new a.Uniform1f(
                  u,
                  p.u_camera_to_center_distance
                ),
                u_pitch: new a.Uniform1f(u, p.u_pitch),
                u_rotate_symbol: new a.Uniform1i(u, p.u_rotate_symbol),
                u_aspect_ratio: new a.Uniform1f(u, p.u_aspect_ratio),
                u_fade_change: new a.Uniform1f(u, p.u_fade_change),
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_label_plane_matrix: new a.UniformMatrix4f(
                  u,
                  p.u_label_plane_matrix
                ),
                u_coord_matrix: new a.UniformMatrix4f(u, p.u_coord_matrix),
                u_is_text: new a.Uniform1i(u, p.u_is_text),
                u_pitch_with_map: new a.Uniform1i(u, p.u_pitch_with_map),
                u_texsize: new a.Uniform2f(u, p.u_texsize),
                u_texture: new a.Uniform1i(u, p.u_texture),
                u_gamma_scale: new a.Uniform1f(u, p.u_gamma_scale),
                u_device_pixel_ratio: new a.Uniform1f(
                  u,
                  p.u_device_pixel_ratio
                ),
                u_is_halo: new a.Uniform1i(u, p.u_is_halo),
              };
            },
            symbolTextAndIcon: function (u, p) {
              return {
                u_is_size_zoom_constant: new a.Uniform1i(
                  u,
                  p.u_is_size_zoom_constant
                ),
                u_is_size_feature_constant: new a.Uniform1i(
                  u,
                  p.u_is_size_feature_constant
                ),
                u_size_t: new a.Uniform1f(u, p.u_size_t),
                u_size: new a.Uniform1f(u, p.u_size),
                u_camera_to_center_distance: new a.Uniform1f(
                  u,
                  p.u_camera_to_center_distance
                ),
                u_pitch: new a.Uniform1f(u, p.u_pitch),
                u_rotate_symbol: new a.Uniform1i(u, p.u_rotate_symbol),
                u_aspect_ratio: new a.Uniform1f(u, p.u_aspect_ratio),
                u_fade_change: new a.Uniform1f(u, p.u_fade_change),
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_label_plane_matrix: new a.UniformMatrix4f(
                  u,
                  p.u_label_plane_matrix
                ),
                u_coord_matrix: new a.UniformMatrix4f(u, p.u_coord_matrix),
                u_is_text: new a.Uniform1i(u, p.u_is_text),
                u_pitch_with_map: new a.Uniform1i(u, p.u_pitch_with_map),
                u_texsize: new a.Uniform2f(u, p.u_texsize),
                u_texsize_icon: new a.Uniform2f(u, p.u_texsize_icon),
                u_texture: new a.Uniform1i(u, p.u_texture),
                u_texture_icon: new a.Uniform1i(u, p.u_texture_icon),
                u_gamma_scale: new a.Uniform1f(u, p.u_gamma_scale),
                u_device_pixel_ratio: new a.Uniform1f(
                  u,
                  p.u_device_pixel_ratio
                ),
                u_is_halo: new a.Uniform1i(u, p.u_is_halo),
              };
            },
            background: function (u, p) {
              return {
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_opacity: new a.Uniform1f(u, p.u_opacity),
                u_color: new a.UniformColor(u, p.u_color),
              };
            },
            backgroundPattern: function (u, p) {
              return {
                u_matrix: new a.UniformMatrix4f(u, p.u_matrix),
                u_opacity: new a.Uniform1f(u, p.u_opacity),
                u_image: new a.Uniform1i(u, p.u_image),
                u_pattern_tl_a: new a.Uniform2f(u, p.u_pattern_tl_a),
                u_pattern_br_a: new a.Uniform2f(u, p.u_pattern_br_a),
                u_pattern_tl_b: new a.Uniform2f(u, p.u_pattern_tl_b),
                u_pattern_br_b: new a.Uniform2f(u, p.u_pattern_br_b),
                u_texsize: new a.Uniform2f(u, p.u_texsize),
                u_mix: new a.Uniform1f(u, p.u_mix),
                u_pattern_size_a: new a.Uniform2f(u, p.u_pattern_size_a),
                u_pattern_size_b: new a.Uniform2f(u, p.u_pattern_size_b),
                u_scale_a: new a.Uniform1f(u, p.u_scale_a),
                u_scale_b: new a.Uniform1f(u, p.u_scale_b),
                u_pixel_coord_upper: new a.Uniform2f(u, p.u_pixel_coord_upper),
                u_pixel_coord_lower: new a.Uniform2f(u, p.u_pixel_coord_lower),
                u_tile_units_to_pixels: new a.Uniform1f(
                  u,
                  p.u_tile_units_to_pixels
                ),
              };
            },
          };
        function bc(u, p, d, g, b, S, w) {
          for (
            var M = u.context,
              B = M.gl,
              V = u.useProgram("collisionBox"),
              J = [],
              ne = 0,
              re = 0,
              _e = 0;
            _e < g.length;
            _e++
          ) {
            var pe = g[_e],
              Ce = p.getTile(pe),
              de = Ce.getBucket(d);
            if (de) {
              var we = pe.posMatrix;
              (b[0] === 0 && b[1] === 0) ||
                (we = u.translatePosMatrix(pe.posMatrix, Ce, b, S));
              var De = w ? de.textCollisionBox : de.iconCollisionBox,
                Ge = de.collisionCircleArray;
              if (Ge.length > 0) {
                var st = a.create(),
                  Je = we;
                a.mul(st, de.placementInvProjMatrix, u.transform.glCoordMatrix),
                  a.mul(st, st, de.placementViewportMatrix),
                  J.push({
                    circleArray: Ge,
                    circleOffset: re,
                    transform: Je,
                    invTransform: st,
                  }),
                  (re = ne += Ge.length / 4);
              }
              De &&
                V.draw(
                  M,
                  B.LINES,
                  ae.disabled,
                  fe.disabled,
                  u.colorModeForRenderPass(),
                  Fe.disabled,
                  bs(we, u.transform, Ce),
                  d.id,
                  De.layoutVertexBuffer,
                  De.indexBuffer,
                  De.segments,
                  null,
                  u.transform.zoom,
                  null,
                  null,
                  De.collisionVertexBuffer
                );
            }
          }
          if (w && J.length) {
            var ht = u.useProgram("collisionCircle"),
              Et = new a.StructArrayLayout2f1f2i16();
            Et.resize(4 * ne), Et._trim();
            for (var jt = 0, Ft = 0, sn = J; Ft < sn.length; Ft += 1)
              for (
                var In = sn[Ft], Bn = 0;
                Bn < In.circleArray.length / 4;
                Bn++
              ) {
                var Dn = 4 * Bn,
                  Fr = In.circleArray[Dn + 0],
                  pn = In.circleArray[Dn + 1],
                  $n = In.circleArray[Dn + 2],
                  dr = In.circleArray[Dn + 3];
                Et.emplace(jt++, Fr, pn, $n, dr, 0),
                  Et.emplace(jt++, Fr, pn, $n, dr, 1),
                  Et.emplace(jt++, Fr, pn, $n, dr, 2),
                  Et.emplace(jt++, Fr, pn, $n, dr, 3);
              }
            (!vl || vl.length < 2 * ne) &&
              (vl = (function (Mi) {
                var Ba = 2 * Mi,
                  ba = new a.StructArrayLayout3ui6();
                ba.resize(Ba), ba._trim();
                for (var Ri = 0; Ri < Ba; Ri++) {
                  var Pi = 6 * Ri;
                  (ba.uint16[Pi + 0] = 4 * Ri + 0),
                    (ba.uint16[Pi + 1] = 4 * Ri + 1),
                    (ba.uint16[Pi + 2] = 4 * Ri + 2),
                    (ba.uint16[Pi + 3] = 4 * Ri + 2),
                    (ba.uint16[Pi + 4] = 4 * Ri + 3),
                    (ba.uint16[Pi + 5] = 4 * Ri + 0);
                }
                return ba;
              })(ne));
            for (
              var Yn = M.createIndexBuffer(vl, !0),
                Xn = M.createVertexBuffer(
                  Et,
                  a.collisionCircleLayout.members,
                  !0
                ),
                cr = 0,
                Gn = J;
              cr < Gn.length;
              cr += 1
            ) {
              var Hn = Gn[cr],
                na = Cu(Hn.transform, Hn.invTransform, u.transform);
              ht.draw(
                M,
                B.TRIANGLES,
                ae.disabled,
                fe.disabled,
                u.colorModeForRenderPass(),
                Fe.disabled,
                na,
                d.id,
                Xn,
                Yn,
                a.SegmentVector.simpleSegment(
                  0,
                  2 * Hn.circleOffset,
                  Hn.circleArray.length,
                  Hn.circleArray.length / 2
                ),
                null,
                u.transform.zoom,
                null,
                null,
                null
              );
            }
            Xn.destroy(), Yn.destroy();
          }
        }
        var as = a.identity(new Float32Array(16));
        function _0(u, p, d, g, b, S) {
          var w = a.getAnchorAlignment(u),
            M = -(w.horizontalAlign - 0.5) * p,
            B = -(w.verticalAlign - 0.5) * d,
            V = a.evaluateVariableOffset(u, g);
          return new a.Point((M / b + V[0]) * S, (B / b + V[1]) * S);
        }
        function y0(u, p, d, g, b, S, w, M, B, V, J) {
          var ne = u.text.placedSymbolArray,
            re = u.text.dynamicLayoutVertexArray,
            _e = u.icon.dynamicLayoutVertexArray,
            pe = {};
          re.clear();
          for (var Ce = 0; Ce < ne.length; Ce++) {
            var de = ne.get(Ce),
              we =
                de.hidden ||
                !de.crossTileID ||
                (u.allowVerticalPlacement && !de.placedOrientation)
                  ? null
                  : g[de.crossTileID];
            if (we) {
              var De = new a.Point(de.anchorX, de.anchorY),
                Ge = lr(De, d ? M : w),
                st = br(S.cameraToCenterDistance, Ge.signedDistanceFromCamera),
                Je =
                  (b.evaluateSizeForFeature(u.textSizeData, V, de) * st) /
                  a.ONE_EM;
              d && (Je *= u.tilePixelRatio / B);
              for (
                var ht = _0(
                    we.anchor,
                    we.width,
                    we.height,
                    we.textOffset,
                    we.textBoxScale,
                    Je
                  ),
                  Et = d
                    ? lr(De.add(ht), w).point
                    : Ge.point.add(p ? ht.rotate(-S.angle) : ht),
                  jt =
                    u.allowVerticalPlacement &&
                    de.placedOrientation === a.WritingMode.vertical
                      ? Math.PI / 2
                      : 0,
                  Ft = 0;
                Ft < de.numGlyphs;
                Ft++
              )
                a.addDynamicAttributes(re, Et, jt);
              J &&
                de.associatedIconIndex >= 0 &&
                (pe[de.associatedIconIndex] = { shiftedAnchor: Et, angle: jt });
            } else va(de.numGlyphs, re);
          }
          if (J) {
            _e.clear();
            for (
              var sn = u.icon.placedSymbolArray, In = 0;
              In < sn.length;
              In++
            ) {
              var Bn = sn.get(In);
              if (Bn.hidden) va(Bn.numGlyphs, _e);
              else {
                var Dn = pe[In];
                if (Dn)
                  for (var Fr = 0; Fr < Bn.numGlyphs; Fr++)
                    a.addDynamicAttributes(_e, Dn.shiftedAnchor, Dn.angle);
                else va(Bn.numGlyphs, _e);
              }
            }
            u.icon.dynamicLayoutVertexBuffer.updateData(_e);
          }
          u.text.dynamicLayoutVertexBuffer.updateData(re);
        }
        function x0(u, p, d) {
          return d.iconsInText && p
            ? "symbolTextAndIcon"
            : u
            ? "symbolSDF"
            : "symbolIcon";
        }
        function Vl(u, p, d, g, b, S, w, M, B, V, J, ne) {
          for (
            var re = u.context,
              _e = re.gl,
              pe = u.transform,
              Ce = M === "map",
              de = B === "map",
              we = Ce && d.layout.get("symbol-placement") !== "point",
              De = Ce && !de && !we,
              Ge = d.layout.get("symbol-sort-key").constantOr(1) !== void 0,
              st = !1,
              Je = u.depthModeForSublayer(0, ae.ReadOnly),
              ht = d.layout.get("text-variable-anchor"),
              Et = [],
              jt = 0,
              Ft = g;
            jt < Ft.length;
            jt += 1
          ) {
            var sn = Ft[jt],
              In = p.getTile(sn),
              Bn = In.getBucket(d);
            if (Bn) {
              var Dn = b ? Bn.text : Bn.icon;
              if (Dn && Dn.segments.get().length) {
                var Fr = Dn.programConfigurations.get(d.id),
                  pn = b || Bn.sdfIcons,
                  $n = b ? Bn.textSizeData : Bn.iconSizeData,
                  dr = de || pe.pitch !== 0,
                  Yn = u.useProgram(x0(pn, b, Bn), Fr),
                  Xn = a.evaluateSizeForZoom($n, pe.zoom),
                  cr = void 0,
                  Gn = [0, 0],
                  Hn = void 0,
                  na = void 0,
                  Mi = null,
                  Ba = void 0;
                if (b)
                  (Hn = In.glyphAtlasTexture),
                    (na = _e.LINEAR),
                    (cr = In.glyphAtlasTexture.size),
                    Bn.iconsInText &&
                      ((Gn = In.imageAtlasTexture.size),
                      (Mi = In.imageAtlasTexture),
                      (Ba =
                        dr ||
                        u.options.rotating ||
                        u.options.zooming ||
                        $n.kind === "composite" ||
                        $n.kind === "camera"
                          ? _e.LINEAR
                          : _e.NEAREST));
                else {
                  var ba =
                    d.layout.get("icon-size").constantOr(0) !== 1 ||
                    Bn.iconsNeedLinear;
                  (Hn = In.imageAtlasTexture),
                    (na =
                      pn || u.options.rotating || u.options.zooming || ba || dr
                        ? _e.LINEAR
                        : _e.NEAREST),
                    (cr = In.imageAtlasTexture.size);
                }
                var Ri = hi(In, 1, u.transform.zoom),
                  Pi = ni(sn.posMatrix, de, Ce, u.transform, Ri),
                  ho = zr(sn.posMatrix, de, Ce, u.transform, Ri),
                  to = ht && Bn.hasTextData(),
                  Ws =
                    d.layout.get("icon-text-fit") !== "none" &&
                    to &&
                    Bn.hasIconData();
                we && Rl(Bn, sn.posMatrix, u, b, Pi, ho, de, V);
                var po = u.translatePosMatrix(sn.posMatrix, In, S, w),
                  us = we || (b && ht) || Ws ? as : Pi,
                  ko = u.translatePosMatrix(ho, In, S, w, !0),
                  tu =
                    pn &&
                    d.paint
                      .get(b ? "text-halo-width" : "icon-halo-width")
                      .constantOr(1) !== 0,
                  wc = {
                    program: Yn,
                    buffers: Dn,
                    uniformValues: pn
                      ? Bn.iconsInText
                        ? Gc($n.kind, Xn, De, de, u, po, us, ko, cr, Gn)
                        : _c($n.kind, Xn, De, de, u, po, us, ko, b, cr, !0)
                      : zl($n.kind, Xn, De, de, u, po, us, ko, b, cr),
                    atlasTexture: Hn,
                    atlasTextureIcon: Mi,
                    atlasInterpolation: na,
                    atlasInterpolationIcon: Ba,
                    isSDF: pn,
                    hasHalo: tu,
                  };
                if (Ge && Bn.canOverlap) {
                  st = !0;
                  for (
                    var Xs = 0, ql = Dn.segments.get();
                    Xs < ql.length;
                    Xs += 1
                  ) {
                    var El = ql[Xs];
                    Et.push({
                      segments: new a.SegmentVector([El]),
                      sortKey: El.sortKey,
                      state: wc,
                    });
                  }
                } else
                  Et.push({ segments: Dn.segments, sortKey: 0, state: wc });
              }
            }
          }
          st &&
            Et.sort(function (ds, Ss) {
              return ds.sortKey - Ss.sortKey;
            });
          for (var Ts = 0, $l = Et; Ts < $l.length; Ts += 1) {
            var Ga = $l[Ts],
              Vi = Ga.state;
            if (
              (re.activeTexture.set(_e.TEXTURE0),
              Vi.atlasTexture.bind(Vi.atlasInterpolation, _e.CLAMP_TO_EDGE),
              Vi.atlasTextureIcon &&
                (re.activeTexture.set(_e.TEXTURE1),
                Vi.atlasTextureIcon &&
                  Vi.atlasTextureIcon.bind(
                    Vi.atlasInterpolationIcon,
                    _e.CLAMP_TO_EDGE
                  )),
              Vi.isSDF)
            ) {
              var Eo = Vi.uniformValues;
              Vi.hasHalo &&
                ((Eo.u_is_halo = 1),
                Us(Vi.buffers, Ga.segments, d, u, Vi.program, Je, J, ne, Eo)),
                (Eo.u_is_halo = 0);
            }
            Us(
              Vi.buffers,
              Ga.segments,
              d,
              u,
              Vi.program,
              Je,
              J,
              ne,
              Vi.uniformValues
            );
          }
        }
        function Us(u, p, d, g, b, S, w, M, B) {
          var V = g.context;
          b.draw(
            V,
            V.gl.TRIANGLES,
            S,
            w,
            M,
            Fe.disabled,
            B,
            d.id,
            u.layoutVertexBuffer,
            u.indexBuffer,
            p,
            d.paint,
            g.transform.zoom,
            u.programConfigurations.get(d.id),
            u.dynamicLayoutVertexBuffer,
            u.opacityVertexBuffer
          );
        }
        function Zc(u, p, d, g, b, S, w) {
          var M,
            B,
            V,
            J,
            ne,
            re = u.context.gl,
            _e = d.paint.get("fill-pattern"),
            pe = _e && _e.constantOr(1),
            Ce = d.getCrossfadeParameters();
          w
            ? ((B =
                pe && !d.getPaintProperty("fill-outline-color")
                  ? "fillOutlinePattern"
                  : "fillOutline"),
              (M = re.LINES))
            : ((B = pe ? "fillPattern" : "fill"), (M = re.TRIANGLES));
          for (var de = 0, we = g; de < we.length; de += 1) {
            var De = we[de],
              Ge = p.getTile(De);
            if (!pe || Ge.patternsLoaded()) {
              var st = Ge.getBucket(d);
              if (st) {
                var Je = st.programConfigurations.get(d.id),
                  ht = u.useProgram(B, Je);
                pe &&
                  (u.context.activeTexture.set(re.TEXTURE0),
                  Ge.imageAtlasTexture.bind(re.LINEAR, re.CLAMP_TO_EDGE),
                  Je.updatePaintBuffers(Ce));
                var Et = _e.constantOr(null);
                if (Et && Ge.imageAtlas) {
                  var jt = Ge.imageAtlas,
                    Ft = jt.patternPositions[Et.to.toString()],
                    sn = jt.patternPositions[Et.from.toString()];
                  Ft && sn && Je.setConstantPatternPositions(Ft, sn);
                }
                var In = u.translatePosMatrix(
                  De.posMatrix,
                  Ge,
                  d.paint.get("fill-translate"),
                  d.paint.get("fill-translate-anchor")
                );
                if (w) {
                  (J = st.indexBuffer2), (ne = st.segments2);
                  var Bn = [re.drawingBufferWidth, re.drawingBufferHeight];
                  V =
                    B === "fillOutlinePattern" && pe
                      ? dd(In, u, Ce, Ge, Bn)
                      : Fl(In, Bn);
                } else
                  (J = st.indexBuffer),
                    (ne = st.segments),
                    (V = pe ? ks(In, u, Ce, Ge) : ml(In));
                ht.draw(
                  u.context,
                  M,
                  b,
                  u.stencilModeForClipping(De),
                  S,
                  Fe.disabled,
                  V,
                  d.id,
                  st.layoutVertexBuffer,
                  J,
                  ne,
                  d.paint,
                  u.transform.zoom,
                  Je
                );
              }
            }
          }
        }
        function Iu(u, p, d, g, b, S, w) {
          for (
            var M = u.context,
              B = M.gl,
              V = d.paint.get("fill-extrusion-pattern"),
              J = V.constantOr(1),
              ne = d.getCrossfadeParameters(),
              re = d.paint.get("fill-extrusion-opacity"),
              _e = 0,
              pe = g;
            _e < pe.length;
            _e += 1
          ) {
            var Ce = pe[_e],
              de = p.getTile(Ce),
              we = de.getBucket(d);
            if (we) {
              var De = we.programConfigurations.get(d.id),
                Ge = u.useProgram(
                  J ? "fillExtrusionPattern" : "fillExtrusion",
                  De
                );
              J &&
                (u.context.activeTexture.set(B.TEXTURE0),
                de.imageAtlasTexture.bind(B.LINEAR, B.CLAMP_TO_EDGE),
                De.updatePaintBuffers(ne));
              var st = V.constantOr(null);
              if (st && de.imageAtlas) {
                var Je = de.imageAtlas,
                  ht = Je.patternPositions[st.to.toString()],
                  Et = Je.patternPositions[st.from.toString()];
                ht && Et && De.setConstantPatternPositions(ht, Et);
              }
              var jt = u.translatePosMatrix(
                  Ce.posMatrix,
                  de,
                  d.paint.get("fill-extrusion-translate"),
                  d.paint.get("fill-extrusion-translate-anchor")
                ),
                Ft = d.paint.get("fill-extrusion-vertical-gradient"),
                sn = J ? xo(jt, u, Ft, re, Ce, ne, de) : xh(jt, u, Ft, re);
              Ge.draw(
                M,
                M.gl.TRIANGLES,
                b,
                S,
                w,
                Fe.backCCW,
                sn,
                d.id,
                we.layoutVertexBuffer,
                we.indexBuffer,
                we.segments,
                d.paint,
                u.transform.zoom,
                De
              );
            }
          }
        }
        function Hl(u, p, d, g, b, S) {
          var w = u.context,
            M = w.gl,
            B = p.fbo;
          if (B) {
            var V = u.useProgram("hillshade");
            w.activeTexture.set(M.TEXTURE0),
              M.bindTexture(M.TEXTURE_2D, B.colorAttachment.get());
            var J = (function (ne, re, _e) {
              var pe = _e.paint.get("hillshade-shadow-color"),
                Ce = _e.paint.get("hillshade-highlight-color"),
                de = _e.paint.get("hillshade-accent-color"),
                we =
                  _e.paint.get("hillshade-illumination-direction") *
                  (Math.PI / 180);
              _e.paint.get("hillshade-illumination-anchor") === "viewport" &&
                (we -= ne.transform.angle);
              var De,
                Ge,
                st,
                Je = !ne.options.moving;
              return {
                u_matrix: ne.transform.calculatePosMatrix(
                  re.tileID.toUnwrapped(),
                  Je
                ),
                u_image: 0,
                u_latrange:
                  ((De = re.tileID),
                  (Ge = Math.pow(2, De.canonical.z)),
                  (st = De.canonical.y),
                  [
                    new a.MercatorCoordinate(0, st / Ge).toLngLat().lat,
                    new a.MercatorCoordinate(0, (st + 1) / Ge).toLngLat().lat,
                  ]),
                u_light: [_e.paint.get("hillshade-exaggeration"), we],
                u_shadow: pe,
                u_highlight: Ce,
                u_accent: de,
              };
            })(u, p, d);
            V.draw(
              w,
              M.TRIANGLES,
              g,
              b,
              S,
              Fe.disabled,
              J,
              d.id,
              u.rasterBoundsBuffer,
              u.quadTriangleIndexBuffer,
              u.rasterBoundsSegments
            );
          }
        }
        function Gp(u, p, d, g, b, S) {
          var w = u.context,
            M = w.gl,
            B = p.dem;
          if (B && B.data) {
            var V = B.dim,
              J = B.stride,
              ne = B.getPixels();
            if (
              (w.activeTexture.set(M.TEXTURE1),
              w.pixelStoreUnpackPremultiplyAlpha.set(!1),
              (p.demTexture = p.demTexture || u.getTileTexture(J)),
              p.demTexture)
            ) {
              var re = p.demTexture;
              re.update(ne, { premultiply: !1 }),
                re.bind(M.NEAREST, M.CLAMP_TO_EDGE);
            } else
              (p.demTexture = new a.Texture(w, ne, M.RGBA, {
                premultiply: !1,
              })),
                p.demTexture.bind(M.NEAREST, M.CLAMP_TO_EDGE);
            w.activeTexture.set(M.TEXTURE0);
            var _e = p.fbo;
            if (!_e) {
              var pe = new a.Texture(
                w,
                { width: V, height: V, data: null },
                M.RGBA
              );
              pe.bind(M.LINEAR, M.CLAMP_TO_EDGE),
                (_e = p.fbo =
                  w.createFramebuffer(V, V, !0)).colorAttachment.set(
                  pe.texture
                );
            }
            w.bindFramebuffer.set(_e.framebuffer),
              w.viewport.set([0, 0, V, V]),
              u.useProgram("hillshadePrepare").draw(
                w,
                M.TRIANGLES,
                g,
                b,
                S,
                Fe.disabled,
                (function (Ce, de) {
                  var we = de.stride,
                    De = a.create();
                  return (
                    a.ortho(De, 0, a.EXTENT, -a.EXTENT, 0, 0, 1),
                    a.translate(De, De, [0, -a.EXTENT, 0]),
                    {
                      u_matrix: De,
                      u_image: 1,
                      u_dimension: [we, we],
                      u_zoom: Ce.overscaledZ,
                      u_unpack: de.getUnpackVector(),
                    }
                  );
                })(p.tileID, B),
                d.id,
                u.rasterBoundsBuffer,
                u.quadTriangleIndexBuffer,
                u.rasterBoundsSegments
              ),
              (p.needsHillshadePrepare = !1);
          }
        }
        function fd(u, p, d, g, b) {
          var S = g.paint.get("raster-fade-duration");
          if (S > 0) {
            var w = a.browser.now(),
              M = (w - u.timeAdded) / S,
              B = p ? (w - p.timeAdded) / S : -1,
              V = d.getSource(),
              J = b.coveringZoomLevel({
                tileSize: V.tileSize,
                roundZoom: V.roundZoom,
              }),
              ne =
                !p ||
                Math.abs(p.tileID.overscaledZ - J) >
                  Math.abs(u.tileID.overscaledZ - J),
              re =
                ne && u.refreshedUponExpiration
                  ? 1
                  : a.clamp(ne ? M : 1 - B, 0, 1);
            return (
              u.refreshedUponExpiration &&
                M >= 1 &&
                (u.refreshedUponExpiration = !1),
              p ? { opacity: 1, mix: 1 - re } : { opacity: re, mix: 0 }
            );
          }
          return { opacity: 1, mix: 0 };
        }
        var b0 = new a.Color(1, 0, 0, 1),
          md = new a.Color(0, 1, 0, 1),
          bh = new a.Color(0, 0, 1, 1),
          gd = new a.Color(1, 0, 1, 1),
          E0 = new a.Color(0, 1, 1, 1);
        function Mu(u, p, d, g) {
          Ec(u, 0, p + d / 2, u.transform.width, d, g);
        }
        function A0(u, p, d, g) {
          Ec(u, p - d / 2, 0, d, u.transform.height, g);
        }
        function Ec(u, p, d, g, b, S) {
          var w = u.context,
            M = w.gl;
          M.enable(M.SCISSOR_TEST),
            M.scissor(
              p * a.browser.devicePixelRatio,
              d * a.browser.devicePixelRatio,
              g * a.browser.devicePixelRatio,
              b * a.browser.devicePixelRatio
            ),
            w.clear({ color: S }),
            M.disable(M.SCISSOR_TEST);
        }
        function T0(u, p, d) {
          var g = u.context,
            b = g.gl,
            S = d.posMatrix,
            w = u.useProgram("debug"),
            M = ae.disabled,
            B = fe.disabled,
            V = u.colorModeForRenderPass();
          g.activeTexture.set(b.TEXTURE0),
            u.emptyTexture.bind(b.LINEAR, b.CLAMP_TO_EDGE),
            w.draw(
              g,
              b.LINE_STRIP,
              M,
              B,
              V,
              Fe.disabled,
              kl(S, a.Color.red),
              "$debug",
              u.debugBuffer,
              u.tileBorderIndexBuffer,
              u.debugSegments
            );
          var J = p.getTileByID(d.key).latestRawTileData,
            ne = Math.floor(((J && J.byteLength) || 0) / 1024),
            re = p.getTile(d).tileSize,
            _e =
              (512 / Math.min(re, 512)) *
              (d.overscaledZ / u.transform.zoom) *
              0.5,
            pe = d.canonical.toString();
          d.overscaledZ !== d.canonical.z && (pe += " => " + d.overscaledZ),
            (function (Ce, de) {
              Ce.initDebugOverlayCanvas();
              var we = Ce.debugOverlayCanvas,
                De = Ce.context.gl,
                Ge = Ce.debugOverlayCanvas.getContext("2d");
              Ge.clearRect(0, 0, we.width, we.height),
                (Ge.shadowColor = "white"),
                (Ge.shadowBlur = 2),
                (Ge.lineWidth = 1.5),
                (Ge.strokeStyle = "white"),
                (Ge.textBaseline = "top"),
                (Ge.font = "bold 36px Open Sans, sans-serif"),
                Ge.fillText(de, 5, 5),
                Ge.strokeText(de, 5, 5),
                Ce.debugOverlayTexture.update(we),
                Ce.debugOverlayTexture.bind(De.LINEAR, De.CLAMP_TO_EDGE);
            })(u, pe + " " + ne + "kb"),
            w.draw(
              g,
              b.TRIANGLES,
              M,
              B,
              Pe.alphaBlended,
              Fe.disabled,
              kl(S, a.Color.transparent, _e),
              "$debug",
              u.debugBuffer,
              u.quadTriangleIndexBuffer,
              u.debugSegments
            );
        }
        var jl = {
            symbol: function (u, p, d, g, b) {
              if (u.renderPass === "translucent") {
                var S = fe.disabled,
                  w = u.colorModeForRenderPass();
                d.layout.get("text-variable-anchor") &&
                  (function (M, B, V, J, ne, re, _e) {
                    for (
                      var pe = B.transform,
                        Ce = ne === "map",
                        de = re === "map",
                        we = 0,
                        De = M;
                      we < De.length;
                      we += 1
                    ) {
                      var Ge = De[we],
                        st = J.getTile(Ge),
                        Je = st.getBucket(V);
                      if (Je && Je.text && Je.text.segments.get().length) {
                        var ht = a.evaluateSizeForZoom(
                            Je.textSizeData,
                            pe.zoom
                          ),
                          Et = hi(st, 1, B.transform.zoom),
                          jt = ni(Ge.posMatrix, de, Ce, B.transform, Et),
                          Ft =
                            V.layout.get("icon-text-fit") !== "none" &&
                            Je.hasIconData();
                        if (ht) {
                          var sn = Math.pow(2, pe.zoom - st.tileID.overscaledZ);
                          y0(
                            Je,
                            Ce,
                            de,
                            _e,
                            a.symbolSize,
                            pe,
                            jt,
                            Ge.posMatrix,
                            sn,
                            ht,
                            Ft
                          );
                        }
                      }
                    }
                  })(
                    g,
                    u,
                    d,
                    p,
                    d.layout.get("text-rotation-alignment"),
                    d.layout.get("text-pitch-alignment"),
                    b
                  ),
                  d.paint.get("icon-opacity").constantOr(1) !== 0 &&
                    Vl(
                      u,
                      p,
                      d,
                      g,
                      !1,
                      d.paint.get("icon-translate"),
                      d.paint.get("icon-translate-anchor"),
                      d.layout.get("icon-rotation-alignment"),
                      d.layout.get("icon-pitch-alignment"),
                      d.layout.get("icon-keep-upright"),
                      S,
                      w
                    ),
                  d.paint.get("text-opacity").constantOr(1) !== 0 &&
                    Vl(
                      u,
                      p,
                      d,
                      g,
                      !0,
                      d.paint.get("text-translate"),
                      d.paint.get("text-translate-anchor"),
                      d.layout.get("text-rotation-alignment"),
                      d.layout.get("text-pitch-alignment"),
                      d.layout.get("text-keep-upright"),
                      S,
                      w
                    ),
                  p.map.showCollisionBoxes &&
                    (bc(
                      u,
                      p,
                      d,
                      g,
                      d.paint.get("text-translate"),
                      d.paint.get("text-translate-anchor"),
                      !0
                    ),
                    bc(
                      u,
                      p,
                      d,
                      g,
                      d.paint.get("icon-translate"),
                      d.paint.get("icon-translate-anchor"),
                      !1
                    ));
              }
            },
            circle: function (u, p, d, g) {
              if (u.renderPass === "translucent") {
                var b = d.paint.get("circle-opacity"),
                  S = d.paint.get("circle-stroke-width"),
                  w = d.paint.get("circle-stroke-opacity"),
                  M = d.layout.get("circle-sort-key").constantOr(1) !== void 0;
                if (
                  b.constantOr(1) !== 0 ||
                  (S.constantOr(1) !== 0 && w.constantOr(1) !== 0)
                ) {
                  for (
                    var B = u.context,
                      V = B.gl,
                      J = u.depthModeForSublayer(0, ae.ReadOnly),
                      ne = fe.disabled,
                      re = u.colorModeForRenderPass(),
                      _e = [],
                      pe = 0;
                    pe < g.length;
                    pe++
                  ) {
                    var Ce = g[pe],
                      de = p.getTile(Ce),
                      we = de.getBucket(d);
                    if (we) {
                      var De = we.programConfigurations.get(d.id),
                        Ge = {
                          programConfiguration: De,
                          program: u.useProgram("circle", De),
                          layoutVertexBuffer: we.layoutVertexBuffer,
                          indexBuffer: we.indexBuffer,
                          uniformValues: Xc(u, Ce, de, d),
                        };
                      if (M)
                        for (
                          var st = 0, Je = we.segments.get();
                          st < Je.length;
                          st += 1
                        ) {
                          var ht = Je[st];
                          _e.push({
                            segments: new a.SegmentVector([ht]),
                            sortKey: ht.sortKey,
                            state: Ge,
                          });
                        }
                      else
                        _e.push({
                          segments: we.segments,
                          sortKey: 0,
                          state: Ge,
                        });
                    }
                  }
                  M &&
                    _e.sort(function (In, Bn) {
                      return In.sortKey - Bn.sortKey;
                    });
                  for (var Et = 0, jt = _e; Et < jt.length; Et += 1) {
                    var Ft = jt[Et],
                      sn = Ft.state;
                    sn.program.draw(
                      B,
                      V.TRIANGLES,
                      J,
                      ne,
                      re,
                      Fe.disabled,
                      sn.uniformValues,
                      d.id,
                      sn.layoutVertexBuffer,
                      sn.indexBuffer,
                      Ft.segments,
                      d.paint,
                      u.transform.zoom,
                      sn.programConfiguration
                    );
                  }
                }
              }
            },
            heatmap: function (u, p, d, g) {
              if (d.paint.get("heatmap-opacity") !== 0)
                if (u.renderPass === "offscreen") {
                  var b = u.context,
                    S = b.gl,
                    w = fe.disabled,
                    M = new Pe([S.ONE, S.ONE], a.Color.transparent, [
                      !0,
                      !0,
                      !0,
                      !0,
                    ]);
                  (function (_e, pe, Ce) {
                    var de = _e.gl;
                    _e.activeTexture.set(de.TEXTURE1),
                      _e.viewport.set([0, 0, pe.width / 4, pe.height / 4]);
                    var we = Ce.heatmapFbo;
                    if (we)
                      de.bindTexture(de.TEXTURE_2D, we.colorAttachment.get()),
                        _e.bindFramebuffer.set(we.framebuffer);
                    else {
                      var De = de.createTexture();
                      de.bindTexture(de.TEXTURE_2D, De),
                        de.texParameteri(
                          de.TEXTURE_2D,
                          de.TEXTURE_WRAP_S,
                          de.CLAMP_TO_EDGE
                        ),
                        de.texParameteri(
                          de.TEXTURE_2D,
                          de.TEXTURE_WRAP_T,
                          de.CLAMP_TO_EDGE
                        ),
                        de.texParameteri(
                          de.TEXTURE_2D,
                          de.TEXTURE_MIN_FILTER,
                          de.LINEAR
                        ),
                        de.texParameteri(
                          de.TEXTURE_2D,
                          de.TEXTURE_MAG_FILTER,
                          de.LINEAR
                        ),
                        (we = Ce.heatmapFbo =
                          _e.createFramebuffer(
                            pe.width / 4,
                            pe.height / 4,
                            !1
                          )),
                        (function (Ge, st, Je, ht) {
                          var Et = Ge.gl;
                          Et.texImage2D(
                            Et.TEXTURE_2D,
                            0,
                            Et.RGBA,
                            st.width / 4,
                            st.height / 4,
                            0,
                            Et.RGBA,
                            Ge.extRenderToTextureHalfFloat
                              ? Ge.extTextureHalfFloat.HALF_FLOAT_OES
                              : Et.UNSIGNED_BYTE,
                            null
                          ),
                            ht.colorAttachment.set(Je);
                        })(_e, pe, De, we);
                    }
                  })(b, u, d),
                    b.clear({ color: a.Color.transparent });
                  for (var B = 0; B < g.length; B++) {
                    var V = g[B];
                    if (!p.hasRenderableParent(V)) {
                      var J = p.getTile(V),
                        ne = J.getBucket(d);
                      if (ne) {
                        var re = ne.programConfigurations.get(d.id);
                        u.useProgram("heatmap", re).draw(
                          b,
                          S.TRIANGLES,
                          ae.disabled,
                          w,
                          M,
                          Fe.disabled,
                          m0(
                            V.posMatrix,
                            J,
                            u.transform.zoom,
                            d.paint.get("heatmap-intensity")
                          ),
                          d.id,
                          ne.layoutVertexBuffer,
                          ne.indexBuffer,
                          ne.segments,
                          d.paint,
                          u.transform.zoom,
                          re
                        );
                      }
                    }
                  }
                  b.viewport.set([0, 0, u.width, u.height]);
                } else
                  u.renderPass === "translucent" &&
                    (u.context.setColorMode(u.colorModeForRenderPass()),
                    (function (_e, pe) {
                      var Ce = _e.context,
                        de = Ce.gl,
                        we = pe.heatmapFbo;
                      if (we) {
                        Ce.activeTexture.set(de.TEXTURE0),
                          de.bindTexture(
                            de.TEXTURE_2D,
                            we.colorAttachment.get()
                          ),
                          Ce.activeTexture.set(de.TEXTURE1);
                        var De = pe.colorRampTexture;
                        De ||
                          (De = pe.colorRampTexture =
                            new a.Texture(Ce, pe.colorRamp, de.RGBA)),
                          De.bind(de.LINEAR, de.CLAMP_TO_EDGE),
                          _e.useProgram("heatmapTexture").draw(
                            Ce,
                            de.TRIANGLES,
                            ae.disabled,
                            fe.disabled,
                            _e.colorModeForRenderPass(),
                            Fe.disabled,
                            (function (Ge, st, Je, ht) {
                              var Et = a.create();
                              a.ortho(Et, 0, Ge.width, Ge.height, 0, 0, 1);
                              var jt = Ge.context.gl;
                              return {
                                u_matrix: Et,
                                u_world: [
                                  jt.drawingBufferWidth,
                                  jt.drawingBufferHeight,
                                ],
                                u_image: 0,
                                u_color_ramp: 1,
                                u_opacity: st.paint.get("heatmap-opacity"),
                              };
                            })(_e, pe),
                            pe.id,
                            _e.viewportBuffer,
                            _e.quadTriangleIndexBuffer,
                            _e.viewportSegments,
                            pe.paint,
                            _e.transform.zoom
                          );
                      }
                    })(u, d));
            },
            line: function (u, p, d, g) {
              if (u.renderPass === "translucent") {
                var b = d.paint.get("line-opacity"),
                  S = d.paint.get("line-width");
                if (b.constantOr(1) !== 0 && S.constantOr(1) !== 0)
                  for (
                    var w = u.depthModeForSublayer(0, ae.ReadOnly),
                      M = u.colorModeForRenderPass(),
                      B = d.paint.get("line-dasharray"),
                      V = d.paint.get("line-pattern"),
                      J = V.constantOr(1),
                      ne = d.paint.get("line-gradient"),
                      re = d.getCrossfadeParameters(),
                      _e = J
                        ? "linePattern"
                        : B
                        ? "lineSDF"
                        : ne
                        ? "lineGradient"
                        : "line",
                      pe = u.context,
                      Ce = pe.gl,
                      de = !0,
                      we = 0,
                      De = g;
                    we < De.length;
                    we += 1
                  ) {
                    var Ge = De[we],
                      st = p.getTile(Ge);
                    if (!J || st.patternsLoaded()) {
                      var Je = st.getBucket(d);
                      if (Je) {
                        var ht = Je.programConfigurations.get(d.id),
                          Et = u.context.program.get(),
                          jt = u.useProgram(_e, ht),
                          Ft = de || jt.program !== Et,
                          sn = V.constantOr(null);
                        if (sn && st.imageAtlas) {
                          var In = st.imageAtlas,
                            Bn = In.patternPositions[sn.to.toString()],
                            Dn = In.patternPositions[sn.from.toString()];
                          Bn && Dn && ht.setConstantPatternPositions(Bn, Dn);
                        }
                        var Fr = J
                          ? hd(u, st, d, re)
                          : B
                          ? Xp(u, st, d, B, re)
                          : ne
                          ? mi(u, st, d, Je.lineClipsArray.length)
                          : Nu(u, st, d);
                        if (J)
                          pe.activeTexture.set(Ce.TEXTURE0),
                            st.imageAtlasTexture.bind(
                              Ce.LINEAR,
                              Ce.CLAMP_TO_EDGE
                            ),
                            ht.updatePaintBuffers(re);
                        else if (B && (Ft || u.lineAtlas.dirty))
                          pe.activeTexture.set(Ce.TEXTURE0),
                            u.lineAtlas.bind(pe);
                        else if (ne) {
                          var pn = Je.gradients[d.id],
                            $n = pn.texture;
                          if (d.gradientVersion !== pn.version) {
                            var dr = 256;
                            if (d.stepInterpolant) {
                              var Yn = p.getSource().maxzoom,
                                Xn =
                                  Ge.canonical.z === Yn
                                    ? Math.ceil(
                                        1 <<
                                          (u.transform.maxZoom - Ge.canonical.z)
                                      )
                                    : 1;
                              dr = a.clamp(
                                a.nextPowerOfTwo(
                                  (Je.maxLineLength / a.EXTENT) * 1024 * Xn
                                ),
                                256,
                                pe.maxTextureSize
                              );
                            }
                            (pn.gradient = a.renderColorRamp({
                              expression: d.gradientExpression(),
                              evaluationKey: "lineProgress",
                              resolution: dr,
                              image: pn.gradient || void 0,
                              clips: Je.lineClipsArray,
                            })),
                              pn.texture
                                ? pn.texture.update(pn.gradient)
                                : (pn.texture = new a.Texture(
                                    pe,
                                    pn.gradient,
                                    Ce.RGBA
                                  )),
                              (pn.version = d.gradientVersion),
                              ($n = pn.texture);
                          }
                          pe.activeTexture.set(Ce.TEXTURE0),
                            $n.bind(
                              d.stepInterpolant ? Ce.NEAREST : Ce.LINEAR,
                              Ce.CLAMP_TO_EDGE
                            );
                        }
                        jt.draw(
                          pe,
                          Ce.TRIANGLES,
                          w,
                          u.stencilModeForClipping(Ge),
                          M,
                          Fe.disabled,
                          Fr,
                          d.id,
                          Je.layoutVertexBuffer,
                          Je.indexBuffer,
                          Je.segments,
                          d.paint,
                          u.transform.zoom,
                          ht,
                          Je.layoutVertexBuffer2
                        ),
                          (de = !1);
                      }
                    }
                  }
              }
            },
            fill: function (u, p, d, g) {
              var b = d.paint.get("fill-color"),
                S = d.paint.get("fill-opacity");
              if (S.constantOr(1) !== 0) {
                var w = u.colorModeForRenderPass(),
                  M = d.paint.get("fill-pattern"),
                  B =
                    u.opaquePassEnabledForLayer() &&
                    !M.constantOr(1) &&
                    b.constantOr(a.Color.transparent).a === 1 &&
                    S.constantOr(0) === 1
                      ? "opaque"
                      : "translucent";
                if (u.renderPass === B) {
                  var V = u.depthModeForSublayer(
                    1,
                    u.renderPass === "opaque" ? ae.ReadWrite : ae.ReadOnly
                  );
                  Zc(u, p, d, g, V, w, !1);
                }
                if (
                  u.renderPass === "translucent" &&
                  d.paint.get("fill-antialias")
                ) {
                  var J = u.depthModeForSublayer(
                    d.getPaintProperty("fill-outline-color") ? 2 : 0,
                    ae.ReadOnly
                  );
                  Zc(u, p, d, g, J, w, !0);
                }
              }
            },
            "fill-extrusion": function (u, p, d, g) {
              var b = d.paint.get("fill-extrusion-opacity");
              if (b !== 0 && u.renderPass === "translucent") {
                var S = new ae(
                  u.context.gl.LEQUAL,
                  ae.ReadWrite,
                  u.depthRangeFor3D
                );
                if (
                  b !== 1 ||
                  d.paint.get("fill-extrusion-pattern").constantOr(1)
                )
                  Iu(u, p, d, g, S, fe.disabled, Pe.disabled),
                    Iu(
                      u,
                      p,
                      d,
                      g,
                      S,
                      u.stencilModeFor3D(),
                      u.colorModeForRenderPass()
                    );
                else {
                  var w = u.colorModeForRenderPass();
                  Iu(u, p, d, g, S, fe.disabled, w);
                }
              }
            },
            hillshade: function (u, p, d, g) {
              if (
                u.renderPass === "offscreen" ||
                u.renderPass === "translucent"
              ) {
                for (
                  var b = u.context,
                    S = u.depthModeForSublayer(0, ae.ReadOnly),
                    w = u.colorModeForRenderPass(),
                    M =
                      u.renderPass === "translucent"
                        ? u.stencilConfigForOverlap(g)
                        : [{}, g],
                    B = M[0],
                    V = 0,
                    J = M[1];
                  V < J.length;
                  V += 1
                ) {
                  var ne = J[V],
                    re = p.getTile(ne);
                  re.needsHillshadePrepare && u.renderPass === "offscreen"
                    ? Gp(u, re, d, S, fe.disabled, w)
                    : u.renderPass === "translucent" &&
                      Hl(u, re, d, S, B[ne.overscaledZ], w);
                }
                b.viewport.set([0, 0, u.width, u.height]);
              }
            },
            raster: function (u, p, d, g) {
              if (
                u.renderPass === "translucent" &&
                d.paint.get("raster-opacity") !== 0 &&
                g.length
              )
                for (
                  var b = u.context,
                    S = b.gl,
                    w = p.getSource(),
                    M = u.useProgram("raster"),
                    B = u.colorModeForRenderPass(),
                    V =
                      w instanceof er ? [{}, g] : u.stencilConfigForOverlap(g),
                    J = V[0],
                    ne = V[1],
                    re = ne[ne.length - 1].overscaledZ,
                    _e = !u.options.moving,
                    pe = 0,
                    Ce = ne;
                  pe < Ce.length;
                  pe += 1
                ) {
                  var de = Ce[pe],
                    we = u.depthModeForSublayer(
                      de.overscaledZ - re,
                      d.paint.get("raster-opacity") === 1
                        ? ae.ReadWrite
                        : ae.ReadOnly,
                      S.LESS
                    ),
                    De = p.getTile(de),
                    Ge = u.transform.calculatePosMatrix(de.toUnwrapped(), _e);
                  De.registerFadeDuration(d.paint.get("raster-fade-duration"));
                  var st = p.findLoadedParent(de, 0),
                    Je = fd(De, st, p, d, u.transform),
                    ht = void 0,
                    Et = void 0,
                    jt =
                      d.paint.get("raster-resampling") === "nearest"
                        ? S.NEAREST
                        : S.LINEAR;
                  b.activeTexture.set(S.TEXTURE0),
                    De.texture.bind(
                      jt,
                      S.CLAMP_TO_EDGE,
                      S.LINEAR_MIPMAP_NEAREST
                    ),
                    b.activeTexture.set(S.TEXTURE1),
                    st
                      ? (st.texture.bind(
                          jt,
                          S.CLAMP_TO_EDGE,
                          S.LINEAR_MIPMAP_NEAREST
                        ),
                        (ht = Math.pow(
                          2,
                          st.tileID.overscaledZ - De.tileID.overscaledZ
                        )),
                        (Et = [
                          (De.tileID.canonical.x * ht) % 1,
                          (De.tileID.canonical.y * ht) % 1,
                        ]))
                      : De.texture.bind(
                          jt,
                          S.CLAMP_TO_EDGE,
                          S.LINEAR_MIPMAP_NEAREST
                        );
                  var Ft = g0(Ge, Et || [0, 0], ht || 1, Je, d);
                  w instanceof er
                    ? M.draw(
                        b,
                        S.TRIANGLES,
                        we,
                        fe.disabled,
                        B,
                        Fe.disabled,
                        Ft,
                        d.id,
                        w.boundsBuffer,
                        u.quadTriangleIndexBuffer,
                        w.boundsSegments
                      )
                    : M.draw(
                        b,
                        S.TRIANGLES,
                        we,
                        J[de.overscaledZ],
                        B,
                        Fe.disabled,
                        Ft,
                        d.id,
                        u.rasterBoundsBuffer,
                        u.quadTriangleIndexBuffer,
                        u.rasterBoundsSegments
                      );
                }
            },
            background: function (u, p, d) {
              var g = d.paint.get("background-color"),
                b = d.paint.get("background-opacity");
              if (b !== 0) {
                var S = u.context,
                  w = S.gl,
                  M = u.transform,
                  B = M.tileSize,
                  V = d.paint.get("background-pattern");
                if (!u.isPatternMissing(V)) {
                  var J =
                    !V && g.a === 1 && b === 1 && u.opaquePassEnabledForLayer()
                      ? "opaque"
                      : "translucent";
                  if (u.renderPass === J) {
                    var ne = fe.disabled,
                      re = u.depthModeForSublayer(
                        0,
                        J === "opaque" ? ae.ReadWrite : ae.ReadOnly
                      ),
                      _e = u.colorModeForRenderPass(),
                      pe = u.useProgram(V ? "backgroundPattern" : "background"),
                      Ce = M.coveringTiles({ tileSize: B });
                    V &&
                      (S.activeTexture.set(w.TEXTURE0),
                      u.imageManager.bind(u.context));
                    for (
                      var de = d.getCrossfadeParameters(), we = 0, De = Ce;
                      we < De.length;
                      we += 1
                    ) {
                      var Ge = De[we],
                        st = u.transform.calculatePosMatrix(Ge.toUnwrapped()),
                        Je = V
                          ? xc(st, b, u, V, { tileID: Ge, tileSize: B }, de)
                          : yc(st, b, g);
                      pe.draw(
                        S,
                        w.TRIANGLES,
                        re,
                        ne,
                        _e,
                        Fe.disabled,
                        Je,
                        d.id,
                        u.tileExtentBuffer,
                        u.quadTriangleIndexBuffer,
                        u.tileExtentSegments
                      );
                    }
                  }
                }
              }
            },
            debug: function (u, p, d) {
              for (var g = 0; g < d.length; g++) T0(u, p, d[g]);
            },
            custom: function (u, p, d) {
              var g = u.context,
                b = d.implementation;
              if (u.renderPass === "offscreen") {
                var S = b.prerender;
                S &&
                  (u.setCustomLayerDefaults(),
                  g.setColorMode(u.colorModeForRenderPass()),
                  S.call(b, g.gl, u.transform.customLayerMatrix()),
                  g.setDirty(),
                  u.setBaseState());
              } else if (u.renderPass === "translucent") {
                u.setCustomLayerDefaults(),
                  g.setColorMode(u.colorModeForRenderPass()),
                  g.setStencilMode(fe.disabled);
                var w =
                  b.renderingMode === "3d"
                    ? new ae(
                        u.context.gl.LEQUAL,
                        ae.ReadWrite,
                        u.depthRangeFor3D
                      )
                    : u.depthModeForSublayer(0, ae.ReadOnly);
                g.setDepthMode(w),
                  b.render(g.gl, u.transform.customLayerMatrix()),
                  g.setDirty(),
                  u.setBaseState(),
                  g.bindFramebuffer.set(null);
              }
            },
          },
          gi = function (u, p) {
            (this.context = new te(u)),
              (this.transform = p),
              (this._tileTextures = {}),
              this.setup(),
              (this.numSublayers = ye.maxUnderzooming + ye.maxOverzooming + 1),
              (this.depthEpsilon = 1 / Math.pow(2, 16)),
              (this.crossTileSymbolIndex = new Pl()),
              (this.gpuTimers = {});
          };
        (gi.prototype.resize = function (u, p) {
          if (
            ((this.width = u * a.browser.devicePixelRatio),
            (this.height = p * a.browser.devicePixelRatio),
            this.context.viewport.set([0, 0, this.width, this.height]),
            this.style)
          )
            for (var d = 0, g = this.style._order; d < g.length; d += 1)
              this.style._layers[g[d]].resize();
        }),
          (gi.prototype.setup = function () {
            var u = this.context,
              p = new a.StructArrayLayout2i4();
            p.emplaceBack(0, 0),
              p.emplaceBack(a.EXTENT, 0),
              p.emplaceBack(0, a.EXTENT),
              p.emplaceBack(a.EXTENT, a.EXTENT),
              (this.tileExtentBuffer = u.createVertexBuffer(p, Ui.members)),
              (this.tileExtentSegments = a.SegmentVector.simpleSegment(
                0,
                0,
                4,
                2
              ));
            var d = new a.StructArrayLayout2i4();
            d.emplaceBack(0, 0),
              d.emplaceBack(a.EXTENT, 0),
              d.emplaceBack(0, a.EXTENT),
              d.emplaceBack(a.EXTENT, a.EXTENT),
              (this.debugBuffer = u.createVertexBuffer(d, Ui.members)),
              (this.debugSegments = a.SegmentVector.simpleSegment(0, 0, 4, 5));
            var g = new a.StructArrayLayout4i8();
            g.emplaceBack(0, 0, 0, 0),
              g.emplaceBack(a.EXTENT, 0, a.EXTENT, 0),
              g.emplaceBack(0, a.EXTENT, 0, a.EXTENT),
              g.emplaceBack(a.EXTENT, a.EXTENT, a.EXTENT, a.EXTENT),
              (this.rasterBoundsBuffer = u.createVertexBuffer(g, Kn.members)),
              (this.rasterBoundsSegments = a.SegmentVector.simpleSegment(
                0,
                0,
                4,
                2
              ));
            var b = new a.StructArrayLayout2i4();
            b.emplaceBack(0, 0),
              b.emplaceBack(1, 0),
              b.emplaceBack(0, 1),
              b.emplaceBack(1, 1),
              (this.viewportBuffer = u.createVertexBuffer(b, Ui.members)),
              (this.viewportSegments = a.SegmentVector.simpleSegment(
                0,
                0,
                4,
                2
              ));
            var S = new a.StructArrayLayout1ui2();
            S.emplaceBack(0),
              S.emplaceBack(1),
              S.emplaceBack(3),
              S.emplaceBack(2),
              S.emplaceBack(0),
              (this.tileBorderIndexBuffer = u.createIndexBuffer(S));
            var w = new a.StructArrayLayout3ui6();
            w.emplaceBack(0, 1, 2),
              w.emplaceBack(2, 1, 3),
              (this.quadTriangleIndexBuffer = u.createIndexBuffer(w)),
              (this.emptyTexture = new a.Texture(
                u,
                { width: 1, height: 1, data: new Uint8Array([0, 0, 0, 0]) },
                u.gl.RGBA
              ));
            var M = this.context.gl;
            this.stencilClearMode = new fe(
              { func: M.ALWAYS, mask: 0 },
              0,
              255,
              M.ZERO,
              M.ZERO,
              M.ZERO
            );
          }),
          (gi.prototype.clearStencil = function () {
            var u = this.context,
              p = u.gl;
            (this.nextStencilID = 1), (this.currentStencilSource = void 0);
            var d = a.create();
            a.ortho(d, 0, this.width, this.height, 0, 0, 1),
              a.scale(d, d, [p.drawingBufferWidth, p.drawingBufferHeight, 0]),
              this.useProgram("clippingMask").draw(
                u,
                p.TRIANGLES,
                ae.disabled,
                this.stencilClearMode,
                Pe.disabled,
                Fe.disabled,
                gl(d),
                "$clipping",
                this.viewportBuffer,
                this.quadTriangleIndexBuffer,
                this.viewportSegments
              );
          }),
          (gi.prototype._renderTileClippingMasks = function (u, p) {
            if (
              this.currentStencilSource !== u.source &&
              u.isTileClipped() &&
              p &&
              p.length
            ) {
              this.currentStencilSource = u.source;
              var d = this.context,
                g = d.gl;
              this.nextStencilID + p.length > 256 && this.clearStencil(),
                d.setColorMode(Pe.disabled),
                d.setDepthMode(ae.disabled);
              var b = this.useProgram("clippingMask");
              this._tileClippingMaskIDs = {};
              for (var S = 0, w = p; S < w.length; S += 1) {
                var M = w[S],
                  B = (this._tileClippingMaskIDs[M.key] = this.nextStencilID++);
                b.draw(
                  d,
                  g.TRIANGLES,
                  ae.disabled,
                  new fe(
                    { func: g.ALWAYS, mask: 0 },
                    B,
                    255,
                    g.KEEP,
                    g.KEEP,
                    g.REPLACE
                  ),
                  Pe.disabled,
                  Fe.disabled,
                  gl(M.posMatrix),
                  "$clipping",
                  this.tileExtentBuffer,
                  this.quadTriangleIndexBuffer,
                  this.tileExtentSegments
                );
              }
            }
          }),
          (gi.prototype.stencilModeFor3D = function () {
            (this.currentStencilSource = void 0),
              this.nextStencilID + 1 > 256 && this.clearStencil();
            var u = this.nextStencilID++,
              p = this.context.gl;
            return new fe(
              { func: p.NOTEQUAL, mask: 255 },
              u,
              255,
              p.KEEP,
              p.KEEP,
              p.REPLACE
            );
          }),
          (gi.prototype.stencilModeForClipping = function (u) {
            var p = this.context.gl;
            return new fe(
              { func: p.EQUAL, mask: 255 },
              this._tileClippingMaskIDs[u.key],
              0,
              p.KEEP,
              p.KEEP,
              p.REPLACE
            );
          }),
          (gi.prototype.stencilConfigForOverlap = function (u) {
            var p,
              d = this.context.gl,
              g = u.sort(function (B, V) {
                return V.overscaledZ - B.overscaledZ;
              }),
              b = g[g.length - 1].overscaledZ,
              S = g[0].overscaledZ - b + 1;
            if (S > 1) {
              (this.currentStencilSource = void 0),
                this.nextStencilID + S > 256 && this.clearStencil();
              for (var w = {}, M = 0; M < S; M++)
                w[M + b] = new fe(
                  { func: d.GEQUAL, mask: 255 },
                  M + this.nextStencilID,
                  255,
                  d.KEEP,
                  d.KEEP,
                  d.REPLACE
                );
              return (this.nextStencilID += S), [w, g];
            }
            return [((p = {}), (p[b] = fe.disabled), p), g];
          }),
          (gi.prototype.colorModeForRenderPass = function () {
            var u = this.context.gl;
            return this._showOverdrawInspector
              ? new Pe(
                  [u.CONSTANT_COLOR, u.ONE],
                  new a.Color(1 / 8, 1 / 8, 1 / 8, 0),
                  [!0, !0, !0, !0]
                )
              : this.renderPass === "opaque"
              ? Pe.unblended
              : Pe.alphaBlended;
          }),
          (gi.prototype.depthModeForSublayer = function (u, p, d) {
            if (!this.opaquePassEnabledForLayer()) return ae.disabled;
            var g =
              1 -
              ((1 + this.currentLayer) * this.numSublayers + u) *
                this.depthEpsilon;
            return new ae(d || this.context.gl.LEQUAL, p, [g, g]);
          }),
          (gi.prototype.opaquePassEnabledForLayer = function () {
            return this.currentLayer < this.opaquePassCutoff;
          }),
          (gi.prototype.render = function (u, p) {
            var d = this;
            (this.style = u),
              (this.options = p),
              (this.lineAtlas = u.lineAtlas),
              (this.imageManager = u.imageManager),
              (this.glyphManager = u.glyphManager),
              (this.symbolFadeChange = u.placement.symbolFadeChange(
                a.browser.now()
              )),
              this.imageManager.beginFrame();
            var g = this.style._order,
              b = this.style.sourceCaches;
            for (var S in b) {
              var w = b[S];
              w.used && w.prepare(this.context);
            }
            var M,
              B,
              V = {},
              J = {},
              ne = {};
            for (var re in b) {
              var _e = b[re];
              (V[re] = _e.getVisibleCoordinates()),
                (J[re] = V[re].slice().reverse()),
                (ne[re] = _e.getVisibleCoordinates(!0).reverse());
            }
            this.opaquePassCutoff = 1 / 0;
            for (var pe = 0; pe < g.length; pe++)
              if (this.style._layers[g[pe]].is3D()) {
                this.opaquePassCutoff = pe;
                break;
              }
            this.renderPass = "offscreen";
            for (var Ce = 0, de = g; Ce < de.length; Ce += 1) {
              var we = this.style._layers[de[Ce]];
              if (we.hasOffscreenPass() && !we.isHidden(this.transform.zoom)) {
                var De = J[we.source];
                (we.type === "custom" || De.length) &&
                  this.renderLayer(this, b[we.source], we, De);
              }
            }
            for (
              this.context.bindFramebuffer.set(null),
                this.context.clear({
                  color: p.showOverdrawInspector
                    ? a.Color.black
                    : a.Color.transparent,
                  depth: 1,
                }),
                this.clearStencil(),
                this._showOverdrawInspector = p.showOverdrawInspector,
                this.depthRangeFor3D = [
                  0,
                  1 -
                    (u._order.length + 2) *
                      this.numSublayers *
                      this.depthEpsilon,
                ],
                this.renderPass = "opaque",
                this.currentLayer = g.length - 1;
              this.currentLayer >= 0;
              this.currentLayer--
            ) {
              var Ge = this.style._layers[g[this.currentLayer]],
                st = b[Ge.source],
                Je = V[Ge.source];
              this._renderTileClippingMasks(Ge, Je),
                this.renderLayer(this, st, Ge, Je);
            }
            for (
              this.renderPass = "translucent", this.currentLayer = 0;
              this.currentLayer < g.length;
              this.currentLayer++
            ) {
              var ht = this.style._layers[g[this.currentLayer]],
                Et = b[ht.source],
                jt = (ht.type === "symbol" ? ne : J)[ht.source];
              this._renderTileClippingMasks(ht, V[ht.source]),
                this.renderLayer(this, Et, ht, jt);
            }
            this.options.showTileBoundaries &&
              (a.values(this.style._layers).forEach(function (Ft) {
                Ft.source &&
                  !Ft.isHidden(d.transform.zoom) &&
                  (Ft.source !== (B && B.id) &&
                    (B = d.style.sourceCaches[Ft.source]),
                  (!M || M.getSource().maxzoom < B.getSource().maxzoom) &&
                    (M = B));
              }),
              M && jl.debug(this, M, M.getVisibleCoordinates())),
              this.options.showPadding &&
                (function (Ft) {
                  var sn = Ft.transform.padding;
                  Mu(Ft, Ft.transform.height - (sn.top || 0), 3, b0),
                    Mu(Ft, sn.bottom || 0, 3, md),
                    A0(Ft, sn.left || 0, 3, bh),
                    A0(Ft, Ft.transform.width - (sn.right || 0), 3, gd);
                  var In = Ft.transform.centerPoint;
                  (function (Bn, Dn, Fr, pn) {
                    Ec(Bn, Dn - 1, Fr - 10, 2, 20, pn),
                      Ec(Bn, Dn - 10, Fr - 1, 20, 2, pn);
                  })(Ft, In.x, Ft.transform.height - In.y, E0);
                })(this),
              this.context.setDefault();
          }),
          (gi.prototype.renderLayer = function (u, p, d, g) {
            d.isHidden(this.transform.zoom) ||
              ((d.type === "background" || d.type === "custom" || g.length) &&
                ((this.id = d.id),
                this.gpuTimingStart(d),
                jl[d.type](u, p, d, g, this.style.placement.variableOffsets),
                this.gpuTimingEnd()));
          }),
          (gi.prototype.gpuTimingStart = function (u) {
            if (this.options.gpuTiming) {
              var p = this.context.extTimerQuery,
                d = this.gpuTimers[u.id];
              d ||
                (d = this.gpuTimers[u.id] =
                  { calls: 0, cpuTime: 0, query: p.createQueryEXT() }),
                d.calls++,
                p.beginQueryEXT(p.TIME_ELAPSED_EXT, d.query);
            }
          }),
          (gi.prototype.gpuTimingEnd = function () {
            if (this.options.gpuTiming) {
              var u = this.context.extTimerQuery;
              u.endQueryEXT(u.TIME_ELAPSED_EXT);
            }
          }),
          (gi.prototype.collectGpuTimers = function () {
            var u = this.gpuTimers;
            return (this.gpuTimers = {}), u;
          }),
          (gi.prototype.queryGpuTimers = function (u) {
            var p = {};
            for (var d in u) {
              var g = u[d],
                b = this.context.extTimerQuery,
                S = b.getQueryObjectEXT(g.query, b.QUERY_RESULT_EXT) / 1e6;
              b.deleteQueryEXT(g.query), (p[d] = S);
            }
            return p;
          }),
          (gi.prototype.translatePosMatrix = function (u, p, d, g, b) {
            if (!d[0] && !d[1]) return u;
            var S = b
              ? g === "map"
                ? this.transform.angle
                : 0
              : g === "viewport"
              ? -this.transform.angle
              : 0;
            if (S) {
              var w = Math.sin(S),
                M = Math.cos(S);
              d = [d[0] * M - d[1] * w, d[0] * w + d[1] * M];
            }
            var B = [
                b ? d[0] : hi(p, d[0], this.transform.zoom),
                b ? d[1] : hi(p, d[1], this.transform.zoom),
                0,
              ],
              V = new Float32Array(16);
            return a.translate(V, u, B), V;
          }),
          (gi.prototype.saveTileTexture = function (u) {
            var p = this._tileTextures[u.size[0]];
            p ? p.push(u) : (this._tileTextures[u.size[0]] = [u]);
          }),
          (gi.prototype.getTileTexture = function (u) {
            var p = this._tileTextures[u];
            return p && p.length > 0 ? p.pop() : null;
          }),
          (gi.prototype.isPatternMissing = function (u) {
            if (!u) return !1;
            if (!u.from || !u.to) return !0;
            var p = this.imageManager.getPattern(u.from.toString()),
              d = this.imageManager.getPattern(u.to.toString());
            return !p || !d;
          }),
          (gi.prototype.useProgram = function (u, p) {
            this.cache = this.cache || {};
            var d =
              "" +
              u +
              (p ? p.cacheKey : "") +
              (this._showOverdrawInspector ? "/overdraw" : "");
            return (
              this.cache[d] ||
                (this.cache[d] = new zi(
                  this.context,
                  u,
                  Wp[u],
                  p,
                  v0[u],
                  this._showOverdrawInspector
                )),
              this.cache[d]
            );
          }),
          (gi.prototype.setCustomLayerDefaults = function () {
            this.context.unbindVAO(),
              this.context.cullFace.setDefault(),
              this.context.activeTexture.setDefault(),
              this.context.pixelStoreUnpack.setDefault(),
              this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),
              this.context.pixelStoreUnpackFlipY.setDefault();
          }),
          (gi.prototype.setBaseState = function () {
            var u = this.context.gl;
            this.context.cullFace.set(!1),
              this.context.viewport.set([0, 0, this.width, this.height]),
              this.context.blendEquation.set(u.FUNC_ADD);
          }),
          (gi.prototype.initDebugOverlayCanvas = function () {
            this.debugOverlayCanvas == null &&
              ((this.debugOverlayCanvas =
                a.window.document.createElement("canvas")),
              (this.debugOverlayCanvas.width = 512),
              (this.debugOverlayCanvas.height = 512),
              (this.debugOverlayTexture = new a.Texture(
                this.context,
                this.debugOverlayCanvas,
                this.context.gl.RGBA
              )));
          }),
          (gi.prototype.destroy = function () {
            this.emptyTexture.destroy(),
              this.debugOverlayTexture && this.debugOverlayTexture.destroy();
          });
        var vd = function (u, p) {
          (this.points = u), (this.planes = p);
        };
        vd.fromInvProjectionMatrix = function (u, p, d) {
          var g = Math.pow(2, d),
            b = [
              [-1, 1, -1, 1],
              [1, 1, -1, 1],
              [1, -1, -1, 1],
              [-1, -1, -1, 1],
              [-1, 1, 1, 1],
              [1, 1, 1, 1],
              [1, -1, 1, 1],
              [-1, -1, 1, 1],
            ]
              .map(function (w) {
                return a.transformMat4([], w, u);
              })
              .map(function (w) {
                return a.scale$1([], w, (1 / w[3] / p) * g);
              }),
            S = [
              [0, 1, 2],
              [6, 5, 4],
              [0, 3, 7],
              [2, 1, 5],
              [3, 2, 6],
              [0, 4, 5],
            ].map(function (w) {
              var M = a.sub([], b[w[0]], b[w[1]]),
                B = a.sub([], b[w[2]], b[w[1]]),
                V = a.normalize([], a.cross([], M, B)),
                J = -a.dot(V, b[w[1]]);
              return V.concat(J);
            });
          return new vd(b, S);
        };
        var zs = function (u, p) {
          (this.min = u),
            (this.max = p),
            (this.center = a.scale$2([], a.add([], this.min, this.max), 0.5));
        };
        (zs.prototype.quadrant = function (u) {
          for (
            var p = [u % 2 == 0, u < 2],
              d = a.clone$2(this.min),
              g = a.clone$2(this.max),
              b = 0;
            b < p.length;
            b++
          )
            (d[b] = p[b] ? this.min[b] : this.center[b]),
              (g[b] = p[b] ? this.center[b] : this.max[b]);
          return (g[2] = this.max[2]), new zs(d, g);
        }),
          (zs.prototype.distanceX = function (u) {
            return Math.max(Math.min(this.max[0], u[0]), this.min[0]) - u[0];
          }),
          (zs.prototype.distanceY = function (u) {
            return Math.max(Math.min(this.max[1], u[1]), this.min[1]) - u[1];
          }),
          (zs.prototype.intersects = function (u) {
            for (
              var p = [
                  [this.min[0], this.min[1], 0, 1],
                  [this.max[0], this.min[1], 0, 1],
                  [this.max[0], this.max[1], 0, 1],
                  [this.min[0], this.max[1], 0, 1],
                ],
                d = !0,
                g = 0;
              g < u.planes.length;
              g++
            ) {
              for (var b = u.planes[g], S = 0, w = 0; w < p.length; w++)
                S += a.dot$1(b, p[w]) >= 0;
              if (S === 0) return 0;
              S !== p.length && (d = !1);
            }
            if (d) return 2;
            for (var M = 0; M < 3; M++) {
              for (
                var B = Number.MAX_VALUE, V = -Number.MAX_VALUE, J = 0;
                J < u.points.length;
                J++
              ) {
                var ne = u.points[J][M] - this.min[M];
                (B = Math.min(B, ne)), (V = Math.max(V, ne));
              }
              if (V < 0 || B > this.max[M] - this.min[M]) return 0;
            }
            return 1;
          });
        var Wl = function (u, p, d, g) {
          if (
            (u === void 0 && (u = 0),
            p === void 0 && (p = 0),
            d === void 0 && (d = 0),
            g === void 0 && (g = 0),
            isNaN(u) ||
              u < 0 ||
              isNaN(p) ||
              p < 0 ||
              isNaN(d) ||
              d < 0 ||
              isNaN(g) ||
              g < 0)
          )
            throw new Error(
              "Invalid value for edge-insets, top, bottom, left and right must all be numbers"
            );
          (this.top = u), (this.bottom = p), (this.left = d), (this.right = g);
        };
        (Wl.prototype.interpolate = function (u, p, d) {
          return (
            p.top != null &&
              u.top != null &&
              (this.top = a.number(u.top, p.top, d)),
            p.bottom != null &&
              u.bottom != null &&
              (this.bottom = a.number(u.bottom, p.bottom, d)),
            p.left != null &&
              u.left != null &&
              (this.left = a.number(u.left, p.left, d)),
            p.right != null &&
              u.right != null &&
              (this.right = a.number(u.right, p.right, d)),
            this
          );
        }),
          (Wl.prototype.getCenter = function (u, p) {
            var d = a.clamp((this.left + u - this.right) / 2, 0, u),
              g = a.clamp((this.top + p - this.bottom) / 2, 0, p);
            return new a.Point(d, g);
          }),
          (Wl.prototype.equals = function (u) {
            return (
              this.top === u.top &&
              this.bottom === u.bottom &&
              this.left === u.left &&
              this.right === u.right
            );
          }),
          (Wl.prototype.clone = function () {
            return new Wl(this.top, this.bottom, this.left, this.right);
          }),
          (Wl.prototype.toJSON = function () {
            return {
              top: this.top,
              bottom: this.bottom,
              left: this.left,
              right: this.right,
            };
          });
        var Lr = function (u, p, d, g, b) {
            (this.tileSize = 512),
              (this.maxValidLatitude = 85.051129),
              (this._renderWorldCopies = b === void 0 || b),
              (this._minZoom = u || 0),
              (this._maxZoom = p || 22),
              (this._minPitch = d ?? 0),
              (this._maxPitch = g ?? 60),
              this.setMaxBounds(),
              (this.width = 0),
              (this.height = 0),
              (this._center = new a.LngLat(0, 0)),
              (this.zoom = 0),
              (this.angle = 0),
              (this._fov = 0.6435011087932844),
              (this._pitch = 0),
              (this._unmodified = !0),
              (this._edgeInsets = new Wl()),
              (this._posMatrixCache = {}),
              (this._alignedPosMatrixCache = {});
          },
          vi = {
            minZoom: { configurable: !0 },
            maxZoom: { configurable: !0 },
            minPitch: { configurable: !0 },
            maxPitch: { configurable: !0 },
            renderWorldCopies: { configurable: !0 },
            worldSize: { configurable: !0 },
            centerOffset: { configurable: !0 },
            size: { configurable: !0 },
            bearing: { configurable: !0 },
            pitch: { configurable: !0 },
            fov: { configurable: !0 },
            zoom: { configurable: !0 },
            center: { configurable: !0 },
            padding: { configurable: !0 },
            centerPoint: { configurable: !0 },
            unmodified: { configurable: !0 },
            point: { configurable: !0 },
          };
        (Lr.prototype.clone = function () {
          var u = new Lr(
            this._minZoom,
            this._maxZoom,
            this._minPitch,
            this.maxPitch,
            this._renderWorldCopies
          );
          return (
            (u.tileSize = this.tileSize),
            (u.latRange = this.latRange),
            (u.width = this.width),
            (u.height = this.height),
            (u._center = this._center),
            (u.zoom = this.zoom),
            (u.angle = this.angle),
            (u._fov = this._fov),
            (u._pitch = this._pitch),
            (u._unmodified = this._unmodified),
            (u._edgeInsets = this._edgeInsets.clone()),
            u._calcMatrices(),
            u
          );
        }),
          (vi.minZoom.get = function () {
            return this._minZoom;
          }),
          (vi.minZoom.set = function (u) {
            this._minZoom !== u &&
              ((this._minZoom = u), (this.zoom = Math.max(this.zoom, u)));
          }),
          (vi.maxZoom.get = function () {
            return this._maxZoom;
          }),
          (vi.maxZoom.set = function (u) {
            this._maxZoom !== u &&
              ((this._maxZoom = u), (this.zoom = Math.min(this.zoom, u)));
          }),
          (vi.minPitch.get = function () {
            return this._minPitch;
          }),
          (vi.minPitch.set = function (u) {
            this._minPitch !== u &&
              ((this._minPitch = u), (this.pitch = Math.max(this.pitch, u)));
          }),
          (vi.maxPitch.get = function () {
            return this._maxPitch;
          }),
          (vi.maxPitch.set = function (u) {
            this._maxPitch !== u &&
              ((this._maxPitch = u), (this.pitch = Math.min(this.pitch, u)));
          }),
          (vi.renderWorldCopies.get = function () {
            return this._renderWorldCopies;
          }),
          (vi.renderWorldCopies.set = function (u) {
            u === void 0 ? (u = !0) : u === null && (u = !1),
              (this._renderWorldCopies = u);
          }),
          (vi.worldSize.get = function () {
            return this.tileSize * this.scale;
          }),
          (vi.centerOffset.get = function () {
            return this.centerPoint._sub(this.size._div(2));
          }),
          (vi.size.get = function () {
            return new a.Point(this.width, this.height);
          }),
          (vi.bearing.get = function () {
            return (-this.angle / Math.PI) * 180;
          }),
          (vi.bearing.set = function (u) {
            var p = (-a.wrap(u, -180, 180) * Math.PI) / 180;
            this.angle !== p &&
              ((this._unmodified = !1),
              (this.angle = p),
              this._calcMatrices(),
              (this.rotationMatrix = a.create$2()),
              a.rotate(this.rotationMatrix, this.rotationMatrix, this.angle));
          }),
          (vi.pitch.get = function () {
            return (this._pitch / Math.PI) * 180;
          }),
          (vi.pitch.set = function (u) {
            var p = (a.clamp(u, this.minPitch, this.maxPitch) / 180) * Math.PI;
            this._pitch !== p &&
              ((this._unmodified = !1),
              (this._pitch = p),
              this._calcMatrices());
          }),
          (vi.fov.get = function () {
            return (this._fov / Math.PI) * 180;
          }),
          (vi.fov.set = function (u) {
            (u = Math.max(0.01, Math.min(60, u))),
              this._fov !== u &&
                ((this._unmodified = !1),
                (this._fov = (u / 180) * Math.PI),
                this._calcMatrices());
          }),
          (vi.zoom.get = function () {
            return this._zoom;
          }),
          (vi.zoom.set = function (u) {
            var p = Math.min(Math.max(u, this.minZoom), this.maxZoom);
            this._zoom !== p &&
              ((this._unmodified = !1),
              (this._zoom = p),
              (this.scale = this.zoomScale(p)),
              (this.tileZoom = Math.floor(p)),
              (this.zoomFraction = p - this.tileZoom),
              this._constrain(),
              this._calcMatrices());
          }),
          (vi.center.get = function () {
            return this._center;
          }),
          (vi.center.set = function (u) {
            (u.lat === this._center.lat && u.lng === this._center.lng) ||
              ((this._unmodified = !1),
              (this._center = u),
              this._constrain(),
              this._calcMatrices());
          }),
          (vi.padding.get = function () {
            return this._edgeInsets.toJSON();
          }),
          (vi.padding.set = function (u) {
            this._edgeInsets.equals(u) ||
              ((this._unmodified = !1),
              this._edgeInsets.interpolate(this._edgeInsets, u, 1),
              this._calcMatrices());
          }),
          (vi.centerPoint.get = function () {
            return this._edgeInsets.getCenter(this.width, this.height);
          }),
          (Lr.prototype.isPaddingEqual = function (u) {
            return this._edgeInsets.equals(u);
          }),
          (Lr.prototype.interpolatePadding = function (u, p, d) {
            (this._unmodified = !1),
              this._edgeInsets.interpolate(u, p, d),
              this._constrain(),
              this._calcMatrices();
          }),
          (Lr.prototype.coveringZoomLevel = function (u) {
            var p = (u.roundZoom ? Math.round : Math.floor)(
              this.zoom + this.scaleZoom(this.tileSize / u.tileSize)
            );
            return Math.max(0, p);
          }),
          (Lr.prototype.getVisibleUnwrappedCoordinates = function (u) {
            var p = [new a.UnwrappedTileID(0, u)];
            if (this._renderWorldCopies)
              for (
                var d = this.pointCoordinate(new a.Point(0, 0)),
                  g = this.pointCoordinate(new a.Point(this.width, 0)),
                  b = this.pointCoordinate(
                    new a.Point(this.width, this.height)
                  ),
                  S = this.pointCoordinate(new a.Point(0, this.height)),
                  w = Math.floor(Math.min(d.x, g.x, b.x, S.x)),
                  M = Math.floor(Math.max(d.x, g.x, b.x, S.x)),
                  B = w - 1;
                B <= M + 1;
                B++
              )
                B !== 0 && p.push(new a.UnwrappedTileID(B, u));
            return p;
          }),
          (Lr.prototype.coveringTiles = function (u) {
            var p = this.coveringZoomLevel(u),
              d = p;
            if (u.minzoom !== void 0 && p < u.minzoom) return [];
            u.maxzoom !== void 0 && p > u.maxzoom && (p = u.maxzoom);
            var g = a.MercatorCoordinate.fromLngLat(this.center),
              b = Math.pow(2, p),
              S = [b * g.x, b * g.y, 0],
              w = vd.fromInvProjectionMatrix(
                this.invProjMatrix,
                this.worldSize,
                p
              ),
              M = u.minzoom || 0;
            this.pitch <= 60 && this._edgeInsets.top < 0.1 && (M = p);
            var B = function (Ft) {
                return {
                  aabb: new zs([Ft * b, 0, 0], [(Ft + 1) * b, b, 0]),
                  zoom: 0,
                  x: 0,
                  y: 0,
                  wrap: Ft,
                  fullyVisible: !1,
                };
              },
              V = [],
              J = [],
              ne = p,
              re = u.reparseOverscaled ? d : p;
            if (this._renderWorldCopies)
              for (var _e = 1; _e <= 3; _e++) V.push(B(-_e)), V.push(B(_e));
            for (V.push(B(0)); V.length > 0; ) {
              var pe = V.pop(),
                Ce = pe.x,
                de = pe.y,
                we = pe.fullyVisible;
              if (!we) {
                var De = pe.aabb.intersects(w);
                if (De === 0) continue;
                we = De === 2;
              }
              var Ge = pe.aabb.distanceX(S),
                st = pe.aabb.distanceY(S),
                Je = Math.max(Math.abs(Ge), Math.abs(st));
              if (
                pe.zoom === ne ||
                (Je > 3 + (1 << (ne - pe.zoom)) - 2 && pe.zoom >= M)
              )
                J.push({
                  tileID: new a.OverscaledTileID(
                    pe.zoom === ne ? re : pe.zoom,
                    pe.wrap,
                    pe.zoom,
                    Ce,
                    de
                  ),
                  distanceSq: a.sqrLen([S[0] - 0.5 - Ce, S[1] - 0.5 - de]),
                });
              else
                for (var ht = 0; ht < 4; ht++) {
                  var Et = (Ce << 1) + (ht % 2),
                    jt = (de << 1) + (ht >> 1);
                  V.push({
                    aabb: pe.aabb.quadrant(ht),
                    zoom: pe.zoom + 1,
                    x: Et,
                    y: jt,
                    wrap: pe.wrap,
                    fullyVisible: we,
                  });
                }
            }
            return J.sort(function (Ft, sn) {
              return Ft.distanceSq - sn.distanceSq;
            }).map(function (Ft) {
              return Ft.tileID;
            });
          }),
          (Lr.prototype.resize = function (u, p) {
            (this.width = u),
              (this.height = p),
              (this.pixelsToGLUnits = [2 / u, -2 / p]),
              this._constrain(),
              this._calcMatrices();
          }),
          (vi.unmodified.get = function () {
            return this._unmodified;
          }),
          (Lr.prototype.zoomScale = function (u) {
            return Math.pow(2, u);
          }),
          (Lr.prototype.scaleZoom = function (u) {
            return Math.log(u) / Math.LN2;
          }),
          (Lr.prototype.project = function (u) {
            var p = a.clamp(
              u.lat,
              -this.maxValidLatitude,
              this.maxValidLatitude
            );
            return new a.Point(
              a.mercatorXfromLng(u.lng) * this.worldSize,
              a.mercatorYfromLat(p) * this.worldSize
            );
          }),
          (Lr.prototype.unproject = function (u) {
            return new a.MercatorCoordinate(
              u.x / this.worldSize,
              u.y / this.worldSize
            ).toLngLat();
          }),
          (vi.point.get = function () {
            return this.project(this.center);
          }),
          (Lr.prototype.setLocationAtPoint = function (u, p) {
            var d = this.pointCoordinate(p),
              g = this.pointCoordinate(this.centerPoint),
              b = this.locationCoordinate(u),
              S = new a.MercatorCoordinate(
                b.x - (d.x - g.x),
                b.y - (d.y - g.y)
              );
            (this.center = this.coordinateLocation(S)),
              this._renderWorldCopies && (this.center = this.center.wrap());
          }),
          (Lr.prototype.locationPoint = function (u) {
            return this.coordinatePoint(this.locationCoordinate(u));
          }),
          (Lr.prototype.pointLocation = function (u) {
            return this.coordinateLocation(this.pointCoordinate(u));
          }),
          (Lr.prototype.locationCoordinate = function (u) {
            return a.MercatorCoordinate.fromLngLat(u);
          }),
          (Lr.prototype.coordinateLocation = function (u) {
            return u.toLngLat();
          }),
          (Lr.prototype.pointCoordinate = function (u) {
            var p = [u.x, u.y, 0, 1],
              d = [u.x, u.y, 1, 1];
            a.transformMat4(p, p, this.pixelMatrixInverse),
              a.transformMat4(d, d, this.pixelMatrixInverse);
            var g = p[3],
              b = d[3],
              S = p[1] / g,
              w = d[1] / b,
              M = p[2] / g,
              B = d[2] / b,
              V = M === B ? 0 : (0 - M) / (B - M);
            return new a.MercatorCoordinate(
              a.number(p[0] / g, d[0] / b, V) / this.worldSize,
              a.number(S, w, V) / this.worldSize
            );
          }),
          (Lr.prototype.coordinatePoint = function (u) {
            var p = [u.x * this.worldSize, u.y * this.worldSize, 0, 1];
            return (
              a.transformMat4(p, p, this.pixelMatrix),
              new a.Point(p[0] / p[3], p[1] / p[3])
            );
          }),
          (Lr.prototype.getBounds = function () {
            return new a.LngLatBounds()
              .extend(this.pointLocation(new a.Point(0, 0)))
              .extend(this.pointLocation(new a.Point(this.width, 0)))
              .extend(this.pointLocation(new a.Point(this.width, this.height)))
              .extend(this.pointLocation(new a.Point(0, this.height)));
          }),
          (Lr.prototype.getMaxBounds = function () {
            return this.latRange &&
              this.latRange.length === 2 &&
              this.lngRange &&
              this.lngRange.length === 2
              ? new a.LngLatBounds(
                  [this.lngRange[0], this.latRange[0]],
                  [this.lngRange[1], this.latRange[1]]
                )
              : null;
          }),
          (Lr.prototype.setMaxBounds = function (u) {
            u
              ? ((this.lngRange = [u.getWest(), u.getEast()]),
                (this.latRange = [u.getSouth(), u.getNorth()]),
                this._constrain())
              : ((this.lngRange = null),
                (this.latRange = [
                  -this.maxValidLatitude,
                  this.maxValidLatitude,
                ]));
          }),
          (Lr.prototype.calculatePosMatrix = function (u, p) {
            p === void 0 && (p = !1);
            var d = u.key,
              g = p ? this._alignedPosMatrixCache : this._posMatrixCache;
            if (g[d]) return g[d];
            var b = u.canonical,
              S = this.worldSize / this.zoomScale(b.z),
              w = b.x + Math.pow(2, b.z) * u.wrap,
              M = a.identity(new Float64Array(16));
            return (
              a.translate(M, M, [w * S, b.y * S, 0]),
              a.scale(M, M, [S / a.EXTENT, S / a.EXTENT, 1]),
              a.multiply(M, p ? this.alignedProjMatrix : this.projMatrix, M),
              (g[d] = new Float32Array(M)),
              g[d]
            );
          }),
          (Lr.prototype.customLayerMatrix = function () {
            return this.mercatorMatrix.slice();
          }),
          (Lr.prototype._constrain = function () {
            if (
              this.center &&
              this.width &&
              this.height &&
              !this._constraining
            ) {
              this._constraining = !0;
              var u,
                p,
                d,
                g,
                b = -90,
                S = 90,
                w = -180,
                M = 180,
                B = this.size,
                V = this._unmodified;
              if (this.latRange) {
                var J = this.latRange;
                (b = a.mercatorYfromLat(J[1]) * this.worldSize),
                  (u =
                    (S = a.mercatorYfromLat(J[0]) * this.worldSize) - b < B.y
                      ? B.y / (S - b)
                      : 0);
              }
              if (this.lngRange) {
                var ne = this.lngRange;
                (w = a.mercatorXfromLng(ne[0]) * this.worldSize),
                  (p =
                    (M = a.mercatorXfromLng(ne[1]) * this.worldSize) - w < B.x
                      ? B.x / (M - w)
                      : 0);
              }
              var re = this.point,
                _e = Math.max(p || 0, u || 0);
              if (_e)
                return (
                  (this.center = this.unproject(
                    new a.Point(p ? (M + w) / 2 : re.x, u ? (S + b) / 2 : re.y)
                  )),
                  (this.zoom += this.scaleZoom(_e)),
                  (this._unmodified = V),
                  void (this._constraining = !1)
                );
              if (this.latRange) {
                var pe = re.y,
                  Ce = B.y / 2;
                pe - Ce < b && (g = b + Ce), pe + Ce > S && (g = S - Ce);
              }
              if (this.lngRange) {
                var de = re.x,
                  we = B.x / 2;
                de - we < w && (d = w + we), de + we > M && (d = M - we);
              }
              (d === void 0 && g === void 0) ||
                (this.center = this.unproject(
                  new a.Point(d !== void 0 ? d : re.x, g !== void 0 ? g : re.y)
                )),
                (this._unmodified = V),
                (this._constraining = !1);
            }
          }),
          (Lr.prototype._calcMatrices = function () {
            if (this.height) {
              var u = this.centerOffset;
              this.cameraToCenterDistance =
                (0.5 / Math.tan(this._fov / 2)) * this.height;
              var p = Math.PI / 2 + this._pitch,
                d = this._fov * (0.5 + u.y / this.height),
                g =
                  (Math.sin(d) * this.cameraToCenterDistance) /
                  Math.sin(a.clamp(Math.PI - p - d, 0.01, Math.PI - 0.01)),
                b = this.point,
                S = b.x,
                w = b.y,
                M =
                  1.01 *
                  (Math.cos(Math.PI / 2 - this._pitch) * g +
                    this.cameraToCenterDistance),
                B = this.height / 50,
                V = new Float64Array(16);
              a.perspective(V, this._fov, this.width / this.height, B, M),
                (V[8] = (2 * -u.x) / this.width),
                (V[9] = (2 * u.y) / this.height),
                a.scale(V, V, [1, -1, 1]),
                a.translate(V, V, [0, 0, -this.cameraToCenterDistance]),
                a.rotateX(V, V, this._pitch),
                a.rotateZ(V, V, this.angle),
                a.translate(V, V, [-S, -w, 0]),
                (this.mercatorMatrix = a.scale([], V, [
                  this.worldSize,
                  this.worldSize,
                  this.worldSize,
                ])),
                a.scale(V, V, [
                  1,
                  1,
                  a.mercatorZfromAltitude(1, this.center.lat) * this.worldSize,
                  1,
                ]),
                (this.projMatrix = V),
                (this.invProjMatrix = a.invert([], this.projMatrix));
              var J = (this.width % 2) / 2,
                ne = (this.height % 2) / 2,
                re = Math.cos(this.angle),
                _e = Math.sin(this.angle),
                pe = S - Math.round(S) + re * J + _e * ne,
                Ce = w - Math.round(w) + re * ne + _e * J,
                de = new Float64Array(V);
              if (
                (a.translate(de, de, [
                  pe > 0.5 ? pe - 1 : pe,
                  Ce > 0.5 ? Ce - 1 : Ce,
                  0,
                ]),
                (this.alignedProjMatrix = de),
                (V = a.create()),
                a.scale(V, V, [this.width / 2, -this.height / 2, 1]),
                a.translate(V, V, [1, -1, 0]),
                (this.labelPlaneMatrix = V),
                (V = a.create()),
                a.scale(V, V, [1, -1, 1]),
                a.translate(V, V, [-1, -1, 0]),
                a.scale(V, V, [2 / this.width, 2 / this.height, 1]),
                (this.glCoordMatrix = V),
                (this.pixelMatrix = a.multiply(
                  new Float64Array(16),
                  this.labelPlaneMatrix,
                  this.projMatrix
                )),
                !(V = a.invert(new Float64Array(16), this.pixelMatrix)))
              )
                throw new Error("failed to invert matrix");
              (this.pixelMatrixInverse = V),
                (this._posMatrixCache = {}),
                (this._alignedPosMatrixCache = {});
            }
          }),
          (Lr.prototype.maxPitchScaleFactor = function () {
            if (!this.pixelMatrixInverse) return 1;
            var u = this.pointCoordinate(new a.Point(0, 0)),
              p = [u.x * this.worldSize, u.y * this.worldSize, 0, 1];
            return (
              a.transformMat4(p, p, this.pixelMatrix)[3] /
              this.cameraToCenterDistance
            );
          }),
          (Lr.prototype.getCameraPoint = function () {
            var u = Math.tan(this._pitch) * (this.cameraToCenterDistance || 1);
            return this.centerPoint.add(new a.Point(0, u));
          }),
          (Lr.prototype.getCameraQueryGeometry = function (u) {
            var p = this.getCameraPoint();
            if (u.length === 1) return [u[0], p];
            for (
              var d = p.x, g = p.y, b = p.x, S = p.y, w = 0, M = u;
              w < M.length;
              w += 1
            ) {
              var B = M[w];
              (d = Math.min(d, B.x)),
                (g = Math.min(g, B.y)),
                (b = Math.max(b, B.x)),
                (S = Math.max(S, B.y));
            }
            return [
              new a.Point(d, g),
              new a.Point(b, g),
              new a.Point(b, S),
              new a.Point(d, S),
              new a.Point(d, g),
            ];
          }),
          Object.defineProperties(Lr.prototype, vi);
        var Zo = function (u) {
          var p, d, g, b;
          (this._hashName = u && encodeURIComponent(u)),
            a.bindAll(
              ["_getCurrentHash", "_onHashChange", "_updateHash"],
              this
            ),
            (this._updateHash =
              ((p = this._updateHashUnthrottled.bind(this)),
              (d = !1),
              (g = null),
              (b = function () {
                (g = null), d && (p(), (g = setTimeout(b, 300)), (d = !1));
              }),
              function () {
                return (d = !0), g || b(), g;
              }));
        };
        (Zo.prototype.addTo = function (u) {
          return (
            (this._map = u),
            a.window.addEventListener("hashchange", this._onHashChange, !1),
            this._map.on("moveend", this._updateHash),
            this
          );
        }),
          (Zo.prototype.remove = function () {
            return (
              a.window.removeEventListener(
                "hashchange",
                this._onHashChange,
                !1
              ),
              this._map.off("moveend", this._updateHash),
              clearTimeout(this._updateHash()),
              delete this._map,
              this
            );
          }),
          (Zo.prototype.getHashString = function (u) {
            var p = this._map.getCenter(),
              d = Math.round(100 * this._map.getZoom()) / 100,
              g = Math.ceil(
                (d * Math.LN2 + Math.log(512 / 360 / 0.5)) / Math.LN10
              ),
              b = Math.pow(10, g),
              S = Math.round(p.lng * b) / b,
              w = Math.round(p.lat * b) / b,
              M = this._map.getBearing(),
              B = this._map.getPitch(),
              V = "";
            if (
              ((V += u ? "/" + S + "/" + w + "/" + d : d + "/" + w + "/" + S),
              (M || B) && (V += "/" + Math.round(10 * M) / 10),
              B && (V += "/" + Math.round(B)),
              this._hashName)
            ) {
              var J = this._hashName,
                ne = !1,
                re = a.window.location.hash
                  .slice(1)
                  .split("&")
                  .map(function (_e) {
                    var pe = _e.split("=")[0];
                    return pe === J ? ((ne = !0), pe + "=" + V) : _e;
                  })
                  .filter(function (_e) {
                    return _e;
                  });
              return ne || re.push(J + "=" + V), "#" + re.join("&");
            }
            return "#" + V;
          }),
          (Zo.prototype._getCurrentHash = function () {
            var u,
              p = this,
              d = a.window.location.hash.replace("#", "");
            return this._hashName
              ? (d
                  .split("&")
                  .map(function (g) {
                    return g.split("=");
                  })
                  .forEach(function (g) {
                    g[0] === p._hashName && (u = g);
                  }),
                ((u && u[1]) || "").split("/"))
              : d.split("/");
          }),
          (Zo.prototype._onHashChange = function () {
            var u = this._getCurrentHash();
            if (
              u.length >= 3 &&
              !u.some(function (d) {
                return isNaN(d);
              })
            ) {
              var p =
                this._map.dragRotate.isEnabled() &&
                this._map.touchZoomRotate.isEnabled()
                  ? +(u[3] || 0)
                  : this._map.getBearing();
              return (
                this._map.jumpTo({
                  center: [+u[2], +u[1]],
                  zoom: +u[0],
                  bearing: p,
                  pitch: +(u[4] || 0),
                }),
                !0
              );
            }
            return !1;
          }),
          (Zo.prototype._updateHashUnthrottled = function () {
            var u = a.window.location.href.replace(
              /(#.+)?$/,
              this.getHashString()
            );
            try {
              a.window.history.replaceState(a.window.history.state, null, u);
            } catch {}
          });
        var Pu = { linearity: 0.3, easing: a.bezier(0, 0, 0.3, 1) },
          Yc = a.extend({ deceleration: 2500, maxSpeed: 1400 }, Pu),
          Ou = a.extend({ deceleration: 20, maxSpeed: 1400 }, Pu),
          Eh = a.extend({ deceleration: 1e3, maxSpeed: 360 }, Pu),
          _d = a.extend({ deceleration: 1e3, maxSpeed: 90 }, Pu),
          Lu = function (u) {
            (this._map = u), this.clear();
          };
        function Xl(u, p) {
          (!u.duration || u.duration < p.duration) &&
            ((u.duration = p.duration), (u.easing = p.easing));
        }
        function ya(u, p, d) {
          var g = d.maxSpeed,
            b = d.linearity,
            S = d.deceleration,
            w = a.clamp((u * b) / (p / 1e3), -g, g),
            M = Math.abs(w) / (S * b);
          return { easing: d.easing, duration: 1e3 * M, amount: w * (M / 2) };
        }
        (Lu.prototype.clear = function () {
          this._inertiaBuffer = [];
        }),
          (Lu.prototype.record = function (u) {
            this._drainInertiaBuffer(),
              this._inertiaBuffer.push({ time: a.browser.now(), settings: u });
          }),
          (Lu.prototype._drainInertiaBuffer = function () {
            for (
              var u = this._inertiaBuffer, p = a.browser.now();
              u.length > 0 && p - u[0].time > 160;

            )
              u.shift();
          }),
          (Lu.prototype._onMoveEnd = function (u) {
            if (
              (this._drainInertiaBuffer(), !(this._inertiaBuffer.length < 2))
            ) {
              for (
                var p = {
                    zoom: 0,
                    bearing: 0,
                    pitch: 0,
                    pan: new a.Point(0, 0),
                    pinchAround: void 0,
                    around: void 0,
                  },
                  d = 0,
                  g = this._inertiaBuffer;
                d < g.length;
                d += 1
              ) {
                var b = g[d].settings;
                (p.zoom += b.zoomDelta || 0),
                  (p.bearing += b.bearingDelta || 0),
                  (p.pitch += b.pitchDelta || 0),
                  b.panDelta && p.pan._add(b.panDelta),
                  b.around && (p.around = b.around),
                  b.pinchAround && (p.pinchAround = b.pinchAround);
              }
              var S =
                  this._inertiaBuffer[this._inertiaBuffer.length - 1].time -
                  this._inertiaBuffer[0].time,
                w = {};
              if (p.pan.mag()) {
                var M = ya(p.pan.mag(), S, a.extend({}, Yc, u || {}));
                (w.offset = p.pan.mult(M.amount / p.pan.mag())),
                  (w.center = this._map.transform.center),
                  Xl(w, M);
              }
              if (p.zoom) {
                var B = ya(p.zoom, S, Ou);
                (w.zoom = this._map.transform.zoom + B.amount), Xl(w, B);
              }
              if (p.bearing) {
                var V = ya(p.bearing, S, Eh);
                (w.bearing =
                  this._map.transform.bearing + a.clamp(V.amount, -179, 179)),
                  Xl(w, V);
              }
              if (p.pitch) {
                var J = ya(p.pitch, S, _d);
                (w.pitch = this._map.transform.pitch + J.amount), Xl(w, J);
              }
              if (w.zoom || w.bearing) {
                var ne = p.pinchAround === void 0 ? p.around : p.pinchAround;
                w.around = ne ? this._map.unproject(ne) : this._map.getCenter();
              }
              return this.clear(), a.extend(w, { noMoveStart: !0 });
            }
          });
        var Ci = (function (u) {
            function p(g, b, S, w) {
              w === void 0 && (w = {});
              var M = f.mousePos(b.getCanvasContainer(), S),
                B = b.unproject(M);
              u.call(
                this,
                g,
                a.extend({ point: M, lngLat: B, originalEvent: S }, w)
              ),
                (this._defaultPrevented = !1),
                (this.target = b);
            }
            u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p);
            var d = { defaultPrevented: { configurable: !0 } };
            return (
              (p.prototype.preventDefault = function () {
                this._defaultPrevented = !0;
              }),
              (d.defaultPrevented.get = function () {
                return this._defaultPrevented;
              }),
              Object.defineProperties(p.prototype, d),
              p
            );
          })(a.Event),
          qc = (function (u) {
            function p(g, b, S) {
              var w = g === "touchend" ? S.changedTouches : S.touches,
                M = f.touchPos(b.getCanvasContainer(), w),
                B = M.map(function (ne) {
                  return b.unproject(ne);
                }),
                V = M.reduce(function (ne, re, _e, pe) {
                  return ne.add(re.div(pe.length));
                }, new a.Point(0, 0)),
                J = b.unproject(V);
              u.call(this, g, {
                points: M,
                point: V,
                lngLats: B,
                lngLat: J,
                originalEvent: S,
              }),
                (this._defaultPrevented = !1);
            }
            u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p);
            var d = { defaultPrevented: { configurable: !0 } };
            return (
              (p.prototype.preventDefault = function () {
                this._defaultPrevented = !0;
              }),
              (d.defaultPrevented.get = function () {
                return this._defaultPrevented;
              }),
              Object.defineProperties(p.prototype, d),
              p
            );
          })(a.Event),
          S0 = (function (u) {
            function p(g, b, S) {
              u.call(this, g, { originalEvent: S }),
                (this._defaultPrevented = !1);
            }
            u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p);
            var d = { defaultPrevented: { configurable: !0 } };
            return (
              (p.prototype.preventDefault = function () {
                this._defaultPrevented = !0;
              }),
              (d.defaultPrevented.get = function () {
                return this._defaultPrevented;
              }),
              Object.defineProperties(p.prototype, d),
              p
            );
          })(a.Event),
          Zi = function (u, p) {
            (this._map = u), (this._clickTolerance = p.clickTolerance);
          };
        (Zi.prototype.reset = function () {
          delete this._mousedownPos;
        }),
          (Zi.prototype.wheel = function (u) {
            return this._firePreventable(new S0(u.type, this._map, u));
          }),
          (Zi.prototype.mousedown = function (u, p) {
            return (
              (this._mousedownPos = p),
              this._firePreventable(new Ci(u.type, this._map, u))
            );
          }),
          (Zi.prototype.mouseup = function (u) {
            this._map.fire(new Ci(u.type, this._map, u));
          }),
          (Zi.prototype.click = function (u, p) {
            (this._mousedownPos &&
              this._mousedownPos.dist(p) >= this._clickTolerance) ||
              this._map.fire(new Ci(u.type, this._map, u));
          }),
          (Zi.prototype.dblclick = function (u) {
            return this._firePreventable(new Ci(u.type, this._map, u));
          }),
          (Zi.prototype.mouseover = function (u) {
            this._map.fire(new Ci(u.type, this._map, u));
          }),
          (Zi.prototype.mouseout = function (u) {
            this._map.fire(new Ci(u.type, this._map, u));
          }),
          (Zi.prototype.touchstart = function (u) {
            return this._firePreventable(new qc(u.type, this._map, u));
          }),
          (Zi.prototype.touchmove = function (u) {
            this._map.fire(new qc(u.type, this._map, u));
          }),
          (Zi.prototype.touchend = function (u) {
            this._map.fire(new qc(u.type, this._map, u));
          }),
          (Zi.prototype.touchcancel = function (u) {
            this._map.fire(new qc(u.type, this._map, u));
          }),
          (Zi.prototype._firePreventable = function (u) {
            if ((this._map.fire(u), u.defaultPrevented)) return {};
          }),
          (Zi.prototype.isEnabled = function () {
            return !0;
          }),
          (Zi.prototype.isActive = function () {
            return !1;
          }),
          (Zi.prototype.enable = function () {}),
          (Zi.prototype.disable = function () {});
        var vn = function (u) {
          this._map = u;
        };
        (vn.prototype.reset = function () {
          (this._delayContextMenu = !1), delete this._contextMenuEvent;
        }),
          (vn.prototype.mousemove = function (u) {
            this._map.fire(new Ci(u.type, this._map, u));
          }),
          (vn.prototype.mousedown = function () {
            this._delayContextMenu = !0;
          }),
          (vn.prototype.mouseup = function () {
            (this._delayContextMenu = !1),
              this._contextMenuEvent &&
                (this._map.fire(
                  new Ci("contextmenu", this._map, this._contextMenuEvent)
                ),
                delete this._contextMenuEvent);
          }),
          (vn.prototype.contextmenu = function (u) {
            this._delayContextMenu
              ? (this._contextMenuEvent = u)
              : this._map.fire(new Ci(u.type, this._map, u)),
              this._map.listens("contextmenu") && u.preventDefault();
          }),
          (vn.prototype.isEnabled = function () {
            return !0;
          }),
          (vn.prototype.isActive = function () {
            return !1;
          }),
          (vn.prototype.enable = function () {}),
          (vn.prototype.disable = function () {});
        var bo = function (u, p) {
          (this._map = u),
            (this._el = u.getCanvasContainer()),
            (this._container = u.getContainer()),
            (this._clickTolerance = p.clickTolerance || 1);
        };
        function Du(u, p) {
          for (var d = {}, g = 0; g < u.length; g++) d[u[g].identifier] = p[g];
          return d;
        }
        (bo.prototype.isEnabled = function () {
          return !!this._enabled;
        }),
          (bo.prototype.isActive = function () {
            return !!this._active;
          }),
          (bo.prototype.enable = function () {
            this.isEnabled() || (this._enabled = !0);
          }),
          (bo.prototype.disable = function () {
            this.isEnabled() && (this._enabled = !1);
          }),
          (bo.prototype.mousedown = function (u, p) {
            this.isEnabled() &&
              u.shiftKey &&
              u.button === 0 &&
              (f.disableDrag(),
              (this._startPos = this._lastPos = p),
              (this._active = !0));
          }),
          (bo.prototype.mousemoveWindow = function (u, p) {
            if (this._active) {
              var d = p;
              if (
                !(
                  this._lastPos.equals(d) ||
                  (!this._box && d.dist(this._startPos) < this._clickTolerance)
                )
              ) {
                var g = this._startPos;
                (this._lastPos = d),
                  this._box ||
                    ((this._box = f.create(
                      "div",
                      "mapboxgl-boxzoom",
                      this._container
                    )),
                    this._container.classList.add("mapboxgl-crosshair"),
                    this._fireEvent("boxzoomstart", u));
                var b = Math.min(g.x, d.x),
                  S = Math.max(g.x, d.x),
                  w = Math.min(g.y, d.y),
                  M = Math.max(g.y, d.y);
                f.setTransform(this._box, "translate(" + b + "px," + w + "px)"),
                  (this._box.style.width = S - b + "px"),
                  (this._box.style.height = M - w + "px");
              }
            }
          }),
          (bo.prototype.mouseupWindow = function (u, p) {
            var d = this;
            if (this._active && u.button === 0) {
              var g = this._startPos,
                b = p;
              if ((this.reset(), f.suppressClick(), g.x !== b.x || g.y !== b.y))
                return (
                  this._map.fire(
                    new a.Event("boxzoomend", { originalEvent: u })
                  ),
                  {
                    cameraAnimation: function (S) {
                      return S.fitScreenCoordinates(g, b, d._map.getBearing(), {
                        linear: !0,
                      });
                    },
                  }
                );
              this._fireEvent("boxzoomcancel", u);
            }
          }),
          (bo.prototype.keydown = function (u) {
            this._active &&
              u.keyCode === 27 &&
              (this.reset(), this._fireEvent("boxzoomcancel", u));
          }),
          (bo.prototype.blur = function () {
            this.reset();
          }),
          (bo.prototype.reset = function () {
            (this._active = !1),
              this._container.classList.remove("mapboxgl-crosshair"),
              this._box && (f.remove(this._box), (this._box = null)),
              f.enableDrag(),
              delete this._startPos,
              delete this._lastPos;
          }),
          (bo.prototype._fireEvent = function (u, p) {
            return this._map.fire(new a.Event(u, { originalEvent: p }));
          });
        var $c = function (u) {
          this.reset(), (this.numTouches = u.numTouches);
        };
        ($c.prototype.reset = function () {
          delete this.centroid,
            delete this.startTime,
            delete this.touches,
            (this.aborted = !1);
        }),
          ($c.prototype.touchstart = function (u, p, d) {
            (this.centroid || d.length > this.numTouches) &&
              (this.aborted = !0),
              this.aborted ||
                (this.startTime === void 0 && (this.startTime = u.timeStamp),
                d.length === this.numTouches &&
                  ((this.centroid = (function (g) {
                    for (
                      var b = new a.Point(0, 0), S = 0, w = g;
                      S < w.length;
                      S += 1
                    )
                      b._add(w[S]);
                    return b.div(g.length);
                  })(p)),
                  (this.touches = Du(d, p))));
          }),
          ($c.prototype.touchmove = function (u, p, d) {
            if (!this.aborted && this.centroid) {
              var g = Du(d, p);
              for (var b in this.touches) {
                var S = g[b];
                (!S || S.dist(this.touches[b]) > 30) && (this.aborted = !0);
              }
            }
          }),
          ($c.prototype.touchend = function (u, p, d) {
            if (
              ((!this.centroid || u.timeStamp - this.startTime > 500) &&
                (this.aborted = !0),
              d.length === 0)
            ) {
              var g = !this.aborted && this.centroid;
              if ((this.reset(), g)) return g;
            }
          });
        var co = function (u) {
          (this.singleTap = new $c(u)),
            (this.numTaps = u.numTaps),
            this.reset();
        };
        (co.prototype.reset = function () {
          (this.lastTime = 1 / 0),
            delete this.lastTap,
            (this.count = 0),
            this.singleTap.reset();
        }),
          (co.prototype.touchstart = function (u, p, d) {
            this.singleTap.touchstart(u, p, d);
          }),
          (co.prototype.touchmove = function (u, p, d) {
            this.singleTap.touchmove(u, p, d);
          }),
          (co.prototype.touchend = function (u, p, d) {
            var g = this.singleTap.touchend(u, p, d);
            if (g) {
              var b = u.timeStamp - this.lastTime < 500,
                S = !this.lastTap || this.lastTap.dist(g) < 30;
              if (
                ((b && S) || this.reset(),
                this.count++,
                (this.lastTime = u.timeStamp),
                (this.lastTap = g),
                this.count === this.numTaps)
              )
                return this.reset(), g;
            }
          });
        var si = function () {
          (this._zoomIn = new co({ numTouches: 1, numTaps: 2 })),
            (this._zoomOut = new co({ numTouches: 2, numTaps: 1 })),
            this.reset();
        };
        (si.prototype.reset = function () {
          (this._active = !1), this._zoomIn.reset(), this._zoomOut.reset();
        }),
          (si.prototype.touchstart = function (u, p, d) {
            this._zoomIn.touchstart(u, p, d), this._zoomOut.touchstart(u, p, d);
          }),
          (si.prototype.touchmove = function (u, p, d) {
            this._zoomIn.touchmove(u, p, d), this._zoomOut.touchmove(u, p, d);
          }),
          (si.prototype.touchend = function (u, p, d) {
            var g = this,
              b = this._zoomIn.touchend(u, p, d),
              S = this._zoomOut.touchend(u, p, d);
            return b
              ? ((this._active = !0),
                u.preventDefault(),
                setTimeout(function () {
                  return g.reset();
                }, 0),
                {
                  cameraAnimation: function (w) {
                    return w.easeTo(
                      {
                        duration: 300,
                        zoom: w.getZoom() + 1,
                        around: w.unproject(b),
                      },
                      { originalEvent: u }
                    );
                  },
                })
              : S
              ? ((this._active = !0),
                u.preventDefault(),
                setTimeout(function () {
                  return g.reset();
                }, 0),
                {
                  cameraAnimation: function (w) {
                    return w.easeTo(
                      {
                        duration: 300,
                        zoom: w.getZoom() - 1,
                        around: w.unproject(S),
                      },
                      { originalEvent: u }
                    );
                  },
                })
              : void 0;
          }),
          (si.prototype.touchcancel = function () {
            this.reset();
          }),
          (si.prototype.enable = function () {
            this._enabled = !0;
          }),
          (si.prototype.disable = function () {
            (this._enabled = !1), this.reset();
          }),
          (si.prototype.isEnabled = function () {
            return this._enabled;
          }),
          (si.prototype.isActive = function () {
            return this._active;
          });
        var yd = { 0: 1, 2: 2 },
          Jt = function (u) {
            this.reset(), (this._clickTolerance = u.clickTolerance || 1);
          };
        (Jt.prototype.blur = function () {
          this.reset();
        }),
          (Jt.prototype.reset = function () {
            (this._active = !1),
              (this._moved = !1),
              delete this._lastPoint,
              delete this._eventButton;
          }),
          (Jt.prototype._correctButton = function (u, p) {
            return !1;
          }),
          (Jt.prototype._move = function (u, p) {
            return {};
          }),
          (Jt.prototype.mousedown = function (u, p) {
            if (!this._lastPoint) {
              var d = f.mouseButton(u);
              this._correctButton(u, d) &&
                ((this._lastPoint = p), (this._eventButton = d));
            }
          }),
          (Jt.prototype.mousemoveWindow = function (u, p) {
            var d = this._lastPoint;
            if (d) {
              if (
                (u.preventDefault(),
                (function (g, b) {
                  var S = yd[b];
                  return g.buttons === void 0 || (g.buttons & S) !== S;
                })(u, this._eventButton))
              )
                this.reset();
              else if (this._moved || !(p.dist(d) < this._clickTolerance))
                return (
                  (this._moved = !0), (this._lastPoint = p), this._move(d, p)
                );
            }
          }),
          (Jt.prototype.mouseupWindow = function (u) {
            this._lastPoint &&
              f.mouseButton(u) === this._eventButton &&
              (this._moved && f.suppressClick(), this.reset());
          }),
          (Jt.prototype.enable = function () {
            this._enabled = !0;
          }),
          (Jt.prototype.disable = function () {
            (this._enabled = !1), this.reset();
          }),
          (Jt.prototype.isEnabled = function () {
            return this._enabled;
          }),
          (Jt.prototype.isActive = function () {
            return this._active;
          });
        var _l = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.mousedown = function (d, g) {
                u.prototype.mousedown.call(this, d, g),
                  this._lastPoint && (this._active = !0);
              }),
              (p.prototype._correctButton = function (d, g) {
                return g === 0 && !d.ctrlKey;
              }),
              (p.prototype._move = function (d, g) {
                return { around: g, panDelta: g.sub(d) };
              }),
              p
            );
          })(Jt),
          Bu = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype._correctButton = function (d, g) {
                return (g === 0 && d.ctrlKey) || g === 2;
              }),
              (p.prototype._move = function (d, g) {
                var b = 0.8 * (g.x - d.x);
                if (b) return (this._active = !0), { bearingDelta: b };
              }),
              (p.prototype.contextmenu = function (d) {
                d.preventDefault();
              }),
              p
            );
          })(Jt),
          xd = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype._correctButton = function (d, g) {
                return (g === 0 && d.ctrlKey) || g === 2;
              }),
              (p.prototype._move = function (d, g) {
                var b = -0.5 * (g.y - d.y);
                if (b) return (this._active = !0), { pitchDelta: b };
              }),
              (p.prototype.contextmenu = function (d) {
                d.preventDefault();
              }),
              p
            );
          })(Jt),
          os = function (u) {
            (this._minTouches = 1),
              (this._clickTolerance = u.clickTolerance || 1),
              this.reset();
          };
        (os.prototype.reset = function () {
          (this._active = !1),
            (this._touches = {}),
            (this._sum = new a.Point(0, 0));
        }),
          (os.prototype.touchstart = function (u, p, d) {
            return this._calculateTransform(u, p, d);
          }),
          (os.prototype.touchmove = function (u, p, d) {
            if (this._active && !(d.length < this._minTouches))
              return u.preventDefault(), this._calculateTransform(u, p, d);
          }),
          (os.prototype.touchend = function (u, p, d) {
            this._calculateTransform(u, p, d),
              this._active && d.length < this._minTouches && this.reset();
          }),
          (os.prototype.touchcancel = function () {
            this.reset();
          }),
          (os.prototype._calculateTransform = function (u, p, d) {
            d.length > 0 && (this._active = !0);
            var g = Du(d, p),
              b = new a.Point(0, 0),
              S = new a.Point(0, 0),
              w = 0;
            for (var M in g) {
              var B = g[M],
                V = this._touches[M];
              V && (b._add(B), S._add(B.sub(V)), w++, (g[M] = B));
            }
            if (((this._touches = g), !(w < this._minTouches) && S.mag())) {
              var J = S.div(w);
              if (
                (this._sum._add(J), !(this._sum.mag() < this._clickTolerance))
              )
                return { around: b.div(w), panDelta: J };
            }
          }),
          (os.prototype.enable = function () {
            this._enabled = !0;
          }),
          (os.prototype.disable = function () {
            (this._enabled = !1), this.reset();
          }),
          (os.prototype.isEnabled = function () {
            return this._enabled;
          }),
          (os.prototype.isActive = function () {
            return this._active;
          });
        var Lo = function () {
          this.reset();
        };
        function bd(u, p, d) {
          for (var g = 0; g < u.length; g++)
            if (u[g].identifier === d) return p[g];
        }
        function Ed(u, p) {
          return Math.log(u / p) / Math.LN2;
        }
        (Lo.prototype.reset = function () {
          (this._active = !1), delete this._firstTwoTouches;
        }),
          (Lo.prototype._start = function (u) {}),
          (Lo.prototype._move = function (u, p, d) {
            return {};
          }),
          (Lo.prototype.touchstart = function (u, p, d) {
            this._firstTwoTouches ||
              d.length < 2 ||
              ((this._firstTwoTouches = [d[0].identifier, d[1].identifier]),
              this._start([p[0], p[1]]));
          }),
          (Lo.prototype.touchmove = function (u, p, d) {
            if (this._firstTwoTouches) {
              u.preventDefault();
              var g = this._firstTwoTouches,
                b = g[1],
                S = bd(d, p, g[0]),
                w = bd(d, p, b);
              if (S && w) {
                var M = this._aroundCenter ? null : S.add(w).div(2);
                return this._move([S, w], M, u);
              }
            }
          }),
          (Lo.prototype.touchend = function (u, p, d) {
            if (this._firstTwoTouches) {
              var g = this._firstTwoTouches,
                b = g[1],
                S = bd(d, p, g[0]),
                w = bd(d, p, b);
              (S && w) || (this._active && f.suppressClick(), this.reset());
            }
          }),
          (Lo.prototype.touchcancel = function () {
            this.reset();
          }),
          (Lo.prototype.enable = function (u) {
            (this._enabled = !0),
              (this._aroundCenter = !!u && u.around === "center");
          }),
          (Lo.prototype.disable = function () {
            (this._enabled = !1), this.reset();
          }),
          (Lo.prototype.isEnabled = function () {
            return this._enabled;
          }),
          (Lo.prototype.isActive = function () {
            return this._active;
          });
        var uo = (function (u) {
          function p() {
            u.apply(this, arguments);
          }
          return (
            u && (p.__proto__ = u),
            ((p.prototype = Object.create(u && u.prototype)).constructor = p),
            (p.prototype.reset = function () {
              u.prototype.reset.call(this),
                delete this._distance,
                delete this._startDistance;
            }),
            (p.prototype._start = function (d) {
              this._startDistance = this._distance = d[0].dist(d[1]);
            }),
            (p.prototype._move = function (d, g) {
              var b = this._distance;
              if (
                ((this._distance = d[0].dist(d[1])),
                this._active ||
                  !(Math.abs(Ed(this._distance, this._startDistance)) < 0.1))
              )
                return (
                  (this._active = !0),
                  { zoomDelta: Ed(this._distance, b), pinchAround: g }
                );
            }),
            p
          );
        })(Lo);
        function Vs(u, p) {
          return (180 * u.angleWith(p)) / Math.PI;
        }
        var Ah = (function (u) {
          function p() {
            u.apply(this, arguments);
          }
          return (
            u && (p.__proto__ = u),
            ((p.prototype = Object.create(u && u.prototype)).constructor = p),
            (p.prototype.reset = function () {
              u.prototype.reset.call(this),
                delete this._minDiameter,
                delete this._startVector,
                delete this._vector;
            }),
            (p.prototype._start = function (d) {
              (this._startVector = this._vector = d[0].sub(d[1])),
                (this._minDiameter = d[0].dist(d[1]));
            }),
            (p.prototype._move = function (d, g) {
              var b = this._vector;
              if (
                ((this._vector = d[0].sub(d[1])),
                this._active || !this._isBelowThreshold(this._vector))
              )
                return (
                  (this._active = !0),
                  { bearingDelta: Vs(this._vector, b), pinchAround: g }
                );
            }),
            (p.prototype._isBelowThreshold = function (d) {
              this._minDiameter = Math.min(this._minDiameter, d.mag());
              var g = (25 / (Math.PI * this._minDiameter)) * 360,
                b = Vs(d, this._startVector);
              return Math.abs(b) < g;
            }),
            p
          );
        })(Lo);
        function Kc(u) {
          return Math.abs(u.y) > Math.abs(u.x);
        }
        var Ad = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.reset = function () {
                u.prototype.reset.call(this),
                  (this._valid = void 0),
                  delete this._firstMove,
                  delete this._lastPoints;
              }),
              (p.prototype._start = function (d) {
                (this._lastPoints = d),
                  Kc(d[0].sub(d[1])) && (this._valid = !1);
              }),
              (p.prototype._move = function (d, g, b) {
                var S = d[0].sub(this._lastPoints[0]),
                  w = d[1].sub(this._lastPoints[1]);
                if (
                  ((this._valid = this.gestureBeginsVertically(
                    S,
                    w,
                    b.timeStamp
                  )),
                  this._valid)
                )
                  return (
                    (this._lastPoints = d),
                    (this._active = !0),
                    { pitchDelta: ((S.y + w.y) / 2) * -0.5 }
                  );
              }),
              (p.prototype.gestureBeginsVertically = function (d, g, b) {
                if (this._valid !== void 0) return this._valid;
                var S = d.mag() >= 2,
                  w = g.mag() >= 2;
                if (S || w) {
                  if (!S || !w)
                    return (
                      this._firstMove === void 0 && (this._firstMove = b),
                      b - this._firstMove < 100 && void 0
                    );
                  var M = d.y > 0 == g.y > 0;
                  return Kc(d) && Kc(g) && M;
                }
              }),
              p
            );
          })(Lo),
          w0 = { panStep: 100, bearingStep: 15, pitchStep: 10 },
          Do = function () {
            var u = w0;
            (this._panStep = u.panStep),
              (this._bearingStep = u.bearingStep),
              (this._pitchStep = u.pitchStep),
              (this._rotationDisabled = !1);
          };
        function Yo(u) {
          return u * (2 - u);
        }
        (Do.prototype.blur = function () {
          this.reset();
        }),
          (Do.prototype.reset = function () {
            this._active = !1;
          }),
          (Do.prototype.keydown = function (u) {
            var p = this;
            if (!(u.altKey || u.ctrlKey || u.metaKey)) {
              var d = 0,
                g = 0,
                b = 0,
                S = 0,
                w = 0;
              switch (u.keyCode) {
                case 61:
                case 107:
                case 171:
                case 187:
                  d = 1;
                  break;
                case 189:
                case 109:
                case 173:
                  d = -1;
                  break;
                case 37:
                  u.shiftKey ? (g = -1) : (u.preventDefault(), (S = -1));
                  break;
                case 39:
                  u.shiftKey ? (g = 1) : (u.preventDefault(), (S = 1));
                  break;
                case 38:
                  u.shiftKey ? (b = 1) : (u.preventDefault(), (w = -1));
                  break;
                case 40:
                  u.shiftKey ? (b = -1) : (u.preventDefault(), (w = 1));
                  break;
                default:
                  return;
              }
              return (
                this._rotationDisabled && ((g = 0), (b = 0)),
                {
                  cameraAnimation: function (M) {
                    var B = M.getZoom();
                    M.easeTo(
                      {
                        duration: 300,
                        easeId: "keyboardHandler",
                        easing: Yo,
                        zoom: d ? Math.round(B) + d * (u.shiftKey ? 2 : 1) : B,
                        bearing: M.getBearing() + g * p._bearingStep,
                        pitch: M.getPitch() + b * p._pitchStep,
                        offset: [-S * p._panStep, -w * p._panStep],
                        center: M.getCenter(),
                      },
                      { originalEvent: u }
                    );
                  },
                }
              );
            }
          }),
          (Do.prototype.enable = function () {
            this._enabled = !0;
          }),
          (Do.prototype.disable = function () {
            (this._enabled = !1), this.reset();
          }),
          (Do.prototype.isEnabled = function () {
            return this._enabled;
          }),
          (Do.prototype.isActive = function () {
            return this._active;
          }),
          (Do.prototype.disableRotation = function () {
            this._rotationDisabled = !0;
          }),
          (Do.prototype.enableRotation = function () {
            this._rotationDisabled = !1;
          });
        var ur = function (u, p) {
          (this._map = u),
            (this._el = u.getCanvasContainer()),
            (this._handler = p),
            (this._delta = 0),
            (this._defaultZoomRate = 0.01),
            (this._wheelZoomRate = 1 / 450),
            a.bindAll(["_onTimeout"], this);
        };
        (ur.prototype.setZoomRate = function (u) {
          this._defaultZoomRate = u;
        }),
          (ur.prototype.setWheelZoomRate = function (u) {
            this._wheelZoomRate = u;
          }),
          (ur.prototype.isEnabled = function () {
            return !!this._enabled;
          }),
          (ur.prototype.isActive = function () {
            return !!this._active || this._finishTimeout !== void 0;
          }),
          (ur.prototype.isZooming = function () {
            return !!this._zooming;
          }),
          (ur.prototype.enable = function (u) {
            this.isEnabled() ||
              ((this._enabled = !0),
              (this._aroundCenter = u && u.around === "center"));
          }),
          (ur.prototype.disable = function () {
            this.isEnabled() && (this._enabled = !1);
          }),
          (ur.prototype.wheel = function (u) {
            if (this.isEnabled()) {
              var p =
                  u.deltaMode === a.window.WheelEvent.DOM_DELTA_LINE
                    ? 40 * u.deltaY
                    : u.deltaY,
                d = a.browser.now(),
                g = d - (this._lastWheelEventTime || 0);
              (this._lastWheelEventTime = d),
                p !== 0 && p % 4.000244140625 == 0
                  ? (this._type = "wheel")
                  : p !== 0 && Math.abs(p) < 4
                  ? (this._type = "trackpad")
                  : g > 400
                  ? ((this._type = null),
                    (this._lastValue = p),
                    (this._timeout = setTimeout(this._onTimeout, 40, u)))
                  : this._type ||
                    ((this._type =
                      Math.abs(g * p) < 200 ? "trackpad" : "wheel"),
                    this._timeout &&
                      (clearTimeout(this._timeout),
                      (this._timeout = null),
                      (p += this._lastValue))),
                u.shiftKey && p && (p /= 4),
                this._type &&
                  ((this._lastWheelEvent = u),
                  (this._delta -= p),
                  this._active || this._start(u)),
                u.preventDefault();
            }
          }),
          (ur.prototype._onTimeout = function (u) {
            (this._type = "wheel"),
              (this._delta -= this._lastValue),
              this._active || this._start(u);
          }),
          (ur.prototype._start = function (u) {
            if (this._delta) {
              this._frameId && (this._frameId = null),
                (this._active = !0),
                this.isZooming() || (this._zooming = !0),
                this._finishTimeout &&
                  (clearTimeout(this._finishTimeout),
                  delete this._finishTimeout);
              var p = f.mousePos(this._el, u);
              (this._around = a.LngLat.convert(
                this._aroundCenter
                  ? this._map.getCenter()
                  : this._map.unproject(p)
              )),
                (this._aroundPoint = this._map.transform.locationPoint(
                  this._around
                )),
                this._frameId ||
                  ((this._frameId = !0), this._handler._triggerRenderFrame());
            }
          }),
          (ur.prototype.renderFrame = function () {
            var u = this;
            if (this._frameId && ((this._frameId = null), this.isActive())) {
              var p = this._map.transform;
              if (this._delta !== 0) {
                var d =
                    this._type === "wheel" &&
                    Math.abs(this._delta) > 4.000244140625
                      ? this._wheelZoomRate
                      : this._defaultZoomRate,
                  g = 2 / (1 + Math.exp(-Math.abs(this._delta * d)));
                this._delta < 0 && g !== 0 && (g = 1 / g);
                var b =
                  typeof this._targetZoom == "number"
                    ? p.zoomScale(this._targetZoom)
                    : p.scale;
                (this._targetZoom = Math.min(
                  p.maxZoom,
                  Math.max(p.minZoom, p.scaleZoom(b * g))
                )),
                  this._type === "wheel" &&
                    ((this._startZoom = p.zoom),
                    (this._easing = this._smoothOutEasing(200))),
                  (this._delta = 0);
              }
              var S,
                w =
                  typeof this._targetZoom == "number"
                    ? this._targetZoom
                    : p.zoom,
                M = this._startZoom,
                B = this._easing,
                V = !1;
              if (this._type === "wheel" && M && B) {
                var J = Math.min(
                    (a.browser.now() - this._lastWheelEventTime) / 200,
                    1
                  ),
                  ne = B(J);
                (S = a.number(M, w, ne)),
                  J < 1 ? this._frameId || (this._frameId = !0) : (V = !0);
              } else (S = w), (V = !0);
              return (
                (this._active = !0),
                V &&
                  ((this._active = !1),
                  (this._finishTimeout = setTimeout(function () {
                    (u._zooming = !1),
                      u._handler._triggerRenderFrame(),
                      delete u._targetZoom,
                      delete u._finishTimeout;
                  }, 200))),
                {
                  noInertia: !0,
                  needsRenderFrame: !V,
                  zoomDelta: S - p.zoom,
                  around: this._aroundPoint,
                  originalEvent: this._lastWheelEvent,
                }
              );
            }
          }),
          (ur.prototype._smoothOutEasing = function (u) {
            var p = a.ease;
            if (this._prevEase) {
              var d = this._prevEase,
                g = (a.browser.now() - d.start) / d.duration,
                b = d.easing(g + 0.01) - d.easing(g),
                S = (0.27 / Math.sqrt(b * b + 1e-4)) * 0.01,
                w = Math.sqrt(0.0729 - S * S);
              p = a.bezier(S, w, 0.25, 1);
            }
            return (
              (this._prevEase = {
                start: a.browser.now(),
                duration: u,
                easing: p,
              }),
              p
            );
          }),
          (ur.prototype.blur = function () {
            this.reset();
          }),
          (ur.prototype.reset = function () {
            this._active = !1;
          });
        var qo = function (u, p) {
          (this._clickZoom = u), (this._tapZoom = p);
        };
        (qo.prototype.enable = function () {
          this._clickZoom.enable(), this._tapZoom.enable();
        }),
          (qo.prototype.disable = function () {
            this._clickZoom.disable(), this._tapZoom.disable();
          }),
          (qo.prototype.isEnabled = function () {
            return this._clickZoom.isEnabled() && this._tapZoom.isEnabled();
          }),
          (qo.prototype.isActive = function () {
            return this._clickZoom.isActive() || this._tapZoom.isActive();
          });
        var $o = function () {
          this.reset();
        };
        ($o.prototype.reset = function () {
          this._active = !1;
        }),
          ($o.prototype.blur = function () {
            this.reset();
          }),
          ($o.prototype.dblclick = function (u, p) {
            return (
              u.preventDefault(),
              {
                cameraAnimation: function (d) {
                  d.easeTo(
                    {
                      duration: 300,
                      zoom: d.getZoom() + (u.shiftKey ? -1 : 1),
                      around: d.unproject(p),
                    },
                    { originalEvent: u }
                  );
                },
              }
            );
          }),
          ($o.prototype.enable = function () {
            this._enabled = !0;
          }),
          ($o.prototype.disable = function () {
            (this._enabled = !1), this.reset();
          }),
          ($o.prototype.isEnabled = function () {
            return this._enabled;
          }),
          ($o.prototype.isActive = function () {
            return this._active;
          });
        var Da = function () {
          (this._tap = new co({ numTouches: 1, numTaps: 1 })), this.reset();
        };
        (Da.prototype.reset = function () {
          (this._active = !1),
            delete this._swipePoint,
            delete this._swipeTouch,
            delete this._tapTime,
            this._tap.reset();
        }),
          (Da.prototype.touchstart = function (u, p, d) {
            this._swipePoint ||
              (this._tapTime &&
                u.timeStamp - this._tapTime > 500 &&
                this.reset(),
              this._tapTime
                ? d.length > 0 &&
                  ((this._swipePoint = p[0]),
                  (this._swipeTouch = d[0].identifier))
                : this._tap.touchstart(u, p, d));
          }),
          (Da.prototype.touchmove = function (u, p, d) {
            if (this._tapTime) {
              if (this._swipePoint) {
                if (d[0].identifier !== this._swipeTouch) return;
                var g = p[0],
                  b = g.y - this._swipePoint.y;
                return (
                  (this._swipePoint = g),
                  u.preventDefault(),
                  (this._active = !0),
                  { zoomDelta: b / 128 }
                );
              }
            } else this._tap.touchmove(u, p, d);
          }),
          (Da.prototype.touchend = function (u, p, d) {
            this._tapTime
              ? this._swipePoint && d.length === 0 && this.reset()
              : this._tap.touchend(u, p, d) && (this._tapTime = u.timeStamp);
          }),
          (Da.prototype.touchcancel = function () {
            this.reset();
          }),
          (Da.prototype.enable = function () {
            this._enabled = !0;
          }),
          (Da.prototype.disable = function () {
            (this._enabled = !1), this.reset();
          }),
          (Da.prototype.isEnabled = function () {
            return this._enabled;
          }),
          (Da.prototype.isActive = function () {
            return this._active;
          });
        var Gl = function (u, p, d) {
          (this._el = u), (this._mousePan = p), (this._touchPan = d);
        };
        (Gl.prototype.enable = function (u) {
          (this._inertiaOptions = u || {}),
            this._mousePan.enable(),
            this._touchPan.enable(),
            this._el.classList.add("mapboxgl-touch-drag-pan");
        }),
          (Gl.prototype.disable = function () {
            this._mousePan.disable(),
              this._touchPan.disable(),
              this._el.classList.remove("mapboxgl-touch-drag-pan");
          }),
          (Gl.prototype.isEnabled = function () {
            return this._mousePan.isEnabled() && this._touchPan.isEnabled();
          }),
          (Gl.prototype.isActive = function () {
            return this._mousePan.isActive() || this._touchPan.isActive();
          });
        var yl = function (u, p, d) {
          (this._pitchWithRotate = u.pitchWithRotate),
            (this._mouseRotate = p),
            (this._mousePitch = d);
        };
        (yl.prototype.enable = function () {
          this._mouseRotate.enable(),
            this._pitchWithRotate && this._mousePitch.enable();
        }),
          (yl.prototype.disable = function () {
            this._mouseRotate.disable(), this._mousePitch.disable();
          }),
          (yl.prototype.isEnabled = function () {
            return (
              this._mouseRotate.isEnabled() &&
              (!this._pitchWithRotate || this._mousePitch.isEnabled())
            );
          }),
          (yl.prototype.isActive = function () {
            return this._mouseRotate.isActive() || this._mousePitch.isActive();
          });
        var ss = function (u, p, d, g) {
          (this._el = u),
            (this._touchZoom = p),
            (this._touchRotate = d),
            (this._tapDragZoom = g),
            (this._rotationDisabled = !1),
            (this._enabled = !0);
        };
        (ss.prototype.enable = function (u) {
          this._touchZoom.enable(u),
            this._rotationDisabled || this._touchRotate.enable(u),
            this._tapDragZoom.enable(),
            this._el.classList.add("mapboxgl-touch-zoom-rotate");
        }),
          (ss.prototype.disable = function () {
            this._touchZoom.disable(),
              this._touchRotate.disable(),
              this._tapDragZoom.disable(),
              this._el.classList.remove("mapboxgl-touch-zoom-rotate");
          }),
          (ss.prototype.isEnabled = function () {
            return (
              this._touchZoom.isEnabled() &&
              (this._rotationDisabled || this._touchRotate.isEnabled()) &&
              this._tapDragZoom.isEnabled()
            );
          }),
          (ss.prototype.isActive = function () {
            return (
              this._touchZoom.isActive() ||
              this._touchRotate.isActive() ||
              this._tapDragZoom.isActive()
            );
          }),
          (ss.prototype.disableRotation = function () {
            (this._rotationDisabled = !0), this._touchRotate.disable();
          }),
          (ss.prototype.enableRotation = function () {
            (this._rotationDisabled = !1),
              this._touchZoom.isEnabled() && this._touchRotate.enable();
          });
        var Ja = function (u) {
            return u.zoom || u.drag || u.pitch || u.rotate;
          },
          Qc = (function (u) {
            function p() {
              u.apply(this, arguments);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              p
            );
          })(a.Event);
        function Rn(u) {
          return (
            (u.panDelta && u.panDelta.mag()) ||
            u.zoomDelta ||
            u.bearingDelta ||
            u.pitchDelta
          );
        }
        var bn = function (u, p) {
          (this._map = u),
            (this._el = this._map.getCanvasContainer()),
            (this._handlers = []),
            (this._handlersById = {}),
            (this._changes = []),
            (this._inertia = new Lu(u)),
            (this._bearingSnap = p.bearingSnap),
            (this._previousActiveHandlers = {}),
            (this._eventsInProgress = {}),
            this._addDefaultHandlers(p),
            a.bindAll(["handleEvent", "handleWindowEvent"], this);
          var d = this._el;
          this._listeners = [
            [d, "touchstart", { passive: !0 }],
            [d, "touchmove", { passive: !1 }],
            [d, "touchend", void 0],
            [d, "touchcancel", void 0],
            [d, "mousedown", void 0],
            [d, "mousemove", void 0],
            [d, "mouseup", void 0],
            [a.window.document, "mousemove", { capture: !0 }],
            [a.window.document, "mouseup", void 0],
            [d, "mouseover", void 0],
            [d, "mouseout", void 0],
            [d, "dblclick", void 0],
            [d, "click", void 0],
            [d, "keydown", { capture: !1 }],
            [d, "keyup", void 0],
            [d, "wheel", { passive: !1 }],
            [d, "contextmenu", void 0],
            [a.window, "blur", void 0],
          ];
          for (var g = 0, b = this._listeners; g < b.length; g += 1) {
            var S = b[g],
              w = S[0];
            f.addEventListener(
              w,
              S[1],
              w === a.window.document
                ? this.handleWindowEvent
                : this.handleEvent,
              S[2]
            );
          }
        };
        (bn.prototype.destroy = function () {
          for (var u = 0, p = this._listeners; u < p.length; u += 1) {
            var d = p[u],
              g = d[0];
            f.removeEventListener(
              g,
              d[1],
              g === a.window.document
                ? this.handleWindowEvent
                : this.handleEvent,
              d[2]
            );
          }
        }),
          (bn.prototype._addDefaultHandlers = function (u) {
            var p = this._map,
              d = p.getCanvasContainer();
            this._add("mapEvent", new Zi(p, u));
            var g = (p.boxZoom = new bo(p, u));
            this._add("boxZoom", g);
            var b = new si(),
              S = new $o();
            (p.doubleClickZoom = new qo(S, b)),
              this._add("tapZoom", b),
              this._add("clickZoom", S);
            var w = new Da();
            this._add("tapDragZoom", w);
            var M = (p.touchPitch = new Ad());
            this._add("touchPitch", M);
            var B = new Bu(u),
              V = new xd(u);
            (p.dragRotate = new yl(u, B, V)),
              this._add("mouseRotate", B, ["mousePitch"]),
              this._add("mousePitch", V, ["mouseRotate"]);
            var J = new _l(u),
              ne = new os(u);
            (p.dragPan = new Gl(d, J, ne)),
              this._add("mousePan", J),
              this._add("touchPan", ne, ["touchZoom", "touchRotate"]);
            var re = new Ah(),
              _e = new uo();
            (p.touchZoomRotate = new ss(d, _e, re, w)),
              this._add("touchRotate", re, ["touchPan", "touchZoom"]),
              this._add("touchZoom", _e, ["touchPan", "touchRotate"]);
            var pe = (p.scrollZoom = new ur(p, this));
            this._add("scrollZoom", pe, ["mousePan"]);
            var Ce = (p.keyboard = new Do());
            this._add("keyboard", Ce),
              this._add("blockableMapEvent", new vn(p));
            for (
              var de = 0,
                we = [
                  "boxZoom",
                  "doubleClickZoom",
                  "tapDragZoom",
                  "touchPitch",
                  "dragRotate",
                  "dragPan",
                  "touchZoomRotate",
                  "scrollZoom",
                  "keyboard",
                ];
              de < we.length;
              de += 1
            ) {
              var De = we[de];
              u.interactive && u[De] && p[De].enable(u[De]);
            }
          }),
          (bn.prototype._add = function (u, p, d) {
            this._handlers.push({ handlerName: u, handler: p, allowed: d }),
              (this._handlersById[u] = p);
          }),
          (bn.prototype.stop = function (u) {
            if (!this._updatingCamera) {
              for (var p = 0, d = this._handlers; p < d.length; p += 1)
                d[p].handler.reset();
              this._inertia.clear(),
                this._fireEvents({}, {}, u),
                (this._changes = []);
            }
          }),
          (bn.prototype.isActive = function () {
            for (var u = 0, p = this._handlers; u < p.length; u += 1)
              if (p[u].handler.isActive()) return !0;
            return !1;
          }),
          (bn.prototype.isZooming = function () {
            return (
              !!this._eventsInProgress.zoom || this._map.scrollZoom.isZooming()
            );
          }),
          (bn.prototype.isRotating = function () {
            return !!this._eventsInProgress.rotate;
          }),
          (bn.prototype.isMoving = function () {
            return !!Ja(this._eventsInProgress) || this.isZooming();
          }),
          (bn.prototype._blockedByActive = function (u, p, d) {
            for (var g in u) if (g !== d && (!p || p.indexOf(g) < 0)) return !0;
            return !1;
          }),
          (bn.prototype.handleWindowEvent = function (u) {
            this.handleEvent(u, u.type + "Window");
          }),
          (bn.prototype._getMapTouches = function (u) {
            for (var p = [], d = 0, g = u; d < g.length; d += 1) {
              var b = g[d];
              this._el.contains(b.target) && p.push(b);
            }
            return p;
          }),
          (bn.prototype.handleEvent = function (u, p) {
            this._updatingCamera = !0;
            for (
              var d = u.type === "renderFrame" ? void 0 : u,
                g = { needsRenderFrame: !1 },
                b = {},
                S = {},
                w = u.touches ? this._getMapTouches(u.touches) : void 0,
                M = w ? f.touchPos(this._el, w) : f.mousePos(this._el, u),
                B = 0,
                V = this._handlers;
              B < V.length;
              B += 1
            ) {
              var J = V[B],
                ne = J.handlerName,
                re = J.handler,
                _e = J.allowed;
              if (re.isEnabled()) {
                var pe = void 0;
                this._blockedByActive(S, _e, ne)
                  ? re.reset()
                  : re[p || u.type] &&
                    ((pe = re[p || u.type](u, M, w)),
                    this.mergeHandlerResult(g, b, pe, ne, d),
                    pe && pe.needsRenderFrame && this._triggerRenderFrame()),
                  (pe || re.isActive()) && (S[ne] = re);
              }
            }
            var Ce = {};
            for (var de in this._previousActiveHandlers) S[de] || (Ce[de] = d);
            (this._previousActiveHandlers = S),
              (Object.keys(Ce).length || Rn(g)) &&
                (this._changes.push([g, b, Ce]), this._triggerRenderFrame()),
              (Object.keys(S).length || Rn(g)) && this._map._stop(!0),
              (this._updatingCamera = !1);
            var we = g.cameraAnimation;
            we &&
              (this._inertia.clear(),
              this._fireEvents({}, {}, !0),
              (this._changes = []),
              we(this._map));
          }),
          (bn.prototype.mergeHandlerResult = function (u, p, d, g, b) {
            if (d) {
              a.extend(u, d);
              var S = { handlerName: g, originalEvent: d.originalEvent || b };
              d.zoomDelta !== void 0 && (p.zoom = S),
                d.panDelta !== void 0 && (p.drag = S),
                d.pitchDelta !== void 0 && (p.pitch = S),
                d.bearingDelta !== void 0 && (p.rotate = S);
            }
          }),
          (bn.prototype._applyChanges = function () {
            for (
              var u = {}, p = {}, d = {}, g = 0, b = this._changes;
              g < b.length;
              g += 1
            ) {
              var S = b[g],
                w = S[0],
                M = S[1],
                B = S[2];
              w.panDelta &&
                (u.panDelta = (u.panDelta || new a.Point(0, 0))._add(
                  w.panDelta
                )),
                w.zoomDelta && (u.zoomDelta = (u.zoomDelta || 0) + w.zoomDelta),
                w.bearingDelta &&
                  (u.bearingDelta = (u.bearingDelta || 0) + w.bearingDelta),
                w.pitchDelta &&
                  (u.pitchDelta = (u.pitchDelta || 0) + w.pitchDelta),
                w.around !== void 0 && (u.around = w.around),
                w.pinchAround !== void 0 && (u.pinchAround = w.pinchAround),
                w.noInertia && (u.noInertia = w.noInertia),
                a.extend(p, M),
                a.extend(d, B);
            }
            this._updateMapTransform(u, p, d), (this._changes = []);
          }),
          (bn.prototype._updateMapTransform = function (u, p, d) {
            var g = this._map,
              b = g.transform;
            if (!Rn(u)) return this._fireEvents(p, d, !0);
            var S = u.panDelta,
              w = u.zoomDelta,
              M = u.bearingDelta,
              B = u.pitchDelta,
              V = u.around,
              J = u.pinchAround;
            J !== void 0 && (V = J),
              g._stop(!0),
              (V = V || g.transform.centerPoint);
            var ne = b.pointLocation(S ? V.sub(S) : V);
            M && (b.bearing += M),
              B && (b.pitch += B),
              w && (b.zoom += w),
              b.setLocationAtPoint(ne, V),
              this._map._update(),
              u.noInertia || this._inertia.record(u),
              this._fireEvents(p, d, !0);
          }),
          (bn.prototype._fireEvents = function (u, p, d) {
            var g = this,
              b = Ja(this._eventsInProgress),
              S = Ja(u),
              w = {};
            for (var M in u)
              this._eventsInProgress[M] ||
                (w[M + "start"] = u[M].originalEvent),
                (this._eventsInProgress[M] = u[M]);
            for (var B in (!b &&
              S &&
              this._fireEvent("movestart", S.originalEvent),
            w))
              this._fireEvent(B, w[B]);
            for (var V in (S && this._fireEvent("move", S.originalEvent), u))
              this._fireEvent(V, u[V].originalEvent);
            var J,
              ne = {};
            for (var re in this._eventsInProgress) {
              var _e = this._eventsInProgress[re],
                pe = _e.handlerName,
                Ce = _e.originalEvent;
              this._handlersById[pe].isActive() ||
                (delete this._eventsInProgress[re],
                (ne[re + "end"] = J = p[pe] || Ce));
            }
            for (var de in ne) this._fireEvent(de, ne[de]);
            var we = Ja(this._eventsInProgress);
            if (d && (b || S) && !we) {
              this._updatingCamera = !0;
              var De = this._inertia._onMoveEnd(
                  this._map.dragPan._inertiaOptions
                ),
                Ge = function (st) {
                  return (
                    st !== 0 && -g._bearingSnap < st && st < g._bearingSnap
                  );
                };
              De
                ? (Ge(De.bearing || this._map.getBearing()) && (De.bearing = 0),
                  this._map.easeTo(De, { originalEvent: J }))
                : (this._map.fire(new a.Event("moveend", { originalEvent: J })),
                  Ge(this._map.getBearing()) && this._map.resetNorth()),
                (this._updatingCamera = !1);
            }
          }),
          (bn.prototype._fireEvent = function (u, p) {
            this._map.fire(new a.Event(u, p ? { originalEvent: p } : {}));
          }),
          (bn.prototype._requestFrame = function () {
            var u = this;
            return (
              this._map.triggerRepaint(),
              this._map._renderTaskQueue.add(function (p) {
                delete u._frameId,
                  u.handleEvent(new Qc("renderFrame", { timeStamp: p })),
                  u._applyChanges();
              })
            );
          }),
          (bn.prototype._triggerRenderFrame = function () {
            this._frameId === void 0 && (this._frameId = this._requestFrame());
          });
        var Bo = (function (u) {
            function p(d, g) {
              u.call(this),
                (this._moving = !1),
                (this._zooming = !1),
                (this.transform = d),
                (this._bearingSnap = g.bearingSnap),
                a.bindAll(["_renderFrameCallback"], this);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.getCenter = function () {
                return new a.LngLat(
                  this.transform.center.lng,
                  this.transform.center.lat
                );
              }),
              (p.prototype.setCenter = function (d, g) {
                return this.jumpTo({ center: d }, g);
              }),
              (p.prototype.panBy = function (d, g, b) {
                return (
                  (d = a.Point.convert(d).mult(-1)),
                  this.panTo(
                    this.transform.center,
                    a.extend({ offset: d }, g),
                    b
                  )
                );
              }),
              (p.prototype.panTo = function (d, g, b) {
                return this.easeTo(a.extend({ center: d }, g), b);
              }),
              (p.prototype.getZoom = function () {
                return this.transform.zoom;
              }),
              (p.prototype.setZoom = function (d, g) {
                return this.jumpTo({ zoom: d }, g), this;
              }),
              (p.prototype.zoomTo = function (d, g, b) {
                return this.easeTo(a.extend({ zoom: d }, g), b);
              }),
              (p.prototype.zoomIn = function (d, g) {
                return this.zoomTo(this.getZoom() + 1, d, g), this;
              }),
              (p.prototype.zoomOut = function (d, g) {
                return this.zoomTo(this.getZoom() - 1, d, g), this;
              }),
              (p.prototype.getBearing = function () {
                return this.transform.bearing;
              }),
              (p.prototype.setBearing = function (d, g) {
                return this.jumpTo({ bearing: d }, g), this;
              }),
              (p.prototype.getPadding = function () {
                return this.transform.padding;
              }),
              (p.prototype.setPadding = function (d, g) {
                return this.jumpTo({ padding: d }, g), this;
              }),
              (p.prototype.rotateTo = function (d, g, b) {
                return this.easeTo(a.extend({ bearing: d }, g), b);
              }),
              (p.prototype.resetNorth = function (d, g) {
                return (
                  this.rotateTo(0, a.extend({ duration: 1e3 }, d), g), this
                );
              }),
              (p.prototype.resetNorthPitch = function (d, g) {
                return (
                  this.easeTo(
                    a.extend({ bearing: 0, pitch: 0, duration: 1e3 }, d),
                    g
                  ),
                  this
                );
              }),
              (p.prototype.snapToNorth = function (d, g) {
                return Math.abs(this.getBearing()) < this._bearingSnap
                  ? this.resetNorth(d, g)
                  : this;
              }),
              (p.prototype.getPitch = function () {
                return this.transform.pitch;
              }),
              (p.prototype.setPitch = function (d, g) {
                return this.jumpTo({ pitch: d }, g), this;
              }),
              (p.prototype.cameraForBounds = function (d, g) {
                d = a.LngLatBounds.convert(d);
                var b = (g && g.bearing) || 0;
                return this._cameraForBoxAndBearing(
                  d.getNorthWest(),
                  d.getSouthEast(),
                  b,
                  g
                );
              }),
              (p.prototype._cameraForBoxAndBearing = function (d, g, b, S) {
                var w = { top: 0, bottom: 0, right: 0, left: 0 };
                if (
                  typeof (S = a.extend(
                    {
                      padding: w,
                      offset: [0, 0],
                      maxZoom: this.transform.maxZoom,
                    },
                    S
                  )).padding == "number"
                ) {
                  var M = S.padding;
                  S.padding = { top: M, bottom: M, right: M, left: M };
                }
                S.padding = a.extend(w, S.padding);
                var B = this.transform,
                  V = B.padding,
                  J = B.project(a.LngLat.convert(d)),
                  ne = B.project(a.LngLat.convert(g)),
                  re = J.rotate((-b * Math.PI) / 180),
                  _e = ne.rotate((-b * Math.PI) / 180),
                  pe = new a.Point(Math.max(re.x, _e.x), Math.max(re.y, _e.y)),
                  Ce = new a.Point(Math.min(re.x, _e.x), Math.min(re.y, _e.y)),
                  de = pe.sub(Ce),
                  we =
                    (B.width -
                      (V.left + V.right + S.padding.left + S.padding.right)) /
                    de.x,
                  De =
                    (B.height -
                      (V.top + V.bottom + S.padding.top + S.padding.bottom)) /
                    de.y;
                if (!(De < 0 || we < 0)) {
                  var Ge = Math.min(
                      B.scaleZoom(B.scale * Math.min(we, De)),
                      S.maxZoom
                    ),
                    st =
                      typeof S.offset.x == "number"
                        ? new a.Point(S.offset.x, S.offset.y)
                        : a.Point.convert(S.offset),
                    Je = new a.Point(
                      (S.padding.left - S.padding.right) / 2,
                      (S.padding.top - S.padding.bottom) / 2
                    ).rotate((b * Math.PI) / 180),
                    ht = st.add(Je).mult(B.scale / B.zoomScale(Ge));
                  return {
                    center: B.unproject(J.add(ne).div(2).sub(ht)),
                    zoom: Ge,
                    bearing: b,
                  };
                }
                a.warnOnce(
                  "Map cannot fit within canvas with the given bounds, padding, and/or offset."
                );
              }),
              (p.prototype.fitBounds = function (d, g, b) {
                return this._fitInternal(this.cameraForBounds(d, g), g, b);
              }),
              (p.prototype.fitScreenCoordinates = function (d, g, b, S, w) {
                return this._fitInternal(
                  this._cameraForBoxAndBearing(
                    this.transform.pointLocation(a.Point.convert(d)),
                    this.transform.pointLocation(a.Point.convert(g)),
                    b,
                    S
                  ),
                  S,
                  w
                );
              }),
              (p.prototype._fitInternal = function (d, g, b) {
                return d
                  ? (delete (g = a.extend(d, g)).padding,
                    g.linear ? this.easeTo(g, b) : this.flyTo(g, b))
                  : this;
              }),
              (p.prototype.jumpTo = function (d, g) {
                this.stop();
                var b = this.transform,
                  S = !1,
                  w = !1,
                  M = !1;
                return (
                  "zoom" in d &&
                    b.zoom !== +d.zoom &&
                    ((S = !0), (b.zoom = +d.zoom)),
                  d.center !== void 0 &&
                    (b.center = a.LngLat.convert(d.center)),
                  "bearing" in d &&
                    b.bearing !== +d.bearing &&
                    ((w = !0), (b.bearing = +d.bearing)),
                  "pitch" in d &&
                    b.pitch !== +d.pitch &&
                    ((M = !0), (b.pitch = +d.pitch)),
                  d.padding == null ||
                    b.isPaddingEqual(d.padding) ||
                    (b.padding = d.padding),
                  this.fire(new a.Event("movestart", g)).fire(
                    new a.Event("move", g)
                  ),
                  S &&
                    this.fire(new a.Event("zoomstart", g))
                      .fire(new a.Event("zoom", g))
                      .fire(new a.Event("zoomend", g)),
                  w &&
                    this.fire(new a.Event("rotatestart", g))
                      .fire(new a.Event("rotate", g))
                      .fire(new a.Event("rotateend", g)),
                  M &&
                    this.fire(new a.Event("pitchstart", g))
                      .fire(new a.Event("pitch", g))
                      .fire(new a.Event("pitchend", g)),
                  this.fire(new a.Event("moveend", g))
                );
              }),
              (p.prototype.easeTo = function (d, g) {
                var b = this;
                this._stop(!1, d.easeId),
                  ((d = a.extend(
                    { offset: [0, 0], duration: 500, easing: a.ease },
                    d
                  )).animate === !1 ||
                    (!d.essential && a.browser.prefersReducedMotion)) &&
                    (d.duration = 0);
                var S = this.transform,
                  w = this.getZoom(),
                  M = this.getBearing(),
                  B = this.getPitch(),
                  V = this.getPadding(),
                  J = "zoom" in d ? +d.zoom : w,
                  ne =
                    "bearing" in d ? this._normalizeBearing(d.bearing, M) : M,
                  re = "pitch" in d ? +d.pitch : B,
                  _e = "padding" in d ? d.padding : S.padding,
                  pe = a.Point.convert(d.offset),
                  Ce = S.centerPoint.add(pe),
                  de = S.pointLocation(Ce),
                  we = a.LngLat.convert(d.center || de);
                this._normalizeCenter(we);
                var De,
                  Ge,
                  st = S.project(de),
                  Je = S.project(we).sub(st),
                  ht = S.zoomScale(J - w);
                d.around &&
                  ((De = a.LngLat.convert(d.around)),
                  (Ge = S.locationPoint(De)));
                var Et = {
                  moving: this._moving,
                  zooming: this._zooming,
                  rotating: this._rotating,
                  pitching: this._pitching,
                };
                return (
                  (this._zooming = this._zooming || J !== w),
                  (this._rotating = this._rotating || M !== ne),
                  (this._pitching = this._pitching || re !== B),
                  (this._padding = !S.isPaddingEqual(_e)),
                  (this._easeId = d.easeId),
                  this._prepareEase(g, d.noMoveStart, Et),
                  this._ease(
                    function (jt) {
                      if (
                        (b._zooming && (S.zoom = a.number(w, J, jt)),
                        b._rotating && (S.bearing = a.number(M, ne, jt)),
                        b._pitching && (S.pitch = a.number(B, re, jt)),
                        b._padding &&
                          (S.interpolatePadding(V, _e, jt),
                          (Ce = S.centerPoint.add(pe))),
                        De)
                      )
                        S.setLocationAtPoint(De, Ge);
                      else {
                        var Ft = S.zoomScale(S.zoom - w),
                          sn = J > w ? Math.min(2, ht) : Math.max(0.5, ht),
                          In = Math.pow(sn, 1 - jt),
                          Bn = S.unproject(st.add(Je.mult(jt * In)).mult(Ft));
                        S.setLocationAtPoint(
                          S.renderWorldCopies ? Bn.wrap() : Bn,
                          Ce
                        );
                      }
                      b._fireMoveEvents(g);
                    },
                    function (jt) {
                      b._afterEase(g, jt);
                    },
                    d
                  ),
                  this
                );
              }),
              (p.prototype._prepareEase = function (d, g, b) {
                b === void 0 && (b = {}),
                  (this._moving = !0),
                  g || b.moving || this.fire(new a.Event("movestart", d)),
                  this._zooming &&
                    !b.zooming &&
                    this.fire(new a.Event("zoomstart", d)),
                  this._rotating &&
                    !b.rotating &&
                    this.fire(new a.Event("rotatestart", d)),
                  this._pitching &&
                    !b.pitching &&
                    this.fire(new a.Event("pitchstart", d));
              }),
              (p.prototype._fireMoveEvents = function (d) {
                this.fire(new a.Event("move", d)),
                  this._zooming && this.fire(new a.Event("zoom", d)),
                  this._rotating && this.fire(new a.Event("rotate", d)),
                  this._pitching && this.fire(new a.Event("pitch", d));
              }),
              (p.prototype._afterEase = function (d, g) {
                if (!this._easeId || !g || this._easeId !== g) {
                  delete this._easeId;
                  var b = this._zooming,
                    S = this._rotating,
                    w = this._pitching;
                  (this._moving = !1),
                    (this._zooming = !1),
                    (this._rotating = !1),
                    (this._pitching = !1),
                    (this._padding = !1),
                    b && this.fire(new a.Event("zoomend", d)),
                    S && this.fire(new a.Event("rotateend", d)),
                    w && this.fire(new a.Event("pitchend", d)),
                    this.fire(new a.Event("moveend", d));
                }
              }),
              (p.prototype.flyTo = function (d, g) {
                var b = this;
                if (!d.essential && a.browser.prefersReducedMotion) {
                  var S = a.pick(d, [
                    "center",
                    "zoom",
                    "bearing",
                    "pitch",
                    "around",
                  ]);
                  return this.jumpTo(S, g);
                }
                this.stop(),
                  (d = a.extend(
                    { offset: [0, 0], speed: 1.2, curve: 1.42, easing: a.ease },
                    d
                  ));
                var w = this.transform,
                  M = this.getZoom(),
                  B = this.getBearing(),
                  V = this.getPitch(),
                  J = this.getPadding(),
                  ne = "zoom" in d ? a.clamp(+d.zoom, w.minZoom, w.maxZoom) : M,
                  re =
                    "bearing" in d ? this._normalizeBearing(d.bearing, B) : B,
                  _e = "pitch" in d ? +d.pitch : V,
                  pe = "padding" in d ? d.padding : w.padding,
                  Ce = w.zoomScale(ne - M),
                  de = a.Point.convert(d.offset),
                  we = w.centerPoint.add(de),
                  De = w.pointLocation(we),
                  Ge = a.LngLat.convert(d.center || De);
                this._normalizeCenter(Ge);
                var st = w.project(De),
                  Je = w.project(Ge).sub(st),
                  ht = d.curve,
                  Et = Math.max(w.width, w.height),
                  jt = Et / Ce,
                  Ft = Je.mag();
                if ("minZoom" in d) {
                  var sn = a.clamp(
                      Math.min(d.minZoom, M, ne),
                      w.minZoom,
                      w.maxZoom
                    ),
                    In = Et / w.zoomScale(sn - M);
                  ht = Math.sqrt((In / Ft) * 2);
                }
                var Bn = ht * ht;
                function Dn(Gn) {
                  var Hn =
                    (jt * jt - Et * Et + (Gn ? -1 : 1) * Bn * Bn * Ft * Ft) /
                    (2 * (Gn ? jt : Et) * Bn * Ft);
                  return Math.log(Math.sqrt(Hn * Hn + 1) - Hn);
                }
                function Fr(Gn) {
                  return (Math.exp(Gn) - Math.exp(-Gn)) / 2;
                }
                function pn(Gn) {
                  return (Math.exp(Gn) + Math.exp(-Gn)) / 2;
                }
                var $n = Dn(0),
                  dr = function (Gn) {
                    return pn($n) / pn($n + ht * Gn);
                  },
                  Yn = function (Gn) {
                    return (
                      (Et *
                        ((pn($n) * (Fr((Hn = $n + ht * Gn)) / pn(Hn)) -
                          Fr($n)) /
                          Bn)) /
                      Ft
                    );
                    var Hn;
                  },
                  Xn = (Dn(1) - $n) / ht;
                if (Math.abs(Ft) < 1e-6 || !isFinite(Xn)) {
                  if (Math.abs(Et - jt) < 1e-6) return this.easeTo(d, g);
                  var cr = jt < Et ? -1 : 1;
                  (Xn = Math.abs(Math.log(jt / Et)) / ht),
                    (Yn = function () {
                      return 0;
                    }),
                    (dr = function (Gn) {
                      return Math.exp(cr * ht * Gn);
                    });
                }
                return (
                  (d.duration =
                    "duration" in d
                      ? +d.duration
                      : (1e3 * Xn) /
                        ("screenSpeed" in d ? +d.screenSpeed / ht : +d.speed)),
                  d.maxDuration &&
                    d.duration > d.maxDuration &&
                    (d.duration = 0),
                  (this._zooming = !0),
                  (this._rotating = B !== re),
                  (this._pitching = _e !== V),
                  (this._padding = !w.isPaddingEqual(pe)),
                  this._prepareEase(g, !1),
                  this._ease(
                    function (Gn) {
                      var Hn = Gn * Xn,
                        na = 1 / dr(Hn);
                      (w.zoom = Gn === 1 ? ne : M + w.scaleZoom(na)),
                        b._rotating && (w.bearing = a.number(B, re, Gn)),
                        b._pitching && (w.pitch = a.number(V, _e, Gn)),
                        b._padding &&
                          (w.interpolatePadding(J, pe, Gn),
                          (we = w.centerPoint.add(de)));
                      var Mi =
                        Gn === 1
                          ? Ge
                          : w.unproject(st.add(Je.mult(Yn(Hn))).mult(na));
                      w.setLocationAtPoint(
                        w.renderWorldCopies ? Mi.wrap() : Mi,
                        we
                      ),
                        b._fireMoveEvents(g);
                    },
                    function () {
                      return b._afterEase(g);
                    },
                    d
                  ),
                  this
                );
              }),
              (p.prototype.isEasing = function () {
                return !!this._easeFrameId;
              }),
              (p.prototype.stop = function () {
                return this._stop();
              }),
              (p.prototype._stop = function (d, g) {
                if (
                  (this._easeFrameId &&
                    (this._cancelRenderFrame(this._easeFrameId),
                    delete this._easeFrameId,
                    delete this._onEaseFrame),
                  this._onEaseEnd)
                ) {
                  var b = this._onEaseEnd;
                  delete this._onEaseEnd, b.call(this, g);
                }
                if (!d) {
                  var S = this.handlers;
                  S && S.stop(!1);
                }
                return this;
              }),
              (p.prototype._ease = function (d, g, b) {
                b.animate === !1 || b.duration === 0
                  ? (d(1), g())
                  : ((this._easeStart = a.browser.now()),
                    (this._easeOptions = b),
                    (this._onEaseFrame = d),
                    (this._onEaseEnd = g),
                    (this._easeFrameId = this._requestRenderFrame(
                      this._renderFrameCallback
                    )));
              }),
              (p.prototype._renderFrameCallback = function () {
                var d = Math.min(
                  (a.browser.now() - this._easeStart) /
                    this._easeOptions.duration,
                  1
                );
                this._onEaseFrame(this._easeOptions.easing(d)),
                  d < 1
                    ? (this._easeFrameId = this._requestRenderFrame(
                        this._renderFrameCallback
                      ))
                    : this.stop();
              }),
              (p.prototype._normalizeBearing = function (d, g) {
                d = a.wrap(d, -180, 180);
                var b = Math.abs(d - g);
                return (
                  Math.abs(d - 360 - g) < b && (d -= 360),
                  Math.abs(d + 360 - g) < b && (d += 360),
                  d
                );
              }),
              (p.prototype._normalizeCenter = function (d) {
                var g = this.transform;
                if (g.renderWorldCopies && !g.lngRange) {
                  var b = d.lng - g.center.lng;
                  d.lng += b > 180 ? -360 : b < -180 ? 360 : 0;
                }
              }),
              p
            );
          })(a.Evented),
          eo = function (u) {
            u === void 0 && (u = {}),
              (this.options = u),
              a.bindAll(
                [
                  "_toggleAttribution",
                  "_updateEditLink",
                  "_updateData",
                  "_updateCompact",
                ],
                this
              );
          };
        (eo.prototype.getDefaultPosition = function () {
          return "bottom-right";
        }),
          (eo.prototype.onAdd = function (u) {
            var p = this.options && this.options.compact;
            return (
              (this._map = u),
              (this._container = f.create(
                "div",
                "mapboxgl-ctrl mapboxgl-ctrl-attrib"
              )),
              (this._compactButton = f.create(
                "button",
                "mapboxgl-ctrl-attrib-button",
                this._container
              )),
              this._compactButton.addEventListener(
                "click",
                this._toggleAttribution
              ),
              this._setElementTitle(this._compactButton, "ToggleAttribution"),
              (this._innerContainer = f.create(
                "div",
                "mapboxgl-ctrl-attrib-inner",
                this._container
              )),
              this._innerContainer.setAttribute("role", "list"),
              p && this._container.classList.add("mapboxgl-compact"),
              this._updateAttributions(),
              this._updateEditLink(),
              this._map.on("styledata", this._updateData),
              this._map.on("sourcedata", this._updateData),
              this._map.on("moveend", this._updateEditLink),
              p === void 0 &&
                (this._map.on("resize", this._updateCompact),
                this._updateCompact()),
              this._container
            );
          }),
          (eo.prototype.onRemove = function () {
            f.remove(this._container),
              this._map.off("styledata", this._updateData),
              this._map.off("sourcedata", this._updateData),
              this._map.off("moveend", this._updateEditLink),
              this._map.off("resize", this._updateCompact),
              (this._map = void 0),
              (this._attribHTML = void 0);
          }),
          (eo.prototype._setElementTitle = function (u, p) {
            var d = this._map._getUIString("AttributionControl." + p);
            (u.title = d), u.setAttribute("aria-label", d);
          }),
          (eo.prototype._toggleAttribution = function () {
            this._container.classList.contains("mapboxgl-compact-show")
              ? (this._container.classList.remove("mapboxgl-compact-show"),
                this._compactButton.setAttribute("aria-pressed", "false"))
              : (this._container.classList.add("mapboxgl-compact-show"),
                this._compactButton.setAttribute("aria-pressed", "true"));
          }),
          (eo.prototype._updateEditLink = function () {
            var u = this._editLink;
            u ||
              (u = this._editLink =
                this._container.querySelector(".mapbox-improve-map"));
            var p = [
              { key: "owner", value: this.styleOwner },
              { key: "id", value: this.styleId },
              {
                key: "access_token",
                value:
                  this._map._requestManager._customAccessToken ||
                  a.config.ACCESS_TOKEN,
              },
            ];
            if (u) {
              var d = p.reduce(function (g, b, S) {
                return (
                  b.value &&
                    (g +=
                      b.key + "=" + b.value + (S < p.length - 1 ? "&" : "")),
                  g
                );
              }, "?");
              (u.href =
                a.config.FEEDBACK_URL +
                "/" +
                d +
                (this._map._hash ? this._map._hash.getHashString(!0) : "")),
                (u.rel = "noopener nofollow"),
                this._setElementTitle(u, "MapFeedback");
            }
          }),
          (eo.prototype._updateData = function (u) {
            !u ||
              (u.sourceDataType !== "metadata" &&
                u.sourceDataType !== "visibility" &&
                u.dataType !== "style") ||
              (this._updateAttributions(), this._updateEditLink());
          }),
          (eo.prototype._updateAttributions = function () {
            if (this._map.style) {
              var u = [];
              if (
                (this.options.customAttribution &&
                  (Array.isArray(this.options.customAttribution)
                    ? (u = u.concat(
                        this.options.customAttribution.map(function (M) {
                          return typeof M != "string" ? "" : M;
                        })
                      ))
                    : typeof this.options.customAttribution == "string" &&
                      u.push(this.options.customAttribution)),
                this._map.style.stylesheet)
              ) {
                var p = this._map.style.stylesheet;
                (this.styleOwner = p.owner), (this.styleId = p.id);
              }
              var d = this._map.style.sourceCaches;
              for (var g in d) {
                var b = d[g];
                if (b.used) {
                  var S = b.getSource();
                  S.attribution &&
                    u.indexOf(S.attribution) < 0 &&
                    u.push(S.attribution);
                }
              }
              u.sort(function (M, B) {
                return M.length - B.length;
              });
              var w = (u = u.filter(function (M, B) {
                for (var V = B + 1; V < u.length; V++)
                  if (u[V].indexOf(M) >= 0) return !1;
                return !0;
              })).join(" | ");
              w !== this._attribHTML &&
                ((this._attribHTML = w),
                u.length
                  ? ((this._innerContainer.innerHTML = w),
                    this._container.classList.remove("mapboxgl-attrib-empty"))
                  : this._container.classList.add("mapboxgl-attrib-empty"),
                (this._editLink = null));
            }
          }),
          (eo.prototype._updateCompact = function () {
            this._map.getCanvasContainer().offsetWidth <= 640
              ? this._container.classList.add("mapboxgl-compact")
              : this._container.classList.remove(
                  "mapboxgl-compact",
                  "mapboxgl-compact-show"
                );
          });
        var Es = function () {
          a.bindAll(["_updateLogo"], this), a.bindAll(["_updateCompact"], this);
        };
        (Es.prototype.onAdd = function (u) {
          (this._map = u), (this._container = f.create("div", "mapboxgl-ctrl"));
          var p = f.create("a", "mapboxgl-ctrl-logo");
          return (
            (p.target = "_blank"),
            (p.rel = "noopener nofollow"),
            (p.href = "https://www.mapbox.com/"),
            p.setAttribute(
              "aria-label",
              this._map._getUIString("LogoControl.Title")
            ),
            p.setAttribute("rel", "noopener nofollow"),
            this._container.appendChild(p),
            (this._container.style.display = "none"),
            this._map.on("sourcedata", this._updateLogo),
            this._updateLogo(),
            this._map.on("resize", this._updateCompact),
            this._updateCompact(),
            this._container
          );
        }),
          (Es.prototype.onRemove = function () {
            f.remove(this._container),
              this._map.off("sourcedata", this._updateLogo),
              this._map.off("resize", this._updateCompact);
          }),
          (Es.prototype.getDefaultPosition = function () {
            return "bottom-left";
          }),
          (Es.prototype._updateLogo = function (u) {
            (u && u.sourceDataType !== "metadata") ||
              (this._container.style.display = this._logoRequired()
                ? "block"
                : "none");
          }),
          (Es.prototype._logoRequired = function () {
            if (this._map.style) {
              var u = this._map.style.sourceCaches;
              for (var p in u) if (u[p].getSource().mapbox_logo) return !0;
              return !1;
            }
          }),
          (Es.prototype._updateCompact = function () {
            var u = this._container.children;
            if (u.length) {
              var p = u[0];
              this._map.getCanvasContainer().offsetWidth < 250
                ? p.classList.add("mapboxgl-compact")
                : p.classList.remove("mapboxgl-compact");
            }
          });
        var Ni = function () {
          (this._queue = []),
            (this._id = 0),
            (this._cleared = !1),
            (this._currentlyRunning = !1);
        };
        (Ni.prototype.add = function (u) {
          var p = ++this._id;
          return this._queue.push({ callback: u, id: p, cancelled: !1 }), p;
        }),
          (Ni.prototype.remove = function (u) {
            for (
              var p = this._currentlyRunning,
                d = 0,
                g = p ? this._queue.concat(p) : this._queue;
              d < g.length;
              d += 1
            ) {
              var b = g[d];
              if (b.id === u) return void (b.cancelled = !0);
            }
          }),
          (Ni.prototype.run = function (u) {
            u === void 0 && (u = 0);
            var p = (this._currentlyRunning = this._queue);
            this._queue = [];
            for (var d = 0, g = p; d < g.length; d += 1) {
              var b = g[d];
              if (!b.cancelled && (b.callback(u), this._cleared)) break;
            }
            (this._cleared = !1), (this._currentlyRunning = !1);
          }),
          (Ni.prototype.clear = function () {
            this._currentlyRunning && (this._cleared = !0), (this._queue = []);
          });
        var ls = {
            "AttributionControl.ToggleAttribution": "Toggle attribution",
            "AttributionControl.MapFeedback": "Map feedback",
            "FullscreenControl.Enter": "Enter fullscreen",
            "FullscreenControl.Exit": "Exit fullscreen",
            "GeolocateControl.FindMyLocation": "Find my location",
            "GeolocateControl.LocationNotAvailable": "Location not available",
            "LogoControl.Title": "Mapbox logo",
            "NavigationControl.ResetBearing": "Reset bearing to north",
            "NavigationControl.ZoomIn": "Zoom in",
            "NavigationControl.ZoomOut": "Zoom out",
            "ScaleControl.Feet": "ft",
            "ScaleControl.Meters": "m",
            "ScaleControl.Kilometers": "km",
            "ScaleControl.Miles": "mi",
            "ScaleControl.NauticalMiles": "nm",
          },
          xl = a.window.HTMLImageElement,
          Ac = a.window.HTMLElement,
          Yr = a.window.ImageBitmap,
          xa = {
            center: [0, 0],
            zoom: 0,
            bearing: 0,
            pitch: 0,
            minZoom: -2,
            maxZoom: 22,
            minPitch: 0,
            maxPitch: 60,
            interactive: !0,
            scrollZoom: !0,
            boxZoom: !0,
            dragRotate: !0,
            dragPan: !0,
            keyboard: !0,
            doubleClickZoom: !0,
            touchZoomRotate: !0,
            touchPitch: !0,
            bearingSnap: 7,
            clickTolerance: 3,
            pitchWithRotate: !0,
            hash: !1,
            attributionControl: !0,
            failIfMajorPerformanceCaveat: !1,
            preserveDrawingBuffer: !1,
            trackResize: !0,
            renderWorldCopies: !0,
            refreshExpiredTiles: !0,
            maxTileCacheSize: null,
            localIdeographFontFamily: "sans-serif",
            transformRequest: null,
            accessToken: null,
            fadeDuration: 300,
            crossSourceCollisions: !0,
          },
          C0 = (function (u) {
            function p(g) {
              var b = this;
              if (
                (g = a.extend({}, xa, g)).minZoom != null &&
                g.maxZoom != null &&
                g.minZoom > g.maxZoom
              )
                throw new Error(
                  "maxZoom must be greater than or equal to minZoom"
                );
              if (
                g.minPitch != null &&
                g.maxPitch != null &&
                g.minPitch > g.maxPitch
              )
                throw new Error(
                  "maxPitch must be greater than or equal to minPitch"
                );
              if (g.minPitch != null && g.minPitch < 0)
                throw new Error("minPitch must be greater than or equal to 0");
              if (g.maxPitch != null && g.maxPitch > 60)
                throw new Error("maxPitch must be less than or equal to 60");
              var S = new Lr(
                g.minZoom,
                g.maxZoom,
                g.minPitch,
                g.maxPitch,
                g.renderWorldCopies
              );
              if (
                (u.call(this, S, g),
                (this._interactive = g.interactive),
                (this._maxTileCacheSize = g.maxTileCacheSize),
                (this._failIfMajorPerformanceCaveat =
                  g.failIfMajorPerformanceCaveat),
                (this._preserveDrawingBuffer = g.preserveDrawingBuffer),
                (this._antialias = g.antialias),
                (this._trackResize = g.trackResize),
                (this._bearingSnap = g.bearingSnap),
                (this._refreshExpiredTiles = g.refreshExpiredTiles),
                (this._fadeDuration = g.fadeDuration),
                (this._crossSourceCollisions = g.crossSourceCollisions),
                (this._crossFadingFactor = 1),
                (this._collectResourceTiming = g.collectResourceTiming),
                (this._renderTaskQueue = new Ni()),
                (this._controls = []),
                (this._mapId = a.uniqueId()),
                (this._locale = a.extend({}, ls, g.locale)),
                (this._clickTolerance = g.clickTolerance),
                (this._requestManager = new a.RequestManager(
                  g.transformRequest,
                  g.accessToken
                )),
                typeof g.container == "string")
              ) {
                if (
                  ((this._container = a.window.document.getElementById(
                    g.container
                  )),
                  !this._container)
                )
                  throw new Error("Container '" + g.container + "' not found.");
              } else {
                if (!(g.container instanceof Ac))
                  throw new Error(
                    "Invalid type: 'container' must be a String or HTMLElement."
                  );
                this._container = g.container;
              }
              if (
                (g.maxBounds && this.setMaxBounds(g.maxBounds),
                a.bindAll(
                  [
                    "_onWindowOnline",
                    "_onWindowResize",
                    "_onMapScroll",
                    "_contextLost",
                    "_contextRestored",
                  ],
                  this
                ),
                this._setupContainer(),
                this._setupPainter(),
                this.painter === void 0)
              )
                throw new Error("Failed to initialize WebGL.");
              this.on("move", function () {
                return b._update(!1);
              }),
                this.on("moveend", function () {
                  return b._update(!1);
                }),
                this.on("zoom", function () {
                  return b._update(!0);
                }),
                a.window !== void 0 &&
                  (a.window.addEventListener(
                    "online",
                    this._onWindowOnline,
                    !1
                  ),
                  a.window.addEventListener("resize", this._onWindowResize, !1),
                  a.window.addEventListener(
                    "orientationchange",
                    this._onWindowResize,
                    !1
                  )),
                (this.handlers = new bn(this, g)),
                (this._hash =
                  g.hash &&
                  new Zo((typeof g.hash == "string" && g.hash) || void 0).addTo(
                    this
                  )),
                (this._hash && this._hash._onHashChange()) ||
                  (this.jumpTo({
                    center: g.center,
                    zoom: g.zoom,
                    bearing: g.bearing,
                    pitch: g.pitch,
                  }),
                  g.bounds &&
                    (this.resize(),
                    this.fitBounds(
                      g.bounds,
                      a.extend({}, g.fitBoundsOptions, { duration: 0 })
                    ))),
                this.resize(),
                (this._localIdeographFontFamily = g.localIdeographFontFamily),
                g.style &&
                  this.setStyle(g.style, {
                    localIdeographFontFamily: g.localIdeographFontFamily,
                  }),
                g.attributionControl &&
                  this.addControl(
                    new eo({ customAttribution: g.customAttribution })
                  ),
                this.addControl(new Es(), g.logoPosition),
                this.on("style.load", function () {
                  b.transform.unmodified && b.jumpTo(b.style.stylesheet);
                }),
                this.on("data", function (w) {
                  b._update(w.dataType === "style"),
                    b.fire(new a.Event(w.dataType + "data", w));
                }),
                this.on("dataloading", function (w) {
                  b.fire(new a.Event(w.dataType + "dataloading", w));
                });
            }
            u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p);
            var d = {
              showTileBoundaries: { configurable: !0 },
              showPadding: { configurable: !0 },
              showCollisionBoxes: { configurable: !0 },
              showOverdrawInspector: { configurable: !0 },
              repaint: { configurable: !0 },
              vertices: { configurable: !0 },
              version: { configurable: !0 },
            };
            return (
              (p.prototype._getMapId = function () {
                return this._mapId;
              }),
              (p.prototype.addControl = function (g, b) {
                if (
                  (b === void 0 &&
                    (b = g.getDefaultPosition
                      ? g.getDefaultPosition()
                      : "top-right"),
                  !g || !g.onAdd)
                )
                  return this.fire(
                    new a.ErrorEvent(
                      new Error(
                        "Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods."
                      )
                    )
                  );
                var S = g.onAdd(this);
                this._controls.push(g);
                var w = this._controlPositions[b];
                return (
                  b.indexOf("bottom") !== -1
                    ? w.insertBefore(S, w.firstChild)
                    : w.appendChild(S),
                  this
                );
              }),
              (p.prototype.removeControl = function (g) {
                if (!g || !g.onRemove)
                  return this.fire(
                    new a.ErrorEvent(
                      new Error(
                        "Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods."
                      )
                    )
                  );
                var b = this._controls.indexOf(g);
                return (
                  b > -1 && this._controls.splice(b, 1), g.onRemove(this), this
                );
              }),
              (p.prototype.hasControl = function (g) {
                return this._controls.indexOf(g) > -1;
              }),
              (p.prototype.resize = function (g) {
                var b = this._containerDimensions(),
                  S = b[0],
                  w = b[1];
                if (S === this.transform.width && w === this.transform.height)
                  return this;
                this._resizeCanvas(S, w),
                  this.transform.resize(S, w),
                  this.painter.resize(S, w);
                var M = !this._moving;
                return (
                  M &&
                    this.fire(new a.Event("movestart", g)).fire(
                      new a.Event("move", g)
                    ),
                  this.fire(new a.Event("resize", g)),
                  M && this.fire(new a.Event("moveend", g)),
                  this
                );
              }),
              (p.prototype.getBounds = function () {
                return this.transform.getBounds();
              }),
              (p.prototype.getMaxBounds = function () {
                return this.transform.getMaxBounds();
              }),
              (p.prototype.setMaxBounds = function (g) {
                return (
                  this.transform.setMaxBounds(a.LngLatBounds.convert(g)),
                  this._update()
                );
              }),
              (p.prototype.setMinZoom = function (g) {
                if ((g = g ?? -2) >= -2 && g <= this.transform.maxZoom)
                  return (
                    (this.transform.minZoom = g),
                    this._update(),
                    this.getZoom() < g && this.setZoom(g),
                    this
                  );
                throw new Error(
                  "minZoom must be between -2 and the current maxZoom, inclusive"
                );
              }),
              (p.prototype.getMinZoom = function () {
                return this.transform.minZoom;
              }),
              (p.prototype.setMaxZoom = function (g) {
                if ((g = g ?? 22) >= this.transform.minZoom)
                  return (
                    (this.transform.maxZoom = g),
                    this._update(),
                    this.getZoom() > g && this.setZoom(g),
                    this
                  );
                throw new Error(
                  "maxZoom must be greater than the current minZoom"
                );
              }),
              (p.prototype.getMaxZoom = function () {
                return this.transform.maxZoom;
              }),
              (p.prototype.setMinPitch = function (g) {
                if ((g = g ?? 0) < 0)
                  throw new Error(
                    "minPitch must be greater than or equal to 0"
                  );
                if (g >= 0 && g <= this.transform.maxPitch)
                  return (
                    (this.transform.minPitch = g),
                    this._update(),
                    this.getPitch() < g && this.setPitch(g),
                    this
                  );
                throw new Error(
                  "minPitch must be between 0 and the current maxPitch, inclusive"
                );
              }),
              (p.prototype.getMinPitch = function () {
                return this.transform.minPitch;
              }),
              (p.prototype.setMaxPitch = function (g) {
                if ((g = g ?? 60) > 60)
                  throw new Error("maxPitch must be less than or equal to 60");
                if (g >= this.transform.minPitch)
                  return (
                    (this.transform.maxPitch = g),
                    this._update(),
                    this.getPitch() > g && this.setPitch(g),
                    this
                  );
                throw new Error(
                  "maxPitch must be greater than the current minPitch"
                );
              }),
              (p.prototype.getMaxPitch = function () {
                return this.transform.maxPitch;
              }),
              (p.prototype.getRenderWorldCopies = function () {
                return this.transform.renderWorldCopies;
              }),
              (p.prototype.setRenderWorldCopies = function (g) {
                return (this.transform.renderWorldCopies = g), this._update();
              }),
              (p.prototype.project = function (g) {
                return this.transform.locationPoint(a.LngLat.convert(g));
              }),
              (p.prototype.unproject = function (g) {
                return this.transform.pointLocation(a.Point.convert(g));
              }),
              (p.prototype.isMoving = function () {
                return this._moving || this.handlers.isMoving();
              }),
              (p.prototype.isZooming = function () {
                return this._zooming || this.handlers.isZooming();
              }),
              (p.prototype.isRotating = function () {
                return this._rotating || this.handlers.isRotating();
              }),
              (p.prototype._createDelegatedListener = function (g, b, S) {
                var w,
                  M = this;
                if (g === "mouseenter" || g === "mouseover") {
                  var B = !1;
                  return {
                    layer: b,
                    listener: S,
                    delegates: {
                      mousemove: function (J) {
                        var ne = M.getLayer(b)
                          ? M.queryRenderedFeatures(J.point, { layers: [b] })
                          : [];
                        ne.length
                          ? B ||
                            ((B = !0),
                            S.call(
                              M,
                              new Ci(g, M, J.originalEvent, { features: ne })
                            ))
                          : (B = !1);
                      },
                      mouseout: function () {
                        B = !1;
                      },
                    },
                  };
                }
                if (g === "mouseleave" || g === "mouseout") {
                  var V = !1;
                  return {
                    layer: b,
                    listener: S,
                    delegates: {
                      mousemove: function (J) {
                        (M.getLayer(b)
                          ? M.queryRenderedFeatures(J.point, { layers: [b] })
                          : []
                        ).length
                          ? (V = !0)
                          : V &&
                            ((V = !1),
                            S.call(M, new Ci(g, M, J.originalEvent)));
                      },
                      mouseout: function (J) {
                        V &&
                          ((V = !1), S.call(M, new Ci(g, M, J.originalEvent)));
                      },
                    },
                  };
                }
                return {
                  layer: b,
                  listener: S,
                  delegates:
                    ((w = {}),
                    (w[g] = function (J) {
                      var ne = M.getLayer(b)
                        ? M.queryRenderedFeatures(J.point, { layers: [b] })
                        : [];
                      ne.length &&
                        ((J.features = ne), S.call(M, J), delete J.features);
                    }),
                    w),
                };
              }),
              (p.prototype.on = function (g, b, S) {
                if (S === void 0) return u.prototype.on.call(this, g, b);
                var w = this._createDelegatedListener(g, b, S);
                for (var M in ((this._delegatedListeners =
                  this._delegatedListeners || {}),
                (this._delegatedListeners[g] =
                  this._delegatedListeners[g] || []),
                this._delegatedListeners[g].push(w),
                w.delegates))
                  this.on(M, w.delegates[M]);
                return this;
              }),
              (p.prototype.once = function (g, b, S) {
                if (S === void 0) return u.prototype.once.call(this, g, b);
                var w = this._createDelegatedListener(g, b, S);
                for (var M in w.delegates) this.once(M, w.delegates[M]);
                return this;
              }),
              (p.prototype.off = function (g, b, S) {
                var w = this;
                return S === void 0
                  ? u.prototype.off.call(this, g, b)
                  : (this._delegatedListeners &&
                      this._delegatedListeners[g] &&
                      (function (M) {
                        for (var B = M[g], V = 0; V < B.length; V++) {
                          var J = B[V];
                          if (J.layer === b && J.listener === S) {
                            for (var ne in J.delegates)
                              w.off(ne, J.delegates[ne]);
                            return B.splice(V, 1), w;
                          }
                        }
                      })(this._delegatedListeners),
                    this);
              }),
              (p.prototype.queryRenderedFeatures = function (g, b) {
                if (!this.style) return [];
                var S;
                if (
                  (b !== void 0 ||
                    g === void 0 ||
                    g instanceof a.Point ||
                    Array.isArray(g) ||
                    ((b = g), (g = void 0)),
                  (b = b || {}),
                  (g = g || [
                    [0, 0],
                    [this.transform.width, this.transform.height],
                  ]) instanceof a.Point || typeof g[0] == "number")
                )
                  S = [a.Point.convert(g)];
                else {
                  var w = a.Point.convert(g[0]),
                    M = a.Point.convert(g[1]);
                  S = [w, new a.Point(M.x, w.y), M, new a.Point(w.x, M.y), w];
                }
                return this.style.queryRenderedFeatures(S, b, this.transform);
              }),
              (p.prototype.querySourceFeatures = function (g, b) {
                return this.style.querySourceFeatures(g, b);
              }),
              (p.prototype.setStyle = function (g, b) {
                return (b = a.extend(
                  {},
                  { localIdeographFontFamily: this._localIdeographFontFamily },
                  b
                )).diff !== !1 &&
                  b.localIdeographFontFamily ===
                    this._localIdeographFontFamily &&
                  this.style &&
                  g
                  ? (this._diffStyle(g, b), this)
                  : ((this._localIdeographFontFamily =
                      b.localIdeographFontFamily),
                    this._updateStyle(g, b));
              }),
              (p.prototype._getUIString = function (g) {
                var b = this._locale[g];
                if (b == null) throw new Error("Missing UI string '" + g + "'");
                return b;
              }),
              (p.prototype._updateStyle = function (g, b) {
                return (
                  this.style &&
                    (this.style.setEventedParent(null), this.style._remove()),
                  g
                    ? ((this.style = new Oo(this, b || {})),
                      this.style.setEventedParent(this, { style: this.style }),
                      typeof g == "string"
                        ? this.style.loadURL(g)
                        : this.style.loadJSON(g),
                      this)
                    : (delete this.style, this)
                );
              }),
              (p.prototype._lazyInitEmptyStyle = function () {
                this.style ||
                  ((this.style = new Oo(this, {})),
                  this.style.setEventedParent(this, { style: this.style }),
                  this.style.loadEmpty());
              }),
              (p.prototype._diffStyle = function (g, b) {
                var S = this;
                if (typeof g == "string") {
                  var w = this._requestManager.normalizeStyleURL(g),
                    M = this._requestManager.transformRequest(
                      w,
                      a.ResourceType.Style
                    );
                  a.getJSON(M, function (B, V) {
                    B ? S.fire(new a.ErrorEvent(B)) : V && S._updateDiff(V, b);
                  });
                } else typeof g == "object" && this._updateDiff(g, b);
              }),
              (p.prototype._updateDiff = function (g, b) {
                try {
                  this.style.setState(g) && this._update(!0);
                } catch (S) {
                  a.warnOnce(
                    "Unable to perform style diff: " +
                      (S.message || S.error || S) +
                      ".  Rebuilding the style from scratch."
                  ),
                    this._updateStyle(g, b);
                }
              }),
              (p.prototype.getStyle = function () {
                if (this.style) return this.style.serialize();
              }),
              (p.prototype.isStyleLoaded = function () {
                return this.style
                  ? this.style.loaded()
                  : a.warnOnce("There is no style added to the map.");
              }),
              (p.prototype.addSource = function (g, b) {
                return (
                  this._lazyInitEmptyStyle(),
                  this.style.addSource(g, b),
                  this._update(!0)
                );
              }),
              (p.prototype.isSourceLoaded = function (g) {
                var b = this.style && this.style.sourceCaches[g];
                if (b !== void 0) return b.loaded();
                this.fire(
                  new a.ErrorEvent(
                    new Error("There is no source with ID '" + g + "'")
                  )
                );
              }),
              (p.prototype.areTilesLoaded = function () {
                var g = this.style && this.style.sourceCaches;
                for (var b in g) {
                  var S = g[b]._tiles;
                  for (var w in S) {
                    var M = S[w];
                    if (M.state !== "loaded" && M.state !== "errored")
                      return !1;
                  }
                }
                return !0;
              }),
              (p.prototype.addSourceType = function (g, b, S) {
                return (
                  this._lazyInitEmptyStyle(), this.style.addSourceType(g, b, S)
                );
              }),
              (p.prototype.removeSource = function (g) {
                return this.style.removeSource(g), this._update(!0);
              }),
              (p.prototype.getSource = function (g) {
                return this.style.getSource(g);
              }),
              (p.prototype.addImage = function (g, b, S) {
                S === void 0 && (S = {});
                var w = S.pixelRatio;
                w === void 0 && (w = 1);
                var M = S.sdf;
                M === void 0 && (M = !1);
                var B = S.stretchX,
                  V = S.stretchY,
                  J = S.content;
                if (
                  (this._lazyInitEmptyStyle(),
                  b instanceof xl || (Yr && b instanceof Yr))
                ) {
                  var ne = a.browser.getImageData(b);
                  this.style.addImage(g, {
                    data: new a.RGBAImage(
                      { width: ne.width, height: ne.height },
                      ne.data
                    ),
                    pixelRatio: w,
                    stretchX: B,
                    stretchY: V,
                    content: J,
                    sdf: M,
                    version: 0,
                  });
                } else {
                  if (b.width === void 0 || b.height === void 0)
                    return this.fire(
                      new a.ErrorEvent(
                        new Error(
                          "Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"
                        )
                      )
                    );
                  var re = b;
                  this.style.addImage(g, {
                    data: new a.RGBAImage(
                      { width: b.width, height: b.height },
                      new Uint8Array(b.data)
                    ),
                    pixelRatio: w,
                    stretchX: B,
                    stretchY: V,
                    content: J,
                    sdf: M,
                    version: 0,
                    userImage: re,
                  }),
                    re.onAdd && re.onAdd(this, g);
                }
              }),
              (p.prototype.updateImage = function (g, b) {
                var S = this.style.getImage(g);
                if (!S)
                  return this.fire(
                    new a.ErrorEvent(
                      new Error(
                        "The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead."
                      )
                    )
                  );
                var w =
                    b instanceof xl || (Yr && b instanceof Yr)
                      ? a.browser.getImageData(b)
                      : b,
                  M = w.width,
                  B = w.height,
                  V = w.data;
                return M === void 0 || B === void 0
                  ? this.fire(
                      new a.ErrorEvent(
                        new Error(
                          "Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"
                        )
                      )
                    )
                  : M !== S.data.width || B !== S.data.height
                  ? this.fire(
                      new a.ErrorEvent(
                        new Error(
                          "The width and height of the updated image must be that same as the previous version of the image"
                        )
                      )
                    )
                  : (S.data.replace(
                      V,
                      !(b instanceof xl || (Yr && b instanceof Yr))
                    ),
                    void this.style.updateImage(g, S));
              }),
              (p.prototype.hasImage = function (g) {
                return g
                  ? !!this.style.getImage(g)
                  : (this.fire(
                      new a.ErrorEvent(new Error("Missing required image id"))
                    ),
                    !1);
              }),
              (p.prototype.removeImage = function (g) {
                this.style.removeImage(g);
              }),
              (p.prototype.loadImage = function (g, b) {
                a.getImage(
                  this._requestManager.transformRequest(
                    g,
                    a.ResourceType.Image
                  ),
                  b
                );
              }),
              (p.prototype.listImages = function () {
                return this.style.listImages();
              }),
              (p.prototype.addLayer = function (g, b) {
                return (
                  this._lazyInitEmptyStyle(),
                  this.style.addLayer(g, b),
                  this._update(!0)
                );
              }),
              (p.prototype.moveLayer = function (g, b) {
                return this.style.moveLayer(g, b), this._update(!0);
              }),
              (p.prototype.removeLayer = function (g) {
                return this.style.removeLayer(g), this._update(!0);
              }),
              (p.prototype.getLayer = function (g) {
                return this.style.getLayer(g);
              }),
              (p.prototype.setLayerZoomRange = function (g, b, S) {
                return this.style.setLayerZoomRange(g, b, S), this._update(!0);
              }),
              (p.prototype.setFilter = function (g, b, S) {
                return (
                  S === void 0 && (S = {}),
                  this.style.setFilter(g, b, S),
                  this._update(!0)
                );
              }),
              (p.prototype.getFilter = function (g) {
                return this.style.getFilter(g);
              }),
              (p.prototype.setPaintProperty = function (g, b, S, w) {
                return (
                  w === void 0 && (w = {}),
                  this.style.setPaintProperty(g, b, S, w),
                  this._update(!0)
                );
              }),
              (p.prototype.getPaintProperty = function (g, b) {
                return this.style.getPaintProperty(g, b);
              }),
              (p.prototype.setLayoutProperty = function (g, b, S, w) {
                return (
                  w === void 0 && (w = {}),
                  this.style.setLayoutProperty(g, b, S, w),
                  this._update(!0)
                );
              }),
              (p.prototype.getLayoutProperty = function (g, b) {
                return this.style.getLayoutProperty(g, b);
              }),
              (p.prototype.setLight = function (g, b) {
                return (
                  b === void 0 && (b = {}),
                  this._lazyInitEmptyStyle(),
                  this.style.setLight(g, b),
                  this._update(!0)
                );
              }),
              (p.prototype.getLight = function () {
                return this.style.getLight();
              }),
              (p.prototype.setFeatureState = function (g, b) {
                return this.style.setFeatureState(g, b), this._update();
              }),
              (p.prototype.removeFeatureState = function (g, b) {
                return this.style.removeFeatureState(g, b), this._update();
              }),
              (p.prototype.getFeatureState = function (g) {
                return this.style.getFeatureState(g);
              }),
              (p.prototype.getContainer = function () {
                return this._container;
              }),
              (p.prototype.getCanvasContainer = function () {
                return this._canvasContainer;
              }),
              (p.prototype.getCanvas = function () {
                return this._canvas;
              }),
              (p.prototype._containerDimensions = function () {
                var g = 0,
                  b = 0;
                return (
                  this._container &&
                    ((g = this._container.clientWidth || 400),
                    (b = this._container.clientHeight || 300)),
                  [g, b]
                );
              }),
              (p.prototype._detectMissingCSS = function () {
                a.window
                  .getComputedStyle(this._missingCSSCanary)
                  .getPropertyValue("background-color") !==
                  "rgb(250, 128, 114)" &&
                  a.warnOnce(
                    "This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/."
                  );
              }),
              (p.prototype._setupContainer = function () {
                var g = this._container;
                g.classList.add("mapboxgl-map"),
                  ((this._missingCSSCanary = f.create(
                    "div",
                    "mapboxgl-canary",
                    g
                  )).style.visibility = "hidden"),
                  this._detectMissingCSS();
                var b = (this._canvasContainer = f.create(
                  "div",
                  "mapboxgl-canvas-container",
                  g
                ));
                this._interactive && b.classList.add("mapboxgl-interactive"),
                  (this._canvas = f.create("canvas", "mapboxgl-canvas", b)),
                  this._canvas.addEventListener(
                    "webglcontextlost",
                    this._contextLost,
                    !1
                  ),
                  this._canvas.addEventListener(
                    "webglcontextrestored",
                    this._contextRestored,
                    !1
                  ),
                  this._canvas.setAttribute("tabindex", "0"),
                  this._canvas.setAttribute("aria-label", "Map"),
                  this._canvas.setAttribute("role", "region");
                var S = this._containerDimensions();
                this._resizeCanvas(S[0], S[1]);
                var w = (this._controlContainer = f.create(
                    "div",
                    "mapboxgl-control-container",
                    g
                  )),
                  M = (this._controlPositions = {});
                [
                  "top-left",
                  "top-right",
                  "bottom-left",
                  "bottom-right",
                ].forEach(function (B) {
                  M[B] = f.create("div", "mapboxgl-ctrl-" + B, w);
                }),
                  this._container.addEventListener(
                    "scroll",
                    this._onMapScroll,
                    !1
                  );
              }),
              (p.prototype._resizeCanvas = function (g, b) {
                var S = a.browser.devicePixelRatio || 1;
                (this._canvas.width = S * g),
                  (this._canvas.height = S * b),
                  (this._canvas.style.width = g + "px"),
                  (this._canvas.style.height = b + "px");
              }),
              (p.prototype._setupPainter = function () {
                var g = a.extend({}, h.webGLContextAttributes, {
                    failIfMajorPerformanceCaveat:
                      this._failIfMajorPerformanceCaveat,
                    preserveDrawingBuffer: this._preserveDrawingBuffer,
                    antialias: this._antialias || !1,
                  }),
                  b =
                    this._canvas.getContext("webgl", g) ||
                    this._canvas.getContext("experimental-webgl", g);
                b
                  ? ((this.painter = new gi(b, this.transform)),
                    a.webpSupported.testSupport(b))
                  : this.fire(
                      new a.ErrorEvent(new Error("Failed to initialize WebGL"))
                    );
              }),
              (p.prototype._contextLost = function (g) {
                g.preventDefault(),
                  this._frame && (this._frame.cancel(), (this._frame = null)),
                  this.fire(
                    new a.Event("webglcontextlost", { originalEvent: g })
                  );
              }),
              (p.prototype._contextRestored = function (g) {
                this._setupPainter(),
                  this.resize(),
                  this._update(),
                  this.fire(
                    new a.Event("webglcontextrestored", { originalEvent: g })
                  );
              }),
              (p.prototype._onMapScroll = function (g) {
                if (g.target === this._container)
                  return (
                    (this._container.scrollTop = 0),
                    (this._container.scrollLeft = 0),
                    !1
                  );
              }),
              (p.prototype.loaded = function () {
                return (
                  !this._styleDirty &&
                  !this._sourcesDirty &&
                  !!this.style &&
                  this.style.loaded()
                );
              }),
              (p.prototype._update = function (g) {
                return this.style
                  ? ((this._styleDirty = this._styleDirty || g),
                    (this._sourcesDirty = !0),
                    this.triggerRepaint(),
                    this)
                  : this;
              }),
              (p.prototype._requestRenderFrame = function (g) {
                return this._update(), this._renderTaskQueue.add(g);
              }),
              (p.prototype._cancelRenderFrame = function (g) {
                this._renderTaskQueue.remove(g);
              }),
              (p.prototype._render = function (g) {
                var b,
                  S = this,
                  w = 0,
                  M = this.painter.context.extTimerQuery;
                if (
                  (this.listens("gpu-timing-frame") &&
                    ((b = M.createQueryEXT()),
                    M.beginQueryEXT(M.TIME_ELAPSED_EXT, b),
                    (w = a.browser.now())),
                  this.painter.context.setDirty(),
                  this.painter.setBaseState(),
                  this._renderTaskQueue.run(g),
                  !this._removed)
                ) {
                  var B = !1;
                  if (this.style && this._styleDirty) {
                    this._styleDirty = !1;
                    var V = this.transform.zoom,
                      J = a.browser.now();
                    this.style.zoomHistory.update(V, J);
                    var ne = new a.EvaluationParameters(V, {
                        now: J,
                        fadeDuration: this._fadeDuration,
                        zoomHistory: this.style.zoomHistory,
                        transition: this.style.getTransition(),
                      }),
                      re = ne.crossFadingFactor();
                    (re === 1 && re === this._crossFadingFactor) ||
                      ((B = !0), (this._crossFadingFactor = re)),
                      this.style.update(ne);
                  }
                  if (
                    (this.style &&
                      this._sourcesDirty &&
                      ((this._sourcesDirty = !1),
                      this.style._updateSources(this.transform)),
                    (this._placementDirty =
                      this.style &&
                      this.style._updatePlacement(
                        this.painter.transform,
                        this.showCollisionBoxes,
                        this._fadeDuration,
                        this._crossSourceCollisions
                      )),
                    this.painter.render(this.style, {
                      showTileBoundaries: this.showTileBoundaries,
                      showOverdrawInspector: this._showOverdrawInspector,
                      rotating: this.isRotating(),
                      zooming: this.isZooming(),
                      moving: this.isMoving(),
                      fadeDuration: this._fadeDuration,
                      showPadding: this.showPadding,
                      gpuTiming: !!this.listens("gpu-timing-layer"),
                    }),
                    this.fire(new a.Event("render")),
                    this.loaded() &&
                      !this._loaded &&
                      ((this._loaded = !0), this.fire(new a.Event("load"))),
                    this.style &&
                      (this.style.hasTransitions() || B) &&
                      (this._styleDirty = !0),
                    this.style &&
                      !this._placementDirty &&
                      this.style._releaseSymbolFadeTiles(),
                    this.listens("gpu-timing-frame"))
                  ) {
                    var _e = a.browser.now() - w;
                    M.endQueryEXT(M.TIME_ELAPSED_EXT, b),
                      setTimeout(function () {
                        var de =
                          M.getQueryObjectEXT(b, M.QUERY_RESULT_EXT) / 1e6;
                        M.deleteQueryEXT(b),
                          S.fire(
                            new a.Event("gpu-timing-frame", {
                              cpuTime: _e,
                              gpuTime: de,
                            })
                          );
                      }, 50);
                  }
                  if (this.listens("gpu-timing-layer")) {
                    var pe = this.painter.collectGpuTimers();
                    setTimeout(function () {
                      var de = S.painter.queryGpuTimers(pe);
                      S.fire(
                        new a.Event("gpu-timing-layer", { layerTimes: de })
                      );
                    }, 50);
                  }
                  var Ce =
                    this._sourcesDirty ||
                    this._styleDirty ||
                    this._placementDirty;
                  return (
                    Ce || this._repaint
                      ? this.triggerRepaint()
                      : !this.isMoving() &&
                        this.loaded() &&
                        this.fire(new a.Event("idle")),
                    !this._loaded ||
                      this._fullyLoaded ||
                      Ce ||
                      (this._fullyLoaded = !0),
                    this
                  );
                }
              }),
              (p.prototype.remove = function () {
                this._hash && this._hash.remove();
                for (var g = 0, b = this._controls; g < b.length; g += 1)
                  b[g].onRemove(this);
                (this._controls = []),
                  this._frame && (this._frame.cancel(), (this._frame = null)),
                  this._renderTaskQueue.clear(),
                  this.painter.destroy(),
                  this.handlers.destroy(),
                  delete this.handlers,
                  this.setStyle(null),
                  a.window !== void 0 &&
                    (a.window.removeEventListener(
                      "resize",
                      this._onWindowResize,
                      !1
                    ),
                    a.window.removeEventListener(
                      "orientationchange",
                      this._onWindowResize,
                      !1
                    ),
                    a.window.removeEventListener(
                      "online",
                      this._onWindowOnline,
                      !1
                    ));
                var S =
                  this.painter.context.gl.getExtension("WEBGL_lose_context");
                S && S.loseContext(),
                  Zl(this._canvasContainer),
                  Zl(this._controlContainer),
                  Zl(this._missingCSSCanary),
                  this._container.classList.remove("mapboxgl-map"),
                  (this._removed = !0),
                  this.fire(new a.Event("remove"));
              }),
              (p.prototype.triggerRepaint = function () {
                var g = this;
                this.style &&
                  !this._frame &&
                  (this._frame = a.browser.frame(function (b) {
                    (g._frame = null), g._render(b);
                  }));
              }),
              (p.prototype._onWindowOnline = function () {
                this._update();
              }),
              (p.prototype._onWindowResize = function (g) {
                this._trackResize &&
                  this.resize({ originalEvent: g })._update();
              }),
              (d.showTileBoundaries.get = function () {
                return !!this._showTileBoundaries;
              }),
              (d.showTileBoundaries.set = function (g) {
                this._showTileBoundaries !== g &&
                  ((this._showTileBoundaries = g), this._update());
              }),
              (d.showPadding.get = function () {
                return !!this._showPadding;
              }),
              (d.showPadding.set = function (g) {
                this._showPadding !== g &&
                  ((this._showPadding = g), this._update());
              }),
              (d.showCollisionBoxes.get = function () {
                return !!this._showCollisionBoxes;
              }),
              (d.showCollisionBoxes.set = function (g) {
                this._showCollisionBoxes !== g &&
                  ((this._showCollisionBoxes = g),
                  g ? this.style._generateCollisionBoxes() : this._update());
              }),
              (d.showOverdrawInspector.get = function () {
                return !!this._showOverdrawInspector;
              }),
              (d.showOverdrawInspector.set = function (g) {
                this._showOverdrawInspector !== g &&
                  ((this._showOverdrawInspector = g), this._update());
              }),
              (d.repaint.get = function () {
                return !!this._repaint;
              }),
              (d.repaint.set = function (g) {
                this._repaint !== g &&
                  ((this._repaint = g), this.triggerRepaint());
              }),
              (d.vertices.get = function () {
                return !!this._vertices;
              }),
              (d.vertices.set = function (g) {
                (this._vertices = g), this._update();
              }),
              (p.prototype._setCacheLimits = function (g, b) {
                a.setCacheLimits(g, b);
              }),
              (d.version.get = function () {
                return a.version;
              }),
              Object.defineProperties(p.prototype, d),
              p
            );
          })(Bo);
        function Zl(u) {
          u.parentNode && u.parentNode.removeChild(u);
        }
        var Td = { showCompass: !0, showZoom: !0, visualizePitch: !1 },
          bl = function (u) {
            var p = this;
            (this.options = a.extend({}, Td, u)),
              (this._container = f.create(
                "div",
                "mapboxgl-ctrl mapboxgl-ctrl-group"
              )),
              this._container.addEventListener("contextmenu", function (d) {
                return d.preventDefault();
              }),
              this.options.showZoom &&
                (a.bindAll(["_setButtonTitle", "_updateZoomButtons"], this),
                (this._zoomInButton = this._createButton(
                  "mapboxgl-ctrl-zoom-in",
                  function (d) {
                    return p._map.zoomIn({}, { originalEvent: d });
                  }
                )),
                f
                  .create("span", "mapboxgl-ctrl-icon", this._zoomInButton)
                  .setAttribute("aria-hidden", !0),
                (this._zoomOutButton = this._createButton(
                  "mapboxgl-ctrl-zoom-out",
                  function (d) {
                    return p._map.zoomOut({}, { originalEvent: d });
                  }
                )),
                f
                  .create("span", "mapboxgl-ctrl-icon", this._zoomOutButton)
                  .setAttribute("aria-hidden", !0)),
              this.options.showCompass &&
                (a.bindAll(["_rotateCompassArrow"], this),
                (this._compass = this._createButton(
                  "mapboxgl-ctrl-compass",
                  function (d) {
                    p.options.visualizePitch
                      ? p._map.resetNorthPitch({}, { originalEvent: d })
                      : p._map.resetNorth({}, { originalEvent: d });
                  }
                )),
                (this._compassIcon = f.create(
                  "span",
                  "mapboxgl-ctrl-icon",
                  this._compass
                )),
                this._compassIcon.setAttribute("aria-hidden", !0));
          };
        (bl.prototype._updateZoomButtons = function () {
          var u = this._map.getZoom(),
            p = u === this._map.getMaxZoom(),
            d = u === this._map.getMinZoom();
          (this._zoomInButton.disabled = p),
            (this._zoomOutButton.disabled = d),
            this._zoomInButton.setAttribute("aria-disabled", p.toString()),
            this._zoomOutButton.setAttribute("aria-disabled", d.toString());
        }),
          (bl.prototype._rotateCompassArrow = function () {
            var u = this.options.visualizePitch
              ? "scale(" +
                1 /
                  Math.pow(
                    Math.cos(this._map.transform.pitch * (Math.PI / 180)),
                    0.5
                  ) +
                ") rotateX(" +
                this._map.transform.pitch +
                "deg) rotateZ(" +
                this._map.transform.angle * (180 / Math.PI) +
                "deg)"
              : "rotate(" +
                this._map.transform.angle * (180 / Math.PI) +
                "deg)";
            this._compassIcon.style.transform = u;
          }),
          (bl.prototype.onAdd = function (u) {
            return (
              (this._map = u),
              this.options.showZoom &&
                (this._setButtonTitle(this._zoomInButton, "ZoomIn"),
                this._setButtonTitle(this._zoomOutButton, "ZoomOut"),
                this._map.on("zoom", this._updateZoomButtons),
                this._updateZoomButtons()),
              this.options.showCompass &&
                (this._setButtonTitle(this._compass, "ResetBearing"),
                this.options.visualizePitch &&
                  this._map.on("pitch", this._rotateCompassArrow),
                this._map.on("rotate", this._rotateCompassArrow),
                this._rotateCompassArrow(),
                (this._handler = new Fo(
                  this._map,
                  this._compass,
                  this.options.visualizePitch
                ))),
              this._container
            );
          }),
          (bl.prototype.onRemove = function () {
            f.remove(this._container),
              this.options.showZoom &&
                this._map.off("zoom", this._updateZoomButtons),
              this.options.showCompass &&
                (this.options.visualizePitch &&
                  this._map.off("pitch", this._rotateCompassArrow),
                this._map.off("rotate", this._rotateCompassArrow),
                this._handler.off(),
                delete this._handler),
              delete this._map;
          }),
          (bl.prototype._createButton = function (u, p) {
            var d = f.create("button", u, this._container);
            return (d.type = "button"), d.addEventListener("click", p), d;
          }),
          (bl.prototype._setButtonTitle = function (u, p) {
            var d = this._map._getUIString("NavigationControl." + p);
            (u.title = d), u.setAttribute("aria-label", d);
          });
        var Fo = function (u, p, d) {
          d === void 0 && (d = !1),
            (this._clickTolerance = 10),
            (this.element = p),
            (this.mouseRotate = new Bu({
              clickTolerance: u.dragRotate._mouseRotate._clickTolerance,
            })),
            (this.map = u),
            d &&
              (this.mousePitch = new xd({
                clickTolerance: u.dragRotate._mousePitch._clickTolerance,
              })),
            a.bindAll(
              [
                "mousedown",
                "mousemove",
                "mouseup",
                "touchstart",
                "touchmove",
                "touchend",
                "reset",
              ],
              this
            ),
            f.addEventListener(p, "mousedown", this.mousedown),
            f.addEventListener(p, "touchstart", this.touchstart, {
              passive: !1,
            }),
            f.addEventListener(p, "touchmove", this.touchmove),
            f.addEventListener(p, "touchend", this.touchend),
            f.addEventListener(p, "touchcancel", this.reset);
        };
        function Jc(u, p, d) {
          if (((u = new a.LngLat(u.lng, u.lat)), p)) {
            var g = new a.LngLat(u.lng - 360, u.lat),
              b = new a.LngLat(u.lng + 360, u.lat),
              S = d.locationPoint(u).distSqr(p);
            d.locationPoint(g).distSqr(p) < S
              ? (u = g)
              : d.locationPoint(b).distSqr(p) < S && (u = b);
          }
          for (; Math.abs(u.lng - d.center.lng) > 180; ) {
            var w = d.locationPoint(u);
            if (w.x >= 0 && w.y >= 0 && w.x <= d.width && w.y <= d.height)
              break;
            u.lng > d.center.lng ? (u.lng -= 360) : (u.lng += 360);
          }
          return u;
        }
        (Fo.prototype.down = function (u, p) {
          this.mouseRotate.mousedown(u, p),
            this.mousePitch && this.mousePitch.mousedown(u, p),
            f.disableDrag();
        }),
          (Fo.prototype.move = function (u, p) {
            var d = this.map,
              g = this.mouseRotate.mousemoveWindow(u, p);
            if (
              (g &&
                g.bearingDelta &&
                d.setBearing(d.getBearing() + g.bearingDelta),
              this.mousePitch)
            ) {
              var b = this.mousePitch.mousemoveWindow(u, p);
              b && b.pitchDelta && d.setPitch(d.getPitch() + b.pitchDelta);
            }
          }),
          (Fo.prototype.off = function () {
            var u = this.element;
            f.removeEventListener(u, "mousedown", this.mousedown),
              f.removeEventListener(u, "touchstart", this.touchstart, {
                passive: !1,
              }),
              f.removeEventListener(u, "touchmove", this.touchmove),
              f.removeEventListener(u, "touchend", this.touchend),
              f.removeEventListener(u, "touchcancel", this.reset),
              this.offTemp();
          }),
          (Fo.prototype.offTemp = function () {
            f.enableDrag(),
              f.removeEventListener(a.window, "mousemove", this.mousemove),
              f.removeEventListener(a.window, "mouseup", this.mouseup);
          }),
          (Fo.prototype.mousedown = function (u) {
            this.down(
              a.extend({}, u, {
                ctrlKey: !0,
                preventDefault: function () {
                  return u.preventDefault();
                },
              }),
              f.mousePos(this.element, u)
            ),
              f.addEventListener(a.window, "mousemove", this.mousemove),
              f.addEventListener(a.window, "mouseup", this.mouseup);
          }),
          (Fo.prototype.mousemove = function (u) {
            this.move(u, f.mousePos(this.element, u));
          }),
          (Fo.prototype.mouseup = function (u) {
            this.mouseRotate.mouseupWindow(u),
              this.mousePitch && this.mousePitch.mouseupWindow(u),
              this.offTemp();
          }),
          (Fo.prototype.touchstart = function (u) {
            u.targetTouches.length !== 1
              ? this.reset()
              : ((this._startPos = this._lastPos =
                  f.touchPos(this.element, u.targetTouches)[0]),
                this.down(
                  {
                    type: "mousedown",
                    button: 0,
                    ctrlKey: !0,
                    preventDefault: function () {
                      return u.preventDefault();
                    },
                  },
                  this._startPos
                ));
          }),
          (Fo.prototype.touchmove = function (u) {
            u.targetTouches.length !== 1
              ? this.reset()
              : ((this._lastPos = f.touchPos(this.element, u.targetTouches)[0]),
                this.move(
                  {
                    preventDefault: function () {
                      return u.preventDefault();
                    },
                  },
                  this._lastPos
                ));
          }),
          (Fo.prototype.touchend = function (u) {
            u.targetTouches.length === 0 &&
              this._startPos &&
              this._lastPos &&
              this._startPos.dist(this._lastPos) < this._clickTolerance &&
              this.element.click(),
              this.reset();
          }),
          (Fo.prototype.reset = function () {
            this.mouseRotate.reset(),
              this.mousePitch && this.mousePitch.reset(),
              delete this._startPos,
              delete this._lastPos,
              this.offTemp();
          });
        var Hs = {
          center: "translate(-50%,-50%)",
          top: "translate(-50%,0)",
          "top-left": "translate(0,0)",
          "top-right": "translate(-100%,0)",
          bottom: "translate(-50%,-100%)",
          "bottom-left": "translate(0,-100%)",
          "bottom-right": "translate(-100%,-100%)",
          left: "translate(0,-50%)",
          right: "translate(-100%,-50%)",
        };
        function Sd(u, p, d) {
          var g = u.classList;
          for (var b in Hs) g.remove("mapboxgl-" + d + "-anchor-" + b);
          g.add("mapboxgl-" + d + "-anchor-" + p);
        }
        var eu,
          Fu = (function (u) {
            function p(d, g) {
              if (
                (u.call(this),
                (d instanceof a.window.HTMLElement || g) &&
                  (d = a.extend({ element: d }, g)),
                a.bindAll(
                  [
                    "_update",
                    "_onMove",
                    "_onUp",
                    "_addDragHandler",
                    "_onMapClick",
                    "_onKeyPress",
                  ],
                  this
                ),
                (this._anchor = (d && d.anchor) || "center"),
                (this._color = (d && d.color) || "#3FB1CE"),
                (this._scale = (d && d.scale) || 1),
                (this._draggable = (d && d.draggable) || !1),
                (this._clickTolerance = (d && d.clickTolerance) || 0),
                (this._isDragging = !1),
                (this._state = "inactive"),
                (this._rotation = (d && d.rotation) || 0),
                (this._rotationAlignment =
                  (d && d.rotationAlignment) || "auto"),
                (this._pitchAlignment =
                  d && d.pitchAlignment && d.pitchAlignment !== "auto"
                    ? d.pitchAlignment
                    : this._rotationAlignment),
                d && d.element)
              )
                (this._element = d.element),
                  (this._offset = a.Point.convert((d && d.offset) || [0, 0]));
              else {
                (this._defaultMarker = !0),
                  (this._element = f.create("div")),
                  this._element.setAttribute("aria-label", "Map marker");
                var b = f.createNS("http://www.w3.org/2000/svg", "svg");
                b.setAttributeNS(null, "display", "block"),
                  b.setAttributeNS(null, "height", "41px"),
                  b.setAttributeNS(null, "width", "27px"),
                  b.setAttributeNS(null, "viewBox", "0 0 27 41");
                var S = f.createNS("http://www.w3.org/2000/svg", "g");
                S.setAttributeNS(null, "stroke", "none"),
                  S.setAttributeNS(null, "stroke-width", "1"),
                  S.setAttributeNS(null, "fill", "none"),
                  S.setAttributeNS(null, "fill-rule", "evenodd");
                var w = f.createNS("http://www.w3.org/2000/svg", "g");
                w.setAttributeNS(null, "fill-rule", "nonzero");
                var M = f.createNS("http://www.w3.org/2000/svg", "g");
                M.setAttributeNS(null, "transform", "translate(3.0, 29.0)"),
                  M.setAttributeNS(null, "fill", "#000000");
                for (
                  var B = 0,
                    V = [
                      { rx: "10.5", ry: "5.25002273" },
                      { rx: "10.5", ry: "5.25002273" },
                      { rx: "9.5", ry: "4.77275007" },
                      { rx: "8.5", ry: "4.29549936" },
                      { rx: "7.5", ry: "3.81822308" },
                      { rx: "6.5", ry: "3.34094679" },
                      { rx: "5.5", ry: "2.86367051" },
                      { rx: "4.5", ry: "2.38636864" },
                    ];
                  B < V.length;
                  B += 1
                ) {
                  var J = V[B],
                    ne = f.createNS("http://www.w3.org/2000/svg", "ellipse");
                  ne.setAttributeNS(null, "opacity", "0.04"),
                    ne.setAttributeNS(null, "cx", "10.5"),
                    ne.setAttributeNS(null, "cy", "5.80029008"),
                    ne.setAttributeNS(null, "rx", J.rx),
                    ne.setAttributeNS(null, "ry", J.ry),
                    M.appendChild(ne);
                }
                var re = f.createNS("http://www.w3.org/2000/svg", "g");
                re.setAttributeNS(null, "fill", this._color);
                var _e = f.createNS("http://www.w3.org/2000/svg", "path");
                _e.setAttributeNS(
                  null,
                  "d",
                  "M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"
                ),
                  re.appendChild(_e);
                var pe = f.createNS("http://www.w3.org/2000/svg", "g");
                pe.setAttributeNS(null, "opacity", "0.25"),
                  pe.setAttributeNS(null, "fill", "#000000");
                var Ce = f.createNS("http://www.w3.org/2000/svg", "path");
                Ce.setAttributeNS(
                  null,
                  "d",
                  "M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"
                ),
                  pe.appendChild(Ce);
                var de = f.createNS("http://www.w3.org/2000/svg", "g");
                de.setAttributeNS(null, "transform", "translate(6.0, 7.0)"),
                  de.setAttributeNS(null, "fill", "#FFFFFF");
                var we = f.createNS("http://www.w3.org/2000/svg", "g");
                we.setAttributeNS(null, "transform", "translate(8.0, 8.0)");
                var De = f.createNS("http://www.w3.org/2000/svg", "circle");
                De.setAttributeNS(null, "fill", "#000000"),
                  De.setAttributeNS(null, "opacity", "0.25"),
                  De.setAttributeNS(null, "cx", "5.5"),
                  De.setAttributeNS(null, "cy", "5.5"),
                  De.setAttributeNS(null, "r", "5.4999962");
                var Ge = f.createNS("http://www.w3.org/2000/svg", "circle");
                Ge.setAttributeNS(null, "fill", "#FFFFFF"),
                  Ge.setAttributeNS(null, "cx", "5.5"),
                  Ge.setAttributeNS(null, "cy", "5.5"),
                  Ge.setAttributeNS(null, "r", "5.4999962"),
                  we.appendChild(De),
                  we.appendChild(Ge),
                  w.appendChild(M),
                  w.appendChild(re),
                  w.appendChild(pe),
                  w.appendChild(de),
                  w.appendChild(we),
                  b.appendChild(w),
                  b.setAttributeNS(null, "height", 41 * this._scale + "px"),
                  b.setAttributeNS(null, "width", 27 * this._scale + "px"),
                  this._element.appendChild(b),
                  (this._offset = a.Point.convert((d && d.offset) || [0, -14]));
              }
              this._element.classList.add("mapboxgl-marker"),
                this._element.addEventListener("dragstart", function (st) {
                  st.preventDefault();
                }),
                this._element.addEventListener("mousedown", function (st) {
                  st.preventDefault();
                }),
                Sd(this._element, this._anchor, "marker"),
                (this._popup = null);
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.addTo = function (d) {
                return (
                  this.remove(),
                  (this._map = d),
                  d.getCanvasContainer().appendChild(this._element),
                  d.on("move", this._update),
                  d.on("moveend", this._update),
                  this.setDraggable(this._draggable),
                  this._update(),
                  this._map.on("click", this._onMapClick),
                  this
                );
              }),
              (p.prototype.remove = function () {
                return (
                  this._map &&
                    (this._map.off("click", this._onMapClick),
                    this._map.off("move", this._update),
                    this._map.off("moveend", this._update),
                    this._map.off("mousedown", this._addDragHandler),
                    this._map.off("touchstart", this._addDragHandler),
                    this._map.off("mouseup", this._onUp),
                    this._map.off("touchend", this._onUp),
                    this._map.off("mousemove", this._onMove),
                    this._map.off("touchmove", this._onMove),
                    delete this._map),
                  f.remove(this._element),
                  this._popup && this._popup.remove(),
                  this
                );
              }),
              (p.prototype.getLngLat = function () {
                return this._lngLat;
              }),
              (p.prototype.setLngLat = function (d) {
                return (
                  (this._lngLat = a.LngLat.convert(d)),
                  (this._pos = null),
                  this._popup && this._popup.setLngLat(this._lngLat),
                  this._update(),
                  this
                );
              }),
              (p.prototype.getElement = function () {
                return this._element;
              }),
              (p.prototype.setPopup = function (d) {
                if (
                  (this._popup &&
                    (this._popup.remove(),
                    (this._popup = null),
                    this._element.removeEventListener(
                      "keypress",
                      this._onKeyPress
                    ),
                    this._originalTabIndex ||
                      this._element.removeAttribute("tabindex")),
                  d)
                ) {
                  if (!("offset" in d.options)) {
                    var g = Math.sqrt(Math.pow(13.5, 2) / 2);
                    d.options.offset = this._defaultMarker
                      ? {
                          top: [0, 0],
                          "top-left": [0, 0],
                          "top-right": [0, 0],
                          bottom: [0, -38.1],
                          "bottom-left": [g, -1 * (24.6 + g)],
                          "bottom-right": [-g, -1 * (24.6 + g)],
                          left: [13.5, -24.6],
                          right: [-13.5, -24.6],
                        }
                      : this._offset;
                  }
                  (this._popup = d),
                    this._lngLat && this._popup.setLngLat(this._lngLat),
                    (this._originalTabIndex =
                      this._element.getAttribute("tabindex")),
                    this._originalTabIndex ||
                      this._element.setAttribute("tabindex", "0"),
                    this._element.addEventListener(
                      "keypress",
                      this._onKeyPress
                    );
                }
                return this;
              }),
              (p.prototype._onKeyPress = function (d) {
                var g = d.code,
                  b = d.charCode || d.keyCode;
                (g !== "Space" && g !== "Enter" && b !== 32 && b !== 13) ||
                  this.togglePopup();
              }),
              (p.prototype._onMapClick = function (d) {
                var g = d.originalEvent.target,
                  b = this._element;
                this._popup && (g === b || b.contains(g)) && this.togglePopup();
              }),
              (p.prototype.getPopup = function () {
                return this._popup;
              }),
              (p.prototype.togglePopup = function () {
                var d = this._popup;
                return d
                  ? (d.isOpen() ? d.remove() : d.addTo(this._map), this)
                  : this;
              }),
              (p.prototype._update = function (d) {
                if (this._map) {
                  this._map.transform.renderWorldCopies &&
                    (this._lngLat = Jc(
                      this._lngLat,
                      this._pos,
                      this._map.transform
                    )),
                    (this._pos = this._map
                      .project(this._lngLat)
                      ._add(this._offset));
                  var g = "";
                  this._rotationAlignment === "viewport" ||
                  this._rotationAlignment === "auto"
                    ? (g = "rotateZ(" + this._rotation + "deg)")
                    : this._rotationAlignment === "map" &&
                      (g =
                        "rotateZ(" +
                        (this._rotation - this._map.getBearing()) +
                        "deg)");
                  var b = "";
                  this._pitchAlignment === "viewport" ||
                  this._pitchAlignment === "auto"
                    ? (b = "rotateX(0deg)")
                    : this._pitchAlignment === "map" &&
                      (b = "rotateX(" + this._map.getPitch() + "deg)"),
                    (d && d.type !== "moveend") ||
                      (this._pos = this._pos.round()),
                    f.setTransform(
                      this._element,
                      Hs[this._anchor] +
                        " translate(" +
                        this._pos.x +
                        "px, " +
                        this._pos.y +
                        "px) " +
                        b +
                        " " +
                        g
                    );
                }
              }),
              (p.prototype.getOffset = function () {
                return this._offset;
              }),
              (p.prototype.setOffset = function (d) {
                return (
                  (this._offset = a.Point.convert(d)), this._update(), this
                );
              }),
              (p.prototype._onMove = function (d) {
                if (!this._isDragging) {
                  var g = this._clickTolerance || this._map._clickTolerance;
                  this._isDragging = d.point.dist(this._pointerdownPos) >= g;
                }
                this._isDragging &&
                  ((this._pos = d.point.sub(this._positionDelta)),
                  (this._lngLat = this._map.unproject(this._pos)),
                  this.setLngLat(this._lngLat),
                  (this._element.style.pointerEvents = "none"),
                  this._state === "pending" &&
                    ((this._state = "active"),
                    this.fire(new a.Event("dragstart"))),
                  this.fire(new a.Event("drag")));
              }),
              (p.prototype._onUp = function () {
                (this._element.style.pointerEvents = "auto"),
                  (this._positionDelta = null),
                  (this._pointerdownPos = null),
                  (this._isDragging = !1),
                  this._map.off("mousemove", this._onMove),
                  this._map.off("touchmove", this._onMove),
                  this._state === "active" && this.fire(new a.Event("dragend")),
                  (this._state = "inactive");
              }),
              (p.prototype._addDragHandler = function (d) {
                this._element.contains(d.originalEvent.target) &&
                  (d.preventDefault(),
                  (this._positionDelta = d.point
                    .sub(this._pos)
                    .add(this._offset)),
                  (this._pointerdownPos = d.point),
                  (this._state = "pending"),
                  this._map.on("mousemove", this._onMove),
                  this._map.on("touchmove", this._onMove),
                  this._map.once("mouseup", this._onUp),
                  this._map.once("touchend", this._onUp));
              }),
              (p.prototype.setDraggable = function (d) {
                return (
                  (this._draggable = !!d),
                  this._map &&
                    (d
                      ? (this._map.on("mousedown", this._addDragHandler),
                        this._map.on("touchstart", this._addDragHandler))
                      : (this._map.off("mousedown", this._addDragHandler),
                        this._map.off("touchstart", this._addDragHandler))),
                  this
                );
              }),
              (p.prototype.isDraggable = function () {
                return this._draggable;
              }),
              (p.prototype.setRotation = function (d) {
                return (this._rotation = d || 0), this._update(), this;
              }),
              (p.prototype.getRotation = function () {
                return this._rotation;
              }),
              (p.prototype.setRotationAlignment = function (d) {
                return (
                  (this._rotationAlignment = d || "auto"), this._update(), this
                );
              }),
              (p.prototype.getRotationAlignment = function () {
                return this._rotationAlignment;
              }),
              (p.prototype.setPitchAlignment = function (d) {
                return (
                  (this._pitchAlignment =
                    d && d !== "auto" ? d : this._rotationAlignment),
                  this._update(),
                  this
                );
              }),
              (p.prototype.getPitchAlignment = function () {
                return this._pitchAlignment;
              }),
              p
            );
          })(a.Evented),
          wd = {
            positionOptions: {
              enableHighAccuracy: !1,
              maximumAge: 0,
              timeout: 6e3,
            },
            fitBoundsOptions: { maxZoom: 15 },
            trackUserLocation: !1,
            showAccuracyCircle: !0,
            showUserLocation: !0,
          },
          Tc = 0,
          Sc = !1,
          N0 = (function (u) {
            function p(d) {
              u.call(this),
                (this.options = a.extend({}, wd, d)),
                a.bindAll(
                  [
                    "_onSuccess",
                    "_onError",
                    "_onZoom",
                    "_finish",
                    "_setupUI",
                    "_updateCamera",
                    "_updateMarker",
                  ],
                  this
                );
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.onAdd = function (d) {
                var g;
                return (
                  (this._map = d),
                  (this._container = f.create(
                    "div",
                    "mapboxgl-ctrl mapboxgl-ctrl-group"
                  )),
                  (g = this._setupUI),
                  eu !== void 0
                    ? g(eu)
                    : a.window.navigator.permissions !== void 0
                    ? a.window.navigator.permissions
                        .query({ name: "geolocation" })
                        .then(function (b) {
                          g((eu = b.state !== "denied"));
                        })
                    : g((eu = !!a.window.navigator.geolocation)),
                  this._container
                );
              }),
              (p.prototype.onRemove = function () {
                this._geolocationWatchID !== void 0 &&
                  (a.window.navigator.geolocation.clearWatch(
                    this._geolocationWatchID
                  ),
                  (this._geolocationWatchID = void 0)),
                  this.options.showUserLocation &&
                    this._userLocationDotMarker &&
                    this._userLocationDotMarker.remove(),
                  this.options.showAccuracyCircle &&
                    this._accuracyCircleMarker &&
                    this._accuracyCircleMarker.remove(),
                  f.remove(this._container),
                  this._map.off("zoom", this._onZoom),
                  (this._map = void 0),
                  (Tc = 0),
                  (Sc = !1);
              }),
              (p.prototype._isOutOfMapMaxBounds = function (d) {
                var g = this._map.getMaxBounds(),
                  b = d.coords;
                return (
                  g &&
                  (b.longitude < g.getWest() ||
                    b.longitude > g.getEast() ||
                    b.latitude < g.getSouth() ||
                    b.latitude > g.getNorth())
                );
              }),
              (p.prototype._setErrorState = function () {
                switch (this._watchState) {
                  case "WAITING_ACTIVE":
                    (this._watchState = "ACTIVE_ERROR"),
                      this._geolocateButton.classList.remove(
                        "mapboxgl-ctrl-geolocate-active"
                      ),
                      this._geolocateButton.classList.add(
                        "mapboxgl-ctrl-geolocate-active-error"
                      );
                    break;
                  case "ACTIVE_LOCK":
                    (this._watchState = "ACTIVE_ERROR"),
                      this._geolocateButton.classList.remove(
                        "mapboxgl-ctrl-geolocate-active"
                      ),
                      this._geolocateButton.classList.add(
                        "mapboxgl-ctrl-geolocate-active-error"
                      ),
                      this._geolocateButton.classList.add(
                        "mapboxgl-ctrl-geolocate-waiting"
                      );
                    break;
                  case "BACKGROUND":
                    (this._watchState = "BACKGROUND_ERROR"),
                      this._geolocateButton.classList.remove(
                        "mapboxgl-ctrl-geolocate-background"
                      ),
                      this._geolocateButton.classList.add(
                        "mapboxgl-ctrl-geolocate-background-error"
                      ),
                      this._geolocateButton.classList.add(
                        "mapboxgl-ctrl-geolocate-waiting"
                      );
                }
              }),
              (p.prototype._onSuccess = function (d) {
                if (this._map) {
                  if (this._isOutOfMapMaxBounds(d))
                    return (
                      this._setErrorState(),
                      this.fire(new a.Event("outofmaxbounds", d)),
                      this._updateMarker(),
                      void this._finish()
                    );
                  if (this.options.trackUserLocation)
                    switch (((this._lastKnownPosition = d), this._watchState)) {
                      case "WAITING_ACTIVE":
                      case "ACTIVE_LOCK":
                      case "ACTIVE_ERROR":
                        (this._watchState = "ACTIVE_LOCK"),
                          this._geolocateButton.classList.remove(
                            "mapboxgl-ctrl-geolocate-waiting"
                          ),
                          this._geolocateButton.classList.remove(
                            "mapboxgl-ctrl-geolocate-active-error"
                          ),
                          this._geolocateButton.classList.add(
                            "mapboxgl-ctrl-geolocate-active"
                          );
                        break;
                      case "BACKGROUND":
                      case "BACKGROUND_ERROR":
                        (this._watchState = "BACKGROUND"),
                          this._geolocateButton.classList.remove(
                            "mapboxgl-ctrl-geolocate-waiting"
                          ),
                          this._geolocateButton.classList.remove(
                            "mapboxgl-ctrl-geolocate-background-error"
                          ),
                          this._geolocateButton.classList.add(
                            "mapboxgl-ctrl-geolocate-background"
                          );
                    }
                  this.options.showUserLocation &&
                    this._watchState !== "OFF" &&
                    this._updateMarker(d),
                    (this.options.trackUserLocation &&
                      this._watchState !== "ACTIVE_LOCK") ||
                      this._updateCamera(d),
                    this.options.showUserLocation &&
                      this._dotElement.classList.remove(
                        "mapboxgl-user-location-dot-stale"
                      ),
                    this.fire(new a.Event("geolocate", d)),
                    this._finish();
                }
              }),
              (p.prototype._updateCamera = function (d) {
                var g = new a.LngLat(d.coords.longitude, d.coords.latitude),
                  b = d.coords.accuracy,
                  S = this._map.getBearing(),
                  w = a.extend({ bearing: S }, this.options.fitBoundsOptions);
                this._map.fitBounds(g.toBounds(b), w, { geolocateSource: !0 });
              }),
              (p.prototype._updateMarker = function (d) {
                if (d) {
                  var g = new a.LngLat(d.coords.longitude, d.coords.latitude);
                  this._accuracyCircleMarker.setLngLat(g).addTo(this._map),
                    this._userLocationDotMarker.setLngLat(g).addTo(this._map),
                    (this._accuracy = d.coords.accuracy),
                    this.options.showUserLocation &&
                      this.options.showAccuracyCircle &&
                      this._updateCircleRadius();
                } else
                  this._userLocationDotMarker.remove(),
                    this._accuracyCircleMarker.remove();
              }),
              (p.prototype._updateCircleRadius = function () {
                var d = this._map._container.clientHeight / 2,
                  g = this._map.unproject([0, d]),
                  b = this._map.unproject([1, d]),
                  S = g.distanceTo(b),
                  w = Math.ceil((2 * this._accuracy) / S);
                (this._circleElement.style.width = w + "px"),
                  (this._circleElement.style.height = w + "px");
              }),
              (p.prototype._onZoom = function () {
                this.options.showUserLocation &&
                  this.options.showAccuracyCircle &&
                  this._updateCircleRadius();
              }),
              (p.prototype._onError = function (d) {
                if (this._map) {
                  if (this.options.trackUserLocation)
                    if (d.code === 1) {
                      (this._watchState = "OFF"),
                        this._geolocateButton.classList.remove(
                          "mapboxgl-ctrl-geolocate-waiting"
                        ),
                        this._geolocateButton.classList.remove(
                          "mapboxgl-ctrl-geolocate-active"
                        ),
                        this._geolocateButton.classList.remove(
                          "mapboxgl-ctrl-geolocate-active-error"
                        ),
                        this._geolocateButton.classList.remove(
                          "mapboxgl-ctrl-geolocate-background"
                        ),
                        this._geolocateButton.classList.remove(
                          "mapboxgl-ctrl-geolocate-background-error"
                        ),
                        (this._geolocateButton.disabled = !0);
                      var g = this._map._getUIString(
                        "GeolocateControl.LocationNotAvailable"
                      );
                      (this._geolocateButton.title = g),
                        this._geolocateButton.setAttribute("aria-label", g),
                        this._geolocationWatchID !== void 0 &&
                          this._clearWatch();
                    } else {
                      if (d.code === 3 && Sc) return;
                      this._setErrorState();
                    }
                  this._watchState !== "OFF" &&
                    this.options.showUserLocation &&
                    this._dotElement.classList.add(
                      "mapboxgl-user-location-dot-stale"
                    ),
                    this.fire(new a.Event("error", d)),
                    this._finish();
                }
              }),
              (p.prototype._finish = function () {
                this._timeoutId && clearTimeout(this._timeoutId),
                  (this._timeoutId = void 0);
              }),
              (p.prototype._setupUI = function (d) {
                var g = this;
                if (
                  (this._container.addEventListener(
                    "contextmenu",
                    function (w) {
                      return w.preventDefault();
                    }
                  ),
                  (this._geolocateButton = f.create(
                    "button",
                    "mapboxgl-ctrl-geolocate",
                    this._container
                  )),
                  f
                    .create("span", "mapboxgl-ctrl-icon", this._geolocateButton)
                    .setAttribute("aria-hidden", !0),
                  (this._geolocateButton.type = "button"),
                  d === !1)
                ) {
                  a.warnOnce(
                    "Geolocation support is not available so the GeolocateControl will be disabled."
                  );
                  var b = this._map._getUIString(
                    "GeolocateControl.LocationNotAvailable"
                  );
                  (this._geolocateButton.disabled = !0),
                    (this._geolocateButton.title = b),
                    this._geolocateButton.setAttribute("aria-label", b);
                } else {
                  var S = this._map._getUIString(
                    "GeolocateControl.FindMyLocation"
                  );
                  (this._geolocateButton.title = S),
                    this._geolocateButton.setAttribute("aria-label", S);
                }
                this.options.trackUserLocation &&
                  (this._geolocateButton.setAttribute("aria-pressed", "false"),
                  (this._watchState = "OFF")),
                  this.options.showUserLocation &&
                    ((this._dotElement = f.create(
                      "div",
                      "mapboxgl-user-location-dot"
                    )),
                    (this._userLocationDotMarker = new Fu(this._dotElement)),
                    (this._circleElement = f.create(
                      "div",
                      "mapboxgl-user-location-accuracy-circle"
                    )),
                    (this._accuracyCircleMarker = new Fu({
                      element: this._circleElement,
                      pitchAlignment: "map",
                    })),
                    this.options.trackUserLocation &&
                      (this._watchState = "OFF"),
                    this._map.on("zoom", this._onZoom)),
                  this._geolocateButton.addEventListener(
                    "click",
                    this.trigger.bind(this)
                  ),
                  (this._setup = !0),
                  this.options.trackUserLocation &&
                    this._map.on("movestart", function (w) {
                      w.geolocateSource ||
                        g._watchState !== "ACTIVE_LOCK" ||
                        (w.originalEvent &&
                          w.originalEvent.type === "resize") ||
                        ((g._watchState = "BACKGROUND"),
                        g._geolocateButton.classList.add(
                          "mapboxgl-ctrl-geolocate-background"
                        ),
                        g._geolocateButton.classList.remove(
                          "mapboxgl-ctrl-geolocate-active"
                        ),
                        g.fire(new a.Event("trackuserlocationend")));
                    });
              }),
              (p.prototype.trigger = function () {
                if (!this._setup)
                  return (
                    a.warnOnce(
                      "Geolocate control triggered before added to a map"
                    ),
                    !1
                  );
                if (this.options.trackUserLocation) {
                  switch (this._watchState) {
                    case "OFF":
                      (this._watchState = "WAITING_ACTIVE"),
                        this.fire(new a.Event("trackuserlocationstart"));
                      break;
                    case "WAITING_ACTIVE":
                    case "ACTIVE_LOCK":
                    case "ACTIVE_ERROR":
                    case "BACKGROUND_ERROR":
                      Tc--,
                        (Sc = !1),
                        (this._watchState = "OFF"),
                        this._geolocateButton.classList.remove(
                          "mapboxgl-ctrl-geolocate-waiting"
                        ),
                        this._geolocateButton.classList.remove(
                          "mapboxgl-ctrl-geolocate-active"
                        ),
                        this._geolocateButton.classList.remove(
                          "mapboxgl-ctrl-geolocate-active-error"
                        ),
                        this._geolocateButton.classList.remove(
                          "mapboxgl-ctrl-geolocate-background"
                        ),
                        this._geolocateButton.classList.remove(
                          "mapboxgl-ctrl-geolocate-background-error"
                        ),
                        this.fire(new a.Event("trackuserlocationend"));
                      break;
                    case "BACKGROUND":
                      (this._watchState = "ACTIVE_LOCK"),
                        this._geolocateButton.classList.remove(
                          "mapboxgl-ctrl-geolocate-background"
                        ),
                        this._lastKnownPosition &&
                          this._updateCamera(this._lastKnownPosition),
                        this.fire(new a.Event("trackuserlocationstart"));
                  }
                  switch (this._watchState) {
                    case "WAITING_ACTIVE":
                      this._geolocateButton.classList.add(
                        "mapboxgl-ctrl-geolocate-waiting"
                      ),
                        this._geolocateButton.classList.add(
                          "mapboxgl-ctrl-geolocate-active"
                        );
                      break;
                    case "ACTIVE_LOCK":
                      this._geolocateButton.classList.add(
                        "mapboxgl-ctrl-geolocate-active"
                      );
                      break;
                    case "ACTIVE_ERROR":
                      this._geolocateButton.classList.add(
                        "mapboxgl-ctrl-geolocate-waiting"
                      ),
                        this._geolocateButton.classList.add(
                          "mapboxgl-ctrl-geolocate-active-error"
                        );
                      break;
                    case "BACKGROUND":
                      this._geolocateButton.classList.add(
                        "mapboxgl-ctrl-geolocate-background"
                      );
                      break;
                    case "BACKGROUND_ERROR":
                      this._geolocateButton.classList.add(
                        "mapboxgl-ctrl-geolocate-waiting"
                      ),
                        this._geolocateButton.classList.add(
                          "mapboxgl-ctrl-geolocate-background-error"
                        );
                  }
                  if (
                    this._watchState === "OFF" &&
                    this._geolocationWatchID !== void 0
                  )
                    this._clearWatch();
                  else if (this._geolocationWatchID === void 0) {
                    var d;
                    this._geolocateButton.classList.add(
                      "mapboxgl-ctrl-geolocate-waiting"
                    ),
                      this._geolocateButton.setAttribute(
                        "aria-pressed",
                        "true"
                      ),
                      ++Tc > 1
                        ? ((d = { maximumAge: 6e5, timeout: 0 }), (Sc = !0))
                        : ((d = this.options.positionOptions), (Sc = !1)),
                      (this._geolocationWatchID =
                        a.window.navigator.geolocation.watchPosition(
                          this._onSuccess,
                          this._onError,
                          d
                        ));
                  }
                } else
                  a.window.navigator.geolocation.getCurrentPosition(
                    this._onSuccess,
                    this._onError,
                    this.options.positionOptions
                  ),
                    (this._timeoutId = setTimeout(this._finish, 1e4));
                return !0;
              }),
              (p.prototype._clearWatch = function () {
                a.window.navigator.geolocation.clearWatch(
                  this._geolocationWatchID
                ),
                  (this._geolocationWatchID = void 0),
                  this._geolocateButton.classList.remove(
                    "mapboxgl-ctrl-geolocate-waiting"
                  ),
                  this._geolocateButton.setAttribute("aria-pressed", "false"),
                  this.options.showUserLocation && this._updateMarker(null);
              }),
              p
            );
          })(a.Evented),
          js = { maxWidth: 100, unit: "metric" },
          As = function (u) {
            (this.options = a.extend({}, js, u)),
              a.bindAll(["_onMove", "setUnit"], this);
          };
        function Cd(u, p, d) {
          var g = (d && d.maxWidth) || 100,
            b = u._container.clientHeight / 2,
            S = u.unproject([0, b]),
            w = u.unproject([g, b]),
            M = S.distanceTo(w);
          if (d && d.unit === "imperial") {
            var B = 3.2808 * M;
            B > 5280
              ? Yl(p, g, B / 5280, u._getUIString("ScaleControl.Miles"))
              : Yl(p, g, B, u._getUIString("ScaleControl.Feet"));
          } else d && d.unit === "nautical" ? Yl(p, g, M / 1852, u._getUIString("ScaleControl.NauticalMiles")) : M >= 1e3 ? Yl(p, g, M / 1e3, u._getUIString("ScaleControl.Kilometers")) : Yl(p, g, M, u._getUIString("ScaleControl.Meters"));
        }
        function Yl(u, p, d, g) {
          var b,
            S,
            w,
            M =
              ((b = d),
              (S = Math.pow(10, ("" + Math.floor(b)).length - 1)) *
                (w =
                  (w = b / S) >= 10
                    ? 10
                    : w >= 5
                    ? 5
                    : w >= 3
                    ? 3
                    : w >= 2
                    ? 2
                    : w >= 1
                    ? 1
                    : (function (B) {
                        var V = Math.pow(
                          10,
                          Math.ceil(-Math.log(B) / Math.LN10)
                        );
                        return Math.round(B * V) / V;
                      })(w)));
          (u.style.width = p * (M / d) + "px"),
            (u.innerHTML = M + "&nbsp;" + g);
        }
        (As.prototype.getDefaultPosition = function () {
          return "bottom-left";
        }),
          (As.prototype._onMove = function () {
            Cd(this._map, this._container, this.options);
          }),
          (As.prototype.onAdd = function (u) {
            return (
              (this._map = u),
              (this._container = f.create(
                "div",
                "mapboxgl-ctrl mapboxgl-ctrl-scale",
                u.getContainer()
              )),
              this._map.on("move", this._onMove),
              this._onMove(),
              this._container
            );
          }),
          (As.prototype.onRemove = function () {
            f.remove(this._container),
              this._map.off("move", this._onMove),
              (this._map = void 0);
          }),
          (As.prototype.setUnit = function (u) {
            (this.options.unit = u),
              Cd(this._map, this._container, this.options);
          });
        var cs = function (u) {
          (this._fullscreen = !1),
            u &&
              u.container &&
              (u.container instanceof a.window.HTMLElement
                ? (this._container = u.container)
                : a.warnOnce(
                    "Full screen control 'container' must be a DOM element."
                  )),
            a.bindAll(["_onClickFullscreen", "_changeIcon"], this),
            "onfullscreenchange" in a.window.document
              ? (this._fullscreenchange = "fullscreenchange")
              : "onmozfullscreenchange" in a.window.document
              ? (this._fullscreenchange = "mozfullscreenchange")
              : "onwebkitfullscreenchange" in a.window.document
              ? (this._fullscreenchange = "webkitfullscreenchange")
              : "onmsfullscreenchange" in a.window.document &&
                (this._fullscreenchange = "MSFullscreenChange");
        };
        (cs.prototype.onAdd = function (u) {
          return (
            (this._map = u),
            this._container || (this._container = this._map.getContainer()),
            (this._controlContainer = f.create(
              "div",
              "mapboxgl-ctrl mapboxgl-ctrl-group"
            )),
            this._checkFullscreenSupport()
              ? this._setupUI()
              : ((this._controlContainer.style.display = "none"),
                a.warnOnce("This device does not support fullscreen mode.")),
            this._controlContainer
          );
        }),
          (cs.prototype.onRemove = function () {
            f.remove(this._controlContainer),
              (this._map = null),
              a.window.document.removeEventListener(
                this._fullscreenchange,
                this._changeIcon
              );
          }),
          (cs.prototype._checkFullscreenSupport = function () {
            return !!(
              a.window.document.fullscreenEnabled ||
              a.window.document.mozFullScreenEnabled ||
              a.window.document.msFullscreenEnabled ||
              a.window.document.webkitFullscreenEnabled
            );
          }),
          (cs.prototype._setupUI = function () {
            var u = (this._fullscreenButton = f.create(
              "button",
              "mapboxgl-ctrl-fullscreen",
              this._controlContainer
            ));
            f
              .create("span", "mapboxgl-ctrl-icon", u)
              .setAttribute("aria-hidden", !0),
              (u.type = "button"),
              this._updateTitle(),
              this._fullscreenButton.addEventListener(
                "click",
                this._onClickFullscreen
              ),
              a.window.document.addEventListener(
                this._fullscreenchange,
                this._changeIcon
              );
          }),
          (cs.prototype._updateTitle = function () {
            var u = this._getTitle();
            this._fullscreenButton.setAttribute("aria-label", u),
              (this._fullscreenButton.title = u);
          }),
          (cs.prototype._getTitle = function () {
            return this._map._getUIString(
              this._isFullscreen()
                ? "FullscreenControl.Exit"
                : "FullscreenControl.Enter"
            );
          }),
          (cs.prototype._isFullscreen = function () {
            return this._fullscreen;
          }),
          (cs.prototype._changeIcon = function () {
            ((a.window.document.fullscreenElement ||
              a.window.document.mozFullScreenElement ||
              a.window.document.webkitFullscreenElement ||
              a.window.document.msFullscreenElement) ===
              this._container) !==
              this._fullscreen &&
              ((this._fullscreen = !this._fullscreen),
              this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),
              this._fullscreenButton.classList.toggle(
                "mapboxgl-ctrl-fullscreen"
              ),
              this._updateTitle());
          }),
          (cs.prototype._onClickFullscreen = function () {
            this._isFullscreen()
              ? a.window.document.exitFullscreen
                ? a.window.document.exitFullscreen()
                : a.window.document.mozCancelFullScreen
                ? a.window.document.mozCancelFullScreen()
                : a.window.document.msExitFullscreen
                ? a.window.document.msExitFullscreen()
                : a.window.document.webkitCancelFullScreen &&
                  a.window.document.webkitCancelFullScreen()
              : this._container.requestFullscreen
              ? this._container.requestFullscreen()
              : this._container.mozRequestFullScreen
              ? this._container.mozRequestFullScreen()
              : this._container.msRequestFullscreen
              ? this._container.msRequestFullscreen()
              : this._container.webkitRequestFullscreen &&
                this._container.webkitRequestFullscreen();
          });
        var R0 = {
            closeButton: !0,
            closeOnClick: !0,
            focusAfterOpen: !0,
            className: "",
            maxWidth: "240px",
          },
          ku = [
            "a[href]",
            "[tabindex]:not([tabindex='-1'])",
            "[contenteditable]:not([contenteditable='false'])",
            "button:not([disabled])",
            "input:not([disabled])",
            "select:not([disabled])",
            "textarea:not([disabled])",
          ].join(", "),
          Nd = (function (u) {
            function p(d) {
              u.call(this),
                (this.options = a.extend(Object.create(R0), d)),
                a.bindAll(
                  [
                    "_update",
                    "_onClose",
                    "remove",
                    "_onMouseMove",
                    "_onMouseUp",
                    "_onDrag",
                  ],
                  this
                );
            }
            return (
              u && (p.__proto__ = u),
              ((p.prototype = Object.create(u && u.prototype)).constructor = p),
              (p.prototype.addTo = function (d) {
                return (
                  this._map && this.remove(),
                  (this._map = d),
                  this.options.closeOnClick &&
                    this._map.on("click", this._onClose),
                  this.options.closeOnMove &&
                    this._map.on("move", this._onClose),
                  this._map.on("remove", this.remove),
                  this._update(),
                  this._focusFirstElement(),
                  this._trackPointer
                    ? (this._map.on("mousemove", this._onMouseMove),
                      this._map.on("mouseup", this._onMouseUp),
                      this._container &&
                        this._container.classList.add(
                          "mapboxgl-popup-track-pointer"
                        ),
                      this._map._canvasContainer.classList.add(
                        "mapboxgl-track-pointer"
                      ))
                    : this._map.on("move", this._update),
                  this.fire(new a.Event("open")),
                  this
                );
              }),
              (p.prototype.isOpen = function () {
                return !!this._map;
              }),
              (p.prototype.remove = function () {
                return (
                  this._content && f.remove(this._content),
                  this._container &&
                    (f.remove(this._container), delete this._container),
                  this._map &&
                    (this._map.off("move", this._update),
                    this._map.off("move", this._onClose),
                    this._map.off("click", this._onClose),
                    this._map.off("remove", this.remove),
                    this._map.off("mousemove", this._onMouseMove),
                    this._map.off("mouseup", this._onMouseUp),
                    this._map.off("drag", this._onDrag),
                    delete this._map),
                  this.fire(new a.Event("close")),
                  this
                );
              }),
              (p.prototype.getLngLat = function () {
                return this._lngLat;
              }),
              (p.prototype.setLngLat = function (d) {
                return (
                  (this._lngLat = a.LngLat.convert(d)),
                  (this._pos = null),
                  (this._trackPointer = !1),
                  this._update(),
                  this._map &&
                    (this._map.on("move", this._update),
                    this._map.off("mousemove", this._onMouseMove),
                    this._container &&
                      this._container.classList.remove(
                        "mapboxgl-popup-track-pointer"
                      ),
                    this._map._canvasContainer.classList.remove(
                      "mapboxgl-track-pointer"
                    )),
                  this
                );
              }),
              (p.prototype.trackPointer = function () {
                return (
                  (this._trackPointer = !0),
                  (this._pos = null),
                  this._update(),
                  this._map &&
                    (this._map.off("move", this._update),
                    this._map.on("mousemove", this._onMouseMove),
                    this._map.on("drag", this._onDrag),
                    this._container &&
                      this._container.classList.add(
                        "mapboxgl-popup-track-pointer"
                      ),
                    this._map._canvasContainer.classList.add(
                      "mapboxgl-track-pointer"
                    )),
                  this
                );
              }),
              (p.prototype.getElement = function () {
                return this._container;
              }),
              (p.prototype.setText = function (d) {
                return this.setDOMContent(a.window.document.createTextNode(d));
              }),
              (p.prototype.setHTML = function (d) {
                var g,
                  b = a.window.document.createDocumentFragment(),
                  S = a.window.document.createElement("body");
                for (S.innerHTML = d; (g = S.firstChild); ) b.appendChild(g);
                return this.setDOMContent(b);
              }),
              (p.prototype.getMaxWidth = function () {
                return this._container && this._container.style.maxWidth;
              }),
              (p.prototype.setMaxWidth = function (d) {
                return (this.options.maxWidth = d), this._update(), this;
              }),
              (p.prototype.setDOMContent = function (d) {
                if (this._content)
                  for (; this._content.hasChildNodes(); )
                    this._content.firstChild &&
                      this._content.removeChild(this._content.firstChild);
                else
                  this._content = f.create(
                    "div",
                    "mapboxgl-popup-content",
                    this._container
                  );
                return (
                  this._content.appendChild(d),
                  this._createCloseButton(),
                  this._update(),
                  this._focusFirstElement(),
                  this
                );
              }),
              (p.prototype.addClassName = function (d) {
                this._container && this._container.classList.add(d);
              }),
              (p.prototype.removeClassName = function (d) {
                this._container && this._container.classList.remove(d);
              }),
              (p.prototype.setOffset = function (d) {
                return (this.options.offset = d), this._update(), this;
              }),
              (p.prototype.toggleClassName = function (d) {
                if (this._container) return this._container.classList.toggle(d);
              }),
              (p.prototype._createCloseButton = function () {
                this.options.closeButton &&
                  ((this._closeButton = f.create(
                    "button",
                    "mapboxgl-popup-close-button",
                    this._content
                  )),
                  (this._closeButton.type = "button"),
                  this._closeButton.setAttribute("aria-label", "Close popup"),
                  (this._closeButton.innerHTML = "&#215;"),
                  this._closeButton.addEventListener("click", this._onClose));
              }),
              (p.prototype._onMouseUp = function (d) {
                this._update(d.point);
              }),
              (p.prototype._onMouseMove = function (d) {
                this._update(d.point);
              }),
              (p.prototype._onDrag = function (d) {
                this._update(d.point);
              }),
              (p.prototype._update = function (d) {
                var g = this;
                if (
                  this._map &&
                  (this._lngLat || this._trackPointer) &&
                  this._content &&
                  (this._container ||
                    ((this._container = f.create(
                      "div",
                      "mapboxgl-popup",
                      this._map.getContainer()
                    )),
                    (this._tip = f.create(
                      "div",
                      "mapboxgl-popup-tip",
                      this._container
                    )),
                    this._container.appendChild(this._content),
                    this.options.className &&
                      this.options.className.split(" ").forEach(function (ne) {
                        return g._container.classList.add(ne);
                      }),
                    this._trackPointer &&
                      this._container.classList.add(
                        "mapboxgl-popup-track-pointer"
                      )),
                  this.options.maxWidth &&
                    this._container.style.maxWidth !== this.options.maxWidth &&
                    (this._container.style.maxWidth = this.options.maxWidth),
                  this._map.transform.renderWorldCopies &&
                    !this._trackPointer &&
                    (this._lngLat = Jc(
                      this._lngLat,
                      this._pos,
                      this._map.transform
                    )),
                  !this._trackPointer || d)
                ) {
                  var b = (this._pos =
                      this._trackPointer && d
                        ? d
                        : this._map.project(this._lngLat)),
                    S = this.options.anchor,
                    w = (function ne(re) {
                      if (re) {
                        if (typeof re == "number") {
                          var _e = Math.round(Math.sqrt(0.5 * Math.pow(re, 2)));
                          return {
                            center: new a.Point(0, 0),
                            top: new a.Point(0, re),
                            "top-left": new a.Point(_e, _e),
                            "top-right": new a.Point(-_e, _e),
                            bottom: new a.Point(0, -re),
                            "bottom-left": new a.Point(_e, -_e),
                            "bottom-right": new a.Point(-_e, -_e),
                            left: new a.Point(re, 0),
                            right: new a.Point(-re, 0),
                          };
                        }
                        if (re instanceof a.Point || Array.isArray(re)) {
                          var pe = a.Point.convert(re);
                          return {
                            center: pe,
                            top: pe,
                            "top-left": pe,
                            "top-right": pe,
                            bottom: pe,
                            "bottom-left": pe,
                            "bottom-right": pe,
                            left: pe,
                            right: pe,
                          };
                        }
                        return {
                          center: a.Point.convert(re.center || [0, 0]),
                          top: a.Point.convert(re.top || [0, 0]),
                          "top-left": a.Point.convert(re["top-left"] || [0, 0]),
                          "top-right": a.Point.convert(
                            re["top-right"] || [0, 0]
                          ),
                          bottom: a.Point.convert(re.bottom || [0, 0]),
                          "bottom-left": a.Point.convert(
                            re["bottom-left"] || [0, 0]
                          ),
                          "bottom-right": a.Point.convert(
                            re["bottom-right"] || [0, 0]
                          ),
                          left: a.Point.convert(re.left || [0, 0]),
                          right: a.Point.convert(re.right || [0, 0]),
                        };
                      }
                      return ne(new a.Point(0, 0));
                    })(this.options.offset);
                  if (!S) {
                    var M,
                      B = this._container.offsetWidth,
                      V = this._container.offsetHeight;
                    (M =
                      b.y + w.bottom.y < V
                        ? ["top"]
                        : b.y > this._map.transform.height - V
                        ? ["bottom"]
                        : []),
                      b.x < B / 2
                        ? M.push("left")
                        : b.x > this._map.transform.width - B / 2 &&
                          M.push("right"),
                      (S = M.length === 0 ? "bottom" : M.join("-"));
                  }
                  var J = b.add(w[S]).round();
                  f.setTransform(
                    this._container,
                    Hs[S] + " translate(" + J.x + "px," + J.y + "px)"
                  ),
                    Sd(this._container, S, "popup");
                }
              }),
              (p.prototype._focusFirstElement = function () {
                if (this.options.focusAfterOpen && this._container) {
                  var d = this._container.querySelector(ku);
                  d && d.focus();
                }
              }),
              (p.prototype._onClose = function () {
                this.remove();
              }),
              p
            );
          })(a.Evented),
          Rd = {
            version: a.version,
            supported: h,
            setRTLTextPlugin: a.setRTLTextPlugin,
            getRTLTextPluginStatus: a.getRTLTextPluginStatus,
            Map: C0,
            NavigationControl: bl,
            GeolocateControl: N0,
            AttributionControl: eo,
            ScaleControl: As,
            FullscreenControl: cs,
            Popup: Nd,
            Marker: Fu,
            Style: Oo,
            LngLat: a.LngLat,
            LngLatBounds: a.LngLatBounds,
            Point: a.Point,
            MercatorCoordinate: a.MercatorCoordinate,
            Evented: a.Evented,
            config: a.config,
            prewarm: function () {
              pt().acquire(dt);
            },
            clearPrewarmedResources: function () {
              var u = yn;
              u &&
                (u.isPreloaded() && u.numActive() === 1
                  ? (u.release(dt), (yn = null))
                  : console.warn(
                      "Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"
                    ));
            },
            get accessToken() {
              return a.config.ACCESS_TOKEN;
            },
            set accessToken(u) {
              a.config.ACCESS_TOKEN = u;
            },
            get baseApiUrl() {
              return a.config.API_URL;
            },
            set baseApiUrl(u) {
              a.config.API_URL = u;
            },
            get workerCount() {
              return Nt.workerCount;
            },
            set workerCount(u) {
              Nt.workerCount = u;
            },
            get maxParallelImageRequests() {
              return a.config.MAX_PARALLEL_IMAGE_REQUESTS;
            },
            set maxParallelImageRequests(u) {
              a.config.MAX_PARALLEL_IMAGE_REQUESTS = u;
            },
            clearStorage: function (u) {
              a.clearTileCache(u);
            },
            workerUrl: "",
          };
        return Rd;
      }),
      o
    );
  });
})(tA);
var vj = tA.exports;
const Qf = ea(vj),
  _j = [
    "id",
    "attributionControl",
    "style",
    "token",
    "rotation",
    "mapInstance",
  ];
function yj(t, e) {
  var n =
      typeof my < "u" &&
      !!my &&
      typeof my.showToast == "function" &&
      my.isFRM !== !0,
    r =
      typeof wx < "u" &&
      wx !== null &&
      (typeof wx.request < "u" || typeof wx.miniProgram < "u");
  if (!(n || r) && (e || (e = document), !!e)) {
    var o = e.head || e.getElementsByTagName("head")[0];
    if (!o) {
      o = e.createElement("head");
      var l = e.body || e.getElementsByTagName("body")[0];
      l ? l.parentNode.insertBefore(o, l) : e.documentElement.appendChild(o);
    }
    var a = e.createElement("style");
    return (
      (a.type = "text/css"),
      a.styleSheet
        ? (a.styleSheet.cssText = t)
        : a.appendChild(e.createTextNode(t)),
      o.appendChild(a),
      a
    );
  }
}
yj(
  `.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{flex-direction:column-reverse}.mapboxgl-popup-anchor-left{flex-direction:row}.mapboxgl-popup-anchor-right{flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`
);
window.mapboxgl = Qf;
let xj = 0;
const $6 =
  "101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg";
class bj extends X7 {
  constructor(...e) {
    super(...e), R(this, "version", "MAPBOX"), R(this, "viewport", void 0);
  }
  getType() {
    return "mapbox";
  }
  lngLatToCoord(e, n = { x: 0, y: 0, z: 0 }) {
    const { x: r, y: o } = this.lngLatToMercator(e, 0);
    return [r - n.x, o - n.y];
  }
  lngLatToMercator(e, n) {
    const {
      x: r = 0,
      y: o = 0,
      z: l = 0,
    } = window.mapboxgl.MercatorCoordinate.fromLngLat(e, n);
    return { x: r, y: o, z: l };
  }
  getModelMatrix(e, n, r, o = [1, 1, 1], l = { x: 0, y: 0, z: 0 }) {
    const a = window.mapboxgl.MercatorCoordinate.fromLngLat(e, n),
      h = a.meterInMercatorCoordinateUnits(),
      f = B1();
    return (
      sc(f, f, Rs(a.x - l.x, a.y - l.y, a.z || 0 - l.z)),
      lc(f, f, Rs(h * o[0], -h * o[1], h * o[2])),
      zp(f, f, r[0]),
      fv(f, f, r[1]),
      F1(f, f, r[2]),
      f
    );
  }
  init() {
    var e = this;
    return bt(function* () {
      const n = e.config,
        {
          id: r = "map",
          attributionControl: o = !1,
          style: l = "light",
          token: a = $6,
          rotation: h = 0,
          mapInstance: f,
        } = n,
        v = pc(n, _j);
      (e.viewport = new H3()),
        !f &&
          !window.mapboxgl &&
          console.error(e.configService.getSceneWarninfo("SDK")),
        a === $6 &&
          l !== "blank" &&
          !window.mapboxgl.accessToken &&
          !f &&
          console.warn(e.configService.getSceneWarninfo("MapToken")),
        !f && !window.mapboxgl.accessToken && (window.mapboxgl.accessToken = a),
        f
          ? ((e.map = f), (e.$mapContainer = e.map.getContainer()))
          : ((e.$mapContainer = e.creatMapContainer(r)),
            (e.map = new window.mapboxgl.Map(
              mt(
                {
                  container: e.$mapContainer,
                  style: e.getMapStyleValue(l),
                  attributionControl: o,
                  bearing: h,
                },
                v
              )
            ))),
        e.map.on("load", () => {
          e.handleCameraChanged();
        }),
        e.map.on("move", e.handleCameraChanged),
        e.handleCameraChanged();
    })();
  }
  destroy() {
    var e;
    (e = this.$mapContainer) === null ||
      e === void 0 ||
      (e = e.parentNode) === null ||
      e === void 0 ||
      e.removeChild(this.$mapContainer),
      this.eventEmitter.removeAllListeners(),
      this.map && (this.map.remove(), (this.$mapContainer = null));
  }
  emit(e, ...n) {
    this.eventEmitter.emit(e, ...n);
  }
  once(e, ...n) {
    this.eventEmitter.once(e, ...n);
  }
  getMapContainer() {
    return this.$mapContainer;
  }
  getCanvasOverlays() {
    var e;
    return (e = this.getMapContainer()) === null || e === void 0
      ? void 0
      : e.querySelector(".mapboxgl-canvas-container");
  }
  meterToCoord(e, n) {
    const r = new Qf.LngLat(e[0], e[1]),
      o = new Qf.LngLat(n[0], n[1]),
      l = r.distanceTo(o),
      a = Qf.MercatorCoordinate.fromLngLat({ lng: e[0], lat: e[1] }),
      h = Qf.MercatorCoordinate.fromLngLat({ lng: n[0], lat: n[1] }),
      { x: f, y: v } = a,
      { x: E, y: x } = h;
    return (
      (Math.sqrt(Math.pow(f - E, 2) + Math.pow(v - x, 2)) * 4194304 * 2) / l
    );
  }
  exportMap(e) {
    const n = this.map.getCanvas();
    return e === "jpg"
      ? n == null
        ? void 0
        : n.toDataURL("image/jpeg")
      : n == null
      ? void 0
      : n.toDataURL("image/png");
  }
  creatMapContainer(e) {
    let n = e;
    typeof e == "string" && (n = document.getElementById(e));
    const r = document.createElement("div");
    return (
      (r.style.cssText += `
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `),
      (r.id = "l7_mapbox_div" + xj++),
      n.appendChild(r),
      r
    );
  }
}
function Ej(t, e) {
  var n =
      typeof my < "u" &&
      !!my &&
      typeof my.showToast == "function" &&
      my.isFRM !== !0,
    r =
      typeof wx < "u" &&
      wx !== null &&
      (typeof wx.request < "u" || typeof wx.miniProgram < "u");
  if (!(n || r) && (e || (e = document), !!e)) {
    var o = e.head || e.getElementsByTagName("head")[0];
    if (!o) {
      o = e.createElement("head");
      var l = e.body || e.getElementsByTagName("body")[0];
      l ? l.parentNode.insertBefore(o, l) : e.documentElement.appendChild(o);
    }
    var a = e.createElement("style");
    return (
      (a.type = "text/css"),
      a.styleSheet
        ? (a.styleSheet.cssText = t)
        : a.appendChild(e.createTextNode(t)),
      o.appendChild(a),
      a
    );
  }
}
Ej(`.mapboxgl-ctrl-logo {
  display: none !important;
}
`);
class Aj extends z3 {
  getServiceConstructor() {
    return bj;
  }
}
const Tj = j3,
  Sj = j3,
  wj = j3;
var hc = function (t) {
    return t == null;
  },
  Cj = {}.toString,
  Nj = function (t, e) {
    return Cj.call(t) === "[object " + e + "]";
  },
  Rj = function (t, e, n) {
    return t < e ? e : t > n ? n : t;
  },
  dp = function (t) {
    return Nj(t, "Number");
  },
  H_ = function (t, e) {
    return (
      (H_ =
        Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array &&
          function (n, r) {
            n.__proto__ = r;
          }) ||
        function (n, r) {
          for (var o in r)
            Object.prototype.hasOwnProperty.call(r, o) && (n[o] = r[o]);
        }),
      H_(t, e)
    );
  };
function ga(t, e) {
  if (typeof e != "function" && e !== null)
    throw new TypeError(
      "Class extends value " + String(e) + " is not a constructor or null"
    );
  H_(t, e);
  function n() {
    this.constructor = t;
  }
  t.prototype =
    e === null ? Object.create(e) : ((n.prototype = e.prototype), new n());
}
var da = function () {
  return (
    (da =
      Object.assign ||
      function (e) {
        for (var n, r = 1, o = arguments.length; r < o; r++) {
          n = arguments[r];
          for (var l in n)
            Object.prototype.hasOwnProperty.call(n, l) && (e[l] = n[l]);
        }
        return e;
      }),
    da.apply(this, arguments)
  );
};
function rl(t, e) {
  var n = {};
  for (var r in t)
    Object.prototype.hasOwnProperty.call(t, r) &&
      e.indexOf(r) < 0 &&
      (n[r] = t[r]);
  if (t != null && typeof Object.getOwnPropertySymbols == "function")
    for (var o = 0, r = Object.getOwnPropertySymbols(t); o < r.length; o++)
      e.indexOf(r[o]) < 0 &&
        Object.prototype.propertyIsEnumerable.call(t, r[o]) &&
        (n[r[o]] = t[r[o]]);
  return n;
}
function xu(t, e, n, r) {
  function o(l) {
    return l instanceof n
      ? l
      : new n(function (a) {
          a(l);
        });
  }
  return new (n || (n = Promise))(function (l, a) {
    function h(E) {
      try {
        v(r.next(E));
      } catch (x) {
        a(x);
      }
    }
    function f(E) {
      try {
        v(r.throw(E));
      } catch (x) {
        a(x);
      }
    }
    function v(E) {
      E.done ? l(E.value) : o(E.value).then(h, f);
    }
    v((r = r.apply(t, e || [])).next());
  });
}
function bp(t, e) {
  var n = {
      label: 0,
      sent: function () {
        if (l[0] & 1) throw l[1];
        return l[1];
      },
      trys: [],
      ops: [],
    },
    r,
    o,
    l,
    a = Object.create(
      (typeof Iterator == "function" ? Iterator : Object).prototype
    );
  return (
    (a.next = h(0)),
    (a.throw = h(1)),
    (a.return = h(2)),
    typeof Symbol == "function" &&
      (a[Symbol.iterator] = function () {
        return this;
      }),
    a
  );
  function h(v) {
    return function (E) {
      return f([v, E]);
    };
  }
  function f(v) {
    if (r) throw new TypeError("Generator is already executing.");
    for (; a && ((a = 0), v[0] && (n = 0)), n; )
      try {
        if (
          ((r = 1),
          o &&
            (l =
              v[0] & 2
                ? o.return
                : v[0]
                ? o.throw || ((l = o.return) && l.call(o), 0)
                : o.next) &&
            !(l = l.call(o, v[1])).done)
        )
          return l;
        switch (((o = 0), l && (v = [v[0] & 2, l.value]), v[0])) {
          case 0:
          case 1:
            l = v;
            break;
          case 4:
            return n.label++, { value: v[1], done: !1 };
          case 5:
            n.label++, (o = v[1]), (v = [0]);
            continue;
          case 7:
            (v = n.ops.pop()), n.trys.pop();
            continue;
          default:
            if (
              ((l = n.trys),
              !(l = l.length > 0 && l[l.length - 1]) &&
                (v[0] === 6 || v[0] === 2))
            ) {
              n = 0;
              continue;
            }
            if (v[0] === 3 && (!l || (v[1] > l[0] && v[1] < l[3]))) {
              n.label = v[1];
              break;
            }
            if (v[0] === 6 && n.label < l[1]) {
              (n.label = l[1]), (l = v);
              break;
            }
            if (l && n.label < l[2]) {
              (n.label = l[2]), n.ops.push(v);
              break;
            }
            l[2] && n.ops.pop(), n.trys.pop();
            continue;
        }
        v = e.call(t, n);
      } catch (E) {
        (v = [6, E]), (o = 0);
      } finally {
        r = l = 0;
      }
    if (v[0] & 5) throw v[1];
    return { value: v[0] ? v[1] : void 0, done: !0 };
  }
}
function ah(t) {
  var e = typeof Symbol == "function" && Symbol.iterator,
    n = e && t[e],
    r = 0;
  if (n) return n.call(t);
  if (t && typeof t.length == "number")
    return {
      next: function () {
        return (
          t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t }
        );
      },
    };
  throw new TypeError(
    e ? "Object is not iterable." : "Symbol.iterator is not defined."
  );
}
function Lc(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t),
    o,
    l = [],
    a;
  try {
    for (; (e === void 0 || e-- > 0) && !(o = r.next()).done; ) l.push(o.value);
  } catch (h) {
    a = { error: h };
  } finally {
    try {
      o && !o.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return l;
}
function nA() {
  for (var t = 0, e = 0, n = arguments.length; e < n; e++)
    t += arguments[e].length;
  for (var r = Array(t), o = 0, e = 0; e < n; e++)
    for (var l = arguments[e], a = 0, h = l.length; a < h; a++, o++)
      r[o] = l[a];
  return r;
}
function Ff(t, e, n) {
  if (n || arguments.length === 2)
    for (var r = 0, o = e.length, l; r < o; r++)
      (l || !(r in e)) &&
        (l || (l = Array.prototype.slice.call(e, 0, r)), (l[r] = e[r]));
  return t.concat(l || Array.prototype.slice.call(e));
}
var rA = { exports: {} };
(function (t) {
  var e = Object.prototype.hasOwnProperty,
    n = "~";
  function r() {}
  Object.create &&
    ((r.prototype = Object.create(null)), new r().__proto__ || (n = !1));
  function o(f, v, E) {
    (this.fn = f), (this.context = v), (this.once = E || !1);
  }
  function l(f, v, E, x, T) {
    if (typeof E != "function")
      throw new TypeError("The listener must be a function");
    var N = new o(E, x || f, T),
      I = n ? n + v : v;
    return (
      f._events[I]
        ? f._events[I].fn
          ? (f._events[I] = [f._events[I], N])
          : f._events[I].push(N)
        : ((f._events[I] = N), f._eventsCount++),
      f
    );
  }
  function a(f, v) {
    --f._eventsCount === 0 ? (f._events = new r()) : delete f._events[v];
  }
  function h() {
    (this._events = new r()), (this._eventsCount = 0);
  }
  (h.prototype.eventNames = function () {
    var v = [],
      E,
      x;
    if (this._eventsCount === 0) return v;
    for (x in (E = this._events)) e.call(E, x) && v.push(n ? x.slice(1) : x);
    return Object.getOwnPropertySymbols
      ? v.concat(Object.getOwnPropertySymbols(E))
      : v;
  }),
    (h.prototype.listeners = function (v) {
      var E = n ? n + v : v,
        x = this._events[E];
      if (!x) return [];
      if (x.fn) return [x.fn];
      for (var T = 0, N = x.length, I = new Array(N); T < N; T++)
        I[T] = x[T].fn;
      return I;
    }),
    (h.prototype.listenerCount = function (v) {
      var E = n ? n + v : v,
        x = this._events[E];
      return x ? (x.fn ? 1 : x.length) : 0;
    }),
    (h.prototype.emit = function (v, E, x, T, N, I) {
      var L = n ? n + v : v;
      if (!this._events[L]) return !1;
      var F = this._events[L],
        X = arguments.length,
        G,
        K;
      if (F.fn) {
        switch ((F.once && this.removeListener(v, F.fn, void 0, !0), X)) {
          case 1:
            return F.fn.call(F.context), !0;
          case 2:
            return F.fn.call(F.context, E), !0;
          case 3:
            return F.fn.call(F.context, E, x), !0;
          case 4:
            return F.fn.call(F.context, E, x, T), !0;
          case 5:
            return F.fn.call(F.context, E, x, T, N), !0;
          case 6:
            return F.fn.call(F.context, E, x, T, N, I), !0;
        }
        for (K = 1, G = new Array(X - 1); K < X; K++) G[K - 1] = arguments[K];
        F.fn.apply(F.context, G);
      } else {
        var Q = F.length,
          ee;
        for (K = 0; K < Q; K++)
          switch (
            (F[K].once && this.removeListener(v, F[K].fn, void 0, !0), X)
          ) {
            case 1:
              F[K].fn.call(F[K].context);
              break;
            case 2:
              F[K].fn.call(F[K].context, E);
              break;
            case 3:
              F[K].fn.call(F[K].context, E, x);
              break;
            case 4:
              F[K].fn.call(F[K].context, E, x, T);
              break;
            default:
              if (!G)
                for (ee = 1, G = new Array(X - 1); ee < X; ee++)
                  G[ee - 1] = arguments[ee];
              F[K].fn.apply(F[K].context, G);
          }
      }
      return !0;
    }),
    (h.prototype.on = function (v, E, x) {
      return l(this, v, E, x, !1);
    }),
    (h.prototype.once = function (v, E, x) {
      return l(this, v, E, x, !0);
    }),
    (h.prototype.removeListener = function (v, E, x, T) {
      var N = n ? n + v : v;
      if (!this._events[N]) return this;
      if (!E) return a(this, N), this;
      var I = this._events[N];
      if (I.fn)
        I.fn === E && (!T || I.once) && (!x || I.context === x) && a(this, N);
      else {
        for (var L = 0, F = [], X = I.length; L < X; L++)
          (I[L].fn !== E || (T && !I[L].once) || (x && I[L].context !== x)) &&
            F.push(I[L]);
        F.length ? (this._events[N] = F.length === 1 ? F[0] : F) : a(this, N);
      }
      return this;
    }),
    (h.prototype.removeAllListeners = function (v) {
      var E;
      return (
        v
          ? ((E = n ? n + v : v), this._events[E] && a(this, E))
          : ((this._events = new r()), (this._eventsCount = 0)),
        this
      );
    }),
    (h.prototype.off = h.prototype.removeListener),
    (h.prototype.addListener = h.prototype.on),
    (h.prefixed = n),
    (h.EventEmitter = h),
    (t.exports = h);
})(rA);
var Ij = rA.exports;
const iA = ea(Ij);
var xe;
(function (t) {
  (t[(t.DEPTH_BUFFER_BIT = 256)] = "DEPTH_BUFFER_BIT"),
    (t[(t.STENCIL_BUFFER_BIT = 1024)] = "STENCIL_BUFFER_BIT"),
    (t[(t.COLOR_BUFFER_BIT = 16384)] = "COLOR_BUFFER_BIT"),
    (t[(t.POINTS = 0)] = "POINTS"),
    (t[(t.LINES = 1)] = "LINES"),
    (t[(t.LINE_LOOP = 2)] = "LINE_LOOP"),
    (t[(t.LINE_STRIP = 3)] = "LINE_STRIP"),
    (t[(t.TRIANGLES = 4)] = "TRIANGLES"),
    (t[(t.TRIANGLE_STRIP = 5)] = "TRIANGLE_STRIP"),
    (t[(t.TRIANGLE_FAN = 6)] = "TRIANGLE_FAN"),
    (t[(t.ZERO = 0)] = "ZERO"),
    (t[(t.ONE = 1)] = "ONE"),
    (t[(t.SRC_COLOR = 768)] = "SRC_COLOR"),
    (t[(t.ONE_MINUS_SRC_COLOR = 769)] = "ONE_MINUS_SRC_COLOR"),
    (t[(t.SRC_ALPHA = 770)] = "SRC_ALPHA"),
    (t[(t.ONE_MINUS_SRC_ALPHA = 771)] = "ONE_MINUS_SRC_ALPHA"),
    (t[(t.DST_ALPHA = 772)] = "DST_ALPHA"),
    (t[(t.ONE_MINUS_DST_ALPHA = 773)] = "ONE_MINUS_DST_ALPHA"),
    (t[(t.DST_COLOR = 774)] = "DST_COLOR"),
    (t[(t.ONE_MINUS_DST_COLOR = 775)] = "ONE_MINUS_DST_COLOR"),
    (t[(t.SRC_ALPHA_SATURATE = 776)] = "SRC_ALPHA_SATURATE"),
    (t[(t.CONSTANT_COLOR = 32769)] = "CONSTANT_COLOR"),
    (t[(t.ONE_MINUS_CONSTANT_COLOR = 32770)] = "ONE_MINUS_CONSTANT_COLOR"),
    (t[(t.CONSTANT_ALPHA = 32771)] = "CONSTANT_ALPHA"),
    (t[(t.ONE_MINUS_CONSTANT_ALPHA = 32772)] = "ONE_MINUS_CONSTANT_ALPHA"),
    (t[(t.FUNC_ADD = 32774)] = "FUNC_ADD"),
    (t[(t.FUNC_SUBTRACT = 32778)] = "FUNC_SUBTRACT"),
    (t[(t.FUNC_REVERSE_SUBTRACT = 32779)] = "FUNC_REVERSE_SUBTRACT"),
    (t[(t.BLEND_EQUATION = 32777)] = "BLEND_EQUATION"),
    (t[(t.BLEND_EQUATION_RGB = 32777)] = "BLEND_EQUATION_RGB"),
    (t[(t.BLEND_EQUATION_ALPHA = 34877)] = "BLEND_EQUATION_ALPHA"),
    (t[(t.BLEND_DST_RGB = 32968)] = "BLEND_DST_RGB"),
    (t[(t.BLEND_SRC_RGB = 32969)] = "BLEND_SRC_RGB"),
    (t[(t.BLEND_DST_ALPHA = 32970)] = "BLEND_DST_ALPHA"),
    (t[(t.BLEND_SRC_ALPHA = 32971)] = "BLEND_SRC_ALPHA"),
    (t[(t.BLEND_COLOR = 32773)] = "BLEND_COLOR"),
    (t[(t.ARRAY_BUFFER_BINDING = 34964)] = "ARRAY_BUFFER_BINDING"),
    (t[(t.ELEMENT_ARRAY_BUFFER_BINDING = 34965)] =
      "ELEMENT_ARRAY_BUFFER_BINDING"),
    (t[(t.LINE_WIDTH = 2849)] = "LINE_WIDTH"),
    (t[(t.ALIASED_POINT_SIZE_RANGE = 33901)] = "ALIASED_POINT_SIZE_RANGE"),
    (t[(t.ALIASED_LINE_WIDTH_RANGE = 33902)] = "ALIASED_LINE_WIDTH_RANGE"),
    (t[(t.CULL_FACE_MODE = 2885)] = "CULL_FACE_MODE"),
    (t[(t.FRONT_FACE = 2886)] = "FRONT_FACE"),
    (t[(t.DEPTH_RANGE = 2928)] = "DEPTH_RANGE"),
    (t[(t.DEPTH_WRITEMASK = 2930)] = "DEPTH_WRITEMASK"),
    (t[(t.DEPTH_CLEAR_VALUE = 2931)] = "DEPTH_CLEAR_VALUE"),
    (t[(t.DEPTH_FUNC = 2932)] = "DEPTH_FUNC"),
    (t[(t.STENCIL_CLEAR_VALUE = 2961)] = "STENCIL_CLEAR_VALUE"),
    (t[(t.STENCIL_FUNC = 2962)] = "STENCIL_FUNC"),
    (t[(t.STENCIL_FAIL = 2964)] = "STENCIL_FAIL"),
    (t[(t.STENCIL_PASS_DEPTH_FAIL = 2965)] = "STENCIL_PASS_DEPTH_FAIL"),
    (t[(t.STENCIL_PASS_DEPTH_PASS = 2966)] = "STENCIL_PASS_DEPTH_PASS"),
    (t[(t.STENCIL_REF = 2967)] = "STENCIL_REF"),
    (t[(t.STENCIL_VALUE_MASK = 2963)] = "STENCIL_VALUE_MASK"),
    (t[(t.STENCIL_WRITEMASK = 2968)] = "STENCIL_WRITEMASK"),
    (t[(t.STENCIL_BACK_FUNC = 34816)] = "STENCIL_BACK_FUNC"),
    (t[(t.STENCIL_BACK_FAIL = 34817)] = "STENCIL_BACK_FAIL"),
    (t[(t.STENCIL_BACK_PASS_DEPTH_FAIL = 34818)] =
      "STENCIL_BACK_PASS_DEPTH_FAIL"),
    (t[(t.STENCIL_BACK_PASS_DEPTH_PASS = 34819)] =
      "STENCIL_BACK_PASS_DEPTH_PASS"),
    (t[(t.STENCIL_BACK_REF = 36003)] = "STENCIL_BACK_REF"),
    (t[(t.STENCIL_BACK_VALUE_MASK = 36004)] = "STENCIL_BACK_VALUE_MASK"),
    (t[(t.STENCIL_BACK_WRITEMASK = 36005)] = "STENCIL_BACK_WRITEMASK"),
    (t[(t.VIEWPORT = 2978)] = "VIEWPORT"),
    (t[(t.SCISSOR_BOX = 3088)] = "SCISSOR_BOX"),
    (t[(t.COLOR_CLEAR_VALUE = 3106)] = "COLOR_CLEAR_VALUE"),
    (t[(t.COLOR_WRITEMASK = 3107)] = "COLOR_WRITEMASK"),
    (t[(t.UNPACK_ALIGNMENT = 3317)] = "UNPACK_ALIGNMENT"),
    (t[(t.PACK_ALIGNMENT = 3333)] = "PACK_ALIGNMENT"),
    (t[(t.MAX_TEXTURE_SIZE = 3379)] = "MAX_TEXTURE_SIZE"),
    (t[(t.MAX_VIEWPORT_DIMS = 3386)] = "MAX_VIEWPORT_DIMS"),
    (t[(t.SUBPIXEL_BITS = 3408)] = "SUBPIXEL_BITS"),
    (t[(t.RED_BITS = 3410)] = "RED_BITS"),
    (t[(t.GREEN_BITS = 3411)] = "GREEN_BITS"),
    (t[(t.BLUE_BITS = 3412)] = "BLUE_BITS"),
    (t[(t.ALPHA_BITS = 3413)] = "ALPHA_BITS"),
    (t[(t.DEPTH_BITS = 3414)] = "DEPTH_BITS"),
    (t[(t.STENCIL_BITS = 3415)] = "STENCIL_BITS"),
    (t[(t.POLYGON_OFFSET_UNITS = 10752)] = "POLYGON_OFFSET_UNITS"),
    (t[(t.POLYGON_OFFSET_FACTOR = 32824)] = "POLYGON_OFFSET_FACTOR"),
    (t[(t.TEXTURE_BINDING_2D = 32873)] = "TEXTURE_BINDING_2D"),
    (t[(t.SAMPLE_BUFFERS = 32936)] = "SAMPLE_BUFFERS"),
    (t[(t.SAMPLES = 32937)] = "SAMPLES"),
    (t[(t.SAMPLE_COVERAGE_VALUE = 32938)] = "SAMPLE_COVERAGE_VALUE"),
    (t[(t.SAMPLE_COVERAGE_INVERT = 32939)] = "SAMPLE_COVERAGE_INVERT"),
    (t[(t.COMPRESSED_TEXTURE_FORMATS = 34467)] = "COMPRESSED_TEXTURE_FORMATS"),
    (t[(t.VENDOR = 7936)] = "VENDOR"),
    (t[(t.RENDERER = 7937)] = "RENDERER"),
    (t[(t.VERSION = 7938)] = "VERSION"),
    (t[(t.IMPLEMENTATION_COLOR_READ_TYPE = 35738)] =
      "IMPLEMENTATION_COLOR_READ_TYPE"),
    (t[(t.IMPLEMENTATION_COLOR_READ_FORMAT = 35739)] =
      "IMPLEMENTATION_COLOR_READ_FORMAT"),
    (t[(t.BROWSER_DEFAULT_WEBGL = 37444)] = "BROWSER_DEFAULT_WEBGL"),
    (t[(t.STATIC_DRAW = 35044)] = "STATIC_DRAW"),
    (t[(t.STREAM_DRAW = 35040)] = "STREAM_DRAW"),
    (t[(t.DYNAMIC_DRAW = 35048)] = "DYNAMIC_DRAW"),
    (t[(t.ARRAY_BUFFER = 34962)] = "ARRAY_BUFFER"),
    (t[(t.ELEMENT_ARRAY_BUFFER = 34963)] = "ELEMENT_ARRAY_BUFFER"),
    (t[(t.BUFFER_SIZE = 34660)] = "BUFFER_SIZE"),
    (t[(t.BUFFER_USAGE = 34661)] = "BUFFER_USAGE"),
    (t[(t.CURRENT_VERTEX_ATTRIB = 34342)] = "CURRENT_VERTEX_ATTRIB"),
    (t[(t.VERTEX_ATTRIB_ARRAY_ENABLED = 34338)] =
      "VERTEX_ATTRIB_ARRAY_ENABLED"),
    (t[(t.VERTEX_ATTRIB_ARRAY_SIZE = 34339)] = "VERTEX_ATTRIB_ARRAY_SIZE"),
    (t[(t.VERTEX_ATTRIB_ARRAY_STRIDE = 34340)] = "VERTEX_ATTRIB_ARRAY_STRIDE"),
    (t[(t.VERTEX_ATTRIB_ARRAY_TYPE = 34341)] = "VERTEX_ATTRIB_ARRAY_TYPE"),
    (t[(t.VERTEX_ATTRIB_ARRAY_NORMALIZED = 34922)] =
      "VERTEX_ATTRIB_ARRAY_NORMALIZED"),
    (t[(t.VERTEX_ATTRIB_ARRAY_POINTER = 34373)] =
      "VERTEX_ATTRIB_ARRAY_POINTER"),
    (t[(t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING = 34975)] =
      "VERTEX_ATTRIB_ARRAY_BUFFER_BINDING"),
    (t[(t.CULL_FACE = 2884)] = "CULL_FACE"),
    (t[(t.FRONT = 1028)] = "FRONT"),
    (t[(t.BACK = 1029)] = "BACK"),
    (t[(t.FRONT_AND_BACK = 1032)] = "FRONT_AND_BACK"),
    (t[(t.BLEND = 3042)] = "BLEND"),
    (t[(t.DEPTH_TEST = 2929)] = "DEPTH_TEST"),
    (t[(t.DITHER = 3024)] = "DITHER"),
    (t[(t.POLYGON_OFFSET_FILL = 32823)] = "POLYGON_OFFSET_FILL"),
    (t[(t.SAMPLE_ALPHA_TO_COVERAGE = 32926)] = "SAMPLE_ALPHA_TO_COVERAGE"),
    (t[(t.SAMPLE_COVERAGE = 32928)] = "SAMPLE_COVERAGE"),
    (t[(t.SCISSOR_TEST = 3089)] = "SCISSOR_TEST"),
    (t[(t.STENCIL_TEST = 2960)] = "STENCIL_TEST"),
    (t[(t.NO_ERROR = 0)] = "NO_ERROR"),
    (t[(t.INVALID_ENUM = 1280)] = "INVALID_ENUM"),
    (t[(t.INVALID_VALUE = 1281)] = "INVALID_VALUE"),
    (t[(t.INVALID_OPERATION = 1282)] = "INVALID_OPERATION"),
    (t[(t.OUT_OF_MEMORY = 1285)] = "OUT_OF_MEMORY"),
    (t[(t.CONTEXT_LOST_WEBGL = 37442)] = "CONTEXT_LOST_WEBGL"),
    (t[(t.CW = 2304)] = "CW"),
    (t[(t.CCW = 2305)] = "CCW"),
    (t[(t.DONT_CARE = 4352)] = "DONT_CARE"),
    (t[(t.FASTEST = 4353)] = "FASTEST"),
    (t[(t.NICEST = 4354)] = "NICEST"),
    (t[(t.GENERATE_MIPMAP_HINT = 33170)] = "GENERATE_MIPMAP_HINT"),
    (t[(t.BYTE = 5120)] = "BYTE"),
    (t[(t.UNSIGNED_BYTE = 5121)] = "UNSIGNED_BYTE"),
    (t[(t.SHORT = 5122)] = "SHORT"),
    (t[(t.UNSIGNED_SHORT = 5123)] = "UNSIGNED_SHORT"),
    (t[(t.INT = 5124)] = "INT"),
    (t[(t.UNSIGNED_INT = 5125)] = "UNSIGNED_INT"),
    (t[(t.FLOAT = 5126)] = "FLOAT"),
    (t[(t.DOUBLE = 5130)] = "DOUBLE"),
    (t[(t.DEPTH_COMPONENT = 6402)] = "DEPTH_COMPONENT"),
    (t[(t.ALPHA = 6406)] = "ALPHA"),
    (t[(t.RGB = 6407)] = "RGB"),
    (t[(t.RGBA = 6408)] = "RGBA"),
    (t[(t.LUMINANCE = 6409)] = "LUMINANCE"),
    (t[(t.LUMINANCE_ALPHA = 6410)] = "LUMINANCE_ALPHA"),
    (t[(t.UNSIGNED_SHORT_4_4_4_4 = 32819)] = "UNSIGNED_SHORT_4_4_4_4"),
    (t[(t.UNSIGNED_SHORT_5_5_5_1 = 32820)] = "UNSIGNED_SHORT_5_5_5_1"),
    (t[(t.UNSIGNED_SHORT_5_6_5 = 33635)] = "UNSIGNED_SHORT_5_6_5"),
    (t[(t.FRAGMENT_SHADER = 35632)] = "FRAGMENT_SHADER"),
    (t[(t.VERTEX_SHADER = 35633)] = "VERTEX_SHADER"),
    (t[(t.COMPILE_STATUS = 35713)] = "COMPILE_STATUS"),
    (t[(t.DELETE_STATUS = 35712)] = "DELETE_STATUS"),
    (t[(t.LINK_STATUS = 35714)] = "LINK_STATUS"),
    (t[(t.VALIDATE_STATUS = 35715)] = "VALIDATE_STATUS"),
    (t[(t.ATTACHED_SHADERS = 35717)] = "ATTACHED_SHADERS"),
    (t[(t.ACTIVE_ATTRIBUTES = 35721)] = "ACTIVE_ATTRIBUTES"),
    (t[(t.ACTIVE_UNIFORMS = 35718)] = "ACTIVE_UNIFORMS"),
    (t[(t.MAX_VERTEX_ATTRIBS = 34921)] = "MAX_VERTEX_ATTRIBS"),
    (t[(t.MAX_VERTEX_UNIFORM_VECTORS = 36347)] = "MAX_VERTEX_UNIFORM_VECTORS"),
    (t[(t.MAX_VARYING_VECTORS = 36348)] = "MAX_VARYING_VECTORS"),
    (t[(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS = 35661)] =
      "MAX_COMBINED_TEXTURE_IMAGE_UNITS"),
    (t[(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS = 35660)] =
      "MAX_VERTEX_TEXTURE_IMAGE_UNITS"),
    (t[(t.MAX_TEXTURE_IMAGE_UNITS = 34930)] = "MAX_TEXTURE_IMAGE_UNITS"),
    (t[(t.MAX_FRAGMENT_UNIFORM_VECTORS = 36349)] =
      "MAX_FRAGMENT_UNIFORM_VECTORS"),
    (t[(t.SHADER_TYPE = 35663)] = "SHADER_TYPE"),
    (t[(t.SHADING_LANGUAGE_VERSION = 35724)] = "SHADING_LANGUAGE_VERSION"),
    (t[(t.CURRENT_PROGRAM = 35725)] = "CURRENT_PROGRAM"),
    (t[(t.NEVER = 512)] = "NEVER"),
    (t[(t.ALWAYS = 519)] = "ALWAYS"),
    (t[(t.LESS = 513)] = "LESS"),
    (t[(t.EQUAL = 514)] = "EQUAL"),
    (t[(t.LEQUAL = 515)] = "LEQUAL"),
    (t[(t.GREATER = 516)] = "GREATER"),
    (t[(t.GEQUAL = 518)] = "GEQUAL"),
    (t[(t.NOTEQUAL = 517)] = "NOTEQUAL"),
    (t[(t.KEEP = 7680)] = "KEEP"),
    (t[(t.REPLACE = 7681)] = "REPLACE"),
    (t[(t.INCR = 7682)] = "INCR"),
    (t[(t.DECR = 7683)] = "DECR"),
    (t[(t.INVERT = 5386)] = "INVERT"),
    (t[(t.INCR_WRAP = 34055)] = "INCR_WRAP"),
    (t[(t.DECR_WRAP = 34056)] = "DECR_WRAP"),
    (t[(t.NEAREST = 9728)] = "NEAREST"),
    (t[(t.LINEAR = 9729)] = "LINEAR"),
    (t[(t.NEAREST_MIPMAP_NEAREST = 9984)] = "NEAREST_MIPMAP_NEAREST"),
    (t[(t.LINEAR_MIPMAP_NEAREST = 9985)] = "LINEAR_MIPMAP_NEAREST"),
    (t[(t.NEAREST_MIPMAP_LINEAR = 9986)] = "NEAREST_MIPMAP_LINEAR"),
    (t[(t.LINEAR_MIPMAP_LINEAR = 9987)] = "LINEAR_MIPMAP_LINEAR"),
    (t[(t.TEXTURE_MAG_FILTER = 10240)] = "TEXTURE_MAG_FILTER"),
    (t[(t.TEXTURE_MIN_FILTER = 10241)] = "TEXTURE_MIN_FILTER"),
    (t[(t.TEXTURE_WRAP_S = 10242)] = "TEXTURE_WRAP_S"),
    (t[(t.TEXTURE_WRAP_T = 10243)] = "TEXTURE_WRAP_T"),
    (t[(t.TEXTURE_2D = 3553)] = "TEXTURE_2D"),
    (t[(t.TEXTURE = 5890)] = "TEXTURE"),
    (t[(t.TEXTURE_CUBE_MAP = 34067)] = "TEXTURE_CUBE_MAP"),
    (t[(t.TEXTURE_BINDING_CUBE_MAP = 34068)] = "TEXTURE_BINDING_CUBE_MAP"),
    (t[(t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069)] =
      "TEXTURE_CUBE_MAP_POSITIVE_X"),
    (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070)] =
      "TEXTURE_CUBE_MAP_NEGATIVE_X"),
    (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071)] =
      "TEXTURE_CUBE_MAP_POSITIVE_Y"),
    (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072)] =
      "TEXTURE_CUBE_MAP_NEGATIVE_Y"),
    (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073)] =
      "TEXTURE_CUBE_MAP_POSITIVE_Z"),
    (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074)] =
      "TEXTURE_CUBE_MAP_NEGATIVE_Z"),
    (t[(t.MAX_CUBE_MAP_TEXTURE_SIZE = 34076)] = "MAX_CUBE_MAP_TEXTURE_SIZE"),
    (t[(t.TEXTURE0 = 33984)] = "TEXTURE0"),
    (t[(t.ACTIVE_TEXTURE = 34016)] = "ACTIVE_TEXTURE"),
    (t[(t.REPEAT = 10497)] = "REPEAT"),
    (t[(t.CLAMP_TO_EDGE = 33071)] = "CLAMP_TO_EDGE"),
    (t[(t.MIRRORED_REPEAT = 33648)] = "MIRRORED_REPEAT"),
    (t[(t.TEXTURE_WIDTH = 4096)] = "TEXTURE_WIDTH"),
    (t[(t.TEXTURE_HEIGHT = 4097)] = "TEXTURE_HEIGHT"),
    (t[(t.FLOAT_VEC2 = 35664)] = "FLOAT_VEC2"),
    (t[(t.FLOAT_VEC3 = 35665)] = "FLOAT_VEC3"),
    (t[(t.FLOAT_VEC4 = 35666)] = "FLOAT_VEC4"),
    (t[(t.INT_VEC2 = 35667)] = "INT_VEC2"),
    (t[(t.INT_VEC3 = 35668)] = "INT_VEC3"),
    (t[(t.INT_VEC4 = 35669)] = "INT_VEC4"),
    (t[(t.BOOL = 35670)] = "BOOL"),
    (t[(t.BOOL_VEC2 = 35671)] = "BOOL_VEC2"),
    (t[(t.BOOL_VEC3 = 35672)] = "BOOL_VEC3"),
    (t[(t.BOOL_VEC4 = 35673)] = "BOOL_VEC4"),
    (t[(t.FLOAT_MAT2 = 35674)] = "FLOAT_MAT2"),
    (t[(t.FLOAT_MAT3 = 35675)] = "FLOAT_MAT3"),
    (t[(t.FLOAT_MAT4 = 35676)] = "FLOAT_MAT4"),
    (t[(t.SAMPLER_2D = 35678)] = "SAMPLER_2D"),
    (t[(t.SAMPLER_CUBE = 35680)] = "SAMPLER_CUBE"),
    (t[(t.LOW_FLOAT = 36336)] = "LOW_FLOAT"),
    (t[(t.MEDIUM_FLOAT = 36337)] = "MEDIUM_FLOAT"),
    (t[(t.HIGH_FLOAT = 36338)] = "HIGH_FLOAT"),
    (t[(t.LOW_INT = 36339)] = "LOW_INT"),
    (t[(t.MEDIUM_INT = 36340)] = "MEDIUM_INT"),
    (t[(t.HIGH_INT = 36341)] = "HIGH_INT"),
    (t[(t.FRAMEBUFFER = 36160)] = "FRAMEBUFFER"),
    (t[(t.RENDERBUFFER = 36161)] = "RENDERBUFFER"),
    (t[(t.RGBA4 = 32854)] = "RGBA4"),
    (t[(t.RGB5_A1 = 32855)] = "RGB5_A1"),
    (t[(t.RGB565 = 36194)] = "RGB565"),
    (t[(t.DEPTH_COMPONENT16 = 33189)] = "DEPTH_COMPONENT16"),
    (t[(t.STENCIL_INDEX = 6401)] = "STENCIL_INDEX"),
    (t[(t.STENCIL_INDEX8 = 36168)] = "STENCIL_INDEX8"),
    (t[(t.DEPTH_STENCIL = 34041)] = "DEPTH_STENCIL"),
    (t[(t.RENDERBUFFER_WIDTH = 36162)] = "RENDERBUFFER_WIDTH"),
    (t[(t.RENDERBUFFER_HEIGHT = 36163)] = "RENDERBUFFER_HEIGHT"),
    (t[(t.RENDERBUFFER_INTERNAL_FORMAT = 36164)] =
      "RENDERBUFFER_INTERNAL_FORMAT"),
    (t[(t.RENDERBUFFER_RED_SIZE = 36176)] = "RENDERBUFFER_RED_SIZE"),
    (t[(t.RENDERBUFFER_GREEN_SIZE = 36177)] = "RENDERBUFFER_GREEN_SIZE"),
    (t[(t.RENDERBUFFER_BLUE_SIZE = 36178)] = "RENDERBUFFER_BLUE_SIZE"),
    (t[(t.RENDERBUFFER_ALPHA_SIZE = 36179)] = "RENDERBUFFER_ALPHA_SIZE"),
    (t[(t.RENDERBUFFER_DEPTH_SIZE = 36180)] = "RENDERBUFFER_DEPTH_SIZE"),
    (t[(t.RENDERBUFFER_STENCIL_SIZE = 36181)] = "RENDERBUFFER_STENCIL_SIZE"),
    (t[(t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE = 36048)] =
      "FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE"),
    (t[(t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME = 36049)] =
      "FRAMEBUFFER_ATTACHMENT_OBJECT_NAME"),
    (t[(t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL = 36050)] =
      "FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL"),
    (t[(t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE = 36051)] =
      "FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE"),
    (t[(t.COLOR_ATTACHMENT0 = 36064)] = "COLOR_ATTACHMENT0"),
    (t[(t.DEPTH_ATTACHMENT = 36096)] = "DEPTH_ATTACHMENT"),
    (t[(t.STENCIL_ATTACHMENT = 36128)] = "STENCIL_ATTACHMENT"),
    (t[(t.DEPTH_STENCIL_ATTACHMENT = 33306)] = "DEPTH_STENCIL_ATTACHMENT"),
    (t[(t.NONE = 0)] = "NONE"),
    (t[(t.FRAMEBUFFER_COMPLETE = 36053)] = "FRAMEBUFFER_COMPLETE"),
    (t[(t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT = 36054)] =
      "FRAMEBUFFER_INCOMPLETE_ATTACHMENT"),
    (t[(t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT = 36055)] =
      "FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT"),
    (t[(t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS = 36057)] =
      "FRAMEBUFFER_INCOMPLETE_DIMENSIONS"),
    (t[(t.FRAMEBUFFER_UNSUPPORTED = 36061)] = "FRAMEBUFFER_UNSUPPORTED"),
    (t[(t.FRAMEBUFFER_BINDING = 36006)] = "FRAMEBUFFER_BINDING"),
    (t[(t.RENDERBUFFER_BINDING = 36007)] = "RENDERBUFFER_BINDING"),
    (t[(t.READ_FRAMEBUFFER = 36008)] = "READ_FRAMEBUFFER"),
    (t[(t.DRAW_FRAMEBUFFER = 36009)] = "DRAW_FRAMEBUFFER"),
    (t[(t.MAX_RENDERBUFFER_SIZE = 34024)] = "MAX_RENDERBUFFER_SIZE"),
    (t[(t.INVALID_FRAMEBUFFER_OPERATION = 1286)] =
      "INVALID_FRAMEBUFFER_OPERATION"),
    (t[(t.UNPACK_FLIP_Y_WEBGL = 37440)] = "UNPACK_FLIP_Y_WEBGL"),
    (t[(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL = 37441)] =
      "UNPACK_PREMULTIPLY_ALPHA_WEBGL"),
    (t[(t.UNPACK_COLORSPACE_CONVERSION_WEBGL = 37443)] =
      "UNPACK_COLORSPACE_CONVERSION_WEBGL"),
    (t[(t.READ_BUFFER = 3074)] = "READ_BUFFER"),
    (t[(t.UNPACK_ROW_LENGTH = 3314)] = "UNPACK_ROW_LENGTH"),
    (t[(t.UNPACK_SKIP_ROWS = 3315)] = "UNPACK_SKIP_ROWS"),
    (t[(t.UNPACK_SKIP_PIXELS = 3316)] = "UNPACK_SKIP_PIXELS"),
    (t[(t.PACK_ROW_LENGTH = 3330)] = "PACK_ROW_LENGTH"),
    (t[(t.PACK_SKIP_ROWS = 3331)] = "PACK_SKIP_ROWS"),
    (t[(t.PACK_SKIP_PIXELS = 3332)] = "PACK_SKIP_PIXELS"),
    (t[(t.TEXTURE_BINDING_3D = 32874)] = "TEXTURE_BINDING_3D"),
    (t[(t.UNPACK_SKIP_IMAGES = 32877)] = "UNPACK_SKIP_IMAGES"),
    (t[(t.UNPACK_IMAGE_HEIGHT = 32878)] = "UNPACK_IMAGE_HEIGHT"),
    (t[(t.MAX_3D_TEXTURE_SIZE = 32883)] = "MAX_3D_TEXTURE_SIZE"),
    (t[(t.MAX_ELEMENTS_VERTICES = 33e3)] = "MAX_ELEMENTS_VERTICES"),
    (t[(t.MAX_ELEMENTS_INDICES = 33001)] = "MAX_ELEMENTS_INDICES"),
    (t[(t.MAX_TEXTURE_LOD_BIAS = 34045)] = "MAX_TEXTURE_LOD_BIAS"),
    (t[(t.MAX_FRAGMENT_UNIFORM_COMPONENTS = 35657)] =
      "MAX_FRAGMENT_UNIFORM_COMPONENTS"),
    (t[(t.MAX_VERTEX_UNIFORM_COMPONENTS = 35658)] =
      "MAX_VERTEX_UNIFORM_COMPONENTS"),
    (t[(t.MAX_ARRAY_TEXTURE_LAYERS = 35071)] = "MAX_ARRAY_TEXTURE_LAYERS"),
    (t[(t.MIN_PROGRAM_TEXEL_OFFSET = 35076)] = "MIN_PROGRAM_TEXEL_OFFSET"),
    (t[(t.MAX_PROGRAM_TEXEL_OFFSET = 35077)] = "MAX_PROGRAM_TEXEL_OFFSET"),
    (t[(t.MAX_VARYING_COMPONENTS = 35659)] = "MAX_VARYING_COMPONENTS"),
    (t[(t.FRAGMENT_SHADER_DERIVATIVE_HINT = 35723)] =
      "FRAGMENT_SHADER_DERIVATIVE_HINT"),
    (t[(t.RASTERIZER_DISCARD = 35977)] = "RASTERIZER_DISCARD"),
    (t[(t.VERTEX_ARRAY_BINDING = 34229)] = "VERTEX_ARRAY_BINDING"),
    (t[(t.MAX_VERTEX_OUTPUT_COMPONENTS = 37154)] =
      "MAX_VERTEX_OUTPUT_COMPONENTS"),
    (t[(t.MAX_FRAGMENT_INPUT_COMPONENTS = 37157)] =
      "MAX_FRAGMENT_INPUT_COMPONENTS"),
    (t[(t.MAX_SERVER_WAIT_TIMEOUT = 37137)] = "MAX_SERVER_WAIT_TIMEOUT"),
    (t[(t.MAX_ELEMENT_INDEX = 36203)] = "MAX_ELEMENT_INDEX"),
    (t[(t.RED = 6403)] = "RED"),
    (t[(t.RGB8 = 32849)] = "RGB8"),
    (t[(t.RGBA8 = 32856)] = "RGBA8"),
    (t[(t.RGB10_A2 = 32857)] = "RGB10_A2"),
    (t[(t.TEXTURE_3D = 32879)] = "TEXTURE_3D"),
    (t[(t.TEXTURE_WRAP_R = 32882)] = "TEXTURE_WRAP_R"),
    (t[(t.TEXTURE_MIN_LOD = 33082)] = "TEXTURE_MIN_LOD"),
    (t[(t.TEXTURE_MAX_LOD = 33083)] = "TEXTURE_MAX_LOD"),
    (t[(t.TEXTURE_BASE_LEVEL = 33084)] = "TEXTURE_BASE_LEVEL"),
    (t[(t.TEXTURE_MAX_LEVEL = 33085)] = "TEXTURE_MAX_LEVEL"),
    (t[(t.TEXTURE_COMPARE_MODE = 34892)] = "TEXTURE_COMPARE_MODE"),
    (t[(t.TEXTURE_COMPARE_FUNC = 34893)] = "TEXTURE_COMPARE_FUNC"),
    (t[(t.SRGB = 35904)] = "SRGB"),
    (t[(t.SRGB8 = 35905)] = "SRGB8"),
    (t[(t.SRGB8_ALPHA8 = 35907)] = "SRGB8_ALPHA8"),
    (t[(t.COMPARE_REF_TO_TEXTURE = 34894)] = "COMPARE_REF_TO_TEXTURE"),
    (t[(t.RGBA32F = 34836)] = "RGBA32F"),
    (t[(t.RGB32F = 34837)] = "RGB32F"),
    (t[(t.RGBA16F = 34842)] = "RGBA16F"),
    (t[(t.RGB16F = 34843)] = "RGB16F"),
    (t[(t.TEXTURE_2D_ARRAY = 35866)] = "TEXTURE_2D_ARRAY"),
    (t[(t.TEXTURE_BINDING_2D_ARRAY = 35869)] = "TEXTURE_BINDING_2D_ARRAY"),
    (t[(t.R11F_G11F_B10F = 35898)] = "R11F_G11F_B10F"),
    (t[(t.RGB9_E5 = 35901)] = "RGB9_E5"),
    (t[(t.RGBA32UI = 36208)] = "RGBA32UI"),
    (t[(t.RGB32UI = 36209)] = "RGB32UI"),
    (t[(t.RGBA16UI = 36214)] = "RGBA16UI"),
    (t[(t.RGB16UI = 36215)] = "RGB16UI"),
    (t[(t.RGBA8UI = 36220)] = "RGBA8UI"),
    (t[(t.RGB8UI = 36221)] = "RGB8UI"),
    (t[(t.RGBA32I = 36226)] = "RGBA32I"),
    (t[(t.RGB32I = 36227)] = "RGB32I"),
    (t[(t.RGBA16I = 36232)] = "RGBA16I"),
    (t[(t.RGB16I = 36233)] = "RGB16I"),
    (t[(t.RGBA8I = 36238)] = "RGBA8I"),
    (t[(t.RGB8I = 36239)] = "RGB8I"),
    (t[(t.RED_INTEGER = 36244)] = "RED_INTEGER"),
    (t[(t.RGB_INTEGER = 36248)] = "RGB_INTEGER"),
    (t[(t.RGBA_INTEGER = 36249)] = "RGBA_INTEGER"),
    (t[(t.R8 = 33321)] = "R8"),
    (t[(t.RG8 = 33323)] = "RG8"),
    (t[(t.R16F = 33325)] = "R16F"),
    (t[(t.R32F = 33326)] = "R32F"),
    (t[(t.RG16F = 33327)] = "RG16F"),
    (t[(t.RG32F = 33328)] = "RG32F"),
    (t[(t.R8I = 33329)] = "R8I"),
    (t[(t.R8UI = 33330)] = "R8UI"),
    (t[(t.R16I = 33331)] = "R16I"),
    (t[(t.R16UI = 33332)] = "R16UI"),
    (t[(t.R32I = 33333)] = "R32I"),
    (t[(t.R32UI = 33334)] = "R32UI"),
    (t[(t.RG8I = 33335)] = "RG8I"),
    (t[(t.RG8UI = 33336)] = "RG8UI"),
    (t[(t.RG16I = 33337)] = "RG16I"),
    (t[(t.RG16UI = 33338)] = "RG16UI"),
    (t[(t.RG32I = 33339)] = "RG32I"),
    (t[(t.RG32UI = 33340)] = "RG32UI"),
    (t[(t.R8_SNORM = 36756)] = "R8_SNORM"),
    (t[(t.RG8_SNORM = 36757)] = "RG8_SNORM"),
    (t[(t.RGB8_SNORM = 36758)] = "RGB8_SNORM"),
    (t[(t.RGBA8_SNORM = 36759)] = "RGBA8_SNORM"),
    (t[(t.RGB10_A2UI = 36975)] = "RGB10_A2UI"),
    (t[(t.TEXTURE_IMMUTABLE_FORMAT = 37167)] = "TEXTURE_IMMUTABLE_FORMAT"),
    (t[(t.TEXTURE_IMMUTABLE_LEVELS = 33503)] = "TEXTURE_IMMUTABLE_LEVELS"),
    (t[(t.UNSIGNED_INT_2_10_10_10_REV = 33640)] =
      "UNSIGNED_INT_2_10_10_10_REV"),
    (t[(t.UNSIGNED_INT_10F_11F_11F_REV = 35899)] =
      "UNSIGNED_INT_10F_11F_11F_REV"),
    (t[(t.UNSIGNED_INT_5_9_9_9_REV = 35902)] = "UNSIGNED_INT_5_9_9_9_REV"),
    (t[(t.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269)] =
      "FLOAT_32_UNSIGNED_INT_24_8_REV"),
    (t[(t.UNSIGNED_INT_24_8 = 34042)] = "UNSIGNED_INT_24_8"),
    (t[(t.HALF_FLOAT = 5131)] = "HALF_FLOAT"),
    (t[(t.RG = 33319)] = "RG"),
    (t[(t.RG_INTEGER = 33320)] = "RG_INTEGER"),
    (t[(t.INT_2_10_10_10_REV = 36255)] = "INT_2_10_10_10_REV"),
    (t[(t.CURRENT_QUERY = 34917)] = "CURRENT_QUERY"),
    (t[(t.QUERY_RESULT = 34918)] = "QUERY_RESULT"),
    (t[(t.QUERY_RESULT_AVAILABLE = 34919)] = "QUERY_RESULT_AVAILABLE"),
    (t[(t.ANY_SAMPLES_PASSED = 35887)] = "ANY_SAMPLES_PASSED"),
    (t[(t.ANY_SAMPLES_PASSED_CONSERVATIVE = 36202)] =
      "ANY_SAMPLES_PASSED_CONSERVATIVE"),
    (t[(t.MAX_DRAW_BUFFERS = 34852)] = "MAX_DRAW_BUFFERS"),
    (t[(t.DRAW_BUFFER0 = 34853)] = "DRAW_BUFFER0"),
    (t[(t.DRAW_BUFFER1 = 34854)] = "DRAW_BUFFER1"),
    (t[(t.DRAW_BUFFER2 = 34855)] = "DRAW_BUFFER2"),
    (t[(t.DRAW_BUFFER3 = 34856)] = "DRAW_BUFFER3"),
    (t[(t.DRAW_BUFFER4 = 34857)] = "DRAW_BUFFER4"),
    (t[(t.DRAW_BUFFER5 = 34858)] = "DRAW_BUFFER5"),
    (t[(t.DRAW_BUFFER6 = 34859)] = "DRAW_BUFFER6"),
    (t[(t.DRAW_BUFFER7 = 34860)] = "DRAW_BUFFER7"),
    (t[(t.DRAW_BUFFER8 = 34861)] = "DRAW_BUFFER8"),
    (t[(t.DRAW_BUFFER9 = 34862)] = "DRAW_BUFFER9"),
    (t[(t.DRAW_BUFFER10 = 34863)] = "DRAW_BUFFER10"),
    (t[(t.DRAW_BUFFER11 = 34864)] = "DRAW_BUFFER11"),
    (t[(t.DRAW_BUFFER12 = 34865)] = "DRAW_BUFFER12"),
    (t[(t.DRAW_BUFFER13 = 34866)] = "DRAW_BUFFER13"),
    (t[(t.DRAW_BUFFER14 = 34867)] = "DRAW_BUFFER14"),
    (t[(t.DRAW_BUFFER15 = 34868)] = "DRAW_BUFFER15"),
    (t[(t.MAX_COLOR_ATTACHMENTS = 36063)] = "MAX_COLOR_ATTACHMENTS"),
    (t[(t.COLOR_ATTACHMENT1 = 36065)] = "COLOR_ATTACHMENT1"),
    (t[(t.COLOR_ATTACHMENT2 = 36066)] = "COLOR_ATTACHMENT2"),
    (t[(t.COLOR_ATTACHMENT3 = 36067)] = "COLOR_ATTACHMENT3"),
    (t[(t.COLOR_ATTACHMENT4 = 36068)] = "COLOR_ATTACHMENT4"),
    (t[(t.COLOR_ATTACHMENT5 = 36069)] = "COLOR_ATTACHMENT5"),
    (t[(t.COLOR_ATTACHMENT6 = 36070)] = "COLOR_ATTACHMENT6"),
    (t[(t.COLOR_ATTACHMENT7 = 36071)] = "COLOR_ATTACHMENT7"),
    (t[(t.COLOR_ATTACHMENT8 = 36072)] = "COLOR_ATTACHMENT8"),
    (t[(t.COLOR_ATTACHMENT9 = 36073)] = "COLOR_ATTACHMENT9"),
    (t[(t.COLOR_ATTACHMENT10 = 36074)] = "COLOR_ATTACHMENT10"),
    (t[(t.COLOR_ATTACHMENT11 = 36075)] = "COLOR_ATTACHMENT11"),
    (t[(t.COLOR_ATTACHMENT12 = 36076)] = "COLOR_ATTACHMENT12"),
    (t[(t.COLOR_ATTACHMENT13 = 36077)] = "COLOR_ATTACHMENT13"),
    (t[(t.COLOR_ATTACHMENT14 = 36078)] = "COLOR_ATTACHMENT14"),
    (t[(t.COLOR_ATTACHMENT15 = 36079)] = "COLOR_ATTACHMENT15"),
    (t[(t.SAMPLER_3D = 35679)] = "SAMPLER_3D"),
    (t[(t.SAMPLER_2D_SHADOW = 35682)] = "SAMPLER_2D_SHADOW"),
    (t[(t.SAMPLER_2D_ARRAY = 36289)] = "SAMPLER_2D_ARRAY"),
    (t[(t.SAMPLER_2D_ARRAY_SHADOW = 36292)] = "SAMPLER_2D_ARRAY_SHADOW"),
    (t[(t.SAMPLER_CUBE_SHADOW = 36293)] = "SAMPLER_CUBE_SHADOW"),
    (t[(t.INT_SAMPLER_2D = 36298)] = "INT_SAMPLER_2D"),
    (t[(t.INT_SAMPLER_3D = 36299)] = "INT_SAMPLER_3D"),
    (t[(t.INT_SAMPLER_CUBE = 36300)] = "INT_SAMPLER_CUBE"),
    (t[(t.INT_SAMPLER_2D_ARRAY = 36303)] = "INT_SAMPLER_2D_ARRAY"),
    (t[(t.UNSIGNED_INT_SAMPLER_2D = 36306)] = "UNSIGNED_INT_SAMPLER_2D"),
    (t[(t.UNSIGNED_INT_SAMPLER_3D = 36307)] = "UNSIGNED_INT_SAMPLER_3D"),
    (t[(t.UNSIGNED_INT_SAMPLER_CUBE = 36308)] = "UNSIGNED_INT_SAMPLER_CUBE"),
    (t[(t.UNSIGNED_INT_SAMPLER_2D_ARRAY = 36311)] =
      "UNSIGNED_INT_SAMPLER_2D_ARRAY"),
    (t[(t.MAX_SAMPLES = 36183)] = "MAX_SAMPLES"),
    (t[(t.SAMPLER_BINDING = 35097)] = "SAMPLER_BINDING"),
    (t[(t.PIXEL_PACK_BUFFER = 35051)] = "PIXEL_PACK_BUFFER"),
    (t[(t.PIXEL_UNPACK_BUFFER = 35052)] = "PIXEL_UNPACK_BUFFER"),
    (t[(t.PIXEL_PACK_BUFFER_BINDING = 35053)] = "PIXEL_PACK_BUFFER_BINDING"),
    (t[(t.PIXEL_UNPACK_BUFFER_BINDING = 35055)] =
      "PIXEL_UNPACK_BUFFER_BINDING"),
    (t[(t.COPY_READ_BUFFER = 36662)] = "COPY_READ_BUFFER"),
    (t[(t.COPY_WRITE_BUFFER = 36663)] = "COPY_WRITE_BUFFER"),
    (t[(t.COPY_READ_BUFFER_BINDING = 36662)] = "COPY_READ_BUFFER_BINDING"),
    (t[(t.COPY_WRITE_BUFFER_BINDING = 36663)] = "COPY_WRITE_BUFFER_BINDING"),
    (t[(t.FLOAT_MAT2x3 = 35685)] = "FLOAT_MAT2x3"),
    (t[(t.FLOAT_MAT2x4 = 35686)] = "FLOAT_MAT2x4"),
    (t[(t.FLOAT_MAT3x2 = 35687)] = "FLOAT_MAT3x2"),
    (t[(t.FLOAT_MAT3x4 = 35688)] = "FLOAT_MAT3x4"),
    (t[(t.FLOAT_MAT4x2 = 35689)] = "FLOAT_MAT4x2"),
    (t[(t.FLOAT_MAT4x3 = 35690)] = "FLOAT_MAT4x3"),
    (t[(t.UNSIGNED_INT_VEC2 = 36294)] = "UNSIGNED_INT_VEC2"),
    (t[(t.UNSIGNED_INT_VEC3 = 36295)] = "UNSIGNED_INT_VEC3"),
    (t[(t.UNSIGNED_INT_VEC4 = 36296)] = "UNSIGNED_INT_VEC4"),
    (t[(t.UNSIGNED_NORMALIZED = 35863)] = "UNSIGNED_NORMALIZED"),
    (t[(t.SIGNED_NORMALIZED = 36764)] = "SIGNED_NORMALIZED"),
    (t[(t.VERTEX_ATTRIB_ARRAY_INTEGER = 35069)] =
      "VERTEX_ATTRIB_ARRAY_INTEGER"),
    (t[(t.VERTEX_ATTRIB_ARRAY_DIVISOR = 35070)] =
      "VERTEX_ATTRIB_ARRAY_DIVISOR"),
    (t[(t.TRANSFORM_FEEDBACK_BUFFER_MODE = 35967)] =
      "TRANSFORM_FEEDBACK_BUFFER_MODE"),
    (t[(t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS = 35968)] =
      "MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS"),
    (t[(t.TRANSFORM_FEEDBACK_VARYINGS = 35971)] =
      "TRANSFORM_FEEDBACK_VARYINGS"),
    (t[(t.TRANSFORM_FEEDBACK_BUFFER_START = 35972)] =
      "TRANSFORM_FEEDBACK_BUFFER_START"),
    (t[(t.TRANSFORM_FEEDBACK_BUFFER_SIZE = 35973)] =
      "TRANSFORM_FEEDBACK_BUFFER_SIZE"),
    (t[(t.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN = 35976)] =
      "TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN"),
    (t[(t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS = 35978)] =
      "MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS"),
    (t[(t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS = 35979)] =
      "MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS"),
    (t[(t.INTERLEAVED_ATTRIBS = 35980)] = "INTERLEAVED_ATTRIBS"),
    (t[(t.SEPARATE_ATTRIBS = 35981)] = "SEPARATE_ATTRIBS"),
    (t[(t.TRANSFORM_FEEDBACK_BUFFER = 35982)] = "TRANSFORM_FEEDBACK_BUFFER"),
    (t[(t.TRANSFORM_FEEDBACK_BUFFER_BINDING = 35983)] =
      "TRANSFORM_FEEDBACK_BUFFER_BINDING"),
    (t[(t.TRANSFORM_FEEDBACK = 36386)] = "TRANSFORM_FEEDBACK"),
    (t[(t.TRANSFORM_FEEDBACK_PAUSED = 36387)] = "TRANSFORM_FEEDBACK_PAUSED"),
    (t[(t.TRANSFORM_FEEDBACK_ACTIVE = 36388)] = "TRANSFORM_FEEDBACK_ACTIVE"),
    (t[(t.TRANSFORM_FEEDBACK_BINDING = 36389)] = "TRANSFORM_FEEDBACK_BINDING"),
    (t[(t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING = 33296)] =
      "FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING"),
    (t[(t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE = 33297)] =
      "FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE"),
    (t[(t.FRAMEBUFFER_ATTACHMENT_RED_SIZE = 33298)] =
      "FRAMEBUFFER_ATTACHMENT_RED_SIZE"),
    (t[(t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE = 33299)] =
      "FRAMEBUFFER_ATTACHMENT_GREEN_SIZE"),
    (t[(t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE = 33300)] =
      "FRAMEBUFFER_ATTACHMENT_BLUE_SIZE"),
    (t[(t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE = 33301)] =
      "FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE"),
    (t[(t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE = 33302)] =
      "FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE"),
    (t[(t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE = 33303)] =
      "FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE"),
    (t[(t.FRAMEBUFFER_DEFAULT = 33304)] = "FRAMEBUFFER_DEFAULT"),
    (t[(t.DEPTH24_STENCIL8 = 35056)] = "DEPTH24_STENCIL8"),
    (t[(t.DRAW_FRAMEBUFFER_BINDING = 36006)] = "DRAW_FRAMEBUFFER_BINDING"),
    (t[(t.READ_FRAMEBUFFER_BINDING = 36010)] = "READ_FRAMEBUFFER_BINDING"),
    (t[(t.RENDERBUFFER_SAMPLES = 36011)] = "RENDERBUFFER_SAMPLES"),
    (t[(t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER = 36052)] =
      "FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER"),
    (t[(t.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE = 36182)] =
      "FRAMEBUFFER_INCOMPLETE_MULTISAMPLE"),
    (t[(t.UNIFORM_BUFFER = 35345)] = "UNIFORM_BUFFER"),
    (t[(t.UNIFORM_BUFFER_BINDING = 35368)] = "UNIFORM_BUFFER_BINDING"),
    (t[(t.UNIFORM_BUFFER_START = 35369)] = "UNIFORM_BUFFER_START"),
    (t[(t.UNIFORM_BUFFER_SIZE = 35370)] = "UNIFORM_BUFFER_SIZE"),
    (t[(t.MAX_VERTEX_UNIFORM_BLOCKS = 35371)] = "MAX_VERTEX_UNIFORM_BLOCKS"),
    (t[(t.MAX_FRAGMENT_UNIFORM_BLOCKS = 35373)] =
      "MAX_FRAGMENT_UNIFORM_BLOCKS"),
    (t[(t.MAX_COMBINED_UNIFORM_BLOCKS = 35374)] =
      "MAX_COMBINED_UNIFORM_BLOCKS"),
    (t[(t.MAX_UNIFORM_BUFFER_BINDINGS = 35375)] =
      "MAX_UNIFORM_BUFFER_BINDINGS"),
    (t[(t.MAX_UNIFORM_BLOCK_SIZE = 35376)] = "MAX_UNIFORM_BLOCK_SIZE"),
    (t[(t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS = 35377)] =
      "MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS"),
    (t[(t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS = 35379)] =
      "MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS"),
    (t[(t.UNIFORM_BUFFER_OFFSET_ALIGNMENT = 35380)] =
      "UNIFORM_BUFFER_OFFSET_ALIGNMENT"),
    (t[(t.ACTIVE_UNIFORM_BLOCKS = 35382)] = "ACTIVE_UNIFORM_BLOCKS"),
    (t[(t.UNIFORM_TYPE = 35383)] = "UNIFORM_TYPE"),
    (t[(t.UNIFORM_SIZE = 35384)] = "UNIFORM_SIZE"),
    (t[(t.UNIFORM_BLOCK_INDEX = 35386)] = "UNIFORM_BLOCK_INDEX"),
    (t[(t.UNIFORM_OFFSET = 35387)] = "UNIFORM_OFFSET"),
    (t[(t.UNIFORM_ARRAY_STRIDE = 35388)] = "UNIFORM_ARRAY_STRIDE"),
    (t[(t.UNIFORM_MATRIX_STRIDE = 35389)] = "UNIFORM_MATRIX_STRIDE"),
    (t[(t.UNIFORM_IS_ROW_MAJOR = 35390)] = "UNIFORM_IS_ROW_MAJOR"),
    (t[(t.UNIFORM_BLOCK_BINDING = 35391)] = "UNIFORM_BLOCK_BINDING"),
    (t[(t.UNIFORM_BLOCK_DATA_SIZE = 35392)] = "UNIFORM_BLOCK_DATA_SIZE"),
    (t[(t.UNIFORM_BLOCK_ACTIVE_UNIFORMS = 35394)] =
      "UNIFORM_BLOCK_ACTIVE_UNIFORMS"),
    (t[(t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES = 35395)] =
      "UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES"),
    (t[(t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER = 35396)] =
      "UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER"),
    (t[(t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER = 35398)] =
      "UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER"),
    (t[(t.OBJECT_TYPE = 37138)] = "OBJECT_TYPE"),
    (t[(t.SYNC_CONDITION = 37139)] = "SYNC_CONDITION"),
    (t[(t.SYNC_STATUS = 37140)] = "SYNC_STATUS"),
    (t[(t.SYNC_FLAGS = 37141)] = "SYNC_FLAGS"),
    (t[(t.SYNC_FENCE = 37142)] = "SYNC_FENCE"),
    (t[(t.SYNC_GPU_COMMANDS_COMPLETE = 37143)] = "SYNC_GPU_COMMANDS_COMPLETE"),
    (t[(t.UNSIGNALED = 37144)] = "UNSIGNALED"),
    (t[(t.SIGNALED = 37145)] = "SIGNALED"),
    (t[(t.ALREADY_SIGNALED = 37146)] = "ALREADY_SIGNALED"),
    (t[(t.TIMEOUT_EXPIRED = 37147)] = "TIMEOUT_EXPIRED"),
    (t[(t.CONDITION_SATISFIED = 37148)] = "CONDITION_SATISFIED"),
    (t[(t.WAIT_FAILED = 37149)] = "WAIT_FAILED"),
    (t[(t.SYNC_FLUSH_COMMANDS_BIT = 1)] = "SYNC_FLUSH_COMMANDS_BIT"),
    (t[(t.COLOR = 6144)] = "COLOR"),
    (t[(t.DEPTH = 6145)] = "DEPTH"),
    (t[(t.STENCIL = 6146)] = "STENCIL"),
    (t[(t.MIN = 32775)] = "MIN"),
    (t[(t.MAX = 32776)] = "MAX"),
    (t[(t.DEPTH_COMPONENT24 = 33190)] = "DEPTH_COMPONENT24"),
    (t[(t.STREAM_READ = 35041)] = "STREAM_READ"),
    (t[(t.STREAM_COPY = 35042)] = "STREAM_COPY"),
    (t[(t.STATIC_READ = 35045)] = "STATIC_READ"),
    (t[(t.STATIC_COPY = 35046)] = "STATIC_COPY"),
    (t[(t.DYNAMIC_READ = 35049)] = "DYNAMIC_READ"),
    (t[(t.DYNAMIC_COPY = 35050)] = "DYNAMIC_COPY"),
    (t[(t.DEPTH_COMPONENT32F = 36012)] = "DEPTH_COMPONENT32F"),
    (t[(t.DEPTH32F_STENCIL8 = 36013)] = "DEPTH32F_STENCIL8"),
    (t[(t.INVALID_INDEX = 4294967295)] = "INVALID_INDEX"),
    (t[(t.TIMEOUT_IGNORED = -1)] = "TIMEOUT_IGNORED"),
    (t[(t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL = 37447)] =
      "MAX_CLIENT_WAIT_TIMEOUT_WEBGL"),
    (t[(t.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE = 35070)] =
      "VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE"),
    (t[(t.UNMASKED_VENDOR_WEBGL = 37445)] = "UNMASKED_VENDOR_WEBGL"),
    (t[(t.UNMASKED_RENDERER_WEBGL = 37446)] = "UNMASKED_RENDERER_WEBGL"),
    (t[(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT = 34047)] =
      "MAX_TEXTURE_MAX_ANISOTROPY_EXT"),
    (t[(t.TEXTURE_MAX_ANISOTROPY_EXT = 34046)] = "TEXTURE_MAX_ANISOTROPY_EXT"),
    (t[(t.COMPRESSED_RGB_S3TC_DXT1_EXT = 33776)] =
      "COMPRESSED_RGB_S3TC_DXT1_EXT"),
    (t[(t.COMPRESSED_RGBA_S3TC_DXT1_EXT = 33777)] =
      "COMPRESSED_RGBA_S3TC_DXT1_EXT"),
    (t[(t.COMPRESSED_RGBA_S3TC_DXT3_EXT = 33778)] =
      "COMPRESSED_RGBA_S3TC_DXT3_EXT"),
    (t[(t.COMPRESSED_RGBA_S3TC_DXT5_EXT = 33779)] =
      "COMPRESSED_RGBA_S3TC_DXT5_EXT"),
    (t[(t.COMPRESSED_R11_EAC = 37488)] = "COMPRESSED_R11_EAC"),
    (t[(t.COMPRESSED_SIGNED_R11_EAC = 37489)] = "COMPRESSED_SIGNED_R11_EAC"),
    (t[(t.COMPRESSED_RG11_EAC = 37490)] = "COMPRESSED_RG11_EAC"),
    (t[(t.COMPRESSED_SIGNED_RG11_EAC = 37491)] = "COMPRESSED_SIGNED_RG11_EAC"),
    (t[(t.COMPRESSED_RGB8_ETC2 = 37492)] = "COMPRESSED_RGB8_ETC2"),
    (t[(t.COMPRESSED_RGBA8_ETC2_EAC = 37493)] = "COMPRESSED_RGBA8_ETC2_EAC"),
    (t[(t.COMPRESSED_SRGB8_ETC2 = 37494)] = "COMPRESSED_SRGB8_ETC2"),
    (t[(t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = 37495)] =
      "COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"),
    (t[(t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 37496)] =
      "COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2"),
    (t[(t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 37497)] =
      "COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2"),
    (t[(t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG = 35840)] =
      "COMPRESSED_RGB_PVRTC_4BPPV1_IMG"),
    (t[(t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG = 35842)] =
      "COMPRESSED_RGBA_PVRTC_4BPPV1_IMG"),
    (t[(t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG = 35841)] =
      "COMPRESSED_RGB_PVRTC_2BPPV1_IMG"),
    (t[(t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG = 35843)] =
      "COMPRESSED_RGBA_PVRTC_2BPPV1_IMG"),
    (t[(t.COMPRESSED_RGB_ETC1_WEBGL = 36196)] = "COMPRESSED_RGB_ETC1_WEBGL"),
    (t[(t.COMPRESSED_RGB_ATC_WEBGL = 35986)] = "COMPRESSED_RGB_ATC_WEBGL"),
    (t[(t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL = 35986)] =
      "COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL"),
    (t[(t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL = 34798)] =
      "COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"),
    (t[(t.UNSIGNED_INT_24_8_WEBGL = 34042)] = "UNSIGNED_INT_24_8_WEBGL"),
    (t[(t.HALF_FLOAT_OES = 36193)] = "HALF_FLOAT_OES"),
    (t[(t.RGBA32F_EXT = 34836)] = "RGBA32F_EXT"),
    (t[(t.RGB32F_EXT = 34837)] = "RGB32F_EXT"),
    (t[(t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT = 33297)] =
      "FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT"),
    (t[(t.UNSIGNED_NORMALIZED_EXT = 35863)] = "UNSIGNED_NORMALIZED_EXT"),
    (t[(t.MIN_EXT = 32775)] = "MIN_EXT"),
    (t[(t.MAX_EXT = 32776)] = "MAX_EXT"),
    (t[(t.SRGB_EXT = 35904)] = "SRGB_EXT"),
    (t[(t.SRGB_ALPHA_EXT = 35906)] = "SRGB_ALPHA_EXT"),
    (t[(t.SRGB8_ALPHA8_EXT = 35907)] = "SRGB8_ALPHA8_EXT"),
    (t[(t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT = 33296)] =
      "FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT"),
    (t[(t.FRAGMENT_SHADER_DERIVATIVE_HINT_OES = 35723)] =
      "FRAGMENT_SHADER_DERIVATIVE_HINT_OES"),
    (t[(t.COLOR_ATTACHMENT0_WEBGL = 36064)] = "COLOR_ATTACHMENT0_WEBGL"),
    (t[(t.COLOR_ATTACHMENT1_WEBGL = 36065)] = "COLOR_ATTACHMENT1_WEBGL"),
    (t[(t.COLOR_ATTACHMENT2_WEBGL = 36066)] = "COLOR_ATTACHMENT2_WEBGL"),
    (t[(t.COLOR_ATTACHMENT3_WEBGL = 36067)] = "COLOR_ATTACHMENT3_WEBGL"),
    (t[(t.COLOR_ATTACHMENT4_WEBGL = 36068)] = "COLOR_ATTACHMENT4_WEBGL"),
    (t[(t.COLOR_ATTACHMENT5_WEBGL = 36069)] = "COLOR_ATTACHMENT5_WEBGL"),
    (t[(t.COLOR_ATTACHMENT6_WEBGL = 36070)] = "COLOR_ATTACHMENT6_WEBGL"),
    (t[(t.COLOR_ATTACHMENT7_WEBGL = 36071)] = "COLOR_ATTACHMENT7_WEBGL"),
    (t[(t.COLOR_ATTACHMENT8_WEBGL = 36072)] = "COLOR_ATTACHMENT8_WEBGL"),
    (t[(t.COLOR_ATTACHMENT9_WEBGL = 36073)] = "COLOR_ATTACHMENT9_WEBGL"),
    (t[(t.COLOR_ATTACHMENT10_WEBGL = 36074)] = "COLOR_ATTACHMENT10_WEBGL"),
    (t[(t.COLOR_ATTACHMENT11_WEBGL = 36075)] = "COLOR_ATTACHMENT11_WEBGL"),
    (t[(t.COLOR_ATTACHMENT12_WEBGL = 36076)] = "COLOR_ATTACHMENT12_WEBGL"),
    (t[(t.COLOR_ATTACHMENT13_WEBGL = 36077)] = "COLOR_ATTACHMENT13_WEBGL"),
    (t[(t.COLOR_ATTACHMENT14_WEBGL = 36078)] = "COLOR_ATTACHMENT14_WEBGL"),
    (t[(t.COLOR_ATTACHMENT15_WEBGL = 36079)] = "COLOR_ATTACHMENT15_WEBGL"),
    (t[(t.DRAW_BUFFER0_WEBGL = 34853)] = "DRAW_BUFFER0_WEBGL"),
    (t[(t.DRAW_BUFFER1_WEBGL = 34854)] = "DRAW_BUFFER1_WEBGL"),
    (t[(t.DRAW_BUFFER2_WEBGL = 34855)] = "DRAW_BUFFER2_WEBGL"),
    (t[(t.DRAW_BUFFER3_WEBGL = 34856)] = "DRAW_BUFFER3_WEBGL"),
    (t[(t.DRAW_BUFFER4_WEBGL = 34857)] = "DRAW_BUFFER4_WEBGL"),
    (t[(t.DRAW_BUFFER5_WEBGL = 34858)] = "DRAW_BUFFER5_WEBGL"),
    (t[(t.DRAW_BUFFER6_WEBGL = 34859)] = "DRAW_BUFFER6_WEBGL"),
    (t[(t.DRAW_BUFFER7_WEBGL = 34860)] = "DRAW_BUFFER7_WEBGL"),
    (t[(t.DRAW_BUFFER8_WEBGL = 34861)] = "DRAW_BUFFER8_WEBGL"),
    (t[(t.DRAW_BUFFER9_WEBGL = 34862)] = "DRAW_BUFFER9_WEBGL"),
    (t[(t.DRAW_BUFFER10_WEBGL = 34863)] = "DRAW_BUFFER10_WEBGL"),
    (t[(t.DRAW_BUFFER11_WEBGL = 34864)] = "DRAW_BUFFER11_WEBGL"),
    (t[(t.DRAW_BUFFER12_WEBGL = 34865)] = "DRAW_BUFFER12_WEBGL"),
    (t[(t.DRAW_BUFFER13_WEBGL = 34866)] = "DRAW_BUFFER13_WEBGL"),
    (t[(t.DRAW_BUFFER14_WEBGL = 34867)] = "DRAW_BUFFER14_WEBGL"),
    (t[(t.DRAW_BUFFER15_WEBGL = 34868)] = "DRAW_BUFFER15_WEBGL"),
    (t[(t.MAX_COLOR_ATTACHMENTS_WEBGL = 36063)] =
      "MAX_COLOR_ATTACHMENTS_WEBGL"),
    (t[(t.MAX_DRAW_BUFFERS_WEBGL = 34852)] = "MAX_DRAW_BUFFERS_WEBGL"),
    (t[(t.VERTEX_ARRAY_BINDING_OES = 34229)] = "VERTEX_ARRAY_BINDING_OES"),
    (t[(t.QUERY_COUNTER_BITS_EXT = 34916)] = "QUERY_COUNTER_BITS_EXT"),
    (t[(t.CURRENT_QUERY_EXT = 34917)] = "CURRENT_QUERY_EXT"),
    (t[(t.QUERY_RESULT_EXT = 34918)] = "QUERY_RESULT_EXT"),
    (t[(t.QUERY_RESULT_AVAILABLE_EXT = 34919)] = "QUERY_RESULT_AVAILABLE_EXT"),
    (t[(t.TIME_ELAPSED_EXT = 35007)] = "TIME_ELAPSED_EXT"),
    (t[(t.TIMESTAMP_EXT = 36392)] = "TIMESTAMP_EXT"),
    (t[(t.GPU_DISJOINT_EXT = 36795)] = "GPU_DISJOINT_EXT");
})(xe || (xe = {}));
var Jr;
(function (t) {
  (t[(t.Buffer = 0)] = "Buffer"),
    (t[(t.Texture = 1)] = "Texture"),
    (t[(t.RenderTarget = 2)] = "RenderTarget"),
    (t[(t.Sampler = 3)] = "Sampler"),
    (t[(t.Program = 4)] = "Program"),
    (t[(t.Bindings = 5)] = "Bindings"),
    (t[(t.InputLayout = 6)] = "InputLayout"),
    (t[(t.RenderPipeline = 7)] = "RenderPipeline"),
    (t[(t.ComputePipeline = 8)] = "ComputePipeline"),
    (t[(t.Readback = 9)] = "Readback"),
    (t[(t.QueryPool = 10)] = "QueryPool"),
    (t[(t.RenderBundle = 11)] = "RenderBundle");
})(Jr || (Jr = {}));
var ui;
(function (t) {
  (t[(t.NEVER = 512)] = "NEVER"),
    (t[(t.LESS = 513)] = "LESS"),
    (t[(t.EQUAL = 514)] = "EQUAL"),
    (t[(t.LEQUAL = 515)] = "LEQUAL"),
    (t[(t.GREATER = 516)] = "GREATER"),
    (t[(t.NOTEQUAL = 517)] = "NOTEQUAL"),
    (t[(t.GEQUAL = 518)] = "GEQUAL"),
    (t[(t.ALWAYS = 519)] = "ALWAYS");
})(ui || (ui = {}));
var C1;
(function (t) {
  (t[(t.CCW = 2305)] = "CCW"), (t[(t.CW = 2304)] = "CW");
})(C1 || (C1 = {}));
var il;
(function (t) {
  (t[(t.NONE = 0)] = "NONE"),
    (t[(t.FRONT = 1)] = "FRONT"),
    (t[(t.BACK = 2)] = "BACK"),
    (t[(t.FRONT_AND_BACK = 3)] = "FRONT_AND_BACK");
})(il || (il = {}));
var kr;
(function (t) {
  (t[(t.ZERO = 0)] = "ZERO"),
    (t[(t.ONE = 1)] = "ONE"),
    (t[(t.SRC = 768)] = "SRC"),
    (t[(t.ONE_MINUS_SRC = 769)] = "ONE_MINUS_SRC"),
    (t[(t.DST = 774)] = "DST"),
    (t[(t.ONE_MINUS_DST = 775)] = "ONE_MINUS_DST"),
    (t[(t.SRC_ALPHA = 770)] = "SRC_ALPHA"),
    (t[(t.ONE_MINUS_SRC_ALPHA = 771)] = "ONE_MINUS_SRC_ALPHA"),
    (t[(t.DST_ALPHA = 772)] = "DST_ALPHA"),
    (t[(t.ONE_MINUS_DST_ALPHA = 773)] = "ONE_MINUS_DST_ALPHA"),
    (t[(t.CONST = 32769)] = "CONST"),
    (t[(t.ONE_MINUS_CONSTANT = 32770)] = "ONE_MINUS_CONSTANT"),
    (t[(t.SRC_ALPHA_SATURATE = 776)] = "SRC_ALPHA_SATURATE");
})(kr || (kr = {}));
var Ro;
(function (t) {
  (t[(t.ADD = 32774)] = "ADD"),
    (t[(t.SUBSTRACT = 32778)] = "SUBSTRACT"),
    (t[(t.REVERSE_SUBSTRACT = 32779)] = "REVERSE_SUBSTRACT"),
    (t[(t.MIN = 32775)] = "MIN"),
    (t[(t.MAX = 32776)] = "MAX");
})(Ro || (Ro = {}));
var Is;
(function (t) {
  (t[(t.CLAMP_TO_EDGE = 0)] = "CLAMP_TO_EDGE"),
    (t[(t.REPEAT = 1)] = "REPEAT"),
    (t[(t.MIRRORED_REPEAT = 2)] = "MIRRORED_REPEAT");
})(Is || (Is = {}));
var Na;
(function (t) {
  (t[(t.POINT = 0)] = "POINT"), (t[(t.BILINEAR = 1)] = "BILINEAR");
})(Na || (Na = {}));
var vo;
(function (t) {
  (t[(t.NO_MIP = 0)] = "NO_MIP"),
    (t[(t.NEAREST = 1)] = "NEAREST"),
    (t[(t.LINEAR = 2)] = "LINEAR");
})(vo || (vo = {}));
var $a;
(function (t) {
  (t[(t.POINTS = 0)] = "POINTS"),
    (t[(t.TRIANGLES = 1)] = "TRIANGLES"),
    (t[(t.TRIANGLE_STRIP = 2)] = "TRIANGLE_STRIP"),
    (t[(t.LINES = 3)] = "LINES"),
    (t[(t.LINE_STRIP = 4)] = "LINE_STRIP");
})($a || ($a = {}));
var wi;
(function (t) {
  (t[(t.MAP_READ = 1)] = "MAP_READ"),
    (t[(t.MAP_WRITE = 2)] = "MAP_WRITE"),
    (t[(t.COPY_SRC = 4)] = "COPY_SRC"),
    (t[(t.COPY_DST = 8)] = "COPY_DST"),
    (t[(t.INDEX = 16)] = "INDEX"),
    (t[(t.VERTEX = 32)] = "VERTEX"),
    (t[(t.UNIFORM = 64)] = "UNIFORM"),
    (t[(t.STORAGE = 128)] = "STORAGE"),
    (t[(t.INDIRECT = 256)] = "INDIRECT"),
    (t[(t.QUERY_RESOLVE = 512)] = "QUERY_RESOLVE");
})(wi || (wi = {}));
var zc;
(function (t) {
  (t[(t.STATIC = 1)] = "STATIC"), (t[(t.DYNAMIC = 2)] = "DYNAMIC");
})(zc || (zc = {}));
var oh;
(function (t) {
  (t[(t.VERTEX = 1)] = "VERTEX"), (t[(t.INSTANCE = 2)] = "INSTANCE");
})(oh || (oh = {}));
var K6;
(function (t) {
  t.LOADED = "loaded";
})(K6 || (K6 = {}));
var Ur;
(function (t) {
  (t[(t.TEXTURE_2D = 0)] = "TEXTURE_2D"),
    (t[(t.TEXTURE_2D_ARRAY = 1)] = "TEXTURE_2D_ARRAY"),
    (t[(t.TEXTURE_3D = 2)] = "TEXTURE_3D"),
    (t[(t.TEXTURE_CUBE_MAP = 3)] = "TEXTURE_CUBE_MAP");
})(Ur || (Ur = {}));
var vs;
(function (t) {
  (t[(t.SAMPLED = 1)] = "SAMPLED"),
    (t[(t.RENDER_TARGET = 2)] = "RENDER_TARGET"),
    (t[(t.STORAGE = 4)] = "STORAGE");
})(vs || (vs = {}));
var No;
(function (t) {
  (t[(t.NONE = 0)] = "NONE"),
    (t[(t.RED = 1)] = "RED"),
    (t[(t.GREEN = 2)] = "GREEN"),
    (t[(t.BLUE = 4)] = "BLUE"),
    (t[(t.ALPHA = 8)] = "ALPHA"),
    (t[(t.RGB = 7)] = "RGB"),
    (t[(t.ALL = 15)] = "ALL");
})(No || (No = {}));
var fa;
(function (t) {
  (t[(t.KEEP = 7680)] = "KEEP"),
    (t[(t.ZERO = 0)] = "ZERO"),
    (t[(t.REPLACE = 7681)] = "REPLACE"),
    (t[(t.INVERT = 5386)] = "INVERT"),
    (t[(t.INCREMENT_CLAMP = 7682)] = "INCREMENT_CLAMP"),
    (t[(t.DECREMENT_CLAMP = 7683)] = "DECREMENT_CLAMP"),
    (t[(t.INCREMENT_WRAP = 34055)] = "INCREMENT_WRAP"),
    (t[(t.DECREMENT_WRAP = 34056)] = "DECREMENT_WRAP");
})(fa || (fa = {}));
var pa;
(function (t) {
  (t[(t.Float = 0)] = "Float"),
    (t[(t.UnfilterableFloat = 1)] = "UnfilterableFloat"),
    (t[(t.Uint = 2)] = "Uint"),
    (t[(t.Sint = 3)] = "Sint"),
    (t[(t.Depth = 4)] = "Depth");
})(pa || (pa = {}));
var Uc;
(function (t) {
  (t[(t.LOWER_LEFT = 0)] = "LOWER_LEFT"),
    (t[(t.UPPER_LEFT = 1)] = "UPPER_LEFT");
})(Uc || (Uc = {}));
var Pp;
(function (t) {
  (t[(t.NEGATIVE_ONE = 0)] = "NEGATIVE_ONE"), (t[(t.ZERO = 1)] = "ZERO");
})(Pp || (Pp = {}));
var Jg;
(function (t) {
  t[(t.OcclusionConservative = 0)] = "OcclusionConservative";
})(Jg || (Jg = {}));
var At;
(function (t) {
  (t[(t.U8 = 1)] = "U8"),
    (t[(t.U16 = 2)] = "U16"),
    (t[(t.U32 = 3)] = "U32"),
    (t[(t.S8 = 4)] = "S8"),
    (t[(t.S16 = 5)] = "S16"),
    (t[(t.S32 = 6)] = "S32"),
    (t[(t.F16 = 7)] = "F16"),
    (t[(t.F32 = 8)] = "F32"),
    (t[(t.BC1 = 65)] = "BC1"),
    (t[(t.BC2 = 66)] = "BC2"),
    (t[(t.BC3 = 67)] = "BC3"),
    (t[(t.BC4_UNORM = 68)] = "BC4_UNORM"),
    (t[(t.BC4_SNORM = 69)] = "BC4_SNORM"),
    (t[(t.BC5_UNORM = 70)] = "BC5_UNORM"),
    (t[(t.BC5_SNORM = 71)] = "BC5_SNORM"),
    (t[(t.U16_PACKED_5551 = 97)] = "U16_PACKED_5551"),
    (t[(t.U16_PACKED_565 = 98)] = "U16_PACKED_565"),
    (t[(t.D24 = 129)] = "D24"),
    (t[(t.D32F = 130)] = "D32F"),
    (t[(t.D24S8 = 131)] = "D24S8"),
    (t[(t.D32FS8 = 132)] = "D32FS8");
})(At || (At = {}));
var Sn;
(function (t) {
  (t[(t.R = 1)] = "R"),
    (t[(t.RG = 2)] = "RG"),
    (t[(t.RGB = 3)] = "RGB"),
    (t[(t.RGBA = 4)] = "RGBA"),
    (t[(t.A = 5)] = "A");
})(Sn || (Sn = {}));
var hn;
(function (t) {
  (t[(t.None = 0)] = "None"),
    (t[(t.Normalized = 1)] = "Normalized"),
    (t[(t.sRGB = 2)] = "sRGB"),
    (t[(t.Depth = 4)] = "Depth"),
    (t[(t.Stencil = 8)] = "Stencil"),
    (t[(t.RenderTarget = 16)] = "RenderTarget"),
    (t[(t.Luminance = 32)] = "Luminance");
})(hn || (hn = {}));
function Vn(t, e, n) {
  return (t << 16) | (e << 8) | n;
}
var ze;
(function (t) {
  (t[(t.ALPHA = Vn(At.U8, Sn.A, hn.None))] = "ALPHA"),
    (t[(t.U8_LUMINANCE = Vn(At.U8, Sn.A, hn.Luminance))] = "U8_LUMINANCE"),
    (t[(t.F16_LUMINANCE = Vn(At.F16, Sn.A, hn.Luminance))] = "F16_LUMINANCE"),
    (t[(t.F32_LUMINANCE = Vn(At.F32, Sn.A, hn.Luminance))] = "F32_LUMINANCE"),
    (t[(t.F16_R = Vn(At.F16, Sn.R, hn.None))] = "F16_R"),
    (t[(t.F16_RG = Vn(At.F16, Sn.RG, hn.None))] = "F16_RG"),
    (t[(t.F16_RGB = Vn(At.F16, Sn.RGB, hn.None))] = "F16_RGB"),
    (t[(t.F16_RGBA = Vn(At.F16, Sn.RGBA, hn.None))] = "F16_RGBA"),
    (t[(t.F32_R = Vn(At.F32, Sn.R, hn.None))] = "F32_R"),
    (t[(t.F32_RG = Vn(At.F32, Sn.RG, hn.None))] = "F32_RG"),
    (t[(t.F32_RGB = Vn(At.F32, Sn.RGB, hn.None))] = "F32_RGB"),
    (t[(t.F32_RGBA = Vn(At.F32, Sn.RGBA, hn.None))] = "F32_RGBA"),
    (t[(t.U8_R = Vn(At.U8, Sn.R, hn.None))] = "U8_R"),
    (t[(t.U8_R_NORM = Vn(At.U8, Sn.R, hn.Normalized))] = "U8_R_NORM"),
    (t[(t.U8_RG = Vn(At.U8, Sn.RG, hn.None))] = "U8_RG"),
    (t[(t.U8_RG_NORM = Vn(At.U8, Sn.RG, hn.Normalized))] = "U8_RG_NORM"),
    (t[(t.U8_RGB = Vn(At.U8, Sn.RGB, hn.None))] = "U8_RGB"),
    (t[(t.U8_RGB_NORM = Vn(At.U8, Sn.RGB, hn.Normalized))] = "U8_RGB_NORM"),
    (t[(t.U8_RGB_SRGB = Vn(At.U8, Sn.RGB, hn.sRGB | hn.Normalized))] =
      "U8_RGB_SRGB"),
    (t[(t.U8_RGBA = Vn(At.U8, Sn.RGBA, hn.None))] = "U8_RGBA"),
    (t[(t.U8_RGBA_NORM = Vn(At.U8, Sn.RGBA, hn.Normalized))] = "U8_RGBA_NORM"),
    (t[(t.U8_RGBA_SRGB = Vn(At.U8, Sn.RGBA, hn.sRGB | hn.Normalized))] =
      "U8_RGBA_SRGB"),
    (t[(t.U16_R = Vn(At.U16, Sn.R, hn.None))] = "U16_R"),
    (t[(t.U16_R_NORM = Vn(At.U16, Sn.R, hn.Normalized))] = "U16_R_NORM"),
    (t[(t.U16_RG_NORM = Vn(At.U16, Sn.RG, hn.Normalized))] = "U16_RG_NORM"),
    (t[(t.U16_RGBA_NORM = Vn(At.U16, Sn.RGBA, hn.Normalized))] =
      "U16_RGBA_NORM"),
    (t[(t.U16_RGBA = Vn(At.U16, Sn.RGBA, hn.None))] = "U16_RGBA"),
    (t[(t.U16_RGB = Vn(At.U16, Sn.RGB, hn.None))] = "U16_RGB"),
    (t[(t.U16_RG = Vn(At.U16, Sn.RG, hn.None))] = "U16_RG"),
    (t[(t.U32_R = Vn(At.U32, Sn.R, hn.None))] = "U32_R"),
    (t[(t.U32_RG = Vn(At.U32, Sn.RG, hn.None))] = "U32_RG"),
    (t[(t.U32_RGB = Vn(At.U32, Sn.RGB, hn.None))] = "U32_RGB"),
    (t[(t.U32_RGBA = Vn(At.U32, Sn.RGBA, hn.None))] = "U32_RGBA"),
    (t[(t.S8_R = Vn(At.S8, Sn.R, hn.None))] = "S8_R"),
    (t[(t.S8_R_NORM = Vn(At.S8, Sn.R, hn.Normalized))] = "S8_R_NORM"),
    (t[(t.S8_RG_NORM = Vn(At.S8, Sn.RG, hn.Normalized))] = "S8_RG_NORM"),
    (t[(t.S8_RGB_NORM = Vn(At.S8, Sn.RGB, hn.Normalized))] = "S8_RGB_NORM"),
    (t[(t.S8_RGBA_NORM = Vn(At.S8, Sn.RGBA, hn.Normalized))] = "S8_RGBA_NORM"),
    (t[(t.S16_R = Vn(At.S16, Sn.R, hn.None))] = "S16_R"),
    (t[(t.S16_RG = Vn(At.S16, Sn.RG, hn.None))] = "S16_RG"),
    (t[(t.S16_RG_NORM = Vn(At.S16, Sn.RG, hn.Normalized))] = "S16_RG_NORM"),
    (t[(t.S16_RGB_NORM = Vn(At.S16, Sn.RGB, hn.Normalized))] = "S16_RGB_NORM"),
    (t[(t.S16_RGBA = Vn(At.S16, Sn.RGBA, hn.None))] = "S16_RGBA"),
    (t[(t.S16_RGBA_NORM = Vn(At.S16, Sn.RGBA, hn.Normalized))] =
      "S16_RGBA_NORM"),
    (t[(t.S32_R = Vn(At.S32, Sn.R, hn.None))] = "S32_R"),
    (t[(t.S32_RG = Vn(At.S32, Sn.RG, hn.None))] = "S32_RG"),
    (t[(t.S32_RGB = Vn(At.S32, Sn.RGB, hn.None))] = "S32_RGB"),
    (t[(t.S32_RGBA = Vn(At.S32, Sn.RGBA, hn.None))] = "S32_RGBA"),
    (t[(t.U16_RGBA_5551 = Vn(At.U16_PACKED_5551, Sn.RGBA, hn.Normalized))] =
      "U16_RGBA_5551"),
    (t[(t.U16_RGB_565 = Vn(At.U16_PACKED_565, Sn.RGB, hn.Normalized))] =
      "U16_RGB_565"),
    (t[(t.BC1 = Vn(At.BC1, Sn.RGBA, hn.Normalized))] = "BC1"),
    (t[(t.BC1_SRGB = Vn(At.BC1, Sn.RGBA, hn.Normalized | hn.sRGB))] =
      "BC1_SRGB"),
    (t[(t.BC2 = Vn(At.BC2, Sn.RGBA, hn.Normalized))] = "BC2"),
    (t[(t.BC2_SRGB = Vn(At.BC2, Sn.RGBA, hn.Normalized | hn.sRGB))] =
      "BC2_SRGB"),
    (t[(t.BC3 = Vn(At.BC3, Sn.RGBA, hn.Normalized))] = "BC3"),
    (t[(t.BC3_SRGB = Vn(At.BC3, Sn.RGBA, hn.Normalized | hn.sRGB))] =
      "BC3_SRGB"),
    (t[(t.BC4_UNORM = Vn(At.BC4_UNORM, Sn.R, hn.Normalized))] = "BC4_UNORM"),
    (t[(t.BC4_SNORM = Vn(At.BC4_SNORM, Sn.R, hn.Normalized))] = "BC4_SNORM"),
    (t[(t.BC5_UNORM = Vn(At.BC5_UNORM, Sn.RG, hn.Normalized))] = "BC5_UNORM"),
    (t[(t.BC5_SNORM = Vn(At.BC5_SNORM, Sn.RG, hn.Normalized))] = "BC5_SNORM"),
    (t[(t.D24 = Vn(At.D24, Sn.R, hn.Depth))] = "D24"),
    (t[(t.D24_S8 = Vn(At.D24S8, Sn.RG, hn.Depth | hn.Stencil))] = "D24_S8"),
    (t[(t.D32F = Vn(At.D32F, Sn.R, hn.Depth))] = "D32F"),
    (t[(t.D32F_S8 = Vn(At.D32FS8, Sn.RG, hn.Depth | hn.Stencil))] = "D32F_S8"),
    (t[(t.U8_RGB_RT = Vn(At.U8, Sn.RGB, hn.RenderTarget | hn.Normalized))] =
      "U8_RGB_RT"),
    (t[(t.U8_RGBA_RT = Vn(At.U8, Sn.RGBA, hn.RenderTarget | hn.Normalized))] =
      "U8_RGBA_RT"),
    (t[
      (t.U8_RGBA_RT_SRGB = Vn(
        At.U8,
        Sn.RGBA,
        hn.RenderTarget | hn.Normalized | hn.sRGB
      ))
    ] = "U8_RGBA_RT_SRGB");
})(ze || (ze = {}));
function ey(t) {
  return (t >>> 8) & 255;
}
function Eu(t) {
  return (t >>> 16) & 255;
}
function Op(t) {
  return t & 255;
}
function aA(t) {
  switch (t) {
    case At.F32:
    case At.U32:
    case At.S32:
      return 4;
    case At.U16:
    case At.S16:
    case At.F16:
      return 2;
    case At.U8:
    case At.S8:
      return 1;
    default:
      throw new Error("whoops");
  }
}
function oA(t) {
  return aA(Eu(t));
}
function Mj(t) {
  var e = aA(Eu(t)),
    n = ey(t);
  return e * n;
}
function sA(t) {
  var e = Op(t);
  if (e & hn.Depth) return pa.Depth;
  if (e & hn.Normalized) return pa.Float;
  var n = Eu(t);
  if (n === At.F16 || n === At.F32) return pa.Float;
  if (n === At.U8 || n === At.U16 || n === At.U32) return pa.Uint;
  if (n === At.S8 || n === At.S16 || n === At.S32) return pa.Sint;
  throw new Error("whoops");
}
function vr(t, e) {
  if ((e === void 0 && (e = ""), !t))
    throw new Error("Assert fail: ".concat(e));
}
function $0(t) {
  if (t != null) return t;
  throw new Error("Missing object");
}
function lA(t, e) {
  return t.r === e.r && t.g === e.g && t.b === e.b && t.a === e.a;
}
function cA(t, e) {
  (t.r = e.r), (t.g = e.g), (t.b = e.b), (t.a = e.a);
}
function uA(t) {
  var e = t.r,
    n = t.g,
    r = t.b,
    o = t.a;
  return { r: e, g: n, b: r, a: o };
}
function j1(t, e, n, r) {
  return r === void 0 && (r = 1), { r: t, g: e, b: n, a: r };
}
var Tv = j1(0, 0, 0, 0);
j1(0, 0, 0, 1);
var Pj = j1(1, 1, 1, 0);
j1(1, 1, 1, 1);
function ev(t) {
  return !!(t && !(t & (t - 1)));
}
function Vd(t, e) {
  return t ?? e;
}
function Oj(t) {
  return t === void 0 ? null : t;
}
function tv(t, e) {
  var n = e - 1;
  return (t + n) & ~n;
}
function Lj(t, e) {
  for (var n = new Array(t), r = 0; r < t; r++) n[r] = e();
  return n;
}
function Dj(t, e) {
  e === void 0 && (e = 1);
  var n = t.split(`
`);
  return n.map(function (r, o) {
    return "".concat(Bj("" + (e + o), 4, " "), "  ").concat(r);
  }).join(`
`);
}
function Bj(t, e, n) {
  for (; t.length < e; ) t = "".concat(n).concat(t);
  return t;
}
function Q6(t, e) {
  (t.blendDstFactor = e.blendDstFactor),
    (t.blendSrcFactor = e.blendSrcFactor),
    (t.blendMode = e.blendMode);
}
function nv(t, e) {
  return (
    t === void 0 && (t = {}),
    (t.compare = e.compare),
    (t.depthFailOp = e.depthFailOp),
    (t.passOp = e.passOp),
    (t.failOp = e.failOp),
    (t.mask = e.mask),
    t
  );
}
function dA(t, e) {
  return (
    t === void 0 &&
      (t = { rgbBlendState: {}, alphaBlendState: {}, channelWriteMask: 0 }),
    Q6(t.rgbBlendState, e.rgbBlendState),
    Q6(t.alphaBlendState, e.alphaBlendState),
    (t.channelWriteMask = e.channelWriteMask),
    t
  );
}
function hA(t, e) {
  t.length !== e.length && (t.length = e.length);
  for (var n = 0; n < e.length; n++) t[n] = dA(t[n], e[n]);
}
function Fj(t, e) {
  e.attachmentsState !== void 0 && hA(t.attachmentsState, e.attachmentsState),
    t.blendConstant && e.blendConstant && cA(t.blendConstant, e.blendConstant),
    (t.depthCompare = Vd(e.depthCompare, t.depthCompare)),
    (t.depthWrite = Vd(e.depthWrite, t.depthWrite)),
    (t.stencilWrite = Vd(e.stencilWrite, t.stencilWrite)),
    t.stencilFront && e.stencilFront && nv(t.stencilFront, e.stencilFront),
    t.stencilBack && e.stencilBack && nv(t.stencilBack, e.stencilBack),
    (t.cullMode = Vd(e.cullMode, t.cullMode)),
    (t.frontFace = Vd(e.frontFace, t.frontFace)),
    (t.polygonOffset = Vd(e.polygonOffset, t.polygonOffset)),
    (t.polygonOffsetFactor = Vd(e.polygonOffsetFactor, t.polygonOffsetFactor)),
    (t.polygonOffsetUnits = Vd(e.polygonOffsetUnits, t.polygonOffsetUnits));
}
function Lp(t) {
  var e = Object.assign({}, t);
  return (
    (e.attachmentsState = []),
    hA(e.attachmentsState, t.attachmentsState),
    (e.blendConstant = e.blendConstant && uA(e.blendConstant)),
    (e.stencilFront = nv(void 0, t.stencilFront)),
    (e.stencilBack = nv(void 0, t.stencilBack)),
    e
  );
}
var J6 = { blendMode: Ro.ADD, blendSrcFactor: kr.ONE, blendDstFactor: kr.ZERO },
  Dp = {
    attachmentsState: [
      { channelWriteMask: No.ALL, rgbBlendState: J6, alphaBlendState: J6 },
    ],
    blendConstant: uA(Tv),
    depthWrite: !0,
    depthCompare: ui.LEQUAL,
    stencilWrite: !1,
    stencilFront: {
      compare: ui.ALWAYS,
      passOp: fa.KEEP,
      depthFailOp: fa.KEEP,
      failOp: fa.KEEP,
    },
    stencilBack: {
      compare: ui.ALWAYS,
      passOp: fa.KEEP,
      depthFailOp: fa.KEEP,
      failOp: fa.KEEP,
    },
    cullMode: il.NONE,
    frontFace: C1.CCW,
    polygonOffset: !1,
    polygonOffsetFactor: 0,
    polygonOffsetUnits: 0,
  };
function kj(t, e) {
  t === void 0 && (t = null), e === void 0 && (e = Dp);
  var n = Lp(e);
  return t !== null && Fj(n, t), n;
}
kj({ depthCompare: ui.ALWAYS, depthWrite: !1 }, Dp);
var pA = {
  texture: null,
  sampler: null,
  formatKind: pa.Float,
  dimension: Ur.TEXTURE_2D,
};
function Qd(t, e, n) {
  if (t.length !== e.length) return !1;
  for (var r = 0; r < t.length; r++) if (!n(t[r], e[r])) return !1;
  return !0;
}
function hp(t, e) {
  for (var n = Array(t.length), r = 0; r < t.length; r++) n[r] = e(t[r]);
  return n;
}
function Uj(t, e) {
  return t.texture === e.texture && t.binding === e.binding;
}
function eb(t, e) {
  return (
    t.buffer === e.buffer &&
    t.size === e.size &&
    t.binding === e.binding &&
    t.offset === e.offset
  );
}
function zj(t, e) {
  return t === null
    ? e === null
    : e === null
    ? !1
    : t.sampler === e.sampler &&
      t.texture === e.texture &&
      t.dimension === e.dimension &&
      t.formatKind === e.formatKind &&
      t.comparison === e.comparison;
}
function Vj(t, e) {
  return (
    (t.samplerBindings = t.samplerBindings || []),
    (t.uniformBufferBindings = t.uniformBufferBindings || []),
    (t.storageBufferBindings = t.storageBufferBindings || []),
    (t.storageTextureBindings = t.storageTextureBindings || []),
    (e.samplerBindings = e.samplerBindings || []),
    (e.uniformBufferBindings = e.uniformBufferBindings || []),
    (e.storageBufferBindings = e.storageBufferBindings || []),
    (e.storageTextureBindings = e.storageTextureBindings || []),
    !(
      t.samplerBindings.length !== e.samplerBindings.length ||
      !Qd(t.samplerBindings, e.samplerBindings, zj) ||
      !Qd(t.uniformBufferBindings, e.uniformBufferBindings, eb) ||
      !Qd(t.storageBufferBindings, e.storageBufferBindings, eb) ||
      !Qd(t.storageTextureBindings, e.storageTextureBindings, Uj)
    )
  );
}
function tb(t, e) {
  return (
    t.blendMode == e.blendMode &&
    t.blendSrcFactor === e.blendSrcFactor &&
    t.blendDstFactor === e.blendDstFactor
  );
}
function Hj(t, e) {
  return !(
    !tb(t.rgbBlendState, e.rgbBlendState) ||
    !tb(t.alphaBlendState, e.alphaBlendState) ||
    t.channelWriteMask !== e.channelWriteMask
  );
}
function rv(t, e) {
  return (
    t.compare == e.compare &&
    t.depthFailOp === e.depthFailOp &&
    t.failOp === e.failOp &&
    t.passOp === e.passOp &&
    t.mask === e.mask
  );
}
function jj(t, e) {
  return !Qd(t.attachmentsState, e.attachmentsState, Hj) ||
    (t.blendConstant &&
      e.blendConstant &&
      !lA(t.blendConstant, e.blendConstant)) ||
    (t.stencilFront && e.stencilFront && !rv(t.stencilFront, e.stencilFront)) ||
    (t.stencilBack && e.stencilBack && !rv(t.stencilBack, e.stencilBack))
    ? !1
    : t.depthCompare === e.depthCompare &&
        t.depthWrite === e.depthWrite &&
        t.stencilWrite === e.stencilWrite &&
        t.cullMode === e.cullMode &&
        t.frontFace === e.frontFace &&
        t.polygonOffset === e.polygonOffset &&
        t.polygonOffsetFactor === e.polygonOffsetFactor &&
        t.polygonOffsetUnits === e.polygonOffsetUnits;
}
function fA(t, e) {
  return t.id === e.id;
}
function Wj(t, e) {
  return t === e;
}
function Xj(t, e) {
  return !(
    t.topology !== e.topology ||
    t.inputLayout !== e.inputLayout ||
    t.sampleCount !== e.sampleCount ||
    (t.megaStateDescriptor &&
      e.megaStateDescriptor &&
      !jj(t.megaStateDescriptor, e.megaStateDescriptor)) ||
    !fA(t.program, e.program) ||
    !Qd(t.colorAttachmentFormats, e.colorAttachmentFormats, Wj) ||
    t.depthStencilAttachmentFormat !== e.depthStencilAttachmentFormat
  );
}
function Gj(t, e) {
  return (
    t.offset === e.offset &&
    t.shaderLocation === e.shaderLocation &&
    t.format === e.format &&
    t.divisor === e.divisor
  );
}
function Zj(t, e) {
  return hc(t)
    ? hc(e)
    : hc(e)
    ? !1
    : t.arrayStride === e.arrayStride &&
      t.stepMode === e.stepMode &&
      Qd(t.attributes, e.attributes, Gj);
}
function Yj(t, e) {
  return !(
    t.indexBufferFormat !== e.indexBufferFormat ||
    !Qd(t.vertexBufferDescriptors, e.vertexBufferDescriptors, Zj) ||
    !fA(t.program, e.program)
  );
}
function qj(t) {
  var e = t.sampler,
    n = t.texture,
    r = t.dimension,
    o = t.formatKind,
    l = t.comparison;
  return { sampler: e, texture: n, dimension: r, formatKind: o, comparison: l };
}
function nb(t) {
  var e = t.buffer,
    n = t.size,
    r = t.binding,
    o = t.offset;
  return { binding: r, buffer: e, offset: o, size: n };
}
function $j(t) {
  var e = t.binding,
    n = t.texture;
  return { binding: e, texture: n };
}
function Kj(t) {
  var e = t.samplerBindings && hp(t.samplerBindings, qj),
    n = t.uniformBufferBindings && hp(t.uniformBufferBindings, nb),
    r = t.storageBufferBindings && hp(t.storageBufferBindings, nb),
    o = t.storageTextureBindings && hp(t.storageTextureBindings, $j);
  return {
    samplerBindings: e,
    uniformBufferBindings: n,
    storageBufferBindings: r,
    storageTextureBindings: o,
    pipeline: t.pipeline,
  };
}
function Qj(t) {
  var e = t.inputLayout,
    n = t.program,
    r = t.topology,
    o = t.megaStateDescriptor && Lp(t.megaStateDescriptor),
    l = t.colorAttachmentFormats.slice(),
    a = t.depthStencilAttachmentFormat,
    h = t.sampleCount;
  return {
    inputLayout: e,
    megaStateDescriptor: o,
    program: n,
    topology: r,
    colorAttachmentFormats: l,
    depthStencilAttachmentFormat: a,
    sampleCount: h,
  };
}
function Jj(t) {
  var e = t.shaderLocation,
    n = t.format,
    r = t.offset,
    o = t.divisor;
  return { shaderLocation: e, format: n, offset: r, divisor: o };
}
function eW(t) {
  if (hc(t)) return t;
  var e = t.arrayStride,
    n = t.stepMode,
    r = hp(t.attributes, Jj);
  return { arrayStride: e, stepMode: n, attributes: r };
}
function tW(t) {
  var e = hp(t.vertexBufferDescriptors, eW),
    n = t.indexBufferFormat,
    r = t.program;
  return { vertexBufferDescriptors: e, indexBufferFormat: n, program: r };
}
var jr,
  nW = /([^[]*)(\[[0-9]+\])?/;
function rW(t) {
  if (t[t.length - 1] !== "]") return { name: t, length: 1, isArray: !1 };
  var e = t.match(nW);
  if (!e || e.length < 2)
    throw new Error("Failed to parse GLSL uniform name ".concat(t));
  return { name: e[1], length: Number(e[2]) || 1, isArray: !!e[2] };
}
function Ns() {
  var t = null;
  return function (e, n, r) {
    var o = t !== r;
    return o && (e.uniform1i(n, r), (t = r)), o;
  };
}
function ua(t, e, n, r) {
  var o = null,
    l = null;
  return function (a, h, f) {
    var v = e(f, n),
      E = v.length,
      x = !1;
    if (o === null) (o = new Float32Array(E)), (l = E), (x = !0);
    else {
      vr(l === E, "Uniform length cannot change.");
      for (var T = 0; T < E; ++T)
        if (v[T] !== o[T]) {
          x = !0;
          break;
        }
    }
    return x && (r(a, t, h, v), o.set(v)), x;
  };
}
function ms(t, e, n, r) {
  t[e](n, r);
}
function Ju(t, e, n, r) {
  t[e](n, !1, r);
}
var iW = {},
  aW = {},
  oW = {},
  rb = [0];
function ty(t, e, n, r) {
  e === 1 && typeof t == "boolean" && (t = t ? 1 : 0),
    Number.isFinite(t) && ((rb[0] = t), (t = rb));
  var o = t.length;
  if (t instanceof n) return t;
  var l = r[o];
  l || ((l = new n(o)), (r[o] = l));
  for (var a = 0; a < o; a++) l[a] = t[a];
  return l;
}
function wl(t, e) {
  return ty(t, e, Float32Array, iW);
}
function Hd(t, e) {
  return ty(t, e, Int32Array, aW);
}
function qm(t, e) {
  return ty(t, e, Uint32Array, oW);
}
var sW =
  ((jr = {}),
  (jr[xe.FLOAT] = ua.bind(null, "uniform1fv", wl, 1, ms)),
  (jr[xe.FLOAT_VEC2] = ua.bind(null, "uniform2fv", wl, 2, ms)),
  (jr[xe.FLOAT_VEC3] = ua.bind(null, "uniform3fv", wl, 3, ms)),
  (jr[xe.FLOAT_VEC4] = ua.bind(null, "uniform4fv", wl, 4, ms)),
  (jr[xe.INT] = ua.bind(null, "uniform1iv", Hd, 1, ms)),
  (jr[xe.INT_VEC2] = ua.bind(null, "uniform2iv", Hd, 2, ms)),
  (jr[xe.INT_VEC3] = ua.bind(null, "uniform3iv", Hd, 3, ms)),
  (jr[xe.INT_VEC4] = ua.bind(null, "uniform4iv", Hd, 4, ms)),
  (jr[xe.BOOL] = ua.bind(null, "uniform1iv", Hd, 1, ms)),
  (jr[xe.BOOL_VEC2] = ua.bind(null, "uniform2iv", Hd, 2, ms)),
  (jr[xe.BOOL_VEC3] = ua.bind(null, "uniform3iv", Hd, 3, ms)),
  (jr[xe.BOOL_VEC4] = ua.bind(null, "uniform4iv", Hd, 4, ms)),
  (jr[xe.FLOAT_MAT2] = ua.bind(null, "uniformMatrix2fv", wl, 4, Ju)),
  (jr[xe.FLOAT_MAT3] = ua.bind(null, "uniformMatrix3fv", wl, 9, Ju)),
  (jr[xe.FLOAT_MAT4] = ua.bind(null, "uniformMatrix4fv", wl, 16, Ju)),
  (jr[xe.UNSIGNED_INT] = ua.bind(null, "uniform1uiv", qm, 1, ms)),
  (jr[xe.UNSIGNED_INT_VEC2] = ua.bind(null, "uniform2uiv", qm, 2, ms)),
  (jr[xe.UNSIGNED_INT_VEC3] = ua.bind(null, "uniform3uiv", qm, 3, ms)),
  (jr[xe.UNSIGNED_INT_VEC4] = ua.bind(null, "uniform4uiv", qm, 4, ms)),
  (jr[xe.FLOAT_MAT2x3] = ua.bind(null, "uniformMatrix2x3fv", wl, 6, Ju)),
  (jr[xe.FLOAT_MAT2x4] = ua.bind(null, "uniformMatrix2x4fv", wl, 8, Ju)),
  (jr[xe.FLOAT_MAT3x2] = ua.bind(null, "uniformMatrix3x2fv", wl, 6, Ju)),
  (jr[xe.FLOAT_MAT3x4] = ua.bind(null, "uniformMatrix3x4fv", wl, 12, Ju)),
  (jr[xe.FLOAT_MAT4x2] = ua.bind(null, "uniformMatrix4x2fv", wl, 8, Ju)),
  (jr[xe.FLOAT_MAT4x3] = ua.bind(null, "uniformMatrix4x3fv", wl, 12, Ju)),
  (jr[xe.SAMPLER_2D] = Ns),
  (jr[xe.SAMPLER_CUBE] = Ns),
  (jr[xe.SAMPLER_3D] = Ns),
  (jr[xe.SAMPLER_2D_SHADOW] = Ns),
  (jr[xe.SAMPLER_2D_ARRAY] = Ns),
  (jr[xe.SAMPLER_2D_ARRAY_SHADOW] = Ns),
  (jr[xe.SAMPLER_CUBE_SHADOW] = Ns),
  (jr[xe.INT_SAMPLER_2D] = Ns),
  (jr[xe.INT_SAMPLER_3D] = Ns),
  (jr[xe.INT_SAMPLER_CUBE] = Ns),
  (jr[xe.INT_SAMPLER_2D_ARRAY] = Ns),
  (jr[xe.UNSIGNED_INT_SAMPLER_2D] = Ns),
  (jr[xe.UNSIGNED_INT_SAMPLER_3D] = Ns),
  (jr[xe.UNSIGNED_INT_SAMPLER_CUBE] = Ns),
  (jr[xe.UNSIGNED_INT_SAMPLER_2D_ARRAY] = Ns),
  jr);
function ib(t, e, n) {
  var r = sW[n.type];
  if (!r) throw new Error("Unknown GLSL uniform type ".concat(n.type));
  return r().bind(null, t, e);
}
var lW = {
  "[object Int8Array]": 5120,
  "[object Int16Array]": 5122,
  "[object Int32Array]": 5124,
  "[object Uint8Array]": 5121,
  "[object Uint8ClampedArray]": 5121,
  "[object Uint16Array]": 5123,
  "[object Uint32Array]": 5125,
  "[object Float32Array]": 5126,
  "[object Float64Array]": 5121,
  "[object ArrayBuffer]": 5121,
};
function cW(t) {
  return Object.prototype.toString.call(t) in lW;
}
function kf(t, e) {
  return "#define ".concat(t, " ").concat(e);
}
function uW(t) {
  var e = {};
  return (
    t.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm, function (n, r, o) {
      var l = Number(o);
      return (e[r] = isNaN(l) ? o : l), "";
    }),
    e
  );
}
function dW(t, e) {
  var n = [];
  return (
    t.replace(
      /^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,
      function (r, o, l) {
        var a = Number(o);
        return n.push({ location: isNaN(a) ? e[o] : a, name: l }), "";
      }
    ),
    n
  );
}
function ab(t) {
  if (t === void 0) return null;
  var e = /binding\s*=\s*(\d+)/.exec(t);
  if (e !== null) {
    var n = parseInt(e[1], 10);
    if (!Number.isNaN(n)) return n;
  }
  return null;
}
function ob(t) {
  var e = "",
    n = t;
  return [n, e];
}
function Bp(t, e, n, r, o) {
  var l;
  r === void 0 && (r = null), o === void 0 && (o = !0);
  var a = t.glslVersion === "#version 100",
    h =
      e === "frag" &&
      ((l = n.match(
        /^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm
      )) === null || l === void 0
        ? void 0
        : l.length) > 1,
    f = n
      .replace(
        `\r
`,
        `
`
      )
      .split(
        `
`
      )
      .map(function (Se) {
        return Se.replace(/[/][/].*$/, "");
      })
      .filter(function (Se) {
        var ue = !Se || /^\s+$/.test(Se);
        return !ue;
      }),
    v = "";
  r !== null &&
    (v = Object.keys(r).map(function (Se) {
      return kf(Se, r[Se]);
    }).join(`
`));
  var E =
      f.find(function (Se) {
        return Se.startsWith("precision");
      }) || "precision mediump float;",
    x = o
      ? f.filter(function (Se) {
          return !Se.startsWith("precision");
        }).join(`
`)
      : f.join(`
`),
    T = "";
  if (
    (t.viewportOrigin === Uc.UPPER_LEFT &&
      (T += "".concat(
        kf("VIEWPORT_ORIGIN_TL", "1"),
        `
`
      )),
    t.clipSpaceNearZ === Pp.ZERO &&
      (T += "".concat(
        kf("CLIPSPACE_NEAR_ZERO", "1"),
        `
`
      )),
    t.explicitBindingLocations)
  ) {
    var N = 0,
      I = 0,
      L = 0;
    (x = x.replace(
      /^\s*(layout\((.*)\))?\s*uniform(.+{)$/gm,
      function (Se, ue, ke, ut) {
        var Ve = ke ? "".concat(ke, ", ") : "";
        return "layout("
          .concat(Ve, "set = ")
          .concat(N, ", binding = ")
          .concat(I++, ") uniform ")
          .concat(ut);
      }
    )),
      N++,
      (I = 0),
      vr(t.separateSamplerTextures),
      (x = x.replace(
        /^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,
        function (Se, ue, ke, ut, Ve) {
          var Ae = ab(ke);
          Ae === null && (Ae = I++);
          var Be = Lc(ob(ut), 2),
            He = Be[0],
            nt = Be[1];
          return e === "frag"
            ? `
layout(set = `
                .concat(N, ", binding = ")
                .concat(Ae * 2 + 0, ") uniform texture")
                .concat(He, " T_")
                .concat(
                  Ve,
                  `;
layout(set = `
                )
                .concat(N, ", binding = ")
                .concat(Ae * 2 + 1, ") uniform sampler")
                .concat(nt, " S_")
                .concat(Ve, ";")
                .trim()
            : "";
        }
      )),
      (x = x.replace(
        e === "frag" ? /^\s*\b(varying|in)\b/gm : /^\s*\b(varying|out)\b/gm,
        function (Se, ue) {
          return "layout(location = ".concat(L++, ") ").concat(ue);
        }
      )),
      (T += "".concat(
        kf("gl_VertexID", "gl_VertexIndex"),
        `
`
      )),
      (T += "".concat(
        kf("gl_InstanceID", "gl_InstanceIndex"),
        `
`
      )),
      (E = E.replace(/^precision (.*) sampler(.*);$/gm, ""));
  } else {
    var F = 0;
    x = x.replace(
      /^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,
      function (Se, ue, ke, ut, Ve) {
        var Ae = ab(ke);
        return (
          Ae === null && (Ae = F++),
          "uniform sampler"
            .concat(ut, " ")
            .concat(Ve, "; // BINDING=")
            .concat(Ae)
        );
      }
    );
  }
  if (
    ((x = x.replace(/\bPU_SAMPLER_(\w+)\((.*?)\)/g, function (Se, ue, ke) {
      return "SAMPLER_".concat(ue, "(P_").concat(ke, ")");
    })),
    (x = x.replace(/\bPF_SAMPLER_(\w+)\((.*?)\)/g, function (Se, ue, ke) {
      return "PP_SAMPLER_".concat(ue, "(P_").concat(ke, ")");
    })),
    (x = x.replace(/\bPU_TEXTURE\((.*?)\)/g, function (Se, ue) {
      return "TEXTURE(P_".concat(ue, ")");
    })),
    t.separateSamplerTextures)
  )
    (x = x.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g, function (Se, ue, ke) {
      var ut = Lc(ob(ue), 2),
        Ve = ut[0],
        Ae = ut[1];
      return "texture"
        .concat(Ve, " T_P_")
        .concat(ke, ", sampler")
        .concat(Ae, " S_P_")
        .concat(ke);
    })),
      (x = x.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g, function (Se, ue, ke) {
        return "T_".concat(ke, ", S_").concat(ke);
      })),
      (x = x.replace(/\bSAMPLER_(\w+)\((.*?)\)/g, function (Se, ue, ke) {
        return "sampler".concat(ue, "(T_").concat(ke, ", S_").concat(ke, ")");
      })),
      (x = x.replace(/\bTEXTURE\((.*?)\)/g, function (Se, ue) {
        return "T_".concat(ue);
      }));
  else {
    var X = [];
    (x = x.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g, function (Se, ue, ke) {
      return "sampler".concat(ue, " P_").concat(ke);
    })),
      (x = x.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g, function (Se, ue, ke) {
        return ke;
      })),
      (x = x.replace(/\bSAMPLER_(\w+)\((.*?)\)/g, function (Se, ue, ke) {
        return X.push([ke, ue]), ke;
      })),
      a &&
        X.forEach(function (Se) {
          var ue = Lc(Se, 2),
            ke = ue[0],
            ut = ue[1];
          x = x.replace(new RegExp("texture\\(".concat(ke), "g"), function () {
            return "texture".concat(ut, "(").concat(ke);
          });
        }),
      (x = x.replace(/\bTEXTURE\((.*?)\)/g, function (Se, ue) {
        return ue;
      }));
  }
  var G = ""
    .concat(
      a ? "" : t.glslVersion,
      `
`
    )
    .concat(
      a && h
        ? `#extension GL_EXT_draw_buffers : require
`
        : "",
      `
`
    )
    .concat(
      a && e === "frag"
        ? `#extension GL_OES_standard_derivatives : enable
`
        : ""
    )
    .concat(
      o ? E : "",
      `
`
    )
    .concat(T || "")
    .concat(
      v
        ? v +
            `
`
        : "",
      `
`
    )
    .concat(
      x,
      `
`
    )
    .trim();
  if (
    (t.explicitBindingLocations &&
      e === "frag" &&
      (G = G.replace(/^\b(out)\b/g, function (Se, ue) {
        return "layout(location = 0) ".concat(ue);
      })),
    a)
  ) {
    if (
      (e === "frag" &&
        (G = G.replace(/^\s*in\s+(\S+)\s*(.*);$/gm, function (Se, ue, ke) {
          return "varying ".concat(ue, " ").concat(
            ke,
            `;
`
          );
        })),
      e === "vert" &&
        ((G = G.replace(/^\s*out\s+(\S+)\s*(.*);$/gm, function (Se, ue, ke) {
          return "varying ".concat(ue, " ").concat(
            ke,
            `;
`
          );
        })),
        (G = G.replace(
          /^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,
          function (Se, ue, ke) {
            return "attribute ".concat(ue, " ").concat(
              ke,
              `;
`
            );
          }
        ))),
      (G = G.replace(
        /\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,
        function (Se, ue) {
          return ue.trim().replace(/^.*$/gm, function (ke) {
            var ut = ke.trim();
            return ut.startsWith("#") ? ut : ke ? "uniform ".concat(ut) : "";
          });
        }
      )),
      e === "frag")
    )
      if (h) {
        var K = [];
        G = G.replace(
          /^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,
          function (Se, ue) {
            return (
              K.push(ue),
              "vec4 ".concat(
                ue,
                `;
`
              )
            );
          }
        );
        var Q = G.lastIndexOf("}");
        G =
          G.substring(0, Q) +
          `
    `.concat(
            K.map(function (Se, ue) {
              return "gl_FragData[".concat(ue, "] = ").concat(
                Se,
                `;
    `
              );
            }).join(`
`)
          ) +
          G.substring(Q);
      } else {
        var ee;
        if (
          ((G = G.replace(/^\s*out\s+(\S+)\s*(.*);$/gm, function (Se, ue, ke) {
            return (
              (ee = ke),
              "".concat(ue, " ").concat(
                ke,
                `;
`
              )
            );
          })),
          ee)
        ) {
          var Q = G.lastIndexOf("}");
          G =
            G.substring(0, Q) +
            `
  gl_FragColor = vec4(`.concat(
              ee,
              `);
`
            ) +
            G.substring(Q);
        }
      }
    G = G.replace(/^\s*layout\((.*)\)/gm, "");
  }
  return G;
}
var fc = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = t.call(this) || this;
      return (
        (l.id = r),
        (l.device = o),
        l.device.resourceCreationTracker !== null &&
          l.device.resourceCreationTracker.trackResourceCreated(l),
        l
      );
    }
    return (
      (e.prototype.destroy = function () {
        this.device.resourceCreationTracker !== null &&
          this.device.resourceCreationTracker.trackResourceDestroyed(this);
      }),
      e
    );
  })(iA),
  hW = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = n.descriptor,
        a = t.call(this, { id: r, device: o }) || this;
      a.type = Jr.Bindings;
      var h = l.uniformBufferBindings,
        f = l.samplerBindings;
      return (
        (a.uniformBufferBindings = h || []),
        (a.samplerBindings = f || []),
        (a.bindingLayouts = a.createBindingLayouts()),
        a
      );
    }
    return (
      (e.prototype.createBindingLayouts = function () {
        var n = 0,
          r = 0,
          o = [],
          l = this.uniformBufferBindings.length,
          a = this.samplerBindings.length;
        return (
          o.push({
            firstUniformBuffer: n,
            numUniformBuffers: l,
            firstSampler: r,
            numSamplers: a,
          }),
          (n += l),
          (r += a),
          { numUniformBuffers: n, numSamplers: r, bindingLayoutTables: o }
        );
      }),
      e
    );
  })(fc);
function Pn(t) {
  return typeof WebGL2RenderingContext < "u" &&
    t instanceof WebGL2RenderingContext
    ? !0
    : !!(t && t._version === 2);
}
function mA(t) {
  var e = Eu(t);
  switch (e) {
    case At.BC1:
    case At.BC2:
    case At.BC3:
    case At.BC4_UNORM:
    case At.BC4_SNORM:
    case At.BC5_UNORM:
    case At.BC5_SNORM:
      return !0;
    default:
      return !1;
  }
}
function gA(t) {
  var e = Op(t);
  if (e & hn.Normalized) return !1;
  var n = Eu(t);
  return (
    n === At.S8 ||
    n === At.S16 ||
    n === At.S32 ||
    n === At.U8 ||
    n === At.U16 ||
    n === At.U32
  );
}
function pW(t) {
  switch (t) {
    case zc.STATIC:
      return xe.STATIC_DRAW;
    case zc.DYNAMIC:
      return xe.DYNAMIC_DRAW;
  }
}
function sb(t) {
  if (t & wi.INDEX) return xe.ELEMENT_ARRAY_BUFFER;
  if (t & wi.VERTEX) return xe.ARRAY_BUFFER;
  if (t & wi.UNIFORM) return xe.UNIFORM_BUFFER;
}
function fW(t) {
  switch (t) {
    case $a.TRIANGLES:
      return xe.TRIANGLES;
    case $a.POINTS:
      return xe.POINTS;
    case $a.TRIANGLE_STRIP:
      return xe.TRIANGLE_STRIP;
    case $a.LINES:
      return xe.LINES;
    case $a.LINE_STRIP:
      return xe.LINE_STRIP;
    default:
      throw new Error("Unknown primitive topology mode");
  }
}
function mW(t) {
  switch (t) {
    case At.U8:
      return xe.UNSIGNED_BYTE;
    case At.U16:
      return xe.UNSIGNED_SHORT;
    case At.U32:
      return xe.UNSIGNED_INT;
    case At.S8:
      return xe.BYTE;
    case At.S16:
      return xe.SHORT;
    case At.S32:
      return xe.INT;
    case At.F16:
      return xe.HALF_FLOAT;
    case At.F32:
      return xe.FLOAT;
    default:
      throw new Error("whoops");
  }
}
function gW(t) {
  switch (t) {
    case Sn.R:
      return 1;
    case Sn.RG:
      return 2;
    case Sn.RGB:
      return 3;
    case Sn.RGBA:
      return 4;
    default:
      return 1;
  }
}
function vW(t) {
  var e = Eu(t),
    n = ey(t),
    r = Op(t),
    o = mW(e),
    l = gW(n),
    a = !!(r & hn.Normalized);
  return { size: l, type: o, normalized: a };
}
function _W(t) {
  switch (t) {
    case ze.U8_R:
      return xe.UNSIGNED_BYTE;
    case ze.U16_R:
      return xe.UNSIGNED_SHORT;
    case ze.U32_R:
      return xe.UNSIGNED_INT;
    default:
      throw new Error("whoops");
  }
}
function Uf(t) {
  switch (t) {
    case Is.CLAMP_TO_EDGE:
      return xe.CLAMP_TO_EDGE;
    case Is.REPEAT:
      return xe.REPEAT;
    case Is.MIRRORED_REPEAT:
      return xe.MIRRORED_REPEAT;
    default:
      throw new Error("whoops");
  }
}
function $m(t, e) {
  if (e === vo.LINEAR && t === Na.BILINEAR) return xe.LINEAR_MIPMAP_LINEAR;
  if (e === vo.LINEAR && t === Na.POINT) return xe.NEAREST_MIPMAP_LINEAR;
  if (e === vo.NEAREST && t === Na.BILINEAR) return xe.LINEAR_MIPMAP_NEAREST;
  if (e === vo.NEAREST && t === Na.POINT) return xe.NEAREST_MIPMAP_NEAREST;
  if (e === vo.NO_MIP && t === Na.BILINEAR) return xe.LINEAR;
  if (e === vo.NO_MIP && t === Na.POINT) return xe.NEAREST;
  throw new Error("Unknown texture filter mode");
}
function Ep(t, e) {
  e === void 0 && (e = 0);
  var n = t;
  return n.gl_buffer_pages[(e / n.pageByteSize) | 0];
}
function sp(t) {
  var e = t;
  return e.gl_texture;
}
function j_(t) {
  var e = t;
  return e.gl_sampler;
}
function zf(t, e) {
  (t.name = e), (t.__SPECTOR_Metadata = { name: e });
}
function lb(t, e) {
  for (var n = []; ; ) {
    var r = e.exec(t);
    if (!r) break;
    n.push(r);
  }
  return n;
}
function jd(t) {
  return (
    t.blendMode == Ro.ADD &&
    t.blendSrcFactor == kr.ONE &&
    t.blendDstFactor === kr.ZERO
  );
}
function yW(t) {
  switch (t) {
    case Jg.OcclusionConservative:
      return xe.ANY_SAMPLES_PASSED_CONSERVATIVE;
    default:
      throw new Error("whoops");
  }
}
function xW(t) {
  if (t === Ur.TEXTURE_2D) return xe.TEXTURE_2D;
  if (t === Ur.TEXTURE_2D_ARRAY) return xe.TEXTURE_2D_ARRAY;
  if (t === Ur.TEXTURE_CUBE_MAP) return xe.TEXTURE_CUBE_MAP;
  if (t === Ur.TEXTURE_3D) return xe.TEXTURE_3D;
  throw new Error("whoops");
}
function z2(t, e, n, r) {
  return !(t % n !== 0 || e % r !== 0);
}
var bW = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = n.descriptor,
        a = t.call(this, { id: r, device: o }) || this;
      a.type = Jr.Buffer;
      var h = l.viewOrSize,
        f = l.usage,
        v = l.hint,
        E = v === void 0 ? zc.STATIC : v,
        x = o.uniformBufferMaxPageByteSize,
        T = o.gl,
        N = f & wi.UNIFORM;
      N ||
        (Pn(T)
          ? T.bindVertexArray(null)
          : o.OES_vertex_array_object.bindVertexArrayOES(null));
      var I = dp(h) ? tv(h, 4) : tv(h.byteLength, 4);
      a.gl_buffer_pages = [];
      var L;
      if (N) {
        for (var F = I; F > 0; )
          a.gl_buffer_pages.push(a.createBufferPage(Math.min(F, x), f, E)),
            (F -= x);
        L = x;
      } else a.gl_buffer_pages.push(a.createBufferPage(I, f, E)), (L = I);
      return (
        (a.pageByteSize = L),
        (a.byteSize = I),
        (a.usage = f),
        (a.gl_target = sb(f)),
        dp(h) || a.setSubData(0, new Uint8Array(h.buffer)),
        N ||
          (Pn(T)
            ? T.bindVertexArray(a.device.currentBoundVAO)
            : o.OES_vertex_array_object.bindVertexArrayOES(
                a.device.currentBoundVAO
              )),
        a
      );
    }
    return (
      (e.prototype.setSubData = function (n, r, o, l) {
        o === void 0 && (o = 0), l === void 0 && (l = r.byteLength - o);
        for (
          var a = this.device.gl,
            h = this.pageByteSize,
            f = n + l,
            v = n,
            E = n % h;
          v < f;

        ) {
          var x = Pn(a) ? a.COPY_WRITE_BUFFER : this.gl_target,
            T = Ep(this, v);
          if (T.ubo) return;
          a.bindBuffer(x, T),
            Pn(a)
              ? a.bufferSubData(x, E, r, o, Math.min(f - v, h))
              : a.bufferSubData(x, E, r),
            (v += h),
            (E = 0),
            (o += h),
            this.device.debugGroupStatisticsBufferUpload();
        }
      }),
      (e.prototype.destroy = function () {
        t.prototype.destroy.call(this);
        for (var n = 0; n < this.gl_buffer_pages.length; n++)
          this.gl_buffer_pages[n].ubo ||
            this.device.gl.deleteBuffer(this.gl_buffer_pages[n]);
        this.gl_buffer_pages = [];
      }),
      (e.prototype.createBufferPage = function (n, r, o) {
        var l = this.device.gl,
          a = r & wi.UNIFORM;
        if (!Pn(l) && a) return { ubo: !0 };
        var h = this.device.ensureResourceExists(l.createBuffer()),
          f = sb(r),
          v = pW(o);
        return l.bindBuffer(f, h), l.bufferData(f, n, v), h;
      }),
      e
    );
  })(fc),
  EW = (function (t) {
    ga(e, t);
    function e(n) {
      var r,
        o,
        l,
        a,
        h = n.id,
        f = n.device,
        v = n.descriptor,
        E,
        x = t.call(this, { id: h, device: f }) || this;
      x.type = Jr.InputLayout;
      var T = v.vertexBufferDescriptors,
        N = v.indexBufferFormat,
        I = v.program;
      vr(N === ze.U16_R || N === ze.U32_R || N === null);
      var L = N !== null ? _W(N) : null,
        F = N !== null ? oA(N) : null,
        X = x.device.gl,
        G = x.device.ensureResourceExists(
          Pn(X)
            ? X.createVertexArray()
            : f.OES_vertex_array_object.createVertexArrayOES()
        );
      Pn(X)
        ? X.bindVertexArray(G)
        : f.OES_vertex_array_object.bindVertexArrayOES(G),
        X.bindBuffer(X.ARRAY_BUFFER, Ep(x.device.fallbackVertexBuffer));
      try {
        for (
          var K = ah(v.vertexBufferDescriptors), Q = K.next();
          !Q.done;
          Q = K.next()
        ) {
          var ee = Q.value,
            Se = ee.stepMode,
            ue = ee.attributes;
          try {
            for (
              var ke = ((l = void 0), ah(ue)), ut = ke.next();
              !ut.done;
              ut = ke.next()
            ) {
              var Ve = ut.value,
                Ae = Ve.shaderLocation,
                Be = Ve.format,
                He = Ve.divisor,
                nt = He === void 0 ? 1 : He,
                Ut = Pn(X)
                  ? Ae
                  : (E = I.attributes[Ae]) === null || E === void 0
                  ? void 0
                  : E.location,
                Yt = vW(Be);
              if (((Ve.vertexFormat = Yt), !hc(Ut))) {
                gA(Be);
                var Ht = Yt.size,
                  On = Yt.type,
                  gn = Yt.normalized;
                X.vertexAttribPointer(Ut, Ht, On, gn, 0, 0),
                  Se === oh.INSTANCE &&
                    (Pn(X)
                      ? X.vertexAttribDivisor(Ut, nt)
                      : f.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(
                          Ut,
                          nt
                        )),
                  X.enableVertexAttribArray(Ut);
              }
            }
          } catch (xn) {
            l = { error: xn };
          } finally {
            try {
              ut && !ut.done && (a = ke.return) && a.call(ke);
            } finally {
              if (l) throw l.error;
            }
          }
        }
      } catch (xn) {
        r = { error: xn };
      } finally {
        try {
          Q && !Q.done && (o = K.return) && o.call(K);
        } finally {
          if (r) throw r.error;
        }
      }
      return (
        Pn(X)
          ? X.bindVertexArray(null)
          : f.OES_vertex_array_object.bindVertexArrayOES(null),
        (x.vertexBufferDescriptors = T),
        (x.vao = G),
        (x.indexBufferFormat = N),
        (x.indexBufferType = L),
        (x.indexBufferCompByteSize = F),
        (x.program = I),
        x
      );
    }
    return (
      (e.prototype.destroy = function () {
        t.prototype.destroy.call(this),
          this.device.currentBoundVAO === this.vao &&
            (Pn(this.device.gl)
              ? (this.device.gl.bindVertexArray(null),
                this.device.gl.deleteVertexArray(this.vao))
              : (this.device.OES_vertex_array_object.bindVertexArrayOES(null),
                this.device.OES_vertex_array_object.deleteVertexArrayOES(
                  this.vao
                )),
            (this.device.currentBoundVAO = null));
      }),
      e
    );
  })(fc),
  W_ = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = n.descriptor,
        a = n.fake,
        h = t.call(this, { id: r, device: o }) || this;
      (h.type = Jr.Texture),
        (l = da(
          { dimension: Ur.TEXTURE_2D, depthOrArrayLayers: 1, mipLevelCount: 1 },
          l
        ));
      var f = h.device.gl,
        v,
        E,
        x = h.clampmipLevelCount(l);
      if (
        ((h.immutable = l.usage === vs.RENDER_TARGET),
        (h.pixelStore = l.pixelStore),
        (h.format = l.format),
        (h.dimension = l.dimension),
        (h.formatKind = sA(l.format)),
        (h.width = l.width),
        (h.height = l.height),
        (h.depthOrArrayLayers = l.depthOrArrayLayers),
        (h.mipmaps = x >= 1),
        !a)
      ) {
        E = h.device.ensureResourceExists(f.createTexture());
        var T = h.device.translateTextureType(l.format),
          N = h.device.translateTextureInternalFormat(l.format);
        if (
          (h.device.setActiveTexture(f.TEXTURE0),
          (h.device.currentTextures[0] = null),
          h.preprocessImage(),
          l.dimension === Ur.TEXTURE_2D)
        ) {
          if (((v = xe.TEXTURE_2D), f.bindTexture(v, E), h.immutable))
            if (Pn(f)) f.texStorage2D(v, x, N, l.width, l.height);
            else {
              var I = (N === xe.DEPTH_COMPONENT || h.isNPOT(), 0);
              ((h.format === ze.D32F || h.format === ze.D24_S8) &&
                !Pn(f) &&
                !o.WEBGL_depth_texture) ||
                (f.texImage2D(v, I, N, l.width, l.height, 0, N, T, null),
                h.mipmaps &&
                  ((h.mipmaps = !1),
                  f.texParameteri(
                    xe.TEXTURE_2D,
                    xe.TEXTURE_MIN_FILTER,
                    xe.LINEAR
                  ),
                  f.texParameteri(
                    xe.TEXTURE_2D,
                    xe.TEXTURE_WRAP_S,
                    xe.CLAMP_TO_EDGE
                  ),
                  f.texParameteri(
                    xe.TEXTURE_2D,
                    xe.TEXTURE_WRAP_T,
                    xe.CLAMP_TO_EDGE
                  )));
            }
          vr(l.depthOrArrayLayers === 1);
        } else if (l.dimension === Ur.TEXTURE_2D_ARRAY)
          (v = xe.TEXTURE_2D_ARRAY),
            f.bindTexture(v, E),
            h.immutable &&
              Pn(f) &&
              f.texStorage3D(v, x, N, l.width, l.height, l.depthOrArrayLayers);
        else if (l.dimension === Ur.TEXTURE_3D)
          (v = xe.TEXTURE_3D),
            f.bindTexture(v, E),
            h.immutable &&
              Pn(f) &&
              f.texStorage3D(v, x, N, l.width, l.height, l.depthOrArrayLayers);
        else if (l.dimension === Ur.TEXTURE_CUBE_MAP)
          (v = xe.TEXTURE_CUBE_MAP),
            f.bindTexture(v, E),
            h.immutable && Pn(f) && f.texStorage2D(v, x, N, l.width, l.height),
            vr(l.depthOrArrayLayers === 6);
        else throw new Error("whoops");
      }
      return (h.gl_texture = E), (h.gl_target = v), (h.mipLevelCount = x), h;
    }
    return (
      (e.prototype.setImageData = function (n, r) {
        r === void 0 && (r = 0);
        var o = this.device.gl;
        mA(this.format);
        var l =
            this.gl_target === xe.TEXTURE_3D ||
            this.gl_target === xe.TEXTURE_2D_ARRAY,
          a = this.gl_target === xe.TEXTURE_CUBE_MAP,
          h = cW(n[0]);
        this.device.setActiveTexture(o.TEXTURE0),
          (this.device.currentTextures[0] = null);
        var f = n[0],
          v,
          E;
        h
          ? ((v = this.width), (E = this.height))
          : ((v = f.width),
            (E = f.height),
            (this.width = v),
            (this.height = E)),
          o.bindTexture(this.gl_target, this.gl_texture);
        var x = this.device.translateTextureFormat(this.format),
          T = Pn(o)
            ? this.device.translateInternalTextureFormat(this.format)
            : x,
          N = this.device.translateTextureType(this.format);
        this.preprocessImage();
        for (var I = 0; I < this.depthOrArrayLayers; I++) {
          var L = n[I],
            F = this.gl_target;
          a && (F = xe.TEXTURE_CUBE_MAP_POSITIVE_X + (I % 6)),
            this.immutable
              ? o.texSubImage2D(F, r, 0, 0, v, E, x, N, L)
              : Pn(o)
              ? l
                ? o.texImage3D(
                    F,
                    r,
                    T,
                    v,
                    E,
                    this.depthOrArrayLayers,
                    0,
                    x,
                    N,
                    L
                  )
                : o.texImage2D(F, r, T, v, E, 0, x, N, L)
              : h
              ? o.texImage2D(F, r, x, v, E, 0, x, N, L)
              : o.texImage2D(F, r, x, x, N, L);
        }
        this.mipmaps && this.generateMipmap(l);
      }),
      (e.prototype.destroy = function () {
        t.prototype.destroy.call(this), this.device.gl.deleteTexture(sp(this));
      }),
      (e.prototype.clampmipLevelCount = function (n) {
        if (n.dimension === Ur.TEXTURE_2D_ARRAY && n.depthOrArrayLayers > 1) {
          var r = Eu(n.format);
          if (r === At.BC1)
            for (
              var o = n.width, l = n.height, a = 0;
              a < n.mipLevelCount;
              a++
            ) {
              if (o <= 2 || l <= 2) return a - 1;
              (o = Math.max((o / 2) | 0, 1)), (l = Math.max((l / 2) | 0, 1));
            }
        }
        return n.mipLevelCount;
      }),
      (e.prototype.preprocessImage = function () {
        var n = this.device.gl;
        this.pixelStore &&
          (this.pixelStore.unpackFlipY &&
            n.pixelStorei(xe.UNPACK_FLIP_Y_WEBGL, !0),
          this.pixelStore.packAlignment &&
            n.pixelStorei(xe.PACK_ALIGNMENT, this.pixelStore.packAlignment),
          this.pixelStore.unpackAlignment &&
            n.pixelStorei(
              xe.UNPACK_ALIGNMENT,
              this.pixelStore.unpackAlignment
            ));
      }),
      (e.prototype.generateMipmap = function (n) {
        n === void 0 && (n = !1);
        var r = this.device.gl;
        return !Pn(r) && this.isNPOT()
          ? this
          : (this.gl_texture &&
              this.gl_target &&
              (r.bindTexture(this.gl_target, this.gl_texture),
              n
                ? (r.texParameteri(this.gl_target, xe.TEXTURE_BASE_LEVEL, 0),
                  r.texParameteri(
                    this.gl_target,
                    xe.TEXTURE_MAX_LEVEL,
                    Math.log2(this.width)
                  ),
                  r.texParameteri(
                    this.gl_target,
                    xe.TEXTURE_MIN_FILTER,
                    xe.LINEAR_MIPMAP_LINEAR
                  ),
                  r.texParameteri(
                    this.gl_target,
                    xe.TEXTURE_MAG_FILTER,
                    xe.LINEAR
                  ))
                : r.texParameteri(
                    xe.TEXTURE_2D,
                    xe.TEXTURE_MIN_FILTER,
                    xe.NEAREST_MIPMAP_LINEAR
                  ),
              r.generateMipmap(this.gl_target),
              r.bindTexture(this.gl_target, null)),
            this);
      }),
      (e.prototype.isNPOT = function () {
        var n = this.device.gl;
        return Pn(n) ? !1 : !ev(this.width) || !ev(this.height);
      }),
      e
    );
  })(fc),
  AW = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = n.descriptor,
        a = t.call(this, { id: r, device: o }) || this;
      (a.type = Jr.RenderTarget),
        (a.gl_renderbuffer = null),
        (a.texture = null);
      var h = a.device.gl,
        f = l.format,
        v = l.width,
        E = l.height,
        x = l.sampleCount,
        T = x === void 0 ? 1 : x,
        N = l.texture,
        I = !1;
      if (
        ((f === ze.D32F || f === ze.D24_S8) &&
          N &&
          !Pn(h) &&
          !o.WEBGL_depth_texture &&
          (N.destroy(), (a.texture = null), (I = !0)),
        !I && N)
      )
        a.texture = N;
      else {
        (a.gl_renderbuffer = a.device.ensureResourceExists(
          h.createRenderbuffer()
        )),
          h.bindRenderbuffer(h.RENDERBUFFER, a.gl_renderbuffer);
        var L = a.device.translateTextureInternalFormat(f, !0);
        Pn(h) && T > 1
          ? h.renderbufferStorageMultisample(xe.RENDERBUFFER, T, L, v, E)
          : h.renderbufferStorage(xe.RENDERBUFFER, L, v, E);
      }
      return (
        (a.format = f), (a.width = v), (a.height = E), (a.sampleCount = T), a
      );
    }
    return (
      (e.prototype.destroy = function () {
        t.prototype.destroy.call(this),
          this.gl_renderbuffer !== null &&
            this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),
          this.texture && this.texture.destroy();
      }),
      e
    );
  })(fc),
  el;
(function (t) {
  (t[(t.NeedsCompile = 0)] = "NeedsCompile"),
    (t[(t.Compiling = 1)] = "Compiling"),
    (t[(t.NeedsBind = 2)] = "NeedsBind"),
    (t[(t.ReadyToUse = 3)] = "ReadyToUse");
})(el || (el = {}));
var TW = (function (t) {
    ga(e, t);
    function e(n, r) {
      var o = n.id,
        l = n.device,
        a = n.descriptor,
        h = t.call(this, { id: o, device: l }) || this;
      (h.rawVertexGLSL = r),
        (h.type = Jr.Program),
        (h.uniformSetters = {}),
        (h.attributes = []);
      var f = h.device.gl;
      return (
        (h.descriptor = a),
        (h.gl_program = h.device.ensureResourceExists(f.createProgram())),
        (h.gl_shader_vert = null),
        (h.gl_shader_frag = null),
        (h.compileState = el.NeedsCompile),
        h.tryCompileProgram(),
        h
      );
    }
    return (
      (e.prototype.destroy = function () {
        t.prototype.destroy.call(this),
          this.device.gl.deleteProgram(this.gl_program),
          this.device.gl.deleteShader(this.gl_shader_vert),
          this.device.gl.deleteShader(this.gl_shader_frag);
      }),
      (e.prototype.tryCompileProgram = function () {
        vr(this.compileState === el.NeedsCompile);
        var n = this.descriptor,
          r = n.vertex,
          o = n.fragment,
          l = this.device.gl;
        r != null &&
          r.glsl &&
          o != null &&
          o.glsl &&
          ((this.gl_shader_vert = this.compileShader(
            r.postprocess ? r.postprocess(r.glsl) : r.glsl,
            l.VERTEX_SHADER
          )),
          (this.gl_shader_frag = this.compileShader(
            o.postprocess ? o.postprocess(o.glsl) : o.glsl,
            l.FRAGMENT_SHADER
          )),
          l.attachShader(this.gl_program, this.gl_shader_vert),
          l.attachShader(this.gl_program, this.gl_shader_frag),
          l.linkProgram(this.gl_program),
          (this.compileState = el.Compiling),
          Pn(l) ||
            (this.readUniformLocationsFromLinkedProgram(),
            this.readAttributesFromLinkedProgram()));
      }),
      (e.prototype.readAttributesFromLinkedProgram = function () {
        for (
          var n,
            r = this.device.gl,
            o = r.getProgramParameter(this.gl_program, r.ACTIVE_ATTRIBUTES),
            l = uW(this.descriptor.vertex.glsl),
            a = dW(this.rawVertexGLSL, l),
            h = function (E) {
              var x = r.getActiveAttrib(f.gl_program, E),
                T = x.name,
                N = x.type,
                I = x.size,
                L = r.getAttribLocation(f.gl_program, T),
                F =
                  (n = a.find(function (X) {
                    return X.name === T;
                  })) === null || n === void 0
                    ? void 0
                    : n.location;
              L >= 0 &&
                !hc(F) &&
                (f.attributes[F] = { name: T, location: L, type: N, size: I });
            },
            f = this,
            v = 0;
          v < o;
          v++
        )
          h(v);
      }),
      (e.prototype.readUniformLocationsFromLinkedProgram = function () {
        for (
          var n = this.device.gl,
            r = n.getProgramParameter(this.gl_program, n.ACTIVE_UNIFORMS),
            o = 0;
          o < r;
          o++
        ) {
          var l = n.getActiveUniform(this.gl_program, o),
            a = rW(l.name).name,
            h = n.getUniformLocation(this.gl_program, a);
          if (((this.uniformSetters[a] = ib(n, h, l)), l && l.size > 1))
            for (var f = 0; f < l.size; f++)
              (h = n.getUniformLocation(
                this.gl_program,
                "".concat(a, "[").concat(f, "]")
              )),
                (this.uniformSetters["".concat(a, "[").concat(f, "]")] = ib(
                  n,
                  h,
                  l
                ));
        }
      }),
      (e.prototype.compileShader = function (n, r) {
        var o = this.device.gl,
          l = this.device.ensureResourceExists(o.createShader(r));
        return o.shaderSource(l, n), o.compileShader(l), l;
      }),
      (e.prototype.setUniformsLegacy = function (n) {
        n === void 0 && (n = {});
        var r = this.device.gl;
        if (!Pn(r)) {
          var o = !1;
          for (var l in n) {
            o || (r.useProgram(this.gl_program), (o = !0));
            var a = n[l],
              h = this.uniformSetters[l];
            if (h) {
              var f = a;
              f instanceof W_ && (f = f.textureIndex), h(f);
            }
          }
        }
        return this;
      }),
      e
    );
  })(fc),
  SW = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = n.descriptor,
        a = t.call(this, { id: r, device: o }) || this;
      a.type = Jr.QueryPool;
      var h = a.device.gl;
      if (Pn(h)) {
        var f = l.elemCount,
          v = l.type;
        (a.gl_query = Lj(f, function () {
          return a.device.ensureResourceExists(h.createQuery());
        })),
          (a.gl_query_type = yW(v));
      }
      return a;
    }
    return (
      (e.prototype.queryResultOcclusion = function (n) {
        var r = this.device.gl;
        if (Pn(r)) {
          var o = this.gl_query[n];
          return r.getQueryParameter(o, r.QUERY_RESULT_AVAILABLE)
            ? !!r.getQueryParameter(o, r.QUERY_RESULT)
            : null;
        }
        return null;
      }),
      (e.prototype.destroy = function () {
        t.prototype.destroy.call(this);
        var n = this.device.gl;
        if (Pn(n))
          for (var r = 0; r < this.gl_query.length; r++)
            n.deleteQuery(this.gl_query[r]);
      }),
      e
    );
  })(fc),
  wW = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = t.call(this, { id: r, device: o }) || this;
      return (l.type = Jr.Readback), (l.gl_pbo = null), (l.gl_sync = null), l;
    }
    return (
      (e.prototype.clientWaitAsync = function (n, r, o) {
        r === void 0 && (r = 0), o === void 0 && (o = 10);
        var l = this.device.gl;
        return new Promise(function (a, h) {
          function f() {
            var v = l.clientWaitSync(n, r, 0);
            if (v == l.WAIT_FAILED) {
              h();
              return;
            }
            if (v == l.TIMEOUT_EXPIRED) {
              setTimeout(f, Rj(o, 0, l.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));
              return;
            }
            a();
          }
          f();
        });
      }),
      (e.prototype.getBufferSubDataAsync = function (n, r, o, l, a, h) {
        return xu(this, void 0, void 0, function () {
          var f;
          return bp(this, function (v) {
            switch (v.label) {
              case 0:
                return (
                  (f = this.device.gl),
                  Pn(f)
                    ? ((this.gl_sync = f.fenceSync(
                        f.SYNC_GPU_COMMANDS_COMPLETE,
                        0
                      )),
                      f.flush(),
                      [4, this.clientWaitAsync(this.gl_sync, 0, 10)])
                    : [3, 2]
                );
              case 1:
                return (
                  v.sent(),
                  f.bindBuffer(n, r),
                  f.getBufferSubData(n, o, l, a, h),
                  f.bindBuffer(n, null),
                  [2, l]
                );
              case 2:
                return [2];
            }
          });
        });
      }),
      (e.prototype.readTexture = function (n, r, o, l, a, h, f, v) {
        return (
          f === void 0 && (f = 0),
          v === void 0 && (v = h.byteLength || 0),
          xu(this, void 0, void 0, function () {
            var E, x, T, N, I;
            return bp(this, function (L) {
              return (
                (E = this.device.gl),
                (x = n),
                (T = this.device.translateTextureFormat(x.format)),
                (N = this.device.translateTextureType(x.format)),
                (I = Mj(x.format)),
                Pn(E)
                  ? ((this.gl_pbo = this.device.ensureResourceExists(
                      E.createBuffer()
                    )),
                    E.bindBuffer(E.PIXEL_PACK_BUFFER, this.gl_pbo),
                    E.bufferData(E.PIXEL_PACK_BUFFER, v, E.STREAM_READ),
                    E.bindBuffer(E.PIXEL_PACK_BUFFER, null),
                    E.bindFramebuffer(
                      xe.READ_FRAMEBUFFER,
                      this.device.readbackFramebuffer
                    ),
                    E.framebufferTexture2D(
                      xe.READ_FRAMEBUFFER,
                      xe.COLOR_ATTACHMENT0,
                      xe.TEXTURE_2D,
                      x.gl_texture,
                      0
                    ),
                    E.bindBuffer(E.PIXEL_PACK_BUFFER, this.gl_pbo),
                    E.readPixels(r, o, l, a, T, N, f * I),
                    E.bindBuffer(E.PIXEL_PACK_BUFFER, null),
                    [
                      2,
                      this.getBufferSubDataAsync(
                        E.PIXEL_PACK_BUFFER,
                        this.gl_pbo,
                        0,
                        h,
                        f,
                        0
                      ),
                    ])
                  : [2, this.readTextureSync(n, r, o, l, a, h, f, v)]
              );
            });
          })
        );
      }),
      (e.prototype.readTextureSync = function (n, r, o, l, a, h, f, v) {
        v === void 0 && (v = h.byteLength || 0);
        var E = this.device.gl,
          x = n,
          T = this.device.translateTextureType(x.format);
        return (
          E.bindFramebuffer(xe.FRAMEBUFFER, this.device.readbackFramebuffer),
          E.framebufferTexture2D(
            xe.FRAMEBUFFER,
            xe.COLOR_ATTACHMENT0,
            xe.TEXTURE_2D,
            x.gl_texture,
            0
          ),
          E.pixelStorei(E.PACK_ALIGNMENT, 4),
          E.readPixels(r, o, l, a, E.RGBA, T, h),
          h
        );
      }),
      (e.prototype.readBuffer = function (n, r, o, l, a) {
        return xu(this, void 0, void 0, function () {
          var h;
          return bp(this, function (f) {
            return (
              (h = this.device.gl),
              Pn(h)
                ? [
                    2,
                    this.getBufferSubDataAsync(
                      h.ARRAY_BUFFER,
                      Ep(n, r),
                      r,
                      o,
                      l,
                      a
                    ),
                  ]
                : [2, Promise.reject()]
            );
          });
        });
      }),
      (e.prototype.destroy = function () {
        t.prototype.destroy.call(this),
          Pn(this.device.gl) &&
            (this.gl_sync !== null && this.device.gl.deleteSync(this.gl_sync),
            this.gl_pbo !== null && this.device.gl.deleteBuffer(this.gl_pbo));
      }),
      e
    );
  })(fc),
  CW = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = n.descriptor,
        a,
        h,
        f = t.call(this, { id: r, device: o }) || this;
      return (
        (f.type = Jr.RenderPipeline),
        (f.drawMode = fW(
          (a = l.topology) !== null && a !== void 0 ? a : $a.TRIANGLES
        )),
        (f.program = l.program),
        (f.inputLayout = l.inputLayout),
        (f.megaState = da(da({}, Lp(Dp)), l.megaStateDescriptor)),
        (f.colorAttachmentFormats = l.colorAttachmentFormats.slice()),
        (f.depthStencilAttachmentFormat = l.depthStencilAttachmentFormat),
        (f.sampleCount = (h = l.sampleCount) !== null && h !== void 0 ? h : 1),
        f
      );
    }
    return e;
  })(fc),
  NW = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = n.descriptor,
        a = t.call(this, { id: r, device: o }) || this;
      return (a.type = Jr.ComputePipeline), (a.descriptor = l), a;
    }
    return e;
  })(fc),
  RW = (function () {
    function t() {
      (this.liveObjects = new Set()),
        (this.creationStacks = new Map()),
        (this.deletionStacks = new Map());
    }
    return (
      (t.prototype.trackResourceCreated = function (e) {
        this.creationStacks.set(e, new Error().stack), this.liveObjects.add(e);
      }),
      (t.prototype.trackResourceDestroyed = function (e) {
        this.deletionStacks.has(e) &&
          console.warn(
            "Object double freed:",
            e,
            `

Creation stack: `,
            this.creationStacks.get(e),
            `

Deletion stack: `,
            this.deletionStacks.get(e),
            `

This stack: `,
            new Error().stack
          ),
          this.deletionStacks.set(e, new Error().stack),
          this.liveObjects.delete(e);
      }),
      (t.prototype.checkForLeaks = function () {
        var e, n;
        try {
          for (
            var r = ah(this.liveObjects.values()), o = r.next();
            !o.done;
            o = r.next()
          ) {
            var l = o.value;
            console.warn(
              "Object leaked:",
              l,
              "Creation stack:",
              this.creationStacks.get(l)
            );
          }
        } catch (a) {
          e = { error: a };
        } finally {
          try {
            o && !o.done && (n = r.return) && n.call(r);
          } finally {
            if (e) throw e.error;
          }
        }
      }),
      (t.prototype.setResourceLeakCheck = function (e, n) {
        n ? this.liveObjects.add(e) : this.liveObjects.delete(e);
      }),
      t
    );
  })(),
  IW = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = n.descriptor,
        a,
        h,
        f = t.call(this, { id: r, device: o }) || this;
      f.type = Jr.Sampler;
      var v = f.device.gl;
      if (Pn(v)) {
        var E = f.device.ensureResourceExists(v.createSampler());
        v.samplerParameteri(E, xe.TEXTURE_WRAP_S, Uf(l.addressModeU)),
          v.samplerParameteri(E, xe.TEXTURE_WRAP_T, Uf(l.addressModeV)),
          v.samplerParameteri(
            E,
            xe.TEXTURE_WRAP_R,
            Uf(
              (a = l.addressModeW) !== null && a !== void 0 ? a : l.addressModeU
            )
          ),
          v.samplerParameteri(
            E,
            xe.TEXTURE_MIN_FILTER,
            $m(l.minFilter, l.mipmapFilter)
          ),
          v.samplerParameteri(
            E,
            xe.TEXTURE_MAG_FILTER,
            $m(l.magFilter, vo.NO_MIP)
          ),
          l.lodMinClamp !== void 0 &&
            v.samplerParameterf(E, xe.TEXTURE_MIN_LOD, l.lodMinClamp),
          l.lodMaxClamp !== void 0 &&
            v.samplerParameterf(E, xe.TEXTURE_MAX_LOD, l.lodMaxClamp),
          l.compareFunction !== void 0 &&
            (v.samplerParameteri(
              E,
              v.TEXTURE_COMPARE_MODE,
              v.COMPARE_REF_TO_TEXTURE
            ),
            v.samplerParameteri(E, v.TEXTURE_COMPARE_FUNC, l.compareFunction));
        var x = (h = l.maxAnisotropy) !== null && h !== void 0 ? h : 1;
        x > 1 &&
          f.device.EXT_texture_filter_anisotropic !== null &&
          (vr(
            l.minFilter === Na.BILINEAR &&
              l.magFilter === Na.BILINEAR &&
              l.mipmapFilter === vo.LINEAR
          ),
          v.samplerParameterf(
            E,
            f.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,
            x
          )),
          (f.gl_sampler = E);
      } else f.descriptor = l;
      return f;
    }
    return (
      (e.prototype.setTextureParameters = function (n, r, o) {
        var l,
          a = this.device.gl,
          h = this.descriptor;
        this.isNPOT(r, o)
          ? a.texParameteri(xe.TEXTURE_2D, xe.TEXTURE_MIN_FILTER, xe.LINEAR)
          : a.texParameteri(
              n,
              xe.TEXTURE_MIN_FILTER,
              $m(h.minFilter, h.mipmapFilter)
            ),
          a.texParameteri(xe.TEXTURE_2D, xe.TEXTURE_WRAP_S, Uf(h.addressModeU)),
          a.texParameteri(xe.TEXTURE_2D, xe.TEXTURE_WRAP_T, Uf(h.addressModeV)),
          a.texParameteri(n, xe.TEXTURE_MAG_FILTER, $m(h.magFilter, vo.NO_MIP));
        var f = (l = h.maxAnisotropy) !== null && l !== void 0 ? l : 1;
        f > 1 &&
          this.device.EXT_texture_filter_anisotropic !== null &&
          (vr(
            h.minFilter === Na.BILINEAR &&
              h.magFilter === Na.BILINEAR &&
              h.mipmapFilter === vo.LINEAR
          ),
          a.texParameteri(
            n,
            this.device.EXT_texture_filter_anisotropic
              .TEXTURE_MAX_ANISOTROPY_EXT,
            f
          ));
      }),
      (e.prototype.destroy = function () {
        t.prototype.destroy.call(this),
          Pn(this.device.gl) && this.device.gl.deleteSampler(j_(this));
      }),
      (e.prototype.isNPOT = function (n, r) {
        return !ev(n) || !ev(r);
      }),
      e
    );
  })(fc),
  MW = (function () {
    function t() {}
    return (
      (t.prototype.dispatchWorkgroups = function (e, n, r) {}),
      (t.prototype.dispatchWorkgroupsIndirect = function (e, n) {}),
      (t.prototype.setPipeline = function (e) {}),
      (t.prototype.setBindings = function (e) {}),
      (t.prototype.pushDebugGroup = function (e) {}),
      (t.prototype.popDebugGroup = function () {}),
      (t.prototype.insertDebugMarker = function (e) {}),
      t
    );
  })(),
  PW = (function (t) {
    ga(e, t);
    function e() {
      var n = (t !== null && t.apply(this, arguments)) || this;
      return (n.type = Jr.RenderBundle), (n.commands = []), n;
    }
    return (
      (e.prototype.push = function (n) {
        this.commands.push(n);
      }),
      (e.prototype.replay = function () {
        this.commands.forEach(function (n) {
          return n();
        });
      }),
      e
    );
  })(fc),
  cb = 65536,
  OW = /uniform(?:\s+)(\w+)(?:\s?){([^]*?)}/g,
  LW = (function () {
    function t(e, n) {
      n === void 0 && (n = {}),
        (this.shaderDebug = !1),
        (this.OES_vertex_array_object = null),
        (this.ANGLE_instanced_arrays = null),
        (this.OES_texture_float = null),
        (this.OES_draw_buffers_indexed = null),
        (this.WEBGL_draw_buffers = null),
        (this.WEBGL_depth_texture = null),
        (this.WEBGL_color_buffer_float = null),
        (this.EXT_color_buffer_half_float = null),
        (this.WEBGL_compressed_texture_s3tc = null),
        (this.WEBGL_compressed_texture_s3tc_srgb = null),
        (this.EXT_texture_compression_rgtc = null),
        (this.EXT_texture_filter_anisotropic = null),
        (this.KHR_parallel_shader_compile = null),
        (this.EXT_texture_norm16 = null),
        (this.EXT_color_buffer_float = null),
        (this.OES_texture_float_linear = null),
        (this.OES_texture_half_float_linear = null),
        (this.scTexture = null),
        (this.scPlatformFramebuffer = null),
        (this.currentActiveTexture = null),
        (this.currentBoundVAO = null),
        (this.currentProgram = null),
        (this.resourceCreationTracker = null),
        (this.resourceUniqueId = 0),
        (this.currentColorAttachments = []),
        (this.currentColorAttachmentLevels = []),
        (this.currentColorResolveTos = []),
        (this.currentColorResolveToLevels = []),
        (this.currentSampleCount = -1),
        (this.currentIndexBufferByteOffset = null),
        (this.currentMegaState = Lp(Dp)),
        (this.currentSamplers = []),
        (this.currentTextures = []),
        (this.currentUniformBuffers = []),
        (this.currentUniformBufferByteOffsets = []),
        (this.currentUniformBufferByteSizes = []),
        (this.currentScissorEnabled = !1),
        (this.currentStencilRef = null),
        (this.currentRenderPassDescriptor = null),
        (this.currentRenderPassDescriptorStack = []),
        (this.debugGroupStack = []),
        (this.resolveColorAttachmentsChanged = !1),
        (this.resolveDepthStencilAttachmentsChanged = !1),
        (this.explicitBindingLocations = !1),
        (this.separateSamplerTextures = !1),
        (this.viewportOrigin = Uc.LOWER_LEFT),
        (this.clipSpaceNearZ = Pp.NEGATIVE_ONE),
        (this.supportMRT = !1),
        (this.inBlitRenderPass = !1),
        (this.supportedSampleCounts = []),
        (this.occlusionQueriesRecommended = !1),
        (this.computeShadersSupported = !1),
        (this.gl = e),
        (this.contextAttributes = $0(e.getContextAttributes())),
        Pn(e)
          ? ((this.EXT_texture_norm16 = e.getExtension("EXT_texture_norm16")),
            (this.EXT_color_buffer_float = e.getExtension(
              "EXT_color_buffer_float"
            )))
          : ((this.OES_vertex_array_object = e.getExtension(
              "OES_vertex_array_object"
            )),
            (this.ANGLE_instanced_arrays = e.getExtension(
              "ANGLE_instanced_arrays"
            )),
            (this.OES_texture_float = e.getExtension("OES_texture_float")),
            (this.WEBGL_draw_buffers = e.getExtension("WEBGL_draw_buffers")),
            (this.WEBGL_depth_texture = e.getExtension("WEBGL_depth_texture")),
            (this.WEBGL_color_buffer_float = e.getExtension(
              "WEBGL_color_buffer_float"
            )),
            (this.EXT_color_buffer_half_float = e.getExtension(
              "EXT_color_buffer_half_float"
            )),
            e.getExtension("EXT_frag_depth"),
            e.getExtension("OES_element_index_uint"),
            e.getExtension("OES_standard_derivatives")),
        (this.WEBGL_compressed_texture_s3tc = e.getExtension(
          "WEBGL_compressed_texture_s3tc"
        )),
        (this.WEBGL_compressed_texture_s3tc_srgb = e.getExtension(
          "WEBGL_compressed_texture_s3tc_srgb"
        )),
        (this.EXT_texture_compression_rgtc = e.getExtension(
          "EXT_texture_compression_rgtc"
        )),
        (this.EXT_texture_filter_anisotropic = e.getExtension(
          "EXT_texture_filter_anisotropic"
        )),
        (this.EXT_texture_norm16 = e.getExtension("EXT_texture_norm16")),
        (this.OES_texture_float_linear = e.getExtension(
          "OES_texture_float_linear"
        )),
        (this.OES_texture_half_float_linear = e.getExtension(
          "OES_texture_half_float_linear"
        )),
        (this.KHR_parallel_shader_compile = e.getExtension(
          "KHR_parallel_shader_compile"
        )),
        Pn(e)
          ? ((this.platformString = "WebGL2"),
            (this.glslVersion = "#version 300 es"))
          : ((this.platformString = "WebGL1"),
            (this.glslVersion = "#version 100")),
        (this.scTexture = new W_({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: {
            width: 0,
            height: 0,
            depthOrArrayLayers: 1,
            dimension: Ur.TEXTURE_2D,
            mipLevelCount: 1,
            usage: vs.RENDER_TARGET,
            format:
              this.contextAttributes.alpha === !1
                ? ze.U8_RGB_RT
                : ze.U8_RGBA_RT,
          },
          fake: !0,
        })),
        (this.scTexture.formatKind = pa.Float),
        (this.scTexture.gl_target = null),
        (this.scTexture.gl_texture = null),
        (this.resolveColorReadFramebuffer = this.ensureResourceExists(
          e.createFramebuffer()
        )),
        (this.resolveColorDrawFramebuffer = this.ensureResourceExists(
          e.createFramebuffer()
        )),
        (this.resolveDepthStencilReadFramebuffer = this.ensureResourceExists(
          e.createFramebuffer()
        )),
        (this.resolveDepthStencilDrawFramebuffer = this.ensureResourceExists(
          e.createFramebuffer()
        )),
        (this.renderPassDrawFramebuffer = this.ensureResourceExists(
          e.createFramebuffer()
        )),
        (this.readbackFramebuffer = this.ensureResourceExists(
          e.createFramebuffer()
        )),
        (this.fallbackTexture2D = this.createFallbackTexture(
          Ur.TEXTURE_2D,
          pa.Float
        )),
        (this.fallbackTexture2DDepth = this.createFallbackTexture(
          Ur.TEXTURE_2D,
          pa.Depth
        )),
        (this.fallbackVertexBuffer = this.createBuffer({
          viewOrSize: 1,
          usage: wi.VERTEX,
          hint: zc.STATIC,
        })),
        Pn(e) &&
          ((this.fallbackTexture2DArray = this.createFallbackTexture(
            Ur.TEXTURE_2D_ARRAY,
            pa.Float
          )),
          (this.fallbackTexture3D = this.createFallbackTexture(
            Ur.TEXTURE_3D,
            pa.Float
          )),
          (this.fallbackTextureCube = this.createFallbackTexture(
            Ur.TEXTURE_CUBE_MAP,
            pa.Float
          ))),
        (this.currentMegaState.depthCompare = ui.LESS),
        (this.currentMegaState.depthWrite = !1),
        (this.currentMegaState.attachmentsState[0].channelWriteMask = No.ALL),
        e.enable(e.DEPTH_TEST),
        e.enable(e.STENCIL_TEST),
        this.checkLimits(),
        n.shaderDebug && (this.shaderDebug = !0),
        n.trackResources && (this.resourceCreationTracker = new RW());
    }
    return (
      (t.prototype.destroy = function () {
        this.blitBindings && this.blitBindings.destroy(),
          this.blitInputLayout && this.blitInputLayout.destroy(),
          this.blitRenderPipeline && this.blitRenderPipeline.destroy(),
          this.blitVertexBuffer && this.blitVertexBuffer.destroy(),
          this.blitProgram && this.blitProgram.destroy();
      }),
      (t.prototype.createFallbackTexture = function (e, n) {
        var r = e === Ur.TEXTURE_CUBE_MAP ? 6 : 1,
          o = n === pa.Depth ? ze.D32F : ze.U8_RGBA_NORM,
          l = this.createTexture({
            dimension: e,
            format: o,
            usage: vs.SAMPLED,
            width: 1,
            height: 1,
            depthOrArrayLayers: r,
            mipLevelCount: 1,
          });
        return n === pa.Float && l.setImageData([new Uint8Array(4 * r)]), sp(l);
      }),
      (t.prototype.getNextUniqueId = function () {
        return ++this.resourceUniqueId;
      }),
      (t.prototype.checkLimits = function () {
        var e = this.gl;
        if (
          ((this.maxVertexAttribs = e.getParameter(xe.MAX_VERTEX_ATTRIBS)),
          Pn(e))
        ) {
          (this.uniformBufferMaxPageByteSize = Math.min(
            e.getParameter(xe.MAX_UNIFORM_BLOCK_SIZE),
            cb
          )),
            (this.uniformBufferWordAlignment =
              e.getParameter(e.UNIFORM_BUFFER_OFFSET_ALIGNMENT) / 4);
          var n = e.getInternalformatParameter(
            e.RENDERBUFFER,
            e.DEPTH32F_STENCIL8,
            e.SAMPLES
          );
          (this.supportedSampleCounts = n ? Ff([], Lc(n), !1) : []),
            (this.occlusionQueriesRecommended = !0);
        } else
          (this.uniformBufferWordAlignment = 64),
            (this.uniformBufferMaxPageByteSize = cb);
        (this.uniformBufferMaxPageWordSize =
          this.uniformBufferMaxPageByteSize / 4),
          this.supportedSampleCounts.includes(1) ||
            this.supportedSampleCounts.push(1),
          this.supportedSampleCounts.sort(function (r, o) {
            return r - o;
          });
      }),
      (t.prototype.configureSwapChain = function (e, n, r) {
        var o = this.scTexture;
        (o.width = e), (o.height = n), (this.scPlatformFramebuffer = Oj(r));
      }),
      (t.prototype.getDevice = function () {
        return this;
      }),
      (t.prototype.getCanvas = function () {
        return this.gl.canvas;
      }),
      (t.prototype.getOnscreenTexture = function () {
        return this.scTexture;
      }),
      (t.prototype.beginFrame = function () {}),
      (t.prototype.endFrame = function () {}),
      (t.prototype.translateTextureInternalFormat = function (e, n) {
        switch ((n === void 0 && (n = !1), e)) {
          case ze.ALPHA:
            return xe.ALPHA;
          case ze.U8_LUMINANCE:
          case ze.F16_LUMINANCE:
          case ze.F32_LUMINANCE:
            return xe.LUMINANCE;
          case ze.F16_R:
            return xe.R16F;
          case ze.F16_RG:
            return xe.RG16F;
          case ze.F16_RGB:
            return xe.RGB16F;
          case ze.F16_RGBA:
            return xe.RGBA16F;
          case ze.F32_R:
            return xe.R32F;
          case ze.F32_RG:
            return xe.RG32F;
          case ze.F32_RGB:
            return xe.RGB32F;
          case ze.F32_RGBA:
            return Pn(this.gl)
              ? xe.RGBA32F
              : n
              ? this.WEBGL_color_buffer_float.RGBA32F_EXT
              : xe.RGBA;
          case ze.U8_R_NORM:
            return xe.R8;
          case ze.U8_RG_NORM:
            return xe.RG8;
          case ze.U8_RGB_NORM:
          case ze.U8_RGB_RT:
            return xe.RGB8;
          case ze.U8_RGB_SRGB:
            return xe.SRGB8;
          case ze.U8_RGBA_NORM:
          case ze.U8_RGBA_RT:
            return Pn(this.gl) ? xe.RGBA8 : n ? xe.RGBA4 : xe.RGBA;
          case ze.U8_RGBA:
            return xe.RGBA;
          case ze.U8_RGBA_SRGB:
          case ze.U8_RGBA_RT_SRGB:
            return xe.SRGB8_ALPHA8;
          case ze.U16_R:
            return xe.R16UI;
          case ze.U16_R_NORM:
            return this.EXT_texture_norm16.R16_EXT;
          case ze.U16_RG_NORM:
            return this.EXT_texture_norm16.RG16_EXT;
          case ze.U16_RGBA_NORM:
            return this.EXT_texture_norm16.RGBA16_EXT;
          case ze.U16_RGBA_5551:
            return xe.RGB5_A1;
          case ze.U16_RGB_565:
            return xe.RGB565;
          case ze.U32_R:
            return xe.R32UI;
          case ze.S8_RGBA_NORM:
            return xe.RGBA8_SNORM;
          case ze.S8_RG_NORM:
            return xe.RG8_SNORM;
          case ze.BC1:
            return this.WEBGL_compressed_texture_s3tc
              .COMPRESSED_RGBA_S3TC_DXT1_EXT;
          case ze.BC1_SRGB:
            return this.WEBGL_compressed_texture_s3tc_srgb
              .COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;
          case ze.BC2:
            return this.WEBGL_compressed_texture_s3tc
              .COMPRESSED_RGBA_S3TC_DXT3_EXT;
          case ze.BC2_SRGB:
            return this.WEBGL_compressed_texture_s3tc_srgb
              .COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;
          case ze.BC3:
            return this.WEBGL_compressed_texture_s3tc
              .COMPRESSED_RGBA_S3TC_DXT5_EXT;
          case ze.BC3_SRGB:
            return this.WEBGL_compressed_texture_s3tc_srgb
              .COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;
          case ze.BC4_UNORM:
            return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;
          case ze.BC4_SNORM:
            return this.EXT_texture_compression_rgtc
              .COMPRESSED_SIGNED_RED_RGTC1_EXT;
          case ze.BC5_UNORM:
            return this.EXT_texture_compression_rgtc
              .COMPRESSED_RED_GREEN_RGTC2_EXT;
          case ze.BC5_SNORM:
            return this.EXT_texture_compression_rgtc
              .COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;
          case ze.D32F_S8:
            return Pn(this.gl)
              ? xe.DEPTH32F_STENCIL8
              : this.WEBGL_depth_texture
              ? xe.DEPTH_STENCIL
              : xe.DEPTH_COMPONENT16;
          case ze.D24_S8:
            return Pn(this.gl)
              ? xe.DEPTH24_STENCIL8
              : this.WEBGL_depth_texture
              ? xe.DEPTH_STENCIL
              : xe.DEPTH_COMPONENT16;
          case ze.D32F:
            return Pn(this.gl)
              ? xe.DEPTH_COMPONENT32F
              : this.WEBGL_depth_texture
              ? xe.DEPTH_COMPONENT
              : xe.DEPTH_COMPONENT16;
          case ze.D24:
            return Pn(this.gl)
              ? xe.DEPTH_COMPONENT24
              : this.WEBGL_depth_texture
              ? xe.DEPTH_COMPONENT
              : xe.DEPTH_COMPONENT16;
          default:
            throw new Error("whoops");
        }
      }),
      (t.prototype.translateTextureType = function (e) {
        var n = Eu(e);
        switch (n) {
          case At.U8:
            return xe.UNSIGNED_BYTE;
          case At.U16:
            return xe.UNSIGNED_SHORT;
          case At.U32:
            return xe.UNSIGNED_INT;
          case At.S8:
            return xe.BYTE;
          case At.F16:
            return xe.HALF_FLOAT;
          case At.F32:
            return xe.FLOAT;
          case At.U16_PACKED_5551:
            return xe.UNSIGNED_SHORT_5_5_5_1;
          case At.D32F:
            return Pn(this.gl)
              ? xe.FLOAT
              : this.WEBGL_depth_texture
              ? xe.UNSIGNED_INT
              : xe.UNSIGNED_BYTE;
          case At.D24:
            return Pn(this.gl)
              ? xe.UNSIGNED_INT_24_8
              : this.WEBGL_depth_texture
              ? xe.UNSIGNED_SHORT
              : xe.UNSIGNED_BYTE;
          case At.D24S8:
            return Pn(this.gl)
              ? xe.UNSIGNED_INT_24_8
              : this.WEBGL_depth_texture
              ? xe.UNSIGNED_INT_24_8_WEBGL
              : xe.UNSIGNED_BYTE;
          case At.D32FS8:
            return xe.FLOAT_32_UNSIGNED_INT_24_8_REV;
          default:
            throw new Error("whoops");
        }
      }),
      (t.prototype.translateInternalTextureFormat = function (e) {
        switch (e) {
          case ze.F32_R:
            return xe.R32F;
          case ze.F32_RG:
            return xe.RG32F;
          case ze.F32_RGB:
            return xe.RGB32F;
          case ze.F32_RGBA:
            return xe.RGBA32F;
          case ze.F16_R:
            return xe.R16F;
          case ze.F16_RG:
            return xe.RG16F;
          case ze.F16_RGB:
            return xe.RGB16F;
          case ze.F16_RGBA:
            return xe.RGBA16F;
        }
        return this.translateTextureFormat(e);
      }),
      (t.prototype.translateTextureFormat = function (e) {
        if (mA(e) || e === ze.F32_LUMINANCE || e === ze.U8_LUMINANCE)
          return this.translateTextureInternalFormat(e);
        var n = Pn(this.gl) || (!Pn(this.gl) && !!this.WEBGL_depth_texture);
        switch (e) {
          case ze.D24_S8:
          case ze.D32F_S8:
            return n ? xe.DEPTH_STENCIL : xe.RGBA;
          case ze.D24:
          case ze.D32F:
            return n ? xe.DEPTH_COMPONENT : xe.RGBA;
        }
        var r = gA(e),
          o = ey(e);
        switch (o) {
          case Sn.A:
            return xe.ALPHA;
          case Sn.R:
            return r ? xe.RED_INTEGER : xe.RED;
          case Sn.RG:
            return r ? xe.RG_INTEGER : xe.RG;
          case Sn.RGB:
            return r ? xe.RGB_INTEGER : xe.RGB;
          case Sn.RGBA:
            return xe.RGBA;
        }
      }),
      (t.prototype.setActiveTexture = function (e) {
        this.currentActiveTexture !== e &&
          (this.gl.activeTexture(e), (this.currentActiveTexture = e));
      }),
      (t.prototype.bindVAO = function (e) {
        this.currentBoundVAO !== e &&
          (Pn(this.gl)
            ? this.gl.bindVertexArray(e)
            : this.OES_vertex_array_object.bindVertexArrayOES(e),
          (this.currentBoundVAO = e));
      }),
      (t.prototype.programCompiled = function (e) {
        vr(e.compileState !== el.NeedsCompile),
          e.compileState === el.Compiling &&
            ((e.compileState = el.NeedsBind),
            this.shaderDebug && this.checkProgramCompilationForErrors(e));
      }),
      (t.prototype.useProgram = function (e) {
        this.currentProgram !== e &&
          (this.programCompiled(e),
          this.gl.useProgram(e.gl_program),
          (this.currentProgram = e));
      }),
      (t.prototype.ensureResourceExists = function (e) {
        if (e === null) {
          var n = this.gl.getError();
          throw new Error(
            "Created resource is null; GL error encountered: ".concat(n)
          );
        } else return e;
      }),
      (t.prototype.createBuffer = function (e) {
        return new bW({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: e,
        });
      }),
      (t.prototype.createTexture = function (e) {
        return new W_({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: e,
        });
      }),
      (t.prototype.createSampler = function (e) {
        return new IW({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: e,
        });
      }),
      (t.prototype.createRenderTarget = function (e) {
        return new AW({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: e,
        });
      }),
      (t.prototype.createRenderTargetFromTexture = function (e) {
        var n = e,
          r = n.format,
          o = n.width,
          l = n.height,
          a = n.mipLevelCount;
        return (
          vr(a === 1),
          this.createRenderTarget({
            format: r,
            width: o,
            height: l,
            sampleCount: 1,
            texture: e,
          })
        );
      }),
      (t.prototype.createProgram = function (e) {
        var n,
          r,
          o,
          l = (n = e.vertex) === null || n === void 0 ? void 0 : n.glsl;
        return (
          !((r = e.vertex) === null || r === void 0) &&
            r.glsl &&
            (e.vertex.glsl = Bp(this.queryVendorInfo(), "vert", e.vertex.glsl)),
          !((o = e.fragment) === null || o === void 0) &&
            o.glsl &&
            (e.fragment.glsl = Bp(
              this.queryVendorInfo(),
              "frag",
              e.fragment.glsl
            )),
          this.createProgramSimple(e, l)
        );
      }),
      (t.prototype.createProgramSimple = function (e, n) {
        var r = new TW(
          { id: this.getNextUniqueId(), device: this, descriptor: e },
          n
        );
        return r;
      }),
      (t.prototype.createBindings = function (e) {
        return new hW({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: e,
        });
      }),
      (t.prototype.createInputLayout = function (e) {
        return new EW({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: e,
        });
      }),
      (t.prototype.createRenderPipeline = function (e) {
        return new CW({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: e,
        });
      }),
      (t.prototype.createComputePass = function () {
        return new MW();
      }),
      (t.prototype.createComputePipeline = function (e) {
        return new NW({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: e,
        });
      }),
      (t.prototype.createReadback = function () {
        return new wW({ id: this.getNextUniqueId(), device: this });
      }),
      (t.prototype.createQueryPool = function (e, n) {
        return new SW({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: { type: e, elemCount: n },
        });
      }),
      (t.prototype.formatRenderPassDescriptor = function (e) {
        var n,
          r,
          o,
          l,
          a,
          h,
          f = e.colorAttachment;
        (e.depthClearValue =
          (n = e.depthClearValue) !== null && n !== void 0 ? n : "load"),
          (e.stencilClearValue =
            (r = e.stencilClearValue) !== null && r !== void 0 ? r : "load");
        for (var v = 0; v < f.length; v++)
          e.colorAttachmentLevel || (e.colorAttachmentLevel = []),
            (e.colorAttachmentLevel[v] =
              (o = e.colorAttachmentLevel[v]) !== null && o !== void 0 ? o : 0),
            e.colorResolveToLevel || (e.colorResolveToLevel = []),
            (e.colorResolveToLevel[v] =
              (l = e.colorResolveToLevel[v]) !== null && l !== void 0 ? l : 0),
            e.colorClearColor || (e.colorClearColor = []),
            (e.colorClearColor[v] =
              (a = e.colorClearColor[v]) !== null && a !== void 0 ? a : "load"),
            e.colorStore || (e.colorStore = []),
            (e.colorStore[v] =
              (h = e.colorStore[v]) !== null && h !== void 0 ? h : !1);
      }),
      (t.prototype.createRenderBundle = function () {
        return new PW({ id: this.getNextUniqueId(), device: this });
      }),
      (t.prototype.beginBundle = function (e) {
        this.renderBundle = e;
      }),
      (t.prototype.endBundle = function () {
        this.renderBundle = void 0;
      }),
      (t.prototype.executeBundles = function (e) {
        e.forEach(function (n) {
          n.replay();
        });
      }),
      (t.prototype.createRenderPass = function (e) {
        this.currentRenderPassDescriptor !== null &&
          this.currentRenderPassDescriptorStack.push(
            this.currentRenderPassDescriptor
          ),
          (this.currentRenderPassDescriptor = e),
          this.formatRenderPassDescriptor(e);
        var n = e.colorAttachment,
          r = e.colorAttachmentLevel,
          o = e.colorClearColor,
          l = e.colorResolveTo,
          a = e.colorResolveToLevel,
          h = e.depthStencilAttachment,
          f = e.depthClearValue,
          v = e.stencilClearValue,
          E = e.depthStencilResolveTo,
          x = l && l.length === 1 && l[0] === this.scTexture;
        this.setRenderPassParametersBegin(n.length, x);
        for (var T = 0; T < n.length; T++)
          this.setRenderPassParametersColor(T, n[T], r[T], l[T], a[T], x);
        this.setRenderPassParametersDepthStencil(h, E, x),
          this.validateCurrentAttachments();
        for (var T = 0; T < n.length; T++) {
          var N = o[T];
          N !== "load" &&
            this.setRenderPassParametersClearColor(T, N.r, N.g, N.b, N.a);
        }
        return this.setRenderPassParametersClearDepthStencil(f, v), this;
      }),
      (t.prototype.submitPass = function (e) {
        vr(this.currentRenderPassDescriptor !== null),
          this.endPass(),
          this.currentRenderPassDescriptorStack.length
            ? (this.currentRenderPassDescriptor =
                this.currentRenderPassDescriptorStack.pop())
            : (this.currentRenderPassDescriptor = null);
      }),
      (t.prototype.copySubTexture2D = function (e, n, r, o, l, a) {
        var h = this.gl,
          f = e,
          v = o;
        if ((vr(v.mipLevelCount === 1), vr(f.mipLevelCount === 1), Pn(h)))
          f === this.scTexture
            ? h.bindFramebuffer(h.DRAW_FRAMEBUFFER, this.scPlatformFramebuffer)
            : (h.bindFramebuffer(
                h.DRAW_FRAMEBUFFER,
                this.resolveColorDrawFramebuffer
              ),
              this.bindFramebufferAttachment(
                h.DRAW_FRAMEBUFFER,
                h.COLOR_ATTACHMENT0,
                f,
                0
              )),
            h.bindFramebuffer(
              h.READ_FRAMEBUFFER,
              this.resolveColorReadFramebuffer
            ),
            this.bindFramebufferAttachment(
              h.READ_FRAMEBUFFER,
              h.COLOR_ATTACHMENT0,
              v,
              0
            ),
            h.blitFramebuffer(
              l,
              a,
              l + v.width,
              a + v.height,
              n,
              r,
              n + v.width,
              r + v.height,
              h.COLOR_BUFFER_BIT,
              h.LINEAR
            ),
            h.bindFramebuffer(h.READ_FRAMEBUFFER, null),
            h.bindFramebuffer(h.DRAW_FRAMEBUFFER, null);
        else if (f === this.scTexture) {
          var E = this.createRenderTargetFromTexture(o);
          this.submitBlitRenderPass(E, f);
        }
      }),
      (t.prototype.queryLimits = function () {
        return this;
      }),
      (t.prototype.queryTextureFormatSupported = function (e, n, r) {
        switch (e) {
          case ze.BC1_SRGB:
          case ze.BC2_SRGB:
          case ze.BC3_SRGB:
            return this.WEBGL_compressed_texture_s3tc_srgb !== null
              ? z2(n, r, 4, 4)
              : !1;
          case ze.BC1:
          case ze.BC2:
          case ze.BC3:
            return this.WEBGL_compressed_texture_s3tc !== null
              ? z2(n, r, 4, 4)
              : !1;
          case ze.BC4_UNORM:
          case ze.BC4_SNORM:
          case ze.BC5_UNORM:
          case ze.BC5_SNORM:
            return this.EXT_texture_compression_rgtc !== null
              ? z2(n, r, 4, 4)
              : !1;
          case ze.U16_R_NORM:
          case ze.U16_RG_NORM:
          case ze.U16_RGBA_NORM:
            return this.EXT_texture_norm16 !== null;
          case ze.F32_R:
          case ze.F32_RG:
          case ze.F32_RGB:
          case ze.F32_RGBA:
            return this.OES_texture_float_linear !== null;
          case ze.F16_R:
          case ze.F16_RG:
          case ze.F16_RGB:
          case ze.F16_RGBA:
            return this.OES_texture_half_float_linear !== null;
          default:
            return !0;
        }
      }),
      (t.prototype.queryProgramReady = function (e) {
        var n = this.gl;
        if (e.compileState === el.NeedsCompile) throw new Error("whoops");
        if (e.compileState === el.Compiling) {
          var r = void 0;
          return (
            this.KHR_parallel_shader_compile !== null
              ? (r = n.getProgramParameter(
                  e.gl_program,
                  this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR
                ))
              : (r = !0),
            r && this.programCompiled(e),
            r
          );
        }
        return (
          e.compileState === el.NeedsBind || e.compileState === el.ReadyToUse
        );
      }),
      (t.prototype.queryPlatformAvailable = function () {
        return this.gl.isContextLost();
      }),
      (t.prototype.queryVendorInfo = function () {
        return this;
      }),
      (t.prototype.queryRenderPass = function (e) {
        return this.currentRenderPassDescriptor;
      }),
      (t.prototype.queryRenderTarget = function (e) {
        var n = e;
        return n;
      }),
      (t.prototype.setResourceName = function (e, n) {
        if (((e.name = n), e.type === Jr.Buffer))
          for (var r = e.gl_buffer_pages, o = 0; o < r.length; o++)
            zf(r[o], "".concat(n, " Page ").concat(o));
        else if (e.type === Jr.Texture) zf(sp(e), n);
        else if (e.type === Jr.Sampler) zf(j_(e), n);
        else if (e.type === Jr.RenderTarget) {
          var l = e.gl_renderbuffer;
          l !== null && zf(l, n);
        } else e.type === Jr.InputLayout && zf(e.vao, n);
      }),
      (t.prototype.setResourceLeakCheck = function (e, n) {
        this.resourceCreationTracker !== null &&
          this.resourceCreationTracker.setResourceLeakCheck(e, n);
      }),
      (t.prototype.checkForLeaks = function () {
        this.resourceCreationTracker !== null &&
          this.resourceCreationTracker.checkForLeaks();
      }),
      (t.prototype.pushDebugGroup = function (e) {}),
      (t.prototype.popDebugGroup = function () {}),
      (t.prototype.insertDebugMarker = function (e) {}),
      (t.prototype.programPatched = function (e, n) {
        vr(this.shaderDebug);
      }),
      (t.prototype.getBufferData = function (e, n, r) {
        r === void 0 && (r = 0);
        var o = this.gl;
        Pn(o) &&
          (o.bindBuffer(o.COPY_READ_BUFFER, Ep(e, r * 4)),
          o.getBufferSubData(o.COPY_READ_BUFFER, r * 4, n));
      }),
      (t.prototype.debugGroupStatisticsDrawCall = function (e) {
        e === void 0 && (e = 1);
        for (var n = this.debugGroupStack.length - 1; n >= 0; n--)
          this.debugGroupStack[n].drawCallCount += e;
      }),
      (t.prototype.debugGroupStatisticsBufferUpload = function (e) {
        e === void 0 && (e = 1);
        for (var n = this.debugGroupStack.length - 1; n >= 0; n--)
          this.debugGroupStack[n].bufferUploadCount += e;
      }),
      (t.prototype.debugGroupStatisticsTextureBind = function (e) {
        e === void 0 && (e = 1);
        for (var n = this.debugGroupStack.length - 1; n >= 0; n--)
          this.debugGroupStack[n].textureBindCount += e;
      }),
      (t.prototype.debugGroupStatisticsTriangles = function (e) {
        for (var n = this.debugGroupStack.length - 1; n >= 0; n--)
          this.debugGroupStack[n].triangleCount += e;
      }),
      (t.prototype.reportShaderError = function (e, n) {
        var r = this.gl,
          o = r.getShaderParameter(e, r.COMPILE_STATUS);
        if (!o) {
          console.error(Dj(n));
          var l = r.getExtension("WEBGL_debug_shaders");
          l && console.error(l.getTranslatedShaderSource(e)),
            console.error(r.getShaderInfoLog(e));
        }
        return o;
      }),
      (t.prototype.checkProgramCompilationForErrors = function (e) {
        var n = this.gl,
          r = e.gl_program;
        if (!n.getProgramParameter(r, n.LINK_STATUS)) {
          var o = e.descriptor;
          if (
            !this.reportShaderError(e.gl_shader_vert, o.vertex.glsl) ||
            !this.reportShaderError(e.gl_shader_frag, o.fragment.glsl)
          )
            return;
          console.error(n.getProgramInfoLog(e.gl_program));
        }
      }),
      (t.prototype.bindFramebufferAttachment = function (e, n, r, o) {
        var l = this.gl;
        if (hc(r)) l.framebufferRenderbuffer(e, n, l.RENDERBUFFER, null);
        else if (r.type === Jr.RenderTarget)
          r.gl_renderbuffer !== null
            ? l.framebufferRenderbuffer(e, n, l.RENDERBUFFER, r.gl_renderbuffer)
            : r.texture !== null &&
              l.framebufferTexture2D(e, n, xe.TEXTURE_2D, sp(r.texture), o);
        else if (r.type === Jr.Texture) {
          var a = sp(r);
          r.dimension === Ur.TEXTURE_2D
            ? l.framebufferTexture2D(e, n, xe.TEXTURE_2D, a, o)
            : Pn(l) && (r.dimension, Ur.TEXTURE_2D_ARRAY);
        }
      }),
      (t.prototype.bindFramebufferDepthStencilAttachment = function (e, n) {
        var r = this.gl,
          o = hc(n) ? hn.Depth | hn.Stencil : Op(n.format),
          l = !!(o & hn.Depth),
          a = !!(o & hn.Stencil);
        if (l && a) {
          var h = Pn(this.gl) || (!Pn(this.gl) && !!this.WEBGL_depth_texture);
          h
            ? this.bindFramebufferAttachment(
                e,
                r.DEPTH_STENCIL_ATTACHMENT,
                n,
                0
              )
            : this.bindFramebufferAttachment(e, r.DEPTH_ATTACHMENT, n, 0);
        } else
          l
            ? (this.bindFramebufferAttachment(e, r.DEPTH_ATTACHMENT, n, 0),
              this.bindFramebufferAttachment(e, r.STENCIL_ATTACHMENT, null, 0))
            : a &&
              (this.bindFramebufferAttachment(e, r.STENCIL_ATTACHMENT, n, 0),
              this.bindFramebufferAttachment(e, r.DEPTH_ATTACHMENT, null, 0));
      }),
      (t.prototype.validateCurrentAttachments = function () {
        for (
          var e = -1, n = -1, r = -1, o = 0;
          o < this.currentColorAttachments.length;
          o++
        ) {
          var l = this.currentColorAttachments[o];
          l !== null &&
            (e === -1
              ? ((e = l.sampleCount), (n = l.width), (r = l.height))
              : (vr(e === l.sampleCount),
                vr(n === l.width),
                vr(r === l.height)));
        }
        this.currentDepthStencilAttachment &&
          (e === -1
            ? (e = this.currentDepthStencilAttachment.sampleCount)
            : (vr(e === this.currentDepthStencilAttachment.sampleCount),
              vr(n === this.currentDepthStencilAttachment.width),
              vr(r === this.currentDepthStencilAttachment.height))),
          (this.currentSampleCount = e);
      }),
      (t.prototype.setRenderPassParametersBegin = function (e, n) {
        n === void 0 && (n = !1);
        var r = this.gl;
        if (n) r.bindFramebuffer(xe.FRAMEBUFFER, null);
        else if (
          (Pn(r)
            ? r.bindFramebuffer(
                xe.DRAW_FRAMEBUFFER,
                this.renderPassDrawFramebuffer
              )
            : this.inBlitRenderPass ||
              r.bindFramebuffer(xe.FRAMEBUFFER, this.renderPassDrawFramebuffer),
          Pn(r)
            ? r.drawBuffers([
                xe.COLOR_ATTACHMENT0,
                xe.COLOR_ATTACHMENT1,
                xe.COLOR_ATTACHMENT2,
                xe.COLOR_ATTACHMENT3,
              ])
            : !this.inBlitRenderPass &&
              this.WEBGL_draw_buffers &&
              this.WEBGL_draw_buffers.drawBuffersWEBGL([
                xe.COLOR_ATTACHMENT0_WEBGL,
                xe.COLOR_ATTACHMENT1_WEBGL,
                xe.COLOR_ATTACHMENT2_WEBGL,
                xe.COLOR_ATTACHMENT3_WEBGL,
              ]),
          !this.inBlitRenderPass)
        )
          for (var o = e; o < this.currentColorAttachments.length; o++) {
            var l = Pn(r) ? xe.DRAW_FRAMEBUFFER : xe.FRAMEBUFFER,
              a = Pn(r) ? xe.COLOR_ATTACHMENT0 : xe.COLOR_ATTACHMENT0_WEBGL;
            r.framebufferRenderbuffer(l, a + o, xe.RENDERBUFFER, null),
              r.framebufferTexture2D(l, a + o, xe.TEXTURE_2D, null, 0);
          }
        this.currentColorAttachments.length = e;
      }),
      (t.prototype.setRenderPassParametersColor = function (e, n, r, o, l, a) {
        a === void 0 && (a = !1);
        var h = this.gl,
          f = Pn(h);
        (this.currentColorAttachments[e] !== n ||
          this.currentColorAttachmentLevels[e] !== r) &&
          ((this.currentColorAttachments[e] = n),
          (this.currentColorAttachmentLevels[e] = r),
          !a &&
            (f || (!f && this.WEBGL_draw_buffers)) &&
            this.bindFramebufferAttachment(
              f ? xe.DRAW_FRAMEBUFFER : xe.FRAMEBUFFER,
              (f ? xe.COLOR_ATTACHMENT0 : xe.COLOR_ATTACHMENT0_WEBGL) + e,
              n,
              r
            ),
          (this.resolveColorAttachmentsChanged = !0)),
          (this.currentColorResolveTos[e] !== o ||
            this.currentColorResolveToLevels[e] !== l) &&
            ((this.currentColorResolveTos[e] = o),
            (this.currentColorResolveToLevels[e] = l),
            o !== null && (this.resolveColorAttachmentsChanged = !0));
      }),
      (t.prototype.setRenderPassParametersDepthStencil = function (e, n, r) {
        r === void 0 && (r = !1);
        var o = this.gl;
        this.currentDepthStencilAttachment !== e &&
          ((this.currentDepthStencilAttachment = e),
          !r &&
            !this.inBlitRenderPass &&
            this.bindFramebufferDepthStencilAttachment(
              Pn(o) ? xe.DRAW_FRAMEBUFFER : xe.FRAMEBUFFER,
              this.currentDepthStencilAttachment
            ),
          (this.resolveDepthStencilAttachmentsChanged = !0)),
          this.currentDepthStencilResolveTo !== n &&
            ((this.currentDepthStencilResolveTo = n),
            n && (this.resolveDepthStencilAttachmentsChanged = !0));
      }),
      (t.prototype.setRenderPassParametersClearColor = function (
        e,
        n,
        r,
        o,
        l
      ) {
        var a = this.gl;
        if (this.OES_draw_buffers_indexed !== null) {
          var h = this.currentMegaState.attachmentsState[e];
          h &&
            h.channelWriteMask !== No.ALL &&
            (this.OES_draw_buffers_indexed.colorMaskiOES(e, !0, !0, !0, !0),
            (h.channelWriteMask = No.ALL));
        } else {
          var h = this.currentMegaState.attachmentsState[0];
          h &&
            h.channelWriteMask !== No.ALL &&
            (a.colorMask(!0, !0, !0, !0), (h.channelWriteMask = No.ALL));
        }
        this.setScissorRectEnabled(!1),
          Pn(a)
            ? a.clearBufferfv(a.COLOR, e, [n, r, o, l])
            : (a.clearColor(n, r, o, l), a.clear(a.COLOR_BUFFER_BIT));
      }),
      (t.prototype.setRenderPassParametersClearDepthStencil = function (e, n) {
        e === void 0 && (e = "load"), n === void 0 && (n = "load");
        var r = this.gl;
        e !== "load" &&
          (vr(!!this.currentDepthStencilAttachment),
          this.currentMegaState.depthWrite ||
            (r.depthMask(!0), (this.currentMegaState.depthWrite = !0)),
          Pn(r)
            ? r.clearBufferfv(r.DEPTH, 0, [e])
            : (r.clearDepth(e), r.clear(r.DEPTH_BUFFER_BIT))),
          n !== "load" &&
            (vr(!!this.currentDepthStencilAttachment),
            this.currentMegaState.stencilWrite ||
              (r.enable(r.STENCIL_TEST),
              r.stencilMask(255),
              (this.currentMegaState.stencilWrite = !0)),
            Pn(r)
              ? r.clearBufferiv(r.STENCIL, 0, [n])
              : (r.clearStencil(n), r.clear(r.STENCIL_BUFFER_BIT)));
      }),
      (t.prototype.setBindings = function (e) {
        var n = this,
          r;
        if (this.renderBundle) {
          this.renderBundle.push(function () {
            return n.setBindings(e);
          });
          return;
        }
        var o = this.gl,
          l = e,
          a = l.uniformBufferBindings,
          h = l.samplerBindings,
          f = l.bindingLayouts;
        vr(0 < f.bindingLayoutTables.length);
        var v = f.bindingLayoutTables[0];
        vr(a.length >= v.numUniformBuffers), vr(h.length >= v.numSamplers);
        for (var E = 0; E < a.length; E++) {
          var x = a[E];
          if (x.size !== 0) {
            var T = v.firstUniformBuffer + E,
              N = x.buffer,
              I = x.offset || 0,
              L = x.size || N.byteSize;
            if (
              N !== this.currentUniformBuffers[T] ||
              I !== this.currentUniformBufferByteOffsets[T] ||
              L !== this.currentUniformBufferByteSizes[T]
            ) {
              var F = I % N.pageByteSize,
                X = N.gl_buffer_pages[(I / N.pageByteSize) | 0];
              vr(F + L <= N.pageByteSize),
                Pn(o) && o.bindBufferRange(o.UNIFORM_BUFFER, T, X, F, L),
                (this.currentUniformBuffers[T] = N),
                (this.currentUniformBufferByteOffsets[T] = I),
                (this.currentUniformBufferByteSizes[T] = L);
            }
          }
        }
        for (var E = 0; E < v.numSamplers; E++) {
          var x = h[E],
            G = v.firstSampler + E,
            K = x !== null && x.sampler !== null ? j_(x.sampler) : null,
            Q = x !== null && x.texture !== null ? sp(x.texture) : null;
          if (
            (this.currentSamplers[G] !== K &&
              (Pn(o) && o.bindSampler(G, K), (this.currentSamplers[G] = K)),
            this.currentTextures[G] !== Q)
          ) {
            if ((this.setActiveTexture(o.TEXTURE0 + G), Q !== null)) {
              var ee = $0(x).texture,
                Se = ee.gl_target,
                ue = ee.width,
                ke = ee.height;
              (x.texture.textureIndex = G),
                o.bindTexture(Se, Q),
                Pn(o) ||
                  (r = x.sampler) === null ||
                  r === void 0 ||
                  r.setTextureParameters(Se, ue, ke),
                this.debugGroupStatisticsTextureBind();
            } else {
              var ut = da(da({}, x), pA),
                Ve = ut.dimension,
                Ae = ut.formatKind,
                Se = xW(Ve);
              o.bindTexture(
                Se,
                this.getFallbackTexture(
                  da({ gl_target: Se, formatKind: Ae }, ut)
                )
              );
            }
            this.currentTextures[G] = Q;
          }
        }
      }),
      (t.prototype.setViewport = function (e, n, r, o) {
        var l = this.gl;
        l.viewport(e, n, r, o);
      }),
      (t.prototype.setScissorRect = function (e, n, r, o) {
        var l = this.gl;
        this.setScissorRectEnabled(!0), l.scissor(e, n, r, o);
      }),
      (t.prototype.applyAttachmentStateIndexed = function (e, n, r) {
        var o = this.gl,
          l = this.OES_draw_buffers_indexed;
        n.channelWriteMask !== r.channelWriteMask &&
          (l.colorMaskiOES(
            e,
            !!(r.channelWriteMask & No.RED),
            !!(r.channelWriteMask & No.GREEN),
            !!(r.channelWriteMask & No.BLUE),
            !!(r.channelWriteMask & No.ALPHA)
          ),
          (n.channelWriteMask = r.channelWriteMask));
        var a =
            n.rgbBlendState.blendMode !== r.rgbBlendState.blendMode ||
            n.alphaBlendState.blendMode !== r.alphaBlendState.blendMode,
          h =
            n.rgbBlendState.blendSrcFactor !== r.rgbBlendState.blendSrcFactor ||
            n.alphaBlendState.blendSrcFactor !==
              r.alphaBlendState.blendSrcFactor ||
            n.rgbBlendState.blendDstFactor !== r.rgbBlendState.blendDstFactor ||
            n.alphaBlendState.blendDstFactor !==
              r.alphaBlendState.blendDstFactor;
        (h || a) &&
          (jd(n.rgbBlendState) && jd(n.alphaBlendState)
            ? l.enableiOES(e, o.BLEND)
            : jd(r.rgbBlendState) &&
              jd(r.alphaBlendState) &&
              l.disableiOES(e, o.BLEND)),
          a &&
            (l.blendEquationSeparateiOES(
              e,
              r.rgbBlendState.blendMode,
              r.alphaBlendState.blendMode
            ),
            (n.rgbBlendState.blendMode = r.rgbBlendState.blendMode),
            (n.alphaBlendState.blendMode = r.alphaBlendState.blendMode)),
          h &&
            (l.blendFuncSeparateiOES(
              e,
              r.rgbBlendState.blendSrcFactor,
              r.rgbBlendState.blendDstFactor,
              r.alphaBlendState.blendSrcFactor,
              r.alphaBlendState.blendDstFactor
            ),
            (n.rgbBlendState.blendSrcFactor = r.rgbBlendState.blendSrcFactor),
            (n.alphaBlendState.blendSrcFactor =
              r.alphaBlendState.blendSrcFactor),
            (n.rgbBlendState.blendDstFactor = r.rgbBlendState.blendDstFactor),
            (n.alphaBlendState.blendDstFactor =
              r.alphaBlendState.blendDstFactor));
      }),
      (t.prototype.applyAttachmentState = function (e, n) {
        var r = this.gl;
        e.channelWriteMask !== n.channelWriteMask &&
          (r.colorMask(
            !!(n.channelWriteMask & No.RED),
            !!(n.channelWriteMask & No.GREEN),
            !!(n.channelWriteMask & No.BLUE),
            !!(n.channelWriteMask & No.ALPHA)
          ),
          (e.channelWriteMask = n.channelWriteMask));
        var o =
            e.rgbBlendState.blendMode !== n.rgbBlendState.blendMode ||
            e.alphaBlendState.blendMode !== n.alphaBlendState.blendMode,
          l =
            e.rgbBlendState.blendSrcFactor !== n.rgbBlendState.blendSrcFactor ||
            e.alphaBlendState.blendSrcFactor !==
              n.alphaBlendState.blendSrcFactor ||
            e.rgbBlendState.blendDstFactor !== n.rgbBlendState.blendDstFactor ||
            e.alphaBlendState.blendDstFactor !==
              n.alphaBlendState.blendDstFactor;
        (l || o) &&
          (jd(e.rgbBlendState) && jd(e.alphaBlendState)
            ? r.enable(r.BLEND)
            : jd(n.rgbBlendState) &&
              jd(n.alphaBlendState) &&
              r.disable(r.BLEND)),
          o &&
            (r.blendEquationSeparate(
              n.rgbBlendState.blendMode,
              n.alphaBlendState.blendMode
            ),
            (e.rgbBlendState.blendMode = n.rgbBlendState.blendMode),
            (e.alphaBlendState.blendMode = n.alphaBlendState.blendMode)),
          l &&
            (r.blendFuncSeparate(
              n.rgbBlendState.blendSrcFactor,
              n.rgbBlendState.blendDstFactor,
              n.alphaBlendState.blendSrcFactor,
              n.alphaBlendState.blendDstFactor
            ),
            (e.rgbBlendState.blendSrcFactor = n.rgbBlendState.blendSrcFactor),
            (e.alphaBlendState.blendSrcFactor =
              n.alphaBlendState.blendSrcFactor),
            (e.rgbBlendState.blendDstFactor = n.rgbBlendState.blendDstFactor),
            (e.alphaBlendState.blendDstFactor =
              n.alphaBlendState.blendDstFactor));
      }),
      (t.prototype.setMegaState = function (e) {
        var n = this.gl,
          r = this.currentMegaState;
        if (this.OES_draw_buffers_indexed !== null)
          for (var o = 0; o < e.attachmentsState.length; o++)
            this.applyAttachmentStateIndexed(
              o,
              r.attachmentsState[0],
              e.attachmentsState[0]
            );
        else
          vr(e.attachmentsState.length === 1),
            this.applyAttachmentState(
              r.attachmentsState[0],
              e.attachmentsState[0]
            );
        lA(r.blendConstant, e.blendConstant) ||
          (n.blendColor(
            e.blendConstant.r,
            e.blendConstant.g,
            e.blendConstant.b,
            e.blendConstant.a
          ),
          cA(r.blendConstant, e.blendConstant)),
          r.depthCompare !== e.depthCompare &&
            (n.depthFunc(e.depthCompare), (r.depthCompare = e.depthCompare)),
          !!r.depthWrite != !!e.depthWrite &&
            (n.depthMask(e.depthWrite), (r.depthWrite = e.depthWrite)),
          !!r.stencilWrite != !!e.stencilWrite &&
            (n.stencilMask(e.stencilWrite ? 255 : 0),
            (r.stencilWrite = e.stencilWrite));
        var l = !1;
        if (!rv(r.stencilFront, e.stencilFront)) {
          l = !0;
          var a = e.stencilFront,
            h = a.passOp,
            f = a.failOp,
            v = a.depthFailOp,
            E = a.compare;
          (r.stencilFront.passOp !== h ||
            r.stencilFront.failOp !== f ||
            r.stencilFront.depthFailOp !== v) &&
            (n.stencilOpSeparate(n.FRONT, f, v, h),
            (r.stencilFront.passOp = h),
            (r.stencilFront.failOp = f),
            (r.stencilFront.depthFailOp = v)),
            r.stencilFront.compare !== E &&
              (this.setStencilReference(0), (r.stencilFront.compare = E));
        }
        if (!rv(r.stencilBack, e.stencilBack)) {
          l = !0;
          var x = e.stencilBack,
            h = x.passOp,
            f = x.failOp,
            v = x.depthFailOp,
            E = x.compare;
          (r.stencilBack.passOp !== h ||
            r.stencilBack.failOp !== f ||
            r.stencilBack.depthFailOp !== v) &&
            (n.stencilOpSeparate(n.BACK, f, v, h),
            (r.stencilBack.passOp = h),
            (r.stencilBack.failOp = f),
            (r.stencilBack.depthFailOp = v)),
            r.stencilBack.compare !== E &&
              (this.setStencilReference(0), (r.stencilBack.compare = E));
        }
        (r.stencilFront.mask !== e.stencilFront.mask ||
          r.stencilBack.mask !== e.stencilBack.mask) &&
          ((l = !0),
          (r.stencilFront.mask = e.stencilFront.mask),
          (r.stencilBack.mask = e.stencilBack.mask)),
          l && this.applyStencil(),
          r.cullMode !== e.cullMode &&
            (r.cullMode === il.NONE
              ? n.enable(n.CULL_FACE)
              : e.cullMode === il.NONE && n.disable(n.CULL_FACE),
            e.cullMode === il.BACK
              ? n.cullFace(n.BACK)
              : e.cullMode === il.FRONT
              ? n.cullFace(n.FRONT)
              : e.cullMode === il.FRONT_AND_BACK &&
                n.cullFace(n.FRONT_AND_BACK),
            (r.cullMode = e.cullMode)),
          r.frontFace !== e.frontFace &&
            (n.frontFace(e.frontFace), (r.frontFace = e.frontFace)),
          r.polygonOffset !== e.polygonOffset &&
            (e.polygonOffset
              ? n.enable(n.POLYGON_OFFSET_FILL)
              : n.disable(n.POLYGON_OFFSET_FILL),
            (r.polygonOffset = e.polygonOffset)),
          (r.polygonOffsetFactor !== e.polygonOffsetFactor ||
            r.polygonOffsetUnits !== e.polygonOffsetUnits) &&
            (n.polygonOffset(e.polygonOffsetFactor, e.polygonOffsetUnits),
            (r.polygonOffsetFactor = e.polygonOffsetFactor),
            (r.polygonOffsetUnits = e.polygonOffsetUnits));
      }),
      (t.prototype.validatePipelineFormats = function (e) {
        for (var n = 0; n < this.currentColorAttachments.length; n++)
          var r = this.currentColorAttachments[n];
        this.currentDepthStencilAttachment &&
          vr(
            this.currentDepthStencilAttachment.format ===
              e.depthStencilAttachmentFormat
          ),
          this.currentSampleCount !== -1 &&
            vr(this.currentSampleCount === e.sampleCount);
      }),
      (t.prototype.setPipeline = function (e) {
        var n = this;
        if (this.renderBundle) {
          this.renderBundle.push(function () {
            return n.setPipeline(e);
          });
          return;
        }
        (this.currentPipeline = e),
          this.validatePipelineFormats(this.currentPipeline),
          this.setMegaState(this.currentPipeline.megaState);
        var r = this.currentPipeline.program;
        if ((this.useProgram(r), r.compileState === el.NeedsBind)) {
          var o = this.gl,
            l = r.gl_program,
            a = r.descriptor,
            h = lb(a.vertex.glsl, OW);
          if (Pn(o))
            for (var f = 0; f < h.length; f++) {
              var v = Lc(h[f], 2),
                E = v[1],
                x = o.getUniformBlockIndex(l, E);
              x !== -1 && x !== 4294967295 && o.uniformBlockBinding(l, x, f);
            }
          for (
            var T = lb(
                a.fragment.glsl,
                /^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm
              ),
              f = 0;
            f < T.length;
            f++
          ) {
            var N = Lc(T[f], 3),
              I = N[1],
              L = N[2],
              F = o.getUniformLocation(l, I);
            o.uniform1i(F, parseInt(L));
          }
          r.compileState = el.ReadyToUse;
        }
      }),
      (t.prototype.setVertexInput = function (e, n, r) {
        var o,
          l,
          a = this,
          h;
        if (this.renderBundle) {
          this.renderBundle.push(function () {
            return a.setVertexInput(e, n, r);
          });
          return;
        }
        if (e !== null) {
          vr(this.currentPipeline.inputLayout === e);
          var f = e;
          this.bindVAO(f.vao);
          for (
            var v = this.gl, E = 0;
            E < f.vertexBufferDescriptors.length;
            E++
          ) {
            var x = f.vertexBufferDescriptors[E],
              T = x.arrayStride,
              N = x.attributes;
            try {
              for (
                var I = ((o = void 0), ah(N)), L = I.next();
                !L.done;
                L = I.next()
              ) {
                var F = L.value,
                  X = F.shaderLocation,
                  G = F.offset,
                  K = Pn(v)
                    ? X
                    : (h = f.program.attributes[X]) === null || h === void 0
                    ? void 0
                    : h.location;
                if (!hc(K)) {
                  var Q = n[E];
                  if (Q === null) continue;
                  var ee = F.vertexFormat;
                  v.bindBuffer(v.ARRAY_BUFFER, Ep(Q.buffer));
                  var Se = (Q.offset || 0) + G;
                  v.vertexAttribPointer(
                    K,
                    ee.size,
                    ee.type,
                    ee.normalized,
                    T,
                    Se
                  );
                }
              }
            } catch (ke) {
              o = { error: ke };
            } finally {
              try {
                L && !L.done && (l = I.return) && l.call(I);
              } finally {
                if (o) throw o.error;
              }
            }
          }
          if (
            (vr((r !== null) == (f.indexBufferFormat !== null)), r !== null)
          ) {
            var ue = r.buffer;
            vr(ue.usage === wi.INDEX),
              v.bindBuffer(v.ELEMENT_ARRAY_BUFFER, Ep(ue)),
              (this.currentIndexBufferByteOffset = r.offset || 0);
          } else this.currentIndexBufferByteOffset = null;
        } else
          vr(this.currentPipeline.inputLayout === null),
            vr(r === null),
            this.bindVAO(null),
            (this.currentIndexBufferByteOffset = 0);
      }),
      (t.prototype.setStencilReference = function (e) {
        this.currentStencilRef !== e &&
          ((this.currentStencilRef = e), this.applyStencil());
      }),
      (t.prototype.draw = function (e, n, r, o) {
        var l,
          a = this;
        if (this.renderBundle) {
          this.renderBundle.push(function () {
            return a.draw(e, n, r, o);
          });
          return;
        }
        var h = this.gl,
          f = this.currentPipeline;
        if (n) {
          var v = [f.drawMode, r || 0, e, n];
          Pn(h)
            ? h.drawArraysInstanced.apply(h, Ff([], Lc(v), !1))
            : (l = this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(
                l,
                Ff([], Lc(v), !1)
              );
        } else h.drawArrays(f.drawMode, r, e);
        this.debugGroupStatisticsDrawCall(),
          this.debugGroupStatisticsTriangles((e / 3) * Math.max(n, 1));
      }),
      (t.prototype.drawIndexed = function (e, n, r, o, l) {
        var a,
          h = this;
        if (this.renderBundle) {
          this.renderBundle.push(function () {
            return h.drawIndexed(e, n, r, o, l);
          });
          return;
        }
        var f = this.gl,
          v = this.currentPipeline,
          E = $0(v.inputLayout),
          x =
            $0(this.currentIndexBufferByteOffset) +
            r * E.indexBufferCompByteSize;
        if (n) {
          var T = [v.drawMode, e, E.indexBufferType, x, n];
          Pn(f)
            ? f.drawElementsInstanced.apply(f, Ff([], Lc(T), !1))
            : (a =
                this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(
                a,
                Ff([], Lc(T), !1)
              );
        } else f.drawElements(v.drawMode, e, E.indexBufferType, x);
        this.debugGroupStatisticsDrawCall(),
          this.debugGroupStatisticsTriangles((e / 3) * Math.max(n, 1));
      }),
      (t.prototype.drawIndirect = function (e, n) {}),
      (t.prototype.drawIndexedIndirect = function (e, n) {}),
      (t.prototype.beginOcclusionQuery = function (e) {
        var n = this.gl;
        if (Pn(n)) {
          var r = this.currentRenderPassDescriptor.occlusionQueryPool;
          n.beginQuery(r.gl_query_type, r.gl_query[e]);
        }
      }),
      (t.prototype.endOcclusionQuery = function () {
        var e = this.gl;
        if (Pn(e)) {
          var n = this.currentRenderPassDescriptor.occlusionQueryPool;
          e.endQuery(n.gl_query_type);
        }
      }),
      (t.prototype.pipelineQueryReady = function (e) {
        var n = e;
        return this.queryProgramReady(n.program);
      }),
      (t.prototype.pipelineForceReady = function (e) {}),
      (t.prototype.endPass = function () {
        for (
          var e = this.gl,
            n = Pn(e),
            r =
              this.currentColorResolveTos.length === 1 &&
              this.currentColorResolveTos[0] === this.scTexture,
            o = !1,
            l = 0;
          l < this.currentColorAttachments.length;
          l++
        ) {
          var a = this.currentColorAttachments[l];
          if (a !== null) {
            var h = this.currentColorResolveTos[l],
              f = !1;
            h !== null &&
              (vr(a.width === h.width && a.height === h.height),
              this.setScissorRectEnabled(!1),
              r ||
                (n &&
                  e.bindFramebuffer(
                    e.READ_FRAMEBUFFER,
                    this.resolveColorReadFramebuffer
                  ),
                this.resolveColorAttachmentsChanged &&
                  n &&
                  this.bindFramebufferAttachment(
                    e.READ_FRAMEBUFFER,
                    e.COLOR_ATTACHMENT0,
                    a,
                    this.currentColorAttachmentLevels[l]
                  )),
              (f = !0),
              r ||
                (h === this.scTexture
                  ? e.bindFramebuffer(
                      n ? xe.DRAW_FRAMEBUFFER : xe.FRAMEBUFFER,
                      this.scPlatformFramebuffer
                    )
                  : (e.bindFramebuffer(
                      n ? xe.DRAW_FRAMEBUFFER : xe.FRAMEBUFFER,
                      this.resolveColorDrawFramebuffer
                    ),
                    this.resolveColorAttachmentsChanged &&
                      e.framebufferTexture2D(
                        n ? xe.DRAW_FRAMEBUFFER : xe.FRAMEBUFFER,
                        e.COLOR_ATTACHMENT0,
                        e.TEXTURE_2D,
                        h.gl_texture,
                        this.currentColorResolveToLevels[l]
                      ))),
              r ||
                (n
                  ? (e.blitFramebuffer(
                      0,
                      0,
                      a.width,
                      a.height,
                      0,
                      0,
                      h.width,
                      h.height,
                      e.COLOR_BUFFER_BIT,
                      e.LINEAR
                    ),
                    e.bindFramebuffer(e.DRAW_FRAMEBUFFER, null))
                  : this.submitBlitRenderPass(a, h)),
              (o = !0)),
              this.currentRenderPassDescriptor.colorStore[l] ||
                (!r &&
                  !f &&
                  (e.bindFramebuffer(
                    n ? xe.READ_FRAMEBUFFER : xe.FRAMEBUFFER,
                    this.resolveColorReadFramebuffer
                  ),
                  this.resolveColorAttachmentsChanged &&
                    this.bindFramebufferAttachment(
                      n ? xe.READ_FRAMEBUFFER : xe.FRAMEBUFFER,
                      e.COLOR_ATTACHMENT0,
                      a,
                      this.currentColorAttachmentLevels[l]
                    ))),
              r ||
                e.bindFramebuffer(
                  n ? xe.READ_FRAMEBUFFER : xe.FRAMEBUFFER,
                  null
                );
          }
        }
        this.resolveColorAttachmentsChanged = !1;
        var v = this.currentDepthStencilAttachment;
        if (v) {
          var E = this.currentDepthStencilResolveTo,
            f = !1;
          E &&
            (vr(v.width === E.width && v.height === E.height),
            this.setScissorRectEnabled(!1),
            r ||
              (e.bindFramebuffer(
                n ? xe.READ_FRAMEBUFFER : xe.FRAMEBUFFER,
                this.resolveDepthStencilReadFramebuffer
              ),
              e.bindFramebuffer(
                n ? xe.DRAW_FRAMEBUFFER : xe.FRAMEBUFFER,
                this.resolveDepthStencilDrawFramebuffer
              ),
              this.resolveDepthStencilAttachmentsChanged &&
                (this.bindFramebufferDepthStencilAttachment(
                  n ? xe.READ_FRAMEBUFFER : xe.FRAMEBUFFER,
                  v
                ),
                this.bindFramebufferDepthStencilAttachment(
                  n ? xe.DRAW_FRAMEBUFFER : xe.FRAMEBUFFER,
                  E
                ))),
            (f = !0),
            r ||
              (n &&
                e.blitFramebuffer(
                  0,
                  0,
                  v.width,
                  v.height,
                  0,
                  0,
                  E.width,
                  E.height,
                  e.DEPTH_BUFFER_BIT,
                  e.NEAREST
                ),
              e.bindFramebuffer(
                n ? xe.DRAW_FRAMEBUFFER : xe.FRAMEBUFFER,
                null
              )),
            (o = !0)),
            !r &&
              !this.currentRenderPassDescriptor.depthStencilStore &&
              (f ||
                (e.bindFramebuffer(
                  n ? xe.READ_FRAMEBUFFER : xe.FRAMEBUFFER,
                  this.resolveDepthStencilReadFramebuffer
                ),
                this.resolveDepthStencilAttachmentsChanged &&
                  this.bindFramebufferDepthStencilAttachment(
                    n ? xe.READ_FRAMEBUFFER : xe.FRAMEBUFFER,
                    v
                  ),
                (f = !0)),
              n &&
                e.invalidateFramebuffer(e.READ_FRAMEBUFFER, [
                  e.DEPTH_STENCIL_ATTACHMENT,
                ])),
            !r &&
              f &&
              e.bindFramebuffer(n ? xe.READ_FRAMEBUFFER : xe.FRAMEBUFFER, null),
            (this.resolveDepthStencilAttachmentsChanged = !1);
        }
        !r &&
          !o &&
          e.bindFramebuffer(n ? xe.DRAW_FRAMEBUFFER : xe.FRAMEBUFFER, null);
      }),
      (t.prototype.setScissorRectEnabled = function (e) {
        if (this.currentScissorEnabled !== e) {
          var n = this.gl;
          e ? n.enable(n.SCISSOR_TEST) : n.disable(n.SCISSOR_TEST),
            (this.currentScissorEnabled = e);
        }
      }),
      (t.prototype.applyStencil = function () {
        hc(this.currentStencilRef) ||
          (this.gl.stencilFuncSeparate(
            xe.FRONT,
            this.currentMegaState.stencilFront.compare,
            this.currentStencilRef,
            this.currentMegaState.stencilFront.mask || 255
          ),
          this.gl.stencilFuncSeparate(
            xe.BACK,
            this.currentMegaState.stencilBack.compare,
            this.currentStencilRef,
            this.currentMegaState.stencilBack.mask || 255
          ));
      }),
      (t.prototype.getFallbackTexture = function (e) {
        var n = e.gl_target,
          r = e.formatKind;
        if (n === xe.TEXTURE_2D)
          return r === pa.Depth
            ? this.fallbackTexture2DDepth
            : this.fallbackTexture2D;
        if (n === xe.TEXTURE_2D_ARRAY) return this.fallbackTexture2DArray;
        if (n === xe.TEXTURE_3D) return this.fallbackTexture3D;
        if (n === xe.TEXTURE_CUBE_MAP) return this.fallbackTextureCube;
        throw new Error("whoops");
      }),
      (t.prototype.submitBlitRenderPass = function (e, n) {
        this.blitRenderPipeline ||
          ((this.blitProgram = this.createProgram({
            vertex: {
              glsl: `layout(location = 0) in vec2 a_Position;
out vec2 v_TexCoord;
void main() {
  v_TexCoord = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);

  #ifdef VIEWPORT_ORIGIN_TL
    v_TexCoord.y = 1.0 - v_TexCoord.y;
  #endif
}`,
            },
            fragment: {
              glsl: `uniform sampler2D u_Texture;
in vec2 v_TexCoord;
out vec4 outputColor;
void main() {
  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);
}`,
            },
          })),
          (this.blitVertexBuffer = this.createBuffer({
            usage: wi.VERTEX | wi.COPY_DST,
            viewOrSize: new Float32Array([-4, -4, 4, -4, 0, 4]),
          })),
          (this.blitInputLayout = this.createInputLayout({
            vertexBufferDescriptors: [
              {
                arrayStride: 4 * 2,
                stepMode: oh.VERTEX,
                attributes: [
                  { format: ze.F32_RG, offset: 4 * 0, shaderLocation: 0 },
                ],
              },
            ],
            indexBufferFormat: null,
            program: this.blitProgram,
          })),
          (this.blitRenderPipeline = this.createRenderPipeline({
            topology: $a.TRIANGLES,
            sampleCount: 1,
            program: this.blitProgram,
            colorAttachmentFormats: [ze.U8_RGBA_RT],
            depthStencilAttachmentFormat: null,
            inputLayout: this.blitInputLayout,
            megaStateDescriptor: Lp(Dp),
          })),
          (this.blitBindings = this.createBindings({
            samplerBindings: [{ sampler: null, texture: e.texture }],
            uniformBufferBindings: [],
          })),
          this.blitProgram.setUniformsLegacy({ u_Texture: e }));
        var r = this.currentRenderPassDescriptor;
        (this.currentRenderPassDescriptor = null), (this.inBlitRenderPass = !0);
        var o = this.createRenderPass({
            colorAttachment: [e],
            colorResolveTo: [n],
            colorClearColor: [Pj],
          }),
          l = this.getCanvas(),
          a = l.width,
          h = l.height;
        o.setPipeline(this.blitRenderPipeline),
          o.setBindings(this.blitBindings),
          o.setVertexInput(
            this.blitInputLayout,
            [{ buffer: this.blitVertexBuffer }],
            null
          ),
          o.setViewport(0, 0, a, h),
          this.gl.disable(this.gl.BLEND),
          o.draw(3, 0),
          this.gl.enable(this.gl.BLEND),
          (this.currentRenderPassDescriptor = r),
          (this.inBlitRenderPass = !1);
      }),
      t
    );
  })(),
  DW = (function () {
    function t(e) {
      this.pluginOptions = e;
    }
    return (
      (t.prototype.createSwapChain = function (e) {
        return xu(this, void 0, void 0, function () {
          var n, r, o, l, a, h, f, v, E, x, T, N, I;
          return bp(this, function (L) {
            return (
              (n = this.pluginOptions),
              (r = n.targets),
              (o = n.xrCompatible),
              (l = n.antialias),
              (a = l === void 0 ? !1 : l),
              (h = n.preserveDrawingBuffer),
              (f = h === void 0 ? !1 : h),
              (v = n.premultipliedAlpha),
              (E = v === void 0 ? !0 : v),
              (x = n.shaderDebug),
              (T = n.trackResources),
              (N = {
                antialias: a,
                preserveDrawingBuffer: f,
                stencil: !0,
                premultipliedAlpha: E,
                xrCompatible: o,
              }),
              this.handleContextEvents(e),
              r.includes("webgl2") &&
                (I =
                  e.getContext("webgl2", N) ||
                  e.getContext("experimental-webgl2", N)),
              !I &&
                r.includes("webgl1") &&
                (I =
                  e.getContext("webgl", N) ||
                  e.getContext("experimental-webgl", N)),
              [2, new LW(I, { shaderDebug: x, trackResources: T })]
            );
          });
        });
      }),
      (t.prototype.handleContextEvents = function (e) {
        var n = this.pluginOptions,
          r = n.onContextLost,
          o = n.onContextRestored,
          l = n.onContextCreationError;
        l && e.addEventListener("webglcontextcreationerror", l, !1),
          r && e.addEventListener("webglcontextlost", r, !1),
          o && e.addEventListener("webglcontextrestored", o, !1);
      }),
      t
    );
  })();
let ha;
const vA =
  typeof TextDecoder < "u"
    ? new TextDecoder("utf-8", { ignoreBOM: !0, fatal: !0 })
    : {
        decode: () => {
          throw Error("TextDecoder not available");
        },
      };
typeof TextDecoder < "u" && vA.decode();
let Jf = null;
function gg() {
  return (
    (Jf === null || Jf.byteLength === 0) &&
      (Jf = new Uint8Array(ha.memory.buffer)),
    Jf
  );
}
function iv(t, e) {
  return (t = t >>> 0), vA.decode(gg().subarray(t, t + e));
}
const rd = new Array(128).fill(void 0);
rd.push(void 0, null, !0, !1);
let s1 = rd.length;
function BW(t) {
  s1 === rd.length && rd.push(rd.length + 1);
  const e = s1;
  return (s1 = rd[e]), (rd[e] = t), e;
}
function vg(t) {
  return rd[t];
}
function FW(t) {
  t < 132 || ((rd[t] = s1), (s1 = t));
}
function kW(t) {
  const e = vg(t);
  return FW(t), e;
}
let Fp = 0;
const _g =
    typeof TextEncoder < "u"
      ? new TextEncoder("utf-8")
      : {
          encode: () => {
            throw Error("TextEncoder not available");
          },
        },
  UW =
    typeof _g.encodeInto == "function"
      ? function (t, e) {
          return _g.encodeInto(t, e);
        }
      : function (t, e) {
          const n = _g.encode(t);
          return e.set(n), { read: t.length, written: n.length };
        };
function av(t, e, n) {
  if (n === void 0) {
    const h = _g.encode(t),
      f = e(h.length, 1) >>> 0;
    return (
      gg()
        .subarray(f, f + h.length)
        .set(h),
      (Fp = h.length),
      f
    );
  }
  let r = t.length,
    o = e(r, 1) >>> 0;
  const l = gg();
  let a = 0;
  for (; a < r; a++) {
    const h = t.charCodeAt(a);
    if (h > 127) break;
    l[o + a] = h;
  }
  if (a !== r) {
    a !== 0 && (t = t.slice(a)), (o = n(o, r, (r = a + t.length * 3), 1) >>> 0);
    const h = gg().subarray(o + a, o + r),
      f = UW(t, h);
    a += f.written;
  }
  return (Fp = a), o;
}
let e1 = null;
function ov() {
  return (
    (e1 === null || e1.byteLength === 0) &&
      (e1 = new Int32Array(ha.memory.buffer)),
    e1
  );
}
function zW(t, e, n) {
  let r, o;
  try {
    const h = ha.__wbindgen_add_to_stack_pointer(-16),
      f = av(t, ha.__wbindgen_malloc, ha.__wbindgen_realloc),
      v = Fp,
      E = av(e, ha.__wbindgen_malloc, ha.__wbindgen_realloc),
      x = Fp;
    ha.glsl_compile(h, f, v, E, x, n);
    var l = ov()[h / 4 + 0],
      a = ov()[h / 4 + 1];
    return (r = l), (o = a), iv(l, a);
  } finally {
    ha.__wbindgen_add_to_stack_pointer(16), ha.__wbindgen_free(r, o, 1);
  }
}
class N1 {
  static __wrap(e) {
    e = e >>> 0;
    const n = Object.create(N1.prototype);
    return (n.__wbg_ptr = e), n;
  }
  __destroy_into_raw() {
    const e = this.__wbg_ptr;
    return (this.__wbg_ptr = 0), e;
  }
  free() {
    const e = this.__destroy_into_raw();
    ha.__wbg_wgslcomposer_free(e);
  }
  constructor() {
    const e = ha.wgslcomposer_new();
    return N1.__wrap(e);
  }
  load_composable(e) {
    const n = av(e, ha.__wbindgen_malloc, ha.__wbindgen_realloc),
      r = Fp;
    ha.wgslcomposer_load_composable(this.__wbg_ptr, n, r);
  }
  wgsl_compile(e) {
    let n, r;
    try {
      const a = ha.__wbindgen_add_to_stack_pointer(-16),
        h = av(e, ha.__wbindgen_malloc, ha.__wbindgen_realloc),
        f = Fp;
      ha.wgslcomposer_wgsl_compile(a, this.__wbg_ptr, h, f);
      var o = ov()[a / 4 + 0],
        l = ov()[a / 4 + 1];
      return (n = o), (r = l), iv(o, l);
    } finally {
      ha.__wbindgen_add_to_stack_pointer(16), ha.__wbindgen_free(n, r, 1);
    }
  }
}
async function VW(t, e) {
  if (typeof Response == "function" && t instanceof Response) {
    if (typeof WebAssembly.instantiateStreaming == "function")
      try {
        return await WebAssembly.instantiateStreaming(t, e);
      } catch (r) {
        if (t.headers.get("Content-Type") != "application/wasm")
          console.warn(
            "`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",
            r
          );
        else throw r;
      }
    const n = await t.arrayBuffer();
    return await WebAssembly.instantiate(n, e);
  } else {
    const n = await WebAssembly.instantiate(t, e);
    return n instanceof WebAssembly.Instance ? { instance: n, module: t } : n;
  }
}
function HW() {
  const t = {};
  return (
    (t.wbg = {}),
    (t.wbg.__wbindgen_string_new = function (e, n) {
      const r = iv(e, n);
      return BW(r);
    }),
    (t.wbg.__wbindgen_object_drop_ref = function (e) {
      kW(e);
    }),
    (t.wbg.__wbg_log_1d3ae0273d8f4f8a = function (e) {
      console.log(vg(e));
    }),
    (t.wbg.__wbg_log_576ca876af0d4a77 = function (e, n) {
      console.log(vg(e), vg(n));
    }),
    (t.wbg.__wbindgen_throw = function (e, n) {
      throw new Error(iv(e, n));
    }),
    t
  );
}
function jW(t, e) {
  return (
    (ha = t.exports),
    (_A.__wbindgen_wasm_module = e),
    (e1 = null),
    (Jf = null),
    ha
  );
}
async function _A(t) {
  if (ha !== void 0) return ha;
  const e = HW();
  (typeof t == "string" ||
    (typeof Request == "function" && t instanceof Request) ||
    (typeof URL == "function" && t instanceof URL)) &&
    (t = fetch(t));
  const { instance: n, module: r } = await VW(await t, e);
  return jW(n, r);
}
var go;
(function (t) {
  (t[(t.COPY_SRC = 1)] = "COPY_SRC"),
    (t[(t.COPY_DST = 2)] = "COPY_DST"),
    (t[(t.TEXTURE_BINDING = 4)] = "TEXTURE_BINDING"),
    (t[(t.STORAGE_BINDING = 8)] = "STORAGE_BINDING"),
    (t[(t.STORAGE = 8)] = "STORAGE"),
    (t[(t.RENDER_ATTACHMENT = 16)] = "RENDER_ATTACHMENT");
})(go || (go = {}));
var X_;
(function (t) {
  (t[(t.READ = 1)] = "READ"), (t[(t.WRITE = 2)] = "WRITE");
})(X_ || (X_ = {}));
function WW(t) {
  var e = 0;
  return (
    t & vs.SAMPLED && (e |= go.TEXTURE_BINDING | go.COPY_DST | go.COPY_SRC),
    t & vs.STORAGE &&
      (e |=
        go.TEXTURE_BINDING | go.STORAGE_BINDING | go.COPY_SRC | go.COPY_DST),
    t & vs.RENDER_TARGET &&
      (e |=
        go.RENDER_ATTACHMENT | go.TEXTURE_BINDING | go.COPY_SRC | go.COPY_DST),
    e
  );
}
function ny(t) {
  if (t === ze.U8_R_NORM) return "r8unorm";
  if (t === ze.S8_R_NORM) return "r8snorm";
  if (t === ze.U8_RG_NORM) return "rg8unorm";
  if (t === ze.S8_RG_NORM) return "rg8snorm";
  if (t === ze.U32_R) return "r32uint";
  if (t === ze.S32_R) return "r32sint";
  if (t === ze.F32_R) return "r32float";
  if (t === ze.U16_RG) return "rg16uint";
  if (t === ze.S16_RG) return "rg16sint";
  if (t === ze.F16_RG) return "rg16float";
  if (t === ze.U8_RGBA_RT) return "bgra8unorm";
  if (t === ze.U8_RGBA_RT_SRGB) return "bgra8unorm-srgb";
  if (t === ze.U8_RGBA_NORM) return "rgba8unorm";
  if (t === ze.U8_RGBA_SRGB) return "rgba8unorm-srgb";
  if (t === ze.S8_RGBA_NORM) return "rgba8snorm";
  if (t === ze.U32_RG) return "rg32uint";
  if (t === ze.S32_RG) return "rg32sint";
  if (t === ze.F32_RG) return "rg32float";
  if (t === ze.U16_RGBA) return "rgba16uint";
  if (t === ze.S16_RGBA) return "rgba16sint";
  if (t === ze.F16_RGBA) return "rgba16float";
  if (t === ze.F32_RGBA) return "rgba32float";
  if (t === ze.U32_RGBA) return "rgba32uint";
  if (t === ze.S32_RGBA) return "rgba32sint";
  if (t === ze.D24) return "depth24plus";
  if (t === ze.D24_S8) return "depth24plus-stencil8";
  if (t === ze.D32F) return "depth32float";
  if (t === ze.D32F_S8) return "depth32float-stencil8";
  if (t === ze.BC1) return "bc1-rgba-unorm";
  if (t === ze.BC1_SRGB) return "bc1-rgba-unorm-srgb";
  if (t === ze.BC2) return "bc2-rgba-unorm";
  if (t === ze.BC2_SRGB) return "bc2-rgba-unorm-srgb";
  if (t === ze.BC3) return "bc3-rgba-unorm";
  if (t === ze.BC3_SRGB) return "bc3-rgba-unorm-srgb";
  if (t === ze.BC4_SNORM) return "bc4-r-snorm";
  if (t === ze.BC4_UNORM) return "bc4-r-unorm";
  if (t === ze.BC5_SNORM) return "bc5-rg-snorm";
  if (t === ze.BC5_UNORM) return "bc5-rg-unorm";
  throw "whoops";
}
function XW(t) {
  if (t === Ur.TEXTURE_2D) return "2d";
  if (t === Ur.TEXTURE_CUBE_MAP) return "2d";
  if (t === Ur.TEXTURE_2D_ARRAY) return "2d";
  if (t === Ur.TEXTURE_3D) return "3d";
  throw new Error("whoops");
}
function GW(t) {
  if (t === Ur.TEXTURE_2D) return "2d";
  if (t === Ur.TEXTURE_CUBE_MAP) return "cube";
  if (t === Ur.TEXTURE_2D_ARRAY) return "2d-array";
  if (t === Ur.TEXTURE_3D) return "3d";
  throw new Error("whoops");
}
function ZW(t) {
  var e = 0;
  return (
    t & wi.INDEX && (e |= GPUBufferUsage.INDEX),
    t & wi.VERTEX && (e |= GPUBufferUsage.VERTEX),
    t & wi.UNIFORM && (e |= GPUBufferUsage.UNIFORM),
    t & wi.STORAGE && (e |= GPUBufferUsage.STORAGE),
    t & wi.COPY_SRC && (e |= GPUBufferUsage.COPY_SRC),
    t & wi.INDIRECT && (e |= GPUBufferUsage.INDIRECT),
    (e |= GPUBufferUsage.COPY_DST),
    e
  );
}
function V2(t) {
  if (t === Is.CLAMP_TO_EDGE) return "clamp-to-edge";
  if (t === Is.REPEAT) return "repeat";
  if (t === Is.MIRRORED_REPEAT) return "mirror-repeat";
  throw new Error("whoops");
}
function ub(t) {
  if (t === Na.BILINEAR) return "linear";
  if (t === Na.POINT) return "nearest";
  throw new Error("whoops");
}
function YW(t) {
  if (t === vo.LINEAR) return "linear";
  if (t === vo.NEAREST) return "nearest";
  if (t === vo.NO_MIP) return "nearest";
  throw new Error("whoops");
}
function pp(t) {
  var e = t;
  return e.gpuBuffer;
}
function qW(t) {
  var e = t;
  return e.gpuSampler;
}
function $W(t) {
  var e = t;
  return e.querySet;
}
function KW(t) {
  if (t === Jg.OcclusionConservative) return "occlusion";
  throw new Error("whoops");
}
function QW(t) {
  switch (t) {
    case $a.TRIANGLES:
      return "triangle-list";
    case $a.POINTS:
      return "point-list";
    case $a.TRIANGLE_STRIP:
      return "triangle-strip";
    case $a.LINES:
      return "line-list";
    case $a.LINE_STRIP:
      return "line-strip";
    default:
      throw new Error("Unknown primitive topology mode");
  }
}
function JW(t) {
  if (t === il.NONE) return "none";
  if (t === il.FRONT) return "front";
  if (t === il.BACK) return "back";
  throw new Error("whoops");
}
function eX(t) {
  if (t === C1.CCW) return "ccw";
  if (t === C1.CW) return "cw";
  throw new Error("whoops");
}
function tX(t, e) {
  return {
    topology: QW(t),
    cullMode: JW(e.cullMode),
    frontFace: eX(e.frontFace),
  };
}
function db(t) {
  if (t === kr.ZERO) return "zero";
  if (t === kr.ONE) return "one";
  if (t === kr.SRC) return "src";
  if (t === kr.ONE_MINUS_SRC) return "one-minus-src";
  if (t === kr.DST) return "dst";
  if (t === kr.ONE_MINUS_DST) return "one-minus-dst";
  if (t === kr.SRC_ALPHA) return "src-alpha";
  if (t === kr.ONE_MINUS_SRC_ALPHA) return "one-minus-src-alpha";
  if (t === kr.DST_ALPHA) return "dst-alpha";
  if (t === kr.ONE_MINUS_DST_ALPHA) return "one-minus-dst-alpha";
  if (t === kr.CONST) return "constant";
  if (t === kr.ONE_MINUS_CONSTANT) return "one-minus-constant";
  if (t === kr.SRC_ALPHA_SATURATE) return "src-alpha-saturated";
  throw new Error("whoops");
}
function nX(t) {
  if (t === Ro.ADD) return "add";
  if (t === Ro.SUBSTRACT) return "subtract";
  if (t === Ro.REVERSE_SUBSTRACT) return "reverse-subtract";
  if (t === Ro.MIN) return "min";
  if (t === Ro.MAX) return "max";
  throw new Error("whoops");
}
function hb(t) {
  return {
    operation: nX(t.blendMode),
    srcFactor: db(t.blendSrcFactor),
    dstFactor: db(t.blendDstFactor),
  };
}
function pb(t) {
  return (
    t.blendMode === Ro.ADD &&
    t.blendSrcFactor === kr.ONE &&
    t.blendDstFactor === kr.ZERO
  );
}
function rX(t) {
  if (!(pb(t.rgbBlendState) && pb(t.alphaBlendState)))
    return { color: hb(t.rgbBlendState), alpha: hb(t.alphaBlendState) };
}
function iX(t, e) {
  return { format: ny(e), blend: rX(t), writeMask: t.channelWriteMask };
}
function aX(t, e) {
  return e.attachmentsState.map(function (n, r) {
    return iX(n, t[r]);
  });
}
function yg(t) {
  if (t === ui.NEVER) return "never";
  if (t === ui.LESS) return "less";
  if (t === ui.EQUAL) return "equal";
  if (t === ui.LEQUAL) return "less-equal";
  if (t === ui.GREATER) return "greater";
  if (t === ui.NOTEQUAL) return "not-equal";
  if (t === ui.GEQUAL) return "greater-equal";
  if (t === ui.ALWAYS) return "always";
  throw new Error("whoops");
}
function tp(t) {
  if (t === fa.KEEP) return "keep";
  if (t === fa.REPLACE) return "replace";
  if (t === fa.ZERO) return "zero";
  if (t === fa.DECREMENT_CLAMP) return "decrement-clamp";
  if (t === fa.DECREMENT_WRAP) return "decrement-wrap";
  if (t === fa.INCREMENT_CLAMP) return "increment-clamp";
  if (t === fa.INCREMENT_WRAP) return "increment-wrap";
  if (t === fa.INVERT) return "invert";
  throw new Error("whoops");
}
function oX(t, e) {
  if (!hc(t))
    return {
      format: ny(t),
      depthWriteEnabled: !!e.depthWrite,
      depthCompare: yg(e.depthCompare),
      depthBias: e.polygonOffset ? e.polygonOffsetUnits : 0,
      depthBiasSlopeScale: e.polygonOffset ? e.polygonOffsetFactor : 0,
      stencilFront: {
        compare: yg(e.stencilFront.compare),
        passOp: tp(e.stencilFront.passOp),
        failOp: tp(e.stencilFront.failOp),
        depthFailOp: tp(e.stencilFront.depthFailOp),
      },
      stencilBack: {
        compare: yg(e.stencilBack.compare),
        passOp: tp(e.stencilBack.passOp),
        failOp: tp(e.stencilBack.failOp),
        depthFailOp: tp(e.stencilBack.depthFailOp),
      },
      stencilReadMask: 4294967295,
      stencilWriteMask: 4294967295,
    };
}
function sX(t) {
  if (t !== null) {
    if (t === ze.U16_R) return "uint16";
    if (t === ze.U32_R) return "uint32";
    throw new Error("whoops");
  }
}
function lX(t) {
  if (t === oh.VERTEX) return "vertex";
  if (t === oh.INSTANCE) return "instance";
  throw new Error("whoops");
}
function cX(t) {
  if (t === ze.U8_R) return "uint8x2";
  if (t === ze.U8_RG) return "uint8x2";
  if (t === ze.U8_RGB) return "uint8x4";
  if (t === ze.U8_RGBA) return "uint8x4";
  if (t === ze.U8_RG_NORM) return "unorm8x2";
  if (t === ze.U8_RGBA_NORM) return "unorm8x4";
  if (t === ze.S8_RGB_NORM) return "snorm8x4";
  if (t === ze.S8_RGBA_NORM) return "snorm8x4";
  if (t === ze.U16_RG_NORM) return "unorm16x2";
  if (t === ze.U16_RGBA_NORM) return "unorm16x4";
  if (t === ze.S16_RG_NORM) return "snorm16x2";
  if (t === ze.S16_RGBA_NORM) return "snorm16x4";
  if (t === ze.S16_RG) return "uint16x2";
  if (t === ze.F16_RG) return "float16x2";
  if (t === ze.F16_RGBA) return "float16x4";
  if (t === ze.F32_R) return "float32";
  if (t === ze.F32_RG) return "float32x2";
  if (t === ze.F32_RGB) return "float32x3";
  if (t === ze.F32_RGBA) return "float32x4";
  throw "whoops";
}
function uX(t) {
  var e = Eu(t);
  switch (e) {
    case At.BC1:
    case At.BC2:
    case At.BC3:
    case At.BC4_SNORM:
    case At.BC4_UNORM:
    case At.BC5_SNORM:
    case At.BC5_UNORM:
      return !0;
    default:
      return !1;
  }
}
function dX(t) {
  var e = Eu(t);
  switch (e) {
    case At.BC1:
    case At.BC2:
    case At.BC3:
    case At.BC4_SNORM:
    case At.BC4_UNORM:
    case At.BC5_SNORM:
    case At.BC5_UNORM:
      return 4;
    default:
      return 1;
  }
}
function fb(t, e, n, r) {
  switch ((n === void 0 && (n = !1), t)) {
    case ze.S8_R:
    case ze.S8_R_NORM:
    case ze.S8_RG_NORM:
    case ze.S8_RGB_NORM:
    case ze.S8_RGBA_NORM: {
      var o = e instanceof ArrayBuffer ? new Int8Array(e) : new Int8Array(e);
      return r && o.set(new Int8Array(r)), o;
    }
    case ze.U8_R:
    case ze.U8_R_NORM:
    case ze.U8_RG:
    case ze.U8_RG_NORM:
    case ze.U8_RGB:
    case ze.U8_RGB_NORM:
    case ze.U8_RGB_SRGB:
    case ze.U8_RGBA:
    case ze.U8_RGBA_NORM:
    case ze.U8_RGBA_SRGB: {
      var l = e instanceof ArrayBuffer ? new Uint8Array(e) : new Uint8Array(e);
      return r && l.set(new Uint8Array(r)), l;
    }
    case ze.S16_R:
    case ze.S16_RG:
    case ze.S16_RG_NORM:
    case ze.S16_RGB_NORM:
    case ze.S16_RGBA:
    case ze.S16_RGBA_NORM: {
      var a =
        e instanceof ArrayBuffer
          ? new Int16Array(e)
          : new Int16Array(n ? e / 2 : e);
      return r && a.set(new Int16Array(r)), a;
    }
    case ze.U16_R:
    case ze.U16_RGB:
    case ze.U16_RGBA_5551:
    case ze.U16_RGBA_NORM:
    case ze.U16_RG_NORM:
    case ze.U16_R_NORM: {
      var h =
        e instanceof ArrayBuffer
          ? new Uint16Array(e)
          : new Uint16Array(n ? e / 2 : e);
      return r && h.set(new Uint16Array(r)), h;
    }
    case ze.S32_R: {
      var f =
        e instanceof ArrayBuffer
          ? new Int32Array(e)
          : new Int32Array(n ? e / 4 : e);
      return r && f.set(new Int32Array(r)), f;
    }
    case ze.U32_R:
    case ze.U32_RG: {
      var v =
        e instanceof ArrayBuffer
          ? new Uint32Array(e)
          : new Uint32Array(n ? e / 4 : e);
      return r && v.set(new Uint32Array(r)), v;
    }
    case ze.F32_R:
    case ze.F32_RG:
    case ze.F32_RGB:
    case ze.F32_RGBA: {
      var E =
        e instanceof ArrayBuffer
          ? new Float32Array(e)
          : new Float32Array(n ? e / 4 : e);
      return r && E.set(new Float32Array(r)), E;
    }
  }
  var x = e instanceof ArrayBuffer ? new Uint8Array(e) : new Uint8Array(e);
  return r && x.set(new Uint8Array(r)), x;
}
function hX(t) {
  var e = (t & 32768) >> 15,
    n = (t & 31744) >> 10,
    r = t & 1023;
  return n === 0
    ? (e ? -1 : 1) * Math.pow(2, -14) * (r / Math.pow(2, 10))
    : n == 31
    ? r
      ? NaN
      : (e ? -1 : 1) * (1 / 0)
    : (e ? -1 : 1) * Math.pow(2, n - 15) * (1 + r / Math.pow(2, 10));
}
function yA(t) {
  switch (t) {
    case "r8unorm":
    case "r8snorm":
    case "r8uint":
    case "r8sint":
      return { width: 1, height: 1, length: 1 };
    case "r16uint":
    case "r16sint":
    case "r16float":
    case "rg8unorm":
    case "rg8snorm":
    case "rg8uint":
    case "rg8sint":
      return { width: 1, height: 1, length: 2 };
    case "r32uint":
    case "r32sint":
    case "r32float":
    case "rg16uint":
    case "rg16sint":
    case "rg16float":
    case "rgba8unorm":
    case "rgba8unorm-srgb":
    case "rgba8snorm":
    case "rgba8uint":
    case "rgba8sint":
    case "bgra8unorm":
    case "bgra8unorm-srgb":
    case "rgb9e5ufloat":
    case "rgb10a2unorm":
    case "rg11b10ufloat":
      return { width: 1, height: 1, length: 4 };
    case "rg32uint":
    case "rg32sint":
    case "rg32float":
    case "rgba16uint":
    case "rgba16sint":
    case "rgba16float":
      return { width: 1, height: 1, length: 8 };
    case "rgba32uint":
    case "rgba32sint":
    case "rgba32float":
      return { width: 1, height: 1, length: 16 };
    case "stencil8":
      throw new Error("No fixed size for Stencil8 format!");
    case "depth16unorm":
      return { width: 1, height: 1, length: 2 };
    case "depth24plus":
      throw new Error("No fixed size for Depth24Plus format!");
    case "depth24plus-stencil8":
      throw new Error("No fixed size for Depth24PlusStencil8 format!");
    case "depth32float":
      return { width: 1, height: 1, length: 4 };
    case "depth32float-stencil8":
      return { width: 1, height: 1, length: 5 };
    case "bc7-rgba-unorm":
    case "bc7-rgba-unorm-srgb":
    case "bc6h-rgb-ufloat":
    case "bc6h-rgb-float":
    case "bc2-rgba-unorm":
    case "bc2-rgba-unorm-srgb":
    case "bc3-rgba-unorm":
    case "bc3-rgba-unorm-srgb":
    case "bc5-rg-unorm":
    case "bc5-rg-snorm":
      return { width: 4, height: 4, length: 16 };
    case "bc4-r-unorm":
    case "bc4-r-snorm":
    case "bc1-rgba-unorm":
    case "bc1-rgba-unorm-srgb":
      return { width: 4, height: 4, length: 8 };
    default:
      return { width: 1, height: 1, length: 4 };
  }
}
var Hc = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = t.call(this) || this;
      return (l.id = r), (l.device = o), l;
    }
    return (e.prototype.destroy = function () {}), e;
  })(iA),
  pX = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = n.descriptor,
        a,
        h,
        f = t.call(this, { id: r, device: o }) || this;
      f.type = Jr.Bindings;
      var v = l.pipeline;
      vr(!!v);
      var E = l.uniformBufferBindings,
        x = l.storageBufferBindings,
        T = l.samplerBindings,
        N = l.storageTextureBindings;
      f.numUniformBuffers = (E == null ? void 0 : E.length) || 0;
      var I = [[], [], [], []],
        L = 0;
      if (E && E.length)
        for (var F = 0; F < E.length; F++) {
          var X = l.uniformBufferBindings[F],
            G = X.binding,
            K = X.size,
            Q = X.offset,
            ee = X.buffer,
            Se = { buffer: pp(ee), offset: Q ?? 0, size: K };
          I[0].push({ binding: G ?? L++, resource: Se });
        }
      if (T && T.length) {
        L = 0;
        for (var F = 0; F < T.length; F++) {
          var ue = da(da({}, T[F]), pA),
            G = l.samplerBindings[F],
            ke =
              G.texture !== null ? G.texture : f.device.getFallbackTexture(ue);
          (ue.dimension = ke.dimension), (ue.formatKind = sA(ke.format));
          var ut = ke.gpuTextureView;
          if (
            (I[1].push({
              binding:
                (a = G.textureBinding) !== null && a !== void 0 ? a : L++,
              resource: ut,
            }),
            G.samplerBinding !== -1)
          ) {
            var Ve =
                G.sampler !== null
                  ? G.sampler
                  : f.device.getFallbackSampler(ue),
              Ae = qW(Ve);
            I[1].push({
              binding:
                (h = G.samplerBinding) !== null && h !== void 0 ? h : L++,
              resource: Ae,
            });
          }
        }
      }
      if (x && x.length) {
        L = 0;
        for (var F = 0; F < x.length; F++) {
          var Be = l.storageBufferBindings[F],
            G = Be.binding,
            K = Be.size,
            Q = Be.offset,
            ee = Be.buffer,
            Se = { buffer: pp(ee), offset: Q ?? 0, size: K };
          I[2].push({ binding: G ?? L++, resource: Se });
        }
      }
      if (N && N.length) {
        L = 0;
        for (var F = 0; F < N.length; F++) {
          var He = l.storageTextureBindings[F],
            G = He.binding,
            ke = He.texture,
            ut = ke.gpuTextureView;
          I[3].push({ binding: G ?? L++, resource: ut });
        }
      }
      var nt = I.findLastIndex(function (Ut) {
        return !!Ut.length;
      });
      return (
        (f.gpuBindGroup = I.map(function (Ut, Yt) {
          return (
            Yt <= nt &&
            f.device.device.createBindGroup({
              layout: v.getBindGroupLayout(Yt),
              entries: Ut,
            })
          );
        })),
        f
      );
    }
    return e;
  })(Hc),
  fX = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = n.descriptor,
        a = t.call(this, { id: r, device: o }) || this;
      a.type = Jr.Buffer;
      var h = l.usage,
        f = l.viewOrSize,
        v = !!(h & wi.MAP_READ);
      (a.usage = ZW(h)), v && (a.usage = wi.MAP_READ | wi.COPY_DST);
      var E = !dp(f);
      if (
        ((a.view = dp(f) ? null : f),
        (a.size = dp(f) ? tv(f, 4) : tv(f.byteLength, 4)),
        dp(f))
      )
        a.gpuBuffer = a.device.device.createBuffer({
          usage: a.usage,
          size: a.size,
          mappedAtCreation: v ? E : !1,
        });
      else {
        a.gpuBuffer = a.device.device.createBuffer({
          usage: a.usage,
          size: a.size,
          mappedAtCreation: !0,
        });
        var x = (f && f.constructor) || Float32Array;
        new x(a.gpuBuffer.getMappedRange()).set(f), a.gpuBuffer.unmap();
      }
      return a;
    }
    return (
      (e.prototype.setSubData = function (n, r, o, l) {
        o === void 0 && (o = 0), l === void 0 && (l = 0);
        var a = this.gpuBuffer;
        (l = l || r.byteLength), (l = Math.min(l, this.size - n));
        var h = r.byteOffset + o,
          f = h + l,
          v = (l + 3) & -4;
        if (v !== l) {
          var E = new Uint8Array(r.buffer.slice(h, f));
          (r = new Uint8Array(v)), r.set(E), (o = 0), (h = 0), (f = v), (l = v);
        }
        for (var x = 1024 * 1024 * 15, T = 0; f - (h + T) > x; )
          this.device.device.queue.writeBuffer(a, n + T, r.buffer, h + T, x),
            (T += x);
        this.device.device.queue.writeBuffer(a, n + T, r.buffer, h + T, l - T);
      }),
      (e.prototype.destroy = function () {
        t.prototype.destroy.call(this), this.gpuBuffer.destroy();
      }),
      e
    );
  })(Hc),
  mb = (function () {
    function t() {
      this.gpuComputePassEncoder = null;
    }
    return (
      (t.prototype.dispatchWorkgroups = function (e, n, r) {
        this.gpuComputePassEncoder.dispatchWorkgroups(e, n, r);
      }),
      (t.prototype.dispatchWorkgroupsIndirect = function (e, n) {
        this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(e.gpuBuffer, n);
      }),
      (t.prototype.finish = function () {
        this.gpuComputePassEncoder.end(),
          (this.gpuComputePassEncoder = null),
          (this.frameCommandEncoder = null);
      }),
      (t.prototype.beginComputePass = function (e) {
        vr(this.gpuComputePassEncoder === null),
          (this.frameCommandEncoder = e),
          (this.gpuComputePassEncoder =
            this.frameCommandEncoder.beginComputePass(
              this.gpuComputePassDescriptor
            ));
      }),
      (t.prototype.setPipeline = function (e) {
        var n = e,
          r = $0(n.gpuComputePipeline);
        this.gpuComputePassEncoder.setPipeline(r);
      }),
      (t.prototype.setBindings = function (e) {
        var n = this,
          r = e;
        r.gpuBindGroup.forEach(function (o, l) {
          o && n.gpuComputePassEncoder.setBindGroup(l, r.gpuBindGroup[l]);
        });
      }),
      (t.prototype.pushDebugGroup = function (e) {
        this.gpuComputePassEncoder.pushDebugGroup(e);
      }),
      (t.prototype.popDebugGroup = function () {
        this.gpuComputePassEncoder.popDebugGroup();
      }),
      (t.prototype.insertDebugMarker = function (e) {
        this.gpuComputePassEncoder.insertDebugMarker(e);
      }),
      t
    );
  })(),
  mX = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = n.descriptor,
        a = t.call(this, { id: r, device: o }) || this;
      (a.type = Jr.ComputePipeline),
        (a.gpuComputePipeline = null),
        (a.descriptor = l);
      var h = l.program,
        f = h.computeStage;
      if (f === null) return a;
      var v = { layout: "auto", compute: da({}, f) };
      return (
        (a.gpuComputePipeline = a.device.device.createComputePipeline(v)),
        a.name !== void 0 && (a.gpuComputePipeline.label = a.name),
        a
      );
    }
    return (
      (e.prototype.getBindGroupLayout = function (n) {
        return this.gpuComputePipeline.getBindGroupLayout(n);
      }),
      e
    );
  })(Hc),
  gX = (function (t) {
    ga(e, t);
    function e(n) {
      var r,
        o,
        l,
        a,
        h = n.id,
        f = n.device,
        v = n.descriptor,
        E = t.call(this, { id: h, device: f }) || this;
      E.type = Jr.InputLayout;
      var x = [];
      try {
        for (
          var T = ah(v.vertexBufferDescriptors), N = T.next();
          !N.done;
          N = T.next()
        ) {
          var I = N.value,
            L = I.arrayStride,
            F = I.stepMode,
            X = I.attributes;
          x.push({ arrayStride: L, stepMode: lX(F), attributes: [] });
          try {
            for (
              var G = ((l = void 0), ah(X)), K = G.next();
              !K.done;
              K = G.next()
            ) {
              var Q = K.value,
                ee = Q.shaderLocation,
                Se = Q.format,
                ue = Q.offset;
              x[x.length - 1].attributes.push({
                shaderLocation: ee,
                format: cX(Se),
                offset: ue,
              });
            }
          } catch (ke) {
            l = { error: ke };
          } finally {
            try {
              K && !K.done && (a = G.return) && a.call(G);
            } finally {
              if (l) throw l.error;
            }
          }
        }
      } catch (ke) {
        r = { error: ke };
      } finally {
        try {
          N && !N.done && (o = T.return) && o.call(T);
        } finally {
          if (r) throw r.error;
        }
      }
      return (E.indexFormat = sX(v.indexBufferFormat)), (E.buffers = x), E;
    }
    return e;
  })(Hc),
  gb = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = n.descriptor,
        a = t.call(this, { id: r, device: o }) || this;
      return (
        (a.type = Jr.Program),
        (a.vertexStage = null),
        (a.fragmentStage = null),
        (a.computeStage = null),
        (a.descriptor = l),
        l.vertex && (a.vertexStage = a.createShaderStage(l.vertex, "vertex")),
        l.fragment &&
          (a.fragmentStage = a.createShaderStage(l.fragment, "fragment")),
        l.compute &&
          (a.computeStage = a.createShaderStage(l.compute, "compute")),
        a
      );
    }
    return (
      (e.prototype.setUniformsLegacy = function (n) {}),
      (e.prototype.createShaderStage = function (n, r) {
        var o,
          l,
          a = n.glsl,
          h = n.wgsl,
          f = n.entryPoint,
          v = n.postprocess,
          E = !1,
          x = h;
        if (!x)
          try {
            x = this.device.glsl_compile(a, r, E);
          } catch (X) {
            throw (console.error(X, a), new Error("whoops"));
          }
        var T = function (X) {
          if (!x.includes(X)) return "continue";
          (x = x.replace(
            "var T_".concat(X, ": texture_2d<f32>;"),
            "var T_".concat(X, ": texture_depth_2d;")
          )),
            (x = x.replace(
              new RegExp("textureSample\\(T_".concat(X, "(.*)\\);$"), "gm"),
              function (G, K) {
                return "vec4<f32>(textureSample(T_"
                  .concat(X)
                  .concat(K, "), 0.0, 0.0, 0.0);");
              }
            ));
        };
        try {
          for (
            var N = ah(["u_TextureFramebufferDepth"]), I = N.next();
            !I.done;
            I = N.next()
          ) {
            var L = I.value;
            T(L);
          }
        } catch (X) {
          o = { error: X };
        } finally {
          try {
            I && !I.done && (l = N.return) && l.call(N);
          } finally {
            if (o) throw o.error;
          }
        }
        v && (x = v(x));
        var F = this.device.device.createShaderModule({ code: x });
        return { module: F, entryPoint: f || "main" };
      }),
      e
    );
  })(Hc),
  vX = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = n.descriptor,
        a = t.call(this, { id: r, device: o }) || this;
      a.type = Jr.QueryPool;
      var h = l.elemCount,
        f = l.type;
      return (
        (a.querySet = a.device.device.createQuerySet({
          type: KW(f),
          count: h,
        })),
        (a.resolveBuffer = a.device.device.createBuffer({
          size: h * 8,
          usage: GPUBufferUsage.QUERY_RESOLVE | GPUBufferUsage.COPY_SRC,
        })),
        (a.cpuBuffer = a.device.device.createBuffer({
          size: h * 8,
          usage: GPUBufferUsage.COPY_DST | GPUBufferUsage.MAP_READ,
        })),
        (a.results = null),
        a
      );
    }
    return (
      (e.prototype.queryResultOcclusion = function (n) {
        return this.results === null ? null : this.results[n] !== BigInt(0);
      }),
      (e.prototype.destroy = function () {
        t.prototype.destroy.call(this),
          this.querySet.destroy(),
          this.resolveBuffer.destroy(),
          this.cpuBuffer.destroy();
      }),
      e
    );
  })(Hc),
  _X = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = t.call(this, { id: r, device: o }) || this;
      return (l.type = Jr.Readback), l;
    }
    return (
      (e.prototype.readTexture = function (n, r, o, l, a, h, f, v) {
        return (
          f === void 0 && (f = 0),
          xu(this, void 0, void 0, function () {
            var E, x, T, N, I, L, F, X;
            return bp(this, function (G) {
              return (
                (E = n),
                (x = 0),
                (T = yA(E.gpuTextureformat)),
                (N = Math.ceil(l / T.width) * T.length),
                (I = Math.ceil(N / 256) * 256),
                (L = I * a),
                (F = this.device.createBuffer({
                  usage: wi.STORAGE | wi.MAP_READ | wi.COPY_DST,
                  hint: zc.STATIC,
                  viewOrSize: L,
                })),
                (X = this.device.device.createCommandEncoder()),
                X.copyTextureToBuffer(
                  {
                    texture: E.gpuTexture,
                    mipLevel: 0,
                    origin: { x: r, y: o, z: Math.max(x, 0) },
                  },
                  { buffer: F.gpuBuffer, offset: 0, bytesPerRow: I },
                  { width: l, height: a, depthOrArrayLayers: 1 }
                ),
                this.device.device.queue.submit([X.finish()]),
                [
                  2,
                  this.readBuffer(
                    F,
                    0,
                    h.byteLength === L ? h : null,
                    f,
                    L,
                    E.format,
                    !0,
                    !1,
                    N,
                    I,
                    a
                  ),
                ]
              );
            });
          })
        );
      }),
      (e.prototype.readTextureSync = function (n, r, o, l, a, h, f, v) {
        throw new Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED");
      }),
      (e.prototype.readBuffer = function (n, r, o, l, a, h, f, v, E, x, T) {
        var N = this;
        r === void 0 && (r = 0),
          o === void 0 && (o = null),
          a === void 0 && (a = 0),
          h === void 0 && (h = ze.U8_RGB),
          f === void 0 && (f = !1),
          E === void 0 && (E = 0),
          x === void 0 && (x = 0),
          T === void 0 && (T = 0);
        var I = n,
          L = a || I.size,
          F = o || I.view,
          X = (F && F.constructor && F.constructor.BYTES_PER_ELEMENT) || oA(h),
          G = I;
        if (!(I.usage & wi.MAP_READ && I.usage & wi.COPY_DST)) {
          var K = this.device.device.createCommandEncoder();
          (G = this.device.createBuffer({
            usage: wi.STORAGE | wi.MAP_READ | wi.COPY_DST,
            hint: zc.STATIC,
            viewOrSize: L,
          })),
            K.copyBufferToBuffer(I.gpuBuffer, r, G.gpuBuffer, 0, L),
            this.device.device.queue.submit([K.finish()]);
        }
        return new Promise(function (Q, ee) {
          G.gpuBuffer.mapAsync(X_.READ, r, L).then(
            function () {
              var Se = G.gpuBuffer.getMappedRange(r, L),
                ue = F;
              if (f)
                ue === null
                  ? (ue = fb(h, L, !0, Se))
                  : (ue = fb(h, ue.buffer, void 0, Se));
              else if (ue === null)
                switch (X) {
                  case 1:
                    (ue = new Uint8Array(L)), ue.set(new Uint8Array(Se));
                    break;
                  case 2:
                    ue = N.getHalfFloatAsFloatRGBAArrayBuffer(L / 2, Se);
                    break;
                  case 4:
                    (ue = new Float32Array(L / 4)),
                      ue.set(new Float32Array(Se));
                    break;
                }
              else
                switch (X) {
                  case 1:
                    (ue = new Uint8Array(ue.buffer)),
                      ue.set(new Uint8Array(Se));
                    break;
                  case 2:
                    ue = N.getHalfFloatAsFloatRGBAArrayBuffer(L / 2, Se, F);
                    break;
                  case 4:
                    var ke = (F && F.constructor) || Float32Array;
                    (ue = new ke(ue.buffer)), ue.set(new ke(Se));
                    break;
                }
              if (E !== x) {
                X === 1 && !f && ((E *= 2), (x *= 2));
                for (
                  var ut = new Uint8Array(ue.buffer), Ve = E, Ae = 0, Be = 1;
                  Be < T;
                  ++Be
                ) {
                  Ae = Be * x;
                  for (var He = 0; He < E; ++He) ut[Ve++] = ut[Ae++];
                }
                X !== 0 && !f
                  ? (ue = new Float32Array(ut.buffer, 0, Ve / 4))
                  : (ue = new Uint8Array(ut.buffer, 0, Ve));
              }
              G.gpuBuffer.unmap(), Q(ue);
            },
            function (Se) {
              return ee(Se);
            }
          );
        });
      }),
      (e.prototype.getHalfFloatAsFloatRGBAArrayBuffer = function (n, r, o) {
        o || (o = new Float32Array(n));
        for (var l = new Uint16Array(r); n--; ) o[n] = hX(l[n]);
        return o;
      }),
      e
    );
  })(Hc),
  vb = (function () {
    function t(e) {
      (this.device = e),
        (this.gpuRenderPassEncoder = null),
        (this.gfxColorAttachment = []),
        (this.gfxColorAttachmentLevel = []),
        (this.gfxColorResolveTo = []),
        (this.gfxColorResolveToLevel = []),
        (this.gfxDepthStencilAttachment = null),
        (this.gfxDepthStencilResolveTo = null),
        (this.gpuColorAttachments = []),
        (this.gpuDepthStencilAttachment = {
          view: null,
          depthLoadOp: "load",
          depthStoreOp: "store",
          stencilLoadOp: "load",
          stencilStoreOp: "store",
        }),
        (this.gpuRenderPassDescriptor = {
          colorAttachments: this.gpuColorAttachments,
          depthStencilAttachment: this.gpuDepthStencilAttachment,
        });
    }
    return (
      (t.prototype.getEncoder = function () {
        var e;
        return (
          ((e = this.renderBundle) === null || e === void 0
            ? void 0
            : e.renderBundleEncoder) || this.gpuRenderPassEncoder
        );
      }),
      (t.prototype.getTextureView = function (e, n) {
        return (
          vr(n < e.mipLevelCount),
          e.mipLevelCount === 1
            ? e.gpuTextureView
            : e.gpuTexture.createView({ baseMipLevel: n, mipLevelCount: 1 })
        );
      }),
      (t.prototype.setRenderPassDescriptor = function (e) {
        var n, r, o, l, a, h;
        (this.descriptor = e),
          (this.gpuRenderPassDescriptor.colorAttachments =
            this.gpuColorAttachments);
        var f = e.colorAttachment.length;
        (this.gfxColorAttachment.length = f),
          (this.gfxColorResolveTo.length = f);
        for (var v = 0; v < e.colorAttachment.length; v++) {
          var E = e.colorAttachment[v],
            x = e.colorResolveTo[v];
          if (
            (E === null && x !== null && ((E = x), (x = null)),
            (this.gfxColorAttachment[v] = E),
            (this.gfxColorResolveTo[v] = x),
            (this.gfxColorAttachmentLevel[v] =
              ((n = e.colorAttachmentLevel) === null || n === void 0
                ? void 0
                : n[v]) || 0),
            (this.gfxColorResolveToLevel[v] =
              ((r = e.colorResolveToLevel) === null || r === void 0
                ? void 0
                : r[v]) || 0),
            E !== null)
          ) {
            this.gpuColorAttachments[v] === void 0 &&
              (this.gpuColorAttachments[v] = {});
            var T = this.gpuColorAttachments[v];
            T.view = this.getTextureView(
              E,
              ((o = this.gfxColorAttachmentLevel) === null || o === void 0
                ? void 0
                : o[v]) || 0
            );
            var N =
              (a =
                (l = e.colorClearColor) === null || l === void 0
                  ? void 0
                  : l[v]) !== null && a !== void 0
                ? a
                : "load";
            N === "load"
              ? (T.loadOp = "load")
              : ((T.loadOp = "clear"), (T.clearValue = N)),
              (T.storeOp =
                !((h = e.colorStore) === null || h === void 0) && h[v]
                  ? "store"
                  : "discard"),
              (T.resolveTarget = void 0),
              x !== null &&
                (E.sampleCount > 1
                  ? (T.resolveTarget = this.getTextureView(
                      x,
                      this.gfxColorResolveToLevel[v]
                    ))
                  : (T.storeOp = "store"));
          } else {
            (this.gpuColorAttachments.length = v),
              (this.gfxColorAttachment.length = v),
              (this.gfxColorResolveTo.length = v);
            break;
          }
        }
        if (
          ((this.gfxDepthStencilAttachment = e.depthStencilAttachment),
          (this.gfxDepthStencilResolveTo = e.depthStencilResolveTo),
          e.depthStencilAttachment)
        ) {
          var I = e.depthStencilAttachment,
            T = this.gpuDepthStencilAttachment;
          T.view = I.gpuTextureView;
          var L = !!(Op(I.format) & hn.Depth);
          L
            ? (e.depthClearValue === "load"
                ? (T.depthLoadOp = "load")
                : ((T.depthLoadOp = "clear"),
                  (T.depthClearValue = e.depthClearValue)),
              e.depthStencilStore || this.gfxDepthStencilResolveTo !== null
                ? (T.depthStoreOp = "store")
                : (T.depthStoreOp = "discard"))
            : ((T.depthLoadOp = void 0), (T.depthStoreOp = void 0));
          var F = !!(Op(I.format) & hn.Stencil);
          F
            ? (e.stencilClearValue === "load"
                ? (T.stencilLoadOp = "load")
                : ((T.stencilLoadOp = "clear"),
                  (T.stencilClearValue = e.stencilClearValue)),
              e.depthStencilStore || this.gfxDepthStencilResolveTo !== null
                ? (T.stencilStoreOp = "store")
                : (T.stencilStoreOp = "discard"))
            : ((T.stencilLoadOp = void 0), (T.stencilStoreOp = void 0)),
            (this.gpuRenderPassDescriptor.depthStencilAttachment =
              this.gpuDepthStencilAttachment);
        } else this.gpuRenderPassDescriptor.depthStencilAttachment = void 0;
        this.gpuRenderPassDescriptor.occlusionQuerySet = hc(
          e.occlusionQueryPool
        )
          ? void 0
          : $W(e.occlusionQueryPool);
      }),
      (t.prototype.beginRenderPass = function (e, n) {
        vr(this.gpuRenderPassEncoder === null),
          this.setRenderPassDescriptor(n),
          (this.frameCommandEncoder = e),
          (this.gpuRenderPassEncoder = this.frameCommandEncoder.beginRenderPass(
            this.gpuRenderPassDescriptor
          ));
      }),
      (t.prototype.flipY = function (e, n) {
        var r = this.device.swapChainHeight;
        return r - e - n;
      }),
      (t.prototype.setViewport = function (e, n, r, o, l, a) {
        l === void 0 && (l = 0),
          a === void 0 && (a = 1),
          this.gpuRenderPassEncoder.setViewport(
            e,
            this.flipY(n, o),
            r,
            o,
            l,
            a
          );
      }),
      (t.prototype.setScissorRect = function (e, n, r, o) {
        this.gpuRenderPassEncoder.setScissorRect(e, this.flipY(n, o), r, o);
      }),
      (t.prototype.setPipeline = function (e) {
        var n = e,
          r = $0(n.gpuRenderPipeline);
        this.getEncoder().setPipeline(r);
      }),
      (t.prototype.setVertexInput = function (e, n, r) {
        if (e !== null) {
          var o = this.getEncoder(),
            l = e;
          r !== null &&
            o.setIndexBuffer(pp(r.buffer), $0(l.indexFormat), r.offset);
          for (var a = 0; a < n.length; a++) {
            var h = n[a];
            h !== null && o.setVertexBuffer(a, pp(h.buffer), h.offset);
          }
        }
      }),
      (t.prototype.setBindings = function (e) {
        var n = e,
          r = this.getEncoder();
        n.gpuBindGroup.forEach(function (o, l) {
          o && r.setBindGroup(l, n.gpuBindGroup[l]);
        });
      }),
      (t.prototype.setStencilReference = function (e) {
        this.gpuRenderPassEncoder.setStencilReference(e);
      }),
      (t.prototype.draw = function (e, n, r, o) {
        this.getEncoder().draw(e, n, r, o);
      }),
      (t.prototype.drawIndexed = function (e, n, r, o, l) {
        this.getEncoder().drawIndexed(e, n, r, o, l);
      }),
      (t.prototype.drawIndirect = function (e, n) {
        this.getEncoder().drawIndirect(pp(e), n);
      }),
      (t.prototype.drawIndexedIndirect = function (e, n) {
        this.getEncoder().drawIndexedIndirect(pp(e), n);
      }),
      (t.prototype.beginOcclusionQuery = function (e) {
        this.gpuRenderPassEncoder.beginOcclusionQuery(e);
      }),
      (t.prototype.endOcclusionQuery = function () {
        this.gpuRenderPassEncoder.endOcclusionQuery();
      }),
      (t.prototype.pushDebugGroup = function (e) {
        this.gpuRenderPassEncoder.pushDebugGroup(e);
      }),
      (t.prototype.popDebugGroup = function () {
        this.gpuRenderPassEncoder.popDebugGroup();
      }),
      (t.prototype.insertDebugMarker = function (e) {
        this.gpuRenderPassEncoder.insertDebugMarker(e);
      }),
      (t.prototype.beginBundle = function (e) {
        this.renderBundle = e;
      }),
      (t.prototype.endBundle = function () {
        this.renderBundle.finish();
      }),
      (t.prototype.executeBundles = function (e) {
        this.gpuRenderPassEncoder.executeBundles(
          e.map(function (n) {
            return n.renderBundle;
          })
        );
      }),
      (t.prototype.finish = function () {
        var e;
        (e = this.gpuRenderPassEncoder) === null || e === void 0 || e.end(),
          (this.gpuRenderPassEncoder = null);
        for (var n = 0; n < this.gfxColorAttachment.length; n++) {
          var r = this.gfxColorAttachment[n],
            o = this.gfxColorResolveTo[n];
          r !== null &&
            o !== null &&
            r.sampleCount === 1 &&
            this.copyAttachment(
              o,
              this.gfxColorAttachmentLevel[n],
              r,
              this.gfxColorResolveToLevel[n]
            );
        }
        this.gfxDepthStencilAttachment &&
          this.gfxDepthStencilResolveTo &&
          (this.gfxDepthStencilAttachment.sampleCount > 1 ||
            this.copyAttachment(
              this.gfxDepthStencilResolveTo,
              0,
              this.gfxDepthStencilAttachment,
              0
            )),
          (this.frameCommandEncoder = null);
      }),
      (t.prototype.copyAttachment = function (e, n, r, o) {
        vr(r.sampleCount === 1);
        var l = { texture: r.gpuTexture, mipLevel: o },
          a = { texture: e.gpuTexture, mipLevel: n };
        vr(r.width >>> o === e.width >>> n),
          vr(r.height >>> o === e.height >>> n),
          vr(!!(r.usage & go.COPY_SRC)),
          vr(!!(e.usage & go.COPY_DST)),
          this.frameCommandEncoder.copyTextureToTexture(l, a, [
            e.width,
            e.height,
            1,
          ]);
      }),
      t
    );
  })(),
  yX = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = n.descriptor,
        a = t.call(this, { id: r, device: o }) || this;
      return (
        (a.type = Jr.RenderPipeline),
        (a.isCreatingAsync = !1),
        (a.gpuRenderPipeline = null),
        (a.descriptor = l),
        a.device.createRenderPipelineInternal(a, !1),
        a
      );
    }
    return (
      (e.prototype.getBindGroupLayout = function (n) {
        return this.gpuRenderPipeline.getBindGroupLayout(n);
      }),
      e
    );
  })(Hc),
  xX = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = n.descriptor,
        a,
        h,
        f = t.call(this, { id: r, device: o }) || this;
      f.type = Jr.Sampler;
      var v = l.lodMinClamp,
        E = l.mipmapFilter === vo.NO_MIP ? l.lodMinClamp : l.lodMaxClamp,
        x = (a = l.maxAnisotropy) !== null && a !== void 0 ? a : 1;
      return (
        x > 1 &&
          vr(
            l.minFilter === Na.BILINEAR &&
              l.magFilter === Na.BILINEAR &&
              l.mipmapFilter === vo.LINEAR
          ),
        (f.gpuSampler = f.device.device.createSampler({
          addressModeU: V2(l.addressModeU),
          addressModeV: V2(l.addressModeV),
          addressModeW: V2(
            (h = l.addressModeW) !== null && h !== void 0 ? h : l.addressModeU
          ),
          lodMinClamp: v,
          lodMaxClamp: E,
          minFilter: ub(l.minFilter),
          magFilter: ub(l.magFilter),
          mipmapFilter: YW(l.mipmapFilter),
          compare:
            l.compareFunction !== void 0 ? yg(l.compareFunction) : void 0,
          maxAnisotropy: x,
        })),
        f
      );
    }
    return e;
  })(Hc),
  Km = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = n.descriptor,
        a = n.skipCreate,
        h = n.sampleCount,
        f = t.call(this, { id: r, device: o }) || this;
      (f.type = Jr.Texture), (f.flipY = !1);
      var v = l.format,
        E = l.dimension,
        x = l.width,
        T = l.height,
        N = l.depthOrArrayLayers,
        I = l.mipLevelCount,
        L = l.usage,
        F = l.pixelStore;
      return (
        (f.flipY = !!(F != null && F.unpackFlipY)),
        f.device.createTextureShared(
          {
            format: v,
            dimension: E ?? Ur.TEXTURE_2D,
            width: x,
            height: T,
            depthOrArrayLayers: N ?? 1,
            mipLevelCount: I ?? 1,
            usage: L,
            sampleCount: h ?? 1,
          },
          f,
          a
        ),
        f
      );
    }
    return (
      (e.prototype.textureFromImageBitmapOrCanvas = function (n, r, o) {
        for (
          var l = r[0].width,
            a = r[0].height,
            h = {
              size: { width: l, height: a, depthOrArrayLayers: o },
              format: "rgba8unorm",
              usage:
                GPUTextureUsage.TEXTURE_BINDING |
                GPUTextureUsage.COPY_DST |
                GPUTextureUsage.RENDER_ATTACHMENT,
            },
            f = n.createTexture(h),
            v = 0;
          v < r.length;
          v++
        )
          n.queue.copyExternalImageToTexture(
            { source: r[v], flipY: this.flipY },
            { texture: f, origin: [0, 0, v] },
            [l, a]
          );
        return [f, l, a];
      }),
      (e.prototype.isImageBitmapOrCanvases = function (n) {
        var r = n[0];
        return (
          r instanceof ImageBitmap ||
          r instanceof HTMLCanvasElement ||
          r instanceof OffscreenCanvas
        );
      }),
      (e.prototype.isVideo = function (n) {
        var r = n[0];
        return r instanceof HTMLVideoElement;
      }),
      (e.prototype.setImageData = function (n, r) {
        var o,
          l = this,
          a = this.device.device,
          h,
          f,
          v;
        if (this.isImageBitmapOrCanvases(n))
          (o = Lc(
            this.textureFromImageBitmapOrCanvas(a, n, this.depthOrArrayLayers),
            3
          )),
            (h = o[0]),
            (f = o[1]),
            (v = o[2]);
        else if (this.isVideo(n)) h = a.importExternalTexture({ source: n[0] });
        else {
          var E = yA(this.gpuTextureformat),
            x = Math.ceil(this.width / E.width) * E.length;
          n.forEach(function (T) {
            a.queue.writeTexture(
              { texture: l.gpuTexture },
              T,
              { bytesPerRow: x },
              { width: l.width, height: l.height }
            );
          });
        }
        (this.width = f),
          (this.height = v),
          h && (this.gpuTexture = h),
          (this.gpuTextureView = this.gpuTexture.createView({
            dimension: GW(this.dimension),
          }));
      }),
      (e.prototype.destroy = function () {
        t.prototype.destroy.call(this), this.gpuTexture.destroy();
      }),
      e
    );
  })(Hc),
  bX = (function (t) {
    ga(e, t);
    function e(n) {
      var r = n.id,
        o = n.device,
        l = t.call(this, { id: r, device: o }) || this;
      return (
        (l.type = Jr.RenderBundle),
        (l.renderBundleEncoder = l.device.device.createRenderBundleEncoder({
          colorFormats: [l.device.swapChainFormat],
        })),
        l
      );
    }
    return (
      (e.prototype.finish = function () {
        this.renderBundle = this.renderBundleEncoder.finish();
      }),
      e
    );
  })(Hc),
  EX = (function () {
    function t(e, n, r, o, l, a) {
      (this.swapChainWidth = 0),
        (this.swapChainHeight = 0),
        (this.swapChainTextureUsage = go.RENDER_ATTACHMENT | go.COPY_DST),
        (this._resourceUniqueId = 0),
        (this.renderPassPool = []),
        (this.computePassPool = []),
        (this.frameCommandEncoderPool = []),
        (this.featureTextureCompressionBC = !1),
        (this.platformString = "WebGPU"),
        (this.glslVersion = "#version 440"),
        (this.explicitBindingLocations = !0),
        (this.separateSamplerTextures = !0),
        (this.viewportOrigin = Uc.UPPER_LEFT),
        (this.clipSpaceNearZ = Pp.ZERO),
        (this.supportsSyncPipelineCompilation = !1),
        (this.supportMRT = !0),
        (this.device = n),
        (this.canvas = r),
        (this.canvasContext = o),
        (this.glsl_compile = l),
        (this.WGSLComposer = a),
        (this.fallbackTexture2D = this.createFallbackTexture(
          Ur.TEXTURE_2D,
          pa.Float
        )),
        this.setResourceName(this.fallbackTexture2D, "Fallback Texture2D"),
        (this.fallbackTexture2DDepth = this.createFallbackTexture(
          Ur.TEXTURE_2D,
          pa.Depth
        )),
        this.setResourceName(
          this.fallbackTexture2DDepth,
          "Fallback Depth Texture2D"
        ),
        (this.fallbackTexture2DArray = this.createFallbackTexture(
          Ur.TEXTURE_2D_ARRAY,
          pa.Float
        )),
        this.setResourceName(
          this.fallbackTexture2DArray,
          "Fallback Texture2DArray"
        ),
        (this.fallbackTexture3D = this.createFallbackTexture(
          Ur.TEXTURE_3D,
          pa.Float
        )),
        this.setResourceName(this.fallbackTexture3D, "Fallback Texture3D"),
        (this.fallbackTextureCube = this.createFallbackTexture(
          Ur.TEXTURE_CUBE_MAP,
          pa.Float
        )),
        this.setResourceName(this.fallbackTextureCube, "Fallback TextureCube"),
        (this.fallbackSamplerFiltering = this.createSampler({
          addressModeU: Is.REPEAT,
          addressModeV: Is.REPEAT,
          minFilter: Na.POINT,
          magFilter: Na.POINT,
          mipmapFilter: vo.NEAREST,
        })),
        this.setResourceName(
          this.fallbackSamplerFiltering,
          "Fallback Sampler Filtering"
        ),
        (this.fallbackSamplerComparison = this.createSampler({
          addressModeU: Is.REPEAT,
          addressModeV: Is.REPEAT,
          minFilter: Na.POINT,
          magFilter: Na.POINT,
          mipmapFilter: vo.NEAREST,
          compareFunction: ui.ALWAYS,
        })),
        this.setResourceName(
          this.fallbackSamplerComparison,
          "Fallback Sampler Comparison Filtering"
        ),
        this.device.features &&
          (this.featureTextureCompressionBC = this.device.features.has(
            "texture-compression-bc"
          )),
        (this.device.onuncapturederror = function (h) {
          console.error(h.error);
        }),
        (this.swapChainFormat = navigator.gpu.getPreferredCanvasFormat()),
        this.canvasContext.configure({
          device: this.device,
          format: this.swapChainFormat,
          usage: this.swapChainTextureUsage,
          alphaMode: "premultiplied",
        });
    }
    return (
      (t.prototype.destroy = function () {}),
      (t.prototype.configureSwapChain = function (e, n) {
        (this.swapChainWidth === e && this.swapChainHeight === n) ||
          ((this.swapChainWidth = e), (this.swapChainHeight = n));
      }),
      (t.prototype.getOnscreenTexture = function () {
        var e = this.canvasContext.getCurrentTexture(),
          n = e.createView(),
          r = new Km({
            id: 0,
            device: this,
            descriptor: {
              format: ze.U8_RGBA_RT,
              width: this.swapChainWidth,
              height: this.swapChainHeight,
              depthOrArrayLayers: 0,
              dimension: Ur.TEXTURE_2D,
              mipLevelCount: 1,
              usage: this.swapChainTextureUsage,
            },
            skipCreate: !0,
          });
        return (
          (r.depthOrArrayLayers = 1),
          (r.sampleCount = 1),
          (r.gpuTexture = e),
          (r.gpuTextureView = n),
          (r.name = "Onscreen"),
          this.setResourceName(r, "Onscreen Texture"),
          r
        );
      }),
      (t.prototype.getDevice = function () {
        return this;
      }),
      (t.prototype.getCanvas = function () {
        return this.canvas;
      }),
      (t.prototype.beginFrame = function () {
        vr(this.frameCommandEncoderPool.length === 0);
      }),
      (t.prototype.endFrame = function () {
        vr(
          this.frameCommandEncoderPool.every(function (e) {
            return e !== null;
          })
        ),
          this.device.queue.submit(
            this.frameCommandEncoderPool.map(function (e) {
              return e.finish();
            })
          ),
          (this.frameCommandEncoderPool = []);
      }),
      (t.prototype.getNextUniqueId = function () {
        return ++this._resourceUniqueId;
      }),
      (t.prototype.createBuffer = function (e) {
        return new fX({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: e,
        });
      }),
      (t.prototype.createTexture = function (e) {
        return new Km({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: e,
        });
      }),
      (t.prototype.createSampler = function (e) {
        return new xX({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: e,
        });
      }),
      (t.prototype.createRenderTarget = function (e) {
        var n = new Km({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: da(da({}, e), {
            dimension: Ur.TEXTURE_2D,
            mipLevelCount: 1,
            depthOrArrayLayers: 1,
            usage: vs.RENDER_TARGET,
          }),
          sampleCount: e.sampleCount,
        });
        return (n.depthOrArrayLayers = 1), (n.type = Jr.RenderTarget), n;
      }),
      (t.prototype.createRenderTargetFromTexture = function (e) {
        var n = e,
          r = n.format,
          o = n.width,
          l = n.height,
          a = n.depthOrArrayLayers,
          h = n.sampleCount,
          f = n.mipLevelCount,
          v = n.gpuTexture,
          E = n.gpuTextureView,
          x = n.usage;
        vr(!!(x & go.RENDER_ATTACHMENT));
        var T = new Km({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: {
            format: r,
            width: o,
            height: l,
            depthOrArrayLayers: a,
            dimension: Ur.TEXTURE_2D,
            mipLevelCount: f,
            usage: x,
          },
          skipCreate: !0,
        });
        return (
          (T.depthOrArrayLayers = a),
          (T.sampleCount = h),
          (T.gpuTexture = v),
          (T.gpuTextureView = E),
          T
        );
      }),
      (t.prototype.createProgram = function (e) {
        var n, r;
        return (
          !((n = e.vertex) === null || n === void 0) &&
            n.glsl &&
            (e.vertex.glsl = Bp(this.queryVendorInfo(), "vert", e.vertex.glsl)),
          !((r = e.fragment) === null || r === void 0) &&
            r.glsl &&
            (e.fragment.glsl = Bp(
              this.queryVendorInfo(),
              "frag",
              e.fragment.glsl
            )),
          new gb({ id: this.getNextUniqueId(), device: this, descriptor: e })
        );
      }),
      (t.prototype.createProgramSimple = function (e) {
        return new gb({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: e,
        });
      }),
      (t.prototype.createTextureShared = function (e, n, r) {
        var o = {
            width: e.width,
            height: e.height,
            depthOrArrayLayers: e.depthOrArrayLayers,
          },
          l = e.mipLevelCount,
          a = ny(e.format),
          h = XW(e.dimension),
          f = WW(e.usage);
        if (
          ((n.gpuTextureformat = a),
          (n.dimension = e.dimension),
          (n.format = e.format),
          (n.width = e.width),
          (n.height = e.height),
          (n.depthOrArrayLayers = e.depthOrArrayLayers),
          (n.mipLevelCount = l),
          (n.usage = f),
          (n.sampleCount = e.sampleCount),
          !r)
        ) {
          var v = this.device.createTexture({
              size: o,
              mipLevelCount: l,
              format: a,
              dimension: h,
              sampleCount: e.sampleCount,
              usage: f,
            }),
            E = v.createView();
          (n.gpuTexture = v), (n.gpuTextureView = E);
        }
      }),
      (t.prototype.getFallbackSampler = function (e) {
        var n = e.formatKind;
        return n === pa.Depth && e.comparison
          ? this.fallbackSamplerComparison
          : this.fallbackSamplerFiltering;
      }),
      (t.prototype.getFallbackTexture = function (e) {
        var n = e.dimension,
          r = e.formatKind;
        if (n === Ur.TEXTURE_2D)
          return r === pa.Depth
            ? this.fallbackTexture2DDepth
            : this.fallbackTexture2D;
        if (n === Ur.TEXTURE_2D_ARRAY) return this.fallbackTexture2DArray;
        if (n === Ur.TEXTURE_3D) return this.fallbackTexture3D;
        if (n === Ur.TEXTURE_CUBE_MAP) return this.fallbackTextureCube;
        throw new Error("whoops");
      }),
      (t.prototype.createFallbackTexture = function (e, n) {
        var r = e === Ur.TEXTURE_CUBE_MAP ? 6 : 1,
          o = n === pa.Float ? ze.U8_RGBA_NORM : ze.D24;
        return this.createTexture({
          dimension: e,
          format: o,
          usage: vs.SAMPLED,
          width: 1,
          height: 1,
          depthOrArrayLayers: r,
          mipLevelCount: 1,
        });
      }),
      (t.prototype.createBindings = function (e) {
        return new pX({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: e,
        });
      }),
      (t.prototype.createInputLayout = function (e) {
        return new gX({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: e,
        });
      }),
      (t.prototype.createComputePipeline = function (e) {
        return new mX({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: e,
        });
      }),
      (t.prototype.createRenderPipeline = function (e) {
        return new yX({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: da({}, e),
        });
      }),
      (t.prototype.createQueryPool = function (e, n) {
        return new vX({
          id: this.getNextUniqueId(),
          device: this,
          descriptor: { type: e, elemCount: n },
        });
      }),
      (t.prototype.createRenderPipelineInternal = function (e, n) {
        var r;
        if (e.gpuRenderPipeline === null) {
          var o = e.descriptor,
            l = o.program,
            a = l.vertexStage,
            h = l.fragmentStage;
          if (!(a === null || h === null)) {
            var f = o.megaStateDescriptor || {},
              v = f.stencilBack,
              E = f.stencilFront,
              x = rl(f, ["stencilBack", "stencilFront"]),
              T = Lp(Dp);
            o.megaStateDescriptor = da(
              da(da({}, T), {
                stencilBack: da(da({}, T.stencilBack), v),
                stencilFront: da(da({}, T.stencilFront), E),
              }),
              x
            );
            var N = o.megaStateDescriptor.attachmentsState[0];
            o.colorAttachmentFormats.forEach(function (Q, ee) {
              o.megaStateDescriptor.attachmentsState[ee] ||
                (o.megaStateDescriptor.attachmentsState[ee] = dA(void 0, N));
            });
            var I = tX(
                (r = o.topology) !== null && r !== void 0 ? r : $a.TRIANGLES,
                o.megaStateDescriptor
              ),
              L = aX(o.colorAttachmentFormats, o.megaStateDescriptor),
              F = oX(o.depthStencilAttachmentFormat, o.megaStateDescriptor),
              X = void 0;
            o.inputLayout !== null && (X = o.inputLayout.buffers);
            var G = o.sampleCount,
              K = {
                layout: "auto",
                vertex: da(da({}, a), { buffers: X }),
                primitive: I,
                depthStencil: F,
                multisample: { count: G },
                fragment: da(da({}, h), { targets: L }),
              };
            e.gpuRenderPipeline = this.device.createRenderPipeline(K);
          }
        }
      }),
      (t.prototype.createReadback = function () {
        return new _X({ id: this.getNextUniqueId(), device: this });
      }),
      (t.prototype.createRenderBundle = function () {
        return new bX({ id: this.getNextUniqueId(), device: this });
      }),
      (t.prototype.createRenderPass = function (e) {
        var n = this.renderPassPool.pop();
        n === void 0 && (n = new vb(this));
        var r = this.frameCommandEncoderPool.pop();
        return (
          r === void 0 && (r = this.device.createCommandEncoder()),
          n.beginRenderPass(r, e),
          n
        );
      }),
      (t.prototype.createComputePass = function () {
        var e = this.computePassPool.pop();
        e === void 0 && (e = new mb());
        var n = this.frameCommandEncoderPool.pop();
        return (
          n === void 0 && (n = this.device.createCommandEncoder()),
          e.beginComputePass(n),
          e
        );
      }),
      (t.prototype.submitPass = function (e) {
        var n = e;
        n instanceof vb
          ? (this.frameCommandEncoderPool.push(n.frameCommandEncoder),
            n.finish(),
            this.renderPassPool.push(n))
          : n instanceof mb &&
            (this.frameCommandEncoderPool.push(n.frameCommandEncoder),
            n.finish(),
            this.computePassPool.push(n));
      }),
      (t.prototype.copySubTexture2D = function (e, n, r, o, l, a, h) {
        var f = this.device.createCommandEncoder(),
          v = e,
          E = o,
          x = {
            texture: E.gpuTexture,
            origin: [l, a, 0],
            mipLevel: 0,
            aspect: "all",
          },
          T = {
            texture: v.gpuTexture,
            origin: [n, r, 0],
            mipLevel: 0,
            aspect: "all",
          };
        vr(!!(E.usage & go.COPY_SRC)),
          vr(!!(v.usage & go.COPY_DST)),
          f.copyTextureToTexture(x, T, [E.width, E.height, h || 1]),
          this.device.queue.submit([f.finish()]);
      }),
      (t.prototype.queryLimits = function () {
        return {
          uniformBufferMaxPageWordSize:
            this.device.limits.maxUniformBufferBindingSize >>> 2,
          uniformBufferWordAlignment:
            this.device.limits.minUniformBufferOffsetAlignment >>> 2,
          supportedSampleCounts: [1],
          occlusionQueriesRecommended: !0,
          computeShadersSupported: !0,
        };
      }),
      (t.prototype.queryTextureFormatSupported = function (e, n, r) {
        if (uX(e)) {
          if (!this.featureTextureCompressionBC) return !1;
          var o = dX(e);
          return n % o !== 0 || r % o !== 0
            ? !1
            : this.featureTextureCompressionBC;
        }
        switch (e) {
          case ze.U16_RGBA_NORM:
            return !1;
          case ze.F32_RGBA:
            return !1;
        }
        return !0;
      }),
      (t.prototype.queryPlatformAvailable = function () {
        return !0;
      }),
      (t.prototype.queryVendorInfo = function () {
        return this;
      }),
      (t.prototype.queryRenderPass = function (e) {
        var n = e;
        return n.descriptor;
      }),
      (t.prototype.queryRenderTarget = function (e) {
        var n = e;
        return n;
      }),
      (t.prototype.setResourceName = function (e, n) {
        if (((e.name = n), e.type === Jr.Buffer)) {
          var r = e;
          r.gpuBuffer.label = n;
        } else if (e.type === Jr.Texture) {
          var r = e;
          (r.gpuTexture.label = n), (r.gpuTextureView.label = n);
        } else if (e.type === Jr.RenderTarget) {
          var r = e;
          (r.gpuTexture.label = n), (r.gpuTextureView.label = n);
        } else if (e.type === Jr.Sampler) {
          var r = e;
          r.gpuSampler.label = n;
        } else if (e.type === Jr.RenderPipeline) {
          var r = e;
          r.gpuRenderPipeline !== null && (r.gpuRenderPipeline.label = n);
        }
      }),
      (t.prototype.setResourceLeakCheck = function (e, n) {}),
      (t.prototype.checkForLeaks = function () {}),
      (t.prototype.programPatched = function (e) {}),
      (t.prototype.pipelineQueryReady = function (e) {
        var n = e;
        return n.gpuRenderPipeline !== null;
      }),
      (t.prototype.pipelineForceReady = function (e) {
        var n = e;
        this.createRenderPipelineInternal(n, !1);
      }),
      t
    );
  })(),
  AX = (function () {
    function t(e) {
      this.pluginOptions = e;
    }
    return (
      (t.prototype.createSwapChain = function (e) {
        return xu(this, void 0, void 0, function () {
          var n, r, o, l, a, h, f, v;
          return bp(this, function (E) {
            switch (E.label) {
              case 0:
                if (globalThis.navigator.gpu === void 0) return [2, null];
                (n = null), (E.label = 1);
              case 1:
                return (
                  E.trys.push([1, 3, , 4]),
                  (r = this.pluginOptions.xrCompatible),
                  [
                    4,
                    globalThis.navigator.gpu.requestAdapter({
                      xrCompatible: r,
                    }),
                  ]
                );
              case 2:
                return (n = E.sent()), [3, 4];
              case 3:
                return (o = E.sent()), console.log(o), [3, 4];
              case 4:
                return n === null
                  ? [2, null]
                  : ((l = [
                      "depth32float-stencil8",
                      "texture-compression-bc",
                      "float32-filterable",
                    ]),
                    (a = l.filter(function (x) {
                      return n.features.has(x);
                    })),
                    [4, n.requestDevice({ requiredFeatures: a })]);
              case 5:
                if (
                  ((h = E.sent()),
                  h &&
                    ((f = this.pluginOptions.onContextLost),
                    h.lost.then(function () {
                      f && f();
                    })),
                  h === null)
                )
                  return [2, null];
                if (((v = e.getContext("webgpu")), !v)) return [2, null];
                E.label = 6;
              case 6:
                return (
                  E.trys.push([6, 8, , 9]),
                  [4, _A(this.pluginOptions.shaderCompilerPath)]
                );
              case 7:
                return E.sent(), [3, 9];
              case 8:
                return E.sent(), [3, 9];
              case 9:
                return [2, new EX(n, h, e, v, zW, N1 && new N1())];
            }
          });
        });
      }),
      t
    );
  })(),
  TX = class {
    constructor(t, e) {
      const {
        buffer: n,
        offset: r,
        stride: o,
        normalized: l,
        size: a,
        divisor: h,
        shaderLocation: f,
      } = e;
      (this.buffer = n),
        (this.attribute = {
          shaderLocation: f,
          buffer: n.get(),
          offset: r || 0,
          stride: o || 0,
          normalized: l || !1,
          divisor: h || 0,
        }),
        a && (this.attribute.size = a);
    }
    get() {
      return this.buffer;
    }
    updateBuffer(t) {
      this.buffer.subData(t);
    }
    destroy() {
      this.buffer.destroy();
    }
  },
  sv = {
    [H.FLOAT]: Float32Array,
    [H.UNSIGNED_BYTE]: Uint8Array,
    [H.SHORT]: Int16Array,
    [H.UNSIGNED_SHORT]: Uint16Array,
    [H.INT]: Int32Array,
    [H.UNSIGNED_INT]: Uint32Array,
  },
  SX = {
    [H.POINTS]: $a.POINTS,
    [H.LINES]: $a.LINES,
    [H.LINE_LOOP]: $a.LINES,
    [H.LINE_STRIP]: $a.LINE_STRIP,
    [H.TRIANGLES]: $a.TRIANGLES,
    [H.TRIANGLE_FAN]: $a.TRIANGLES,
    [H.TRIANGLE_STRIP]: $a.TRIANGLE_STRIP,
  },
  wX = { 1: ze.F32_R, 2: ze.F32_RG, 3: ze.F32_RGB, 4: ze.F32_RGBA },
  CX = {
    [H.STATIC_DRAW]: zc.STATIC,
    [H.DYNAMIC_DRAW]: zc.DYNAMIC,
    [H.STREAM_DRAW]: zc.DYNAMIC,
  },
  _b = {
    [H.REPEAT]: Is.REPEAT,
    [H.CLAMP_TO_EDGE]: Is.CLAMP_TO_EDGE,
    [H.MIRRORED_REPEAT]: Is.MIRRORED_REPEAT,
  },
  NX = {
    [H.NEVER]: ui.NEVER,
    [H.ALWAYS]: ui.ALWAYS,
    [H.LESS]: ui.LESS,
    [H.LEQUAL]: ui.LEQUAL,
    [H.GREATER]: ui.GREATER,
    [H.GEQUAL]: ui.GEQUAL,
    [H.EQUAL]: ui.EQUAL,
    [H.NOTEQUAL]: ui.NOTEQUAL,
  },
  RX = { [H.FRONT]: il.FRONT, [H.BACK]: il.BACK },
  yb = {
    [H.FUNC_ADD]: Ro.ADD,
    [H.MIN_EXT]: Ro.MIN,
    [H.MAX_EXT]: Ro.MAX,
    [H.FUNC_SUBTRACT]: Ro.SUBSTRACT,
    [H.FUNC_REVERSE_SUBTRACT]: Ro.REVERSE_SUBSTRACT,
  },
  Qm = {
    [H.ZERO]: kr.ZERO,
    [H.ONE]: kr.ONE,
    [H.SRC_COLOR]: kr.SRC,
    [H.ONE_MINUS_SRC_COLOR]: kr.ONE_MINUS_SRC,
    [H.SRC_ALPHA]: kr.SRC_ALPHA,
    [H.ONE_MINUS_SRC_ALPHA]: kr.ONE_MINUS_SRC_ALPHA,
    [H.DST_COLOR]: kr.DST,
    [H.ONE_MINUS_DST_COLOR]: kr.ONE_MINUS_DST,
    [H.DST_ALPHA]: kr.DST_ALPHA,
    [H.ONE_MINUS_DST_ALPHA]: kr.ONE_MINUS_DST_ALPHA,
    [H.CONSTANT_COLOR]: kr.CONST,
    [H.ONE_MINUS_CONSTANT_COLOR]: kr.ONE_MINUS_CONSTANT,
    [H.CONSTANT_ALPHA]: kr.CONST,
    [H.ONE_MINUS_CONSTANT_ALPHA]: kr.ONE_MINUS_CONSTANT,
    [H.SRC_ALPHA_SATURATE]: kr.SRC_ALPHA_SATURATE,
  },
  np = {
    [H.REPLACE]: fa.REPLACE,
    [H.KEEP]: fa.KEEP,
    [H.ZERO]: fa.ZERO,
    [H.INVERT]: fa.INVERT,
    [H.INCR]: fa.INCREMENT_CLAMP,
    [H.DECR]: fa.DECREMENT_CLAMP,
    [H.INCR_WRAP]: fa.INCREMENT_WRAP,
    [H.DECR_WRAP]: fa.DECREMENT_WRAP,
  },
  IX = {
    [H.ALWAYS]: ui.ALWAYS,
    [H.EQUAL]: ui.EQUAL,
    [H.GEQUAL]: ui.GEQUAL,
    [H.GREATER]: ui.GREATER,
    [H.LEQUAL]: ui.LEQUAL,
    [H.LESS]: ui.LESS,
    [H.NEVER]: ui.NEVER,
    [H.NOTEQUAL]: ui.NOTEQUAL,
  },
  MX = {
    "[object Int8Array]": 5120,
    "[object Int16Array]": 5122,
    "[object Int32Array]": 5124,
    "[object Uint8Array]": 5121,
    "[object Uint8ClampedArray]": 5121,
    "[object Uint16Array]": 5123,
    "[object Uint32Array]": 5125,
    "[object Float32Array]": 5126,
    "[object Float64Array]": 5121,
    "[object ArrayBuffer]": 5121,
  };
function lv(t) {
  return Object.prototype.toString.call(t) in MX;
}
function PX(t, e) {
  const n = t.length,
    r = Math.ceil(n / 3),
    o = n + r,
    l = new Float32Array(o);
  for (let a = 0; a < o; a += 4)
    (l[a] = t[(a / 4) * 3]),
      (l[a + 1] = t[(a / 4) * 3 + 1]),
      (l[a + 2] = t[(a / 4) * 3 + 2]),
      (l[a + 3] = e);
  return l;
}
var OX = class {
  constructor(t, e) {
    this.isDestroyed = !1;
    const { data: n, usage: r, type: o, isUBO: l, label: a } = e;
    let h;
    lv(n) ? (h = n) : (h = new sv[this.type || H.FLOAT](n)),
      (this.type = o),
      (this.size = h.byteLength),
      (this.buffer = t.createBuffer({
        viewOrSize: h,
        usage: l ? wi.UNIFORM : wi.VERTEX,
        hint: CX[r || H.STATIC_DRAW],
      })),
      a && t.setResourceName(this.buffer, a);
  }
  get() {
    return this.buffer;
  }
  destroy() {
    this.isDestroyed || this.buffer.destroy(), (this.isDestroyed = !0);
  }
  subData({ data: t, offset: e }) {
    let n;
    lv(t) ? (n = t) : (n = new sv[this.type || H.FLOAT](t)),
      this.buffer.setSubData(e, new Uint8Array(n.buffer));
  }
};
function fi(t, e = 0) {
  return (t += e), (t += t << 10), (t += t >>> 6), t >>> 0;
}
function xA(t) {
  return (t += t << 3), (t ^= t >>> 11), (t += t << 15), t >>> 0;
}
function xb() {
  return 0;
}
var LX = class {
    constructor() {
      (this.keys = []), (this.values = []);
    }
  },
  Jm = class {
    constructor(t, e) {
      (this.keyEqualFunc = t),
        (this.keyHashFunc = e),
        (this.buckets = new Map());
    }
    findBucketIndex(t, e) {
      for (let n = 0; n < t.keys.length; n++)
        if (this.keyEqualFunc(e, t.keys[n])) return n;
      return -1;
    }
    findBucket(t) {
      const e = this.keyHashFunc(t);
      return this.buckets.get(e);
    }
    get(t) {
      const e = this.findBucket(t);
      if (e === void 0) return null;
      const n = this.findBucketIndex(e, t);
      return n < 0 ? null : e.values[n];
    }
    add(t, e) {
      const n = this.keyHashFunc(t);
      this.buckets.get(n) === void 0 && this.buckets.set(n, new LX());
      const r = this.buckets.get(n);
      r.keys.push(t), r.values.push(e);
    }
    delete(t) {
      const e = this.findBucket(t);
      if (e === void 0) return;
      const n = this.findBucketIndex(e, t);
      n !== -1 && (e.keys.splice(n, 1), e.values.splice(n, 1));
    }
    clear() {
      this.buckets.clear();
    }
    size() {
      let t = 0;
      for (const e of this.buckets.values()) t += e.values.length;
      return t;
    }
    *values() {
      for (const t of this.buckets.values())
        for (let e = t.values.length - 1; e >= 0; e--) yield t.values[e];
    }
  };
function bb(t, e) {
  return (
    (t = fi(t, e.blendMode)),
    (t = fi(t, e.blendSrcFactor)),
    (t = fi(t, e.blendDstFactor)),
    t
  );
}
function DX(t, e) {
  return (
    (t = bb(t, e.rgbBlendState)),
    (t = bb(t, e.alphaBlendState)),
    (t = fi(t, e.channelWriteMask)),
    t
  );
}
function BX(t, e) {
  return (t = fi(t, (e.r << 24) | (e.g << 16) | (e.b << 8) | e.a)), t;
}
function FX(t, e) {
  var n, r, o, l, a, h, f, v;
  for (let E = 0; E < e.attachmentsState.length; E++)
    t = DX(t, e.attachmentsState[E]);
  return (
    (t = BX(t, e.blendConstant || Tv)),
    (t = fi(t, e.depthCompare)),
    (t = fi(t, e.depthWrite ? 1 : 0)),
    (t = fi(t, (n = e.stencilFront) == null ? void 0 : n.compare)),
    (t = fi(t, (r = e.stencilFront) == null ? void 0 : r.passOp)),
    (t = fi(t, (o = e.stencilFront) == null ? void 0 : o.failOp)),
    (t = fi(t, (l = e.stencilFront) == null ? void 0 : l.depthFailOp)),
    (t = fi(t, (a = e.stencilBack) == null ? void 0 : a.compare)),
    (t = fi(t, (h = e.stencilBack) == null ? void 0 : h.passOp)),
    (t = fi(t, (f = e.stencilBack) == null ? void 0 : f.failOp)),
    (t = fi(t, (v = e.stencilBack) == null ? void 0 : v.depthFailOp)),
    (t = fi(t, e.stencilWrite ? 1 : 0)),
    (t = fi(t, e.cullMode)),
    (t = fi(t, e.frontFace ? 1 : 0)),
    (t = fi(t, e.polygonOffset ? 1 : 0)),
    t
  );
}
function kX(t) {
  let e = 0;
  (e = fi(e, t.program.id)),
    t.inputLayout !== null && (e = fi(e, t.inputLayout.id)),
    (e = FX(e, t.megaStateDescriptor));
  for (let n = 0; n < t.colorAttachmentFormats.length; n++)
    e = fi(e, t.colorAttachmentFormats[n] || 0);
  return (e = fi(e, t.depthStencilAttachmentFormat || 0)), xA(e);
}
function UX(t) {
  let e = 0;
  if (t.samplerBindings)
    for (let n = 0; n < t.samplerBindings.length; n++) {
      const r = t.samplerBindings[n];
      r !== null && r.texture !== null && (e = fi(e, r.texture.id));
    }
  if (t.uniformBufferBindings)
    for (let n = 0; n < t.uniformBufferBindings.length; n++) {
      const r = t.uniformBufferBindings[n];
      r !== null &&
        r.buffer !== null &&
        ((e = fi(e, r.buffer.id)),
        (e = fi(e, r.binding)),
        (e = fi(e, r.offset)),
        (e = fi(e, r.size)));
    }
  if (t.storageBufferBindings)
    for (let n = 0; n < t.storageBufferBindings.length; n++) {
      const r = t.storageBufferBindings[n];
      r !== null &&
        r.buffer !== null &&
        ((e = fi(e, r.buffer.id)),
        (e = fi(e, r.binding)),
        (e = fi(e, r.offset)),
        (e = fi(e, r.size)));
    }
  if (t.storageTextureBindings)
    for (let n = 0; n < t.storageTextureBindings.length; n++) {
      const r = t.storageTextureBindings[n];
      r !== null &&
        r.texture !== null &&
        ((e = fi(e, r.texture.id)), (e = fi(e, r.binding)));
    }
  return xA(e);
}
function zX(t, e) {
  var n, r, o, l;
  return (
    ((n = t.vertex) == null ? void 0 : n.glsl) ===
      ((r = e.vertex) == null ? void 0 : r.glsl) &&
    ((o = t.fragment) == null ? void 0 : o.glsl) ===
      ((l = e.fragment) == null ? void 0 : l.glsl)
  );
}
function VX(t) {
  var e, n;
  return {
    vertex: { glsl: (e = t.vertex) == null ? void 0 : e.glsl },
    fragment: { glsl: (n = t.fragment) == null ? void 0 : n.glsl },
  };
}
var HX = class {
    constructor(t) {
      (this.device = t),
        (this.bindingsCache = new Jm(Vj, UX)),
        (this.renderPipelinesCache = new Jm(Xj, kX)),
        (this.inputLayoutsCache = new Jm(Yj, xb)),
        (this.programCache = new Jm(zX, xb));
    }
    createBindings(t) {
      var e;
      let n = this.bindingsCache.get(t);
      if (n === null) {
        const r = Kj(t);
        (r.uniformBufferBindings =
          (e = r.uniformBufferBindings) == null
            ? void 0
            : e.filter(({ size: o }) => o && o > 0)),
          (n = this.device.createBindings(r)),
          this.bindingsCache.add(r, n);
      }
      return n;
    }
    createRenderPipeline(t) {
      let e = this.renderPipelinesCache.get(t);
      if (e === null) {
        const n = Qj(t);
        (n.colorAttachmentFormats = n.colorAttachmentFormats.filter((r) => r)),
          (e = this.device.createRenderPipeline(n)),
          this.renderPipelinesCache.add(n, e);
      }
      return e;
    }
    createInputLayout(t) {
      t.vertexBufferDescriptors = t.vertexBufferDescriptors.filter((n) => !!n);
      let e = this.inputLayoutsCache.get(t);
      if (e === null) {
        const n = tW(t);
        (e = this.device.createInputLayout(n)),
          this.inputLayoutsCache.add(n, e);
      }
      return e;
    }
    createProgram(t) {
      let e = this.programCache.get(t);
      if (e === null) {
        const n = VX(t);
        (e = this.device.createProgram(t)), this.programCache.add(n, e);
      }
      return e;
    }
    destroy() {
      for (const t of this.bindingsCache.values()) t.destroy();
      for (const t of this.renderPipelinesCache.values()) t.destroy();
      for (const t of this.inputLayoutsCache.values()) t.destroy();
      for (const t of this.programCache.values()) t.destroy();
      this.bindingsCache.clear(),
        this.renderPipelinesCache.clear(),
        this.inputLayoutsCache.clear(),
        this.programCache.clear();
    }
  },
  jX = class {
    constructor(t, e) {
      const { data: n, type: r, count: o = 0 } = e;
      let l;
      lv(n) ? (l = n) : (l = new sv[this.type || H.UNSIGNED_INT](n)),
        (this.type = r),
        (this.count = o),
        (this.indexBuffer = t.createBuffer({ viewOrSize: l, usage: wi.INDEX }));
    }
    get() {
      return this.indexBuffer;
    }
    subData({ data: t }) {
      let e;
      lv(t) ? (e = t) : (e = new sv[this.type || H.UNSIGNED_INT](t)),
        this.indexBuffer.setSubData(0, new Uint8Array(e.buffer));
    }
    destroy() {
      this.indexBuffer.destroy();
    }
  };
function Eb(t) {
  return !!(t && t.texture);
}
var bA = class {
    constructor(t, e) {
      (this.device = t), (this.options = e), (this.isDestroy = !1);
      const {
        wrapS: n = H.CLAMP_TO_EDGE,
        wrapT: r = H.CLAMP_TO_EDGE,
        aniso: o,
        mag: l = H.NEAREST,
        min: a = H.NEAREST,
      } = e;
      this.createTexture(e),
        (this.sampler = t.createSampler({
          addressModeU: _b[n],
          addressModeV: _b[r],
          minFilter: a === H.NEAREST ? Na.POINT : Na.BILINEAR,
          magFilter: l === H.NEAREST ? Na.POINT : Na.BILINEAR,
          mipmapFilter: vo.NO_MIP,
          maxAnisotropy: o,
        }));
    }
    createTexture(t) {
      const {
        type: e = H.UNSIGNED_BYTE,
        width: n,
        height: r,
        flipY: o = !1,
        format: l = H.RGBA,
        alignment: a = 1,
        usage: h = m1.SAMPLED,
        unorm: f = !1,
        label: v,
      } = t;
      let { data: E } = t;
      (this.width = n), (this.height = r);
      let x = ze.U8_RGBA_RT;
      if (e === H.UNSIGNED_BYTE && l === H.RGBA)
        x = f ? ze.U8_RGBA_NORM : ze.U8_RGBA_RT;
      else if (e === H.UNSIGNED_BYTE && l === H.LUMINANCE) x = ze.U8_LUMINANCE;
      else if (e === H.FLOAT && l === H.LUMINANCE) x = ze.F32_LUMINANCE;
      else if (e === H.FLOAT && l === H.RGB)
        this.device.queryVendorInfo().platformString === "WebGPU"
          ? (E && (E = PX(E, 0)), (x = ze.F32_RGBA))
          : (x = ze.F32_RGB);
      else if (e === H.FLOAT && l === H.RGBA) x = ze.F32_RGBA;
      else if (e === H.FLOAT && l === H.RED) x = ze.F32_R;
      else throw new Error(`create texture error, type: ${e}, format: ${l}`);
      (this.texture = this.device.createTexture({
        format: x,
        width: n,
        height: r,
        usage: h === m1.SAMPLED ? vs.SAMPLED : vs.RENDER_TARGET,
        pixelStore: { unpackFlipY: o, packAlignment: a },
        mipLevelCount: 1,
      })),
        v && this.device.setResourceName(this.texture, v),
        E && this.texture.setImageData([E]);
    }
    get() {
      return this.texture;
    }
    update(t) {
      const { data: e } = t;
      this.texture.setImageData([e]);
    }
    bind() {}
    resize({ width: t, height: e }) {
      (this.width !== t || this.height !== e) && this.destroy(),
        (this.options.width = t),
        (this.options.height = e),
        this.createTexture(this.options),
        (this.isDestroy = !1);
    }
    getSize() {
      return [this.width, this.height];
    }
    destroy() {
      var t;
      !this.isDestroy &&
        !this.texture.destroyed &&
        ((t = this.texture) == null || t.destroy()),
        (this.isDestroy = !0);
    }
  },
  EA = class {
    constructor(t, e) {
      (this.device = t),
        (this.options = e),
        this.createColorRenderTarget(),
        this.createDepthRenderTarget();
    }
    createColorRenderTarget(t = !1) {
      const { width: e, height: n, color: r } = this.options;
      r &&
        (Eb(r)
          ? (t && r.resize({ width: e, height: n }),
            (this.colorTexture = r.get()),
            (this.colorRenderTarget = this.device.createRenderTargetFromTexture(
              this.colorTexture
            )),
            (this.width = r.width),
            (this.height = r.height))
          : e &&
            n &&
            ((this.colorTexture = this.device.createTexture({
              format: ze.U8_RGBA_RT,
              usage: vs.RENDER_TARGET,
              width: e,
              height: n,
            })),
            (this.colorRenderTarget = this.device.createRenderTargetFromTexture(
              this.colorTexture
            )),
            (this.width = e),
            (this.height = n)));
    }
    createDepthRenderTarget(t = !1) {
      const { width: e, height: n, depth: r } = this.options;
      r &&
        (Eb(r)
          ? (t && r.resize({ width: e, height: n }),
            (this.depthTexture = r.get()),
            (this.depthRenderTarget = this.device.createRenderTargetFromTexture(
              this.depthTexture
            )),
            (this.width = r.width),
            (this.height = r.height))
          : e &&
            n &&
            ((this.depthTexture = this.device.createTexture({
              format: ze.D24_S8,
              usage: vs.RENDER_TARGET,
              width: e,
              height: n,
            })),
            (this.depthRenderTarget = this.device.createRenderTargetFromTexture(
              this.depthTexture
            )),
            (this.width = e),
            (this.height = n)));
    }
    get() {
      return this.colorRenderTarget;
    }
    destroy() {
      var t, e;
      (t = this.colorRenderTarget) == null || t.destroy(),
        (e = this.depthRenderTarget) == null || e.destroy();
    }
    resize({ width: t, height: e }) {
      (this.width !== t || this.height !== e) &&
        (this.destroy(),
        (this.colorTexture.destroyed = !0),
        (this.depthTexture.destroyed = !0),
        (this.options.width = t),
        (this.options.height = e),
        this.createColorRenderTarget(!0),
        this.createDepthRenderTarget(!0));
    }
  },
  WX = Object.defineProperty,
  XX = Object.defineProperties,
  GX = Object.getOwnPropertyDescriptors,
  Ab = Object.getOwnPropertySymbols,
  ZX = Object.prototype.hasOwnProperty,
  YX = Object.prototype.propertyIsEnumerable,
  Tb = (t, e, n) =>
    e in t
      ? WX(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  H0 = (t, e) => {
    for (var n in e || (e = {})) ZX.call(e, n) && Tb(t, n, e[n]);
    if (Ab) for (var n of Ab(e)) YX.call(e, n) && Tb(t, n, e[n]);
    return t;
  },
  qX = (t, e) => XX(t, GX(e)),
  { isPlainObject: $X, isTypedArray: KX, isNil: Sb } = Ka,
  QX = class {
    constructor(t, e, n) {
      (this.device = t),
        (this.options = e),
        (this.service = n),
        (this.destroyed = !1),
        (this.uniforms = {}),
        (this.vertexBuffers = []);
      const {
        vs: r,
        fs: o,
        attributes: l,
        uniforms: a,
        count: h,
        elements: f,
        diagnosticDerivativeUniformityEnabled: v,
      } = e;
      this.options = e;
      const E = v
        ? ""
        : this.service.viewportOrigin === Uc.UPPER_LEFT
        ? "diagnostic(off,derivative_uniformity);"
        : "";
      (this.program = n.renderCache.createProgram({
        vertex: { glsl: r },
        fragment: { glsl: o, postprocess: (I) => E + I },
      })),
        a && (this.uniforms = this.extractUniforms(a));
      const x = [];
      let T = 0;
      Object.keys(l).forEach((I) => {
        const L = l[I],
          F = L.get();
        this.vertexBuffers.push(F.get());
        const {
          offset: X = 0,
          stride: G = 0,
          size: K = 1,
          divisor: Q = 0,
          shaderLocation: ee = 0,
        } = L.attribute;
        x.push({
          arrayStride: G || K * 4,
          stepMode: oh.VERTEX,
          attributes: [
            { format: wX[K], shaderLocation: ee, offset: X, divisor: Q },
          ],
        }),
          (T = F.size / K);
      }),
        h || (this.options.count = T),
        f && (this.indexBuffer = f.get());
      const N = n.renderCache.createInputLayout({
        vertexBufferDescriptors: x,
        indexBufferFormat: f ? ze.U32_R : null,
        program: this.program,
      });
      (this.inputLayout = N), (this.pipeline = this.createPipeline(e));
    }
    createPipeline(t, e) {
      var n;
      const {
          primitive: r = H.TRIANGLES,
          depth: o,
          cull: l,
          blend: a,
          stencil: h,
        } = t,
        f = this.initDepthDrawParams({ depth: o }),
        v = !!(f && f.enable),
        E = this.initCullDrawParams({ cull: l }),
        x = !!(E && E.enable),
        T = this.getBlendDrawParams({ blend: a }),
        N = !!(T && T.enable),
        I = this.getStencilDrawParams({ stencil: h }),
        L = !!(I && I.enable),
        F = this.device.createRenderPipeline({
          inputLayout: this.inputLayout,
          program: this.program,
          topology: SX[r],
          colorAttachmentFormats: [ze.U8_RGBA_RT],
          depthStencilAttachmentFormat: ze.D24_S8,
          megaStateDescriptor: {
            attachmentsState: [
              e
                ? {
                    channelWriteMask: No.ALL,
                    rgbBlendState: {
                      blendMode: Ro.ADD,
                      blendSrcFactor: kr.ONE,
                      blendDstFactor: kr.ZERO,
                    },
                    alphaBlendState: {
                      blendMode: Ro.ADD,
                      blendSrcFactor: kr.ONE,
                      blendDstFactor: kr.ZERO,
                    },
                  }
                : {
                    channelWriteMask:
                      L && I.opFront.zpass === fa.REPLACE ? No.NONE : No.ALL,
                    rgbBlendState: {
                      blendMode: (N && T.equation.rgb) || Ro.ADD,
                      blendSrcFactor: (N && T.func.srcRGB) || kr.SRC_ALPHA,
                      blendDstFactor:
                        (N && T.func.dstRGB) || kr.ONE_MINUS_SRC_ALPHA,
                    },
                    alphaBlendState: {
                      blendMode: (N && T.equation.alpha) || Ro.ADD,
                      blendSrcFactor: (N && T.func.srcAlpha) || kr.ONE,
                      blendDstFactor: (N && T.func.dstAlpha) || kr.ONE,
                    },
                  },
            ],
            blendConstant: N ? Tv : void 0,
            depthWrite: v,
            depthCompare: (v && f.func) || ui.LESS,
            cullMode: (x && E.face) || il.NONE,
            stencilWrite: L,
            stencilFront: {
              compare: L ? I.func.cmp : ui.ALWAYS,
              passOp: I.opFront.zpass,
              failOp: I.opFront.fail,
              depthFailOp: I.opFront.zfail,
              mask: I.opFront.mask,
            },
            stencilBack: {
              compare: L ? I.func.cmp : ui.ALWAYS,
              passOp: I.opBack.zpass,
              failOp: I.opBack.fail,
              depthFailOp: I.opBack.zfail,
              mask: I.opBack.mask,
            },
          },
        });
      return (
        L &&
          !Sb((n = h == null ? void 0 : h.func) == null ? void 0 : n.ref) &&
          (F.stencilFuncReference = h.func.ref),
        F
      );
    }
    updateAttributesAndElements() {}
    updateAttributes() {}
    addUniforms(t) {
      this.uniforms = H0(H0({}, this.uniforms), this.extractUniforms(t));
    }
    draw(t, e) {
      const n = H0(H0({}, this.options), t),
        {
          count: r = 0,
          instances: o,
          elements: l,
          uniforms: a = {},
          uniformBuffers: h,
          textures: f,
        } = n;
      this.uniforms = H0(H0({}, this.uniforms), this.extractUniforms(a));
      const {
        renderPass: v,
        currentFramebuffer: E,
        width: x,
        height: T,
      } = this.service;
      this.pipeline = this.createPipeline(n, e);
      const N = this.service.device,
        I = N.swapChainHeight;
      if (
        ((N.swapChainHeight = (E == null ? void 0 : E.height) || T),
        v.setViewport(
          0,
          0,
          (E == null ? void 0 : E.width) || x,
          (E == null ? void 0 : E.height) || T
        ),
        (N.swapChainHeight = I),
        v.setPipeline(this.pipeline),
        Sb(this.pipeline.stencilFuncReference) ||
          v.setStencilReference(this.pipeline.stencilFuncReference),
        v.setVertexInput(
          this.inputLayout,
          this.vertexBuffers.map((L) => ({ buffer: L })),
          l ? { buffer: this.indexBuffer, offset: 0 } : null
        ),
        h &&
          (this.bindings = N.createBindings({
            pipeline: this.pipeline,
            uniformBufferBindings: h.map((L, F) => {
              const X = L;
              return { binding: F, buffer: X.get(), size: X.size };
            }),
            samplerBindings:
              f == null
                ? void 0
                : f.map((L) => ({ texture: L.texture, sampler: L.sampler })),
          })),
        this.bindings &&
          (v.setBindings(this.bindings),
          Object.keys(this.uniforms).forEach((L) => {
            const F = this.uniforms[L];
            F instanceof bA
              ? (this.uniforms[L] = F.get())
              : F instanceof EA && (this.uniforms[L] = F.get().texture);
          }),
          this.program.setUniformsLegacy(this.uniforms)),
        l)
      ) {
        const L = l.count;
        L === 0 ? v.draw(r, o) : v.drawIndexed(L, o);
      } else v.draw(r, o);
    }
    destroy() {
      var t, e, n;
      (t = this.vertexBuffers) == null || t.forEach((r) => r.destroy()),
        (e = this.indexBuffer) == null || e.destroy(),
        (n = this.bindings) == null || n.destroy(),
        this.pipeline.destroy(),
        (this.destroyed = !0);
    }
    initDepthDrawParams({ depth: t }) {
      if (t)
        return {
          enable: t.enable === void 0 ? !0 : !!t.enable,
          mask: t.mask === void 0 ? !0 : !!t.mask,
          func: NX[t.func || H.LESS],
          range: t.range || [0, 1],
        };
    }
    getBlendDrawParams({ blend: t }) {
      const {
        enable: e,
        func: n,
        equation: r,
        color: o = [0, 0, 0, 0],
      } = t || {};
      return {
        enable: !!e,
        func: {
          srcRGB: Qm[(n && n.srcRGB) || H.SRC_ALPHA],
          srcAlpha: Qm[(n && n.srcAlpha) || H.SRC_ALPHA],
          dstRGB: Qm[(n && n.dstRGB) || H.ONE_MINUS_SRC_ALPHA],
          dstAlpha: Qm[(n && n.dstAlpha) || H.ONE_MINUS_SRC_ALPHA],
        },
        equation: {
          rgb: yb[(r && r.rgb) || H.FUNC_ADD],
          alpha: yb[(r && r.alpha) || H.FUNC_ADD],
        },
        color: o,
      };
    }
    getStencilDrawParams({ stencil: t }) {
      const {
        enable: e,
        mask: n = 4294967295,
        func: r = { cmp: H.ALWAYS, ref: 0, mask: 4294967295 },
        opFront: o = { fail: H.KEEP, zfail: H.KEEP, zpass: H.KEEP },
        opBack: l = { fail: H.KEEP, zfail: H.KEEP, zpass: H.KEEP },
      } = t || {};
      return {
        enable: !!e,
        mask: n,
        func: qX(H0({}, r), { cmp: IX[r.cmp] }),
        opFront: {
          fail: np[o.fail],
          zfail: np[o.zfail],
          zpass: np[o.zpass],
          mask: r.mask,
        },
        opBack: {
          fail: np[l.fail],
          zfail: np[l.zfail],
          zpass: np[l.zpass],
          mask: r.mask,
        },
      };
    }
    initCullDrawParams({ cull: t }) {
      if (t) {
        const { enable: e, face: n = H.BACK } = t;
        return { enable: !!e, face: RX[n] };
      }
    }
    extractUniforms(t) {
      const e = {};
      return (
        Object.keys(t).forEach((n) => {
          this.extractUniformsRecursively(n, t[n], e, "");
        }),
        e
      );
    }
    extractUniformsRecursively(t, e, n, r) {
      if (
        e === null ||
        typeof e == "number" ||
        typeof e == "boolean" ||
        (Array.isArray(e) && typeof e[0] == "number") ||
        KX(e) ||
        e === "" ||
        "resize" in e
      ) {
        n[`${r && r + "."}${t}`] = e;
        return;
      }
      $X(e) &&
        Object.keys(e).forEach((o) => {
          this.extractUniformsRecursively(o, e[o], n, `${r && r + "."}${t}`);
        }),
        Array.isArray(e) &&
          e.forEach((o, l) => {
            Object.keys(o).forEach((a) => {
              this.extractUniformsRecursively(
                a,
                o[a],
                n,
                `${r && r + "."}${t}[${l}]`
              );
            });
          });
    }
  };
function JX(t) {
  return typeof WebGL2RenderingContext < "u" &&
    t instanceof WebGL2RenderingContext
    ? !0
    : !!(t && t._version === 2);
}
var H2 = (t, e, n) =>
    new Promise((r, o) => {
      var l = (f) => {
          try {
            h(n.next(f));
          } catch (v) {
            o(v);
          }
        },
        a = (f) => {
          try {
            h(n.throw(f));
          } catch (v) {
            o(v);
          }
        },
        h = (f) => (f.done ? r(f.value) : Promise.resolve(f.value).then(l, a));
      h((n = n.apply(t, e)).next());
    }),
  { isUndefined: eg } = Ka,
  eG = class {
    constructor() {
      (this.uniformBuffers = []),
        (this.queryVerdorInfo = () =>
          this.device.queryVendorInfo().platformString),
        (this.createModel = (t) => new QX(this.device, t, this)),
        (this.createAttribute = (t) => new TX(this.device, t)),
        (this.createBuffer = (t) => new OX(this.device, t)),
        (this.createElements = (t) => new jX(this.device, t)),
        (this.createTexture2D = (t) => new bA(this.device, t)),
        (this.createFramebuffer = (t) => new EA(this.device, t)),
        (this.useFramebuffer = (t, e) => {
          (this.currentFramebuffer = t),
            this.beginFrame(),
            e(),
            this.endFrame(),
            (this.currentFramebuffer = null);
        }),
        (this.useFramebufferAsync = (t, e) =>
          H2(this, null, function* () {
            (this.currentFramebuffer = t),
              (this.preRenderPass = this.renderPass),
              this.beginFrame(),
              yield e(),
              this.endFrame(),
              (this.currentFramebuffer = null),
              (this.renderPass = this.preRenderPass);
          })),
        (this.clear = (t) => {
          const { color: e, depth: n, stencil: r, framebuffer: o = null } = t;
          if (o) o.clearOptions = { color: e, depth: n, stencil: r };
          else {
            const l = this.queryVerdorInfo();
            if (l === "WebGL1") {
              const a = this.getGLContext();
              eg(r)
                ? eg(n) || (a.clearDepth(n), a.clear(a.DEPTH_BUFFER_BIT))
                : (a.clearStencil(r), a.clear(a.STENCIL_BUFFER_BIT));
            } else if (l === "WebGL2") {
              const a = this.getGLContext();
              eg(r)
                ? eg(n) || a.clearBufferfv(a.DEPTH, 0, [n])
                : a.clearBufferiv(a.STENCIL, 0, [r]);
            }
          }
        }),
        (this.viewport = ({ width: t, height: e }) => {
          this.swapChain.configureSwapChain(t, e),
            this.createMainColorDepthRT(t, e),
            (this.width = t),
            (this.height = e);
        }),
        (this.readPixels = (t) => {
          const { framebuffer: e, x: n, y: r, width: o, height: l } = t,
            a = this.device.createReadback(),
            h = e.colorTexture,
            f = a.readTextureSync(
              h,
              n,
              this.viewportOrigin === Uc.LOWER_LEFT ? r : this.height - r,
              o,
              l,
              new Uint8Array(o * l * 4)
            );
          if (this.viewportOrigin !== Uc.LOWER_LEFT)
            for (let v = 0; v < f.length; v += 4) {
              const E = f[v];
              (f[v] = f[v + 2]), (f[v + 2] = E);
            }
          return a.destroy(), f;
        }),
        (this.readPixelsAsync = (t) =>
          H2(this, null, function* () {
            const { framebuffer: e, x: n, y: r, width: o, height: l } = t,
              a = this.device.createReadback(),
              h = e.colorTexture,
              f = yield a.readTexture(
                h,
                n,
                this.viewportOrigin === Uc.LOWER_LEFT ? r : this.height - r,
                o,
                l,
                new Uint8Array(o * l * 4)
              );
            if (this.viewportOrigin !== Uc.LOWER_LEFT)
              for (let v = 0; v < f.length; v += 4) {
                const E = f[v];
                (f[v] = f[v + 2]), (f[v + 2] = E);
              }
            return a.destroy(), f;
          })),
        (this.getViewportSize = () => ({
          width: this.width,
          height: this.height,
        })),
        (this.getContainer = () => {
          var t;
          return (t = this.canvas) == null ? void 0 : t.parentElement;
        }),
        (this.getCanvas = () => this.canvas),
        (this.getGLContext = () => this.device.gl),
        (this.destroy = () => {
          var t;
          (this.canvas = null),
            (t = this.uniformBuffers) == null ||
              t.forEach((e) => {
                e.destroy();
              }),
            this.device.destroy(),
            this.renderCache.destroy();
        });
    }
    init(t, e) {
      return H2(this, null, function* () {
        const { enableWebGPU: n, shaderCompilerPath: r, antialias: o } = e;
        this.canvas = t;
        const a = yield (
          n
            ? new AX({ shaderCompilerPath: r })
            : new DW({
                targets: ["webgl2", "webgl1"],
                antialias: o,
                onContextLost(f) {
                  console.warn("context lost", f);
                },
                onContextCreationError(f) {
                  console.warn("context creation error", f);
                },
                onContextRestored(f) {
                  console.warn("context restored", f);
                },
              })
        ).createSwapChain(t);
        a.configureSwapChain(t.width, t.height),
          (this.device = a.getDevice()),
          (this.swapChain = a),
          (this.renderCache = new HX(this.device)),
          (this.currentFramebuffer = null),
          (this.viewportOrigin = this.device.queryVendorInfo().viewportOrigin);
        const h = this.device.gl;
        (this.extensionObject = {
          OES_texture_float: !JX(h) && this.device.OES_texture_float,
        }),
          this.createMainColorDepthRT(t.width, t.height);
      });
    }
    createMainColorDepthRT(t, e) {
      this.mainColorRT && this.mainColorRT.destroy(),
        this.mainDepthRT && this.mainDepthRT.destroy(),
        (this.mainColorRT = this.device.createRenderTargetFromTexture(
          this.device.createTexture({
            format: ze.U8_RGBA_RT,
            width: t,
            height: e,
            usage: vs.RENDER_TARGET,
          })
        )),
        (this.mainDepthRT = this.device.createRenderTargetFromTexture(
          this.device.createTexture({
            format: ze.D24_S8,
            width: t,
            height: e,
            usage: vs.RENDER_TARGET,
          })
        ));
    }
    beginFrame() {
      this.device.beginFrame();
      const {
          currentFramebuffer: t,
          swapChain: e,
          mainColorRT: n,
          mainDepthRT: r,
        } = this,
        o = t ? t.colorRenderTarget : n,
        l = t ? null : e.getOnscreenTexture(),
        a = t ? t.depthRenderTarget : r,
        {
          color: h = [0, 0, 0, 0],
          depth: f = 1,
          stencil: v = 0,
        } = (t == null ? void 0 : t.clearOptions) || {},
        E = o ? j1(h[0] * 255, h[1] * 255, h[2] * 255, h[3]) : Tv,
        x = a ? f : void 0,
        T = a ? v : void 0,
        N = this.device.createRenderPass({
          colorAttachment: [o],
          colorResolveTo: [l],
          colorClearColor: [E],
          colorStore: [!0],
          depthStencilAttachment: a,
          depthClearValue: x,
          stencilClearValue: T,
        });
      this.renderPass = N;
    }
    endFrame() {
      this.device.submitPass(this.renderPass), this.device.endFrame();
    }
    getPointSizeRange() {
      const t = this.device.gl;
      return t.getParameter(t.ALIASED_POINT_SIZE_RANGE);
    }
    testExtension(t) {
      return !!this.getGLContext().getExtension(t);
    }
    setState() {}
    setBaseState() {}
    setCustomLayerDefaults() {}
    setDirty(t) {
      this.isDirty = t;
    }
    getDirty() {
      return this.isDirty;
    }
  },
  AA = { exports: {} };
(function (t, e) {
  (function (n, r) {
    t.exports = r();
  })(cv, function () {
    var n = function (D) {
        return (
          D instanceof Uint8Array ||
          D instanceof Uint16Array ||
          D instanceof Uint32Array ||
          D instanceof Int8Array ||
          D instanceof Int16Array ||
          D instanceof Int32Array ||
          D instanceof Float32Array ||
          D instanceof Float64Array ||
          D instanceof Uint8ClampedArray
        );
      },
      r = function (D, oe) {
        for (var be = Object.keys(oe), et = 0; et < be.length; ++et)
          D[be[et]] = oe[be[et]];
        return D;
      },
      o = `
`;
    function l(D) {
      return typeof atob < "u" ? atob(D) : "base64:" + D;
    }
    function a(D) {
      var oe = new Error("(regl) " + D);
      throw (console.error(oe), oe);
    }
    function h(D, oe) {
      D || a(oe);
    }
    function f(D) {
      return D ? ": " + D : "";
    }
    function v(D, oe, be) {
      D in oe ||
        a(
          "unknown parameter (" +
            D +
            ")" +
            f(be) +
            ". possible values: " +
            Object.keys(oe).join()
        );
    }
    function E(D, oe) {
      n(D) || a("invalid parameter type" + f(oe) + ". must be a typed array");
    }
    function x(D, oe) {
      switch (oe) {
        case "number":
          return typeof D == "number";
        case "object":
          return typeof D == "object";
        case "string":
          return typeof D == "string";
        case "boolean":
          return typeof D == "boolean";
        case "function":
          return typeof D == "function";
        case "undefined":
          return typeof D > "u";
        case "symbol":
          return typeof D == "symbol";
      }
    }
    function T(D, oe, be) {
      x(D, oe) ||
        a(
          "invalid parameter type" +
            f(be) +
            ". expected " +
            oe +
            ", got " +
            typeof D
        );
    }
    function N(D, oe) {
      (D >= 0 && (D | 0) === D) ||
        a(
          "invalid parameter type, (" +
            D +
            ")" +
            f(oe) +
            ". must be a nonnegative integer"
        );
    }
    function I(D, oe, be) {
      oe.indexOf(D) < 0 &&
        a("invalid value" + f(be) + ". must be one of: " + oe);
    }
    var L = [
      "gl",
      "canvas",
      "container",
      "attributes",
      "pixelRatio",
      "extensions",
      "optionalExtensions",
      "profile",
      "onDone",
    ];
    function F(D) {
      Object.keys(D).forEach(function (oe) {
        L.indexOf(oe) < 0 &&
          a(
            'invalid regl constructor argument "' +
              oe +
              '". must be one of ' +
              L
          );
      });
    }
    function X(D, oe) {
      for (D = D + ""; D.length < oe; ) D = " " + D;
      return D;
    }
    function G() {
      (this.name = "unknown"),
        (this.lines = []),
        (this.index = {}),
        (this.hasErrors = !1);
    }
    function K(D, oe) {
      (this.number = D), (this.line = oe), (this.errors = []);
    }
    function Q(D, oe, be) {
      (this.file = D), (this.line = oe), (this.message = be);
    }
    function ee() {
      var D = new Error(),
        oe = (D.stack || D).toString(),
        be = /compileProcedure.*\n\s*at.*\((.*)\)/.exec(oe);
      if (be) return be[1];
      var et = /compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(oe);
      return et ? et[1] : "unknown";
    }
    function Se() {
      var D = new Error(),
        oe = (D.stack || D).toString(),
        be = /at REGLCommand.*\n\s+at.*\((.*)\)/.exec(oe);
      if (be) return be[1];
      var et = /at REGLCommand.*\n\s+at\s+(.*)\n/.exec(oe);
      return et ? et[1] : "unknown";
    }
    function ue(D, oe) {
      var be = D.split(`
`),
        et = 1,
        vt = 0,
        tt = { unknown: new G(), 0: new G() };
      (tt.unknown.name = tt[0].name = oe || ee()),
        tt.unknown.lines.push(new K(0, ""));
      for (var Ye = 0; Ye < be.length; ++Ye) {
        var Dt = be[Ye],
          Rt = /^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Dt);
        if (Rt)
          switch (Rt[1]) {
            case "line":
              var Zt = /(\d+)(\s+\d+)?/.exec(Rt[2]);
              Zt &&
                ((et = Zt[1] | 0),
                Zt[2] && ((vt = Zt[2] | 0), vt in tt || (tt[vt] = new G())));
              break;
            case "define":
              var kt = /SHADER_NAME(_B64)?\s+(.*)$/.exec(Rt[2]);
              kt && (tt[vt].name = kt[1] ? l(kt[2]) : kt[2]);
              break;
          }
        tt[vt].lines.push(new K(et++, Dt));
      }
      return (
        Object.keys(tt).forEach(function (Wt) {
          var Kt = tt[Wt];
          Kt.lines.forEach(function (It) {
            Kt.index[It.number] = It;
          });
        }),
        tt
      );
    }
    function ke(D) {
      var oe = [];
      return (
        D.split(
          `
`
        ).forEach(function (be) {
          if (!(be.length < 5)) {
            var et = /^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(be);
            et
              ? oe.push(new Q(et[1] | 0, et[2] | 0, et[3].trim()))
              : be.length > 0 && oe.push(new Q("unknown", 0, be));
          }
        }),
        oe
      );
    }
    function ut(D, oe) {
      oe.forEach(function (be) {
        var et = D[be.file];
        if (et) {
          var vt = et.index[be.line];
          if (vt) {
            vt.errors.push(be), (et.hasErrors = !0);
            return;
          }
        }
        (D.unknown.hasErrors = !0), D.unknown.lines[0].errors.push(be);
      });
    }
    function Ve(D, oe, be, et, vt) {
      if (!D.getShaderParameter(oe, D.COMPILE_STATUS)) {
        var tt = D.getShaderInfoLog(oe),
          Ye = et === D.FRAGMENT_SHADER ? "fragment" : "vertex";
        Ht(be, "string", Ye + " shader source must be a string", vt);
        var Dt = ue(be, vt),
          Rt = ke(tt);
        ut(Dt, Rt),
          Object.keys(Dt).forEach(function (Zt) {
            var kt = Dt[Zt];
            if (!kt.hasErrors) return;
            var Wt = [""],
              Kt = [""];
            function It(Xt, We) {
              Wt.push(Xt), Kt.push(We || "");
            }
            It(
              "file number " +
                Zt +
                ": " +
                kt.name +
                `
`,
              "color:red;text-decoration:underline;font-weight:bold"
            ),
              kt.lines.forEach(function (Xt) {
                if (Xt.errors.length > 0) {
                  It(
                    X(Xt.number, 4) + "|  ",
                    "background-color:yellow; font-weight:bold"
                  ),
                    It(
                      Xt.line + o,
                      "color:red; background-color:yellow; font-weight:bold"
                    );
                  var We = 0;
                  Xt.errors.forEach(function (ct) {
                    var Bt = ct.message,
                      rn = /^\s*'(.*)'\s*:\s*(.*)$/.exec(Bt);
                    if (rn) {
                      var Tt = rn[1];
                      switch (((Bt = rn[2]), Tt)) {
                        case "assign":
                          Tt = "=";
                          break;
                      }
                      We = Math.max(Xt.line.indexOf(Tt, We), 0);
                    } else We = 0;
                    It(X("| ", 6)),
                      It(X("^^^", We + 3) + o, "font-weight:bold"),
                      It(X("| ", 6)),
                      It(Bt + o, "font-weight:bold");
                  }),
                    It(X("| ", 6) + o);
                } else It(X(Xt.number, 4) + "|  "), It(Xt.line + o, "color:red");
              }),
              typeof document < "u" && !window.chrome
                ? ((Kt[0] = Wt.join("%c")), console.log.apply(console, Kt))
                : console.log(Wt.join(""));
          }),
          h.raise("Error compiling " + Ye + " shader, " + Dt[0].name);
      }
    }
    function Ae(D, oe, be, et, vt) {
      if (!D.getProgramParameter(oe, D.LINK_STATUS)) {
        var tt = D.getProgramInfoLog(oe),
          Ye = ue(be, vt),
          Dt = ue(et, vt),
          Rt =
            'Error linking program with vertex shader, "' +
            Dt[0].name +
            '", and fragment shader "' +
            Ye[0].name +
            '"';
        typeof document < "u"
          ? console.log(
              "%c" + Rt + o + "%c" + tt,
              "color:red;text-decoration:underline;font-weight:bold",
              "color:red"
            )
          : console.log(Rt + o + tt),
          h.raise(Rt);
      }
    }
    function Be(D) {
      D._commandRef = ee();
    }
    function He(D, oe, be, et) {
      Be(D);
      function vt(Rt) {
        return Rt ? et.id(Rt) : 0;
      }
      (D._fragId = vt(D.static.frag)), (D._vertId = vt(D.static.vert));
      function tt(Rt, Zt) {
        Object.keys(Zt).forEach(function (kt) {
          Rt[et.id(kt)] = !0;
        });
      }
      var Ye = (D._uniformSet = {});
      tt(Ye, oe.static), tt(Ye, oe.dynamic);
      var Dt = (D._attributeSet = {});
      tt(Dt, be.static),
        tt(Dt, be.dynamic),
        (D._hasCount =
          "count" in D.static ||
          "count" in D.dynamic ||
          "elements" in D.static ||
          "elements" in D.dynamic);
    }
    function nt(D, oe) {
      var be = Se();
      a(
        D +
          " in command " +
          (oe || ee()) +
          (be === "unknown" ? "" : " called from " + be)
      );
    }
    function Ut(D, oe, be) {
      D || nt(oe, be || ee());
    }
    function Yt(D, oe, be, et) {
      D in oe ||
        nt(
          "unknown parameter (" +
            D +
            ")" +
            f(be) +
            ". possible values: " +
            Object.keys(oe).join(),
          et || ee()
        );
    }
    function Ht(D, oe, be, et) {
      x(D, oe) ||
        nt(
          "invalid parameter type" +
            f(be) +
            ". expected " +
            oe +
            ", got " +
            typeof D,
          et || ee()
        );
    }
    function On(D) {
      D();
    }
    function gn(D, oe, be) {
      D.texture
        ? I(
            D.texture._texture.internalformat,
            oe,
            "unsupported texture format for attachment"
          )
        : I(
            D.renderbuffer._renderbuffer.format,
            be,
            "unsupported renderbuffer format for attachment"
          );
    }
    var xn = 33071,
      Kn = 9728,
      er = 9984,
      _r = 9985,
      Nr = 9986,
      ir = 9987,
      $i = 5120,
      Tr = 5121,
      Fi = 5122,
      qe = 5123,
      $t = 5124,
      Cn = 5125,
      St = 5126,
      An = 32819,
      ar = 32820,
      yr = 33635,
      nr = 34042,
      Qn = 36193,
      Sr = {};
    (Sr[$i] = Sr[Tr] = 1),
      (Sr[Fi] = Sr[qe] = Sr[Qn] = Sr[yr] = Sr[An] = Sr[ar] = 2),
      (Sr[$t] = Sr[Cn] = Sr[St] = Sr[nr] = 4);
    function ta(D, oe) {
      return D === ar || D === An || D === yr ? 2 : D === nr ? 4 : Sr[D] * oe;
    }
    function ei(D) {
      return !(D & (D - 1)) && !!D;
    }
    function ri(D, oe, be) {
      var et,
        vt = oe.width,
        tt = oe.height,
        Ye = oe.channels;
      h(
        vt > 0 && vt <= be.maxTextureSize && tt > 0 && tt <= be.maxTextureSize,
        "invalid texture shape"
      ),
        (D.wrapS !== xn || D.wrapT !== xn) &&
          h(
            ei(vt) && ei(tt),
            "incompatible wrap mode for texture, both width and height must be power of 2"
          ),
        oe.mipmask === 1
          ? vt !== 1 &&
            tt !== 1 &&
            h(
              D.minFilter !== er &&
                D.minFilter !== Nr &&
                D.minFilter !== _r &&
                D.minFilter !== ir,
              "min filter requires mipmap"
            )
          : (h(
              ei(vt) && ei(tt),
              "texture must be a square power of 2 to support mipmapping"
            ),
            h(
              oe.mipmask === (vt << 1) - 1,
              "missing or incomplete mipmap data"
            )),
        oe.type === St &&
          (be.extensions.indexOf("oes_texture_float_linear") < 0 &&
            h(
              D.minFilter === Kn && D.magFilter === Kn,
              "filter not supported, must enable oes_texture_float_linear"
            ),
          h(
            !D.genMipmaps,
            "mipmap generation not supported with float textures"
          ));
      var Dt = oe.images;
      for (et = 0; et < 16; ++et)
        if (Dt[et]) {
          var Rt = vt >> et,
            Zt = tt >> et;
          h(oe.mipmask & (1 << et), "missing mipmap data");
          var kt = Dt[et];
          if (
            (h(
              kt.width === Rt && kt.height === Zt,
              "invalid shape for mip images"
            ),
            h(
              kt.format === oe.format &&
                kt.internalformat === oe.internalformat &&
                kt.type === oe.type,
              "incompatible type for mip image"
            ),
            !kt.compressed)
          )
            if (kt.data) {
              var Wt =
                Math.ceil((ta(kt.type, Ye) * Rt) / kt.unpackAlignment) *
                kt.unpackAlignment;
              h(
                kt.data.byteLength === Wt * Zt,
                "invalid data for image, buffer size is inconsistent with image format"
              );
            } else kt.element || kt.copy;
        } else
          D.genMipmaps ||
            h((oe.mipmask & (1 << et)) === 0, "extra mipmap data");
      oe.compressed &&
        h(
          !D.genMipmaps,
          "mipmap generation for compressed images not supported"
        );
    }
    function Ra(D, oe, be, et) {
      var vt = D.width,
        tt = D.height,
        Ye = D.channels;
      h(
        vt > 0 && vt <= et.maxTextureSize && tt > 0 && tt <= et.maxTextureSize,
        "invalid texture shape"
      ),
        h(vt === tt, "cube map must be square"),
        h(
          oe.wrapS === xn && oe.wrapT === xn,
          "wrap mode not supported by cube map"
        );
      for (var Dt = 0; Dt < be.length; ++Dt) {
        var Rt = be[Dt];
        h(
          Rt.width === vt && Rt.height === tt,
          "inconsistent cube map face shape"
        ),
          oe.genMipmaps &&
            (h(
              !Rt.compressed,
              "can not generate mipmap for compressed textures"
            ),
            h(
              Rt.mipmask === 1,
              "can not specify mipmaps and generate mipmaps"
            ));
        for (var Zt = Rt.images, kt = 0; kt < 16; ++kt) {
          var Wt = Zt[kt];
          if (Wt) {
            var Kt = vt >> kt,
              It = tt >> kt;
            h(Rt.mipmask & (1 << kt), "missing mipmap data"),
              h(
                Wt.width === Kt && Wt.height === It,
                "invalid shape for mip images"
              ),
              h(
                Wt.format === D.format &&
                  Wt.internalformat === D.internalformat &&
                  Wt.type === D.type,
                "incompatible type for mip image"
              ),
              Wt.compressed ||
                (Wt.data
                  ? h(
                      Wt.data.byteLength ===
                        Kt * It * Math.max(ta(Wt.type, Ye), Wt.unpackAlignment),
                      "invalid data for image, buffer size is inconsistent with image format"
                    )
                  : Wt.element || Wt.copy);
          }
        }
      }
    }
    var le = r(h, {
        optional: On,
        raise: a,
        commandRaise: nt,
        command: Ut,
        parameter: v,
        commandParameter: Yt,
        constructor: F,
        type: T,
        commandType: Ht,
        isTypedArray: E,
        nni: N,
        oneOf: I,
        shaderError: Ve,
        linkError: Ae,
        callSite: Se,
        saveCommandRef: Be,
        saveDrawInfo: He,
        framebufferFormat: gn,
        guessCommand: ee,
        texture2D: ri,
        textureCube: Ra,
      }),
      Ia = 0,
      ts = 0;
    function Ma(D, oe) {
      (this.id = Ia++), (this.type = D), (this.data = oe);
    }
    function ys(D) {
      return D.replace(/\\/g, "\\\\").replace(/"/g, '\\"');
    }
    function di(D) {
      if (D.length === 0) return [];
      var oe = D.charAt(0),
        be = D.charAt(D.length - 1);
      if (D.length > 1 && oe === be && (oe === '"' || oe === "'"))
        return ['"' + ys(D.substr(1, D.length - 2)) + '"'];
      var et = /\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(D);
      if (et)
        return di(D.substr(0, et.index))
          .concat(di(et[1]))
          .concat(di(D.substr(et.index + et[0].length)));
      var vt = D.split(".");
      if (vt.length === 1) return ['"' + ys(D) + '"'];
      for (var tt = [], Ye = 0; Ye < vt.length; ++Ye)
        tt = tt.concat(di(vt[Ye]));
      return tt;
    }
    function Pa(D) {
      return "[" + di(D).join("][") + "]";
    }
    function yo(D, oe) {
      return new Ma(D, Pa(oe + ""));
    }
    function Oa(D) {
      return (typeof D == "function" && !D._reglType) || D instanceof Ma;
    }
    function Os(D, oe) {
      return typeof D == "function" ? new Ma(ts, D) : D;
    }
    var Wi = {
        DynamicVariable: Ma,
        define: yo,
        isDynamic: Oa,
        unbox: Os,
        accessor: Pa,
      },
      xs = {
        next:
          typeof requestAnimationFrame == "function"
            ? function (D) {
                return requestAnimationFrame(D);
              }
            : function (D) {
                return setTimeout(D, 16);
              },
        cancel:
          typeof cancelAnimationFrame == "function"
            ? function (D) {
                return cancelAnimationFrame(D);
              }
            : clearTimeout,
      },
      Mo =
        typeof performance < "u" && performance.now
          ? function () {
              return performance.now();
            }
          : function () {
              return +new Date();
            };
    function sl() {
      var D = { "": 0 },
        oe = [""];
      return {
        id: function (be) {
          var et = D[be];
          return et || ((et = D[be] = oe.length), oe.push(be), et);
        },
        str: function (be) {
          return oe[be];
        },
      };
    }
    function mc(D, oe, be) {
      var et = document.createElement("canvas");
      r(et.style, { border: 0, margin: 0, padding: 0, top: 0, left: 0 }),
        D.appendChild(et),
        D === document.body &&
          ((et.style.position = "absolute"),
          r(D.style, { margin: 0, padding: 0 }));
      function vt() {
        var Dt = window.innerWidth,
          Rt = window.innerHeight;
        if (D !== document.body) {
          var Zt = D.getBoundingClientRect();
          (Dt = Zt.right - Zt.left), (Rt = Zt.bottom - Zt.top);
        }
        (et.width = be * Dt),
          (et.height = be * Rt),
          r(et.style, { width: Dt + "px", height: Rt + "px" });
      }
      var tt;
      D !== document.body && typeof ResizeObserver == "function"
        ? ((tt = new ResizeObserver(function () {
            setTimeout(vt);
          })),
          tt.observe(D))
        : window.addEventListener("resize", vt, !1);
      function Ye() {
        tt ? tt.disconnect() : window.removeEventListener("resize", vt),
          D.removeChild(et);
      }
      return vt(), { canvas: et, onDestroy: Ye };
    }
    function ll(D, oe) {
      function be(et) {
        try {
          return D.getContext(et, oe);
        } catch {
          return null;
        }
      }
      return (
        be("webgl") || be("experimental-webgl") || be("webgl-experimental")
      );
    }
    function jc(D) {
      return (
        typeof D.nodeName == "string" &&
        typeof D.appendChild == "function" &&
        typeof D.getBoundingClientRect == "function"
      );
    }
    function cl(D) {
      return (
        typeof D.drawArrays == "function" || typeof D.drawElements == "function"
      );
    }
    function jo(D) {
      return typeof D == "string"
        ? D.split()
        : (le(Array.isArray(D), "invalid extension array"), D);
    }
    function Wo(D) {
      return typeof D == "string"
        ? (le(typeof document < "u", "not supported outside of DOM"),
          document.querySelector(D))
        : D;
    }
    function Ls(D) {
      var oe = D || {},
        be,
        et,
        vt,
        tt,
        Ye = {},
        Dt = [],
        Rt = [],
        Zt = typeof window > "u" ? 1 : window.devicePixelRatio,
        kt = !1,
        Wt = function (Xt) {
          Xt && le.raise(Xt);
        },
        Kt = function () {};
      if (
        (typeof oe == "string"
          ? (le(
              typeof document < "u",
              "selector queries only supported in DOM enviroments"
            ),
            (be = document.querySelector(oe)),
            le(be, "invalid query string for element"))
          : typeof oe == "object"
          ? jc(oe)
            ? (be = oe)
            : cl(oe)
            ? ((tt = oe), (vt = tt.canvas))
            : (le.constructor(oe),
              "gl" in oe
                ? (tt = oe.gl)
                : "canvas" in oe
                ? (vt = Wo(oe.canvas))
                : "container" in oe && (et = Wo(oe.container)),
              "attributes" in oe &&
                ((Ye = oe.attributes),
                le.type(Ye, "object", "invalid context attributes")),
              "extensions" in oe && (Dt = jo(oe.extensions)),
              "optionalExtensions" in oe && (Rt = jo(oe.optionalExtensions)),
              "onDone" in oe &&
                (le.type(
                  oe.onDone,
                  "function",
                  "invalid or missing onDone callback"
                ),
                (Wt = oe.onDone)),
              "profile" in oe && (kt = !!oe.profile),
              "pixelRatio" in oe &&
                ((Zt = +oe.pixelRatio), le(Zt > 0, "invalid pixel ratio")))
          : le.raise("invalid arguments to regl"),
        be && (be.nodeName.toLowerCase() === "canvas" ? (vt = be) : (et = be)),
        !tt)
      ) {
        if (!vt) {
          le(
            typeof document < "u",
            "must manually specify webgl context outside of DOM environments"
          );
          var It = mc(et || document.body, Wt, Zt);
          if (!It) return null;
          (vt = It.canvas), (Kt = It.onDestroy);
        }
        Ye.premultipliedAlpha === void 0 && (Ye.premultipliedAlpha = !0),
          (tt = ll(vt, Ye));
      }
      return tt
        ? {
            gl: tt,
            canvas: vt,
            container: et,
            extensions: Dt,
            optionalExtensions: Rt,
            pixelRatio: Zt,
            profile: kt,
            onDone: Wt,
            onDestroy: Kt,
          }
        : (Kt(),
          Wt(
            "webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"
          ),
          null);
    }
    function gc(D, oe) {
      var be = {};
      function et(Ye) {
        le.type(Ye, "string", "extension name must be string");
        var Dt = Ye.toLowerCase(),
          Rt;
        try {
          Rt = be[Dt] = D.getExtension(Dt);
        } catch {}
        return !!Rt;
      }
      for (var vt = 0; vt < oe.extensions.length; ++vt) {
        var tt = oe.extensions[vt];
        if (!et(tt))
          return (
            oe.onDestroy(),
            oe.onDone(
              '"' +
                tt +
                '" extension is not supported by the current WebGL context, try upgrading your system or a different browser'
            ),
            null
          );
      }
      return (
        oe.optionalExtensions.forEach(et),
        {
          extensions: be,
          restore: function () {
            Object.keys(be).forEach(function (Ye) {
              if (be[Ye] && !et(Ye))
                throw new Error("(regl): error restoring extension " + Ye);
            });
          },
        }
      );
    }
    function Wr(D, oe) {
      for (var be = Array(D), et = 0; et < D; ++et) be[et] = oe(et);
      return be;
    }
    var z = 5120,
      j = 5121,
      Z = 5122,
      ae = 5123,
      fe = 5124,
      Pe = 5125,
      Fe = 5126;
    function te(D) {
      for (var oe = 16; oe <= 1 << 28; oe *= 16) if (D <= oe) return oe;
      return 0;
    }
    function ye(D) {
      var oe, be;
      return (
        (oe = (D > 65535) << 4),
        (D >>>= oe),
        (be = (D > 255) << 3),
        (D >>>= be),
        (oe |= be),
        (be = (D > 15) << 2),
        (D >>>= be),
        (oe |= be),
        (be = (D > 3) << 1),
        (D >>>= be),
        (oe |= be),
        oe | (D >> 1)
      );
    }
    function Xe() {
      var D = Wr(8, function () {
        return [];
      });
      function oe(tt) {
        var Ye = te(tt),
          Dt = D[ye(Ye) >> 2];
        return Dt.length > 0 ? Dt.pop() : new ArrayBuffer(Ye);
      }
      function be(tt) {
        D[ye(tt.byteLength) >> 2].push(tt);
      }
      function et(tt, Ye) {
        var Dt = null;
        switch (tt) {
          case z:
            Dt = new Int8Array(oe(Ye), 0, Ye);
            break;
          case j:
            Dt = new Uint8Array(oe(Ye), 0, Ye);
            break;
          case Z:
            Dt = new Int16Array(oe(2 * Ye), 0, Ye);
            break;
          case ae:
            Dt = new Uint16Array(oe(2 * Ye), 0, Ye);
            break;
          case fe:
            Dt = new Int32Array(oe(4 * Ye), 0, Ye);
            break;
          case Pe:
            Dt = new Uint32Array(oe(4 * Ye), 0, Ye);
            break;
          case Fe:
            Dt = new Float32Array(oe(4 * Ye), 0, Ye);
            break;
          default:
            return null;
        }
        return Dt.length !== Ye ? Dt.subarray(0, Ye) : Dt;
      }
      function vt(tt) {
        be(tt.buffer);
      }
      return { alloc: oe, free: be, allocType: et, freeType: vt };
    }
    var gt = Xe();
    gt.zero = Xe();
    var Ot = 3408,
      dt = 3410,
      Nt = 3411,
      yn = 3412,
      mn = 3413,
      pt = 3414,
      on = 3415,
      Gt = 33901,
      qt = 33902,
      or = 3379,
      nn = 3386,
      wr = 34921,
      ti = 36347,
      xr = 36348,
      Or = 35661,
      sr = 35660,
      Xi = 34930,
      Rr = 36349,
      ni = 34076,
      zr = 34024,
      lr = 7936,
      br = 7937,
      ja = 7938,
      Rl = 35724,
      ki = 34047,
      Ai = 36063,
      Il = 34852,
      ns = 3553,
      yi = 34067,
      ul = 34069,
      va = 33984,
      xi = 6408,
      Gi = 5126,
      hi = 5121,
      lo = 36160,
      Qa = 36053,
      Au = 36064,
      Po = 16384,
      l0 = function (D, oe) {
        var be = 1;
        oe.ext_texture_filter_anisotropic && (be = D.getParameter(ki));
        var et = 1,
          vt = 1;
        oe.webgl_draw_buffers &&
          ((et = D.getParameter(Il)), (vt = D.getParameter(Ai)));
        var tt = !!oe.oes_texture_float;
        if (tt) {
          var Ye = D.createTexture();
          D.bindTexture(ns, Ye), D.texImage2D(ns, 0, xi, 1, 1, 0, xi, Gi, null);
          var Dt = D.createFramebuffer();
          if (
            (D.bindFramebuffer(lo, Dt),
            D.framebufferTexture2D(lo, Au, ns, Ye, 0),
            D.bindTexture(ns, null),
            D.checkFramebufferStatus(lo) !== Qa)
          )
            tt = !1;
          else {
            D.viewport(0, 0, 1, 1), D.clearColor(1, 0, 0, 1), D.clear(Po);
            var Rt = gt.allocType(Gi, 4);
            D.readPixels(0, 0, 1, 1, xi, Gi, Rt),
              D.getError()
                ? (tt = !1)
                : (D.deleteFramebuffer(Dt),
                  D.deleteTexture(Ye),
                  (tt = Rt[0] === 1)),
              gt.freeType(Rt);
          }
        }
        var Zt =
            typeof navigator < "u" &&
            (/MSIE/.test(navigator.userAgent) ||
              /Trident\//.test(navigator.appVersion) ||
              /Edge/.test(navigator.userAgent)),
          kt = !0;
        if (!Zt) {
          var Wt = D.createTexture(),
            Kt = gt.allocType(hi, 36);
          D.activeTexture(va),
            D.bindTexture(yi, Wt),
            D.texImage2D(ul, 0, xi, 3, 3, 0, xi, hi, Kt),
            gt.freeType(Kt),
            D.bindTexture(yi, null),
            D.deleteTexture(Wt),
            (kt = !D.getError());
        }
        return {
          colorBits: [
            D.getParameter(dt),
            D.getParameter(Nt),
            D.getParameter(yn),
            D.getParameter(mn),
          ],
          depthBits: D.getParameter(pt),
          stencilBits: D.getParameter(on),
          subpixelBits: D.getParameter(Ot),
          extensions: Object.keys(oe).filter(function (It) {
            return !!oe[It];
          }),
          maxAnisotropic: be,
          maxDrawbuffers: et,
          maxColorAttachments: vt,
          pointSizeDims: D.getParameter(Gt),
          lineWidthDims: D.getParameter(qt),
          maxViewportDims: D.getParameter(nn),
          maxCombinedTextureUnits: D.getParameter(Or),
          maxCubeMapSize: D.getParameter(ni),
          maxRenderbufferSize: D.getParameter(zr),
          maxTextureUnits: D.getParameter(Xi),
          maxTextureSize: D.getParameter(or),
          maxAttributes: D.getParameter(wr),
          maxVertexUniforms: D.getParameter(ti),
          maxVertexTextureUnits: D.getParameter(sr),
          maxVaryingVectors: D.getParameter(xr),
          maxFragmentUniforms: D.getParameter(Rr),
          glsl: D.getParameter(Rl),
          renderer: D.getParameter(br),
          vendor: D.getParameter(lr),
          version: D.getParameter(ja),
          readFloat: tt,
          npotTextureCube: kt,
        };
      };
    function Y(D) {
      return (
        !!D &&
        typeof D == "object" &&
        Array.isArray(D.shape) &&
        Array.isArray(D.stride) &&
        typeof D.offset == "number" &&
        D.shape.length === D.stride.length &&
        (Array.isArray(D.data) || n(D.data))
      );
    }
    var ie = function (D) {
        return Object.keys(D).map(function (oe) {
          return D[oe];
        });
      },
      Re = { shape: La, flatten: Ki };
    function rt(D, oe, be) {
      for (var et = 0; et < oe; ++et) be[et] = D[et];
    }
    function Vt(D, oe, be, et) {
      for (var vt = 0, tt = 0; tt < oe; ++tt)
        for (var Ye = D[tt], Dt = 0; Dt < be; ++Dt) et[vt++] = Ye[Dt];
    }
    function Nn(D, oe, be, et, vt, tt) {
      for (var Ye = tt, Dt = 0; Dt < oe; ++Dt)
        for (var Rt = D[Dt], Zt = 0; Zt < be; ++Zt)
          for (var kt = Rt[Zt], Wt = 0; Wt < et; ++Wt) vt[Ye++] = kt[Wt];
    }
    function Br(D, oe, be, et, vt) {
      for (var tt = 1, Ye = be + 1; Ye < oe.length; ++Ye) tt *= oe[Ye];
      var Dt = oe[be];
      if (oe.length - be === 4) {
        var Rt = oe[be + 1],
          Zt = oe[be + 2],
          kt = oe[be + 3];
        for (Ye = 0; Ye < Dt; ++Ye) Nn(D[Ye], Rt, Zt, kt, et, vt), (vt += tt);
      } else for (Ye = 0; Ye < Dt; ++Ye) Br(D[Ye], oe, be + 1, et, vt), (vt += tt);
    }
    function Ki(D, oe, be, et) {
      var vt = 1;
      if (oe.length) for (var tt = 0; tt < oe.length; ++tt) vt *= oe[tt];
      else vt = 0;
      var Ye = et || gt.allocType(be, vt);
      switch (oe.length) {
        case 0:
          break;
        case 1:
          rt(D, oe[0], Ye);
          break;
        case 2:
          Vt(D, oe[0], oe[1], Ye);
          break;
        case 3:
          Nn(D, oe[0], oe[1], oe[2], Ye, 0);
          break;
        default:
          Br(D, oe, 0, Ye, 0);
      }
      return Ye;
    }
    function La(D) {
      for (var oe = [], be = D; be.length; be = be[0]) oe.push(be.length);
      return oe;
    }
    var _a = {
        "[object Int8Array]": 5120,
        "[object Int16Array]": 5122,
        "[object Int32Array]": 5124,
        "[object Uint8Array]": 5121,
        "[object Uint8ClampedArray]": 5121,
        "[object Uint16Array]": 5123,
        "[object Uint32Array]": 5125,
        "[object Float32Array]": 5126,
        "[object Float64Array]": 5121,
        "[object ArrayBuffer]": 5121,
      },
      rs = 5120,
      dh = 5122,
      hh = 5124,
      Wc = 5121,
      c0 = 5123,
      Tu = 5125,
      ph = 5126,
      sd = 5126,
      Wa = {
        int8: rs,
        int16: dh,
        int32: hh,
        uint8: Wc,
        uint16: c0,
        uint32: Tu,
        float: ph,
        float32: sd,
      },
      Ml = 35048,
      Pl = 35040,
      Ds = { dynamic: Ml, stream: Pl, static: 35044 },
      Bs = Re.flatten,
      dl = Re.shape,
      Su = 35044,
      Oo = 35040,
      Ui = 5121,
      Ol = 5126,
      hl = [];
    (hl[5120] = 1),
      (hl[5122] = 2),
      (hl[5124] = 4),
      (hl[5121] = 1),
      (hl[5123] = 2),
      (hl[5125] = 4),
      (hl[5126] = 4);
    function ld(D) {
      return _a[Object.prototype.toString.call(D)] | 0;
    }
    function fh(D, oe) {
      for (var be = 0; be < oe.length; ++be) D[be] = oe[be];
    }
    function cd(D, oe, be, et, vt, tt, Ye) {
      for (var Dt = 0, Rt = 0; Rt < be; ++Rt)
        for (var Zt = 0; Zt < et; ++Zt) D[Dt++] = oe[vt * Rt + tt * Zt + Ye];
    }
    function u0(D, oe, be, et) {
      var vt = 0,
        tt = {};
      function Ye(We) {
        (this.id = vt++),
          (this.buffer = D.createBuffer()),
          (this.type = We),
          (this.usage = Su),
          (this.byteLength = 0),
          (this.dimension = 1),
          (this.dtype = Ui),
          (this.persistentData = null),
          be.profile && (this.stats = { size: 0 });
      }
      (Ye.prototype.bind = function () {
        D.bindBuffer(this.type, this.buffer);
      }),
        (Ye.prototype.destroy = function () {
          Kt(this);
        });
      var Dt = [];
      function Rt(We, ct) {
        var Bt = Dt.pop();
        return Bt || (Bt = new Ye(We)), Bt.bind(), Wt(Bt, ct, Oo, 0, 1, !1), Bt;
      }
      function Zt(We) {
        Dt.push(We);
      }
      function kt(We, ct, Bt) {
        (We.byteLength = ct.byteLength), D.bufferData(We.type, ct, Bt);
      }
      function Wt(We, ct, Bt, rn, Tt, ln) {
        var Pt;
        if (((We.usage = Bt), Array.isArray(ct))) {
          if (((We.dtype = rn || Ol), ct.length > 0)) {
            var an;
            if (Array.isArray(ct[0])) {
              Pt = dl(ct);
              for (var wt = 1, en = 1; en < Pt.length; ++en) wt *= Pt[en];
              (We.dimension = wt),
                (an = Bs(ct, Pt, We.dtype)),
                kt(We, an, Bt),
                ln ? (We.persistentData = an) : gt.freeType(an);
            } else if (typeof ct[0] == "number") {
              We.dimension = Tt;
              var Fn = gt.allocType(We.dtype, ct.length);
              fh(Fn, ct),
                kt(We, Fn, Bt),
                ln ? (We.persistentData = Fn) : gt.freeType(Fn);
            } else
              n(ct[0])
                ? ((We.dimension = ct[0].length),
                  (We.dtype = rn || ld(ct[0]) || Ol),
                  (an = Bs(ct, [ct.length, ct[0].length], We.dtype)),
                  kt(We, an, Bt),
                  ln ? (We.persistentData = an) : gt.freeType(an))
                : le.raise("invalid buffer data");
          }
        } else if (n(ct))
          (We.dtype = rn || ld(ct)),
            (We.dimension = Tt),
            kt(We, ct, Bt),
            ln &&
              (We.persistentData = new Uint8Array(new Uint8Array(ct.buffer)));
        else if (Y(ct)) {
          Pt = ct.shape;
          var rr = ct.stride,
            tn = ct.offset,
            Lt = 0,
            _t = 0,
            kn = 0,
            Er = 0;
          Pt.length === 1
            ? ((Lt = Pt[0]), (_t = 1), (kn = rr[0]), (Er = 0))
            : Pt.length === 2
            ? ((Lt = Pt[0]), (_t = Pt[1]), (kn = rr[0]), (Er = rr[1]))
            : le.raise("invalid shape"),
            (We.dtype = rn || ld(ct.data) || Ol),
            (We.dimension = _t);
          var cn = gt.allocType(We.dtype, Lt * _t);
          cd(cn, ct.data, Lt, _t, kn, Er, tn),
            kt(We, cn, Bt),
            ln ? (We.persistentData = cn) : gt.freeType(cn);
        } else
          ct instanceof ArrayBuffer
            ? ((We.dtype = Ui),
              (We.dimension = Tt),
              kt(We, ct, Bt),
              ln && (We.persistentData = new Uint8Array(new Uint8Array(ct))))
            : le.raise("invalid buffer data");
      }
      function Kt(We) {
        oe.bufferCount--, et(We);
        var ct = We.buffer;
        le(ct, "buffer must not be deleted already"),
          D.deleteBuffer(ct),
          (We.buffer = null),
          delete tt[We.id];
      }
      function It(We, ct, Bt, rn) {
        oe.bufferCount++;
        var Tt = new Ye(ct);
        tt[Tt.id] = Tt;
        function ln(wt) {
          var en = Su,
            Fn = null,
            rr = 0,
            tn = 0,
            Lt = 1;
          return (
            Array.isArray(wt) || n(wt) || Y(wt) || wt instanceof ArrayBuffer
              ? (Fn = wt)
              : typeof wt == "number"
              ? (rr = wt | 0)
              : wt &&
                (le.type(
                  wt,
                  "object",
                  "buffer arguments must be an object, a number or an array"
                ),
                "data" in wt &&
                  (le(
                    Fn === null || Array.isArray(Fn) || n(Fn) || Y(Fn),
                    "invalid data for buffer"
                  ),
                  (Fn = wt.data)),
                "usage" in wt &&
                  (le.parameter(wt.usage, Ds, "invalid buffer usage"),
                  (en = Ds[wt.usage])),
                "type" in wt &&
                  (le.parameter(wt.type, Wa, "invalid buffer type"),
                  (tn = Wa[wt.type])),
                "dimension" in wt &&
                  (le.type(wt.dimension, "number", "invalid dimension"),
                  (Lt = wt.dimension | 0)),
                "length" in wt &&
                  (le.nni(rr, "buffer length must be a nonnegative integer"),
                  (rr = wt.length | 0))),
            Tt.bind(),
            Fn
              ? Wt(Tt, Fn, en, tn, Lt, rn)
              : (rr && D.bufferData(Tt.type, rr, en),
                (Tt.dtype = tn || Ui),
                (Tt.usage = en),
                (Tt.dimension = Lt),
                (Tt.byteLength = rr)),
            be.profile && (Tt.stats.size = Tt.byteLength * hl[Tt.dtype]),
            ln
          );
        }
        function Pt(wt, en) {
          le(
            en + wt.byteLength <= Tt.byteLength,
            "invalid buffer subdata call, buffer is too small.  Can't write data of size " +
              wt.byteLength +
              " starting from offset " +
              en +
              " to a buffer of size " +
              Tt.byteLength
          ),
            D.bufferSubData(Tt.type, en, wt);
        }
        function an(wt, en) {
          var Fn = (en || 0) | 0,
            rr;
          if ((Tt.bind(), n(wt) || wt instanceof ArrayBuffer)) Pt(wt, Fn);
          else if (Array.isArray(wt)) {
            if (wt.length > 0)
              if (typeof wt[0] == "number") {
                var tn = gt.allocType(Tt.dtype, wt.length);
                fh(tn, wt), Pt(tn, Fn), gt.freeType(tn);
              } else if (Array.isArray(wt[0]) || n(wt[0])) {
                rr = dl(wt);
                var Lt = Bs(wt, rr, Tt.dtype);
                Pt(Lt, Fn), gt.freeType(Lt);
              } else le.raise("invalid buffer data");
          } else if (Y(wt)) {
            rr = wt.shape;
            var _t = wt.stride,
              kn = 0,
              Er = 0,
              cn = 0,
              mr = 0;
            rr.length === 1
              ? ((kn = rr[0]), (Er = 1), (cn = _t[0]), (mr = 0))
              : rr.length === 2
              ? ((kn = rr[0]), (Er = rr[1]), (cn = _t[0]), (mr = _t[1]))
              : le.raise("invalid shape");
            var tr = Array.isArray(wt.data) ? Tt.dtype : ld(wt.data),
              Zn = gt.allocType(tr, kn * Er);
            cd(Zn, wt.data, kn, Er, cn, mr, wt.offset),
              Pt(Zn, Fn),
              gt.freeType(Zn);
          } else le.raise("invalid data for buffer subdata");
          return ln;
        }
        return (
          Bt || ln(We),
          (ln._reglType = "buffer"),
          (ln._buffer = Tt),
          (ln.subdata = an),
          be.profile && (ln.stats = Tt.stats),
          (ln.destroy = function () {
            Kt(Tt);
          }),
          ln
        );
      }
      function Xt() {
        ie(tt).forEach(function (We) {
          (We.buffer = D.createBuffer()),
            D.bindBuffer(We.type, We.buffer),
            D.bufferData(We.type, We.persistentData || We.byteLength, We.usage);
        });
      }
      return (
        be.profile &&
          (oe.getTotalBufferSize = function () {
            var We = 0;
            return (
              Object.keys(tt).forEach(function (ct) {
                We += tt[ct].stats.size;
              }),
              We
            );
          }),
        {
          create: It,
          createStream: Rt,
          destroyStream: Zt,
          clear: function () {
            ie(tt).forEach(Kt), Dt.forEach(Kt);
          },
          getBuffer: function (We) {
            return We && We._buffer instanceof Ye ? We._buffer : null;
          },
          restore: Xt,
          _initBuffer: Wt,
        }
      );
    }
    var d0 = 0,
      h0 = 0,
      mh = 1,
      gh = 1,
      jp = 4,
      wu = 4,
      Fs = {
        points: d0,
        point: h0,
        lines: mh,
        line: gh,
        triangles: jp,
        triangle: wu,
        "line loop": 2,
        "line strip": 3,
        "triangle strip": 5,
        "triangle fan": 6,
      },
      vh = 0,
      Xa = 1,
      vc = 4,
      Ll = 5120,
      Xo = 5121,
      Dl = 5122,
      is = 5123,
      pl = 5124,
      Go = 5125,
      fl = 34963,
      Bl = 35040,
      _h = 35044;
    function yh(D, oe, be, et) {
      var vt = {},
        tt = 0,
        Ye = { uint8: Xo, uint16: is };
      oe.oes_element_index_uint && (Ye.uint32 = Go);
      function Dt(Xt) {
        (this.id = tt++),
          (vt[this.id] = this),
          (this.buffer = Xt),
          (this.primType = vc),
          (this.vertCount = 0),
          (this.type = 0);
      }
      Dt.prototype.bind = function () {
        this.buffer.bind();
      };
      var Rt = [];
      function Zt(Xt) {
        var We = Rt.pop();
        return (
          We || (We = new Dt(be.create(null, fl, !0, !1)._buffer)),
          Wt(We, Xt, Bl, -1, -1, 0, 0),
          We
        );
      }
      function kt(Xt) {
        Rt.push(Xt);
      }
      function Wt(Xt, We, ct, Bt, rn, Tt, ln) {
        Xt.buffer.bind();
        var Pt;
        if (We) {
          var an = ln;
          !ln &&
            (!n(We) || (Y(We) && !n(We.data))) &&
            (an = oe.oes_element_index_uint ? Go : is),
            be._initBuffer(Xt.buffer, We, ct, an, 3);
        } else D.bufferData(fl, Tt, ct), (Xt.buffer.dtype = Pt || Xo), (Xt.buffer.usage = ct), (Xt.buffer.dimension = 3), (Xt.buffer.byteLength = Tt);
        if (((Pt = ln), !ln)) {
          switch (Xt.buffer.dtype) {
            case Xo:
            case Ll:
              Pt = Xo;
              break;
            case is:
            case Dl:
              Pt = is;
              break;
            case Go:
            case pl:
              Pt = Go;
              break;
            default:
              le.raise("unsupported type for element array");
          }
          Xt.buffer.dtype = Pt;
        }
        (Xt.type = Pt),
          le(
            Pt !== Go || !!oe.oes_element_index_uint,
            "32 bit element buffers not supported, enable oes_element_index_uint first"
          );
        var wt = rn;
        wt < 0 &&
          ((wt = Xt.buffer.byteLength),
          Pt === is ? (wt >>= 1) : Pt === Go && (wt >>= 2)),
          (Xt.vertCount = wt);
        var en = Bt;
        if (Bt < 0) {
          en = vc;
          var Fn = Xt.buffer.dimension;
          Fn === 1 && (en = vh), Fn === 2 && (en = Xa), Fn === 3 && (en = vc);
        }
        Xt.primType = en;
      }
      function Kt(Xt) {
        et.elementsCount--,
          le(Xt.buffer !== null, "must not double destroy elements"),
          delete vt[Xt.id],
          Xt.buffer.destroy(),
          (Xt.buffer = null);
      }
      function It(Xt, We) {
        var ct = be.create(null, fl, !0),
          Bt = new Dt(ct._buffer);
        et.elementsCount++;
        function rn(Tt) {
          if (!Tt) ct(), (Bt.primType = vc), (Bt.vertCount = 0), (Bt.type = Xo);
          else if (typeof Tt == "number")
            ct(Tt), (Bt.primType = vc), (Bt.vertCount = Tt | 0), (Bt.type = Xo);
          else {
            var ln = null,
              Pt = _h,
              an = -1,
              wt = -1,
              en = 0,
              Fn = 0;
            Array.isArray(Tt) || n(Tt) || Y(Tt)
              ? (ln = Tt)
              : (le.type(Tt, "object", "invalid arguments for elements"),
                "data" in Tt &&
                  ((ln = Tt.data),
                  le(
                    Array.isArray(ln) || n(ln) || Y(ln),
                    "invalid data for element buffer"
                  )),
                "usage" in Tt &&
                  (le.parameter(Tt.usage, Ds, "invalid element buffer usage"),
                  (Pt = Ds[Tt.usage])),
                "primitive" in Tt &&
                  (le.parameter(
                    Tt.primitive,
                    Fs,
                    "invalid element buffer primitive"
                  ),
                  (an = Fs[Tt.primitive])),
                "count" in Tt &&
                  (le(
                    typeof Tt.count == "number" && Tt.count >= 0,
                    "invalid vertex count for elements"
                  ),
                  (wt = Tt.count | 0)),
                "type" in Tt &&
                  (le.parameter(Tt.type, Ye, "invalid buffer type"),
                  (Fn = Ye[Tt.type])),
                "length" in Tt
                  ? (en = Tt.length | 0)
                  : ((en = wt),
                    Fn === is || Fn === Dl
                      ? (en *= 2)
                      : (Fn === Go || Fn === pl) && (en *= 4))),
              Wt(Bt, ln, Pt, an, wt, en, Fn);
          }
          return rn;
        }
        return (
          rn(Xt),
          (rn._reglType = "elements"),
          (rn._elements = Bt),
          (rn.subdata = function (Tt, ln) {
            return ct.subdata(Tt, ln), rn;
          }),
          (rn.destroy = function () {
            Kt(Bt);
          }),
          rn
        );
      }
      return {
        create: It,
        createStream: Zt,
        destroyStream: kt,
        getElements: function (Xt) {
          return typeof Xt == "function" && Xt._elements instanceof Dt
            ? Xt._elements
            : null;
        },
        clear: function () {
          ie(vt).forEach(Kt);
        },
      };
    }
    var ii = new Float32Array(1),
      Wp = new Uint32Array(ii.buffer),
      ud = 5123;
    function p0(D) {
      for (var oe = gt.allocType(ud, D.length), be = 0; be < D.length; ++be)
        if (isNaN(D[be])) oe[be] = 65535;
        else if (D[be] === 1 / 0) oe[be] = 31744;
        else if (D[be] === -1 / 0) oe[be] = 64512;
        else {
          ii[0] = D[be];
          var et = Wp[0],
            vt = (et >>> 31) << 15,
            tt = ((et << 1) >>> 24) - 127,
            Ye = (et >> 13) & 1023;
          if (tt < -24) oe[be] = vt;
          else if (tt < -14) {
            var Dt = -14 - tt;
            oe[be] = vt + ((Ye + 1024) >> Dt);
          } else
            tt > 15
              ? (oe[be] = vt + 31744)
              : (oe[be] = vt + ((tt + 15) << 10) + Ye);
        }
      return oe;
    }
    function zi(D) {
      return Array.isArray(D) || n(D);
    }
    var f0 = function (D) {
        return !(D & (D - 1)) && !!D;
      },
      xh = 34467,
      xo = 3553,
      ml = 34067,
      ks = 34069,
      Fl = 6408,
      dd = 6406,
      Xc = 6407,
      bs = 6409,
      Cu = 6410,
      kl = 32854,
      gl = 32855,
      m0 = 36194,
      Nu = 32819,
      mi = 32820,
      hd = 33635,
      Xp = 34042,
      Ul = 6402,
      Ru = 34041,
      g0 = 35904,
      pd = 35906,
      vl = 36193,
      zl = 33776,
      _c = 33777,
      Gc = 33778,
      yc = 33779,
      xc = 35986,
      v0 = 35987,
      bc = 34798,
      as = 35840,
      _0 = 35841,
      y0 = 35842,
      x0 = 35843,
      Vl = 36196,
      Us = 5121,
      Zc = 5123,
      Iu = 5125,
      Hl = 5126,
      Gp = 10242,
      fd = 10243,
      b0 = 10497,
      md = 33071,
      bh = 33648,
      gd = 10240,
      E0 = 10241,
      Mu = 9728,
      A0 = 9729,
      Ec = 9984,
      T0 = 9985,
      jl = 9986,
      gi = 9987,
      vd = 33170,
      zs = 4352,
      Wl = 4353,
      Lr = 4354,
      vi = 34046,
      Zo = 3317,
      Pu = 37440,
      Yc = 37441,
      Ou = 37443,
      Eh = 37444,
      _d = 33984,
      Lu = [Ec, jl, T0, gi],
      Xl = [0, bs, Cu, Xc, Fl],
      ya = {};
    (ya[bs] = ya[dd] = ya[Ul] = 1),
      (ya[Ru] = ya[Cu] = 2),
      (ya[Xc] = ya[g0] = 3),
      (ya[Fl] = ya[pd] = 4);
    function Ci(D) {
      return "[object " + D + "]";
    }
    var qc = Ci("HTMLCanvasElement"),
      S0 = Ci("OffscreenCanvas"),
      Zi = Ci("CanvasRenderingContext2D"),
      vn = Ci("ImageBitmap"),
      bo = Ci("HTMLImageElement"),
      Du = Ci("HTMLVideoElement"),
      $c = Object.keys(_a).concat([qc, S0, Zi, vn, bo, Du]),
      co = [];
    (co[Us] = 1), (co[Hl] = 4), (co[vl] = 2), (co[Zc] = 2), (co[Iu] = 4);
    var si = [];
    (si[kl] = 2),
      (si[gl] = 2),
      (si[m0] = 2),
      (si[Ru] = 4),
      (si[zl] = 0.5),
      (si[_c] = 0.5),
      (si[Gc] = 1),
      (si[yc] = 1),
      (si[xc] = 0.5),
      (si[v0] = 1),
      (si[bc] = 1),
      (si[as] = 0.5),
      (si[_0] = 0.25),
      (si[y0] = 0.5),
      (si[x0] = 0.25),
      (si[Vl] = 0.5);
    function yd(D) {
      return Array.isArray(D) && (D.length === 0 || typeof D[0] == "number");
    }
    function Jt(D) {
      if (!Array.isArray(D)) return !1;
      var oe = D.length;
      return !(oe === 0 || !zi(D[0]));
    }
    function _l(D) {
      return Object.prototype.toString.call(D);
    }
    function Bu(D) {
      return _l(D) === qc;
    }
    function xd(D) {
      return _l(D) === S0;
    }
    function os(D) {
      return _l(D) === Zi;
    }
    function Lo(D) {
      return _l(D) === vn;
    }
    function bd(D) {
      return _l(D) === bo;
    }
    function Ed(D) {
      return _l(D) === Du;
    }
    function uo(D) {
      if (!D) return !1;
      var oe = _l(D);
      return $c.indexOf(oe) >= 0 ? !0 : yd(D) || Jt(D) || Y(D);
    }
    function Vs(D) {
      return _a[Object.prototype.toString.call(D)] | 0;
    }
    function Ah(D, oe) {
      var be = oe.length;
      switch (D.type) {
        case Us:
        case Zc:
        case Iu:
        case Hl:
          var et = gt.allocType(D.type, be);
          et.set(oe), (D.data = et);
          break;
        case vl:
          D.data = p0(oe);
          break;
        default:
          le.raise("unsupported texture type, must specify a typed array");
      }
    }
    function Kc(D, oe) {
      return gt.allocType(D.type === vl ? Hl : D.type, oe);
    }
    function Ad(D, oe) {
      D.type === vl ? ((D.data = p0(oe)), gt.freeType(oe)) : (D.data = oe);
    }
    function w0(D, oe, be, et, vt, tt) {
      for (
        var Ye = D.width,
          Dt = D.height,
          Rt = D.channels,
          Zt = Ye * Dt * Rt,
          kt = Kc(D, Zt),
          Wt = 0,
          Kt = 0;
        Kt < Dt;
        ++Kt
      )
        for (var It = 0; It < Ye; ++It)
          for (var Xt = 0; Xt < Rt; ++Xt)
            kt[Wt++] = oe[be * It + et * Kt + vt * Xt + tt];
      Ad(D, kt);
    }
    function Do(D, oe, be, et, vt, tt) {
      var Ye;
      if (
        (typeof si[D] < "u" ? (Ye = si[D]) : (Ye = ya[D] * co[oe]),
        tt && (Ye *= 6),
        vt)
      ) {
        for (var Dt = 0, Rt = be; Rt >= 1; ) (Dt += Ye * Rt * Rt), (Rt /= 2);
        return Dt;
      } else return Ye * be * et;
    }
    function Yo(D, oe, be, et, vt, tt, Ye) {
      var Dt = { "don't care": zs, "dont care": zs, nice: Lr, fast: Wl },
        Rt = { repeat: b0, clamp: md, mirror: bh },
        Zt = { nearest: Mu, linear: A0 },
        kt = r(
          {
            mipmap: gi,
            "nearest mipmap nearest": Ec,
            "linear mipmap nearest": T0,
            "nearest mipmap linear": jl,
            "linear mipmap linear": gi,
          },
          Zt
        ),
        Wt = { none: 0, browser: Eh },
        Kt = { uint8: Us, rgba4: Nu, rgb565: hd, "rgb5 a1": mi },
        It = {
          alpha: dd,
          luminance: bs,
          "luminance alpha": Cu,
          rgb: Xc,
          rgba: Fl,
          rgba4: kl,
          "rgb5 a1": gl,
          rgb565: m0,
        },
        Xt = {};
      oe.ext_srgb && ((It.srgb = g0), (It.srgba = pd)),
        oe.oes_texture_float && (Kt.float32 = Kt.float = Hl),
        oe.oes_texture_half_float && (Kt.float16 = Kt["half float"] = vl),
        oe.webgl_depth_texture &&
          (r(It, { depth: Ul, "depth stencil": Ru }),
          r(Kt, { uint16: Zc, uint32: Iu, "depth stencil": Xp })),
        oe.webgl_compressed_texture_s3tc &&
          r(Xt, {
            "rgb s3tc dxt1": zl,
            "rgba s3tc dxt1": _c,
            "rgba s3tc dxt3": Gc,
            "rgba s3tc dxt5": yc,
          }),
        oe.webgl_compressed_texture_atc &&
          r(Xt, {
            "rgb atc": xc,
            "rgba atc explicit alpha": v0,
            "rgba atc interpolated alpha": bc,
          }),
        oe.webgl_compressed_texture_pvrtc &&
          r(Xt, {
            "rgb pvrtc 4bppv1": as,
            "rgb pvrtc 2bppv1": _0,
            "rgba pvrtc 4bppv1": y0,
            "rgba pvrtc 2bppv1": x0,
          }),
        oe.webgl_compressed_texture_etc1 && (Xt["rgb etc1"] = Vl);
      var We = Array.prototype.slice.call(D.getParameter(xh));
      Object.keys(Xt).forEach(function (ge) {
        var it = Xt[ge];
        We.indexOf(it) >= 0 && (It[ge] = it);
      });
      var ct = Object.keys(It);
      be.textureFormats = ct;
      var Bt = [];
      Object.keys(It).forEach(function (ge) {
        var it = It[ge];
        Bt[it] = ge;
      });
      var rn = [];
      Object.keys(Kt).forEach(function (ge) {
        var it = Kt[ge];
        rn[it] = ge;
      });
      var Tt = [];
      Object.keys(Zt).forEach(function (ge) {
        var it = Zt[ge];
        Tt[it] = ge;
      });
      var ln = [];
      Object.keys(kt).forEach(function (ge) {
        var it = kt[ge];
        ln[it] = ge;
      });
      var Pt = [];
      Object.keys(Rt).forEach(function (ge) {
        var it = Rt[ge];
        Pt[it] = ge;
      });
      var an = ct.reduce(function (ge, it) {
        var Ke = It[it];
        return (
          Ke === bs ||
          Ke === dd ||
          Ke === bs ||
          Ke === Cu ||
          Ke === Ul ||
          Ke === Ru ||
          (oe.ext_srgb && (Ke === g0 || Ke === pd))
            ? (ge[Ke] = Ke)
            : Ke === gl || it.indexOf("rgba") >= 0
            ? (ge[Ke] = Fl)
            : (ge[Ke] = Xc),
          ge
        );
      }, {});
      function wt() {
        (this.internalformat = Fl),
          (this.format = Fl),
          (this.type = Us),
          (this.compressed = !1),
          (this.premultiplyAlpha = !1),
          (this.flipY = !1),
          (this.unpackAlignment = 1),
          (this.colorSpace = Eh),
          (this.width = 0),
          (this.height = 0),
          (this.channels = 0);
      }
      function en(ge, it) {
        (ge.internalformat = it.internalformat),
          (ge.format = it.format),
          (ge.type = it.type),
          (ge.compressed = it.compressed),
          (ge.premultiplyAlpha = it.premultiplyAlpha),
          (ge.flipY = it.flipY),
          (ge.unpackAlignment = it.unpackAlignment),
          (ge.colorSpace = it.colorSpace),
          (ge.width = it.width),
          (ge.height = it.height),
          (ge.channels = it.channels);
      }
      function Fn(ge, it) {
        if (!(typeof it != "object" || !it)) {
          if (
            ("premultiplyAlpha" in it &&
              (le.type(
                it.premultiplyAlpha,
                "boolean",
                "invalid premultiplyAlpha"
              ),
              (ge.premultiplyAlpha = it.premultiplyAlpha)),
            "flipY" in it &&
              (le.type(it.flipY, "boolean", "invalid texture flip"),
              (ge.flipY = it.flipY)),
            "alignment" in it &&
              (le.oneOf(
                it.alignment,
                [1, 2, 4, 8],
                "invalid texture unpack alignment"
              ),
              (ge.unpackAlignment = it.alignment)),
            "colorSpace" in it &&
              (le.parameter(it.colorSpace, Wt, "invalid colorSpace"),
              (ge.colorSpace = Wt[it.colorSpace])),
            "type" in it)
          ) {
            var Ke = it.type;
            le(
              oe.oes_texture_float || !(Ke === "float" || Ke === "float32"),
              "you must enable the OES_texture_float extension in order to use floating point textures."
            ),
              le(
                oe.oes_texture_half_float ||
                  !(Ke === "half float" || Ke === "float16"),
                "you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."
              ),
              le(
                oe.webgl_depth_texture ||
                  !(
                    Ke === "uint16" ||
                    Ke === "uint32" ||
                    Ke === "depth stencil"
                  ),
                "you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."
              ),
              le.parameter(Ke, Kt, "invalid texture type"),
              (ge.type = Kt[Ke]);
          }
          var un = ge.width,
            gr = ge.height,
            li = ge.channels,
            q = !1;
          "shape" in it
            ? (le(
                Array.isArray(it.shape) && it.shape.length >= 2,
                "shape must be an array"
              ),
              (un = it.shape[0]),
              (gr = it.shape[1]),
              it.shape.length === 3 &&
                ((li = it.shape[2]),
                le(li > 0 && li <= 4, "invalid number of channels"),
                (q = !0)),
              le(un >= 0 && un <= be.maxTextureSize, "invalid width"),
              le(gr >= 0 && gr <= be.maxTextureSize, "invalid height"))
            : ("radius" in it &&
                ((un = gr = it.radius),
                le(un >= 0 && un <= be.maxTextureSize, "invalid radius")),
              "width" in it &&
                ((un = it.width),
                le(un >= 0 && un <= be.maxTextureSize, "invalid width")),
              "height" in it &&
                ((gr = it.height),
                le(gr >= 0 && gr <= be.maxTextureSize, "invalid height")),
              "channels" in it &&
                ((li = it.channels),
                le(li > 0 && li <= 4, "invalid number of channels"),
                (q = !0))),
            (ge.width = un | 0),
            (ge.height = gr | 0),
            (ge.channels = li | 0);
          var ce = !1;
          if ("format" in it) {
            var Ee = it.format;
            le(
              oe.webgl_depth_texture ||
                !(Ee === "depth" || Ee === "depth stencil"),
              "you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."
            ),
              le.parameter(Ee, It, "invalid texture format");
            var Qe = (ge.internalformat = It[Ee]);
            (ge.format = an[Qe]),
              Ee in Kt && ("type" in it || (ge.type = Kt[Ee])),
              Ee in Xt && (ge.compressed = !0),
              (ce = !0);
          }
          !q && ce
            ? (ge.channels = ya[ge.format])
            : q && !ce
            ? ge.channels !== Xl[ge.format] &&
              (ge.format = ge.internalformat = Xl[ge.channels])
            : ce &&
              q &&
              le(
                ge.channels === ya[ge.format],
                "number of channels inconsistent with specified format"
              );
        }
      }
      function rr(ge) {
        D.pixelStorei(Pu, ge.flipY),
          D.pixelStorei(Yc, ge.premultiplyAlpha),
          D.pixelStorei(Ou, ge.colorSpace),
          D.pixelStorei(Zo, ge.unpackAlignment);
      }
      function tn() {
        wt.call(this),
          (this.xOffset = 0),
          (this.yOffset = 0),
          (this.data = null),
          (this.needsFree = !1),
          (this.element = null),
          (this.needsCopy = !1);
      }
      function Lt(ge, it) {
        var Ke = null;
        if (
          (uo(it)
            ? (Ke = it)
            : it &&
              (le.type(it, "object", "invalid pixel data type"),
              Fn(ge, it),
              "x" in it && (ge.xOffset = it.x | 0),
              "y" in it && (ge.yOffset = it.y | 0),
              uo(it.data) && (Ke = it.data)),
          le(
            !ge.compressed || Ke instanceof Uint8Array,
            "compressed texture data must be stored in a uint8array"
          ),
          it.copy)
        ) {
          le(!Ke, "can not specify copy and data field for the same texture");
          var un = vt.viewportWidth,
            gr = vt.viewportHeight;
          (ge.width = ge.width || un - ge.xOffset),
            (ge.height = ge.height || gr - ge.yOffset),
            (ge.needsCopy = !0),
            le(
              ge.xOffset >= 0 &&
                ge.xOffset < un &&
                ge.yOffset >= 0 &&
                ge.yOffset < gr &&
                ge.width > 0 &&
                ge.width <= un &&
                ge.height > 0 &&
                ge.height <= gr,
              "copy texture read out of bounds"
            );
        } else if (!Ke)
          (ge.width = ge.width || 1),
            (ge.height = ge.height || 1),
            (ge.channels = ge.channels || 4);
        else if (n(Ke))
          (ge.channels = ge.channels || 4),
            (ge.data = Ke),
            !("type" in it) && ge.type === Us && (ge.type = Vs(Ke));
        else if (yd(Ke))
          (ge.channels = ge.channels || 4),
            Ah(ge, Ke),
            (ge.alignment = 1),
            (ge.needsFree = !0);
        else if (Y(Ke)) {
          var li = Ke.data;
          !Array.isArray(li) && ge.type === Us && (ge.type = Vs(li));
          var q = Ke.shape,
            ce = Ke.stride,
            Ee,
            Qe,
            $e,
            Ne,
            Le,
            Ue;
          q.length === 3
            ? (($e = q[2]), (Ue = ce[2]))
            : (le(
                q.length === 2,
                "invalid ndarray pixel data, must be 2 or 3D"
              ),
              ($e = 1),
              (Ue = 1)),
            (Ee = q[0]),
            (Qe = q[1]),
            (Ne = ce[0]),
            (Le = ce[1]),
            (ge.alignment = 1),
            (ge.width = Ee),
            (ge.height = Qe),
            (ge.channels = $e),
            (ge.format = ge.internalformat = Xl[$e]),
            (ge.needsFree = !0),
            w0(ge, li, Ne, Le, Ue, Ke.offset);
        } else if (Bu(Ke) || xd(Ke) || os(Ke))
          Bu(Ke) || xd(Ke) ? (ge.element = Ke) : (ge.element = Ke.canvas),
            (ge.width = ge.element.width),
            (ge.height = ge.element.height),
            (ge.channels = 4);
        else if (Lo(Ke))
          (ge.element = Ke),
            (ge.width = Ke.width),
            (ge.height = Ke.height),
            (ge.channels = 4);
        else if (bd(Ke))
          (ge.element = Ke),
            (ge.width = Ke.naturalWidth),
            (ge.height = Ke.naturalHeight),
            (ge.channels = 4);
        else if (Ed(Ke))
          (ge.element = Ke),
            (ge.width = Ke.videoWidth),
            (ge.height = Ke.videoHeight),
            (ge.channels = 4);
        else if (Jt(Ke)) {
          var ve = ge.width || Ke[0].length,
            Me = ge.height || Ke.length,
            se = ge.channels;
          zi(Ke[0][0]) ? (se = se || Ke[0][0].length) : (se = se || 1);
          for (var Oe = Re.shape(Ke), ot = 1, ft = 0; ft < Oe.length; ++ft)
            ot *= Oe[ft];
          var Ct = Kc(ge, ot);
          Re.flatten(Ke, Oe, "", Ct),
            Ad(ge, Ct),
            (ge.alignment = 1),
            (ge.width = ve),
            (ge.height = Me),
            (ge.channels = se),
            (ge.format = ge.internalformat = Xl[se]),
            (ge.needsFree = !0);
        }
        ge.type === Hl
          ? le(
              be.extensions.indexOf("oes_texture_float") >= 0,
              "oes_texture_float extension not enabled"
            )
          : ge.type === vl &&
            le(
              be.extensions.indexOf("oes_texture_half_float") >= 0,
              "oes_texture_half_float extension not enabled"
            );
      }
      function _t(ge, it, Ke) {
        var un = ge.element,
          gr = ge.data,
          li = ge.internalformat,
          q = ge.format,
          ce = ge.type,
          Ee = ge.width,
          Qe = ge.height;
        rr(ge),
          un
            ? D.texImage2D(it, Ke, q, q, ce, un)
            : ge.compressed
            ? D.compressedTexImage2D(it, Ke, li, Ee, Qe, 0, gr)
            : ge.needsCopy
            ? (et(),
              D.copyTexImage2D(it, Ke, q, ge.xOffset, ge.yOffset, Ee, Qe, 0))
            : D.texImage2D(it, Ke, q, Ee, Qe, 0, q, ce, gr || null);
      }
      function kn(ge, it, Ke, un, gr) {
        var li = ge.element,
          q = ge.data,
          ce = ge.internalformat,
          Ee = ge.format,
          Qe = ge.type,
          $e = ge.width,
          Ne = ge.height;
        rr(ge),
          li
            ? D.texSubImage2D(it, gr, Ke, un, Ee, Qe, li)
            : ge.compressed
            ? D.compressedTexSubImage2D(it, gr, Ke, un, ce, $e, Ne, q)
            : ge.needsCopy
            ? (et(),
              D.copyTexSubImage2D(
                it,
                gr,
                Ke,
                un,
                ge.xOffset,
                ge.yOffset,
                $e,
                Ne
              ))
            : D.texSubImage2D(it, gr, Ke, un, $e, Ne, Ee, Qe, q);
      }
      var Er = [];
      function cn() {
        return Er.pop() || new tn();
      }
      function mr(ge) {
        ge.needsFree && gt.freeType(ge.data), tn.call(ge), Er.push(ge);
      }
      function tr() {
        wt.call(this),
          (this.genMipmaps = !1),
          (this.mipmapHint = zs),
          (this.mipmask = 0),
          (this.images = Array(16));
      }
      function Zn(ge, it, Ke) {
        var un = (ge.images[0] = cn());
        (ge.mipmask = 1),
          (un.width = ge.width = it),
          (un.height = ge.height = Ke),
          (un.channels = ge.channels = 4);
      }
      function Xr(ge, it) {
        var Ke = null;
        if (uo(it))
          (Ke = ge.images[0] = cn()), en(Ke, ge), Lt(Ke, it), (ge.mipmask = 1);
        else if ((Fn(ge, it), Array.isArray(it.mipmap)))
          for (var un = it.mipmap, gr = 0; gr < un.length; ++gr)
            (Ke = ge.images[gr] = cn()),
              en(Ke, ge),
              (Ke.width >>= gr),
              (Ke.height >>= gr),
              Lt(Ke, un[gr]),
              (ge.mipmask |= 1 << gr);
        else
          (Ke = ge.images[0] = cn()), en(Ke, ge), Lt(Ke, it), (ge.mipmask = 1);
        en(ge, ge.images[0]),
          ge.compressed &&
            (ge.internalformat === zl ||
              ge.internalformat === _c ||
              ge.internalformat === Gc ||
              ge.internalformat === yc) &&
            le(
              ge.width % 4 === 0 && ge.height % 4 === 0,
              "for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4"
            );
      }
      function ia(ge, it) {
        for (var Ke = ge.images, un = 0; un < Ke.length; ++un) {
          if (!Ke[un]) return;
          _t(Ke[un], it, un);
        }
      }
      var Za = [];
      function Ir() {
        var ge = Za.pop() || new tr();
        wt.call(ge), (ge.mipmask = 0);
        for (var it = 0; it < 16; ++it) ge.images[it] = null;
        return ge;
      }
      function aa(ge) {
        for (var it = ge.images, Ke = 0; Ke < it.length; ++Ke)
          it[Ke] && mr(it[Ke]), (it[Ke] = null);
        Za.push(ge);
      }
      function bi() {
        (this.minFilter = Mu),
          (this.magFilter = Mu),
          (this.wrapS = md),
          (this.wrapT = md),
          (this.anisotropic = 1),
          (this.genMipmaps = !1),
          (this.mipmapHint = zs);
      }
      function Aa(ge, it) {
        if ("min" in it) {
          var Ke = it.min;
          le.parameter(Ke, kt),
            (ge.minFilter = kt[Ke]),
            Lu.indexOf(ge.minFilter) >= 0 &&
              !("faces" in it) &&
              (ge.genMipmaps = !0);
        }
        if ("mag" in it) {
          var un = it.mag;
          le.parameter(un, Zt), (ge.magFilter = Zt[un]);
        }
        var gr = ge.wrapS,
          li = ge.wrapT;
        if ("wrap" in it) {
          var q = it.wrap;
          typeof q == "string"
            ? (le.parameter(q, Rt), (gr = li = Rt[q]))
            : Array.isArray(q) &&
              (le.parameter(q[0], Rt),
              le.parameter(q[1], Rt),
              (gr = Rt[q[0]]),
              (li = Rt[q[1]]));
        } else {
          if ("wrapS" in it) {
            var ce = it.wrapS;
            le.parameter(ce, Rt), (gr = Rt[ce]);
          }
          if ("wrapT" in it) {
            var Ee = it.wrapT;
            le.parameter(Ee, Rt), (li = Rt[Ee]);
          }
        }
        if (((ge.wrapS = gr), (ge.wrapT = li), "anisotropic" in it)) {
          var Qe = it.anisotropic;
          le(
            typeof Qe == "number" && Qe >= 1 && Qe <= be.maxAnisotropic,
            "aniso samples must be between 1 and "
          ),
            (ge.anisotropic = it.anisotropic);
        }
        if ("mipmap" in it) {
          var $e = !1;
          switch (typeof it.mipmap) {
            case "string":
              le.parameter(it.mipmap, Dt, "invalid mipmap hint"),
                (ge.mipmapHint = Dt[it.mipmap]),
                (ge.genMipmaps = !0),
                ($e = !0);
              break;
            case "boolean":
              $e = ge.genMipmaps = it.mipmap;
              break;
            case "object":
              le(Array.isArray(it.mipmap), "invalid mipmap type"),
                (ge.genMipmaps = !1),
                ($e = !0);
              break;
            default:
              le.raise("invalid mipmap type");
          }
          $e && !("min" in it) && (ge.minFilter = Ec);
        }
      }
      function Ta(ge, it) {
        D.texParameteri(it, E0, ge.minFilter),
          D.texParameteri(it, gd, ge.magFilter),
          D.texParameteri(it, Gp, ge.wrapS),
          D.texParameteri(it, fd, ge.wrapT),
          oe.ext_texture_filter_anisotropic &&
            D.texParameteri(it, vi, ge.anisotropic),
          ge.genMipmaps && (D.hint(vd, ge.mipmapHint), D.generateMipmap(it));
      }
      var ji = 0,
        ka = {},
        mo = be.maxTextureUnits,
        Sa = Array(mo).map(function () {
          return null;
        });
      function fr(ge) {
        wt.call(this),
          (this.mipmask = 0),
          (this.internalformat = Fl),
          (this.id = ji++),
          (this.refCount = 1),
          (this.target = ge),
          (this.texture = D.createTexture()),
          (this.unit = -1),
          (this.bindCount = 0),
          (this.texInfo = new bi()),
          Ye.profile && (this.stats = { size: 0 });
      }
      function no(ge) {
        D.activeTexture(_d), D.bindTexture(ge.target, ge.texture);
      }
      function qr() {
        var ge = Sa[0];
        ge ? D.bindTexture(ge.target, ge.texture) : D.bindTexture(xo, null);
      }
      function jn(ge) {
        var it = ge.texture;
        le(it, "must not double destroy texture");
        var Ke = ge.unit,
          un = ge.target;
        Ke >= 0 &&
          (D.activeTexture(_d + Ke), D.bindTexture(un, null), (Sa[Ke] = null)),
          D.deleteTexture(it),
          (ge.texture = null),
          (ge.params = null),
          (ge.pixels = null),
          (ge.refCount = 0),
          delete ka[ge.id],
          tt.textureCount--;
      }
      r(fr.prototype, {
        bind: function () {
          var ge = this;
          ge.bindCount += 1;
          var it = ge.unit;
          if (it < 0) {
            for (var Ke = 0; Ke < mo; ++Ke) {
              var un = Sa[Ke];
              if (un) {
                if (un.bindCount > 0) continue;
                un.unit = -1;
              }
              (Sa[Ke] = ge), (it = Ke);
              break;
            }
            it >= mo && le.raise("insufficient number of texture units"),
              Ye.profile &&
                tt.maxTextureUnits < it + 1 &&
                (tt.maxTextureUnits = it + 1),
              (ge.unit = it),
              D.activeTexture(_d + it),
              D.bindTexture(ge.target, ge.texture);
          }
          return it;
        },
        unbind: function () {
          this.bindCount -= 1;
        },
        decRef: function () {
          --this.refCount <= 0 && jn(this);
        },
      });
      function Cr(ge, it) {
        var Ke = new fr(xo);
        (ka[Ke.id] = Ke), tt.textureCount++;
        function un(q, ce) {
          var Ee = Ke.texInfo;
          bi.call(Ee);
          var Qe = Ir();
          return (
            typeof q == "number"
              ? typeof ce == "number"
                ? Zn(Qe, q | 0, ce | 0)
                : Zn(Qe, q | 0, q | 0)
              : q
              ? (le.type(q, "object", "invalid arguments to regl.texture"),
                Aa(Ee, q),
                Xr(Qe, q))
              : Zn(Qe, 1, 1),
            Ee.genMipmaps && (Qe.mipmask = (Qe.width << 1) - 1),
            (Ke.mipmask = Qe.mipmask),
            en(Ke, Qe),
            le.texture2D(Ee, Qe, be),
            (Ke.internalformat = Qe.internalformat),
            (un.width = Qe.width),
            (un.height = Qe.height),
            no(Ke),
            ia(Qe, xo),
            Ta(Ee, xo),
            qr(),
            aa(Qe),
            Ye.profile &&
              (Ke.stats.size = Do(
                Ke.internalformat,
                Ke.type,
                Qe.width,
                Qe.height,
                Ee.genMipmaps,
                !1
              )),
            (un.format = Bt[Ke.internalformat]),
            (un.type = rn[Ke.type]),
            (un.mag = Tt[Ee.magFilter]),
            (un.min = ln[Ee.minFilter]),
            (un.wrapS = Pt[Ee.wrapS]),
            (un.wrapT = Pt[Ee.wrapT]),
            un
          );
        }
        function gr(q, ce, Ee, Qe) {
          le(!!q, "must specify image data");
          var $e = ce | 0,
            Ne = Ee | 0,
            Le = Qe | 0,
            Ue = cn();
          return (
            en(Ue, Ke),
            (Ue.width = 0),
            (Ue.height = 0),
            Lt(Ue, q),
            (Ue.width = Ue.width || (Ke.width >> Le) - $e),
            (Ue.height = Ue.height || (Ke.height >> Le) - Ne),
            le(
              Ke.type === Ue.type &&
                Ke.format === Ue.format &&
                Ke.internalformat === Ue.internalformat,
              "incompatible format for texture.subimage"
            ),
            le(
              $e >= 0 &&
                Ne >= 0 &&
                $e + Ue.width <= Ke.width &&
                Ne + Ue.height <= Ke.height,
              "texture.subimage write out of bounds"
            ),
            le(Ke.mipmask & (1 << Le), "missing mipmap data"),
            le(Ue.data || Ue.element || Ue.needsCopy, "missing image data"),
            no(Ke),
            kn(Ue, xo, $e, Ne, Le),
            qr(),
            mr(Ue),
            un
          );
        }
        function li(q, ce) {
          var Ee = q | 0,
            Qe = ce | 0 || Ee;
          if (Ee === Ke.width && Qe === Ke.height) return un;
          (un.width = Ke.width = Ee), (un.height = Ke.height = Qe), no(Ke);
          for (var $e = 0; Ke.mipmask >> $e; ++$e) {
            var Ne = Ee >> $e,
              Le = Qe >> $e;
            if (!Ne || !Le) break;
            D.texImage2D(
              xo,
              $e,
              Ke.format,
              Ne,
              Le,
              0,
              Ke.format,
              Ke.type,
              null
            );
          }
          return (
            qr(),
            Ye.profile &&
              (Ke.stats.size = Do(Ke.internalformat, Ke.type, Ee, Qe, !1, !1)),
            un
          );
        }
        return (
          un(ge, it),
          (un.subimage = gr),
          (un.resize = li),
          (un._reglType = "texture2d"),
          (un._texture = Ke),
          Ye.profile && (un.stats = Ke.stats),
          (un.destroy = function () {
            Ke.decRef();
          }),
          un
        );
      }
      function Vr(ge, it, Ke, un, gr, li) {
        var q = new fr(ml);
        (ka[q.id] = q), tt.cubeCount++;
        var ce = new Array(6);
        function Ee(Ne, Le, Ue, ve, Me, se) {
          var Oe,
            ot = q.texInfo;
          for (bi.call(ot), Oe = 0; Oe < 6; ++Oe) ce[Oe] = Ir();
          if (typeof Ne == "number" || !Ne) {
            var ft = Ne | 0 || 1;
            for (Oe = 0; Oe < 6; ++Oe) Zn(ce[Oe], ft, ft);
          } else if (typeof Ne == "object")
            if (Le)
              Xr(ce[0], Ne),
                Xr(ce[1], Le),
                Xr(ce[2], Ue),
                Xr(ce[3], ve),
                Xr(ce[4], Me),
                Xr(ce[5], se);
            else if ((Aa(ot, Ne), Fn(q, Ne), "faces" in Ne)) {
              var Ct = Ne.faces;
              for (
                le(
                  Array.isArray(Ct) && Ct.length === 6,
                  "cube faces must be a length 6 array"
                ),
                  Oe = 0;
                Oe < 6;
                ++Oe
              )
                le(
                  typeof Ct[Oe] == "object" && !!Ct[Oe],
                  "invalid input for cube map face"
                ),
                  en(ce[Oe], q),
                  Xr(ce[Oe], Ct[Oe]);
            } else for (Oe = 0; Oe < 6; ++Oe) Xr(ce[Oe], Ne);
          else le.raise("invalid arguments to cube map");
          for (
            en(q, ce[0]),
              be.npotTextureCube ||
                le(
                  f0(q.width) && f0(q.height),
                  "your browser does not support non power or two texture dimensions"
                ),
              ot.genMipmaps
                ? (q.mipmask = (ce[0].width << 1) - 1)
                : (q.mipmask = ce[0].mipmask),
              le.textureCube(q, ot, ce, be),
              q.internalformat = ce[0].internalformat,
              Ee.width = ce[0].width,
              Ee.height = ce[0].height,
              no(q),
              Oe = 0;
            Oe < 6;
            ++Oe
          )
            ia(ce[Oe], ks + Oe);
          for (
            Ta(ot, ml),
              qr(),
              Ye.profile &&
                (q.stats.size = Do(
                  q.internalformat,
                  q.type,
                  Ee.width,
                  Ee.height,
                  ot.genMipmaps,
                  !0
                )),
              Ee.format = Bt[q.internalformat],
              Ee.type = rn[q.type],
              Ee.mag = Tt[ot.magFilter],
              Ee.min = ln[ot.minFilter],
              Ee.wrapS = Pt[ot.wrapS],
              Ee.wrapT = Pt[ot.wrapT],
              Oe = 0;
            Oe < 6;
            ++Oe
          )
            aa(ce[Oe]);
          return Ee;
        }
        function Qe(Ne, Le, Ue, ve, Me) {
          le(!!Le, "must specify image data"),
            le(
              typeof Ne == "number" && Ne === (Ne | 0) && Ne >= 0 && Ne < 6,
              "invalid face"
            );
          var se = Ue | 0,
            Oe = ve | 0,
            ot = Me | 0,
            ft = cn();
          return (
            en(ft, q),
            (ft.width = 0),
            (ft.height = 0),
            Lt(ft, Le),
            (ft.width = ft.width || (q.width >> ot) - se),
            (ft.height = ft.height || (q.height >> ot) - Oe),
            le(
              q.type === ft.type &&
                q.format === ft.format &&
                q.internalformat === ft.internalformat,
              "incompatible format for texture.subimage"
            ),
            le(
              se >= 0 &&
                Oe >= 0 &&
                se + ft.width <= q.width &&
                Oe + ft.height <= q.height,
              "texture.subimage write out of bounds"
            ),
            le(q.mipmask & (1 << ot), "missing mipmap data"),
            le(ft.data || ft.element || ft.needsCopy, "missing image data"),
            no(q),
            kn(ft, ks + Ne, se, Oe, ot),
            qr(),
            mr(ft),
            Ee
          );
        }
        function $e(Ne) {
          var Le = Ne | 0;
          if (Le !== q.width) {
            (Ee.width = q.width = Le), (Ee.height = q.height = Le), no(q);
            for (var Ue = 0; Ue < 6; ++Ue)
              for (var ve = 0; q.mipmask >> ve; ++ve)
                D.texImage2D(
                  ks + Ue,
                  ve,
                  q.format,
                  Le >> ve,
                  Le >> ve,
                  0,
                  q.format,
                  q.type,
                  null
                );
            return (
              qr(),
              Ye.profile &&
                (q.stats.size = Do(
                  q.internalformat,
                  q.type,
                  Ee.width,
                  Ee.height,
                  !1,
                  !0
                )),
              Ee
            );
          }
        }
        return (
          Ee(ge, it, Ke, un, gr, li),
          (Ee.subimage = Qe),
          (Ee.resize = $e),
          (Ee._reglType = "textureCube"),
          (Ee._texture = q),
          Ye.profile && (Ee.stats = q.stats),
          (Ee.destroy = function () {
            q.decRef();
          }),
          Ee
        );
      }
      function oa() {
        for (var ge = 0; ge < mo; ++ge)
          D.activeTexture(_d + ge), D.bindTexture(xo, null), (Sa[ge] = null);
        ie(ka).forEach(jn), (tt.cubeCount = 0), (tt.textureCount = 0);
      }
      Ye.profile &&
        (tt.getTotalTextureSize = function () {
          var ge = 0;
          return (
            Object.keys(ka).forEach(function (it) {
              ge += ka[it].stats.size;
            }),
            ge
          );
        });
      function Tl() {
        for (var ge = 0; ge < mo; ++ge) {
          var it = Sa[ge];
          it && ((it.bindCount = 0), (it.unit = -1), (Sa[ge] = null));
        }
        ie(ka).forEach(function (Ke) {
          (Ke.texture = D.createTexture()),
            D.bindTexture(Ke.target, Ke.texture);
          for (var un = 0; un < 32; ++un)
            if (Ke.mipmask & (1 << un))
              if (Ke.target === xo)
                D.texImage2D(
                  xo,
                  un,
                  Ke.internalformat,
                  Ke.width >> un,
                  Ke.height >> un,
                  0,
                  Ke.internalformat,
                  Ke.type,
                  null
                );
              else
                for (var gr = 0; gr < 6; ++gr)
                  D.texImage2D(
                    ks + gr,
                    un,
                    Ke.internalformat,
                    Ke.width >> un,
                    Ke.height >> un,
                    0,
                    Ke.internalformat,
                    Ke.type,
                    null
                  );
          Ta(Ke.texInfo, Ke.target);
        });
      }
      return {
        create2D: Cr,
        createCube: Vr,
        clear: oa,
        getTexture: function (ge) {
          return null;
        },
        restore: Tl,
      };
    }
    var ur = 36161,
      qo = 32854,
      $o = 32855,
      Da = 36194,
      Gl = 33189,
      yl = 36168,
      ss = 34041,
      Ja = 35907,
      Qc = 34836,
      Rn = 34842,
      bn = 34843,
      Bo = [];
    (Bo[qo] = 2),
      (Bo[$o] = 2),
      (Bo[Da] = 2),
      (Bo[Gl] = 2),
      (Bo[yl] = 1),
      (Bo[ss] = 4),
      (Bo[Ja] = 4),
      (Bo[Qc] = 16),
      (Bo[Rn] = 8),
      (Bo[bn] = 6);
    function eo(D, oe, be) {
      return Bo[D] * oe * be;
    }
    var Es = function (D, oe, be, et, vt) {
        var tt = {
          rgba4: qo,
          rgb565: Da,
          "rgb5 a1": $o,
          depth: Gl,
          stencil: yl,
          "depth stencil": ss,
        };
        oe.ext_srgb && (tt.srgba = Ja),
          oe.ext_color_buffer_half_float &&
            ((tt.rgba16f = Rn), (tt.rgb16f = bn)),
          oe.webgl_color_buffer_float && (tt.rgba32f = Qc);
        var Ye = [];
        Object.keys(tt).forEach(function (It) {
          var Xt = tt[It];
          Ye[Xt] = It;
        });
        var Dt = 0,
          Rt = {};
        function Zt(It) {
          (this.id = Dt++),
            (this.refCount = 1),
            (this.renderbuffer = It),
            (this.format = qo),
            (this.width = 0),
            (this.height = 0),
            vt.profile && (this.stats = { size: 0 });
        }
        Zt.prototype.decRef = function () {
          --this.refCount <= 0 && kt(this);
        };
        function kt(It) {
          var Xt = It.renderbuffer;
          le(Xt, "must not double destroy renderbuffer"),
            D.bindRenderbuffer(ur, null),
            D.deleteRenderbuffer(Xt),
            (It.renderbuffer = null),
            (It.refCount = 0),
            delete Rt[It.id],
            et.renderbufferCount--;
        }
        function Wt(It, Xt) {
          var We = new Zt(D.createRenderbuffer());
          (Rt[We.id] = We), et.renderbufferCount++;
          function ct(rn, Tt) {
            var ln = 0,
              Pt = 0,
              an = qo;
            if (typeof rn == "object" && rn) {
              var wt = rn;
              if ("shape" in wt) {
                var en = wt.shape;
                le(
                  Array.isArray(en) && en.length >= 2,
                  "invalid renderbuffer shape"
                ),
                  (ln = en[0] | 0),
                  (Pt = en[1] | 0);
              } else
                "radius" in wt && (ln = Pt = wt.radius | 0),
                  "width" in wt && (ln = wt.width | 0),
                  "height" in wt && (Pt = wt.height | 0);
              "format" in wt &&
                (le.parameter(wt.format, tt, "invalid renderbuffer format"),
                (an = tt[wt.format]));
            } else
              typeof rn == "number"
                ? ((ln = rn | 0),
                  typeof Tt == "number" ? (Pt = Tt | 0) : (Pt = ln))
                : rn
                ? le.raise("invalid arguments to renderbuffer constructor")
                : (ln = Pt = 1);
            if (
              (le(
                ln > 0 &&
                  Pt > 0 &&
                  ln <= be.maxRenderbufferSize &&
                  Pt <= be.maxRenderbufferSize,
                "invalid renderbuffer size"
              ),
              !(ln === We.width && Pt === We.height && an === We.format))
            )
              return (
                (ct.width = We.width = ln),
                (ct.height = We.height = Pt),
                (We.format = an),
                D.bindRenderbuffer(ur, We.renderbuffer),
                D.renderbufferStorage(ur, an, ln, Pt),
                le(D.getError() === 0, "invalid render buffer format"),
                vt.profile &&
                  (We.stats.size = eo(We.format, We.width, We.height)),
                (ct.format = Ye[We.format]),
                ct
              );
          }
          function Bt(rn, Tt) {
            var ln = rn | 0,
              Pt = Tt | 0 || ln;
            return (
              (ln === We.width && Pt === We.height) ||
                (le(
                  ln > 0 &&
                    Pt > 0 &&
                    ln <= be.maxRenderbufferSize &&
                    Pt <= be.maxRenderbufferSize,
                  "invalid renderbuffer size"
                ),
                (ct.width = We.width = ln),
                (ct.height = We.height = Pt),
                D.bindRenderbuffer(ur, We.renderbuffer),
                D.renderbufferStorage(ur, We.format, ln, Pt),
                le(D.getError() === 0, "invalid render buffer format"),
                vt.profile &&
                  (We.stats.size = eo(We.format, We.width, We.height))),
              ct
            );
          }
          return (
            ct(It, Xt),
            (ct.resize = Bt),
            (ct._reglType = "renderbuffer"),
            (ct._renderbuffer = We),
            vt.profile && (ct.stats = We.stats),
            (ct.destroy = function () {
              We.decRef();
            }),
            ct
          );
        }
        vt.profile &&
          (et.getTotalRenderbufferSize = function () {
            var It = 0;
            return (
              Object.keys(Rt).forEach(function (Xt) {
                It += Rt[Xt].stats.size;
              }),
              It
            );
          });
        function Kt() {
          ie(Rt).forEach(function (It) {
            (It.renderbuffer = D.createRenderbuffer()),
              D.bindRenderbuffer(ur, It.renderbuffer),
              D.renderbufferStorage(ur, It.format, It.width, It.height);
          }),
            D.bindRenderbuffer(ur, null);
        }
        return {
          create: Wt,
          clear: function () {
            ie(Rt).forEach(kt);
          },
          restore: Kt,
        };
      },
      Ni = 36160,
      ls = 36161,
      xl = 3553,
      Ac = 34069,
      Yr = 36064,
      xa = 36096,
      C0 = 36128,
      Zl = 33306,
      Td = 36053,
      bl = 36054,
      Fo = 36055,
      Jc = 36057,
      Hs = 36061,
      Sd = 36193,
      eu = 5121,
      Fu = 5126,
      wd = 6407,
      Tc = 6408,
      Sc = 6402,
      N0 = [wd, Tc],
      js = [];
    (js[Tc] = 4), (js[wd] = 3);
    var As = [];
    (As[eu] = 1), (As[Fu] = 4), (As[Sd] = 2);
    var Cd = 32854,
      Yl = 32855,
      cs = 36194,
      R0 = 33189,
      ku = 36168,
      Nd = 34041,
      Rd = 35907,
      u = 34836,
      p = 34842,
      d = 34843,
      g = [Cd, Yl, cs, Rd, p, d, u],
      b = {};
    (b[Td] = "complete"),
      (b[bl] = "incomplete attachment"),
      (b[Jc] = "incomplete dimensions"),
      (b[Fo] = "incomplete, missing attachment"),
      (b[Hs] = "unsupported");
    function S(D, oe, be, et, vt, tt) {
      var Ye = { cur: null, next: null, dirty: !1, setFBO: null },
        Dt = ["rgba"],
        Rt = ["rgba4", "rgb565", "rgb5 a1"];
      oe.ext_srgb && Rt.push("srgba"),
        oe.ext_color_buffer_half_float && Rt.push("rgba16f", "rgb16f"),
        oe.webgl_color_buffer_float && Rt.push("rgba32f");
      var Zt = ["uint8"];
      oe.oes_texture_half_float && Zt.push("half float", "float16"),
        oe.oes_texture_float && Zt.push("float", "float32");
      function kt(tn, Lt, _t) {
        (this.target = tn), (this.texture = Lt), (this.renderbuffer = _t);
        var kn = 0,
          Er = 0;
        Lt
          ? ((kn = Lt.width), (Er = Lt.height))
          : _t && ((kn = _t.width), (Er = _t.height)),
          (this.width = kn),
          (this.height = Er);
      }
      function Wt(tn) {
        tn &&
          (tn.texture && tn.texture._texture.decRef(),
          tn.renderbuffer && tn.renderbuffer._renderbuffer.decRef());
      }
      function Kt(tn, Lt, _t) {
        if (tn)
          if (tn.texture) {
            var kn = tn.texture._texture,
              Er = Math.max(1, kn.width),
              cn = Math.max(1, kn.height);
            le(
              Er === Lt && cn === _t,
              "inconsistent width/height for supplied texture"
            ),
              (kn.refCount += 1);
          } else {
            var mr = tn.renderbuffer._renderbuffer;
            le(
              mr.width === Lt && mr.height === _t,
              "inconsistent width/height for renderbuffer"
            ),
              (mr.refCount += 1);
          }
      }
      function It(tn, Lt) {
        Lt &&
          (Lt.texture
            ? D.framebufferTexture2D(
                Ni,
                tn,
                Lt.target,
                Lt.texture._texture.texture,
                0
              )
            : D.framebufferRenderbuffer(
                Ni,
                tn,
                ls,
                Lt.renderbuffer._renderbuffer.renderbuffer
              ));
      }
      function Xt(tn) {
        var Lt = xl,
          _t = null,
          kn = null,
          Er = tn;
        typeof tn == "object" &&
          ((Er = tn.data), "target" in tn && (Lt = tn.target | 0)),
          le.type(Er, "function", "invalid attachment data");
        var cn = Er._reglType;
        return (
          cn === "texture2d"
            ? ((_t = Er), le(Lt === xl))
            : cn === "textureCube"
            ? ((_t = Er),
              le(Lt >= Ac && Lt < Ac + 6, "invalid cube map target"))
            : cn === "renderbuffer"
            ? ((kn = Er), (Lt = ls))
            : le.raise("invalid regl object for attachment"),
          new kt(Lt, _t, kn)
        );
      }
      function We(tn, Lt, _t, kn, Er) {
        if (_t) {
          var cn = et.create2D({ width: tn, height: Lt, format: kn, type: Er });
          return (cn._texture.refCount = 0), new kt(xl, cn, null);
        } else {
          var mr = vt.create({ width: tn, height: Lt, format: kn });
          return (mr._renderbuffer.refCount = 0), new kt(ls, null, mr);
        }
      }
      function ct(tn) {
        return tn && (tn.texture || tn.renderbuffer);
      }
      function Bt(tn, Lt, _t) {
        tn &&
          (tn.texture
            ? tn.texture.resize(Lt, _t)
            : tn.renderbuffer && tn.renderbuffer.resize(Lt, _t),
          (tn.width = Lt),
          (tn.height = _t));
      }
      var rn = 0,
        Tt = {};
      function ln() {
        (this.id = rn++),
          (Tt[this.id] = this),
          (this.framebuffer = D.createFramebuffer()),
          (this.width = 0),
          (this.height = 0),
          (this.colorAttachments = []),
          (this.depthAttachment = null),
          (this.stencilAttachment = null),
          (this.depthStencilAttachment = null);
      }
      function Pt(tn) {
        tn.colorAttachments.forEach(Wt),
          Wt(tn.depthAttachment),
          Wt(tn.stencilAttachment),
          Wt(tn.depthStencilAttachment);
      }
      function an(tn) {
        var Lt = tn.framebuffer;
        le(Lt, "must not double destroy framebuffer"),
          D.deleteFramebuffer(Lt),
          (tn.framebuffer = null),
          tt.framebufferCount--,
          delete Tt[tn.id];
      }
      function wt(tn) {
        var Lt;
        D.bindFramebuffer(Ni, tn.framebuffer);
        var _t = tn.colorAttachments;
        for (Lt = 0; Lt < _t.length; ++Lt) It(Yr + Lt, _t[Lt]);
        for (Lt = _t.length; Lt < be.maxColorAttachments; ++Lt)
          D.framebufferTexture2D(Ni, Yr + Lt, xl, null, 0);
        D.framebufferTexture2D(Ni, Zl, xl, null, 0),
          D.framebufferTexture2D(Ni, xa, xl, null, 0),
          D.framebufferTexture2D(Ni, C0, xl, null, 0),
          It(xa, tn.depthAttachment),
          It(C0, tn.stencilAttachment),
          It(Zl, tn.depthStencilAttachment);
        var kn = D.checkFramebufferStatus(Ni);
        !D.isContextLost() &&
          kn !== Td &&
          le.raise(
            "framebuffer configuration not supported, status = " + b[kn]
          ),
          D.bindFramebuffer(Ni, Ye.next ? Ye.next.framebuffer : null),
          (Ye.cur = Ye.next),
          D.getError();
      }
      function en(tn, Lt) {
        var _t = new ln();
        tt.framebufferCount++;
        function kn(cn, mr) {
          var tr;
          le(
            Ye.next !== _t,
            "can not update framebuffer which is currently in use"
          );
          var Zn = 0,
            Xr = 0,
            ia = !0,
            Za = !0,
            Ir = null,
            aa = !0,
            bi = "rgba",
            Aa = "uint8",
            Ta = 1,
            ji = null,
            ka = null,
            mo = null,
            Sa = !1;
          if (typeof cn == "number") (Zn = cn | 0), (Xr = mr | 0 || Zn);
          else if (!cn) Zn = Xr = 1;
          else {
            le.type(cn, "object", "invalid arguments for framebuffer");
            var fr = cn;
            if ("shape" in fr) {
              var no = fr.shape;
              le(
                Array.isArray(no) && no.length >= 2,
                "invalid shape for framebuffer"
              ),
                (Zn = no[0]),
                (Xr = no[1]);
            } else
              "radius" in fr && (Zn = Xr = fr.radius),
                "width" in fr && (Zn = fr.width),
                "height" in fr && (Xr = fr.height);
            ("color" in fr || "colors" in fr) &&
              ((Ir = fr.color || fr.colors),
              Array.isArray(Ir) &&
                le(
                  Ir.length === 1 || oe.webgl_draw_buffers,
                  "multiple render targets not supported"
                )),
              Ir ||
                ("colorCount" in fr &&
                  ((Ta = fr.colorCount | 0),
                  le(Ta > 0, "invalid color buffer count")),
                "colorTexture" in fr &&
                  ((aa = !!fr.colorTexture), (bi = "rgba4")),
                "colorType" in fr &&
                  ((Aa = fr.colorType),
                  aa
                    ? (le(
                        oe.oes_texture_float ||
                          !(Aa === "float" || Aa === "float32"),
                        "you must enable OES_texture_float in order to use floating point framebuffer objects"
                      ),
                      le(
                        oe.oes_texture_half_float ||
                          !(Aa === "half float" || Aa === "float16"),
                        "you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects"
                      ))
                    : Aa === "half float" || Aa === "float16"
                    ? (le(
                        oe.ext_color_buffer_half_float,
                        "you must enable EXT_color_buffer_half_float to use 16-bit render buffers"
                      ),
                      (bi = "rgba16f"))
                    : (Aa === "float" || Aa === "float32") &&
                      (le(
                        oe.webgl_color_buffer_float,
                        "you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"
                      ),
                      (bi = "rgba32f")),
                  le.oneOf(Aa, Zt, "invalid color type")),
                "colorFormat" in fr &&
                  ((bi = fr.colorFormat),
                  Dt.indexOf(bi) >= 0
                    ? (aa = !0)
                    : Rt.indexOf(bi) >= 0
                    ? (aa = !1)
                    : aa
                    ? le.oneOf(
                        fr.colorFormat,
                        Dt,
                        "invalid color format for texture"
                      )
                    : le.oneOf(
                        fr.colorFormat,
                        Rt,
                        "invalid color format for renderbuffer"
                      ))),
              ("depthTexture" in fr || "depthStencilTexture" in fr) &&
                ((Sa = !!(fr.depthTexture || fr.depthStencilTexture)),
                le(
                  !Sa || oe.webgl_depth_texture,
                  "webgl_depth_texture extension not supported"
                )),
              "depth" in fr &&
                (typeof fr.depth == "boolean"
                  ? (ia = fr.depth)
                  : ((ji = fr.depth), (Za = !1))),
              "stencil" in fr &&
                (typeof fr.stencil == "boolean"
                  ? (Za = fr.stencil)
                  : ((ka = fr.stencil), (ia = !1))),
              "depthStencil" in fr &&
                (typeof fr.depthStencil == "boolean"
                  ? (ia = Za = fr.depthStencil)
                  : ((mo = fr.depthStencil), (ia = !1), (Za = !1)));
          }
          var qr = null,
            jn = null,
            Cr = null,
            Vr = null;
          if (Array.isArray(Ir)) qr = Ir.map(Xt);
          else if (Ir) qr = [Xt(Ir)];
          else
            for (qr = new Array(Ta), tr = 0; tr < Ta; ++tr)
              qr[tr] = We(Zn, Xr, aa, bi, Aa);
          le(
            oe.webgl_draw_buffers || qr.length <= 1,
            "you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."
          ),
            le(
              qr.length <= be.maxColorAttachments,
              "too many color attachments, not supported"
            ),
            (Zn = Zn || qr[0].width),
            (Xr = Xr || qr[0].height),
            ji
              ? (jn = Xt(ji))
              : ia && !Za && (jn = We(Zn, Xr, Sa, "depth", "uint32")),
            ka
              ? (Cr = Xt(ka))
              : Za && !ia && (Cr = We(Zn, Xr, !1, "stencil", "uint8")),
            mo
              ? (Vr = Xt(mo))
              : !ji &&
                !ka &&
                Za &&
                ia &&
                (Vr = We(Zn, Xr, Sa, "depth stencil", "depth stencil")),
            le(
              !!ji + !!ka + !!mo <= 1,
              "invalid framebuffer configuration, can specify exactly one depth/stencil attachment"
            );
          var oa = null;
          for (tr = 0; tr < qr.length; ++tr)
            if (
              (Kt(qr[tr], Zn, Xr),
              le(
                !qr[tr] ||
                  (qr[tr].texture &&
                    N0.indexOf(qr[tr].texture._texture.format) >= 0) ||
                  (qr[tr].renderbuffer &&
                    g.indexOf(qr[tr].renderbuffer._renderbuffer.format) >= 0),
                "framebuffer color attachment " + tr + " is invalid"
              ),
              qr[tr] && qr[tr].texture)
            ) {
              var Tl =
                js[qr[tr].texture._texture.format] *
                As[qr[tr].texture._texture.type];
              oa === null
                ? (oa = Tl)
                : le(
                    oa === Tl,
                    "all color attachments much have the same number of bits per pixel."
                  );
            }
          return (
            Kt(jn, Zn, Xr),
            le(
              !jn ||
                (jn.texture && jn.texture._texture.format === Sc) ||
                (jn.renderbuffer &&
                  jn.renderbuffer._renderbuffer.format === R0),
              "invalid depth attachment for framebuffer object"
            ),
            Kt(Cr, Zn, Xr),
            le(
              !Cr ||
                (Cr.renderbuffer &&
                  Cr.renderbuffer._renderbuffer.format === ku),
              "invalid stencil attachment for framebuffer object"
            ),
            Kt(Vr, Zn, Xr),
            le(
              !Vr ||
                (Vr.texture && Vr.texture._texture.format === Nd) ||
                (Vr.renderbuffer &&
                  Vr.renderbuffer._renderbuffer.format === Nd),
              "invalid depth-stencil attachment for framebuffer object"
            ),
            Pt(_t),
            (_t.width = Zn),
            (_t.height = Xr),
            (_t.colorAttachments = qr),
            (_t.depthAttachment = jn),
            (_t.stencilAttachment = Cr),
            (_t.depthStencilAttachment = Vr),
            (kn.color = qr.map(ct)),
            (kn.depth = ct(jn)),
            (kn.stencil = ct(Cr)),
            (kn.depthStencil = ct(Vr)),
            (kn.width = _t.width),
            (kn.height = _t.height),
            wt(_t),
            kn
          );
        }
        function Er(cn, mr) {
          le(
            Ye.next !== _t,
            "can not resize a framebuffer which is currently in use"
          );
          var tr = Math.max(cn | 0, 1),
            Zn = Math.max(mr | 0 || tr, 1);
          if (tr === _t.width && Zn === _t.height) return kn;
          for (var Xr = _t.colorAttachments, ia = 0; ia < Xr.length; ++ia)
            Bt(Xr[ia], tr, Zn);
          return (
            Bt(_t.depthAttachment, tr, Zn),
            Bt(_t.stencilAttachment, tr, Zn),
            Bt(_t.depthStencilAttachment, tr, Zn),
            (_t.width = kn.width = tr),
            (_t.height = kn.height = Zn),
            wt(_t),
            kn
          );
        }
        return (
          kn(tn, Lt),
          r(kn, {
            resize: Er,
            _reglType: "framebuffer",
            _framebuffer: _t,
            destroy: function () {
              an(_t), Pt(_t);
            },
            use: function (cn) {
              Ye.setFBO({ framebuffer: kn }, cn);
            },
          })
        );
      }
      function Fn(tn) {
        var Lt = Array(6);
        function _t(Er) {
          var cn;
          le(
            Lt.indexOf(Ye.next) < 0,
            "can not update framebuffer which is currently in use"
          );
          var mr = { color: null },
            tr = 0,
            Zn = null,
            Xr = "rgba",
            ia = "uint8",
            Za = 1;
          if (typeof Er == "number") tr = Er | 0;
          else if (!Er) tr = 1;
          else {
            le.type(Er, "object", "invalid arguments for framebuffer");
            var Ir = Er;
            if ("shape" in Ir) {
              var aa = Ir.shape;
              le(
                Array.isArray(aa) && aa.length >= 2,
                "invalid shape for framebuffer"
              ),
                le(aa[0] === aa[1], "cube framebuffer must be square"),
                (tr = aa[0]);
            } else
              "radius" in Ir && (tr = Ir.radius | 0),
                "width" in Ir
                  ? ((tr = Ir.width | 0),
                    "height" in Ir && le(Ir.height === tr, "must be square"))
                  : "height" in Ir && (tr = Ir.height | 0);
            ("color" in Ir || "colors" in Ir) &&
              ((Zn = Ir.color || Ir.colors),
              Array.isArray(Zn) &&
                le(
                  Zn.length === 1 || oe.webgl_draw_buffers,
                  "multiple render targets not supported"
                )),
              Zn ||
                ("colorCount" in Ir &&
                  ((Za = Ir.colorCount | 0),
                  le(Za > 0, "invalid color buffer count")),
                "colorType" in Ir &&
                  (le.oneOf(Ir.colorType, Zt, "invalid color type"),
                  (ia = Ir.colorType)),
                "colorFormat" in Ir &&
                  ((Xr = Ir.colorFormat),
                  le.oneOf(
                    Ir.colorFormat,
                    Dt,
                    "invalid color format for texture"
                  ))),
              "depth" in Ir && (mr.depth = Ir.depth),
              "stencil" in Ir && (mr.stencil = Ir.stencil),
              "depthStencil" in Ir && (mr.depthStencil = Ir.depthStencil);
          }
          var bi;
          if (Zn)
            if (Array.isArray(Zn))
              for (bi = [], cn = 0; cn < Zn.length; ++cn) bi[cn] = Zn[cn];
            else bi = [Zn];
          else {
            bi = Array(Za);
            var Aa = { radius: tr, format: Xr, type: ia };
            for (cn = 0; cn < Za; ++cn) bi[cn] = et.createCube(Aa);
          }
          for (mr.color = Array(bi.length), cn = 0; cn < bi.length; ++cn) {
            var Ta = bi[cn];
            le(
              typeof Ta == "function" && Ta._reglType === "textureCube",
              "invalid cube map"
            ),
              (tr = tr || Ta.width),
              le(Ta.width === tr && Ta.height === tr, "invalid cube map shape"),
              (mr.color[cn] = { target: Ac, data: bi[cn] });
          }
          for (cn = 0; cn < 6; ++cn) {
            for (var ji = 0; ji < bi.length; ++ji)
              mr.color[ji].target = Ac + cn;
            cn > 0 &&
              ((mr.depth = Lt[0].depth),
              (mr.stencil = Lt[0].stencil),
              (mr.depthStencil = Lt[0].depthStencil)),
              Lt[cn] ? Lt[cn](mr) : (Lt[cn] = en(mr));
          }
          return r(_t, { width: tr, height: tr, color: bi });
        }
        function kn(Er) {
          var cn,
            mr = Er | 0;
          if (
            (le(
              mr > 0 && mr <= be.maxCubeMapSize,
              "invalid radius for cube fbo"
            ),
            mr === _t.width)
          )
            return _t;
          var tr = _t.color;
          for (cn = 0; cn < tr.length; ++cn) tr[cn].resize(mr);
          for (cn = 0; cn < 6; ++cn) Lt[cn].resize(mr);
          return (_t.width = _t.height = mr), _t;
        }
        return (
          _t(tn),
          r(_t, {
            faces: Lt,
            resize: kn,
            _reglType: "framebufferCube",
            destroy: function () {
              Lt.forEach(function (Er) {
                Er.destroy();
              });
            },
          })
        );
      }
      function rr() {
        (Ye.cur = null),
          (Ye.next = null),
          (Ye.dirty = !0),
          ie(Tt).forEach(function (tn) {
            (tn.framebuffer = D.createFramebuffer()), wt(tn);
          });
      }
      return r(Ye, {
        getFramebuffer: function (tn) {
          if (typeof tn == "function" && tn._reglType === "framebuffer") {
            var Lt = tn._framebuffer;
            if (Lt instanceof ln) return Lt;
          }
          return null;
        },
        create: en,
        createCube: Fn,
        clear: function () {
          ie(Tt).forEach(an);
        },
        restore: rr,
      });
    }
    var w = 5126,
      M = 34962;
    function B() {
      (this.state = 0),
        (this.x = 0),
        (this.y = 0),
        (this.z = 0),
        (this.w = 0),
        (this.buffer = null),
        (this.size = 0),
        (this.normalized = !1),
        (this.type = w),
        (this.offset = 0),
        (this.stride = 0),
        (this.divisor = 0);
    }
    function V(D, oe, be, et, vt) {
      for (var tt = be.maxAttributes, Ye = new Array(tt), Dt = 0; Dt < tt; ++Dt)
        Ye[Dt] = new B();
      var Rt = 0,
        Zt = {},
        kt = {
          Record: B,
          scope: {},
          state: Ye,
          currentVAO: null,
          targetVAO: null,
          restore: Kt() ? Tt : function () {},
          createVAO: ln,
          getVAO: Xt,
          destroyBuffer: Wt,
          setVAO: Kt() ? We : ct,
          clear: Kt() ? Bt : function () {},
        };
      function Wt(Pt) {
        for (var an = 0; an < Ye.length; ++an) {
          var wt = Ye[an];
          wt.buffer === Pt &&
            (D.disableVertexAttribArray(an), (wt.buffer = null));
        }
      }
      function Kt() {
        return oe.oes_vertex_array_object;
      }
      function It() {
        return oe.angle_instanced_arrays;
      }
      function Xt(Pt) {
        return typeof Pt == "function" && Pt._vao ? Pt._vao : null;
      }
      function We(Pt) {
        if (Pt !== kt.currentVAO) {
          var an = Kt();
          Pt ? an.bindVertexArrayOES(Pt.vao) : an.bindVertexArrayOES(null),
            (kt.currentVAO = Pt);
        }
      }
      function ct(Pt) {
        if (Pt !== kt.currentVAO) {
          if (Pt) Pt.bindAttrs();
          else
            for (var an = It(), wt = 0; wt < Ye.length; ++wt) {
              var en = Ye[wt];
              en.buffer
                ? (D.enableVertexAttribArray(wt),
                  D.vertexAttribPointer(
                    wt,
                    en.size,
                    en.type,
                    en.normalized,
                    en.stride,
                    en.offfset
                  ),
                  an && an.vertexAttribDivisorANGLE(wt, en.divisor))
                : (D.disableVertexAttribArray(wt),
                  D.vertexAttrib4f(wt, en.x, en.y, en.z, en.w));
            }
          kt.currentVAO = Pt;
        }
      }
      function Bt() {
        ie(Zt).forEach(function (Pt) {
          Pt.destroy();
        });
      }
      function rn() {
        (this.id = ++Rt), (this.attributes = []);
        var Pt = Kt();
        Pt ? (this.vao = Pt.createVertexArrayOES()) : (this.vao = null),
          (Zt[this.id] = this),
          (this.buffers = []);
      }
      (rn.prototype.bindAttrs = function () {
        for (
          var Pt = It(), an = this.attributes, wt = 0;
          wt < an.length;
          ++wt
        ) {
          var en = an[wt];
          en.buffer
            ? (D.enableVertexAttribArray(wt),
              D.bindBuffer(M, en.buffer.buffer),
              D.vertexAttribPointer(
                wt,
                en.size,
                en.type,
                en.normalized,
                en.stride,
                en.offset
              ),
              Pt && Pt.vertexAttribDivisorANGLE(wt, en.divisor))
            : (D.disableVertexAttribArray(wt),
              D.vertexAttrib4f(wt, en.x, en.y, en.z, en.w));
        }
        for (var Fn = an.length; Fn < tt; ++Fn) D.disableVertexAttribArray(Fn);
      }),
        (rn.prototype.refresh = function () {
          var Pt = Kt();
          Pt &&
            (Pt.bindVertexArrayOES(this.vao),
            this.bindAttrs(),
            (kt.currentVAO = this));
        }),
        (rn.prototype.destroy = function () {
          if (this.vao) {
            var Pt = Kt();
            this === kt.currentVAO &&
              ((kt.currentVAO = null), Pt.bindVertexArrayOES(null)),
              Pt.deleteVertexArrayOES(this.vao),
              (this.vao = null);
          }
          Zt[this.id] && (delete Zt[this.id], (et.vaoCount -= 1));
        });
      function Tt() {
        var Pt = Kt();
        Pt &&
          ie(Zt).forEach(function (an) {
            an.refresh();
          });
      }
      function ln(Pt) {
        var an = new rn();
        et.vaoCount += 1;
        function wt(en) {
          le(
            Array.isArray(en),
            "arguments to vertex array constructor must be an array"
          ),
            le(en.length < tt, "too many attributes"),
            le(en.length > 0, "must specify at least one attribute");
          for (var Fn = 0; Fn < an.buffers.length; ++Fn)
            an.buffers[Fn].destroy();
          an.buffers.length = 0;
          var rr = an.attributes;
          rr.length = en.length;
          for (var tn = 0; tn < en.length; ++tn) {
            var Lt = en[tn],
              _t = (rr[tn] = new B());
            if (Array.isArray(Lt) || n(Lt) || Y(Lt)) {
              var kn = vt.create(Lt, M, !1, !0);
              (_t.buffer = vt.getBuffer(kn)),
                (_t.size = _t.buffer.dimension | 0),
                (_t.normalized = !1),
                (_t.type = _t.buffer.dtype),
                (_t.offset = 0),
                (_t.stride = 0),
                (_t.divisor = 0),
                (_t.state = 1),
                an.buffers.push(kn);
            } else
              vt.getBuffer(Lt)
                ? ((_t.buffer = vt.getBuffer(Lt)),
                  (_t.size = _t.buffer.dimension | 0),
                  (_t.normalized = !1),
                  (_t.type = _t.buffer.dtype),
                  (_t.offset = 0),
                  (_t.stride = 0),
                  (_t.divisor = 0),
                  (_t.state = 1))
                : vt.getBuffer(Lt.buffer)
                ? ((_t.buffer = vt.getBuffer(Lt.buffer)),
                  (_t.size = (+Lt.size || _t.buffer.dimension) | 0),
                  (_t.normalized = !!Lt.normalized || !1),
                  "type" in Lt
                    ? (le.parameter(Lt.type, Wa, "invalid buffer type"),
                      (_t.type = Wa[Lt.type]))
                    : (_t.type = _t.buffer.dtype),
                  (_t.offset = (Lt.offset || 0) | 0),
                  (_t.stride = (Lt.stride || 0) | 0),
                  (_t.divisor = (Lt.divisor || 0) | 0),
                  (_t.state = 1),
                  le(
                    _t.size >= 1 && _t.size <= 4,
                    "size must be between 1 and 4"
                  ),
                  le(_t.offset >= 0, "invalid offset"),
                  le(
                    _t.stride >= 0 && _t.stride <= 255,
                    "stride must be between 0 and 255"
                  ),
                  le(_t.divisor >= 0, "divisor must be positive"),
                  le(
                    !_t.divisor || !!oe.angle_instanced_arrays,
                    "ANGLE_instanced_arrays must be enabled to use divisor"
                  ))
                : "x" in Lt
                ? (le(tn > 0, "first attribute must not be a constant"),
                  (_t.x = +Lt.x || 0),
                  (_t.y = +Lt.y || 0),
                  (_t.z = +Lt.z || 0),
                  (_t.w = +Lt.w || 0),
                  (_t.state = 2))
                : le(!1, "invalid attribute spec for location " + tn);
          }
          return an.refresh(), wt;
        }
        return (
          (wt.destroy = function () {
            an.destroy();
          }),
          (wt._vao = an),
          (wt._reglType = "vao"),
          wt(Pt)
        );
      }
      return kt;
    }
    var J = 35632,
      ne = 35633,
      re = 35718,
      _e = 35721;
    function pe(D, oe, be, et) {
      var vt = {},
        tt = {};
      function Ye(We, ct, Bt, rn) {
        (this.name = We),
          (this.id = ct),
          (this.location = Bt),
          (this.info = rn);
      }
      function Dt(We, ct) {
        for (var Bt = 0; Bt < We.length; ++Bt)
          if (We[Bt].id === ct.id) {
            We[Bt].location = ct.location;
            return;
          }
        We.push(ct);
      }
      function Rt(We, ct, Bt) {
        var rn = We === J ? vt : tt,
          Tt = rn[ct];
        if (!Tt) {
          var ln = oe.str(ct);
          (Tt = D.createShader(We)),
            D.shaderSource(Tt, ln),
            D.compileShader(Tt),
            le.shaderError(D, Tt, ln, We, Bt),
            (rn[ct] = Tt);
        }
        return Tt;
      }
      var Zt = {},
        kt = [],
        Wt = 0;
      function Kt(We, ct) {
        (this.id = Wt++),
          (this.fragId = We),
          (this.vertId = ct),
          (this.program = null),
          (this.uniforms = []),
          (this.attributes = []),
          et.profile && (this.stats = { uniformsCount: 0, attributesCount: 0 });
      }
      function It(We, ct, Bt) {
        var rn,
          Tt,
          ln = Rt(J, We.fragId),
          Pt = Rt(ne, We.vertId),
          an = (We.program = D.createProgram());
        if ((D.attachShader(an, ln), D.attachShader(an, Pt), Bt))
          for (rn = 0; rn < Bt.length; ++rn) {
            var wt = Bt[rn];
            D.bindAttribLocation(an, wt[0], wt[1]);
          }
        D.linkProgram(an),
          le.linkError(D, an, oe.str(We.fragId), oe.str(We.vertId), ct);
        var en = D.getProgramParameter(an, re);
        et.profile && (We.stats.uniformsCount = en);
        var Fn = We.uniforms;
        for (rn = 0; rn < en; ++rn)
          if (((Tt = D.getActiveUniform(an, rn)), Tt))
            if (Tt.size > 1)
              for (var rr = 0; rr < Tt.size; ++rr) {
                var tn = Tt.name.replace("[0]", "[" + rr + "]");
                Dt(Fn, new Ye(tn, oe.id(tn), D.getUniformLocation(an, tn), Tt));
              }
            else
              Dt(
                Fn,
                new Ye(
                  Tt.name,
                  oe.id(Tt.name),
                  D.getUniformLocation(an, Tt.name),
                  Tt
                )
              );
        var Lt = D.getProgramParameter(an, _e);
        et.profile && (We.stats.attributesCount = Lt);
        var _t = We.attributes;
        for (rn = 0; rn < Lt; ++rn)
          (Tt = D.getActiveAttrib(an, rn)),
            Tt &&
              Dt(
                _t,
                new Ye(
                  Tt.name,
                  oe.id(Tt.name),
                  D.getAttribLocation(an, Tt.name),
                  Tt
                )
              );
      }
      et.profile &&
        ((be.getMaxUniformsCount = function () {
          var We = 0;
          return (
            kt.forEach(function (ct) {
              ct.stats.uniformsCount > We && (We = ct.stats.uniformsCount);
            }),
            We
          );
        }),
        (be.getMaxAttributesCount = function () {
          var We = 0;
          return (
            kt.forEach(function (ct) {
              ct.stats.attributesCount > We && (We = ct.stats.attributesCount);
            }),
            We
          );
        }));
      function Xt() {
        (vt = {}), (tt = {});
        for (var We = 0; We < kt.length; ++We)
          It(
            kt[We],
            null,
            kt[We].attributes.map(function (ct) {
              return [ct.location, ct.name];
            })
          );
      }
      return {
        clear: function () {
          var We = D.deleteShader.bind(D);
          ie(vt).forEach(We),
            (vt = {}),
            ie(tt).forEach(We),
            (tt = {}),
            kt.forEach(function (ct) {
              D.deleteProgram(ct.program);
            }),
            (kt.length = 0),
            (Zt = {}),
            (be.shaderCount = 0);
        },
        program: function (We, ct, Bt, rn) {
          le.command(We >= 0, "missing vertex shader", Bt),
            le.command(ct >= 0, "missing fragment shader", Bt);
          var Tt = Zt[ct];
          Tt || (Tt = Zt[ct] = {});
          var ln = Tt[We];
          if (ln && !rn) return ln;
          var Pt = new Kt(ct, We);
          return (
            be.shaderCount++,
            It(Pt, Bt, rn),
            ln || (Tt[We] = Pt),
            kt.push(Pt),
            Pt
          );
        },
        restore: Xt,
        shader: Rt,
        frag: -1,
        vert: -1,
      };
    }
    var Ce = 6408,
      de = 5121,
      we = 3333,
      De = 5126;
    function Ge(D, oe, be, et, vt, tt, Ye) {
      function Dt(kt) {
        var Wt;
        oe.next === null
          ? (le(
              vt.preserveDrawingBuffer,
              'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'
            ),
            (Wt = de))
          : (le(
              oe.next.colorAttachments[0].texture !== null,
              "You cannot read from a renderbuffer"
            ),
            (Wt = oe.next.colorAttachments[0].texture._texture.type),
            tt.oes_texture_float
              ? (le(
                  Wt === de || Wt === De,
                  "Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"
                ),
                Wt === De &&
                  le(
                    Ye.readFloat,
                    "Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float"
                  ))
              : le(
                  Wt === de,
                  "Reading from a framebuffer is only allowed for the type 'uint8'"
                ));
        var Kt = 0,
          It = 0,
          Xt = et.framebufferWidth,
          We = et.framebufferHeight,
          ct = null;
        n(kt)
          ? (ct = kt)
          : kt &&
            (le.type(kt, "object", "invalid arguments to regl.read()"),
            (Kt = kt.x | 0),
            (It = kt.y | 0),
            le(
              Kt >= 0 && Kt < et.framebufferWidth,
              "invalid x offset for regl.read"
            ),
            le(
              It >= 0 && It < et.framebufferHeight,
              "invalid y offset for regl.read"
            ),
            (Xt = (kt.width || et.framebufferWidth - Kt) | 0),
            (We = (kt.height || et.framebufferHeight - It) | 0),
            (ct = kt.data || null)),
          ct &&
            (Wt === de
              ? le(
                  ct instanceof Uint8Array,
                  "buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"
                )
              : Wt === De &&
                le(
                  ct instanceof Float32Array,
                  "buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"
                )),
          le(
            Xt > 0 && Xt + Kt <= et.framebufferWidth,
            "invalid width for read pixels"
          ),
          le(
            We > 0 && We + It <= et.framebufferHeight,
            "invalid height for read pixels"
          ),
          be();
        var Bt = Xt * We * 4;
        return (
          ct ||
            (Wt === de
              ? (ct = new Uint8Array(Bt))
              : Wt === De && (ct = ct || new Float32Array(Bt))),
          le.isTypedArray(
            ct,
            "data buffer for regl.read() must be a typedarray"
          ),
          le(ct.byteLength >= Bt, "data buffer for regl.read() too small"),
          D.pixelStorei(we, 4),
          D.readPixels(Kt, It, Xt, We, Ce, Wt, ct),
          ct
        );
      }
      function Rt(kt) {
        var Wt;
        return (
          oe.setFBO({ framebuffer: kt.framebuffer }, function () {
            Wt = Dt(kt);
          }),
          Wt
        );
      }
      function Zt(kt) {
        return !kt || !("framebuffer" in kt) ? Dt(kt) : Rt(kt);
      }
      return Zt;
    }
    function st(D) {
      return Array.prototype.slice.call(D);
    }
    function Je(D) {
      return st(D).join("");
    }
    function ht() {
      var D = 0,
        oe = [],
        be = [];
      function et(Wt) {
        for (var Kt = 0; Kt < be.length; ++Kt) if (be[Kt] === Wt) return oe[Kt];
        var It = "g" + D++;
        return oe.push(It), be.push(Wt), It;
      }
      function vt() {
        var Wt = [];
        function Kt() {
          Wt.push.apply(Wt, st(arguments));
        }
        var It = [];
        function Xt() {
          var We = "v" + D++;
          return (
            It.push(We),
            arguments.length > 0 &&
              (Wt.push(We, "="),
              Wt.push.apply(Wt, st(arguments)),
              Wt.push(";")),
            We
          );
        }
        return r(Kt, {
          def: Xt,
          toString: function () {
            return Je([
              It.length > 0 ? "var " + It.join(",") + ";" : "",
              Je(Wt),
            ]);
          },
        });
      }
      function tt() {
        var Wt = vt(),
          Kt = vt(),
          It = Wt.toString,
          Xt = Kt.toString;
        function We(ct, Bt) {
          Kt(ct, Bt, "=", Wt.def(ct, Bt), ";");
        }
        return r(
          function () {
            Wt.apply(Wt, st(arguments));
          },
          {
            def: Wt.def,
            entry: Wt,
            exit: Kt,
            save: We,
            set: function (ct, Bt, rn) {
              We(ct, Bt), Wt(ct, Bt, "=", rn, ";");
            },
            toString: function () {
              return It() + Xt();
            },
          }
        );
      }
      function Ye() {
        var Wt = Je(arguments),
          Kt = tt(),
          It = tt(),
          Xt = Kt.toString,
          We = It.toString;
        return r(Kt, {
          then: function () {
            return Kt.apply(Kt, st(arguments)), this;
          },
          else: function () {
            return It.apply(It, st(arguments)), this;
          },
          toString: function () {
            var ct = We();
            return (
              ct && (ct = "else{" + ct + "}"),
              Je(["if(", Wt, "){", Xt(), "}", ct])
            );
          },
        });
      }
      var Dt = vt(),
        Rt = {};
      function Zt(Wt, Kt) {
        var It = [];
        function Xt() {
          var Tt = "a" + It.length;
          return It.push(Tt), Tt;
        }
        Kt = Kt || 0;
        for (var We = 0; We < Kt; ++We) Xt();
        var ct = tt(),
          Bt = ct.toString,
          rn = (Rt[Wt] = r(ct, {
            arg: Xt,
            toString: function () {
              return Je(["function(", It.join(), "){", Bt(), "}"]);
            },
          }));
        return rn;
      }
      function kt() {
        var Wt = ['"use strict";', Dt, "return {"];
        Object.keys(Rt).forEach(function (Xt) {
          Wt.push('"', Xt, '":', Rt[Xt].toString(), ",");
        }),
          Wt.push("}");
        var Kt = Je(Wt)
            .replace(
              /;/g,
              `;
`
            )
            .replace(
              /}/g,
              `}
`
            )
            .replace(
              /{/g,
              `{
`
            ),
          It = Function.apply(null, oe.concat(Kt));
        return It.apply(null, be);
      }
      return {
        global: Dt,
        link: et,
        block: vt,
        proc: Zt,
        scope: tt,
        cond: Ye,
        compile: kt,
      };
    }
    var Et = "xyzw".split(""),
      jt = 5121,
      Ft = 1,
      sn = 2,
      In = 0,
      Bn = 1,
      Dn = 2,
      Fr = 3,
      pn = 4,
      $n = "dither",
      dr = "blend.enable",
      Yn = "blend.color",
      Xn = "blend.equation",
      cr = "blend.func",
      Gn = "depth.enable",
      Hn = "depth.func",
      na = "depth.range",
      Mi = "depth.mask",
      Ba = "colorMask",
      ba = "cull.enable",
      Ri = "cull.face",
      Pi = "frontFace",
      ho = "lineWidth",
      to = "polygonOffset.enable",
      Ws = "polygonOffset.offset",
      po = "sample.alpha",
      us = "sample.enable",
      ko = "sample.coverage",
      tu = "stencil.enable",
      wc = "stencil.mask",
      Xs = "stencil.func",
      ql = "stencil.opFront",
      El = "stencil.opBack",
      Ts = "scissor.enable",
      $l = "scissor.box",
      Ga = "viewport",
      Vi = "profile",
      Eo = "framebuffer",
      ds = "vert",
      Ss = "frag",
      Pr = "elements",
      Fa = "primitive",
      ra = "count",
      Gs = "offset",
      Id = "instances",
      Kl = "vao",
      I0 = "Width",
      Cc = "Height",
      Nc = Eo + I0,
      ws = Eo + Cc,
      Md = Ga + I0,
      Zp = Ga + Cc,
      nu = "drawingBuffer",
      Ao = nu + I0,
      G1 = nu + Cc,
      Z1 = [cr, Xn, Xs, ql, El, ko, Ga, $l, Ws],
      Pd = 34962,
      Rv = 34963,
      Iv = 35632,
      Mv = 35633,
      Th = 3553,
      Pv = 34067,
      Sh = 2884,
      Y1 = 3042,
      ru = 3024,
      M0 = 2960,
      Ov = 2929,
      Lv = 3089,
      Dv = 32823,
      Bv = 32926,
      Fv = 32928,
      Yp = 5126,
      wh = 35664,
      Od = 35665,
      Ch = 35666,
      iu = 5124,
      Nh = 35667,
      Hi = 35668,
      Uu = 35669,
      Rh = 35670,
      zu = 35671,
      Vu = 35672,
      au = 35673,
      Ld = 35674,
      Dd = 35675,
      Rc = 35676,
      Hu = 35678,
      ju = 35680,
      q1 = 4,
      Ic = 1028,
      Wu = 1029,
      Ih = 2304,
      qp = 2305,
      $p = 32775,
      Kp = 32776,
      Al = 519,
      ou = 7680,
      $1 = 0,
      K1 = 1,
      Q1 = 32774,
      J1 = 513,
      Xu = 36160,
      kv = 36064,
      Ql = {
        0: 0,
        1: 1,
        zero: 0,
        one: 1,
        "src color": 768,
        "one minus src color": 769,
        "src alpha": 770,
        "one minus src alpha": 771,
        "dst color": 774,
        "one minus dst color": 775,
        "dst alpha": 772,
        "one minus dst alpha": 773,
        "constant color": 32769,
        "one minus constant color": 32770,
        "constant alpha": 32771,
        "one minus constant alpha": 32772,
        "src alpha saturate": 776,
      },
      Qp = [
        "constant color, constant alpha",
        "one minus constant color, constant alpha",
        "constant color, one minus constant alpha",
        "one minus constant color, one minus constant alpha",
        "constant alpha, constant color",
        "constant alpha, one minus constant color",
        "one minus constant alpha, constant color",
        "one minus constant alpha, one minus constant color",
      ],
      Gu = {
        never: 512,
        less: 513,
        "<": 513,
        equal: 514,
        "=": 514,
        "==": 514,
        "===": 514,
        lequal: 515,
        "<=": 515,
        greater: 516,
        ">": 516,
        notequal: 517,
        "!=": 517,
        "!==": 517,
        gequal: 518,
        ">=": 518,
        always: 519,
      },
      su = {
        0: 0,
        zero: 0,
        keep: 7680,
        replace: 7681,
        increment: 7682,
        decrement: 7683,
        "increment wrap": 34055,
        "decrement wrap": 34056,
        invert: 5386,
      },
      em = { frag: Iv, vert: Mv },
      lu = { cw: Ih, ccw: qp };
    function Mh(D) {
      return Array.isArray(D) || n(D) || Y(D);
    }
    function Ph(D) {
      return D.sort(function (oe, be) {
        return oe === Ga ? -1 : be === Ga ? 1 : oe < be ? -1 : 1;
      });
    }
    function To(D, oe, be, et) {
      (this.thisDep = D),
        (this.contextDep = oe),
        (this.propDep = be),
        (this.append = et);
    }
    function fo(D) {
      return D && !(D.thisDep || D.contextDep || D.propDep);
    }
    function Ea(D) {
      return new To(!1, !1, !1, D);
    }
    function hs(D, oe) {
      var be = D.type;
      if (be === In) {
        var et = D.data.length;
        return new To(!0, et >= 1, et >= 2, oe);
      } else if (be === pn) {
        var vt = D.data;
        return new To(vt.thisDep, vt.contextDep, vt.propDep, oe);
      } else return new To(be === Fr, be === Dn, be === Bn, oe);
    }
    var tm = new To(!1, !1, !1, function () {});
    function P0(D, oe, be, et, vt, tt, Ye, Dt, Rt, Zt, kt, Wt, Kt, It, Xt) {
      var We = Zt.Record,
        ct = { add: 32774, subtract: 32778, "reverse subtract": 32779 };
      be.ext_blend_minmax && ((ct.min = $p), (ct.max = Kp));
      var Bt = be.angle_instanced_arrays,
        rn = be.webgl_draw_buffers,
        Tt = { dirty: !0, profile: Xt.profile },
        ln = {},
        Pt = [],
        an = {},
        wt = {};
      function en(q) {
        return q.replace(".", "_");
      }
      function Fn(q, ce, Ee) {
        var Qe = en(q);
        Pt.push(q), (ln[Qe] = Tt[Qe] = !!Ee), (an[Qe] = ce);
      }
      function rr(q, ce, Ee) {
        var Qe = en(q);
        Pt.push(q),
          Array.isArray(Ee)
            ? ((Tt[Qe] = Ee.slice()), (ln[Qe] = Ee.slice()))
            : (Tt[Qe] = ln[Qe] = Ee),
          (wt[Qe] = ce);
      }
      Fn($n, ru),
        Fn(dr, Y1),
        rr(Yn, "blendColor", [0, 0, 0, 0]),
        rr(Xn, "blendEquationSeparate", [Q1, Q1]),
        rr(cr, "blendFuncSeparate", [K1, $1, K1, $1]),
        Fn(Gn, Ov, !0),
        rr(Hn, "depthFunc", J1),
        rr(na, "depthRange", [0, 1]),
        rr(Mi, "depthMask", !0),
        rr(Ba, Ba, [!0, !0, !0, !0]),
        Fn(ba, Sh),
        rr(Ri, "cullFace", Wu),
        rr(Pi, Pi, qp),
        rr(ho, ho, 1),
        Fn(to, Dv),
        rr(Ws, "polygonOffset", [0, 0]),
        Fn(po, Bv),
        Fn(us, Fv),
        rr(ko, "sampleCoverage", [1, !1]),
        Fn(tu, M0),
        rr(wc, "stencilMask", -1),
        rr(Xs, "stencilFunc", [Al, 0, -1]),
        rr(ql, "stencilOpSeparate", [Ic, ou, ou, ou]),
        rr(El, "stencilOpSeparate", [Wu, ou, ou, ou]),
        Fn(Ts, Lv),
        rr($l, "scissor", [0, 0, D.drawingBufferWidth, D.drawingBufferHeight]),
        rr(Ga, Ga, [0, 0, D.drawingBufferWidth, D.drawingBufferHeight]);
      var tn = {
          gl: D,
          context: Kt,
          strings: oe,
          next: ln,
          current: Tt,
          draw: Wt,
          elements: tt,
          buffer: vt,
          shader: kt,
          attributes: Zt.state,
          vao: Zt,
          uniforms: Rt,
          framebuffer: Dt,
          extensions: be,
          timer: It,
          isBufferArgs: Mh,
        },
        Lt = {
          primTypes: Fs,
          compareFuncs: Gu,
          blendFuncs: Ql,
          blendEquations: ct,
          stencilOps: su,
          glTypes: Wa,
          orientationType: lu,
        };
      le.optional(function () {
        tn.isArrayLike = zi;
      }),
        rn &&
          ((Lt.backBuffer = [Wu]),
          (Lt.drawBuffer = Wr(et.maxDrawbuffers, function (q) {
            return q === 0
              ? [0]
              : Wr(q, function (ce) {
                  return kv + ce;
                });
          })));
      var _t = 0;
      function kn() {
        var q = ht(),
          ce = q.link,
          Ee = q.global;
        (q.id = _t++), (q.batchId = "0");
        var Qe = ce(tn),
          $e = (q.shared = { props: "a0" });
        Object.keys(tn).forEach(function (Me) {
          $e[Me] = Ee.def(Qe, ".", Me);
        }),
          le.optional(function () {
            (q.CHECK = ce(le)),
              (q.commandStr = le.guessCommand()),
              (q.command = ce(q.commandStr)),
              (q.assert = function (Me, se, Oe) {
                Me(
                  "if(!(",
                  se,
                  "))",
                  this.CHECK,
                  ".commandRaise(",
                  ce(Oe),
                  ",",
                  this.command,
                  ");"
                );
              }),
              (Lt.invalidBlendCombinations = Qp);
          });
        var Ne = (q.next = {}),
          Le = (q.current = {});
        Object.keys(wt).forEach(function (Me) {
          Array.isArray(Tt[Me]) &&
            ((Ne[Me] = Ee.def($e.next, ".", Me)),
            (Le[Me] = Ee.def($e.current, ".", Me)));
        });
        var Ue = (q.constants = {});
        Object.keys(Lt).forEach(function (Me) {
          Ue[Me] = Ee.def(JSON.stringify(Lt[Me]));
        }),
          (q.invoke = function (Me, se) {
            switch (se.type) {
              case In:
                var Oe = ["this", $e.context, $e.props, q.batchId];
                return Me.def(
                  ce(se.data),
                  ".call(",
                  Oe.slice(0, Math.max(se.data.length + 1, 4)),
                  ")"
                );
              case Bn:
                return Me.def($e.props, se.data);
              case Dn:
                return Me.def($e.context, se.data);
              case Fr:
                return Me.def("this", se.data);
              case pn:
                return se.data.append(q, Me), se.data.ref;
            }
          }),
          (q.attribCache = {});
        var ve = {};
        return (
          (q.scopeAttrib = function (Me) {
            var se = oe.id(Me);
            if (se in ve) return ve[se];
            var Oe = Zt.scope[se];
            Oe || (Oe = Zt.scope[se] = new We());
            var ot = (ve[se] = ce(Oe));
            return ot;
          }),
          q
        );
      }
      function Er(q) {
        var ce = q.static,
          Ee = q.dynamic,
          Qe;
        if (Vi in ce) {
          var $e = !!ce[Vi];
          (Qe = Ea(function (Le, Ue) {
            return $e;
          })),
            (Qe.enable = $e);
        } else if (Vi in Ee) {
          var Ne = Ee[Vi];
          Qe = hs(Ne, function (Le, Ue) {
            return Le.invoke(Ue, Ne);
          });
        }
        return Qe;
      }
      function cn(q, ce) {
        var Ee = q.static,
          Qe = q.dynamic;
        if (Eo in Ee) {
          var $e = Ee[Eo];
          return $e
            ? (($e = Dt.getFramebuffer($e)),
              le.command($e, "invalid framebuffer object"),
              Ea(function (Le, Ue) {
                var ve = Le.link($e),
                  Me = Le.shared;
                Ue.set(Me.framebuffer, ".next", ve);
                var se = Me.context;
                return (
                  Ue.set(se, "." + Nc, ve + ".width"),
                  Ue.set(se, "." + ws, ve + ".height"),
                  ve
                );
              }))
            : Ea(function (Le, Ue) {
                var ve = Le.shared;
                Ue.set(ve.framebuffer, ".next", "null");
                var Me = ve.context;
                return (
                  Ue.set(Me, "." + Nc, Me + "." + Ao),
                  Ue.set(Me, "." + ws, Me + "." + G1),
                  "null"
                );
              });
        } else if (Eo in Qe) {
          var Ne = Qe[Eo];
          return hs(Ne, function (Le, Ue) {
            var ve = Le.invoke(Ue, Ne),
              Me = Le.shared,
              se = Me.framebuffer,
              Oe = Ue.def(se, ".getFramebuffer(", ve, ")");
            le.optional(function () {
              Le.assert(Ue, "!" + ve + "||" + Oe, "invalid framebuffer object");
            }),
              Ue.set(se, ".next", Oe);
            var ot = Me.context;
            return (
              Ue.set(ot, "." + Nc, Oe + "?" + Oe + ".width:" + ot + "." + Ao),
              Ue.set(ot, "." + ws, Oe + "?" + Oe + ".height:" + ot + "." + G1),
              Oe
            );
          });
        } else return null;
      }
      function mr(q, ce, Ee) {
        var Qe = q.static,
          $e = q.dynamic;
        function Ne(ve) {
          if (ve in Qe) {
            var Me = Qe[ve];
            le.commandType(Me, "object", "invalid " + ve, Ee.commandStr);
            var se = !0,
              Oe = Me.x | 0,
              ot = Me.y | 0,
              ft,
              Ct;
            return (
              "width" in Me
                ? ((ft = Me.width | 0),
                  le.command(ft >= 0, "invalid " + ve, Ee.commandStr))
                : (se = !1),
              "height" in Me
                ? ((Ct = Me.height | 0),
                  le.command(Ct >= 0, "invalid " + ve, Ee.commandStr))
                : (se = !1),
              new To(
                !se && ce && ce.thisDep,
                !se && ce && ce.contextDep,
                !se && ce && ce.propDep,
                function (wn, _n) {
                  var En = wn.shared.context,
                    Wn = ft;
                  "width" in Me || (Wn = _n.def(En, ".", Nc, "-", Oe));
                  var Jn = Ct;
                  return (
                    "height" in Me || (Jn = _n.def(En, ".", ws, "-", ot)),
                    [Oe, ot, Wn, Jn]
                  );
                }
              )
            );
          } else if (ve in $e) {
            var xt = $e[ve],
              Mt = hs(xt, function (wn, _n) {
                var En = wn.invoke(_n, xt);
                le.optional(function () {
                  wn.assert(
                    _n,
                    En + "&&typeof " + En + '==="object"',
                    "invalid " + ve
                  );
                });
                var Wn = wn.shared.context,
                  Jn = _n.def(En, ".x|0"),
                  $r = _n.def(En, ".y|0"),
                  wa = _n.def(
                    '"width" in ',
                    En,
                    "?",
                    En,
                    ".width|0:",
                    "(",
                    Wn,
                    ".",
                    Nc,
                    "-",
                    Jn,
                    ")"
                  ),
                  Sl = _n.def(
                    '"height" in ',
                    En,
                    "?",
                    En,
                    ".height|0:",
                    "(",
                    Wn,
                    ".",
                    ws,
                    "-",
                    $r,
                    ")"
                  );
                return (
                  le.optional(function () {
                    wn.assert(_n, wa + ">=0&&" + Sl + ">=0", "invalid " + ve);
                  }),
                  [Jn, $r, wa, Sl]
                );
              });
            return (
              ce &&
                ((Mt.thisDep = Mt.thisDep || ce.thisDep),
                (Mt.contextDep = Mt.contextDep || ce.contextDep),
                (Mt.propDep = Mt.propDep || ce.propDep)),
              Mt
            );
          } else
            return ce
              ? new To(ce.thisDep, ce.contextDep, ce.propDep, function (
                  wn,
                  _n
                ) {
                  var En = wn.shared.context;
                  return [0, 0, _n.def(En, ".", Nc), _n.def(En, ".", ws)];
                })
              : null;
        }
        var Le = Ne(Ga);
        if (Le) {
          var Ue = Le;
          Le = new To(Le.thisDep, Le.contextDep, Le.propDep, function (ve, Me) {
            var se = Ue.append(ve, Me),
              Oe = ve.shared.context;
            return Me.set(Oe, "." + Md, se[2]), Me.set(Oe, "." + Zp, se[3]), se;
          });
        }
        return { viewport: Le, scissor_box: Ne($l) };
      }
      function tr(q, ce) {
        var Ee = q.static,
          Qe = typeof Ee[Ss] == "string" && typeof Ee[ds] == "string";
        if (Qe) {
          if (Object.keys(ce.dynamic).length > 0) return null;
          var $e = ce.static,
            Ne = Object.keys($e);
          if (Ne.length > 0 && typeof $e[Ne[0]] == "number") {
            for (var Le = [], Ue = 0; Ue < Ne.length; ++Ue)
              le(
                typeof $e[Ne[Ue]] == "number",
                "must specify all vertex attribute locations when using vaos"
              ),
                Le.push([$e[Ne[Ue]] | 0, Ne[Ue]]);
            return Le;
          }
        }
        return null;
      }
      function Zn(q, ce, Ee) {
        var Qe = q.static,
          $e = q.dynamic;
        function Ne(se) {
          if (se in Qe) {
            var Oe = oe.id(Qe[se]);
            le.optional(function () {
              kt.shader(em[se], Oe, le.guessCommand());
            });
            var ot = Ea(function () {
              return Oe;
            });
            return (ot.id = Oe), ot;
          } else if (se in $e) {
            var ft = $e[se];
            return hs(ft, function (Ct, xt) {
              var Mt = Ct.invoke(xt, ft),
                wn = xt.def(Ct.shared.strings, ".id(", Mt, ")");
              return (
                le.optional(function () {
                  xt(
                    Ct.shared.shader,
                    ".shader(",
                    em[se],
                    ",",
                    wn,
                    ",",
                    Ct.command,
                    ");"
                  );
                }),
                wn
              );
            });
          }
          return null;
        }
        var Le = Ne(Ss),
          Ue = Ne(ds),
          ve = null,
          Me;
        return (
          fo(Le) && fo(Ue)
            ? ((ve = kt.program(Ue.id, Le.id, null, Ee)),
              (Me = Ea(function (se, Oe) {
                return se.link(ve);
              })))
            : (Me = new To(
                (Le && Le.thisDep) || (Ue && Ue.thisDep),
                (Le && Le.contextDep) || (Ue && Ue.contextDep),
                (Le && Le.propDep) || (Ue && Ue.propDep),
                function (se, Oe) {
                  var ot = se.shared.shader,
                    ft;
                  Le ? (ft = Le.append(se, Oe)) : (ft = Oe.def(ot, ".", Ss));
                  var Ct;
                  Ue ? (Ct = Ue.append(se, Oe)) : (Ct = Oe.def(ot, ".", ds));
                  var xt = ot + ".program(" + Ct + "," + ft;
                  return (
                    le.optional(function () {
                      xt += "," + se.command;
                    }),
                    Oe.def(xt + ")")
                  );
                }
              )),
          { frag: Le, vert: Ue, progVar: Me, program: ve }
        );
      }
      function Xr(q, ce) {
        var Ee = q.static,
          Qe = q.dynamic;
        function $e() {
          if (Pr in Ee) {
            var se = Ee[Pr];
            Mh(se)
              ? (se = tt.getElements(tt.create(se, !0)))
              : se &&
                ((se = tt.getElements(se)),
                le.command(se, "invalid elements", ce.commandStr));
            var Oe = Ea(function (ft, Ct) {
              if (se) {
                var xt = ft.link(se);
                return (ft.ELEMENTS = xt), xt;
              }
              return (ft.ELEMENTS = null), null;
            });
            return (Oe.value = se), Oe;
          } else if (Pr in Qe) {
            var ot = Qe[Pr];
            return hs(ot, function (ft, Ct) {
              var xt = ft.shared,
                Mt = xt.isBufferArgs,
                wn = xt.elements,
                _n = ft.invoke(Ct, ot),
                En = Ct.def("null"),
                Wn = Ct.def(Mt, "(", _n, ")"),
                Jn = ft
                  .cond(Wn)
                  .then(En, "=", wn, ".createStream(", _n, ");")
                  .else(En, "=", wn, ".getElements(", _n, ");");
              return (
                le.optional(function () {
                  ft.assert(Jn.else, "!" + _n + "||" + En, "invalid elements");
                }),
                Ct.entry(Jn),
                Ct.exit(ft.cond(Wn).then(wn, ".destroyStream(", En, ");")),
                (ft.ELEMENTS = En),
                En
              );
            });
          }
          return null;
        }
        var Ne = $e();
        function Le() {
          if (Fa in Ee) {
            var se = Ee[Fa];
            return (
              le.commandParameter(se, Fs, "invalid primitve", ce.commandStr),
              Ea(function (ot, ft) {
                return Fs[se];
              })
            );
          } else if (Fa in Qe) {
            var Oe = Qe[Fa];
            return hs(Oe, function (ot, ft) {
              var Ct = ot.constants.primTypes,
                xt = ot.invoke(ft, Oe);
              return (
                le.optional(function () {
                  ot.assert(
                    ft,
                    xt + " in " + Ct,
                    "invalid primitive, must be one of " + Object.keys(Fs)
                  );
                }),
                ft.def(Ct, "[", xt, "]")
              );
            });
          } else if (Ne)
            return fo(Ne)
              ? Ne.value
                ? Ea(function (ot, ft) {
                    return ft.def(ot.ELEMENTS, ".primType");
                  })
                : Ea(function () {
                    return q1;
                  })
              : new To(Ne.thisDep, Ne.contextDep, Ne.propDep, function (
                  ot,
                  ft
                ) {
                  var Ct = ot.ELEMENTS;
                  return ft.def(Ct, "?", Ct, ".primType:", q1);
                });
          return null;
        }
        function Ue(se, Oe) {
          if (se in Ee) {
            var ot = Ee[se] | 0;
            return (
              le.command(!Oe || ot >= 0, "invalid " + se, ce.commandStr),
              Ea(function (Ct, xt) {
                return Oe && (Ct.OFFSET = ot), ot;
              })
            );
          } else if (se in Qe) {
            var ft = Qe[se];
            return hs(ft, function (Ct, xt) {
              var Mt = Ct.invoke(xt, ft);
              return (
                Oe &&
                  ((Ct.OFFSET = Mt),
                  le.optional(function () {
                    Ct.assert(xt, Mt + ">=0", "invalid " + se);
                  })),
                Mt
              );
            });
          } else if (Oe && Ne)
            return Ea(function (Ct, xt) {
              return (Ct.OFFSET = "0"), 0;
            });
          return null;
        }
        var ve = Ue(Gs, !0);
        function Me() {
          if (ra in Ee) {
            var se = Ee[ra] | 0;
            return (
              le.command(
                typeof se == "number" && se >= 0,
                "invalid vertex count",
                ce.commandStr
              ),
              Ea(function () {
                return se;
              })
            );
          } else if (ra in Qe) {
            var Oe = Qe[ra];
            return hs(Oe, function (Ct, xt) {
              var Mt = Ct.invoke(xt, Oe);
              return (
                le.optional(function () {
                  Ct.assert(
                    xt,
                    "typeof " +
                      Mt +
                      '==="number"&&' +
                      Mt +
                      ">=0&&" +
                      Mt +
                      "===(" +
                      Mt +
                      "|0)",
                    "invalid vertex count"
                  );
                }),
                Mt
              );
            });
          } else if (Ne)
            if (fo(Ne)) {
              if (Ne)
                return ve
                  ? new To(ve.thisDep, ve.contextDep, ve.propDep, function (
                      Ct,
                      xt
                    ) {
                      var Mt = xt.def(Ct.ELEMENTS, ".vertCount-", Ct.OFFSET);
                      return (
                        le.optional(function () {
                          Ct.assert(
                            xt,
                            Mt + ">=0",
                            "invalid vertex offset/element buffer too small"
                          );
                        }),
                        Mt
                      );
                    })
                  : Ea(function (Ct, xt) {
                      return xt.def(Ct.ELEMENTS, ".vertCount");
                    });
              var ot = Ea(function () {
                return -1;
              });
              return (
                le.optional(function () {
                  ot.MISSING = !0;
                }),
                ot
              );
            } else {
              var ft = new To(
                Ne.thisDep || ve.thisDep,
                Ne.contextDep || ve.contextDep,
                Ne.propDep || ve.propDep,
                function (Ct, xt) {
                  var Mt = Ct.ELEMENTS;
                  return Ct.OFFSET
                    ? xt.def(Mt, "?", Mt, ".vertCount-", Ct.OFFSET, ":-1")
                    : xt.def(Mt, "?", Mt, ".vertCount:-1");
                }
              );
              return (
                le.optional(function () {
                  ft.DYNAMIC = !0;
                }),
                ft
              );
            }
          return null;
        }
        return {
          elements: Ne,
          primitive: Le(),
          count: Me(),
          instances: Ue(Id, !1),
          offset: ve,
        };
      }
      function ia(q, ce) {
        var Ee = q.static,
          Qe = q.dynamic,
          $e = {};
        return (
          Pt.forEach(function (Ne) {
            var Le = en(Ne);
            function Ue(ve, Me) {
              if (Ne in Ee) {
                var se = ve(Ee[Ne]);
                $e[Le] = Ea(function () {
                  return se;
                });
              } else if (Ne in Qe) {
                var Oe = Qe[Ne];
                $e[Le] = hs(Oe, function (ot, ft) {
                  return Me(ot, ft, ot.invoke(ft, Oe));
                });
              }
            }
            switch (Ne) {
              case ba:
              case dr:
              case $n:
              case tu:
              case Gn:
              case Ts:
              case to:
              case po:
              case us:
              case Mi:
                return Ue(
                  function (ve) {
                    return le.commandType(ve, "boolean", Ne, ce.commandStr), ve;
                  },
                  function (ve, Me, se) {
                    return (
                      le.optional(function () {
                        ve.assert(
                          Me,
                          "typeof " + se + '==="boolean"',
                          "invalid flag " + Ne,
                          ve.commandStr
                        );
                      }),
                      se
                    );
                  }
                );
              case Hn:
                return Ue(
                  function (ve) {
                    return (
                      le.commandParameter(
                        ve,
                        Gu,
                        "invalid " + Ne,
                        ce.commandStr
                      ),
                      Gu[ve]
                    );
                  },
                  function (ve, Me, se) {
                    var Oe = ve.constants.compareFuncs;
                    return (
                      le.optional(function () {
                        ve.assert(
                          Me,
                          se + " in " + Oe,
                          "invalid " +
                            Ne +
                            ", must be one of " +
                            Object.keys(Gu)
                        );
                      }),
                      Me.def(Oe, "[", se, "]")
                    );
                  }
                );
              case na:
                return Ue(
                  function (ve) {
                    return (
                      le.command(
                        zi(ve) &&
                          ve.length === 2 &&
                          typeof ve[0] == "number" &&
                          typeof ve[1] == "number" &&
                          ve[0] <= ve[1],
                        "depth range is 2d array",
                        ce.commandStr
                      ),
                      ve
                    );
                  },
                  function (ve, Me, se) {
                    le.optional(function () {
                      ve.assert(
                        Me,
                        ve.shared.isArrayLike +
                          "(" +
                          se +
                          ")&&" +
                          se +
                          ".length===2&&typeof " +
                          se +
                          '[0]==="number"&&typeof ' +
                          se +
                          '[1]==="number"&&' +
                          se +
                          "[0]<=" +
                          se +
                          "[1]",
                        "depth range must be a 2d array"
                      );
                    });
                    var Oe = Me.def("+", se, "[0]"),
                      ot = Me.def("+", se, "[1]");
                    return [Oe, ot];
                  }
                );
              case cr:
                return Ue(
                  function (ve) {
                    le.commandType(ve, "object", "blend.func", ce.commandStr);
                    var Me = "srcRGB" in ve ? ve.srcRGB : ve.src,
                      se = "srcAlpha" in ve ? ve.srcAlpha : ve.src,
                      Oe = "dstRGB" in ve ? ve.dstRGB : ve.dst,
                      ot = "dstAlpha" in ve ? ve.dstAlpha : ve.dst;
                    return (
                      le.commandParameter(
                        Me,
                        Ql,
                        Le + ".srcRGB",
                        ce.commandStr
                      ),
                      le.commandParameter(
                        se,
                        Ql,
                        Le + ".srcAlpha",
                        ce.commandStr
                      ),
                      le.commandParameter(
                        Oe,
                        Ql,
                        Le + ".dstRGB",
                        ce.commandStr
                      ),
                      le.commandParameter(
                        ot,
                        Ql,
                        Le + ".dstAlpha",
                        ce.commandStr
                      ),
                      le.command(
                        Qp.indexOf(Me + ", " + Oe) === -1,
                        "unallowed blending combination (srcRGB, dstRGB) = (" +
                          Me +
                          ", " +
                          Oe +
                          ")",
                        ce.commandStr
                      ),
                      [Ql[Me], Ql[Oe], Ql[se], Ql[ot]]
                    );
                  },
                  function (ve, Me, se) {
                    var Oe = ve.constants.blendFuncs;
                    le.optional(function () {
                      ve.assert(
                        Me,
                        se + "&&typeof " + se + '==="object"',
                        "invalid blend func, must be an object"
                      );
                    });
                    function ot(En, Wn) {
                      var Jn = Me.def(
                        '"',
                        En,
                        Wn,
                        '" in ',
                        se,
                        "?",
                        se,
                        ".",
                        En,
                        Wn,
                        ":",
                        se,
                        ".",
                        En
                      );
                      return (
                        le.optional(function () {
                          ve.assert(
                            Me,
                            Jn + " in " + Oe,
                            "invalid " +
                              Ne +
                              "." +
                              En +
                              Wn +
                              ", must be one of " +
                              Object.keys(Ql)
                          );
                        }),
                        Jn
                      );
                    }
                    var ft = ot("src", "RGB"),
                      Ct = ot("dst", "RGB");
                    le.optional(function () {
                      var En = ve.constants.invalidBlendCombinations;
                      ve.assert(
                        Me,
                        En + ".indexOf(" + ft + '+", "+' + Ct + ") === -1 ",
                        "unallowed blending combination for (srcRGB, dstRGB)"
                      );
                    });
                    var xt = Me.def(Oe, "[", ft, "]"),
                      Mt = Me.def(Oe, "[", ot("src", "Alpha"), "]"),
                      wn = Me.def(Oe, "[", Ct, "]"),
                      _n = Me.def(Oe, "[", ot("dst", "Alpha"), "]");
                    return [xt, wn, Mt, _n];
                  }
                );
              case Xn:
                return Ue(
                  function (ve) {
                    if (typeof ve == "string")
                      return (
                        le.commandParameter(
                          ve,
                          ct,
                          "invalid " + Ne,
                          ce.commandStr
                        ),
                        [ct[ve], ct[ve]]
                      );
                    if (typeof ve == "object")
                      return (
                        le.commandParameter(
                          ve.rgb,
                          ct,
                          Ne + ".rgb",
                          ce.commandStr
                        ),
                        le.commandParameter(
                          ve.alpha,
                          ct,
                          Ne + ".alpha",
                          ce.commandStr
                        ),
                        [ct[ve.rgb], ct[ve.alpha]]
                      );
                    le.commandRaise("invalid blend.equation", ce.commandStr);
                  },
                  function (ve, Me, se) {
                    var Oe = ve.constants.blendEquations,
                      ot = Me.def(),
                      ft = Me.def(),
                      Ct = ve.cond("typeof ", se, '==="string"');
                    return (
                      le.optional(function () {
                        function xt(Mt, wn, _n) {
                          ve.assert(
                            Mt,
                            _n + " in " + Oe,
                            "invalid " +
                              wn +
                              ", must be one of " +
                              Object.keys(ct)
                          );
                        }
                        xt(Ct.then, Ne, se),
                          ve.assert(
                            Ct.else,
                            se + "&&typeof " + se + '==="object"',
                            "invalid " + Ne
                          ),
                          xt(Ct.else, Ne + ".rgb", se + ".rgb"),
                          xt(Ct.else, Ne + ".alpha", se + ".alpha");
                      }),
                      Ct.then(ot, "=", ft, "=", Oe, "[", se, "];"),
                      Ct.else(
                        ot,
                        "=",
                        Oe,
                        "[",
                        se,
                        ".rgb];",
                        ft,
                        "=",
                        Oe,
                        "[",
                        se,
                        ".alpha];"
                      ),
                      Me(Ct),
                      [ot, ft]
                    );
                  }
                );
              case Yn:
                return Ue(
                  function (ve) {
                    return (
                      le.command(
                        zi(ve) && ve.length === 4,
                        "blend.color must be a 4d array",
                        ce.commandStr
                      ),
                      Wr(4, function (Me) {
                        return +ve[Me];
                      })
                    );
                  },
                  function (ve, Me, se) {
                    return (
                      le.optional(function () {
                        ve.assert(
                          Me,
                          ve.shared.isArrayLike +
                            "(" +
                            se +
                            ")&&" +
                            se +
                            ".length===4",
                          "blend.color must be a 4d array"
                        );
                      }),
                      Wr(4, function (Oe) {
                        return Me.def("+", se, "[", Oe, "]");
                      })
                    );
                  }
                );
              case wc:
                return Ue(
                  function (ve) {
                    return (
                      le.commandType(ve, "number", Le, ce.commandStr), ve | 0
                    );
                  },
                  function (ve, Me, se) {
                    return (
                      le.optional(function () {
                        ve.assert(
                          Me,
                          "typeof " + se + '==="number"',
                          "invalid stencil.mask"
                        );
                      }),
                      Me.def(se, "|0")
                    );
                  }
                );
              case Xs:
                return Ue(
                  function (ve) {
                    le.commandType(ve, "object", Le, ce.commandStr);
                    var Me = ve.cmp || "keep",
                      se = ve.ref || 0,
                      Oe = "mask" in ve ? ve.mask : -1;
                    return (
                      le.commandParameter(Me, Gu, Ne + ".cmp", ce.commandStr),
                      le.commandType(se, "number", Ne + ".ref", ce.commandStr),
                      le.commandType(Oe, "number", Ne + ".mask", ce.commandStr),
                      [Gu[Me], se, Oe]
                    );
                  },
                  function (ve, Me, se) {
                    var Oe = ve.constants.compareFuncs;
                    le.optional(function () {
                      function xt() {
                        ve.assert(
                          Me,
                          Array.prototype.join.call(arguments, ""),
                          "invalid stencil.func"
                        );
                      }
                      xt(se + "&&typeof ", se, '==="object"'),
                        xt('!("cmp" in ', se, ")||(", se, ".cmp in ", Oe, ")");
                    });
                    var ot = Me.def(
                        '"cmp" in ',
                        se,
                        "?",
                        Oe,
                        "[",
                        se,
                        ".cmp]",
                        ":",
                        ou
                      ),
                      ft = Me.def(se, ".ref|0"),
                      Ct = Me.def('"mask" in ', se, "?", se, ".mask|0:-1");
                    return [ot, ft, Ct];
                  }
                );
              case ql:
              case El:
                return Ue(
                  function (ve) {
                    le.commandType(ve, "object", Le, ce.commandStr);
                    var Me = ve.fail || "keep",
                      se = ve.zfail || "keep",
                      Oe = ve.zpass || "keep";
                    return (
                      le.commandParameter(Me, su, Ne + ".fail", ce.commandStr),
                      le.commandParameter(se, su, Ne + ".zfail", ce.commandStr),
                      le.commandParameter(Oe, su, Ne + ".zpass", ce.commandStr),
                      [Ne === El ? Wu : Ic, su[Me], su[se], su[Oe]]
                    );
                  },
                  function (ve, Me, se) {
                    var Oe = ve.constants.stencilOps;
                    le.optional(function () {
                      ve.assert(
                        Me,
                        se + "&&typeof " + se + '==="object"',
                        "invalid " + Ne
                      );
                    });
                    function ot(ft) {
                      return (
                        le.optional(function () {
                          ve.assert(
                            Me,
                            '!("' +
                              ft +
                              '" in ' +
                              se +
                              ")||(" +
                              se +
                              "." +
                              ft +
                              " in " +
                              Oe +
                              ")",
                            "invalid " +
                              Ne +
                              "." +
                              ft +
                              ", must be one of " +
                              Object.keys(su)
                          );
                        }),
                        Me.def(
                          '"',
                          ft,
                          '" in ',
                          se,
                          "?",
                          Oe,
                          "[",
                          se,
                          ".",
                          ft,
                          "]:",
                          ou
                        )
                      );
                    }
                    return [
                      Ne === El ? Wu : Ic,
                      ot("fail"),
                      ot("zfail"),
                      ot("zpass"),
                    ];
                  }
                );
              case Ws:
                return Ue(
                  function (ve) {
                    le.commandType(ve, "object", Le, ce.commandStr);
                    var Me = ve.factor | 0,
                      se = ve.units | 0;
                    return (
                      le.commandType(
                        Me,
                        "number",
                        Le + ".factor",
                        ce.commandStr
                      ),
                      le.commandType(
                        se,
                        "number",
                        Le + ".units",
                        ce.commandStr
                      ),
                      [Me, se]
                    );
                  },
                  function (ve, Me, se) {
                    le.optional(function () {
                      ve.assert(
                        Me,
                        se + "&&typeof " + se + '==="object"',
                        "invalid " + Ne
                      );
                    });
                    var Oe = Me.def(se, ".factor|0"),
                      ot = Me.def(se, ".units|0");
                    return [Oe, ot];
                  }
                );
              case Ri:
                return Ue(
                  function (ve) {
                    var Me = 0;
                    return (
                      ve === "front" ? (Me = Ic) : ve === "back" && (Me = Wu),
                      le.command(!!Me, Le, ce.commandStr),
                      Me
                    );
                  },
                  function (ve, Me, se) {
                    return (
                      le.optional(function () {
                        ve.assert(
                          Me,
                          se + '==="front"||' + se + '==="back"',
                          "invalid cull.face"
                        );
                      }),
                      Me.def(se, '==="front"?', Ic, ":", Wu)
                    );
                  }
                );
              case ho:
                return Ue(
                  function (ve) {
                    return (
                      le.command(
                        typeof ve == "number" &&
                          ve >= et.lineWidthDims[0] &&
                          ve <= et.lineWidthDims[1],
                        "invalid line width, must be a positive number between " +
                          et.lineWidthDims[0] +
                          " and " +
                          et.lineWidthDims[1],
                        ce.commandStr
                      ),
                      ve
                    );
                  },
                  function (ve, Me, se) {
                    return (
                      le.optional(function () {
                        ve.assert(
                          Me,
                          "typeof " +
                            se +
                            '==="number"&&' +
                            se +
                            ">=" +
                            et.lineWidthDims[0] +
                            "&&" +
                            se +
                            "<=" +
                            et.lineWidthDims[1],
                          "invalid line width"
                        );
                      }),
                      se
                    );
                  }
                );
              case Pi:
                return Ue(
                  function (ve) {
                    return (
                      le.commandParameter(ve, lu, Le, ce.commandStr), lu[ve]
                    );
                  },
                  function (ve, Me, se) {
                    return (
                      le.optional(function () {
                        ve.assert(
                          Me,
                          se + '==="cw"||' + se + '==="ccw"',
                          "invalid frontFace, must be one of cw,ccw"
                        );
                      }),
                      Me.def(se + '==="cw"?' + Ih + ":" + qp)
                    );
                  }
                );
              case Ba:
                return Ue(
                  function (ve) {
                    return (
                      le.command(
                        zi(ve) && ve.length === 4,
                        "color.mask must be length 4 array",
                        ce.commandStr
                      ),
                      ve.map(function (Me) {
                        return !!Me;
                      })
                    );
                  },
                  function (ve, Me, se) {
                    return (
                      le.optional(function () {
                        ve.assert(
                          Me,
                          ve.shared.isArrayLike +
                            "(" +
                            se +
                            ")&&" +
                            se +
                            ".length===4",
                          "invalid color.mask"
                        );
                      }),
                      Wr(4, function (Oe) {
                        return "!!" + se + "[" + Oe + "]";
                      })
                    );
                  }
                );
              case ko:
                return Ue(
                  function (ve) {
                    le.command(typeof ve == "object" && ve, Le, ce.commandStr);
                    var Me = "value" in ve ? ve.value : 1,
                      se = !!ve.invert;
                    return (
                      le.command(
                        typeof Me == "number" && Me >= 0 && Me <= 1,
                        "sample.coverage.value must be a number between 0 and 1",
                        ce.commandStr
                      ),
                      [Me, se]
                    );
                  },
                  function (ve, Me, se) {
                    le.optional(function () {
                      ve.assert(
                        Me,
                        se + "&&typeof " + se + '==="object"',
                        "invalid sample.coverage"
                      );
                    });
                    var Oe = Me.def('"value" in ', se, "?+", se, ".value:1"),
                      ot = Me.def("!!", se, ".invert");
                    return [Oe, ot];
                  }
                );
            }
          }),
          $e
        );
      }
      function Za(q, ce) {
        var Ee = q.static,
          Qe = q.dynamic,
          $e = {};
        return (
          Object.keys(Ee).forEach(function (Ne) {
            var Le = Ee[Ne],
              Ue;
            if (typeof Le == "number" || typeof Le == "boolean")
              Ue = Ea(function () {
                return Le;
              });
            else if (typeof Le == "function") {
              var ve = Le._reglType;
              ve === "texture2d" || ve === "textureCube"
                ? (Ue = Ea(function (Me) {
                    return Me.link(Le);
                  }))
                : ve === "framebuffer" || ve === "framebufferCube"
                ? (le.command(
                    Le.color.length > 0,
                    'missing color attachment for framebuffer sent to uniform "' +
                      Ne +
                      '"',
                    ce.commandStr
                  ),
                  (Ue = Ea(function (Me) {
                    return Me.link(Le.color[0]);
                  })))
                : le.commandRaise(
                    'invalid data for uniform "' + Ne + '"',
                    ce.commandStr
                  );
            } else
              zi(Le)
                ? (Ue = Ea(function (Me) {
                    var se = Me.global.def(
                      "[",
                      Wr(Le.length, function (Oe) {
                        return (
                          le.command(
                            typeof Le[Oe] == "number" ||
                              typeof Le[Oe] == "boolean",
                            "invalid uniform " + Ne,
                            Me.commandStr
                          ),
                          Le[Oe]
                        );
                      }),
                      "]"
                    );
                    return se;
                  }))
                : le.commandRaise(
                    'invalid or missing data for uniform "' + Ne + '"',
                    ce.commandStr
                  );
            (Ue.value = Le), ($e[Ne] = Ue);
          }),
          Object.keys(Qe).forEach(function (Ne) {
            var Le = Qe[Ne];
            $e[Ne] = hs(Le, function (Ue, ve) {
              return Ue.invoke(ve, Le);
            });
          }),
          $e
        );
      }
      function Ir(q, ce) {
        var Ee = q.static,
          Qe = q.dynamic,
          $e = {};
        return (
          Object.keys(Ee).forEach(function (Ne) {
            var Le = Ee[Ne],
              Ue = oe.id(Ne),
              ve = new We();
            if (Mh(Le))
              (ve.state = Ft),
                (ve.buffer = vt.getBuffer(vt.create(Le, Pd, !1, !0))),
                (ve.type = 0);
            else {
              var Me = vt.getBuffer(Le);
              if (Me) (ve.state = Ft), (ve.buffer = Me), (ve.type = 0);
              else if (
                (le.command(
                  typeof Le == "object" && Le,
                  "invalid data for attribute " + Ne,
                  ce.commandStr
                ),
                "constant" in Le)
              ) {
                var se = Le.constant;
                (ve.buffer = "null"),
                  (ve.state = sn),
                  typeof se == "number"
                    ? (ve.x = se)
                    : (le.command(
                        zi(se) && se.length > 0 && se.length <= 4,
                        "invalid constant for attribute " + Ne,
                        ce.commandStr
                      ),
                      Et.forEach(function (wn, _n) {
                        _n < se.length && (ve[wn] = se[_n]);
                      }));
              } else {
                Mh(Le.buffer)
                  ? (Me = vt.getBuffer(vt.create(Le.buffer, Pd, !1, !0)))
                  : (Me = vt.getBuffer(Le.buffer)),
                  le.command(
                    !!Me,
                    'missing buffer for attribute "' + Ne + '"',
                    ce.commandStr
                  );
                var Oe = Le.offset | 0;
                le.command(
                  Oe >= 0,
                  'invalid offset for attribute "' + Ne + '"',
                  ce.commandStr
                );
                var ot = Le.stride | 0;
                le.command(
                  ot >= 0 && ot < 256,
                  'invalid stride for attribute "' +
                    Ne +
                    '", must be integer betweeen [0, 255]',
                  ce.commandStr
                );
                var ft = Le.size | 0;
                le.command(
                  !("size" in Le) || (ft > 0 && ft <= 4),
                  'invalid size for attribute "' + Ne + '", must be 1,2,3,4',
                  ce.commandStr
                );
                var Ct = !!Le.normalized,
                  xt = 0;
                "type" in Le &&
                  (le.commandParameter(
                    Le.type,
                    Wa,
                    "invalid type for attribute " + Ne,
                    ce.commandStr
                  ),
                  (xt = Wa[Le.type]));
                var Mt = Le.divisor | 0;
                "divisor" in Le &&
                  (le.command(
                    Mt === 0 || Bt,
                    'cannot specify divisor for attribute "' +
                      Ne +
                      '", instancing not supported',
                    ce.commandStr
                  ),
                  le.command(
                    Mt >= 0,
                    'invalid divisor for attribute "' + Ne + '"',
                    ce.commandStr
                  )),
                  le.optional(function () {
                    var wn = ce.commandStr,
                      _n = [
                        "buffer",
                        "offset",
                        "divisor",
                        "normalized",
                        "type",
                        "size",
                        "stride",
                      ];
                    Object.keys(Le).forEach(function (En) {
                      le.command(
                        _n.indexOf(En) >= 0,
                        'unknown parameter "' +
                          En +
                          '" for attribute pointer "' +
                          Ne +
                          '" (valid parameters are ' +
                          _n +
                          ")",
                        wn
                      );
                    });
                  }),
                  (ve.buffer = Me),
                  (ve.state = Ft),
                  (ve.size = ft),
                  (ve.normalized = Ct),
                  (ve.type = xt || Me.dtype),
                  (ve.offset = Oe),
                  (ve.stride = ot),
                  (ve.divisor = Mt);
              }
            }
            $e[Ne] = Ea(function (wn, _n) {
              var En = wn.attribCache;
              if (Ue in En) return En[Ue];
              var Wn = { isStream: !1 };
              return (
                Object.keys(ve).forEach(function (Jn) {
                  Wn[Jn] = ve[Jn];
                }),
                ve.buffer &&
                  ((Wn.buffer = wn.link(ve.buffer)),
                  (Wn.type = Wn.type || Wn.buffer + ".dtype")),
                (En[Ue] = Wn),
                Wn
              );
            });
          }),
          Object.keys(Qe).forEach(function (Ne) {
            var Le = Qe[Ne];
            function Ue(ve, Me) {
              var se = ve.invoke(Me, Le),
                Oe = ve.shared,
                ot = ve.constants,
                ft = Oe.isBufferArgs,
                Ct = Oe.buffer;
              le.optional(function () {
                ve.assert(
                  Me,
                  se +
                    "&&(typeof " +
                    se +
                    '==="object"||typeof ' +
                    se +
                    '==="function")&&(' +
                    ft +
                    "(" +
                    se +
                    ")||" +
                    Ct +
                    ".getBuffer(" +
                    se +
                    ")||" +
                    Ct +
                    ".getBuffer(" +
                    se +
                    ".buffer)||" +
                    ft +
                    "(" +
                    se +
                    '.buffer)||("constant" in ' +
                    se +
                    "&&(typeof " +
                    se +
                    '.constant==="number"||' +
                    Oe.isArrayLike +
                    "(" +
                    se +
                    ".constant))))",
                  'invalid dynamic attribute "' + Ne + '"'
                );
              });
              var xt = { isStream: Me.def(!1) },
                Mt = new We();
              (Mt.state = Ft),
                Object.keys(Mt).forEach(function (Wn) {
                  xt[Wn] = Me.def("" + Mt[Wn]);
                });
              var wn = xt.buffer,
                _n = xt.type;
              Me(
                "if(",
                ft,
                "(",
                se,
                ")){",
                xt.isStream,
                "=true;",
                wn,
                "=",
                Ct,
                ".createStream(",
                Pd,
                ",",
                se,
                ");",
                _n,
                "=",
                wn,
                ".dtype;",
                "}else{",
                wn,
                "=",
                Ct,
                ".getBuffer(",
                se,
                ");",
                "if(",
                wn,
                "){",
                _n,
                "=",
                wn,
                ".dtype;",
                '}else if("constant" in ',
                se,
                "){",
                xt.state,
                "=",
                sn,
                ";",
                "if(typeof " + se + '.constant === "number"){',
                xt[Et[0]],
                "=",
                se,
                ".constant;",
                Et.slice(1)
                  .map(function (Wn) {
                    return xt[Wn];
                  })
                  .join("="),
                "=0;",
                "}else{",
                Et.map(function (Wn, Jn) {
                  return (
                    xt[Wn] +
                    "=" +
                    se +
                    ".constant.length>" +
                    Jn +
                    "?" +
                    se +
                    ".constant[" +
                    Jn +
                    "]:0;"
                  );
                }).join(""),
                "}}else{",
                "if(",
                ft,
                "(",
                se,
                ".buffer)){",
                wn,
                "=",
                Ct,
                ".createStream(",
                Pd,
                ",",
                se,
                ".buffer);",
                "}else{",
                wn,
                "=",
                Ct,
                ".getBuffer(",
                se,
                ".buffer);",
                "}",
                _n,
                '="type" in ',
                se,
                "?",
                ot.glTypes,
                "[",
                se,
                ".type]:",
                wn,
                ".dtype;",
                xt.normalized,
                "=!!",
                se,
                ".normalized;"
              );
              function En(Wn) {
                Me(xt[Wn], "=", se, ".", Wn, "|0;");
              }
              return (
                En("size"),
                En("offset"),
                En("stride"),
                En("divisor"),
                Me("}}"),
                Me.exit(
                  "if(",
                  xt.isStream,
                  "){",
                  Ct,
                  ".destroyStream(",
                  wn,
                  ");",
                  "}"
                ),
                xt
              );
            }
            $e[Ne] = hs(Le, Ue);
          }),
          $e
        );
      }
      function aa(q, ce) {
        var Ee = q.static,
          Qe = q.dynamic;
        if (Kl in Ee) {
          var $e = Ee[Kl];
          return (
            $e !== null && Zt.getVAO($e) === null && ($e = Zt.createVAO($e)),
            Ea(function (Le) {
              return Le.link(Zt.getVAO($e));
            })
          );
        } else if (Kl in Qe) {
          var Ne = Qe[Kl];
          return hs(Ne, function (Le, Ue) {
            var ve = Le.invoke(Ue, Ne);
            return Ue.def(Le.shared.vao + ".getVAO(" + ve + ")");
          });
        }
        return null;
      }
      function bi(q) {
        var ce = q.static,
          Ee = q.dynamic,
          Qe = {};
        return (
          Object.keys(ce).forEach(function ($e) {
            var Ne = ce[$e];
            Qe[$e] = Ea(function (Le, Ue) {
              return typeof Ne == "number" || typeof Ne == "boolean"
                ? "" + Ne
                : Le.link(Ne);
            });
          }),
          Object.keys(Ee).forEach(function ($e) {
            var Ne = Ee[$e];
            Qe[$e] = hs(Ne, function (Le, Ue) {
              return Le.invoke(Ue, Ne);
            });
          }),
          Qe
        );
      }
      function Aa(q, ce, Ee, Qe, $e) {
        var Ne = q.static,
          Le = q.dynamic;
        le.optional(function () {
          var En = [Eo, ds, Ss, Pr, Fa, Gs, ra, Id, Vi, Kl].concat(Pt);
          function Wn(Jn) {
            Object.keys(Jn).forEach(function ($r) {
              le.command(
                En.indexOf($r) >= 0,
                'unknown parameter "' + $r + '"',
                $e.commandStr
              );
            });
          }
          Wn(Ne), Wn(Le);
        });
        var Ue = tr(q, ce),
          ve = cn(q),
          Me = mr(q, ve, $e),
          se = Xr(q, $e),
          Oe = ia(q, $e),
          ot = Zn(q, $e, Ue);
        function ft(En) {
          var Wn = Me[En];
          Wn && (Oe[En] = Wn);
        }
        ft(Ga), ft(en($l));
        var Ct = Object.keys(Oe).length > 0,
          xt = {
            framebuffer: ve,
            draw: se,
            shader: ot,
            state: Oe,
            dirty: Ct,
            scopeVAO: null,
            drawVAO: null,
            useVAO: !1,
            attributes: {},
          };
        if (
          ((xt.profile = Er(q)),
          (xt.uniforms = Za(Ee, $e)),
          (xt.drawVAO = xt.scopeVAO = aa(q)),
          !xt.drawVAO && ot.program && !Ue && be.angle_instanced_arrays)
        ) {
          var Mt = !0,
            wn = ot.program.attributes.map(function (En) {
              var Wn = ce.static[En];
              return (Mt = Mt && !!Wn), Wn;
            });
          if (Mt && wn.length > 0) {
            var _n = Zt.getVAO(Zt.createVAO(wn));
            (xt.drawVAO = new To(null, null, null, function (En, Wn) {
              return En.link(_n);
            })),
              (xt.useVAO = !0);
          }
        }
        return (
          Ue ? (xt.useVAO = !0) : (xt.attributes = Ir(ce, $e)),
          (xt.context = bi(Qe)),
          xt
        );
      }
      function Ta(q, ce, Ee) {
        var Qe = q.shared,
          $e = Qe.context,
          Ne = q.scope();
        Object.keys(Ee).forEach(function (Le) {
          ce.save($e, "." + Le);
          var Ue = Ee[Le];
          Ne($e, ".", Le, "=", Ue.append(q, ce), ";");
        }),
          ce(Ne);
      }
      function ji(q, ce, Ee, Qe) {
        var $e = q.shared,
          Ne = $e.gl,
          Le = $e.framebuffer,
          Ue;
        rn && (Ue = ce.def($e.extensions, ".webgl_draw_buffers"));
        var ve = q.constants,
          Me = ve.drawBuffer,
          se = ve.backBuffer,
          Oe;
        Ee ? (Oe = Ee.append(q, ce)) : (Oe = ce.def(Le, ".next")),
          Qe || ce("if(", Oe, "!==", Le, ".cur){"),
          ce(
            "if(",
            Oe,
            "){",
            Ne,
            ".bindFramebuffer(",
            Xu,
            ",",
            Oe,
            ".framebuffer);"
          ),
          rn &&
            ce(
              Ue,
              ".drawBuffersWEBGL(",
              Me,
              "[",
              Oe,
              ".colorAttachments.length]);"
            ),
          ce("}else{", Ne, ".bindFramebuffer(", Xu, ",null);"),
          rn && ce(Ue, ".drawBuffersWEBGL(", se, ");"),
          ce("}", Le, ".cur=", Oe, ";"),
          Qe || ce("}");
      }
      function ka(q, ce, Ee) {
        var Qe = q.shared,
          $e = Qe.gl,
          Ne = q.current,
          Le = q.next,
          Ue = Qe.current,
          ve = Qe.next,
          Me = q.cond(Ue, ".dirty");
        Pt.forEach(function (se) {
          var Oe = en(se);
          if (!(Oe in Ee.state)) {
            var ot, ft;
            if (Oe in Le) {
              (ot = Le[Oe]), (ft = Ne[Oe]);
              var Ct = Wr(Tt[Oe].length, function (Mt) {
                return Me.def(ot, "[", Mt, "]");
              });
              Me(
                q
                  .cond(
                    Ct.map(function (Mt, wn) {
                      return Mt + "!==" + ft + "[" + wn + "]";
                    }).join("||")
                  )
                  .then(
                    $e,
                    ".",
                    wt[Oe],
                    "(",
                    Ct,
                    ");",
                    Ct.map(function (Mt, wn) {
                      return ft + "[" + wn + "]=" + Mt;
                    }).join(";"),
                    ";"
                  )
              );
            } else {
              ot = Me.def(ve, ".", Oe);
              var xt = q.cond(ot, "!==", Ue, ".", Oe);
              Me(xt),
                Oe in an
                  ? xt(
                      q
                        .cond(ot)
                        .then($e, ".enable(", an[Oe], ");")
                        .else($e, ".disable(", an[Oe], ");"),
                      Ue,
                      ".",
                      Oe,
                      "=",
                      ot,
                      ";"
                    )
                  : xt(
                      $e,
                      ".",
                      wt[Oe],
                      "(",
                      ot,
                      ");",
                      Ue,
                      ".",
                      Oe,
                      "=",
                      ot,
                      ";"
                    );
            }
          }
        }),
          Object.keys(Ee.state).length === 0 && Me(Ue, ".dirty=false;"),
          ce(Me);
      }
      function mo(q, ce, Ee, Qe) {
        var $e = q.shared,
          Ne = q.current,
          Le = $e.current,
          Ue = $e.gl;
        Ph(Object.keys(Ee)).forEach(function (ve) {
          var Me = Ee[ve];
          if (!(Qe && !Qe(Me))) {
            var se = Me.append(q, ce);
            if (an[ve]) {
              var Oe = an[ve];
              fo(Me)
                ? se
                  ? ce(Ue, ".enable(", Oe, ");")
                  : ce(Ue, ".disable(", Oe, ");")
                : ce(
                    q
                      .cond(se)
                      .then(Ue, ".enable(", Oe, ");")
                      .else(Ue, ".disable(", Oe, ");")
                  ),
                ce(Le, ".", ve, "=", se, ";");
            } else if (zi(se)) {
              var ot = Ne[ve];
              ce(
                Ue,
                ".",
                wt[ve],
                "(",
                se,
                ");",
                se
                  .map(function (ft, Ct) {
                    return ot + "[" + Ct + "]=" + ft;
                  })
                  .join(";"),
                ";"
              );
            } else
              ce(Ue, ".", wt[ve], "(", se, ");", Le, ".", ve, "=", se, ";");
          }
        });
      }
      function Sa(q, ce) {
        Bt &&
          (q.instancing = ce.def(
            q.shared.extensions,
            ".angle_instanced_arrays"
          ));
      }
      function fr(q, ce, Ee, Qe, $e) {
        var Ne = q.shared,
          Le = q.stats,
          Ue = Ne.current,
          ve = Ne.timer,
          Me = Ee.profile;
        function se() {
          return typeof performance > "u" ? "Date.now()" : "performance.now()";
        }
        var Oe, ot;
        function ft(En) {
          (Oe = ce.def()),
            En(Oe, "=", se(), ";"),
            typeof $e == "string"
              ? En(Le, ".count+=", $e, ";")
              : En(Le, ".count++;"),
            It &&
              (Qe
                ? ((ot = ce.def()), En(ot, "=", ve, ".getNumPendingQueries();"))
                : En(ve, ".beginQuery(", Le, ");"));
        }
        function Ct(En) {
          En(Le, ".cpuTime+=", se(), "-", Oe, ";"),
            It &&
              (Qe
                ? En(
                    ve,
                    ".pushScopeStats(",
                    ot,
                    ",",
                    ve,
                    ".getNumPendingQueries(),",
                    Le,
                    ");"
                  )
                : En(ve, ".endQuery();"));
        }
        function xt(En) {
          var Wn = ce.def(Ue, ".profile");
          ce(Ue, ".profile=", En, ";"), ce.exit(Ue, ".profile=", Wn, ";");
        }
        var Mt;
        if (Me) {
          if (fo(Me)) {
            Me.enable ? (ft(ce), Ct(ce.exit), xt("true")) : xt("false");
            return;
          }
          (Mt = Me.append(q, ce)), xt(Mt);
        } else Mt = ce.def(Ue, ".profile");
        var wn = q.block();
        ft(wn), ce("if(", Mt, "){", wn, "}");
        var _n = q.block();
        Ct(_n), ce.exit("if(", Mt, "){", _n, "}");
      }
      function no(q, ce, Ee, Qe, $e) {
        var Ne = q.shared;
        function Le(ve) {
          switch (ve) {
            case wh:
            case Nh:
            case zu:
              return 2;
            case Od:
            case Hi:
            case Vu:
              return 3;
            case Ch:
            case Uu:
            case au:
              return 4;
            default:
              return 1;
          }
        }
        function Ue(ve, Me, se) {
          var Oe = Ne.gl,
            ot = ce.def(ve, ".location"),
            ft = ce.def(Ne.attributes, "[", ot, "]"),
            Ct = se.state,
            xt = se.buffer,
            Mt = [se.x, se.y, se.z, se.w],
            wn = ["buffer", "normalized", "offset", "stride"];
          function _n() {
            ce(
              "if(!",
              ft,
              ".buffer){",
              Oe,
              ".enableVertexAttribArray(",
              ot,
              ");}"
            );
            var Wn = se.type,
              Jn;
            if (
              (se.size ? (Jn = ce.def(se.size, "||", Me)) : (Jn = Me),
              ce(
                "if(",
                ft,
                ".type!==",
                Wn,
                "||",
                ft,
                ".size!==",
                Jn,
                "||",
                wn
                  .map(function (wa) {
                    return ft + "." + wa + "!==" + se[wa];
                  })
                  .join("||"),
                "){",
                Oe,
                ".bindBuffer(",
                Pd,
                ",",
                xt,
                ".buffer);",
                Oe,
                ".vertexAttribPointer(",
                [ot, Jn, Wn, se.normalized, se.stride, se.offset],
                ");",
                ft,
                ".type=",
                Wn,
                ";",
                ft,
                ".size=",
                Jn,
                ";",
                wn
                  .map(function (wa) {
                    return ft + "." + wa + "=" + se[wa] + ";";
                  })
                  .join(""),
                "}"
              ),
              Bt)
            ) {
              var $r = se.divisor;
              ce(
                "if(",
                ft,
                ".divisor!==",
                $r,
                "){",
                q.instancing,
                ".vertexAttribDivisorANGLE(",
                [ot, $r],
                ");",
                ft,
                ".divisor=",
                $r,
                ";}"
              );
            }
          }
          function En() {
            ce(
              "if(",
              ft,
              ".buffer){",
              Oe,
              ".disableVertexAttribArray(",
              ot,
              ");",
              ft,
              ".buffer=null;",
              "}if(",
              Et.map(function (Wn, Jn) {
                return ft + "." + Wn + "!==" + Mt[Jn];
              }).join("||"),
              "){",
              Oe,
              ".vertexAttrib4f(",
              ot,
              ",",
              Mt,
              ");",
              Et.map(function (Wn, Jn) {
                return ft + "." + Wn + "=" + Mt[Jn] + ";";
              }).join(""),
              "}"
            );
          }
          Ct === Ft
            ? _n()
            : Ct === sn
            ? En()
            : (ce("if(", Ct, "===", Ft, "){"),
              _n(),
              ce("}else{"),
              En(),
              ce("}"));
        }
        Qe.forEach(function (ve) {
          var Me = ve.name,
            se = Ee.attributes[Me],
            Oe;
          if (se) {
            if (!$e(se)) return;
            Oe = se.append(q, ce);
          } else {
            if (!$e(tm)) return;
            var ot = q.scopeAttrib(Me);
            le.optional(function () {
              q.assert(ce, ot + ".state", "missing attribute " + Me);
            }),
              (Oe = {}),
              Object.keys(new We()).forEach(function (ft) {
                Oe[ft] = ce.def(ot, ".", ft);
              });
          }
          Ue(q.link(ve), Le(ve.info.type), Oe);
        });
      }
      function qr(q, ce, Ee, Qe, $e) {
        for (var Ne = q.shared, Le = Ne.gl, Ue, ve = 0; ve < Qe.length; ++ve) {
          var Me = Qe[ve],
            se = Me.name,
            Oe = Me.info.type,
            ot = Ee.uniforms[se],
            ft = q.link(Me),
            Ct = ft + ".location",
            xt;
          if (ot) {
            if (!$e(ot)) continue;
            if (fo(ot)) {
              var Mt = ot.value;
              if (
                (le.command(
                  Mt !== null && typeof Mt < "u",
                  'missing uniform "' + se + '"',
                  q.commandStr
                ),
                Oe === Hu || Oe === ju)
              ) {
                le.command(
                  typeof Mt == "function" &&
                    ((Oe === Hu &&
                      (Mt._reglType === "texture2d" ||
                        Mt._reglType === "framebuffer")) ||
                      (Oe === ju &&
                        (Mt._reglType === "textureCube" ||
                          Mt._reglType === "framebufferCube"))),
                  "invalid texture for uniform " + se,
                  q.commandStr
                );
                var wn = q.link(Mt._texture || Mt.color[0]._texture);
                ce(Le, ".uniform1i(", Ct, ",", wn + ".bind());"),
                  ce.exit(wn, ".unbind();");
              } else if (Oe === Ld || Oe === Dd || Oe === Rc) {
                le.optional(function () {
                  le.command(
                    zi(Mt),
                    "invalid matrix for uniform " + se,
                    q.commandStr
                  ),
                    le.command(
                      (Oe === Ld && Mt.length === 4) ||
                        (Oe === Dd && Mt.length === 9) ||
                        (Oe === Rc && Mt.length === 16),
                      "invalid length for matrix uniform " + se,
                      q.commandStr
                    );
                });
                var _n = q.global.def(
                    "new Float32Array([" + Array.prototype.slice.call(Mt) + "])"
                  ),
                  En = 2;
                Oe === Dd ? (En = 3) : Oe === Rc && (En = 4),
                  ce(Le, ".uniformMatrix", En, "fv(", Ct, ",false,", _n, ");");
              } else {
                switch (Oe) {
                  case Yp:
                    le.commandType(Mt, "number", "uniform " + se, q.commandStr),
                      (Ue = "1f");
                    break;
                  case wh:
                    le.command(
                      zi(Mt) && Mt.length === 2,
                      "uniform " + se,
                      q.commandStr
                    ),
                      (Ue = "2f");
                    break;
                  case Od:
                    le.command(
                      zi(Mt) && Mt.length === 3,
                      "uniform " + se,
                      q.commandStr
                    ),
                      (Ue = "3f");
                    break;
                  case Ch:
                    le.command(
                      zi(Mt) && Mt.length === 4,
                      "uniform " + se,
                      q.commandStr
                    ),
                      (Ue = "4f");
                    break;
                  case Rh:
                    le.commandType(
                      Mt,
                      "boolean",
                      "uniform " + se,
                      q.commandStr
                    ),
                      (Ue = "1i");
                    break;
                  case iu:
                    le.commandType(Mt, "number", "uniform " + se, q.commandStr),
                      (Ue = "1i");
                    break;
                  case zu:
                    le.command(
                      zi(Mt) && Mt.length === 2,
                      "uniform " + se,
                      q.commandStr
                    ),
                      (Ue = "2i");
                    break;
                  case Nh:
                    le.command(
                      zi(Mt) && Mt.length === 2,
                      "uniform " + se,
                      q.commandStr
                    ),
                      (Ue = "2i");
                    break;
                  case Vu:
                    le.command(
                      zi(Mt) && Mt.length === 3,
                      "uniform " + se,
                      q.commandStr
                    ),
                      (Ue = "3i");
                    break;
                  case Hi:
                    le.command(
                      zi(Mt) && Mt.length === 3,
                      "uniform " + se,
                      q.commandStr
                    ),
                      (Ue = "3i");
                    break;
                  case au:
                    le.command(
                      zi(Mt) && Mt.length === 4,
                      "uniform " + se,
                      q.commandStr
                    ),
                      (Ue = "4i");
                    break;
                  case Uu:
                    le.command(
                      zi(Mt) && Mt.length === 4,
                      "uniform " + se,
                      q.commandStr
                    ),
                      (Ue = "4i");
                    break;
                }
                ce(
                  Le,
                  ".uniform",
                  Ue,
                  "(",
                  Ct,
                  ",",
                  zi(Mt) ? Array.prototype.slice.call(Mt) : Mt,
                  ");"
                );
              }
              continue;
            } else xt = ot.append(q, ce);
          } else {
            if (!$e(tm)) continue;
            xt = ce.def(Ne.uniforms, "[", oe.id(se), "]");
          }
          Oe === Hu
            ? ce(
                "if(",
                xt,
                "&&",
                xt,
                '._reglType==="framebuffer"){',
                xt,
                "=",
                xt,
                ".color[0];",
                "}"
              )
            : Oe === ju &&
              ce(
                "if(",
                xt,
                "&&",
                xt,
                '._reglType==="framebufferCube"){',
                xt,
                "=",
                xt,
                ".color[0];",
                "}"
              ),
            le.optional(function () {
              function Sl(Mc, nf) {
                q.assert(
                  ce,
                  Mc,
                  'bad data or missing for uniform "' + se + '".  ' + nf
                );
              }
              function tf(Mc) {
                Sl(
                  "typeof " + xt + '==="' + Mc + '"',
                  "invalid type, expected " + Mc
                );
              }
              function Zs(Mc, nf) {
                Sl(
                  Ne.isArrayLike + "(" + xt + ")&&" + xt + ".length===" + Mc,
                  "invalid vector, should have length " + Mc,
                  q.commandStr
                );
              }
              function cm(Mc) {
                Sl(
                  "typeof " +
                    xt +
                    '==="function"&&' +
                    xt +
                    '._reglType==="texture' +
                    (Mc === Th ? "2d" : "Cube") +
                    '"',
                  "invalid texture type",
                  q.commandStr
                );
              }
              switch (Oe) {
                case iu:
                  tf("number");
                  break;
                case Nh:
                  Zs(2);
                  break;
                case Hi:
                  Zs(3);
                  break;
                case Uu:
                  Zs(4);
                  break;
                case Yp:
                  tf("number");
                  break;
                case wh:
                  Zs(2);
                  break;
                case Od:
                  Zs(3);
                  break;
                case Ch:
                  Zs(4);
                  break;
                case Rh:
                  tf("boolean");
                  break;
                case zu:
                  Zs(2);
                  break;
                case Vu:
                  Zs(3);
                  break;
                case au:
                  Zs(4);
                  break;
                case Ld:
                  Zs(4);
                  break;
                case Dd:
                  Zs(9);
                  break;
                case Rc:
                  Zs(16);
                  break;
                case Hu:
                  cm(Th);
                  break;
                case ju:
                  cm(Pv);
                  break;
              }
            });
          var Wn = 1;
          switch (Oe) {
            case Hu:
            case ju:
              var Jn = ce.def(xt, "._texture");
              ce(Le, ".uniform1i(", Ct, ",", Jn, ".bind());"),
                ce.exit(Jn, ".unbind();");
              continue;
            case iu:
            case Rh:
              Ue = "1i";
              break;
            case Nh:
            case zu:
              (Ue = "2i"), (Wn = 2);
              break;
            case Hi:
            case Vu:
              (Ue = "3i"), (Wn = 3);
              break;
            case Uu:
            case au:
              (Ue = "4i"), (Wn = 4);
              break;
            case Yp:
              Ue = "1f";
              break;
            case wh:
              (Ue = "2f"), (Wn = 2);
              break;
            case Od:
              (Ue = "3f"), (Wn = 3);
              break;
            case Ch:
              (Ue = "4f"), (Wn = 4);
              break;
            case Ld:
              Ue = "Matrix2fv";
              break;
            case Dd:
              Ue = "Matrix3fv";
              break;
            case Rc:
              Ue = "Matrix4fv";
              break;
          }
          if ((ce(Le, ".uniform", Ue, "(", Ct, ","), Ue.charAt(0) === "M")) {
            var $r = Math.pow(Oe - Ld + 2, 2),
              wa = q.global.def("new Float32Array(", $r, ")");
            ce(
              "false,(Array.isArray(",
              xt,
              ")||",
              xt,
              " instanceof Float32Array)?",
              xt,
              ":(",
              Wr($r, function (Sl) {
                return wa + "[" + Sl + "]=" + xt + "[" + Sl + "]";
              }),
              ",",
              wa,
              ")"
            );
          } else
            Wn > 1
              ? ce(
                  Wr(Wn, function (Sl) {
                    return xt + "[" + Sl + "]";
                  })
                )
              : ce(xt);
          ce(");");
        }
      }
      function jn(q, ce, Ee, Qe) {
        var $e = q.shared,
          Ne = $e.gl,
          Le = $e.draw,
          Ue = Qe.draw;
        function ve() {
          var Jn = Ue.elements,
            $r,
            wa = ce;
          return (
            Jn
              ? (((Jn.contextDep && Qe.contextDynamic) || Jn.propDep) &&
                  (wa = Ee),
                ($r = Jn.append(q, wa)))
              : ($r = wa.def(Le, ".", Pr)),
            $r &&
              wa(
                "if(" +
                  $r +
                  ")" +
                  Ne +
                  ".bindBuffer(" +
                  Rv +
                  "," +
                  $r +
                  ".buffer.buffer);"
              ),
            $r
          );
        }
        function Me() {
          var Jn = Ue.count,
            $r,
            wa = ce;
          return (
            Jn
              ? (((Jn.contextDep && Qe.contextDynamic) || Jn.propDep) &&
                  (wa = Ee),
                ($r = Jn.append(q, wa)),
                le.optional(function () {
                  Jn.MISSING && q.assert(ce, "false", "missing vertex count"),
                    Jn.DYNAMIC &&
                      q.assert(wa, $r + ">=0", "missing vertex count");
                }))
              : (($r = wa.def(Le, ".", ra)),
                le.optional(function () {
                  q.assert(wa, $r + ">=0", "missing vertex count");
                })),
            $r
          );
        }
        var se = ve();
        function Oe(Jn) {
          var $r = Ue[Jn];
          return $r
            ? ($r.contextDep && Qe.contextDynamic) || $r.propDep
              ? $r.append(q, Ee)
              : $r.append(q, ce)
            : ce.def(Le, ".", Jn);
        }
        var ot = Oe(Fa),
          ft = Oe(Gs),
          Ct = Me();
        if (typeof Ct == "number") {
          if (Ct === 0) return;
        } else Ee("if(", Ct, "){"), Ee.exit("}");
        var xt, Mt;
        Bt && ((xt = Oe(Id)), (Mt = q.instancing));
        var wn = se + ".type",
          _n = Ue.elements && fo(Ue.elements);
        function En() {
          function Jn() {
            Ee(
              Mt,
              ".drawElementsInstancedANGLE(",
              [ot, Ct, wn, ft + "<<((" + wn + "-" + jt + ")>>1)", xt],
              ");"
            );
          }
          function $r() {
            Ee(Mt, ".drawArraysInstancedANGLE(", [ot, ft, Ct, xt], ");");
          }
          se
            ? _n
              ? Jn()
              : (Ee("if(", se, "){"), Jn(), Ee("}else{"), $r(), Ee("}"))
            : $r();
        }
        function Wn() {
          function Jn() {
            Ee(
              Ne +
                ".drawElements(" +
                [ot, Ct, wn, ft + "<<((" + wn + "-" + jt + ")>>1)"] +
                ");"
            );
          }
          function $r() {
            Ee(Ne + ".drawArrays(" + [ot, ft, Ct] + ");");
          }
          se
            ? _n
              ? Jn()
              : (Ee("if(", se, "){"), Jn(), Ee("}else{"), $r(), Ee("}"))
            : $r();
        }
        Bt && (typeof xt != "number" || xt >= 0)
          ? typeof xt == "string"
            ? (Ee("if(", xt, ">0){"),
              En(),
              Ee("}else if(", xt, "<0){"),
              Wn(),
              Ee("}"))
            : En()
          : Wn();
      }
      function Cr(q, ce, Ee, Qe, $e) {
        var Ne = kn(),
          Le = Ne.proc("body", $e);
        return (
          le.optional(function () {
            (Ne.commandStr = ce.commandStr),
              (Ne.command = Ne.link(ce.commandStr));
          }),
          Bt &&
            (Ne.instancing = Le.def(
              Ne.shared.extensions,
              ".angle_instanced_arrays"
            )),
          q(Ne, Le, Ee, Qe),
          Ne.compile().body
        );
      }
      function Vr(q, ce, Ee, Qe) {
        Sa(q, ce),
          Ee.useVAO
            ? Ee.drawVAO
              ? ce(q.shared.vao, ".setVAO(", Ee.drawVAO.append(q, ce), ");")
              : ce(q.shared.vao, ".setVAO(", q.shared.vao, ".targetVAO);")
            : (ce(q.shared.vao, ".setVAO(null);"),
              no(q, ce, Ee, Qe.attributes, function () {
                return !0;
              })),
          qr(q, ce, Ee, Qe.uniforms, function () {
            return !0;
          }),
          jn(q, ce, ce, Ee);
      }
      function oa(q, ce) {
        var Ee = q.proc("draw", 1);
        Sa(q, Ee),
          Ta(q, Ee, ce.context),
          ji(q, Ee, ce.framebuffer),
          ka(q, Ee, ce),
          mo(q, Ee, ce.state),
          fr(q, Ee, ce, !1, !0);
        var Qe = ce.shader.progVar.append(q, Ee);
        if (
          (Ee(q.shared.gl, ".useProgram(", Qe, ".program);"), ce.shader.program)
        )
          Vr(q, Ee, ce, ce.shader.program);
        else {
          Ee(q.shared.vao, ".setVAO(null);");
          var $e = q.global.def("{}"),
            Ne = Ee.def(Qe, ".id"),
            Le = Ee.def($e, "[", Ne, "]");
          Ee(
            q
              .cond(Le)
              .then(Le, ".call(this,a0);")
              .else(
                Le,
                "=",
                $e,
                "[",
                Ne,
                "]=",
                q.link(function (Ue) {
                  return Cr(Vr, q, ce, Ue, 1);
                }),
                "(",
                Qe,
                ");",
                Le,
                ".call(this,a0);"
              )
          );
        }
        Object.keys(ce.state).length > 0 &&
          Ee(q.shared.current, ".dirty=true;");
      }
      function Tl(q, ce, Ee, Qe) {
        (q.batchId = "a1"), Sa(q, ce);
        function $e() {
          return !0;
        }
        no(q, ce, Ee, Qe.attributes, $e),
          qr(q, ce, Ee, Qe.uniforms, $e),
          jn(q, ce, ce, Ee);
      }
      function ge(q, ce, Ee, Qe) {
        Sa(q, ce);
        var $e = Ee.contextDep,
          Ne = ce.def(),
          Le = "a0",
          Ue = "a1",
          ve = ce.def();
        (q.shared.props = ve), (q.batchId = Ne);
        var Me = q.scope(),
          se = q.scope();
        ce(
          Me.entry,
          "for(",
          Ne,
          "=0;",
          Ne,
          "<",
          Ue,
          ";++",
          Ne,
          "){",
          ve,
          "=",
          Le,
          "[",
          Ne,
          "];",
          se,
          "}",
          Me.exit
        );
        function Oe(wn) {
          return (wn.contextDep && $e) || wn.propDep;
        }
        function ot(wn) {
          return !Oe(wn);
        }
        if (
          (Ee.needsContext && Ta(q, se, Ee.context),
          Ee.needsFramebuffer && ji(q, se, Ee.framebuffer),
          mo(q, se, Ee.state, Oe),
          Ee.profile && Oe(Ee.profile) && fr(q, se, Ee, !1, !0),
          Qe)
        )
          Ee.useVAO
            ? Ee.drawVAO
              ? Oe(Ee.drawVAO)
                ? se(q.shared.vao, ".setVAO(", Ee.drawVAO.append(q, se), ");")
                : Me(q.shared.vao, ".setVAO(", Ee.drawVAO.append(q, Me), ");")
              : Me(q.shared.vao, ".setVAO(", q.shared.vao, ".targetVAO);")
            : (Me(q.shared.vao, ".setVAO(null);"),
              no(q, Me, Ee, Qe.attributes, ot),
              no(q, se, Ee, Qe.attributes, Oe)),
            qr(q, Me, Ee, Qe.uniforms, ot),
            qr(q, se, Ee, Qe.uniforms, Oe),
            jn(q, Me, se, Ee);
        else {
          var ft = q.global.def("{}"),
            Ct = Ee.shader.progVar.append(q, se),
            xt = se.def(Ct, ".id"),
            Mt = se.def(ft, "[", xt, "]");
          se(
            q.shared.gl,
            ".useProgram(",
            Ct,
            ".program);",
            "if(!",
            Mt,
            "){",
            Mt,
            "=",
            ft,
            "[",
            xt,
            "]=",
            q.link(function (wn) {
              return Cr(Tl, q, Ee, wn, 2);
            }),
            "(",
            Ct,
            ");}",
            Mt,
            ".call(this,a0[",
            Ne,
            "],",
            Ne,
            ");"
          );
        }
      }
      function it(q, ce) {
        var Ee = q.proc("batch", 2);
        (q.batchId = "0"), Sa(q, Ee);
        var Qe = !1,
          $e = !0;
        Object.keys(ce.context).forEach(function (ft) {
          Qe = Qe || ce.context[ft].propDep;
        }),
          Qe || (Ta(q, Ee, ce.context), ($e = !1));
        var Ne = ce.framebuffer,
          Le = !1;
        Ne
          ? (Ne.propDep ? (Qe = Le = !0) : Ne.contextDep && Qe && (Le = !0),
            Le || ji(q, Ee, Ne))
          : ji(q, Ee, null),
          ce.state.viewport && ce.state.viewport.propDep && (Qe = !0);
        function Ue(ft) {
          return (ft.contextDep && Qe) || ft.propDep;
        }
        ka(q, Ee, ce),
          mo(q, Ee, ce.state, function (ft) {
            return !Ue(ft);
          }),
          (!ce.profile || !Ue(ce.profile)) && fr(q, Ee, ce, !1, "a1"),
          (ce.contextDep = Qe),
          (ce.needsContext = $e),
          (ce.needsFramebuffer = Le);
        var ve = ce.shader.progVar;
        if ((ve.contextDep && Qe) || ve.propDep) ge(q, Ee, ce, null);
        else {
          var Me = ve.append(q, Ee);
          if (
            (Ee(q.shared.gl, ".useProgram(", Me, ".program);"),
            ce.shader.program)
          )
            ge(q, Ee, ce, ce.shader.program);
          else {
            Ee(q.shared.vao, ".setVAO(null);");
            var se = q.global.def("{}"),
              Oe = Ee.def(Me, ".id"),
              ot = Ee.def(se, "[", Oe, "]");
            Ee(
              q
                .cond(ot)
                .then(ot, ".call(this,a0,a1);")
                .else(
                  ot,
                  "=",
                  se,
                  "[",
                  Oe,
                  "]=",
                  q.link(function (ft) {
                    return Cr(ge, q, ce, ft, 2);
                  }),
                  "(",
                  Me,
                  ");",
                  ot,
                  ".call(this,a0,a1);"
                )
            );
          }
        }
        Object.keys(ce.state).length > 0 &&
          Ee(q.shared.current, ".dirty=true;");
      }
      function Ke(q, ce) {
        var Ee = q.proc("scope", 3);
        q.batchId = "a2";
        var Qe = q.shared,
          $e = Qe.current;
        Ta(q, Ee, ce.context),
          ce.framebuffer && ce.framebuffer.append(q, Ee),
          Ph(Object.keys(ce.state)).forEach(function (Le) {
            var Ue = ce.state[Le],
              ve = Ue.append(q, Ee);
            zi(ve)
              ? ve.forEach(function (Me, se) {
                  Ee.set(q.next[Le], "[" + se + "]", Me);
                })
              : Ee.set(Qe.next, "." + Le, ve);
          }),
          fr(q, Ee, ce, !0, !0),
          [Pr, Gs, ra, Id, Fa].forEach(function (Le) {
            var Ue = ce.draw[Le];
            Ue && Ee.set(Qe.draw, "." + Le, "" + Ue.append(q, Ee));
          }),
          Object.keys(ce.uniforms).forEach(function (Le) {
            Ee.set(
              Qe.uniforms,
              "[" + oe.id(Le) + "]",
              ce.uniforms[Le].append(q, Ee)
            );
          }),
          Object.keys(ce.attributes).forEach(function (Le) {
            var Ue = ce.attributes[Le].append(q, Ee),
              ve = q.scopeAttrib(Le);
            Object.keys(new We()).forEach(function (Me) {
              Ee.set(ve, "." + Me, Ue[Me]);
            });
          }),
          ce.scopeVAO &&
            Ee.set(Qe.vao, ".targetVAO", ce.scopeVAO.append(q, Ee));
        function Ne(Le) {
          var Ue = ce.shader[Le];
          Ue && Ee.set(Qe.shader, "." + Le, Ue.append(q, Ee));
        }
        Ne(ds),
          Ne(Ss),
          Object.keys(ce.state).length > 0 &&
            (Ee($e, ".dirty=true;"), Ee.exit($e, ".dirty=true;")),
          Ee("a1(", q.shared.context, ",a0,", q.batchId, ");");
      }
      function un(q) {
        if (!(typeof q != "object" || zi(q))) {
          for (var ce = Object.keys(q), Ee = 0; Ee < ce.length; ++Ee)
            if (Wi.isDynamic(q[ce[Ee]])) return !0;
          return !1;
        }
      }
      function gr(q, ce, Ee) {
        var Qe = ce.static[Ee];
        if (!Qe || !un(Qe)) return;
        var $e = q.global,
          Ne = Object.keys(Qe),
          Le = !1,
          Ue = !1,
          ve = !1,
          Me = q.global.def("{}");
        Ne.forEach(function (Oe) {
          var ot = Qe[Oe];
          if (Wi.isDynamic(ot)) {
            typeof ot == "function" && (ot = Qe[Oe] = Wi.unbox(ot));
            var ft = hs(ot, null);
            (Le = Le || ft.thisDep),
              (ve = ve || ft.propDep),
              (Ue = Ue || ft.contextDep);
          } else {
            switch (($e(Me, ".", Oe, "="), typeof ot)) {
              case "number":
                $e(ot);
                break;
              case "string":
                $e('"', ot, '"');
                break;
              case "object":
                Array.isArray(ot) && $e("[", ot.join(), "]");
                break;
              default:
                $e(q.link(ot));
                break;
            }
            $e(";");
          }
        });
        function se(Oe, ot) {
          Ne.forEach(function (ft) {
            var Ct = Qe[ft];
            if (Wi.isDynamic(Ct)) {
              var xt = Oe.invoke(ot, Ct);
              ot(Me, ".", ft, "=", xt, ";");
            }
          });
        }
        (ce.dynamic[Ee] = new Wi.DynamicVariable(pn, {
          thisDep: Le,
          contextDep: Ue,
          propDep: ve,
          ref: Me,
          append: se,
        })),
          delete ce.static[Ee];
      }
      function li(q, ce, Ee, Qe, $e) {
        var Ne = kn();
        (Ne.stats = Ne.link($e)),
          Object.keys(ce.static).forEach(function (Ue) {
            gr(Ne, ce, Ue);
          }),
          Z1.forEach(function (Ue) {
            gr(Ne, q, Ue);
          });
        var Le = Aa(q, ce, Ee, Qe, Ne);
        return oa(Ne, Le), Ke(Ne, Le), it(Ne, Le), Ne.compile();
      }
      return {
        next: ln,
        current: Tt,
        procs: (function () {
          var q = kn(),
            ce = q.proc("poll"),
            Ee = q.proc("refresh"),
            Qe = q.block();
          ce(Qe), Ee(Qe);
          var $e = q.shared,
            Ne = $e.gl,
            Le = $e.next,
            Ue = $e.current;
          Qe(Ue, ".dirty=false;"), ji(q, ce), ji(q, Ee, null, !0);
          var ve;
          Bt && (ve = q.link(Bt)),
            be.oes_vertex_array_object &&
              Ee(
                q.link(be.oes_vertex_array_object),
                ".bindVertexArrayOES(null);"
              );
          for (var Me = 0; Me < et.maxAttributes; ++Me) {
            var se = Ee.def($e.attributes, "[", Me, "]"),
              Oe = q.cond(se, ".buffer");
            Oe.then(
              Ne,
              ".enableVertexAttribArray(",
              Me,
              ");",
              Ne,
              ".bindBuffer(",
              Pd,
              ",",
              se,
              ".buffer.buffer);",
              Ne,
              ".vertexAttribPointer(",
              Me,
              ",",
              se,
              ".size,",
              se,
              ".type,",
              se,
              ".normalized,",
              se,
              ".stride,",
              se,
              ".offset);"
            ).else(
              Ne,
              ".disableVertexAttribArray(",
              Me,
              ");",
              Ne,
              ".vertexAttrib4f(",
              Me,
              ",",
              se,
              ".x,",
              se,
              ".y,",
              se,
              ".z,",
              se,
              ".w);",
              se,
              ".buffer=null;"
            ),
              Ee(Oe),
              Bt &&
                Ee(ve, ".vertexAttribDivisorANGLE(", Me, ",", se, ".divisor);");
          }
          return (
            Ee(
              q.shared.vao,
              ".currentVAO=null;",
              q.shared.vao,
              ".setVAO(",
              q.shared.vao,
              ".targetVAO);"
            ),
            Object.keys(an).forEach(function (ot) {
              var ft = an[ot],
                Ct = Qe.def(Le, ".", ot),
                xt = q.block();
              xt(
                "if(",
                Ct,
                "){",
                Ne,
                ".enable(",
                ft,
                ")}else{",
                Ne,
                ".disable(",
                ft,
                ")}",
                Ue,
                ".",
                ot,
                "=",
                Ct,
                ";"
              ),
                Ee(xt),
                ce("if(", Ct, "!==", Ue, ".", ot, "){", xt, "}");
            }),
            Object.keys(wt).forEach(function (ot) {
              var ft = wt[ot],
                Ct = Tt[ot],
                xt,
                Mt,
                wn = q.block();
              if ((wn(Ne, ".", ft, "("), zi(Ct))) {
                var _n = Ct.length;
                (xt = q.global.def(Le, ".", ot)),
                  (Mt = q.global.def(Ue, ".", ot)),
                  wn(
                    Wr(_n, function (En) {
                      return xt + "[" + En + "]";
                    }),
                    ");",
                    Wr(_n, function (En) {
                      return Mt + "[" + En + "]=" + xt + "[" + En + "];";
                    }).join("")
                  ),
                  ce(
                    "if(",
                    Wr(_n, function (En) {
                      return xt + "[" + En + "]!==" + Mt + "[" + En + "]";
                    }).join("||"),
                    "){",
                    wn,
                    "}"
                  );
              } else (xt = Qe.def(Le, ".", ot)), (Mt = Qe.def(Ue, ".", ot)), wn(xt, ");", Ue, ".", ot, "=", xt, ";"), ce("if(", xt, "!==", Mt, "){", wn, "}");
              Ee(wn);
            }),
            q.compile()
          );
        })(),
        compile: li,
      };
    }
    function nm() {
      return {
        vaoCount: 0,
        bufferCount: 0,
        elementsCount: 0,
        framebufferCount: 0,
        shaderCount: 0,
        textureCount: 0,
        cubeCount: 0,
        renderbufferCount: 0,
        maxTextureUnits: 0,
      };
    }
    var Uv = 34918,
      zv = 34919,
      rm = 35007,
      Vv = function (D, oe) {
        if (!oe.ext_disjoint_timer_query) return null;
        var be = [];
        function et() {
          return be.pop() || oe.ext_disjoint_timer_query.createQueryEXT();
        }
        function vt(Bt) {
          be.push(Bt);
        }
        var tt = [];
        function Ye(Bt) {
          var rn = et();
          oe.ext_disjoint_timer_query.beginQueryEXT(rm, rn),
            tt.push(rn),
            It(tt.length - 1, tt.length, Bt);
        }
        function Dt() {
          oe.ext_disjoint_timer_query.endQueryEXT(rm);
        }
        function Rt() {
          (this.startQueryIndex = -1),
            (this.endQueryIndex = -1),
            (this.sum = 0),
            (this.stats = null);
        }
        var Zt = [];
        function kt() {
          return Zt.pop() || new Rt();
        }
        function Wt(Bt) {
          Zt.push(Bt);
        }
        var Kt = [];
        function It(Bt, rn, Tt) {
          var ln = kt();
          (ln.startQueryIndex = Bt),
            (ln.endQueryIndex = rn),
            (ln.sum = 0),
            (ln.stats = Tt),
            Kt.push(ln);
        }
        var Xt = [],
          We = [];
        function ct() {
          var Bt,
            rn,
            Tt = tt.length;
          if (Tt !== 0) {
            (We.length = Math.max(We.length, Tt + 1)),
              (Xt.length = Math.max(Xt.length, Tt + 1)),
              (Xt[0] = 0),
              (We[0] = 0);
            var ln = 0;
            for (Bt = 0, rn = 0; rn < tt.length; ++rn) {
              var Pt = tt[rn];
              oe.ext_disjoint_timer_query.getQueryObjectEXT(Pt, zv)
                ? ((ln += oe.ext_disjoint_timer_query.getQueryObjectEXT(
                    Pt,
                    Uv
                  )),
                  vt(Pt))
                : (tt[Bt++] = Pt),
                (Xt[rn + 1] = ln),
                (We[rn + 1] = Bt);
            }
            for (tt.length = Bt, Bt = 0, rn = 0; rn < Kt.length; ++rn) {
              var an = Kt[rn],
                wt = an.startQueryIndex,
                en = an.endQueryIndex;
              an.sum += Xt[en] - Xt[wt];
              var Fn = We[wt],
                rr = We[en];
              rr === Fn
                ? ((an.stats.gpuTime += an.sum / 1e6), Wt(an))
                : ((an.startQueryIndex = Fn),
                  (an.endQueryIndex = rr),
                  (Kt[Bt++] = an));
            }
            Kt.length = Bt;
          }
        }
        return {
          beginQuery: Ye,
          endQuery: Dt,
          pushScopeStats: It,
          update: ct,
          getNumPendingQueries: function () {
            return tt.length;
          },
          clear: function () {
            be.push.apply(be, tt);
            for (var Bt = 0; Bt < be.length; Bt++)
              oe.ext_disjoint_timer_query.deleteQueryEXT(be[Bt]);
            (tt.length = 0), (be.length = 0);
          },
          restore: function () {
            (tt.length = 0), (be.length = 0);
          },
        };
      },
      im = 16384,
      So = 256,
      Hv = 1024,
      am = 34962,
      Jp = "webglcontextlost",
      om = "webglcontextrestored",
      ef = 1,
      jv = 2,
      Wv = 3;
    function sm(D, oe) {
      for (var be = 0; be < D.length; ++be) if (D[be] === oe) return be;
      return -1;
    }
    function lm(D) {
      var oe = Ls(D);
      if (!oe) return null;
      var be = oe.gl,
        et = be.getContextAttributes(),
        vt = be.isContextLost(),
        tt = gc(be, oe);
      if (!tt) return null;
      var Ye = sl(),
        Dt = nm(),
        Rt = tt.extensions,
        Zt = Vv(be, Rt),
        kt = Mo(),
        Wt = be.drawingBufferWidth,
        Kt = be.drawingBufferHeight,
        It = {
          tick: 0,
          time: 0,
          viewportWidth: Wt,
          viewportHeight: Kt,
          framebufferWidth: Wt,
          framebufferHeight: Kt,
          drawingBufferWidth: Wt,
          drawingBufferHeight: Kt,
          pixelRatio: oe.pixelRatio,
        },
        Xt = {},
        We = {
          elements: null,
          primitive: 4,
          count: -1,
          offset: 0,
          instances: -1,
        },
        ct = l0(be, Rt),
        Bt = u0(be, Dt, oe, Tt),
        rn = V(be, Rt, ct, Dt, Bt);
      function Tt(jn) {
        return rn.destroyBuffer(jn);
      }
      var ln = yh(be, Rt, Bt, Dt),
        Pt = pe(be, Ye, Dt, oe),
        an = Yo(
          be,
          Rt,
          ct,
          function () {
            Fn.procs.poll();
          },
          It,
          Dt,
          oe
        ),
        wt = Es(be, Rt, ct, Dt, oe),
        en = S(be, Rt, ct, an, wt, Dt),
        Fn = P0(be, Ye, Rt, ct, Bt, ln, an, en, Xt, rn, Pt, We, It, Zt, oe),
        rr = Ge(be, en, Fn.procs.poll, It, et, Rt, ct),
        tn = Fn.next,
        Lt = be.canvas,
        _t = [],
        kn = [],
        Er = [],
        cn = [oe.onDestroy],
        mr = null;
      function tr() {
        if (_t.length === 0) {
          Zt && Zt.update(), (mr = null);
          return;
        }
        (mr = xs.next(tr)), mo();
        for (var jn = _t.length - 1; jn >= 0; --jn) {
          var Cr = _t[jn];
          Cr && Cr(It, null, 0);
        }
        be.flush(), Zt && Zt.update();
      }
      function Zn() {
        !mr && _t.length > 0 && (mr = xs.next(tr));
      }
      function Xr() {
        mr && (xs.cancel(tr), (mr = null));
      }
      function ia(jn) {
        jn.preventDefault(),
          (vt = !0),
          Xr(),
          kn.forEach(function (Cr) {
            Cr();
          });
      }
      function Za(jn) {
        be.getError(),
          (vt = !1),
          tt.restore(),
          Pt.restore(),
          Bt.restore(),
          an.restore(),
          wt.restore(),
          en.restore(),
          rn.restore(),
          Zt && Zt.restore(),
          Fn.procs.refresh(),
          Zn(),
          Er.forEach(function (Cr) {
            Cr();
          });
      }
      Lt && (Lt.addEventListener(Jp, ia, !1), Lt.addEventListener(om, Za, !1));
      function Ir() {
        (_t.length = 0),
          Xr(),
          Lt &&
            (Lt.removeEventListener(Jp, ia), Lt.removeEventListener(om, Za)),
          Pt.clear(),
          en.clear(),
          wt.clear(),
          an.clear(),
          ln.clear(),
          Bt.clear(),
          rn.clear(),
          Zt && Zt.clear(),
          cn.forEach(function (jn) {
            jn();
          });
      }
      function aa(jn) {
        le(!!jn, "invalid args to regl({...})"),
          le.type(jn, "object", "invalid args to regl({...})");
        function Cr($e) {
          var Ne = r({}, $e);
          delete Ne.uniforms,
            delete Ne.attributes,
            delete Ne.context,
            delete Ne.vao,
            "stencil" in Ne &&
              Ne.stencil.op &&
              ((Ne.stencil.opBack = Ne.stencil.opFront = Ne.stencil.op),
              delete Ne.stencil.op);
          function Le(Ue) {
            if (Ue in Ne) {
              var ve = Ne[Ue];
              delete Ne[Ue],
                Object.keys(ve).forEach(function (Me) {
                  Ne[Ue + "." + Me] = ve[Me];
                });
            }
          }
          return (
            Le("blend"),
            Le("depth"),
            Le("cull"),
            Le("stencil"),
            Le("polygonOffset"),
            Le("scissor"),
            Le("sample"),
            "vao" in $e && (Ne.vao = $e.vao),
            Ne
          );
        }
        function Vr($e) {
          var Ne = {},
            Le = {};
          return (
            Object.keys($e).forEach(function (Ue) {
              var ve = $e[Ue];
              Wi.isDynamic(ve) ? (Le[Ue] = Wi.unbox(ve, Ue)) : (Ne[Ue] = ve);
            }),
            { dynamic: Le, static: Ne }
          );
        }
        var oa = Vr(jn.context || {}),
          Tl = Vr(jn.uniforms || {}),
          ge = Vr(jn.attributes || {}),
          it = Vr(Cr(jn)),
          Ke = { gpuTime: 0, cpuTime: 0, count: 0 },
          un = Fn.compile(it, ge, Tl, oa, Ke),
          gr = un.draw,
          li = un.batch,
          q = un.scope,
          ce = [];
        function Ee($e) {
          for (; ce.length < $e; ) ce.push(null);
          return ce;
        }
        function Qe($e, Ne) {
          var Le;
          if ((vt && le.raise("context lost"), typeof $e == "function"))
            return q.call(this, null, $e, 0);
          if (typeof Ne == "function")
            if (typeof $e == "number")
              for (Le = 0; Le < $e; ++Le) q.call(this, null, Ne, Le);
            else if (Array.isArray($e))
              for (Le = 0; Le < $e.length; ++Le) q.call(this, $e[Le], Ne, Le);
            else return q.call(this, $e, Ne, 0);
          else if (typeof $e == "number") {
            if ($e > 0) return li.call(this, Ee($e | 0), $e | 0);
          } else if (Array.isArray($e)) {
            if ($e.length) return li.call(this, $e, $e.length);
          } else return gr.call(this, $e);
        }
        return r(Qe, { stats: Ke });
      }
      var bi = (en.setFBO = aa({
        framebuffer: Wi.define.call(null, ef, "framebuffer"),
      }));
      function Aa(jn, Cr) {
        var Vr = 0;
        Fn.procs.poll();
        var oa = Cr.color;
        oa &&
          (be.clearColor(+oa[0] || 0, +oa[1] || 0, +oa[2] || 0, +oa[3] || 0),
          (Vr |= im)),
          "depth" in Cr && (be.clearDepth(+Cr.depth), (Vr |= So)),
          "stencil" in Cr && (be.clearStencil(Cr.stencil | 0), (Vr |= Hv)),
          le(!!Vr, "called regl.clear with no buffer specified"),
          be.clear(Vr);
      }
      function Ta(jn) {
        if (
          (le(
            typeof jn == "object" && jn,
            "regl.clear() takes an object as input"
          ),
          "framebuffer" in jn)
        )
          if (jn.framebuffer && jn.framebuffer_reglType === "framebufferCube")
            for (var Cr = 0; Cr < 6; ++Cr)
              bi(r({ framebuffer: jn.framebuffer.faces[Cr] }, jn), Aa);
          else bi(jn, Aa);
        else Aa(null, jn);
      }
      function ji(jn) {
        le.type(jn, "function", "regl.frame() callback must be a function"),
          _t.push(jn);
        function Cr() {
          var Vr = sm(_t, jn);
          le(Vr >= 0, "cannot cancel a frame twice");
          function oa() {
            var Tl = sm(_t, oa);
            (_t[Tl] = _t[_t.length - 1]),
              (_t.length -= 1),
              _t.length <= 0 && Xr();
          }
          _t[Vr] = oa;
        }
        return Zn(), { cancel: Cr };
      }
      function ka() {
        var jn = tn.viewport,
          Cr = tn.scissor_box;
        (jn[0] = jn[1] = Cr[0] = Cr[1] = 0),
          (It.viewportWidth =
            It.framebufferWidth =
            It.drawingBufferWidth =
            jn[2] =
            Cr[2] =
              be.drawingBufferWidth),
          (It.viewportHeight =
            It.framebufferHeight =
            It.drawingBufferHeight =
            jn[3] =
            Cr[3] =
              be.drawingBufferHeight);
      }
      function mo() {
        (It.tick += 1), (It.time = fr()), ka(), Fn.procs.poll();
      }
      function Sa() {
        ka(), Fn.procs.refresh(), Zt && Zt.update();
      }
      function fr() {
        return (Mo() - kt) / 1e3;
      }
      Sa();
      function no(jn, Cr) {
        le.type(Cr, "function", "listener callback must be a function");
        var Vr;
        switch (jn) {
          case "frame":
            return ji(Cr);
          case "lost":
            Vr = kn;
            break;
          case "restore":
            Vr = Er;
            break;
          case "destroy":
            Vr = cn;
            break;
          default:
            le.raise(
              "invalid event, must be one of frame,lost,restore,destroy"
            );
        }
        return (
          Vr.push(Cr),
          {
            cancel: function () {
              for (var oa = 0; oa < Vr.length; ++oa)
                if (Vr[oa] === Cr) {
                  (Vr[oa] = Vr[Vr.length - 1]), Vr.pop();
                  return;
                }
            },
          }
        );
      }
      var qr = r(aa, {
        clear: Ta,
        prop: Wi.define.bind(null, ef),
        context: Wi.define.bind(null, jv),
        this: Wi.define.bind(null, Wv),
        draw: aa({}),
        buffer: function (jn) {
          return Bt.create(jn, am, !1, !1);
        },
        elements: function (jn) {
          return ln.create(jn, !1);
        },
        texture: an.create2D,
        cube: an.createCube,
        renderbuffer: wt.create,
        framebuffer: en.create,
        framebufferCube: en.createCube,
        vao: rn.createVAO,
        attributes: et,
        frame: ji,
        on: no,
        limits: ct,
        hasExtension: function (jn) {
          return ct.extensions.indexOf(jn.toLowerCase()) >= 0;
        },
        read: rr,
        destroy: Ir,
        _gl: be,
        _refresh: Sa,
        poll: function () {
          mo(), Zt && Zt.update();
        },
        now: fr,
        stats: Dt,
      });
      return oe.onDone(null, qr), qr;
    }
    return lm;
  });
})(AA);
var tG = AA.exports;
const nG = ea(tG);
var rG = class {
    constructor(t, e) {
      const {
        buffer: n,
        offset: r,
        stride: o,
        normalized: l,
        size: a,
        divisor: h,
      } = e;
      (this.buffer = n),
        (this.attribute = {
          buffer: n.get(),
          offset: r || 0,
          stride: o || 0,
          normalized: l || !1,
          divisor: h || 0,
        }),
        a && (this.attribute.size = a);
    }
    get() {
      return this.attribute;
    }
    updateBuffer(t) {
      this.buffer.subData(t);
    }
    destroy() {
      this.buffer.destroy();
    }
  },
  iG = {
    [H.POINTS]: "points",
    [H.LINES]: "lines",
    [H.LINE_LOOP]: "line loop",
    [H.LINE_STRIP]: "line strip",
    [H.TRIANGLES]: "triangles",
    [H.TRIANGLE_FAN]: "triangle fan",
    [H.TRIANGLE_STRIP]: "triangle strip",
  },
  TA = {
    [H.STATIC_DRAW]: "static",
    [H.DYNAMIC_DRAW]: "dynamic",
    [H.STREAM_DRAW]: "stream",
  },
  ry = {
    [H.BYTE]: "int8",
    [H.INT]: "int32",
    [H.UNSIGNED_BYTE]: "uint8",
    [H.UNSIGNED_SHORT]: "uint16",
    [H.UNSIGNED_INT]: "uint32",
    [H.FLOAT]: "float",
  },
  aG = {
    [H.ALPHA]: "alpha",
    [H.LUMINANCE]: "luminance",
    [H.LUMINANCE_ALPHA]: "luminance alpha",
    [H.RGB]: "rgb",
    [H.RGBA]: "rgba",
    [H.RGBA4]: "rgba4",
    [H.RGB5_A1]: "rgb5 a1",
    [H.RGB565]: "rgb565",
    [H.DEPTH_COMPONENT]: "depth",
    [H.DEPTH_STENCIL]: "depth stencil",
  },
  oG = { [H.DONT_CARE]: "dont care", [H.NICEST]: "nice", [H.FASTEST]: "fast" },
  wb = {
    [H.NEAREST]: "nearest",
    [H.LINEAR]: "linear",
    [H.LINEAR_MIPMAP_LINEAR]: "mipmap",
    [H.NEAREST_MIPMAP_LINEAR]: "nearest mipmap linear",
    [H.LINEAR_MIPMAP_NEAREST]: "linear mipmap nearest",
    [H.NEAREST_MIPMAP_NEAREST]: "nearest mipmap nearest",
  },
  Cb = {
    [H.REPEAT]: "repeat",
    [H.CLAMP_TO_EDGE]: "clamp",
    [H.MIRRORED_REPEAT]: "mirror",
  },
  sG = { [H.NONE]: "none", [H.BROWSER_DEFAULT_WEBGL]: "browser" },
  lG = {
    [H.NEVER]: "never",
    [H.ALWAYS]: "always",
    [H.LESS]: "less",
    [H.LEQUAL]: "lequal",
    [H.GREATER]: "greater",
    [H.GEQUAL]: "gequal",
    [H.EQUAL]: "equal",
    [H.NOTEQUAL]: "notequal",
  },
  Nb = {
    [H.FUNC_ADD]: "add",
    [H.MIN_EXT]: "min",
    [H.MAX_EXT]: "max",
    [H.FUNC_SUBTRACT]: "subtract",
    [H.FUNC_REVERSE_SUBTRACT]: "reverse subtract",
  },
  tg = {
    [H.ZERO]: "zero",
    [H.ONE]: "one",
    [H.SRC_COLOR]: "src color",
    [H.ONE_MINUS_SRC_COLOR]: "one minus src color",
    [H.SRC_ALPHA]: "src alpha",
    [H.ONE_MINUS_SRC_ALPHA]: "one minus src alpha",
    [H.DST_COLOR]: "dst color",
    [H.ONE_MINUS_DST_COLOR]: "one minus dst color",
    [H.DST_ALPHA]: "dst alpha",
    [H.ONE_MINUS_DST_ALPHA]: "one minus dst alpha",
    [H.CONSTANT_COLOR]: "constant color",
    [H.ONE_MINUS_CONSTANT_COLOR]: "one minus constant color",
    [H.CONSTANT_ALPHA]: "constant alpha",
    [H.ONE_MINUS_CONSTANT_ALPHA]: "one minus constant alpha",
    [H.SRC_ALPHA_SATURATE]: "src alpha saturate",
  },
  cG = {
    [H.NEVER]: "never",
    [H.ALWAYS]: "always",
    [H.LESS]: "less",
    [H.LEQUAL]: "lequal",
    [H.GREATER]: "greater",
    [H.GEQUAL]: "gequal",
    [H.EQUAL]: "equal",
    [H.NOTEQUAL]: "notequal",
  },
  rp = {
    [H.ZERO]: "zero",
    [H.KEEP]: "keep",
    [H.REPLACE]: "replace",
    [H.INVERT]: "invert",
    [H.INCR]: "increment",
    [H.DECR]: "decrement",
    [H.INCR_WRAP]: "increment wrap",
    [H.DECR_WRAP]: "decrement wrap",
  },
  uG = { [H.FRONT]: "front", [H.BACK]: "back" },
  dG = class {
    constructor(t, e) {
      this.isDestroyed = !1;
      const { data: n, usage: r, type: o } = e;
      this.buffer = t.buffer({
        data: n,
        usage: TA[r || H.STATIC_DRAW],
        type: ry[o || H.UNSIGNED_BYTE],
      });
    }
    get() {
      return this.buffer;
    }
    destroy() {
      this.isDestroyed || this.buffer.destroy(), (this.isDestroyed = !0);
    }
    subData({ data: t, offset: e }) {
      this.buffer.subdata(t, e);
    }
  },
  hG = class {
    constructor(t, e) {
      const { data: n, usage: r, type: o, count: l } = e;
      this.elements = t.elements({
        data: n,
        usage: TA[r || H.STATIC_DRAW],
        type: ry[o || H.UNSIGNED_BYTE],
        count: l,
      });
    }
    get() {
      return this.elements;
    }
    subData({ data: t }) {
      this.elements.subdata(t);
    }
    destroy() {}
  },
  pG = class {
    constructor(t, e) {
      const { width: n, height: r, color: o, colors: l } = e,
        a = { width: n, height: r };
      Array.isArray(l) && (a.colors = l.map((h) => h.get())),
        o && typeof o != "boolean" && (a.color = o.get()),
        (this.framebuffer = t.framebuffer(a));
    }
    get() {
      return this.framebuffer;
    }
    destroy() {
      this.framebuffer.destroy();
    }
    resize({ width: t, height: e }) {
      this.framebuffer.resize(t, e);
    }
  },
  fG = Object.defineProperty,
  mG = Object.defineProperties,
  gG = Object.getOwnPropertyDescriptors,
  Rb = Object.getOwnPropertySymbols,
  vG = Object.prototype.hasOwnProperty,
  _G = Object.prototype.propertyIsEnumerable,
  Ib = (t, e, n) =>
    e in t
      ? fG(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  Vf = (t, e) => {
    for (var n in e || (e = {})) vG.call(e, n) && Ib(t, n, e[n]);
    if (Rb) for (var n of Rb(e)) _G.call(e, n) && Ib(t, n, e[n]);
    return t;
  },
  yG = (t, e) => mG(t, gG(e)),
  { isPlainObject: xG, isTypedArray: bG } = Ka,
  EG = class {
    constructor(t, e) {
      (this.destroyed = !1), (this.uniforms = {}), (this.reGl = t);
      const {
          vs: n,
          fs: r,
          attributes: o,
          uniforms: l,
          primitive: a,
          count: h,
          elements: f,
          depth: v,
          cull: E,
          instances: x,
        } = e,
        T = {
          platformString: "WebGL1",
          glslVersion: "#version 100",
          explicitBindingLocations: !1,
          separateSamplerTextures: !1,
          viewportOrigin: Uc.LOWER_LEFT,
          clipSpaceNearZ: Pp.NEGATIVE_ONE,
          supportMRT: !1,
        },
        N = {};
      (this.options = e),
        l &&
          ((this.uniforms = this.extractUniforms(l)),
          Object.keys(l).forEach((G) => {
            N[G] = t.prop(G);
          }));
      const I = {};
      Object.keys(o).forEach((G) => {
        I[G] = o[G].get();
      });
      const L = h5(Bp(T, "frag", r, null, !1)),
        F = h5(Bp(T, "vert", n, null, !1)),
        X = {
          attributes: I,
          frag: L,
          uniforms: N,
          vert: F,
          colorMask: t.prop("colorMask"),
          lineWidth: 1,
          blend: {
            enable: t.prop("blend.enable"),
            func: t.prop("blend.func"),
            equation: t.prop("blend.equation"),
            color: t.prop("blend.color"),
          },
          stencil: {
            enable: t.prop("stencil.enable"),
            mask: t.prop("stencil.mask"),
            func: t.prop("stencil.func"),
            opFront: t.prop("stencil.opFront"),
            opBack: t.prop("stencil.opBack"),
          },
          primitive: iG[a === void 0 ? H.TRIANGLES : a],
        };
      x && (X.instances = x),
        h ? (X.count = h) : f && (X.elements = f.get()),
        this.initDepthDrawParams({ depth: v }, X),
        this.initCullDrawParams({ cull: E }, X),
        (this.drawCommand = t(X)),
        (this.drawParams = X);
    }
    updateAttributesAndElements(t, e) {
      const n = {};
      Object.keys(t).forEach((r) => {
        n[r] = t[r].get();
      }),
        (this.drawParams.attributes = n),
        (this.drawParams.elements = e.get()),
        (this.drawCommand = this.reGl(this.drawParams));
    }
    updateAttributes(t) {
      const e = {};
      Object.keys(t).forEach((n) => {
        e[n] = t[n].get();
      }),
        (this.drawParams.attributes = e),
        (this.drawCommand = this.reGl(this.drawParams));
    }
    addUniforms(t) {
      this.uniforms = Vf(Vf({}, this.uniforms), this.extractUniforms(t));
    }
    draw(t, e) {
      if (
        this.drawParams.attributes &&
        Object.keys(this.drawParams.attributes).length === 0
      )
        return;
      const n = Vf(
          Vf({}, this.uniforms),
          this.extractUniforms(t.uniforms || {})
        ),
        r = {};
      Object.keys(n).forEach((o) => {
        const l = typeof n[o];
        l === "boolean" ||
        l === "number" ||
        Array.isArray(n[o]) ||
        n[o].BYTES_PER_ELEMENT
          ? (r[o] = n[o])
          : (r[o] = n[o].get());
      }),
        (r.blend = e
          ? this.getBlendDrawParams({ blend: { enable: !1 } })
          : this.getBlendDrawParams(t)),
        (r.stencil = this.getStencilDrawParams(t)),
        (r.colorMask = this.getColorMaskDrawParams(t, e)),
        this.drawCommand(r);
    }
    destroy() {
      var t, e;
      (e = (t = this.drawParams) == null ? void 0 : t.elements) == null ||
        e.destroy(),
        this.options.attributes &&
          Object.values(this.options.attributes).forEach((n) => {
            n == null || n.destroy();
          }),
        (this.destroyed = !0);
    }
    initDepthDrawParams({ depth: t }, e) {
      t &&
        (e.depth = {
          enable: t.enable === void 0 ? !0 : !!t.enable,
          mask: t.mask === void 0 ? !0 : !!t.mask,
          func: lG[t.func || H.LESS],
          range: t.range || [0, 1],
        });
    }
    getBlendDrawParams({ blend: t }) {
      const {
        enable: e,
        func: n,
        equation: r,
        color: o = [0, 0, 0, 0],
      } = t || {};
      return {
        enable: !!e,
        func: {
          srcRGB: tg[(n && n.srcRGB) || H.SRC_ALPHA],
          srcAlpha: tg[(n && n.srcAlpha) || H.SRC_ALPHA],
          dstRGB: tg[(n && n.dstRGB) || H.ONE_MINUS_SRC_ALPHA],
          dstAlpha: tg[(n && n.dstAlpha) || H.ONE_MINUS_SRC_ALPHA],
        },
        equation: {
          rgb: Nb[(r && r.rgb) || H.FUNC_ADD],
          alpha: Nb[(r && r.alpha) || H.FUNC_ADD],
        },
        color: o,
      };
    }
    getStencilDrawParams({ stencil: t }) {
      const {
        enable: e,
        mask: n = -1,
        func: r = { cmp: H.ALWAYS, ref: 0, mask: -1 },
        opFront: o = { fail: H.KEEP, zfail: H.KEEP, zpass: H.KEEP },
        opBack: l = { fail: H.KEEP, zfail: H.KEEP, zpass: H.KEEP },
      } = t || {};
      return {
        enable: !!e,
        mask: n,
        func: yG(Vf({}, r), { cmp: cG[r.cmp] }),
        opFront: { fail: rp[o.fail], zfail: rp[o.zfail], zpass: rp[o.zpass] },
        opBack: { fail: rp[l.fail], zfail: rp[l.zfail], zpass: rp[l.zpass] },
      };
    }
    getColorMaskDrawParams({ stencil: t }, e) {
      return t != null && t.enable && t.opFront && !e
        ? [!1, !1, !1, !1]
        : [!0, !0, !0, !0];
    }
    initCullDrawParams({ cull: t }, e) {
      if (t) {
        const { enable: n, face: r = H.BACK } = t;
        e.cull = { enable: !!n, face: uG[r] };
      }
    }
    extractUniforms(t) {
      const e = {};
      return (
        Object.keys(t).forEach((n) => {
          this.extractUniformsRecursively(n, t[n], e, "");
        }),
        e
      );
    }
    extractUniformsRecursively(t, e, n, r) {
      if (
        e === null ||
        typeof e == "number" ||
        typeof e == "boolean" ||
        (Array.isArray(e) && typeof e[0] == "number") ||
        bG(e) ||
        e === "" ||
        "resize" in e
      ) {
        n[`${r && r + "."}${t}`] = e;
        return;
      }
      xG(e) &&
        Object.keys(e).forEach((o) => {
          this.extractUniformsRecursively(o, e[o], n, `${r && r + "."}${t}`);
        }),
        Array.isArray(e) &&
          e.forEach((o, l) => {
            Object.keys(o).forEach((a) => {
              this.extractUniformsRecursively(
                a,
                o[a],
                n,
                `${r && r + "."}${t}[${l}]`
              );
            });
          });
    }
  },
  AG = class {
    constructor(t, e) {
      this.isDestroy = !1;
      const {
        data: n,
        type: r = H.UNSIGNED_BYTE,
        width: o,
        height: l,
        flipY: a = !1,
        format: h = H.RGBA,
        mipmap: f = !1,
        wrapS: v = H.CLAMP_TO_EDGE,
        wrapT: E = H.CLAMP_TO_EDGE,
        aniso: x = 0,
        alignment: T = 1,
        premultiplyAlpha: N = !1,
        mag: I = H.NEAREST,
        min: L = H.NEAREST,
        colorSpace: F = H.BROWSER_DEFAULT_WEBGL,
        x: X = 0,
        y: G = 0,
        copy: K = !1,
      } = e;
      (this.width = o), (this.height = l);
      const Q = {
        width: o,
        height: l,
        type: ry[r],
        format: aG[h],
        wrapS: Cb[v],
        wrapT: Cb[E],
        mag: wb[I],
        min: wb[L],
        alignment: T,
        flipY: a,
        colorSpace: sG[F],
        premultiplyAlpha: N,
        aniso: x,
        x: X,
        y: G,
        copy: K,
      };
      n && (Q.data = n),
        typeof f == "number"
          ? (Q.mipmap = oG[f])
          : typeof f == "boolean" && (Q.mipmap = f),
        (this.texture = t.texture(Q));
    }
    get() {
      return this.texture;
    }
    update(t = {}) {
      this.texture(t);
    }
    bind() {
      this.texture._texture.bind();
    }
    resize({ width: t, height: e }) {
      this.texture.resize(t, e), (this.width = t), (this.height = e);
    }
    getSize() {
      return [this.width, this.height];
    }
    destroy() {
      var t;
      this.isDestroy || (t = this.texture) == null || t.destroy(),
        (this.isDestroy = !0);
    }
  },
  j2 = (t, e, n) =>
    new Promise((r, o) => {
      var l = (f) => {
          try {
            h(n.next(f));
          } catch (v) {
            o(v);
          }
        },
        a = (f) => {
          try {
            h(n.throw(f));
          } catch (v) {
            o(v);
          }
        },
        h = (f) => (f.done ? r(f.value) : Promise.resolve(f.value).then(l, a));
      h((n = n.apply(t, e)).next());
    }),
  TG = class {
    constructor() {
      (this.uniformBuffers = []),
        (this.queryVerdorInfo = () => "WebGL1"),
        (this.createModel = (t) => new EG(this.gl, t)),
        (this.createAttribute = (t) => new rG(this.gl, t)),
        (this.createBuffer = (t) => new dG(this.gl, t)),
        (this.createElements = (t) => new hG(this.gl, t)),
        (this.createTexture2D = (t) => new AG(this.gl, t)),
        (this.createFramebuffer = (t) => new pG(this.gl, t)),
        (this.useFramebuffer = (t, e) => {
          this.gl({ framebuffer: t ? t.get() : null })(e);
        }),
        (this.useFramebufferAsync = (t, e) =>
          j2(this, null, function* () {
            this.gl({ framebuffer: t ? t.get() : null })(e);
          })),
        (this.clear = (t) => {
          var e;
          const { color: n, depth: r, stencil: o, framebuffer: l = null } = t,
            a = { color: n, depth: r, stencil: o };
          (a.framebuffer = l === null ? l : l.get()),
            (e = this.gl) == null || e.clear(a);
        }),
        (this.viewport = ({ x: t, y: e, width: n, height: r }) => {
          this.gl._gl.viewport(t, e, n, r),
            (this.width = n),
            (this.height = r),
            this.gl._refresh();
        }),
        (this.readPixels = (t) => {
          const { framebuffer: e, x: n, y: r, width: o, height: l } = t,
            a = { x: n, y: r, width: o, height: l };
          return e && (a.framebuffer = e.get()), this.gl.read(a);
        }),
        (this.readPixelsAsync = (t) =>
          j2(this, null, function* () {
            return this.readPixels(t);
          })),
        (this.getViewportSize = () => ({
          width: this.gl._gl.drawingBufferWidth,
          height: this.gl._gl.drawingBufferHeight,
        })),
        (this.getContainer = () => {
          var t;
          return (t = this.canvas) == null ? void 0 : t.parentElement;
        }),
        (this.getCanvas = () => this.canvas),
        (this.getGLContext = () => this.gl._gl),
        (this.destroy = () => {
          var t, e, n;
          (this.canvas = null),
            (n =
              (e = (t = this.gl) == null ? void 0 : t._gl) == null
                ? void 0
                : e.getExtension("WEBGL_lose_context")) == null ||
              n.loseContext(),
            this.gl.destroy(),
            (this.gl = null);
        });
    }
    init(t, e, n) {
      return j2(this, null, function* () {
        (this.canvas = t),
          n
            ? (this.gl = n)
            : (this.gl = yield new Promise((r, o) => {
                nG({
                  canvas: this.canvas,
                  attributes: {
                    alpha: !0,
                    antialias: e.antialias,
                    premultipliedAlpha: !0,
                    preserveDrawingBuffer: e.preserveDrawingBuffer,
                    stencil: e.stencil,
                  },
                  extensions: [
                    "OES_element_index_uint",
                    "OES_standard_derivatives",
                    "ANGLE_instanced_arrays",
                  ],
                  optionalExtensions: [
                    "oes_texture_float_linear",
                    "OES_texture_float",
                    "EXT_texture_filter_anisotropic",
                    "EXT_blend_minmax",
                    "WEBGL_depth_texture",
                    "WEBGL_lose_context",
                  ],
                  profile: !0,
                  onDone: (l, a) => {
                    (l || !a) && o(l), r(a);
                  },
                });
              })),
          (this.extensionObject = {
            OES_texture_float: this.testExtension("OES_texture_float"),
          });
      });
    }
    getPointSizeRange() {
      return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE);
    }
    testExtension(t) {
      return !!this.getGLContext().getExtension(t);
    }
    setState() {
      this.gl({
        cull: { enable: !1, face: "back" },
        viewport: { x: 0, y: 0, height: this.width, width: this.height },
        blend: { enable: !0, equation: "add" },
        framebuffer: null,
      }),
        this.gl._refresh();
    }
    setBaseState() {
      this.gl({
        cull: { enable: !1, face: "back" },
        viewport: { x: 0, y: 0, height: this.width, width: this.height },
        blend: { enable: !1, equation: "add" },
        framebuffer: null,
      }),
        this.gl._refresh();
    }
    setCustomLayerDefaults() {
      const t = this.getGLContext();
      t.disable(t.CULL_FACE);
    }
    setDirty(t) {
      this.isDirty = t;
    }
    getDirty() {
      return this.isDirty;
    }
    beginFrame() {}
    endFrame() {}
  },
  W2 = ["selectstart", "selecting", "selectend"],
  SG = class extends _s.EventEmitter {
    constructor(t, e = {}) {
      super(),
        (this.isEnable = !1),
        (this.onDragStart = (n) => {
          (this.box.style.display = "block"),
            (this.startEvent = this.endEvent = n),
            this.syncBoxBound(),
            this.emit(
              "selectstart",
              this.getLngLatBox(),
              this.startEvent,
              this.endEvent
            );
        }),
        (this.onDragging = (n) => {
          (this.endEvent = n),
            this.syncBoxBound(),
            this.emit(
              "selecting",
              this.getLngLatBox(),
              this.startEvent,
              this.endEvent
            );
        }),
        (this.onDragEnd = (n) => {
          (this.endEvent = n),
            (this.box.style.display = "none"),
            this.emit(
              "selectend",
              this.getLngLatBox(),
              this.startEvent,
              this.endEvent
            );
        }),
        (this.scene = t),
        (this.options = e);
    }
    get container() {
      return this.scene.getMapService().getMarkerContainer();
    }
    enable() {
      if (this.isEnable) return;
      const { className: t } = this.options;
      if (
        (this.scene.setMapStatus({ dragEnable: !1 }),
        (this.container.style.cursor = "crosshair"),
        !this.box)
      ) {
        const e = ma("div", void 0, this.container);
        e.classList.add("l7-select-box"),
          t && e.classList.add(t),
          (e.style.display = "none"),
          (this.box = e);
      }
      this.scene.on("dragstart", this.onDragStart),
        this.scene.on("dragging", this.onDragging),
        this.scene.on("dragend", this.onDragEnd),
        (this.isEnable = !0);
    }
    disable() {
      this.isEnable &&
        (this.scene.setMapStatus({ dragEnable: !0 }),
        (this.container.style.cursor = "auto"),
        this.scene.off("dragstart", this.onDragStart),
        this.scene.off("dragging", this.onDragging),
        this.scene.off("dragend", this.onDragEnd),
        (this.isEnable = !1));
    }
    syncBoxBound() {
      const { x: t, y: e } = this.startEvent,
        { x: n, y: r } = this.endEvent,
        o = Math.min(t, n),
        l = Math.min(e, r),
        a = Math.abs(t - n),
        h = Math.abs(e - r);
      (this.box.style.top = `${l}px`),
        (this.box.style.left = `${o}px`),
        (this.box.style.width = `${a}px`),
        (this.box.style.height = `${h}px`);
    }
    getLngLatBox() {
      const {
          lngLat: { lng: t, lat: e },
        } = this.startEvent,
        {
          lngLat: { lng: n, lat: r },
        } = this.endEvent;
      return WC([
        [t, e],
        [n, r],
      ]);
    }
  },
  wG = Object.defineProperty,
  CG = Object.defineProperties,
  NG = Object.getOwnPropertyDescriptors,
  Mb = Object.getOwnPropertySymbols,
  RG = Object.prototype.hasOwnProperty,
  IG = Object.prototype.propertyIsEnumerable,
  Pb = (t, e, n) =>
    e in t
      ? wG(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (t[e] = n),
  MG = (t, e) => {
    for (var n in e || (e = {})) RG.call(e, n) && Pb(t, n, e[n]);
    if (Mb) for (var n of Mb(e)) IG.call(e, n) && Pb(t, n, e[n]);
    return t;
  },
  PG = (t, e) => CG(t, NG(e)),
  Hf = (t, e, n) =>
    new Promise((r, o) => {
      var l = (f) => {
          try {
            h(n.next(f));
          } catch (v) {
            o(v);
          }
        },
        a = (f) => {
          try {
            h(n.throw(f));
          } catch (v) {
            o(v);
          }
        },
        h = (f) => (f.done ? r(f.value) : Promise.resolve(f.value).then(l, a));
      h((n = n.apply(t, e)).next());
    }),
  OG = class {
    constructor(t) {
      const { id: e, map: n, renderer: r = "device" } = t,
        o = NO();
      (this.container = o),
        n.setContainer(o, e),
        r === "regl"
          ? (o.rendererService = new TG())
          : (o.rendererService = new eG()),
        (this.sceneService = o.sceneService),
        (this.mapService = o.mapService),
        (this.iconService = o.iconService),
        (this.fontService = o.fontService),
        (this.controlService = o.controlService),
        (this.layerService = o.layerService),
        (this.debugService = o.debugService),
        this.debugService.setEnable(t.debug),
        (this.markerService = o.markerService),
        (this.interactionService = o.interactionService),
        (this.popupService = o.popupService),
        (this.boxSelect = new SG(this, {})),
        this.initComponent(e),
        this.sceneService.init(t),
        this.initControl();
    }
    get map() {
      return this.mapService.map;
    }
    get loaded() {
      return this.sceneService.loaded;
    }
    getServiceContainer() {
      return this.container;
    }
    getSize() {
      return this.mapService.getSize();
    }
    getMinZoom() {
      return this.mapService.getMinZoom();
    }
    getMaxZoom() {
      return this.mapService.getMaxZoom();
    }
    getType() {
      return this.mapService.getType();
    }
    getMapContainer() {
      return this.mapService.getMapContainer();
    }
    getMapCanvasContainer() {
      return this.mapService.getMapCanvasContainer();
    }
    getMapService() {
      return this.mapService;
    }
    getDebugService() {
      return this.debugService;
    }
    exportPng(t) {
      return Hf(this, null, function* () {
        return this.sceneService.exportPng(t);
      });
    }
    exportMap(t) {
      return Hf(this, null, function* () {
        return this.sceneService.exportPng(t);
      });
    }
    registerRenderService(t) {
      this.sceneService.loaded
        ? new t(this).init()
        : this.on("loaded", () => {
            new t(this).init();
          });
    }
    setBgColor(t) {
      this.mapService.setBgColor(t);
    }
    addLayer(t) {
      this.loaded
        ? this.preAddLayer(t)
        : this.once("loaded", () => {
            this.preAddLayer(t);
          });
    }
    preAddLayer(t) {
      const e = a1(this.container);
      if ((t.setContainer(e), this.sceneService.addLayer(t), t.inited)) {
        this.initTileLayer(t);
        const n = this.initMask(t);
        this.addMask(n, t.id);
      } else
        t.on("inited", () => {
          this.initTileLayer(t);
          const n = this.initMask(t);
          this.addMask(n, t.id);
        });
    }
    initMask(t) {
      const {
        mask: e,
        maskfence: n,
        maskColor: r = "#000",
        maskOpacity: o = 0,
      } = t.getLayerConfig();
      return !e || !n
        ? void 0
        : new B7().source(n).shape("fill").style({ color: r, opacity: o });
    }
    addMask(t, e) {
      if (!t) return;
      const n = this.getLayer(e);
      if (n) {
        const r = a1(this.container);
        t.setContainer(r), n.addMaskLayer(t), this.sceneService.addMask(t);
      } else console.warn("parent layer not find!");
    }
    getPickedLayer() {
      return this.layerService.pickedLayerId;
    }
    getLayers() {
      return this.layerService.getLayers();
    }
    getLayer(t) {
      return this.layerService.getLayer(t);
    }
    getLayerByName(t) {
      return this.layerService.getLayerByName(t);
    }
    removeLayer(t, e) {
      return Hf(this, null, function* () {
        yield this.layerService.remove(t, e);
      });
    }
    removeAllLayer() {
      return Hf(this, null, function* () {
        yield this.layerService.removeAllLayers();
      });
    }
    render() {
      this.sceneService.render();
    }
    setEnableRender(t) {
      this.layerService.setEnableRender(t);
    }
    addIconFont(t, e) {
      this.fontService.addIconFont(t, e);
    }
    addIconFonts(t) {
      t.forEach(([e, n]) => {
        this.fontService.addIconFont(e, n);
      });
    }
    addFontFace(t, e) {
      this.fontService.once("fontloaded", (n) => {
        this.emit("fontloaded", n);
      }),
        this.fontService.addFontFace(t, e);
    }
    addImage(t, e) {
      return Hf(this, null, function* () {
        yield this.iconService.addImage(t, e);
      });
    }
    hasImage(t) {
      return this.iconService.hasImage(t);
    }
    removeImage(t) {
      this.iconService.removeImage(t);
    }
    addIconFontGlyphs(t, e) {
      this.fontService.addIconGlyphs(e);
    }
    addControl(t) {
      this.controlService.addControl(t, this.container);
    }
    removeControl(t) {
      this.controlService.removeControl(t);
    }
    getControlByName(t) {
      return this.controlService.getControlByName(t);
    }
    addMarker(t) {
      this.markerService.addMarker(t);
    }
    addMarkerLayer(t) {
      this.markerService.addMarkerLayer(t);
    }
    removeMarkerLayer(t) {
      this.markerService.removeMarkerLayer(t);
    }
    removeAllMarkers() {
      this.markerService.removeAllMarkers();
    }
    removeAllMakers() {
      console.warn("removeAllMakers 已废弃，请使用 removeAllMarkers"),
        this.markerService.removeAllMarkers();
    }
    addPopup(t) {
      this.popupService.addPopup(t);
    }
    removePopup(t) {
      this.popupService.removePopup(t);
    }
    on(t, e) {
      var n;
      W2.includes(t)
        ? (n = this.boxSelect) == null || n.on(t, e)
        : Om.includes(t)
        ? this.sceneService.on(t, e)
        : this.mapService.on(t, e);
    }
    once(t, e) {
      var n;
      W2.includes(t)
        ? (n = this.boxSelect) == null || n.once(t, e)
        : Om.includes(t)
        ? this.sceneService.once(t, e)
        : this.mapService.once(t, e);
    }
    emit(t, e) {
      Om.indexOf(t) === -1
        ? this.mapService.on(t, e)
        : this.sceneService.emit(t, e);
    }
    off(t, e) {
      var n;
      W2.includes(t)
        ? (n = this.boxSelect) == null || n.off(t, e)
        : Om.includes(t)
        ? this.sceneService.off(t, e)
        : this.mapService.off(t, e);
    }
    getZoom() {
      return this.mapService.getZoom();
    }
    getCenter(t) {
      return this.mapService.getCenter(t);
    }
    setCenter(t, e) {
      return this.mapService.setCenter(t, e);
    }
    getPitch() {
      return this.mapService.getPitch();
    }
    setPitch(t) {
      return this.mapService.setPitch(t);
    }
    getRotation() {
      return this.mapService.getRotation();
    }
    getBounds() {
      return this.mapService.getBounds();
    }
    setRotation(t) {
      this.mapService.setRotation(t);
    }
    zoomIn() {
      this.mapService.zoomIn();
    }
    zoomOut() {
      this.mapService.zoomOut();
    }
    panTo(t) {
      this.mapService.panTo(t);
    }
    panBy(t, e) {
      this.mapService.panBy(t, e);
    }
    getContainer() {
      return this.mapService.getContainer();
    }
    setZoom(t) {
      this.mapService.setZoom(t);
    }
    fitBounds(t, e) {
      const { fitBoundsOptions: n, animate: r } =
        this.sceneService.getSceneConfig();
      this.mapService.fitBounds(t, e || PG(MG({}, n), { animate: r }));
    }
    setZoomAndCenter(t, e) {
      this.mapService.setZoomAndCenter(t, e);
    }
    setMapStyle(t) {
      this.mapService.setMapStyle(t);
    }
    setMapStatus(t) {
      this.mapService.setMapStatus(t);
    }
    pixelToLngLat(t) {
      return this.mapService.pixelToLngLat(t);
    }
    lngLatToPixel(t) {
      return this.mapService.lngLatToPixel(t);
    }
    containerToLngLat(t) {
      return this.mapService.containerToLngLat(t);
    }
    lngLatToContainer(t) {
      return this.mapService.lngLatToContainer(t);
    }
    destroy() {
      this.sceneService.destroy();
    }
    registerPostProcessingPass(t) {
      this.container.postProcessingPass.name = new t();
    }
    enableShaderPick() {
      this.layerService.enableShaderPick();
    }
    diasbleShaderPick() {
      this.layerService.disableShaderPick();
    }
    enableBoxSelect(t = !0) {
      this.boxSelect.enable(),
        t &&
          this.boxSelect.once("selectend", () => {
            this.disableBoxSelect();
          });
    }
    disableBoxSelect() {
      this.boxSelect.disable();
    }
    static addProtocol(t, e) {
      ag.REGISTERED_PROTOCOLS[t] = e;
    }
    static removeProtocol(t) {
      delete ag.REGISTERED_PROTOCOLS[t];
    }
    getProtocol(t) {
      return ag.REGISTERED_PROTOCOLS[t];
    }
    startAnimate() {
      this.layerService.startAnimate();
    }
    stopAnimate() {
      this.layerService.stopAnimate();
    }
    getPointSizeRange() {
      return this.sceneService.getPointSizeRange();
    }
    initComponent(t) {
      this.controlService.init({ container: AC(t) }, this.container),
        this.markerService.init(this.container),
        this.popupService.init(this.container);
    }
    initControl() {
      const { logoVisible: t, logoPosition: e } =
        this.sceneService.getSceneConfig();
      t && this.addControl(new bD({ position: e }));
    }
    initTileLayer(t) {
      t.getSource().isTile && (t.tileLayer = new IV(t));
    }
  };
const Ob = new Map(),
  Lb = new Map(),
  Db = new Map();
var Bb = function (t) {
    return t !== null && typeof t != "function" && isFinite(t.length);
  },
  LG = {}.toString,
  Hp = function (t, e) {
    return LG.call(t) === "[object " + e + "]";
  };
const ed = function (t) {
  return Hp(t, "Function");
};
var DG = function (t) {
  return t == null;
};
const qd = function (t) {
    return Array.isArray ? Array.isArray(t) : Hp(t, "Array");
  },
  fp = function (t) {
    var e = typeof t;
    return (t !== null && e === "object") || e === "function";
  };
function SA(t, e) {
  if (t) {
    var n;
    if (qd(t))
      for (var r = 0, o = t.length; r < o && ((n = e(t[r], r)), n !== !1); r++);
    else if (fp(t)) {
      for (var l in t)
        if (t.hasOwnProperty(l) && ((n = e(t[l], l)), n === !1)) break;
    }
  }
}
var G_ = function (t) {
    return typeof t == "object" && t !== null;
  },
  Z_ = function (t) {
    if (!G_(t) || !Hp(t, "Object")) return !1;
    if (Object.getPrototypeOf(t) === null) return !0;
    for (var e = t; Object.getPrototypeOf(e) !== null; )
      e = Object.getPrototypeOf(e);
    return Object.getPrototypeOf(t) === e;
  };
const ac = function (t) {
  return Hp(t, "String");
};
var BG = function (t) {
    return Hp(t, "Number");
  },
  FG = Object.values
    ? function (t) {
        return Object.values(t);
      }
    : function (t) {
        var e = [];
        return (
          SA(t, function (n, r) {
            (ed(t) && r === "prototype") || e.push(n);
          }),
          e
        );
      };
const kG = function (t) {
  return DG(t) ? "" : t.toString();
};
var UG = function (t) {
    return kG(t).toLowerCase();
  },
  wA = function (t) {
    return Hp(t, "Boolean");
  },
  _u = function (t) {
    return t === void 0;
  },
  l1 = function (t) {
    if (typeof t != "object" || t === null) return t;
    var e;
    if (qd(t)) {
      e = [];
      for (var n = 0, r = t.length; n < r; n++)
        typeof t[n] == "object" && t[n] != null
          ? (e[n] = l1(t[n]))
          : (e[n] = t[n]);
    } else {
      e = {};
      for (var o in t)
        typeof t[o] == "object" && t[o] != null
          ? (e[o] = l1(t[o]))
          : (e[o] = t[o]);
    }
    return e;
  };
const zG = function (t, e) {
  if (!ed(t)) throw new TypeError("Expected a function");
  var n = function () {
    for (var r = [], o = 0; o < arguments.length; o++) r[o] = arguments[o];
    var l = e ? e.apply(this, r) : r[0],
      a = n.cache;
    if (a.has(l)) return a.get(l);
    var h = t.apply(this, r);
    return a.set(l, h), h;
  };
  return (n.cache = new Map()), n;
};
var VG = 5;
function CA(t, e, n, r) {
  (n = n || 0), (r = r || VG);
  for (var o in e)
    if (e.hasOwnProperty(o)) {
      var l = e[o];
      l !== null && Z_(l)
        ? (Z_(t[o]) || (t[o] = {}),
          n < r ? CA(t[o], l, n + 1, r) : (t[o] = e[o]))
        : qd(l)
        ? ((t[o] = []), (t[o] = t[o].concat(l)))
        : l !== void 0 && (t[o] = l);
    }
}
var NA = function (t) {
    for (var e = [], n = 1; n < arguments.length; n++) e[n - 1] = arguments[n];
    for (var r = 0; r < e.length; r += 1) CA(t, e[r]);
    return t;
  },
  so = function (t, e) {
    if (t === e) return !0;
    if (!t || !e || ac(t) || ac(e)) return !1;
    if (Bb(t) || Bb(e)) {
      if (t.length !== e.length) return !1;
      for (var n = !0, r = 0; r < t.length && ((n = so(t[r], e[r])), !!n); r++);
      return n;
    }
    if (G_(t) || G_(e)) {
      var o = Object.keys(t),
        l = Object.keys(e);
      if (o.length !== l.length) return !1;
      for (
        var n = !0, r = 0;
        r < o.length && ((n = so(t[o[r]], e[o[r]])), !!n);
        r++
      );
      return n;
    }
    return !1;
  };
const HG = function (t, e, n) {
  for (var r = 0, o = ac(e) ? e.split(".") : e; t && r < o.length; )
    t = t[o[r++]];
  return t === void 0 || r < o.length ? n : t;
};
var jG = Object.prototype.hasOwnProperty;
const c1 = function (t, e) {
  if (t === null || !Z_(t)) return {};
  var n = {};
  return (
    SA(e, function (r) {
      jG.call(t, r) && (n[r] = t[r]);
    }),
    n
  );
};
var ng = {};
const Sv = function (t) {
  return (t = t || "g"), ng[t] ? (ng[t] += 1) : (ng[t] = 1), t + ng[t];
};
var rg;
zG(
  function (t, e) {
    e === void 0 && (e = {});
    var n = e.fontSize,
      r = e.fontFamily,
      o = e.fontWeight,
      l = e.fontStyle,
      a = e.fontVariant;
    return (
      rg || (rg = document.createElement("canvas").getContext("2d")),
      (rg.font = [l, a, o, n + "px", r].join(" ")),
      rg.measureText(ac(t) ? t : "").width
    );
  },
  function (t, e) {
    return e === void 0 && (e = {}), nA([t], FG(e)).join("");
  }
);
var G0 = {};
(function (t) {
  Object.defineProperty(t, "__esModule", { value: !0 }),
    (t.ITEM_TPL =
      t.CONTAINER_TPL =
      t.VALUE_CLASS =
      t.NAME_CLASS =
      t.LIST_ITEM_CLASS =
      t.LIST_CLASS =
      t.TITLE_CLASS =
      t.CONTAINER_CLASS =
        void 0),
    (t.CONTAINER_CLASS = "l7plot-tooltip"),
    (t.TITLE_CLASS = "l7plot-tooltip__title"),
    (t.LIST_CLASS = "l7plot-tooltip__list"),
    (t.LIST_ITEM_CLASS = "l7plot-tooltip__list-item"),
    (t.NAME_CLASS = "l7plot-tooltip__name"),
    (t.VALUE_CLASS = "l7plot-tooltip__value"),
    (t.CONTAINER_TPL = `<div class="${t.CONTAINER_CLASS}">
  <div class="${t.TITLE_CLASS}"></div>
  <ul class="${t.LIST_CLASS}"></ul>
</div>`),
    (t.ITEM_TPL = `<li class="${t.LIST_ITEM_CLASS}" data-index={index}>
  <span class="${t.NAME_CLASS}">{name}</span>
  <span class="${t.VALUE_CLASS}">{value}</span>
</li>`);
})(G0);
var Z0 = {};
(function (t) {
  Object.defineProperty(t, "__esModule", { value: !0 }),
    (t.ITEM_TPL =
      t.CONTAINER_TPL =
      t.VALUE_CLASS =
      t.MARKER_CLASS =
      t.LIST_ITEM_CLASS =
      t.LIST_CLASS =
      t.TITLE_CLASS =
      t.CONTAINER_CLASS =
        void 0),
    (t.CONTAINER_CLASS = "l7plot-legend l7plot-legend__category"),
    (t.TITLE_CLASS = "l7plot-legend__title"),
    (t.LIST_CLASS = "l7plot-legend__category-list"),
    (t.LIST_ITEM_CLASS = "l7plot-legend__list-item"),
    (t.MARKER_CLASS = "l7plot-legend__category-marker"),
    (t.VALUE_CLASS = "l7plot-legend__category-value"),
    (t.CONTAINER_TPL = `<div class="${t.CONTAINER_CLASS}">
  <div class="${t.TITLE_CLASS}"></div>
  <ul class="${t.LIST_CLASS}"></ul>
</div>`),
    (t.ITEM_TPL = `<li class="${t.LIST_ITEM_CLASS}" data-index={index}>
  <span class="${t.MARKER_CLASS}" style="background:{color}"></span>
  <span class="${t.VALUE_CLASS}">{value}</span>
</li>`);
})(Z0);
var lp = {};
(function (t) {
  Object.defineProperty(t, "__esModule", { value: !0 }),
    (t.RIBBON_TPL =
      t.CONTAINER_TPL =
      t.VALUE_RANGE_CLASS =
      t.GRADIENT_BAR_CLASS =
      t.RIBBON_CLASS =
      t.RIBBON_CONTAINER_CLASS =
      t.TITLE_CLASS =
      t.CONTAINER_CLASS =
        void 0),
    (t.CONTAINER_CLASS = "l7plot-legend l7plot-legend__continue"),
    (t.TITLE_CLASS = "l7plot-legend__title"),
    (t.RIBBON_CONTAINER_CLASS = "l7plot-legend__ribbon-container"),
    (t.RIBBON_CLASS = "l7plot-legend__ribbon"),
    (t.GRADIENT_BAR_CLASS = "l7plot-legend__gradient-bar"),
    (t.VALUE_RANGE_CLASS = "l7plot-legend__value-range"),
    (t.CONTAINER_TPL = `<div class="${t.CONTAINER_CLASS}">
  <div class="${t.TITLE_CLASS}"></div>
  <div class="${t.RIBBON_CONTAINER_CLASS}"></div>
</div>`),
    (t.RIBBON_TPL = `<div class="${t.RIBBON_CLASS}">
  <span class="${t.VALUE_RANGE_CLASS}">{min}</span>
  <div class="${t.GRADIENT_BAR_CLASS}" style="background-image: {backgroundImage}"></div>
  <span class="${t.VALUE_RANGE_CLASS}">{max}</span>
</div>`);
})(lp);
function RA(t) {
  const e = {
    point: {
      default: {
        fill: t.pointFillColor,
        size: t.pointSize,
        stroke: t.pointBorderColor,
        lineWidth: t.pointBorder,
        fillOpacity: t.pointFillOpacity,
      },
      active: { fill: t.pointActiveFillColor },
      selected: { fill: t.pointSelectedFillColor },
    },
  };
  return {
    mapStyle: t.mapStyle,
    defaultColor: t.brandColor,
    subColor: t.subColor,
    semanticRed: t.paletteSemanticRed,
    semanticGreen: t.paletteSemanticGreen,
    fontFamily: t.fontFamily,
    colors10: t.paletteQualitative10,
    colors20: t.paletteQualitative20,
    sequenceColors: t.paletteSequence,
    shapes: { point: ["circle", "square"], line: ["line"] },
    sizes: [1, 10],
    geometries: {
      point: {
        circle: {
          default: { style: e.point.default },
          active: { style: e.point.active },
          selected: { style: e.point.selected },
        },
      },
      line: {},
      polygon: {},
    },
    components: {
      legend: {
        category: {
          domStyles: {
            [Z0.CONTAINER_CLASS]: {
              visibility: "visible",
              zIndex: 1,
              backgroundColor: t.legendContainerFillColor,
              boxShadow: t.legendContainerShadow,
              borderRadius: `${t.legendContainerBorderRadius}px`,
              color: t.legendTextFillColor,
              fontFamily: t.fontFamily,
              padding: "10px",
              lineHeight: "1",
              fontSize: `${t.legendTextFontSize}px`,
            },
            [Z0.TITLE_CLASS]: {
              fontSize: "13px",
              lineHeight: "19px",
              marginBottom: "8px",
            },
            [Z0.LIST_CLASS]: { margin: "0px", padding: "0px" },
            [Z0.LIST_ITEM_CLASS]: { marginBottom: "2px" },
            [Z0.MARKER_CLASS]: { width: "10px", height: "10px" },
            [Z0.VALUE_CLASS]: { paddingLeft: "8px" },
          },
        },
        continue: {
          domStyles: {
            [lp.CONTAINER_CLASS]: {
              visibility: "visible",
              zIndex: 1,
              backgroundColor: t.legendContainerFillColor,
              boxShadow: t.legendContainerShadow,
              borderRadius: `${t.legendContainerBorderRadius}px`,
              color: t.legendTextFillColor,
              fontFamily: t.fontFamily,
              padding: "10px",
              lineHeight: 1,
              fontSize: `${t.legendTextFontSize}px`,
            },
            [lp.TITLE_CLASS]: {
              fontSize: "13px",
              lineHeight: "19px",
              marginBottom: "8px",
            },
            [lp.RIBBON_CLASS]: { display: "flex", alignItems: "center" },
            [lp.GRADIENT_BAR_CLASS]: {
              width: "140px",
              height: "14px",
              margin: "0px 5px",
            },
            [lp.VALUE_RANGE_CLASS]: { padding: "0px" },
          },
        },
      },
      tooltip: {
        domStyles: {
          [G0.CONTAINER_CLASS]: {
            visibility: "visible",
            zIndex: 999,
            transition:
              "visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",
            backgroundColor: t.tooltipContainerFillColor,
            boxShadow: t.tooltipContainerShadow,
            borderRadius: `${t.tooltipContainerBorderRadius}px`,
            color: t.tooltipTextFillColor,
            fontSize: `${t.tooltipTextFontSize}px`,
            fontFamily: t.fontFamily,
            lineHeight: t.tooltipTextLineHeight,
          },
          [G0.TITLE_CLASS]: { marginBottom: "4px" },
          [G0.LIST_CLASS]: { margin: "0px", padding: "0px" },
          [G0.LIST_ITEM_CLASS]: { marginBottom: "4px" },
          [G0.NAME_CLASS]: { color: t.tooltipItemNameFillColor },
          [G0.VALUE_CLASS]: {
            color: t.tooltipItemValueFillColor,
            marginLeft: "30px",
          },
        },
      },
      label: {
        style: {
          textAnchor: "center",
          textOffset: [0, 0],
          fill: t.labelFillColor,
          fontSize: t.labelFontSize,
          fontFamily: t.fontFamily,
          fillColorDark: t.labelFillColorDark,
          fillColorLight: t.labelFillColorLight,
        },
      },
    },
  };
}
const j0 = {
    100: "#000",
    95: "#0D0D0D",
    85: "#262626",
    65: "#595959",
    45: "#8C8C8C",
    25: "#BFBFBF",
    15: "#D9D9D9",
    6: "#F0F0F0",
  },
  WG = {
    100: "#FFFFFF",
    95: "#F2F2F2",
    85: "#D9D9D9",
    65: "#A6A6A6",
    45: "#737373",
    25: "#404040",
    15: "#262626",
    6: "#0F0F0F",
  },
  XG = [
    "#5B8FF9",
    "#5AD8A6",
    "#5D7092",
    "#F6BD16",
    "#6F5EF9",
    "#6DC8EC",
    "#945FB9",
    "#FF9845",
    "#1E9493",
    "#FF99C3",
  ],
  GG = [
    "#5B8FF9",
    "#CDDDFD",
    "#5AD8A6",
    "#CDF3E4",
    "#5D7092",
    "#CED4DE",
    "#F6BD16",
    "#FCEBB9",
    "#6F5EF9",
    "#D3CEFD",
    "#6DC8EC",
    "#D3EEF9",
    "#945FB9",
    "#DECFEA",
    "#FF9845",
    "#FFE0C7",
    "#1E9493",
    "#BBDEDE",
    "#FF99C3",
    "#FFE0ED",
  ],
  ZG = [
    "#B8E1FF",
    "#9AC5FF",
    "#7DAAFF",
    "#5B8FF9",
    "#3D76DD",
    "#085EC0",
    "#0047A5",
    "#00318A",
    "#001D70",
  ],
  IA = (t = {}) => {
    const {
        mapStyle: e = "light",
        subColor: n = "rgba(0,0,0,0.05)",
        paletteQualitative10: r = XG,
        paletteQualitative20: o = GG,
        paletteSemanticRed: l = "#F4664A",
        paletteSemanticGreen: a = "#30BF78",
        paletteSemanticYellow: h = "#FAAD14",
        paletteSequence: f = ZG,
        fontFamily:
          v = `"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,
      } = t,
      { brandColor: E = r[0] } = t;
    return {
      mapStyle: e,
      brandColor: E,
      subColor: n,
      paletteQualitative10: r,
      paletteQualitative20: o,
      paletteSemanticRed: l,
      paletteSemanticGreen: a,
      paletteSemanticYellow: h,
      paletteSequence: f,
      fontFamily: v,
      legendContainerFillColor: "rgba(255, 255, 255, 0.85)",
      legendContainerShadow: "0 2px 8px 0 rgba(166, 166, 166, 0.20)",
      legendContainerBorderRadius: 2,
      legendTextFillColor: j0[65],
      legendTextFontSize: 12,
      tooltipContainerFillColor: "rgba(255, 255, 255, 0.9)",
      tooltipContainerShadow: "rgb(0 0 0 / 16%) 0px 6px 12px 0px",
      tooltipContainerBorderRadius: 2,
      tooltipTextFillColor: j0[65],
      tooltipItemNameFillColor: j0[65],
      tooltipItemValueFillColor: j0[65],
      tooltipTextFontSize: 12,
      tooltipTextLineHeight: "20px",
      labelFillColor: j0[65],
      labelFillColorDark: "#2c3542",
      labelFillColorLight: "#ffffff",
      labelFontSize: 12,
      pointFillColor: E,
      pointFillOpacity: 0.95,
      pointSize: 4,
      pointBorder: 1,
      pointBorderColor: WG[100],
      pointActiveBorderColor: j0[100],
      pointSelectedBorderColor: j0[100],
    };
  };
IA();
const YG = {
    100: "#000",
    95: "#0D0D0D",
    85: "#262626",
    65: "#595959",
    45: "#8C8C8C",
    25: "#BFBFBF",
    15: "#D9D9D9",
    6: "#F0F0F0",
  },
  W0 = {
    100: "#FFFFFF",
    95: "#F2F2F2",
    85: "#D9D9D9",
    65: "#A6A6A6",
    45: "#737373",
    25: "#404040",
    15: "#262626",
    6: "#0F0F0F",
  },
  Fb = [
    "#5B8FF9",
    "#5AD8A6",
    "#5D7092",
    "#F6BD16",
    "#E86452",
    "#6DC8EC",
    "#945FB9",
    "#FF9845",
    "#1E9493",
    "#FF99C3",
  ],
  qG = [
    "#5B8FF9",
    "#CDDDFD",
    "#5AD8A6",
    "#CDF3E4",
    "#5D7092",
    "#CED4DE",
    "#F6BD16",
    "#FCEBB9",
    "#E86452",
    "#F8D0CB",
    "#6DC8EC",
    "#D3EEF9",
    "#945FB9",
    "#DECFEA",
    "#FF9845",
    "#FFE0C7",
    "#1E9493",
    "#BBDEDE",
    "#FF99C3",
    "#FFE0ED",
  ],
  $G = [
    "#B8E1FF",
    "#9AC5FF",
    "#7DAAFF",
    "#5B8FF9",
    "#3D76DD",
    "#085EC0",
    "#0047A5",
    "#00318A",
    "#001D70",
  ],
  MA = (t = {}) => {
    const {
        mapStyle: e = "dark",
        subColor: n = "rgba(255,255,255,0.05)",
        paletteQualitative10: r = Fb,
        paletteQualitative20: o = qG,
        paletteSemanticRed: l = "#F4664A",
        paletteSemanticGreen: a = "#30BF78",
        paletteSemanticYellow: h = "#FAAD14",
        paletteSequence: f = $G,
        fontFamily:
          v = `"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,
      } = t,
      { brandColor: E = r[0] } = t;
    return {
      mapStyle: e,
      brandColor: E,
      subColor: n,
      paletteQualitative10: r,
      paletteQualitative20: o,
      paletteSemanticRed: l,
      paletteSemanticGreen: a,
      paletteSemanticYellow: h,
      paletteSequence: f,
      fontFamily: v,
      legendContainerFillColor: "rgba(31, 31, 31, 0.85)",
      legendContainerShadow: "0 2px 8px 0 rgba(166, 166, 166, 0.20)",
      legendContainerBorderRadius: 2,
      legendTextFillColor: W0[65],
      legendTextFontSize: 12,
      tooltipContainerFillColor: "rgba(31, 31, 31, 0.9)",
      tooltipContainerShadow: "0px 2px 4px rgba(0, 0, 0, 0.5)",
      tooltipContainerBorderRadius: 2,
      tooltipTextFillColor: W0[65],
      tooltipItemNameFillColor: W0[65],
      tooltipItemValueFillColor: W0[65],
      tooltipTextFontSize: 12,
      tooltipTextLineHeight: "20px",
      labelFillColor: W0[65],
      labelFillColorDark: "#2c3542",
      labelFillColorLight: "#ffffff",
      labelFontSize: 12,
      pointFillColor: Fb[0],
      pointFillOpacity: 0.95,
      pointSize: 4,
      pointBorder: 1,
      pointBorderColor: YG[100],
      pointActiveBorderColor: W0[100],
      pointSelectedBorderColor: W0[100],
    };
  };
MA();
function PA(t) {
  const { styleSheet: e = {} } = t,
    n = rl(t, ["styleSheet"]),
    r = IA(e);
  return NA({}, RA(r), n);
}
function KG(t) {
  const { styleSheet: e = {} } = t,
    n = rl(t, ["styleSheet"]),
    r = MA(e);
  return NA({}, RA(r), n);
}
const kb = PA({}),
  QG = KG({}),
  Ub = { default: kb, light: kb, dark: QG };
function Y_(t = "default") {
  return HG(Ub, UG(t), Ub.default);
}
var zb;
(function (t) {
  (t[(t.solid = 0)] = "solid"), (t[(t.dash = 1)] = "dash");
})(zb || (zb = {}));
var q_;
(function (t) {
  (t.TextLayer = "textLayer"),
    (t.DotLayer = "dotLayer"),
    (t.IconLayer = "iconLayer"),
    (t.DotDensity = "dotDensityLayer"),
    (t.ColumnLayer = "columnLayer"),
    (t.HeatmapLayer = "heatmapLayer"),
    (t.GridLayer = "gridLayer"),
    (t.HexbinLayer = "hexbinLayer"),
    (t.LinesLayer = "linesLayer"),
    (t.PathLayer = "pathLayer"),
    (t.ArcLayer = "arcLayer"),
    (t.AreaLayer = "areaLayer"),
    (t.PrismLayer = "prismLayer");
})(q_ || (q_ = {}));
var Oc;
(function (t) {
  (t.Map = "map"),
    (t.Amap = "amap"),
    (t.AmapV1 = "amapv1"),
    (t.AmapV2 = "amapv2"),
    (t.Mapbox = "mapbox");
})(Oc || (Oc = {}));
var $_;
(function (t) {
  (t.Dot = "dot"),
    (t.DotDensity = "dotDensity"),
    (t.Heatmap = "heatmap"),
    (t.Grid = "grid"),
    (t.Hexbin = "hexbin"),
    (t.Path = "path"),
    (t.Flow = "flow"),
    (t.Area = "area"),
    (t.Choropleth = "choropleth");
})($_ || ($_ = {}));
var JG = "*",
  wv = (function () {
    function t() {
      this._events = {};
    }
    return (
      (t.prototype.on = function (e, n, r) {
        return (
          this._events[e] || (this._events[e] = []),
          this._events[e].push({ callback: n, once: !!r }),
          this
        );
      }),
      (t.prototype.once = function (e, n) {
        return this.on(e, n, !0);
      }),
      (t.prototype.emit = function (e) {
        for (var n = this, r = [], o = 1; o < arguments.length; o++)
          r[o - 1] = arguments[o];
        var l = this._events[e] || [],
          a = this._events[JG] || [],
          h = function (f) {
            for (var v = f.length, E = 0; E < v; E++)
              if (f[E]) {
                var x = f[E],
                  T = x.callback,
                  N = x.once;
                N &&
                  (f.splice(E, 1),
                  f.length === 0 && delete n._events[e],
                  v--,
                  E--),
                  T.apply(n, r);
              }
          };
        h(l), h(a);
      }),
      (t.prototype.off = function (e, n) {
        if (!e) this._events = {};
        else if (!n) delete this._events[e];
        else {
          for (var r = this._events[e] || [], o = r.length, l = 0; l < o; l++)
            r[l].callback === n && (r.splice(l, 1), o--, l--);
          r.length === 0 && delete this._events[e];
        }
        return this;
      }),
      (t.prototype.getEvents = function () {
        return this._events;
      }),
      t
    );
  })(),
  eZ = {}.toString,
  Cv = function (t, e) {
    return eZ.call(t) === "[object " + e + "]";
  };
const OA = function (t) {
    return Cv(t, "Function");
  },
  LA = function (t) {
    return Array.isArray ? Array.isArray(t) : Cv(t, "Array");
  },
  tZ = function (t) {
    var e = typeof t;
    return (t !== null && e === "object") || e === "function";
  };
function K_(t, e) {
  if (t) {
    var n;
    if (LA(t))
      for (var r = 0, o = t.length; r < o && ((n = e(t[r], r)), n !== !1); r++);
    else if (tZ(t)) {
      for (var l in t)
        if (t.hasOwnProperty(l) && ((n = e(t[l], l)), n === !1)) break;
    }
  }
}
var nZ = function (t) {
    return typeof t == "object" && t !== null;
  },
  Vb = function (t) {
    if (!nZ(t) || !Cv(t, "Object")) return !1;
    if (Object.getPrototypeOf(t) === null) return !0;
    for (var e = t; Object.getPrototypeOf(e) !== null; )
      e = Object.getPrototypeOf(e);
    return Object.getPrototypeOf(t) === e;
  };
const W1 = function (t) {
  return Cv(t, "String");
};
var rZ = Object.values
  ? function (t) {
      return Object.values(t);
    }
  : function (t) {
      var e = [];
      return (
        K_(t, function (n, r) {
          (OA(t) && r === "prototype") || e.push(n);
        }),
        e
      );
    };
function iy(t, e) {
  return !t || !e
    ? t
    : t.replace(/\\?\{([^{}]+)\}/g, function (n, r) {
        return n.charAt(0) === "\\" ? n.slice(1) : e[r] === void 0 ? "" : e[r];
      });
}
const iZ = function (t, e) {
  if (!OA(t)) throw new TypeError("Expected a function");
  var n = function () {
    for (var r = [], o = 0; o < arguments.length; o++) r[o] = arguments[o];
    var l = e ? e.apply(this, r) : r[0],
      a = n.cache;
    if (a.has(l)) return a.get(l);
    var h = t.apply(this, r);
    return a.set(l, h), h;
  };
  return (n.cache = new Map()), n;
};
var aZ = 5;
function DA(t, e, n, r) {
  (n = n || 0), (r = r || aZ);
  for (var o in e)
    if (e.hasOwnProperty(o)) {
      var l = e[o];
      l !== null && Vb(l)
        ? (Vb(t[o]) || (t[o] = {}),
          n < r ? DA(t[o], l, n + 1, r) : (t[o] = e[o]))
        : LA(l)
        ? ((t[o] = []), (t[o] = t[o].concat(l)))
        : l !== void 0 && (t[o] = l);
    }
}
var oZ = function (t) {
  for (var e = [], n = 1; n < arguments.length; n++) e[n - 1] = arguments[n];
  for (var r = 0; r < e.length; r += 1) DA(t, e[r]);
  return t;
};
const R1 = oZ;
var ig;
iZ(
  function (t, e) {
    e === void 0 && (e = {});
    var n = e.fontSize,
      r = e.fontFamily,
      o = e.fontWeight,
      l = e.fontStyle,
      a = e.fontVariant;
    return (
      ig || (ig = document.createElement("canvas").getContext("2d")),
      (ig.font = [l, a, o, n + "px", r].join(" ")),
      ig.measureText(W1(t) ? t : "").width
    );
  },
  function (t, e) {
    return e === void 0 && (e = {}), nA([t], rZ(e)).join("");
  }
);
var t1, X2, BA, Q_;
function sZ() {
  (t1 = document.createElement("table")),
    (X2 = document.createElement("tr")),
    (BA = /^\s*<(\w+|!)[^>]*>/),
    (Q_ = {
      tr: document.createElement("tbody"),
      tbody: t1,
      thead: t1,
      tfoot: t1,
      td: X2,
      th: X2,
      "*": document.createElement("div"),
    });
}
function lZ(t) {
  t1 || sZ();
  var e = BA.test(t) && RegExp.$1;
  (!e || !(e in Q_)) && (e = "*");
  var n = Q_[e];
  (t = typeof t == "string" ? t.replace(/(^\s*)|(\s*$)/g, "") : t),
    (n.innerHTML = "" + t);
  var r = n.childNodes[0];
  return r && n.contains(r) && n.removeChild(r), r;
}
function Ms(t, e) {
  if (t) for (var n in e) e.hasOwnProperty(n) && (t.style[n] = e[n]);
  return t;
}
const ay = {
    fontFamily: `
  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,
  },
  oy = "l7plot-tooltip",
  sy = "l7plot-tooltip__title",
  ly = "l7plot-tooltip__list",
  FA = "l7plot-tooltip__list-item",
  kA = "l7plot-tooltip__name",
  UA = "l7plot-tooltip__value",
  cZ = `<div class="${oy}">
  <div class="${sy}"></div>
  <ul class="${ly}"></ul>
</div>`,
  Hb = `<li class="${FA}" data-index={index}>
  <span class="${kA}">{name}</span>
  <span class="${UA}">{value}</span>
</li>`,
  uZ = {
    [oy]: {
      visibility: "visible",
      zIndex: 999,
      transition:
        "visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",
      backgroundColor: "rgba(255, 255, 255, 0.9)",
      boxShadow: "rgb(0 0 0 / 16%) 0px 6px 12px 0px",
      borderRadius: "2px",
      color: "rgb(87, 87, 87)",
      fontSize: "12px",
      fontFamily: ay.fontFamily,
      lineHeight: "20px",
      padding: "10px 10px 6px 10px",
    },
    [sy]: { marginBottom: "4px" },
    [ly]: { margin: "0px", listStyleType: "none", padding: "0px" },
    [FA]: {
      listStyleType: "none",
      marginBottom: "4px",
      whiteSpace: "nowrap",
      display: "flex",
      justifyContent: "space-between",
    },
    [kA]: {},
    [UA]: { marginLeft: "30px" },
  };
function dZ(t, e) {
  return !!t.className.match(new RegExp(`(\\s|^)${e}(\\s|$)`));
}
function cy(t) {
  const e = t.childNodes,
    n = e.length;
  for (let r = n - 1; r >= 0; r--) t.removeChild(e[r]);
}
class uy {
  constructor(e) {
    (this.destroyed = !1),
      (this.options = R1({}, this.getDefaultOptions(), e)),
      (this.container = this.initContainer()),
      this.initDom(),
      this.applyStyles(),
      this.initEvent(),
      this.initCapture(),
      this.initVisible(),
      this.render();
  }
  getDefaultOptions() {
    return {
      name: "",
      containerTpl: "<div></div>",
      visible: !0,
      capture: !0,
      domStyles: {},
    };
  }
  getContainer() {
    return this.container;
  }
  getParentContainer() {
    const e = this.options.parent;
    let n;
    if (!e) return n;
    if (W1(e)) {
      const r = document.getElementById(e);
      if (r) n = r;
      else throw new Error(`No parent id ${e}`);
    } else n = e;
    return n;
  }
  initContainer() {
    const e = this.createDom(this.options.containerTpl),
      n = this.getParentContainer();
    return n && n.appendChild(e), e;
  }
  initVisible() {
    this.options.visible ? this.show() : this.hide();
  }
  initCapture() {
    this.setCapture(this.options.capture);
  }
  update(e) {
    (this.options = R1({}, this.options, e)),
      this.updateInner(e),
      this.afterUpdate(e);
  }
  updateInner(e) {
    e.domStyles && this.applyStyles();
  }
  afterUpdate(e) {
    e.capture && this.setCapture(e.capture);
  }
  setCapture(e) {
    const n = this.container,
      r = e ? "auto" : "none";
    n.style.pointerEvents = r;
  }
  applyStyles() {
    const e = this.options.domStyles;
    if (!e) return;
    const n = this.container;
    this.applyChildrenStyles(n, e);
    const r = this.options.className;
    if (r && dZ(n, r)) {
      const o = e[r];
      Ms(n, o);
    }
  }
  applyChildrenStyles(e, n) {
    K_(n, (r, o) => {
      const l = e.getElementsByClassName(o);
      K_(l, (a) => {
        Ms(a, r);
      });
    });
  }
  applyStyle(e, n) {
    const r = this.options.domStyles;
    r && Ms(n, r[e]);
  }
  createDom(e = "<div></div>") {
    return lZ(e);
  }
  removeDom() {
    const e = this.container;
    e && e.parentNode && e.parentNode.removeChild(e);
  }
  destroy() {
    this.removeEvent(), this.removeDom(), (this.destroyed = !0);
  }
}
let hZ = class extends uy {
  getDefaultOptions() {
    return R1({}, super.getDefaultOptions(), {
      id: "l7plot-tooltip",
      name: "l7plot-tooltip",
      title: "",
      showTitle: !0,
      items: [],
      containerTpl: cZ,
      itemTpl: Hb,
      domStyles: uZ,
      className: oy,
    });
  }
  initContainer() {
    const { customContent: e } = this.options;
    if (e) {
      const n = this.getHtmlContentNode(e),
        r = this.getParentContainer();
      return r && r.appendChild(n), n;
    } else return super.initContainer();
  }
  initDom() {
    this.cacheDoms();
  }
  initEvent() {}
  removeEvent() {}
  cacheDoms() {
    const e = this.container,
      n = e.getElementsByClassName(sy)[0],
      r = e.getElementsByClassName(ly)[0];
    (this.titleDom = n), (this.listDom = r);
  }
  render() {
    this.options.customContent
      ? this.renderCustomContent(this.options.customContent)
      : (this.resetTitle(), this.renderItems());
  }
  show() {
    const e = this.container;
    !e || this.destroyed || Ms(e, { visibility: "visible" });
  }
  hide() {
    const e = this.container;
    !e || this.destroyed || Ms(e, { visibility: "hidden" });
  }
  updateInner(e) {
    this.options.customContent
      ? this.renderCustomContent(this.options.customContent)
      : (e.title && this.resetTitle(), e.items && this.renderItems()),
      super.updateInner(e);
  }
  renderCustomContent(e) {
    const n = this.container.parentNode,
      r = this.getHtmlContentNode(e),
      o = this.container;
    n && n.replaceChild(r, o), (this.container = r), this.applyStyles();
  }
  getHtmlContentNode(e) {
    let n;
    const r = e(this.options.title || "", this.options.items);
    return W1(r) ? (n = this.createDom(r)) : (n = r), n;
  }
  resetTitle() {
    const e = this.options.title;
    this.options.showTitle && e
      ? (this.showTitle(), this.setTitle(e))
      : this.hideTitle();
  }
  showTitle() {
    const e = this.titleDom;
    e && Ms(e, { display: "block" });
  }
  hideTitle() {
    const e = this.titleDom;
    e && Ms(e, { display: "none" });
  }
  setTitle(e) {
    const n = this.titleDom;
    n && (n.innerHTML = e);
  }
  renderItems() {
    this.clearItemDoms();
    const e = this.options.items,
      n = this.options.itemTpl || Hb,
      r = this.listDom;
    r &&
      (e.forEach((o) => {
        const l = Object.assign({}, o),
          a = iy(n, l),
          h = this.createDom(a);
        r.appendChild(h);
      }),
      this.applyChildrenStyles(r, this.options.domStyles));
  }
  clearItemDoms() {
    this.listDom && cy(this.listDom);
  }
  clear() {
    this.setTitle(""), this.clearItemDoms();
  }
};
const dy = "l7plot-legend l7plot-legend__category",
  hy = "l7plot-legend__title",
  py = "l7plot-legend__category-list",
  zA = "l7plot-legend__list-item",
  VA = "l7plot-legend__category-marker",
  HA = "l7plot-legend__category-value",
  pZ = `<div class="${dy}">
  <div class="${hy}"></div>
  <ul class="${py}"></ul>
</div>`,
  jb = `<li class="${zA}" data-index={index}>
  <span class="${VA}" style="background:{color}"></span>
  <span class="${HA}">{value}</span>
</li>`,
  fZ = {
    [dy]: {
      visibility: "visible",
      zIndex: 1,
      backgroundColor: "rgba(255, 255, 255, 0.9)",
      boxShadow: "rgb(0 0 0 / 16%) 0px 6px 12px 0px",
      borderRadius: "2px",
      color: "rgb(87, 87, 87)",
      fontFamily: ay.fontFamily,
      padding: "10px 10px 6px 10px",
      lineHeight: 1,
      fontSize: "12px",
    },
    [hy]: { fontSize: "13px", lineHeight: "19px", marginBottom: "8px" },
    [py]: { margin: "0px", listStyleType: "none", padding: "0px" },
    [zA]: {
      listStyleType: "none",
      display: "flex",
      alignItems: "center",
      marginBottom: "2px",
    },
    [VA]: { width: "10px", height: "10px" },
    [HA]: { paddingLeft: "8px" },
  };
class mZ extends uy {
  getDefaultOptions() {
    return R1({}, super.getDefaultOptions(), {
      id: "l7plot-category-legend",
      name: "l7plot-category-legend",
      title: "",
      items: [],
      containerTpl: pZ,
      itemTpl: jb,
      domStyles: fZ,
      className: dy,
    });
  }
  initContainer() {
    const { customContent: e } = this.options;
    if (e) {
      const n = this.getHtmlContentNode(e),
        r = this.getParentContainer();
      return r && r.appendChild(n), n;
    } else return super.initContainer();
  }
  initDom() {
    this.cacheDoms();
  }
  initEvent() {}
  removeEvent() {}
  cacheDoms() {
    const e = this.container,
      n = e.getElementsByClassName(hy)[0],
      r = e.getElementsByClassName(py)[0];
    (this.titleDom = n), (this.listDom = r);
  }
  render() {
    this.options.customContent
      ? this.renderCustomContent(this.options.customContent)
      : (this.resetTitle(), this.renderItems());
  }
  show() {
    const e = this.container;
    !e || this.destroyed || Ms(e, { visibility: "visible" });
  }
  hide() {
    const e = this.container;
    !e || this.destroyed || Ms(e, { visibility: "hidden" });
  }
  updateInner(e) {
    this.options.customContent
      ? this.renderCustomContent(this.options.customContent)
      : (e.title && this.resetTitle(), e.items && this.renderItems()),
      super.updateInner(e);
  }
  renderCustomContent(e) {
    const n = this.container.parentNode,
      r = this.getHtmlContentNode(e),
      o = this.container;
    n && n.replaceChild(r, o), (this.container = r), this.applyStyles();
  }
  getHtmlContentNode(e) {
    let n;
    const r = e(this.options.title || "", this.options.items);
    return W1(r) ? (n = this.createDom(r)) : (n = r), n;
  }
  resetTitle() {
    const e = this.options.title;
    e ? (this.showTitle(), this.setTitle(e)) : this.hideTitle();
  }
  showTitle() {
    const e = this.titleDom;
    e && Ms(e, { display: "block" });
  }
  hideTitle() {
    const e = this.titleDom;
    e && Ms(e, { display: "none" });
  }
  setTitle(e) {
    const n = this.titleDom;
    n && (n.innerHTML = e);
  }
  renderItems() {
    this.clearItemDoms();
    const e =
        this.options.items.length > 30
          ? this.options.items.slice(0, 30)
          : this.options.items,
      n = this.options.itemTpl || jb,
      r = this.listDom;
    r &&
      (e.forEach((o) => {
        const a =
            o.value === ""
              ? "—"
              : Array.isArray(o.value)
              ? o.value.join(" - ")
              : o.value,
          h = Object.assign(Object.assign({}, o), { value: a }),
          f = iy(n, h),
          v = this.createDom(f);
        r.appendChild(v);
      }),
      this.applyChildrenStyles(r, this.options.domStyles));
  }
  clearItemDoms() {
    this.listDom && cy(this.listDom);
  }
  clear() {
    this.setTitle(""), this.clearItemDoms();
  }
}
const fy = "l7plot-legend l7plot-legend__continue",
  gy = "l7plot-legend__title",
  jA = "l7plot-legend__ribbon-container",
  WA = "l7plot-legend__ribbon",
  XA = "l7plot-legend__gradient-bar",
  J_ = "l7plot-legend__value-range",
  gZ = `<div class="${fy}">
  <div class="${gy}"></div>
  <div class="${jA}"></div>
</div>`,
  Wb = `<div class="${WA}">
  <span class="${J_}">{min}</span>
  <div class="${XA}" style="background-image: {backgroundImage}"></div>
  <span class="${J_}">{max}</span>
</div>`,
  vZ = {
    [fy]: {
      visibility: "visible",
      zIndex: 1,
      backgroundColor: "rgba(255, 255, 255, 0.9)",
      boxShadow: "rgb(0 0 0 / 16%) 0px 6px 12px 0px",
      borderRadius: "2px",
      color: "rgb(87, 87, 87)",
      fontFamily: ay.fontFamily,
      padding: "10px",
      lineHeight: 1,
      fontSize: "12px",
    },
    [gy]: { fontSize: "13px", lineHeight: "19px", marginBottom: "8px" },
    [WA]: { display: "flex", alignItems: "center" },
    [XA]: { width: "140px", height: "14px", margin: "0px 5px" },
    [J_]: { padding: "0px" },
  };
class _Z extends uy {
  getDefaultOptions() {
    return R1({}, super.getDefaultOptions(), {
      id: "l7plot-continue-legend",
      name: "l7plot-continue-legend",
      title: "",
      containerTpl: gZ,
      ribbonTpl: Wb,
      domStyles: vZ,
      className: fy,
    });
  }
  initContainer() {
    const { customContent: e } = this.options;
    if (e) {
      const n = this.getHtmlContentNode(e),
        r = this.getParentContainer();
      return r && r.appendChild(n), n;
    } else return super.initContainer();
  }
  initDom() {
    this.cacheDoms();
  }
  initEvent() {}
  removeEvent() {}
  cacheDoms() {
    const e = this.container,
      n = e.getElementsByClassName(gy)[0],
      r = e.getElementsByClassName(jA)[0];
    (this.titleDom = n), (this.ribbonContainerDom = r);
  }
  render() {
    this.options.customContent
      ? this.renderCustomContent(this.options.customContent)
      : (this.resetTitle(), this.renderRibbon());
  }
  show() {
    const e = this.container;
    !e || this.destroyed || Ms(e, { visibility: "visible" });
  }
  hide() {
    const e = this.container;
    !e || this.destroyed || Ms(e, { visibility: "hidden" });
  }
  updateInner(e) {
    this.options.customContent
      ? this.renderCustomContent(this.options.customContent)
      : (e.title && this.resetTitle(), e.colors && this.renderRibbon()),
      super.updateInner(e);
  }
  renderCustomContent(e) {
    const n = this.container.parentNode,
      r = this.getHtmlContentNode(e),
      o = this.container;
    n && n.replaceChild(r, o), (this.container = r), this.applyStyles();
  }
  getHtmlContentNode(e) {
    let n;
    const r = e(
      this.options.title || "",
      this.options.min,
      this.options.max,
      this.options.colors
    );
    return W1(r) ? (n = this.createDom(r)) : (n = r), n;
  }
  resetTitle() {
    const e = this.options.title;
    e ? (this.showTitle(), this.setTitle(e)) : this.hideTitle();
  }
  showTitle() {
    const e = this.titleDom;
    e && Ms(e, { display: "block" });
  }
  hideTitle() {
    const e = this.titleDom;
    e && Ms(e, { display: "none" });
  }
  setTitle(e) {
    const n = this.titleDom;
    n && (n.innerHTML = e);
  }
  renderRibbon() {
    this.clearRibbonContainerDoms();
    const { min: e, max: n, colors: r, ribbonTpl: o = Wb } = this.options,
      l = this.ribbonContainerDom;
    if (l) {
      const a = `linear-gradient(to right, ${r.join(", ")})`,
        f = iy(o, { min: e, max: n, backgroundImage: a }),
        v = this.createDom(f);
      l.appendChild(v), this.applyChildrenStyles(l, this.options.domStyles);
    }
  }
  clearRibbonContainerDoms() {
    this.ribbonContainerDom && cy(this.ribbonContainerDom);
  }
  clear() {
    this.setTitle(""), this.clearRibbonContainerDoms();
  }
}
class yZ extends r0 {
  constructor(e) {
    super(e),
      (this.legendComponents = []),
      (this.options = e),
      (this.legendComponents = this.initLegendComponents(e.items));
  }
  initLegendComponents(e) {
    const n = [];
    for (let r = 0; r < e.length; r++) {
      const o = e[r];
      if (o.type === "category") {
        const l = new mZ({
          title: o.options.title,
          items: o.options.items,
          className: o.options.className,
          customContent: o.options.customContent,
          domStyles: o.options.domStyles,
        });
        n.push(l);
      } else if (o.type === "continue") {
        const l = new _Z({
          title: o.options.title,
          min: o.options.min,
          max: o.options.max,
          colors: o.options.colors,
          className: o.options.className,
          customContent: o.options.customContent,
          domStyles: o.options.domStyles,
        });
        n.push(l);
      }
    }
    return n;
  }
  getDefaultOptions() {
    return { position: "bottomleft" };
  }
  onAdd() {
    const e = window.document.createElement("div");
    return (
      (e.className = "l7plot-legend-container"),
      this.legendComponents.forEach((n) => {
        const r = n.getContainer();
        e.appendChild(r);
      }),
      e
    );
  }
  onRemove() {
    this.legendComponents.forEach((e) => {
      e.destroy();
    });
  }
}
const xZ = 5,
  bZ = new Object().toString,
  GA = (t, e) => bZ.call(t) === "[object " + e + "]",
  EZ = (t) => GA(t, "Array"),
  AZ = (t) => typeof t == "object" && t !== null,
  Xb = (t) => {
    if (!AZ(t) || !GA(t, "Object")) return !1;
    let e = t;
    for (; Object.getPrototypeOf(e) !== null; ) e = Object.getPrototypeOf(e);
    return Object.getPrototypeOf(t) === e;
  },
  ZA = (t, e, n, r) => {
    (n = n || 0), (r = r || xZ);
    for (const o in e)
      if (Object.prototype.hasOwnProperty.call(e, o)) {
        const l = e[o];
        l
          ? Xb(l)
            ? (Xb(t[o]) || (t[o] = {}),
              n < r ? ZA(t[o], l, n + 1, r) : (t[o] = e[o]))
            : EZ(l)
            ? ((t[o] = []), (t[o] = t[o].concat(l)))
            : (t[o] = l)
          : (t[o] = l);
      }
  },
  oo = (t, ...e) => {
    for (let n = 0; n < e.length; n += 1) ZA(t, e[n]);
    return t;
  },
  TZ = ["mousemove", "click"];
class SZ extends wv {
  constructor(e, n, r) {
    super(),
      (this.currentVisible = !1),
      (this.interactionTriggerHander = (x) => {
        const { feature: T, featureId: N } = x,
          { title: I, customTitle: L, items: F, customItems: X } = this.options,
          K =
            T.type === "Feature" && T.geometry && T.properties
              ? T.properties
              : T;
        let Q = [];
        if (X) {
          const Se = X(T);
          if (Array.isArray(Se)) Q = Se;
          else throw new Error("customItems return array");
        } else
          F &&
            F.forEach((Se) => {
              if (ac(Se)) {
                const ue = Se.split(".").pop() || Se,
                  ke = n4(K, Se);
                ke !== void 0 && Q.push({ name: ue, value: ke });
              } else {
                const { field: ue, alias: ke, customValue: ut } = Se,
                  Ve = ke || ue.split(".").pop() || ue,
                  Ae = n4(K, ue);
                Ae !== void 0 &&
                  Q.push({ name: Ve, value: ut ? ut(Ae, K, N) : Ae });
              }
            });
        const ee = { title: L ? L(K) : I, items: Q };
        this.updateTooltip(x, ee);
      }),
      (this.interactionUntriggerHander = () => {
        this.hideTooltip();
      }),
      (this.scene = e),
      (this.interactionLayers = n),
      (this.options = oo({}, this.getDefaultOptions(), r));
    const {
      offsets: o,
      title: l,
      showTitle: a,
      customContent: h,
      domStyles: f,
      anchor: v,
      className: E,
    } = this.options;
    (this.marker = new vx({ offsets: o, anchor: v, draggable: !1 })),
      (this.tooltipComponent = new hZ({
        title: l,
        showTitle: a,
        items: [],
        customContent: h,
        domStyles: f,
        className: E,
      })),
      this.setComponent(),
      this.initInteractionEvent();
  }
  getDefaultOptions() {
    return {
      showTitle: !0,
      showComponent: !0,
      items: [],
      offsets: [15, 0],
      trigger: "mousemove",
      anchor: uv["TOP-LEFT"],
    };
  }
  update(e) {
    this.marker.remove(),
      (this.currentVisible = !1),
      (this.options = oo({}, this.options, e));
    const {
      offsets: n,
      showTitle: r,
      customContent: o,
      domStyles: l,
      anchor: a,
      className: h,
    } = this.options;
    (this.marker = new vx({ offsets: n, anchor: a, draggable: !1 })),
      this.tooltipComponent.update({
        showTitle: r,
        customContent: o,
        domStyles: l,
        className: h,
      }),
      this.setComponent();
  }
  initInteractionEvent() {
    const e = this.options.trigger || "mousemove";
    if (!TZ.includes(e)) throw new Error("trigger is mousemove or click");
    this.interactionLayers.forEach(({ layer: n }) => {
      n.on(e, this.interactionTriggerHander),
        n.on(`un${e}`, this.interactionUntriggerHander);
    });
  }
  unBindInteractionEvent() {
    const e = this.options.trigger || "mousemove";
    this.interactionLayers.forEach(({ layer: n }) => {
      n.off(e, this.interactionTriggerHander),
        n.off(`un${e}`, this.interactionUntriggerHander);
    });
  }
  updateTooltip(e, n) {
    const { lngLat: r, x: o, y: l } = e;
    if (
      (this.options.showComponent &&
        (this.updateComponent(n), this.setPostion(r)),
      this.currentVisible)
    ) {
      const a = { type: "tooltip:change", data: n, lngLat: r, x: o, y: l };
      this.emit("tooltip:change", a);
    } else {
      this.showTooltip();
      const a = { type: "tooltip:show", data: n, lngLat: r, x: o, y: l };
      this.emit("tooltip:show", a);
    }
  }
  showTooltip() {
    this.currentVisible ||
      (this.options.showComponent && this.scene.addMarker(this.marker),
      (this.currentVisible = !0));
  }
  hideTooltip() {
    if (!this.currentVisible) return;
    this.options.showComponent && this.marker.remove(),
      (this.currentVisible = !1);
    const e = { type: "tooltip:hide" };
    this.emit("tooltip:hide", e);
  }
  updateComponent(e) {
    so(this.lastComponentOptions, e) ||
      (this.tooltipComponent.update(e), (this.lastComponentOptions = e));
  }
  setComponent() {
    const e = this.tooltipComponent.getContainer(),
      n = window.document.createElement("div");
    (n.style.cursor = "auto"),
      (n.style.userSelect = "text"),
      (n.className = "l7plot-tooltip-container"),
      ["mousemove", "mousedown", "mouseup", "click", "dblclick"].forEach(
        (r) => {
          n.addEventListener(r, (o) => o.stopPropagation());
        }
      ),
      n.appendChild(e),
      this.marker.setElement(n);
  }
  setPostion(e) {
    this.marker.setLnglat(e);
  }
  destroy() {
    this.unBindInteractionEvent(),
      this.off(),
      this.marker.remove(),
      this.tooltipComponent.destroy();
  }
}
class YA extends wv {
  constructor(e = [], n = {}) {
    super(),
      (this.name = n.name ? n.name : Sv("layerGroup")),
      (this.layers = e);
  }
  addTo(e) {
    this.scene = e;
    let n = 0;
    const r = this.layers.length;
    this.layers.forEach((o) => {
      o.once("inited", (l) => {
        n++, this.emit("inited", l), n === r && this.emit("inited-all");
      }),
        o.addTo(e);
    });
  }
  hasLayer(e) {
    return this.layers.some((n) => n === e);
  }
  addLayer(e) {
    this.layers.push(e),
      this.scene &&
        (e.once("inited", (n) => this.emit("inited", n)), e.addTo(this.scene));
  }
  removeLayer(e) {
    const n = this.layers.findIndex((r) => r === e);
    return n === -1
      ? !1
      : (this.layers.splice(n, 1), this.scene && e.remove(this.scene), !0);
  }
  getLayers() {
    return this.layers;
  }
  getInteractionLayers() {
    return this.layers.filter(({ interaction: e }) => e);
  }
  getLayer(e) {
    return this.layers.find(({ layer: n }) => n.id === e);
  }
  getLayerByName(e) {
    return this.layers.find((n) => n.name === e);
  }
  removeAllLayer() {
    this.layers.forEach((e) => {
      this.scene && e.remove(this.scene);
    }),
      (this.layers = []);
  }
  isEmpty() {
    return this.layers.length === 0;
  }
}
const wZ = [
    { original: "loaded", adaptation: "scene-loaded" },
    { original: "resize", adaptation: "resize" },
    { original: "destroy", adaptation: "destroy" },
    { original: "resize", adaptation: "resize" },
  ],
  CZ = [
    "mapmove",
    "movestart",
    "moveend",
    "zoomchange",
    "zoomstart",
    "zoomend",
    "click",
    "dblclick",
    "contextmenu",
    "mousemove",
    "mousewheel",
    "mouseover",
    "mouseout",
    "mouseup",
    "mousedown",
    "dragstart",
    "dragging",
    "dragend",
  ],
  xg = [
    "inited",
    "add",
    "remove",
    "dataUpdate",
    "click",
    "unclick",
    "dblclick",
    "undblclick",
    "contextmenu",
    "uncontextmenu",
    "mouseenter",
    "mousemove",
    "unmousemove",
    "mouseout",
    "mouseup",
    "unmouseup",
    "mousedown",
    "uncontextmenu",
    "unpick",
    "legend",
    "legend:color",
    "legend:size",
  ],
  qA = { map: { type: Oc.Amap }, logo: !0 };
let $A = class KA extends wv {
  constructor(e) {
    super(),
      (this.inited = !1),
      (this.sceneLoaded = !1),
      (this.layersLoaded = !1),
      (this.loaded = !1),
      (this.layerGroup = new YA()),
      (this.options = oo({}, this.getDefaultOptions(), e)),
      (this.lastOptions = this.options);
  }
  getDefaultOptions() {
    return KA.DefaultOptions;
  }
  createContainer(e) {
    const { width: n, height: r } = this.options,
      o = typeof e == "string" ? document.getElementById(e) : e;
    return (
      o.style.position || (o.style.position = "relative"),
      n && (o.style.width || (o.style.width = `${n}px`)),
      r && (o.style.height || (o.style.height = `${r}px`)),
      o
    );
  }
  createTheme() {
    return fp(this.options.theme)
      ? oo({}, Y_("default"), PA(this.options.theme))
      : Y_(this.options.theme);
  }
  createMap() {
    const e = this.options.map ? this.options.map : qA.map,
      { type: n } = e,
      r = rl(e, ["type"]),
      o = Object.assign({ style: this.theme.mapStyle }, r);
    return n === Oc.Amap
      ? new Tj(o)
      : n === Oc.AmapV1
      ? new Sj(o)
      : n === Oc.AmapV2
      ? new wj(o)
      : n === Oc.Mapbox
      ? new Aj(o)
      : new gj(o);
  }
  createScene() {
    const { logo: e, antialias: n, preserveDrawingBuffer: r } = this.options,
      o = wA(e)
        ? { logoVisible: e }
        : {
            logoVisible: e == null ? void 0 : e.visible,
            logoPosition: e == null ? void 0 : e.position,
          },
      l = Object.assign({ antialias: n, preserveDrawingBuffer: r }, o),
      a = this.createMap();
    return new OG(Object.assign({ id: this.container, map: a }, l));
  }
  registerResources() {
    Ob.size &&
      Ob.forEach((e, n) => {
        !this.scene.hasImage(n) && this.scene.addImage(n, e);
      }),
      Lb.size &&
        Lb.forEach((e, n) => {
          this.scene.addFontFace(n, e);
        }),
      Db.size &&
        Db.forEach((e, n) => {
          this.scene.addIconFont(n, e);
        });
  }
  update(e) {
    this.updateOption(e),
      e.map &&
        !so(this.lastOptions.map, this.options.map) &&
        this.updateMap(e.map),
      this.render(),
      this.emit("update");
  }
  updateOption(e) {
    (this.lastOptions = this.options), (this.options = oo({}, this.options, e));
  }
  updateMap(e) {
    var n;
    if (!this.scene) return;
    const { style: r, center: o, zoom: l, rotation: a, pitch: h } = e;
    _u(h) || this.scene.setPitch(h),
      _u(a) || this.scene.setRotation(a),
      r &&
        r !==
          ((n = this.lastOptions.map) === null || n === void 0
            ? void 0
            : n.style) &&
        this.scene.setMapStyle(r),
      l && o && this.scene.setZoomAndCenter(l, o);
  }
  changeSize(e, n) {
    (this.options.width === e && this.options.height === n) ||
      ((this.container.style.width = `${e}px`),
      (this.container.style.height = `${n}px`),
      (this.options = Object.assign(this.options, { width: e, height: n })));
  }
  on(e, n, r) {
    return this.proxyEventHander("on", e, n, r), this;
  }
  once(e, n) {
    return this.proxyEventHander("once", e, n), this;
  }
  off(e, n) {
    return this.proxyEventHander("off", e, n), this;
  }
  proxyEventHander(e, n, r, o) {
    const l = wZ.find((a) => a.adaptation === n);
    if (l) this.scene[e](l.original, r);
    else if (CZ.indexOf(n) !== -1) this.scene[e](n, r);
    else if (n.includes("Layer:")) {
      const [a, h] = n.split(":");
      if (this[a] && this[a][e] && xg.indexOf(h) !== -1) this[a][e](h, r);
      else throw new Error(`No event name "${n}"`);
    } else super[e](n, r, o);
  }
  getScene() {
    return this.scene;
  }
  getMap() {
    var e, n, r, o;
    return ((e = this.options.map) === null || e === void 0
      ? void 0
      : e.type) === Oc.Amap
      ? this.scene.map
      : ((n = this.options.map) === null || n === void 0 ? void 0 : n.type) ===
        Oc.AmapV2
      ? this.scene.map
      : ((r = this.options.map) === null || r === void 0 ? void 0 : r.type) ===
        Oc.Mapbox
      ? this.scene.map
      : ((o = this.options.map) === null || o === void 0 ? void 0 : o.type) ===
        Oc.Map
      ? this.scene.map
      : this.scene.map;
  }
  addLayer(e) {
    this.layerGroup.addLayer(e);
  }
  getLayes() {
    return console.warn("Replace to use getLayers()"), this.getLayers();
  }
  getLayers() {
    return this.layerGroup.getLayers();
  }
  getLayerByName(e) {
    return this.layerGroup.getLayerByName(e);
  }
  removeLayer(e) {
    return this.layerGroup.removeLayer(e);
  }
  removeAllLayer() {
    this.layerGroup.removeAllLayer();
  }
  zoomIn() {
    this.scene.zoomIn();
  }
  zoomOut() {
    this.scene.zoomOut();
  }
  setPitch(e) {
    this.scene.setPitch(e);
  }
  fitBounds(e) {
    this.scene.fitBounds(e);
  }
  setMapStatus(e) {
    this.scene.setMapStatus(e);
  }
  setBgColor(e) {
    this.scene.setBgColor(e);
  }
  initComponents() {
    this.initControls(), this.initTooltip();
  }
  updateComponents() {
    this.updateControls(), this.initTooltip();
  }
  initControls() {
    const { zoom: e, scale: n, layerMenu: r, legend: o } = this.options;
    n && this.addScaleControl(n),
      e && this.addZoomControl(e),
      r && this.addLayerMenuControl(r),
      o && (this.addLegendControl(o), this.emit("add-legend"));
  }
  updateControls() {
    const { zoom: e, scale: n, layerMenu: r, legend: o } = this.options;
    so(this.lastOptions.zoom, e) ||
      (e ? this.updateZoomControl(e) : this.removeZoomControl()),
      so(this.lastOptions.scale, n) ||
        (n ? this.updateScaleControl(n) : this.removeScaleControl()),
      so(this.lastOptions.layerMenu, r) ||
        (r ? this.updateLayerMenuControl(r) : this.removeLayerMenuControl()),
      so(this.lastOptions.legend, o) ||
        (o ? this.updateLegendControl(o) : this.removeLegendControl());
  }
  addZoomControl(e) {
    this.zoomControl ||
      ((this.zoomControl = new MV(e)), this.scene.addControl(this.zoomControl));
  }
  updateZoomControl(e) {
    if (!this.zoomControl) {
      this.addZoomControl(e);
      return;
    }
    this.removeZoomControl(), this.addZoomControl(e);
  }
  removeZoomControl() {
    this.zoomControl &&
      (this.zoomControl.remove(), (this.zoomControl = void 0));
  }
  addScaleControl(e) {
    this.scaleControl ||
      ((this.scaleControl = new ED(e)),
      this.scene.addControl(this.scaleControl));
  }
  updateScaleControl(e) {
    if (!this.scaleControl) {
      this.addScaleControl(e);
      return;
    }
    this.removeScaleControl(), this.addScaleControl(e);
  }
  removeScaleControl() {
    this.scaleControl &&
      (this.scaleControl.remove(), (this.scaleControl = void 0));
  }
  addLayerMenuControl(e) {
    this.layerGroup.getLayers().forEach(({ name: n, layer: r }) => {});
  }
  updateLayerMenuControl(e) {
    this.removeLayerMenuControl(), this.addLayerMenuControl(e);
  }
  removeLayerMenuControl() {}
  getLegendOptions() {
    return {};
  }
  addLegendControl(e) {
    if (this.legendControl) return;
    const n = this.theme.components.legend,
      r = oo({}, this.getLegendOptions(), e),
      { type: o, position: l } = r,
      a = rl(r, ["type", "position"]),
      h = [];
    if (o === "category") {
      const f = oo({}, { domStyles: n.category.domStyles }, a);
      h.push({ type: o, options: f });
    } else if (o === "continue") {
      const f = oo({}, { domStyles: n.continue.domStyles }, a);
      h.push({ type: o, options: f });
    }
    h.length &&
      ((this.legendControl = new yZ({ position: l, items: h })),
      this.scene.addControl(this.legendControl));
  }
  updateLegendControl(e) {
    if (!this.legendControl) {
      this.addLegendControl(e);
      return;
    }
    this.removeLegendControl(), this.addLegendControl(e);
  }
  removeLegendControl() {
    this.legendControl &&
      (this.legendControl.remove(), (this.legendControl = void 0));
  }
  initTooltip() {
    this.tooltip && this.tooltip.destroy();
    const { tooltip: e } = this.options;
    if (e) {
      const n = oo(
          {},
          { domStyles: this.theme.components.tooltip.domStyles },
          e
        ),
        r = this.layerGroup.getInteractionLayers();
      (this.tooltip = new SZ(this.scene, r, n)),
        this.tooltip.on("*", (o) => this.emit(o.type, o));
    }
  }
  exportPng(e) {
    return this.scene.exportPng(e);
  }
  destroy() {
    var e;
    super.off("*"),
      this.removeScaleControl(),
      this.removeZoomControl(),
      this.removeLayerMenuControl(),
      this.removeLegendControl(),
      (e = this.tooltip) === null || e === void 0 || e.destroy(),
      this.scene.destroy();
  }
};
$A.DefaultOptions = qA;
class e3 {
  static aggregation(e, n) {
    const { type: r = "grid", radius: o, method: l, field: a } = n,
      h = { type: r, size: o, method: l, field: a };
    e.transforms
      ? ((e.transforms = e.transforms.filter((f) => f.type !== h.type)),
        e.transforms.push(h))
      : (e.transforms = [h]);
  }
}
const QA = [
  "name",
  "zIndex",
  "visible",
  "minZoom",
  "maxZoom",
  "pickingBuffer",
  "autoFit",
  "blend",
];
class Vc extends wv {
  constructor(e) {
    super(),
      (this.options = oo({}, this.getDefaultOptions(), e)),
      (this.lastOptions = this.options);
  }
  getDefaultOptions() {
    return {};
  }
  pickLayerConfig(e) {
    return c1(e, QA);
  }
  addTo(e) {
    e.addLayer(this.layer);
  }
  remove(e) {
    e.removeLayer(this.layer);
  }
  update(e) {
    this.updateOption(e), this.updateConfig(e);
  }
  updateOption(e) {
    (this.lastOptions = this.options), (this.options = oo({}, this.options, e));
  }
  updateConfig(e) {
    !_u(e.zIndex) &&
      !so(this.lastOptions.zIndex, this.options.zIndex) &&
      this.setIndex(e.zIndex),
      !_u(e.blend) &&
        !so(this.lastOptions.blend, this.options.blend) &&
        this.setBlend(e.blend),
      !_u(e.minZoom) &&
        !so(this.lastOptions.minZoom, this.options.minZoom) &&
        this.setMinZoom(e.minZoom),
      !_u(e.maxZoom) &&
        !so(this.lastOptions.maxZoom, this.options.maxZoom) &&
        this.setMinZoom(e.maxZoom),
      !_u(e.visible) &&
        !so(this.lastOptions.visible, this.options.visible) &&
        (e.visible ? this.show() : this.hide());
  }
  render() {
    this.layer.renderLayers();
  }
  setSource(e) {
    if (e instanceof gv) this.layer.setSource(e);
    else {
      const { data: n, aggregation: r } = e,
        o = rl(e, ["data", "aggregation"]);
      r && e3.aggregation(o, r),
        this.layer.getSource()
          ? this.layer.setData(n, o)
          : this.layer.source(n, o);
    }
  }
  changeData(e) {
    this.setSource(e);
  }
  setIndex(e) {
    this.layer.setIndex(e);
  }
  setBlend(e) {
    this.layer.setBlend(e);
  }
  setMinZoom(e) {
    this.layer.setMinZoom(e);
  }
  setMaxZoom(e) {
    this.layer.setMaxZoom(e);
  }
  show() {
    this.layer.inited && this.layer.show();
  }
  hide() {
    this.layer.inited && this.layer.hide();
  }
  toggleVisible() {
    this.isVisible() ? this.hide() : this.show();
  }
  isVisible() {
    return this.layer.inited ? this.layer.isVisible() : this.options.visible;
  }
  fitBounds(e) {
    this.layer.fitBounds(e);
  }
  on(e, n) {
    return xg.indexOf(e) !== -1 ? this.layer.on(e, n) : super.on(e, n), this;
  }
  once(e, n) {
    return (
      xg.indexOf(e) !== -1 ? this.layer.once(e, n) : super.once(e, n), this
    );
  }
  off(e, n) {
    return xg.indexOf(e) !== -1 ? this.layer.off(e, n) : super.off(e, n), this;
  }
}
Vc.LayerType = q_;
Vc.LayerConfigkeys = QA;
function X0(t, e) {
  return (...n) => {
    const r = {};
    return (
      t.forEach((o, l) => {
        r[o] = n[l];
      }),
      delete r.undefined,
      e(r)
    );
  };
}
class ai {
  static shape(e, n) {
    if (ac(n)) e.shape(n);
    else if (ed(n)) {
      const r = [];
      e.shape(r.join("*"), X0(r, n));
    } else if (fp(n)) {
      const r = n.field ? n.field : "";
      if (ed(n.value)) {
        const o = qd(r) ? r : r.split("*");
        e.shape(r, X0(o, n.value));
      } else e.shape(r, n.value);
      ac(r) && n.scale && ai.scale(e, r, n.scale);
    }
  }
  static size(e, n) {
    if (BG(n)) e.size(n);
    else if (qd(n)) e.size(n);
    else if (ed(n)) {
      const r = [];
      e.size(r.join("*"), X0(r, n));
    } else if (fp(n)) {
      const r = n.field ? n.field : "";
      if (ed(n.value)) {
        const o = qd(r) ? r : r.split("*");
        e.size(r, X0(o, n.value));
      } else e.size(r, n.value);
      ac(r) && n.scale && ai.scale(e, r, n.scale);
    }
  }
  static color(e, n) {
    if (ac(n)) e.color(n);
    else if (ed(n)) {
      const r = [];
      e.color(r.join("*"), X0(r, n));
    } else if (fp(n)) {
      const r = n.field ? n.field : "";
      if (ed(n.value)) {
        const o = qd(r) ? r : r.split("*");
        e.color(r, X0(o, n.value));
      } else e.color(r, n.value);
      ac(r) && n.scale && ai.scale(e, r, n.scale);
    }
  }
  static style(e, n) {
    n && e.style(n);
  }
  static state(e, n) {
    const { active: r, select: o } = n;
    r && e.active(r), o && e.select(o);
  }
  static rotate(e, n) {
    ac(n) || ed(n);
  }
  static texture(e, n) {
    ac(n) && e.texture(n);
  }
  static animate(e, n) {
    (wA(n) || fp(n)) && e.animate(n);
  }
  static scale(e, n, r) {
    e.scale(n, r);
  }
  static filter(e, n) {
    const r = n.field ? n.field : "",
      o = qd(r) ? r : r.split("*");
    e.filter(o.join("*"), X0(o, n.value));
  }
}
function NZ(t, e) {
  const { field: n, content: r, style: o = {}, state: l } = e,
    { fontSize: a, fill: h } = o,
    v = { field: n || r || "", value: "text" };
  ai.shape(t, v),
    a && ai.size(t, a),
    h && ai.color(t, h),
    o && ai.style(t, o),
    l && ai.state(t, l);
}
const JA = { style: { fontSize: 12 } },
  RZ = [];
class Nv extends Vc {
  constructor(e) {
    super(e), (this.type = Vc.LayerType.TextLayer), (this.interaction = !1);
    const { name: n, source: r } = this.options,
      o = this.pickLayerConfig(this.options);
    (this.name = n || Sv(this.type)),
      (this.layer = new qg(
        Object.assign(Object.assign({}, o), { name: this.name })
      )),
      this.mappingLayer(this.layer, this.options),
      this.setSource(r);
  }
  getDefaultOptions() {
    return JA;
  }
  mappingLayer(e, n) {
    NZ(e, n);
  }
  update(e) {
    super.update(e), this.mappingLayer(this.layer, this.options);
  }
}
Nv.DefaultOptions = JA;
Nv.LayerOptionsKeys = Vc.LayerConfigkeys.concat(RZ);
const IZ = { autoFit: !1 };
class sh extends $A {
  constructor(e, n) {
    if (typeof e == "string" || e instanceof Element) {
      if (n === void 0) throw new Error("options is undefined");
      super(n),
        (this.container = this.createContainer(e)),
        (this.theme = this.createTheme()),
        (this.scene = this.createScene()),
        this.registerResources(),
        this.initSource();
    } else super(e);
  }
  initSource() {
    (this.source = this.createSource()), this.render(), (this.inited = !0);
  }
  initLayersEvent() {}
  getDefaultOptions() {
    return sh.DefaultOptions;
  }
  createSource() {
    const e = this.options.source,
      { data: n, aggregation: r } = e,
      o = rl(e, ["data", "aggregation"]);
    return r && e3.aggregation(o, r), new gv(n, o);
  }
  createLabelLayer(e, n, r) {
    const { visible: o, minZoom: l, maxZoom: a, zIndex: h = 0 } = r || {};
    return new Nv(
      Object.assign(
        {
          name: "labelLayer",
          visible: o,
          minZoom: l,
          maxZoom: a,
          zIndex: h + 0.1,
          source: e,
        },
        n
      )
    );
  }
  updateLabelLayer(e, n, r, o) {
    n
      ? o
        ? o.update(Object.assign({}, n))
        : ((o = this.createLabelLayer(e, n, r)), this.layerGroup.addLayer(o))
      : n === !1 && o && this.layerGroup.removeLayer(o);
  }
  render() {
    const e = this.createLayers(this.source);
    this.inited
      ? (this.layerGroup.removeAllLayer(),
        e.addTo(this.scene),
        (this.layerGroup = e))
      : ((this.layerGroup = e),
        this.scene.sceneService.loaded
          ? this.onSceneLoaded()
          : this.scene.once("loaded", () => {
              this.onSceneLoaded();
            })),
      this.initLayersEvent();
  }
  onSceneLoaded() {
    (this.sceneLoaded = !0),
      this.layerGroup.isEmpty()
        ? this.onLayersLoaded()
        : this.layerGroup.once("inited-all", () => {
            this.onLayersLoaded();
          }),
      this.layerGroup.addTo(this.scene);
  }
  onLayersLoaded() {
    (this.layersLoaded = !0),
      this.initComponents(),
      (this.loaded = !0),
      this.emit("loaded");
  }
  attachToScene(e, n) {
    (this.scene = e),
      (this.theme = n || Y_("default")),
      this.registerResources(),
      this.initSource();
  }
  unattachFromScene() {
    var e;
    this.removeAllLayer(),
      (e = this.tooltip) === null || e === void 0 || e.destroy();
  }
  addToScene(e) {
    this.attachToScene(e);
  }
  removeFromScene() {
    var e;
    this.removeAllLayer(),
      this.removeScaleControl(),
      this.removeZoomControl(),
      this.removeLayerMenuControl(),
      this.removeLegendControl(),
      (e = this.tooltip) === null || e === void 0 || e.destroy();
  }
  update(e) {
    if (
      (this.updateOption(e),
      e.map &&
        !so(this.lastOptions.map, this.options.map) &&
        this.updateMap(e.map),
      this.scene.setEnableRender(!1),
      e.source && !so(this.lastOptions.source, this.options.source))
    ) {
      const n = e.source,
        { data: r } = n,
        o = rl(n, ["data"]);
      this.changeData(r, o);
    }
    this.scene.setEnableRender(!0),
      this.render(),
      this.updateComponents(),
      this.emit("update");
  }
  changeData(e, n) {
    this.options.source = oo(
      {},
      this.options.source,
      Object.assign({ data: e }, n)
    );
    const r = this.options.source,
      { aggregation: o } = r,
      l = rl(r, ["aggregation"]);
    o && e3.aggregation(l, o), this.source.setData(this.options.source.data, l);
    const a = this.options.legend;
    a &&
      setTimeout(() => {
        this.updateLegendControl(a);
      }, 500),
      this.emit("change-data");
  }
}
sh.DefaultOptions = IZ;
sh.PlotType = $_;
const MZ = (t) => !Array.isArray(t[0].value),
  eT = (t) =>
    MZ(t)
      ? t
      : t.map((n) =>
          Object.assign(Object.assign({}, n), {
            value: [a4(n.value[0], 4), a4(n.value[1], 4)],
          })
        );
function PZ(t, e) {
  const {
    shape: n,
    color: r,
    size: o,
    style: l,
    state: a,
    animate: h,
    texture: f,
  } = e;
  n && ai.shape(t, n),
    o && ai.size(t, o),
    r && ai.color(t, r),
    l && ai.style(t, l),
    a && ai.state(t, a),
    h && ai.animate(t, h),
    f && ai.texture(t, f);
}
const tT = {},
  OZ = ["shape", "color", "size", "style", "state", "animate"];
class Ap extends Vc {
  constructor(e) {
    super(e), (this.type = Vc.LayerType.LinesLayer), (this.interaction = !0);
    const { name: n, source: r } = this.options,
      o = this.pickLayerConfig(this.options);
    (this.name = n || Sv(this.type)),
      (this.layer = new xp(
        Object.assign(Object.assign({}, o), { name: this.name })
      )),
      this.mappingLayer(this.layer, this.options),
      this.setSource(r);
  }
  getDefaultOptions() {
    return tT;
  }
  mappingLayer(e, n) {
    PZ(e, n);
  }
  update(e) {
    super.update(e), this.mappingLayer(this.layer, this.options);
  }
  getColorLegendItems() {
    const e = this.layer.getLegendItems("color");
    return Array.isArray(e) && e.length !== 0 ? eT(e) : [];
  }
}
Ap.DefaultOptions = tT;
Ap.LayerOptionsKeys = Vc.LayerConfigkeys.concat(OZ);
const LZ = ["color", "size", "style", "state", "animate"];
class bg extends Ap {
  constructor() {
    super(...arguments), (this.type = Ap.LayerType.PathLayer);
  }
  getDefaultOptions() {
    return oo({}, Ap.DefaultOptions, { shape: "line" });
  }
}
bg.LayerOptionsKeys = Ap.LayerConfigkeys.concat(LZ);
const Gb = "#2f54eb",
  Vo = {
    active: { fill: !1, stroke: Gb, lineWidth: 1.5, lineOpacity: 0.8 },
    select: { fill: !1, stroke: Gb, lineWidth: 1.5, lineOpacity: 0.8 },
  },
  n1 = (t) => (
    _u(t) ||
      (t.active === !1
        ? (Vo.active = Object.assign(Vo.active, { fill: !1, stroke: !1 }))
        : typeof t.active == "object" &&
          (t.active.fill === !1
            ? (Vo.active.fill = !1)
            : typeof t.active.fill == "string" &&
              (Vo.active.fill = t.active.fill),
          t.active.stroke === !1
            ? (Vo.active.stroke = !1)
            : typeof t.active.stroke == "string" &&
              (Vo.active.stroke = t.active.stroke),
          typeof t.active.lineWidth == "number" &&
            (Vo.active.lineWidth = t.active.lineWidth),
          typeof t.active.lineOpacity == "number" &&
            (Vo.active.lineOpacity = t.active.lineOpacity)),
      t.select === !1
        ? (Vo.select = Object.assign(Vo.select, { fill: !1, stroke: !1 }))
        : typeof t.select == "object" &&
          (t.select.fill === !1
            ? (Vo.select.fill = !1)
            : typeof t.select.fill == "string" &&
              (Vo.select.fill = t.select.fill),
          t.select.stroke === !1
            ? (Vo.select.stroke = !1)
            : typeof t.select.stroke == "string" &&
              (Vo.select.stroke = t.select.stroke),
          typeof t.select.lineWidth == "number" &&
            (Vo.select.lineWidth = t.select.lineWidth),
          typeof t.select.lineOpacity == "number" &&
            (Vo.select.lineOpacity = t.select.lineOpacity))),
    Vo
  );
function DZ(t, e, n, r, o, l) {
  const { color: a, style: h, state: f } = l,
    v = n1(f),
    E = {
      active: v.active.fill === !1 ? !1 : { color: v.active.fill },
      select: !1,
    },
    x = { opacity: h == null ? void 0 : h.opacity },
    T = h == null ? void 0 : h.lineWidth,
    N = h == null ? void 0 : h.stroke,
    I = {
      opacity: h == null ? void 0 : h.lineOpacity,
      dashArray: h == null ? void 0 : h.lineDash,
      lineType: h == null ? void 0 : h.lineType,
    };
  if (
    (ai.shape(t, "fill"),
    a && ai.color(t, a),
    x && ai.style(t, x),
    E && ai.state(t, E),
    ai.shape(e, "line"),
    T && ai.size(e, T),
    N && ai.color(e, N),
    I && ai.style(e, I),
    v.active.stroke)
  ) {
    const L = v.active.stroke,
      F = v.active.lineWidth || T,
      X = { opacity: v.active.lineOpacity };
    ai.shape(n, "line"),
      F && ai.size(n, F),
      L && ai.color(n, L),
      X && ai.style(n, X);
  }
  if (v.select.fill) {
    const L = v.select.fill;
    ai.shape(r, "fill"),
      L && ai.color(r, L),
      x && ai.style(r, x),
      ai.state(r, { select: !1, active: !1 });
  }
  if (v.select.stroke) {
    const L = v.select.stroke,
      F = v.select.lineWidth || T,
      X = { opacity: v.select.lineOpacity };
    ai.shape(o, "line"),
      F && ai.size(o, F),
      L && ai.color(o, L),
      X && ai.style(o, X);
  }
}
const nT = {
    visible: !0,
    state: { active: !1, select: !1 },
    enabledMultiSelect: !1,
  },
  BZ = ["color", "style", "state", "enabledMultiSelect"];
class u1 extends Vc {
  constructor(e) {
    super(e),
      (this.selectData = []),
      (this.type = Vc.LayerType.AreaLayer),
      (this.interaction = !0),
      (this.onHighlighHandle = (E) => {
        const { feature: x, featureId: T } = E;
        this.setHighlightLayerSource(x, T);
      }),
      (this.onUnhighlighHandle = () => {
        this.setHighlightLayerSource();
      }),
      (this.onSelectHandle = (E) => {
        const x = this.options.enabledMultiSelect,
          { feature: T, featureId: N } = E;
        let I = l1(this.selectData);
        const L = I.findIndex((F) => F.featureId === N);
        if (L === -1)
          x
            ? I.push({ feature: T, featureId: N })
            : (I = [{ feature: T, featureId: N }]),
            this.emit("select", T, l1(I));
        else {
          const F = I[L];
          x ? I.splice(L, 1) : (I = []), this.emit("unselect", F, l1(I));
        }
        this.setSelectLayerSource(I);
      });
    const {
        name: n,
        source: r,
        visible: o,
        minZoom: l,
        maxZoom: a,
        zIndex: h = 0,
      } = this.options,
      f = this.pickLayerConfig(this.options),
      v = n1(this.options.state);
    (this.name = n || Sv(this.type)),
      (this.layer = new $g(
        Object.assign(Object.assign({}, f), { name: this.name })
      )),
      (this.strokeLayer = new xp({
        name: "strokeLayer",
        visible: o,
        zIndex: h,
        minZoom: l,
        maxZoom: a,
      })),
      (this.highlightLayer = new xp({
        name: "highlightLayer",
        visible: o && !!v.active.stroke,
        zIndex: h + 0.1,
        minZoom: l,
        maxZoom: a,
      })),
      (this.selectFillLayer = new $g({
        name: "selectFillLayer",
        visible: o && !!v.select.fill,
        zIndex: h + 0.1,
        minZoom: l,
        maxZoom: a,
      })),
      (this.selectStrokeLayer = new xp({
        name: "selectStrokeLayer",
        visible: o && !!v.select.stroke,
        zIndex: h + 0.1,
        minZoom: l,
        maxZoom: a,
      })),
      this.mappingLayer(this.options),
      this.setSource(r),
      this.initEvent();
  }
  getDefaultOptions() {
    return nT;
  }
  mappingLayer(e) {
    DZ(
      this.layer,
      this.strokeLayer,
      this.highlightLayer,
      this.selectFillLayer,
      this.selectStrokeLayer,
      e
    );
  }
  setSource(e) {
    super.setSource(e),
      this.setStrokeLayerSource(),
      this.setHighlightLayerSource(),
      this.selectFillLayer.source(
        { type: "FeatureCollection", features: [] },
        { parser: { type: "geojson" } }
      ),
      this.selectStrokeLayer.source(
        { type: "FeatureCollection", features: [] },
        { parser: { type: "geojson" } }
      );
  }
  setStrokeLayerSource() {
    const e = this.layer.getSource();
    if (e) this.strokeLayer.setSource(e);
    else {
      const { data: n, options: r } = this.layer.sourceOption;
      this.strokeLayer.source(n, r);
    }
  }
  setHighlightLayerSource(e, n = -999) {
    if (this.highlightLayerData === n) return;
    const r = e ? [e] : [];
    this.highlightLayer.getSource()
      ? this.highlightLayer.setData(
          { type: "FeatureCollection", features: r },
          { parser: { type: "geojson" } }
        )
      : this.highlightLayer.source(
          { type: "FeatureCollection", features: [] },
          { parser: { type: "geojson" } }
        ),
      (this.highlightLayerData = n);
  }
  setSelectLayerSource(e = []) {
    if (
      this.selectData.length === e.length &&
      so(
        this.selectData.map(({ featureId: r }) => r),
        e.map(({ featureId: r }) => r)
      )
    )
      return;
    const n = e.map(({ feature: r }) => r);
    this.selectFillLayer.setData(
      { type: "FeatureCollection", features: n },
      { parser: { type: "geojson" } }
    ),
      this.selectStrokeLayer.setData(
        { type: "FeatureCollection", features: n },
        { parser: { type: "geojson" } }
      ),
      (this.selectData = e);
  }
  initEvent() {
    this.layer.off("mousemove", this.onHighlighHandle),
      this.layer.off("unmousemove", this.onHighlighHandle),
      this.layer.off("click", this.onSelectHandle),
      (this.selectData = []),
      (this.highlightLayerData = null),
      this.options.state &&
        (this.options.state.active &&
          (this.layer.on("mousemove", this.onHighlighHandle),
          this.layer.on("unmousemove", this.onUnhighlighHandle)),
        this.options.state.select &&
          this.layer.on("click", this.onSelectHandle));
  }
  addTo(e) {
    e.addLayer(this.layer),
      e.addLayer(this.strokeLayer),
      e.addLayer(this.highlightLayer),
      e.addLayer(this.selectFillLayer),
      e.addLayer(this.selectStrokeLayer);
  }
  remove(e) {
    e.removeLayer(this.layer),
      e.removeLayer(this.strokeLayer),
      e.removeLayer(this.highlightLayer),
      e.removeLayer(this.selectFillLayer),
      e.removeLayer(this.selectStrokeLayer);
  }
  update(e) {
    if (
      (super.update(e), this.mappingLayer(this.options), this.options.visible)
    ) {
      !_u(e.state) &&
        !so(this.lastOptions.state, this.options.state) &&
        this.updateHighlightLayer();
      const n = n1(this.options.state);
      n.active.stroke && this.setHighlightLayerSource(),
        (n.select.fill || n.select.stroke) && this.setSelectLayerSource();
    }
    this.initEvent();
  }
  updateHighlightLayer() {
    const e = n1(this.options.state),
      n = n1(this.lastOptions.state);
    n.active.stroke !== e.active.stroke &&
      (e.active.stroke
        ? this.highlightLayer.show()
        : this.highlightLayer.hide()),
      n.select.fill !== e.select.fill &&
        (e.select.fill
          ? this.selectFillLayer.show()
          : this.selectFillLayer.hide()),
      n.select.stroke !== e.select.stroke &&
        (e.select.stroke
          ? this.selectStrokeLayer.show()
          : this.selectStrokeLayer.hide());
  }
  setIndex(e) {
    this.layer.setIndex(e),
      this.strokeLayer.setIndex(e),
      this.highlightLayer.setIndex(e + 0.1),
      this.selectFillLayer.setIndex(e + 0.1),
      this.selectStrokeLayer.setIndex(e + 0.1);
  }
  setMinZoom(e) {
    this.layer.setMinZoom(e),
      this.strokeLayer.setMinZoom(e),
      this.highlightLayer.setMinZoom(e),
      this.selectFillLayer.setMinZoom(e),
      this.selectStrokeLayer.setMinZoom(e);
  }
  setMaxZoom(e) {
    this.layer.setMaxZoom(e),
      this.strokeLayer.setMaxZoom(e),
      this.highlightLayer.setMaxZoom(e),
      this.selectFillLayer.setMaxZoom(e),
      this.selectStrokeLayer.setMaxZoom(e);
  }
  show() {
    this.layer.inited &&
      (this.layer.show(),
      this.strokeLayer.show(),
      this.selectFillLayer.show(),
      this.selectStrokeLayer.show());
  }
  hide() {
    this.layer.inited &&
      (this.layer.hide(),
      this.strokeLayer.hide(),
      this.selectFillLayer.hide(),
      this.selectStrokeLayer.hide());
  }
  getColorLegendItems() {
    const e = this.layer.getLegendItems("color");
    return Array.isArray(e) && e.length !== 0 ? eT(e) : [];
  }
  setActive(e) {}
  setSelect(e) {}
}
u1.DefaultOptions = nT;
u1.LayerOptionsKeys = Vc.LayerConfigkeys.concat(BZ);
const rT = new Map();
function FZ(t, e) {
  rT.set(t, e);
}
function kZ(t) {
  return rT.get(t);
}
const UZ = oo({}, sh.DefaultOptions, {
    source: { data: [], joinBy: { geoField: "adcode" } },
    viewLevel: { level: "country", adcode: "100000" },
    chinaBorder: !0,
  }),
  ip = {
    world: "country",
    country: "province",
    province: "city",
    city: "district",
    district: "district",
  },
  iT = "https://gw.alipayobjects.com/os/alisis/geo-data-v0.1.2",
  t3 = `${iT}/choropleth-data`,
  Zb = {
    national: { color: "red", width: 1, opacity: 1 },
    dispute: { color: "red", width: 1, opacity: 0.8, dashArray: [2, 4] },
    coast: { color: "blue", width: 0.7, opacity: 0.8 },
    hkm: { color: "gray", width: 0.7, opacity: 0.8, dashArray: [2, 4] },
  };
function zZ(t) {
  return t;
}
function VZ(t) {
  if (t == null) return zZ;
  var e,
    n,
    r = t.scale[0],
    o = t.scale[1],
    l = t.translate[0],
    a = t.translate[1];
  return function (h, f) {
    f || (e = n = 0);
    var v = 2,
      E = h.length,
      x = new Array(E);
    for (x[0] = (e += h[0]) * r + l, x[1] = (n += h[1]) * o + a; v < E; )
      (x[v] = h[v]), ++v;
    return x;
  };
}
function HZ(t, e) {
  for (var n, r = t.length, o = r - e; o < --r; )
    (n = t[o]), (t[o++] = t[r]), (t[r] = n);
}
function jZ(t, e) {
  return (
    typeof e == "string" && (e = t.objects[e]),
    e.type === "GeometryCollection"
      ? {
          type: "FeatureCollection",
          features: e.geometries.map(function (n) {
            return Yb(t, n);
          }),
        }
      : Yb(t, e)
  );
}
function Yb(t, e) {
  var n = e.id,
    r = e.bbox,
    o = e.properties == null ? {} : e.properties,
    l = WZ(t, e);
  return n == null && r == null
    ? { type: "Feature", properties: o, geometry: l }
    : r == null
    ? { type: "Feature", id: n, properties: o, geometry: l }
    : { type: "Feature", id: n, bbox: r, properties: o, geometry: l };
}
function WZ(t, e) {
  var n = VZ(t.transform),
    r = t.arcs;
  function o(E, x) {
    x.length && x.pop();
    for (var T = r[E < 0 ? ~E : E], N = 0, I = T.length; N < I; ++N)
      x.push(n(T[N], N));
    E < 0 && HZ(x, I);
  }
  function l(E) {
    return n(E);
  }
  function a(E) {
    for (var x = [], T = 0, N = E.length; T < N; ++T) o(E[T], x);
    return x.length < 2 && x.push(x[0]), x;
  }
  function h(E) {
    for (var x = a(E); x.length < 4; ) x.push(x[0]);
    return x;
  }
  function f(E) {
    return E.map(h);
  }
  function v(E) {
    var x = E.type,
      T;
    switch (x) {
      case "GeometryCollection":
        return { type: x, geometries: E.geometries.map(v) };
      case "Point":
        T = l(E.coordinates);
        break;
      case "MultiPoint":
        T = E.coordinates.map(l);
        break;
      case "LineString":
        T = a(E.arcs);
        break;
      case "MultiLineString":
        T = E.arcs.map(a);
        break;
      case "Polygon":
        T = f(E.arcs);
        break;
      case "MultiPolygon":
        T = E.arcs.map(f);
        break;
      default:
        return null;
    }
    return { type: x, coordinates: T };
  }
  return v(e);
}
const XZ = (t) => {
    const e = { url: t3, type: "topojson", extension: "topo.json" };
    return (
      _u(t) ||
        (typeof t == "string"
          ? (e.url = t)
          : ((e.url = (t == null ? void 0 : t.url) || t3),
            (e.type = t.type),
            (e.extension = t.type === "topojson" ? "topo.json" : "json"))),
      e
    );
  },
  GZ = (t) => {
    try {
      return jZ(t, "json");
    } catch {
      throw new Error(
        'Failed convert to geojson from topojson, topojson default layer name "json"'
      );
    }
  },
  ZZ = (t, e) => {
    if (t.length !== e.length) return !1;
    for (let n = 0; n < t.length; n++) {
      const { level: r, granularity: o } = t[n];
      if (e[n].level !== r || e[n].granularity !== o) return !1;
    }
    return !0;
  },
  qb = (t) => c1(t, ["source", "color", "style", "state", "label", "tooltip"]),
  YZ = (t, e) => {
    const {
        visible: n,
        minZoom: r,
        maxZoom: o,
        zIndex: l = 0,
        chinaBorder: a,
      } = e || {},
      h = typeof a == "object" ? oo({}, Zb, a) : Zb,
      f = t.features.filter(({ properties: I }) =>
        ["coast", "national"].includes(I == null ? void 0 : I.type)
      ),
      v = t.features.filter(
        ({ properties: I }) => (I == null ? void 0 : I.type) === "dispute"
      ),
      E = t.features.filter(
        ({ properties: I }) => (I == null ? void 0 : I.type) === "hkm"
      ),
      x = new bg({
        name: "chinaBoundaryLayer",
        visible: n,
        minZoom: r,
        maxZoom: o,
        zIndex: l + 0.1,
        source: {
          data: { type: "FeatureCollection", features: f },
          parser: { type: "geojson" },
        },
        color: { field: "type", value: ({ type: I }) => h[I].color },
        size: { field: "type", value: ({ type: I }) => h[I].width },
        style: { opacity: h.national.opacity },
      }),
      T = new bg({
        name: "chinaHkmBoundaryLayer",
        visible: n,
        minZoom: r,
        maxZoom: o,
        zIndex: l + 0.1,
        source: {
          data: { type: "FeatureCollection", features: E },
          parser: { type: "geojson" },
        },
        color: h.hkm.color,
        size: h.hkm.width,
        style: {
          opacity: h.hkm.opacity,
          lineType: "dash",
          dashArray: h.hkm.dashArray,
        },
      }),
      N = new bg({
        name: "chinaDisputeBoundaryLayer",
        visible: n,
        minZoom: r,
        maxZoom: o,
        zIndex: l + 0.1,
        source: {
          data: { type: "FeatureCollection", features: v },
          parser: { type: "geojson" },
        },
        color: h.dispute.color,
        size: h.dispute.width,
        style: {
          opacity: h.dispute.opacity,
          lineType: "dash",
          dashArray: h.dispute.dashArray,
        },
      });
    return {
      chinaBoundaryLayer: x,
      chinaHkmBoundaryLayer: T,
      chinaDisputeBoundaryLayer: N,
    };
  };
class X1 extends sh {
  constructor() {
    super(...arguments),
      (this.type = sh.PlotType.Choropleth),
      (this.chinaBoundaryData = { type: "FeatureCollection", features: [] }),
      (this.currentDistrictData = { type: "FeatureCollection", features: [] }),
      (this.drillSteps = []),
      (this.drillStacks = []),
      (this.onDrillDownHander = (e) => {
        var n;
        const { steps: r, onDown: o } = this.options.drill,
          l = (n = e.feature) === null || n === void 0 ? void 0 : n.properties,
          { adcode: a } = l;
        if (this.drillStacks.length === r.length + 1) return;
        const h = this.drillStacks.slice(-1)[0],
          f = this.drillStacks.length - 1,
          v = this.drillSteps[f],
          { level: E, granularity: x = ip[E] } = v,
          T = rl(v, ["level", "granularity"]),
          N = {
            nativeEvent: !0,
            from: {
              level: h.level,
              adcode: h.adcode,
              granularity: h.granularity,
            },
            to: { level: E, adcode: a, granularity: x, properties: l },
          },
          I = (L = {}) => {
            const F = { level: E, adcode: a, granularity: x },
              X = oo({}, T, L);
            this.changeView(F, X).then((G) => {
              G && (this.drillStacks.push(G), this.emit("drilldown", N));
            });
          };
        o ? o(N.from, N.to, I) : I();
      }),
      (this.onDrillUpHander = () => {
        const { onUp: e } = this.options.drill;
        if (this.drillStacks.length === 0 || this.drillStacks.length === 1)
          return;
        const r = this.drillStacks.length - 1,
          o = this.drillStacks[r],
          l = this.drillStacks[r - 1],
          a = {
            nativeEvent: !0,
            from: {
              level: o.level,
              adcode: o.adcode,
              granularity: o.granularity,
            },
            to: {
              level: l.level,
              adcode: l.adcode,
              granularity: l.granularity,
            },
          },
          h = (f = {}) => {
            const v = a.to,
              E = oo({}, l.config, f);
            this.changeView(v, E).then((x) => {
              x && (this.drillStacks.pop(), this.emit("drillup", a));
            });
          };
        e ? e(a.from, a.to, h) : h();
      });
  }
  initSource() {
    this.getInitDistrictData().then(() => {
      (this.source = this.createSource()), this.render(), (this.inited = !0);
    });
  }
  render() {
    if (this.inited) this.scene.setEnableRender(!0), this.scene.render();
    else {
      const e = this.createLayers(this.source);
      (this.layerGroup = e),
        this.scene.sceneService.loaded
          ? this.onSceneLoaded()
          : this.scene.once("loaded", () => {
              this.onSceneLoaded();
            }),
        this.initLayersEvent();
    }
  }
  update(e) {
    var n, r, o;
    if (
      (this.updateOption(e),
      e.map &&
        !so(this.lastOptions.map, this.options.map) &&
        this.updateMap(e.map),
      e.drill &&
        e.drill.enabled !== !1 &&
        !so(
          (n = this.lastOptions.drill) === null || n === void 0
            ? void 0
            : n.steps,
          (r = this.options.drill) === null || r === void 0 ? void 0 : r.steps
        ) &&
        (this.drillReset(), this.initDrillEvent()),
      this.scene.setEnableRender(!1),
      e.viewLevel && !so(this.lastOptions.viewLevel, this.options.viewLevel))
    ) {
      const l =
        (o = e.source) === null || o === void 0 ? void 0 : o.joinBy.geoData;
      this.getDistrictData(l).then(() => {
        const a = this.options.source,
          { data: h } = a,
          f = rl(a, ["data"]);
        this.changeData(h, f),
          this.updateLayers(e),
          this.render(),
          this.updateComponents(),
          this.emit("update");
      });
    } else {
      if (e.source && !so(this.lastOptions.source, this.options.source)) {
        const l = this.options.source,
          { data: a } = l,
          h = rl(l, ["data"]);
        this.changeData(a, h);
      }
      this.updateLayers(e),
        this.render(),
        this.updateComponents(),
        this.emit("update");
    }
  }
  getDefaultOptions() {
    return X1.DefaultOptions;
  }
  parserSourceConfig(e) {
    const { data: n, joinBy: r } = e,
      o = rl(e, ["data", "joinBy"]),
      { sourceField: l, geoField: a, geoData: h } = r,
      f = h,
      v = { type: "join", sourceField: l, targetField: a, data: n };
    return (
      o.transforms ? o.transforms.push(v) : (o.transforms = [v]),
      o.parser && delete o.parser,
      { data: f, sourceCFG: o }
    );
  }
  createSource() {
    const { data: e, sourceCFG: n } = this.parserSourceConfig(
      this.options.source
    );
    return new gv(e, n);
  }
  changeData(e, n) {
    this.options.source = oo(
      {},
      this.options.source,
      Object.assign({ data: e }, n)
    );
    const { data: r, sourceCFG: o } = this.parserSourceConfig(
      this.options.source
    );
    this.source.setData(r, o), this.emit("change-data");
  }
  createLayers(e) {
    this.fillAreaLayer = new u1(
      Object.assign(
        { name: "fillAreaLayer", source: e },
        c1(this.options, u1.LayerOptionsKeys)
      )
    );
    const n = new YA([this.fillAreaLayer]);
    return (
      this.options.chinaBorder &&
        this.createCountryBoundaryLayer(
          this.chinaBoundaryData,
          this.options
        ).forEach((o) => n.addLayer(o)),
      this.options.label &&
        ((this.labelLayer = this.createLabelLayer(e, this.options.label)),
        n.addLayer(this.labelLayer)),
      n
    );
  }
  createCountryBoundaryLayer(e, n) {
    const {
      chinaBoundaryLayer: r,
      chinaHkmBoundaryLayer: o,
      chinaDisputeBoundaryLayer: l,
    } = YZ(e, n);
    return (
      (this.chinaBoundaryLayer = r),
      (this.chinaHkmBoundaryLayer = o),
      (this.chinaDisputeBoundaryLayer = l),
      [r, o, l]
    );
  }
  createLabelLayer(e, n) {
    const r = e.originData.features
        .map(({ properties: E }) =>
          Object.assign({}, E, { centroid: E.centroid || E.center })
        )
        .filter(({ centroid: E }) => E),
      { visible: o, minZoom: l, maxZoom: a, zIndex: h = 0 } = this.options,
      f = new Nv(
        Object.assign(
          {
            name: "labelLayer",
            source: {
              data: r,
              parser: { type: "json", coordinates: "centroid" },
              transforms: e.transforms,
            },
            visible: o,
            minZoom: l,
            maxZoom: a,
            zIndex: h + 0.1,
          },
          n
        )
      ),
      v = () => {
        const E = this.source.originData.features
          .map(({ properties: x }) => x)
          .filter(({ centroid: x }) => x);
        f.layer.setData(E, { transforms: e.transforms });
      };
    return (
      e.on("update", v),
      f.on("remove", () => {
        e.off("update", v);
      }),
      f
    );
  }
  updateLayers(e) {
    const n = c1(e, u1.LayerOptionsKeys);
    this.fillAreaLayer.update(n);
    const r = () => {
        this.createCountryBoundaryLayer(
          this.chinaBoundaryData,
          this.options
        ).forEach((a) => this.layerGroup.addLayer(a));
      },
      o = () => {
        this.chinaBoundaryLayer &&
          this.layerGroup.removeLayer(this.chinaBoundaryLayer),
          this.chinaHkmBoundaryLayer &&
            this.layerGroup.removeLayer(this.chinaHkmBoundaryLayer),
          this.chinaDisputeBoundaryLayer &&
            this.layerGroup.removeLayer(this.chinaDisputeBoundaryLayer);
      };
    e.chinaBorder
      ? (this.chinaBoundaryLayer && o(), r())
      : e.chinaBorder === !1 && o(),
      this.updateLabelLayer(
        this.source,
        e.label,
        this.options,
        this.labelLayer
      );
  }
  initLayersEvent() {
    this.initDrillEvent(), this.initLegendEvent();
  }
  initDrillEvent() {
    if (this.lastOptions.drill) {
      const { triggerUp: l = "unclick", triggerDown: a = "click" } =
        this.lastOptions.drill;
      this.fillAreaLayer.off(l, this.onDrillUpHander),
        this.fillAreaLayer.off(a, this.onDrillDownHander);
    }
    if (!this.options.drill || this.options.drill.enabled === !1) return;
    const {
        steps: e,
        triggerUp: n = "unclick",
        triggerDown: r = "click",
      } = this.options.drill,
      o = e.map((l) =>
        typeof l == "string"
          ? { level: l, granularity: ip[l] }
          : (l.granularity || (l.granularity = ip[l.level]), l)
      );
    if (
      (ZZ(o, this.drillSteps) ||
        ((this.drillSteps = o), (this.drillStacks = [])),
      !this.drillStacks.length)
    ) {
      const {
          level: l,
          adcode: a,
          granularity: h = ip[l],
        } = this.options.viewLevel,
        f = qb(this.options);
      this.drillStacks = [{ level: l, adcode: a, granularity: h, config: f }];
    }
    this.fillAreaLayer.on(n, this.onDrillUpHander),
      this.fillAreaLayer.on(r, this.onDrillDownHander);
  }
  initLegendEvent() {
    const e = this.options.legend;
    if (!e) return;
    const n = () => {
      this.updateLegendControl(e);
    };
    this.fillAreaLayer.on("legend:color", n);
  }
  drillReset() {
    this.drillStacks = [];
  }
  getCurrentDrillSteps() {
    return this.drillStacks.map((n) =>
      c1(n, ["level", "adcode", "granularity"])
    );
  }
  getLegendOptions() {
    const e = this.fillAreaLayer.getColorLegendItems();
    return e.length !== 0 ? { type: "category", items: e } : {};
  }
  fetchData(e, n, r) {
    return xu(this, void 0, void 0, function* () {
      const o = `${n}_${e}_${r}`,
        l = kZ(o);
      if (l) return l;
      const { url: a, type: h, extension: f } = XZ(this.options.geoArea);
      let v;
      const E = this.options.customFetchGeoData;
      return (
        E
          ? (v = yield E({
              url: a,
              level: e,
              adcode: n,
              granularity: r,
              extension: f,
            }))
          : (v = yield (yield fetch(`${a}/${e}/${o}.${f}`)).json()),
        h === "topojson" && (v = GZ(v)),
        FZ(o, v),
        v
      );
    });
  }
  getInitDistrictData() {
    return xu(this, void 0, void 0, function* () {
      var e;
      const n = this.fetchData("country", "100000", "boundary"),
        r =
          (e = this.options.source) === null || e === void 0
            ? void 0
            : e.joinBy.geoData;
      try {
        [this.chinaBoundaryData] = yield Promise.all([
          n,
          this.getDistrictData(r),
        ]);
      } catch (o) {
        throw new Error(`Failed to get china boundary data，${o}`);
      }
    });
  }
  getDistrictData(e) {
    return xu(this, void 0, void 0, function* () {
      const {
          level: n,
          adcode: r,
          granularity: o = ip[n],
        } = this.options.viewLevel,
        l = e ? Promise.resolve(e) : this.fetchData(n, r, o);
      try {
        (this.currentDistrictData = yield l),
          (this.options.source = oo({}, this.options.source, {
            joinBy: { geoData: this.currentDistrictData },
          }));
      } catch (a) {
        throw new Error(`Failed to get district data，${a}`);
      }
    });
  }
  drillDown(e, n = {}) {
    const r = this.drillStacks.slice(-1)[0],
      { level: o, adcode: l, granularity: a } = e,
      h = {
        nativeEvent: !1,
        from: { level: r.level, adcode: r.adcode, granularity: r.granularity },
        to: { level: o, adcode: l, granularity: a },
      };
    this.changeView(e, n).then((f) => {
      f && (this.drillStacks.push(f), this.emit("drilldown", h));
    });
  }
  drillUp(e = {}, n) {
    const r = this.drillStacks.length;
    if ([0, 1].includes(r)) return;
    const l = n ? this.drillStacks.findIndex((I) => I.level === n) : -1,
      a = l !== -1,
      h = a ? l : r - 2,
      f = this.drillStacks[h],
      { config: v } = f,
      E = rl(f, ["config"]),
      x = oo({}, v, e),
      T = this.drillStacks[this.drillStacks.length - 1],
      N = {
        nativeEvent: !1,
        from: { level: T.level, adcode: T.adcode, granularity: T.granularity },
        to: { level: E.level, adcode: E.adcode, granularity: E.granularity },
      };
    this.changeView(E, x).then((I) => {
      I &&
        (a ? this.drillStacks.splice(l + 1) : this.drillStacks.pop(),
        this.emit("drillup", N));
    });
  }
  changeView(e) {
    return xu(this, arguments, void 0, function* (n, r = {}) {
      const { level: o, adcode: l, granularity: a = ip[o] } = n,
        h = yield this.fetchData(o, l, a);
      if (!h.features.length) return;
      const f = oo({}, qb(this.options), r, {
        viewLevel: { level: o, adcode: l, granularity: a },
        source: { joinBy: { geoData: h } },
      });
      return this.update(f), { level: o, adcode: l, granularity: a, config: f };
    });
  }
}
X1.DefaultOptions = UZ;
X1.GeoDataUrl = iT;
X1.GeoAreaUrl = t3;
const qZ = [
    {
      name: "中华人民共和国",
      level: "country",
      adcode: 1e5,
      lng: 116.3683244,
      lat: 39.915085,
      childrenNum: 34,
      parent: null,
    },
    {
      name: "北京市",
      level: "province",
      adcode: 11e4,
      lng: 116.407387,
      lat: 39.904179,
      childrenNum: 1,
      parent: 1e5,
    },
    {
      name: "北京市",
      level: "city",
      adcode: 110100,
      lng: 116.405285,
      lat: 39.904989,
      childrenNum: 16,
      parent: 11e4,
    },
    {
      name: "东城区",
      level: "district",
      adcode: 110101,
      lng: 116.416334,
      lat: 39.928359,
      childrenNum: 0,
      parent: 110100,
    },
    {
      name: "西城区",
      level: "district",
      adcode: 110102,
      lng: 116.36585,
      lat: 39.9126,
      childrenNum: 0,
      parent: 110100,
    },
    {
      name: "朝阳区",
      level: "district",
      adcode: 110105,
      lng: 116.443136,
      lat: 39.921444,
      childrenNum: 0,
      parent: 110100,
    },
    {
      name: "丰台区",
      level: "district",
      adcode: 110106,
      lng: 116.286726,
      lat: 39.858538,
      childrenNum: 0,
      parent: 110100,
    },
    {
      name: "石景山区",
      level: "district",
      adcode: 110107,
      lng: 116.223015,
      lat: 39.906304,
      childrenNum: 0,
      parent: 110100,
    },
    {
      name: "海淀区",
      level: "district",
      adcode: 110108,
      lng: 116.2977,
      lat: 39.959893,
      childrenNum: 0,
      parent: 110100,
    },
    {
      name: "门头沟区",
      level: "district",
      adcode: 110109,
      lng: 116.101668,
      lat: 39.940842,
      childrenNum: 0,
      parent: 110100,
    },
    {
      name: "房山区",
      level: "district",
      adcode: 110111,
      lng: 116.143426,
      lat: 39.748889,
      childrenNum: 0,
      parent: 110100,
    },
    {
      name: "通州区",
      level: "district",
      adcode: 110112,
      lng: 116.72923,
      lat: 39.916403,
      childrenNum: 0,
      parent: 110100,
    },
    {
      name: "顺义区",
      level: "district",
      adcode: 110113,
      lng: 116.661474,
      lat: 40.149891,
      childrenNum: 0,
      parent: 110100,
    },
    {
      name: "昌平区",
      level: "district",
      adcode: 110114,
      lng: 116.231034,
      lat: 40.220952,
      childrenNum: 0,
      parent: 110100,
    },
    {
      name: "大兴区",
      level: "district",
      adcode: 110115,
      lng: 116.341483,
      lat: 39.726917,
      childrenNum: 0,
      parent: 110100,
    },
    {
      name: "怀柔区",
      level: "district",
      adcode: 110116,
      lng: 116.631974,
      lat: 40.317003,
      childrenNum: 0,
      parent: 110100,
    },
    {
      name: "平谷区",
      level: "district",
      adcode: 110117,
      lng: 117.121589,
      lat: 40.140805,
      childrenNum: 0,
      parent: 110100,
    },
    {
      name: "密云区",
      level: "district",
      adcode: 110118,
      lng: 116.843351,
      lat: 40.377058,
      childrenNum: 0,
      parent: 110100,
    },
    {
      name: "延庆区",
      level: "district",
      adcode: 110119,
      lng: 115.974609,
      lat: 40.457033,
      childrenNum: 0,
      parent: 110100,
    },
    {
      name: "天津市",
      level: "province",
      adcode: 12e4,
      lng: 117.201509,
      lat: 39.085318,
      childrenNum: 1,
      parent: 1e5,
    },
    {
      name: "天津市",
      level: "city",
      adcode: 120100,
      lng: 117.190182,
      lat: 39.125596,
      childrenNum: 16,
      parent: 12e4,
    },
    {
      name: "和平区",
      level: "district",
      adcode: 120101,
      lng: 117.214713,
      lat: 39.116884,
      childrenNum: 0,
      parent: 120100,
    },
    {
      name: "河东区",
      level: "district",
      adcode: 120102,
      lng: 117.251584,
      lat: 39.128294,
      childrenNum: 0,
      parent: 120100,
    },
    {
      name: "河西区",
      level: "district",
      adcode: 120103,
      lng: 117.223379,
      lat: 39.109679,
      childrenNum: 0,
      parent: 120100,
    },
    {
      name: "南开区",
      level: "district",
      adcode: 120104,
      lng: 117.150638,
      lat: 39.138551,
      childrenNum: 0,
      parent: 120100,
    },
    {
      name: "河北区",
      level: "district",
      adcode: 120105,
      lng: 117.196874,
      lat: 39.148018,
      childrenNum: 0,
      parent: 120100,
    },
    {
      name: "红桥区",
      level: "district",
      adcode: 120106,
      lng: 117.151566,
      lat: 39.167349,
      childrenNum: 0,
      parent: 120100,
    },
    {
      name: "东丽区",
      level: "district",
      adcode: 120110,
      lng: 117.313567,
      lat: 39.086789,
      childrenNum: 0,
      parent: 120100,
    },
    {
      name: "西青区",
      level: "district",
      adcode: 120111,
      lng: 117.008994,
      lat: 39.141811,
      childrenNum: 0,
      parent: 120100,
    },
    {
      name: "津南区",
      level: "district",
      adcode: 120112,
      lng: 117.356683,
      lat: 38.936971,
      childrenNum: 0,
      parent: 120100,
    },
    {
      name: "北辰区",
      level: "district",
      adcode: 120113,
      lng: 117.135614,
      lat: 39.224638,
      childrenNum: 0,
      parent: 120100,
    },
    {
      name: "武清区",
      level: "district",
      adcode: 120114,
      lng: 117.04456,
      lat: 39.384108,
      childrenNum: 0,
      parent: 120100,
    },
    {
      name: "宝坻区",
      level: "district",
      adcode: 120115,
      lng: 117.309748,
      lat: 39.717054,
      childrenNum: 0,
      parent: 120100,
    },
    {
      name: "滨海新区",
      level: "district",
      adcode: 120116,
      lng: 117.69641,
      lat: 39.017809,
      childrenNum: 0,
      parent: 120100,
    },
    {
      name: "宁河区",
      level: "district",
      adcode: 120117,
      lng: 117.826674,
      lat: 39.329749,
      childrenNum: 0,
      parent: 120100,
    },
    {
      name: "静海区",
      level: "district",
      adcode: 120118,
      lng: 116.975474,
      lat: 38.947772,
      childrenNum: 0,
      parent: 120100,
    },
    {
      name: "蓟州区",
      level: "district",
      adcode: 120119,
      lng: 117.408432,
      lat: 40.046544,
      childrenNum: 0,
      parent: 120100,
    },
    {
      name: "河北省",
      level: "province",
      adcode: 13e4,
      lng: 114.530399,
      lat: 38.037707,
      childrenNum: 11,
      parent: 1e5,
    },
    {
      name: "石家庄市",
      level: "city",
      adcode: 130100,
      lng: 114.514976,
      lat: 38.042007,
      childrenNum: 22,
      parent: 13e4,
    },
    {
      name: "长安区",
      level: "district",
      adcode: 130102,
      lng: 114.538955,
      lat: 38.03682,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "桥西区",
      level: "district",
      adcode: 130104,
      lng: 114.45004,
      lat: 38.025245,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "新华区",
      level: "district",
      adcode: 130105,
      lng: 114.463904,
      lat: 38.050749,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "井陉矿区",
      level: "district",
      adcode: 130107,
      lng: 114.062258,
      lat: 38.065446,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "裕华区",
      level: "district",
      adcode: 130108,
      lng: 114.531599,
      lat: 38.007002,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "藁城区",
      level: "district",
      adcode: 130109,
      lng: 114.846562,
      lat: 38.022177,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "鹿泉区",
      level: "district",
      adcode: 130110,
      lng: 114.313559,
      lat: 38.086536,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "栾城区",
      level: "district",
      adcode: 130111,
      lng: 114.647922,
      lat: 37.900915,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "井陉县",
      level: "district",
      adcode: 130121,
      lng: 114.145669,
      lat: 38.032366,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "正定县",
      level: "district",
      adcode: 130123,
      lng: 114.57043,
      lat: 38.14699,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "行唐县",
      level: "district",
      adcode: 130125,
      lng: 114.553044,
      lat: 38.437535,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "灵寿县",
      level: "district",
      adcode: 130126,
      lng: 114.383013,
      lat: 38.307908,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "高邑县",
      level: "district",
      adcode: 130127,
      lng: 114.611659,
      lat: 37.615905,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "深泽县",
      level: "district",
      adcode: 130128,
      lng: 115.20089,
      lat: 38.184572,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "赞皇县",
      level: "district",
      adcode: 130129,
      lng: 114.386114,
      lat: 37.666549,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "无极县",
      level: "district",
      adcode: 130130,
      lng: 114.976256,
      lat: 38.178852,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "平山县",
      level: "district",
      adcode: 130131,
      lng: 114.186007,
      lat: 38.260288,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "元氏县",
      level: "district",
      adcode: 130132,
      lng: 114.525508,
      lat: 37.767332,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "赵县",
      level: "district",
      adcode: 130133,
      lng: 114.775914,
      lat: 37.756935,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "辛集市",
      level: "district",
      adcode: 130181,
      lng: 115.217626,
      lat: 37.943239,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "晋州市",
      level: "district",
      adcode: 130183,
      lng: 115.044141,
      lat: 38.033937,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "新乐市",
      level: "district",
      adcode: 130184,
      lng: 114.683745,
      lat: 38.343952,
      childrenNum: 0,
      parent: 130100,
    },
    {
      name: "唐山市",
      level: "city",
      adcode: 130200,
      lng: 118.180149,
      lat: 39.63068,
      childrenNum: 14,
      parent: 13e4,
    },
    {
      name: "路南区",
      level: "district",
      adcode: 130202,
      lng: 118.154348,
      lat: 39.624988,
      childrenNum: 0,
      parent: 130200,
    },
    {
      name: "路北区",
      level: "district",
      adcode: 130203,
      lng: 118.201085,
      lat: 39.625079,
      childrenNum: 0,
      parent: 130200,
    },
    {
      name: "古冶区",
      level: "district",
      adcode: 130204,
      lng: 118.447134,
      lat: 39.73392,
      childrenNum: 0,
      parent: 130200,
    },
    {
      name: "开平区",
      level: "district",
      adcode: 130205,
      lng: 118.262246,
      lat: 39.671634,
      childrenNum: 0,
      parent: 130200,
    },
    {
      name: "丰南区",
      level: "district",
      adcode: 130207,
      lng: 118.085169,
      lat: 39.576031,
      childrenNum: 0,
      parent: 130200,
    },
    {
      name: "丰润区",
      level: "district",
      adcode: 130208,
      lng: 118.162426,
      lat: 39.832919,
      childrenNum: 0,
      parent: 130200,
    },
    {
      name: "曹妃甸区",
      level: "district",
      adcode: 130209,
      lng: 118.460197,
      lat: 39.273528,
      childrenNum: 0,
      parent: 130200,
    },
    {
      name: "滦南县",
      level: "district",
      adcode: 130224,
      lng: 118.68363,
      lat: 39.520272,
      childrenNum: 0,
      parent: 130200,
    },
    {
      name: "乐亭县",
      level: "district",
      adcode: 130225,
      lng: 118.91245,
      lat: 39.425748,
      childrenNum: 0,
      parent: 130200,
    },
    {
      name: "迁西县",
      level: "district",
      adcode: 130227,
      lng: 118.31467,
      lat: 40.141486,
      childrenNum: 0,
      parent: 130200,
    },
    {
      name: "玉田县",
      level: "district",
      adcode: 130229,
      lng: 117.738196,
      lat: 39.901827,
      childrenNum: 0,
      parent: 130200,
    },
    {
      name: "遵化市",
      level: "district",
      adcode: 130281,
      lng: 117.965878,
      lat: 40.189119,
      childrenNum: 0,
      parent: 130200,
    },
    {
      name: "迁安市",
      level: "district",
      adcode: 130283,
      lng: 118.701021,
      lat: 39.998861,
      childrenNum: 0,
      parent: 130200,
    },
    {
      name: "滦州市",
      level: "district",
      adcode: 130284,
      lng: 118.70301,
      lat: 39.740963,
      childrenNum: 0,
      parent: 130200,
    },
    {
      name: "秦皇岛市",
      level: "city",
      adcode: 130300,
      lng: 119.52022,
      lat: 39.888243,
      childrenNum: 7,
      parent: 13e4,
    },
    {
      name: "海港区",
      level: "district",
      adcode: 130302,
      lng: 119.564962,
      lat: 39.94756,
      childrenNum: 0,
      parent: 130300,
    },
    {
      name: "山海关区",
      level: "district",
      adcode: 130303,
      lng: 119.775187,
      lat: 39.978882,
      childrenNum: 0,
      parent: 130300,
    },
    {
      name: "北戴河区",
      level: "district",
      adcode: 130304,
      lng: 119.48449,
      lat: 39.834912,
      childrenNum: 0,
      parent: 130300,
    },
    {
      name: "抚宁区",
      level: "district",
      adcode: 130306,
      lng: 119.244847,
      lat: 39.876253,
      childrenNum: 0,
      parent: 130300,
    },
    {
      name: "青龙满族自治县",
      level: "district",
      adcode: 130321,
      lng: 118.94985,
      lat: 40.407473,
      childrenNum: 0,
      parent: 130300,
    },
    {
      name: "昌黎县",
      level: "district",
      adcode: 130322,
      lng: 119.199846,
      lat: 39.699677,
      childrenNum: 0,
      parent: 130300,
    },
    {
      name: "卢龙县",
      level: "district",
      adcode: 130324,
      lng: 118.891931,
      lat: 39.892564,
      childrenNum: 0,
      parent: 130300,
    },
    {
      name: "邯郸市",
      level: "city",
      adcode: 130400,
      lng: 114.53915,
      lat: 36.625849,
      childrenNum: 18,
      parent: 13e4,
    },
    {
      name: "邯山区",
      level: "district",
      adcode: 130402,
      lng: 114.531062,
      lat: 36.59457,
      childrenNum: 0,
      parent: 130400,
    },
    {
      name: "丛台区",
      level: "district",
      adcode: 130403,
      lng: 114.492875,
      lat: 36.636434,
      childrenNum: 0,
      parent: 130400,
    },
    {
      name: "复兴区",
      level: "district",
      adcode: 130404,
      lng: 114.462581,
      lat: 36.638879,
      childrenNum: 0,
      parent: 130400,
    },
    {
      name: "峰峰矿区",
      level: "district",
      adcode: 130406,
      lng: 114.212571,
      lat: 36.419298,
      childrenNum: 0,
      parent: 130400,
    },
    {
      name: "肥乡区",
      level: "district",
      adcode: 130407,
      lng: 114.800199,
      lat: 36.548545,
      childrenNum: 0,
      parent: 130400,
    },
    {
      name: "永年区",
      level: "district",
      adcode: 130408,
      lng: 114.536626,
      lat: 36.74188,
      childrenNum: 0,
      parent: 130400,
    },
    {
      name: "临漳县",
      level: "district",
      adcode: 130423,
      lng: 114.585514,
      lat: 36.322504,
      childrenNum: 0,
      parent: 130400,
    },
    {
      name: "成安县",
      level: "district",
      adcode: 130424,
      lng: 114.670094,
      lat: 36.445331,
      childrenNum: 0,
      parent: 130400,
    },
    {
      name: "大名县",
      level: "district",
      adcode: 130425,
      lng: 115.147985,
      lat: 36.286406,
      childrenNum: 0,
      parent: 130400,
    },
    {
      name: "涉县",
      level: "district",
      adcode: 130426,
      lng: 113.692157,
      lat: 36.586073,
      childrenNum: 0,
      parent: 130400,
    },
    {
      name: "磁县",
      level: "district",
      adcode: 130427,
      lng: 114.373965,
      lat: 36.37507,
      childrenNum: 0,
      parent: 130400,
    },
    {
      name: "邱县",
      level: "district",
      adcode: 130430,
      lng: 115.200049,
      lat: 36.811783,
      childrenNum: 0,
      parent: 130400,
    },
    {
      name: "鸡泽县",
      level: "district",
      adcode: 130431,
      lng: 114.889951,
      lat: 36.911525,
      childrenNum: 0,
      parent: 130400,
    },
    {
      name: "广平县",
      level: "district",
      adcode: 130432,
      lng: 114.948638,
      lat: 36.48382,
      childrenNum: 0,
      parent: 130400,
    },
    {
      name: "馆陶县",
      level: "district",
      adcode: 130433,
      lng: 115.281818,
      lat: 36.548295,
      childrenNum: 0,
      parent: 130400,
    },
    {
      name: "魏县",
      level: "district",
      adcode: 130434,
      lng: 114.939217,
      lat: 36.35926,
      childrenNum: 0,
      parent: 130400,
    },
    {
      name: "曲周县",
      level: "district",
      adcode: 130435,
      lng: 114.957549,
      lat: 36.766347,
      childrenNum: 0,
      parent: 130400,
    },
    {
      name: "武安市",
      level: "district",
      adcode: 130481,
      lng: 114.203685,
      lat: 36.69759,
      childrenNum: 0,
      parent: 130400,
    },
    {
      name: "邢台市",
      level: "city",
      adcode: 130500,
      lng: 114.49742,
      lat: 37.060227,
      childrenNum: 18,
      parent: 13e4,
    },
    {
      name: "襄都区",
      level: "district",
      adcode: 130502,
      lng: 114.507443,
      lat: 37.071314,
      childrenNum: 0,
      parent: 130500,
    },
    {
      name: "信都区",
      level: "district",
      adcode: 130503,
      lng: 114.468229,
      lat: 37.093798,
      childrenNum: 0,
      parent: 130500,
    },
    {
      name: "任泽区",
      level: "district",
      adcode: 130505,
      lng: 114.671339,
      lat: 37.121958,
      childrenNum: 0,
      parent: 130500,
    },
    {
      name: "南和区",
      level: "district",
      adcode: 130506,
      lng: 114.683683,
      lat: 37.005626,
      childrenNum: 0,
      parent: 130500,
    },
    {
      name: "临城县",
      level: "district",
      adcode: 130522,
      lng: 114.498651,
      lat: 37.444512,
      childrenNum: 0,
      parent: 130500,
    },
    {
      name: "内丘县",
      level: "district",
      adcode: 130523,
      lng: 114.512226,
      lat: 37.287612,
      childrenNum: 0,
      parent: 130500,
    },
    {
      name: "柏乡县",
      level: "district",
      adcode: 130524,
      lng: 114.693447,
      lat: 37.48288,
      childrenNum: 0,
      parent: 130500,
    },
    {
      name: "隆尧县",
      level: "district",
      adcode: 130525,
      lng: 114.770509,
      lat: 37.351232,
      childrenNum: 0,
      parent: 130500,
    },
    {
      name: "宁晋县",
      level: "district",
      adcode: 130528,
      lng: 114.940006,
      lat: 37.624524,
      childrenNum: 0,
      parent: 130500,
    },
    {
      name: "巨鹿县",
      level: "district",
      adcode: 130529,
      lng: 115.037884,
      lat: 37.221293,
      childrenNum: 0,
      parent: 130500,
    },
    {
      name: "新河县",
      level: "district",
      adcode: 130530,
      lng: 115.251005,
      lat: 37.520891,
      childrenNum: 0,
      parent: 130500,
    },
    {
      name: "广宗县",
      level: "district",
      adcode: 130531,
      lng: 115.142766,
      lat: 37.074795,
      childrenNum: 0,
      parent: 130500,
    },
    {
      name: "平乡县",
      level: "district",
      adcode: 130532,
      lng: 115.03008,
      lat: 37.063771,
      childrenNum: 0,
      parent: 130500,
    },
    {
      name: "威县",
      level: "district",
      adcode: 130533,
      lng: 115.266829,
      lat: 36.975164,
      childrenNum: 0,
      parent: 130500,
    },
    {
      name: "清河县",
      level: "district",
      adcode: 130534,
      lng: 115.665081,
      lat: 37.0451,
      childrenNum: 0,
      parent: 130500,
    },
    {
      name: "临西县",
      level: "district",
      adcode: 130535,
      lng: 115.501258,
      lat: 36.871312,
      childrenNum: 0,
      parent: 130500,
    },
    {
      name: "南宫市",
      level: "district",
      adcode: 130581,
      lng: 115.40866,
      lat: 37.358907,
      childrenNum: 0,
      parent: 130500,
    },
    {
      name: "沙河市",
      level: "district",
      adcode: 130582,
      lng: 114.503023,
      lat: 36.855548,
      childrenNum: 0,
      parent: 130500,
    },
    {
      name: "保定市",
      level: "city",
      adcode: 130600,
      lng: 115.464523,
      lat: 38.874476,
      childrenNum: 24,
      parent: 13e4,
    },
    {
      name: "竞秀区",
      level: "district",
      adcode: 130602,
      lng: 115.458671,
      lat: 38.877318,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "莲池区",
      level: "district",
      adcode: 130606,
      lng: 115.497153,
      lat: 38.883528,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "满城区",
      level: "district",
      adcode: 130607,
      lng: 115.322246,
      lat: 38.949732,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "清苑区",
      level: "district",
      adcode: 130608,
      lng: 115.48988,
      lat: 38.76527,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "徐水区",
      level: "district",
      adcode: 130609,
      lng: 115.655772,
      lat: 39.018781,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "涞水县",
      level: "district",
      adcode: 130623,
      lng: 115.713651,
      lat: 39.394305,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "阜平县",
      level: "district",
      adcode: 130624,
      lng: 114.195118,
      lat: 38.849221,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "定兴县",
      level: "district",
      adcode: 130626,
      lng: 115.808183,
      lat: 39.263219,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "唐县",
      level: "district",
      adcode: 130627,
      lng: 114.982968,
      lat: 38.748477,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "高阳县",
      level: "district",
      adcode: 130628,
      lng: 115.779149,
      lat: 38.700846,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "容城县",
      level: "district",
      adcode: 130629,
      lng: 115.861635,
      lat: 39.043321,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "涞源县",
      level: "district",
      adcode: 130630,
      lng: 114.694416,
      lat: 39.360622,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "望都县",
      level: "district",
      adcode: 130631,
      lng: 115.15542,
      lat: 38.696221,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "安新县",
      level: "district",
      adcode: 130632,
      lng: 115.935688,
      lat: 38.936102,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "易县",
      level: "district",
      adcode: 130633,
      lng: 115.497487,
      lat: 39.350219,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "曲阳县",
      level: "district",
      adcode: 130634,
      lng: 114.740476,
      lat: 38.614409,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "蠡县",
      level: "district",
      adcode: 130635,
      lng: 115.583701,
      lat: 38.488064,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "顺平县",
      level: "district",
      adcode: 130636,
      lng: 115.135133,
      lat: 38.837988,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "博野县",
      level: "district",
      adcode: 130637,
      lng: 115.464295,
      lat: 38.458048,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "雄县",
      level: "district",
      adcode: 130638,
      lng: 116.108624,
      lat: 38.994825,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "涿州市",
      level: "district",
      adcode: 130681,
      lng: 115.97444,
      lat: 39.485684,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "定州市",
      level: "district",
      adcode: 130682,
      lng: 114.990321,
      lat: 38.516746,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "安国市",
      level: "district",
      adcode: 130683,
      lng: 115.327088,
      lat: 38.418985,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "高碑店市",
      level: "district",
      adcode: 130684,
      lng: 115.873612,
      lat: 39.327233,
      childrenNum: 0,
      parent: 130600,
    },
    {
      name: "张家口市",
      level: "city",
      adcode: 130700,
      lng: 114.885895,
      lat: 40.768931,
      childrenNum: 16,
      parent: 13e4,
    },
    {
      name: "桥东区",
      level: "district",
      adcode: 130702,
      lng: 114.894114,
      lat: 40.788472,
      childrenNum: 0,
      parent: 130700,
    },
    {
      name: "桥西区",
      level: "district",
      adcode: 130703,
      lng: 114.868604,
      lat: 40.819553,
      childrenNum: 0,
      parent: 130700,
    },
    {
      name: "宣化区",
      level: "district",
      adcode: 130705,
      lng: 115.099515,
      lat: 40.609444,
      childrenNum: 0,
      parent: 130700,
    },
    {
      name: "下花园区",
      level: "district",
      adcode: 130706,
      lng: 115.287127,
      lat: 40.502628,
      childrenNum: 0,
      parent: 130700,
    },
    {
      name: "万全区",
      level: "district",
      adcode: 130708,
      lng: 114.740584,
      lat: 40.767377,
      childrenNum: 0,
      parent: 130700,
    },
    {
      name: "崇礼区",
      level: "district",
      adcode: 130709,
      lng: 115.282345,
      lat: 40.974741,
      childrenNum: 0,
      parent: 130700,
    },
    {
      name: "张北县",
      level: "district",
      adcode: 130722,
      lng: 114.719927,
      lat: 41.159039,
      childrenNum: 0,
      parent: 130700,
    },
    {
      name: "康保县",
      level: "district",
      adcode: 130723,
      lng: 114.60018,
      lat: 41.853016,
      childrenNum: 0,
      parent: 130700,
    },
    {
      name: "沽源县",
      level: "district",
      adcode: 130724,
      lng: 115.688544,
      lat: 41.670497,
      childrenNum: 0,
      parent: 130700,
    },
    {
      name: "尚义县",
      level: "district",
      adcode: 130725,
      lng: 113.968763,
      lat: 41.076588,
      childrenNum: 0,
      parent: 130700,
    },
    {
      name: "蔚县",
      level: "district",
      adcode: 130726,
      lng: 114.589136,
      lat: 39.840154,
      childrenNum: 0,
      parent: 130700,
    },
    {
      name: "阳原县",
      level: "district",
      adcode: 130727,
      lng: 114.150267,
      lat: 40.104303,
      childrenNum: 0,
      parent: 130700,
    },
    {
      name: "怀安县",
      level: "district",
      adcode: 130728,
      lng: 114.386488,
      lat: 40.67527,
      childrenNum: 0,
      parent: 130700,
    },
    {
      name: "怀来县",
      level: "district",
      adcode: 130730,
      lng: 115.517868,
      lat: 40.415625,
      childrenNum: 0,
      parent: 130700,
    },
    {
      name: "涿鹿县",
      level: "district",
      adcode: 130731,
      lng: 115.196835,
      lat: 40.382681,
      childrenNum: 0,
      parent: 130700,
    },
    {
      name: "赤城县",
      level: "district",
      adcode: 130732,
      lng: 115.831256,
      lat: 40.913348,
      childrenNum: 0,
      parent: 130700,
    },
    {
      name: "承德市",
      level: "city",
      adcode: 130800,
      lng: 117.962749,
      lat: 40.952942,
      childrenNum: 11,
      parent: 13e4,
    },
    {
      name: "双桥区",
      level: "district",
      adcode: 130802,
      lng: 117.943121,
      lat: 40.974679,
      childrenNum: 0,
      parent: 130800,
    },
    {
      name: "双滦区",
      level: "district",
      adcode: 130803,
      lng: 117.799588,
      lat: 40.959426,
      childrenNum: 0,
      parent: 130800,
    },
    {
      name: "鹰手营子矿区",
      level: "district",
      adcode: 130804,
      lng: 117.659341,
      lat: 40.546424,
      childrenNum: 0,
      parent: 130800,
    },
    {
      name: "承德县",
      level: "district",
      adcode: 130821,
      lng: 118.174166,
      lat: 40.768082,
      childrenNum: 0,
      parent: 130800,
    },
    {
      name: "兴隆县",
      level: "district",
      adcode: 130822,
      lng: 117.500558,
      lat: 40.417358,
      childrenNum: 0,
      parent: 130800,
    },
    {
      name: "滦平县",
      level: "district",
      adcode: 130824,
      lng: 117.332652,
      lat: 40.941644,
      childrenNum: 0,
      parent: 130800,
    },
    {
      name: "隆化县",
      level: "district",
      adcode: 130825,
      lng: 117.739026,
      lat: 41.314402,
      childrenNum: 0,
      parent: 130800,
    },
    {
      name: "丰宁满族自治县",
      level: "district",
      adcode: 130826,
      lng: 116.645798,
      lat: 41.209951,
      childrenNum: 0,
      parent: 130800,
    },
    {
      name: "宽城满族自治县",
      level: "district",
      adcode: 130827,
      lng: 118.485472,
      lat: 40.611333,
      childrenNum: 0,
      parent: 130800,
    },
    {
      name: "围场满族蒙古族自治县",
      level: "district",
      adcode: 130828,
      lng: 117.75934,
      lat: 41.938372,
      childrenNum: 0,
      parent: 130800,
    },
    {
      name: "平泉市",
      level: "district",
      adcode: 130881,
      lng: 118.702032,
      lat: 41.018482,
      childrenNum: 0,
      parent: 130800,
    },
    {
      name: "沧州市",
      level: "city",
      adcode: 130900,
      lng: 116.838715,
      lat: 38.304676,
      childrenNum: 16,
      parent: 13e4,
    },
    {
      name: "新华区",
      level: "district",
      adcode: 130902,
      lng: 116.866309,
      lat: 38.314094,
      childrenNum: 0,
      parent: 130900,
    },
    {
      name: "运河区",
      level: "district",
      adcode: 130903,
      lng: 116.842964,
      lat: 38.283456,
      childrenNum: 0,
      parent: 130900,
    },
    {
      name: "沧县",
      level: "district",
      adcode: 130921,
      lng: 117.007478,
      lat: 38.21985569,
      childrenNum: 0,
      parent: 130900,
    },
    {
      name: "青县",
      level: "district",
      adcode: 130922,
      lng: 116.804137,
      lat: 38.583657,
      childrenNum: 0,
      parent: 130900,
    },
    {
      name: "东光县",
      level: "district",
      adcode: 130923,
      lng: 116.537138,
      lat: 37.888844,
      childrenNum: 0,
      parent: 130900,
    },
    {
      name: "海兴县",
      level: "district",
      adcode: 130924,
      lng: 117.497545,
      lat: 38.143308,
      childrenNum: 0,
      parent: 130900,
    },
    {
      name: "盐山县",
      level: "district",
      adcode: 130925,
      lng: 117.230681,
      lat: 38.058074,
      childrenNum: 0,
      parent: 130900,
    },
    {
      name: "肃宁县",
      level: "district",
      adcode: 130926,
      lng: 115.829619,
      lat: 38.423044,
      childrenNum: 0,
      parent: 130900,
    },
    {
      name: "南皮县",
      level: "district",
      adcode: 130927,
      lng: 116.708603,
      lat: 38.038761,
      childrenNum: 0,
      parent: 130900,
    },
    {
      name: "吴桥县",
      level: "district",
      adcode: 130928,
      lng: 116.391557,
      lat: 37.628225,
      childrenNum: 0,
      parent: 130900,
    },
    {
      name: "献县",
      level: "district",
      adcode: 130929,
      lng: 116.122767,
      lat: 38.189924,
      childrenNum: 0,
      parent: 130900,
    },
    {
      name: "孟村回族自治县",
      level: "district",
      adcode: 130930,
      lng: 117.104514,
      lat: 38.053438,
      childrenNum: 0,
      parent: 130900,
    },
    {
      name: "泊头市",
      level: "district",
      adcode: 130981,
      lng: 116.578322,
      lat: 38.084262,
      childrenNum: 0,
      parent: 130900,
    },
    {
      name: "任丘市",
      level: "district",
      adcode: 130982,
      lng: 116.084412,
      lat: 38.685325,
      childrenNum: 0,
      parent: 130900,
    },
    {
      name: "黄骅市",
      level: "district",
      adcode: 130983,
      lng: 117.330043,
      lat: 38.372266,
      childrenNum: 0,
      parent: 130900,
    },
    {
      name: "河间市",
      level: "district",
      adcode: 130984,
      lng: 116.099362,
      lat: 38.446656,
      childrenNum: 0,
      parent: 130900,
    },
    {
      name: "廊坊市",
      level: "city",
      adcode: 131e3,
      lng: 116.683546,
      lat: 39.538304,
      childrenNum: 10,
      parent: 13e4,
    },
    {
      name: "安次区",
      level: "district",
      adcode: 131002,
      lng: 116.6945443,
      lat: 39.50256863,
      childrenNum: 0,
      parent: 131e3,
    },
    {
      name: "广阳区",
      level: "district",
      adcode: 131003,
      lng: 116.710667,
      lat: 39.52343,
      childrenNum: 0,
      parent: 131e3,
    },
    {
      name: "固安县",
      level: "district",
      adcode: 131022,
      lng: 116.298745,
      lat: 39.4382,
      childrenNum: 0,
      parent: 131e3,
    },
    {
      name: "永清县",
      level: "district",
      adcode: 131023,
      lng: 116.50608,
      lat: 39.330983,
      childrenNum: 0,
      parent: 131e3,
    },
    {
      name: "香河县",
      level: "district",
      adcode: 131024,
      lng: 117.006072,
      lat: 39.763772,
      childrenNum: 0,
      parent: 131e3,
    },
    {
      name: "大城县",
      level: "district",
      adcode: 131025,
      lng: 116.653917,
      lat: 38.705232,
      childrenNum: 0,
      parent: 131e3,
    },
    {
      name: "文安县",
      level: "district",
      adcode: 131026,
      lng: 116.457628,
      lat: 38.873185,
      childrenNum: 0,
      parent: 131e3,
    },
    {
      name: "大厂回族自治县",
      level: "district",
      adcode: 131028,
      lng: 116.98961,
      lat: 39.886569,
      childrenNum: 0,
      parent: 131e3,
    },
    {
      name: "霸州市",
      level: "district",
      adcode: 131081,
      lng: 116.391488,
      lat: 39.125238,
      childrenNum: 0,
      parent: 131e3,
    },
    {
      name: "三河市",
      level: "district",
      adcode: 131082,
      lng: 117.078269,
      lat: 39.982933,
      childrenNum: 0,
      parent: 131e3,
    },
    {
      name: "衡水市",
      level: "city",
      adcode: 131100,
      lng: 115.668987,
      lat: 37.739367,
      childrenNum: 11,
      parent: 13e4,
    },
    {
      name: "桃城区",
      level: "district",
      adcode: 131102,
      lng: 115.675208,
      lat: 37.735152,
      childrenNum: 0,
      parent: 131100,
    },
    {
      name: "冀州区",
      level: "district",
      adcode: 131103,
      lng: 115.579392,
      lat: 37.550922,
      childrenNum: 0,
      parent: 131100,
    },
    {
      name: "枣强县",
      level: "district",
      adcode: 131121,
      lng: 115.724365,
      lat: 37.514217,
      childrenNum: 0,
      parent: 131100,
    },
    {
      name: "武邑县",
      level: "district",
      adcode: 131122,
      lng: 115.887498,
      lat: 37.802036,
      childrenNum: 0,
      parent: 131100,
    },
    {
      name: "武强县",
      level: "district",
      adcode: 131123,
      lng: 115.982119,
      lat: 38.041447,
      childrenNum: 0,
      parent: 131100,
    },
    {
      name: "饶阳县",
      level: "district",
      adcode: 131124,
      lng: 115.725898,
      lat: 38.235313,
      childrenNum: 0,
      parent: 131100,
    },
    {
      name: "安平县",
      level: "district",
      adcode: 131125,
      lng: 115.518918,
      lat: 38.234769,
      childrenNum: 0,
      parent: 131100,
    },
    {
      name: "故城县",
      level: "district",
      adcode: 131126,
      lng: 115.965877,
      lat: 37.347873,
      childrenNum: 0,
      parent: 131100,
    },
    {
      name: "景县",
      level: "district",
      adcode: 131127,
      lng: 116.270558,
      lat: 37.692831,
      childrenNum: 0,
      parent: 131100,
    },
    {
      name: "阜城县",
      level: "district",
      adcode: 131128,
      lng: 116.175424,
      lat: 37.862984,
      childrenNum: 0,
      parent: 131100,
    },
    {
      name: "深州市",
      level: "district",
      adcode: 131182,
      lng: 115.559576,
      lat: 38.001535,
      childrenNum: 0,
      parent: 131100,
    },
    {
      name: "山西省",
      level: "province",
      adcode: 14e4,
      lng: 112.578781,
      lat: 37.813948,
      childrenNum: 11,
      parent: 1e5,
    },
    {
      name: "太原市",
      level: "city",
      adcode: 140100,
      lng: 112.549656,
      lat: 37.870451,
      childrenNum: 10,
      parent: 14e4,
    },
    {
      name: "小店区",
      level: "district",
      adcode: 140105,
      lng: 112.565524,
      lat: 37.736865,
      childrenNum: 0,
      parent: 140100,
    },
    {
      name: "迎泽区",
      level: "district",
      adcode: 140106,
      lng: 112.563373,
      lat: 37.863308,
      childrenNum: 0,
      parent: 140100,
    },
    {
      name: "杏花岭区",
      level: "district",
      adcode: 140107,
      lng: 112.570412,
      lat: 37.894241,
      childrenNum: 0,
      parent: 140100,
    },
    {
      name: "尖草坪区",
      level: "district",
      adcode: 140108,
      lng: 112.486141,
      lat: 37.940052,
      childrenNum: 0,
      parent: 140100,
    },
    {
      name: "万柏林区",
      level: "district",
      adcode: 140109,
      lng: 112.515638,
      lat: 37.859738,
      childrenNum: 0,
      parent: 140100,
    },
    {
      name: "晋源区",
      level: "district",
      adcode: 140110,
      lng: 112.477869,
      lat: 37.715519,
      childrenNum: 0,
      parent: 140100,
    },
    {
      name: "清徐县",
      level: "district",
      adcode: 140121,
      lng: 112.359367,
      lat: 37.608751,
      childrenNum: 0,
      parent: 140100,
    },
    {
      name: "阳曲县",
      level: "district",
      adcode: 140122,
      lng: 112.67292,
      lat: 38.058511,
      childrenNum: 0,
      parent: 140100,
    },
    {
      name: "娄烦县",
      level: "district",
      adcode: 140123,
      lng: 111.79715,
      lat: 38.067569,
      childrenNum: 0,
      parent: 140100,
    },
    {
      name: "古交市",
      level: "district",
      adcode: 140181,
      lng: 112.175034,
      lat: 37.907414,
      childrenNum: 0,
      parent: 140100,
    },
    {
      name: "大同市",
      level: "city",
      adcode: 140200,
      lng: 113.366749,
      lat: 40.09711,
      childrenNum: 10,
      parent: 14e4,
    },
    {
      name: "新荣区",
      level: "district",
      adcode: 140212,
      lng: 113.139628,
      lat: 40.256355,
      childrenNum: 0,
      parent: 140200,
    },
    {
      name: "平城区",
      level: "district",
      adcode: 140213,
      lng: 113.298011,
      lat: 40.075246,
      childrenNum: 0,
      parent: 140200,
    },
    {
      name: "云冈区",
      level: "district",
      adcode: 140214,
      lng: 113.149604,
      lat: 40.005383,
      childrenNum: 0,
      parent: 140200,
    },
    {
      name: "云州区",
      level: "district",
      adcode: 140215,
      lng: 113.612496,
      lat: 40.040156,
      childrenNum: 0,
      parent: 140200,
    },
    {
      name: "阳高县",
      level: "district",
      adcode: 140221,
      lng: 113.748944,
      lat: 40.361059,
      childrenNum: 0,
      parent: 140200,
    },
    {
      name: "天镇县",
      level: "district",
      adcode: 140222,
      lng: 114.090871,
      lat: 40.42087,
      childrenNum: 0,
      parent: 140200,
    },
    {
      name: "广灵县",
      level: "district",
      adcode: 140223,
      lng: 114.282703,
      lat: 39.760404,
      childrenNum: 0,
      parent: 140200,
    },
    {
      name: "灵丘县",
      level: "district",
      adcode: 140224,
      lng: 114.234452,
      lat: 39.442459,
      childrenNum: 0,
      parent: 140200,
    },
    {
      name: "浑源县",
      level: "district",
      adcode: 140225,
      lng: 113.69183,
      lat: 39.706485,
      childrenNum: 0,
      parent: 140200,
    },
    {
      name: "左云县",
      level: "district",
      adcode: 140226,
      lng: 112.703008,
      lat: 40.013442,
      childrenNum: 0,
      parent: 140200,
    },
    {
      name: "阳泉市",
      level: "city",
      adcode: 140300,
      lng: 113.580426,
      lat: 37.857094,
      childrenNum: 5,
      parent: 14e4,
    },
    {
      name: "城区",
      level: "district",
      adcode: 140302,
      lng: 113.600694,
      lat: 37.847457,
      childrenNum: 0,
      parent: 140300,
    },
    {
      name: "矿区",
      level: "district",
      adcode: 140303,
      lng: 113.555279,
      lat: 37.868494,
      childrenNum: 0,
      parent: 140300,
    },
    {
      name: "郊区",
      level: "district",
      adcode: 140311,
      lng: 113.593998,
      lat: 37.943703,
      childrenNum: 0,
      parent: 140300,
    },
    {
      name: "平定县",
      level: "district",
      adcode: 140321,
      lng: 113.629777,
      lat: 37.804986,
      childrenNum: 0,
      parent: 140300,
    },
    {
      name: "盂县",
      level: "district",
      adcode: 140322,
      lng: 113.412279,
      lat: 38.086041,
      childrenNum: 0,
      parent: 140300,
    },
    {
      name: "长治市",
      level: "city",
      adcode: 140400,
      lng: 113.117394,
      lat: 36.195142,
      childrenNum: 12,
      parent: 14e4,
    },
    {
      name: "潞州区",
      level: "district",
      adcode: 140403,
      lng: 113.122725,
      lat: 36.203305,
      childrenNum: 0,
      parent: 140400,
    },
    {
      name: "上党区",
      level: "district",
      adcode: 140404,
      lng: 113.051416,
      lat: 36.053104,
      childrenNum: 0,
      parent: 140400,
    },
    {
      name: "屯留区",
      level: "district",
      adcode: 140405,
      lng: 112.892301,
      lat: 36.3162,
      childrenNum: 0,
      parent: 140400,
    },
    {
      name: "潞城区",
      level: "district",
      adcode: 140406,
      lng: 113.228897,
      lat: 36.334597,
      childrenNum: 0,
      parent: 140400,
    },
    {
      name: "襄垣县",
      level: "district",
      adcode: 140423,
      lng: 113.051298,
      lat: 36.535629,
      childrenNum: 0,
      parent: 140400,
    },
    {
      name: "平顺县",
      level: "district",
      adcode: 140425,
      lng: 113.435859,
      lat: 36.20037,
      childrenNum: 0,
      parent: 140400,
    },
    {
      name: "黎城县",
      level: "district",
      adcode: 140426,
      lng: 113.387025,
      lat: 36.502258,
      childrenNum: 0,
      parent: 140400,
    },
    {
      name: "壶关县",
      level: "district",
      adcode: 140427,
      lng: 113.206836,
      lat: 36.115645,
      childrenNum: 0,
      parent: 140400,
    },
    {
      name: "长子县",
      level: "district",
      adcode: 140428,
      lng: 112.877922,
      lat: 36.122258,
      childrenNum: 0,
      parent: 140400,
    },
    {
      name: "武乡县",
      level: "district",
      adcode: 140429,
      lng: 112.86396,
      lat: 36.837865,
      childrenNum: 0,
      parent: 140400,
    },
    {
      name: "沁县",
      level: "district",
      adcode: 140430,
      lng: 112.699176,
      lat: 36.756152,
      childrenNum: 0,
      parent: 140400,
    },
    {
      name: "沁源县",
      level: "district",
      adcode: 140431,
      lng: 112.337726,
      lat: 36.499989,
      childrenNum: 0,
      parent: 140400,
    },
    {
      name: "晋城市",
      level: "city",
      adcode: 140500,
      lng: 112.852022,
      lat: 35.491315,
      childrenNum: 6,
      parent: 14e4,
    },
    {
      name: "城区",
      level: "district",
      adcode: 140502,
      lng: 112.853452,
      lat: 35.50248,
      childrenNum: 0,
      parent: 140500,
    },
    {
      name: "沁水县",
      level: "district",
      adcode: 140521,
      lng: 112.186726,
      lat: 35.690119,
      childrenNum: 0,
      parent: 140500,
    },
    {
      name: "阳城县",
      level: "district",
      adcode: 140522,
      lng: 112.414798,
      lat: 35.486275,
      childrenNum: 0,
      parent: 140500,
    },
    {
      name: "陵川县",
      level: "district",
      adcode: 140524,
      lng: 113.280755,
      lat: 35.775239,
      childrenNum: 0,
      parent: 140500,
    },
    {
      name: "泽州县",
      level: "district",
      adcode: 140525,
      lng: 112.922243,
      lat: 35.507061,
      childrenNum: 0,
      parent: 140500,
    },
    {
      name: "高平市",
      level: "district",
      adcode: 140581,
      lng: 112.923798,
      lat: 35.798775,
      childrenNum: 0,
      parent: 140500,
    },
    {
      name: "朔州市",
      level: "city",
      adcode: 140600,
      lng: 112.432906,
      lat: 39.331734,
      childrenNum: 6,
      parent: 14e4,
    },
    {
      name: "朔城区",
      level: "district",
      adcode: 140602,
      lng: 112.432071,
      lat: 39.320196,
      childrenNum: 0,
      parent: 140600,
    },
    {
      name: "平鲁区",
      level: "district",
      adcode: 140603,
      lng: 112.28827,
      lat: 39.512219,
      childrenNum: 0,
      parent: 140600,
    },
    {
      name: "山阴县",
      level: "district",
      adcode: 140621,
      lng: 112.816421,
      lat: 39.527445,
      childrenNum: 0,
      parent: 140600,
    },
    {
      name: "应县",
      level: "district",
      adcode: 140622,
      lng: 113.190952,
      lat: 39.554471,
      childrenNum: 0,
      parent: 140600,
    },
    {
      name: "右玉县",
      level: "district",
      adcode: 140623,
      lng: 112.466926,
      lat: 39.989198,
      childrenNum: 0,
      parent: 140600,
    },
    {
      name: "怀仁市",
      level: "district",
      adcode: 140681,
      lng: 113.133061,
      lat: 39.820522,
      childrenNum: 0,
      parent: 140600,
    },
    {
      name: "晋中市",
      level: "city",
      adcode: 140700,
      lng: 112.752633,
      lat: 37.688006,
      childrenNum: 11,
      parent: 14e4,
    },
    {
      name: "榆次区",
      level: "district",
      adcode: 140702,
      lng: 112.707564,
      lat: 37.698637,
      childrenNum: 0,
      parent: 140700,
    },
    {
      name: "太谷区",
      level: "district",
      adcode: 140703,
      lng: 112.551297,
      lat: 37.421392,
      childrenNum: 0,
      parent: 140700,
    },
    {
      name: "榆社县",
      level: "district",
      adcode: 140721,
      lng: 112.975378,
      lat: 37.071209,
      childrenNum: 0,
      parent: 140700,
    },
    {
      name: "左权县",
      level: "district",
      adcode: 140722,
      lng: 113.379412,
      lat: 37.082746,
      childrenNum: 0,
      parent: 140700,
    },
    {
      name: "和顺县",
      level: "district",
      adcode: 140723,
      lng: 113.570295,
      lat: 37.329696,
      childrenNum: 0,
      parent: 140700,
    },
    {
      name: "昔阳县",
      level: "district",
      adcode: 140724,
      lng: 113.707151,
      lat: 37.612577,
      childrenNum: 0,
      parent: 140700,
    },
    {
      name: "寿阳县",
      level: "district",
      adcode: 140725,
      lng: 113.176373,
      lat: 37.895191,
      childrenNum: 0,
      parent: 140700,
    },
    {
      name: "祁县",
      level: "district",
      adcode: 140727,
      lng: 112.335226,
      lat: 37.358425,
      childrenNum: 0,
      parent: 140700,
    },
    {
      name: "平遥县",
      level: "district",
      adcode: 140728,
      lng: 112.175825,
      lat: 37.189614,
      childrenNum: 0,
      parent: 140700,
    },
    {
      name: "灵石县",
      level: "district",
      adcode: 140729,
      lng: 111.778692,
      lat: 36.848085,
      childrenNum: 0,
      parent: 140700,
    },
    {
      name: "介休市",
      level: "district",
      adcode: 140781,
      lng: 111.916451,
      lat: 37.027538,
      childrenNum: 0,
      parent: 140700,
    },
    {
      name: "运城市",
      level: "city",
      adcode: 140800,
      lng: 111.007051,
      lat: 35.02667,
      childrenNum: 13,
      parent: 14e4,
    },
    {
      name: "盐湖区",
      level: "district",
      adcode: 140802,
      lng: 110.998135,
      lat: 35.015549,
      childrenNum: 0,
      parent: 140800,
    },
    {
      name: "临猗县",
      level: "district",
      adcode: 140821,
      lng: 110.774553,
      lat: 35.144406,
      childrenNum: 0,
      parent: 140800,
    },
    {
      name: "万荣县",
      level: "district",
      adcode: 140822,
      lng: 110.837957,
      lat: 35.415805,
      childrenNum: 0,
      parent: 140800,
    },
    {
      name: "闻喜县",
      level: "district",
      adcode: 140823,
      lng: 111.224485,
      lat: 35.356664,
      childrenNum: 0,
      parent: 140800,
    },
    {
      name: "稷山县",
      level: "district",
      adcode: 140824,
      lng: 110.983273,
      lat: 35.604515,
      childrenNum: 0,
      parent: 140800,
    },
    {
      name: "新绛县",
      level: "district",
      adcode: 140825,
      lng: 111.224767,
      lat: 35.616007,
      childrenNum: 0,
      parent: 140800,
    },
    {
      name: "绛县",
      level: "district",
      adcode: 140826,
      lng: 111.568849,
      lat: 35.491764,
      childrenNum: 0,
      parent: 140800,
    },
    {
      name: "垣曲县",
      level: "district",
      adcode: 140827,
      lng: 111.670215,
      lat: 35.298297,
      childrenNum: 0,
      parent: 140800,
    },
    {
      name: "夏县",
      level: "district",
      adcode: 140828,
      lng: 111.219946,
      lat: 35.140733,
      childrenNum: 0,
      parent: 140800,
    },
    {
      name: "平陆县",
      level: "district",
      adcode: 140829,
      lng: 111.193957,
      lat: 34.829595,
      childrenNum: 0,
      parent: 140800,
    },
    {
      name: "芮城县",
      level: "district",
      adcode: 140830,
      lng: 110.694418,
      lat: 34.694173,
      childrenNum: 0,
      parent: 140800,
    },
    {
      name: "永济市",
      level: "district",
      adcode: 140881,
      lng: 110.447771,
      lat: 34.866499,
      childrenNum: 0,
      parent: 140800,
    },
    {
      name: "河津市",
      level: "district",
      adcode: 140882,
      lng: 110.712032,
      lat: 35.596357,
      childrenNum: 0,
      parent: 140800,
    },
    {
      name: "忻州市",
      level: "city",
      adcode: 140900,
      lng: 112.734149,
      lat: 38.415958,
      childrenNum: 14,
      parent: 14e4,
    },
    {
      name: "忻府区",
      level: "district",
      adcode: 140902,
      lng: 112.746357,
      lat: 38.403498,
      childrenNum: 0,
      parent: 140900,
    },
    {
      name: "定襄县",
      level: "district",
      adcode: 140921,
      lng: 112.957234,
      lat: 38.471725,
      childrenNum: 0,
      parent: 140900,
    },
    {
      name: "五台县",
      level: "district",
      adcode: 140922,
      lng: 113.255419,
      lat: 38.728056,
      childrenNum: 0,
      parent: 140900,
    },
    {
      name: "代县",
      level: "district",
      adcode: 140923,
      lng: 112.960102,
      lat: 39.066831,
      childrenNum: 0,
      parent: 140900,
    },
    {
      name: "繁峙县",
      level: "district",
      adcode: 140924,
      lng: 113.265464,
      lat: 39.188835,
      childrenNum: 0,
      parent: 140900,
    },
    {
      name: "宁武县",
      level: "district",
      adcode: 140925,
      lng: 112.304734,
      lat: 39.001498,
      childrenNum: 0,
      parent: 140900,
    },
    {
      name: "静乐县",
      level: "district",
      adcode: 140926,
      lng: 111.939498,
      lat: 38.359306,
      childrenNum: 0,
      parent: 140900,
    },
    {
      name: "神池县",
      level: "district",
      adcode: 140927,
      lng: 112.210997,
      lat: 39.091079,
      childrenNum: 0,
      parent: 140900,
    },
    {
      name: "五寨县",
      level: "district",
      adcode: 140928,
      lng: 111.846808,
      lat: 38.91111,
      childrenNum: 0,
      parent: 140900,
    },
    {
      name: "岢岚县",
      level: "district",
      adcode: 140929,
      lng: 111.572964,
      lat: 38.703989,
      childrenNum: 0,
      parent: 140900,
    },
    {
      name: "河曲县",
      level: "district",
      adcode: 140930,
      lng: 111.138247,
      lat: 39.38452,
      childrenNum: 0,
      parent: 140900,
    },
    {
      name: "保德县",
      level: "district",
      adcode: 140931,
      lng: 111.085944,
      lat: 39.022616,
      childrenNum: 0,
      parent: 140900,
    },
    {
      name: "偏关县",
      level: "district",
      adcode: 140932,
      lng: 111.508922,
      lat: 39.436917,
      childrenNum: 0,
      parent: 140900,
    },
    {
      name: "原平市",
      level: "district",
      adcode: 140981,
      lng: 112.711025,
      lat: 38.731412,
      childrenNum: 0,
      parent: 140900,
    },
    {
      name: "临汾市",
      level: "city",
      adcode: 141e3,
      lng: 111.51931,
      lat: 36.088581,
      childrenNum: 17,
      parent: 14e4,
    },
    {
      name: "尧都区",
      level: "district",
      adcode: 141002,
      lng: 111.578797,
      lat: 36.082463,
      childrenNum: 0,
      parent: 141e3,
    },
    {
      name: "曲沃县",
      level: "district",
      adcode: 141021,
      lng: 111.475783,
      lat: 35.641883,
      childrenNum: 0,
      parent: 141e3,
    },
    {
      name: "翼城县",
      level: "district",
      adcode: 141022,
      lng: 111.719048,
      lat: 35.739706,
      childrenNum: 0,
      parent: 141e3,
    },
    {
      name: "襄汾县",
      level: "district",
      adcode: 141023,
      lng: 111.441725,
      lat: 35.876293,
      childrenNum: 0,
      parent: 141e3,
    },
    {
      name: "洪洞县",
      level: "district",
      adcode: 141024,
      lng: 111.67571,
      lat: 36.254087,
      childrenNum: 0,
      parent: 141e3,
    },
    {
      name: "古县",
      level: "district",
      adcode: 141025,
      lng: 111.92031,
      lat: 36.266767,
      childrenNum: 0,
      parent: 141e3,
    },
    {
      name: "安泽县",
      level: "district",
      adcode: 141026,
      lng: 112.250242,
      lat: 36.147921,
      childrenNum: 0,
      parent: 141e3,
    },
    {
      name: "浮山县",
      level: "district",
      adcode: 141027,
      lng: 111.848883,
      lat: 35.968124,
      childrenNum: 0,
      parent: 141e3,
    },
    {
      name: "吉县",
      level: "district",
      adcode: 141028,
      lng: 110.680513,
      lat: 36.096833,
      childrenNum: 0,
      parent: 141e3,
    },
    {
      name: "乡宁县",
      level: "district",
      adcode: 141029,
      lng: 110.846585,
      lat: 35.970834,
      childrenNum: 0,
      parent: 141e3,
    },
    {
      name: "大宁县",
      level: "district",
      adcode: 141030,
      lng: 110.752914,
      lat: 36.465126,
      childrenNum: 0,
      parent: 141e3,
    },
    {
      name: "隰县",
      level: "district",
      adcode: 141031,
      lng: 110.940752,
      lat: 36.693345,
      childrenNum: 0,
      parent: 141e3,
    },
    {
      name: "永和县",
      level: "district",
      adcode: 141032,
      lng: 110.631981,
      lat: 36.759524,
      childrenNum: 0,
      parent: 141e3,
    },
    {
      name: "蒲县",
      level: "district",
      adcode: 141033,
      lng: 111.096457,
      lat: 36.41183,
      childrenNum: 0,
      parent: 141e3,
    },
    {
      name: "汾西县",
      level: "district",
      adcode: 141034,
      lng: 111.563993,
      lat: 36.652833,
      childrenNum: 0,
      parent: 141e3,
    },
    {
      name: "侯马市",
      level: "district",
      adcode: 141081,
      lng: 111.372002,
      lat: 35.619105,
      childrenNum: 0,
      parent: 141e3,
    },
    {
      name: "霍州市",
      level: "district",
      adcode: 141082,
      lng: 111.755111,
      lat: 36.569046,
      childrenNum: 0,
      parent: 141e3,
    },
    {
      name: "吕梁市",
      level: "city",
      adcode: 141100,
      lng: 111.14454,
      lat: 37.518996,
      childrenNum: 13,
      parent: 14e4,
    },
    {
      name: "离石区",
      level: "district",
      adcode: 141102,
      lng: 111.150325,
      lat: 37.517797,
      childrenNum: 0,
      parent: 141100,
    },
    {
      name: "文水县",
      level: "district",
      adcode: 141121,
      lng: 112.028866,
      lat: 37.438101,
      childrenNum: 0,
      parent: 141100,
    },
    {
      name: "交城县",
      level: "district",
      adcode: 141122,
      lng: 112.155857,
      lat: 37.55169,
      childrenNum: 0,
      parent: 141100,
    },
    {
      name: "兴县",
      level: "district",
      adcode: 141123,
      lng: 111.127486,
      lat: 38.461818,
      childrenNum: 0,
      parent: 141100,
    },
    {
      name: "临县",
      level: "district",
      adcode: 141124,
      lng: 110.992712,
      lat: 37.951008,
      childrenNum: 0,
      parent: 141100,
    },
    {
      name: "柳林县",
      level: "district",
      adcode: 141125,
      lng: 110.888993,
      lat: 37.429816,
      childrenNum: 0,
      parent: 141100,
    },
    {
      name: "石楼县",
      level: "district",
      adcode: 141126,
      lng: 110.834712,
      lat: 36.998461,
      childrenNum: 0,
      parent: 141100,
    },
    {
      name: "岚县",
      level: "district",
      adcode: 141127,
      lng: 111.672156,
      lat: 38.279587,
      childrenNum: 0,
      parent: 141100,
    },
    {
      name: "方山县",
      level: "district",
      adcode: 141128,
      lng: 111.244309,
      lat: 37.895017,
      childrenNum: 0,
      parent: 141100,
    },
    {
      name: "中阳县",
      level: "district",
      adcode: 141129,
      lng: 111.178841,
      lat: 37.357816,
      childrenNum: 0,
      parent: 141100,
    },
    {
      name: "交口县",
      level: "district",
      adcode: 141130,
      lng: 111.181241,
      lat: 36.982205,
      childrenNum: 0,
      parent: 141100,
    },
    {
      name: "孝义市",
      level: "district",
      adcode: 141181,
      lng: 111.778935,
      lat: 37.146051,
      childrenNum: 0,
      parent: 141100,
    },
    {
      name: "汾阳市",
      level: "district",
      adcode: 141182,
      lng: 111.770834,
      lat: 37.261493,
      childrenNum: 0,
      parent: 141100,
    },
    {
      name: "内蒙古自治区",
      level: "province",
      adcode: 15e4,
      lng: 111.765226,
      lat: 40.818233,
      childrenNum: 12,
      parent: 1e5,
    },
    {
      name: "呼和浩特市",
      level: "city",
      adcode: 150100,
      lng: 111.748814,
      lat: 40.842127,
      childrenNum: 9,
      parent: 15e4,
    },
    {
      name: "新城区",
      level: "district",
      adcode: 150102,
      lng: 111.665325,
      lat: 40.858271,
      childrenNum: 0,
      parent: 150100,
    },
    {
      name: "回民区",
      level: "district",
      adcode: 150103,
      lng: 111.623485,
      lat: 40.808906,
      childrenNum: 0,
      parent: 150100,
    },
    {
      name: "玉泉区",
      level: "district",
      adcode: 150104,
      lng: 111.674157,
      lat: 40.753054,
      childrenNum: 0,
      parent: 150100,
    },
    {
      name: "赛罕区",
      level: "district",
      adcode: 150105,
      lng: 111.701166,
      lat: 40.792508,
      childrenNum: 0,
      parent: 150100,
    },
    {
      name: "土默特左旗",
      level: "district",
      adcode: 150121,
      lng: 111.16373,
      lat: 40.729044,
      childrenNum: 0,
      parent: 150100,
    },
    {
      name: "托克托县",
      level: "district",
      adcode: 150122,
      lng: 111.193879,
      lat: 40.277703,
      childrenNum: 0,
      parent: 150100,
    },
    {
      name: "和林格尔县",
      level: "district",
      adcode: 150123,
      lng: 111.821695,
      lat: 40.379226,
      childrenNum: 0,
      parent: 150100,
    },
    {
      name: "清水河县",
      level: "district",
      adcode: 150124,
      lng: 111.647351,
      lat: 39.921224,
      childrenNum: 0,
      parent: 150100,
    },
    {
      name: "武川县",
      level: "district",
      adcode: 150125,
      lng: 111.451226,
      lat: 41.096511,
      childrenNum: 0,
      parent: 150100,
    },
    {
      name: "包头市",
      level: "city",
      adcode: 150200,
      lng: 109.95315,
      lat: 40.621327,
      childrenNum: 9,
      parent: 15e4,
    },
    {
      name: "东河区",
      level: "district",
      adcode: 150202,
      lng: 110.044008,
      lat: 40.57626,
      childrenNum: 0,
      parent: 150200,
    },
    {
      name: "昆都仑区",
      level: "district",
      adcode: 150203,
      lng: 109.840249,
      lat: 40.658075,
      childrenNum: 0,
      parent: 150200,
    },
    {
      name: "青山区",
      level: "district",
      adcode: 150204,
      lng: 109.902157,
      lat: 40.644081,
      childrenNum: 0,
      parent: 150200,
    },
    {
      name: "石拐区",
      level: "district",
      adcode: 150205,
      lng: 110.060783,
      lat: 40.676736,
      childrenNum: 0,
      parent: 150200,
    },
    {
      name: "白云鄂博矿区",
      level: "district",
      adcode: 150206,
      lng: 109.973076,
      lat: 41.769701,
      childrenNum: 0,
      parent: 150200,
    },
    {
      name: "九原区",
      level: "district",
      adcode: 150207,
      lng: 109.968082,
      lat: 40.611346,
      childrenNum: 0,
      parent: 150200,
    },
    {
      name: "土默特右旗",
      level: "district",
      adcode: 150221,
      lng: 110.527831,
      lat: 40.578253,
      childrenNum: 0,
      parent: 150200,
    },
    {
      name: "固阳县",
      level: "district",
      adcode: 150222,
      lng: 110.060055,
      lat: 41.034757,
      childrenNum: 0,
      parent: 150200,
    },
    {
      name: "达尔罕茂明安联合旗",
      level: "district",
      adcode: 150223,
      lng: 110.432626,
      lat: 41.698992,
      childrenNum: 0,
      parent: 150200,
    },
    {
      name: "乌海市",
      level: "city",
      adcode: 150300,
      lng: 106.79415,
      lat: 39.655048,
      childrenNum: 3,
      parent: 15e4,
    },
    {
      name: "海勃湾区",
      level: "district",
      adcode: 150302,
      lng: 106.8228,
      lat: 39.690873,
      childrenNum: 0,
      parent: 150300,
    },
    {
      name: "海南区",
      level: "district",
      adcode: 150303,
      lng: 106.891472,
      lat: 39.441803,
      childrenNum: 0,
      parent: 150300,
    },
    {
      name: "乌达区",
      level: "district",
      adcode: 150304,
      lng: 106.726043,
      lat: 39.505609,
      childrenNum: 0,
      parent: 150300,
    },
    {
      name: "赤峰市",
      level: "city",
      adcode: 150400,
      lng: 118.887613,
      lat: 42.256876,
      childrenNum: 12,
      parent: 15e4,
    },
    {
      name: "红山区",
      level: "district",
      adcode: 150402,
      lng: 118.953989,
      lat: 42.296317,
      childrenNum: 0,
      parent: 150400,
    },
    {
      name: "元宝山区",
      level: "district",
      adcode: 150403,
      lng: 119.288475,
      lat: 42.039602,
      childrenNum: 0,
      parent: 150400,
    },
    {
      name: "松山区",
      level: "district",
      adcode: 150404,
      lng: 118.916156,
      lat: 42.299795,
      childrenNum: 0,
      parent: 150400,
    },
    {
      name: "阿鲁科尔沁旗",
      level: "district",
      adcode: 150421,
      lng: 120.065533,
      lat: 43.872398,
      childrenNum: 0,
      parent: 150400,
    },
    {
      name: "巴林左旗",
      level: "district",
      adcode: 150422,
      lng: 119.362832,
      lat: 43.961547,
      childrenNum: 0,
      parent: 150400,
    },
    {
      name: "巴林右旗",
      level: "district",
      adcode: 150423,
      lng: 118.664235,
      lat: 43.534171,
      childrenNum: 0,
      parent: 150400,
    },
    {
      name: "林西县",
      level: "district",
      adcode: 150424,
      lng: 118.05545,
      lat: 43.61812,
      childrenNum: 0,
      parent: 150400,
    },
    {
      name: "克什克腾旗",
      level: "district",
      adcode: 150425,
      lng: 117.545413,
      lat: 43.265057,
      childrenNum: 0,
      parent: 150400,
    },
    {
      name: "翁牛特旗",
      level: "district",
      adcode: 150426,
      lng: 119.006187,
      lat: 42.936529,
      childrenNum: 0,
      parent: 150400,
    },
    {
      name: "喀喇沁旗",
      level: "district",
      adcode: 150428,
      lng: 118.701934,
      lat: 41.927103,
      childrenNum: 0,
      parent: 150400,
    },
    {
      name: "宁城县",
      level: "district",
      adcode: 150429,
      lng: 119.320056,
      lat: 41.600193,
      childrenNum: 0,
      parent: 150400,
    },
    {
      name: "敖汉旗",
      level: "district",
      adcode: 150430,
      lng: 119.921413,
      lat: 42.290731,
      childrenNum: 0,
      parent: 150400,
    },
    {
      name: "通辽市",
      level: "city",
      adcode: 150500,
      lng: 122.243309,
      lat: 43.653566,
      childrenNum: 8,
      parent: 15e4,
    },
    {
      name: "科尔沁区",
      level: "district",
      adcode: 150502,
      lng: 122.25545,
      lat: 43.623133,
      childrenNum: 0,
      parent: 150500,
    },
    {
      name: "科尔沁左翼中旗",
      level: "district",
      adcode: 150521,
      lng: 123.312202,
      lat: 44.126606,
      childrenNum: 0,
      parent: 150500,
    },
    {
      name: "科尔沁左翼后旗",
      level: "district",
      adcode: 150522,
      lng: 122.35677,
      lat: 42.935105,
      childrenNum: 0,
      parent: 150500,
    },
    {
      name: "开鲁县",
      level: "district",
      adcode: 150523,
      lng: 121.319216,
      lat: 43.601446,
      childrenNum: 0,
      parent: 150500,
    },
    {
      name: "库伦旗",
      level: "district",
      adcode: 150524,
      lng: 121.810629,
      lat: 42.735556,
      childrenNum: 0,
      parent: 150500,
    },
    {
      name: "奈曼旗",
      level: "district",
      adcode: 150525,
      lng: 120.657813,
      lat: 42.867433,
      childrenNum: 0,
      parent: 150500,
    },
    {
      name: "扎鲁特旗",
      level: "district",
      adcode: 150526,
      lng: 120.917953,
      lat: 44.567093,
      childrenNum: 0,
      parent: 150500,
    },
    {
      name: "霍林郭勒市",
      level: "district",
      adcode: 150581,
      lng: 119.681242,
      lat: 45.533598,
      childrenNum: 0,
      parent: 150500,
    },
    {
      name: "鄂尔多斯市",
      level: "city",
      adcode: 150600,
      lng: 109.782473,
      lat: 39.608744,
      childrenNum: 9,
      parent: 15e4,
    },
    {
      name: "东胜区",
      level: "district",
      adcode: 150602,
      lng: 109.963403,
      lat: 39.823066,
      childrenNum: 0,
      parent: 150600,
    },
    {
      name: "康巴什区",
      level: "district",
      adcode: 150603,
      lng: 109.858586,
      lat: 39.60793,
      childrenNum: 0,
      parent: 150600,
    },
    {
      name: "达拉特旗",
      level: "district",
      adcode: 150621,
      lng: 110.034133,
      lat: 40.412766,
      childrenNum: 0,
      parent: 150600,
    },
    {
      name: "准格尔旗",
      level: "district",
      adcode: 150622,
      lng: 111.239436,
      lat: 39.864923,
      childrenNum: 0,
      parent: 150600,
    },
    {
      name: "鄂托克前旗",
      level: "district",
      adcode: 150623,
      lng: 107.47733,
      lat: 38.182402,
      childrenNum: 0,
      parent: 150600,
    },
    {
      name: "鄂托克旗",
      level: "district",
      adcode: 150624,
      lng: 107.975948,
      lat: 39.089549,
      childrenNum: 0,
      parent: 150600,
    },
    {
      name: "杭锦旗",
      level: "district",
      adcode: 150625,
      lng: 108.736011,
      lat: 39.833243,
      childrenNum: 0,
      parent: 150600,
    },
    {
      name: "乌审旗",
      level: "district",
      adcode: 150626,
      lng: 108.819485,
      lat: 38.60453,
      childrenNum: 0,
      parent: 150600,
    },
    {
      name: "伊金霍洛旗",
      level: "district",
      adcode: 150627,
      lng: 109.747435,
      lat: 39.565064,
      childrenNum: 0,
      parent: 150600,
    },
    {
      name: "呼伦贝尔市",
      level: "city",
      adcode: 150700,
      lng: 119.77845,
      lat: 49.166536,
      childrenNum: 14,
      parent: 15e4,
    },
    {
      name: "海拉尔区",
      level: "district",
      adcode: 150702,
      lng: 119.824542,
      lat: 49.234715,
      childrenNum: 0,
      parent: 150700,
    },
    {
      name: "扎赉诺尔区",
      level: "district",
      adcode: 150703,
      lng: 117.669939,
      lat: 49.511213,
      childrenNum: 0,
      parent: 150700,
    },
    {
      name: "阿荣旗",
      level: "district",
      adcode: 150721,
      lng: 123.458943,
      lat: 48.126553,
      childrenNum: 0,
      parent: 150700,
    },
    {
      name: "莫力达瓦达斡尔族自治旗",
      level: "district",
      adcode: 150722,
      lng: 124.519023,
      lat: 48.477728,
      childrenNum: 0,
      parent: 150700,
    },
    {
      name: "鄂伦春自治旗",
      level: "district",
      adcode: 150723,
      lng: 123.725643,
      lat: 50.591604,
      childrenNum: 0,
      parent: 150700,
    },
    {
      name: "鄂温克族自治旗",
      level: "district",
      adcode: 150724,
      lng: 119.755253,
      lat: 49.146692,
      childrenNum: 0,
      parent: 150700,
    },
    {
      name: "陈巴尔虎旗",
      level: "district",
      adcode: 150725,
      lng: 119.424026,
      lat: 49.328916,
      childrenNum: 0,
      parent: 150700,
    },
    {
      name: "新巴尔虎左旗",
      level: "district",
      adcode: 150726,
      lng: 118.269782,
      lat: 48.21827,
      childrenNum: 0,
      parent: 150700,
    },
    {
      name: "新巴尔虎右旗",
      level: "district",
      adcode: 150727,
      lng: 116.8237,
      lat: 48.671865,
      childrenNum: 0,
      parent: 150700,
    },
    {
      name: "满洲里市",
      level: "district",
      adcode: 150781,
      lng: 117.379134,
      lat: 49.59862,
      childrenNum: 0,
      parent: 150700,
    },
    {
      name: "牙克石市",
      level: "district",
      adcode: 150782,
      lng: 120.711639,
      lat: 49.285947,
      childrenNum: 0,
      parent: 150700,
    },
    {
      name: "扎兰屯市",
      level: "district",
      adcode: 150783,
      lng: 122.708475,
      lat: 48.028396,
      childrenNum: 0,
      parent: 150700,
    },
    {
      name: "额尔古纳市",
      level: "district",
      adcode: 150784,
      lng: 120.180506,
      lat: 50.243102,
      childrenNum: 0,
      parent: 150700,
    },
    {
      name: "根河市",
      level: "district",
      adcode: 150785,
      lng: 121.520165,
      lat: 50.779758,
      childrenNum: 0,
      parent: 150700,
    },
    {
      name: "巴彦淖尔市",
      level: "city",
      adcode: 150800,
      lng: 107.387767,
      lat: 40.742987,
      childrenNum: 7,
      parent: 15e4,
    },
    {
      name: "临河区",
      level: "district",
      adcode: 150802,
      lng: 107.363536,
      lat: 40.750969,
      childrenNum: 0,
      parent: 150800,
    },
    {
      name: "五原县",
      level: "district",
      adcode: 150821,
      lng: 108.267466,
      lat: 41.088446,
      childrenNum: 0,
      parent: 150800,
    },
    {
      name: "磴口县",
      level: "district",
      adcode: 150822,
      lng: 107.008288,
      lat: 40.330534,
      childrenNum: 0,
      parent: 150800,
    },
    {
      name: "乌拉特前旗",
      level: "district",
      adcode: 150823,
      lng: 108.652114,
      lat: 40.737018,
      childrenNum: 0,
      parent: 150800,
    },
    {
      name: "乌拉特中旗",
      level: "district",
      adcode: 150824,
      lng: 108.513653,
      lat: 41.58813,
      childrenNum: 0,
      parent: 150800,
    },
    {
      name: "乌拉特后旗",
      level: "district",
      adcode: 150825,
      lng: 107.074748,
      lat: 41.08412,
      childrenNum: 0,
      parent: 150800,
    },
    {
      name: "杭锦后旗",
      level: "district",
      adcode: 150826,
      lng: 107.151296,
      lat: 40.886596,
      childrenNum: 0,
      parent: 150800,
    },
    {
      name: "乌兰察布市",
      level: "city",
      adcode: 150900,
      lng: 113.132227,
      lat: 40.994526,
      childrenNum: 11,
      parent: 15e4,
    },
    {
      name: "集宁区",
      level: "district",
      adcode: 150902,
      lng: 113.168973,
      lat: 41.000742,
      childrenNum: 0,
      parent: 150900,
    },
    {
      name: "卓资县",
      level: "district",
      adcode: 150921,
      lng: 112.577716,
      lat: 40.894618,
      childrenNum: 0,
      parent: 150900,
    },
    {
      name: "化德县",
      level: "district",
      adcode: 150922,
      lng: 114.01029,
      lat: 41.904123,
      childrenNum: 0,
      parent: 150900,
    },
    {
      name: "商都县",
      level: "district",
      adcode: 150923,
      lng: 113.577778,
      lat: 41.562176,
      childrenNum: 0,
      parent: 150900,
    },
    {
      name: "兴和县",
      level: "district",
      adcode: 150924,
      lng: 113.834176,
      lat: 40.8723,
      childrenNum: 0,
      parent: 150900,
    },
    {
      name: "凉城县",
      level: "district",
      adcode: 150925,
      lng: 112.504243,
      lat: 40.532358,
      childrenNum: 0,
      parent: 150900,
    },
    {
      name: "察哈尔右翼前旗",
      level: "district",
      adcode: 150926,
      lng: 113.212409,
      lat: 40.783551,
      childrenNum: 0,
      parent: 150900,
    },
    {
      name: "察哈尔右翼中旗",
      level: "district",
      adcode: 150927,
      lng: 112.635348,
      lat: 41.277449,
      childrenNum: 0,
      parent: 150900,
    },
    {
      name: "察哈尔右翼后旗",
      level: "district",
      adcode: 150928,
      lng: 113.191505,
      lat: 41.435937,
      childrenNum: 0,
      parent: 150900,
    },
    {
      name: "四子王旗",
      level: "district",
      adcode: 150929,
      lng: 111.706663,
      lat: 41.533542,
      childrenNum: 0,
      parent: 150900,
    },
    {
      name: "丰镇市",
      level: "district",
      adcode: 150981,
      lng: 113.109875,
      lat: 40.437022,
      childrenNum: 0,
      parent: 150900,
    },
    {
      name: "兴安盟",
      level: "city",
      adcode: 152200,
      lng: 122.037796,
      lat: 46.082373,
      childrenNum: 6,
      parent: 15e4,
    },
    {
      name: "乌兰浩特市",
      level: "district",
      adcode: 152201,
      lng: 122.093309,
      lat: 46.072233,
      childrenNum: 0,
      parent: 152200,
    },
    {
      name: "阿尔山市",
      level: "district",
      adcode: 152202,
      lng: 119.943577,
      lat: 47.17744,
      childrenNum: 0,
      parent: 152200,
    },
    {
      name: "科尔沁右翼前旗",
      level: "district",
      adcode: 152221,
      lng: 121.952638,
      lat: 46.079664,
      childrenNum: 0,
      parent: 152200,
    },
    {
      name: "科尔沁右翼中旗",
      level: "district",
      adcode: 152222,
      lng: 121.476357,
      lat: 45.060728,
      childrenNum: 0,
      parent: 152200,
    },
    {
      name: "扎赉特旗",
      level: "district",
      adcode: 152223,
      lng: 122.899627,
      lat: 46.723154,
      childrenNum: 0,
      parent: 152200,
    },
    {
      name: "突泉县",
      level: "district",
      adcode: 152224,
      lng: 121.593972,
      lat: 45.381918,
      childrenNum: 0,
      parent: 152200,
    },
    {
      name: "锡林郭勒盟",
      level: "city",
      adcode: 152500,
      lng: 116.047387,
      lat: 43.933212,
      childrenNum: 12,
      parent: 15e4,
    },
    {
      name: "二连浩特市",
      level: "district",
      adcode: 152501,
      lng: 111.949594,
      lat: 43.64285,
      childrenNum: 0,
      parent: 152500,
    },
    {
      name: "锡林浩特市",
      level: "district",
      adcode: 152502,
      lng: 116.085814,
      lat: 43.933417,
      childrenNum: 0,
      parent: 152500,
    },
    {
      name: "阿巴嘎旗",
      level: "district",
      adcode: 152522,
      lng: 114.950185,
      lat: 44.022831,
      childrenNum: 0,
      parent: 152500,
    },
    {
      name: "苏尼特左旗",
      level: "district",
      adcode: 152523,
      lng: 113.667171,
      lat: 43.859718,
      childrenNum: 0,
      parent: 152500,
    },
    {
      name: "苏尼特右旗",
      level: "district",
      adcode: 152524,
      lng: 112.641806,
      lat: 42.742417,
      childrenNum: 0,
      parent: 152500,
    },
    {
      name: "东乌珠穆沁旗",
      level: "district",
      adcode: 152525,
      lng: 116.97526,
      lat: 45.497329,
      childrenNum: 0,
      parent: 152500,
    },
    {
      name: "西乌珠穆沁旗",
      level: "district",
      adcode: 152526,
      lng: 117.608668,
      lat: 44.587746,
      childrenNum: 0,
      parent: 152500,
    },
    {
      name: "太仆寺旗",
      level: "district",
      adcode: 152527,
      lng: 115.283173,
      lat: 41.876889,
      childrenNum: 0,
      parent: 152500,
    },
    {
      name: "镶黄旗",
      level: "district",
      adcode: 152528,
      lng: 113.847287,
      lat: 42.232371,
      childrenNum: 0,
      parent: 152500,
    },
    {
      name: "正镶白旗",
      level: "district",
      adcode: 152529,
      lng: 115.029748,
      lat: 42.287493,
      childrenNum: 0,
      parent: 152500,
    },
    {
      name: "正蓝旗",
      level: "district",
      adcode: 152530,
      lng: 115.991648,
      lat: 42.241815,
      childrenNum: 0,
      parent: 152500,
    },
    {
      name: "多伦县",
      level: "district",
      adcode: 152531,
      lng: 116.485549,
      lat: 42.203454,
      childrenNum: 0,
      parent: 152500,
    },
    {
      name: "阿拉善盟",
      level: "city",
      adcode: 152900,
      lng: 105.729135,
      lat: 38.851554,
      childrenNum: 3,
      parent: 15e4,
    },
    {
      name: "阿拉善左旗",
      level: "district",
      adcode: 152921,
      lng: 105.666208,
      lat: 38.833589,
      childrenNum: 0,
      parent: 152900,
    },
    {
      name: "阿拉善右旗",
      level: "district",
      adcode: 152922,
      lng: 101.666917,
      lat: 39.216185,
      childrenNum: 0,
      parent: 152900,
    },
    {
      name: "额济纳旗",
      level: "district",
      adcode: 152923,
      lng: 101.055861,
      lat: 41.953963,
      childrenNum: 0,
      parent: 152900,
    },
    {
      name: "辽宁省",
      level: "province",
      adcode: 21e4,
      lng: 123.435093,
      lat: 41.836743,
      childrenNum: 14,
      parent: 1e5,
    },
    {
      name: "沈阳市",
      level: "city",
      adcode: 210100,
      lng: 123.464675,
      lat: 41.677576,
      childrenNum: 13,
      parent: 21e4,
    },
    {
      name: "和平区",
      level: "district",
      adcode: 210102,
      lng: 123.420401,
      lat: 41.789766,
      childrenNum: 0,
      parent: 210100,
    },
    {
      name: "沈河区",
      level: "district",
      adcode: 210103,
      lng: 123.45884,
      lat: 41.795688,
      childrenNum: 0,
      parent: 210100,
    },
    {
      name: "大东区",
      level: "district",
      adcode: 210104,
      lng: 123.469828,
      lat: 41.805292,
      childrenNum: 0,
      parent: 210100,
    },
    {
      name: "皇姑区",
      level: "district",
      adcode: 210105,
      lng: 123.441468,
      lat: 41.824574,
      childrenNum: 0,
      parent: 210100,
    },
    {
      name: "铁西区",
      level: "district",
      adcode: 210106,
      lng: 123.334781,
      lat: 41.821721,
      childrenNum: 0,
      parent: 210100,
    },
    {
      name: "苏家屯区",
      level: "district",
      adcode: 210111,
      lng: 123.343937,
      lat: 41.665153,
      childrenNum: 0,
      parent: 210100,
    },
    {
      name: "浑南区",
      level: "district",
      adcode: 210112,
      lng: 123.449597,
      lat: 41.714729,
      childrenNum: 0,
      parent: 210100,
    },
    {
      name: "沈北新区",
      level: "district",
      adcode: 210113,
      lng: 123.584209,
      lat: 41.913071,
      childrenNum: 0,
      parent: 210100,
    },
    {
      name: "于洪区",
      level: "district",
      adcode: 210114,
      lng: 123.308062,
      lat: 41.793925,
      childrenNum: 0,
      parent: 210100,
    },
    {
      name: "辽中区",
      level: "district",
      adcode: 210115,
      lng: 122.766159,
      lat: 41.517449,
      childrenNum: 0,
      parent: 210100,
    },
    {
      name: "康平县",
      level: "district",
      adcode: 210123,
      lng: 123.343701,
      lat: 42.727249,
      childrenNum: 0,
      parent: 210100,
    },
    {
      name: "法库县",
      level: "district",
      adcode: 210124,
      lng: 123.440294,
      lat: 42.50108,
      childrenNum: 0,
      parent: 210100,
    },
    {
      name: "新民市",
      level: "district",
      adcode: 210181,
      lng: 122.835964,
      lat: 41.985757,
      childrenNum: 0,
      parent: 210100,
    },
    {
      name: "大连市",
      level: "city",
      adcode: 210200,
      lng: 121.614786,
      lat: 38.913962,
      childrenNum: 10,
      parent: 21e4,
    },
    {
      name: "中山区",
      level: "district",
      adcode: 210202,
      lng: 121.644996,
      lat: 38.918357,
      childrenNum: 0,
      parent: 210200,
    },
    {
      name: "西岗区",
      level: "district",
      adcode: 210203,
      lng: 121.612461,
      lat: 38.914751,
      childrenNum: 0,
      parent: 210200,
    },
    {
      name: "沙河口区",
      level: "district",
      adcode: 210204,
      lng: 121.594201,
      lat: 38.904771,
      childrenNum: 0,
      parent: 210200,
    },
    {
      name: "甘井子区",
      level: "district",
      adcode: 210211,
      lng: 121.525469,
      lat: 38.952998,
      childrenNum: 0,
      parent: 210200,
    },
    {
      name: "旅顺口区",
      level: "district",
      adcode: 210212,
      lng: 121.261982,
      lat: 38.851742,
      childrenNum: 0,
      parent: 210200,
    },
    {
      name: "金州区",
      level: "district",
      adcode: 210213,
      lng: 121.782513,
      lat: 39.050211,
      childrenNum: 0,
      parent: 210200,
    },
    {
      name: "普兰店区",
      level: "district",
      adcode: 210214,
      lng: 121.938299,
      lat: 39.391565,
      childrenNum: 0,
      parent: 210200,
    },
    {
      name: "长海县",
      level: "district",
      adcode: 210224,
      lng: 122.588487,
      lat: 39.272779,
      childrenNum: 0,
      parent: 210200,
    },
    {
      name: "瓦房店市",
      level: "district",
      adcode: 210281,
      lng: 121.979463,
      lat: 39.62701,
      childrenNum: 0,
      parent: 210200,
    },
    {
      name: "庄河市",
      level: "district",
      adcode: 210283,
      lng: 122.965881,
      lat: 39.680825,
      childrenNum: 0,
      parent: 210200,
    },
    {
      name: "鞍山市",
      level: "city",
      adcode: 210300,
      lng: 122.994183,
      lat: 41.108239,
      childrenNum: 7,
      parent: 21e4,
    },
    {
      name: "铁东区",
      level: "district",
      adcode: 210302,
      lng: 122.990888,
      lat: 41.089578,
      childrenNum: 0,
      parent: 210300,
    },
    {
      name: "铁西区",
      level: "district",
      adcode: 210303,
      lng: 122.969531,
      lat: 41.119719,
      childrenNum: 0,
      parent: 210300,
    },
    {
      name: "立山区",
      level: "district",
      adcode: 210304,
      lng: 123.029091,
      lat: 41.150401,
      childrenNum: 0,
      parent: 210300,
    },
    {
      name: "千山区",
      level: "district",
      adcode: 210311,
      lng: 122.9447506,
      lat: 41.0689014,
      childrenNum: 0,
      parent: 210300,
    },
    {
      name: "台安县",
      level: "district",
      adcode: 210321,
      lng: 122.436037,
      lat: 41.412866,
      childrenNum: 0,
      parent: 210300,
    },
    {
      name: "岫岩满族自治县",
      level: "district",
      adcode: 210323,
      lng: 123.280933,
      lat: 40.290995,
      childrenNum: 0,
      parent: 210300,
    },
    {
      name: "海城市",
      level: "district",
      adcode: 210381,
      lng: 122.685176,
      lat: 40.882548,
      childrenNum: 0,
      parent: 210300,
    },
    {
      name: "抚顺市",
      level: "city",
      adcode: 210400,
      lng: 123.957053,
      lat: 41.881311,
      childrenNum: 7,
      parent: 21e4,
    },
    {
      name: "新抚区",
      level: "district",
      adcode: 210402,
      lng: 123.91293,
      lat: 41.861922,
      childrenNum: 0,
      parent: 210400,
    },
    {
      name: "东洲区",
      level: "district",
      adcode: 210403,
      lng: 124.038491,
      lat: 41.853001,
      childrenNum: 0,
      parent: 210400,
    },
    {
      name: "望花区",
      level: "district",
      adcode: 210404,
      lng: 123.784235,
      lat: 41.853484,
      childrenNum: 0,
      parent: 210400,
    },
    {
      name: "顺城区",
      level: "district",
      adcode: 210411,
      lng: 123.94504,
      lat: 41.883375,
      childrenNum: 0,
      parent: 210400,
    },
    {
      name: "抚顺县",
      level: "district",
      adcode: 210421,
      lng: 123.8999229,
      lat: 41.73009376,
      childrenNum: 0,
      parent: 210400,
    },
    {
      name: "新宾满族自治县",
      level: "district",
      adcode: 210422,
      lng: 125.039994,
      lat: 41.734031,
      childrenNum: 0,
      parent: 210400,
    },
    {
      name: "清原满族自治县",
      level: "district",
      adcode: 210423,
      lng: 124.924028,
      lat: 42.100804,
      childrenNum: 0,
      parent: 210400,
    },
    {
      name: "本溪市",
      level: "city",
      adcode: 210500,
      lng: 123.684984,
      lat: 41.486834,
      childrenNum: 6,
      parent: 21e4,
    },
    {
      name: "平山区",
      level: "district",
      adcode: 210502,
      lng: 123.769081,
      lat: 41.299658,
      childrenNum: 0,
      parent: 210500,
    },
    {
      name: "溪湖区",
      level: "district",
      adcode: 210503,
      lng: 123.767817,
      lat: 41.32931,
      childrenNum: 0,
      parent: 210500,
    },
    {
      name: "明山区",
      level: "district",
      adcode: 210504,
      lng: 123.861747,
      lat: 41.343624,
      childrenNum: 0,
      parent: 210500,
    },
    {
      name: "南芬区",
      level: "district",
      adcode: 210505,
      lng: 123.744822,
      lat: 41.100273,
      childrenNum: 0,
      parent: 210500,
    },
    {
      name: "本溪满族自治县",
      level: "district",
      adcode: 210521,
      lng: 124.119545,
      lat: 41.301553,
      childrenNum: 0,
      parent: 210500,
    },
    {
      name: "桓仁满族自治县",
      level: "district",
      adcode: 210522,
      lng: 125.361061,
      lat: 41.267048,
      childrenNum: 0,
      parent: 210500,
    },
    {
      name: "丹东市",
      level: "city",
      adcode: 210600,
      lng: 124.354419,
      lat: 40.000646,
      childrenNum: 6,
      parent: 21e4,
    },
    {
      name: "元宝区",
      level: "district",
      adcode: 210602,
      lng: 124.395577,
      lat: 40.136549,
      childrenNum: 0,
      parent: 210600,
    },
    {
      name: "振兴区",
      level: "district",
      adcode: 210603,
      lng: 124.383382,
      lat: 40.129706,
      childrenNum: 0,
      parent: 210600,
    },
    {
      name: "振安区",
      level: "district",
      adcode: 210604,
      lng: 124.470005,
      lat: 40.20154,
      childrenNum: 0,
      parent: 210600,
    },
    {
      name: "宽甸满族自治县",
      level: "district",
      adcode: 210624,
      lng: 124.783674,
      lat: 40.731319,
      childrenNum: 0,
      parent: 210600,
    },
    {
      name: "东港市",
      level: "district",
      adcode: 210681,
      lng: 124.152581,
      lat: 39.863193,
      childrenNum: 0,
      parent: 210600,
    },
    {
      name: "凤城市",
      level: "district",
      adcode: 210682,
      lng: 124.066873,
      lat: 40.45218,
      childrenNum: 0,
      parent: 210600,
    },
    {
      name: "锦州市",
      level: "city",
      adcode: 210700,
      lng: 121.126859,
      lat: 41.096114,
      childrenNum: 7,
      parent: 21e4,
    },
    {
      name: "古塔区",
      level: "district",
      adcode: 210702,
      lng: 121.128414,
      lat: 41.117481,
      childrenNum: 0,
      parent: 210700,
    },
    {
      name: "凌河区",
      level: "district",
      adcode: 210703,
      lng: 121.151069,
      lat: 41.115058,
      childrenNum: 0,
      parent: 210700,
    },
    {
      name: "太和区",
      level: "district",
      adcode: 210711,
      lng: 121.103445,
      lat: 41.109232,
      childrenNum: 0,
      parent: 210700,
    },
    {
      name: "黑山县",
      level: "district",
      adcode: 210726,
      lng: 122.126645,
      lat: 41.653552,
      childrenNum: 0,
      parent: 210700,
    },
    {
      name: "义县",
      level: "district",
      adcode: 210727,
      lng: 121.239558,
      lat: 41.533553,
      childrenNum: 0,
      parent: 210700,
    },
    {
      name: "凌海市",
      level: "district",
      adcode: 210781,
      lng: 121.35499,
      lat: 41.160636,
      childrenNum: 0,
      parent: 210700,
    },
    {
      name: "北镇市",
      level: "district",
      adcode: 210782,
      lng: 121.777503,
      lat: 41.588657,
      childrenNum: 0,
      parent: 210700,
    },
    {
      name: "营口市",
      level: "city",
      adcode: 210800,
      lng: 122.219148,
      lat: 40.625027,
      childrenNum: 6,
      parent: 21e4,
    },
    {
      name: "站前区",
      level: "district",
      adcode: 210802,
      lng: 122.259058,
      lat: 40.673063,
      childrenNum: 0,
      parent: 210800,
    },
    {
      name: "西市区",
      level: "district",
      adcode: 210803,
      lng: 122.206431,
      lat: 40.666707,
      childrenNum: 0,
      parent: 210800,
    },
    {
      name: "鲅鱼圈区",
      level: "district",
      adcode: 210804,
      lng: 122.121764,
      lat: 40.226708,
      childrenNum: 0,
      parent: 210800,
    },
    {
      name: "老边区",
      level: "district",
      adcode: 210811,
      lng: 122.307956,
      lat: 40.671279,
      childrenNum: 0,
      parent: 210800,
    },
    {
      name: "盖州市",
      level: "district",
      adcode: 210881,
      lng: 122.34845,
      lat: 40.400259,
      childrenNum: 0,
      parent: 210800,
    },
    {
      name: "大石桥市",
      level: "district",
      adcode: 210882,
      lng: 122.509006,
      lat: 40.644482,
      childrenNum: 0,
      parent: 210800,
    },
    {
      name: "阜新市",
      level: "city",
      adcode: 210900,
      lng: 121.670052,
      lat: 42.022028,
      childrenNum: 7,
      parent: 21e4,
    },
    {
      name: "海州区",
      level: "district",
      adcode: 210902,
      lng: 121.662594,
      lat: 42.017794,
      childrenNum: 0,
      parent: 210900,
    },
    {
      name: "新邱区",
      level: "district",
      adcode: 210903,
      lng: 121.792067,
      lat: 42.087549,
      childrenNum: 0,
      parent: 210900,
    },
    {
      name: "太平区",
      level: "district",
      adcode: 210904,
      lng: 121.678637,
      lat: 42.010689,
      childrenNum: 0,
      parent: 210900,
    },
    {
      name: "清河门区",
      level: "district",
      adcode: 210905,
      lng: 121.416105,
      lat: 41.7831,
      childrenNum: 0,
      parent: 210900,
    },
    {
      name: "细河区",
      level: "district",
      adcode: 210911,
      lng: 121.680157,
      lat: 42.025412,
      childrenNum: 0,
      parent: 210900,
    },
    {
      name: "阜新蒙古族自治县",
      level: "district",
      adcode: 210921,
      lng: 121.757901,
      lat: 42.065175,
      childrenNum: 0,
      parent: 210900,
    },
    {
      name: "彰武县",
      level: "district",
      adcode: 210922,
      lng: 122.538563,
      lat: 42.386264,
      childrenNum: 0,
      parent: 210900,
    },
    {
      name: "辽阳市",
      level: "city",
      adcode: 211e3,
      lng: 123.239669,
      lat: 41.267396,
      childrenNum: 7,
      parent: 21e4,
    },
    {
      name: "白塔区",
      level: "district",
      adcode: 211002,
      lng: 123.174347,
      lat: 41.270397,
      childrenNum: 0,
      parent: 211e3,
    },
    {
      name: "文圣区",
      level: "district",
      adcode: 211003,
      lng: 123.231262,
      lat: 41.282378,
      childrenNum: 0,
      parent: 211e3,
    },
    {
      name: "宏伟区",
      level: "district",
      adcode: 211004,
      lng: 123.196725,
      lat: 41.217852,
      childrenNum: 0,
      parent: 211e3,
    },
    {
      name: "弓长岭区",
      level: "district",
      adcode: 211005,
      lng: 123.419567,
      lat: 41.151787,
      childrenNum: 0,
      parent: 211e3,
    },
    {
      name: "太子河区",
      level: "district",
      adcode: 211011,
      lng: 123.1814403,
      lat: 41.29502257,
      childrenNum: 0,
      parent: 211e3,
    },
    {
      name: "辽阳县",
      level: "district",
      adcode: 211021,
      lng: 123.106426,
      lat: 41.206246,
      childrenNum: 0,
      parent: 211e3,
    },
    {
      name: "灯塔市",
      level: "district",
      adcode: 211081,
      lng: 123.339398,
      lat: 41.426537,
      childrenNum: 0,
      parent: 211e3,
    },
    {
      name: "盘锦市",
      level: "city",
      adcode: 211100,
      lng: 122.170729,
      lat: 40.71956,
      childrenNum: 4,
      parent: 21e4,
    },
    {
      name: "双台子区",
      level: "district",
      adcode: 211102,
      lng: 122.07597,
      lat: 41.212401,
      childrenNum: 0,
      parent: 211100,
    },
    {
      name: "兴隆台区",
      level: "district",
      adcode: 211103,
      lng: 122.070685,
      lat: 41.120261,
      childrenNum: 0,
      parent: 211100,
    },
    {
      name: "大洼区",
      level: "district",
      adcode: 211104,
      lng: 122.082227,
      lat: 41.002679,
      childrenNum: 0,
      parent: 211100,
    },
    {
      name: "盘山县",
      level: "district",
      adcode: 211122,
      lng: 121.996408,
      lat: 41.243367,
      childrenNum: 0,
      parent: 211100,
    },
    {
      name: "铁岭市",
      level: "city",
      adcode: 211200,
      lng: 123.726008,
      lat: 42.223709,
      childrenNum: 7,
      parent: 21e4,
    },
    {
      name: "银州区",
      level: "district",
      adcode: 211202,
      lng: 123.842472,
      lat: 42.286575,
      childrenNum: 0,
      parent: 211200,
    },
    {
      name: "清河区",
      level: "district",
      adcode: 211204,
      lng: 124.159232,
      lat: 42.54714,
      childrenNum: 0,
      parent: 211200,
    },
    {
      name: "铁岭县",
      level: "district",
      adcode: 211221,
      lng: 123.728933,
      lat: 42.223395,
      childrenNum: 0,
      parent: 211200,
    },
    {
      name: "西丰县",
      level: "district",
      adcode: 211223,
      lng: 124.727491,
      lat: 42.738178,
      childrenNum: 0,
      parent: 211200,
    },
    {
      name: "昌图县",
      level: "district",
      adcode: 211224,
      lng: 124.086628,
      lat: 42.779333,
      childrenNum: 0,
      parent: 211200,
    },
    {
      name: "调兵山市",
      level: "district",
      adcode: 211281,
      lng: 123.567039,
      lat: 42.468007,
      childrenNum: 0,
      parent: 211200,
    },
    {
      name: "开原市",
      level: "district",
      adcode: 211282,
      lng: 124.051886,
      lat: 42.577645,
      childrenNum: 0,
      parent: 211200,
    },
    {
      name: "朝阳市",
      level: "city",
      adcode: 211300,
      lng: 120.488801,
      lat: 41.601855,
      childrenNum: 7,
      parent: 21e4,
    },
    {
      name: "双塔区",
      level: "district",
      adcode: 211302,
      lng: 120.453717,
      lat: 41.565814,
      childrenNum: 0,
      parent: 211300,
    },
    {
      name: "龙城区",
      level: "district",
      adcode: 211303,
      lng: 120.4133759,
      lat: 41.57674859,
      childrenNum: 0,
      parent: 211300,
    },
    {
      name: "朝阳县",
      level: "district",
      adcode: 211321,
      lng: 120.390001,
      lat: 41.497923,
      childrenNum: 0,
      parent: 211300,
    },
    {
      name: "建平县",
      level: "district",
      adcode: 211322,
      lng: 119.64328,
      lat: 41.402891,
      childrenNum: 0,
      parent: 211300,
    },
    {
      name: "喀喇沁左翼蒙古族自治县",
      level: "district",
      adcode: 211324,
      lng: 119.741223,
      lat: 41.12815,
      childrenNum: 0,
      parent: 211300,
    },
    {
      name: "北票市",
      level: "district",
      adcode: 211381,
      lng: 120.771389,
      lat: 41.801117,
      childrenNum: 0,
      parent: 211300,
    },
    {
      name: "凌源市",
      level: "district",
      adcode: 211382,
      lng: 119.401574,
      lat: 41.245445,
      childrenNum: 0,
      parent: 211300,
    },
    {
      name: "葫芦岛市",
      level: "city",
      adcode: 211400,
      lng: 120.836783,
      lat: 40.710974,
      childrenNum: 6,
      parent: 21e4,
    },
    {
      name: "连山区",
      level: "district",
      adcode: 211402,
      lng: 120.869157,
      lat: 40.774784,
      childrenNum: 0,
      parent: 211400,
    },
    {
      name: "龙港区",
      level: "district",
      adcode: 211403,
      lng: 120.894054,
      lat: 40.735717,
      childrenNum: 0,
      parent: 211400,
    },
    {
      name: "南票区",
      level: "district",
      adcode: 211404,
      lng: 120.74971,
      lat: 41.10721,
      childrenNum: 0,
      parent: 211400,
    },
    {
      name: "绥中县",
      level: "district",
      adcode: 211421,
      lng: 120.34432,
      lat: 40.325576,
      childrenNum: 0,
      parent: 211400,
    },
    {
      name: "建昌县",
      level: "district",
      adcode: 211422,
      lng: 119.836669,
      lat: 40.824484,
      childrenNum: 0,
      parent: 211400,
    },
    {
      name: "兴城市",
      level: "district",
      adcode: 211481,
      lng: 120.756661,
      lat: 40.60999,
      childrenNum: 0,
      parent: 211400,
    },
    {
      name: "吉林省",
      level: "province",
      adcode: 22e4,
      lng: 125.325802,
      lat: 43.896942,
      childrenNum: 9,
      parent: 1e5,
    },
    {
      name: "长春市",
      level: "city",
      adcode: 220100,
      lng: 125.323643,
      lat: 43.816996,
      childrenNum: 11,
      parent: 22e4,
    },
    {
      name: "南关区",
      level: "district",
      adcode: 220102,
      lng: 125.350341,
      lat: 43.86382,
      childrenNum: 0,
      parent: 220100,
    },
    {
      name: "宽城区",
      level: "district",
      adcode: 220103,
      lng: 125.326614,
      lat: 43.943522,
      childrenNum: 0,
      parent: 220100,
    },
    {
      name: "朝阳区",
      level: "district",
      adcode: 220104,
      lng: 125.288168,
      lat: 43.833845,
      childrenNum: 0,
      parent: 220100,
    },
    {
      name: "二道区",
      level: "district",
      adcode: 220105,
      lng: 125.37419,
      lat: 43.865912,
      childrenNum: 0,
      parent: 220100,
    },
    {
      name: "绿园区",
      level: "district",
      adcode: 220106,
      lng: 125.256214,
      lat: 43.881047,
      childrenNum: 0,
      parent: 220100,
    },
    {
      name: "双阳区",
      level: "district",
      adcode: 220112,
      lng: 125.664583,
      lat: 43.525367,
      childrenNum: 0,
      parent: 220100,
    },
    {
      name: "九台区",
      level: "district",
      adcode: 220113,
      lng: 125.839549,
      lat: 44.151672,
      childrenNum: 0,
      parent: 220100,
    },
    {
      name: "农安县",
      level: "district",
      adcode: 220122,
      lng: 125.184921,
      lat: 44.432829,
      childrenNum: 0,
      parent: 220100,
    },
    {
      name: "榆树市",
      level: "district",
      adcode: 220182,
      lng: 126.533126,
      lat: 44.840263,
      childrenNum: 0,
      parent: 220100,
    },
    {
      name: "德惠市",
      level: "district",
      adcode: 220183,
      lng: 125.728552,
      lat: 44.521788,
      childrenNum: 0,
      parent: 220100,
    },
    {
      name: "公主岭市",
      level: "district",
      adcode: 220184,
      lng: 124.79379,
      lat: 43.495116,
      childrenNum: 0,
      parent: 220100,
    },
    {
      name: "吉林市",
      level: "city",
      adcode: 220200,
      lng: 126.549719,
      lat: 43.838132,
      childrenNum: 9,
      parent: 22e4,
    },
    {
      name: "昌邑区",
      level: "district",
      adcode: 220202,
      lng: 126.574414,
      lat: 43.881896,
      childrenNum: 0,
      parent: 220200,
    },
    {
      name: "龙潭区",
      level: "district",
      adcode: 220203,
      lng: 126.562131,
      lat: 43.910743,
      childrenNum: 0,
      parent: 220200,
    },
    {
      name: "船营区",
      level: "district",
      adcode: 220204,
      lng: 126.540909,
      lat: 43.833806,
      childrenNum: 0,
      parent: 220200,
    },
    {
      name: "丰满区",
      level: "district",
      adcode: 220211,
      lng: 126.561351,
      lat: 43.821192,
      childrenNum: 0,
      parent: 220200,
    },
    {
      name: "永吉县",
      level: "district",
      adcode: 220221,
      lng: 126.497899,
      lat: 43.672198,
      childrenNum: 0,
      parent: 220200,
    },
    {
      name: "蛟河市",
      level: "district",
      adcode: 220281,
      lng: 127.344773,
      lat: 43.72382,
      childrenNum: 0,
      parent: 220200,
    },
    {
      name: "桦甸市",
      level: "district",
      adcode: 220282,
      lng: 126.746245,
      lat: 42.972272,
      childrenNum: 0,
      parent: 220200,
    },
    {
      name: "舒兰市",
      level: "district",
      adcode: 220283,
      lng: 126.965515,
      lat: 44.405922,
      childrenNum: 0,
      parent: 220200,
    },
    {
      name: "磐石市",
      level: "district",
      adcode: 220284,
      lng: 126.060328,
      lat: 42.946608,
      childrenNum: 0,
      parent: 220200,
    },
    {
      name: "四平市",
      level: "city",
      adcode: 220300,
      lng: 124.350599,
      lat: 43.166764,
      childrenNum: 5,
      parent: 22e4,
    },
    {
      name: "铁西区",
      level: "district",
      adcode: 220302,
      lng: 124.345994,
      lat: 43.146288,
      childrenNum: 0,
      parent: 220300,
    },
    {
      name: "铁东区",
      level: "district",
      adcode: 220303,
      lng: 124.409852,
      lat: 43.162664,
      childrenNum: 0,
      parent: 220300,
    },
    {
      name: "梨树县",
      level: "district",
      adcode: 220322,
      lng: 124.335389,
      lat: 43.30706,
      childrenNum: 0,
      parent: 220300,
    },
    {
      name: "伊通满族自治县",
      level: "district",
      adcode: 220323,
      lng: 125.305393,
      lat: 43.345754,
      childrenNum: 0,
      parent: 220300,
    },
    {
      name: "双辽市",
      level: "district",
      adcode: 220382,
      lng: 123.502398,
      lat: 43.518301,
      childrenNum: 0,
      parent: 220300,
    },
    {
      name: "辽源市",
      level: "city",
      adcode: 220400,
      lng: 125.144676,
      lat: 42.887961,
      childrenNum: 4,
      parent: 22e4,
    },
    {
      name: "龙山区",
      level: "district",
      adcode: 220402,
      lng: 125.13703,
      lat: 42.902194,
      childrenNum: 0,
      parent: 220400,
    },
    {
      name: "西安区",
      level: "district",
      adcode: 220403,
      lng: 125.149488,
      lat: 42.927252,
      childrenNum: 0,
      parent: 220400,
    },
    {
      name: "东丰县",
      level: "district",
      adcode: 220421,
      lng: 125.53096,
      lat: 42.677253,
      childrenNum: 0,
      parent: 220400,
    },
    {
      name: "东辽县",
      level: "district",
      adcode: 220422,
      lng: 124.991045,
      lat: 42.925636,
      childrenNum: 0,
      parent: 220400,
    },
    {
      name: "通化市",
      level: "city",
      adcode: 220500,
      lng: 125.939721,
      lat: 41.728312,
      childrenNum: 7,
      parent: 22e4,
    },
    {
      name: "东昌区",
      level: "district",
      adcode: 220502,
      lng: 125.927187,
      lat: 41.702872,
      childrenNum: 0,
      parent: 220500,
    },
    {
      name: "二道江区",
      level: "district",
      adcode: 220503,
      lng: 126.042546,
      lat: 41.773989,
      childrenNum: 0,
      parent: 220500,
    },
    {
      name: "通化县",
      level: "district",
      adcode: 220521,
      lng: 125.758927,
      lat: 41.680135,
      childrenNum: 0,
      parent: 220500,
    },
    {
      name: "辉南县",
      level: "district",
      adcode: 220523,
      lng: 126.046006,
      lat: 42.684706,
      childrenNum: 0,
      parent: 220500,
    },
    {
      name: "柳河县",
      level: "district",
      adcode: 220524,
      lng: 125.744654,
      lat: 42.284594,
      childrenNum: 0,
      parent: 220500,
    },
    {
      name: "梅河口市",
      level: "district",
      adcode: 220581,
      lng: 125.711129,
      lat: 42.539183,
      childrenNum: 0,
      parent: 220500,
    },
    {
      name: "集安市",
      level: "district",
      adcode: 220582,
      lng: 126.193172,
      lat: 41.125805,
      childrenNum: 0,
      parent: 220500,
    },
    {
      name: "白山市",
      level: "city",
      adcode: 220600,
      lng: 126.414274,
      lat: 41.944132,
      childrenNum: 6,
      parent: 22e4,
    },
    {
      name: "浑江区",
      level: "district",
      adcode: 220602,
      lng: 126.416093,
      lat: 41.945409,
      childrenNum: 0,
      parent: 220600,
    },
    {
      name: "江源区",
      level: "district",
      adcode: 220605,
      lng: 126.591178,
      lat: 42.056747,
      childrenNum: 0,
      parent: 220600,
    },
    {
      name: "抚松县",
      level: "district",
      adcode: 220621,
      lng: 127.449387,
      lat: 42.221038,
      childrenNum: 0,
      parent: 220600,
    },
    {
      name: "靖宇县",
      level: "district",
      adcode: 220622,
      lng: 126.813262,
      lat: 42.388902,
      childrenNum: 0,
      parent: 220600,
    },
    {
      name: "长白朝鲜族自治县",
      level: "district",
      adcode: 220623,
      lng: 128.20066,
      lat: 41.420253,
      childrenNum: 0,
      parent: 220600,
    },
    {
      name: "临江市",
      level: "district",
      adcode: 220681,
      lng: 126.918086,
      lat: 41.811979,
      childrenNum: 0,
      parent: 220600,
    },
    {
      name: "松原市",
      level: "city",
      adcode: 220700,
      lng: 124.825321,
      lat: 45.14191,
      childrenNum: 5,
      parent: 22e4,
    },
    {
      name: "宁江区",
      level: "district",
      adcode: 220702,
      lng: 124.792839,
      lat: 45.186486,
      childrenNum: 0,
      parent: 220700,
    },
    {
      name: "前郭尔罗斯蒙古族自治县",
      level: "district",
      adcode: 220721,
      lng: 124.823417,
      lat: 45.118061,
      childrenNum: 0,
      parent: 220700,
    },
    {
      name: "长岭县",
      level: "district",
      adcode: 220722,
      lng: 123.967244,
      lat: 44.276293,
      childrenNum: 0,
      parent: 220700,
    },
    {
      name: "乾安县",
      level: "district",
      adcode: 220723,
      lng: 124.040651,
      lat: 45.003539,
      childrenNum: 0,
      parent: 220700,
    },
    {
      name: "扶余市",
      level: "district",
      adcode: 220781,
      lng: 126.049534,
      lat: 44.989057,
      childrenNum: 0,
      parent: 220700,
    },
    {
      name: "白城市",
      level: "city",
      adcode: 220800,
      lng: 122.838102,
      lat: 45.620131,
      childrenNum: 5,
      parent: 22e4,
    },
    {
      name: "洮北区",
      level: "district",
      adcode: 220802,
      lng: 122.851105,
      lat: 45.621545,
      childrenNum: 0,
      parent: 220800,
    },
    {
      name: "镇赉县",
      level: "district",
      adcode: 220821,
      lng: 123.19967,
      lat: 45.848195,
      childrenNum: 0,
      parent: 220800,
    },
    {
      name: "通榆县",
      level: "district",
      adcode: 220822,
      lng: 123.088093,
      lat: 44.812912,
      childrenNum: 0,
      parent: 220800,
    },
    {
      name: "洮南市",
      level: "district",
      adcode: 220881,
      lng: 122.79845,
      lat: 45.356849,
      childrenNum: 0,
      parent: 220800,
    },
    {
      name: "大安市",
      level: "district",
      adcode: 220882,
      lng: 124.291032,
      lat: 45.507004,
      childrenNum: 0,
      parent: 220800,
    },
    {
      name: "延边朝鲜族自治州",
      level: "city",
      adcode: 222400,
      lng: 129.470605,
      lat: 42.909426,
      childrenNum: 8,
      parent: 22e4,
    },
    {
      name: "延吉市",
      level: "district",
      adcode: 222401,
      lng: 129.507655,
      lat: 42.891034,
      childrenNum: 0,
      parent: 222400,
    },
    {
      name: "图们市",
      level: "district",
      adcode: 222402,
      lng: 129.843807,
      lat: 42.968039,
      childrenNum: 0,
      parent: 222400,
    },
    {
      name: "敦化市",
      level: "district",
      adcode: 222403,
      lng: 128.232235,
      lat: 43.372669,
      childrenNum: 0,
      parent: 222400,
    },
    {
      name: "珲春市",
      level: "district",
      adcode: 222404,
      lng: 130.365829,
      lat: 42.862551,
      childrenNum: 0,
      parent: 222400,
    },
    {
      name: "龙井市",
      level: "district",
      adcode: 222405,
      lng: 129.426529,
      lat: 42.767172,
      childrenNum: 0,
      parent: 222400,
    },
    {
      name: "和龙市",
      level: "district",
      adcode: 222406,
      lng: 129.010932,
      lat: 42.546434,
      childrenNum: 0,
      parent: 222400,
    },
    {
      name: "汪清县",
      level: "district",
      adcode: 222424,
      lng: 129.785137,
      lat: 43.317215,
      childrenNum: 0,
      parent: 222400,
    },
    {
      name: "安图县",
      level: "district",
      adcode: 222426,
      lng: 128.899744,
      lat: 43.111978,
      childrenNum: 0,
      parent: 222400,
    },
    {
      name: "黑龙江省",
      level: "province",
      adcode: 23e4,
      lng: 126.661998,
      lat: 45.742253,
      childrenNum: 13,
      parent: 1e5,
    },
    {
      name: "哈尔滨市",
      level: "city",
      adcode: 230100,
      lng: 126.53505,
      lat: 45.802981,
      childrenNum: 18,
      parent: 23e4,
    },
    {
      name: "道里区",
      level: "district",
      adcode: 230102,
      lng: 126.616912,
      lat: 45.755832,
      childrenNum: 0,
      parent: 230100,
    },
    {
      name: "南岗区",
      level: "district",
      adcode: 230103,
      lng: 126.66882,
      lat: 45.759967,
      childrenNum: 0,
      parent: 230100,
    },
    {
      name: "道外区",
      level: "district",
      adcode: 230104,
      lng: 126.649094,
      lat: 45.792351,
      childrenNum: 0,
      parent: 230100,
    },
    {
      name: "平房区",
      level: "district",
      adcode: 230108,
      lng: 126.63675,
      lat: 45.597529,
      childrenNum: 0,
      parent: 230100,
    },
    {
      name: "松北区",
      level: "district",
      adcode: 230109,
      lng: 126.516602,
      lat: 45.794991,
      childrenNum: 0,
      parent: 230100,
    },
    {
      name: "香坊区",
      level: "district",
      adcode: 230110,
      lng: 126.662959,
      lat: 45.707871,
      childrenNum: 0,
      parent: 230100,
    },
    {
      name: "呼兰区",
      level: "district",
      adcode: 230111,
      lng: 126.587704,
      lat: 45.889557,
      childrenNum: 0,
      parent: 230100,
    },
    {
      name: "阿城区",
      level: "district",
      adcode: 230112,
      lng: 126.957984,
      lat: 45.548671,
      childrenNum: 0,
      parent: 230100,
    },
    {
      name: "双城区",
      level: "district",
      adcode: 230113,
      lng: 126.31279,
      lat: 45.382873,
      childrenNum: 0,
      parent: 230100,
    },
    {
      name: "依兰县",
      level: "district",
      adcode: 230123,
      lng: 129.567777,
      lat: 46.325536,
      childrenNum: 0,
      parent: 230100,
    },
    {
      name: "方正县",
      level: "district",
      adcode: 230124,
      lng: 128.829513,
      lat: 45.851673,
      childrenNum: 0,
      parent: 230100,
    },
    {
      name: "宾县",
      level: "district",
      adcode: 230125,
      lng: 127.466372,
      lat: 45.746313,
      childrenNum: 0,
      parent: 230100,
    },
    {
      name: "巴彦县",
      level: "district",
      adcode: 230126,
      lng: 127.403521,
      lat: 46.086182,
      childrenNum: 0,
      parent: 230100,
    },
    {
      name: "木兰县",
      level: "district",
      adcode: 230127,
      lng: 128.043194,
      lat: 45.950649,
      childrenNum: 0,
      parent: 230100,
    },
    {
      name: "通河县",
      level: "district",
      adcode: 230128,
      lng: 128.74629,
      lat: 45.990214,
      childrenNum: 0,
      parent: 230100,
    },
    {
      name: "延寿县",
      level: "district",
      adcode: 230129,
      lng: 128.311071,
      lat: 45.445956,
      childrenNum: 0,
      parent: 230100,
    },
    {
      name: "尚志市",
      level: "district",
      adcode: 230183,
      lng: 128.009218,
      lat: 45.209199,
      childrenNum: 0,
      parent: 230100,
    },
    {
      name: "五常市",
      level: "district",
      adcode: 230184,
      lng: 127.167501,
      lat: 44.932164,
      childrenNum: 0,
      parent: 230100,
    },
    {
      name: "齐齐哈尔市",
      level: "city",
      adcode: 230200,
      lng: 123.918193,
      lat: 47.354892,
      childrenNum: 16,
      parent: 23e4,
    },
    {
      name: "龙沙区",
      level: "district",
      adcode: 230202,
      lng: 123.958447,
      lat: 47.317103,
      childrenNum: 0,
      parent: 230200,
    },
    {
      name: "建华区",
      level: "district",
      adcode: 230203,
      lng: 123.95555,
      lat: 47.354212,
      childrenNum: 0,
      parent: 230200,
    },
    {
      name: "铁锋区",
      level: "district",
      adcode: 230204,
      lng: 123.978079,
      lat: 47.340719,
      childrenNum: 0,
      parent: 230200,
    },
    {
      name: "昂昂溪区",
      level: "district",
      adcode: 230205,
      lng: 123.822137,
      lat: 47.154806,
      childrenNum: 0,
      parent: 230200,
    },
    {
      name: "富拉尔基区",
      level: "district",
      adcode: 230206,
      lng: 123.628926,
      lat: 47.20873,
      childrenNum: 0,
      parent: 230200,
    },
    {
      name: "碾子山区",
      level: "district",
      adcode: 230207,
      lng: 122.887548,
      lat: 47.516614,
      childrenNum: 0,
      parent: 230200,
    },
    {
      name: "梅里斯达斡尔族区",
      level: "district",
      adcode: 230208,
      lng: 123.752482,
      lat: 47.309755,
      childrenNum: 0,
      parent: 230200,
    },
    {
      name: "龙江县",
      level: "district",
      adcode: 230221,
      lng: 123.204953,
      lat: 47.338512,
      childrenNum: 0,
      parent: 230200,
    },
    {
      name: "依安县",
      level: "district",
      adcode: 230223,
      lng: 125.306161,
      lat: 47.893442,
      childrenNum: 0,
      parent: 230200,
    },
    {
      name: "泰来县",
      level: "district",
      adcode: 230224,
      lng: 123.416631,
      lat: 46.393694,
      childrenNum: 0,
      parent: 230200,
    },
    {
      name: "甘南县",
      level: "district",
      adcode: 230225,
      lng: 123.507935,
      lat: 47.921698,
      childrenNum: 0,
      parent: 230200,
    },
    {
      name: "富裕县",
      level: "district",
      adcode: 230227,
      lng: 124.474411,
      lat: 47.774038,
      childrenNum: 0,
      parent: 230200,
    },
    {
      name: "克山县",
      level: "district",
      adcode: 230229,
      lng: 125.875103,
      lat: 48.037748,
      childrenNum: 0,
      parent: 230200,
    },
    {
      name: "克东县",
      level: "district",
      adcode: 230230,
      lng: 126.249124,
      lat: 48.041562,
      childrenNum: 0,
      parent: 230200,
    },
    {
      name: "拜泉县",
      level: "district",
      adcode: 230231,
      lng: 126.09905,
      lat: 47.59586,
      childrenNum: 0,
      parent: 230200,
    },
    {
      name: "讷河市",
      level: "district",
      adcode: 230281,
      lng: 124.88293,
      lat: 48.466829,
      childrenNum: 0,
      parent: 230200,
    },
    {
      name: "鸡西市",
      level: "city",
      adcode: 230300,
      lng: 130.969385,
      lat: 45.295087,
      childrenNum: 9,
      parent: 23e4,
    },
    {
      name: "鸡冠区",
      level: "district",
      adcode: 230302,
      lng: 130.981342,
      lat: 45.303892,
      childrenNum: 0,
      parent: 230300,
    },
    {
      name: "恒山区",
      level: "district",
      adcode: 230303,
      lng: 130.90466,
      lat: 45.21119,
      childrenNum: 0,
      parent: 230300,
    },
    {
      name: "滴道区",
      level: "district",
      adcode: 230304,
      lng: 130.844193,
      lat: 45.349068,
      childrenNum: 0,
      parent: 230300,
    },
    {
      name: "梨树区",
      level: "district",
      adcode: 230305,
      lng: 130.69699,
      lat: 45.092046,
      childrenNum: 0,
      parent: 230300,
    },
    {
      name: "城子河区",
      level: "district",
      adcode: 230306,
      lng: 131.011504,
      lat: 45.338342,
      childrenNum: 0,
      parent: 230300,
    },
    {
      name: "麻山区",
      level: "district",
      adcode: 230307,
      lng: 130.477691,
      lat: 45.211863,
      childrenNum: 0,
      parent: 230300,
    },
    {
      name: "鸡东县",
      level: "district",
      adcode: 230321,
      lng: 131.124083,
      lat: 45.260413,
      childrenNum: 0,
      parent: 230300,
    },
    {
      name: "虎林市",
      level: "district",
      adcode: 230381,
      lng: 132.937002,
      lat: 45.763262,
      childrenNum: 0,
      parent: 230300,
    },
    {
      name: "密山市",
      level: "district",
      adcode: 230382,
      lng: 131.846824,
      lat: 45.529482,
      childrenNum: 0,
      parent: 230300,
    },
    {
      name: "鹤岗市",
      level: "city",
      adcode: 230400,
      lng: 130.297687,
      lat: 47.350659,
      childrenNum: 8,
      parent: 23e4,
    },
    {
      name: "向阳区",
      level: "district",
      adcode: 230402,
      lng: 130.294331,
      lat: 47.342478,
      childrenNum: 0,
      parent: 230400,
    },
    {
      name: "工农区",
      level: "district",
      adcode: 230403,
      lng: 130.27472,
      lat: 47.318971,
      childrenNum: 0,
      parent: 230400,
    },
    {
      name: "南山区",
      level: "district",
      adcode: 230404,
      lng: 130.285991,
      lat: 47.315121,
      childrenNum: 0,
      parent: 230400,
    },
    {
      name: "兴安区",
      level: "district",
      adcode: 230405,
      lng: 130.239289,
      lat: 47.252805,
      childrenNum: 0,
      parent: 230400,
    },
    {
      name: "东山区",
      level: "district",
      adcode: 230406,
      lng: 130.317151,
      lat: 47.338571,
      childrenNum: 0,
      parent: 230400,
    },
    {
      name: "兴山区",
      level: "district",
      adcode: 230407,
      lng: 130.303598,
      lat: 47.357698,
      childrenNum: 0,
      parent: 230400,
    },
    {
      name: "萝北县",
      level: "district",
      adcode: 230421,
      lng: 130.820566,
      lat: 47.578979,
      childrenNum: 0,
      parent: 230400,
    },
    {
      name: "绥滨县",
      level: "district",
      adcode: 230422,
      lng: 131.852863,
      lat: 47.289522,
      childrenNum: 0,
      parent: 230400,
    },
    {
      name: "双鸭山市",
      level: "city",
      adcode: 230500,
      lng: 131.141563,
      lat: 46.676157,
      childrenNum: 8,
      parent: 23e4,
    },
    {
      name: "尖山区",
      level: "district",
      adcode: 230502,
      lng: 131.158372,
      lat: 46.646083,
      childrenNum: 0,
      parent: 230500,
    },
    {
      name: "岭东区",
      level: "district",
      adcode: 230503,
      lng: 131.165067,
      lat: 46.592663,
      childrenNum: 0,
      parent: 230500,
    },
    {
      name: "四方台区",
      level: "district",
      adcode: 230505,
      lng: 131.337636,
      lat: 46.597143,
      childrenNum: 0,
      parent: 230500,
    },
    {
      name: "宝山区",
      level: "district",
      adcode: 230506,
      lng: 131.401589,
      lat: 46.577167,
      childrenNum: 0,
      parent: 230500,
    },
    {
      name: "集贤县",
      level: "district",
      adcode: 230521,
      lng: 131.141452,
      lat: 46.728448,
      childrenNum: 0,
      parent: 230500,
    },
    {
      name: "友谊县",
      level: "district",
      adcode: 230522,
      lng: 131.807815,
      lat: 46.767299,
      childrenNum: 0,
      parent: 230500,
    },
    {
      name: "宝清县",
      level: "district",
      adcode: 230523,
      lng: 132.196907,
      lat: 46.327335,
      childrenNum: 0,
      parent: 230500,
    },
    {
      name: "饶河县",
      level: "district",
      adcode: 230524,
      lng: 134.014125,
      lat: 46.79726,
      childrenNum: 0,
      parent: 230500,
    },
    {
      name: "大庆市",
      level: "city",
      adcode: 230600,
      lng: 125.104078,
      lat: 46.589498,
      childrenNum: 9,
      parent: 23e4,
    },
    {
      name: "萨尔图区",
      level: "district",
      adcode: 230602,
      lng: 125.135269,
      lat: 46.629281,
      childrenNum: 0,
      parent: 230600,
    },
    {
      name: "龙凤区",
      level: "district",
      adcode: 230603,
      lng: 125.135093,
      lat: 46.562369,
      childrenNum: 0,
      parent: 230600,
    },
    {
      name: "让胡路区",
      level: "district",
      adcode: 230604,
      lng: 124.889858,
      lat: 46.642567,
      childrenNum: 0,
      parent: 230600,
    },
    {
      name: "红岗区",
      level: "district",
      adcode: 230605,
      lng: 124.891041,
      lat: 46.398567,
      childrenNum: 0,
      parent: 230600,
    },
    {
      name: "大同区",
      level: "district",
      adcode: 230606,
      lng: 124.812221,
      lat: 46.039972,
      childrenNum: 0,
      parent: 230600,
    },
    {
      name: "肇州县",
      level: "district",
      adcode: 230621,
      lng: 125.268449,
      lat: 45.699543,
      childrenNum: 0,
      parent: 230600,
    },
    {
      name: "肇源县",
      level: "district",
      adcode: 230622,
      lng: 125.078311,
      lat: 45.518982,
      childrenNum: 0,
      parent: 230600,
    },
    {
      name: "林甸县",
      level: "district",
      adcode: 230623,
      lng: 124.863628,
      lat: 47.171677,
      childrenNum: 0,
      parent: 230600,
    },
    {
      name: "杜尔伯特蒙古族自治县",
      level: "district",
      adcode: 230624,
      lng: 124.442829,
      lat: 46.862348,
      childrenNum: 0,
      parent: 230600,
    },
    {
      name: "伊春市",
      level: "city",
      adcode: 230700,
      lng: 128.840863,
      lat: 47.728332,
      childrenNum: 10,
      parent: 23e4,
    },
    {
      name: "伊美区",
      level: "district",
      adcode: 230717,
      lng: 128.907156,
      lat: 47.728257,
      childrenNum: 0,
      parent: 230700,
    },
    {
      name: "乌翠区",
      level: "district",
      adcode: 230718,
      lng: 128.669458,
      lat: 47.726499,
      childrenNum: 0,
      parent: 230700,
    },
    {
      name: "友好区",
      level: "district",
      adcode: 230719,
      lng: 128.836341,
      lat: 47.840801,
      childrenNum: 0,
      parent: 230700,
    },
    {
      name: "嘉荫县",
      level: "district",
      adcode: 230722,
      lng: 130.402406,
      lat: 48.888613,
      childrenNum: 0,
      parent: 230700,
    },
    {
      name: "汤旺县",
      level: "district",
      adcode: 230723,
      lng: 129.570935,
      lat: 48.454639,
      childrenNum: 0,
      parent: 230700,
    },
    {
      name: "丰林县",
      level: "district",
      adcode: 230724,
      lng: 129.533661,
      lat: 48.290566,
      childrenNum: 0,
      parent: 230700,
    },
    {
      name: "大箐山县",
      level: "district",
      adcode: 230725,
      lng: 129.020597,
      lat: 47.02836,
      childrenNum: 0,
      parent: 230700,
    },
    {
      name: "南岔县",
      level: "district",
      adcode: 230726,
      lng: 129.283467,
      lat: 47.138034,
      childrenNum: 0,
      parent: 230700,
    },
    {
      name: "金林区",
      level: "district",
      adcode: 230751,
      lng: 129.428839,
      lat: 47.413019,
      childrenNum: 0,
      parent: 230700,
    },
    {
      name: "铁力市",
      level: "district",
      adcode: 230781,
      lng: 128.032554,
      lat: 46.986604,
      childrenNum: 0,
      parent: 230700,
    },
    {
      name: "佳木斯市",
      level: "city",
      adcode: 230800,
      lng: 130.318916,
      lat: 46.800002,
      childrenNum: 10,
      parent: 23e4,
    },
    {
      name: "向阳区",
      level: "district",
      adcode: 230803,
      lng: 130.365263,
      lat: 46.807808,
      childrenNum: 0,
      parent: 230800,
    },
    {
      name: "前进区",
      level: "district",
      adcode: 230804,
      lng: 130.375254,
      lat: 46.81405,
      childrenNum: 0,
      parent: 230800,
    },
    {
      name: "东风区",
      level: "district",
      adcode: 230805,
      lng: 130.403588,
      lat: 46.822609,
      childrenNum: 0,
      parent: 230800,
    },
    {
      name: "郊区",
      level: "district",
      adcode: 230811,
      lng: 130.327182,
      lat: 46.809596,
      childrenNum: 0,
      parent: 230800,
    },
    {
      name: "桦南县",
      level: "district",
      adcode: 230822,
      lng: 130.553472,
      lat: 46.239314,
      childrenNum: 0,
      parent: 230800,
    },
    {
      name: "桦川县",
      level: "district",
      adcode: 230826,
      lng: 130.71908,
      lat: 47.023001,
      childrenNum: 0,
      parent: 230800,
    },
    {
      name: "汤原县",
      level: "district",
      adcode: 230828,
      lng: 129.904747,
      lat: 46.730623,
      childrenNum: 0,
      parent: 230800,
    },
    {
      name: "同江市",
      level: "district",
      adcode: 230881,
      lng: 132.510113,
      lat: 47.642475,
      childrenNum: 0,
      parent: 230800,
    },
    {
      name: "富锦市",
      level: "district",
      adcode: 230882,
      lng: 132.037659,
      lat: 47.250144,
      childrenNum: 0,
      parent: 230800,
    },
    {
      name: "抚远市",
      level: "district",
      adcode: 230883,
      lng: 134.30786,
      lat: 48.365027,
      childrenNum: 0,
      parent: 230800,
    },
    {
      name: "七台河市",
      level: "city",
      adcode: 230900,
      lng: 131.003015,
      lat: 45.771178,
      childrenNum: 4,
      parent: 23e4,
    },
    {
      name: "新兴区",
      level: "district",
      adcode: 230902,
      lng: 130.93226,
      lat: 45.816579,
      childrenNum: 0,
      parent: 230900,
    },
    {
      name: "桃山区",
      level: "district",
      adcode: 230903,
      lng: 131.020046,
      lat: 45.765733,
      childrenNum: 0,
      parent: 230900,
    },
    {
      name: "茄子河区",
      level: "district",
      adcode: 230904,
      lng: 131.067545,
      lat: 45.785755,
      childrenNum: 0,
      parent: 230900,
    },
    {
      name: "勃利县",
      level: "district",
      adcode: 230921,
      lng: 130.592009,
      lat: 45.755856,
      childrenNum: 0,
      parent: 230900,
    },
    {
      name: "牡丹江市",
      level: "city",
      adcode: 231e3,
      lng: 129.632928,
      lat: 44.551486,
      childrenNum: 10,
      parent: 23e4,
    },
    {
      name: "东安区",
      level: "district",
      adcode: 231002,
      lng: 129.626651,
      lat: 44.58125,
      childrenNum: 0,
      parent: 231e3,
    },
    {
      name: "阳明区",
      level: "district",
      adcode: 231003,
      lng: 129.635836,
      lat: 44.595851,
      childrenNum: 0,
      parent: 231e3,
    },
    {
      name: "爱民区",
      level: "district",
      adcode: 231004,
      lng: 129.591227,
      lat: 44.595897,
      childrenNum: 0,
      parent: 231e3,
    },
    {
      name: "西安区",
      level: "district",
      adcode: 231005,
      lng: 129.616021,
      lat: 44.577611,
      childrenNum: 0,
      parent: 231e3,
    },
    {
      name: "林口县",
      level: "district",
      adcode: 231025,
      lng: 130.282286,
      lat: 45.279754,
      childrenNum: 0,
      parent: 231e3,
    },
    {
      name: "绥芬河市",
      level: "district",
      adcode: 231081,
      lng: 131.151805,
      lat: 44.412487,
      childrenNum: 0,
      parent: 231e3,
    },
    {
      name: "海林市",
      level: "district",
      adcode: 231083,
      lng: 129.380756,
      lat: 44.594017,
      childrenNum: 0,
      parent: 231e3,
    },
    {
      name: "宁安市",
      level: "district",
      adcode: 231084,
      lng: 129.482505,
      lat: 44.340617,
      childrenNum: 0,
      parent: 231e3,
    },
    {
      name: "穆棱市",
      level: "district",
      adcode: 231085,
      lng: 130.52446,
      lat: 44.918842,
      childrenNum: 0,
      parent: 231e3,
    },
    {
      name: "东宁市",
      level: "district",
      adcode: 231086,
      lng: 131.124839,
      lat: 44.090361,
      childrenNum: 0,
      parent: 231e3,
    },
    {
      name: "黑河市",
      level: "city",
      adcode: 231100,
      lng: 127.528226,
      lat: 50.244887,
      childrenNum: 6,
      parent: 23e4,
    },
    {
      name: "爱辉区",
      level: "district",
      adcode: 231102,
      lng: 127.500703,
      lat: 50.252361,
      childrenNum: 0,
      parent: 231100,
    },
    {
      name: "逊克县",
      level: "district",
      adcode: 231123,
      lng: 128.478698,
      lat: 49.56429,
      childrenNum: 0,
      parent: 231100,
    },
    {
      name: "孙吴县",
      level: "district",
      adcode: 231124,
      lng: 127.336163,
      lat: 49.425645,
      childrenNum: 0,
      parent: 231100,
    },
    {
      name: "北安市",
      level: "district",
      adcode: 231181,
      lng: 126.490989,
      lat: 48.241168,
      childrenNum: 0,
      parent: 231100,
    },
    {
      name: "五大连池市",
      level: "district",
      adcode: 231182,
      lng: 126.205446,
      lat: 48.517342,
      childrenNum: 0,
      parent: 231100,
    },
    {
      name: "嫩江市",
      level: "district",
      adcode: 231183,
      lng: 125.221192,
      lat: 49.185766,
      childrenNum: 0,
      parent: 231100,
    },
    {
      name: "绥化市",
      level: "city",
      adcode: 231200,
      lng: 126.968714,
      lat: 46.654147,
      childrenNum: 10,
      parent: 23e4,
    },
    {
      name: "北林区",
      level: "district",
      adcode: 231202,
      lng: 126.984995,
      lat: 46.638114,
      childrenNum: 0,
      parent: 231200,
    },
    {
      name: "望奎县",
      level: "district",
      adcode: 231221,
      lng: 126.486333,
      lat: 46.832185,
      childrenNum: 0,
      parent: 231200,
    },
    {
      name: "兰西县",
      level: "district",
      adcode: 231222,
      lng: 126.287734,
      lat: 46.252966,
      childrenNum: 0,
      parent: 231200,
    },
    {
      name: "青冈县",
      level: "district",
      adcode: 231223,
      lng: 126.099314,
      lat: 46.70398,
      childrenNum: 0,
      parent: 231200,
    },
    {
      name: "庆安县",
      level: "district",
      adcode: 231224,
      lng: 127.507586,
      lat: 46.880628,
      childrenNum: 0,
      parent: 231200,
    },
    {
      name: "明水县",
      level: "district",
      adcode: 231225,
      lng: 125.90601,
      lat: 47.173649,
      childrenNum: 0,
      parent: 231200,
    },
    {
      name: "绥棱县",
      level: "district",
      adcode: 231226,
      lng: 127.114928,
      lat: 47.235814,
      childrenNum: 0,
      parent: 231200,
    },
    {
      name: "安达市",
      level: "district",
      adcode: 231281,
      lng: 125.307629,
      lat: 46.451882,
      childrenNum: 0,
      parent: 231200,
    },
    {
      name: "肇东市",
      level: "district",
      adcode: 231282,
      lng: 125.962419,
      lat: 46.050664,
      childrenNum: 0,
      parent: 231200,
    },
    {
      name: "海伦市",
      level: "district",
      adcode: 231283,
      lng: 126.930191,
      lat: 47.450661,
      childrenNum: 0,
      parent: 231200,
    },
    {
      name: "大兴安岭地区",
      level: "city",
      adcode: 232700,
      lng: 124.117806,
      lat: 50.411048,
      childrenNum: 4,
      parent: 23e4,
    },
    {
      name: "漠河市",
      level: "district",
      adcode: 232701,
      lng: 122.539313,
      lat: 52.972465,
      childrenNum: 0,
      parent: 232700,
    },
    {
      name: "加格达奇区",
      level: "district",
      adcode: 232718,
      lng: 124.139742,
      lat: 50.408822,
      childrenNum: 0,
      parent: 232700,
    },
    {
      name: "呼玛县",
      level: "district",
      adcode: 232721,
      lng: 126.651856,
      lat: 51.725924,
      childrenNum: 0,
      parent: 232700,
    },
    {
      name: "塔河县",
      level: "district",
      adcode: 232722,
      lng: 124.709733,
      lat: 52.334512,
      childrenNum: 0,
      parent: 232700,
    },
    {
      name: "上海市",
      level: "province",
      adcode: 31e4,
      lng: 121.473667,
      lat: 31.230525,
      childrenNum: 1,
      parent: 1e5,
    },
    {
      name: "上海市",
      level: "city",
      adcode: 310100,
      lng: 121.472644,
      lat: 31.231706,
      childrenNum: 16,
      parent: 31e4,
    },
    {
      name: "黄浦区",
      level: "district",
      adcode: 310101,
      lng: 121.48442,
      lat: 31.231661,
      childrenNum: 0,
      parent: 310100,
    },
    {
      name: "徐汇区",
      level: "district",
      adcode: 310104,
      lng: 121.436307,
      lat: 31.188334,
      childrenNum: 0,
      parent: 310100,
    },
    {
      name: "长宁区",
      level: "district",
      adcode: 310105,
      lng: 121.424751,
      lat: 31.220537,
      childrenNum: 0,
      parent: 310100,
    },
    {
      name: "静安区",
      level: "district",
      adcode: 310106,
      lng: 121.447348,
      lat: 31.227718,
      childrenNum: 0,
      parent: 310100,
    },
    {
      name: "普陀区",
      level: "district",
      adcode: 310107,
      lng: 121.39547,
      lat: 31.249618,
      childrenNum: 0,
      parent: 310100,
    },
    {
      name: "虹口区",
      level: "district",
      adcode: 310109,
      lng: 121.504994,
      lat: 31.264917,
      childrenNum: 0,
      parent: 310100,
    },
    {
      name: "杨浦区",
      level: "district",
      adcode: 310110,
      lng: 121.525409,
      lat: 31.259588,
      childrenNum: 0,
      parent: 310100,
    },
    {
      name: "闵行区",
      level: "district",
      adcode: 310112,
      lng: 121.380857,
      lat: 31.112834,
      childrenNum: 0,
      parent: 310100,
    },
    {
      name: "宝山区",
      level: "district",
      adcode: 310113,
      lng: 121.489431,
      lat: 31.405242,
      childrenNum: 0,
      parent: 310100,
    },
    {
      name: "嘉定区",
      level: "district",
      adcode: 310114,
      lng: 121.265276,
      lat: 31.375566,
      childrenNum: 0,
      parent: 310100,
    },
    {
      name: "浦东新区",
      level: "district",
      adcode: 310115,
      lng: 121.544346,
      lat: 31.221461,
      childrenNum: 0,
      parent: 310100,
    },
    {
      name: "金山区",
      level: "district",
      adcode: 310116,
      lng: 121.341774,
      lat: 30.742769,
      childrenNum: 0,
      parent: 310100,
    },
    {
      name: "松江区",
      level: "district",
      adcode: 310117,
      lng: 121.227676,
      lat: 31.03257,
      childrenNum: 0,
      parent: 310100,
    },
    {
      name: "青浦区",
      level: "district",
      adcode: 310118,
      lng: 121.124249,
      lat: 31.15098,
      childrenNum: 0,
      parent: 310100,
    },
    {
      name: "奉贤区",
      level: "district",
      adcode: 310120,
      lng: 121.473945,
      lat: 30.918406,
      childrenNum: 0,
      parent: 310100,
    },
    {
      name: "崇明区",
      level: "district",
      adcode: 310151,
      lng: 121.397662,
      lat: 31.623863,
      childrenNum: 0,
      parent: 310100,
    },
    {
      name: "江苏省",
      level: "province",
      adcode: 32e4,
      lng: 118.763563,
      lat: 32.061377,
      childrenNum: 13,
      parent: 1e5,
    },
    {
      name: "南京市",
      level: "city",
      adcode: 320100,
      lng: 118.796624,
      lat: 32.059344,
      childrenNum: 11,
      parent: 32e4,
    },
    {
      name: "玄武区",
      level: "district",
      adcode: 320102,
      lng: 118.797779,
      lat: 32.048644,
      childrenNum: 0,
      parent: 320100,
    },
    {
      name: "秦淮区",
      level: "district",
      adcode: 320104,
      lng: 118.794792,
      lat: 32.039065,
      childrenNum: 0,
      parent: 320100,
    },
    {
      name: "建邺区",
      level: "district",
      adcode: 320105,
      lng: 118.731642,
      lat: 32.003343,
      childrenNum: 0,
      parent: 320100,
    },
    {
      name: "鼓楼区",
      level: "district",
      adcode: 320106,
      lng: 118.769943,
      lat: 32.066814,
      childrenNum: 0,
      parent: 320100,
    },
    {
      name: "浦口区",
      level: "district",
      adcode: 320111,
      lng: 118.627165,
      lat: 32.059796,
      childrenNum: 0,
      parent: 320100,
    },
    {
      name: "栖霞区",
      level: "district",
      adcode: 320113,
      lng: 118.909117,
      lat: 32.096423,
      childrenNum: 0,
      parent: 320100,
    },
    {
      name: "雨花台区",
      level: "district",
      adcode: 320114,
      lng: 118.779087,
      lat: 31.991291,
      childrenNum: 0,
      parent: 320100,
    },
    {
      name: "江宁区",
      level: "district",
      adcode: 320115,
      lng: 118.83951,
      lat: 31.953195,
      childrenNum: 0,
      parent: 320100,
    },
    {
      name: "六合区",
      level: "district",
      adcode: 320116,
      lng: 118.822241,
      lat: 32.323235,
      childrenNum: 0,
      parent: 320100,
    },
    {
      name: "溧水区",
      level: "district",
      adcode: 320117,
      lng: 119.028414,
      lat: 31.651108,
      childrenNum: 0,
      parent: 320100,
    },
    {
      name: "高淳区",
      level: "district",
      adcode: 320118,
      lng: 118.892074,
      lat: 31.328678,
      childrenNum: 0,
      parent: 320100,
    },
    {
      name: "无锡市",
      level: "city",
      adcode: 320200,
      lng: 120.311889,
      lat: 31.491064,
      childrenNum: 7,
      parent: 32e4,
    },
    {
      name: "锡山区",
      level: "district",
      adcode: 320205,
      lng: 120.357732,
      lat: 31.589484,
      childrenNum: 0,
      parent: 320200,
    },
    {
      name: "惠山区",
      level: "district",
      adcode: 320206,
      lng: 120.29843,
      lat: 31.680282,
      childrenNum: 0,
      parent: 320200,
    },
    {
      name: "滨湖区",
      level: "district",
      adcode: 320211,
      lng: 120.284381,
      lat: 31.527846,
      childrenNum: 0,
      parent: 320200,
    },
    {
      name: "梁溪区",
      level: "district",
      adcode: 320213,
      lng: 120.303551,
      lat: 31.566226,
      childrenNum: 0,
      parent: 320200,
    },
    {
      name: "新吴区",
      level: "district",
      adcode: 320214,
      lng: 120.364303,
      lat: 31.49085,
      childrenNum: 0,
      parent: 320200,
    },
    {
      name: "江阴市",
      level: "district",
      adcode: 320281,
      lng: 120.284794,
      lat: 31.921642,
      childrenNum: 0,
      parent: 320200,
    },
    {
      name: "宜兴市",
      level: "district",
      adcode: 320282,
      lng: 119.821873,
      lat: 31.338429,
      childrenNum: 0,
      parent: 320200,
    },
    {
      name: "徐州市",
      level: "city",
      adcode: 320300,
      lng: 117.283752,
      lat: 34.204224,
      childrenNum: 10,
      parent: 32e4,
    },
    {
      name: "鼓楼区",
      level: "district",
      adcode: 320302,
      lng: 117.185643,
      lat: 34.288736,
      childrenNum: 0,
      parent: 320300,
    },
    {
      name: "云龙区",
      level: "district",
      adcode: 320303,
      lng: 117.251515,
      lat: 34.253638,
      childrenNum: 0,
      parent: 320300,
    },
    {
      name: "贾汪区",
      level: "district",
      adcode: 320305,
      lng: 117.465137,
      lat: 34.436492,
      childrenNum: 0,
      parent: 320300,
    },
    {
      name: "泉山区",
      level: "district",
      adcode: 320311,
      lng: 117.194405,
      lat: 34.22655,
      childrenNum: 0,
      parent: 320300,
    },
    {
      name: "铜山区",
      level: "district",
      adcode: 320312,
      lng: 117.169698,
      lat: 34.181162,
      childrenNum: 0,
      parent: 320300,
    },
    {
      name: "丰县",
      level: "district",
      adcode: 320321,
      lng: 116.658111,
      lat: 34.697232,
      childrenNum: 0,
      parent: 320300,
    },
    {
      name: "沛县",
      level: "district",
      adcode: 320322,
      lng: 116.936353,
      lat: 34.760761,
      childrenNum: 0,
      parent: 320300,
    },
    {
      name: "睢宁县",
      level: "district",
      adcode: 320324,
      lng: 117.941364,
      lat: 33.913727,
      childrenNum: 0,
      parent: 320300,
    },
    {
      name: "新沂市",
      level: "district",
      adcode: 320381,
      lng: 118.354747,
      lat: 34.369585,
      childrenNum: 0,
      parent: 320300,
    },
    {
      name: "邳州市",
      level: "district",
      adcode: 320382,
      lng: 118.012511,
      lat: 34.339208,
      childrenNum: 0,
      parent: 320300,
    },
    {
      name: "常州市",
      level: "city",
      adcode: 320400,
      lng: 119.974092,
      lat: 31.811313,
      childrenNum: 6,
      parent: 32e4,
    },
    {
      name: "天宁区",
      level: "district",
      adcode: 320402,
      lng: 119.999439,
      lat: 31.79232,
      childrenNum: 0,
      parent: 320400,
    },
    {
      name: "钟楼区",
      level: "district",
      adcode: 320404,
      lng: 119.902081,
      lat: 31.802608,
      childrenNum: 0,
      parent: 320400,
    },
    {
      name: "新北区",
      level: "district",
      adcode: 320411,
      lng: 119.960925,
      lat: 31.86355,
      childrenNum: 0,
      parent: 320400,
    },
    {
      name: "武进区",
      level: "district",
      adcode: 320412,
      lng: 119.942441,
      lat: 31.701252,
      childrenNum: 0,
      parent: 320400,
    },
    {
      name: "金坛区",
      level: "district",
      adcode: 320413,
      lng: 119.587503,
      lat: 31.722384,
      childrenNum: 0,
      parent: 320400,
    },
    {
      name: "溧阳市",
      level: "district",
      adcode: 320481,
      lng: 119.484164,
      lat: 31.416967,
      childrenNum: 0,
      parent: 320400,
    },
    {
      name: "苏州市",
      level: "city",
      adcode: 320500,
      lng: 120.585294,
      lat: 31.299758,
      childrenNum: 9,
      parent: 32e4,
    },
    {
      name: "虎丘区",
      level: "district",
      adcode: 320505,
      lng: 120.434238,
      lat: 31.329601,
      childrenNum: 0,
      parent: 320500,
    },
    {
      name: "吴中区",
      level: "district",
      adcode: 320506,
      lng: 120.632094,
      lat: 31.263604,
      childrenNum: 0,
      parent: 320500,
    },
    {
      name: "相城区",
      level: "district",
      adcode: 320507,
      lng: 120.642391,
      lat: 31.369189,
      childrenNum: 0,
      parent: 320500,
    },
    {
      name: "姑苏区",
      level: "district",
      adcode: 320508,
      lng: 120.617367,
      lat: 31.335648,
      childrenNum: 0,
      parent: 320500,
    },
    {
      name: "吴江区",
      level: "district",
      adcode: 320509,
      lng: 120.645728,
      lat: 31.138525,
      childrenNum: 0,
      parent: 320500,
    },
    {
      name: "常熟市",
      level: "district",
      adcode: 320581,
      lng: 120.752512,
      lat: 31.656016,
      childrenNum: 0,
      parent: 320500,
    },
    {
      name: "张家港市",
      level: "district",
      adcode: 320582,
      lng: 120.555979,
      lat: 31.876739,
      childrenNum: 0,
      parent: 320500,
    },
    {
      name: "昆山市",
      level: "district",
      adcode: 320583,
      lng: 120.980795,
      lat: 31.385476,
      childrenNum: 0,
      parent: 320500,
    },
    {
      name: "太仓市",
      level: "district",
      adcode: 320585,
      lng: 121.130344,
      lat: 31.458043,
      childrenNum: 0,
      parent: 320500,
    },
    {
      name: "南通市",
      level: "city",
      adcode: 320600,
      lng: 120.894522,
      lat: 31.981269,
      childrenNum: 7,
      parent: 32e4,
    },
    {
      name: "通州区",
      level: "district",
      adcode: 320612,
      lng: 121.073742,
      lat: 32.065972,
      childrenNum: 0,
      parent: 320600,
    },
    {
      name: "崇川区",
      level: "district",
      adcode: 320613,
      lng: 120.857253,
      lat: 32.010277,
      childrenNum: 0,
      parent: 320600,
    },
    {
      name: "海门区",
      level: "district",
      adcode: 320614,
      lng: 121.182016,
      lat: 31.869418,
      childrenNum: 0,
      parent: 320600,
    },
    {
      name: "如东县",
      level: "district",
      adcode: 320623,
      lng: 121.18495,
      lat: 32.331584,
      childrenNum: 0,
      parent: 320600,
    },
    {
      name: "启东市",
      level: "district",
      adcode: 320681,
      lng: 121.65523,
      lat: 31.792831,
      childrenNum: 0,
      parent: 320600,
    },
    {
      name: "如皋市",
      level: "district",
      adcode: 320682,
      lng: 120.574028,
      lat: 32.371493,
      childrenNum: 0,
      parent: 320600,
    },
    {
      name: "海安市",
      level: "district",
      adcode: 320685,
      lng: 120.46779,
      lat: 32.532853,
      childrenNum: 0,
      parent: 320600,
    },
    {
      name: "连云港市",
      level: "city",
      adcode: 320700,
      lng: 119.221487,
      lat: 34.596639,
      childrenNum: 6,
      parent: 32e4,
    },
    {
      name: "连云区",
      level: "district",
      adcode: 320703,
      lng: 119.338901,
      lat: 34.760317,
      childrenNum: 0,
      parent: 320700,
    },
    {
      name: "海州区",
      level: "district",
      adcode: 320706,
      lng: 119.163492,
      lat: 34.572506,
      childrenNum: 0,
      parent: 320700,
    },
    {
      name: "赣榆区",
      level: "district",
      adcode: 320707,
      lng: 119.173173,
      lat: 34.841336,
      childrenNum: 0,
      parent: 320700,
    },
    {
      name: "东海县",
      level: "district",
      adcode: 320722,
      lng: 118.752869,
      lat: 34.542194,
      childrenNum: 0,
      parent: 320700,
    },
    {
      name: "灌云县",
      level: "district",
      adcode: 320723,
      lng: 119.239426,
      lat: 34.284074,
      childrenNum: 0,
      parent: 320700,
    },
    {
      name: "灌南县",
      level: "district",
      adcode: 320724,
      lng: 119.315583,
      lat: 34.087251,
      childrenNum: 0,
      parent: 320700,
    },
    {
      name: "淮安市",
      level: "city",
      adcode: 320800,
      lng: 119.113166,
      lat: 33.551495,
      childrenNum: 7,
      parent: 32e4,
    },
    {
      name: "淮安区",
      level: "district",
      adcode: 320803,
      lng: 119.141183,
      lat: 33.50296,
      childrenNum: 0,
      parent: 320800,
    },
    {
      name: "淮阴区",
      level: "district",
      adcode: 320804,
      lng: 119.034895,
      lat: 33.632588,
      childrenNum: 0,
      parent: 320800,
    },
    {
      name: "清江浦区",
      level: "district",
      adcode: 320812,
      lng: 119.026662,
      lat: 33.552579,
      childrenNum: 0,
      parent: 320800,
    },
    {
      name: "洪泽区",
      level: "district",
      adcode: 320813,
      lng: 118.873132,
      lat: 33.294095,
      childrenNum: 0,
      parent: 320800,
    },
    {
      name: "涟水县",
      level: "district",
      adcode: 320826,
      lng: 119.260589,
      lat: 33.781648,
      childrenNum: 0,
      parent: 320800,
    },
    {
      name: "盱眙县",
      level: "district",
      adcode: 320830,
      lng: 118.544545,
      lat: 33.011905,
      childrenNum: 0,
      parent: 320800,
    },
    {
      name: "金湖县",
      level: "district",
      adcode: 320831,
      lng: 119.020432,
      lat: 33.024663,
      childrenNum: 0,
      parent: 320800,
    },
    {
      name: "盐城市",
      level: "city",
      adcode: 320900,
      lng: 120.16263,
      lat: 33.348176,
      childrenNum: 9,
      parent: 32e4,
    },
    {
      name: "亭湖区",
      level: "district",
      adcode: 320902,
      lng: 120.196148,
      lat: 33.391414,
      childrenNum: 0,
      parent: 320900,
    },
    {
      name: "盐都区",
      level: "district",
      adcode: 320903,
      lng: 120.153567,
      lat: 33.338538,
      childrenNum: 0,
      parent: 320900,
    },
    {
      name: "大丰区",
      level: "district",
      adcode: 320904,
      lng: 120.500761,
      lat: 33.200047,
      childrenNum: 0,
      parent: 320900,
    },
    {
      name: "响水县",
      level: "district",
      adcode: 320921,
      lng: 119.578332,
      lat: 34.199172,
      childrenNum: 0,
      parent: 320900,
    },
    {
      name: "滨海县",
      level: "district",
      adcode: 320922,
      lng: 119.820713,
      lat: 33.990372,
      childrenNum: 0,
      parent: 320900,
    },
    {
      name: "阜宁县",
      level: "district",
      adcode: 320923,
      lng: 119.802271,
      lat: 33.758857,
      childrenNum: 0,
      parent: 320900,
    },
    {
      name: "射阳县",
      level: "district",
      adcode: 320924,
      lng: 120.326338,
      lat: 33.766277,
      childrenNum: 0,
      parent: 320900,
    },
    {
      name: "建湖县",
      level: "district",
      adcode: 320925,
      lng: 119.788743,
      lat: 33.438931,
      childrenNum: 0,
      parent: 320900,
    },
    {
      name: "东台市",
      level: "district",
      adcode: 320981,
      lng: 120.320308,
      lat: 32.867845,
      childrenNum: 0,
      parent: 320900,
    },
    {
      name: "扬州市",
      level: "city",
      adcode: 321e3,
      lng: 119.412834,
      lat: 32.394404,
      childrenNum: 6,
      parent: 32e4,
    },
    {
      name: "广陵区",
      level: "district",
      adcode: 321002,
      lng: 119.431785,
      lat: 32.395654,
      childrenNum: 0,
      parent: 321e3,
    },
    {
      name: "邗江区",
      level: "district",
      adcode: 321003,
      lng: 119.397935,
      lat: 32.37741,
      childrenNum: 0,
      parent: 321e3,
    },
    {
      name: "江都区",
      level: "district",
      adcode: 321012,
      lng: 119.569684,
      lat: 32.43571,
      childrenNum: 0,
      parent: 321e3,
    },
    {
      name: "宝应县",
      level: "district",
      adcode: 321023,
      lng: 119.358389,
      lat: 33.241125,
      childrenNum: 0,
      parent: 321e3,
    },
    {
      name: "仪征市",
      level: "district",
      adcode: 321081,
      lng: 119.184468,
      lat: 32.272833,
      childrenNum: 0,
      parent: 321e3,
    },
    {
      name: "高邮市",
      level: "district",
      adcode: 321084,
      lng: 119.45892,
      lat: 32.781606,
      childrenNum: 0,
      parent: 321e3,
    },
    {
      name: "镇江市",
      level: "city",
      adcode: 321100,
      lng: 119.424441,
      lat: 32.188141,
      childrenNum: 6,
      parent: 32e4,
    },
    {
      name: "京口区",
      level: "district",
      adcode: 321102,
      lng: 119.470186,
      lat: 32.198285,
      childrenNum: 0,
      parent: 321100,
    },
    {
      name: "润州区",
      level: "district",
      adcode: 321111,
      lng: 119.411383,
      lat: 32.195146,
      childrenNum: 0,
      parent: 321100,
    },
    {
      name: "丹徒区",
      level: "district",
      adcode: 321112,
      lng: 119.433854,
      lat: 32.132118,
      childrenNum: 0,
      parent: 321100,
    },
    {
      name: "丹阳市",
      level: "district",
      adcode: 321181,
      lng: 119.606071,
      lat: 32.010035,
      childrenNum: 0,
      parent: 321100,
    },
    {
      name: "扬中市",
      level: "district",
      adcode: 321182,
      lng: 119.796816,
      lat: 32.236476,
      childrenNum: 0,
      parent: 321100,
    },
    {
      name: "句容市",
      level: "district",
      adcode: 321183,
      lng: 119.168693,
      lat: 31.945732,
      childrenNum: 0,
      parent: 321100,
    },
    {
      name: "泰州市",
      level: "city",
      adcode: 321200,
      lng: 119.922883,
      lat: 32.456692,
      childrenNum: 6,
      parent: 32e4,
    },
    {
      name: "海陵区",
      level: "district",
      adcode: 321202,
      lng: 119.923825,
      lat: 32.49248,
      childrenNum: 0,
      parent: 321200,
    },
    {
      name: "高港区",
      level: "district",
      adcode: 321203,
      lng: 119.88154,
      lat: 32.31923,
      childrenNum: 0,
      parent: 321200,
    },
    {
      name: "姜堰区",
      level: "district",
      adcode: 321204,
      lng: 120.12807,
      lat: 32.51029,
      childrenNum: 0,
      parent: 321200,
    },
    {
      name: "兴化市",
      level: "district",
      adcode: 321281,
      lng: 119.85255,
      lat: 32.911952,
      childrenNum: 0,
      parent: 321200,
    },
    {
      name: "靖江市",
      level: "district",
      adcode: 321282,
      lng: 120.277124,
      lat: 31.98325,
      childrenNum: 0,
      parent: 321200,
    },
    {
      name: "泰兴市",
      level: "district",
      adcode: 321283,
      lng: 120.051475,
      lat: 32.173072,
      childrenNum: 0,
      parent: 321200,
    },
    {
      name: "宿迁市",
      level: "city",
      adcode: 321300,
      lng: 118.275228,
      lat: 33.963186,
      childrenNum: 5,
      parent: 32e4,
    },
    {
      name: "宿城区",
      level: "district",
      adcode: 321302,
      lng: 118.242048,
      lat: 33.963891,
      childrenNum: 0,
      parent: 321300,
    },
    {
      name: "宿豫区",
      level: "district",
      adcode: 321311,
      lng: 118.330423,
      lat: 33.94813,
      childrenNum: 0,
      parent: 321300,
    },
    {
      name: "沭阳县",
      level: "district",
      adcode: 321322,
      lng: 118.804321,
      lat: 34.110642,
      childrenNum: 0,
      parent: 321300,
    },
    {
      name: "泗阳县",
      level: "district",
      adcode: 321323,
      lng: 118.703636,
      lat: 33.723576,
      childrenNum: 0,
      parent: 321300,
    },
    {
      name: "泗洪县",
      level: "district",
      adcode: 321324,
      lng: 118.223941,
      lat: 33.476575,
      childrenNum: 0,
      parent: 321300,
    },
    {
      name: "浙江省",
      level: "province",
      adcode: 33e4,
      lng: 120.152575,
      lat: 30.266619,
      childrenNum: 11,
      parent: 1e5,
    },
    {
      name: "杭州市",
      level: "city",
      adcode: 330100,
      lng: 120.210792,
      lat: 30.246026,
      childrenNum: 13,
      parent: 33e4,
    },
    {
      name: "上城区",
      level: "district",
      adcode: 330102,
      lng: 120.19732,
      lat: 30.226543,
      childrenNum: 0,
      parent: 330100,
    },
    {
      name: "拱墅区",
      level: "district",
      adcode: 330105,
      lng: 120.141503,
      lat: 30.319126,
      childrenNum: 0,
      parent: 330100,
    },
    {
      name: "西湖区",
      level: "district",
      adcode: 330106,
      lng: 120.130396,
      lat: 30.259242,
      childrenNum: 0,
      parent: 330100,
    },
    {
      name: "滨江区",
      level: "district",
      adcode: 330108,
      lng: 120.211981,
      lat: 30.208332,
      childrenNum: 0,
      parent: 330100,
    },
    {
      name: "萧山区",
      level: "district",
      adcode: 330109,
      lng: 120.264263,
      lat: 30.184119,
      childrenNum: 0,
      parent: 330100,
    },
    {
      name: "余杭区",
      level: "district",
      adcode: 330110,
      lng: 119.978742,
      lat: 30.273705,
      childrenNum: 0,
      parent: 330100,
    },
    {
      name: "富阳区",
      level: "district",
      adcode: 330111,
      lng: 119.96022,
      lat: 30.048803,
      childrenNum: 0,
      parent: 330100,
    },
    {
      name: "临安区",
      level: "district",
      adcode: 330112,
      lng: 119.724457,
      lat: 30.234375,
      childrenNum: 0,
      parent: 330100,
    },
    {
      name: "临平区",
      level: "district",
      adcode: 330113,
      lng: 120.299222,
      lat: 30.419154,
      childrenNum: 0,
      parent: 330100,
    },
    {
      name: "钱塘区",
      level: "district",
      adcode: 330114,
      lng: 120.493941,
      lat: 30.32304,
      childrenNum: 0,
      parent: 330100,
    },
    {
      name: "桐庐县",
      level: "district",
      adcode: 330122,
      lng: 119.691755,
      lat: 29.79418,
      childrenNum: 0,
      parent: 330100,
    },
    {
      name: "淳安县",
      level: "district",
      adcode: 330127,
      lng: 119.042015,
      lat: 29.609678,
      childrenNum: 0,
      parent: 330100,
    },
    {
      name: "建德市",
      level: "district",
      adcode: 330182,
      lng: 119.281195,
      lat: 29.474964,
      childrenNum: 0,
      parent: 330100,
    },
    {
      name: "宁波市",
      level: "city",
      adcode: 330200,
      lng: 121.62454,
      lat: 29.860258,
      childrenNum: 10,
      parent: 33e4,
    },
    {
      name: "海曙区",
      level: "district",
      adcode: 330203,
      lng: 121.550485,
      lat: 29.873705,
      childrenNum: 0,
      parent: 330200,
    },
    {
      name: "江北区",
      level: "district",
      adcode: 330205,
      lng: 121.555067,
      lat: 29.88673,
      childrenNum: 0,
      parent: 330200,
    },
    {
      name: "北仑区",
      level: "district",
      adcode: 330206,
      lng: 121.844601,
      lat: 29.899548,
      childrenNum: 0,
      parent: 330200,
    },
    {
      name: "镇海区",
      level: "district",
      adcode: 330211,
      lng: 121.596686,
      lat: 29.965212,
      childrenNum: 0,
      parent: 330200,
    },
    {
      name: "鄞州区",
      level: "district",
      adcode: 330212,
      lng: 121.546617,
      lat: 29.817302,
      childrenNum: 0,
      parent: 330200,
    },
    {
      name: "奉化区",
      level: "district",
      adcode: 330213,
      lng: 121.406151,
      lat: 29.655292,
      childrenNum: 0,
      parent: 330200,
    },
    {
      name: "象山县",
      level: "district",
      adcode: 330225,
      lng: 121.869251,
      lat: 29.476826,
      childrenNum: 0,
      parent: 330200,
    },
    {
      name: "宁海县",
      level: "district",
      adcode: 330226,
      lng: 121.429729,
      lat: 29.287929,
      childrenNum: 0,
      parent: 330200,
    },
    {
      name: "余姚市",
      level: "district",
      adcode: 330281,
      lng: 121.154572,
      lat: 30.037967,
      childrenNum: 0,
      parent: 330200,
    },
    {
      name: "慈溪市",
      level: "district",
      adcode: 330282,
      lng: 121.266525,
      lat: 30.170695,
      childrenNum: 0,
      parent: 330200,
    },
    {
      name: "温州市",
      level: "city",
      adcode: 330300,
      lng: 120.699279,
      lat: 27.993849,
      childrenNum: 12,
      parent: 33e4,
    },
    {
      name: "鹿城区",
      level: "district",
      adcode: 330302,
      lng: 120.655199,
      lat: 28.015776,
      childrenNum: 0,
      parent: 330300,
    },
    {
      name: "龙湾区",
      level: "district",
      adcode: 330303,
      lng: 120.812333,
      lat: 27.933261,
      childrenNum: 0,
      parent: 330300,
    },
    {
      name: "瓯海区",
      level: "district",
      adcode: 330304,
      lng: 120.615149,
      lat: 27.967445,
      childrenNum: 0,
      parent: 330300,
    },
    {
      name: "洞头区",
      level: "district",
      adcode: 330305,
      lng: 121.157406,
      lat: 27.836412,
      childrenNum: 0,
      parent: 330300,
    },
    {
      name: "永嘉县",
      level: "district",
      adcode: 330324,
      lng: 120.69136,
      lat: 28.153914,
      childrenNum: 0,
      parent: 330300,
    },
    {
      name: "平阳县",
      level: "district",
      adcode: 330326,
      lng: 120.565161,
      lat: 27.662394,
      childrenNum: 0,
      parent: 330300,
    },
    {
      name: "苍南县",
      level: "district",
      adcode: 330327,
      lng: 120.425957,
      lat: 27.518636,
      childrenNum: 0,
      parent: 330300,
    },
    {
      name: "文成县",
      level: "district",
      adcode: 330328,
      lng: 120.090929,
      lat: 27.786856,
      childrenNum: 0,
      parent: 330300,
    },
    {
      name: "泰顺县",
      level: "district",
      adcode: 330329,
      lng: 119.717643,
      lat: 27.556578,
      childrenNum: 0,
      parent: 330300,
    },
    {
      name: "瑞安市",
      level: "district",
      adcode: 330381,
      lng: 120.655245,
      lat: 27.778967,
      childrenNum: 0,
      parent: 330300,
    },
    {
      name: "乐清市",
      level: "district",
      adcode: 330382,
      lng: 120.986297,
      lat: 28.112519,
      childrenNum: 0,
      parent: 330300,
    },
    {
      name: "龙港市",
      level: "district",
      adcode: 330383,
      lng: 120.552952,
      lat: 27.578379,
      childrenNum: 0,
      parent: 330300,
    },
    {
      name: "嘉兴市",
      level: "city",
      adcode: 330400,
      lng: 120.755623,
      lat: 30.746814,
      childrenNum: 7,
      parent: 33e4,
    },
    {
      name: "南湖区",
      level: "district",
      adcode: 330402,
      lng: 120.782952,
      lat: 30.747738,
      childrenNum: 0,
      parent: 330400,
    },
    {
      name: "秀洲区",
      level: "district",
      adcode: 330411,
      lng: 120.709047,
      lat: 30.764811,
      childrenNum: 0,
      parent: 330400,
    },
    {
      name: "嘉善县",
      level: "district",
      adcode: 330421,
      lng: 120.926031,
      lat: 30.83085,
      childrenNum: 0,
      parent: 330400,
    },
    {
      name: "海盐县",
      level: "district",
      adcode: 330424,
      lng: 120.94628,
      lat: 30.52664,
      childrenNum: 0,
      parent: 330400,
    },
    {
      name: "海宁市",
      level: "district",
      adcode: 330481,
      lng: 120.680224,
      lat: 30.511536,
      childrenNum: 0,
      parent: 330400,
    },
    {
      name: "平湖市",
      level: "district",
      adcode: 330482,
      lng: 121.015619,
      lat: 30.677804,
      childrenNum: 0,
      parent: 330400,
    },
    {
      name: "桐乡市",
      level: "district",
      adcode: 330483,
      lng: 120.565127,
      lat: 30.630375,
      childrenNum: 0,
      parent: 330400,
    },
    {
      name: "湖州市",
      level: "city",
      adcode: 330500,
      lng: 120.086881,
      lat: 30.894178,
      childrenNum: 5,
      parent: 33e4,
    },
    {
      name: "吴兴区",
      level: "district",
      adcode: 330502,
      lng: 120.185608,
      lat: 30.857184,
      childrenNum: 0,
      parent: 330500,
    },
    {
      name: "南浔区",
      level: "district",
      adcode: 330503,
      lng: 120.418244,
      lat: 30.850835,
      childrenNum: 0,
      parent: 330500,
    },
    {
      name: "德清县",
      level: "district",
      adcode: 330521,
      lng: 119.9774,
      lat: 30.54251,
      childrenNum: 0,
      parent: 330500,
    },
    {
      name: "长兴县",
      level: "district",
      adcode: 330522,
      lng: 119.911212,
      lat: 31.026962,
      childrenNum: 0,
      parent: 330500,
    },
    {
      name: "安吉县",
      level: "district",
      adcode: 330523,
      lng: 119.680261,
      lat: 30.638803,
      childrenNum: 0,
      parent: 330500,
    },
    {
      name: "绍兴市",
      level: "city",
      adcode: 330600,
      lng: 120.582886,
      lat: 30.051549,
      childrenNum: 6,
      parent: 33e4,
    },
    {
      name: "越城区",
      level: "district",
      adcode: 330602,
      lng: 120.582338,
      lat: 29.989092,
      childrenNum: 0,
      parent: 330600,
    },
    {
      name: "柯桥区",
      level: "district",
      adcode: 330603,
      lng: 120.495532,
      lat: 30.083039,
      childrenNum: 0,
      parent: 330600,
    },
    {
      name: "上虞区",
      level: "district",
      adcode: 330604,
      lng: 120.868571,
      lat: 30.033862,
      childrenNum: 0,
      parent: 330600,
    },
    {
      name: "新昌县",
      level: "district",
      adcode: 330624,
      lng: 120.903918,
      lat: 29.500525,
      childrenNum: 0,
      parent: 330600,
    },
    {
      name: "诸暨市",
      level: "district",
      adcode: 330681,
      lng: 120.246602,
      lat: 29.709398,
      childrenNum: 0,
      parent: 330600,
    },
    {
      name: "嵊州市",
      level: "district",
      adcode: 330683,
      lng: 120.830505,
      lat: 29.561519,
      childrenNum: 0,
      parent: 330600,
    },
    {
      name: "金华市",
      level: "city",
      adcode: 330700,
      lng: 119.647265,
      lat: 29.079195,
      childrenNum: 9,
      parent: 33e4,
    },
    {
      name: "婺城区",
      level: "district",
      adcode: 330702,
      lng: 119.571574,
      lat: 29.087311,
      childrenNum: 0,
      parent: 330700,
    },
    {
      name: "金东区",
      level: "district",
      adcode: 330703,
      lng: 119.692821,
      lat: 29.099822,
      childrenNum: 0,
      parent: 330700,
    },
    {
      name: "武义县",
      level: "district",
      adcode: 330723,
      lng: 119.816341,
      lat: 28.892562,
      childrenNum: 0,
      parent: 330700,
    },
    {
      name: "浦江县",
      level: "district",
      adcode: 330726,
      lng: 119.89259,
      lat: 29.453363,
      childrenNum: 0,
      parent: 330700,
    },
    {
      name: "磐安县",
      level: "district",
      adcode: 330727,
      lng: 120.449937,
      lat: 29.054491,
      childrenNum: 0,
      parent: 330700,
    },
    {
      name: "兰溪市",
      level: "district",
      adcode: 330781,
      lng: 119.460404,
      lat: 29.209059,
      childrenNum: 0,
      parent: 330700,
    },
    {
      name: "义乌市",
      level: "district",
      adcode: 330782,
      lng: 120.075679,
      lat: 29.306296,
      childrenNum: 0,
      parent: 330700,
    },
    {
      name: "东阳市",
      level: "district",
      adcode: 330783,
      lng: 120.24179,
      lat: 29.290158,
      childrenNum: 0,
      parent: 330700,
    },
    {
      name: "永康市",
      level: "district",
      adcode: 330784,
      lng: 120.047356,
      lat: 28.88899,
      childrenNum: 0,
      parent: 330700,
    },
    {
      name: "衢州市",
      level: "city",
      adcode: 330800,
      lng: 118.859307,
      lat: 28.970229,
      childrenNum: 6,
      parent: 33e4,
    },
    {
      name: "柯城区",
      level: "district",
      adcode: 330802,
      lng: 118.874138,
      lat: 28.936937,
      childrenNum: 0,
      parent: 330800,
    },
    {
      name: "衢江区",
      level: "district",
      adcode: 330803,
      lng: 118.959139,
      lat: 28.980356,
      childrenNum: 0,
      parent: 330800,
    },
    {
      name: "常山县",
      level: "district",
      adcode: 330822,
      lng: 118.511224,
      lat: 28.902446,
      childrenNum: 0,
      parent: 330800,
    },
    {
      name: "开化县",
      level: "district",
      adcode: 330824,
      lng: 118.415756,
      lat: 29.136729,
      childrenNum: 0,
      parent: 330800,
    },
    {
      name: "龙游县",
      level: "district",
      adcode: 330825,
      lng: 119.1723,
      lat: 29.028214,
      childrenNum: 0,
      parent: 330800,
    },
    {
      name: "江山市",
      level: "district",
      adcode: 330881,
      lng: 118.627228,
      lat: 28.73796,
      childrenNum: 0,
      parent: 330800,
    },
    {
      name: "舟山市",
      level: "city",
      adcode: 330900,
      lng: 122.207395,
      lat: 29.985578,
      childrenNum: 4,
      parent: 33e4,
    },
    {
      name: "定海区",
      level: "district",
      adcode: 330902,
      lng: 122.106844,
      lat: 30.019795,
      childrenNum: 0,
      parent: 330900,
    },
    {
      name: "普陀区",
      level: "district",
      adcode: 330903,
      lng: 122.323297,
      lat: 29.970571,
      childrenNum: 0,
      parent: 330900,
    },
    {
      name: "岱山县",
      level: "district",
      adcode: 330921,
      lng: 122.225718,
      lat: 30.264533,
      childrenNum: 0,
      parent: 330900,
    },
    {
      name: "嵊泗县",
      level: "district",
      adcode: 330922,
      lng: 122.45132,
      lat: 30.725677,
      childrenNum: 0,
      parent: 330900,
    },
    {
      name: "台州市",
      level: "city",
      adcode: 331e3,
      lng: 121.42079,
      lat: 28.655716,
      childrenNum: 9,
      parent: 33e4,
    },
    {
      name: "椒江区",
      level: "district",
      adcode: 331002,
      lng: 121.442859,
      lat: 28.673334,
      childrenNum: 0,
      parent: 331e3,
    },
    {
      name: "黄岩区",
      level: "district",
      adcode: 331003,
      lng: 121.261804,
      lat: 28.649433,
      childrenNum: 0,
      parent: 331e3,
    },
    {
      name: "路桥区",
      level: "district",
      adcode: 331004,
      lng: 121.337874,
      lat: 28.578244,
      childrenNum: 0,
      parent: 331e3,
    },
    {
      name: "三门县",
      level: "district",
      adcode: 331022,
      lng: 121.39561,
      lat: 29.104888,
      childrenNum: 0,
      parent: 331e3,
    },
    {
      name: "天台县",
      level: "district",
      adcode: 331023,
      lng: 121.006657,
      lat: 29.144594,
      childrenNum: 0,
      parent: 331e3,
    },
    {
      name: "仙居县",
      level: "district",
      adcode: 331024,
      lng: 120.728733,
      lat: 28.846856,
      childrenNum: 0,
      parent: 331e3,
    },
    {
      name: "温岭市",
      level: "district",
      adcode: 331081,
      lng: 121.385435,
      lat: 28.372805,
      childrenNum: 0,
      parent: 331e3,
    },
    {
      name: "临海市",
      level: "district",
      adcode: 331082,
      lng: 121.144625,
      lat: 28.859042,
      childrenNum: 0,
      parent: 331e3,
    },
    {
      name: "玉环市",
      level: "district",
      adcode: 331083,
      lng: 121.231915,
      lat: 28.136703,
      childrenNum: 0,
      parent: 331e3,
    },
    {
      name: "丽水市",
      level: "city",
      adcode: 331100,
      lng: 119.923249,
      lat: 28.467694,
      childrenNum: 9,
      parent: 33e4,
    },
    {
      name: "莲都区",
      level: "district",
      adcode: 331102,
      lng: 119.912266,
      lat: 28.4461,
      childrenNum: 0,
      parent: 331100,
    },
    {
      name: "青田县",
      level: "district",
      adcode: 331121,
      lng: 120.289693,
      lat: 28.1396,
      childrenNum: 0,
      parent: 331100,
    },
    {
      name: "缙云县",
      level: "district",
      adcode: 331122,
      lng: 120.091685,
      lat: 28.659294,
      childrenNum: 0,
      parent: 331100,
    },
    {
      name: "遂昌县",
      level: "district",
      adcode: 331123,
      lng: 119.275865,
      lat: 28.592388,
      childrenNum: 0,
      parent: 331100,
    },
    {
      name: "松阳县",
      level: "district",
      adcode: 331124,
      lng: 119.481406,
      lat: 28.448883,
      childrenNum: 0,
      parent: 331100,
    },
    {
      name: "云和县",
      level: "district",
      adcode: 331125,
      lng: 119.573454,
      lat: 28.116024,
      childrenNum: 0,
      parent: 331100,
    },
    {
      name: "庆元县",
      level: "district",
      adcode: 331126,
      lng: 119.062572,
      lat: 27.619213,
      childrenNum: 0,
      parent: 331100,
    },
    {
      name: "景宁畲族自治县",
      level: "district",
      adcode: 331127,
      lng: 119.635686,
      lat: 27.973594,
      childrenNum: 0,
      parent: 331100,
    },
    {
      name: "龙泉市",
      level: "district",
      adcode: 331181,
      lng: 119.14126,
      lat: 28.074916,
      childrenNum: 0,
      parent: 331100,
    },
    {
      name: "安徽省",
      level: "province",
      adcode: 34e4,
      lng: 117.330139,
      lat: 31.734559,
      childrenNum: 16,
      parent: 1e5,
    },
    {
      name: "合肥市",
      level: "city",
      adcode: 340100,
      lng: 117.227267,
      lat: 31.820567,
      childrenNum: 9,
      parent: 34e4,
    },
    {
      name: "瑶海区",
      level: "district",
      adcode: 340102,
      lng: 117.30944,
      lat: 31.858111,
      childrenNum: 0,
      parent: 340100,
    },
    {
      name: "庐阳区",
      level: "district",
      adcode: 340103,
      lng: 117.265088,
      lat: 31.878722,
      childrenNum: 0,
      parent: 340100,
    },
    {
      name: "蜀山区",
      level: "district",
      adcode: 340104,
      lng: 117.26053,
      lat: 31.851211,
      childrenNum: 0,
      parent: 340100,
    },
    {
      name: "包河区",
      level: "district",
      adcode: 340111,
      lng: 117.310133,
      lat: 31.793801,
      childrenNum: 0,
      parent: 340100,
    },
    {
      name: "长丰县",
      level: "district",
      adcode: 340121,
      lng: 117.167632,
      lat: 32.478347,
      childrenNum: 0,
      parent: 340100,
    },
    {
      name: "肥东县",
      level: "district",
      adcode: 340122,
      lng: 117.4779,
      lat: 31.878601,
      childrenNum: 0,
      parent: 340100,
    },
    {
      name: "肥西县",
      level: "district",
      adcode: 340123,
      lng: 117.158416,
      lat: 31.707006,
      childrenNum: 0,
      parent: 340100,
    },
    {
      name: "庐江县",
      level: "district",
      adcode: 340124,
      lng: 117.288165,
      lat: 31.256978,
      childrenNum: 0,
      parent: 340100,
    },
    {
      name: "巢湖市",
      level: "district",
      adcode: 340181,
      lng: 117.890236,
      lat: 31.624464,
      childrenNum: 0,
      parent: 340100,
    },
    {
      name: "芜湖市",
      level: "city",
      adcode: 340200,
      lng: 118.433065,
      lat: 31.352614,
      childrenNum: 7,
      parent: 34e4,
    },
    {
      name: "镜湖区",
      level: "district",
      adcode: 340202,
      lng: 118.385133,
      lat: 31.34056,
      childrenNum: 0,
      parent: 340200,
    },
    {
      name: "鸠江区",
      level: "district",
      adcode: 340207,
      lng: 118.392337,
      lat: 31.369752,
      childrenNum: 0,
      parent: 340200,
    },
    {
      name: "弋江区",
      level: "district",
      adcode: 340209,
      lng: 118.372664,
      lat: 31.311421,
      childrenNum: 0,
      parent: 340200,
    },
    {
      name: "湾沚区",
      level: "district",
      adcode: 340210,
      lng: 118.576124,
      lat: 31.134809,
      childrenNum: 0,
      parent: 340200,
    },
    {
      name: "繁昌区",
      level: "district",
      adcode: 340212,
      lng: 118.198536,
      lat: 31.101766,
      childrenNum: 0,
      parent: 340200,
    },
    {
      name: "南陵县",
      level: "district",
      adcode: 340223,
      lng: 118.334083,
      lat: 30.914621,
      childrenNum: 0,
      parent: 340200,
    },
    {
      name: "无为市",
      level: "district",
      adcode: 340281,
      lng: 117.902265,
      lat: 31.304462,
      childrenNum: 0,
      parent: 340200,
    },
    {
      name: "蚌埠市",
      level: "city",
      adcode: 340300,
      lng: 117.388566,
      lat: 32.91682,
      childrenNum: 7,
      parent: 34e4,
    },
    {
      name: "龙子湖区",
      level: "district",
      adcode: 340302,
      lng: 117.454544,
      lat: 32.90863,
      childrenNum: 0,
      parent: 340300,
    },
    {
      name: "蚌山区",
      level: "district",
      adcode: 340303,
      lng: 117.373347,
      lat: 32.916393,
      childrenNum: 0,
      parent: 340300,
    },
    {
      name: "禹会区",
      level: "district",
      adcode: 340304,
      lng: 117.34186,
      lat: 32.929715,
      childrenNum: 0,
      parent: 340300,
    },
    {
      name: "淮上区",
      level: "district",
      adcode: 340311,
      lng: 117.359352,
      lat: 32.96557,
      childrenNum: 0,
      parent: 340300,
    },
    {
      name: "怀远县",
      level: "district",
      adcode: 340321,
      lng: 117.205083,
      lat: 32.971543,
      childrenNum: 0,
      parent: 340300,
    },
    {
      name: "五河县",
      level: "district",
      adcode: 340322,
      lng: 117.881312,
      lat: 33.126532,
      childrenNum: 0,
      parent: 340300,
    },
    {
      name: "固镇县",
      level: "district",
      adcode: 340323,
      lng: 117.316585,
      lat: 33.318371,
      childrenNum: 0,
      parent: 340300,
    },
    {
      name: "淮南市",
      level: "city",
      adcode: 340400,
      lng: 117.018603,
      lat: 32.585384,
      childrenNum: 7,
      parent: 34e4,
    },
    {
      name: "大通区",
      level: "district",
      adcode: 340402,
      lng: 117.053314,
      lat: 32.631519,
      childrenNum: 0,
      parent: 340400,
    },
    {
      name: "田家庵区",
      level: "district",
      adcode: 340403,
      lng: 117.017263,
      lat: 32.647456,
      childrenNum: 0,
      parent: 340400,
    },
    {
      name: "谢家集区",
      level: "district",
      adcode: 340404,
      lng: 116.860026,
      lat: 32.599173,
      childrenNum: 0,
      parent: 340400,
    },
    {
      name: "八公山区",
      level: "district",
      adcode: 340405,
      lng: 116.832979,
      lat: 32.630922,
      childrenNum: 0,
      parent: 340400,
    },
    {
      name: "潘集区",
      level: "district",
      adcode: 340406,
      lng: 116.834715,
      lat: 32.77208,
      childrenNum: 0,
      parent: 340400,
    },
    {
      name: "凤台县",
      level: "district",
      adcode: 340421,
      lng: 116.710947,
      lat: 32.710536,
      childrenNum: 0,
      parent: 340400,
    },
    {
      name: "寿县",
      level: "district",
      adcode: 340422,
      lng: 116.798203,
      lat: 32.545027,
      childrenNum: 0,
      parent: 340400,
    },
    {
      name: "马鞍山市",
      level: "city",
      adcode: 340500,
      lng: 118.50685,
      lat: 31.668765,
      childrenNum: 6,
      parent: 34e4,
    },
    {
      name: "花山区",
      level: "district",
      adcode: 340503,
      lng: 118.511366,
      lat: 31.700127,
      childrenNum: 0,
      parent: 340500,
    },
    {
      name: "雨山区",
      level: "district",
      adcode: 340504,
      lng: 118.498675,
      lat: 31.682374,
      childrenNum: 0,
      parent: 340500,
    },
    {
      name: "博望区",
      level: "district",
      adcode: 340506,
      lng: 118.818276,
      lat: 31.55117,
      childrenNum: 0,
      parent: 340500,
    },
    {
      name: "当涂县",
      level: "district",
      adcode: 340521,
      lng: 118.497873,
      lat: 31.570857,
      childrenNum: 0,
      parent: 340500,
    },
    {
      name: "含山县",
      level: "district",
      adcode: 340522,
      lng: 118.101448,
      lat: 31.735559,
      childrenNum: 0,
      parent: 340500,
    },
    {
      name: "和县",
      level: "district",
      adcode: 340523,
      lng: 118.353668,
      lat: 31.74248,
      childrenNum: 0,
      parent: 340500,
    },
    {
      name: "淮北市",
      level: "city",
      adcode: 340600,
      lng: 116.798362,
      lat: 33.956264,
      childrenNum: 4,
      parent: 34e4,
    },
    {
      name: "杜集区",
      level: "district",
      adcode: 340602,
      lng: 116.827949,
      lat: 33.991412,
      childrenNum: 0,
      parent: 340600,
    },
    {
      name: "相山区",
      level: "district",
      adcode: 340603,
      lng: 116.795233,
      lat: 33.959927,
      childrenNum: 0,
      parent: 340600,
    },
    {
      name: "烈山区",
      level: "district",
      adcode: 340604,
      lng: 116.813221,
      lat: 33.895407,
      childrenNum: 0,
      parent: 340600,
    },
    {
      name: "濉溪县",
      level: "district",
      adcode: 340621,
      lng: 116.76616,
      lat: 33.915612,
      childrenNum: 0,
      parent: 340600,
    },
    {
      name: "铜陵市",
      level: "city",
      adcode: 340700,
      lng: 117.811298,
      lat: 30.945214,
      childrenNum: 4,
      parent: 34e4,
    },
    {
      name: "铜官区",
      level: "district",
      adcode: 340705,
      lng: 117.856541,
      lat: 30.936772,
      childrenNum: 0,
      parent: 340700,
    },
    {
      name: "义安区",
      level: "district",
      adcode: 340706,
      lng: 117.937405,
      lat: 30.950619,
      childrenNum: 0,
      parent: 340700,
    },
    {
      name: "郊区",
      level: "district",
      adcode: 340711,
      lng: 117.767919,
      lat: 30.821699,
      childrenNum: 0,
      parent: 340700,
    },
    {
      name: "枞阳县",
      level: "district",
      adcode: 340722,
      lng: 117.250191,
      lat: 30.705466,
      childrenNum: 0,
      parent: 340700,
    },
    {
      name: "安庆市",
      level: "city",
      adcode: 340800,
      lng: 117.115349,
      lat: 30.531828,
      childrenNum: 10,
      parent: 34e4,
    },
    {
      name: "迎江区",
      level: "district",
      adcode: 340802,
      lng: 117.090878,
      lat: 30.512768,
      childrenNum: 0,
      parent: 340800,
    },
    {
      name: "大观区",
      level: "district",
      adcode: 340803,
      lng: 117.013469,
      lat: 30.553697,
      childrenNum: 0,
      parent: 340800,
    },
    {
      name: "宜秀区",
      level: "district",
      adcode: 340811,
      lng: 116.987469,
      lat: 30.613189,
      childrenNum: 0,
      parent: 340800,
    },
    {
      name: "怀宁县",
      level: "district",
      adcode: 340822,
      lng: 116.829612,
      lat: 30.73484,
      childrenNum: 0,
      parent: 340800,
    },
    {
      name: "太湖县",
      level: "district",
      adcode: 340825,
      lng: 116.30881,
      lat: 30.454198,
      childrenNum: 0,
      parent: 340800,
    },
    {
      name: "宿松县",
      level: "district",
      adcode: 340826,
      lng: 116.134485,
      lat: 30.171663,
      childrenNum: 0,
      parent: 340800,
    },
    {
      name: "望江县",
      level: "district",
      adcode: 340827,
      lng: 116.70641,
      lat: 30.128404,
      childrenNum: 0,
      parent: 340800,
    },
    {
      name: "岳西县",
      level: "district",
      adcode: 340828,
      lng: 116.359732,
      lat: 30.849716,
      childrenNum: 0,
      parent: 340800,
    },
    {
      name: "桐城市",
      level: "district",
      adcode: 340881,
      lng: 116.936588,
      lat: 31.035476,
      childrenNum: 0,
      parent: 340800,
    },
    {
      name: "潜山市",
      level: "district",
      adcode: 340882,
      lng: 116.581224,
      lat: 30.631022,
      childrenNum: 0,
      parent: 340800,
    },
    {
      name: "黄山市",
      level: "city",
      adcode: 341e3,
      lng: 118.337643,
      lat: 29.714886,
      childrenNum: 7,
      parent: 34e4,
    },
    {
      name: "屯溪区",
      level: "district",
      adcode: 341002,
      lng: 118.315012,
      lat: 29.69655,
      childrenNum: 0,
      parent: 341e3,
    },
    {
      name: "黄山区",
      level: "district",
      adcode: 341003,
      lng: 118.141632,
      lat: 30.272991,
      childrenNum: 0,
      parent: 341e3,
    },
    {
      name: "徽州区",
      level: "district",
      adcode: 341004,
      lng: 118.336799,
      lat: 29.827291,
      childrenNum: 0,
      parent: 341e3,
    },
    {
      name: "歙县",
      level: "district",
      adcode: 341021,
      lng: 118.415258,
      lat: 29.861354,
      childrenNum: 0,
      parent: 341e3,
    },
    {
      name: "休宁县",
      level: "district",
      adcode: 341022,
      lng: 118.193533,
      lat: 29.784532,
      childrenNum: 0,
      parent: 341e3,
    },
    {
      name: "黟县",
      level: "district",
      adcode: 341023,
      lng: 117.938139,
      lat: 29.92477,
      childrenNum: 0,
      parent: 341e3,
    },
    {
      name: "祁门县",
      level: "district",
      adcode: 341024,
      lng: 117.717452,
      lat: 29.854179,
      childrenNum: 0,
      parent: 341e3,
    },
    {
      name: "滁州市",
      level: "city",
      adcode: 341100,
      lng: 118.333439,
      lat: 32.255904,
      childrenNum: 8,
      parent: 34e4,
    },
    {
      name: "琅琊区",
      level: "district",
      adcode: 341102,
      lng: 118.32115,
      lat: 32.334475,
      childrenNum: 0,
      parent: 341100,
    },
    {
      name: "南谯区",
      level: "district",
      adcode: 341103,
      lng: 118.416715,
      lat: 32.200084,
      childrenNum: 0,
      parent: 341100,
    },
    {
      name: "来安县",
      level: "district",
      adcode: 341122,
      lng: 118.432581,
      lat: 32.423072,
      childrenNum: 0,
      parent: 341100,
    },
    {
      name: "全椒县",
      level: "district",
      adcode: 341124,
      lng: 118.274149,
      lat: 32.08593,
      childrenNum: 0,
      parent: 341100,
    },
    {
      name: "定远县",
      level: "district",
      adcode: 341125,
      lng: 117.698528,
      lat: 32.530741,
      childrenNum: 0,
      parent: 341100,
    },
    {
      name: "凤阳县",
      level: "district",
      adcode: 341126,
      lng: 117.531791,
      lat: 32.875714,
      childrenNum: 0,
      parent: 341100,
    },
    {
      name: "天长市",
      level: "district",
      adcode: 341181,
      lng: 119.004838,
      lat: 32.667409,
      childrenNum: 0,
      parent: 341100,
    },
    {
      name: "明光市",
      level: "district",
      adcode: 341182,
      lng: 118.018197,
      lat: 32.78193,
      childrenNum: 0,
      parent: 341100,
    },
    {
      name: "阜阳市",
      level: "city",
      adcode: 341200,
      lng: 115.814252,
      lat: 32.891032,
      childrenNum: 8,
      parent: 34e4,
    },
    {
      name: "颍州区",
      level: "district",
      adcode: 341202,
      lng: 115.806916,
      lat: 32.883322,
      childrenNum: 0,
      parent: 341200,
    },
    {
      name: "颍东区",
      level: "district",
      adcode: 341203,
      lng: 115.856728,
      lat: 32.91173,
      childrenNum: 0,
      parent: 341200,
    },
    {
      name: "颍泉区",
      level: "district",
      adcode: 341204,
      lng: 115.807415,
      lat: 32.925461,
      childrenNum: 0,
      parent: 341200,
    },
    {
      name: "临泉县",
      level: "district",
      adcode: 341221,
      lng: 115.26312,
      lat: 33.038884,
      childrenNum: 0,
      parent: 341200,
    },
    {
      name: "太和县",
      level: "district",
      adcode: 341222,
      lng: 115.621941,
      lat: 33.160327,
      childrenNum: 0,
      parent: 341200,
    },
    {
      name: "阜南县",
      level: "district",
      adcode: 341225,
      lng: 115.596003,
      lat: 32.659681,
      childrenNum: 0,
      parent: 341200,
    },
    {
      name: "颍上县",
      level: "district",
      adcode: 341226,
      lng: 116.256772,
      lat: 32.653211,
      childrenNum: 0,
      parent: 341200,
    },
    {
      name: "界首市",
      level: "district",
      adcode: 341282,
      lng: 115.374688,
      lat: 33.257799,
      childrenNum: 0,
      parent: 341200,
    },
    {
      name: "宿州市",
      level: "city",
      adcode: 341300,
      lng: 116.96419,
      lat: 33.647726,
      childrenNum: 5,
      parent: 34e4,
    },
    {
      name: "埇桥区",
      level: "district",
      adcode: 341302,
      lng: 116.977039,
      lat: 33.640205,
      childrenNum: 0,
      parent: 341300,
    },
    {
      name: "砀山县",
      level: "district",
      adcode: 341321,
      lng: 116.366257,
      lat: 34.442139,
      childrenNum: 0,
      parent: 341300,
    },
    {
      name: "萧县",
      level: "district",
      adcode: 341322,
      lng: 116.947289,
      lat: 34.18884,
      childrenNum: 0,
      parent: 341300,
    },
    {
      name: "灵璧县",
      level: "district",
      adcode: 341323,
      lng: 117.549321,
      lat: 33.554464,
      childrenNum: 0,
      parent: 341300,
    },
    {
      name: "泗县",
      level: "district",
      adcode: 341324,
      lng: 117.910277,
      lat: 33.483686,
      childrenNum: 0,
      parent: 341300,
    },
    {
      name: "六安市",
      level: "city",
      adcode: 341500,
      lng: 116.519729,
      lat: 31.735892,
      childrenNum: 7,
      parent: 34e4,
    },
    {
      name: "金安区",
      level: "district",
      adcode: 341502,
      lng: 116.539458,
      lat: 31.75014,
      childrenNum: 0,
      parent: 341500,
    },
    {
      name: "裕安区",
      level: "district",
      adcode: 341503,
      lng: 116.479505,
      lat: 31.738789,
      childrenNum: 0,
      parent: 341500,
    },
    {
      name: "叶集区",
      level: "district",
      adcode: 341504,
      lng: 115.925271,
      lat: 31.863693,
      childrenNum: 0,
      parent: 341500,
    },
    {
      name: "霍邱县",
      level: "district",
      adcode: 341522,
      lng: 116.277966,
      lat: 32.353362,
      childrenNum: 0,
      parent: 341500,
    },
    {
      name: "舒城县",
      level: "district",
      adcode: 341523,
      lng: 116.94863,
      lat: 31.462036,
      childrenNum: 0,
      parent: 341500,
    },
    {
      name: "金寨县",
      level: "district",
      adcode: 341524,
      lng: 115.934253,
      lat: 31.727295,
      childrenNum: 0,
      parent: 341500,
    },
    {
      name: "霍山县",
      level: "district",
      adcode: 341525,
      lng: 116.348274,
      lat: 31.409668,
      childrenNum: 0,
      parent: 341500,
    },
    {
      name: "亳州市",
      level: "city",
      adcode: 341600,
      lng: 115.778588,
      lat: 33.846285,
      childrenNum: 4,
      parent: 34e4,
    },
    {
      name: "谯城区",
      level: "district",
      adcode: 341602,
      lng: 115.779081,
      lat: 33.876436,
      childrenNum: 0,
      parent: 341600,
    },
    {
      name: "涡阳县",
      level: "district",
      adcode: 341621,
      lng: 116.21665,
      lat: 33.494134,
      childrenNum: 0,
      parent: 341600,
    },
    {
      name: "蒙城县",
      level: "district",
      adcode: 341622,
      lng: 116.56434,
      lat: 33.265671,
      childrenNum: 0,
      parent: 341600,
    },
    {
      name: "利辛县",
      level: "district",
      adcode: 341623,
      lng: 116.206396,
      lat: 33.158424,
      childrenNum: 0,
      parent: 341600,
    },
    {
      name: "池州市",
      level: "city",
      adcode: 341700,
      lng: 117.495663,
      lat: 30.674264,
      childrenNum: 4,
      parent: 34e4,
    },
    {
      name: "贵池区",
      level: "district",
      adcode: 341702,
      lng: 117.568432,
      lat: 30.687389,
      childrenNum: 0,
      parent: 341700,
    },
    {
      name: "东至县",
      level: "district",
      adcode: 341721,
      lng: 117.027533,
      lat: 30.111182,
      childrenNum: 0,
      parent: 341700,
    },
    {
      name: "石台县",
      level: "district",
      adcode: 341722,
      lng: 117.486211,
      lat: 30.210218,
      childrenNum: 0,
      parent: 341700,
    },
    {
      name: "青阳县",
      level: "district",
      adcode: 341723,
      lng: 117.847366,
      lat: 30.639006,
      childrenNum: 0,
      parent: 341700,
    },
    {
      name: "宣城市",
      level: "city",
      adcode: 341800,
      lng: 118.759127,
      lat: 30.939278,
      childrenNum: 7,
      parent: 34e4,
    },
    {
      name: "宣州区",
      level: "district",
      adcode: 341802,
      lng: 118.786098,
      lat: 30.944356,
      childrenNum: 0,
      parent: 341800,
    },
    {
      name: "郎溪县",
      level: "district",
      adcode: 341821,
      lng: 119.184326,
      lat: 31.142995,
      childrenNum: 0,
      parent: 341800,
    },
    {
      name: "泾县",
      level: "district",
      adcode: 341823,
      lng: 118.419552,
      lat: 30.688793,
      childrenNum: 0,
      parent: 341800,
    },
    {
      name: "绩溪县",
      level: "district",
      adcode: 341824,
      lng: 118.578519,
      lat: 30.067533,
      childrenNum: 0,
      parent: 341800,
    },
    {
      name: "旌德县",
      level: "district",
      adcode: 341825,
      lng: 118.550043,
      lat: 30.298287,
      childrenNum: 0,
      parent: 341800,
    },
    {
      name: "宁国市",
      level: "district",
      adcode: 341881,
      lng: 118.983085,
      lat: 30.634032,
      childrenNum: 0,
      parent: 341800,
    },
    {
      name: "广德市",
      level: "district",
      adcode: 341882,
      lng: 119.420799,
      lat: 30.877608,
      childrenNum: 0,
      parent: 341800,
    },
    {
      name: "福建省",
      level: "province",
      adcode: 35e4,
      lng: 119.296194,
      lat: 26.101082,
      childrenNum: 9,
      parent: 1e5,
    },
    {
      name: "福州市",
      level: "city",
      adcode: 350100,
      lng: 119.296411,
      lat: 26.074286,
      childrenNum: 13,
      parent: 35e4,
    },
    {
      name: "鼓楼区",
      level: "district",
      adcode: 350102,
      lng: 119.304507,
      lat: 26.082666,
      childrenNum: 0,
      parent: 350100,
    },
    {
      name: "台江区",
      level: "district",
      adcode: 350103,
      lng: 119.31419,
      lat: 26.052826,
      childrenNum: 0,
      parent: 350100,
    },
    {
      name: "仓山区",
      level: "district",
      adcode: 350104,
      lng: 119.27322,
      lat: 26.047027,
      childrenNum: 0,
      parent: 350100,
    },
    {
      name: "马尾区",
      level: "district",
      adcode: 350105,
      lng: 119.439259,
      lat: 25.998657,
      childrenNum: 0,
      parent: 350100,
    },
    {
      name: "晋安区",
      level: "district",
      adcode: 350111,
      lng: 119.328591,
      lat: 26.081963,
      childrenNum: 0,
      parent: 350100,
    },
    {
      name: "长乐区",
      level: "district",
      adcode: 350112,
      lng: 119.522952,
      lat: 25.962925,
      childrenNum: 0,
      parent: 350100,
    },
    {
      name: "闽侯县",
      level: "district",
      adcode: 350121,
      lng: 119.131362,
      lat: 26.150428,
      childrenNum: 0,
      parent: 350100,
    },
    {
      name: "连江县",
      level: "district",
      adcode: 350122,
      lng: 119.539542,
      lat: 26.197737,
      childrenNum: 0,
      parent: 350100,
    },
    {
      name: "罗源县",
      level: "district",
      adcode: 350123,
      lng: 119.549129,
      lat: 26.490215,
      childrenNum: 0,
      parent: 350100,
    },
    {
      name: "闽清县",
      level: "district",
      adcode: 350124,
      lng: 118.863334,
      lat: 26.221099,
      childrenNum: 0,
      parent: 350100,
    },
    {
      name: "永泰县",
      level: "district",
      adcode: 350125,
      lng: 118.932746,
      lat: 25.867198,
      childrenNum: 0,
      parent: 350100,
    },
    {
      name: "平潭县",
      level: "district",
      adcode: 350128,
      lng: 119.789893,
      lat: 25.498767,
      childrenNum: 0,
      parent: 350100,
    },
    {
      name: "福清市",
      level: "district",
      adcode: 350181,
      lng: 119.384388,
      lat: 25.720081,
      childrenNum: 0,
      parent: 350100,
    },
    {
      name: "厦门市",
      level: "city",
      adcode: 350200,
      lng: 118.08891,
      lat: 24.479627,
      childrenNum: 6,
      parent: 35e4,
    },
    {
      name: "思明区",
      level: "district",
      adcode: 350203,
      lng: 118.082745,
      lat: 24.445676,
      childrenNum: 0,
      parent: 350200,
    },
    {
      name: "海沧区",
      level: "district",
      adcode: 350205,
      lng: 118.032883,
      lat: 24.484688,
      childrenNum: 0,
      parent: 350200,
    },
    {
      name: "湖里区",
      level: "district",
      adcode: 350206,
      lng: 118.146825,
      lat: 24.512858,
      childrenNum: 0,
      parent: 350200,
    },
    {
      name: "集美区",
      level: "district",
      adcode: 350211,
      lng: 118.097407,
      lat: 24.575976,
      childrenNum: 0,
      parent: 350200,
    },
    {
      name: "同安区",
      level: "district",
      adcode: 350212,
      lng: 118.150823,
      lat: 24.723299,
      childrenNum: 0,
      parent: 350200,
    },
    {
      name: "翔安区",
      level: "district",
      adcode: 350213,
      lng: 118.247911,
      lat: 24.618583,
      childrenNum: 0,
      parent: 350200,
    },
    {
      name: "莆田市",
      level: "city",
      adcode: 350300,
      lng: 119.007662,
      lat: 25.454202,
      childrenNum: 5,
      parent: 35e4,
    },
    {
      name: "城厢区",
      level: "district",
      adcode: 350302,
      lng: 118.994261,
      lat: 25.419062,
      childrenNum: 0,
      parent: 350300,
    },
    {
      name: "涵江区",
      level: "district",
      adcode: 350303,
      lng: 119.116173,
      lat: 25.459057,
      childrenNum: 0,
      parent: 350300,
    },
    {
      name: "荔城区",
      level: "district",
      adcode: 350304,
      lng: 119.014821,
      lat: 25.432268,
      childrenNum: 0,
      parent: 350300,
    },
    {
      name: "秀屿区",
      level: "district",
      adcode: 350305,
      lng: 119.105177,
      lat: 25.318649,
      childrenNum: 0,
      parent: 350300,
    },
    {
      name: "仙游县",
      level: "district",
      adcode: 350322,
      lng: 118.689745,
      lat: 25.373373,
      childrenNum: 0,
      parent: 350300,
    },
    {
      name: "三明市",
      level: "city",
      adcode: 350400,
      lng: 117.638919,
      lat: 26.263455,
      childrenNum: 11,
      parent: 35e4,
    },
    {
      name: "三元区",
      level: "district",
      adcode: 350403,
      lng: 117.608013,
      lat: 26.234032,
      childrenNum: 0,
      parent: 350400,
    },
    {
      name: "明溪县",
      level: "district",
      adcode: 350421,
      lng: 117.202119,
      lat: 26.355938,
      childrenNum: 0,
      parent: 350400,
    },
    {
      name: "清流县",
      level: "district",
      adcode: 350423,
      lng: 116.816772,
      lat: 26.177658,
      childrenNum: 0,
      parent: 350400,
    },
    {
      name: "宁化县",
      level: "district",
      adcode: 350424,
      lng: 116.654369,
      lat: 26.262298,
      childrenNum: 0,
      parent: 350400,
    },
    {
      name: "大田县",
      level: "district",
      adcode: 350425,
      lng: 117.846828,
      lat: 25.692535,
      childrenNum: 0,
      parent: 350400,
    },
    {
      name: "尤溪县",
      level: "district",
      adcode: 350426,
      lng: 118.190515,
      lat: 26.169942,
      childrenNum: 0,
      parent: 350400,
    },
    {
      name: "沙县区",
      level: "district",
      adcode: 350427,
      lng: 117.792551,
      lat: 26.396843,
      childrenNum: 0,
      parent: 350400,
    },
    {
      name: "将乐县",
      level: "district",
      adcode: 350428,
      lng: 117.471127,
      lat: 26.728917,
      childrenNum: 0,
      parent: 350400,
    },
    {
      name: "泰宁县",
      level: "district",
      adcode: 350429,
      lng: 117.175448,
      lat: 26.900244,
      childrenNum: 0,
      parent: 350400,
    },
    {
      name: "建宁县",
      level: "district",
      adcode: 350430,
      lng: 116.848488,
      lat: 26.833566,
      childrenNum: 0,
      parent: 350400,
    },
    {
      name: "永安市",
      level: "district",
      adcode: 350481,
      lng: 117.365046,
      lat: 25.941671,
      childrenNum: 0,
      parent: 350400,
    },
    {
      name: "泉州市",
      level: "city",
      adcode: 350500,
      lng: 118.675724,
      lat: 24.874452,
      childrenNum: 12,
      parent: 35e4,
    },
    {
      name: "鲤城区",
      level: "district",
      adcode: 350502,
      lng: 118.58652,
      lat: 24.908133,
      childrenNum: 0,
      parent: 350500,
    },
    {
      name: "丰泽区",
      level: "district",
      adcode: 350503,
      lng: 118.613007,
      lat: 24.890373,
      childrenNum: 0,
      parent: 350500,
    },
    {
      name: "洛江区",
      level: "district",
      adcode: 350504,
      lng: 118.671168,
      lat: 24.939319,
      childrenNum: 0,
      parent: 350500,
    },
    {
      name: "泉港区",
      level: "district",
      adcode: 350505,
      lng: 118.915804,
      lat: 25.120399,
      childrenNum: 0,
      parent: 350500,
    },
    {
      name: "惠安县",
      level: "district",
      adcode: 350521,
      lng: 118.781037,
      lat: 25.012449,
      childrenNum: 0,
      parent: 350500,
    },
    {
      name: "安溪县",
      level: "district",
      adcode: 350524,
      lng: 118.186295,
      lat: 25.056065,
      childrenNum: 0,
      parent: 350500,
    },
    {
      name: "永春县",
      level: "district",
      adcode: 350525,
      lng: 118.29416,
      lat: 25.321849,
      childrenNum: 0,
      parent: 350500,
    },
    {
      name: "德化县",
      level: "district",
      adcode: 350526,
      lng: 118.241104,
      lat: 25.492102,
      childrenNum: 0,
      parent: 350500,
    },
    {
      name: "金门县",
      level: "district",
      adcode: 350527,
      lng: 118.319179,
      lat: 24.437147,
      childrenNum: 0,
      parent: 350500,
    },
    {
      name: "石狮市",
      level: "district",
      adcode: 350581,
      lng: 118.647945,
      lat: 24.731969,
      childrenNum: 0,
      parent: 350500,
    },
    {
      name: "晋江市",
      level: "district",
      adcode: 350582,
      lng: 118.551659,
      lat: 24.781635,
      childrenNum: 0,
      parent: 350500,
    },
    {
      name: "南安市",
      level: "district",
      adcode: 350583,
      lng: 118.385929,
      lat: 24.960056,
      childrenNum: 0,
      parent: 350500,
    },
    {
      name: "漳州市",
      level: "city",
      adcode: 350600,
      lng: 117.647298,
      lat: 24.515297,
      childrenNum: 11,
      parent: 35e4,
    },
    {
      name: "芗城区",
      level: "district",
      adcode: 350602,
      lng: 117.653727,
      lat: 24.510937,
      childrenNum: 0,
      parent: 350600,
    },
    {
      name: "龙文区",
      level: "district",
      adcode: 350603,
      lng: 117.711188,
      lat: 24.503523,
      childrenNum: 0,
      parent: 350600,
    },
    {
      name: "云霄县",
      level: "district",
      adcode: 350622,
      lng: 117.334351,
      lat: 23.935433,
      childrenNum: 0,
      parent: 350600,
    },
    {
      name: "漳浦县",
      level: "district",
      adcode: 350623,
      lng: 117.613783,
      lat: 24.11741,
      childrenNum: 0,
      parent: 350600,
    },
    {
      name: "诏安县",
      level: "district",
      adcode: 350624,
      lng: 117.175314,
      lat: 23.711674,
      childrenNum: 0,
      parent: 350600,
    },
    {
      name: "长泰区",
      level: "district",
      adcode: 350625,
      lng: 117.759119,
      lat: 24.625989,
      childrenNum: 0,
      parent: 350600,
    },
    {
      name: "东山县",
      level: "district",
      adcode: 350626,
      lng: 117.4295,
      lat: 23.702034,
      childrenNum: 0,
      parent: 350600,
    },
    {
      name: "南靖县",
      level: "district",
      adcode: 350627,
      lng: 117.357061,
      lat: 24.5151,
      childrenNum: 0,
      parent: 350600,
    },
    {
      name: "平和县",
      level: "district",
      adcode: 350628,
      lng: 117.314798,
      lat: 24.363831,
      childrenNum: 0,
      parent: 350600,
    },
    {
      name: "华安县",
      level: "district",
      adcode: 350629,
      lng: 117.53411,
      lat: 25.00445,
      childrenNum: 0,
      parent: 350600,
    },
    {
      name: "龙海区",
      level: "district",
      adcode: 350681,
      lng: 117.818485,
      lat: 24.446839,
      childrenNum: 0,
      parent: 350600,
    },
    {
      name: "南平市",
      level: "city",
      adcode: 350700,
      lng: 118.081325,
      lat: 27.382829,
      childrenNum: 10,
      parent: 35e4,
    },
    {
      name: "延平区",
      level: "district",
      adcode: 350702,
      lng: 118.181806,
      lat: 26.637503,
      childrenNum: 0,
      parent: 350700,
    },
    {
      name: "建阳区",
      level: "district",
      adcode: 350703,
      lng: 118.120392,
      lat: 27.331996,
      childrenNum: 0,
      parent: 350700,
    },
    {
      name: "顺昌县",
      level: "district",
      adcode: 350721,
      lng: 117.809433,
      lat: 26.793455,
      childrenNum: 0,
      parent: 350700,
    },
    {
      name: "浦城县",
      level: "district",
      adcode: 350722,
      lng: 118.541079,
      lat: 27.917804,
      childrenNum: 0,
      parent: 350700,
    },
    {
      name: "光泽县",
      level: "district",
      adcode: 350723,
      lng: 117.333812,
      lat: 27.541061,
      childrenNum: 0,
      parent: 350700,
    },
    {
      name: "松溪县",
      level: "district",
      adcode: 350724,
      lng: 118.785429,
      lat: 27.526028,
      childrenNum: 0,
      parent: 350700,
    },
    {
      name: "政和县",
      level: "district",
      adcode: 350725,
      lng: 118.857703,
      lat: 27.366122,
      childrenNum: 0,
      parent: 350700,
    },
    {
      name: "邵武市",
      level: "district",
      adcode: 350781,
      lng: 117.492778,
      lat: 27.340672,
      childrenNum: 0,
      parent: 350700,
    },
    {
      name: "武夷山市",
      level: "district",
      adcode: 350782,
      lng: 118.035321,
      lat: 27.756422,
      childrenNum: 0,
      parent: 350700,
    },
    {
      name: "建瓯市",
      level: "district",
      adcode: 350783,
      lng: 118.304712,
      lat: 27.023233,
      childrenNum: 0,
      parent: 350700,
    },
    {
      name: "龙岩市",
      level: "city",
      adcode: 350800,
      lng: 117.017362,
      lat: 25.075884,
      childrenNum: 7,
      parent: 35e4,
    },
    {
      name: "新罗区",
      level: "district",
      adcode: 350802,
      lng: 117.036816,
      lat: 25.098942,
      childrenNum: 0,
      parent: 350800,
    },
    {
      name: "永定区",
      level: "district",
      adcode: 350803,
      lng: 116.732216,
      lat: 24.724148,
      childrenNum: 0,
      parent: 350800,
    },
    {
      name: "长汀县",
      level: "district",
      adcode: 350821,
      lng: 116.357581,
      lat: 25.833531,
      childrenNum: 0,
      parent: 350800,
    },
    {
      name: "上杭县",
      level: "district",
      adcode: 350823,
      lng: 116.419447,
      lat: 25.049867,
      childrenNum: 0,
      parent: 350800,
    },
    {
      name: "武平县",
      level: "district",
      adcode: 350824,
      lng: 116.100216,
      lat: 25.096139,
      childrenNum: 0,
      parent: 350800,
    },
    {
      name: "连城县",
      level: "district",
      adcode: 350825,
      lng: 116.754472,
      lat: 25.710538,
      childrenNum: 0,
      parent: 350800,
    },
    {
      name: "漳平市",
      level: "district",
      adcode: 350881,
      lng: 117.419823,
      lat: 25.290481,
      childrenNum: 0,
      parent: 350800,
    },
    {
      name: "宁德市",
      level: "city",
      adcode: 350900,
      lng: 119.547729,
      lat: 26.666222,
      childrenNum: 9,
      parent: 35e4,
    },
    {
      name: "蕉城区",
      level: "district",
      adcode: 350902,
      lng: 119.526284,
      lat: 26.660658,
      childrenNum: 0,
      parent: 350900,
    },
    {
      name: "霞浦县",
      level: "district",
      adcode: 350921,
      lng: 120.005267,
      lat: 26.885971,
      childrenNum: 0,
      parent: 350900,
    },
    {
      name: "古田县",
      level: "district",
      adcode: 350922,
      lng: 118.74603,
      lat: 26.578134,
      childrenNum: 0,
      parent: 350900,
    },
    {
      name: "屏南县",
      level: "district",
      adcode: 350923,
      lng: 118.985759,
      lat: 26.908256,
      childrenNum: 0,
      parent: 350900,
    },
    {
      name: "寿宁县",
      level: "district",
      adcode: 350924,
      lng: 119.514589,
      lat: 27.45467,
      childrenNum: 0,
      parent: 350900,
    },
    {
      name: "周宁县",
      level: "district",
      adcode: 350925,
      lng: 119.338998,
      lat: 27.104797,
      childrenNum: 0,
      parent: 350900,
    },
    {
      name: "柘荣县",
      level: "district",
      adcode: 350926,
      lng: 119.900597,
      lat: 27.23421,
      childrenNum: 0,
      parent: 350900,
    },
    {
      name: "福安市",
      level: "district",
      adcode: 350981,
      lng: 119.647871,
      lat: 27.088274,
      childrenNum: 0,
      parent: 350900,
    },
    {
      name: "福鼎市",
      level: "district",
      adcode: 350982,
      lng: 120.216559,
      lat: 27.324796,
      childrenNum: 0,
      parent: 350900,
    },
    {
      name: "江西省",
      level: "province",
      adcode: 36e4,
      lng: 115.816587,
      lat: 28.637234,
      childrenNum: 11,
      parent: 1e5,
    },
    {
      name: "南昌市",
      level: "city",
      adcode: 360100,
      lng: 115.857972,
      lat: 28.682976,
      childrenNum: 9,
      parent: 36e4,
    },
    {
      name: "东湖区",
      level: "district",
      adcode: 360102,
      lng: 115.903576,
      lat: 28.698787,
      childrenNum: 0,
      parent: 360100,
    },
    {
      name: "西湖区",
      level: "district",
      adcode: 360103,
      lng: 115.876998,
      lat: 28.657005,
      childrenNum: 0,
      parent: 360100,
    },
    {
      name: "青云谱区",
      level: "district",
      adcode: 360104,
      lng: 115.925709,
      lat: 28.62182,
      childrenNum: 0,
      parent: 360100,
    },
    {
      name: "青山湖区",
      level: "district",
      adcode: 360111,
      lng: 115.962138,
      lat: 28.682867,
      childrenNum: 0,
      parent: 360100,
    },
    {
      name: "新建区",
      level: "district",
      adcode: 360112,
      lng: 115.815244,
      lat: 28.693192,
      childrenNum: 0,
      parent: 360100,
    },
    {
      name: "红谷滩区",
      level: "district",
      adcode: 360113,
      lng: 115.858127,
      lat: 28.698188,
      childrenNum: 0,
      parent: 360100,
    },
    {
      name: "南昌县",
      level: "district",
      adcode: 360121,
      lng: 115.93349,
      lat: 28.557921,
      childrenNum: 0,
      parent: 360100,
    },
    {
      name: "安义县",
      level: "district",
      adcode: 360123,
      lng: 115.549158,
      lat: 28.845585,
      childrenNum: 0,
      parent: 360100,
    },
    {
      name: "进贤县",
      level: "district",
      adcode: 360124,
      lng: 116.242468,
      lat: 28.377627,
      childrenNum: 0,
      parent: 360100,
    },
    {
      name: "景德镇市",
      level: "city",
      adcode: 360200,
      lng: 117.184892,
      lat: 29.2744,
      childrenNum: 4,
      parent: 36e4,
    },
    {
      name: "昌江区",
      level: "district",
      adcode: 360202,
      lng: 117.182648,
      lat: 29.273683,
      childrenNum: 0,
      parent: 360200,
    },
    {
      name: "珠山区",
      level: "district",
      adcode: 360203,
      lng: 117.271365,
      lat: 29.305191,
      childrenNum: 0,
      parent: 360200,
    },
    {
      name: "浮梁县",
      level: "district",
      adcode: 360222,
      lng: 117.214984,
      lat: 29.352493,
      childrenNum: 0,
      parent: 360200,
    },
    {
      name: "乐平市",
      level: "district",
      adcode: 360281,
      lng: 117.151499,
      lat: 28.978521,
      childrenNum: 0,
      parent: 360200,
    },
    {
      name: "萍乡市",
      level: "city",
      adcode: 360300,
      lng: 113.887147,
      lat: 27.658721,
      childrenNum: 5,
      parent: 36e4,
    },
    {
      name: "安源区",
      level: "district",
      adcode: 360302,
      lng: 113.87072,
      lat: 27.615,
      childrenNum: 0,
      parent: 360300,
    },
    {
      name: "湘东区",
      level: "district",
      adcode: 360313,
      lng: 113.733047,
      lat: 27.640075,
      childrenNum: 0,
      parent: 360300,
    },
    {
      name: "莲花县",
      level: "district",
      adcode: 360321,
      lng: 113.961589,
      lat: 27.128498,
      childrenNum: 0,
      parent: 360300,
    },
    {
      name: "上栗县",
      level: "district",
      adcode: 360322,
      lng: 113.795294,
      lat: 27.880221,
      childrenNum: 0,
      parent: 360300,
    },
    {
      name: "芦溪县",
      level: "district",
      adcode: 360323,
      lng: 114.029351,
      lat: 27.631273,
      childrenNum: 0,
      parent: 360300,
    },
    {
      name: "九江市",
      level: "city",
      adcode: 360400,
      lng: 115.95356,
      lat: 29.66116,
      childrenNum: 13,
      parent: 36e4,
    },
    {
      name: "濂溪区",
      level: "district",
      adcode: 360402,
      lng: 115.992735,
      lat: 29.668008,
      childrenNum: 0,
      parent: 360400,
    },
    {
      name: "浔阳区",
      level: "district",
      adcode: 360403,
      lng: 116.001677,
      lat: 29.70547,
      childrenNum: 0,
      parent: 360400,
    },
    {
      name: "柴桑区",
      level: "district",
      adcode: 360404,
      lng: 115.911005,
      lat: 29.608775,
      childrenNum: 0,
      parent: 360400,
    },
    {
      name: "武宁县",
      level: "district",
      adcode: 360423,
      lng: 115.092649,
      lat: 29.246785,
      childrenNum: 0,
      parent: 360400,
    },
    {
      name: "修水县",
      level: "district",
      adcode: 360424,
      lng: 114.546536,
      lat: 29.026166,
      childrenNum: 0,
      parent: 360400,
    },
    {
      name: "永修县",
      level: "district",
      adcode: 360425,
      lng: 115.83207,
      lat: 29.011392,
      childrenNum: 0,
      parent: 360400,
    },
    {
      name: "德安县",
      level: "district",
      adcode: 360426,
      lng: 115.767114,
      lat: 29.298599,
      childrenNum: 0,
      parent: 360400,
    },
    {
      name: "都昌县",
      level: "district",
      adcode: 360428,
      lng: 116.203999,
      lat: 29.273803,
      childrenNum: 0,
      parent: 360400,
    },
    {
      name: "湖口县",
      level: "district",
      adcode: 360429,
      lng: 116.252206,
      lat: 29.731194,
      childrenNum: 0,
      parent: 360400,
    },
    {
      name: "彭泽县",
      level: "district",
      adcode: 360430,
      lng: 116.563858,
      lat: 29.877404,
      childrenNum: 0,
      parent: 360400,
    },
    {
      name: "瑞昌市",
      level: "district",
      adcode: 360481,
      lng: 115.681221,
      lat: 29.676026,
      childrenNum: 0,
      parent: 360400,
    },
    {
      name: "共青城市",
      level: "district",
      adcode: 360482,
      lng: 115.784269,
      lat: 29.235082,
      childrenNum: 0,
      parent: 360400,
    },
    {
      name: "庐山市",
      level: "district",
      adcode: 360483,
      lng: 116.045118,
      lat: 29.448225,
      childrenNum: 0,
      parent: 360400,
    },
    {
      name: "新余市",
      level: "city",
      adcode: 360500,
      lng: 114.916665,
      lat: 27.818553,
      childrenNum: 2,
      parent: 36e4,
    },
    {
      name: "渝水区",
      level: "district",
      adcode: 360502,
      lng: 114.944499,
      lat: 27.799526,
      childrenNum: 0,
      parent: 360500,
    },
    {
      name: "分宜县",
      level: "district",
      adcode: 360521,
      lng: 114.69264,
      lat: 27.814723,
      childrenNum: 0,
      parent: 360500,
    },
    {
      name: "鹰潭市",
      level: "city",
      adcode: 360600,
      lng: 117.039532,
      lat: 28.272092,
      childrenNum: 3,
      parent: 36e4,
    },
    {
      name: "月湖区",
      level: "district",
      adcode: 360602,
      lng: 117.10247,
      lat: 28.266999,
      childrenNum: 0,
      parent: 360600,
    },
    {
      name: "余江区",
      level: "district",
      adcode: 360603,
      lng: 116.854576,
      lat: 28.199657,
      childrenNum: 0,
      parent: 360600,
    },
    {
      name: "贵溪市",
      level: "district",
      adcode: 360681,
      lng: 117.245178,
      lat: 28.292397,
      childrenNum: 0,
      parent: 360600,
    },
    {
      name: "赣州市",
      level: "city",
      adcode: 360700,
      lng: 114.933494,
      lat: 25.831139,
      childrenNum: 18,
      parent: 36e4,
    },
    {
      name: "章贡区",
      level: "district",
      adcode: 360702,
      lng: 114.920426,
      lat: 25.818247,
      childrenNum: 0,
      parent: 360700,
    },
    {
      name: "南康区",
      level: "district",
      adcode: 360703,
      lng: 114.765044,
      lat: 25.661369,
      childrenNum: 0,
      parent: 360700,
    },
    {
      name: "赣县区",
      level: "district",
      adcode: 360704,
      lng: 115.021196,
      lat: 25.854496,
      childrenNum: 0,
      parent: 360700,
    },
    {
      name: "信丰县",
      level: "district",
      adcode: 360722,
      lng: 114.922485,
      lat: 25.38676,
      childrenNum: 0,
      parent: 360700,
    },
    {
      name: "大余县",
      level: "district",
      adcode: 360723,
      lng: 114.362306,
      lat: 25.401968,
      childrenNum: 0,
      parent: 360700,
    },
    {
      name: "上犹县",
      level: "district",
      adcode: 360724,
      lng: 114.55177,
      lat: 25.784754,
      childrenNum: 0,
      parent: 360700,
    },
    {
      name: "崇义县",
      level: "district",
      adcode: 360725,
      lng: 114.308135,
      lat: 25.682278,
      childrenNum: 0,
      parent: 360700,
    },
    {
      name: "安远县",
      level: "district",
      adcode: 360726,
      lng: 115.393992,
      lat: 25.136855,
      childrenNum: 0,
      parent: 360700,
    },
    {
      name: "定南县",
      level: "district",
      adcode: 360728,
      lng: 115.027908,
      lat: 24.783372,
      childrenNum: 0,
      parent: 360700,
    },
    {
      name: "全南县",
      level: "district",
      adcode: 360729,
      lng: 114.530148,
      lat: 24.742353,
      childrenNum: 0,
      parent: 360700,
    },
    {
      name: "宁都县",
      level: "district",
      adcode: 360730,
      lng: 116.009171,
      lat: 26.470865,
      childrenNum: 0,
      parent: 360700,
    },
    {
      name: "于都县",
      level: "district",
      adcode: 360731,
      lng: 115.415145,
      lat: 25.952564,
      childrenNum: 0,
      parent: 360700,
    },
    {
      name: "兴国县",
      level: "district",
      adcode: 360732,
      lng: 115.363475,
      lat: 26.338129,
      childrenNum: 0,
      parent: 360700,
    },
    {
      name: "会昌县",
      level: "district",
      adcode: 360733,
      lng: 115.809271,
      lat: 25.58734,
      childrenNum: 0,
      parent: 360700,
    },
    {
      name: "寻乌县",
      level: "district",
      adcode: 360734,
      lng: 115.638534,
      lat: 24.969513,
      childrenNum: 0,
      parent: 360700,
    },
    {
      name: "石城县",
      level: "district",
      adcode: 360735,
      lng: 116.347611,
      lat: 26.31491,
      childrenNum: 0,
      parent: 360700,
    },
    {
      name: "瑞金市",
      level: "district",
      adcode: 360781,
      lng: 116.027114,
      lat: 25.88623,
      childrenNum: 0,
      parent: 360700,
    },
    {
      name: "龙南市",
      level: "district",
      adcode: 360783,
      lng: 114.804474,
      lat: 24.901216,
      childrenNum: 0,
      parent: 360700,
    },
    {
      name: "吉安市",
      level: "city",
      adcode: 360800,
      lng: 114.96681,
      lat: 27.091243,
      childrenNum: 13,
      parent: 36e4,
    },
    {
      name: "吉州区",
      level: "district",
      adcode: 360802,
      lng: 114.994991,
      lat: 27.144204,
      childrenNum: 0,
      parent: 360800,
    },
    {
      name: "青原区",
      level: "district",
      adcode: 360803,
      lng: 115.014836,
      lat: 27.082012,
      childrenNum: 0,
      parent: 360800,
    },
    {
      name: "吉安县",
      level: "district",
      adcode: 360821,
      lng: 114.908337,
      lat: 27.039866,
      childrenNum: 0,
      parent: 360800,
    },
    {
      name: "吉水县",
      level: "district",
      adcode: 360822,
      lng: 115.135963,
      lat: 27.229697,
      childrenNum: 0,
      parent: 360800,
    },
    {
      name: "峡江县",
      level: "district",
      adcode: 360823,
      lng: 115.316567,
      lat: 27.5829,
      childrenNum: 0,
      parent: 360800,
    },
    {
      name: "新干县",
      level: "district",
      adcode: 360824,
      lng: 115.386853,
      lat: 27.740368,
      childrenNum: 0,
      parent: 360800,
    },
    {
      name: "永丰县",
      level: "district",
      adcode: 360825,
      lng: 115.421599,
      lat: 27.317301,
      childrenNum: 0,
      parent: 360800,
    },
    {
      name: "泰和县",
      level: "district",
      adcode: 360826,
      lng: 114.922987,
      lat: 26.801687,
      childrenNum: 0,
      parent: 360800,
    },
    {
      name: "遂川县",
      level: "district",
      adcode: 360827,
      lng: 114.520825,
      lat: 26.313413,
      childrenNum: 0,
      parent: 360800,
    },
    {
      name: "万安县",
      level: "district",
      adcode: 360828,
      lng: 114.759746,
      lat: 26.456821,
      childrenNum: 0,
      parent: 360800,
    },
    {
      name: "安福县",
      level: "district",
      adcode: 360829,
      lng: 114.619818,
      lat: 27.393286,
      childrenNum: 0,
      parent: 360800,
    },
    {
      name: "永新县",
      level: "district",
      adcode: 360830,
      lng: 114.242425,
      lat: 26.945157,
      childrenNum: 0,
      parent: 360800,
    },
    {
      name: "井冈山市",
      level: "district",
      adcode: 360881,
      lng: 114.289563,
      lat: 26.748132,
      childrenNum: 0,
      parent: 360800,
    },
    {
      name: "宜春市",
      level: "city",
      adcode: 360900,
      lng: 114.416826,
      lat: 27.816245,
      childrenNum: 10,
      parent: 36e4,
    },
    {
      name: "袁州区",
      level: "district",
      adcode: 360902,
      lng: 114.42794,
      lat: 27.796344,
      childrenNum: 0,
      parent: 360900,
    },
    {
      name: "奉新县",
      level: "district",
      adcode: 360921,
      lng: 115.400624,
      lat: 28.688254,
      childrenNum: 0,
      parent: 360900,
    },
    {
      name: "万载县",
      level: "district",
      adcode: 360922,
      lng: 114.445477,
      lat: 28.106201,
      childrenNum: 0,
      parent: 360900,
    },
    {
      name: "上高县",
      level: "district",
      adcode: 360923,
      lng: 114.948045,
      lat: 28.238591,
      childrenNum: 0,
      parent: 360900,
    },
    {
      name: "宜丰县",
      level: "district",
      adcode: 360924,
      lng: 114.803036,
      lat: 28.394466,
      childrenNum: 0,
      parent: 360900,
    },
    {
      name: "靖安县",
      level: "district",
      adcode: 360925,
      lng: 115.362635,
      lat: 28.861296,
      childrenNum: 0,
      parent: 360900,
    },
    {
      name: "铜鼓县",
      level: "district",
      adcode: 360926,
      lng: 114.354623,
      lat: 28.513291,
      childrenNum: 0,
      parent: 360900,
    },
    {
      name: "丰城市",
      level: "district",
      adcode: 360981,
      lng: 115.771131,
      lat: 28.160053,
      childrenNum: 0,
      parent: 360900,
    },
    {
      name: "樟树市",
      level: "district",
      adcode: 360982,
      lng: 115.546174,
      lat: 28.054632,
      childrenNum: 0,
      parent: 360900,
    },
    {
      name: "高安市",
      level: "district",
      adcode: 360983,
      lng: 115.366863,
      lat: 28.448054,
      childrenNum: 0,
      parent: 360900,
    },
    {
      name: "抚州市",
      level: "city",
      adcode: 361e3,
      lng: 116.358054,
      lat: 27.948979,
      childrenNum: 11,
      parent: 36e4,
    },
    {
      name: "临川区",
      level: "district",
      adcode: 361002,
      lng: 116.311932,
      lat: 27.935098,
      childrenNum: 0,
      parent: 361e3,
    },
    {
      name: "东乡区",
      level: "district",
      adcode: 361003,
      lng: 116.603159,
      lat: 28.249059,
      childrenNum: 0,
      parent: 361e3,
    },
    {
      name: "南城县",
      level: "district",
      adcode: 361021,
      lng: 116.637228,
      lat: 27.570031,
      childrenNum: 0,
      parent: 361e3,
    },
    {
      name: "黎川县",
      level: "district",
      adcode: 361022,
      lng: 116.907446,
      lat: 27.282729,
      childrenNum: 0,
      parent: 361e3,
    },
    {
      name: "南丰县",
      level: "district",
      adcode: 361023,
      lng: 116.525898,
      lat: 27.21845,
      childrenNum: 0,
      parent: 361e3,
    },
    {
      name: "崇仁县",
      level: "district",
      adcode: 361024,
      lng: 116.076363,
      lat: 27.754416,
      childrenNum: 0,
      parent: 361e3,
    },
    {
      name: "乐安县",
      level: "district",
      adcode: 361025,
      lng: 115.83099,
      lat: 27.428682,
      childrenNum: 0,
      parent: 361e3,
    },
    {
      name: "宜黄县",
      level: "district",
      adcode: 361026,
      lng: 116.236174,
      lat: 27.554744,
      childrenNum: 0,
      parent: 361e3,
    },
    {
      name: "金溪县",
      level: "district",
      adcode: 361027,
      lng: 116.755018,
      lat: 27.91973,
      childrenNum: 0,
      parent: 361e3,
    },
    {
      name: "资溪县",
      level: "district",
      adcode: 361028,
      lng: 117.060332,
      lat: 27.706088,
      childrenNum: 0,
      parent: 361e3,
    },
    {
      name: "广昌县",
      level: "district",
      adcode: 361030,
      lng: 116.336556,
      lat: 26.843974,
      childrenNum: 0,
      parent: 361e3,
    },
    {
      name: "上饶市",
      level: "city",
      adcode: 361100,
      lng: 117.943064,
      lat: 28.45513,
      childrenNum: 12,
      parent: 36e4,
    },
    {
      name: "信州区",
      level: "district",
      adcode: 361102,
      lng: 117.965997,
      lat: 28.430694,
      childrenNum: 0,
      parent: 361100,
    },
    {
      name: "广丰区",
      level: "district",
      adcode: 361103,
      lng: 118.189729,
      lat: 28.463697,
      childrenNum: 0,
      parent: 361100,
    },
    {
      name: "广信区",
      level: "district",
      adcode: 361104,
      lng: 117.907454,
      lat: 28.448893,
      childrenNum: 0,
      parent: 361100,
    },
    {
      name: "玉山县",
      level: "district",
      adcode: 361123,
      lng: 118.244736,
      lat: 28.681936,
      childrenNum: 0,
      parent: 361100,
    },
    {
      name: "铅山县",
      level: "district",
      adcode: 361124,
      lng: 117.734742,
      lat: 28.298415,
      childrenNum: 0,
      parent: 361100,
    },
    {
      name: "横峰县",
      level: "district",
      adcode: 361125,
      lng: 117.596433,
      lat: 28.407116,
      childrenNum: 0,
      parent: 361100,
    },
    {
      name: "弋阳县",
      level: "district",
      adcode: 361126,
      lng: 117.449346,
      lat: 28.378039,
      childrenNum: 0,
      parent: 361100,
    },
    {
      name: "余干县",
      level: "district",
      adcode: 361127,
      lng: 116.695787,
      lat: 28.70283,
      childrenNum: 0,
      parent: 361100,
    },
    {
      name: "鄱阳县",
      level: "district",
      adcode: 361128,
      lng: 116.703731,
      lat: 29.005675,
      childrenNum: 0,
      parent: 361100,
    },
    {
      name: "万年县",
      level: "district",
      adcode: 361129,
      lng: 117.058445,
      lat: 28.694582,
      childrenNum: 0,
      parent: 361100,
    },
    {
      name: "婺源县",
      level: "district",
      adcode: 361130,
      lng: 117.861532,
      lat: 29.248491,
      childrenNum: 0,
      parent: 361100,
    },
    {
      name: "德兴市",
      level: "district",
      adcode: 361181,
      lng: 117.594549,
      lat: 28.930557,
      childrenNum: 0,
      parent: 361100,
    },
    {
      name: "山东省",
      level: "province",
      adcode: 37e4,
      lng: 117.020725,
      lat: 36.670201,
      childrenNum: 16,
      parent: 1e5,
    },
    {
      name: "济南市",
      level: "city",
      adcode: 370100,
      lng: 117.120128,
      lat: 36.652069,
      childrenNum: 12,
      parent: 37e4,
    },
    {
      name: "历下区",
      level: "district",
      adcode: 370102,
      lng: 117.07632,
      lat: 36.666395,
      childrenNum: 0,
      parent: 370100,
    },
    {
      name: "市中区",
      level: "district",
      adcode: 370103,
      lng: 116.997472,
      lat: 36.651121,
      childrenNum: 0,
      parent: 370100,
    },
    {
      name: "槐荫区",
      level: "district",
      adcode: 370104,
      lng: 116.901057,
      lat: 36.652264,
      childrenNum: 0,
      parent: 370100,
    },
    {
      name: "天桥区",
      level: "district",
      adcode: 370105,
      lng: 116.987106,
      lat: 36.678665,
      childrenNum: 0,
      parent: 370100,
    },
    {
      name: "历城区",
      level: "district",
      adcode: 370112,
      lng: 117.065233,
      lat: 36.680731,
      childrenNum: 0,
      parent: 370100,
    },
    {
      name: "长清区",
      level: "district",
      adcode: 370113,
      lng: 116.752101,
      lat: 36.554251,
      childrenNum: 0,
      parent: 370100,
    },
    {
      name: "章丘区",
      level: "district",
      adcode: 370114,
      lng: 117.526228,
      lat: 36.681258,
      childrenNum: 0,
      parent: 370100,
    },
    {
      name: "济阳区",
      level: "district",
      adcode: 370115,
      lng: 117.173722,
      lat: 36.978299,
      childrenNum: 0,
      parent: 370100,
    },
    {
      name: "莱芜区",
      level: "district",
      adcode: 370116,
      lng: 117.675828,
      lat: 36.214895,
      childrenNum: 0,
      parent: 370100,
    },
    {
      name: "钢城区",
      level: "district",
      adcode: 370117,
      lng: 117.811604,
      lat: 36.059393,
      childrenNum: 0,
      parent: 370100,
    },
    {
      name: "平阴县",
      level: "district",
      adcode: 370124,
      lng: 116.455865,
      lat: 36.289813,
      childrenNum: 0,
      parent: 370100,
    },
    {
      name: "商河县",
      level: "district",
      adcode: 370126,
      lng: 117.157165,
      lat: 37.309694,
      childrenNum: 0,
      parent: 370100,
    },
    {
      name: "青岛市",
      level: "city",
      adcode: 370200,
      lng: 120.382665,
      lat: 36.066938,
      childrenNum: 10,
      parent: 37e4,
    },
    {
      name: "市南区",
      level: "district",
      adcode: 370202,
      lng: 120.412002,
      lat: 36.075867,
      childrenNum: 0,
      parent: 370200,
    },
    {
      name: "市北区",
      level: "district",
      adcode: 370203,
      lng: 120.374675,
      lat: 36.08765,
      childrenNum: 0,
      parent: 370200,
    },
    {
      name: "黄岛区",
      level: "district",
      adcode: 370211,
      lng: 120.19777,
      lat: 35.960688,
      childrenNum: 0,
      parent: 370200,
    },
    {
      name: "崂山区",
      level: "district",
      adcode: 370212,
      lng: 120.469282,
      lat: 36.107069,
      childrenNum: 0,
      parent: 370200,
    },
    {
      name: "李沧区",
      level: "district",
      adcode: 370213,
      lng: 120.432652,
      lat: 36.145987,
      childrenNum: 0,
      parent: 370200,
    },
    {
      name: "城阳区",
      level: "district",
      adcode: 370214,
      lng: 120.396255,
      lat: 36.307624,
      childrenNum: 0,
      parent: 370200,
    },
    {
      name: "即墨区",
      level: "district",
      adcode: 370215,
      lng: 120.447691,
      lat: 36.390217,
      childrenNum: 0,
      parent: 370200,
    },
    {
      name: "胶州市",
      level: "district",
      adcode: 370281,
      lng: 120.033382,
      lat: 36.26468,
      childrenNum: 0,
      parent: 370200,
    },
    {
      name: "平度市",
      level: "district",
      adcode: 370283,
      lng: 119.970192,
      lat: 36.753895,
      childrenNum: 0,
      parent: 370200,
    },
    {
      name: "莱西市",
      level: "district",
      adcode: 370285,
      lng: 120.517581,
      lat: 36.889167,
      childrenNum: 0,
      parent: 370200,
    },
    {
      name: "淄博市",
      level: "city",
      adcode: 370300,
      lng: 118.054994,
      lat: 36.813787,
      childrenNum: 8,
      parent: 37e4,
    },
    {
      name: "淄川区",
      level: "district",
      adcode: 370302,
      lng: 117.966978,
      lat: 36.644211,
      childrenNum: 0,
      parent: 370300,
    },
    {
      name: "张店区",
      level: "district",
      adcode: 370303,
      lng: 118.017877,
      lat: 36.807011,
      childrenNum: 0,
      parent: 370300,
    },
    {
      name: "博山区",
      level: "district",
      adcode: 370304,
      lng: 117.8627,
      lat: 36.495014,
      childrenNum: 0,
      parent: 370300,
    },
    {
      name: "临淄区",
      level: "district",
      adcode: 370305,
      lng: 118.309398,
      lat: 36.826882,
      childrenNum: 0,
      parent: 370300,
    },
    {
      name: "周村区",
      level: "district",
      adcode: 370306,
      lng: 117.869686,
      lat: 36.80309,
      childrenNum: 0,
      parent: 370300,
    },
    {
      name: "桓台县",
      level: "district",
      adcode: 370321,
      lng: 118.097923,
      lat: 36.959794,
      childrenNum: 0,
      parent: 370300,
    },
    {
      name: "高青县",
      level: "district",
      adcode: 370322,
      lng: 117.826743,
      lat: 37.171042,
      childrenNum: 0,
      parent: 370300,
    },
    {
      name: "沂源县",
      level: "district",
      adcode: 370323,
      lng: 118.170856,
      lat: 36.185402,
      childrenNum: 0,
      parent: 370300,
    },
    {
      name: "枣庄市",
      level: "city",
      adcode: 370400,
      lng: 117.323759,
      lat: 34.810858,
      childrenNum: 6,
      parent: 37e4,
    },
    {
      name: "市中区",
      level: "district",
      adcode: 370402,
      lng: 117.556125,
      lat: 34.863791,
      childrenNum: 0,
      parent: 370400,
    },
    {
      name: "薛城区",
      level: "district",
      adcode: 370403,
      lng: 117.263524,
      lat: 34.795339,
      childrenNum: 0,
      parent: 370400,
    },
    {
      name: "峄城区",
      level: "district",
      adcode: 370404,
      lng: 117.590738,
      lat: 34.772931,
      childrenNum: 0,
      parent: 370400,
    },
    {
      name: "台儿庄区",
      level: "district",
      adcode: 370405,
      lng: 117.734287,
      lat: 34.563103,
      childrenNum: 0,
      parent: 370400,
    },
    {
      name: "山亭区",
      level: "district",
      adcode: 370406,
      lng: 117.461866,
      lat: 35.099638,
      childrenNum: 0,
      parent: 370400,
    },
    {
      name: "滕州市",
      level: "district",
      adcode: 370481,
      lng: 117.165881,
      lat: 35.11412,
      childrenNum: 0,
      parent: 370400,
    },
    {
      name: "东营市",
      level: "city",
      adcode: 370500,
      lng: 118.674633,
      lat: 37.433992,
      childrenNum: 5,
      parent: 37e4,
    },
    {
      name: "东营区",
      level: "district",
      adcode: 370502,
      lng: 118.582182,
      lat: 37.449035,
      childrenNum: 0,
      parent: 370500,
    },
    {
      name: "河口区",
      level: "district",
      adcode: 370503,
      lng: 118.525519,
      lat: 37.886217,
      childrenNum: 0,
      parent: 370500,
    },
    {
      name: "垦利区",
      level: "district",
      adcode: 370505,
      lng: 118.575234,
      lat: 37.573412,
      childrenNum: 0,
      parent: 370500,
    },
    {
      name: "利津县",
      level: "district",
      adcode: 370522,
      lng: 118.255084,
      lat: 37.490919,
      childrenNum: 0,
      parent: 370500,
    },
    {
      name: "广饶县",
      level: "district",
      adcode: 370523,
      lng: 118.419437,
      lat: 37.053915,
      childrenNum: 0,
      parent: 370500,
    },
    {
      name: "烟台市",
      level: "city",
      adcode: 370600,
      lng: 121.447755,
      lat: 37.464551,
      childrenNum: 11,
      parent: 37e4,
    },
    {
      name: "芝罘区",
      level: "district",
      adcode: 370602,
      lng: 121.400303,
      lat: 37.541312,
      childrenNum: 0,
      parent: 370600,
    },
    {
      name: "福山区",
      level: "district",
      adcode: 370611,
      lng: 121.267638,
      lat: 37.49833,
      childrenNum: 0,
      parent: 370600,
    },
    {
      name: "牟平区",
      level: "district",
      adcode: 370612,
      lng: 121.601015,
      lat: 37.387454,
      childrenNum: 0,
      parent: 370600,
    },
    {
      name: "莱山区",
      level: "district",
      adcode: 370613,
      lng: 121.444949,
      lat: 37.511322,
      childrenNum: 0,
      parent: 370600,
    },
    {
      name: "蓬莱区",
      level: "district",
      adcode: 370614,
      lng: 120.829141,
      lat: 37.795697,
      childrenNum: 0,
      parent: 370600,
    },
    {
      name: "龙口市",
      level: "district",
      adcode: 370681,
      lng: 120.47614,
      lat: 37.645281,
      childrenNum: 0,
      parent: 370600,
    },
    {
      name: "莱阳市",
      level: "district",
      adcode: 370682,
      lng: 120.711555,
      lat: 36.979757,
      childrenNum: 0,
      parent: 370600,
    },
    {
      name: "莱州市",
      level: "district",
      adcode: 370683,
      lng: 119.942057,
      lat: 37.178187,
      childrenNum: 0,
      parent: 370600,
    },
    {
      name: "招远市",
      level: "district",
      adcode: 370685,
      lng: 120.433904,
      lat: 37.354517,
      childrenNum: 0,
      parent: 370600,
    },
    {
      name: "栖霞市",
      level: "district",
      adcode: 370686,
      lng: 120.849595,
      lat: 37.335993,
      childrenNum: 0,
      parent: 370600,
    },
    {
      name: "海阳市",
      level: "district",
      adcode: 370687,
      lng: 121.173506,
      lat: 36.688316,
      childrenNum: 0,
      parent: 370600,
    },
    {
      name: "潍坊市",
      level: "city",
      adcode: 370700,
      lng: 119.161721,
      lat: 36.707668,
      childrenNum: 12,
      parent: 37e4,
    },
    {
      name: "潍城区",
      level: "district",
      adcode: 370702,
      lng: 119.02491,
      lat: 36.728077,
      childrenNum: 0,
      parent: 370700,
    },
    {
      name: "寒亭区",
      level: "district",
      adcode: 370703,
      lng: 119.211251,
      lat: 36.755925,
      childrenNum: 0,
      parent: 370700,
    },
    {
      name: "坊子区",
      level: "district",
      adcode: 370704,
      lng: 119.166343,
      lat: 36.653671,
      childrenNum: 0,
      parent: 370700,
    },
    {
      name: "奎文区",
      level: "district",
      adcode: 370705,
      lng: 119.132288,
      lat: 36.707459,
      childrenNum: 0,
      parent: 370700,
    },
    {
      name: "临朐县",
      level: "district",
      adcode: 370724,
      lng: 118.543274,
      lat: 36.51246,
      childrenNum: 0,
      parent: 370700,
    },
    {
      name: "昌乐县",
      level: "district",
      adcode: 370725,
      lng: 118.841015,
      lat: 36.687162,
      childrenNum: 0,
      parent: 370700,
    },
    {
      name: "青州市",
      level: "district",
      adcode: 370781,
      lng: 118.479637,
      lat: 36.685178,
      childrenNum: 0,
      parent: 370700,
    },
    {
      name: "诸城市",
      level: "district",
      adcode: 370782,
      lng: 119.410051,
      lat: 35.996404,
      childrenNum: 0,
      parent: 370700,
    },
    {
      name: "寿光市",
      level: "district",
      adcode: 370783,
      lng: 118.791062,
      lat: 36.857133,
      childrenNum: 0,
      parent: 370700,
    },
    {
      name: "安丘市",
      level: "district",
      adcode: 370784,
      lng: 119.21892,
      lat: 36.479642,
      childrenNum: 0,
      parent: 370700,
    },
    {
      name: "高密市",
      level: "district",
      adcode: 370785,
      lng: 119.755271,
      lat: 36.382973,
      childrenNum: 0,
      parent: 370700,
    },
    {
      name: "昌邑市",
      level: "district",
      adcode: 370786,
      lng: 119.403185,
      lat: 36.843256,
      childrenNum: 0,
      parent: 370700,
    },
    {
      name: "济宁市",
      level: "city",
      adcode: 370800,
      lng: 116.587116,
      lat: 35.415117,
      childrenNum: 11,
      parent: 37e4,
    },
    {
      name: "任城区",
      level: "district",
      adcode: 370811,
      lng: 116.605763,
      lat: 35.444226,
      childrenNum: 0,
      parent: 370800,
    },
    {
      name: "兖州区",
      level: "district",
      adcode: 370812,
      lng: 116.78365,
      lat: 35.551938,
      childrenNum: 0,
      parent: 370800,
    },
    {
      name: "微山县",
      level: "district",
      adcode: 370826,
      lng: 117.129188,
      lat: 34.806657,
      childrenNum: 0,
      parent: 370800,
    },
    {
      name: "鱼台县",
      level: "district",
      adcode: 370827,
      lng: 116.650526,
      lat: 35.012706,
      childrenNum: 0,
      parent: 370800,
    },
    {
      name: "金乡县",
      level: "district",
      adcode: 370828,
      lng: 116.311549,
      lat: 35.06658,
      childrenNum: 0,
      parent: 370800,
    },
    {
      name: "嘉祥县",
      level: "district",
      adcode: 370829,
      lng: 116.342308,
      lat: 35.40794,
      childrenNum: 0,
      parent: 370800,
    },
    {
      name: "汶上县",
      level: "district",
      adcode: 370830,
      lng: 116.497277,
      lat: 35.711891,
      childrenNum: 0,
      parent: 370800,
    },
    {
      name: "泗水县",
      level: "district",
      adcode: 370831,
      lng: 117.250824,
      lat: 35.664719,
      childrenNum: 0,
      parent: 370800,
    },
    {
      name: "梁山县",
      level: "district",
      adcode: 370832,
      lng: 116.131779,
      lat: 35.765957,
      childrenNum: 0,
      parent: 370800,
    },
    {
      name: "曲阜市",
      level: "district",
      adcode: 370881,
      lng: 116.986212,
      lat: 35.581933,
      childrenNum: 0,
      parent: 370800,
    },
    {
      name: "邹城市",
      level: "district",
      adcode: 370883,
      lng: 117.007406,
      lat: 35.402536,
      childrenNum: 0,
      parent: 370800,
    },
    {
      name: "泰安市",
      level: "city",
      adcode: 370900,
      lng: 117.086963,
      lat: 36.201784,
      childrenNum: 6,
      parent: 37e4,
    },
    {
      name: "泰山区",
      level: "district",
      adcode: 370902,
      lng: 117.135215,
      lat: 36.192833,
      childrenNum: 0,
      parent: 370900,
    },
    {
      name: "岱岳区",
      level: "district",
      adcode: 370911,
      lng: 117.041651,
      lat: 36.188088,
      childrenNum: 0,
      parent: 370900,
    },
    {
      name: "宁阳县",
      level: "district",
      adcode: 370921,
      lng: 116.805578,
      lat: 35.758919,
      childrenNum: 0,
      parent: 370900,
    },
    {
      name: "东平县",
      level: "district",
      adcode: 370923,
      lng: 116.470211,
      lat: 35.937049,
      childrenNum: 0,
      parent: 370900,
    },
    {
      name: "新泰市",
      level: "district",
      adcode: 370982,
      lng: 117.768069,
      lat: 35.90953,
      childrenNum: 0,
      parent: 370900,
    },
    {
      name: "肥城市",
      level: "district",
      adcode: 370983,
      lng: 116.769098,
      lat: 36.181975,
      childrenNum: 0,
      parent: 370900,
    },
    {
      name: "威海市",
      level: "city",
      adcode: 371e3,
      lng: 122.120519,
      lat: 37.513315,
      childrenNum: 4,
      parent: 37e4,
    },
    {
      name: "环翠区",
      level: "district",
      adcode: 371002,
      lng: 122.123115,
      lat: 37.501735,
      childrenNum: 0,
      parent: 371e3,
    },
    {
      name: "文登区",
      level: "district",
      adcode: 371003,
      lng: 122.08832,
      lat: 37.196032,
      childrenNum: 0,
      parent: 371e3,
    },
    {
      name: "荣成市",
      level: "district",
      adcode: 371082,
      lng: 122.487036,
      lat: 37.165698,
      childrenNum: 0,
      parent: 371e3,
    },
    {
      name: "乳山市",
      level: "district",
      adcode: 371083,
      lng: 121.539557,
      lat: 36.920329,
      childrenNum: 0,
      parent: 371e3,
    },
    {
      name: "日照市",
      level: "city",
      adcode: 371100,
      lng: 119.52685,
      lat: 35.416912,
      childrenNum: 4,
      parent: 37e4,
    },
    {
      name: "东港区",
      level: "district",
      adcode: 371102,
      lng: 119.462287,
      lat: 35.426037,
      childrenNum: 0,
      parent: 371100,
    },
    {
      name: "岚山区",
      level: "district",
      adcode: 371103,
      lng: 119.31881,
      lat: 35.121985,
      childrenNum: 0,
      parent: 371100,
    },
    {
      name: "五莲县",
      level: "district",
      adcode: 371121,
      lng: 119.213673,
      lat: 35.760154,
      childrenNum: 0,
      parent: 371100,
    },
    {
      name: "莒县",
      level: "district",
      adcode: 371122,
      lng: 118.869059,
      lat: 35.59125,
      childrenNum: 0,
      parent: 371100,
    },
    {
      name: "临沂市",
      level: "city",
      adcode: 371300,
      lng: 118.356464,
      lat: 35.103771,
      childrenNum: 12,
      parent: 37e4,
    },
    {
      name: "兰山区",
      level: "district",
      adcode: 371302,
      lng: 118.347332,
      lat: 35.052797,
      childrenNum: 0,
      parent: 371300,
    },
    {
      name: "罗庄区",
      level: "district",
      adcode: 371311,
      lng: 118.284693,
      lat: 34.997061,
      childrenNum: 0,
      parent: 371300,
    },
    {
      name: "河东区",
      level: "district",
      adcode: 371312,
      lng: 118.403073,
      lat: 35.088936,
      childrenNum: 0,
      parent: 371300,
    },
    {
      name: "沂南县",
      level: "district",
      adcode: 371321,
      lng: 118.465259,
      lat: 35.550078,
      childrenNum: 0,
      parent: 371300,
    },
    {
      name: "郯城县",
      level: "district",
      adcode: 371322,
      lng: 118.36727,
      lat: 34.614077,
      childrenNum: 0,
      parent: 371300,
    },
    {
      name: "沂水县",
      level: "district",
      adcode: 371323,
      lng: 118.628142,
      lat: 35.790919,
      childrenNum: 0,
      parent: 371300,
    },
    {
      name: "兰陵县",
      level: "district",
      adcode: 371324,
      lng: 118.070912,
      lat: 34.858235,
      childrenNum: 0,
      parent: 371300,
    },
    {
      name: "费县",
      level: "district",
      adcode: 371325,
      lng: 117.9776,
      lat: 35.265851,
      childrenNum: 0,
      parent: 371300,
    },
    {
      name: "平邑县",
      level: "district",
      adcode: 371326,
      lng: 117.615201,
      lat: 35.516849,
      childrenNum: 0,
      parent: 371300,
    },
    {
      name: "莒南县",
      level: "district",
      adcode: 371327,
      lng: 118.835166,
      lat: 35.206252,
      childrenNum: 0,
      parent: 371300,
    },
    {
      name: "蒙阴县",
      level: "district",
      adcode: 371328,
      lng: 117.953367,
      lat: 35.720128,
      childrenNum: 0,
      parent: 371300,
    },
    {
      name: "临沭县",
      level: "district",
      adcode: 371329,
      lng: 118.650828,
      lat: 34.920171,
      childrenNum: 0,
      parent: 371300,
    },
    {
      name: "德州市",
      level: "city",
      adcode: 371400,
      lng: 116.359244,
      lat: 37.436492,
      childrenNum: 11,
      parent: 37e4,
    },
    {
      name: "德城区",
      level: "district",
      adcode: 371402,
      lng: 116.299558,
      lat: 37.451051,
      childrenNum: 0,
      parent: 371400,
    },
    {
      name: "陵城区",
      level: "district",
      adcode: 371403,
      lng: 116.576148,
      lat: 37.336444,
      childrenNum: 0,
      parent: 371400,
    },
    {
      name: "宁津县",
      level: "district",
      adcode: 371422,
      lng: 116.800279,
      lat: 37.652456,
      childrenNum: 0,
      parent: 371400,
    },
    {
      name: "庆云县",
      level: "district",
      adcode: 371423,
      lng: 117.384163,
      lat: 37.774376,
      childrenNum: 0,
      parent: 371400,
    },
    {
      name: "临邑县",
      level: "district",
      adcode: 371424,
      lng: 116.866568,
      lat: 37.190139,
      childrenNum: 0,
      parent: 371400,
    },
    {
      name: "齐河县",
      level: "district",
      adcode: 371425,
      lng: 116.762767,
      lat: 36.784164,
      childrenNum: 0,
      parent: 371400,
    },
    {
      name: "平原县",
      level: "district",
      adcode: 371426,
      lng: 116.434016,
      lat: 37.165453,
      childrenNum: 0,
      parent: 371400,
    },
    {
      name: "夏津县",
      level: "district",
      adcode: 371427,
      lng: 116.001796,
      lat: 36.948013,
      childrenNum: 0,
      parent: 371400,
    },
    {
      name: "武城县",
      level: "district",
      adcode: 371428,
      lng: 116.069312,
      lat: 37.213398,
      childrenNum: 0,
      parent: 371400,
    },
    {
      name: "乐陵市",
      level: "district",
      adcode: 371481,
      lng: 117.232085,
      lat: 37.729769,
      childrenNum: 0,
      parent: 371400,
    },
    {
      name: "禹城市",
      level: "district",
      adcode: 371482,
      lng: 116.638558,
      lat: 36.934198,
      childrenNum: 0,
      parent: 371400,
    },
    {
      name: "聊城市",
      level: "city",
      adcode: 371500,
      lng: 115.985238,
      lat: 36.455857,
      childrenNum: 8,
      parent: 37e4,
    },
    {
      name: "东昌府区",
      level: "district",
      adcode: 371502,
      lng: 116.006399,
      lat: 36.412737,
      childrenNum: 0,
      parent: 371500,
    },
    {
      name: "茌平区",
      level: "district",
      adcode: 371503,
      lng: 116.254865,
      lat: 36.580814,
      childrenNum: 0,
      parent: 371500,
    },
    {
      name: "阳谷县",
      level: "district",
      adcode: 371521,
      lng: 115.791822,
      lat: 36.114392,
      childrenNum: 0,
      parent: 371500,
    },
    {
      name: "莘县",
      level: "district",
      adcode: 371522,
      lng: 115.669843,
      lat: 36.233711,
      childrenNum: 0,
      parent: 371500,
    },
    {
      name: "东阿县",
      level: "district",
      adcode: 371524,
      lng: 116.247655,
      lat: 36.335198,
      childrenNum: 0,
      parent: 371500,
    },
    {
      name: "冠县",
      level: "district",
      adcode: 371525,
      lng: 115.441684,
      lat: 36.484011,
      childrenNum: 0,
      parent: 371500,
    },
    {
      name: "高唐县",
      level: "district",
      adcode: 371526,
      lng: 116.230126,
      lat: 36.84715,
      childrenNum: 0,
      parent: 371500,
    },
    {
      name: "临清市",
      level: "district",
      adcode: 371581,
      lng: 115.704982,
      lat: 36.83828,
      childrenNum: 0,
      parent: 371500,
    },
    {
      name: "滨州市",
      level: "city",
      adcode: 371600,
      lng: 117.970731,
      lat: 37.382687,
      childrenNum: 7,
      parent: 37e4,
    },
    {
      name: "滨城区",
      level: "district",
      adcode: 371602,
      lng: 118.019567,
      lat: 37.431997,
      childrenNum: 0,
      parent: 371600,
    },
    {
      name: "沾化区",
      level: "district",
      adcode: 371603,
      lng: 118.098962,
      lat: 37.698952,
      childrenNum: 0,
      parent: 371600,
    },
    {
      name: "惠民县",
      level: "district",
      adcode: 371621,
      lng: 117.593744,
      lat: 37.47528,
      childrenNum: 0,
      parent: 371600,
    },
    {
      name: "阳信县",
      level: "district",
      adcode: 371622,
      lng: 117.603407,
      lat: 37.632773,
      childrenNum: 0,
      parent: 371600,
    },
    {
      name: "无棣县",
      level: "district",
      adcode: 371623,
      lng: 117.625846,
      lat: 37.770579,
      childrenNum: 0,
      parent: 371600,
    },
    {
      name: "博兴县",
      level: "district",
      adcode: 371625,
      lng: 118.110715,
      lat: 37.154529,
      childrenNum: 0,
      parent: 371600,
    },
    {
      name: "邹平市",
      level: "district",
      adcode: 371681,
      lng: 117.74313,
      lat: 36.863393,
      childrenNum: 0,
      parent: 371600,
    },
    {
      name: "菏泽市",
      level: "city",
      adcode: 371700,
      lng: 115.479646,
      lat: 35.234309,
      childrenNum: 9,
      parent: 37e4,
    },
    {
      name: "牡丹区",
      level: "district",
      adcode: 371702,
      lng: 115.417021,
      lat: 35.251911,
      childrenNum: 0,
      parent: 371700,
    },
    {
      name: "定陶区",
      level: "district",
      adcode: 371703,
      lng: 115.583172,
      lat: 35.105742,
      childrenNum: 0,
      parent: 371700,
    },
    {
      name: "曹县",
      level: "district",
      adcode: 371721,
      lng: 115.556393,
      lat: 34.85875,
      childrenNum: 0,
      parent: 371700,
    },
    {
      name: "单县",
      level: "district",
      adcode: 371722,
      lng: 116.106396,
      lat: 34.779282,
      childrenNum: 0,
      parent: 371700,
    },
    {
      name: "成武县",
      level: "district",
      adcode: 371723,
      lng: 115.889775,
      lat: 34.95278,
      childrenNum: 0,
      parent: 371700,
    },
    {
      name: "巨野县",
      level: "district",
      adcode: 371724,
      lng: 116.062585,
      lat: 35.388543,
      childrenNum: 0,
      parent: 371700,
    },
    {
      name: "郓城县",
      level: "district",
      adcode: 371725,
      lng: 115.938939,
      lat: 35.575276,
      childrenNum: 0,
      parent: 371700,
    },
    {
      name: "鄄城县",
      level: "district",
      adcode: 371726,
      lng: 115.544507,
      lat: 35.534088,
      childrenNum: 0,
      parent: 371700,
    },
    {
      name: "东明县",
      level: "district",
      adcode: 371728,
      lng: 115.107402,
      lat: 35.275664,
      childrenNum: 0,
      parent: 371700,
    },
    {
      name: "河南省",
      level: "province",
      adcode: 41e4,
      lng: 113.753094,
      lat: 34.767052,
      childrenNum: 18,
      parent: 1e5,
    },
    {
      name: "郑州市",
      level: "city",
      adcode: 410100,
      lng: 113.625351,
      lat: 34.746303,
      childrenNum: 12,
      parent: 41e4,
    },
    {
      name: "中原区",
      level: "district",
      adcode: 410102,
      lng: 113.612966,
      lat: 34.74828,
      childrenNum: 0,
      parent: 410100,
    },
    {
      name: "二七区",
      level: "district",
      adcode: 410103,
      lng: 113.640177,
      lat: 34.724138,
      childrenNum: 0,
      parent: 410100,
    },
    {
      name: "管城回族区",
      level: "district",
      adcode: 410104,
      lng: 113.677446,
      lat: 34.754436,
      childrenNum: 0,
      parent: 410100,
    },
    {
      name: "金水区",
      level: "district",
      adcode: 410105,
      lng: 113.6603,
      lat: 34.800415,
      childrenNum: 0,
      parent: 410100,
    },
    {
      name: "上街区",
      level: "district",
      adcode: 410106,
      lng: 113.309185,
      lat: 34.803514,
      childrenNum: 0,
      parent: 410100,
    },
    {
      name: "惠济区",
      level: "district",
      adcode: 410108,
      lng: 113.617055,
      lat: 34.867994,
      childrenNum: 0,
      parent: 410100,
    },
    {
      name: "中牟县",
      level: "district",
      adcode: 410122,
      lng: 113.975798,
      lat: 34.720535,
      childrenNum: 0,
      parent: 410100,
    },
    {
      name: "巩义市",
      level: "district",
      adcode: 410181,
      lng: 113.022354,
      lat: 34.748207,
      childrenNum: 0,
      parent: 410100,
    },
    {
      name: "荥阳市",
      level: "district",
      adcode: 410182,
      lng: 113.383385,
      lat: 34.7866,
      childrenNum: 0,
      parent: 410100,
    },
    {
      name: "新密市",
      level: "district",
      adcode: 410183,
      lng: 113.390932,
      lat: 34.540216,
      childrenNum: 0,
      parent: 410100,
    },
    {
      name: "新郑市",
      level: "district",
      adcode: 410184,
      lng: 113.74024,
      lat: 34.396479,
      childrenNum: 0,
      parent: 410100,
    },
    {
      name: "登封市",
      level: "district",
      adcode: 410185,
      lng: 113.05056,
      lat: 34.454877,
      childrenNum: 0,
      parent: 410100,
    },
    {
      name: "开封市",
      level: "city",
      adcode: 410200,
      lng: 114.314278,
      lat: 34.798083,
      childrenNum: 9,
      parent: 41e4,
    },
    {
      name: "龙亭区",
      level: "district",
      adcode: 410202,
      lng: 114.355378,
      lat: 34.815515,
      childrenNum: 0,
      parent: 410200,
    },
    {
      name: "顺河回族区",
      level: "district",
      adcode: 410203,
      lng: 114.360824,
      lat: 34.795933,
      childrenNum: 0,
      parent: 410200,
    },
    {
      name: "鼓楼区",
      level: "district",
      adcode: 410204,
      lng: 114.348356,
      lat: 34.788473,
      childrenNum: 0,
      parent: 410200,
    },
    {
      name: "禹王台区",
      level: "district",
      adcode: 410205,
      lng: 114.348105,
      lat: 34.777052,
      childrenNum: 0,
      parent: 410200,
    },
    {
      name: "祥符区",
      level: "district",
      adcode: 410212,
      lng: 114.441406,
      lat: 34.757546,
      childrenNum: 0,
      parent: 410200,
    },
    {
      name: "杞县",
      level: "district",
      adcode: 410221,
      lng: 114.782629,
      lat: 34.549731,
      childrenNum: 0,
      parent: 410200,
    },
    {
      name: "通许县",
      level: "district",
      adcode: 410222,
      lng: 114.47315,
      lat: 34.502053,
      childrenNum: 0,
      parent: 410200,
    },
    {
      name: "尉氏县",
      level: "district",
      adcode: 410223,
      lng: 114.19305,
      lat: 34.411437,
      childrenNum: 0,
      parent: 410200,
    },
    {
      name: "兰考县",
      level: "district",
      adcode: 410225,
      lng: 114.818228,
      lat: 34.856372,
      childrenNum: 0,
      parent: 410200,
    },
    {
      name: "洛阳市",
      level: "city",
      adcode: 410300,
      lng: 112.453895,
      lat: 34.619702,
      childrenNum: 14,
      parent: 41e4,
    },
    {
      name: "老城区",
      level: "district",
      adcode: 410302,
      lng: 112.44671,
      lat: 34.698617,
      childrenNum: 0,
      parent: 410300,
    },
    {
      name: "西工区",
      level: "district",
      adcode: 410303,
      lng: 112.428183,
      lat: 34.659959,
      childrenNum: 0,
      parent: 410300,
    },
    {
      name: "瀍河回族区",
      level: "district",
      adcode: 410304,
      lng: 112.500131,
      lat: 34.679773,
      childrenNum: 0,
      parent: 410300,
    },
    {
      name: "涧西区",
      level: "district",
      adcode: 410305,
      lng: 112.395766,
      lat: 34.658177,
      childrenNum: 0,
      parent: 410300,
    },
    {
      name: "偃师区",
      level: "district",
      adcode: 410307,
      lng: 112.789375,
      lat: 34.72715,
      childrenNum: 0,
      parent: 410300,
    },
    {
      name: "孟津区",
      level: "district",
      adcode: 410308,
      lng: 112.44525,
      lat: 34.825587,
      childrenNum: 0,
      parent: 410300,
    },
    {
      name: "洛龙区",
      level: "district",
      adcode: 410311,
      lng: 112.463833,
      lat: 34.619711,
      childrenNum: 0,
      parent: 410300,
    },
    {
      name: "新安县",
      level: "district",
      adcode: 410323,
      lng: 112.13246,
      lat: 34.728909,
      childrenNum: 0,
      parent: 410300,
    },
    {
      name: "栾川县",
      level: "district",
      adcode: 410324,
      lng: 111.615729,
      lat: 33.7857,
      childrenNum: 0,
      parent: 410300,
    },
    {
      name: "嵩县",
      level: "district",
      adcode: 410325,
      lng: 112.085432,
      lat: 34.134639,
      childrenNum: 0,
      parent: 410300,
    },
    {
      name: "汝阳县",
      level: "district",
      adcode: 410326,
      lng: 112.473013,
      lat: 34.154283,
      childrenNum: 0,
      parent: 410300,
    },
    {
      name: "宜阳县",
      level: "district",
      adcode: 410327,
      lng: 112.179187,
      lat: 34.51462,
      childrenNum: 0,
      parent: 410300,
    },
    {
      name: "洛宁县",
      level: "district",
      adcode: 410328,
      lng: 111.652958,
      lat: 34.389371,
      childrenNum: 0,
      parent: 410300,
    },
    {
      name: "伊川县",
      level: "district",
      adcode: 410329,
      lng: 112.425751,
      lat: 34.421741,
      childrenNum: 0,
      parent: 410300,
    },
    {
      name: "平顶山市",
      level: "city",
      adcode: 410400,
      lng: 113.192595,
      lat: 33.766554,
      childrenNum: 10,
      parent: 41e4,
    },
    {
      name: "新华区",
      level: "district",
      adcode: 410402,
      lng: 113.293977,
      lat: 33.737251,
      childrenNum: 0,
      parent: 410400,
    },
    {
      name: "卫东区",
      level: "district",
      adcode: 410403,
      lng: 113.335316,
      lat: 33.735388,
      childrenNum: 0,
      parent: 410400,
    },
    {
      name: "石龙区",
      level: "district",
      adcode: 410404,
      lng: 112.898845,
      lat: 33.899247,
      childrenNum: 0,
      parent: 410400,
    },
    {
      name: "湛河区",
      level: "district",
      adcode: 410411,
      lng: 113.3208727,
      lat: 33.72568115,
      childrenNum: 0,
      parent: 410400,
    },
    {
      name: "宝丰县",
      level: "district",
      adcode: 410421,
      lng: 113.054538,
      lat: 33.869159,
      childrenNum: 0,
      parent: 410400,
    },
    {
      name: "叶县",
      level: "district",
      adcode: 410422,
      lng: 113.357476,
      lat: 33.627437,
      childrenNum: 0,
      parent: 410400,
    },
    {
      name: "鲁山县",
      level: "district",
      adcode: 410423,
      lng: 112.908052,
      lat: 33.738434,
      childrenNum: 0,
      parent: 410400,
    },
    {
      name: "郏县",
      level: "district",
      adcode: 410425,
      lng: 113.21261,
      lat: 33.971787,
      childrenNum: 0,
      parent: 410400,
    },
    {
      name: "舞钢市",
      level: "district",
      adcode: 410481,
      lng: 113.516427,
      lat: 33.314147,
      childrenNum: 0,
      parent: 410400,
    },
    {
      name: "汝州市",
      level: "district",
      adcode: 410482,
      lng: 112.844696,
      lat: 34.16717,
      childrenNum: 0,
      parent: 410400,
    },
    {
      name: "安阳市",
      level: "city",
      adcode: 410500,
      lng: 114.39248,
      lat: 36.098779,
      childrenNum: 9,
      parent: 41e4,
    },
    {
      name: "文峰区",
      level: "district",
      adcode: 410502,
      lng: 114.356967,
      lat: 36.090593,
      childrenNum: 0,
      parent: 410500,
    },
    {
      name: "北关区",
      level: "district",
      adcode: 410503,
      lng: 114.355742,
      lat: 36.10766,
      childrenNum: 0,
      parent: 410500,
    },
    {
      name: "殷都区",
      level: "district",
      adcode: 410505,
      lng: 114.303454,
      lat: 36.109938,
      childrenNum: 0,
      parent: 410500,
    },
    {
      name: "龙安区",
      level: "district",
      adcode: 410506,
      lng: 114.301037,
      lat: 36.076937,
      childrenNum: 0,
      parent: 410500,
    },
    {
      name: "安阳县",
      level: "district",
      adcode: 410522,
      lng: 114.462953,
      lat: 36.09211,
      childrenNum: 0,
      parent: 410500,
    },
    {
      name: "汤阴县",
      level: "district",
      adcode: 410523,
      lng: 114.357686,
      lat: 35.925155,
      childrenNum: 0,
      parent: 410500,
    },
    {
      name: "滑县",
      level: "district",
      adcode: 410526,
      lng: 114.517977,
      lat: 35.576128,
      childrenNum: 0,
      parent: 410500,
    },
    {
      name: "内黄县",
      level: "district",
      adcode: 410527,
      lng: 114.90146,
      lat: 35.972016,
      childrenNum: 0,
      parent: 410500,
    },
    {
      name: "林州市",
      level: "district",
      adcode: 410581,
      lng: 113.819275,
      lat: 36.084127,
      childrenNum: 0,
      parent: 410500,
    },
    {
      name: "鹤壁市",
      level: "city",
      adcode: 410600,
      lng: 114.297305,
      lat: 35.748329,
      childrenNum: 5,
      parent: 41e4,
    },
    {
      name: "鹤山区",
      level: "district",
      adcode: 410602,
      lng: 114.163133,
      lat: 35.954647,
      childrenNum: 0,
      parent: 410600,
    },
    {
      name: "山城区",
      level: "district",
      adcode: 410603,
      lng: 114.184391,
      lat: 35.897862,
      childrenNum: 0,
      parent: 410600,
    },
    {
      name: "淇滨区",
      level: "district",
      adcode: 410611,
      lng: 114.298748,
      lat: 35.741763,
      childrenNum: 0,
      parent: 410600,
    },
    {
      name: "浚县",
      level: "district",
      adcode: 410621,
      lng: 114.550611,
      lat: 35.677249,
      childrenNum: 0,
      parent: 410600,
    },
    {
      name: "淇县",
      level: "district",
      adcode: 410622,
      lng: 114.208851,
      lat: 35.622571,
      childrenNum: 0,
      parent: 410600,
    },
    {
      name: "新乡市",
      level: "city",
      adcode: 410700,
      lng: 113.92679,
      lat: 35.303589,
      childrenNum: 12,
      parent: 41e4,
    },
    {
      name: "红旗区",
      level: "district",
      adcode: 410702,
      lng: 113.875211,
      lat: 35.302952,
      childrenNum: 0,
      parent: 410700,
    },
    {
      name: "卫滨区",
      level: "district",
      adcode: 410703,
      lng: 113.865666,
      lat: 35.301796,
      childrenNum: 0,
      parent: 410700,
    },
    {
      name: "凤泉区",
      level: "district",
      adcode: 410704,
      lng: 113.916183,
      lat: 35.384428,
      childrenNum: 0,
      parent: 410700,
    },
    {
      name: "牧野区",
      level: "district",
      adcode: 410711,
      lng: 113.908561,
      lat: 35.315614,
      childrenNum: 0,
      parent: 410700,
    },
    {
      name: "新乡县",
      level: "district",
      adcode: 410721,
      lng: 113.813884,
      lat: 35.170066,
      childrenNum: 0,
      parent: 410700,
    },
    {
      name: "获嘉县",
      level: "district",
      adcode: 410724,
      lng: 113.657551,
      lat: 35.260153,
      childrenNum: 0,
      parent: 410700,
    },
    {
      name: "原阳县",
      level: "district",
      adcode: 410725,
      lng: 113.939829,
      lat: 35.066873,
      childrenNum: 0,
      parent: 410700,
    },
    {
      name: "延津县",
      level: "district",
      adcode: 410726,
      lng: 114.205624,
      lat: 35.165876,
      childrenNum: 0,
      parent: 410700,
    },
    {
      name: "封丘县",
      level: "district",
      adcode: 410727,
      lng: 114.418907,
      lat: 35.041237,
      childrenNum: 0,
      parent: 410700,
    },
    {
      name: "卫辉市",
      level: "district",
      adcode: 410781,
      lng: 114.064584,
      lat: 35.398357,
      childrenNum: 0,
      parent: 410700,
    },
    {
      name: "辉县市",
      level: "district",
      adcode: 410782,
      lng: 113.80572,
      lat: 35.462964,
      childrenNum: 0,
      parent: 410700,
    },
    {
      name: "长垣市",
      level: "district",
      adcode: 410783,
      lng: 114.66885,
      lat: 35.201628,
      childrenNum: 0,
      parent: 410700,
    },
    {
      name: "焦作市",
      level: "city",
      adcode: 410800,
      lng: 113.241902,
      lat: 35.215726,
      childrenNum: 10,
      parent: 41e4,
    },
    {
      name: "解放区",
      level: "district",
      adcode: 410802,
      lng: 113.230555,
      lat: 35.240403,
      childrenNum: 0,
      parent: 410800,
    },
    {
      name: "中站区",
      level: "district",
      adcode: 410803,
      lng: 113.182847,
      lat: 35.237227,
      childrenNum: 0,
      parent: 410800,
    },
    {
      name: "马村区",
      level: "district",
      adcode: 410804,
      lng: 113.32212,
      lat: 35.257084,
      childrenNum: 0,
      parent: 410800,
    },
    {
      name: "山阳区",
      level: "district",
      adcode: 410811,
      lng: 113.254581,
      lat: 35.215054,
      childrenNum: 0,
      parent: 410800,
    },
    {
      name: "修武县",
      level: "district",
      adcode: 410821,
      lng: 113.447862,
      lat: 35.22286,
      childrenNum: 0,
      parent: 410800,
    },
    {
      name: "博爱县",
      level: "district",
      adcode: 410822,
      lng: 113.064701,
      lat: 35.170332,
      childrenNum: 0,
      parent: 410800,
    },
    {
      name: "武陟县",
      level: "district",
      adcode: 410823,
      lng: 113.401848,
      lat: 35.099458,
      childrenNum: 0,
      parent: 410800,
    },
    {
      name: "温县",
      level: "district",
      adcode: 410825,
      lng: 113.08067,
      lat: 34.93961,
      childrenNum: 0,
      parent: 410800,
    },
    {
      name: "沁阳市",
      level: "district",
      adcode: 410882,
      lng: 112.950873,
      lat: 35.087569,
      childrenNum: 0,
      parent: 410800,
    },
    {
      name: "孟州市",
      level: "district",
      adcode: 410883,
      lng: 112.791372,
      lat: 34.907229,
      childrenNum: 0,
      parent: 410800,
    },
    {
      name: "濮阳市",
      level: "city",
      adcode: 410900,
      lng: 115.029246,
      lat: 35.762731,
      childrenNum: 6,
      parent: 41e4,
    },
    {
      name: "华龙区",
      level: "district",
      adcode: 410902,
      lng: 115.074453,
      lat: 35.778289,
      childrenNum: 0,
      parent: 410900,
    },
    {
      name: "清丰县",
      level: "district",
      adcode: 410922,
      lng: 115.104602,
      lat: 35.886694,
      childrenNum: 0,
      parent: 410900,
    },
    {
      name: "南乐县",
      level: "district",
      adcode: 410923,
      lng: 115.205876,
      lat: 36.070219,
      childrenNum: 0,
      parent: 410900,
    },
    {
      name: "范县",
      level: "district",
      adcode: 410926,
      lng: 115.504081,
      lat: 35.85302,
      childrenNum: 0,
      parent: 410900,
    },
    {
      name: "台前县",
      level: "district",
      adcode: 410927,
      lng: 115.871671,
      lat: 35.970286,
      childrenNum: 0,
      parent: 410900,
    },
    {
      name: "濮阳县",
      level: "district",
      adcode: 410928,
      lng: 115.029165,
      lat: 35.713113,
      childrenNum: 0,
      parent: 410900,
    },
    {
      name: "许昌市",
      level: "city",
      adcode: 411e3,
      lng: 113.852004,
      lat: 34.03732,
      childrenNum: 6,
      parent: 41e4,
    },
    {
      name: "魏都区",
      level: "district",
      adcode: 411002,
      lng: 113.830826,
      lat: 34.047189,
      childrenNum: 0,
      parent: 411e3,
    },
    {
      name: "建安区",
      level: "district",
      adcode: 411003,
      lng: 113.822869,
      lat: 34.124729,
      childrenNum: 0,
      parent: 411e3,
    },
    {
      name: "鄢陵县",
      level: "district",
      adcode: 411024,
      lng: 114.177329,
      lat: 34.102985,
      childrenNum: 0,
      parent: 411e3,
    },
    {
      name: "襄城县",
      level: "district",
      adcode: 411025,
      lng: 113.506904,
      lat: 33.851609,
      childrenNum: 0,
      parent: 411e3,
    },
    {
      name: "禹州市",
      level: "district",
      adcode: 411081,
      lng: 113.488715,
      lat: 34.142442,
      childrenNum: 0,
      parent: 411e3,
    },
    {
      name: "长葛市",
      level: "district",
      adcode: 411082,
      lng: 113.813972,
      lat: 34.195458,
      childrenNum: 0,
      parent: 411e3,
    },
    {
      name: "漯河市",
      level: "city",
      adcode: 411100,
      lng: 114.0166,
      lat: 33.58038,
      childrenNum: 5,
      parent: 41e4,
    },
    {
      name: "源汇区",
      level: "district",
      adcode: 411102,
      lng: 113.984164,
      lat: 33.572319,
      childrenNum: 0,
      parent: 411100,
    },
    {
      name: "郾城区",
      level: "district",
      adcode: 411103,
      lng: 114.006596,
      lat: 33.587697,
      childrenNum: 0,
      parent: 411100,
    },
    {
      name: "召陵区",
      level: "district",
      adcode: 411104,
      lng: 114.093879,
      lat: 33.586509,
      childrenNum: 0,
      parent: 411100,
    },
    {
      name: "舞阳县",
      level: "district",
      adcode: 411121,
      lng: 113.609327,
      lat: 33.438259,
      childrenNum: 0,
      parent: 411100,
    },
    {
      name: "临颍县",
      level: "district",
      adcode: 411122,
      lng: 113.931121,
      lat: 33.828096,
      childrenNum: 0,
      parent: 411100,
    },
    {
      name: "三门峡市",
      level: "city",
      adcode: 411200,
      lng: 111.200482,
      lat: 34.773196,
      childrenNum: 6,
      parent: 41e4,
    },
    {
      name: "湖滨区",
      level: "district",
      adcode: 411202,
      lng: 111.188552,
      lat: 34.771296,
      childrenNum: 0,
      parent: 411200,
    },
    {
      name: "陕州区",
      level: "district",
      adcode: 411203,
      lng: 111.103252,
      lat: 34.72066,
      childrenNum: 0,
      parent: 411200,
    },
    {
      name: "渑池县",
      level: "district",
      adcode: 411221,
      lng: 111.761753,
      lat: 34.767937,
      childrenNum: 0,
      parent: 411200,
    },
    {
      name: "卢氏县",
      level: "district",
      adcode: 411224,
      lng: 111.04522,
      lat: 34.051866,
      childrenNum: 0,
      parent: 411200,
    },
    {
      name: "义马市",
      level: "district",
      adcode: 411281,
      lng: 111.874726,
      lat: 34.747563,
      childrenNum: 0,
      parent: 411200,
    },
    {
      name: "灵宝市",
      level: "district",
      adcode: 411282,
      lng: 110.894225,
      lat: 34.517734,
      childrenNum: 0,
      parent: 411200,
    },
    {
      name: "南阳市",
      level: "city",
      adcode: 411300,
      lng: 112.528549,
      lat: 32.990218,
      childrenNum: 13,
      parent: 41e4,
    },
    {
      name: "宛城区",
      level: "district",
      adcode: 411302,
      lng: 112.539506,
      lat: 33.003564,
      childrenNum: 0,
      parent: 411300,
    },
    {
      name: "卧龙区",
      level: "district",
      adcode: 411303,
      lng: 112.5287888,
      lat: 32.98987657,
      childrenNum: 0,
      parent: 411300,
    },
    {
      name: "南召县",
      level: "district",
      adcode: 411321,
      lng: 112.429277,
      lat: 33.489804,
      childrenNum: 0,
      parent: 411300,
    },
    {
      name: "方城县",
      level: "district",
      adcode: 411322,
      lng: 113.012849,
      lat: 33.255387,
      childrenNum: 0,
      parent: 411300,
    },
    {
      name: "西峡县",
      level: "district",
      adcode: 411323,
      lng: 111.473644,
      lat: 33.307272,
      childrenNum: 0,
      parent: 411300,
    },
    {
      name: "镇平县",
      level: "district",
      adcode: 411324,
      lng: 112.234571,
      lat: 33.033826,
      childrenNum: 0,
      parent: 411300,
    },
    {
      name: "内乡县",
      level: "district",
      adcode: 411325,
      lng: 111.849354,
      lat: 33.044698,
      childrenNum: 0,
      parent: 411300,
    },
    {
      name: "淅川县",
      level: "district",
      adcode: 411326,
      lng: 111.490902,
      lat: 33.137831,
      childrenNum: 0,
      parent: 411300,
    },
    {
      name: "社旗县",
      level: "district",
      adcode: 411327,
      lng: 112.948183,
      lat: 33.056229,
      childrenNum: 0,
      parent: 411300,
    },
    {
      name: "唐河县",
      level: "district",
      adcode: 411328,
      lng: 112.80829,
      lat: 32.682464,
      childrenNum: 0,
      parent: 411300,
    },
    {
      name: "新野县",
      level: "district",
      adcode: 411329,
      lng: 112.3601,
      lat: 32.521282,
      childrenNum: 0,
      parent: 411300,
    },
    {
      name: "桐柏县",
      level: "district",
      adcode: 411330,
      lng: 113.428702,
      lat: 32.379164,
      childrenNum: 0,
      parent: 411300,
    },
    {
      name: "邓州市",
      level: "district",
      adcode: 411381,
      lng: 112.08745,
      lat: 32.687732,
      childrenNum: 0,
      parent: 411300,
    },
    {
      name: "商丘市",
      level: "city",
      adcode: 411400,
      lng: 115.656358,
      lat: 34.415165,
      childrenNum: 9,
      parent: 41e4,
    },
    {
      name: "梁园区",
      level: "district",
      adcode: 411402,
      lng: 115.613609,
      lat: 34.444519,
      childrenNum: 0,
      parent: 411400,
    },
    {
      name: "睢阳区",
      level: "district",
      adcode: 411403,
      lng: 115.653258,
      lat: 34.389048,
      childrenNum: 0,
      parent: 411400,
    },
    {
      name: "民权县",
      level: "district",
      adcode: 411421,
      lng: 115.175019,
      lat: 34.648384,
      childrenNum: 0,
      parent: 411400,
    },
    {
      name: "睢县",
      level: "district",
      adcode: 411422,
      lng: 115.071957,
      lat: 34.446572,
      childrenNum: 0,
      parent: 411400,
    },
    {
      name: "宁陵县",
      level: "district",
      adcode: 411423,
      lng: 115.314221,
      lat: 34.461226,
      childrenNum: 0,
      parent: 411400,
    },
    {
      name: "柘城县",
      level: "district",
      adcode: 411424,
      lng: 115.305182,
      lat: 34.092015,
      childrenNum: 0,
      parent: 411400,
    },
    {
      name: "虞城县",
      level: "district",
      adcode: 411425,
      lng: 115.828519,
      lat: 34.400868,
      childrenNum: 0,
      parent: 411400,
    },
    {
      name: "夏邑县",
      level: "district",
      adcode: 411426,
      lng: 116.131422,
      lat: 34.237801,
      childrenNum: 0,
      parent: 411400,
    },
    {
      name: "永城市",
      level: "district",
      adcode: 411481,
      lng: 116.449864,
      lat: 33.929927,
      childrenNum: 0,
      parent: 411400,
    },
    {
      name: "信阳市",
      level: "city",
      adcode: 411500,
      lng: 114.091058,
      lat: 32.148624,
      childrenNum: 10,
      parent: 41e4,
    },
    {
      name: "浉河区",
      level: "district",
      adcode: 411502,
      lng: 114.05867,
      lat: 32.116885,
      childrenNum: 0,
      parent: 411500,
    },
    {
      name: "平桥区",
      level: "district",
      adcode: 411503,
      lng: 114.125595,
      lat: 32.101005,
      childrenNum: 0,
      parent: 411500,
    },
    {
      name: "罗山县",
      level: "district",
      adcode: 411521,
      lng: 114.512838,
      lat: 32.20436,
      childrenNum: 0,
      parent: 411500,
    },
    {
      name: "光山县",
      level: "district",
      adcode: 411522,
      lng: 114.91934,
      lat: 32.010736,
      childrenNum: 0,
      parent: 411500,
    },
    {
      name: "新县",
      level: "district",
      adcode: 411523,
      lng: 114.879309,
      lat: 31.643914,
      childrenNum: 0,
      parent: 411500,
    },
    {
      name: "商城县",
      level: "district",
      adcode: 411524,
      lng: 115.406894,
      lat: 31.79832,
      childrenNum: 0,
      parent: 411500,
    },
    {
      name: "固始县",
      level: "district",
      adcode: 411525,
      lng: 115.654066,
      lat: 32.169239,
      childrenNum: 0,
      parent: 411500,
    },
    {
      name: "潢川县",
      level: "district",
      adcode: 411526,
      lng: 115.051683,
      lat: 32.131426,
      childrenNum: 0,
      parent: 411500,
    },
    {
      name: "淮滨县",
      level: "district",
      adcode: 411527,
      lng: 115.420101,
      lat: 32.474772,
      childrenNum: 0,
      parent: 411500,
    },
    {
      name: "息县",
      level: "district",
      adcode: 411528,
      lng: 114.740392,
      lat: 32.34312,
      childrenNum: 0,
      parent: 411500,
    },
    {
      name: "周口市",
      level: "city",
      adcode: 411600,
      lng: 114.701222,
      lat: 33.634652,
      childrenNum: 10,
      parent: 41e4,
    },
    {
      name: "川汇区",
      level: "district",
      adcode: 411602,
      lng: 114.650551,
      lat: 33.647679,
      childrenNum: 0,
      parent: 411600,
    },
    {
      name: "淮阳区",
      level: "district",
      adcode: 411603,
      lng: 114.852604,
      lat: 33.731543,
      childrenNum: 0,
      parent: 411600,
    },
    {
      name: "扶沟县",
      level: "district",
      adcode: 411621,
      lng: 114.394666,
      lat: 34.060062,
      childrenNum: 0,
      parent: 411600,
    },
    {
      name: "西华县",
      level: "district",
      adcode: 411622,
      lng: 114.529709,
      lat: 33.768277,
      childrenNum: 0,
      parent: 411600,
    },
    {
      name: "商水县",
      level: "district",
      adcode: 411623,
      lng: 114.608135,
      lat: 33.562072,
      childrenNum: 0,
      parent: 411600,
    },
    {
      name: "沈丘县",
      level: "district",
      adcode: 411624,
      lng: 115.098541,
      lat: 33.409805,
      childrenNum: 0,
      parent: 411600,
    },
    {
      name: "郸城县",
      level: "district",
      adcode: 411625,
      lng: 115.177141,
      lat: 33.64601,
      childrenNum: 0,
      parent: 411600,
    },
    {
      name: "太康县",
      level: "district",
      adcode: 411627,
      lng: 114.837946,
      lat: 34.064513,
      childrenNum: 0,
      parent: 411600,
    },
    {
      name: "鹿邑县",
      level: "district",
      adcode: 411628,
      lng: 115.484525,
      lat: 33.860698,
      childrenNum: 0,
      parent: 411600,
    },
    {
      name: "项城市",
      level: "district",
      adcode: 411681,
      lng: 114.875128,
      lat: 33.465609,
      childrenNum: 0,
      parent: 411600,
    },
    {
      name: "驻马店市",
      level: "city",
      adcode: 411700,
      lng: 114.021988,
      lat: 33.014038,
      childrenNum: 10,
      parent: 41e4,
    },
    {
      name: "驿城区",
      level: "district",
      adcode: 411702,
      lng: 113.993753,
      lat: 32.97455,
      childrenNum: 0,
      parent: 411700,
    },
    {
      name: "西平县",
      level: "district",
      adcode: 411721,
      lng: 114.021492,
      lat: 33.387658,
      childrenNum: 0,
      parent: 411700,
    },
    {
      name: "上蔡县",
      level: "district",
      adcode: 411722,
      lng: 114.264381,
      lat: 33.262439,
      childrenNum: 0,
      parent: 411700,
    },
    {
      name: "平舆县",
      level: "district",
      adcode: 411723,
      lng: 114.618537,
      lat: 32.96344,
      childrenNum: 0,
      parent: 411700,
    },
    {
      name: "正阳县",
      level: "district",
      adcode: 411724,
      lng: 114.392774,
      lat: 32.605697,
      childrenNum: 0,
      parent: 411700,
    },
    {
      name: "确山县",
      level: "district",
      adcode: 411725,
      lng: 114.016818,
      lat: 32.82134,
      childrenNum: 0,
      parent: 411700,
    },
    {
      name: "泌阳县",
      level: "district",
      adcode: 411726,
      lng: 113.327144,
      lat: 32.723974,
      childrenNum: 0,
      parent: 411700,
    },
    {
      name: "汝南县",
      level: "district",
      adcode: 411727,
      lng: 114.362477,
      lat: 33.006808,
      childrenNum: 0,
      parent: 411700,
    },
    {
      name: "遂平县",
      level: "district",
      adcode: 411728,
      lng: 114.013323,
      lat: 33.146316,
      childrenNum: 0,
      parent: 411700,
    },
    {
      name: "新蔡县",
      level: "district",
      adcode: 411729,
      lng: 114.965519,
      lat: 32.74488,
      childrenNum: 0,
      parent: 411700,
    },
    {
      name: "济源市",
      level: "city",
      adcode: 419001,
      lng: 112.602347,
      lat: 35.069057,
      childrenNum: 16,
      parent: 41e4,
    },
    {
      name: "湖北省",
      level: "province",
      adcode: 42e4,
      lng: 114.341552,
      lat: 30.546222,
      childrenNum: 17,
      parent: 1e5,
    },
    {
      name: "武汉市",
      level: "city",
      adcode: 420100,
      lng: 114.304569,
      lat: 30.593354,
      childrenNum: 13,
      parent: 42e4,
    },
    {
      name: "江岸区",
      level: "district",
      adcode: 420102,
      lng: 114.309317,
      lat: 30.600008,
      childrenNum: 0,
      parent: 420100,
    },
    {
      name: "江汉区",
      level: "district",
      adcode: 420103,
      lng: 114.270763,
      lat: 30.601129,
      childrenNum: 0,
      parent: 420100,
    },
    {
      name: "硚口区",
      level: "district",
      adcode: 420104,
      lng: 114.214746,
      lat: 30.582559,
      childrenNum: 0,
      parent: 420100,
    },
    {
      name: "汉阳区",
      level: "district",
      adcode: 420105,
      lng: 114.21859,
      lat: 30.554287,
      childrenNum: 0,
      parent: 420100,
    },
    {
      name: "武昌区",
      level: "district",
      adcode: 420106,
      lng: 114.316464,
      lat: 30.55418,
      childrenNum: 0,
      parent: 420100,
    },
    {
      name: "青山区",
      level: "district",
      adcode: 420107,
      lng: 114.385424,
      lat: 30.639842,
      childrenNum: 0,
      parent: 420100,
    },
    {
      name: "洪山区",
      level: "district",
      adcode: 420111,
      lng: 114.342664,
      lat: 30.500642,
      childrenNum: 0,
      parent: 420100,
    },
    {
      name: "东西湖区",
      level: "district",
      adcode: 420112,
      lng: 114.136295,
      lat: 30.620079,
      childrenNum: 0,
      parent: 420100,
    },
    {
      name: "汉南区",
      level: "district",
      adcode: 420113,
      lng: 114.084582,
      lat: 30.308776,
      childrenNum: 0,
      parent: 420100,
    },
    {
      name: "蔡甸区",
      level: "district",
      adcode: 420114,
      lng: 114.087279,
      lat: 30.536395,
      childrenNum: 0,
      parent: 420100,
    },
    {
      name: "江夏区",
      level: "district",
      adcode: 420115,
      lng: 114.320884,
      lat: 30.37558,
      childrenNum: 0,
      parent: 420100,
    },
    {
      name: "黄陂区",
      level: "district",
      adcode: 420116,
      lng: 114.375698,
      lat: 30.882305,
      childrenNum: 0,
      parent: 420100,
    },
    {
      name: "新洲区",
      level: "district",
      adcode: 420117,
      lng: 114.801284,
      lat: 30.841304,
      childrenNum: 0,
      parent: 420100,
    },
    {
      name: "黄石市",
      level: "city",
      adcode: 420200,
      lng: 115.038999,
      lat: 30.201082,
      childrenNum: 6,
      parent: 42e4,
    },
    {
      name: "黄石港区",
      level: "district",
      adcode: 420202,
      lng: 115.065653,
      lat: 30.223194,
      childrenNum: 0,
      parent: 420200,
    },
    {
      name: "西塞山区",
      level: "district",
      adcode: 420203,
      lng: 115.110067,
      lat: 30.205114,
      childrenNum: 0,
      parent: 420200,
    },
    {
      name: "下陆区",
      level: "district",
      adcode: 420204,
      lng: 114.960914,
      lat: 30.174148,
      childrenNum: 0,
      parent: 420200,
    },
    {
      name: "铁山区",
      level: "district",
      adcode: 420205,
      lng: 114.891603,
      lat: 30.203152,
      childrenNum: 0,
      parent: 420200,
    },
    {
      name: "阳新县",
      level: "district",
      adcode: 420222,
      lng: 115.215211,
      lat: 29.830236,
      childrenNum: 0,
      parent: 420200,
    },
    {
      name: "大冶市",
      level: "district",
      adcode: 420281,
      lng: 114.98046,
      lat: 30.096263,
      childrenNum: 0,
      parent: 420200,
    },
    {
      name: "十堰市",
      level: "city",
      adcode: 420300,
      lng: 110.798921,
      lat: 32.629057,
      childrenNum: 8,
      parent: 42e4,
    },
    {
      name: "茅箭区",
      level: "district",
      adcode: 420302,
      lng: 110.813478,
      lat: 32.591847,
      childrenNum: 0,
      parent: 420300,
    },
    {
      name: "张湾区",
      level: "district",
      adcode: 420303,
      lng: 110.769132,
      lat: 32.652297,
      childrenNum: 0,
      parent: 420300,
    },
    {
      name: "郧阳区",
      level: "district",
      adcode: 420304,
      lng: 110.812101,
      lat: 32.834847,
      childrenNum: 0,
      parent: 420300,
    },
    {
      name: "郧西县",
      level: "district",
      adcode: 420322,
      lng: 110.426005,
      lat: 32.993095,
      childrenNum: 0,
      parent: 420300,
    },
    {
      name: "竹山县",
      level: "district",
      adcode: 420323,
      lng: 110.229696,
      lat: 32.225039,
      childrenNum: 0,
      parent: 420300,
    },
    {
      name: "竹溪县",
      level: "district",
      adcode: 420324,
      lng: 109.715322,
      lat: 32.318257,
      childrenNum: 0,
      parent: 420300,
    },
    {
      name: "房县",
      level: "district",
      adcode: 420325,
      lng: 110.726754,
      lat: 32.04017,
      childrenNum: 0,
      parent: 420300,
    },
    {
      name: "丹江口市",
      level: "district",
      adcode: 420381,
      lng: 111.513318,
      lat: 32.540287,
      childrenNum: 0,
      parent: 420300,
    },
    {
      name: "宜昌市",
      level: "city",
      adcode: 420500,
      lng: 111.286962,
      lat: 30.69217,
      childrenNum: 13,
      parent: 42e4,
    },
    {
      name: "西陵区",
      level: "district",
      adcode: 420502,
      lng: 111.285696,
      lat: 30.710765,
      childrenNum: 0,
      parent: 420500,
    },
    {
      name: "伍家岗区",
      level: "district",
      adcode: 420503,
      lng: 111.360882,
      lat: 30.644048,
      childrenNum: 0,
      parent: 420500,
    },
    {
      name: "点军区",
      level: "district",
      adcode: 420504,
      lng: 111.268338,
      lat: 30.69343,
      childrenNum: 0,
      parent: 420500,
    },
    {
      name: "猇亭区",
      level: "district",
      adcode: 420505,
      lng: 111.434378,
      lat: 30.531133,
      childrenNum: 0,
      parent: 420500,
    },
    {
      name: "夷陵区",
      level: "district",
      adcode: 420506,
      lng: 111.326371,
      lat: 30.769875,
      childrenNum: 0,
      parent: 420500,
    },
    {
      name: "远安县",
      level: "district",
      adcode: 420525,
      lng: 111.640329,
      lat: 31.060904,
      childrenNum: 0,
      parent: 420500,
    },
    {
      name: "兴山县",
      level: "district",
      adcode: 420526,
      lng: 110.746831,
      lat: 31.348065,
      childrenNum: 0,
      parent: 420500,
    },
    {
      name: "秭归县",
      level: "district",
      adcode: 420527,
      lng: 110.97793,
      lat: 30.825882,
      childrenNum: 0,
      parent: 420500,
    },
    {
      name: "长阳土家族自治县",
      level: "district",
      adcode: 420528,
      lng: 111.20697,
      lat: 30.473038,
      childrenNum: 0,
      parent: 420500,
    },
    {
      name: "五峰土家族自治县",
      level: "district",
      adcode: 420529,
      lng: 111.07374,
      lat: 30.156741,
      childrenNum: 0,
      parent: 420500,
    },
    {
      name: "宜都市",
      level: "district",
      adcode: 420581,
      lng: 111.450128,
      lat: 30.378444,
      childrenNum: 0,
      parent: 420500,
    },
    {
      name: "当阳市",
      level: "district",
      adcode: 420582,
      lng: 111.78836,
      lat: 30.820893,
      childrenNum: 0,
      parent: 420500,
    },
    {
      name: "枝江市",
      level: "district",
      adcode: 420583,
      lng: 111.760616,
      lat: 30.425758,
      childrenNum: 0,
      parent: 420500,
    },
    {
      name: "襄阳市",
      level: "city",
      adcode: 420600,
      lng: 112.121743,
      lat: 32.010161,
      childrenNum: 9,
      parent: 42e4,
    },
    {
      name: "襄城区",
      level: "district",
      adcode: 420602,
      lng: 112.134025,
      lat: 32.009932,
      childrenNum: 0,
      parent: 420600,
    },
    {
      name: "樊城区",
      level: "district",
      adcode: 420606,
      lng: 112.135241,
      lat: 32.045065,
      childrenNum: 0,
      parent: 420600,
    },
    {
      name: "襄州区",
      level: "district",
      adcode: 420607,
      lng: 112.211365,
      lat: 32.088651,
      childrenNum: 0,
      parent: 420600,
    },
    {
      name: "南漳县",
      level: "district",
      adcode: 420624,
      lng: 111.838997,
      lat: 31.774649,
      childrenNum: 0,
      parent: 420600,
    },
    {
      name: "谷城县",
      level: "district",
      adcode: 420625,
      lng: 111.653077,
      lat: 32.26339,
      childrenNum: 0,
      parent: 420600,
    },
    {
      name: "保康县",
      level: "district",
      adcode: 420626,
      lng: 111.261308,
      lat: 31.87831,
      childrenNum: 0,
      parent: 420600,
    },
    {
      name: "老河口市",
      level: "district",
      adcode: 420682,
      lng: 111.683861,
      lat: 32.359068,
      childrenNum: 0,
      parent: 420600,
    },
    {
      name: "枣阳市",
      level: "district",
      adcode: 420683,
      lng: 112.772723,
      lat: 32.128968,
      childrenNum: 0,
      parent: 420600,
    },
    {
      name: "宜城市",
      level: "district",
      adcode: 420684,
      lng: 112.256486,
      lat: 31.720278,
      childrenNum: 0,
      parent: 420600,
    },
    {
      name: "鄂州市",
      level: "city",
      adcode: 420700,
      lng: 114.894909,
      lat: 30.391461,
      childrenNum: 3,
      parent: 42e4,
    },
    {
      name: "梁子湖区",
      level: "district",
      adcode: 420702,
      lng: 114.684805,
      lat: 30.100146,
      childrenNum: 0,
      parent: 420700,
    },
    {
      name: "华容区",
      level: "district",
      adcode: 420703,
      lng: 114.729945,
      lat: 30.53515,
      childrenNum: 0,
      parent: 420700,
    },
    {
      name: "鄂城区",
      level: "district",
      adcode: 420704,
      lng: 114.89157,
      lat: 30.400535,
      childrenNum: 0,
      parent: 420700,
    },
    {
      name: "荆门市",
      level: "city",
      adcode: 420800,
      lng: 112.199009,
      lat: 31.035445,
      childrenNum: 5,
      parent: 42e4,
    },
    {
      name: "东宝区",
      level: "district",
      adcode: 420802,
      lng: 112.201657,
      lat: 31.05187,
      childrenNum: 0,
      parent: 420800,
    },
    {
      name: "掇刀区",
      level: "district",
      adcode: 420804,
      lng: 112.2079,
      lat: 30.973397,
      childrenNum: 0,
      parent: 420800,
    },
    {
      name: "沙洋县",
      level: "district",
      adcode: 420822,
      lng: 112.588675,
      lat: 30.709167,
      childrenNum: 0,
      parent: 420800,
    },
    {
      name: "钟祥市",
      level: "district",
      adcode: 420881,
      lng: 112.588032,
      lat: 31.167933,
      childrenNum: 0,
      parent: 420800,
    },
    {
      name: "京山市",
      level: "district",
      adcode: 420882,
      lng: 113.119561,
      lat: 31.018414,
      childrenNum: 0,
      parent: 420800,
    },
    {
      name: "孝感市",
      level: "city",
      adcode: 420900,
      lng: 113.956962,
      lat: 30.918311,
      childrenNum: 7,
      parent: 42e4,
    },
    {
      name: "孝南区",
      level: "district",
      adcode: 420902,
      lng: 113.910769,
      lat: 30.91695,
      childrenNum: 0,
      parent: 420900,
    },
    {
      name: "孝昌县",
      level: "district",
      adcode: 420921,
      lng: 113.997794,
      lat: 31.258225,
      childrenNum: 0,
      parent: 420900,
    },
    {
      name: "大悟县",
      level: "district",
      adcode: 420922,
      lng: 114.127122,
      lat: 31.561179,
      childrenNum: 0,
      parent: 420900,
    },
    {
      name: "云梦县",
      level: "district",
      adcode: 420923,
      lng: 113.752958,
      lat: 31.021736,
      childrenNum: 0,
      parent: 420900,
    },
    {
      name: "应城市",
      level: "district",
      adcode: 420981,
      lng: 113.571864,
      lat: 30.928592,
      childrenNum: 0,
      parent: 420900,
    },
    {
      name: "安陆市",
      level: "district",
      adcode: 420982,
      lng: 113.688955,
      lat: 31.25565,
      childrenNum: 0,
      parent: 420900,
    },
    {
      name: "汉川市",
      level: "district",
      adcode: 420984,
      lng: 113.838068,
      lat: 30.673219,
      childrenNum: 0,
      parent: 420900,
    },
    {
      name: "荆州市",
      level: "city",
      adcode: 421e3,
      lng: 112.24143,
      lat: 30.336282,
      childrenNum: 8,
      parent: 42e4,
    },
    {
      name: "沙市区",
      level: "district",
      adcode: 421002,
      lng: 112.251975,
      lat: 30.326693,
      childrenNum: 0,
      parent: 421e3,
    },
    {
      name: "荆州区",
      level: "district",
      adcode: 421003,
      lng: 112.190282,
      lat: 30.352984,
      childrenNum: 0,
      parent: 421e3,
    },
    {
      name: "公安县",
      level: "district",
      adcode: 421022,
      lng: 112.229742,
      lat: 30.058519,
      childrenNum: 0,
      parent: 421e3,
    },
    {
      name: "江陵县",
      level: "district",
      adcode: 421024,
      lng: 112.424581,
      lat: 30.042227,
      childrenNum: 0,
      parent: 421e3,
    },
    {
      name: "石首市",
      level: "district",
      adcode: 421081,
      lng: 112.42538,
      lat: 29.720944,
      childrenNum: 0,
      parent: 421e3,
    },
    {
      name: "洪湖市",
      level: "district",
      adcode: 421083,
      lng: 113.475984,
      lat: 29.827256,
      childrenNum: 0,
      parent: 421e3,
    },
    {
      name: "松滋市",
      level: "district",
      adcode: 421087,
      lng: 111.756455,
      lat: 30.174717,
      childrenNum: 0,
      parent: 421e3,
    },
    {
      name: "监利市",
      level: "district",
      adcode: 421088,
      lng: 112.904634,
      lat: 29.840229,
      childrenNum: 0,
      parent: 421e3,
    },
    {
      name: "黄冈市",
      level: "city",
      adcode: 421100,
      lng: 114.872425,
      lat: 30.453722,
      childrenNum: 10,
      parent: 42e4,
    },
    {
      name: "黄州区",
      level: "district",
      adcode: 421102,
      lng: 114.880104,
      lat: 30.434354,
      childrenNum: 0,
      parent: 421100,
    },
    {
      name: "团风县",
      level: "district",
      adcode: 421121,
      lng: 114.872364,
      lat: 30.643225,
      childrenNum: 0,
      parent: 421100,
    },
    {
      name: "红安县",
      level: "district",
      adcode: 421122,
      lng: 114.618134,
      lat: 31.288167,
      childrenNum: 0,
      parent: 421100,
    },
    {
      name: "罗田县",
      level: "district",
      adcode: 421123,
      lng: 115.399149,
      lat: 30.783047,
      childrenNum: 0,
      parent: 421100,
    },
    {
      name: "英山县",
      level: "district",
      adcode: 421124,
      lng: 115.680953,
      lat: 30.734989,
      childrenNum: 0,
      parent: 421100,
    },
    {
      name: "浠水县",
      level: "district",
      adcode: 421125,
      lng: 115.265155,
      lat: 30.452212,
      childrenNum: 0,
      parent: 421100,
    },
    {
      name: "蕲春县",
      level: "district",
      adcode: 421126,
      lng: 115.436423,
      lat: 30.226146,
      childrenNum: 0,
      parent: 421100,
    },
    {
      name: "黄梅县",
      level: "district",
      adcode: 421127,
      lng: 115.944219,
      lat: 30.070453,
      childrenNum: 0,
      parent: 421100,
    },
    {
      name: "麻城市",
      level: "district",
      adcode: 421181,
      lng: 115.008011,
      lat: 31.172917,
      childrenNum: 0,
      parent: 421100,
    },
    {
      name: "武穴市",
      level: "district",
      adcode: 421182,
      lng: 115.595451,
      lat: 29.869602,
      childrenNum: 0,
      parent: 421100,
    },
    {
      name: "咸宁市",
      level: "city",
      adcode: 421200,
      lng: 114.322601,
      lat: 29.84135,
      childrenNum: 6,
      parent: 42e4,
    },
    {
      name: "咸安区",
      level: "district",
      adcode: 421202,
      lng: 114.299002,
      lat: 29.852726,
      childrenNum: 0,
      parent: 421200,
    },
    {
      name: "嘉鱼县",
      level: "district",
      adcode: 421221,
      lng: 113.939249,
      lat: 29.970575,
      childrenNum: 0,
      parent: 421200,
    },
    {
      name: "通城县",
      level: "district",
      adcode: 421222,
      lng: 113.816811,
      lat: 29.2454,
      childrenNum: 0,
      parent: 421200,
    },
    {
      name: "崇阳县",
      level: "district",
      adcode: 421223,
      lng: 114.039484,
      lat: 29.556866,
      childrenNum: 0,
      parent: 421200,
    },
    {
      name: "通山县",
      level: "district",
      adcode: 421224,
      lng: 114.482832,
      lat: 29.606468,
      childrenNum: 0,
      parent: 421200,
    },
    {
      name: "赤壁市",
      level: "district",
      adcode: 421281,
      lng: 113.900385,
      lat: 29.725122,
      childrenNum: 0,
      parent: 421200,
    },
    {
      name: "随州市",
      level: "city",
      adcode: 421300,
      lng: 113.382324,
      lat: 31.690275,
      childrenNum: 3,
      parent: 42e4,
    },
    {
      name: "曾都区",
      level: "district",
      adcode: 421303,
      lng: 113.371052,
      lat: 31.716423,
      childrenNum: 0,
      parent: 421300,
    },
    {
      name: "随县",
      level: "district",
      adcode: 421321,
      lng: 113.29097,
      lat: 31.883233,
      childrenNum: 0,
      parent: 421300,
    },
    {
      name: "广水市",
      level: "district",
      adcode: 421381,
      lng: 113.825977,
      lat: 31.617015,
      childrenNum: 0,
      parent: 421300,
    },
    {
      name: "恩施土家族苗族自治州",
      level: "city",
      adcode: 422800,
      lng: 109.488076,
      lat: 30.272104,
      childrenNum: 8,
      parent: 42e4,
    },
    {
      name: "恩施市",
      level: "district",
      adcode: 422801,
      lng: 109.479572,
      lat: 30.295148,
      childrenNum: 0,
      parent: 422800,
    },
    {
      name: "利川市",
      level: "district",
      adcode: 422802,
      lng: 108.936456,
      lat: 30.290974,
      childrenNum: 0,
      parent: 422800,
    },
    {
      name: "建始县",
      level: "district",
      adcode: 422822,
      lng: 109.722333,
      lat: 30.602195,
      childrenNum: 0,
      parent: 422800,
    },
    {
      name: "巴东县",
      level: "district",
      adcode: 422823,
      lng: 110.340921,
      lat: 31.042854,
      childrenNum: 0,
      parent: 422800,
    },
    {
      name: "宣恩县",
      level: "district",
      adcode: 422825,
      lng: 109.489918,
      lat: 29.986856,
      childrenNum: 0,
      parent: 422800,
    },
    {
      name: "咸丰县",
      level: "district",
      adcode: 422826,
      lng: 109.140163,
      lat: 29.665215,
      childrenNum: 0,
      parent: 422800,
    },
    {
      name: "来凤县",
      level: "district",
      adcode: 422827,
      lng: 109.407697,
      lat: 29.493474,
      childrenNum: 0,
      parent: 422800,
    },
    {
      name: "鹤峰县",
      level: "district",
      adcode: 422828,
      lng: 110.034011,
      lat: 29.890073,
      childrenNum: 0,
      parent: 422800,
    },
    {
      name: "仙桃市",
      level: "city",
      adcode: 429004,
      lng: 113.442973,
      lat: 30.328407,
      childrenNum: 25,
      parent: 42e4,
    },
    {
      name: "潜江市",
      level: "city",
      adcode: 429005,
      lng: 112.900279,
      lat: 30.401954,
      childrenNum: 25,
      parent: 42e4,
    },
    {
      name: "天门市",
      level: "city",
      adcode: 429006,
      lng: 113.166545,
      lat: 30.663706,
      childrenNum: 28,
      parent: 42e4,
    },
    {
      name: "神农架林区",
      level: "city",
      adcode: 429021,
      lng: 110.675879,
      lat: 31.745103,
      childrenNum: 8,
      parent: 42e4,
    },
    {
      name: "湖南省",
      level: "province",
      adcode: 43e4,
      lng: 112.982951,
      lat: 28.116007,
      childrenNum: 14,
      parent: 1e5,
    },
    {
      name: "长沙市",
      level: "city",
      adcode: 430100,
      lng: 112.938882,
      lat: 28.228304,
      childrenNum: 9,
      parent: 43e4,
    },
    {
      name: "芙蓉区",
      level: "district",
      adcode: 430102,
      lng: 113.032605,
      lat: 28.185351,
      childrenNum: 0,
      parent: 430100,
    },
    {
      name: "天心区",
      level: "district",
      adcode: 430103,
      lng: 112.98978,
      lat: 28.114544,
      childrenNum: 0,
      parent: 430100,
    },
    {
      name: "岳麓区",
      level: "district",
      adcode: 430104,
      lng: 112.930116,
      lat: 28.234202,
      childrenNum: 0,
      parent: 430100,
    },
    {
      name: "开福区",
      level: "district",
      adcode: 430105,
      lng: 112.985284,
      lat: 28.257286,
      childrenNum: 0,
      parent: 430100,
    },
    {
      name: "雨花区",
      level: "district",
      adcode: 430111,
      lng: 113.03853,
      lat: 28.135795,
      childrenNum: 0,
      parent: 430100,
    },
    {
      name: "望城区",
      level: "district",
      adcode: 430112,
      lng: 112.83125,
      lat: 28.353221,
      childrenNum: 0,
      parent: 430100,
    },
    {
      name: "长沙县",
      level: "district",
      adcode: 430121,
      lng: 113.080555,
      lat: 28.246821,
      childrenNum: 0,
      parent: 430100,
    },
    {
      name: "浏阳市",
      level: "district",
      adcode: 430181,
      lng: 113.64328,
      lat: 28.163866,
      childrenNum: 0,
      parent: 430100,
    },
    {
      name: "宁乡市",
      level: "district",
      adcode: 430182,
      lng: 112.551887,
      lat: 28.277709,
      childrenNum: 0,
      parent: 430100,
    },
    {
      name: "株洲市",
      level: "city",
      adcode: 430200,
      lng: 113.132783,
      lat: 27.828862,
      childrenNum: 9,
      parent: 43e4,
    },
    {
      name: "荷塘区",
      level: "district",
      adcode: 430202,
      lng: 113.173169,
      lat: 27.856314,
      childrenNum: 0,
      parent: 430200,
    },
    {
      name: "芦淞区",
      level: "district",
      adcode: 430203,
      lng: 113.153455,
      lat: 27.785198,
      childrenNum: 0,
      parent: 430200,
    },
    {
      name: "石峰区",
      level: "district",
      adcode: 430204,
      lng: 113.117763,
      lat: 27.875513,
      childrenNum: 0,
      parent: 430200,
    },
    {
      name: "天元区",
      level: "district",
      adcode: 430211,
      lng: 113.082227,
      lat: 27.826738,
      childrenNum: 0,
      parent: 430200,
    },
    {
      name: "渌口区",
      level: "district",
      adcode: 430212,
      lng: 113.143832,
      lat: 27.699361,
      childrenNum: 0,
      parent: 430200,
    },
    {
      name: "攸县",
      level: "district",
      adcode: 430223,
      lng: 113.397152,
      lat: 27.01516,
      childrenNum: 0,
      parent: 430200,
    },
    {
      name: "茶陵县",
      level: "district",
      adcode: 430224,
      lng: 113.537907,
      lat: 26.777957,
      childrenNum: 0,
      parent: 430200,
    },
    {
      name: "炎陵县",
      level: "district",
      adcode: 430225,
      lng: 113.772665,
      lat: 26.489847,
      childrenNum: 0,
      parent: 430200,
    },
    {
      name: "醴陵市",
      level: "district",
      adcode: 430281,
      lng: 113.497119,
      lat: 27.6457,
      childrenNum: 0,
      parent: 430200,
    },
    {
      name: "湘潭市",
      level: "city",
      adcode: 430300,
      lng: 112.945439,
      lat: 27.83136,
      childrenNum: 5,
      parent: 43e4,
    },
    {
      name: "雨湖区",
      level: "district",
      adcode: 430302,
      lng: 112.907334,
      lat: 27.856115,
      childrenNum: 0,
      parent: 430300,
    },
    {
      name: "岳塘区",
      level: "district",
      adcode: 430304,
      lng: 112.969444,
      lat: 27.872013,
      childrenNum: 0,
      parent: 430300,
    },
    {
      name: "湘潭县",
      level: "district",
      adcode: 430321,
      lng: 112.950767,
      lat: 27.779669,
      childrenNum: 0,
      parent: 430300,
    },
    {
      name: "湘乡市",
      level: "district",
      adcode: 430381,
      lng: 112.550268,
      lat: 27.718655,
      childrenNum: 0,
      parent: 430300,
    },
    {
      name: "韶山市",
      level: "district",
      adcode: 430382,
      lng: 112.525364,
      lat: 27.914796,
      childrenNum: 0,
      parent: 430300,
    },
    {
      name: "衡阳市",
      level: "city",
      adcode: 430400,
      lng: 112.572016,
      lat: 26.894216,
      childrenNum: 12,
      parent: 43e4,
    },
    {
      name: "珠晖区",
      level: "district",
      adcode: 430405,
      lng: 112.620653,
      lat: 26.894796,
      childrenNum: 0,
      parent: 430400,
    },
    {
      name: "雁峰区",
      level: "district",
      adcode: 430406,
      lng: 112.613914,
      lat: 26.840335,
      childrenNum: 0,
      parent: 430400,
    },
    {
      name: "石鼓区",
      level: "district",
      adcode: 430407,
      lng: 112.597937,
      lat: 26.944257,
      childrenNum: 0,
      parent: 430400,
    },
    {
      name: "蒸湘区",
      level: "district",
      adcode: 430408,
      lng: 112.567333,
      lat: 26.912388,
      childrenNum: 0,
      parent: 430400,
    },
    {
      name: "南岳区",
      level: "district",
      adcode: 430412,
      lng: 112.737678,
      lat: 27.231846,
      childrenNum: 0,
      parent: 430400,
    },
    {
      name: "衡阳县",
      level: "district",
      adcode: 430421,
      lng: 112.370649,
      lat: 26.970258,
      childrenNum: 0,
      parent: 430400,
    },
    {
      name: "衡南县",
      level: "district",
      adcode: 430422,
      lng: 112.677572,
      lat: 26.739665,
      childrenNum: 0,
      parent: 430400,
    },
    {
      name: "衡山县",
      level: "district",
      adcode: 430423,
      lng: 112.868361,
      lat: 27.230225,
      childrenNum: 0,
      parent: 430400,
    },
    {
      name: "衡东县",
      level: "district",
      adcode: 430424,
      lng: 112.953113,
      lat: 27.081086,
      childrenNum: 0,
      parent: 430400,
    },
    {
      name: "祁东县",
      level: "district",
      adcode: 430426,
      lng: 112.090319,
      lat: 26.799284,
      childrenNum: 0,
      parent: 430400,
    },
    {
      name: "耒阳市",
      level: "district",
      adcode: 430481,
      lng: 112.859806,
      lat: 26.422149,
      childrenNum: 0,
      parent: 430400,
    },
    {
      name: "常宁市",
      level: "district",
      adcode: 430482,
      lng: 112.399894,
      lat: 26.421717,
      childrenNum: 0,
      parent: 430400,
    },
    {
      name: "邵阳市",
      level: "city",
      adcode: 430500,
      lng: 111.467855,
      lat: 27.239528,
      childrenNum: 12,
      parent: 43e4,
    },
    {
      name: "双清区",
      level: "district",
      adcode: 430502,
      lng: 111.496946,
      lat: 27.232286,
      childrenNum: 0,
      parent: 430500,
    },
    {
      name: "大祥区",
      level: "district",
      adcode: 430503,
      lng: 111.438892,
      lat: 27.222078,
      childrenNum: 0,
      parent: 430500,
    },
    {
      name: "北塔区",
      level: "district",
      adcode: 430511,
      lng: 111.451988,
      lat: 27.246244,
      childrenNum: 0,
      parent: 430500,
    },
    {
      name: "新邵县",
      level: "district",
      adcode: 430522,
      lng: 111.458656,
      lat: 27.320917,
      childrenNum: 0,
      parent: 430500,
    },
    {
      name: "邵阳县",
      level: "district",
      adcode: 430523,
      lng: 111.273872,
      lat: 26.990785,
      childrenNum: 0,
      parent: 430500,
    },
    {
      name: "隆回县",
      level: "district",
      adcode: 430524,
      lng: 111.032437,
      lat: 27.113978,
      childrenNum: 0,
      parent: 430500,
    },
    {
      name: "洞口县",
      level: "district",
      adcode: 430525,
      lng: 110.575962,
      lat: 27.060274,
      childrenNum: 0,
      parent: 430500,
    },
    {
      name: "绥宁县",
      level: "district",
      adcode: 430527,
      lng: 110.155532,
      lat: 26.582027,
      childrenNum: 0,
      parent: 430500,
    },
    {
      name: "新宁县",
      level: "district",
      adcode: 430528,
      lng: 110.857294,
      lat: 26.432913,
      childrenNum: 0,
      parent: 430500,
    },
    {
      name: "城步苗族自治县",
      level: "district",
      adcode: 430529,
      lng: 110.322239,
      lat: 26.390598,
      childrenNum: 0,
      parent: 430500,
    },
    {
      name: "武冈市",
      level: "district",
      adcode: 430581,
      lng: 110.632286,
      lat: 26.727414,
      childrenNum: 0,
      parent: 430500,
    },
    {
      name: "邵东市",
      level: "district",
      adcode: 430582,
      lng: 111.744268,
      lat: 27.259812,
      childrenNum: 0,
      parent: 430500,
    },
    {
      name: "岳阳市",
      level: "city",
      adcode: 430600,
      lng: 113.128922,
      lat: 29.35648,
      childrenNum: 9,
      parent: 43e4,
    },
    {
      name: "岳阳楼区",
      level: "district",
      adcode: 430602,
      lng: 113.129362,
      lat: 29.371356,
      childrenNum: 0,
      parent: 430600,
    },
    {
      name: "云溪区",
      level: "district",
      adcode: 430603,
      lng: 113.272312,
      lat: 29.472745,
      childrenNum: 0,
      parent: 430600,
    },
    {
      name: "君山区",
      level: "district",
      adcode: 430611,
      lng: 113.006434,
      lat: 29.461017,
      childrenNum: 0,
      parent: 430600,
    },
    {
      name: "岳阳县",
      level: "district",
      adcode: 430621,
      lng: 113.116152,
      lat: 29.144681,
      childrenNum: 0,
      parent: 430600,
    },
    {
      name: "华容县",
      level: "district",
      adcode: 430623,
      lng: 112.540448,
      lat: 29.530775,
      childrenNum: 0,
      parent: 430600,
    },
    {
      name: "湘阴县",
      level: "district",
      adcode: 430624,
      lng: 112.909248,
      lat: 28.690123,
      childrenNum: 0,
      parent: 430600,
    },
    {
      name: "平江县",
      level: "district",
      adcode: 430626,
      lng: 113.581296,
      lat: 28.702018,
      childrenNum: 0,
      parent: 430600,
    },
    {
      name: "汨罗市",
      level: "district",
      adcode: 430681,
      lng: 113.067097,
      lat: 28.806937,
      childrenNum: 0,
      parent: 430600,
    },
    {
      name: "临湘市",
      level: "district",
      adcode: 430682,
      lng: 113.450461,
      lat: 29.476687,
      childrenNum: 0,
      parent: 430600,
    },
    {
      name: "常德市",
      level: "city",
      adcode: 430700,
      lng: 111.69905,
      lat: 29.031446,
      childrenNum: 9,
      parent: 43e4,
    },
    {
      name: "武陵区",
      level: "district",
      adcode: 430702,
      lng: 111.683043,
      lat: 29.055332,
      childrenNum: 0,
      parent: 430700,
    },
    {
      name: "鼎城区",
      level: "district",
      adcode: 430703,
      lng: 111.679896,
      lat: 29.017596,
      childrenNum: 0,
      parent: 430700,
    },
    {
      name: "安乡县",
      level: "district",
      adcode: 430721,
      lng: 112.171107,
      lat: 29.41131,
      childrenNum: 0,
      parent: 430700,
    },
    {
      name: "汉寿县",
      level: "district",
      adcode: 430722,
      lng: 111.970725,
      lat: 28.906063,
      childrenNum: 0,
      parent: 430700,
    },
    {
      name: "澧县",
      level: "district",
      adcode: 430723,
      lng: 111.758806,
      lat: 29.633138,
      childrenNum: 0,
      parent: 430700,
    },
    {
      name: "临澧县",
      level: "district",
      adcode: 430724,
      lng: 111.647547,
      lat: 29.440813,
      childrenNum: 0,
      parent: 430700,
    },
    {
      name: "桃源县",
      level: "district",
      adcode: 430725,
      lng: 111.488985,
      lat: 28.90232,
      childrenNum: 0,
      parent: 430700,
    },
    {
      name: "石门县",
      level: "district",
      adcode: 430726,
      lng: 111.380056,
      lat: 29.584344,
      childrenNum: 0,
      parent: 430700,
    },
    {
      name: "津市市",
      level: "district",
      adcode: 430781,
      lng: 111.877957,
      lat: 29.606512,
      childrenNum: 0,
      parent: 430700,
    },
    {
      name: "张家界市",
      level: "city",
      adcode: 430800,
      lng: 110.478887,
      lat: 29.117343,
      childrenNum: 4,
      parent: 43e4,
    },
    {
      name: "永定区",
      level: "district",
      adcode: 430802,
      lng: 110.537379,
      lat: 29.119662,
      childrenNum: 0,
      parent: 430800,
    },
    {
      name: "武陵源区",
      level: "district",
      adcode: 430811,
      lng: 110.550309,
      lat: 29.345721,
      childrenNum: 0,
      parent: 430800,
    },
    {
      name: "慈利县",
      level: "district",
      adcode: 430821,
      lng: 111.139424,
      lat: 29.430429,
      childrenNum: 0,
      parent: 430800,
    },
    {
      name: "桑植县",
      level: "district",
      adcode: 430822,
      lng: 110.204804,
      lat: 29.414112,
      childrenNum: 0,
      parent: 430800,
    },
    {
      name: "益阳市",
      level: "city",
      adcode: 430900,
      lng: 112.355994,
      lat: 28.554853,
      childrenNum: 6,
      parent: 43e4,
    },
    {
      name: "资阳区",
      level: "district",
      adcode: 430902,
      lng: 112.324286,
      lat: 28.59149,
      childrenNum: 0,
      parent: 430900,
    },
    {
      name: "赫山区",
      level: "district",
      adcode: 430903,
      lng: 112.373895,
      lat: 28.58011,
      childrenNum: 0,
      parent: 430900,
    },
    {
      name: "南县",
      level: "district",
      adcode: 430921,
      lng: 112.396323,
      lat: 29.362396,
      childrenNum: 0,
      parent: 430900,
    },
    {
      name: "桃江县",
      level: "district",
      adcode: 430922,
      lng: 112.156432,
      lat: 28.518215,
      childrenNum: 0,
      parent: 430900,
    },
    {
      name: "安化县",
      level: "district",
      adcode: 430923,
      lng: 111.213296,
      lat: 28.374223,
      childrenNum: 0,
      parent: 430900,
    },
    {
      name: "沅江市",
      level: "district",
      adcode: 430981,
      lng: 112.354657,
      lat: 28.845755,
      childrenNum: 0,
      parent: 430900,
    },
    {
      name: "郴州市",
      level: "city",
      adcode: 431e3,
      lng: 113.015517,
      lat: 25.770117,
      childrenNum: 11,
      parent: 43e4,
    },
    {
      name: "北湖区",
      level: "district",
      adcode: 431002,
      lng: 113.010606,
      lat: 25.784632,
      childrenNum: 0,
      parent: 431e3,
    },
    {
      name: "苏仙区",
      level: "district",
      adcode: 431003,
      lng: 113.042364,
      lat: 25.799624,
      childrenNum: 0,
      parent: 431e3,
    },
    {
      name: "桂阳县",
      level: "district",
      adcode: 431021,
      lng: 112.733804,
      lat: 25.75382,
      childrenNum: 0,
      parent: 431e3,
    },
    {
      name: "宜章县",
      level: "district",
      adcode: 431022,
      lng: 112.948806,
      lat: 25.40059,
      childrenNum: 0,
      parent: 431e3,
    },
    {
      name: "永兴县",
      level: "district",
      adcode: 431023,
      lng: 113.116587,
      lat: 26.127155,
      childrenNum: 0,
      parent: 431e3,
    },
    {
      name: "嘉禾县",
      level: "district",
      adcode: 431024,
      lng: 112.379216,
      lat: 25.616025,
      childrenNum: 0,
      parent: 431e3,
    },
    {
      name: "临武县",
      level: "district",
      adcode: 431025,
      lng: 112.563833,
      lat: 25.276459,
      childrenNum: 0,
      parent: 431e3,
    },
    {
      name: "汝城县",
      level: "district",
      adcode: 431026,
      lng: 113.685193,
      lat: 25.533024,
      childrenNum: 0,
      parent: 431e3,
    },
    {
      name: "桂东县",
      level: "district",
      adcode: 431027,
      lng: 113.944792,
      lat: 26.077609,
      childrenNum: 0,
      parent: 431e3,
    },
    {
      name: "安仁县",
      level: "district",
      adcode: 431028,
      lng: 113.269703,
      lat: 26.708569,
      childrenNum: 0,
      parent: 431e3,
    },
    {
      name: "资兴市",
      level: "district",
      adcode: 431081,
      lng: 113.235841,
      lat: 25.977226,
      childrenNum: 0,
      parent: 431e3,
    },
    {
      name: "永州市",
      level: "city",
      adcode: 431100,
      lng: 111.613482,
      lat: 26.419861,
      childrenNum: 11,
      parent: 43e4,
    },
    {
      name: "零陵区",
      level: "district",
      adcode: 431102,
      lng: 111.629806,
      lat: 26.222278,
      childrenNum: 0,
      parent: 431100,
    },
    {
      name: "冷水滩区",
      level: "district",
      adcode: 431103,
      lng: 111.592373,
      lat: 26.461313,
      childrenNum: 0,
      parent: 431100,
    },
    {
      name: "祁阳市",
      level: "district",
      adcode: 431121,
      lng: 111.840253,
      lat: 26.580292,
      childrenNum: 0,
      parent: 431100,
    },
    {
      name: "东安县",
      level: "district",
      adcode: 431122,
      lng: 111.315893,
      lat: 26.392173,
      childrenNum: 0,
      parent: 431100,
    },
    {
      name: "双牌县",
      level: "district",
      adcode: 431123,
      lng: 111.659967,
      lat: 25.961909,
      childrenNum: 0,
      parent: 431100,
    },
    {
      name: "道县",
      level: "district",
      adcode: 431124,
      lng: 111.600866,
      lat: 25.526282,
      childrenNum: 0,
      parent: 431100,
    },
    {
      name: "江永县",
      level: "district",
      adcode: 431125,
      lng: 111.343543,
      lat: 25.274461,
      childrenNum: 0,
      parent: 431100,
    },
    {
      name: "宁远县",
      level: "district",
      adcode: 431126,
      lng: 111.945925,
      lat: 25.570817,
      childrenNum: 0,
      parent: 431100,
    },
    {
      name: "蓝山县",
      level: "district",
      adcode: 431127,
      lng: 112.195842,
      lat: 25.369575,
      childrenNum: 0,
      parent: 431100,
    },
    {
      name: "新田县",
      level: "district",
      adcode: 431128,
      lng: 112.203396,
      lat: 25.903965,
      childrenNum: 0,
      parent: 431100,
    },
    {
      name: "江华瑶族自治县",
      level: "district",
      adcode: 431129,
      lng: 111.57951,
      lat: 25.185257,
      childrenNum: 0,
      parent: 431100,
    },
    {
      name: "怀化市",
      level: "city",
      adcode: 431200,
      lng: 110.001598,
      lat: 27.569813,
      childrenNum: 12,
      parent: 43e4,
    },
    {
      name: "鹤城区",
      level: "district",
      adcode: 431202,
      lng: 110.040099,
      lat: 27.578581,
      childrenNum: 0,
      parent: 431200,
    },
    {
      name: "中方县",
      level: "district",
      adcode: 431221,
      lng: 109.945436,
      lat: 27.440554,
      childrenNum: 0,
      parent: 431200,
    },
    {
      name: "沅陵县",
      level: "district",
      adcode: 431222,
      lng: 110.393782,
      lat: 28.452103,
      childrenNum: 0,
      parent: 431200,
    },
    {
      name: "辰溪县",
      level: "district",
      adcode: 431223,
      lng: 110.183159,
      lat: 28.006235,
      childrenNum: 0,
      parent: 431200,
    },
    {
      name: "溆浦县",
      level: "district",
      adcode: 431224,
      lng: 110.594419,
      lat: 27.908869,
      childrenNum: 0,
      parent: 431200,
    },
    {
      name: "会同县",
      level: "district",
      adcode: 431225,
      lng: 109.734724,
      lat: 26.887156,
      childrenNum: 0,
      parent: 431200,
    },
    {
      name: "麻阳苗族自治县",
      level: "district",
      adcode: 431226,
      lng: 109.817703,
      lat: 27.857666,
      childrenNum: 0,
      parent: 431200,
    },
    {
      name: "新晃侗族自治县",
      level: "district",
      adcode: 431227,
      lng: 109.174808,
      lat: 27.352094,
      childrenNum: 0,
      parent: 431200,
    },
    {
      name: "芷江侗族自治县",
      level: "district",
      adcode: 431228,
      lng: 109.684696,
      lat: 27.443429,
      childrenNum: 0,
      parent: 431200,
    },
    {
      name: "靖州苗族侗族自治县",
      level: "district",
      adcode: 431229,
      lng: 109.696249,
      lat: 26.575111,
      childrenNum: 0,
      parent: 431200,
    },
    {
      name: "通道侗族自治县",
      level: "district",
      adcode: 431230,
      lng: 109.784409,
      lat: 26.158032,
      childrenNum: 0,
      parent: 431200,
    },
    {
      name: "洪江市",
      level: "district",
      adcode: 431281,
      lng: 109.836475,
      lat: 27.209385,
      childrenNum: 0,
      parent: 431200,
    },
    {
      name: "娄底市",
      level: "city",
      adcode: 431300,
      lng: 111.994468,
      lat: 27.699838,
      childrenNum: 5,
      parent: 43e4,
    },
    {
      name: "娄星区",
      level: "district",
      adcode: 431302,
      lng: 112.001922,
      lat: 27.730208,
      childrenNum: 0,
      parent: 431300,
    },
    {
      name: "双峰县",
      level: "district",
      adcode: 431321,
      lng: 112.174623,
      lat: 27.457437,
      childrenNum: 0,
      parent: 431300,
    },
    {
      name: "新化县",
      level: "district",
      adcode: 431322,
      lng: 111.327674,
      lat: 27.725416,
      childrenNum: 0,
      parent: 431300,
    },
    {
      name: "冷水江市",
      level: "district",
      adcode: 431381,
      lng: 111.459199,
      lat: 27.656017,
      childrenNum: 0,
      parent: 431300,
    },
    {
      name: "涟源市",
      level: "district",
      adcode: 431382,
      lng: 111.663837,
      lat: 27.693813,
      childrenNum: 0,
      parent: 431300,
    },
    {
      name: "湘西土家族苗族自治州",
      level: "city",
      adcode: 433100,
      lng: 109.737428,
      lat: 28.312592,
      childrenNum: 8,
      parent: 43e4,
    },
    {
      name: "吉首市",
      level: "district",
      adcode: 433101,
      lng: 109.698348,
      lat: 28.261948,
      childrenNum: 0,
      parent: 433100,
    },
    {
      name: "泸溪县",
      level: "district",
      adcode: 433122,
      lng: 110.219619,
      lat: 28.216109,
      childrenNum: 0,
      parent: 433100,
    },
    {
      name: "凤凰县",
      level: "district",
      adcode: 433123,
      lng: 109.580815,
      lat: 27.957441,
      childrenNum: 0,
      parent: 433100,
    },
    {
      name: "花垣县",
      level: "district",
      adcode: 433124,
      lng: 109.482378,
      lat: 28.57191,
      childrenNum: 0,
      parent: 433100,
    },
    {
      name: "保靖县",
      level: "district",
      adcode: 433125,
      lng: 109.660433,
      lat: 28.699939,
      childrenNum: 0,
      parent: 433100,
    },
    {
      name: "古丈县",
      level: "district",
      adcode: 433126,
      lng: 109.95072,
      lat: 28.616971,
      childrenNum: 0,
      parent: 433100,
    },
    {
      name: "永顺县",
      level: "district",
      adcode: 433127,
      lng: 109.857142,
      lat: 28.979819,
      childrenNum: 0,
      parent: 433100,
    },
    {
      name: "龙山县",
      level: "district",
      adcode: 433130,
      lng: 109.443974,
      lat: 29.457623,
      childrenNum: 0,
      parent: 433100,
    },
    {
      name: "广东省",
      level: "province",
      adcode: 44e4,
      lng: 113.266887,
      lat: 23.133306,
      childrenNum: 21,
      parent: 1e5,
    },
    {
      name: "广州市",
      level: "city",
      adcode: 440100,
      lng: 113.264499,
      lat: 23.130061,
      childrenNum: 11,
      parent: 44e4,
    },
    {
      name: "荔湾区",
      level: "district",
      adcode: 440103,
      lng: 113.218998,
      lat: 23.107123,
      childrenNum: 0,
      parent: 440100,
    },
    {
      name: "越秀区",
      level: "district",
      adcode: 440104,
      lng: 113.267065,
      lat: 23.128673,
      childrenNum: 0,
      parent: 440100,
    },
    {
      name: "海珠区",
      level: "district",
      adcode: 440105,
      lng: 113.317412,
      lat: 23.084003,
      childrenNum: 0,
      parent: 440100,
    },
    {
      name: "天河区",
      level: "district",
      adcode: 440106,
      lng: 113.361597,
      lat: 23.124817,
      childrenNum: 0,
      parent: 440100,
    },
    {
      name: "白云区",
      level: "district",
      adcode: 440111,
      lng: 113.2732,
      lat: 23.157159,
      childrenNum: 0,
      parent: 440100,
    },
    {
      name: "黄埔区",
      level: "district",
      adcode: 440112,
      lng: 113.480613,
      lat: 23.181355,
      childrenNum: 0,
      parent: 440100,
    },
    {
      name: "番禺区",
      level: "district",
      adcode: 440113,
      lng: 113.383917,
      lat: 22.93756,
      childrenNum: 0,
      parent: 440100,
    },
    {
      name: "花都区",
      level: "district",
      adcode: 440114,
      lng: 113.220125,
      lat: 23.404326,
      childrenNum: 0,
      parent: 440100,
    },
    {
      name: "南沙区",
      level: "district",
      adcode: 440115,
      lng: 113.525178,
      lat: 22.801435,
      childrenNum: 0,
      parent: 440100,
    },
    {
      name: "从化区",
      level: "district",
      adcode: 440117,
      lng: 113.586329,
      lat: 23.54915,
      childrenNum: 0,
      parent: 440100,
    },
    {
      name: "增城区",
      level: "district",
      adcode: 440118,
      lng: 113.810734,
      lat: 23.261452,
      childrenNum: 0,
      parent: 440100,
    },
    {
      name: "韶关市",
      level: "city",
      adcode: 440200,
      lng: 113.597324,
      lat: 24.810977,
      childrenNum: 10,
      parent: 44e4,
    },
    {
      name: "武江区",
      level: "district",
      adcode: 440203,
      lng: 113.58792,
      lat: 24.7929,
      childrenNum: 0,
      parent: 440200,
    },
    {
      name: "浈江区",
      level: "district",
      adcode: 440204,
      lng: 113.611077,
      lat: 24.804898,
      childrenNum: 0,
      parent: 440200,
    },
    {
      name: "曲江区",
      level: "district",
      adcode: 440205,
      lng: 113.604591,
      lat: 24.682826,
      childrenNum: 0,
      parent: 440200,
    },
    {
      name: "始兴县",
      level: "district",
      adcode: 440222,
      lng: 114.061998,
      lat: 24.953908,
      childrenNum: 0,
      parent: 440200,
    },
    {
      name: "仁化县",
      level: "district",
      adcode: 440224,
      lng: 113.749175,
      lat: 25.085764,
      childrenNum: 0,
      parent: 440200,
    },
    {
      name: "翁源县",
      level: "district",
      adcode: 440229,
      lng: 114.129986,
      lat: 24.350581,
      childrenNum: 0,
      parent: 440200,
    },
    {
      name: "乳源瑶族自治县",
      level: "district",
      adcode: 440232,
      lng: 113.275875,
      lat: 24.775856,
      childrenNum: 0,
      parent: 440200,
    },
    {
      name: "新丰县",
      level: "district",
      adcode: 440233,
      lng: 114.206641,
      lat: 24.059909,
      childrenNum: 0,
      parent: 440200,
    },
    {
      name: "乐昌市",
      level: "district",
      adcode: 440281,
      lng: 113.347669,
      lat: 25.129892,
      childrenNum: 0,
      parent: 440200,
    },
    {
      name: "南雄市",
      level: "district",
      adcode: 440282,
      lng: 114.31184,
      lat: 25.117653,
      childrenNum: 0,
      parent: 440200,
    },
    {
      name: "深圳市",
      level: "city",
      adcode: 440300,
      lng: 114.057939,
      lat: 22.543527,
      childrenNum: 9,
      parent: 44e4,
    },
    {
      name: "罗湖区",
      level: "district",
      adcode: 440303,
      lng: 114.131611,
      lat: 22.548309,
      childrenNum: 0,
      parent: 440300,
    },
    {
      name: "福田区",
      level: "district",
      adcode: 440304,
      lng: 114.055198,
      lat: 22.520922,
      childrenNum: 0,
      parent: 440300,
    },
    {
      name: "南山区",
      level: "district",
      adcode: 440305,
      lng: 113.930478,
      lat: 22.533191,
      childrenNum: 0,
      parent: 440300,
    },
    {
      name: "宝安区",
      level: "district",
      adcode: 440306,
      lng: 113.883831,
      lat: 22.554986,
      childrenNum: 0,
      parent: 440300,
    },
    {
      name: "龙岗区",
      level: "district",
      adcode: 440307,
      lng: 114.246884,
      lat: 22.720889,
      childrenNum: 0,
      parent: 440300,
    },
    {
      name: "盐田区",
      level: "district",
      adcode: 440308,
      lng: 114.236739,
      lat: 22.557001,
      childrenNum: 0,
      parent: 440300,
    },
    {
      name: "龙华区",
      level: "district",
      adcode: 440309,
      lng: 114.04491,
      lat: 22.696735,
      childrenNum: 0,
      parent: 440300,
    },
    {
      name: "坪山区",
      level: "district",
      adcode: 440310,
      lng: 114.350844,
      lat: 22.708786,
      childrenNum: 0,
      parent: 440300,
    },
    {
      name: "光明区",
      level: "district",
      adcode: 440311,
      lng: 113.936059,
      lat: 22.74875,
      childrenNum: 0,
      parent: 440300,
    },
    {
      name: "珠海市",
      level: "city",
      adcode: 440400,
      lng: 113.576892,
      lat: 22.271644,
      childrenNum: 3,
      parent: 44e4,
    },
    {
      name: "香洲区",
      level: "district",
      adcode: 440402,
      lng: 113.543372,
      lat: 22.265635,
      childrenNum: 0,
      parent: 440400,
    },
    {
      name: "斗门区",
      level: "district",
      adcode: 440403,
      lng: 113.296228,
      lat: 22.209134,
      childrenNum: 0,
      parent: 440400,
    },
    {
      name: "金湾区",
      level: "district",
      adcode: 440404,
      lng: 113.363224,
      lat: 22.146717,
      childrenNum: 0,
      parent: 440400,
    },
    {
      name: "汕头市",
      level: "city",
      adcode: 440500,
      lng: 116.681956,
      lat: 23.354152,
      childrenNum: 7,
      parent: 44e4,
    },
    {
      name: "龙湖区",
      level: "district",
      adcode: 440507,
      lng: 116.716464,
      lat: 23.372211,
      childrenNum: 0,
      parent: 440500,
    },
    {
      name: "金平区",
      level: "district",
      adcode: 440511,
      lng: 116.70341,
      lat: 23.365716,
      childrenNum: 0,
      parent: 440500,
    },
    {
      name: "濠江区",
      level: "district",
      adcode: 440512,
      lng: 116.726701,
      lat: 23.286605,
      childrenNum: 0,
      parent: 440500,
    },
    {
      name: "潮阳区",
      level: "district",
      adcode: 440513,
      lng: 116.601677,
      lat: 23.264923,
      childrenNum: 0,
      parent: 440500,
    },
    {
      name: "潮南区",
      level: "district",
      adcode: 440514,
      lng: 116.439105,
      lat: 23.239196,
      childrenNum: 0,
      parent: 440500,
    },
    {
      name: "澄海区",
      level: "district",
      adcode: 440515,
      lng: 116.755945,
      lat: 23.466314,
      childrenNum: 0,
      parent: 440500,
    },
    {
      name: "南澳县",
      level: "district",
      adcode: 440523,
      lng: 117.023482,
      lat: 23.421658,
      childrenNum: 0,
      parent: 440500,
    },
    {
      name: "佛山市",
      level: "city",
      adcode: 440600,
      lng: 113.121586,
      lat: 23.021351,
      childrenNum: 5,
      parent: 44e4,
    },
    {
      name: "禅城区",
      level: "district",
      adcode: 440604,
      lng: 113.122532,
      lat: 23.009475,
      childrenNum: 0,
      parent: 440600,
    },
    {
      name: "南海区",
      level: "district",
      adcode: 440605,
      lng: 113.143246,
      lat: 23.028875,
      childrenNum: 0,
      parent: 440600,
    },
    {
      name: "顺德区",
      level: "district",
      adcode: 440606,
      lng: 113.293197,
      lat: 22.805413,
      childrenNum: 0,
      parent: 440600,
    },
    {
      name: "三水区",
      level: "district",
      adcode: 440607,
      lng: 112.897271,
      lat: 23.156675,
      childrenNum: 0,
      parent: 440600,
    },
    {
      name: "高明区",
      level: "district",
      adcode: 440608,
      lng: 112.892573,
      lat: 22.900047,
      childrenNum: 0,
      parent: 440600,
    },
    {
      name: "江门市",
      level: "city",
      adcode: 440700,
      lng: 113.081548,
      lat: 22.578948,
      childrenNum: 7,
      parent: 44e4,
    },
    {
      name: "蓬江区",
      level: "district",
      adcode: 440703,
      lng: 113.078914,
      lat: 22.595285,
      childrenNum: 0,
      parent: 440700,
    },
    {
      name: "江海区",
      level: "district",
      adcode: 440704,
      lng: 113.111029,
      lat: 22.561301,
      childrenNum: 0,
      parent: 440700,
    },
    {
      name: "新会区",
      level: "district",
      adcode: 440705,
      lng: 113.034454,
      lat: 22.458519,
      childrenNum: 0,
      parent: 440700,
    },
    {
      name: "台山市",
      level: "district",
      adcode: 440781,
      lng: 112.793812,
      lat: 22.251947,
      childrenNum: 0,
      parent: 440700,
    },
    {
      name: "开平市",
      level: "district",
      adcode: 440783,
      lng: 112.698113,
      lat: 22.377378,
      childrenNum: 0,
      parent: 440700,
    },
    {
      name: "鹤山市",
      level: "district",
      adcode: 440784,
      lng: 112.964203,
      lat: 22.765912,
      childrenNum: 0,
      parent: 440700,
    },
    {
      name: "恩平市",
      level: "district",
      adcode: 440785,
      lng: 112.304904,
      lat: 22.183743,
      childrenNum: 0,
      parent: 440700,
    },
    {
      name: "湛江市",
      level: "city",
      adcode: 440800,
      lng: 110.357538,
      lat: 21.270108,
      childrenNum: 9,
      parent: 44e4,
    },
    {
      name: "赤坎区",
      level: "district",
      adcode: 440802,
      lng: 110.365592,
      lat: 21.265948,
      childrenNum: 0,
      parent: 440800,
    },
    {
      name: "霞山区",
      level: "district",
      adcode: 440803,
      lng: 110.397721,
      lat: 21.192463,
      childrenNum: 0,
      parent: 440800,
    },
    {
      name: "坡头区",
      level: "district",
      adcode: 440804,
      lng: 110.455192,
      lat: 21.244405,
      childrenNum: 0,
      parent: 440800,
    },
    {
      name: "麻章区",
      level: "district",
      adcode: 440811,
      lng: 110.333833,
      lat: 21.26437,
      childrenNum: 0,
      parent: 440800,
    },
    {
      name: "遂溪县",
      level: "district",
      adcode: 440823,
      lng: 110.25043,
      lat: 21.378371,
      childrenNum: 0,
      parent: 440800,
    },
    {
      name: "徐闻县",
      level: "district",
      adcode: 440825,
      lng: 110.17595,
      lat: 20.325969,
      childrenNum: 0,
      parent: 440800,
    },
    {
      name: "廉江市",
      level: "district",
      adcode: 440881,
      lng: 110.286109,
      lat: 21.609988,
      childrenNum: 0,
      parent: 440800,
    },
    {
      name: "雷州市",
      level: "district",
      adcode: 440882,
      lng: 110.097011,
      lat: 20.914548,
      childrenNum: 0,
      parent: 440800,
    },
    {
      name: "吴川市",
      level: "district",
      adcode: 440883,
      lng: 110.779361,
      lat: 21.440763,
      childrenNum: 0,
      parent: 440800,
    },
    {
      name: "茂名市",
      level: "city",
      adcode: 440900,
      lng: 110.925533,
      lat: 21.662728,
      childrenNum: 5,
      parent: 44e4,
    },
    {
      name: "茂南区",
      level: "district",
      adcode: 440902,
      lng: 110.918566,
      lat: 21.641661,
      childrenNum: 0,
      parent: 440900,
    },
    {
      name: "电白区",
      level: "district",
      adcode: 440904,
      lng: 111.013368,
      lat: 21.513946,
      childrenNum: 0,
      parent: 440900,
    },
    {
      name: "高州市",
      level: "district",
      adcode: 440981,
      lng: 110.853169,
      lat: 21.918017,
      childrenNum: 0,
      parent: 440900,
    },
    {
      name: "化州市",
      level: "district",
      adcode: 440982,
      lng: 110.639581,
      lat: 21.664483,
      childrenNum: 0,
      parent: 440900,
    },
    {
      name: "信宜市",
      level: "district",
      adcode: 440983,
      lng: 110.946866,
      lat: 22.354887,
      childrenNum: 0,
      parent: 440900,
    },
    {
      name: "肇庆市",
      level: "city",
      adcode: 441200,
      lng: 112.465245,
      lat: 23.047747,
      childrenNum: 8,
      parent: 44e4,
    },
    {
      name: "端州区",
      level: "district",
      adcode: 441202,
      lng: 112.485577,
      lat: 23.051847,
      childrenNum: 0,
      parent: 441200,
    },
    {
      name: "鼎湖区",
      level: "district",
      adcode: 441203,
      lng: 112.56738,
      lat: 23.159062,
      childrenNum: 0,
      parent: 441200,
    },
    {
      name: "高要区",
      level: "district",
      adcode: 441204,
      lng: 112.458055,
      lat: 23.02474,
      childrenNum: 0,
      parent: 441200,
    },
    {
      name: "广宁县",
      level: "district",
      adcode: 441223,
      lng: 112.440694,
      lat: 23.634808,
      childrenNum: 0,
      parent: 441200,
    },
    {
      name: "怀集县",
      level: "district",
      adcode: 441224,
      lng: 112.166908,
      lat: 23.920806,
      childrenNum: 0,
      parent: 441200,
    },
    {
      name: "封开县",
      level: "district",
      adcode: 441225,
      lng: 111.512177,
      lat: 23.423928,
      childrenNum: 0,
      parent: 441200,
    },
    {
      name: "德庆县",
      level: "district",
      adcode: 441226,
      lng: 111.785544,
      lat: 23.145035,
      childrenNum: 0,
      parent: 441200,
    },
    {
      name: "四会市",
      level: "district",
      adcode: 441284,
      lng: 112.734309,
      lat: 23.326991,
      childrenNum: 0,
      parent: 441200,
    },
    {
      name: "惠州市",
      level: "city",
      adcode: 441300,
      lng: 114.415587,
      lat: 23.112368,
      childrenNum: 5,
      parent: 44e4,
    },
    {
      name: "惠城区",
      level: "district",
      adcode: 441302,
      lng: 114.382526,
      lat: 23.084657,
      childrenNum: 0,
      parent: 441300,
    },
    {
      name: "惠阳区",
      level: "district",
      adcode: 441303,
      lng: 114.456107,
      lat: 22.789431,
      childrenNum: 0,
      parent: 441300,
    },
    {
      name: "博罗县",
      level: "district",
      adcode: 441322,
      lng: 114.289602,
      lat: 23.172587,
      childrenNum: 0,
      parent: 441300,
    },
    {
      name: "惠东县",
      level: "district",
      adcode: 441323,
      lng: 114.720136,
      lat: 22.984831,
      childrenNum: 0,
      parent: 441300,
    },
    {
      name: "龙门县",
      level: "district",
      adcode: 441324,
      lng: 114.254898,
      lat: 23.727873,
      childrenNum: 0,
      parent: 441300,
    },
    {
      name: "梅州市",
      level: "city",
      adcode: 441400,
      lng: 116.122046,
      lat: 24.288832,
      childrenNum: 8,
      parent: 44e4,
    },
    {
      name: "梅江区",
      level: "district",
      adcode: 441402,
      lng: 116.116686,
      lat: 24.31065,
      childrenNum: 0,
      parent: 441400,
    },
    {
      name: "梅县区",
      level: "district",
      adcode: 441403,
      lng: 116.081395,
      lat: 24.266191,
      childrenNum: 0,
      parent: 441400,
    },
    {
      name: "大埔县",
      level: "district",
      adcode: 441422,
      lng: 116.694825,
      lat: 24.347037,
      childrenNum: 0,
      parent: 441400,
    },
    {
      name: "丰顺县",
      level: "district",
      adcode: 441423,
      lng: 116.181895,
      lat: 23.739364,
      childrenNum: 0,
      parent: 441400,
    },
    {
      name: "五华县",
      level: "district",
      adcode: 441424,
      lng: 115.775751,
      lat: 23.932568,
      childrenNum: 0,
      parent: 441400,
    },
    {
      name: "平远县",
      level: "district",
      adcode: 441426,
      lng: 115.891235,
      lat: 24.566928,
      childrenNum: 0,
      parent: 441400,
    },
    {
      name: "蕉岭县",
      level: "district",
      adcode: 441427,
      lng: 116.171477,
      lat: 24.658963,
      childrenNum: 0,
      parent: 441400,
    },
    {
      name: "兴宁市",
      level: "district",
      adcode: 441481,
      lng: 115.731133,
      lat: 24.137296,
      childrenNum: 0,
      parent: 441400,
    },
    {
      name: "汕尾市",
      level: "city",
      adcode: 441500,
      lng: 115.375557,
      lat: 22.787204,
      childrenNum: 4,
      parent: 44e4,
    },
    {
      name: "城区",
      level: "district",
      adcode: 441502,
      lng: 115.36522,
      lat: 22.779204,
      childrenNum: 0,
      parent: 441500,
    },
    {
      name: "海丰县",
      level: "district",
      adcode: 441521,
      lng: 115.322974,
      lat: 22.967212,
      childrenNum: 0,
      parent: 441500,
    },
    {
      name: "陆河县",
      level: "district",
      adcode: 441523,
      lng: 115.659978,
      lat: 23.301557,
      childrenNum: 0,
      parent: 441500,
    },
    {
      name: "陆丰市",
      level: "district",
      adcode: 441581,
      lng: 115.652142,
      lat: 22.91874,
      childrenNum: 0,
      parent: 441500,
    },
    {
      name: "河源市",
      level: "city",
      adcode: 441600,
      lng: 114.700215,
      lat: 23.744276,
      childrenNum: 6,
      parent: 44e4,
    },
    {
      name: "源城区",
      level: "district",
      adcode: 441602,
      lng: 114.703305,
      lat: 23.734055,
      childrenNum: 0,
      parent: 441600,
    },
    {
      name: "紫金县",
      level: "district",
      adcode: 441621,
      lng: 115.183814,
      lat: 23.635597,
      childrenNum: 0,
      parent: 441600,
    },
    {
      name: "龙川县",
      level: "district",
      adcode: 441622,
      lng: 115.26002,
      lat: 24.100599,
      childrenNum: 0,
      parent: 441600,
    },
    {
      name: "连平县",
      level: "district",
      adcode: 441623,
      lng: 114.488358,
      lat: 24.369552,
      childrenNum: 0,
      parent: 441600,
    },
    {
      name: "和平县",
      level: "district",
      adcode: 441624,
      lng: 114.935634,
      lat: 24.469177,
      childrenNum: 0,
      parent: 441600,
    },
    {
      name: "东源县",
      level: "district",
      adcode: 441625,
      lng: 114.7466,
      lat: 23.790079,
      childrenNum: 0,
      parent: 441600,
    },
    {
      name: "阳江市",
      level: "city",
      adcode: 441700,
      lng: 111.98343,
      lat: 21.856853,
      childrenNum: 4,
      parent: 44e4,
    },
    {
      name: "江城区",
      level: "district",
      adcode: 441702,
      lng: 111.95486,
      lat: 21.862451,
      childrenNum: 0,
      parent: 441700,
    },
    {
      name: "阳东区",
      level: "district",
      adcode: 441704,
      lng: 112.005586,
      lat: 21.869081,
      childrenNum: 0,
      parent: 441700,
    },
    {
      name: "阳西县",
      level: "district",
      adcode: 441721,
      lng: 111.617696,
      lat: 21.753935,
      childrenNum: 0,
      parent: 441700,
    },
    {
      name: "阳春市",
      level: "district",
      adcode: 441781,
      lng: 111.791587,
      lat: 22.17041,
      childrenNum: 0,
      parent: 441700,
    },
    {
      name: "清远市",
      level: "city",
      adcode: 441800,
      lng: 113.056098,
      lat: 23.682064,
      childrenNum: 8,
      parent: 44e4,
    },
    {
      name: "清城区",
      level: "district",
      adcode: 441802,
      lng: 113.062612,
      lat: 23.697889,
      childrenNum: 0,
      parent: 441800,
    },
    {
      name: "清新区",
      level: "district",
      adcode: 441803,
      lng: 113.017747,
      lat: 23.734677,
      childrenNum: 0,
      parent: 441800,
    },
    {
      name: "佛冈县",
      level: "district",
      adcode: 441821,
      lng: 113.531559,
      lat: 23.879455,
      childrenNum: 0,
      parent: 441800,
    },
    {
      name: "阳山县",
      level: "district",
      adcode: 441823,
      lng: 112.641199,
      lat: 24.465234,
      childrenNum: 0,
      parent: 441800,
    },
    {
      name: "连山壮族瑶族自治县",
      level: "district",
      adcode: 441825,
      lng: 112.093726,
      lat: 24.570553,
      childrenNum: 0,
      parent: 441800,
    },
    {
      name: "连南瑶族自治县",
      level: "district",
      adcode: 441826,
      lng: 112.287212,
      lat: 24.725953,
      childrenNum: 0,
      parent: 441800,
    },
    {
      name: "英德市",
      level: "district",
      adcode: 441881,
      lng: 113.401827,
      lat: 24.20716,
      childrenNum: 0,
      parent: 441800,
    },
    {
      name: "连州市",
      level: "district",
      adcode: 441882,
      lng: 112.377255,
      lat: 24.780873,
      childrenNum: 0,
      parent: 441800,
    },
    {
      name: "东莞市",
      level: "city",
      adcode: 441900,
      lng: 113.751884,
      lat: 23.021016,
      childrenNum: 35,
      parent: 44e4,
    },
    {
      name: "中山市",
      level: "city",
      adcode: 442e3,
      lng: 113.392517,
      lat: 22.517024,
      childrenNum: 23,
      parent: 44e4,
    },
    {
      name: "潮州市",
      level: "city",
      adcode: 445100,
      lng: 116.621901,
      lat: 23.657662,
      childrenNum: 3,
      parent: 44e4,
    },
    {
      name: "湘桥区",
      level: "district",
      adcode: 445102,
      lng: 116.628343,
      lat: 23.675104,
      childrenNum: 0,
      parent: 445100,
    },
    {
      name: "潮安区",
      level: "district",
      adcode: 445103,
      lng: 116.676971,
      lat: 23.463598,
      childrenNum: 0,
      parent: 445100,
    },
    {
      name: "饶平县",
      level: "district",
      adcode: 445122,
      lng: 117.0045,
      lat: 23.663294,
      childrenNum: 0,
      parent: 445100,
    },
    {
      name: "揭阳市",
      level: "city",
      adcode: 445200,
      lng: 116.372732,
      lat: 23.550968,
      childrenNum: 5,
      parent: 44e4,
    },
    {
      name: "榕城区",
      level: "district",
      adcode: 445202,
      lng: 116.36714,
      lat: 23.525918,
      childrenNum: 0,
      parent: 445200,
    },
    {
      name: "揭东区",
      level: "district",
      adcode: 445203,
      lng: 116.411928,
      lat: 23.567252,
      childrenNum: 0,
      parent: 445200,
    },
    {
      name: "揭西县",
      level: "district",
      adcode: 445222,
      lng: 115.841742,
      lat: 23.431314,
      childrenNum: 0,
      parent: 445200,
    },
    {
      name: "惠来县",
      level: "district",
      adcode: 445224,
      lng: 116.295038,
      lat: 23.033889,
      childrenNum: 0,
      parent: 445200,
    },
    {
      name: "普宁市",
      level: "district",
      adcode: 445281,
      lng: 116.165646,
      lat: 23.297742,
      childrenNum: 0,
      parent: 445200,
    },
    {
      name: "云浮市",
      level: "city",
      adcode: 445300,
      lng: 112.044524,
      lat: 22.915163,
      childrenNum: 5,
      parent: 44e4,
    },
    {
      name: "云城区",
      level: "district",
      adcode: 445302,
      lng: 112.043945,
      lat: 22.92815,
      childrenNum: 0,
      parent: 445300,
    },
    {
      name: "云安区",
      level: "district",
      adcode: 445303,
      lng: 112.002947,
      lat: 23.070334,
      childrenNum: 0,
      parent: 445300,
    },
    {
      name: "新兴县",
      level: "district",
      adcode: 445321,
      lng: 112.225174,
      lat: 22.695915,
      childrenNum: 0,
      parent: 445300,
    },
    {
      name: "郁南县",
      level: "district",
      adcode: 445322,
      lng: 111.535387,
      lat: 23.234561,
      childrenNum: 0,
      parent: 445300,
    },
    {
      name: "罗定市",
      level: "district",
      adcode: 445381,
      lng: 111.569788,
      lat: 22.768345,
      childrenNum: 0,
      parent: 445300,
    },
    {
      name: "广西壮族自治区",
      level: "province",
      adcode: 45e4,
      lng: 108.327537,
      lat: 22.816659,
      childrenNum: 14,
      parent: 1e5,
    },
    {
      name: "南宁市",
      level: "city",
      adcode: 450100,
      lng: 108.366407,
      lat: 22.8177,
      childrenNum: 12,
      parent: 45e4,
    },
    {
      name: "兴宁区",
      level: "district",
      adcode: 450102,
      lng: 108.368071,
      lat: 22.85354,
      childrenNum: 0,
      parent: 450100,
    },
    {
      name: "青秀区",
      level: "district",
      adcode: 450103,
      lng: 108.495204,
      lat: 22.785833,
      childrenNum: 0,
      parent: 450100,
    },
    {
      name: "江南区",
      level: "district",
      adcode: 450105,
      lng: 108.273206,
      lat: 22.781166,
      childrenNum: 0,
      parent: 450100,
    },
    {
      name: "西乡塘区",
      level: "district",
      adcode: 450107,
      lng: 108.31344,
      lat: 22.833852,
      childrenNum: 0,
      parent: 450100,
    },
    {
      name: "良庆区",
      level: "district",
      adcode: 450108,
      lng: 108.393889,
      lat: 22.753613,
      childrenNum: 0,
      parent: 450100,
    },
    {
      name: "邕宁区",
      level: "district",
      adcode: 450109,
      lng: 108.487438,
      lat: 22.758633,
      childrenNum: 0,
      parent: 450100,
    },
    {
      name: "武鸣区",
      level: "district",
      adcode: 450110,
      lng: 108.274869,
      lat: 23.159257,
      childrenNum: 0,
      parent: 450100,
    },
    {
      name: "隆安县",
      level: "district",
      adcode: 450123,
      lng: 107.695721,
      lat: 23.166356,
      childrenNum: 0,
      parent: 450100,
    },
    {
      name: "马山县",
      level: "district",
      adcode: 450124,
      lng: 108.177764,
      lat: 23.708448,
      childrenNum: 0,
      parent: 450100,
    },
    {
      name: "上林县",
      level: "district",
      adcode: 450125,
      lng: 108.605089,
      lat: 23.432451,
      childrenNum: 0,
      parent: 450100,
    },
    {
      name: "宾阳县",
      level: "district",
      adcode: 450126,
      lng: 108.810336,
      lat: 23.217771,
      childrenNum: 0,
      parent: 450100,
    },
    {
      name: "横州市",
      level: "district",
      adcode: 450127,
      lng: 109.262448,
      lat: 22.681257,
      childrenNum: 0,
      parent: 450100,
    },
    {
      name: "柳州市",
      level: "city",
      adcode: 450200,
      lng: 109.428071,
      lat: 24.326442,
      childrenNum: 10,
      parent: 45e4,
    },
    {
      name: "城中区",
      level: "district",
      adcode: 450202,
      lng: 109.427398,
      lat: 24.366964,
      childrenNum: 0,
      parent: 450200,
    },
    {
      name: "鱼峰区",
      level: "district",
      adcode: 450203,
      lng: 109.452781,
      lat: 24.318276,
      childrenNum: 0,
      parent: 450200,
    },
    {
      name: "柳南区",
      level: "district",
      adcode: 450204,
      lng: 109.385504,
      lat: 24.336229,
      childrenNum: 0,
      parent: 450200,
    },
    {
      name: "柳北区",
      level: "district",
      adcode: 450205,
      lng: 109.402009,
      lat: 24.362611,
      childrenNum: 0,
      parent: 450200,
    },
    {
      name: "柳江区",
      level: "district",
      adcode: 450206,
      lng: 109.326365,
      lat: 24.255644,
      childrenNum: 0,
      parent: 450200,
    },
    {
      name: "柳城县",
      level: "district",
      adcode: 450222,
      lng: 109.267125,
      lat: 24.654329,
      childrenNum: 0,
      parent: 450200,
    },
    {
      name: "鹿寨县",
      level: "district",
      adcode: 450223,
      lng: 109.750527,
      lat: 24.472897,
      childrenNum: 0,
      parent: 450200,
    },
    {
      name: "融安县",
      level: "district",
      adcode: 450224,
      lng: 109.397538,
      lat: 25.224549,
      childrenNum: 0,
      parent: 450200,
    },
    {
      name: "融水苗族自治县",
      level: "district",
      adcode: 450225,
      lng: 109.256609,
      lat: 25.066624,
      childrenNum: 0,
      parent: 450200,
    },
    {
      name: "三江侗族自治县",
      level: "district",
      adcode: 450226,
      lng: 109.607675,
      lat: 25.783197,
      childrenNum: 0,
      parent: 450200,
    },
    {
      name: "桂林市",
      level: "city",
      adcode: 450300,
      lng: 110.179752,
      lat: 25.235615,
      childrenNum: 17,
      parent: 45e4,
    },
    {
      name: "秀峰区",
      level: "district",
      adcode: 450302,
      lng: 110.264102,
      lat: 25.273954,
      childrenNum: 0,
      parent: 450300,
    },
    {
      name: "叠彩区",
      level: "district",
      adcode: 450303,
      lng: 110.301489,
      lat: 25.314158,
      childrenNum: 0,
      parent: 450300,
    },
    {
      name: "象山区",
      level: "district",
      adcode: 450304,
      lng: 110.281223,
      lat: 25.261585,
      childrenNum: 0,
      parent: 450300,
    },
    {
      name: "七星区",
      level: "district",
      adcode: 450305,
      lng: 110.317576,
      lat: 25.253093,
      childrenNum: 0,
      parent: 450300,
    },
    {
      name: "雁山区",
      level: "district",
      adcode: 450311,
      lng: 110.286611,
      lat: 25.101798,
      childrenNum: 0,
      parent: 450300,
    },
    {
      name: "临桂区",
      level: "district",
      adcode: 450312,
      lng: 110.212425,
      lat: 25.238556,
      childrenNum: 0,
      parent: 450300,
    },
    {
      name: "阳朔县",
      level: "district",
      adcode: 450321,
      lng: 110.496305,
      lat: 24.778785,
      childrenNum: 0,
      parent: 450300,
    },
    {
      name: "灵川县",
      level: "district",
      adcode: 450323,
      lng: 110.319837,
      lat: 25.3948,
      childrenNum: 0,
      parent: 450300,
    },
    {
      name: "全州县",
      level: "district",
      adcode: 450324,
      lng: 111.087089,
      lat: 25.94939,
      childrenNum: 0,
      parent: 450300,
    },
    {
      name: "兴安县",
      level: "district",
      adcode: 450325,
      lng: 110.672013,
      lat: 25.612576,
      childrenNum: 0,
      parent: 450300,
    },
    {
      name: "永福县",
      level: "district",
      adcode: 450326,
      lng: 109.982974,
      lat: 24.980447,
      childrenNum: 0,
      parent: 450300,
    },
    {
      name: "灌阳县",
      level: "district",
      adcode: 450327,
      lng: 111.160764,
      lat: 25.489419,
      childrenNum: 0,
      parent: 450300,
    },
    {
      name: "龙胜各族自治县",
      level: "district",
      adcode: 450328,
      lng: 110.011662,
      lat: 25.79803,
      childrenNum: 0,
      parent: 450300,
    },
    {
      name: "资源县",
      level: "district",
      adcode: 450329,
      lng: 110.652612,
      lat: 26.042452,
      childrenNum: 0,
      parent: 450300,
    },
    {
      name: "平乐县",
      level: "district",
      adcode: 450330,
      lng: 110.632867,
      lat: 24.622814,
      childrenNum: 0,
      parent: 450300,
    },
    {
      name: "恭城瑶族自治县",
      level: "district",
      adcode: 450332,
      lng: 110.82841,
      lat: 24.831581,
      childrenNum: 0,
      parent: 450300,
    },
    {
      name: "荔浦市",
      level: "district",
      adcode: 450381,
      lng: 110.395232,
      lat: 24.48843,
      childrenNum: 0,
      parent: 450300,
    },
    {
      name: "梧州市",
      level: "city",
      adcode: 450400,
      lng: 111.279022,
      lat: 23.476733,
      childrenNum: 7,
      parent: 45e4,
    },
    {
      name: "万秀区",
      level: "district",
      adcode: 450403,
      lng: 111.318065,
      lat: 23.470543,
      childrenNum: 0,
      parent: 450400,
    },
    {
      name: "长洲区",
      level: "district",
      adcode: 450405,
      lng: 111.274276,
      lat: 23.486279,
      childrenNum: 0,
      parent: 450400,
    },
    {
      name: "龙圩区",
      level: "district",
      adcode: 450406,
      lng: 111.247514,
      lat: 23.414869,
      childrenNum: 0,
      parent: 450400,
    },
    {
      name: "苍梧县",
      level: "district",
      adcode: 450421,
      lng: 111.547244,
      lat: 23.868208,
      childrenNum: 0,
      parent: 450400,
    },
    {
      name: "藤县",
      level: "district",
      adcode: 450422,
      lng: 110.914606,
      lat: 23.375538,
      childrenNum: 0,
      parent: 450400,
    },
    {
      name: "蒙山县",
      level: "district",
      adcode: 450423,
      lng: 110.525003,
      lat: 24.193567,
      childrenNum: 0,
      parent: 450400,
    },
    {
      name: "岑溪市",
      level: "district",
      adcode: 450481,
      lng: 110.994955,
      lat: 22.918327,
      childrenNum: 0,
      parent: 450400,
    },
    {
      name: "北海市",
      level: "city",
      adcode: 450500,
      lng: 109.120248,
      lat: 21.481305,
      childrenNum: 4,
      parent: 45e4,
    },
    {
      name: "海城区",
      level: "district",
      adcode: 450502,
      lng: 109.117256,
      lat: 21.474914,
      childrenNum: 0,
      parent: 450500,
    },
    {
      name: "银海区",
      level: "district",
      adcode: 450503,
      lng: 109.139689,
      lat: 21.449729,
      childrenNum: 0,
      parent: 450500,
    },
    {
      name: "铁山港区",
      level: "district",
      adcode: 450512,
      lng: 109.422099,
      lat: 21.529878,
      childrenNum: 0,
      parent: 450500,
    },
    {
      name: "合浦县",
      level: "district",
      adcode: 450521,
      lng: 109.207236,
      lat: 21.66132,
      childrenNum: 0,
      parent: 450500,
    },
    {
      name: "防城港市",
      level: "city",
      adcode: 450600,
      lng: 108.35467,
      lat: 21.686732,
      childrenNum: 4,
      parent: 45e4,
    },
    {
      name: "港口区",
      level: "district",
      adcode: 450602,
      lng: 108.380273,
      lat: 21.643426,
      childrenNum: 0,
      parent: 450600,
    },
    {
      name: "防城区",
      level: "district",
      adcode: 450603,
      lng: 108.353978,
      lat: 21.768826,
      childrenNum: 0,
      parent: 450600,
    },
    {
      name: "上思县",
      level: "district",
      adcode: 450621,
      lng: 107.983627,
      lat: 22.153671,
      childrenNum: 0,
      parent: 450600,
    },
    {
      name: "东兴市",
      level: "district",
      adcode: 450681,
      lng: 107.971828,
      lat: 21.547821,
      childrenNum: 0,
      parent: 450600,
    },
    {
      name: "钦州市",
      level: "city",
      adcode: 450700,
      lng: 108.654355,
      lat: 21.980894,
      childrenNum: 4,
      parent: 45e4,
    },
    {
      name: "钦南区",
      level: "district",
      adcode: 450702,
      lng: 108.657427,
      lat: 21.940438,
      childrenNum: 0,
      parent: 450700,
    },
    {
      name: "钦北区",
      level: "district",
      adcode: 450703,
      lng: 108.638738,
      lat: 22.0024,
      childrenNum: 0,
      parent: 450700,
    },
    {
      name: "灵山县",
      level: "district",
      adcode: 450721,
      lng: 109.290698,
      lat: 22.416671,
      childrenNum: 0,
      parent: 450700,
    },
    {
      name: "浦北县",
      level: "district",
      adcode: 450722,
      lng: 109.556232,
      lat: 22.271902,
      childrenNum: 0,
      parent: 450700,
    },
    {
      name: "贵港市",
      level: "city",
      adcode: 450800,
      lng: 109.598903,
      lat: 23.11182,
      childrenNum: 5,
      parent: 45e4,
    },
    {
      name: "港北区",
      level: "district",
      adcode: 450802,
      lng: 109.572227,
      lat: 23.11136,
      childrenNum: 0,
      parent: 450800,
    },
    {
      name: "港南区",
      level: "district",
      adcode: 450803,
      lng: 109.599357,
      lat: 23.075816,
      childrenNum: 0,
      parent: 450800,
    },
    {
      name: "覃塘区",
      level: "district",
      adcode: 450804,
      lng: 109.452668,
      lat: 23.127405,
      childrenNum: 0,
      parent: 450800,
    },
    {
      name: "平南县",
      level: "district",
      adcode: 450821,
      lng: 110.392489,
      lat: 23.540413,
      childrenNum: 0,
      parent: 450800,
    },
    {
      name: "桂平市",
      level: "district",
      adcode: 450881,
      lng: 110.079315,
      lat: 23.394208,
      childrenNum: 0,
      parent: 450800,
    },
    {
      name: "玉林市",
      level: "city",
      adcode: 450900,
      lng: 110.18097,
      lat: 22.654001,
      childrenNum: 7,
      parent: 45e4,
    },
    {
      name: "玉州区",
      level: "district",
      adcode: 450902,
      lng: 110.150717,
      lat: 22.628476,
      childrenNum: 0,
      parent: 450900,
    },
    {
      name: "福绵区",
      level: "district",
      adcode: 450903,
      lng: 110.059564,
      lat: 22.585316,
      childrenNum: 0,
      parent: 450900,
    },
    {
      name: "容县",
      level: "district",
      adcode: 450921,
      lng: 110.558093,
      lat: 22.85844,
      childrenNum: 0,
      parent: 450900,
    },
    {
      name: "陆川县",
      level: "district",
      adcode: 450922,
      lng: 110.26412,
      lat: 22.321563,
      childrenNum: 0,
      parent: 450900,
    },
    {
      name: "博白县",
      level: "district",
      adcode: 450923,
      lng: 109.975856,
      lat: 22.273539,
      childrenNum: 0,
      parent: 450900,
    },
    {
      name: "兴业县",
      level: "district",
      adcode: 450924,
      lng: 109.875223,
      lat: 22.736395,
      childrenNum: 0,
      parent: 450900,
    },
    {
      name: "北流市",
      level: "district",
      adcode: 450981,
      lng: 110.353765,
      lat: 22.708415,
      childrenNum: 0,
      parent: 450900,
    },
    {
      name: "百色市",
      level: "city",
      adcode: 451e3,
      lng: 106.61869,
      lat: 23.90307,
      childrenNum: 12,
      parent: 45e4,
    },
    {
      name: "右江区",
      level: "district",
      adcode: 451002,
      lng: 106.618151,
      lat: 23.900804,
      childrenNum: 0,
      parent: 451e3,
    },
    {
      name: "田阳区",
      level: "district",
      adcode: 451003,
      lng: 106.915424,
      lat: 23.735631,
      childrenNum: 0,
      parent: 451e3,
    },
    {
      name: "田东县",
      level: "district",
      adcode: 451022,
      lng: 107.125609,
      lat: 23.596706,
      childrenNum: 0,
      parent: 451e3,
    },
    {
      name: "德保县",
      level: "district",
      adcode: 451024,
      lng: 106.615087,
      lat: 23.324084,
      childrenNum: 0,
      parent: 451e3,
    },
    {
      name: "那坡县",
      level: "district",
      adcode: 451026,
      lng: 105.83234,
      lat: 23.387997,
      childrenNum: 0,
      parent: 451e3,
    },
    {
      name: "凌云县",
      level: "district",
      adcode: 451027,
      lng: 106.56114,
      lat: 24.347444,
      childrenNum: 0,
      parent: 451e3,
    },
    {
      name: "乐业县",
      level: "district",
      adcode: 451028,
      lng: 106.556564,
      lat: 24.776812,
      childrenNum: 0,
      parent: 451e3,
    },
    {
      name: "田林县",
      level: "district",
      adcode: 451029,
      lng: 106.22874,
      lat: 24.294627,
      childrenNum: 0,
      parent: 451e3,
    },
    {
      name: "西林县",
      level: "district",
      adcode: 451030,
      lng: 105.097229,
      lat: 24.50762,
      childrenNum: 0,
      parent: 451e3,
    },
    {
      name: "隆林各族自治县",
      level: "district",
      adcode: 451031,
      lng: 105.343816,
      lat: 24.770649,
      childrenNum: 0,
      parent: 451e3,
    },
    {
      name: "靖西市",
      level: "district",
      adcode: 451081,
      lng: 106.417666,
      lat: 23.134375,
      childrenNum: 0,
      parent: 451e3,
    },
    {
      name: "平果市",
      level: "district",
      adcode: 451082,
      lng: 107.589768,
      lat: 23.329815,
      childrenNum: 0,
      parent: 451e3,
    },
    {
      name: "贺州市",
      level: "city",
      adcode: 451100,
      lng: 111.567216,
      lat: 24.404182,
      childrenNum: 5,
      parent: 45e4,
    },
    {
      name: "八步区",
      level: "district",
      adcode: 451102,
      lng: 111.552029,
      lat: 24.411822,
      childrenNum: 0,
      parent: 451100,
    },
    {
      name: "平桂区",
      level: "district",
      adcode: 451103,
      lng: 111.479839,
      lat: 24.453094,
      childrenNum: 0,
      parent: 451100,
    },
    {
      name: "昭平县",
      level: "district",
      adcode: 451121,
      lng: 110.811158,
      lat: 24.169675,
      childrenNum: 0,
      parent: 451100,
    },
    {
      name: "钟山县",
      level: "district",
      adcode: 451122,
      lng: 111.303085,
      lat: 24.526041,
      childrenNum: 0,
      parent: 451100,
    },
    {
      name: "富川瑶族自治县",
      level: "district",
      adcode: 451123,
      lng: 111.296012,
      lat: 24.811601,
      childrenNum: 0,
      parent: 451100,
    },
    {
      name: "河池市",
      level: "city",
      adcode: 451200,
      lng: 108.085244,
      lat: 24.692906,
      childrenNum: 11,
      parent: 45e4,
    },
    {
      name: "金城江区",
      level: "district",
      adcode: 451202,
      lng: 108.037384,
      lat: 24.689475,
      childrenNum: 0,
      parent: 451200,
    },
    {
      name: "宜州区",
      level: "district",
      adcode: 451203,
      lng: 108.611303,
      lat: 24.500981,
      childrenNum: 0,
      parent: 451200,
    },
    {
      name: "南丹县",
      level: "district",
      adcode: 451221,
      lng: 107.540578,
      lat: 24.975066,
      childrenNum: 0,
      parent: 451200,
    },
    {
      name: "天峨县",
      level: "district",
      adcode: 451222,
      lng: 107.172287,
      lat: 24.999181,
      childrenNum: 0,
      parent: 451200,
    },
    {
      name: "凤山县",
      level: "district",
      adcode: 451223,
      lng: 107.042157,
      lat: 24.546913,
      childrenNum: 0,
      parent: 451200,
    },
    {
      name: "东兰县",
      level: "district",
      adcode: 451224,
      lng: 107.374259,
      lat: 24.510698,
      childrenNum: 0,
      parent: 451200,
    },
    {
      name: "罗城仫佬族自治县",
      level: "district",
      adcode: 451225,
      lng: 108.904613,
      lat: 24.777501,
      childrenNum: 0,
      parent: 451200,
    },
    {
      name: "环江毛南族自治县",
      level: "district",
      adcode: 451226,
      lng: 108.258426,
      lat: 24.825923,
      childrenNum: 0,
      parent: 451200,
    },
    {
      name: "巴马瑶族自治县",
      level: "district",
      adcode: 451227,
      lng: 107.258671,
      lat: 24.142216,
      childrenNum: 0,
      parent: 451200,
    },
    {
      name: "都安瑶族自治县",
      level: "district",
      adcode: 451228,
      lng: 108.105229,
      lat: 23.932704,
      childrenNum: 0,
      parent: 451200,
    },
    {
      name: "大化瑶族自治县",
      level: "district",
      adcode: 451229,
      lng: 107.998151,
      lat: 23.735699,
      childrenNum: 0,
      parent: 451200,
    },
    {
      name: "来宾市",
      level: "city",
      adcode: 451300,
      lng: 109.221243,
      lat: 23.750105,
      childrenNum: 6,
      parent: 45e4,
    },
    {
      name: "兴宾区",
      level: "district",
      adcode: 451302,
      lng: 109.183284,
      lat: 23.727647,
      childrenNum: 0,
      parent: 451300,
    },
    {
      name: "忻城县",
      level: "district",
      adcode: 451321,
      lng: 108.665641,
      lat: 24.066176,
      childrenNum: 0,
      parent: 451300,
    },
    {
      name: "象州县",
      level: "district",
      adcode: 451322,
      lng: 109.704852,
      lat: 23.973832,
      childrenNum: 0,
      parent: 451300,
    },
    {
      name: "武宣县",
      level: "district",
      adcode: 451323,
      lng: 109.663153,
      lat: 23.594444,
      childrenNum: 0,
      parent: 451300,
    },
    {
      name: "金秀瑶族自治县",
      level: "district",
      adcode: 451324,
      lng: 110.190354,
      lat: 24.130509,
      childrenNum: 0,
      parent: 451300,
    },
    {
      name: "合山市",
      level: "district",
      adcode: 451381,
      lng: 108.885829,
      lat: 23.807032,
      childrenNum: 0,
      parent: 451300,
    },
    {
      name: "崇左市",
      level: "city",
      adcode: 451400,
      lng: 107.364973,
      lat: 22.377139,
      childrenNum: 7,
      parent: 45e4,
    },
    {
      name: "江州区",
      level: "district",
      adcode: 451402,
      lng: 107.353694,
      lat: 22.40609,
      childrenNum: 0,
      parent: 451400,
    },
    {
      name: "扶绥县",
      level: "district",
      adcode: 451421,
      lng: 107.90389,
      lat: 22.635542,
      childrenNum: 0,
      parent: 451400,
    },
    {
      name: "宁明县",
      level: "district",
      adcode: 451422,
      lng: 107.076394,
      lat: 22.140242,
      childrenNum: 0,
      parent: 451400,
    },
    {
      name: "龙州县",
      level: "district",
      adcode: 451423,
      lng: 106.854001,
      lat: 22.343591,
      childrenNum: 0,
      parent: 451400,
    },
    {
      name: "大新县",
      level: "district",
      adcode: 451424,
      lng: 107.200654,
      lat: 22.829287,
      childrenNum: 0,
      parent: 451400,
    },
    {
      name: "天等县",
      level: "district",
      adcode: 451425,
      lng: 107.143539,
      lat: 23.080818,
      childrenNum: 0,
      parent: 451400,
    },
    {
      name: "凭祥市",
      level: "district",
      adcode: 451481,
      lng: 106.766715,
      lat: 22.094421,
      childrenNum: 0,
      parent: 451400,
    },
    {
      name: "海南省",
      level: "province",
      adcode: 46e4,
      lng: 110.348781,
      lat: 20.018639,
      childrenNum: 19,
      parent: 1e5,
    },
    {
      name: "海口市",
      level: "city",
      adcode: 460100,
      lng: 110.198418,
      lat: 20.045805,
      childrenNum: 4,
      parent: 46e4,
    },
    {
      name: "秀英区",
      level: "district",
      adcode: 460105,
      lng: 110.293566,
      lat: 20.007703,
      childrenNum: 0,
      parent: 460100,
    },
    {
      name: "龙华区",
      level: "district",
      adcode: 460106,
      lng: 110.328628,
      lat: 20.030843,
      childrenNum: 0,
      parent: 460100,
    },
    {
      name: "琼山区",
      level: "district",
      adcode: 460107,
      lng: 110.384318,
      lat: 19.984293,
      childrenNum: 0,
      parent: 460100,
    },
    {
      name: "美兰区",
      level: "district",
      adcode: 460108,
      lng: 110.366359,
      lat: 20.028983,
      childrenNum: 0,
      parent: 460100,
    },
    {
      name: "三亚市",
      level: "city",
      adcode: 460200,
      lng: 109.511709,
      lat: 18.252865,
      childrenNum: 4,
      parent: 46e4,
    },
    {
      name: "海棠区",
      level: "district",
      adcode: 460202,
      lng: 109.735676,
      lat: 18.384177,
      childrenNum: 0,
      parent: 460200,
    },
    {
      name: "吉阳区",
      level: "district",
      adcode: 460203,
      lng: 109.578238,
      lat: 18.28146,
      childrenNum: 0,
      parent: 460200,
    },
    {
      name: "天涯区",
      level: "district",
      adcode: 460204,
      lng: 109.452325,
      lat: 18.298975,
      childrenNum: 0,
      parent: 460200,
    },
    {
      name: "崖州区",
      level: "district",
      adcode: 460205,
      lng: 109.172298,
      lat: 18.357572,
      childrenNum: 0,
      parent: 460200,
    },
    {
      name: "三沙市",
      level: "city",
      adcode: 460300,
      lng: 112.338649,
      lat: 16.831004,
      childrenNum: 2,
      parent: 46e4,
    },
    {
      name: "西沙区",
      level: "district",
      adcode: 460301,
      lng: 112.346961,
      lat: 16.834372,
      childrenNum: 0,
      parent: 460300,
    },
    {
      name: "南沙区",
      level: "district",
      adcode: 460302,
      lng: 112.896229,
      lat: 9.548531,
      childrenNum: 0,
      parent: 460300,
    },
    {
      name: "儋州市",
      level: "city",
      adcode: 460400,
      lng: 109.580812,
      lat: 19.520948,
      childrenNum: 23,
      parent: 46e4,
    },
    {
      name: "五指山市",
      level: "city",
      adcode: 469001,
      lng: 109.516784,
      lat: 18.774827,
      childrenNum: 8,
      parent: 46e4,
    },
    {
      name: "琼海市",
      level: "city",
      adcode: 469002,
      lng: 110.474524,
      lat: 19.259112,
      childrenNum: 16,
      parent: 46e4,
    },
    {
      name: "文昌市",
      level: "city",
      adcode: 469005,
      lng: 110.797473,
      lat: 19.544234,
      childrenNum: 20,
      parent: 46e4,
    },
    {
      name: "万宁市",
      level: "city",
      adcode: 469006,
      lng: 110.392605,
      lat: 18.793697,
      childrenNum: 17,
      parent: 46e4,
    },
    {
      name: "东方市",
      level: "city",
      adcode: 469007,
      lng: 108.651829,
      lat: 19.095187,
      childrenNum: 12,
      parent: 46e4,
    },
    {
      name: "定安县",
      level: "city",
      adcode: 469021,
      lng: 110.358001,
      lat: 19.681215,
      childrenNum: 13,
      parent: 46e4,
    },
    {
      name: "屯昌县",
      level: "city",
      adcode: 469022,
      lng: 110.101667,
      lat: 19.351662,
      childrenNum: 10,
      parent: 46e4,
    },
    {
      name: "澄迈县",
      level: "city",
      adcode: 469023,
      lng: 110.007497,
      lat: 19.738885,
      childrenNum: 17,
      parent: 46e4,
    },
    {
      name: "临高县",
      level: "city",
      adcode: 469024,
      lng: 109.690508,
      lat: 19.912025,
      childrenNum: 12,
      parent: 46e4,
    },
    {
      name: "白沙黎族自治县",
      level: "city",
      adcode: 469025,
      lng: 109.4429,
      lat: 19.221641,
      childrenNum: 14,
      parent: 46e4,
    },
    {
      name: "昌江黎族自治县",
      level: "city",
      adcode: 469026,
      lng: 109.055783,
      lat: 19.298139,
      childrenNum: 11,
      parent: 46e4,
    },
    {
      name: "乐东黎族自治县",
      level: "city",
      adcode: 469027,
      lng: 109.173384,
      lat: 18.750063,
      childrenNum: 16,
      parent: 46e4,
    },
    {
      name: "陵水黎族自治县",
      level: "city",
      adcode: 469028,
      lng: 110.037553,
      lat: 18.506045,
      childrenNum: 14,
      parent: 46e4,
    },
    {
      name: "保亭黎族苗族自治县",
      level: "city",
      adcode: 469029,
      lng: 109.700279,
      lat: 18.640339,
      childrenNum: 13,
      parent: 46e4,
    },
    {
      name: "琼中黎族苗族自治县",
      level: "city",
      adcode: 469030,
      lng: 109.838423,
      lat: 19.03327,
      childrenNum: 15,
      parent: 46e4,
    },
    {
      name: "重庆市",
      level: "province",
      adcode: 5e5,
      lng: 106.550483,
      lat: 29.563707,
      childrenNum: 1,
      parent: 1e5,
    },
    {
      level: "city",
      adcode: 500100,
      lng: 106.550483,
      lat: 29.563707,
      childrenNum: 38,
      parent: 5e5,
      name: "重庆市",
    },
    {
      name: "万州区",
      level: "district",
      adcode: 500101,
      lng: 108.408591,
      lat: 30.807621,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "涪陵区",
      level: "district",
      adcode: 500102,
      lng: 107.246521,
      lat: 29.752475,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "渝中区",
      level: "district",
      adcode: 500103,
      lng: 106.568955,
      lat: 29.552642,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "大渡口区",
      level: "district",
      adcode: 500104,
      lng: 106.482299,
      lat: 29.484464,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "江北区",
      level: "district",
      adcode: 500105,
      lng: 106.574395,
      lat: 29.606224,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "沙坪坝区",
      level: "district",
      adcode: 500106,
      lng: 106.456939,
      lat: 29.541017,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "九龙坡区",
      level: "district",
      adcode: 500107,
      lng: 106.510515,
      lat: 29.502325,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "南岸区",
      level: "district",
      adcode: 500108,
      lng: 106.644254,
      lat: 29.50109,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "北碚区",
      level: "district",
      adcode: 500109,
      lng: 106.395593,
      lat: 29.805197,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "綦江区",
      level: "district",
      adcode: 500110,
      lng: 106.651213,
      lat: 29.028117,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "大足区",
      level: "district",
      adcode: 500111,
      lng: 105.721825,
      lat: 29.707555,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "渝北区",
      level: "district",
      adcode: 500112,
      lng: 106.631155,
      lat: 29.718087,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "巴南区",
      level: "district",
      adcode: 500113,
      lng: 106.540603,
      lat: 29.402348,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "黔江区",
      level: "district",
      adcode: 500114,
      lng: 108.770677,
      lat: 29.533609,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "长寿区",
      level: "district",
      adcode: 500115,
      lng: 107.080945,
      lat: 29.857916,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "江津区",
      level: "district",
      adcode: 500116,
      lng: 106.264435,
      lat: 29.319984,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "合川区",
      level: "district",
      adcode: 500117,
      lng: 106.27617,
      lat: 29.971968,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "永川区",
      level: "district",
      adcode: 500118,
      lng: 105.926951,
      lat: 29.356384,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "南川区",
      level: "district",
      adcode: 500119,
      lng: 107.099147,
      lat: 29.157879,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "璧山区",
      level: "district",
      adcode: 500120,
      lng: 106.204885,
      lat: 29.577455,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "铜梁区",
      level: "district",
      adcode: 500151,
      lng: 106.056265,
      lat: 29.845248,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "潼南区",
      level: "district",
      adcode: 500152,
      lng: 105.840487,
      lat: 30.191077,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "荣昌区",
      level: "district",
      adcode: 500153,
      lng: 105.6118,
      lat: 29.416892,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "开州区",
      level: "district",
      adcode: 500154,
      lng: 108.39336,
      lat: 31.160416,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "梁平区",
      level: "district",
      adcode: 500155,
      lng: 107.769568,
      lat: 30.654233,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "武隆区",
      level: "district",
      adcode: 500156,
      lng: 107.759955,
      lat: 29.325707,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "城口县",
      level: "district",
      adcode: 500229,
      lng: 108.664349,
      lat: 31.947319,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "丰都县",
      level: "district",
      adcode: 500230,
      lng: 107.731056,
      lat: 29.863785,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "垫江县",
      level: "district",
      adcode: 500231,
      lng: 107.332511,
      lat: 30.327548,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "忠县",
      level: "district",
      adcode: 500233,
      lng: 108.038073,
      lat: 30.299817,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "云阳县",
      level: "district",
      adcode: 500235,
      lng: 108.6975,
      lat: 30.930628,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "奉节县",
      level: "district",
      adcode: 500236,
      lng: 109.401056,
      lat: 31.018505,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "巫山县",
      level: "district",
      adcode: 500237,
      lng: 109.878995,
      lat: 31.07478,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "巫溪县",
      level: "district",
      adcode: 500238,
      lng: 109.570038,
      lat: 31.398619,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "石柱土家族自治县",
      level: "district",
      adcode: 500240,
      lng: 108.114251,
      lat: 29.999066,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "秀山土家族苗族自治县",
      level: "district",
      adcode: 500241,
      lng: 109.007096,
      lat: 28.448248,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "酉阳土家族苗族自治县",
      level: "district",
      adcode: 500242,
      lng: 108.76726,
      lat: 28.841409,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "彭水苗族土家族自治县",
      level: "district",
      adcode: 500243,
      lng: 108.165571,
      lat: 29.293748,
      childrenNum: 0,
      parent: 500100,
    },
    {
      name: "四川省",
      level: "province",
      adcode: 51e4,
      lng: 104.076452,
      lat: 30.651696,
      childrenNum: 21,
      parent: 1e5,
    },
    {
      name: "成都市",
      level: "city",
      adcode: 510100,
      lng: 104.066301,
      lat: 30.572961,
      childrenNum: 20,
      parent: 51e4,
    },
    {
      name: "锦江区",
      level: "district",
      adcode: 510104,
      lng: 104.117262,
      lat: 30.598726,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "青羊区",
      level: "district",
      adcode: 510105,
      lng: 104.062415,
      lat: 30.674583,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "金牛区",
      level: "district",
      adcode: 510106,
      lng: 104.052236,
      lat: 30.691359,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "武侯区",
      level: "district",
      adcode: 510107,
      lng: 104.043246,
      lat: 30.641849,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "成华区",
      level: "district",
      adcode: 510108,
      lng: 104.101452,
      lat: 30.659966,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "龙泉驿区",
      level: "district",
      adcode: 510112,
      lng: 104.27536,
      lat: 30.556808,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "青白江区",
      level: "district",
      adcode: 510113,
      lng: 104.251342,
      lat: 30.8786,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "新都区",
      level: "district",
      adcode: 510114,
      lng: 104.158593,
      lat: 30.823568,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "温江区",
      level: "district",
      adcode: 510115,
      lng: 103.856423,
      lat: 30.681956,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "双流区",
      level: "district",
      adcode: 510116,
      lng: 103.92342,
      lat: 30.574884,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "郫都区",
      level: "district",
      adcode: 510117,
      lng: 103.900486,
      lat: 30.795113,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "新津区",
      level: "district",
      adcode: 510118,
      lng: 103.810906,
      lat: 30.410404,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "金堂县",
      level: "district",
      adcode: 510121,
      lng: 104.411871,
      lat: 30.86203,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "大邑县",
      level: "district",
      adcode: 510129,
      lng: 103.51226,
      lat: 30.573004,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "蒲江县",
      level: "district",
      adcode: 510131,
      lng: 103.506478,
      lat: 30.197558,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "都江堰市",
      level: "district",
      adcode: 510181,
      lng: 103.647193,
      lat: 30.988763,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "彭州市",
      level: "district",
      adcode: 510182,
      lng: 103.957706,
      lat: 30.990463,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "邛崃市",
      level: "district",
      adcode: 510183,
      lng: 103.464176,
      lat: 30.41029,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "崇州市",
      level: "district",
      adcode: 510184,
      lng: 103.673025,
      lat: 30.630183,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "简阳市",
      level: "district",
      adcode: 510185,
      lng: 104.547644,
      lat: 30.410937,
      childrenNum: 0,
      parent: 510100,
    },
    {
      name: "自贡市",
      level: "city",
      adcode: 510300,
      lng: 104.779307,
      lat: 29.33924,
      childrenNum: 6,
      parent: 51e4,
    },
    {
      name: "自流井区",
      level: "district",
      adcode: 510302,
      lng: 104.777182,
      lat: 29.337295,
      childrenNum: 0,
      parent: 510300,
    },
    {
      name: "贡井区",
      level: "district",
      adcode: 510303,
      lng: 104.715294,
      lat: 29.345481,
      childrenNum: 0,
      parent: 510300,
    },
    {
      name: "大安区",
      level: "district",
      adcode: 510304,
      lng: 104.773982,
      lat: 29.36371,
      childrenNum: 0,
      parent: 510300,
    },
    {
      name: "沿滩区",
      level: "district",
      adcode: 510311,
      lng: 104.873826,
      lat: 29.27208,
      childrenNum: 0,
      parent: 510300,
    },
    {
      name: "荣县",
      level: "district",
      adcode: 510321,
      lng: 104.417438,
      lat: 29.445461,
      childrenNum: 0,
      parent: 510300,
    },
    {
      name: "富顺县",
      level: "district",
      adcode: 510322,
      lng: 104.975193,
      lat: 29.181779,
      childrenNum: 0,
      parent: 510300,
    },
    {
      name: "攀枝花市",
      level: "city",
      adcode: 510400,
      lng: 101.71846,
      lat: 26.582417,
      childrenNum: 5,
      parent: 51e4,
    },
    {
      name: "东区",
      level: "district",
      adcode: 510402,
      lng: 101.704129,
      lat: 26.546484,
      childrenNum: 0,
      parent: 510400,
    },
    {
      name: "西区",
      level: "district",
      adcode: 510403,
      lng: 101.630557,
      lat: 26.5977,
      childrenNum: 0,
      parent: 510400,
    },
    {
      name: "仁和区",
      level: "district",
      adcode: 510411,
      lng: 101.738615,
      lat: 26.497796,
      childrenNum: 0,
      parent: 510400,
    },
    {
      name: "米易县",
      level: "district",
      adcode: 510421,
      lng: 102.111073,
      lat: 26.896372,
      childrenNum: 0,
      parent: 510400,
    },
    {
      name: "盐边县",
      level: "district",
      adcode: 510422,
      lng: 101.854027,
      lat: 26.682611,
      childrenNum: 0,
      parent: 510400,
    },
    {
      name: "泸州市",
      level: "city",
      adcode: 510500,
      lng: 105.441866,
      lat: 28.87098,
      childrenNum: 7,
      parent: 51e4,
    },
    {
      name: "江阳区",
      level: "district",
      adcode: 510502,
      lng: 105.434982,
      lat: 28.87881,
      childrenNum: 0,
      parent: 510500,
    },
    {
      name: "纳溪区",
      level: "district",
      adcode: 510503,
      lng: 105.371324,
      lat: 28.772888,
      childrenNum: 0,
      parent: 510500,
    },
    {
      name: "龙马潭区",
      level: "district",
      adcode: 510504,
      lng: 105.437751,
      lat: 28.913257,
      childrenNum: 0,
      parent: 510500,
    },
    {
      name: "泸县",
      level: "district",
      adcode: 510521,
      lng: 105.381879,
      lat: 29.1516,
      childrenNum: 0,
      parent: 510500,
    },
    {
      name: "合江县",
      level: "district",
      adcode: 510522,
      lng: 105.831011,
      lat: 28.811278,
      childrenNum: 0,
      parent: 510500,
    },
    {
      name: "叙永县",
      level: "district",
      adcode: 510524,
      lng: 105.444777,
      lat: 28.155631,
      childrenNum: 0,
      parent: 510500,
    },
    {
      name: "古蔺县",
      level: "district",
      adcode: 510525,
      lng: 105.812694,
      lat: 28.038763,
      childrenNum: 0,
      parent: 510500,
    },
    {
      name: "德阳市",
      level: "city",
      adcode: 510600,
      lng: 104.397795,
      lat: 31.127449,
      childrenNum: 6,
      parent: 51e4,
    },
    {
      name: "旌阳区",
      level: "district",
      adcode: 510603,
      lng: 104.417061,
      lat: 31.143335,
      childrenNum: 0,
      parent: 510600,
    },
    {
      name: "罗江区",
      level: "district",
      adcode: 510604,
      lng: 104.510457,
      lat: 31.317388,
      childrenNum: 0,
      parent: 510600,
    },
    {
      name: "中江县",
      level: "district",
      adcode: 510623,
      lng: 104.678601,
      lat: 31.03327,
      childrenNum: 0,
      parent: 510600,
    },
    {
      name: "广汉市",
      level: "district",
      adcode: 510681,
      lng: 104.282204,
      lat: 30.977264,
      childrenNum: 0,
      parent: 510600,
    },
    {
      name: "什邡市",
      level: "district",
      adcode: 510682,
      lng: 104.167345,
      lat: 31.12655,
      childrenNum: 0,
      parent: 510600,
    },
    {
      name: "绵竹市",
      level: "district",
      adcode: 510683,
      lng: 104.220679,
      lat: 31.339251,
      childrenNum: 0,
      parent: 510600,
    },
    {
      name: "绵阳市",
      level: "city",
      adcode: 510700,
      lng: 104.679127,
      lat: 31.467673,
      childrenNum: 9,
      parent: 51e4,
    },
    {
      name: "涪城区",
      level: "district",
      adcode: 510703,
      lng: 104.756917,
      lat: 31.455192,
      childrenNum: 0,
      parent: 510700,
    },
    {
      name: "游仙区",
      level: "district",
      adcode: 510704,
      lng: 104.766136,
      lat: 31.473788,
      childrenNum: 0,
      parent: 510700,
    },
    {
      name: "安州区",
      level: "district",
      adcode: 510705,
      lng: 104.567543,
      lat: 31.534319,
      childrenNum: 0,
      parent: 510700,
    },
    {
      name: "三台县",
      level: "district",
      adcode: 510722,
      lng: 105.093722,
      lat: 31.095826,
      childrenNum: 0,
      parent: 510700,
    },
    {
      name: "盐亭县",
      level: "district",
      adcode: 510723,
      lng: 105.389453,
      lat: 31.208362,
      childrenNum: 0,
      parent: 510700,
    },
    {
      name: "梓潼县",
      level: "district",
      adcode: 510725,
      lng: 105.170746,
      lat: 31.642635,
      childrenNum: 0,
      parent: 510700,
    },
    {
      name: "北川羌族自治县",
      level: "district",
      adcode: 510726,
      lng: 104.468163,
      lat: 31.617192,
      childrenNum: 0,
      parent: 510700,
    },
    {
      name: "平武县",
      level: "district",
      adcode: 510727,
      lng: 104.555481,
      lat: 32.409684,
      childrenNum: 0,
      parent: 510700,
    },
    {
      name: "江油市",
      level: "district",
      adcode: 510781,
      lng: 104.74564,
      lat: 31.778572,
      childrenNum: 0,
      parent: 510700,
    },
    {
      name: "广元市",
      level: "city",
      adcode: 510800,
      lng: 105.844004,
      lat: 32.435774,
      childrenNum: 7,
      parent: 51e4,
    },
    {
      name: "利州区",
      level: "district",
      adcode: 510802,
      lng: 105.845307,
      lat: 32.433756,
      childrenNum: 0,
      parent: 510800,
    },
    {
      name: "昭化区",
      level: "district",
      adcode: 510811,
      lng: 105.957612,
      lat: 32.333173,
      childrenNum: 0,
      parent: 510800,
    },
    {
      name: "朝天区",
      level: "district",
      adcode: 510812,
      lng: 105.882848,
      lat: 32.651352,
      childrenNum: 0,
      parent: 510800,
    },
    {
      name: "旺苍县",
      level: "district",
      adcode: 510821,
      lng: 106.290124,
      lat: 32.229074,
      childrenNum: 0,
      parent: 510800,
    },
    {
      name: "青川县",
      level: "district",
      adcode: 510822,
      lng: 105.238498,
      lat: 32.575821,
      childrenNum: 0,
      parent: 510800,
    },
    {
      name: "剑阁县",
      level: "district",
      adcode: 510823,
      lng: 105.524699,
      lat: 32.288681,
      childrenNum: 0,
      parent: 510800,
    },
    {
      name: "苍溪县",
      level: "district",
      adcode: 510824,
      lng: 105.934756,
      lat: 31.731709,
      childrenNum: 0,
      parent: 510800,
    },
    {
      name: "遂宁市",
      level: "city",
      adcode: 510900,
      lng: 105.592602,
      lat: 30.53268,
      childrenNum: 5,
      parent: 51e4,
    },
    {
      name: "船山区",
      level: "district",
      adcode: 510903,
      lng: 105.568359,
      lat: 30.526201,
      childrenNum: 0,
      parent: 510900,
    },
    {
      name: "安居区",
      level: "district",
      adcode: 510904,
      lng: 105.45636,
      lat: 30.355091,
      childrenNum: 0,
      parent: 510900,
    },
    {
      name: "蓬溪县",
      level: "district",
      adcode: 510921,
      lng: 105.707498,
      lat: 30.75763,
      childrenNum: 0,
      parent: 510900,
    },
    {
      name: "大英县",
      level: "district",
      adcode: 510923,
      lng: 105.236852,
      lat: 30.594472,
      childrenNum: 0,
      parent: 510900,
    },
    {
      name: "射洪市",
      level: "district",
      adcode: 510981,
      lng: 105.388366,
      lat: 30.871079,
      childrenNum: 0,
      parent: 510900,
    },
    {
      name: "内江市",
      level: "city",
      adcode: 511e3,
      lng: 105.057992,
      lat: 29.58021,
      childrenNum: 5,
      parent: 51e4,
    },
    {
      name: "市中区",
      level: "district",
      adcode: 511002,
      lng: 105.06759,
      lat: 29.587091,
      childrenNum: 0,
      parent: 511e3,
    },
    {
      name: "东兴区",
      level: "district",
      adcode: 511011,
      lng: 105.076107,
      lat: 29.593528,
      childrenNum: 0,
      parent: 511e3,
    },
    {
      name: "威远县",
      level: "district",
      adcode: 511024,
      lng: 104.669032,
      lat: 29.527456,
      childrenNum: 0,
      parent: 511e3,
    },
    {
      name: "资中县",
      level: "district",
      adcode: 511025,
      lng: 104.851874,
      lat: 29.763419,
      childrenNum: 0,
      parent: 511e3,
    },
    {
      name: "隆昌市",
      level: "district",
      adcode: 511083,
      lng: 105.287507,
      lat: 29.339408,
      childrenNum: 0,
      parent: 511e3,
    },
    {
      name: "乐山市",
      level: "city",
      adcode: 511100,
      lng: 103.766085,
      lat: 29.552275,
      childrenNum: 11,
      parent: 51e4,
    },
    {
      name: "市中区",
      level: "district",
      adcode: 511102,
      lng: 103.761329,
      lat: 29.555374,
      childrenNum: 0,
      parent: 511100,
    },
    {
      name: "沙湾区",
      level: "district",
      adcode: 511111,
      lng: 103.550118,
      lat: 29.412404,
      childrenNum: 0,
      parent: 511100,
    },
    {
      name: "五通桥区",
      level: "district",
      adcode: 511112,
      lng: 103.818024,
      lat: 29.406837,
      childrenNum: 0,
      parent: 511100,
    },
    {
      name: "金口河区",
      level: "district",
      adcode: 511113,
      lng: 103.078597,
      lat: 29.244345,
      childrenNum: 0,
      parent: 511100,
    },
    {
      name: "犍为县",
      level: "district",
      adcode: 511123,
      lng: 103.949231,
      lat: 29.208118,
      childrenNum: 0,
      parent: 511100,
    },
    {
      name: "井研县",
      level: "district",
      adcode: 511124,
      lng: 104.06968,
      lat: 29.65165,
      childrenNum: 0,
      parent: 511100,
    },
    {
      name: "夹江县",
      level: "district",
      adcode: 511126,
      lng: 103.571313,
      lat: 29.738143,
      childrenNum: 0,
      parent: 511100,
    },
    {
      name: "沐川县",
      level: "district",
      adcode: 511129,
      lng: 103.902691,
      lat: 28.956394,
      childrenNum: 0,
      parent: 511100,
    },
    {
      name: "峨边彝族自治县",
      level: "district",
      adcode: 511132,
      lng: 103.262048,
      lat: 29.230426,
      childrenNum: 0,
      parent: 511100,
    },
    {
      name: "马边彝族自治县",
      level: "district",
      adcode: 511133,
      lng: 103.546347,
      lat: 28.83552,
      childrenNum: 0,
      parent: 511100,
    },
    {
      name: "峨眉山市",
      level: "district",
      adcode: 511181,
      lng: 103.484557,
      lat: 29.601189,
      childrenNum: 0,
      parent: 511100,
    },
    {
      name: "南充市",
      level: "city",
      adcode: 511300,
      lng: 106.110565,
      lat: 30.837235,
      childrenNum: 9,
      parent: 51e4,
    },
    {
      name: "顺庆区",
      level: "district",
      adcode: 511302,
      lng: 106.092327,
      lat: 30.797366,
      childrenNum: 0,
      parent: 511300,
    },
    {
      name: "高坪区",
      level: "district",
      adcode: 511303,
      lng: 106.118931,
      lat: 30.781284,
      childrenNum: 0,
      parent: 511300,
    },
    {
      name: "嘉陵区",
      level: "district",
      adcode: 511304,
      lng: 106.07208,
      lat: 30.758831,
      childrenNum: 0,
      parent: 511300,
    },
    {
      name: "南部县",
      level: "district",
      adcode: 511321,
      lng: 106.036349,
      lat: 31.348255,
      childrenNum: 0,
      parent: 511300,
    },
    {
      name: "营山县",
      level: "district",
      adcode: 511322,
      lng: 106.565524,
      lat: 31.077057,
      childrenNum: 0,
      parent: 511300,
    },
    {
      name: "蓬安县",
      level: "district",
      adcode: 511323,
      lng: 106.412156,
      lat: 31.028537,
      childrenNum: 0,
      parent: 511300,
    },
    {
      name: "仪陇县",
      level: "district",
      adcode: 511324,
      lng: 106.303082,
      lat: 31.271693,
      childrenNum: 0,
      parent: 511300,
    },
    {
      name: "西充县",
      level: "district",
      adcode: 511325,
      lng: 105.900894,
      lat: 30.995546,
      childrenNum: 0,
      parent: 511300,
    },
    {
      name: "阆中市",
      level: "district",
      adcode: 511381,
      lng: 106.005046,
      lat: 31.558356,
      childrenNum: 0,
      parent: 511300,
    },
    {
      name: "眉山市",
      level: "city",
      adcode: 511400,
      lng: 103.848417,
      lat: 30.077113,
      childrenNum: 6,
      parent: 51e4,
    },
    {
      name: "东坡区",
      level: "district",
      adcode: 511402,
      lng: 103.831868,
      lat: 30.041956,
      childrenNum: 0,
      parent: 511400,
    },
    {
      name: "彭山区",
      level: "district",
      adcode: 511403,
      lng: 103.872852,
      lat: 30.193278,
      childrenNum: 0,
      parent: 511400,
    },
    {
      name: "仁寿县",
      level: "district",
      adcode: 511421,
      lng: 104.133931,
      lat: 29.995638,
      childrenNum: 0,
      parent: 511400,
    },
    {
      name: "洪雅县",
      level: "district",
      adcode: 511423,
      lng: 103.365035,
      lat: 29.915828,
      childrenNum: 0,
      parent: 511400,
    },
    {
      name: "丹棱县",
      level: "district",
      adcode: 511424,
      lng: 103.512859,
      lat: 30.014398,
      childrenNum: 0,
      parent: 511400,
    },
    {
      name: "青神县",
      level: "district",
      adcode: 511425,
      lng: 103.846596,
      lat: 29.831302,
      childrenNum: 0,
      parent: 511400,
    },
    {
      name: "宜宾市",
      level: "city",
      adcode: 511500,
      lng: 104.642826,
      lat: 28.752354,
      childrenNum: 10,
      parent: 51e4,
    },
    {
      name: "翠屏区",
      level: "district",
      adcode: 511502,
      lng: 104.619853,
      lat: 28.766537,
      childrenNum: 0,
      parent: 511500,
    },
    {
      name: "南溪区",
      level: "district",
      adcode: 511503,
      lng: 104.969147,
      lat: 28.846366,
      childrenNum: 0,
      parent: 511500,
    },
    {
      name: "叙州区",
      level: "district",
      adcode: 511504,
      lng: 104.533244,
      lat: 28.690068,
      childrenNum: 0,
      parent: 511500,
    },
    {
      name: "江安县",
      level: "district",
      adcode: 511523,
      lng: 105.066982,
      lat: 28.723797,
      childrenNum: 0,
      parent: 511500,
    },
    {
      name: "长宁县",
      level: "district",
      adcode: 511524,
      lng: 104.920643,
      lat: 28.582866,
      childrenNum: 0,
      parent: 511500,
    },
    {
      name: "高县",
      level: "district",
      adcode: 511525,
      lng: 104.517748,
      lat: 28.436166,
      childrenNum: 0,
      parent: 511500,
    },
    {
      name: "珙县",
      level: "district",
      adcode: 511526,
      lng: 104.708986,
      lat: 28.439514,
      childrenNum: 0,
      parent: 511500,
    },
    {
      name: "筠连县",
      level: "district",
      adcode: 511527,
      lng: 104.511159,
      lat: 28.167981,
      childrenNum: 0,
      parent: 511500,
    },
    {
      name: "兴文县",
      level: "district",
      adcode: 511528,
      lng: 105.236207,
      lat: 28.303669,
      childrenNum: 0,
      parent: 511500,
    },
    {
      name: "屏山县",
      level: "district",
      adcode: 511529,
      lng: 104.346138,
      lat: 28.82867,
      childrenNum: 0,
      parent: 511500,
    },
    {
      name: "广安市",
      level: "city",
      adcode: 511600,
      lng: 106.632647,
      lat: 30.456354,
      childrenNum: 6,
      parent: 51e4,
    },
    {
      name: "广安区",
      level: "district",
      adcode: 511602,
      lng: 106.641628,
      lat: 30.473943,
      childrenNum: 0,
      parent: 511600,
    },
    {
      name: "前锋区",
      level: "district",
      adcode: 511603,
      lng: 106.886039,
      lat: 30.496059,
      childrenNum: 0,
      parent: 511600,
    },
    {
      name: "岳池县",
      level: "district",
      adcode: 511621,
      lng: 106.440056,
      lat: 30.538656,
      childrenNum: 0,
      parent: 511600,
    },
    {
      name: "武胜县",
      level: "district",
      adcode: 511622,
      lng: 106.295945,
      lat: 30.349493,
      childrenNum: 0,
      parent: 511600,
    },
    {
      name: "邻水县",
      level: "district",
      adcode: 511623,
      lng: 106.930242,
      lat: 30.334911,
      childrenNum: 0,
      parent: 511600,
    },
    {
      name: "华蓥市",
      level: "district",
      adcode: 511681,
      lng: 106.783151,
      lat: 30.390439,
      childrenNum: 0,
      parent: 511600,
    },
    {
      name: "达州市",
      level: "city",
      adcode: 511700,
      lng: 107.46778,
      lat: 31.209278,
      childrenNum: 7,
      parent: 51e4,
    },
    {
      name: "通川区",
      level: "district",
      adcode: 511702,
      lng: 107.505053,
      lat: 31.214665,
      childrenNum: 0,
      parent: 511700,
    },
    {
      name: "达川区",
      level: "district",
      adcode: 511703,
      lng: 107.511736,
      lat: 31.196573,
      childrenNum: 0,
      parent: 511700,
    },
    {
      name: "宣汉县",
      level: "district",
      adcode: 511722,
      lng: 107.727198,
      lat: 31.353845,
      childrenNum: 0,
      parent: 511700,
    },
    {
      name: "开江县",
      level: "district",
      adcode: 511723,
      lng: 107.868609,
      lat: 31.082945,
      childrenNum: 0,
      parent: 511700,
    },
    {
      name: "大竹县",
      level: "district",
      adcode: 511724,
      lng: 107.204702,
      lat: 30.736222,
      childrenNum: 0,
      parent: 511700,
    },
    {
      name: "渠县",
      level: "district",
      adcode: 511725,
      lng: 106.973114,
      lat: 30.836504,
      childrenNum: 0,
      parent: 511700,
    },
    {
      name: "万源市",
      level: "district",
      adcode: 511781,
      lng: 108.034393,
      lat: 32.081698,
      childrenNum: 0,
      parent: 511700,
    },
    {
      name: "雅安市",
      level: "city",
      adcode: 511800,
      lng: 103.041538,
      lat: 30.009998,
      childrenNum: 8,
      parent: 51e4,
    },
    {
      name: "雨城区",
      level: "district",
      adcode: 511802,
      lng: 103.032868,
      lat: 30.005718,
      childrenNum: 0,
      parent: 511800,
    },
    {
      name: "名山区",
      level: "district",
      adcode: 511803,
      lng: 103.109238,
      lat: 30.069837,
      childrenNum: 0,
      parent: 511800,
    },
    {
      name: "荥经县",
      level: "district",
      adcode: 511822,
      lng: 102.846537,
      lat: 29.793254,
      childrenNum: 0,
      parent: 511800,
    },
    {
      name: "汉源县",
      level: "district",
      adcode: 511823,
      lng: 102.650417,
      lat: 29.344275,
      childrenNum: 0,
      parent: 511800,
    },
    {
      name: "石棉县",
      level: "district",
      adcode: 511824,
      lng: 102.358364,
      lat: 29.230963,
      childrenNum: 0,
      parent: 511800,
    },
    {
      name: "天全县",
      level: "district",
      adcode: 511825,
      lng: 102.771745,
      lat: 30.05728,
      childrenNum: 0,
      parent: 511800,
    },
    {
      name: "芦山县",
      level: "district",
      adcode: 511826,
      lng: 102.933618,
      lat: 30.145077,
      childrenNum: 0,
      parent: 511800,
    },
    {
      name: "宝兴县",
      level: "district",
      adcode: 511827,
      lng: 102.814156,
      lat: 30.382154,
      childrenNum: 0,
      parent: 511800,
    },
    {
      name: "巴中市",
      level: "city",
      adcode: 511900,
      lng: 106.747548,
      lat: 31.867853,
      childrenNum: 5,
      parent: 51e4,
    },
    {
      name: "巴州区",
      level: "district",
      adcode: 511902,
      lng: 106.76887,
      lat: 31.851458,
      childrenNum: 0,
      parent: 511900,
    },
    {
      name: "恩阳区",
      level: "district",
      adcode: 511903,
      lng: 106.654386,
      lat: 31.787186,
      childrenNum: 0,
      parent: 511900,
    },
    {
      name: "通江县",
      level: "district",
      adcode: 511921,
      lng: 107.245033,
      lat: 31.911705,
      childrenNum: 0,
      parent: 511900,
    },
    {
      name: "南江县",
      level: "district",
      adcode: 511922,
      lng: 106.828697,
      lat: 32.346589,
      childrenNum: 0,
      parent: 511900,
    },
    {
      name: "平昌县",
      level: "district",
      adcode: 511923,
      lng: 107.103613,
      lat: 31.560436,
      childrenNum: 0,
      parent: 511900,
    },
    {
      name: "资阳市",
      level: "city",
      adcode: 512e3,
      lng: 104.627265,
      lat: 30.129236,
      childrenNum: 3,
      parent: 51e4,
    },
    {
      name: "雁江区",
      level: "district",
      adcode: 512002,
      lng: 104.676814,
      lat: 30.107778,
      childrenNum: 0,
      parent: 512e3,
    },
    {
      name: "安岳县",
      level: "district",
      adcode: 512021,
      lng: 105.35551,
      lat: 30.103623,
      childrenNum: 0,
      parent: 512e3,
    },
    {
      name: "乐至县",
      level: "district",
      adcode: 512022,
      lng: 105.019823,
      lat: 30.275418,
      childrenNum: 0,
      parent: 512e3,
    },
    {
      name: "阿坝藏族羌族自治州",
      level: "city",
      adcode: 513200,
      lng: 102.224504,
      lat: 31.899427,
      childrenNum: 13,
      parent: 51e4,
    },
    {
      name: "马尔康市",
      level: "district",
      adcode: 513201,
      lng: 102.206386,
      lat: 31.905799,
      childrenNum: 0,
      parent: 513200,
    },
    {
      name: "汶川县",
      level: "district",
      adcode: 513221,
      lng: 103.590185,
      lat: 31.476875,
      childrenNum: 0,
      parent: 513200,
    },
    {
      name: "理县",
      level: "district",
      adcode: 513222,
      lng: 103.163284,
      lat: 31.435831,
      childrenNum: 0,
      parent: 513200,
    },
    {
      name: "茂县",
      level: "district",
      adcode: 513223,
      lng: 103.85332,
      lat: 31.681727,
      childrenNum: 0,
      parent: 513200,
    },
    {
      name: "松潘县",
      level: "district",
      adcode: 513224,
      lng: 103.60428,
      lat: 32.655685,
      childrenNum: 0,
      parent: 513200,
    },
    {
      name: "九寨沟县",
      level: "district",
      adcode: 513225,
      lng: 104.2426,
      lat: 33.252008,
      childrenNum: 0,
      parent: 513200,
    },
    {
      name: "金川县",
      level: "district",
      adcode: 513226,
      lng: 102.063821,
      lat: 31.47625,
      childrenNum: 0,
      parent: 513200,
    },
    {
      name: "小金县",
      level: "district",
      adcode: 513227,
      lng: 102.362984,
      lat: 30.995823,
      childrenNum: 0,
      parent: 513200,
    },
    {
      name: "黑水县",
      level: "district",
      adcode: 513228,
      lng: 102.987592,
      lat: 32.069268,
      childrenNum: 0,
      parent: 513200,
    },
    {
      name: "壤塘县",
      level: "district",
      adcode: 513230,
      lng: 100.978526,
      lat: 32.265796,
      childrenNum: 0,
      parent: 513200,
    },
    {
      name: "阿坝县",
      level: "district",
      adcode: 513231,
      lng: 101.706548,
      lat: 32.902387,
      childrenNum: 0,
      parent: 513200,
    },
    {
      name: "若尔盖县",
      level: "district",
      adcode: 513232,
      lng: 102.96738,
      lat: 33.578503,
      childrenNum: 0,
      parent: 513200,
    },
    {
      name: "红原县",
      level: "district",
      adcode: 513233,
      lng: 102.544395,
      lat: 32.790841,
      childrenNum: 0,
      parent: 513200,
    },
    {
      name: "甘孜藏族自治州",
      level: "city",
      adcode: 513300,
      lng: 101.96231,
      lat: 30.04952,
      childrenNum: 18,
      parent: 51e4,
    },
    {
      name: "康定市",
      level: "district",
      adcode: 513301,
      lng: 101.95687,
      lat: 29.998544,
      childrenNum: 0,
      parent: 513300,
    },
    {
      name: "泸定县",
      level: "district",
      adcode: 513322,
      lng: 102.234814,
      lat: 29.914103,
      childrenNum: 0,
      parent: 513300,
    },
    {
      name: "丹巴县",
      level: "district",
      adcode: 513323,
      lng: 101.89054,
      lat: 30.878618,
      childrenNum: 0,
      parent: 513300,
    },
    {
      name: "九龙县",
      level: "district",
      adcode: 513324,
      lng: 101.507294,
      lat: 29.000347,
      childrenNum: 0,
      parent: 513300,
    },
    {
      name: "雅江县",
      level: "district",
      adcode: 513325,
      lng: 101.014366,
      lat: 30.031498,
      childrenNum: 0,
      parent: 513300,
    },
    {
      name: "道孚县",
      level: "district",
      adcode: 513326,
      lng: 101.125157,
      lat: 30.979486,
      childrenNum: 0,
      parent: 513300,
    },
    {
      name: "炉霍县",
      level: "district",
      adcode: 513327,
      lng: 100.676014,
      lat: 31.390657,
      childrenNum: 0,
      parent: 513300,
    },
    {
      name: "甘孜县",
      level: "district",
      adcode: 513328,
      lng: 99.991683,
      lat: 31.622731,
      childrenNum: 0,
      parent: 513300,
    },
    {
      name: "新龙县",
      level: "district",
      adcode: 513329,
      lng: 100.311569,
      lat: 30.93917,
      childrenNum: 0,
      parent: 513300,
    },
    {
      name: "德格县",
      level: "district",
      adcode: 513330,
      lng: 98.580914,
      lat: 31.806118,
      childrenNum: 0,
      parent: 513300,
    },
    {
      name: "白玉县",
      level: "district",
      adcode: 513331,
      lng: 98.824025,
      lat: 31.209669,
      childrenNum: 0,
      parent: 513300,
    },
    {
      name: "石渠县",
      level: "district",
      adcode: 513332,
      lng: 98.102938,
      lat: 32.978728,
      childrenNum: 0,
      parent: 513300,
    },
    {
      name: "色达县",
      level: "district",
      adcode: 513333,
      lng: 100.333011,
      lat: 32.268541,
      childrenNum: 0,
      parent: 513300,
    },
    {
      name: "理塘县",
      level: "district",
      adcode: 513334,
      lng: 100.269145,
      lat: 29.994228,
      childrenNum: 0,
      parent: 513300,
    },
    {
      name: "巴塘县",
      level: "district",
      adcode: 513335,
      lng: 99.110555,
      lat: 30.00533,
      childrenNum: 0,
      parent: 513300,
    },
    {
      name: "乡城县",
      level: "district",
      adcode: 513336,
      lng: 99.798116,
      lat: 28.931081,
      childrenNum: 0,
      parent: 513300,
    },
    {
      name: "稻城县",
      level: "district",
      adcode: 513337,
      lng: 100.297369,
      lat: 29.03791,
      childrenNum: 0,
      parent: 513300,
    },
    {
      name: "得荣县",
      level: "district",
      adcode: 513338,
      lng: 99.286366,
      lat: 28.713085,
      childrenNum: 0,
      parent: 513300,
    },
    {
      name: "凉山彝族自治州",
      level: "city",
      adcode: 513400,
      lng: 102.267713,
      lat: 27.881396,
      childrenNum: 17,
      parent: 51e4,
    },
    {
      name: "西昌市",
      level: "district",
      adcode: 513401,
      lng: 102.264166,
      lat: 27.89441,
      childrenNum: 0,
      parent: 513400,
    },
    {
      name: "木里藏族自治县",
      level: "district",
      adcode: 513422,
      lng: 101.280216,
      lat: 27.928736,
      childrenNum: 0,
      parent: 513400,
    },
    {
      name: "盐源县",
      level: "district",
      adcode: 513423,
      lng: 101.509038,
      lat: 27.422593,
      childrenNum: 0,
      parent: 513400,
    },
    {
      name: "德昌县",
      level: "district",
      adcode: 513424,
      lng: 102.175661,
      lat: 27.402832,
      childrenNum: 0,
      parent: 513400,
    },
    {
      name: "会理市",
      level: "district",
      adcode: 513425,
      lng: 102.244774,
      lat: 26.655047,
      childrenNum: 0,
      parent: 513400,
    },
    {
      name: "会东县",
      level: "district",
      adcode: 513426,
      lng: 102.577979,
      lat: 26.634744,
      childrenNum: 0,
      parent: 513400,
    },
    {
      name: "宁南县",
      level: "district",
      adcode: 513427,
      lng: 102.751587,
      lat: 27.061431,
      childrenNum: 0,
      parent: 513400,
    },
    {
      name: "普格县",
      level: "district",
      adcode: 513428,
      lng: 102.540901,
      lat: 27.376413,
      childrenNum: 0,
      parent: 513400,
    },
    {
      name: "布拖县",
      level: "district",
      adcode: 513429,
      lng: 102.809157,
      lat: 27.7121,
      childrenNum: 0,
      parent: 513400,
    },
    {
      name: "金阳县",
      level: "district",
      adcode: 513430,
      lng: 103.248786,
      lat: 27.696735,
      childrenNum: 0,
      parent: 513400,
    },
    {
      name: "昭觉县",
      level: "district",
      adcode: 513431,
      lng: 102.839849,
      lat: 28.015301,
      childrenNum: 0,
      parent: 513400,
    },
    {
      name: "喜德县",
      level: "district",
      adcode: 513432,
      lng: 102.412451,
      lat: 28.306429,
      childrenNum: 0,
      parent: 513400,
    },
    {
      name: "冕宁县",
      level: "district",
      adcode: 513433,
      lng: 102.176622,
      lat: 28.550145,
      childrenNum: 0,
      parent: 513400,
    },
    {
      name: "越西县",
      level: "district",
      adcode: 513434,
      lng: 102.507467,
      lat: 28.639874,
      childrenNum: 0,
      parent: 513400,
    },
    {
      name: "甘洛县",
      level: "district",
      adcode: 513435,
      lng: 102.771441,
      lat: 28.959131,
      childrenNum: 0,
      parent: 513400,
    },
    {
      name: "美姑县",
      level: "district",
      adcode: 513436,
      lng: 103.132359,
      lat: 28.328591,
      childrenNum: 0,
      parent: 513400,
    },
    {
      name: "雷波县",
      level: "district",
      adcode: 513437,
      lng: 103.571705,
      lat: 28.263202,
      childrenNum: 0,
      parent: 513400,
    },
    {
      name: "贵州省",
      level: "province",
      adcode: 52e4,
      lng: 106.705251,
      lat: 26.600328,
      childrenNum: 9,
      parent: 1e5,
    },
    {
      name: "贵阳市",
      level: "city",
      adcode: 520100,
      lng: 106.628201,
      lat: 26.646694,
      childrenNum: 10,
      parent: 52e4,
    },
    {
      name: "南明区",
      level: "district",
      adcode: 520102,
      lng: 106.714305,
      lat: 26.568055,
      childrenNum: 0,
      parent: 520100,
    },
    {
      name: "云岩区",
      level: "district",
      adcode: 520103,
      lng: 106.724394,
      lat: 26.604604,
      childrenNum: 0,
      parent: 520100,
    },
    {
      name: "花溪区",
      level: "district",
      adcode: 520111,
      lng: 106.67026,
      lat: 26.409817,
      childrenNum: 0,
      parent: 520100,
    },
    {
      name: "乌当区",
      level: "district",
      adcode: 520112,
      lng: 106.75069,
      lat: 26.630911,
      childrenNum: 0,
      parent: 520100,
    },
    {
      name: "白云区",
      level: "district",
      adcode: 520113,
      lng: 106.623069,
      lat: 26.677932,
      childrenNum: 0,
      parent: 520100,
    },
    {
      name: "观山湖区",
      level: "district",
      adcode: 520115,
      lng: 106.598978,
      lat: 26.616134,
      childrenNum: 0,
      parent: 520100,
    },
    {
      name: "开阳县",
      level: "district",
      adcode: 520121,
      lng: 106.964716,
      lat: 27.057823,
      childrenNum: 0,
      parent: 520100,
    },
    {
      name: "息烽县",
      level: "district",
      adcode: 520122,
      lng: 106.740407,
      lat: 27.090479,
      childrenNum: 0,
      parent: 520100,
    },
    {
      name: "修文县",
      level: "district",
      adcode: 520123,
      lng: 106.591958,
      lat: 26.836048,
      childrenNum: 0,
      parent: 520100,
    },
    {
      name: "清镇市",
      level: "district",
      adcode: 520181,
      lng: 106.468686,
      lat: 26.570435,
      childrenNum: 0,
      parent: 520100,
    },
    {
      name: "六盘水市",
      level: "city",
      adcode: 520200,
      lng: 104.830357,
      lat: 26.592538,
      childrenNum: 4,
      parent: 52e4,
    },
    {
      name: "钟山区",
      level: "district",
      adcode: 520201,
      lng: 104.843723,
      lat: 26.574699,
      childrenNum: 0,
      parent: 520200,
    },
    {
      name: "六枝特区",
      level: "district",
      adcode: 520203,
      lng: 105.477199,
      lat: 26.214356,
      childrenNum: 0,
      parent: 520200,
    },
    {
      name: "水城区",
      level: "district",
      adcode: 520204,
      lng: 104.957871,
      lat: 26.547604,
      childrenNum: 0,
      parent: 520200,
    },
    {
      name: "盘州市",
      level: "district",
      adcode: 520281,
      lng: 104.471554,
      lat: 25.709878,
      childrenNum: 0,
      parent: 520200,
    },
    {
      name: "遵义市",
      level: "city",
      adcode: 520300,
      lng: 107.031922,
      lat: 27.721931,
      childrenNum: 14,
      parent: 52e4,
    },
    {
      name: "红花岗区",
      level: "district",
      adcode: 520302,
      lng: 106.893598,
      lat: 27.644793,
      childrenNum: 0,
      parent: 520300,
    },
    {
      name: "汇川区",
      level: "district",
      adcode: 520303,
      lng: 106.933727,
      lat: 27.749716,
      childrenNum: 0,
      parent: 520300,
    },
    {
      name: "播州区",
      level: "district",
      adcode: 520304,
      lng: 106.829081,
      lat: 27.535735,
      childrenNum: 0,
      parent: 520300,
    },
    {
      name: "桐梓县",
      level: "district",
      adcode: 520322,
      lng: 106.824661,
      lat: 28.132991,
      childrenNum: 0,
      parent: 520300,
    },
    {
      name: "绥阳县",
      level: "district",
      adcode: 520323,
      lng: 107.191326,
      lat: 27.946049,
      childrenNum: 0,
      parent: 520300,
    },
    {
      name: "正安县",
      level: "district",
      adcode: 520324,
      lng: 107.454463,
      lat: 28.553507,
      childrenNum: 0,
      parent: 520300,
    },
    {
      name: "道真仡佬族苗族自治县",
      level: "district",
      adcode: 520325,
      lng: 107.613076,
      lat: 28.862548,
      childrenNum: 0,
      parent: 520300,
    },
    {
      name: "务川仡佬族苗族自治县",
      level: "district",
      adcode: 520326,
      lng: 107.899353,
      lat: 28.562921,
      childrenNum: 0,
      parent: 520300,
    },
    {
      name: "凤冈县",
      level: "district",
      adcode: 520327,
      lng: 107.71646,
      lat: 27.954424,
      childrenNum: 0,
      parent: 520300,
    },
    {
      name: "湄潭县",
      level: "district",
      adcode: 520328,
      lng: 107.465492,
      lat: 27.748942,
      childrenNum: 0,
      parent: 520300,
    },
    {
      name: "余庆县",
      level: "district",
      adcode: 520329,
      lng: 107.906043,
      lat: 27.21513,
      childrenNum: 0,
      parent: 520300,
    },
    {
      name: "习水县",
      level: "district",
      adcode: 520330,
      lng: 106.19715,
      lat: 28.332923,
      childrenNum: 0,
      parent: 520300,
    },
    {
      name: "赤水市",
      level: "district",
      adcode: 520381,
      lng: 105.697501,
      lat: 28.590474,
      childrenNum: 0,
      parent: 520300,
    },
    {
      name: "仁怀市",
      level: "district",
      adcode: 520382,
      lng: 106.401322,
      lat: 27.791883,
      childrenNum: 0,
      parent: 520300,
    },
    {
      name: "安顺市",
      level: "city",
      adcode: 520400,
      lng: 105.9476,
      lat: 26.253103,
      childrenNum: 6,
      parent: 52e4,
    },
    {
      name: "西秀区",
      level: "district",
      adcode: 520402,
      lng: 105.966086,
      lat: 26.243928,
      childrenNum: 0,
      parent: 520400,
    },
    {
      name: "平坝区",
      level: "district",
      adcode: 520403,
      lng: 106.255768,
      lat: 26.405968,
      childrenNum: 0,
      parent: 520400,
    },
    {
      name: "普定县",
      level: "district",
      adcode: 520422,
      lng: 105.743156,
      lat: 26.301876,
      childrenNum: 0,
      parent: 520400,
    },
    {
      name: "镇宁布依族苗族自治县",
      level: "district",
      adcode: 520423,
      lng: 105.770543,
      lat: 26.057248,
      childrenNum: 0,
      parent: 520400,
    },
    {
      name: "关岭布依族苗族自治县",
      level: "district",
      adcode: 520424,
      lng: 105.538262,
      lat: 25.953502,
      childrenNum: 0,
      parent: 520400,
    },
    {
      name: "紫云苗族布依族自治县",
      level: "district",
      adcode: 520425,
      lng: 106.084441,
      lat: 25.751047,
      childrenNum: 0,
      parent: 520400,
    },
    {
      name: "毕节市",
      level: "city",
      adcode: 520500,
      lng: 105.291544,
      lat: 27.283615,
      childrenNum: 8,
      parent: 52e4,
    },
    {
      name: "七星关区",
      level: "district",
      adcode: 520502,
      lng: 105.305219,
      lat: 27.298304,
      childrenNum: 0,
      parent: 520500,
    },
    {
      name: "大方县",
      level: "district",
      adcode: 520521,
      lng: 105.601963,
      lat: 27.14443,
      childrenNum: 0,
      parent: 520500,
    },
    {
      name: "金沙县",
      level: "district",
      adcode: 520523,
      lng: 106.220112,
      lat: 27.458601,
      childrenNum: 0,
      parent: 520500,
    },
    {
      name: "织金县",
      level: "district",
      adcode: 520524,
      lng: 105.770249,
      lat: 26.663649,
      childrenNum: 0,
      parent: 520500,
    },
    {
      name: "纳雍县",
      level: "district",
      adcode: 520525,
      lng: 105.414578,
      lat: 26.779344,
      childrenNum: 0,
      parent: 520500,
    },
    {
      name: "威宁彝族回族苗族自治县",
      level: "district",
      adcode: 520526,
      lng: 104.252787,
      lat: 26.873872,
      childrenNum: 0,
      parent: 520500,
    },
    {
      name: "赫章县",
      level: "district",
      adcode: 520527,
      lng: 104.728011,
      lat: 27.117933,
      childrenNum: 0,
      parent: 520500,
    },
    {
      name: "黔西市",
      level: "district",
      adcode: 520581,
      lng: 106.032277,
      lat: 27.008681,
      childrenNum: 0,
      parent: 520500,
    },
    {
      name: "铜仁市",
      level: "city",
      adcode: 520600,
      lng: 109.189528,
      lat: 27.731555,
      childrenNum: 10,
      parent: 52e4,
    },
    {
      name: "碧江区",
      level: "district",
      adcode: 520602,
      lng: 109.264271,
      lat: 27.815244,
      childrenNum: 0,
      parent: 520600,
    },
    {
      name: "万山区",
      level: "district",
      adcode: 520603,
      lng: 109.153685,
      lat: 27.671268,
      childrenNum: 0,
      parent: 520600,
    },
    {
      name: "江口县",
      level: "district",
      adcode: 520621,
      lng: 108.843993,
      lat: 27.704883,
      childrenNum: 0,
      parent: 520600,
    },
    {
      name: "玉屏侗族自治县",
      level: "district",
      adcode: 520622,
      lng: 108.906415,
      lat: 27.235816,
      childrenNum: 0,
      parent: 520600,
    },
    {
      name: "石阡县",
      level: "district",
      adcode: 520623,
      lng: 108.223686,
      lat: 27.513499,
      childrenNum: 0,
      parent: 520600,
    },
    {
      name: "思南县",
      level: "district",
      adcode: 520624,
      lng: 108.253798,
      lat: 27.937464,
      childrenNum: 0,
      parent: 520600,
    },
    {
      name: "印江土家族苗族自治县",
      level: "district",
      adcode: 520625,
      lng: 108.409638,
      lat: 27.994442,
      childrenNum: 0,
      parent: 520600,
    },
    {
      name: "德江县",
      level: "district",
      adcode: 520626,
      lng: 108.120773,
      lat: 28.264028,
      childrenNum: 0,
      parent: 520600,
    },
    {
      name: "沿河土家族自治县",
      level: "district",
      adcode: 520627,
      lng: 108.503152,
      lat: 28.564083,
      childrenNum: 0,
      parent: 520600,
    },
    {
      name: "松桃苗族自治县",
      level: "district",
      adcode: 520628,
      lng: 109.202877,
      lat: 28.15427,
      childrenNum: 0,
      parent: 520600,
    },
    {
      name: "黔西南布依族苗族自治州",
      level: "city",
      adcode: 522300,
      lng: 104.906419,
      lat: 25.087733,
      childrenNum: 8,
      parent: 52e4,
    },
    {
      name: "兴义市",
      level: "district",
      adcode: 522301,
      lng: 104.895503,
      lat: 25.09196,
      childrenNum: 0,
      parent: 522300,
    },
    {
      name: "兴仁市",
      level: "district",
      adcode: 522302,
      lng: 105.186132,
      lat: 25.43509,
      childrenNum: 0,
      parent: 522300,
    },
    {
      name: "普安县",
      level: "district",
      adcode: 522323,
      lng: 104.953289,
      lat: 25.784225,
      childrenNum: 0,
      parent: 522300,
    },
    {
      name: "晴隆县",
      level: "district",
      adcode: 522324,
      lng: 105.218956,
      lat: 25.834729,
      childrenNum: 0,
      parent: 522300,
    },
    {
      name: "贞丰县",
      level: "district",
      adcode: 522325,
      lng: 105.64976,
      lat: 25.38558,
      childrenNum: 0,
      parent: 522300,
    },
    {
      name: "望谟县",
      level: "district",
      adcode: 522326,
      lng: 106.094864,
      lat: 25.174204,
      childrenNum: 0,
      parent: 522300,
    },
    {
      name: "册亨县",
      level: "district",
      adcode: 522327,
      lng: 105.811592,
      lat: 24.983663,
      childrenNum: 0,
      parent: 522300,
    },
    {
      name: "安龙县",
      level: "district",
      adcode: 522328,
      lng: 105.442702,
      lat: 25.099014,
      childrenNum: 0,
      parent: 522300,
    },
    {
      name: "黔东南苗族侗族自治州",
      level: "city",
      adcode: 522600,
      lng: 107.982838,
      lat: 26.583759,
      childrenNum: 16,
      parent: 52e4,
    },
    {
      name: "凯里市",
      level: "district",
      adcode: 522601,
      lng: 107.981409,
      lat: 26.5662,
      childrenNum: 0,
      parent: 522600,
    },
    {
      name: "黄平县",
      level: "district",
      adcode: 522622,
      lng: 107.916651,
      lat: 26.905278,
      childrenNum: 0,
      parent: 522600,
    },
    {
      name: "施秉县",
      level: "district",
      adcode: 522623,
      lng: 108.124531,
      lat: 27.033107,
      childrenNum: 0,
      parent: 522600,
    },
    {
      name: "三穗县",
      level: "district",
      adcode: 522624,
      lng: 108.675265,
      lat: 26.953359,
      childrenNum: 0,
      parent: 522600,
    },
    {
      name: "镇远县",
      level: "district",
      adcode: 522625,
      lng: 108.429536,
      lat: 27.049033,
      childrenNum: 0,
      parent: 522600,
    },
    {
      name: "岑巩县",
      level: "district",
      adcode: 522626,
      lng: 108.815855,
      lat: 27.174124,
      childrenNum: 0,
      parent: 522600,
    },
    {
      name: "天柱县",
      level: "district",
      adcode: 522627,
      lng: 109.207826,
      lat: 26.909548,
      childrenNum: 0,
      parent: 522600,
    },
    {
      name: "锦屏县",
      level: "district",
      adcode: 522628,
      lng: 109.200808,
      lat: 26.675919,
      childrenNum: 0,
      parent: 522600,
    },
    {
      name: "剑河县",
      level: "district",
      adcode: 522629,
      lng: 108.441501,
      lat: 26.728274,
      childrenNum: 0,
      parent: 522600,
    },
    {
      name: "台江县",
      level: "district",
      adcode: 522630,
      lng: 108.321244,
      lat: 26.667525,
      childrenNum: 0,
      parent: 522600,
    },
    {
      name: "黎平县",
      level: "district",
      adcode: 522631,
      lng: 109.125826,
      lat: 26.213304,
      childrenNum: 0,
      parent: 522600,
    },
    {
      name: "榕江县",
      level: "district",
      adcode: 522632,
      lng: 108.52188,
      lat: 25.931893,
      childrenNum: 0,
      parent: 522600,
    },
    {
      name: "从江县",
      level: "district",
      adcode: 522633,
      lng: 108.904998,
      lat: 25.754638,
      childrenNum: 0,
      parent: 522600,
    },
    {
      name: "雷山县",
      level: "district",
      adcode: 522634,
      lng: 108.078217,
      lat: 26.378892,
      childrenNum: 0,
      parent: 522600,
    },
    {
      name: "麻江县",
      level: "district",
      adcode: 522635,
      lng: 107.589455,
      lat: 26.49129,
      childrenNum: 0,
      parent: 522600,
    },
    {
      name: "丹寨县",
      level: "district",
      adcode: 522636,
      lng: 107.789301,
      lat: 26.19857,
      childrenNum: 0,
      parent: 522600,
    },
    {
      name: "黔南布依族苗族自治州",
      level: "city",
      adcode: 522700,
      lng: 107.522303,
      lat: 26.253136,
      childrenNum: 12,
      parent: 52e4,
    },
    {
      name: "都匀市",
      level: "district",
      adcode: 522701,
      lng: 107.518628,
      lat: 26.259456,
      childrenNum: 0,
      parent: 522700,
    },
    {
      name: "福泉市",
      level: "district",
      adcode: 522702,
      lng: 107.520371,
      lat: 26.686773,
      childrenNum: 0,
      parent: 522700,
    },
    {
      name: "荔波县",
      level: "district",
      adcode: 522722,
      lng: 107.898809,
      lat: 25.42379,
      childrenNum: 0,
      parent: 522700,
    },
    {
      name: "贵定县",
      level: "district",
      adcode: 522723,
      lng: 107.232208,
      lat: 26.557205,
      childrenNum: 0,
      parent: 522700,
    },
    {
      name: "瓮安县",
      level: "district",
      adcode: 522725,
      lng: 107.471307,
      lat: 27.07838,
      childrenNum: 0,
      parent: 522700,
    },
    {
      name: "独山县",
      level: "district",
      adcode: 522726,
      lng: 107.557591,
      lat: 25.865418,
      childrenNum: 0,
      parent: 522700,
    },
    {
      name: "平塘县",
      level: "district",
      adcode: 522727,
      lng: 107.322635,
      lat: 25.822395,
      childrenNum: 0,
      parent: 522700,
    },
    {
      name: "罗甸县",
      level: "district",
      adcode: 522728,
      lng: 106.751724,
      lat: 25.42616,
      childrenNum: 0,
      parent: 522700,
    },
    {
      name: "长顺县",
      level: "district",
      adcode: 522729,
      lng: 106.44057,
      lat: 26.003187,
      childrenNum: 0,
      parent: 522700,
    },
    {
      name: "龙里县",
      level: "district",
      adcode: 522730,
      lng: 106.979177,
      lat: 26.453546,
      childrenNum: 0,
      parent: 522700,
    },
    {
      name: "惠水县",
      level: "district",
      adcode: 522731,
      lng: 106.656993,
      lat: 26.132045,
      childrenNum: 0,
      parent: 522700,
    },
    {
      name: "三都水族自治县",
      level: "district",
      adcode: 522732,
      lng: 107.869489,
      lat: 25.983572,
      childrenNum: 0,
      parent: 522700,
    },
    {
      name: "云南省",
      level: "province",
      adcode: 53e4,
      lng: 102.709372,
      lat: 25.046432,
      childrenNum: 16,
      parent: 1e5,
    },
    {
      name: "昆明市",
      level: "city",
      adcode: 530100,
      lng: 102.833669,
      lat: 24.88149,
      childrenNum: 14,
      parent: 53e4,
    },
    {
      name: "五华区",
      level: "district",
      adcode: 530102,
      lng: 102.707262,
      lat: 25.043635,
      childrenNum: 0,
      parent: 530100,
    },
    {
      name: "盘龙区",
      level: "district",
      adcode: 530103,
      lng: 102.751643,
      lat: 25.116512,
      childrenNum: 0,
      parent: 530100,
    },
    {
      name: "官渡区",
      level: "district",
      adcode: 530111,
      lng: 102.748888,
      lat: 24.950285,
      childrenNum: 0,
      parent: 530100,
    },
    {
      name: "西山区",
      level: "district",
      adcode: 530112,
      lng: 102.664426,
      lat: 25.038039,
      childrenNum: 0,
      parent: 530100,
    },
    {
      name: "东川区",
      level: "district",
      adcode: 530113,
      lng: 103.187825,
      lat: 26.082997,
      childrenNum: 0,
      parent: 530100,
    },
    {
      name: "呈贡区",
      level: "district",
      adcode: 530114,
      lng: 102.822104,
      lat: 24.885738,
      childrenNum: 0,
      parent: 530100,
    },
    {
      name: "晋宁区",
      level: "district",
      adcode: 530115,
      lng: 102.595325,
      lat: 24.669077,
      childrenNum: 0,
      parent: 530100,
    },
    {
      name: "富民县",
      level: "district",
      adcode: 530124,
      lng: 102.497722,
      lat: 25.221924,
      childrenNum: 0,
      parent: 530100,
    },
    {
      name: "宜良县",
      level: "district",
      adcode: 530125,
      lng: 103.141674,
      lat: 24.91983,
      childrenNum: 0,
      parent: 530100,
    },
    {
      name: "石林彝族自治县",
      level: "district",
      adcode: 530126,
      lng: 103.290536,
      lat: 24.771761,
      childrenNum: 0,
      parent: 530100,
    },
    {
      name: "嵩明县",
      level: "district",
      adcode: 530127,
      lng: 103.043384,
      lat: 25.327273,
      childrenNum: 0,
      parent: 530100,
    },
    {
      name: "禄劝彝族苗族自治县",
      level: "district",
      adcode: 530128,
      lng: 102.471993,
      lat: 25.551768,
      childrenNum: 0,
      parent: 530100,
    },
    {
      name: "寻甸回族彝族自治县",
      level: "district",
      adcode: 530129,
      lng: 103.256559,
      lat: 25.558163,
      childrenNum: 0,
      parent: 530100,
    },
    {
      name: "安宁市",
      level: "district",
      adcode: 530181,
      lng: 102.47865,
      lat: 24.919831,
      childrenNum: 0,
      parent: 530100,
    },
    {
      name: "曲靖市",
      level: "city",
      adcode: 530300,
      lng: 103.796288,
      lat: 25.490866,
      childrenNum: 9,
      parent: 53e4,
    },
    {
      name: "麒麟区",
      level: "district",
      adcode: 530302,
      lng: 103.804406,
      lat: 25.496472,
      childrenNum: 0,
      parent: 530300,
    },
    {
      name: "沾益区",
      level: "district",
      adcode: 530303,
      lng: 103.822104,
      lat: 25.600424,
      childrenNum: 0,
      parent: 530300,
    },
    {
      name: "马龙区",
      level: "district",
      adcode: 530304,
      lng: 103.578459,
      lat: 25.428102,
      childrenNum: 0,
      parent: 530300,
    },
    {
      name: "陆良县",
      level: "district",
      adcode: 530322,
      lng: 103.66671,
      lat: 25.0293,
      childrenNum: 0,
      parent: 530300,
    },
    {
      name: "师宗县",
      level: "district",
      adcode: 530323,
      lng: 103.985224,
      lat: 24.822471,
      childrenNum: 0,
      parent: 530300,
    },
    {
      name: "罗平县",
      level: "district",
      adcode: 530324,
      lng: 104.297124,
      lat: 24.865388,
      childrenNum: 0,
      parent: 530300,
    },
    {
      name: "富源县",
      level: "district",
      adcode: 530325,
      lng: 104.255082,
      lat: 25.674217,
      childrenNum: 0,
      parent: 530300,
    },
    {
      name: "会泽县",
      level: "district",
      adcode: 530326,
      lng: 103.297155,
      lat: 26.417116,
      childrenNum: 0,
      parent: 530300,
    },
    {
      name: "宣威市",
      level: "district",
      adcode: 530381,
      lng: 104.104255,
      lat: 26.218956,
      childrenNum: 0,
      parent: 530300,
    },
    {
      name: "玉溪市",
      level: "city",
      adcode: 530400,
      lng: 102.526673,
      lat: 24.346786,
      childrenNum: 9,
      parent: 53e4,
    },
    {
      name: "红塔区",
      level: "district",
      adcode: 530402,
      lng: 102.540122,
      lat: 24.341215,
      childrenNum: 0,
      parent: 530400,
    },
    {
      name: "江川区",
      level: "district",
      adcode: 530403,
      lng: 102.748499,
      lat: 24.299441,
      childrenNum: 0,
      parent: 530400,
    },
    {
      name: "通海县",
      level: "district",
      adcode: 530423,
      lng: 102.725538,
      lat: 24.11114,
      childrenNum: 0,
      parent: 530400,
    },
    {
      name: "华宁县",
      level: "district",
      adcode: 530424,
      lng: 102.928914,
      lat: 24.19322,
      childrenNum: 0,
      parent: 530400,
    },
    {
      name: "易门县",
      level: "district",
      adcode: 530425,
      lng: 102.161947,
      lat: 24.672156,
      childrenNum: 0,
      parent: 530400,
    },
    {
      name: "峨山彝族自治县",
      level: "district",
      adcode: 530426,
      lng: 102.405698,
      lat: 24.168899,
      childrenNum: 0,
      parent: 530400,
    },
    {
      name: "新平彝族傣族自治县",
      level: "district",
      adcode: 530427,
      lng: 101.990805,
      lat: 24.070436,
      childrenNum: 0,
      parent: 530400,
    },
    {
      name: "元江哈尼族彝族傣族自治县",
      level: "district",
      adcode: 530428,
      lng: 101.998138,
      lat: 23.596068,
      childrenNum: 0,
      parent: 530400,
    },
    {
      name: "澄江市",
      level: "district",
      adcode: 530481,
      lng: 102.904181,
      lat: 24.675536,
      childrenNum: 0,
      parent: 530400,
    },
    {
      name: "保山市",
      level: "city",
      adcode: 530500,
      lng: 99.161489,
      lat: 25.112018,
      childrenNum: 5,
      parent: 53e4,
    },
    {
      name: "隆阳区",
      level: "district",
      adcode: 530502,
      lng: 99.165638,
      lat: 25.121137,
      childrenNum: 0,
      parent: 530500,
    },
    {
      name: "施甸县",
      level: "district",
      adcode: 530521,
      lng: 99.18919,
      lat: 24.723084,
      childrenNum: 0,
      parent: 530500,
    },
    {
      name: "龙陵县",
      level: "district",
      adcode: 530523,
      lng: 98.68941,
      lat: 24.586703,
      childrenNum: 0,
      parent: 530500,
    },
    {
      name: "昌宁县",
      level: "district",
      adcode: 530524,
      lng: 99.605105,
      lat: 24.827739,
      childrenNum: 0,
      parent: 530500,
    },
    {
      name: "腾冲市",
      level: "district",
      adcode: 530581,
      lng: 98.490276,
      lat: 25.020283,
      childrenNum: 0,
      parent: 530500,
    },
    {
      name: "昭通市",
      level: "city",
      adcode: 530600,
      lng: 103.717078,
      lat: 27.338185,
      childrenNum: 11,
      parent: 53e4,
    },
    {
      name: "昭阳区",
      level: "district",
      adcode: 530602,
      lng: 103.706323,
      lat: 27.320035,
      childrenNum: 0,
      parent: 530600,
    },
    {
      name: "鲁甸县",
      level: "district",
      adcode: 530621,
      lng: 103.557969,
      lat: 27.186668,
      childrenNum: 0,
      parent: 530600,
    },
    {
      name: "巧家县",
      level: "district",
      adcode: 530622,
      lng: 102.935343,
      lat: 26.896904,
      childrenNum: 0,
      parent: 530600,
    },
    {
      name: "盐津县",
      level: "district",
      adcode: 530623,
      lng: 104.234458,
      lat: 28.108475,
      childrenNum: 0,
      parent: 530600,
    },
    {
      name: "大关县",
      level: "district",
      adcode: 530624,
      lng: 103.891164,
      lat: 27.748054,
      childrenNum: 0,
      parent: 530600,
    },
    {
      name: "永善县",
      level: "district",
      adcode: 530625,
      lng: 103.63756,
      lat: 28.229018,
      childrenNum: 0,
      parent: 530600,
    },
    {
      name: "绥江县",
      level: "district",
      adcode: 530626,
      lng: 103.968995,
      lat: 28.592119,
      childrenNum: 0,
      parent: 530600,
    },
    {
      name: "镇雄县",
      level: "district",
      adcode: 530627,
      lng: 104.873486,
      lat: 27.441527,
      childrenNum: 0,
      parent: 530600,
    },
    {
      name: "彝良县",
      level: "district",
      adcode: 530628,
      lng: 104.055991,
      lat: 27.624277,
      childrenNum: 0,
      parent: 530600,
    },
    {
      name: "威信县",
      level: "district",
      adcode: 530629,
      lng: 105.049012,
      lat: 27.846839,
      childrenNum: 0,
      parent: 530600,
    },
    {
      name: "水富市",
      level: "district",
      adcode: 530681,
      lng: 104.415964,
      lat: 28.629951,
      childrenNum: 0,
      parent: 530600,
    },
    {
      name: "丽江市",
      level: "city",
      adcode: 530700,
      lng: 100.225936,
      lat: 26.855165,
      childrenNum: 5,
      parent: 53e4,
    },
    {
      name: "古城区",
      level: "district",
      adcode: 530702,
      lng: 100.22583,
      lat: 26.876468,
      childrenNum: 0,
      parent: 530700,
    },
    {
      name: "玉龙纳西族自治县",
      level: "district",
      adcode: 530721,
      lng: 100.236967,
      lat: 26.821494,
      childrenNum: 0,
      parent: 530700,
    },
    {
      name: "永胜县",
      level: "district",
      adcode: 530722,
      lng: 100.750907,
      lat: 26.684215,
      childrenNum: 0,
      parent: 530700,
    },
    {
      name: "华坪县",
      level: "district",
      adcode: 530723,
      lng: 101.265373,
      lat: 26.629598,
      childrenNum: 0,
      parent: 530700,
    },
    {
      name: "宁蒗彝族自治县",
      level: "district",
      adcode: 530724,
      lng: 100.851083,
      lat: 27.282207,
      childrenNum: 0,
      parent: 530700,
    },
    {
      name: "普洱市",
      level: "city",
      adcode: 530800,
      lng: 100.966011,
      lat: 22.825229,
      childrenNum: 10,
      parent: 53e4,
    },
    {
      name: "思茅区",
      level: "district",
      adcode: 530802,
      lng: 100.977069,
      lat: 22.786769,
      childrenNum: 0,
      parent: 530800,
    },
    {
      name: "宁洱哈尼族彝族自治县",
      level: "district",
      adcode: 530821,
      lng: 101.045743,
      lat: 23.048809,
      childrenNum: 0,
      parent: 530800,
    },
    {
      name: "墨江哈尼族自治县",
      level: "district",
      adcode: 530822,
      lng: 101.692461,
      lat: 23.431894,
      childrenNum: 0,
      parent: 530800,
    },
    {
      name: "景东彝族自治县",
      level: "district",
      adcode: 530823,
      lng: 100.833877,
      lat: 24.446731,
      childrenNum: 0,
      parent: 530800,
    },
    {
      name: "景谷傣族彝族自治县",
      level: "district",
      adcode: 530824,
      lng: 100.702807,
      lat: 23.496987,
      childrenNum: 0,
      parent: 530800,
    },
    {
      name: "镇沅彝族哈尼族拉祜族自治县",
      level: "district",
      adcode: 530825,
      lng: 101.108733,
      lat: 24.00445,
      childrenNum: 0,
      parent: 530800,
    },
    {
      name: "江城哈尼族彝族自治县",
      level: "district",
      adcode: 530826,
      lng: 101.862344,
      lat: 22.585858,
      childrenNum: 0,
      parent: 530800,
    },
    {
      name: "孟连傣族拉祜族佤族自治县",
      level: "district",
      adcode: 530827,
      lng: 99.584225,
      lat: 22.329053,
      childrenNum: 0,
      parent: 530800,
    },
    {
      name: "澜沧拉祜族自治县",
      level: "district",
      adcode: 530828,
      lng: 99.932045,
      lat: 22.555799,
      childrenNum: 0,
      parent: 530800,
    },
    {
      name: "西盟佤族自治县",
      level: "district",
      adcode: 530829,
      lng: 99.59016,
      lat: 22.644237,
      childrenNum: 0,
      parent: 530800,
    },
    {
      name: "临沧市",
      level: "city",
      adcode: 530900,
      lng: 100.088837,
      lat: 23.884175,
      childrenNum: 8,
      parent: 53e4,
    },
    {
      name: "临翔区",
      level: "district",
      adcode: 530902,
      lng: 100.082073,
      lat: 23.895298,
      childrenNum: 0,
      parent: 530900,
    },
    {
      name: "凤庆县",
      level: "district",
      adcode: 530921,
      lng: 99.92873,
      lat: 24.580559,
      childrenNum: 0,
      parent: 530900,
    },
    {
      name: "云县",
      level: "district",
      adcode: 530922,
      lng: 100.1303,
      lat: 24.444461,
      childrenNum: 0,
      parent: 530900,
    },
    {
      name: "永德县",
      level: "district",
      adcode: 530923,
      lng: 99.258702,
      lat: 24.018463,
      childrenNum: 0,
      parent: 530900,
    },
    {
      name: "镇康县",
      level: "district",
      adcode: 530924,
      lng: 98.825389,
      lat: 23.762886,
      childrenNum: 0,
      parent: 530900,
    },
    {
      name: "双江拉祜族佤族布朗族傣族自治县",
      level: "district",
      adcode: 530925,
      lng: 99.828225,
      lat: 23.472719,
      childrenNum: 0,
      parent: 530900,
    },
    {
      name: "耿马傣族佤族自治县",
      level: "district",
      adcode: 530926,
      lng: 99.397126,
      lat: 23.538092,
      childrenNum: 0,
      parent: 530900,
    },
    {
      name: "沧源佤族自治县",
      level: "district",
      adcode: 530927,
      lng: 99.245894,
      lat: 23.146758,
      childrenNum: 0,
      parent: 530900,
    },
    {
      name: "楚雄彝族自治州",
      level: "city",
      adcode: 532300,
      lng: 101.528304,
      lat: 25.045678,
      childrenNum: 10,
      parent: 53e4,
    },
    {
      name: "楚雄市",
      level: "district",
      adcode: 532301,
      lng: 101.546242,
      lat: 25.032945,
      childrenNum: 0,
      parent: 532300,
    },
    {
      name: "双柏县",
      level: "district",
      adcode: 532322,
      lng: 101.642369,
      lat: 24.688814,
      childrenNum: 0,
      parent: 532300,
    },
    {
      name: "牟定县",
      level: "district",
      adcode: 532323,
      lng: 101.546898,
      lat: 25.312939,
      childrenNum: 0,
      parent: 532300,
    },
    {
      name: "南华县",
      level: "district",
      adcode: 532324,
      lng: 101.283236,
      lat: 25.200163,
      childrenNum: 0,
      parent: 532300,
    },
    {
      name: "姚安县",
      level: "district",
      adcode: 532325,
      lng: 101.241632,
      lat: 25.504287,
      childrenNum: 0,
      parent: 532300,
    },
    {
      name: "大姚县",
      level: "district",
      adcode: 532326,
      lng: 101.336576,
      lat: 25.729551,
      childrenNum: 0,
      parent: 532300,
    },
    {
      name: "永仁县",
      level: "district",
      adcode: 532327,
      lng: 101.666795,
      lat: 26.049522,
      childrenNum: 0,
      parent: 532300,
    },
    {
      name: "元谋县",
      level: "district",
      adcode: 532328,
      lng: 101.87434,
      lat: 25.704499,
      childrenNum: 0,
      parent: 532300,
    },
    {
      name: "武定县",
      level: "district",
      adcode: 532329,
      lng: 102.403949,
      lat: 25.530731,
      childrenNum: 0,
      parent: 532300,
    },
    {
      name: "禄丰市",
      level: "district",
      adcode: 532331,
      lng: 102.079082,
      lat: 25.151061,
      childrenNum: 0,
      parent: 532300,
    },
    {
      name: "红河哈尼族彝族自治州",
      level: "city",
      adcode: 532500,
      lng: 103.374873,
      lat: 23.363129,
      childrenNum: 13,
      parent: 53e4,
    },
    {
      name: "个旧市",
      level: "district",
      adcode: 532501,
      lng: 103.152663,
      lat: 23.389935,
      childrenNum: 0,
      parent: 532500,
    },
    {
      name: "开远市",
      level: "district",
      adcode: 532502,
      lng: 103.266908,
      lat: 23.714518,
      childrenNum: 0,
      parent: 532500,
    },
    {
      name: "蒙自市",
      level: "district",
      adcode: 532503,
      lng: 103.364936,
      lat: 23.396111,
      childrenNum: 0,
      parent: 532500,
    },
    {
      name: "弥勒市",
      level: "district",
      adcode: 532504,
      lng: 103.414817,
      lat: 24.411774,
      childrenNum: 0,
      parent: 532500,
    },
    {
      name: "屏边苗族自治县",
      level: "district",
      adcode: 532523,
      lng: 103.675458,
      lat: 22.986733,
      childrenNum: 0,
      parent: 532500,
    },
    {
      name: "建水县",
      level: "district",
      adcode: 532524,
      lng: 102.826178,
      lat: 23.635824,
      childrenNum: 0,
      parent: 532500,
    },
    {
      name: "石屏县",
      level: "district",
      adcode: 532525,
      lng: 102.496138,
      lat: 23.705707,
      childrenNum: 0,
      parent: 532500,
    },
    {
      name: "泸西县",
      level: "district",
      adcode: 532527,
      lng: 103.76615,
      lat: 24.531981,
      childrenNum: 0,
      parent: 532500,
    },
    {
      name: "元阳县",
      level: "district",
      adcode: 532528,
      lng: 102.835358,
      lat: 23.219671,
      childrenNum: 0,
      parent: 532500,
    },
    {
      name: "红河县",
      level: "district",
      adcode: 532529,
      lng: 102.420566,
      lat: 23.368946,
      childrenNum: 0,
      parent: 532500,
    },
    {
      name: "金平苗族瑶族傣族自治县",
      level: "district",
      adcode: 532530,
      lng: 103.227982,
      lat: 22.769894,
      childrenNum: 0,
      parent: 532500,
    },
    {
      name: "绿春县",
      level: "district",
      adcode: 532531,
      lng: 102.392655,
      lat: 22.993654,
      childrenNum: 0,
      parent: 532500,
    },
    {
      name: "河口瑶族自治县",
      level: "district",
      adcode: 532532,
      lng: 103.939265,
      lat: 22.529438,
      childrenNum: 0,
      parent: 532500,
    },
    {
      name: "文山壮族苗族自治州",
      level: "city",
      adcode: 532600,
      lng: 104.21567,
      lat: 23.400983,
      childrenNum: 8,
      parent: 53e4,
    },
    {
      name: "文山市",
      level: "district",
      adcode: 532601,
      lng: 104.233237,
      lat: 23.38683,
      childrenNum: 0,
      parent: 532600,
    },
    {
      name: "砚山县",
      level: "district",
      adcode: 532622,
      lng: 104.336905,
      lat: 23.605075,
      childrenNum: 0,
      parent: 532600,
    },
    {
      name: "西畴县",
      level: "district",
      adcode: 532623,
      lng: 104.671802,
      lat: 23.437707,
      childrenNum: 0,
      parent: 532600,
    },
    {
      name: "麻栗坡县",
      level: "district",
      adcode: 532624,
      lng: 104.702732,
      lat: 23.125837,
      childrenNum: 0,
      parent: 532600,
    },
    {
      name: "马关县",
      level: "district",
      adcode: 532625,
      lng: 104.394524,
      lat: 23.013108,
      childrenNum: 0,
      parent: 532600,
    },
    {
      name: "丘北县",
      level: "district",
      adcode: 532626,
      lng: 104.166713,
      lat: 24.05064,
      childrenNum: 0,
      parent: 532600,
    },
    {
      name: "广南县",
      level: "district",
      adcode: 532627,
      lng: 105.055075,
      lat: 24.046378,
      childrenNum: 0,
      parent: 532600,
    },
    {
      name: "富宁县",
      level: "district",
      adcode: 532628,
      lng: 105.630921,
      lat: 23.625072,
      childrenNum: 0,
      parent: 532600,
    },
    {
      name: "西双版纳傣族自治州",
      level: "city",
      adcode: 532800,
      lng: 100.797002,
      lat: 22.009037,
      childrenNum: 3,
      parent: 53e4,
    },
    {
      name: "景洪市",
      level: "district",
      adcode: 532801,
      lng: 100.799595,
      lat: 22.011792,
      childrenNum: 0,
      parent: 532800,
    },
    {
      name: "勐海县",
      level: "district",
      adcode: 532822,
      lng: 100.452444,
      lat: 21.957323,
      childrenNum: 0,
      parent: 532800,
    },
    {
      name: "勐腊县",
      level: "district",
      adcode: 532823,
      lng: 101.564635,
      lat: 21.459233,
      childrenNum: 0,
      parent: 532800,
    },
    {
      name: "大理白族自治州",
      level: "city",
      adcode: 532900,
      lng: 100.267608,
      lat: 25.606548,
      childrenNum: 12,
      parent: 53e4,
    },
    {
      name: "大理市",
      level: "district",
      adcode: 532901,
      lng: 100.301614,
      lat: 25.678466,
      childrenNum: 0,
      parent: 532900,
    },
    {
      name: "漾濞彝族自治县",
      level: "district",
      adcode: 532922,
      lng: 99.958089,
      lat: 25.669944,
      childrenNum: 0,
      parent: 532900,
    },
    {
      name: "祥云县",
      level: "district",
      adcode: 532923,
      lng: 100.549961,
      lat: 25.483727,
      childrenNum: 0,
      parent: 532900,
    },
    {
      name: "宾川县",
      level: "district",
      adcode: 532924,
      lng: 100.590274,
      lat: 25.830491,
      childrenNum: 0,
      parent: 532900,
    },
    {
      name: "弥渡县",
      level: "district",
      adcode: 532925,
      lng: 100.491038,
      lat: 25.343778,
      childrenNum: 0,
      parent: 532900,
    },
    {
      name: "南涧彝族自治县",
      level: "district",
      adcode: 532926,
      lng: 100.510333,
      lat: 25.032353,
      childrenNum: 0,
      parent: 532900,
    },
    {
      name: "巍山彝族回族自治县",
      level: "district",
      adcode: 532927,
      lng: 100.306977,
      lat: 25.227065,
      childrenNum: 0,
      parent: 532900,
    },
    {
      name: "永平县",
      level: "district",
      adcode: 532928,
      lng: 99.54063,
      lat: 25.464134,
      childrenNum: 0,
      parent: 532900,
    },
    {
      name: "云龙县",
      level: "district",
      adcode: 532929,
      lng: 99.371021,
      lat: 25.885733,
      childrenNum: 0,
      parent: 532900,
    },
    {
      name: "洱源县",
      level: "district",
      adcode: 532930,
      lng: 99.962294,
      lat: 26.11337,
      childrenNum: 0,
      parent: 532900,
    },
    {
      name: "剑川县",
      level: "district",
      adcode: 532931,
      lng: 99.905041,
      lat: 26.536889,
      childrenNum: 0,
      parent: 532900,
    },
    {
      name: "鹤庆县",
      level: "district",
      adcode: 532932,
      lng: 100.176331,
      lat: 26.560122,
      childrenNum: 0,
      parent: 532900,
    },
    {
      name: "德宏傣族景颇族自治州",
      level: "city",
      adcode: 533100,
      lng: 98.585621,
      lat: 24.433146,
      childrenNum: 5,
      parent: 53e4,
    },
    {
      name: "瑞丽市",
      level: "district",
      adcode: 533102,
      lng: 97.855423,
      lat: 24.018377,
      childrenNum: 0,
      parent: 533100,
    },
    {
      name: "芒市",
      level: "district",
      adcode: 533103,
      lng: 98.58809,
      lat: 24.433766,
      childrenNum: 0,
      parent: 533100,
    },
    {
      name: "梁河县",
      level: "district",
      adcode: 533122,
      lng: 98.296584,
      lat: 24.804275,
      childrenNum: 0,
      parent: 533100,
    },
    {
      name: "盈江县",
      level: "district",
      adcode: 533123,
      lng: 97.943474,
      lat: 24.691325,
      childrenNum: 0,
      parent: 533100,
    },
    {
      name: "陇川县",
      level: "district",
      adcode: 533124,
      lng: 97.793359,
      lat: 24.182347,
      childrenNum: 0,
      parent: 533100,
    },
    {
      name: "怒江傈僳族自治州",
      level: "city",
      adcode: 533300,
      lng: 98.8566,
      lat: 25.817555,
      childrenNum: 4,
      parent: 53e4,
    },
    {
      name: "泸水市",
      level: "district",
      adcode: 533301,
      lng: 98.857723,
      lat: 25.822579,
      childrenNum: 0,
      parent: 533300,
    },
    {
      name: "福贡县",
      level: "district",
      adcode: 533323,
      lng: 98.869132,
      lat: 26.901831,
      childrenNum: 0,
      parent: 533300,
    },
    {
      name: "贡山独龙族怒族自治县",
      level: "district",
      adcode: 533324,
      lng: 98.666279,
      lat: 27.740839,
      childrenNum: 0,
      parent: 533300,
    },
    {
      name: "兰坪白族普米族自治县",
      level: "district",
      adcode: 533325,
      lng: 99.416628,
      lat: 26.453622,
      childrenNum: 0,
      parent: 533300,
    },
    {
      name: "迪庆藏族自治州",
      level: "city",
      adcode: 533400,
      lng: 99.70211,
      lat: 27.819149,
      childrenNum: 3,
      parent: 53e4,
    },
    {
      name: "香格里拉市",
      level: "district",
      adcode: 533401,
      lng: 99.743582,
      lat: 27.842185,
      childrenNum: 0,
      parent: 533400,
    },
    {
      name: "德钦县",
      level: "district",
      adcode: 533422,
      lng: 98.917851,
      lat: 28.464213,
      childrenNum: 0,
      parent: 533400,
    },
    {
      name: "维西傈僳族自治县",
      level: "district",
      adcode: 533423,
      lng: 99.300937,
      lat: 27.163808,
      childrenNum: 0,
      parent: 533400,
    },
    {
      name: "西藏自治区",
      level: "province",
      adcode: 54e4,
      lng: 91.117449,
      lat: 29.648694,
      childrenNum: 7,
      parent: 1e5,
    },
    {
      name: "拉萨市",
      level: "city",
      adcode: 540100,
      lng: 91.171924,
      lat: 29.653491,
      childrenNum: 8,
      parent: 54e4,
    },
    {
      name: "城关区",
      level: "district",
      adcode: 540102,
      lng: 91.140368,
      lat: 29.654813,
      childrenNum: 0,
      parent: 540100,
    },
    {
      name: "堆龙德庆区",
      level: "district",
      adcode: 540103,
      lng: 91.002866,
      lat: 29.646815,
      childrenNum: 0,
      parent: 540100,
    },
    {
      name: "达孜区",
      level: "district",
      adcode: 540104,
      lng: 91.349503,
      lat: 29.670173,
      childrenNum: 0,
      parent: 540100,
    },
    {
      name: "林周县",
      level: "district",
      adcode: 540121,
      lng: 91.265287,
      lat: 29.893545,
      childrenNum: 0,
      parent: 540100,
    },
    {
      name: "当雄县",
      level: "district",
      adcode: 540122,
      lng: 91.101186,
      lat: 30.473134,
      childrenNum: 0,
      parent: 540100,
    },
    {
      name: "尼木县",
      level: "district",
      adcode: 540123,
      lng: 90.16446,
      lat: 29.43202,
      childrenNum: 0,
      parent: 540100,
    },
    {
      name: "曲水县",
      level: "district",
      adcode: 540124,
      lng: 90.743355,
      lat: 29.354293,
      childrenNum: 0,
      parent: 540100,
    },
    {
      name: "墨竹工卡县",
      level: "district",
      adcode: 540127,
      lng: 91.739134,
      lat: 29.850344,
      childrenNum: 0,
      parent: 540100,
    },
    {
      name: "日喀则市",
      level: "city",
      adcode: 540200,
      lng: 88.880423,
      lat: 29.266838,
      childrenNum: 18,
      parent: 54e4,
    },
    {
      name: "桑珠孜区",
      level: "district",
      adcode: 540202,
      lng: 88.898503,
      lat: 29.247726,
      childrenNum: 0,
      parent: 540200,
    },
    {
      name: "南木林县",
      level: "district",
      adcode: 540221,
      lng: 89.099243,
      lat: 29.682331,
      childrenNum: 0,
      parent: 540200,
    },
    {
      name: "江孜县",
      level: "district",
      adcode: 540222,
      lng: 89.605654,
      lat: 28.91186,
      childrenNum: 0,
      parent: 540200,
    },
    {
      name: "定日县",
      level: "district",
      adcode: 540223,
      lng: 87.12612,
      lat: 28.658743,
      childrenNum: 0,
      parent: 540200,
    },
    {
      name: "萨迦县",
      level: "district",
      adcode: 540224,
      lng: 88.021674,
      lat: 28.899664,
      childrenNum: 0,
      parent: 540200,
    },
    {
      name: "拉孜县",
      level: "district",
      adcode: 540225,
      lng: 87.636934,
      lat: 29.08188,
      childrenNum: 0,
      parent: 540200,
    },
    {
      name: "昂仁县",
      level: "district",
      adcode: 540226,
      lng: 87.227739,
      lat: 29.299444,
      childrenNum: 0,
      parent: 540200,
    },
    {
      name: "谢通门县",
      level: "district",
      adcode: 540227,
      lng: 88.255784,
      lat: 29.425455,
      childrenNum: 0,
      parent: 540200,
    },
    {
      name: "白朗县",
      level: "district",
      adcode: 540228,
      lng: 89.261977,
      lat: 29.107688,
      childrenNum: 0,
      parent: 540200,
    },
    {
      name: "仁布县",
      level: "district",
      adcode: 540229,
      lng: 89.841983,
      lat: 29.230933,
      childrenNum: 0,
      parent: 540200,
    },
    {
      name: "康马县",
      level: "district",
      adcode: 540230,
      lng: 89.681663,
      lat: 28.555627,
      childrenNum: 0,
      parent: 540200,
    },
    {
      name: "定结县",
      level: "district",
      adcode: 540231,
      lng: 87.765872,
      lat: 28.364159,
      childrenNum: 0,
      parent: 540200,
    },
    {
      name: "仲巴县",
      level: "district",
      adcode: 540232,
      lng: 84.03153,
      lat: 29.770279,
      childrenNum: 0,
      parent: 540200,
    },
    {
      name: "亚东县",
      level: "district",
      adcode: 540233,
      lng: 88.907136,
      lat: 27.486094,
      childrenNum: 0,
      parent: 540200,
    },
    {
      name: "吉隆县",
      level: "district",
      adcode: 540234,
      lng: 85.298109,
      lat: 28.856542,
      childrenNum: 0,
      parent: 540200,
    },
    {
      name: "聂拉木县",
      level: "district",
      adcode: 540235,
      lng: 85.982237,
      lat: 28.155186,
      childrenNum: 0,
      parent: 540200,
    },
    {
      name: "萨嘎县",
      level: "district",
      adcode: 540236,
      lng: 85.232941,
      lat: 29.328818,
      childrenNum: 0,
      parent: 540200,
    },
    {
      name: "岗巴县",
      level: "district",
      adcode: 540237,
      lng: 88.515318,
      lat: 28.271189,
      childrenNum: 0,
      parent: 540200,
    },
    {
      name: "昌都市",
      level: "city",
      adcode: 540300,
      lng: 97.170425,
      lat: 31.142879,
      childrenNum: 11,
      parent: 54e4,
    },
    {
      name: "卡若区",
      level: "district",
      adcode: 540302,
      lng: 97.196021,
      lat: 31.112087,
      childrenNum: 0,
      parent: 540300,
    },
    {
      name: "江达县",
      level: "district",
      adcode: 540321,
      lng: 98.218336,
      lat: 31.499176,
      childrenNum: 0,
      parent: 540300,
    },
    {
      name: "贡觉县",
      level: "district",
      adcode: 540322,
      lng: 98.27097,
      lat: 30.860099,
      childrenNum: 0,
      parent: 540300,
    },
    {
      name: "类乌齐县",
      level: "district",
      adcode: 540323,
      lng: 96.600246,
      lat: 31.211601,
      childrenNum: 0,
      parent: 540300,
    },
    {
      name: "丁青县",
      level: "district",
      adcode: 540324,
      lng: 95.619868,
      lat: 31.409024,
      childrenNum: 0,
      parent: 540300,
    },
    {
      name: "察雅县",
      level: "district",
      adcode: 540325,
      lng: 97.568752,
      lat: 30.653943,
      childrenNum: 0,
      parent: 540300,
    },
    {
      name: "八宿县",
      level: "district",
      adcode: 540326,
      lng: 96.917836,
      lat: 30.053209,
      childrenNum: 0,
      parent: 540300,
    },
    {
      name: "左贡县",
      level: "district",
      adcode: 540327,
      lng: 97.841176,
      lat: 29.671488,
      childrenNum: 0,
      parent: 540300,
    },
    {
      name: "芒康县",
      level: "district",
      adcode: 540328,
      lng: 98.593493,
      lat: 29.679957,
      childrenNum: 0,
      parent: 540300,
    },
    {
      name: "洛隆县",
      level: "district",
      adcode: 540329,
      lng: 95.825169,
      lat: 30.741988,
      childrenNum: 0,
      parent: 540300,
    },
    {
      name: "边坝县",
      level: "district",
      adcode: 540330,
      lng: 94.7078,
      lat: 30.933652,
      childrenNum: 0,
      parent: 540300,
    },
    {
      name: "林芝市",
      level: "city",
      adcode: 540400,
      lng: 94.361436,
      lat: 29.64875,
      childrenNum: 7,
      parent: 54e4,
    },
    {
      name: "巴宜区",
      level: "district",
      adcode: 540402,
      lng: 94.361094,
      lat: 29.636576,
      childrenNum: 0,
      parent: 540400,
    },
    {
      name: "工布江达县",
      level: "district",
      adcode: 540421,
      lng: 93.246077,
      lat: 29.88528,
      childrenNum: 0,
      parent: 540400,
    },
    {
      name: "米林县",
      level: "district",
      adcode: 540422,
      lng: 94.213059,
      lat: 29.215971,
      childrenNum: 0,
      parent: 540400,
    },
    {
      name: "墨脱县",
      level: "district",
      adcode: 540423,
      lng: 95.332108,
      lat: 29.325425,
      childrenNum: 0,
      parent: 540400,
    },
    {
      name: "波密县",
      level: "district",
      adcode: 540424,
      lng: 95.768439,
      lat: 29.859751,
      childrenNum: 0,
      parent: 540400,
    },
    {
      name: "察隅县",
      level: "district",
      adcode: 540425,
      lng: 97.466919,
      lat: 28.66128,
      childrenNum: 0,
      parent: 540400,
    },
    {
      name: "朗县",
      level: "district",
      adcode: 540426,
      lng: 93.074702,
      lat: 29.046337,
      childrenNum: 0,
      parent: 540400,
    },
    {
      name: "山南市",
      level: "city",
      adcode: 540500,
      lng: 91.771426,
      lat: 29.237722,
      childrenNum: 12,
      parent: 54e4,
    },
    {
      name: "乃东区",
      level: "district",
      adcode: 540502,
      lng: 91.761538,
      lat: 29.224904,
      childrenNum: 0,
      parent: 540500,
    },
    {
      name: "扎囊县",
      level: "district",
      adcode: 540521,
      lng: 91.33725,
      lat: 29.245113,
      childrenNum: 0,
      parent: 540500,
    },
    {
      name: "贡嘎县",
      level: "district",
      adcode: 540522,
      lng: 90.978425,
      lat: 29.290169,
      childrenNum: 0,
      parent: 540500,
    },
    {
      name: "桑日县",
      level: "district",
      adcode: 540523,
      lng: 92.017723,
      lat: 29.259439,
      childrenNum: 0,
      parent: 540500,
    },
    {
      name: "琼结县",
      level: "district",
      adcode: 540524,
      lng: 91.684307,
      lat: 29.024492,
      childrenNum: 0,
      parent: 540500,
    },
    {
      name: "曲松县",
      level: "district",
      adcode: 540525,
      lng: 92.203738,
      lat: 29.062826,
      childrenNum: 0,
      parent: 540500,
    },
    {
      name: "措美县",
      level: "district",
      adcode: 540526,
      lng: 91.433509,
      lat: 28.438202,
      childrenNum: 0,
      parent: 540500,
    },
    {
      name: "洛扎县",
      level: "district",
      adcode: 540527,
      lng: 90.859971,
      lat: 28.385811,
      childrenNum: 0,
      parent: 540500,
    },
    {
      name: "加查县",
      level: "district",
      adcode: 540528,
      lng: 92.592701,
      lat: 29.140355,
      childrenNum: 0,
      parent: 540500,
    },
    {
      name: "隆子县",
      level: "district",
      adcode: 540529,
      lng: 92.463309,
      lat: 28.408548,
      childrenNum: 0,
      parent: 540500,
    },
    {
      name: "错那县",
      level: "district",
      adcode: 540530,
      lng: 91.957155,
      lat: 27.991121,
      childrenNum: 0,
      parent: 540500,
    },
    {
      name: "浪卡子县",
      level: "district",
      adcode: 540531,
      lng: 90.400251,
      lat: 28.96693,
      childrenNum: 0,
      parent: 540500,
    },
    {
      name: "那曲市",
      level: "city",
      adcode: 540600,
      lng: 92.05151,
      lat: 31.477905,
      childrenNum: 11,
      parent: 54e4,
    },
    {
      name: "色尼区",
      level: "district",
      adcode: 540602,
      lng: 92.053498,
      lat: 31.469645,
      childrenNum: 0,
      parent: 540600,
    },
    {
      name: "嘉黎县",
      level: "district",
      adcode: 540621,
      lng: 93.232347,
      lat: 30.641543,
      childrenNum: 0,
      parent: 540600,
    },
    {
      name: "比如县",
      level: "district",
      adcode: 540622,
      lng: 93.681302,
      lat: 31.477914,
      childrenNum: 0,
      parent: 540600,
    },
    {
      name: "聂荣县",
      level: "district",
      adcode: 540623,
      lng: 92.303377,
      lat: 32.10775,
      childrenNum: 0,
      parent: 540600,
    },
    {
      name: "安多县",
      level: "district",
      adcode: 540624,
      lng: 91.68195,
      lat: 32.265016,
      childrenNum: 0,
      parent: 540600,
    },
    {
      name: "申扎县",
      level: "district",
      adcode: 540625,
      lng: 88.709936,
      lat: 30.93045,
      childrenNum: 0,
      parent: 540600,
    },
    {
      name: "索县",
      level: "district",
      adcode: 540626,
      lng: 93.785068,
      lat: 31.888045,
      childrenNum: 0,
      parent: 540600,
    },
    {
      name: "班戈县",
      level: "district",
      adcode: 540627,
      lng: 90.009822,
      lat: 31.392157,
      childrenNum: 0,
      parent: 540600,
    },
    {
      name: "巴青县",
      level: "district",
      adcode: 540628,
      lng: 94.053438,
      lat: 31.91847,
      childrenNum: 0,
      parent: 540600,
    },
    {
      name: "尼玛县",
      level: "district",
      adcode: 540629,
      lng: 87.236772,
      lat: 31.784701,
      childrenNum: 0,
      parent: 540600,
    },
    {
      name: "双湖县",
      level: "district",
      adcode: 540630,
      lng: 88.838017,
      lat: 33.188355,
      childrenNum: 0,
      parent: 540600,
    },
    {
      name: "阿里地区",
      level: "city",
      adcode: 542500,
      lng: 80.105786,
      lat: 32.500987,
      childrenNum: 7,
      parent: 54e4,
    },
    {
      name: "普兰县",
      level: "district",
      adcode: 542521,
      lng: 81.177116,
      lat: 30.290467,
      childrenNum: 0,
      parent: 542500,
    },
    {
      name: "札达县",
      level: "district",
      adcode: 542522,
      lng: 79.807096,
      lat: 31.479882,
      childrenNum: 0,
      parent: 542500,
    },
    {
      name: "噶尔县",
      level: "district",
      adcode: 542523,
      lng: 80.096591,
      lat: 32.492078,
      childrenNum: 0,
      parent: 542500,
    },
    {
      name: "日土县",
      level: "district",
      adcode: 542524,
      lng: 79.733552,
      lat: 33.382017,
      childrenNum: 0,
      parent: 542500,
    },
    {
      name: "革吉县",
      level: "district",
      adcode: 542525,
      lng: 81.145433,
      lat: 32.387233,
      childrenNum: 0,
      parent: 542500,
    },
    {
      name: "改则县",
      level: "district",
      adcode: 542526,
      lng: 84.062612,
      lat: 32.303148,
      childrenNum: 0,
      parent: 542500,
    },
    {
      name: "措勤县",
      level: "district",
      adcode: 542527,
      lng: 85.151881,
      lat: 31.017272,
      childrenNum: 0,
      parent: 542500,
    },
    {
      name: "陕西省",
      level: "province",
      adcode: 61e4,
      lng: 108.953939,
      lat: 34.266611,
      childrenNum: 10,
      parent: 1e5,
    },
    {
      name: "西安市",
      level: "city",
      adcode: 610100,
      lng: 108.939645,
      lat: 34.343207,
      childrenNum: 13,
      parent: 61e4,
    },
    {
      name: "新城区",
      level: "district",
      adcode: 610102,
      lng: 108.960707,
      lat: 34.266601,
      childrenNum: 0,
      parent: 610100,
    },
    {
      name: "碑林区",
      level: "district",
      adcode: 610103,
      lng: 108.940681,
      lat: 34.256727,
      childrenNum: 0,
      parent: 610100,
    },
    {
      name: "莲湖区",
      level: "district",
      adcode: 610104,
      lng: 108.944161,
      lat: 34.26535,
      childrenNum: 0,
      parent: 610100,
    },
    {
      name: "灞桥区",
      level: "district",
      adcode: 610111,
      lng: 109.064675,
      lat: 34.273111,
      childrenNum: 0,
      parent: 610100,
    },
    {
      name: "未央区",
      level: "district",
      adcode: 610112,
      lng: 108.946665,
      lat: 34.293109,
      childrenNum: 0,
      parent: 610100,
    },
    {
      name: "雁塔区",
      level: "district",
      adcode: 610113,
      lng: 108.948592,
      lat: 34.222517,
      childrenNum: 0,
      parent: 610100,
    },
    {
      name: "阎良区",
      level: "district",
      adcode: 610114,
      lng: 109.226124,
      lat: 34.662232,
      childrenNum: 0,
      parent: 610100,
    },
    {
      name: "临潼区",
      level: "district",
      adcode: 610115,
      lng: 109.214249,
      lat: 34.367181,
      childrenNum: 0,
      parent: 610100,
    },
    {
      name: "长安区",
      level: "district",
      adcode: 610116,
      lng: 108.906944,
      lat: 34.158668,
      childrenNum: 0,
      parent: 610100,
    },
    {
      name: "高陵区",
      level: "district",
      adcode: 610117,
      lng: 109.088269,
      lat: 34.53502,
      childrenNum: 0,
      parent: 610100,
    },
    {
      name: "鄠邑区",
      level: "district",
      adcode: 610118,
      lng: 108.604772,
      lat: 34.108707,
      childrenNum: 0,
      parent: 610100,
    },
    {
      name: "蓝田县",
      level: "district",
      adcode: 610122,
      lng: 109.323473,
      lat: 34.151256,
      childrenNum: 0,
      parent: 610100,
    },
    {
      name: "周至县",
      level: "district",
      adcode: 610124,
      lng: 108.222219,
      lat: 34.163592,
      childrenNum: 0,
      parent: 610100,
    },
    {
      name: "铜川市",
      level: "city",
      adcode: 610200,
      lng: 108.945116,
      lat: 34.897133,
      childrenNum: 4,
      parent: 61e4,
    },
    {
      name: "王益区",
      level: "district",
      adcode: 610202,
      lng: 109.075615,
      lat: 35.068925,
      childrenNum: 0,
      parent: 610200,
    },
    {
      name: "印台区",
      level: "district",
      adcode: 610203,
      lng: 109.099848,
      lat: 35.11454,
      childrenNum: 0,
      parent: 610200,
    },
    {
      name: "耀州区",
      level: "district",
      adcode: 610204,
      lng: 108.980095,
      lat: 34.909685,
      childrenNum: 0,
      parent: 610200,
    },
    {
      name: "宜君县",
      level: "district",
      adcode: 610222,
      lng: 109.117063,
      lat: 35.398624,
      childrenNum: 0,
      parent: 610200,
    },
    {
      name: "宝鸡市",
      level: "city",
      adcode: 610300,
      lng: 107.237682,
      lat: 34.362862,
      childrenNum: 12,
      parent: 61e4,
    },
    {
      name: "渭滨区",
      level: "district",
      adcode: 610302,
      lng: 107.155344,
      lat: 34.355068,
      childrenNum: 0,
      parent: 610300,
    },
    {
      name: "金台区",
      level: "district",
      adcode: 610303,
      lng: 107.232733,
      lat: 34.397071,
      childrenNum: 0,
      parent: 610300,
    },
    {
      name: "陈仓区",
      level: "district",
      adcode: 610304,
      lng: 107.368993,
      lat: 34.35073,
      childrenNum: 0,
      parent: 610300,
    },
    {
      name: "凤翔区",
      level: "district",
      adcode: 610322,
      lng: 107.401029,
      lat: 34.522167,
      childrenNum: 0,
      parent: 610300,
    },
    {
      name: "岐山县",
      level: "district",
      adcode: 610323,
      lng: 107.621397,
      lat: 34.44373,
      childrenNum: 0,
      parent: 610300,
    },
    {
      name: "扶风县",
      level: "district",
      adcode: 610324,
      lng: 107.900157,
      lat: 34.375636,
      childrenNum: 0,
      parent: 610300,
    },
    {
      name: "眉县",
      level: "district",
      adcode: 610326,
      lng: 107.750039,
      lat: 34.274774,
      childrenNum: 0,
      parent: 610300,
    },
    {
      name: "陇县",
      level: "district",
      adcode: 610327,
      lng: 106.864404,
      lat: 34.892985,
      childrenNum: 0,
      parent: 610300,
    },
    {
      name: "千阳县",
      level: "district",
      adcode: 610328,
      lng: 107.132421,
      lat: 34.642374,
      childrenNum: 0,
      parent: 610300,
    },
    {
      name: "麟游县",
      level: "district",
      adcode: 610329,
      lng: 107.793524,
      lat: 34.677902,
      childrenNum: 0,
      parent: 610300,
    },
    {
      name: "凤县",
      level: "district",
      adcode: 610330,
      lng: 106.515841,
      lat: 33.910797,
      childrenNum: 0,
      parent: 610300,
    },
    {
      name: "太白县",
      level: "district",
      adcode: 610331,
      lng: 107.318932,
      lat: 34.058299,
      childrenNum: 0,
      parent: 610300,
    },
    {
      name: "咸阳市",
      level: "city",
      adcode: 610400,
      lng: 108.708837,
      lat: 34.329896,
      childrenNum: 14,
      parent: 61e4,
    },
    {
      name: "秦都区",
      level: "district",
      adcode: 610402,
      lng: 108.706347,
      lat: 34.329478,
      childrenNum: 0,
      parent: 610400,
    },
    {
      name: "杨陵区",
      level: "district",
      adcode: 610403,
      lng: 108.084661,
      lat: 34.272084,
      childrenNum: 0,
      parent: 610400,
    },
    {
      name: "渭城区",
      level: "district",
      adcode: 610404,
      lng: 108.737062,
      lat: 34.36202,
      childrenNum: 0,
      parent: 610400,
    },
    {
      name: "三原县",
      level: "district",
      adcode: 610422,
      lng: 108.940754,
      lat: 34.617282,
      childrenNum: 0,
      parent: 610400,
    },
    {
      name: "泾阳县",
      level: "district",
      adcode: 610423,
      lng: 108.843029,
      lat: 34.526557,
      childrenNum: 0,
      parent: 610400,
    },
    {
      name: "乾县",
      level: "district",
      adcode: 610424,
      lng: 108.239316,
      lat: 34.528262,
      childrenNum: 0,
      parent: 610400,
    },
    {
      name: "礼泉县",
      level: "district",
      adcode: 610425,
      lng: 108.424682,
      lat: 34.481875,
      childrenNum: 0,
      parent: 610400,
    },
    {
      name: "永寿县",
      level: "district",
      adcode: 610426,
      lng: 108.142197,
      lat: 34.69188,
      childrenNum: 0,
      parent: 610400,
    },
    {
      name: "长武县",
      level: "district",
      adcode: 610428,
      lng: 107.79906,
      lat: 35.206273,
      childrenNum: 0,
      parent: 610400,
    },
    {
      name: "旬邑县",
      level: "district",
      adcode: 610429,
      lng: 108.333815,
      lat: 35.111787,
      childrenNum: 0,
      parent: 610400,
    },
    {
      name: "淳化县",
      level: "district",
      adcode: 610430,
      lng: 108.580164,
      lat: 34.798596,
      childrenNum: 0,
      parent: 610400,
    },
    {
      name: "武功县",
      level: "district",
      adcode: 610431,
      lng: 108.200275,
      lat: 34.261026,
      childrenNum: 0,
      parent: 610400,
    },
    {
      name: "兴平市",
      level: "district",
      adcode: 610481,
      lng: 108.490497,
      lat: 34.299199,
      childrenNum: 0,
      parent: 610400,
    },
    {
      name: "彬州市",
      level: "district",
      adcode: 610482,
      lng: 108.081892,
      lat: 35.035702,
      childrenNum: 0,
      parent: 610400,
    },
    {
      name: "渭南市",
      level: "city",
      adcode: 610500,
      lng: 109.470962,
      lat: 34.520632,
      childrenNum: 11,
      parent: 61e4,
    },
    {
      name: "临渭区",
      level: "district",
      adcode: 610502,
      lng: 109.510051,
      lat: 34.498902,
      childrenNum: 0,
      parent: 610500,
    },
    {
      name: "华州区",
      level: "district",
      adcode: 610503,
      lng: 109.775765,
      lat: 34.497019,
      childrenNum: 0,
      parent: 610500,
    },
    {
      name: "潼关县",
      level: "district",
      adcode: 610522,
      lng: 110.246105,
      lat: 34.544294,
      childrenNum: 0,
      parent: 610500,
    },
    {
      name: "大荔县",
      level: "district",
      adcode: 610523,
      lng: 109.941784,
      lat: 34.797073,
      childrenNum: 0,
      parent: 610500,
    },
    {
      name: "合阳县",
      level: "district",
      adcode: 610524,
      lng: 110.149412,
      lat: 35.237881,
      childrenNum: 0,
      parent: 610500,
    },
    {
      name: "澄城县",
      level: "district",
      adcode: 610525,
      lng: 109.932439,
      lat: 35.190256,
      childrenNum: 0,
      parent: 610500,
    },
    {
      name: "蒲城县",
      level: "district",
      adcode: 610526,
      lng: 109.586263,
      lat: 34.955755,
      childrenNum: 0,
      parent: 610500,
    },
    {
      name: "白水县",
      level: "district",
      adcode: 610527,
      lng: 109.590501,
      lat: 35.177497,
      childrenNum: 0,
      parent: 610500,
    },
    {
      name: "富平县",
      level: "district",
      adcode: 610528,
      lng: 109.179903,
      lat: 34.751599,
      childrenNum: 0,
      parent: 610500,
    },
    {
      name: "韩城市",
      level: "district",
      adcode: 610581,
      lng: 110.44295,
      lat: 35.477145,
      childrenNum: 0,
      parent: 610500,
    },
    {
      name: "华阴市",
      level: "district",
      adcode: 610582,
      lng: 110.092286,
      lat: 34.566552,
      childrenNum: 0,
      parent: 610500,
    },
    {
      name: "延安市",
      level: "city",
      adcode: 610600,
      lng: 109.49468,
      lat: 36.650109,
      childrenNum: 13,
      parent: 61e4,
    },
    {
      name: "宝塔区",
      level: "district",
      adcode: 610602,
      lng: 109.489726,
      lat: 36.585138,
      childrenNum: 0,
      parent: 610600,
    },
    {
      name: "安塞区",
      level: "district",
      adcode: 610603,
      lng: 109.329236,
      lat: 36.864571,
      childrenNum: 0,
      parent: 610600,
    },
    {
      name: "延长县",
      level: "district",
      adcode: 610621,
      lng: 110.012455,
      lat: 36.579354,
      childrenNum: 0,
      parent: 610600,
    },
    {
      name: "延川县",
      level: "district",
      adcode: 610622,
      lng: 110.193503,
      lat: 36.878324,
      childrenNum: 0,
      parent: 610600,
    },
    {
      name: "志丹县",
      level: "district",
      adcode: 610625,
      lng: 108.767816,
      lat: 36.822232,
      childrenNum: 0,
      parent: 610600,
    },
    {
      name: "吴起县",
      level: "district",
      adcode: 610626,
      lng: 108.176501,
      lat: 36.92746,
      childrenNum: 0,
      parent: 610600,
    },
    {
      name: "甘泉县",
      level: "district",
      adcode: 610627,
      lng: 109.351046,
      lat: 36.276645,
      childrenNum: 0,
      parent: 610600,
    },
    {
      name: "富县",
      level: "district",
      adcode: 610628,
      lng: 109.37884,
      lat: 35.988111,
      childrenNum: 0,
      parent: 610600,
    },
    {
      name: "洛川县",
      level: "district",
      adcode: 610629,
      lng: 109.43249,
      lat: 35.762626,
      childrenNum: 0,
      parent: 610600,
    },
    {
      name: "宜川县",
      level: "district",
      adcode: 610630,
      lng: 110.168963,
      lat: 36.050178,
      childrenNum: 0,
      parent: 610600,
    },
    {
      name: "黄龙县",
      level: "district",
      adcode: 610631,
      lng: 109.84029,
      lat: 35.584655,
      childrenNum: 0,
      parent: 610600,
    },
    {
      name: "黄陵县",
      level: "district",
      adcode: 610632,
      lng: 109.262919,
      lat: 35.579421,
      childrenNum: 0,
      parent: 610600,
    },
    {
      name: "子长市",
      level: "district",
      adcode: 610681,
      lng: 109.675284,
      lat: 37.142462,
      childrenNum: 0,
      parent: 610600,
    },
    {
      name: "汉中市",
      level: "city",
      adcode: 610700,
      lng: 107.02319,
      lat: 33.066373,
      childrenNum: 11,
      parent: 61e4,
    },
    {
      name: "汉台区",
      level: "district",
      adcode: 610702,
      lng: 107.03201,
      lat: 33.067523,
      childrenNum: 0,
      parent: 610700,
    },
    {
      name: "南郑区",
      level: "district",
      adcode: 610703,
      lng: 106.936235,
      lat: 33.000034,
      childrenNum: 0,
      parent: 610700,
    },
    {
      name: "城固县",
      level: "district",
      adcode: 610722,
      lng: 107.333787,
      lat: 33.156937,
      childrenNum: 0,
      parent: 610700,
    },
    {
      name: "洋县",
      level: "district",
      adcode: 610723,
      lng: 107.545678,
      lat: 33.222808,
      childrenNum: 0,
      parent: 610700,
    },
    {
      name: "西乡县",
      level: "district",
      adcode: 610724,
      lng: 107.766477,
      lat: 32.983282,
      childrenNum: 0,
      parent: 610700,
    },
    {
      name: "勉县",
      level: "district",
      adcode: 610725,
      lng: 106.673217,
      lat: 33.153636,
      childrenNum: 0,
      parent: 610700,
    },
    {
      name: "宁强县",
      level: "district",
      adcode: 610726,
      lng: 106.257636,
      lat: 32.830032,
      childrenNum: 0,
      parent: 610700,
    },
    {
      name: "略阳县",
      level: "district",
      adcode: 610727,
      lng: 106.15658,
      lat: 33.327293,
      childrenNum: 0,
      parent: 610700,
    },
    {
      name: "镇巴县",
      level: "district",
      adcode: 610728,
      lng: 107.895015,
      lat: 32.536706,
      childrenNum: 0,
      parent: 610700,
    },
    {
      name: "留坝县",
      level: "district",
      adcode: 610729,
      lng: 106.920781,
      lat: 33.617637,
      childrenNum: 0,
      parent: 610700,
    },
    {
      name: "佛坪县",
      level: "district",
      adcode: 610730,
      lng: 107.990551,
      lat: 33.524261,
      childrenNum: 0,
      parent: 610700,
    },
    {
      name: "榆林市",
      level: "city",
      adcode: 610800,
      lng: 109.734104,
      lat: 38.28576,
      childrenNum: 12,
      parent: 61e4,
    },
    {
      name: "榆阳区",
      level: "district",
      adcode: 610802,
      lng: 109.72054,
      lat: 38.277078,
      childrenNum: 0,
      parent: 610800,
    },
    {
      name: "横山区",
      level: "district",
      adcode: 610803,
      lng: 109.294144,
      lat: 37.962477,
      childrenNum: 0,
      parent: 610800,
    },
    {
      name: "府谷县",
      level: "district",
      adcode: 610822,
      lng: 111.016431,
      lat: 39.015658,
      childrenNum: 0,
      parent: 610800,
    },
    {
      name: "靖边县",
      level: "district",
      adcode: 610824,
      lng: 108.794153,
      lat: 37.600351,
      childrenNum: 0,
      parent: 610800,
    },
    {
      name: "定边县",
      level: "district",
      adcode: 610825,
      lng: 107.601048,
      lat: 37.594976,
      childrenNum: 0,
      parent: 610800,
    },
    {
      name: "绥德县",
      level: "district",
      adcode: 610826,
      lng: 110.263226,
      lat: 37.502984,
      childrenNum: 0,
      parent: 610800,
    },
    {
      name: "米脂县",
      level: "district",
      adcode: 610827,
      lng: 110.183984,
      lat: 37.755134,
      childrenNum: 0,
      parent: 610800,
    },
    {
      name: "佳县",
      level: "district",
      adcode: 610828,
      lng: 110.491345,
      lat: 38.01951,
      childrenNum: 0,
      parent: 610800,
    },
    {
      name: "吴堡县",
      level: "district",
      adcode: 610829,
      lng: 110.739726,
      lat: 37.452179,
      childrenNum: 0,
      parent: 610800,
    },
    {
      name: "清涧县",
      level: "district",
      adcode: 610830,
      lng: 110.121181,
      lat: 37.088921,
      childrenNum: 0,
      parent: 610800,
    },
    {
      name: "子洲县",
      level: "district",
      adcode: 610831,
      lng: 110.035124,
      lat: 37.610554,
      childrenNum: 0,
      parent: 610800,
    },
    {
      name: "神木市",
      level: "district",
      adcode: 610881,
      lng: 110.466867,
      lat: 38.899742,
      childrenNum: 0,
      parent: 610800,
    },
    {
      name: "安康市",
      level: "city",
      adcode: 610900,
      lng: 109.029017,
      lat: 32.685435,
      childrenNum: 10,
      parent: 61e4,
    },
    {
      name: "汉滨区",
      level: "district",
      adcode: 610902,
      lng: 109.026928,
      lat: 32.695436,
      childrenNum: 0,
      parent: 610900,
    },
    {
      name: "汉阴县",
      level: "district",
      adcode: 610921,
      lng: 108.508792,
      lat: 32.893057,
      childrenNum: 0,
      parent: 610900,
    },
    {
      name: "石泉县",
      level: "district",
      adcode: 610922,
      lng: 108.248061,
      lat: 33.03805,
      childrenNum: 0,
      parent: 610900,
    },
    {
      name: "宁陕县",
      level: "district",
      adcode: 610923,
      lng: 108.314299,
      lat: 33.310284,
      childrenNum: 0,
      parent: 610900,
    },
    {
      name: "紫阳县",
      level: "district",
      adcode: 610924,
      lng: 108.534291,
      lat: 32.520209,
      childrenNum: 0,
      parent: 610900,
    },
    {
      name: "岚皋县",
      level: "district",
      adcode: 610925,
      lng: 108.902049,
      lat: 32.307001,
      childrenNum: 0,
      parent: 610900,
    },
    {
      name: "平利县",
      level: "district",
      adcode: 610926,
      lng: 109.361919,
      lat: 32.389061,
      childrenNum: 0,
      parent: 610900,
    },
    {
      name: "镇坪县",
      level: "district",
      adcode: 610927,
      lng: 109.526873,
      lat: 31.883672,
      childrenNum: 0,
      parent: 610900,
    },
    {
      name: "旬阳市",
      level: "district",
      adcode: 610928,
      lng: 109.361783,
      lat: 32.832213,
      childrenNum: 0,
      parent: 610900,
    },
    {
      name: "白河县",
      level: "district",
      adcode: 610929,
      lng: 110.112608,
      lat: 32.80901,
      childrenNum: 0,
      parent: 610900,
    },
    {
      name: "商洛市",
      level: "city",
      adcode: 611e3,
      lng: 109.918646,
      lat: 33.873358,
      childrenNum: 7,
      parent: 61e4,
    },
    {
      name: "商州区",
      level: "district",
      adcode: 611002,
      lng: 109.941452,
      lat: 33.862979,
      childrenNum: 0,
      parent: 611e3,
    },
    {
      name: "洛南县",
      level: "district",
      adcode: 611021,
      lng: 110.148526,
      lat: 34.090815,
      childrenNum: 0,
      parent: 611e3,
    },
    {
      name: "丹凤县",
      level: "district",
      adcode: 611022,
      lng: 110.327542,
      lat: 33.696254,
      childrenNum: 0,
      parent: 611e3,
    },
    {
      name: "商南县",
      level: "district",
      adcode: 611023,
      lng: 110.881741,
      lat: 33.531071,
      childrenNum: 0,
      parent: 611e3,
    },
    {
      name: "山阳县",
      level: "district",
      adcode: 611024,
      lng: 109.882289,
      lat: 33.532172,
      childrenNum: 0,
      parent: 611e3,
    },
    {
      name: "镇安县",
      level: "district",
      adcode: 611025,
      lng: 109.152833,
      lat: 33.423764,
      childrenNum: 0,
      parent: 611e3,
    },
    {
      name: "柞水县",
      level: "district",
      adcode: 611026,
      lng: 109.114006,
      lat: 33.686048,
      childrenNum: 0,
      parent: 611e3,
    },
    {
      name: "甘肃省",
      level: "province",
      adcode: 62e4,
      lng: 103.826777,
      lat: 36.060634,
      childrenNum: 14,
      parent: 1e5,
    },
    {
      name: "兰州市",
      level: "city",
      adcode: 620100,
      lng: 103.834228,
      lat: 36.060798,
      childrenNum: 8,
      parent: 62e4,
    },
    {
      name: "城关区",
      level: "district",
      adcode: 620102,
      lng: 103.825315,
      lat: 36.056948,
      childrenNum: 0,
      parent: 620100,
    },
    {
      name: "七里河区",
      level: "district",
      adcode: 620103,
      lng: 103.786261,
      lat: 36.066249,
      childrenNum: 0,
      parent: 620100,
    },
    {
      name: "西固区",
      level: "district",
      adcode: 620104,
      lng: 103.627966,
      lat: 36.08845,
      childrenNum: 0,
      parent: 620100,
    },
    {
      name: "安宁区",
      level: "district",
      adcode: 620105,
      lng: 103.718953,
      lat: 36.104493,
      childrenNum: 0,
      parent: 620100,
    },
    {
      name: "红古区",
      level: "district",
      adcode: 620111,
      lng: 102.859338,
      lat: 36.345768,
      childrenNum: 0,
      parent: 620100,
    },
    {
      name: "永登县",
      level: "district",
      adcode: 620121,
      lng: 103.260273,
      lat: 36.736457,
      childrenNum: 0,
      parent: 620100,
    },
    {
      name: "皋兰县",
      level: "district",
      adcode: 620122,
      lng: 103.947345,
      lat: 36.332434,
      childrenNum: 0,
      parent: 620100,
    },
    {
      name: "榆中县",
      level: "district",
      adcode: 620123,
      lng: 104.112541,
      lat: 35.843354,
      childrenNum: 0,
      parent: 620100,
    },
    {
      name: "嘉峪关市",
      level: "city",
      adcode: 620200,
      lng: 98.2882,
      lat: 39.77325,
      childrenNum: 5,
      parent: 62e4,
    },
    {
      name: "金昌市",
      level: "city",
      adcode: 620300,
      lng: 102.187972,
      lat: 38.521468,
      childrenNum: 2,
      parent: 62e4,
    },
    {
      name: "金川区",
      level: "district",
      adcode: 620302,
      lng: 102.1939,
      lat: 38.520373,
      childrenNum: 0,
      parent: 620300,
    },
    {
      name: "永昌县",
      level: "district",
      adcode: 620321,
      lng: 101.984642,
      lat: 38.243534,
      childrenNum: 0,
      parent: 620300,
    },
    {
      name: "白银市",
      level: "city",
      adcode: 620400,
      lng: 104.138872,
      lat: 36.545123,
      childrenNum: 5,
      parent: 62e4,
    },
    {
      name: "白银区",
      level: "district",
      adcode: 620402,
      lng: 104.14956,
      lat: 36.53469,
      childrenNum: 0,
      parent: 620400,
    },
    {
      name: "平川区",
      level: "district",
      adcode: 620403,
      lng: 104.825275,
      lat: 36.728494,
      childrenNum: 0,
      parent: 620400,
    },
    {
      name: "靖远县",
      level: "district",
      adcode: 620421,
      lng: 104.676202,
      lat: 36.571736,
      childrenNum: 0,
      parent: 620400,
    },
    {
      name: "会宁县",
      level: "district",
      adcode: 620422,
      lng: 105.052883,
      lat: 35.693241,
      childrenNum: 0,
      parent: 620400,
    },
    {
      name: "景泰县",
      level: "district",
      adcode: 620423,
      lng: 104.063125,
      lat: 37.18351,
      childrenNum: 0,
      parent: 620400,
    },
    {
      name: "天水市",
      level: "city",
      adcode: 620500,
      lng: 105.724828,
      lat: 34.581514,
      childrenNum: 7,
      parent: 62e4,
    },
    {
      name: "秦州区",
      level: "district",
      adcode: 620502,
      lng: 105.724914,
      lat: 34.581187,
      childrenNum: 0,
      parent: 620500,
    },
    {
      name: "麦积区",
      level: "district",
      adcode: 620503,
      lng: 105.889452,
      lat: 34.571143,
      childrenNum: 0,
      parent: 620500,
    },
    {
      name: "清水县",
      level: "district",
      adcode: 620521,
      lng: 106.137318,
      lat: 34.749906,
      childrenNum: 0,
      parent: 620500,
    },
    {
      name: "秦安县",
      level: "district",
      adcode: 620522,
      lng: 105.675799,
      lat: 34.859094,
      childrenNum: 0,
      parent: 620500,
    },
    {
      name: "甘谷县",
      level: "district",
      adcode: 620523,
      lng: 105.340789,
      lat: 34.745447,
      childrenNum: 0,
      parent: 620500,
    },
    {
      name: "武山县",
      level: "district",
      adcode: 620524,
      lng: 104.89121,
      lat: 34.72183,
      childrenNum: 0,
      parent: 620500,
    },
    {
      name: "张家川回族自治县",
      level: "district",
      adcode: 620525,
      lng: 106.20513,
      lat: 34.988676,
      childrenNum: 0,
      parent: 620500,
    },
    {
      name: "武威市",
      level: "city",
      adcode: 620600,
      lng: 102.637821,
      lat: 37.92898,
      childrenNum: 4,
      parent: 62e4,
    },
    {
      name: "凉州区",
      level: "district",
      adcode: 620602,
      lng: 102.641959,
      lat: 37.928217,
      childrenNum: 0,
      parent: 620600,
    },
    {
      name: "民勤县",
      level: "district",
      adcode: 620621,
      lng: 103.093671,
      lat: 38.624293,
      childrenNum: 0,
      parent: 620600,
    },
    {
      name: "古浪县",
      level: "district",
      adcode: 620622,
      lng: 102.897542,
      lat: 37.470882,
      childrenNum: 0,
      parent: 620600,
    },
    {
      name: "天祝藏族自治县",
      level: "district",
      adcode: 620623,
      lng: 103.142416,
      lat: 36.971978,
      childrenNum: 0,
      parent: 620600,
    },
    {
      name: "张掖市",
      level: "city",
      adcode: 620700,
      lng: 100.449858,
      lat: 38.924766,
      childrenNum: 6,
      parent: 62e4,
    },
    {
      name: "甘州区",
      level: "district",
      adcode: 620702,
      lng: 100.415324,
      lat: 38.944315,
      childrenNum: 0,
      parent: 620700,
    },
    {
      name: "肃南裕固族自治县",
      level: "district",
      adcode: 620721,
      lng: 99.615601,
      lat: 38.836931,
      childrenNum: 0,
      parent: 620700,
    },
    {
      name: "民乐县",
      level: "district",
      adcode: 620722,
      lng: 100.812047,
      lat: 38.430318,
      childrenNum: 0,
      parent: 620700,
    },
    {
      name: "临泽县",
      level: "district",
      adcode: 620723,
      lng: 100.164333,
      lat: 39.15224,
      childrenNum: 0,
      parent: 620700,
    },
    {
      name: "高台县",
      level: "district",
      adcode: 620724,
      lng: 99.819265,
      lat: 39.378294,
      childrenNum: 0,
      parent: 620700,
    },
    {
      name: "山丹县",
      level: "district",
      adcode: 620725,
      lng: 101.088611,
      lat: 38.7846,
      childrenNum: 0,
      parent: 620700,
    },
    {
      name: "平凉市",
      level: "city",
      adcode: 620800,
      lng: 106.664913,
      lat: 35.542417,
      childrenNum: 7,
      parent: 62e4,
    },
    {
      name: "崆峒区",
      level: "district",
      adcode: 620802,
      lng: 106.67489,
      lat: 35.542437,
      childrenNum: 0,
      parent: 620800,
    },
    {
      name: "泾川县",
      level: "district",
      adcode: 620821,
      lng: 107.367608,
      lat: 35.332992,
      childrenNum: 0,
      parent: 620800,
    },
    {
      name: "灵台县",
      level: "district",
      adcode: 620822,
      lng: 107.595874,
      lat: 35.070027,
      childrenNum: 0,
      parent: 620800,
    },
    {
      name: "崇信县",
      level: "district",
      adcode: 620823,
      lng: 107.025762,
      lat: 35.305648,
      childrenNum: 0,
      parent: 620800,
    },
    {
      name: "庄浪县",
      level: "district",
      adcode: 620825,
      lng: 106.036201,
      lat: 35.20266,
      childrenNum: 0,
      parent: 620800,
    },
    {
      name: "静宁县",
      level: "district",
      adcode: 620826,
      lng: 105.732165,
      lat: 35.522035,
      childrenNum: 0,
      parent: 620800,
    },
    {
      name: "华亭市",
      level: "district",
      adcode: 620881,
      lng: 106.628899,
      lat: 35.207695,
      childrenNum: 0,
      parent: 620800,
    },
    {
      name: "酒泉市",
      level: "city",
      adcode: 620900,
      lng: 98.49432,
      lat: 39.733416,
      childrenNum: 7,
      parent: 62e4,
    },
    {
      name: "肃州区",
      level: "district",
      adcode: 620902,
      lng: 98.507834,
      lat: 39.74511,
      childrenNum: 0,
      parent: 620900,
    },
    {
      name: "金塔县",
      level: "district",
      adcode: 620921,
      lng: 98.901523,
      lat: 39.984146,
      childrenNum: 0,
      parent: 620900,
    },
    {
      name: "瓜州县",
      level: "district",
      adcode: 620922,
      lng: 95.782255,
      lat: 40.520457,
      childrenNum: 0,
      parent: 620900,
    },
    {
      name: "肃北蒙古族自治县",
      level: "district",
      adcode: 620923,
      lng: 94.876533,
      lat: 39.512158,
      childrenNum: 0,
      parent: 620900,
    },
    {
      name: "阿克塞哈萨克族自治县",
      level: "district",
      adcode: 620924,
      lng: 94.340202,
      lat: 39.633944,
      childrenNum: 0,
      parent: 620900,
    },
    {
      name: "玉门市",
      level: "district",
      adcode: 620981,
      lng: 97.045617,
      lat: 40.292344,
      childrenNum: 0,
      parent: 620900,
    },
    {
      name: "敦煌市",
      level: "district",
      adcode: 620982,
      lng: 94.66201,
      lat: 40.142141,
      childrenNum: 0,
      parent: 620900,
    },
    {
      name: "庆阳市",
      level: "city",
      adcode: 621e3,
      lng: 107.643433,
      lat: 35.709459,
      childrenNum: 8,
      parent: 62e4,
    },
    {
      name: "西峰区",
      level: "district",
      adcode: 621002,
      lng: 107.650563,
      lat: 35.730318,
      childrenNum: 0,
      parent: 621e3,
    },
    {
      name: "庆城县",
      level: "district",
      adcode: 621021,
      lng: 107.881706,
      lat: 36.016125,
      childrenNum: 0,
      parent: 621e3,
    },
    {
      name: "环县",
      level: "district",
      adcode: 621022,
      lng: 107.308788,
      lat: 36.568566,
      childrenNum: 0,
      parent: 621e3,
    },
    {
      name: "华池县",
      level: "district",
      adcode: 621023,
      lng: 107.98972,
      lat: 36.461474,
      childrenNum: 0,
      parent: 621e3,
    },
    {
      name: "合水县",
      level: "district",
      adcode: 621024,
      lng: 108.021859,
      lat: 35.833908,
      childrenNum: 0,
      parent: 621e3,
    },
    {
      name: "正宁县",
      level: "district",
      adcode: 621025,
      lng: 108.359964,
      lat: 35.492158,
      childrenNum: 0,
      parent: 621e3,
    },
    {
      name: "宁县",
      level: "district",
      adcode: 621026,
      lng: 107.913463,
      lat: 35.509252,
      childrenNum: 0,
      parent: 621e3,
    },
    {
      name: "镇原县",
      level: "district",
      adcode: 621027,
      lng: 107.200888,
      lat: 35.677705,
      childrenNum: 0,
      parent: 621e3,
    },
    {
      name: "定西市",
      level: "city",
      adcode: 621100,
      lng: 104.592342,
      lat: 35.607947,
      childrenNum: 7,
      parent: 62e4,
    },
    {
      name: "安定区",
      level: "district",
      adcode: 621102,
      lng: 104.610647,
      lat: 35.580918,
      childrenNum: 0,
      parent: 621100,
    },
    {
      name: "通渭县",
      level: "district",
      adcode: 621121,
      lng: 105.242312,
      lat: 35.211311,
      childrenNum: 0,
      parent: 621100,
    },
    {
      name: "陇西县",
      level: "district",
      adcode: 621122,
      lng: 104.634928,
      lat: 35.003899,
      childrenNum: 0,
      parent: 621100,
    },
    {
      name: "渭源县",
      level: "district",
      adcode: 621123,
      lng: 104.215092,
      lat: 35.137028,
      childrenNum: 0,
      parent: 621100,
    },
    {
      name: "临洮县",
      level: "district",
      adcode: 621124,
      lng: 103.859446,
      lat: 35.394993,
      childrenNum: 0,
      parent: 621100,
    },
    {
      name: "漳县",
      level: "district",
      adcode: 621125,
      lng: 104.471722,
      lat: 34.84854,
      childrenNum: 0,
      parent: 621100,
    },
    {
      name: "岷县",
      level: "district",
      adcode: 621126,
      lng: 104.036731,
      lat: 34.43833,
      childrenNum: 0,
      parent: 621100,
    },
    {
      name: "陇南市",
      level: "city",
      adcode: 621200,
      lng: 104.960296,
      lat: 33.370174,
      childrenNum: 9,
      parent: 62e4,
    },
    {
      name: "武都区",
      level: "district",
      adcode: 621202,
      lng: 104.921861,
      lat: 33.400685,
      childrenNum: 0,
      parent: 621200,
    },
    {
      name: "成县",
      level: "district",
      adcode: 621221,
      lng: 105.742508,
      lat: 33.750722,
      childrenNum: 0,
      parent: 621200,
    },
    {
      name: "文县",
      level: "district",
      adcode: 621222,
      lng: 104.6835,
      lat: 32.944031,
      childrenNum: 0,
      parent: 621200,
    },
    {
      name: "宕昌县",
      level: "district",
      adcode: 621223,
      lng: 104.393385,
      lat: 34.047261,
      childrenNum: 0,
      parent: 621200,
    },
    {
      name: "康县",
      level: "district",
      adcode: 621224,
      lng: 105.608609,
      lat: 33.329212,
      childrenNum: 0,
      parent: 621200,
    },
    {
      name: "西和县",
      level: "district",
      adcode: 621225,
      lng: 105.298756,
      lat: 34.014215,
      childrenNum: 0,
      parent: 621200,
    },
    {
      name: "礼县",
      level: "district",
      adcode: 621226,
      lng: 105.17864,
      lat: 34.189345,
      childrenNum: 0,
      parent: 621200,
    },
    {
      name: "徽县",
      level: "district",
      adcode: 621227,
      lng: 106.087156,
      lat: 33.769927,
      childrenNum: 0,
      parent: 621200,
    },
    {
      name: "两当县",
      level: "district",
      adcode: 621228,
      lng: 106.304973,
      lat: 33.908952,
      childrenNum: 0,
      parent: 621200,
    },
    {
      name: "临夏回族自治州",
      level: "city",
      adcode: 622900,
      lng: 103.210386,
      lat: 35.601792,
      childrenNum: 8,
      parent: 62e4,
    },
    {
      name: "临夏市",
      level: "district",
      adcode: 622901,
      lng: 103.24222,
      lat: 35.604682,
      childrenNum: 0,
      parent: 622900,
    },
    {
      name: "临夏县",
      level: "district",
      adcode: 622921,
      lng: 103.04068,
      lat: 35.478726,
      childrenNum: 0,
      parent: 622900,
    },
    {
      name: "康乐县",
      level: "district",
      adcode: 622922,
      lng: 103.708507,
      lat: 35.370296,
      childrenNum: 0,
      parent: 622900,
    },
    {
      name: "永靖县",
      level: "district",
      adcode: 622923,
      lng: 103.285853,
      lat: 35.958306,
      childrenNum: 0,
      parent: 622900,
    },
    {
      name: "广河县",
      level: "district",
      adcode: 622924,
      lng: 103.575582,
      lat: 35.488248,
      childrenNum: 0,
      parent: 622900,
    },
    {
      name: "和政县",
      level: "district",
      adcode: 622925,
      lng: 103.350996,
      lat: 35.424602,
      childrenNum: 0,
      parent: 622900,
    },
    {
      name: "东乡族自治县",
      level: "district",
      adcode: 622926,
      lng: 103.388122,
      lat: 35.664409,
      childrenNum: 0,
      parent: 622900,
    },
    {
      name: "积石山保安族东乡族撒拉族自治县",
      level: "district",
      adcode: 622927,
      lng: 102.875939,
      lat: 35.717697,
      childrenNum: 0,
      parent: 622900,
    },
    {
      name: "甘南藏族自治州",
      level: "city",
      adcode: 623e3,
      lng: 102.911736,
      lat: 34.983266,
      childrenNum: 8,
      parent: 62e4,
    },
    {
      name: "合作市",
      level: "district",
      adcode: 623001,
      lng: 102.910305,
      lat: 35.000228,
      childrenNum: 0,
      parent: 623e3,
    },
    {
      name: "临潭县",
      level: "district",
      adcode: 623021,
      lng: 103.353665,
      lat: 34.693009,
      childrenNum: 0,
      parent: 623e3,
    },
    {
      name: "卓尼县",
      level: "district",
      adcode: 623022,
      lng: 103.506849,
      lat: 34.589476,
      childrenNum: 0,
      parent: 623e3,
    },
    {
      name: "舟曲县",
      level: "district",
      adcode: 623023,
      lng: 104.251543,
      lat: 33.793695,
      childrenNum: 0,
      parent: 623e3,
    },
    {
      name: "迭部县",
      level: "district",
      adcode: 623024,
      lng: 103.221735,
      lat: 34.055888,
      childrenNum: 0,
      parent: 623e3,
    },
    {
      name: "玛曲县",
      level: "district",
      adcode: 623025,
      lng: 102.072608,
      lat: 33.998145,
      childrenNum: 0,
      parent: 623e3,
    },
    {
      name: "碌曲县",
      level: "district",
      adcode: 623026,
      lng: 102.487512,
      lat: 34.591084,
      childrenNum: 0,
      parent: 623e3,
    },
    {
      name: "夏河县",
      level: "district",
      adcode: 623027,
      lng: 102.548303,
      lat: 35.203857,
      childrenNum: 0,
      parent: 623e3,
    },
    {
      name: "青海省",
      level: "province",
      adcode: 63e4,
      lng: 101.780482,
      lat: 36.622538,
      childrenNum: 8,
      parent: 1e5,
    },
    {
      name: "西宁市",
      level: "city",
      adcode: 630100,
      lng: 101.777795,
      lat: 36.616621,
      childrenNum: 7,
      parent: 63e4,
    },
    {
      name: "城东区",
      level: "district",
      adcode: 630102,
      lng: 101.803717,
      lat: 36.599744,
      childrenNum: 0,
      parent: 630100,
    },
    {
      name: "城中区",
      level: "district",
      adcode: 630103,
      lng: 101.705357,
      lat: 36.545545,
      childrenNum: 0,
      parent: 630100,
    },
    {
      name: "城西区",
      level: "district",
      adcode: 630104,
      lng: 101.765915,
      lat: 36.628288,
      childrenNum: 0,
      parent: 630100,
    },
    {
      name: "城北区",
      level: "district",
      adcode: 630105,
      lng: 101.766308,
      lat: 36.650064,
      childrenNum: 0,
      parent: 630100,
    },
    {
      name: "湟中区",
      level: "district",
      adcode: 630106,
      lng: 101.571683,
      lat: 36.501291,
      childrenNum: 0,
      parent: 630100,
    },
    {
      name: "大通回族土族自治县",
      level: "district",
      adcode: 630121,
      lng: 101.685503,
      lat: 36.926872,
      childrenNum: 0,
      parent: 630100,
    },
    {
      name: "湟源县",
      level: "district",
      adcode: 630123,
      lng: 101.256464,
      lat: 36.682426,
      childrenNum: 0,
      parent: 630100,
    },
    {
      name: "海东市",
      level: "city",
      adcode: 630200,
      lng: 102.41064,
      lat: 36.473448,
      childrenNum: 6,
      parent: 63e4,
    },
    {
      name: "乐都区",
      level: "district",
      adcode: 630202,
      lng: 102.401614,
      lat: 36.482242,
      childrenNum: 0,
      parent: 630200,
    },
    {
      name: "平安区",
      level: "district",
      adcode: 630203,
      lng: 102.108538,
      lat: 36.500166,
      childrenNum: 0,
      parent: 630200,
    },
    {
      name: "民和回族土族自治县",
      level: "district",
      adcode: 630222,
      lng: 102.830775,
      lat: 36.320038,
      childrenNum: 0,
      parent: 630200,
    },
    {
      name: "互助土族自治县",
      level: "district",
      adcode: 630223,
      lng: 101.958519,
      lat: 36.844027,
      childrenNum: 0,
      parent: 630200,
    },
    {
      name: "化隆回族自治县",
      level: "district",
      adcode: 630224,
      lng: 102.266007,
      lat: 36.096124,
      childrenNum: 0,
      parent: 630200,
    },
    {
      name: "循化撒拉族自治县",
      level: "district",
      adcode: 630225,
      lng: 102.488958,
      lat: 35.851079,
      childrenNum: 0,
      parent: 630200,
    },
    {
      name: "海北藏族自治州",
      level: "city",
      adcode: 632200,
      lng: 100.900944,
      lat: 36.954612,
      childrenNum: 4,
      parent: 63e4,
    },
    {
      name: "门源回族自治县",
      level: "district",
      adcode: 632221,
      lng: 101.611524,
      lat: 37.388567,
      childrenNum: 0,
      parent: 632200,
    },
    {
      name: "祁连县",
      level: "district",
      adcode: 632222,
      lng: 100.253211,
      lat: 38.177112,
      childrenNum: 0,
      parent: 632200,
    },
    {
      name: "海晏县",
      level: "district",
      adcode: 632223,
      lng: 100.994521,
      lat: 36.896667,
      childrenNum: 0,
      parent: 632200,
    },
    {
      name: "刚察县",
      level: "district",
      adcode: 632224,
      lng: 100.145662,
      lat: 37.325096,
      childrenNum: 0,
      parent: 632200,
    },
    {
      name: "黄南藏族自治州",
      level: "city",
      adcode: 632300,
      lng: 102.015397,
      lat: 35.519317,
      childrenNum: 4,
      parent: 63e4,
    },
    {
      name: "同仁市",
      level: "district",
      adcode: 632301,
      lng: 102.018663,
      lat: 35.515769,
      childrenNum: 0,
      parent: 632300,
    },
    {
      name: "尖扎县",
      level: "district",
      adcode: 632322,
      lng: 102.040094,
      lat: 35.943253,
      childrenNum: 0,
      parent: 632300,
    },
    {
      name: "泽库县",
      level: "district",
      adcode: 632323,
      lng: 101.466565,
      lat: 35.035322,
      childrenNum: 0,
      parent: 632300,
    },
    {
      name: "河南蒙古族自治县",
      level: "district",
      adcode: 632324,
      lng: 101.617719,
      lat: 34.734777,
      childrenNum: 0,
      parent: 632300,
    },
    {
      name: "海南藏族自治州",
      level: "city",
      adcode: 632500,
      lng: 100.622647,
      lat: 36.296399,
      childrenNum: 5,
      parent: 63e4,
    },
    {
      name: "共和县",
      level: "district",
      adcode: 632521,
      lng: 100.619405,
      lat: 36.284158,
      childrenNum: 0,
      parent: 632500,
    },
    {
      name: "同德县",
      level: "district",
      adcode: 632522,
      lng: 100.577859,
      lat: 35.254297,
      childrenNum: 0,
      parent: 632500,
    },
    {
      name: "贵德县",
      level: "district",
      adcode: 632523,
      lng: 101.43403,
      lat: 36.039672,
      childrenNum: 0,
      parent: 632500,
    },
    {
      name: "兴海县",
      level: "district",
      adcode: 632524,
      lng: 99.987799,
      lat: 35.589086,
      childrenNum: 0,
      parent: 632500,
    },
    {
      name: "贵南县",
      level: "district",
      adcode: 632525,
      lng: 100.747731,
      lat: 35.587239,
      childrenNum: 0,
      parent: 632500,
    },
    {
      name: "果洛藏族自治州",
      level: "city",
      adcode: 632600,
      lng: 100.245161,
      lat: 34.472179,
      childrenNum: 6,
      parent: 63e4,
    },
    {
      name: "玛沁县",
      level: "district",
      adcode: 632621,
      lng: 100.238873,
      lat: 34.478049,
      childrenNum: 0,
      parent: 632600,
    },
    {
      name: "班玛县",
      level: "district",
      adcode: 632622,
      lng: 100.737138,
      lat: 32.932723,
      childrenNum: 0,
      parent: 632600,
    },
    {
      name: "甘德县",
      level: "district",
      adcode: 632623,
      lng: 99.900923,
      lat: 33.969216,
      childrenNum: 0,
      parent: 632600,
    },
    {
      name: "达日县",
      level: "district",
      adcode: 632624,
      lng: 99.651863,
      lat: 33.739293,
      childrenNum: 0,
      parent: 632600,
    },
    {
      name: "久治县",
      level: "district",
      adcode: 632625,
      lng: 101.482831,
      lat: 33.429471,
      childrenNum: 0,
      parent: 632600,
    },
    {
      name: "玛多县",
      level: "district",
      adcode: 632626,
      lng: 98.209217,
      lat: 34.915645,
      childrenNum: 0,
      parent: 632600,
    },
    {
      name: "玉树藏族自治州",
      level: "city",
      adcode: 632700,
      lng: 97.006292,
      lat: 33.006308,
      childrenNum: 6,
      parent: 63e4,
    },
    {
      name: "玉树市",
      level: "district",
      adcode: 632701,
      lng: 97.009184,
      lat: 32.992934,
      childrenNum: 0,
      parent: 632700,
    },
    {
      name: "杂多县",
      level: "district",
      adcode: 632722,
      lng: 95.300723,
      lat: 32.893185,
      childrenNum: 0,
      parent: 632700,
    },
    {
      name: "称多县",
      level: "district",
      adcode: 632723,
      lng: 97.109487,
      lat: 33.377504,
      childrenNum: 0,
      parent: 632700,
    },
    {
      name: "治多县",
      level: "district",
      adcode: 632724,
      lng: 95.618954,
      lat: 33.844854,
      childrenNum: 0,
      parent: 632700,
    },
    {
      name: "囊谦县",
      level: "district",
      adcode: 632725,
      lng: 96.489538,
      lat: 32.203193,
      childrenNum: 0,
      parent: 632700,
    },
    {
      name: "曲麻莱县",
      level: "district",
      adcode: 632726,
      lng: 95.805463,
      lat: 34.137353,
      childrenNum: 0,
      parent: 632700,
    },
    {
      name: "海西蒙古族藏族自治州",
      level: "city",
      adcode: 632800,
      lng: 97.33197,
      lat: 37.348114,
      childrenNum: 7,
      parent: 63e4,
    },
    {
      name: "格尔木市",
      level: "district",
      adcode: 632801,
      lng: 94.928293,
      lat: 36.407272,
      childrenNum: 0,
      parent: 632800,
    },
    {
      name: "德令哈市",
      level: "district",
      adcode: 632802,
      lng: 97.361528,
      lat: 37.369865,
      childrenNum: 0,
      parent: 632800,
    },
    {
      name: "茫崖市",
      level: "district",
      adcode: 632803,
      lng: 90.856372,
      lat: 38.247537,
      childrenNum: 0,
      parent: 632800,
    },
    {
      name: "乌兰县",
      level: "district",
      adcode: 632821,
      lng: 98.47988,
      lat: 36.941279,
      childrenNum: 0,
      parent: 632800,
    },
    {
      name: "都兰县",
      level: "district",
      adcode: 632822,
      lng: 98.095889,
      lat: 36.302098,
      childrenNum: 0,
      parent: 632800,
    },
    {
      name: "天峻县",
      level: "district",
      adcode: 632823,
      lng: 99.02297,
      lat: 37.301206,
      childrenNum: 0,
      parent: 632800,
    },
    {
      name: "海西蒙古族藏族自治州直辖",
      level: "district",
      adcode: 632825,
      lng: 95.357233,
      lat: 37.853631,
      childrenNum: 0,
      parent: 632800,
    },
    {
      name: "宁夏回族自治区",
      level: "province",
      adcode: 64e4,
      lng: 106.258889,
      lat: 38.472273,
      childrenNum: 5,
      parent: 1e5,
    },
    {
      name: "银川市",
      level: "city",
      adcode: 640100,
      lng: 106.230977,
      lat: 38.487783,
      childrenNum: 6,
      parent: 64e4,
    },
    {
      name: "兴庆区",
      level: "district",
      adcode: 640104,
      lng: 106.288452,
      lat: 38.473972,
      childrenNum: 0,
      parent: 640100,
    },
    {
      name: "西夏区",
      level: "district",
      adcode: 640105,
      lng: 106.161208,
      lat: 38.502325,
      childrenNum: 0,
      parent: 640100,
    },
    {
      name: "金凤区",
      level: "district",
      adcode: 640106,
      lng: 106.239339,
      lat: 38.474277,
      childrenNum: 0,
      parent: 640100,
    },
    {
      name: "永宁县",
      level: "district",
      adcode: 640121,
      lng: 106.25337,
      lat: 38.277376,
      childrenNum: 0,
      parent: 640100,
    },
    {
      name: "贺兰县",
      level: "district",
      adcode: 640122,
      lng: 106.365074,
      lat: 38.579147,
      childrenNum: 0,
      parent: 640100,
    },
    {
      name: "灵武市",
      level: "district",
      adcode: 640181,
      lng: 106.339978,
      lat: 38.102456,
      childrenNum: 0,
      parent: 640100,
    },
    {
      name: "石嘴山市",
      level: "city",
      adcode: 640200,
      lng: 106.382792,
      lat: 38.984632,
      childrenNum: 3,
      parent: 64e4,
    },
    {
      name: "大武口区",
      level: "district",
      adcode: 640202,
      lng: 106.368128,
      lat: 39.019375,
      childrenNum: 0,
      parent: 640200,
    },
    {
      name: "惠农区",
      level: "district",
      adcode: 640205,
      lng: 106.781013,
      lat: 39.239292,
      childrenNum: 0,
      parent: 640200,
    },
    {
      name: "平罗县",
      level: "district",
      adcode: 640221,
      lng: 106.523411,
      lat: 38.913923,
      childrenNum: 0,
      parent: 640200,
    },
    {
      name: "吴忠市",
      level: "city",
      adcode: 640300,
      lng: 106.198613,
      lat: 37.997755,
      childrenNum: 5,
      parent: 64e4,
    },
    {
      name: "利通区",
      level: "district",
      adcode: 640302,
      lng: 106.212479,
      lat: 37.984586,
      childrenNum: 0,
      parent: 640300,
    },
    {
      name: "红寺堡区",
      level: "district",
      adcode: 640303,
      lng: 106.06216,
      lat: 37.425494,
      childrenNum: 0,
      parent: 640300,
    },
    {
      name: "盐池县",
      level: "district",
      adcode: 640323,
      lng: 107.407184,
      lat: 37.783276,
      childrenNum: 0,
      parent: 640300,
    },
    {
      name: "同心县",
      level: "district",
      adcode: 640324,
      lng: 105.895412,
      lat: 36.954635,
      childrenNum: 0,
      parent: 640300,
    },
    {
      name: "青铜峡市",
      level: "district",
      adcode: 640381,
      lng: 106.07906,
      lat: 38.021579,
      childrenNum: 0,
      parent: 640300,
    },
    {
      name: "固原市",
      level: "city",
      adcode: 640400,
      lng: 106.24267,
      lat: 36.01628,
      childrenNum: 5,
      parent: 64e4,
    },
    {
      name: "原州区",
      level: "district",
      adcode: 640402,
      lng: 106.28784,
      lat: 36.003777,
      childrenNum: 0,
      parent: 640400,
    },
    {
      name: "西吉县",
      level: "district",
      adcode: 640422,
      lng: 105.729189,
      lat: 35.963885,
      childrenNum: 0,
      parent: 640400,
    },
    {
      name: "隆德县",
      level: "district",
      adcode: 640423,
      lng: 106.111321,
      lat: 35.62592,
      childrenNum: 0,
      parent: 640400,
    },
    {
      name: "泾源县",
      level: "district",
      adcode: 640424,
      lng: 106.330569,
      lat: 35.497887,
      childrenNum: 0,
      parent: 640400,
    },
    {
      name: "彭阳县",
      level: "district",
      adcode: 640425,
      lng: 106.632151,
      lat: 35.860067,
      childrenNum: 0,
      parent: 640400,
    },
    {
      name: "中卫市",
      level: "city",
      adcode: 640500,
      lng: 105.19677,
      lat: 37.500185,
      childrenNum: 3,
      parent: 64e4,
    },
    {
      name: "沙坡头区",
      level: "district",
      adcode: 640502,
      lng: 105.173875,
      lat: 37.516859,
      childrenNum: 0,
      parent: 640500,
    },
    {
      name: "中宁县",
      level: "district",
      adcode: 640521,
      lng: 105.684729,
      lat: 37.492092,
      childrenNum: 0,
      parent: 640500,
    },
    {
      name: "海原县",
      level: "district",
      adcode: 640522,
      lng: 105.643449,
      lat: 36.565189,
      childrenNum: 0,
      parent: 640500,
    },
    {
      name: "新疆维吾尔自治区",
      level: "province",
      adcode: 65e4,
      lng: 87.628579,
      lat: 43.793301,
      childrenNum: 24,
      parent: 1e5,
    },
    {
      name: "乌鲁木齐市",
      level: "city",
      adcode: 650100,
      lng: 87.616824,
      lat: 43.825377,
      childrenNum: 8,
      parent: 65e4,
    },
    {
      name: "天山区",
      level: "district",
      adcode: 650102,
      lng: 87.631986,
      lat: 43.794312,
      childrenNum: 0,
      parent: 650100,
    },
    {
      name: "沙依巴克区",
      level: "district",
      adcode: 650103,
      lng: 87.598043,
      lat: 43.800994,
      childrenNum: 0,
      parent: 650100,
    },
    {
      name: "新市区",
      level: "district",
      adcode: 650104,
      lng: 87.592684,
      lat: 43.893023,
      childrenNum: 0,
      parent: 650100,
    },
    {
      name: "水磨沟区",
      level: "district",
      adcode: 650105,
      lng: 87.64208,
      lat: 43.832714,
      childrenNum: 0,
      parent: 650100,
    },
    {
      name: "头屯河区",
      level: "district",
      adcode: 650106,
      lng: 87.42582303,
      lat: 43.87605225,
      childrenNum: 0,
      parent: 650100,
    },
    {
      name: "达坂城区",
      level: "district",
      adcode: 650107,
      lng: 88.311099,
      lat: 43.363668,
      childrenNum: 0,
      parent: 650100,
    },
    {
      name: "米东区",
      level: "district",
      adcode: 650109,
      lng: 87.655122,
      lat: 43.97444,
      childrenNum: 0,
      parent: 650100,
    },
    {
      name: "乌鲁木齐县",
      level: "district",
      adcode: 650121,
      lng: 87.464257,
      lat: 43.509016,
      childrenNum: 0,
      parent: 650100,
    },
    {
      name: "克拉玛依市",
      level: "city",
      adcode: 650200,
      lng: 84.889239,
      lat: 45.577712,
      childrenNum: 4,
      parent: 65e4,
    },
    {
      name: "独山子区",
      level: "district",
      adcode: 650202,
      lng: 84.886973,
      lat: 44.328096,
      childrenNum: 0,
      parent: 650200,
    },
    {
      name: "克拉玛依区",
      level: "district",
      adcode: 650203,
      lng: 84.867862,
      lat: 45.602347,
      childrenNum: 0,
      parent: 650200,
    },
    {
      name: "白碱滩区",
      level: "district",
      adcode: 650204,
      lng: 85.119047,
      lat: 45.685416,
      childrenNum: 0,
      parent: 650200,
    },
    {
      name: "乌尔禾区",
      level: "district",
      adcode: 650205,
      lng: 85.692518,
      lat: 46.085819,
      childrenNum: 0,
      parent: 650200,
    },
    {
      name: "吐鲁番市",
      level: "city",
      adcode: 650400,
      lng: 89.190374,
      lat: 42.950736,
      childrenNum: 3,
      parent: 65e4,
    },
    {
      name: "高昌区",
      level: "district",
      adcode: 650402,
      lng: 89.185891,
      lat: 42.942728,
      childrenNum: 0,
      parent: 650400,
    },
    {
      name: "鄯善县",
      level: "district",
      adcode: 650421,
      lng: 90.242843,
      lat: 42.900575,
      childrenNum: 0,
      parent: 650400,
    },
    {
      name: "托克逊县",
      level: "district",
      adcode: 650422,
      lng: 88.643739,
      lat: 42.802585,
      childrenNum: 0,
      parent: 650400,
    },
    {
      name: "哈密市",
      level: "city",
      adcode: 650500,
      lng: 93.515053,
      lat: 42.819346,
      childrenNum: 3,
      parent: 65e4,
    },
    {
      name: "伊州区",
      level: "district",
      adcode: 650502,
      lng: 93.515085,
      lat: 42.827376,
      childrenNum: 0,
      parent: 650500,
    },
    {
      name: "巴里坤哈萨克自治县",
      level: "district",
      adcode: 650521,
      lng: 93.016563,
      lat: 43.598756,
      childrenNum: 0,
      parent: 650500,
    },
    {
      name: "伊吾县",
      level: "district",
      adcode: 650522,
      lng: 94.697074,
      lat: 43.254978,
      childrenNum: 0,
      parent: 650500,
    },
    {
      name: "昌吉回族自治州",
      level: "city",
      adcode: 652300,
      lng: 87.308995,
      lat: 44.011044,
      childrenNum: 7,
      parent: 65e4,
    },
    {
      name: "昌吉市",
      level: "district",
      adcode: 652301,
      lng: 87.267432,
      lat: 44.014468,
      childrenNum: 0,
      parent: 652300,
    },
    {
      name: "阜康市",
      level: "district",
      adcode: 652302,
      lng: 87.953826,
      lat: 44.164525,
      childrenNum: 0,
      parent: 652300,
    },
    {
      name: "呼图壁县",
      level: "district",
      adcode: 652323,
      lng: 86.871532,
      lat: 44.179362,
      childrenNum: 0,
      parent: 652300,
    },
    {
      name: "玛纳斯县",
      level: "district",
      adcode: 652324,
      lng: 86.20488,
      lat: 44.284601,
      childrenNum: 0,
      parent: 652300,
    },
    {
      name: "奇台县",
      level: "district",
      adcode: 652325,
      lng: 89.593879,
      lat: 44.022001,
      childrenNum: 0,
      parent: 652300,
    },
    {
      name: "吉木萨尔县",
      level: "district",
      adcode: 652327,
      lng: 89.179698,
      lat: 44.000404,
      childrenNum: 0,
      parent: 652300,
    },
    {
      name: "木垒哈萨克自治县",
      level: "district",
      adcode: 652328,
      lng: 90.286013,
      lat: 43.834631,
      childrenNum: 0,
      parent: 652300,
    },
    {
      name: "博尔塔拉蒙古自治州",
      level: "city",
      adcode: 652700,
      lng: 82.066363,
      lat: 44.906039,
      childrenNum: 4,
      parent: 65e4,
    },
    {
      name: "博乐市",
      level: "district",
      adcode: 652701,
      lng: 82.051433,
      lat: 44.853882,
      childrenNum: 0,
      parent: 652700,
    },
    {
      name: "阿拉山口市",
      level: "district",
      adcode: 652702,
      lng: 82.554609,
      lat: 45.173274,
      childrenNum: 0,
      parent: 652700,
    },
    {
      name: "精河县",
      level: "district",
      adcode: 652722,
      lng: 82.890709,
      lat: 44.599202,
      childrenNum: 0,
      parent: 652700,
    },
    {
      name: "温泉县",
      level: "district",
      adcode: 652723,
      lng: 81.024827,
      lat: 44.968857,
      childrenNum: 0,
      parent: 652700,
    },
    {
      name: "巴音郭楞蒙古自治州",
      level: "city",
      adcode: 652800,
      lng: 86.145298,
      lat: 41.764115,
      childrenNum: 9,
      parent: 65e4,
    },
    {
      name: "库尔勒市",
      level: "district",
      adcode: 652801,
      lng: 86.174633,
      lat: 41.725891,
      childrenNum: 0,
      parent: 652800,
    },
    {
      name: "轮台县",
      level: "district",
      adcode: 652822,
      lng: 84.251508,
      lat: 41.778043,
      childrenNum: 0,
      parent: 652800,
    },
    {
      name: "尉犁县",
      level: "district",
      adcode: 652823,
      lng: 86.261613,
      lat: 41.343871,
      childrenNum: 0,
      parent: 652800,
    },
    {
      name: "若羌县",
      level: "district",
      adcode: 652824,
      lng: 88.167226,
      lat: 39.022626,
      childrenNum: 0,
      parent: 652800,
    },
    {
      name: "且末县",
      level: "district",
      adcode: 652825,
      lng: 85.529619,
      lat: 38.145749,
      childrenNum: 0,
      parent: 652800,
    },
    {
      name: "焉耆回族自治县",
      level: "district",
      adcode: 652826,
      lng: 86.57434,
      lat: 42.059509,
      childrenNum: 0,
      parent: 652800,
    },
    {
      name: "和静县",
      level: "district",
      adcode: 652827,
      lng: 86.384065,
      lat: 42.323625,
      childrenNum: 0,
      parent: 652800,
    },
    {
      name: "和硕县",
      level: "district",
      adcode: 652828,
      lng: 86.877688,
      lat: 42.28361,
      childrenNum: 0,
      parent: 652800,
    },
    {
      name: "博湖县",
      level: "district",
      adcode: 652829,
      lng: 86.632116,
      lat: 41.980745,
      childrenNum: 0,
      parent: 652800,
    },
    {
      name: "阿克苏地区",
      level: "city",
      adcode: 652900,
      lng: 80.265068,
      lat: 41.170712,
      childrenNum: 9,
      parent: 65e4,
    },
    {
      name: "阿克苏市",
      level: "district",
      adcode: 652901,
      lng: 80.290429,
      lat: 41.185019,
      childrenNum: 0,
      parent: 652900,
    },
    {
      name: "库车市",
      level: "district",
      adcode: 652902,
      lng: 82.998544,
      lat: 41.719073,
      childrenNum: 0,
      parent: 652900,
    },
    {
      name: "温宿县",
      level: "district",
      adcode: 652922,
      lng: 80.243273,
      lat: 41.272995,
      childrenNum: 0,
      parent: 652900,
    },
    {
      name: "沙雅县",
      level: "district",
      adcode: 652924,
      lng: 82.781774,
      lat: 41.221413,
      childrenNum: 0,
      parent: 652900,
    },
    {
      name: "新和县",
      level: "district",
      adcode: 652925,
      lng: 82.620371,
      lat: 41.552097,
      childrenNum: 0,
      parent: 652900,
    },
    {
      name: "拜城县",
      level: "district",
      adcode: 652926,
      lng: 81.851289,
      lat: 41.795289,
      childrenNum: 0,
      parent: 652900,
    },
    {
      name: "乌什县",
      level: "district",
      adcode: 652927,
      lng: 79.22118,
      lat: 41.222706,
      childrenNum: 0,
      parent: 652900,
    },
    {
      name: "阿瓦提县",
      level: "district",
      adcode: 652928,
      lng: 80.375053,
      lat: 40.643647,
      childrenNum: 0,
      parent: 652900,
    },
    {
      name: "柯坪县",
      level: "district",
      adcode: 652929,
      lng: 79.054019,
      lat: 40.501645,
      childrenNum: 0,
      parent: 652900,
    },
    {
      name: "克孜勒苏柯尔克孜自治州",
      level: "city",
      adcode: 653e3,
      lng: 76.167327,
      lat: 39.714734,
      childrenNum: 4,
      parent: 65e4,
    },
    {
      name: "阿图什市",
      level: "district",
      adcode: 653001,
      lng: 76.167538,
      lat: 39.716586,
      childrenNum: 0,
      parent: 653e3,
    },
    {
      name: "阿克陶县",
      level: "district",
      adcode: 653022,
      lng: 75.947396,
      lat: 39.147785,
      childrenNum: 0,
      parent: 653e3,
    },
    {
      name: "阿合奇县",
      level: "district",
      adcode: 653023,
      lng: 78.402073,
      lat: 40.937581,
      childrenNum: 0,
      parent: 653e3,
    },
    {
      name: "乌恰县",
      level: "district",
      adcode: 653024,
      lng: 75.259228,
      lat: 39.7205,
      childrenNum: 0,
      parent: 653e3,
    },
    {
      name: "喀什地区",
      level: "city",
      adcode: 653100,
      lng: 75.989746,
      lat: 39.470492,
      childrenNum: 12,
      parent: 65e4,
    },
    {
      name: "喀什市",
      level: "district",
      adcode: 653101,
      lng: 75.993936,
      lat: 39.46823,
      childrenNum: 0,
      parent: 653100,
    },
    {
      name: "疏附县",
      level: "district",
      adcode: 653121,
      lng: 75.862839,
      lat: 39.375052,
      childrenNum: 0,
      parent: 653100,
    },
    {
      name: "疏勒县",
      level: "district",
      adcode: 653122,
      lng: 76.047169,
      lat: 39.401173,
      childrenNum: 0,
      parent: 653100,
    },
    {
      name: "英吉沙县",
      level: "district",
      adcode: 653123,
      lng: 76.175729,
      lat: 38.930381,
      childrenNum: 0,
      parent: 653100,
    },
    {
      name: "泽普县",
      level: "district",
      adcode: 653124,
      lng: 77.260375,
      lat: 38.184639,
      childrenNum: 0,
      parent: 653100,
    },
    {
      name: "莎车县",
      level: "district",
      adcode: 653125,
      lng: 77.223197,
      lat: 38.390881,
      childrenNum: 0,
      parent: 653100,
    },
    {
      name: "叶城县",
      level: "district",
      adcode: 653126,
      lng: 77.413669,
      lat: 37.882994,
      childrenNum: 0,
      parent: 653100,
    },
    {
      name: "麦盖提县",
      level: "district",
      adcode: 653127,
      lng: 77.609099,
      lat: 38.898986,
      childrenNum: 0,
      parent: 653100,
    },
    {
      name: "岳普湖县",
      level: "district",
      adcode: 653128,
      lng: 76.821269,
      lat: 39.219857,
      childrenNum: 0,
      parent: 653100,
    },
    {
      name: "伽师县",
      level: "district",
      adcode: 653129,
      lng: 76.723719,
      lat: 39.488181,
      childrenNum: 0,
      parent: 653100,
    },
    {
      name: "巴楚县",
      level: "district",
      adcode: 653130,
      lng: 78.54799,
      lat: 39.79923,
      childrenNum: 0,
      parent: 653100,
    },
    {
      name: "塔什库尔干塔吉克自治县",
      level: "district",
      adcode: 653131,
      lng: 75.229889,
      lat: 37.772094,
      childrenNum: 0,
      parent: 653100,
    },
    {
      name: "和田地区",
      level: "city",
      adcode: 653200,
      lng: 79.921646,
      lat: 37.114406,
      childrenNum: 8,
      parent: 65e4,
    },
    {
      name: "和田市",
      level: "district",
      adcode: 653201,
      lng: 79.912881,
      lat: 37.112246,
      childrenNum: 0,
      parent: 653200,
    },
    {
      name: "和田县",
      level: "district",
      adcode: 653221,
      lng: 79.81906982,
      lat: 37.12003092,
      childrenNum: 0,
      parent: 653200,
    },
    {
      name: "墨玉县",
      level: "district",
      adcode: 653222,
      lng: 79.728434,
      lat: 37.277518,
      childrenNum: 0,
      parent: 653200,
    },
    {
      name: "皮山县",
      level: "district",
      adcode: 653223,
      lng: 78.28548,
      lat: 37.578264,
      childrenNum: 0,
      parent: 653200,
    },
    {
      name: "洛浦县",
      level: "district",
      adcode: 653224,
      lng: 80.179911,
      lat: 37.066226,
      childrenNum: 0,
      parent: 653200,
    },
    {
      name: "策勒县",
      level: "district",
      adcode: 653225,
      lng: 80.801433,
      lat: 36.99785,
      childrenNum: 0,
      parent: 653200,
    },
    {
      name: "于田县",
      level: "district",
      adcode: 653226,
      lng: 81.677417,
      lat: 36.85708,
      childrenNum: 0,
      parent: 653200,
    },
    {
      name: "民丰县",
      level: "district",
      adcode: 653227,
      lng: 82.695946,
      lat: 37.064428,
      childrenNum: 0,
      parent: 653200,
    },
    {
      name: "伊犁哈萨克自治州",
      level: "city",
      adcode: 654e3,
      lng: 81.323691,
      lat: 43.917106,
      childrenNum: 11,
      parent: 65e4,
    },
    {
      name: "伊宁市",
      level: "district",
      adcode: 654002,
      lng: 81.277715,
      lat: 43.908021,
      childrenNum: 0,
      parent: 654e3,
    },
    {
      name: "奎屯市",
      level: "district",
      adcode: 654003,
      lng: 84.903216,
      lat: 44.426452,
      childrenNum: 0,
      parent: 654e3,
    },
    {
      name: "霍尔果斯市",
      level: "district",
      adcode: 654004,
      lng: 80.414614,
      lat: 44.218381,
      childrenNum: 0,
      parent: 654e3,
    },
    {
      name: "伊宁县",
      level: "district",
      adcode: 654021,
      lng: 81.52745,
      lat: 43.977119,
      childrenNum: 0,
      parent: 654e3,
    },
    {
      name: "察布查尔锡伯自治县",
      level: "district",
      adcode: 654022,
      lng: 81.151337,
      lat: 43.840726,
      childrenNum: 0,
      parent: 654e3,
    },
    {
      name: "霍城县",
      level: "district",
      adcode: 654023,
      lng: 80.878845,
      lat: 44.056329,
      childrenNum: 0,
      parent: 654e3,
    },
    {
      name: "巩留县",
      level: "district",
      adcode: 654024,
      lng: 82.231219,
      lat: 43.48313,
      childrenNum: 0,
      parent: 654e3,
    },
    {
      name: "新源县",
      level: "district",
      adcode: 654025,
      lng: 83.233002,
      lat: 43.434803,
      childrenNum: 0,
      parent: 654e3,
    },
    {
      name: "昭苏县",
      level: "district",
      adcode: 654026,
      lng: 81.130974,
      lat: 43.157293,
      childrenNum: 0,
      parent: 654e3,
    },
    {
      name: "特克斯县",
      level: "district",
      adcode: 654027,
      lng: 81.835732,
      lat: 43.218435,
      childrenNum: 0,
      parent: 654e3,
    },
    {
      name: "尼勒克县",
      level: "district",
      adcode: 654028,
      lng: 82.511884,
      lat: 43.798627,
      childrenNum: 0,
      parent: 654e3,
    },
    {
      name: "塔城地区",
      level: "city",
      adcode: 654200,
      lng: 82.980316,
      lat: 46.745364,
      childrenNum: 7,
      parent: 65e4,
    },
    {
      name: "塔城市",
      level: "district",
      adcode: 654201,
      lng: 82.986923,
      lat: 46.751669,
      childrenNum: 0,
      parent: 654200,
    },
    {
      name: "乌苏市",
      level: "district",
      adcode: 654202,
      lng: 84.713762,
      lat: 44.418693,
      childrenNum: 0,
      parent: 654200,
    },
    {
      name: "额敏县",
      level: "district",
      adcode: 654221,
      lng: 83.628303,
      lat: 46.524673,
      childrenNum: 0,
      parent: 654200,
    },
    {
      name: "沙湾市",
      level: "district",
      adcode: 654223,
      lng: 85.619483,
      lat: 44.326267,
      childrenNum: 0,
      parent: 654200,
    },
    {
      name: "托里县",
      level: "district",
      adcode: 654224,
      lng: 83.606372,
      lat: 45.948935,
      childrenNum: 0,
      parent: 654200,
    },
    {
      name: "裕民县",
      level: "district",
      adcode: 654225,
      lng: 82.982252,
      lat: 46.201049,
      childrenNum: 0,
      parent: 654200,
    },
    {
      name: "和布克赛尔蒙古自治县",
      level: "district",
      adcode: 654226,
      lng: 85.728328,
      lat: 46.793235,
      childrenNum: 0,
      parent: 654200,
    },
    {
      name: "阿勒泰地区",
      level: "city",
      adcode: 654300,
      lng: 88.141253,
      lat: 47.844924,
      childrenNum: 7,
      parent: 65e4,
    },
    {
      name: "阿勒泰市",
      level: "district",
      adcode: 654301,
      lng: 88.131842,
      lat: 47.827308,
      childrenNum: 0,
      parent: 654300,
    },
    {
      name: "布尔津县",
      level: "district",
      adcode: 654321,
      lng: 86.875043,
      lat: 47.701892,
      childrenNum: 0,
      parent: 654300,
    },
    {
      name: "富蕴县",
      level: "district",
      adcode: 654322,
      lng: 89.525463,
      lat: 46.994046,
      childrenNum: 0,
      parent: 654300,
    },
    {
      name: "福海县",
      level: "district",
      adcode: 654323,
      lng: 87.486703,
      lat: 47.111918,
      childrenNum: 0,
      parent: 654300,
    },
    {
      name: "哈巴河县",
      level: "district",
      adcode: 654324,
      lng: 86.418621,
      lat: 48.060846,
      childrenNum: 0,
      parent: 654300,
    },
    {
      name: "青河县",
      level: "district",
      adcode: 654325,
      lng: 90.375159,
      lat: 46.678532,
      childrenNum: 0,
      parent: 654300,
    },
    {
      name: "吉木乃县",
      level: "district",
      adcode: 654326,
      lng: 85.874096,
      lat: 47.443101,
      childrenNum: 0,
      parent: 654300,
    },
    {
      name: "石河子市",
      level: "city",
      adcode: 659001,
      lng: 86.080397,
      lat: 44.305368,
      childrenNum: 8,
      parent: 65e4,
    },
    {
      name: "阿拉尔市",
      level: "city",
      adcode: 659002,
      lng: 81.280532,
      lat: 40.547205,
      childrenNum: 19,
      parent: 65e4,
    },
    {
      name: "图木舒克市",
      level: "city",
      adcode: 659003,
      lng: 79.074762,
      lat: 39.868366,
      childrenNum: 10,
      parent: 65e4,
    },
    {
      name: "五家渠市",
      level: "city",
      adcode: 659004,
      lng: 87.542852,
      lat: 44.166489,
      childrenNum: 6,
      parent: 65e4,
    },
    {
      name: "北屯市",
      level: "city",
      adcode: 659005,
      lng: 87.834419,
      lat: 47.326733,
      childrenNum: 4,
      parent: 65e4,
    },
    {
      name: "铁门关市",
      level: "city",
      adcode: 659006,
      lng: 85.670291,
      lat: 41.862997,
      childrenNum: 2,
      parent: 65e4,
    },
    {
      name: "双河市",
      level: "city",
      adcode: 659007,
      lng: 82.367887,
      lat: 44.845935,
      childrenNum: 5,
      parent: 65e4,
    },
    {
      name: "可克达拉市",
      level: "city",
      adcode: 659008,
      lng: 80.994153,
      lat: 43.940381,
      childrenNum: 6,
      parent: 65e4,
    },
    {
      name: "昆玉市",
      level: "city",
      adcode: 659009,
      lng: 79.270193,
      lat: 37.215372,
      childrenNum: 11,
      parent: 65e4,
    },
    {
      name: "胡杨河市",
      level: "city",
      adcode: 659010,
      lng: 84.827592,
      lat: 44.692894,
      childrenNum: 4,
      parent: 65e4,
    },
    {
      name: "台湾省",
      level: "province",
      adcode: 71e4,
      lng: 121.509062,
      lat: 25.044332,
      childrenNum: 0,
      parent: 1e5,
    },
    {
      name: "台湾省",
      level: "city",
      adcode: 71e4,
      lng: 121.509062,
      lat: 25.044332,
      childrenNum: 0,
      parent: 71e4,
    },
    {
      name: "香港特别行政区",
      level: "province",
      adcode: 81e4,
      lng: 114.173355,
      lat: 22.320048,
      childrenNum: 18,
      parent: 1e5,
    },
    {
      name: "香港特别行政区",
      level: "city",
      adcode: 81e4,
      lng: 114.173355,
      lat: 22.320048,
      childrenNum: 18,
      parent: 81e4,
    },
    {
      name: "中西区",
      level: "district",
      adcode: 810001,
      lng: 114.1543731,
      lat: 22.28198083,
      childrenNum: 0,
      parent: 81e4,
    },
    {
      name: "湾仔区",
      level: "district",
      adcode: 810002,
      lng: 114.1829153,
      lat: 22.27638889,
      childrenNum: 0,
      parent: 81e4,
    },
    {
      name: "东区",
      level: "district",
      adcode: 810003,
      lng: 114.2260031,
      lat: 22.27969306,
      childrenNum: 0,
      parent: 81e4,
    },
    {
      name: "南区",
      level: "district",
      adcode: 810004,
      lng: 114.1600117,
      lat: 22.24589667,
      childrenNum: 0,
      parent: 81e4,
    },
    {
      name: "油尖旺区",
      level: "district",
      adcode: 810005,
      lng: 114.1733317,
      lat: 22.31170389,
      childrenNum: 0,
      parent: 81e4,
    },
    {
      name: "深水埗区",
      level: "district",
      adcode: 810006,
      lng: 114.1632417,
      lat: 22.33385417,
      childrenNum: 0,
      parent: 81e4,
    },
    {
      name: "九龙城区",
      level: "district",
      adcode: 810007,
      lng: 114.1928467,
      lat: 22.31251,
      childrenNum: 0,
      parent: 81e4,
    },
    {
      name: "黄大仙区",
      level: "district",
      adcode: 810008,
      lng: 114.2038856,
      lat: 22.33632056,
      childrenNum: 0,
      parent: 81e4,
    },
    {
      name: "观塘区",
      level: "district",
      adcode: 810009,
      lng: 114.2140542,
      lat: 22.32083778,
      childrenNum: 0,
      parent: 81e4,
    },
    {
      name: "荃湾区",
      level: "district",
      adcode: 810010,
      lng: 114.1210792,
      lat: 22.36830667,
      childrenNum: 0,
      parent: 81e4,
    },
    {
      name: "屯门区",
      level: "district",
      adcode: 810011,
      lng: 113.9765742,
      lat: 22.39384417,
      childrenNum: 0,
      parent: 81e4,
    },
    {
      name: "元朗区",
      level: "district",
      adcode: 810012,
      lng: 114.0324381,
      lat: 22.44142833,
      childrenNum: 0,
      parent: 81e4,
    },
    {
      name: "北区",
      level: "district",
      adcode: 810013,
      lng: 114.1473639,
      lat: 22.49610389,
      childrenNum: 0,
      parent: 81e4,
    },
    {
      name: "大埔区",
      level: "district",
      adcode: 810014,
      lng: 114.1717431,
      lat: 22.44565306,
      childrenNum: 0,
      parent: 81e4,
    },
    {
      name: "西贡区",
      level: "district",
      adcode: 810015,
      lng: 114.264645,
      lat: 22.31421306,
      childrenNum: 0,
      parent: 81e4,
    },
    {
      name: "沙田区",
      level: "district",
      adcode: 810016,
      lng: 114.1953653,
      lat: 22.37953167,
      childrenNum: 0,
      parent: 81e4,
    },
    {
      name: "葵青区",
      level: "district",
      adcode: 810017,
      lng: 114.1393194,
      lat: 22.36387667,
      childrenNum: 0,
      parent: 81e4,
    },
    {
      name: "离岛区",
      level: "district",
      adcode: 810018,
      lng: 113.94612,
      lat: 22.28640778,
      childrenNum: 0,
      parent: 81e4,
    },
    {
      name: "澳门特别行政区",
      level: "province",
      adcode: 82e4,
      lng: 113.54909,
      lat: 22.198951,
      childrenNum: 8,
      parent: 1e5,
    },
    {
      name: "澳门特别行政区",
      level: "city",
      adcode: 82e4,
      lng: 113.54909,
      lat: 22.198951,
      childrenNum: 8,
      parent: 82e4,
    },
    {
      name: "花地玛堂区",
      level: "district",
      adcode: 820001,
      lng: 113.5528956,
      lat: 22.20787,
      childrenNum: 0,
      parent: 82e4,
    },
    {
      name: "花王堂区",
      level: "district",
      adcode: 820002,
      lng: 113.5489608,
      lat: 22.1992075,
      childrenNum: 0,
      parent: 82e4,
    },
    {
      name: "望德堂区",
      level: "district",
      adcode: 820003,
      lng: 113.5501828,
      lat: 22.19372083,
      childrenNum: 0,
      parent: 82e4,
    },
    {
      name: "大堂区",
      level: "district",
      adcode: 820004,
      lng: 113.5536475,
      lat: 22.18853944,
      childrenNum: 0,
      parent: 82e4,
    },
    {
      name: "风顺堂区",
      level: "district",
      adcode: 820005,
      lng: 113.5419278,
      lat: 22.18736806,
      childrenNum: 0,
      parent: 82e4,
    },
    {
      name: "嘉模堂区",
      level: "district",
      adcode: 820006,
      lng: 113.5587044,
      lat: 22.15375944,
      childrenNum: 0,
      parent: 82e4,
    },
    {
      name: "路凼填海区",
      level: "district",
      adcode: 820007,
      lng: 113.5695992,
      lat: 22.13663,
      childrenNum: 0,
      parent: 82e4,
    },
    {
      name: "圣方济各堂区",
      level: "district",
      adcode: 820008,
      lng: 113.5599542,
      lat: 22.12348639,
      childrenNum: 0,
      parent: 82e4,
    },
    {
      name: "莫桑比克",
      level: "country",
      adcode: "莫桑比克",
      lng: 35.55686145836136,
      lat: -17.30493389122804,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "贝宁",
      level: "country",
      adcode: "贝宁",
      lng: 2.339325021462391,
      lat: 9.649757295075064,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "立陶宛",
      level: "country",
      adcode: "立陶宛",
      lng: 23.90462927573025,
      lat: 55.33585390943401,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "马提尼克（法）",
      level: "country",
      adcode: "马提尼克（法）",
      lng: -61.02106497415178,
      lat: 14.648654147502949,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "新加坡",
      level: "country",
      adcode: "新加坡",
      lng: 103.82069911937165,
      lat: 1.361520919549907,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "尼日尔",
      level: "country",
      adcode: "尼日尔",
      lng: 9.400669338566512,
      lat: 17.42385134238606,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "巴基斯坦",
      level: "country",
      adcode: "巴基斯坦",
      lng: 68.80046197960124,
      lat: 29.360638644451424,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "圣巴泰勒米（法）",
      level: "country",
      adcode: "圣巴泰勒米（法）",
      lng: -62.832396241455385,
      lat: 17.905913626662223,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "波兰",
      level: "country",
      adcode: "波兰",
      lng: 19.400678637206514,
      lat: 52.12415348570214,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "坦桑尼亚",
      level: "country",
      adcode: "坦桑尼亚",
      lng: 34.82540064380284,
      lat: -6.265288720987882,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "牙买加",
      level: "country",
      adcode: "牙买加",
      lng: -77.31069210351936,
      lat: 18.156043112111078,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "阿曼",
      level: "country",
      adcode: "阿曼",
      lng: 56.1034978508802,
      lat: 20.594726801363105,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "巴布亚新几内亚",
      level: "country",
      adcode: "巴布亚新几内亚",
      lng: 145.25249436659948,
      lat: -6.476248650592749,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "加拿大",
      level: "country",
      adcode: "加拿大",
      lng: -98.33548973927496,
      lat: 61.49510685757818,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "科威特",
      level: "country",
      adcode: "科威特",
      lng: 47.61351242795082,
      lat: 29.353927240575903,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "厄瓜多尔",
      level: "country",
      adcode: "厄瓜多尔",
      lng: -78.7693873471474,
      lat: -1.433981081211063,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "巴林",
      level: "country",
      adcode: "巴林",
      lng: 50.56563459061581,
      lat: 26.02445538278294,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "俄罗斯",
      level: "country",
      adcode: "俄罗斯",
      lng: 96.69841613297059,
      lat: 61.99492785142711,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "佛得角",
      level: "country",
      adcode: "佛得角",
      lng: -23.97968565049469,
      lat: 15.942072021336937,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "苏里南",
      level: "country",
      adcode: "苏里南",
      lng: -55.906128914845056,
      lat: 4.12927975346366,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "卡塔尔",
      level: "country",
      adcode: "卡塔尔",
      lng: 51.1986093981263,
      lat: 25.292428275735833,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "巴巴多斯",
      level: "country",
      adcode: "巴巴多斯",
      lng: -59.55490468170114,
      lat: 13.167242922244826,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "莱索托",
      level: "country",
      adcode: "莱索托",
      lng: 28.253624746529116,
      lat: -29.580356296054106,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "特克斯和凯科斯群岛（英）",
      level: "country",
      adcode: "特克斯和凯科斯群岛（英）",
      lng: -71.86233344184863,
      lat: 21.75303819958109,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "萨尔瓦多",
      level: "country",
      adcode: "萨尔瓦多",
      lng: -88.86852199877589,
      lat: 13.72379913311267,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "哈萨克斯坦",
      level: "country",
      adcode: "哈萨克斯坦",
      lng: 67.25902509125585,
      lat: 48.16397585051507,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "阿尔巴尼亚",
      level: "country",
      adcode: "阿尔巴尼亚",
      lng: 20.06999474700268,
      lat: 41.14276031091545,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "赤道几内亚",
      level: "country",
      adcode: "赤道几内亚",
      lng: 10.33500858395457,
      lat: 1.703257547480937,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "乍得",
      level: "country",
      adcode: "乍得",
      lng: 18.66666819499081,
      lat: 15.364942445041306,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "蒙古",
      level: "country",
      adcode: "蒙古",
      lng: 103.0743116651101,
      lat: 46.83852011475616,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "津巴布韦",
      level: "country",
      adcode: "津巴布韦",
      lng: 29.868786796477224,
      lat: -19.000319430438253,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "爱沙尼亚",
      level: "country",
      adcode: "爱沙尼亚",
      lng: 25.54932096079512,
      lat: 58.673130221140156,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "东帝汶",
      level: "country",
      adcode: "东帝汶",
      lng: 125.85743871857275,
      lat: -8.82652288929039,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "哥斯达黎加",
      level: "country",
      adcode: "哥斯达黎加",
      lng: -84.1987992551735,
      lat: 9.9687779255713,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "塞内加尔",
      level: "country",
      adcode: "塞内加尔",
      lng: -14.47434478910373,
      lat: 14.361260480070966,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "危地马拉",
      level: "country",
      adcode: "危地马拉",
      lng: -90.35634909805043,
      lat: 15.697488822714485,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "吉布提",
      level: "country",
      adcode: "吉布提",
      lng: 42.580053133238714,
      lat: 11.733349139369702,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "瑙鲁",
      level: "country",
      adcode: "瑙鲁",
      lng: 166.92363320424568,
      lat: -0.529394255840303,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "法属玻利尼西亚",
      level: "country",
      adcode: "法属玻利尼西亚",
      lng: -145.28784467190638,
      lat: -15.379436463985938,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "缅甸",
      level: "country",
      adcode: "缅甸",
      lng: 96.51244828879159,
      lat: 21.121984747642998,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "北马里亚纳群岛（美）",
      level: "country",
      adcode: "北马里亚纳群岛（美）",
      lng: 145.15800884233434,
      lat: 14.510570390837815,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "圣卢西亚",
      level: "country",
      adcode: "圣卢西亚",
      lng: -60.96548323627373,
      lat: 13.893906232444056,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "德国",
      level: "country",
      adcode: "德国",
      lng: 10.392399188000637,
      lat: 51.10950659859234,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "法属圭亚那",
      level: "country",
      adcode: "法属圭亚那",
      lng: -53.233182626296184,
      lat: 3.92989554065971,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "瓜德罗普（法）",
      level: "country",
      adcode: "瓜德罗普（法）",
      lng: -61.53603532458018,
      lat: 16.199414687565888,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "法罗群岛（丹）",
      level: "country",
      adcode: "法罗群岛（丹）",
      lng: -6.884534262146732,
      lat: 62.072794653155,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "瑞士",
      level: "country",
      adcode: "瑞士",
      lng: 8.226479059958823,
      lat: 46.806194658712485,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "几内亚",
      level: "country",
      adcode: "几内亚",
      lng: -10.938488967923028,
      lat: 10.434665517808073,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "韩国",
      level: "country",
      adcode: "韩国",
      lng: 127.8068438695303,
      lat: 36.35656793724668,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "加蓬",
      level: "country",
      adcode: "加蓬",
      lng: 11.783675836790099,
      lat: -0.622509802013445,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "马其顿",
      level: "country",
      adcode: "马其顿",
      lng: 21.701057442725624,
      lat: 41.60033140017565,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "阿拉伯联合酋长国",
      level: "country",
      adcode: "阿拉伯联合酋长国",
      lng: 54.25261911072285,
      lat: 23.921563664183196,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "圣诞岛（澳）",
      level: "country",
      adcode: "圣诞岛（澳）",
      lng: 105.64264573252206,
      lat: -10.488281518121074,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "安哥拉",
      level: "country",
      adcode: "安哥拉",
      lng: 17.550839928506115,
      lat: -12.298793685843892,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "列支敦士登",
      level: "country",
      adcode: "列支敦士登",
      lng: 9.554658631659157,
      lat: 47.144919564708474,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "希腊",
      level: "country",
      adcode: "希腊",
      lng: 22.989178297364294,
      lat: 39.04355317366236,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "塞拉利昂",
      level: "country",
      adcode: "塞拉利昂",
      lng: -11.790937057144145,
      lat: 8.560577698035196,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "帕劳",
      level: "country",
      adcode: "帕劳",
      lng: 134.52446082149015,
      lat: 7.43233066980599,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "泰国",
      level: "country",
      adcode: "泰国",
      lng: 101.01784889874924,
      lat: 15.107608990760559,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "西撒哈拉",
      level: "country",
      adcode: "西撒哈拉",
      lng: -13.13827648161126,
      lat: 24.673391884261267,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "新西兰",
      level: "country",
      adcode: "新西兰",
      lng: 171.47564080183145,
      lat: -41.805574782190774,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "刚果",
      level: "country",
      adcode: "刚果",
      lng: 15.245449446526619,
      lat: -0.831443066391908,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "芬兰",
      level: "country",
      adcode: "芬兰",
      lng: 26.2401139841212,
      lat: 64.48176375542182,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "挪威",
      level: "country",
      adcode: "挪威",
      lng: 14.082031957051178,
      lat: 64.46707700129326,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "所罗门群岛",
      level: "country",
      adcode: "所罗门群岛",
      lng: 159.59792561989295,
      lat: -8.894371058558487,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "斯洛文尼亚",
      level: "country",
      adcode: "斯洛文尼亚",
      lng: 14.822869982650536,
      lat: 46.11161063924829,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "葡萄牙",
      level: "country",
      adcode: "葡萄牙",
      lng: -8.461434528587462,
      lat: 39.64931118877555,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "美属维尔京群岛",
      level: "country",
      adcode: "美属维尔京群岛",
      lng: -64.80475523674406,
      lat: 17.981797207953132,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "斯洛伐克",
      level: "country",
      adcode: "斯洛伐克",
      lng: 19.48703988760859,
      lat: 48.70663025145862,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "也门",
      level: "country",
      adcode: "也门",
      lng: 47.58339609402967,
      lat: 15.872505171530609,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "圣多美和普林西比",
      level: "country",
      adcode: "圣多美和普林西比",
      lng: 6.726076561449365,
      lat: 0.444632610002585,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "皮特凯恩群岛（英）",
      level: "country",
      adcode: "皮特凯恩群岛（英）",
      lng: -128.43690207814285,
      lat: -24.42664727460509,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "毛里塔尼亚",
      level: "country",
      adcode: "毛里塔尼亚",
      lng: -10.334314290588935,
      lat: 20.26525613207096,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "博茨瓦纳",
      level: "country",
      adcode: "博茨瓦纳",
      lng: 23.814625218847954,
      lat: -22.188928130257903,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "圣马丁（荷）",
      level: "country",
      adcode: "圣马丁（荷）",
      lng: -63.06688781957493,
      lat: 18.04404708061296,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "丹麦",
      level: "country",
      adcode: "丹麦",
      lng: 10.027210262639924,
      lat: 55.98697894204626,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "委内瑞拉",
      level: "country",
      adcode: "委内瑞拉",
      lng: -66.15333562325107,
      lat: 7.13231695473709,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "直布罗陀（英占）",
      level: "country",
      adcode: "直布罗陀（英占）",
      lng: -5.347987113668141,
      lat: 36.1402737402195,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "乌干达",
      level: "country",
      adcode: "乌干达",
      lng: 32.38862478205192,
      lat: 1.281617478959092,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "阿尔及利亚",
      level: "country",
      adcode: "阿尔及利亚",
      lng: 2.647423141212346,
      lat: 28.16812060411525,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "爱尔兰",
      level: "country",
      adcode: "爱尔兰",
      lng: -8.152423928298443,
      lat: 53.18069790347723,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "黎巴嫩",
      level: "country",
      adcode: "黎巴嫩",
      lng: 35.89719664525707,
      lat: 33.9220239182487,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "埃及",
      level: "country",
      adcode: "埃及",
      lng: 29.781577403646935,
      lat: 26.561321771388307,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "意大利",
      level: "country",
      adcode: "意大利",
      lng: 12.075174042231398,
      lat: 42.78877076169903,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "几内亚比绍",
      level: "country",
      adcode: "几内亚比绍",
      lng: -14.98628288719637,
      lat: 12.01355508859378,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "巴勒斯坦",
      level: "country",
      adcode: "巴勒斯坦",
      lng: 35.02235664740794,
      lat: 31.48235745295904,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "乌拉圭",
      level: "country",
      adcode: "乌拉圭",
      lng: -56.01329797367902,
      lat: -32.80191126131695,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "朝鲜",
      level: "country",
      adcode: "朝鲜",
      lng: 127.17814554314253,
      lat: 40.14629111764855,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "利比亚",
      level: "country",
      adcode: "利比亚",
      lng: 18.02891058976973,
      lat: 27.041041893601566,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "以色列",
      level: "country",
      adcode: "以色列",
      lng: 35.02235664740794,
      lat: 31.48235745295904,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "智利",
      level: "country",
      adcode: "智利",
      lng: -71.383320197019,
      lat: -37.93127773461693,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "阿根廷",
      level: "country",
      adcode: "阿根廷",
      lng: -65.17052215373329,
      lat: -35.3959153687719,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "乌兹别克斯坦",
      level: "country",
      adcode: "乌兹别克斯坦",
      lng: 63.154209969522256,
      lat: 41.77367120737494,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "南苏丹",
      level: "country",
      adcode: "南苏丹",
      lng: 30.34973610945357,
      lat: 7.274729109374969,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "布基纳法索",
      level: "country",
      adcode: "布基纳法索",
      lng: -1.746805638782404,
      lat: 12.273502320014163,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "科特迪瓦",
      level: "country",
      adcode: "科特迪瓦",
      lng: -5.553972996968039,
      lat: 7.623162661847299,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "哥伦比亚",
      level: "country",
      adcode: "哥伦比亚",
      lng: -73.08035275540371,
      lat: 3.90679173171161,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "塔吉克斯坦",
      level: "country",
      adcode: "塔吉克斯坦",
      lng: 71.04014908870083,
      lat: 38.52529356693908,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "黑山",
      level: "country",
      adcode: "黑山",
      lng: 19.247113191317386,
      lat: 42.78747462755125,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "英国",
      level: "country",
      adcode: "英国",
      lng: -2.90104025124759,
      lat: 54.14998029605216,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "埃塞俄比亚",
      level: "country",
      adcode: "埃塞俄比亚",
      lng: 39.6357236540349,
      lat: 8.621858376235474,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "法国",
      level: "country",
      adcode: "法国",
      lng: 2.550165349257346,
      lat: 46.5621641433873,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "留尼汪（法）",
      level: "country",
      adcode: "留尼汪（法）",
      lng: 55.540215334987515,
      lat: -21.120720063309957,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "捷克",
      level: "country",
      adcode: "捷克",
      lng: 15.334385048204352,
      lat: 49.73913177060052,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "吉尔吉斯斯坦",
      level: "country",
      adcode: "吉尔吉斯斯坦",
      lng: 74.5341106450125,
      lat: 41.46528188215127,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "伊拉克",
      level: "country",
      adcode: "伊拉克",
      lng: 43.76690193430415,
      lat: 33.050934933153464,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "圣赫勒拿（英）",
      level: "country",
      adcode: "圣赫勒拿（英）",
      lng: -10.463714472088123,
      lat: -25.671231261134718,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "摩洛哥",
      level: "country",
      adcode: "摩洛哥",
      lng: -6.30219690112466,
      lat: 31.880960320244107,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "阿塞拜疆",
      level: "country",
      adcode: "阿塞拜疆",
      lng: 47.52882230378393,
      lat: 40.28830582470644,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "开曼群岛（英）",
      level: "country",
      adcode: "开曼群岛（英）",
      lng: -80.93575692606156,
      lat: 19.41167292345222,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "伯利兹",
      level: "country",
      adcode: "伯利兹",
      lng: -88.6873766225844,
      lat: 17.204555538113866,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "玻利维亚",
      level: "country",
      adcode: "玻利维亚",
      lng: -64.66211838120105,
      lat: -16.710335331751843,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "冰岛",
      level: "country",
      adcode: "冰岛",
      lng: -18.59417469927655,
      lat: 64.98991292608687,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "美国",
      level: "country",
      adcode: "美国",
      lng: -101.433248,
      lat: 39.889764,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "加纳",
      level: "country",
      adcode: "加纳",
      lng: -1.207777544249107,
      lat: 7.962840201452265,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "南非",
      level: "country",
      adcode: "南非",
      lng: 25.08915821044553,
      lat: -28.997354539882306,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "澳大利亚",
      level: "country",
      adcode: "澳大利亚",
      lng: 134.48691323154165,
      lat: -25.732766790991402,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "摩纳哥",
      level: "country",
      adcode: "摩纳哥",
      lng: 7.42163956824106,
      lat: 43.75225868494591,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "孟加拉国",
      level: "country",
      adcode: "孟加拉国",
      lng: 90.26961519951521,
      lat: 23.847605732132457,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "斐济",
      level: "country",
      adcode: "斐济",
      lng: 162.17360074053687,
      lat: -17.44679962170991,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "多米尼加",
      level: "country",
      adcode: "多米尼加",
      lng: -70.49306330083238,
      lat: 18.895444587131458,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "斯里兰卡",
      level: "country",
      adcode: "斯里兰卡",
      lng: 80.70104024817385,
      lat: 7.629297567157572,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "卢森堡",
      level: "country",
      adcode: "卢森堡",
      lng: 6.094842471042096,
      lat: 49.777514501032535,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "文莱",
      level: "country",
      adcode: "文莱",
      lng: 114.74789814072713,
      lat: 4.521287896488404,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "巴拉圭",
      level: "country",
      adcode: "巴拉圭",
      lng: -58.39344326758742,
      lat: -23.24459218206432,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "日本",
      level: "country",
      adcode: "日本",
      lng: 138.10287743618636,
      lat: 37.6486953140155,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "白俄罗斯",
      level: "country",
      adcode: "白俄罗斯",
      lng: 28.053704539139538,
      lat: 53.54240414156474,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "克罗地亚",
      level: "country",
      adcode: "克罗地亚",
      lng: 16.42015925869243,
      lat: 45.026082065416304,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "马耳他",
      level: "country",
      adcode: "马耳他",
      lng: 14.407275242114567,
      lat: 35.92455894130957,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "图瓦卢",
      level: "country",
      adcode: "图瓦卢",
      lng: 178.05456488608138,
      lat: -7.391361998084059,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "马尔维纳斯群岛（阿根、英争议）（英称福克兰群岛）",
      level: "country",
      adcode: "马尔维纳斯群岛（阿根、英争议）（英称福克兰群岛）",
      lng: -59.38163699797752,
      lat: -51.744982812749946,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "匈牙利",
      level: "country",
      adcode: "匈牙利",
      lng: 19.417998467789022,
      lat: 47.166129001386814,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "托克劳",
      level: "country",
      adcode: "托克劳",
      lng: -171.8567566285657,
      lat: -9.075172782719614,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "塞浦路斯",
      level: "country",
      adcode: "塞浦路斯",
      lng: 33.235057428350714,
      lat: 35.04930887329261,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "阿鲁巴（荷）",
      level: "country",
      adcode: "阿鲁巴（荷）",
      lng: -69.96987708725482,
      lat: 12.50822405103794,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "秘鲁",
      level: "country",
      adcode: "秘鲁",
      lng: -74.36135931361463,
      lat: -9.17243148562965,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "老挝",
      level: "country",
      adcode: "老挝",
      lng: 103.77470680267261,
      lat: 18.49479867853665,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "圣基茨和尼维斯",
      level: "country",
      adcode: "圣基茨和尼维斯",
      lng: -62.705123116413056,
      lat: 17.275090869917868,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "马里",
      level: "country",
      adcode: "马里",
      lng: -3.524347936665599,
      lat: 17.35522977529463,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "荷兰",
      level: "country",
      adcode: "荷兰",
      lng: 5.621088317828475,
      lat: 52.24860327387294,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "蒙特塞拉特（英）",
      level: "country",
      adcode: "蒙特塞拉特（英）",
      lng: -62.19304504049814,
      lat: 16.735758023717224,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "卢旺达",
      level: "country",
      adcode: "卢旺达",
      lng: 29.922736420621163,
      lat: -2.002803713602795,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "多哥",
      level: "country",
      adcode: "多哥",
      lng: 0.977198625656688,
      lat: 8.528230284559026,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "马来西亚",
      level: "country",
      adcode: "马来西亚",
      lng: 109.70859549583832,
      lat: 3.790681859554178,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "拉脱维亚",
      level: "country",
      adcode: "拉脱维亚",
      lng: 24.931415744190623,
      lat: 56.85413133998104,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "保加利亚",
      level: "country",
      adcode: "保加利亚",
      lng: 25.23874580404719,
      lat: 42.76528041797878,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "瑞典",
      level: "country",
      adcode: "瑞典",
      lng: 16.75931900760791,
      lat: 62.77682054827431,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "厄立特里亚",
      level: "country",
      adcode: "厄立特里亚",
      lng: 38.84732199647517,
      lat: 15.365182170632783,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "尼泊尔",
      level: "country",
      adcode: "尼泊尔",
      lng: 83.9398476827137,
      lat: 28.260736660651503,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "新喀里多尼亚",
      level: "country",
      adcode: "新喀里多尼亚",
      lng: 165.66465326226785,
      lat: -21.299971336717523,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "苏丹",
      level: "country",
      adcode: "苏丹",
      lng: 30.00486912011457,
      lat: 16.049654042914206,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "尼日利亚",
      level: "country",
      adcode: "尼日利亚",
      lng: 8.092434989479393,
      lat: 9.585268189092965,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "格林纳达",
      level: "country",
      adcode: "格林纳达",
      lng: -61.65482561486618,
      lat: 12.155947111165169,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "塞尔维亚",
      level: "country",
      adcode: "塞尔维亚",
      lng: 20.80476251597066,
      lat: 44.030448793098536,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "阿富汗",
      level: "country",
      adcode: "阿富汗",
      lng: 66.02594784167383,
      lat: 33.833248764014876,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "毛里求斯",
      level: "country",
      adcode: "毛里求斯",
      lng: 57.878722561698225,
      lat: -20.138987622914,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "墨西哥",
      level: "country",
      adcode: "墨西哥",
      lng: -102.53587316142111,
      lat: 23.940643075548696,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "圭亚那",
      level: "country",
      adcode: "圭亚那",
      lng: -58.97392420659245,
      lat: 4.794861482321979,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "印度",
      level: "country",
      adcode: "印度",
      lng: 79.39386405376816,
      lat: 22.318202543362222,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "越南",
      level: "country",
      adcode: "越南",
      lng: 106.30724969377896,
      lat: 16.637052728939295,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "喀麦隆",
      level: "country",
      adcode: "喀麦隆",
      lng: 12.742988393503996,
      lat: 5.697364380478717,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "科科斯群岛",
      level: "country",
      adcode: "科科斯群岛",
      lng: 96.8644128832755,
      lat: -12.123992097237727,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "西班牙",
      level: "country",
      adcode: "西班牙",
      lng: -3.487465967402485,
      lat: 40.38500230184301,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "安提瓜和巴布达",
      level: "country",
      adcode: "安提瓜和巴布达",
      lng: -61.8000579507463,
      lat: 17.272292254662194,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "诺福克岛（澳）",
      level: "country",
      adcode: "诺福克岛（澳）",
      lng: 167.95617595540122,
      lat: -29.026773505965185,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "巴哈马",
      level: "country",
      adcode: "巴哈马",
      lng: -76.60659557335131,
      lat: 24.25143100895964,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "特立尼达和多巴哥",
      level: "country",
      adcode: "特立尼达和多巴哥",
      lng: -61.25655863006313,
      lat: 10.469497977760746,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "圣皮埃尔和密克隆（法）",
      level: "country",
      adcode: "圣皮埃尔和密克隆（法）",
      lng: -56.323786248285764,
      lat: 46.93616983501878,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "圣文森特和格林纳丁斯",
      level: "country",
      adcode: "圣文森特和格林纳丁斯",
      lng: -61.204473123627864,
      lat: 13.187602054035567,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "刚果民主共和国",
      level: "country",
      adcode: "刚果民主共和国",
      lng: 23.657569957578723,
      lat: -2.879225758065548,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "柬埔寨",
      level: "country",
      adcode: "柬埔寨",
      lng: 104.92135161121213,
      lat: 12.707528634905316,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "纽埃",
      level: "country",
      adcode: "纽埃",
      lng: -169.86018642484487,
      lat: -19.050362393389996,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "罗马尼亚",
      level: "country",
      adcode: "罗马尼亚",
      lng: 24.985786557252297,
      lat: 45.84316615393038,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "安圭拉（英）",
      level: "country",
      adcode: "安圭拉（英）",
      lng: -63.06190150732735,
      lat: 18.228428673822176,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "摩尔多瓦",
      level: "country",
      adcode: "摩尔多瓦",
      lng: 28.46816721827527,
      lat: 47.20577887303251,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "库拉索（荷）",
      level: "country",
      adcode: "库拉索（荷）",
      lng: -68.70324165469367,
      lat: 12.181734649730867,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "波斯尼亚和黑塞哥维那",
      level: "country",
      adcode: "波斯尼亚和黑塞哥维那",
      lng: 17.783927867914603,
      lat: 44.17415355383435,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "索马里",
      level: "country",
      adcode: "索马里",
      lng: 45.86768858877274,
      lat: 6.061240083800572,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "马绍尔群岛",
      level: "country",
      adcode: "马绍尔群岛",
      lng: 169.77765839992733,
      lat: 7.60789532308299,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "萨摩亚",
      level: "country",
      adcode: "萨摩亚",
      lng: -172.16811714165118,
      lat: -13.73829103863544,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "瓦利斯和富图纳（法）",
      level: "country",
      adcode: "瓦利斯和富图纳（法）",
      lng: -177.1931265334327,
      lat: -13.828390959275293,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "巴西",
      level: "country",
      adcode: "巴西",
      lng: -53.08001329207692,
      lat: -10.767141479455526,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "伊朗",
      level: "country",
      adcode: "伊朗",
      lng: 54.3049123036678,
      lat: 32.56059119465505,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "百慕大（英）",
      level: "country",
      adcode: "百慕大（英）",
      lng: -64.77210269483916,
      lat: 32.31018495490235,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "马尔代夫",
      level: "country",
      adcode: "马尔代夫",
      lng: 73.22230299919782,
      lat: 3.593812861594492,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "瓦努阿图",
      level: "country",
      adcode: "瓦努阿图",
      lng: 167.70386485087116,
      lat: -16.197428823200042,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "土库曼斯坦",
      level: "country",
      adcode: "土库曼斯坦",
      lng: 59.1775613807654,
      lat: 39.19413320721755,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "马拉维",
      level: "country",
      adcode: "马拉维",
      lng: 34.32116034604895,
      lat: -13.175447284173567,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "沙特阿拉伯",
      level: "country",
      adcode: "沙特阿拉伯",
      lng: 44.55239425499509,
      lat: 24.099897669704113,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "汤加",
      level: "country",
      adcode: "汤加",
      lng: -174.8567304053291,
      lat: -19.880245705244697,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "叙利亚",
      level: "country",
      adcode: "叙利亚",
      lng: 38.49774219407179,
      lat: 35.01398772284428,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "土耳其",
      level: "country",
      adcode: "土耳其",
      lng: 35.17364290139091,
      lat: 39.061430409367304,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "利比里亚",
      level: "country",
      adcode: "利比里亚",
      lng: -9.307261602051854,
      lat: 6.447449346026756,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "纳米比亚",
      level: "country",
      adcode: "纳米比亚",
      lng: 17.218612500295567,
      lat: -22.140675959510666,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "圣马丁（法）",
      level: "country",
      adcode: "圣马丁（法）",
      lng: -63.065231984020116,
      lat: 18.084415634645865,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "塞舌尔",
      level: "country",
      adcode: "塞舌尔",
      lng: 51.98713362851671,
      lat: -6.675794133510847,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "斯威士兰",
      level: "country",
      adcode: "斯威士兰",
      lng: 31.50156162344187,
      lat: -26.564774314557166,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "圣马力诺",
      level: "country",
      adcode: "圣马力诺",
      lng: 12.459262981378979,
      lat: 43.94363202771218,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "尼加拉瓜",
      level: "country",
      adcode: "尼加拉瓜",
      lng: -85.03279256815446,
      lat: 12.840906315016042,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "菲律宾",
      level: "country",
      adcode: "菲律宾",
      lng: 122.86861509983703,
      lat: 11.740293700495222,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "亚美尼亚",
      level: "country",
      adcode: "亚美尼亚",
      lng: 44.93833152902648,
      lat: 40.293387614025484,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "乌克兰",
      level: "country",
      adcode: "乌克兰",
      lng: 31.410686719736105,
      lat: 49.00873259998881,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "奥地利",
      level: "country",
      adcode: "奥地利",
      lng: 14.140092846783435,
      lat: 47.588519201661,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "英属维尔京群岛",
      level: "country",
      adcode: "英属维尔京群岛",
      lng: -64.51542656078547,
      lat: 18.5141502254839,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "安道尔",
      level: "country",
      adcode: "安道尔",
      lng: 1.576515031491541,
      lat: 42.550712528976625,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "古巴",
      level: "country",
      adcode: "古巴",
      lng: -79.01451487526519,
      lat: 21.624958001187547,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "科摩罗",
      level: "country",
      adcode: "科摩罗",
      lng: 43.94924457564892,
      lat: -12.063557273171597,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "比利时",
      level: "country",
      adcode: "比利时",
      lng: 4.659861878860662,
      lat: 50.64163498296361,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "洪都拉斯",
      level: "country",
      adcode: "洪都拉斯",
      lng: -86.60084929449437,
      lat: 14.821601539364142,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "库克群岛",
      level: "country",
      adcode: "库克群岛",
      lng: -158.95525873152502,
      lat: -19.336734962235976,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "冈比亚",
      level: "country",
      adcode: "冈比亚",
      lng: -15.388134593143736,
      lat: 13.446753990671356,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "多米尼克",
      level: "country",
      adcode: "多米尼克",
      lng: -61.35625962857533,
      lat: 15.427136158660206,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "巴拿马",
      level: "country",
      adcode: "巴拿马",
      lng: -80.10829665021076,
      lat: 8.512789110134543,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "约旦",
      level: "country",
      adcode: "约旦",
      lng: 36.79346630038019,
      lat: 31.251578359406075,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "格陵兰（丹）",
      level: "country",
      adcode: "格陵兰（丹）",
      lng: -41.344988824173605,
      lat: 74.72782964420267,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "印度尼西亚",
      level: "country",
      adcode: "印度尼西亚",
      lng: 117.2765738457852,
      lat: -2.226236451183703,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "美属萨摩亚",
      level: "country",
      adcode: "美属萨摩亚",
      lng: -170.37662936556146,
      lat: -14.20973781983602,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "马达加斯加",
      level: "country",
      adcode: "马达加斯加",
      lng: 46.70007649879095,
      lat: -19.379543248000953,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "不丹",
      level: "country",
      adcode: "不丹",
      lng: 90.44928937783142,
      lat: 27.38820994411501,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "梵蒂冈",
      level: "country",
      adcode: "梵蒂冈",
      lng: 12.451129606415062,
      lat: 41.90434739309104,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "布隆迪",
      level: "country",
      adcode: "布隆迪",
      lng: 29.886733446293494,
      lat: -3.365493401255697,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "基里巴斯",
      level: "country",
      adcode: "基里巴斯",
      lng: -77.43437479699014,
      lat: 2.226446919756726,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "海地",
      level: "country",
      adcode: "海地",
      lng: -72.68555036065503,
      lat: 18.93575656522325,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "突尼斯",
      level: "country",
      adcode: "突尼斯",
      lng: 9.578670428154085,
      lat: 34.12020504728796,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "中非",
      level: "country",
      adcode: "中非",
      lng: 20.48680203774383,
      lat: 6.574041671393085,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "格鲁吉亚",
      level: "country",
      adcode: "格鲁吉亚",
      lng: 43.5129799818716,
      lat: 42.178607389670965,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "波多黎各（美）",
      level: "country",
      adcode: "波多黎各（美）",
      lng: -66.4636101401697,
      lat: 18.225272642693334,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "密克罗尼西亚联邦",
      level: "country",
      adcode: "密克罗尼西亚联邦",
      lng: 155.0757779439893,
      lat: 7.139265375958126,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "赞比亚",
      level: "country",
      adcode: "赞比亚",
      lng: 27.79412100872176,
      lat: -13.457725051871149,
      childrenNum: 0,
      parent: null,
    },
    {
      name: "肯尼亚",
      level: "country",
      adcode: "肯尼亚",
      lng: 37.86169142636884,
      lat: 0.534299750273016,
      childrenNum: 0,
      parent: null,
    },
  ],
  eq = (t = !0) => ({
    geoArea: { url: "/topojsonv2", type: "topojson" },
    source: { data: qZ, joinBy: { sourceField: "code", geoField: "adcode" } },
    viewLevel: {
      level: "country",
      adcode: 1e5,
      granularity: t ? "city" : "province",
    },
    color: {
      field: "parent",
      value: ({ parent: e }) =>
        e.adcode === 44e4 ? "rgb(52,58,61)" : "#202629",
    },
    style: { opacity: 1, stroke: "#494d59", lineWidth: 0.6, lineOpacity: 1 },
    chinaBorder: {
      national: { color: "#2b3a7c", width: 1, opacity: 1 },
      dispute: { color: "#ffc057", width: 1, opacity: 0.8, dashArray: [2, 2] },
      coast: { color: "transparent", width: 0.7, opacity: 0.8 },
      hkm: { color: "#999", width: 0.7, opacity: 0.8 },
    },
    label: {
      visible: !0,
      field: "name",
      style: {
        fill: "#000",
        opacity: 0.8,
        fontSize: 12,
        stroke: "#fff",
        strokeWidth: 1.5,
        textAllowOverlap: !1,
        padding: [5, 5],
      },
    },
  });
let $Z = [
    "#c2dff3",
    "#b0dbfa",
    "#99CCFF",
    "#7CB5EC",
    "#62b9f3",
    "#45a9ec",
    "#229cee",
    "#118adb",
    "#1082ce",
    "#0669aa",
    "#4682B4",
    "#7FFFD4",
    "#B4EEB4",
    "#f90",
    "#bd954b",
    "#EEE5DE",
    "#EE7942",
    "#EAEAEA",
    "#E066FF",
    "#9AFF9A",
    "#8B7355",
    "#0f0",
    "#0000AA",
    "#CDAD00",
    "#7CFC00",
    "#8B1A1A",
    "#32CD32",
    "#00B2EE",
    "#A2B5CD",
    "#C1CDCD",
    "#C0FF3E",
    "#B8860B",
    "#B23AEE",
    "#FFB6C1",
    "#5F9EA0",
  ],
  KZ = [
    "#1376DB",
    "#309FEE",
    "#305A7A",
    "#14DCDC",
    "#00BAB9",
    "#239E7F",
    "#34D631",
    "#C9AB19",
    "#D37F29",
    "#5D5DD9",
    "#7085F0",
    "#3E5AEA",
  ],
  vy = [
    "#D37F29",
    "#1376DB",
    "#309FEE",
    "#305A7A",
    "#14DCDC",
    "#00BAB9",
    "#239E7F",
    "#34D631",
    "#B4EEB4",
    "#FFB6C1",
    "#3E5AEA",
    "#668B8B",
    "#97FFFF",
    "#FFF0F5",
    "#54FF9F",
    "#6A5ACD",
    "#698B22",
    "	#98FB98",
    "#EEEE00",
  ];
function tq(t) {
  return {
    title: { show: !1, text: "发电集团装机" },
    tooltip: {
      textStyle: { fontSize: 10 },
      formatter: (e) =>
        e.marker +
        e.name +
        '&nbsp;&nbsp;&nbsp;<span style="font-weight:600">' +
        e.value +
        "万千瓦</span>",
    },
    legend: {
      show: !1,
      orient: "horizontal",
      top: 10,
      bottom: 0,
      textStyle: { color: "#ffffff" },
      icon: "circle",
    },
    grid: { top: 0, bottom: 2 },
    series: [
      {
        type: "pie",
        radius: "75%",
        center: ["45%", "45%"],
        itemStyle: { color: (e) => (t.colors || KZ)[e.dataIndex] },
        label: {
          show: !0,
          position: "outside",
          color: "#ffffff",
          formatter: (e) => e.name + e.value + "万千瓦",
        },
        emphasis: { scale: !1 },
        data: t.yAxis,
      },
    ],
  };
}
function nq(t) {
  return {
    legend: { show: !1 },
    tooltip: {
      show: !0,
      textStyle: { fontSize: 10 },
      formatter: (e) =>
        e.marker +
        e.name +
        '&nbsp;&nbsp;&nbsp;<span style="font-weight:600">' +
        e.value +
        "台</span>",
    },
    grid: { left: "0", right: "0", top: 20, bottom: "10%", containLabel: !0 },
    xAxis: {
      data: t.xAxis,
      axisLine: { show: !1 },
      axisTick: { show: !1 },
      axisLabel: { fontSize: 12, color: "#ffffff" },
      splitLine: { show: !1 },
    },
    yAxis: { type: "value", show: !1 },
    series: [
      {
        type: "bar",
        barWidth: 10,
        barGap: 10,
        color: "#7CB5EC",
        itemStyle: { normal: { color: (e) => $Z[e.dataIndex] } },
        label: { show: !0, color: "#ffffff", position: "top" },
        data: t.yAxis,
      },
    ],
  };
}
function rq(t) {
  return {
    title: { show: !1, text: "投产" },
    tooltip: {
      show: !0,
      backgroundColor: "#1C256A",
      borderColor: "#00DFFA",
      extraCssText: "box-shadow: inset 0px 0px 8px #00DFFA;",
      borderWidth: 1,
      textStyle: { color: "#fff", lineHeight: 200, height: 200 },
      formatter: (e) =>
        e.data && e.data.item && e.data.item.childArr
          ? e.data.item.childArr.map(
              (n) =>
                "<div>" +
                e.marker +
                n._id +
                '&nbsp;&nbsp;&nbsp;<span style="font-weight:600">' +
                n.etattr_capacity +
                "万千瓦</span></div>"
            ).join(`
`)
          : e.marker +
            e.name +
            '&nbsp;&nbsp;&nbsp;<span style="font-weight:600">' +
            e.value +
            "万千瓦</span>",
    },
    legend: {
      show: !0,
      bottom: 80,
      textStyle: { color: "#ffffff", fontSize: "16px" },
      icon: "circle",
    },
    grid: { top: 0, bottom: "50%" },
    series: [
      {
        type: "pie",
        radius: "50%",
        center: ["50%", "35%"],
        itemStyle: { color: (e) => (t.colors || vy)[e.dataIndex] },
        label: {
          show: !0,
          position: "outside",
          color: "#ffffff",
          padding: [10, 0, 0, 0],
          fontSize: "14px",
          lineHeight: 20,
          formatter: (e) =>
            e.name +
            `
` +
            e.value +
            "万千瓦(" +
            e.percent +
            "%)",
        },
        emphasis: {},
        animationDuration: 500,
        data: t.yAxis,
      },
    ],
  };
}
function iq(t) {
  return {
    title: { show: !1, text: "设计总包" },
    tooltip: {
      show: !0,
      backgroundColor: "#0E254C",
      borderColor: "#1FE7FF",
      extraCssText: "box-shadow: inset 0px 0px 8px #00DFFA;",
      borderWidth: 1,
      textStyle: { color: "#fff", lineHeight: 200, height: 200 },
      formatter: (e) => {
        var r, o;
        let n = "";
        return (
          (o = (r = e.data) == null ? void 0 : r.otherData) != null &&
            o.length &&
            e.data.otherData.map((l) => {
              n +=
                e.marker +
                l.name +
                '&nbsp;&nbsp;&nbsp;<span style="font-weight:600"></span><br/>';
            }),
          n
        );
      },
    },
    legend: {
      show: !0,
      bottom: 60,
      textStyle: { color: "#ffffff", fontSize: "16px" },
      icon: "circle",
      width: "700px",
      itemGap: 20,
      itemStyle: { rich: { a: { width: "max-content" } } },
    },
    grid: { top: 0, bottom: "50%" },
    series: [
      {
        type: "pie",
        radius: "50%",
        center: ["50%", "35%"],
        itemStyle: { color: (e) => (t.colors || vy)[e.dataIndex] },
        labelLine: { length: 50 },
        label: {
          show: !0,
          position: "outside",
          color: "#ffffff",
          padding: [100, 0, 0, 0],
          fontSize: "14px",
          lineHeight: 20,
          formatter: (e) => {
            let n = (e.data.desc || e.data.name).split(":").map((r) => r.trim())
              .join(`
`);
            return (
              (n +=
                `
` +
                e.value.toFixed(2) +
                "万千瓦    (" +
                e.percent +
                "%)"),
              n
            );
          },
        },
        emphasis: {},
        animationDuration: 500,
        data: t.yAxis,
      },
    ],
  };
}
function aq(t) {
  return {
    title: { show: !1, text: "设计总包" },
    tooltip: {
      show: !0,
      backgroundColor: "#0E254C",
      borderColor: "#1FE7FF",
      extraCssText: "box-shadow: inset 0px 0px 8px #00DFFA;",
      borderWidth: 1,
      textStyle: { color: "#fff", lineHeight: 200, height: 200 },
      formatter: (e) => {
        var r, o;
        let n = "";
        return (
          (o = (r = e.data) == null ? void 0 : r.otherData) != null &&
            o.length &&
            e.data.otherData.map((l) => {
              n +=
                e.marker +
                l.name +
                '&nbsp;&nbsp;&nbsp;<span style="font-weight:600">' +
                l.value +
                "</span><span>" +
                l.unit +
                "</span><br/>";
            }),
          n
        );
      },
    },
    legend: {
      show: !0,
      bottom: 60,
      textStyle: { color: "#ffffff", fontSize: "16px" },
      icon: "circle",
      width: "700px",
      itemGap: 20,
      itemStyle: { rich: { a: { width: "max-content" } } },
    },
    grid: { top: 0, bottom: "50%" },
    series: [
      {
        type: "pie",
        radius: "50%",
        center: ["50%", "35%"],
        itemStyle: { color: (e) => (t.colors || vy)[e.dataIndex] },
        label: {
          show: !0,
          position: "outside",
          color: "#ffffff",
          fontSize: "14px",
          lineHeight: 20,
          formatter: (e) => {
            let n = (e.data.desc || e.data.name).split(":").map((r) => r.trim())
              .join(`
`);
            return (
              (n += `
`),
              (n += e.value.toFixed(2) + `${e.data.unit}(` + e.percent + "%)"),
              n
            );
          },
        },
        emphasis: {},
        animationDuration: 500,
        data: t.yAxis,
      },
    ],
  };
}
const QZ = [
    {
      properties: {
        id: 1,
        name: "领海线",
        longitude: 115.21868573262105,
        latitude: 22.134901812121914,
      },
      coordinates: [
        [117.82283174059052, 23.374386765465058],
        [117.34683233095389, 23.031876491830896],
        [116.5753146499264, 22.749332883014127],
        [115.21868573262105, 22.134901812121914],
        [114.03677500540584, 21.617935091639644],
        [112.84472314665155, 21.373187267433334],
        [112.4900473, 21.28715983],
        [111.44896880996997, 19.862326949443553],
      ],
    },
  ],
  oq = { data: QZ },
  JZ = "" + new URL("start-to-work-D0HkiTR6.png", import.meta.url).href,
  aT =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAcCAYAAACdz7SqAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIuSURBVHgBxZc9T+NAEIZnN7kuxZWhMxI/IPREF0qq3BVce+F6JFo6GkQN/ACoAYlQQUcQ9NCDZHekIxJUiHh4J1nD2l5C/IF4pWGjtZknM/sxE0VTiplbGNowGT3YT/NoALsxdqKU6lFRAbYG83l6ybv/KI/wjx7smvPLFx9ZgB3YAxeX+Pid9K8cQHnpODn/yExnIRNCpzsm6vN4fg4e6rCmUrRU0fSB/mCtu06oScc1vW+SkU6HIe0OmZ5osuqwlYoTLpttHuDABfVpvDPftPMS0lHIlEUdgP+nwT1AF+WDtoCdMoCifWRlB9lJqMVmVysLGotSUro1zA60tVnV1NSxZAaIdlYZYAvDuf307/OQ+lRMNdjBjwrV4tt1MUpv256VKIsCRbLxLjmVrXYEbdizlyGVpqv0nmg4oXdUbC1t3aYj9SJo7Fz2y2O6fHmavkERdGBP1hWVpjmdcjaIoEHsRSqPOpOeuomgPXt2vsSkL6QjfYOe2LNLWo8OdlHVpfKkod0R1LQYQTQrN8hqtXi4UnESkmvwwva8bT+Vb7is86/tCqqMI8oN+ZMsbVJLYxfFLirNYcZKs4zlWa06o5x1QT1yFXFA91Bx+jwZXsMariOlTccxoY+KuAF3MOy5nApc7lJpV+7NF5gBSFoWAS3gc829IrF2xSnpk/gLG7NJYGlBfc4vaV89yiMet6N+Bpi8O7HZnvpMwNEvDJKqhjH7Z0VA41utK+fwM1+vnmVB89Rdo2oAAAAASUVORK5CYII=",
  eY =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACzSURBVHgB7dYxCsJAEIXhiZA+97KytolgrzdwcxEVPICFBzNgb3SLQEiK7Lx5080PC1sszEdIlohEUQR0vj2bvITQRpQdH6/0qet3XnkvxtSAoapOk/3FilAD/jUzkAmBABZZEBSABUEDoAgqAEHQAVqEC2BEtAWXlRugNM8nkO6HXb92zusdSNf9tis56/EVFA+nA7TDqQBkOA2ADkcBPWs4BBi+0rGGw+UbriX9kkVR9AOY7Ux4FCN9vgAAAABJRU5ErkJggg==",
  tY = {
    __name: "BeginConstruct",
    props: { developmentHistory: { type: Array, default: () => [] } },
    setup(t) {
      return { __sfc: !0, startToWorkImg: JZ, pointIcon: aT, arrowIcon: eY };
    },
  };
var nY = function () {
    var e = this,
      n = e._self._c,
      r = e._self._setupProxy;
    return n(
      "div",
      {
        staticClass: "h-356rpx mt-35rpx relative pl-36rpx pr-36rpx",
        style: {
          backgroundImage: `url(${r.startToWorkImg})`,
          backgroundSize: "100% 100%",
        },
      },
      [
        n("p", { staticClass: "text-18rpx pl-24rpx pt-10rpx" }, [
          e._v("广东省海上风电项目建设历程"),
        ]),
        n(
          "div",
          { staticClass: "relative flex flex-nowrap overflow-x-auto" },
          e._l(e.developmentHistory, function (o, l) {
            return n(
              "div",
              {
                key: l,
                staticClass: "h-260rpx relative mt-11rpx flex-shrink-0",
              },
              [
                n(
                  "div",
                  { attrs: { "h-41rpx": "", "pr-40rpx": "" } },
                  [
                    o.gdOffshoreInfoList.length > 0
                      ? n(
                          "a-tooltip",
                          {
                            attrs: {
                              trigger: "hover",
                              "overlay-class-name": "history-event",
                            },
                            scopedSlots: e._u(
                              [
                                {
                                  key: "title",
                                  fn: function () {
                                    return e._l(
                                      o.gdOffshoreInfoList,
                                      function (a, h) {
                                        return n(
                                          "div",
                                          {
                                            key: h,
                                            staticClass: "sibling-space block",
                                          },
                                          [e._v(" · " + e._s(a.title) + " ")]
                                        );
                                      }
                                    );
                                  },
                                  proxy: !0,
                                },
                              ],
                              null,
                              !0
                            ),
                          },
                          [
                            n(
                              "div",
                              {
                                staticClass:
                                  "event w-300rpx truncate lh-17rpx text-white text-14rpx font-600 bg-#0D1C5133 text-center",
                                attrs: {
                                  p: "~ l-16rpx t-12rpx r-16rpx b-12rpx",
                                },
                              },
                              [
                                e._v(
                                  " " +
                                    e._s(o.gdOffshoreInfoList[0].title) +
                                    " "
                                ),
                              ]
                            ),
                          ]
                        )
                      : e._e(),
                  ],
                  1
                ),
                n(
                  "div",
                  {
                    staticClass:
                      "text-center text-24rpx font-700 text-white mt-16rpx",
                  },
                  [e._v(" " + e._s(l) + " ")]
                ),
                n("div", { staticClass: "tail w-100% relative mt-8rpx" }, [
                  n("div", {
                    staticClass: "w-100%",
                    attrs: { border: "b-1rpx #ffffff40 solid" },
                  }),
                  n("img", {
                    staticClass:
                      "w-14rpx h-14rpx absolute mt--2rpx left-50% transform-translate--50%",
                    attrs: { src: r.pointIcon },
                  }),
                ]),
                n(
                  "div",
                  { staticClass: "news-list mt-14rpx pr-40rpx" },
                  [
                    e._l(o.windFarmList.slice(0, 3), function (a, h) {
                      return n(
                        "div",
                        {
                          key: h,
                          staticClass:
                            "news-item text-16rpx text-white pl-10rpx truncate cursor-default cursor-pointer",
                          on: {
                            click: function (f) {
                              return e.$emit("openCapacity", a);
                            },
                          },
                        },
                        [e._v(" " + e._s(a.projectName) + " ")]
                      );
                    }),
                    o.windFarmList.length > 3
                      ? n(
                          "a-tooltip",
                          {
                            attrs: {
                              trigger: "click",
                              placement: "right",
                              "overlay-class-name": "full-history-tooltip",
                            },
                            scopedSlots: e._u(
                              [
                                {
                                  key: "title",
                                  fn: function () {
                                    return e._l(
                                      o.windFarmList,
                                      function (a, h) {
                                        return n(
                                          "div",
                                          {
                                            key: h,
                                            staticClass:
                                              "sibling-space h-38rpx box-border flex items-center cursor-pointer text-16rpx hover:bg-#FFFFFF33 border-rounded-4rpx",
                                            attrs: {
                                              p: "~ l-10rpx t-4rpx r-10rpx b-4rpx",
                                            },
                                            on: {
                                              click: function (f) {
                                                return e.$emit(
                                                  "openCapacity",
                                                  a
                                                );
                                              },
                                            },
                                          },
                                          [
                                            e._v(
                                              " " + e._s(a.projectName) + " "
                                            ),
                                          ]
                                        );
                                      }
                                    );
                                  },
                                  proxy: !0,
                                },
                              ],
                              null,
                              !0
                            ),
                          },
                          [
                            n(
                              "div",
                              {
                                staticClass:
                                  "text-12rpx text-#3EFBFE mt-6rpx inline-block flex-row items-center cursor-pointer",
                              },
                              [
                                n("span", [e._v("查看全部")]),
                                n("img", {
                                  staticClass: "w-16rpx h-16rpx",
                                  attrs: { src: r.arrowIcon },
                                }),
                              ]
                            ),
                          ]
                        )
                      : e._e(),
                  ],
                  2
                ),
              ]
            );
          }),
          0
        ),
      ]
    );
  },
  rY = [],
  iY = kp(tY, nY, rY, !1, null, "e39b88b8");
const aY = iY.exports,
  oT = "" + new URL("chart-small-bg-5cKYjJOQ.png", import.meta.url).href,
  $b =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACUSURBVHgB7ZQ7CoAwEAU3ll7LVlsvGmuPZRt3IWU++wEb30CwMGaGRUIEAADg76TRy1LKxo+d10o+Hl53Sin3NizUl4v0DMipfrvXs2wBX9EN4LHJ+DLFyfWstocm8PjkHzjIh8iv0YZpQCBiKlcHOCJUclOAIUItNwcoIkxyV8Agwix3BzQiXPIwcsONbjkAANDwAt6kOTl+xgwXAAAAAElFTkSuQmCC",
  oY = {
    name: "ConstructionProcess",
    components: {
      BeginConstruct: aY,
      Chart: (t) => (console.log("async conm"), t(window.seaChart)),
    },
    data() {
      return {
        cityList: [],
        areaList: [],
        city: [],
        area: [],
        comProps: {
          beforeSetOptions(t) {
            return Ag(t, {
              xAxis: {
                axisLine: {
                  lineStyle: { color: "#FFFFFF1A", width: 1, type: "dashed" },
                },
              },
            });
          },
          chartData: { unit: "个", series: [], xAxisData: [] },
        },
        comPropsCapacity: {
          beforeSetOptions(t) {
            return Ag(t, {
              yAxis: {
                name: "单位：万千瓦",
                yAxis: {
                  nameTextStyle: {
                    fontSize: 14,
                    color: "#FFFFFFCC",
                    align: "left",
                    padding: [0, 0, 8, 0],
                  },
                },
              },
              xAxis: {
                axisLine: {
                  lineStyle: { color: "#FFFFFF1A", width: 1, type: "dashed" },
                },
              },
            });
          },
          chartData: { unit: "万千瓦", series: [], xAxisData: [] },
        },
        developmentHistory: [],
        chartSmBg: oT,
      };
    },
    mounted() {
      this.loadData();
    },
    methods: {
      openCapacity(t) {
        this.$emit("openCapacity", t);
      },
      loadData() {
        this.loadSelectData(), this.onSearch();
      },
      async loadSelectData() {
        const { result: t } = await Eg({
          url: "/admin/dynamic/ability/getSelectList",
        });
        (this.cityList = t.city), (this.areaList = t.groupAbbreviation);
      },
      async onReset() {
        (this.city = []), (this.area = []), this.onSearch();
      },
      async onSearch() {
        const { result: t } = await Eg({
            url: "/admin/dynamic/ability/gdOffshoreDevelopmentHistory",
            data: {
              city: this.city.toString(),
              groupAbbreviation: this.area.toString(),
            },
          }),
          { constructionProcess: e, developmentHistory: n } = t;
        this.developmentHistory = n;
        const r = [],
          o = [],
          l = [],
          a = [],
          f = new Date().getFullYear(),
          v = (x) => ({
            type: "linear",
            x: 0,
            y: 0,
            x2: 0,
            y2: 1,
            colorStops: x,
          }),
          E = {
            borderColor: v([
              { offset: 1, color: "#fff3" },
              { offset: 0, color: "#fff" },
            ]),
            borderWidth: 2,
          };
        for (const x in e)
          if (Object.hasOwnProperty.call(e, x)) {
            const T = e[x];
            Number(x) > f
              ? (r.push({ value: T.sumProjectNum, itemStyle: E }),
                o.push({ value: T.projectNum, itemStyle: E }),
                l.push({ value: T.sumCapacity, itemStyle: E }),
                a.push({ value: T.capacity, itemStyle: E }))
              : (r.push(T.sumProjectNum),
                o.push(T.projectNum),
                l.push(T.sumCapacity),
                a.push(T.capacity));
          }
        (this.comProps.chartData.xAxisData = Object.keys(e)),
          (this.comProps.chartData.series = [
            {
              name: "累计项目数",
              color: "#2C91FF",
              barWidth: 24,
              itemStyle: {
                borderRadius: [4, 4, 0, 0],
                color: v([
                  { offset: 1, color: "#2C91FF33" },
                  { offset: 0, color: "#2C91FF" },
                ]),
              },
              data: r,
            },
            {
              name: "新增项目数",
              color: "#36FCFF",
              barWidth: 24,
              itemStyle: {
                borderRadius: [4, 4, 0, 0],
                color: v([
                  { offset: 1, color: "#36FCFF33" },
                  { offset: 0, color: "#36FCFF" },
                ]),
              },
              data: o,
            },
          ]),
          (this.comPropsCapacity.chartData.xAxisData = Object.keys(e)),
          (this.comPropsCapacity.chartData.series = [
            {
              name: "累计装机容量",
              color: "#2C91FF",
              barWidth: 24,
              data: l,
              itemStyle: {
                borderRadius: [4, 4, 0, 0],
                color: v([
                  { offset: 1, color: "#2C91FF33" },
                  { offset: 0, color: "#2C91FF" },
                ]),
              },
            },
            {
              name: "新增装机容量",
              color: "#36FCFF",
              barWidth: 24,
              data: a,
              itemStyle: {
                borderRadius: [4, 4, 0, 0],
                color: v([
                  { offset: 1, color: "#36FCFF33" },
                  { offset: 0, color: "#36FCFF" },
                ]),
              },
            },
          ]);
      },
    },
  };
var sY = function () {
    var e = this,
      n = e._self._c;
    return n(
      "div",
      [
        n(
          "div",
          { staticClass: "search-form" },
          [
            n(
              "a-form",
              { attrs: { layout: "inline" } },
              [
                n(
                  "a-form-item",
                  { attrs: { label: "区域" } },
                  [
                    n(
                      "a-select",
                      {
                        staticStyle: {
                          width: "180px",
                          height: "34rpx",
                          color: "#fff",
                        },
                        attrs: {
                          showArrow: "",
                          mode: "multiple",
                          placeholder: "全部",
                        },
                        model: {
                          value: e.city,
                          callback: function (r) {
                            e.city = r;
                          },
                          expression: "city",
                        },
                      },
                      [
                        e._l(e.cityList, function (r) {
                          return n(
                            "a-select-option",
                            { key: r, attrs: { value: r } },
                            [e._v(" " + e._s(r) + " ")]
                          );
                        }),
                        n("template", { slot: "suffixIcon" }, [
                          n("img", {
                            staticClass: "w-16rpx h-16rpx",
                            attrs: { src: $b, alt: "" },
                          }),
                        ]),
                      ],
                      2
                    ),
                  ],
                  1
                ),
                n(
                  "a-form-item",
                  { attrs: { label: "集团" } },
                  [
                    n(
                      "a-select",
                      {
                        staticStyle: {
                          width: "180px",
                          height: "34rpx",
                          color: "#fff",
                        },
                        attrs: {
                          mode: "multiple",
                          showArrow: "",
                          placeholder: "全部集团",
                        },
                        model: {
                          value: e.area,
                          callback: function (r) {
                            e.area = r;
                          },
                          expression: "area",
                        },
                      },
                      [
                        e._l(e.areaList, function (r) {
                          return n(
                            "a-select-option",
                            { key: r, attrs: { value: r } },
                            [e._v(" " + e._s(r) + " ")]
                          );
                        }),
                        n("template", { slot: "suffixIcon" }, [
                          n("img", {
                            staticClass: "w-16rpx h-16rpx",
                            attrs: { src: $b, alt: "" },
                          }),
                        ]),
                      ],
                      2
                    ),
                  ],
                  1
                ),
                n(
                  "a-form-item",
                  [
                    n(
                      "a-button",
                      { attrs: { type: "primary" }, on: { click: e.onSearch } },
                      [e._v("查询")]
                    ),
                    n(
                      "a-button",
                      {
                        staticClass: "reset-button",
                        staticStyle: { "margin-left": "8px" },
                        attrs: { type: "default" },
                        on: { click: e.onReset },
                      },
                      [e._v("重置")]
                    ),
                  ],
                  1
                ),
              ],
              1
            ),
          ],
          1
        ),
        n(
          "div",
          {
            attrs: {
              flex: "",
              "justify-between": "",
              "mt-30rpx": "",
              relative: "",
            },
          },
          [
            n(
              "div",
              {
                style: {
                  backgroundImage: `url(${e.chartSmBg})`,
                  backgroundSize: "100% 100%",
                },
                attrs: { "w-822rpx": "", "h-360rpx": "" },
              },
              [
                n(
                  "p",
                  {
                    staticClass: "text-[#3DF9FC] text-18rpx",
                    attrs: { p: "~ l-40rpx t-16rpx r-16rpx b-0" },
                  },
                  [e._v("项目统计")]
                ),
                n(
                  "div",
                  { staticClass: "pl-40rpx pr-40rpx h-280rpx" },
                  [
                    n(
                      "Chart",
                      e._b(
                        {
                          staticClass: "ChartByComm",
                          attrs: { cName: "BarChart" },
                        },
                        "Chart",
                        e.comProps,
                        !1
                      )
                    ),
                  ],
                  1
                ),
              ]
            ),
            n(
              "div",
              {
                style: {
                  backgroundImage: `url(${e.chartSmBg})`,
                  backgroundSize: "100% 100%",
                },
                attrs: { "w-822rpx": "", "h-360rpx": "" },
              },
              [
                n(
                  "p",
                  {
                    staticClass: "text-[#3DF9FC] text-18rpx",
                    attrs: { p: "~ l-40rpx t-16rpx r-16rpx b-0" },
                  },
                  [e._v("装机容量统计")]
                ),
                n(
                  "div",
                  { staticClass: "pl-40rpx pr-40rpx h-280rpx" },
                  [
                    n(
                      "Chart",
                      e._b(
                        {
                          staticClass: "ChartByComm",
                          attrs: { cName: "BarChart" },
                        },
                        "Chart",
                        e.comPropsCapacity,
                        !1
                      )
                    ),
                  ],
                  1
                ),
              ]
            ),
          ]
        ),
        n("BeginConstruct", {
          attrs: { developmentHistory: e.developmentHistory },
          on: { openCapacity: e.openCapacity },
        }),
      ],
      1
    );
  },
  lY = [],
  cY = kp(oY, sY, lY, !1, null, "eebc705c");
const uY = cY.exports,
  sT = "" + new URL("title-bg-BdB4pzaD.png", import.meta.url).href,
  dY =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA4QSURBVHgB7VkJlFTVmf7fVu+9Wru6qtfqbnpl64VmDYIDLqCihPSR4DmJiJwBTQ44jomOmNHYQQMco3EZDhKJiqCYCC7ETDRqEppNYIDQyNILvVSv1d21V7169fY39xXdsZ05J100eGbOiV+f1/Xq1n3/+757//vfe/8L8A2+wT82MLhG2Pv4TZ688snV3GCPJxzhsmmWcZlZk4Mxm8HEsjEzSwdsrqx+2uHq9p0+0zRn/RsDcA1wxQL2blhUjVFY3nef/vQzDMP0D+oXrywu9fzQ6nTOt3smQKTXC97mVrDZreBwZgBpMgFJ0WBiGLBn54C1uAo00qMJidixQHfzcyWz7tm/+9lbLHaBXYhTpvPLHtvXfSV8rkjAO/W3vOS2Mw9KoqJa3O7O+PmTT9kzLbtnrVwLsqSDbcpqkHx/hI5Df4D88jLASQpkQQJN04FizWDJKwIiexZ6axGypoHUtVs/uHNbnb185jYLrubHQiGcsrn+fc7qX29JlxOebsX9P79jXmmWeV2yp2u5HuGL8/LcTj0cvcmMi0CYaMAIKmUOJ0yIOIE+SVRGAIajMpIEAl24iUF16C9fLXLgEOPfmVRTLepR3s21t65hQdrc8adNNenySltApsv5uBr2vy2D8y+SCXvC23iWoEEdUAQZdPQHmvK3urIkQ3hwEPhwBPhYHOLhKIg8D5okgtHyI9CSiaRF42Ptxw9aVav5adFR/NtgZ+sHZod5bbq80hZQUV2RpyWD/8ViIm4CZWWsp++o4syldQTkI4hcEtUSQBIFuHiuA04dPwf9fX4IhzlobrwIbedbQJUkVGe0UEEiymYI/vPnWwlVrJs4PZuwQfQUSVlnpssrbQGJaFS1YDJx2wvHQlxLrmP5jual4HT+h2TNkg1iEhcB0H3QfqYRhKQMrNkCPZ090NXuBXdeHqiKCkNdXciSii7UY6gnBNlE2LIczy3Z2rTgPW9p0eS61+MMrphUIoNLl1faAmRB+c9E5qS5xv1d+/YZLGDJxgavolOhZDQCMnIROXgRWk6fhvKaGgght7HZ7ZBfWIg6SIW8skrwd3hBV5VhASIqV3oL7twdNGxt3Lgx5Vt4Ue0iZ+GE99LllbaAge7YSxplmdPw1ILpXzGAE3E+jDggT4p6L4EiisDFo6ichGxPIbjRZctA4ZQ2QTIeB0023Ahx1WKgikJgtK13Hpg131JcZaf8gV2QJtIWcOOP3ogQNHM3abG8undNQeZIOUES7Uk0UHEUcTQxAUOBCBAaGsSRKPR7veDv7YEEFweKwkFHEUo3Gt9wI5VHYiX/iJ3eX9cUlE4t2iYrcDdWcbuYLq+0BRi47gdvnsBo66t5FVPePlB/A2mUYQTWJcVjKFxigCkSZGbaoKO9H4qKCyAai0EoGACSNEHHxWbIyMkCkmVSArRkAAUu9Zxhw79/mU2xVb+ZXTJlU9niJ89dCacxBeysv4E58vKqew9sW2E1vs9/YN92DpgPaCvzK+M7QbGHZS4MOvLzJMdDZWUh9PqCcOFMCzCMGXCMQIO5FyKDPiidYYR3Y+6UQY11olvygFEgmUp3OyfPfW3Ckk37DJt7n1/BNr/7rw/q+gHyqgVUFpXkmwj130gFFo+ULXns96+YnK7Dl36z8mcEQf5ZRX6fjCdA4JNAUyRUTc4FWVWhCYXOttaOFOGq2dVoTWSBy/NAEiR/mx6E6MnwwfXPm3OLXnTU/stbI/aL7ez9Vod9YcehL0rG4jemgEiUm0aamCNmh2X16PJZa/fsCnBkg5vlV1K4foaLhFITmCCIYLMyMLkiC6qrC6F2ejlMmloGFpsVNTiVEqOL/aDF/R9OynfcR1E5rztn/PjgaNsWh/N7YoITaJpyjcVvTAExLtEfDAQiOM54m9669+HRv1133xsNvG45TWqqSeZioMgyyGgU4hiWMox8HDT18sxrLC+McYKcH6T+RjTgI/mKlnXQOu+rPt+4c9UWZ07+sf4+X6us6sJY/MYUkJPrDjtcjtmykIgEwslJJ7avuGn071Vr9h5IJsmdaM3AywKPxoKGQigaGwT6p2vI49XUPUlRgKEQpMf6INl6TAUs5znnnEcbR9s6sXXF981ujzne10EVTMifkWHGI2PxG1NAPJYkRVHxmFligsXKrpQ4/pamHcvnja7jmFp7QFbJHWggpAYzZvQAIg+qnLoIDFKLOSPMJtpOQkKkf0p4pl8cbcO7d9V1Jpu1hMDx+9AEp2skWxqNh8YMp2MKuP2RfRfj4dgT4QF/Ey6bagurp96n0+zNx1+648aROtFPDp/71k8afkSo8nZDhGGUi3IQ9gUg2u9DszhaJyFhfG8zxAf6NxV8Z9uWj+vfaxp5vuv9tYvD/titRTWzH6Lk4K2D/f5OmiKeKl7wuG8sfmOGKQNJWXfYXRmPUYw803epo9WVm5mf68x484P6G6pyKqeLs+56wVjJgcnJPIEF49PQYmGegsaC0O8Hu5ZAgqaheSsCUsD7234gNxt1jeXIh/VLzUIlKxI219vujOL3/W3nmwgx/qxnyuRJpD3z3nS4pTWRLa//w2uRoeCT7W1dzQIvPhNPiC4hEuFmLrz++UJW3HDkmWW2E79cOq1q7Schq6dkiVlPtNhRJCrI1KCimAKapSHhaz3YmU2umrVsB9/98U9nG3ZnTst68raZdb8YaOuQWbOJlQK+rd29oQZMEh/Nnf3Qh+lwS3smNjHmDGde3qMZuVm78ATf6W33L5W4xJ18ILiucNrkurIZFb/vfGFusY7hq2kcuyPLin1htqNtZH4OMHj8NHChfy4SyjYe/8nUqc4c9mNx8LPlwUD8EZWLLg37w7dGL51RcFf2GyXTpz/i8JTa0uWVlgsZiHDEM0k+HIioUiwSEs8XeCzrfZfaP3VmMLgQCFUnSb2QyS39pSN/wp2q03p7Dtf/kWifW2MvmwaUFn0lxPM7aAt2nT03rzzYN+Bys50TeV4+zPsudeZ5Mu/u6I39HNPDRwsm0pSbpl5Nl1faAu7auM9YRm7/Yt+PN1h9fdtzC3JsBB99IuoP+HBG90o49kPGbf18sKvnTk95+VwuEvtN94UWFH1oMDMQ1emMmzW0c1BJ+9lElJuTGetpcOW7LoQ62uqYgokbygrM693F0x6wT/rua3AFSFvACPo62vajGdcWCwRlC8t+yrpcu7NtRKEoJJ8Odw/8OS5rB61mIl76/T27TrxU9wPSkjFw5o/C+4UVHQ0aTvW5C91H5ETYHGjjPuIJV6e5Yvaazs+PeouqppChwZZP4Qox7rxQsG1/YfNn7562WJgsCyGe6+8beq14xpylFIhKuKvrrSRmasvKcS1xTZwb6T368Ukmw15Mk+JKwlXIhlpadsWDvoetRVMqHZ4Sb17FqhosKysO48AVLadH44s3X/T5+wL/9Jc/nfyWRmWvy8z3vKhw0UW4ph6uXPPOHsZs09CsepumYwsYtzNUXLd1T6S/ryvS1bEwc2LlyxMW37Pu1KEzC7ytZ68H6ZgK48QVu9AIbtzYYOwNW4z7RXXLFjYeOr7FY+b6D7F1LxtllNbd2fC7i1WV86+fpPGOdqNs4OKFxyz2nrPdneFCT+18+Z6tR48BHEW/7Ib/d/C+u2bPJ5tu1S/97kE93PjKbpS8uGZpzNEYdw/8PZx65X6HglML4jEe5a54MBdMqTXSkPA1YNxj4O9Bw+IF1uz8guKqqZAztRbtA7Km9H5UXwBfA74WARSurRcGm0EYaAehFy33+bMEaSXXwdeAa+KXOzfXT9ZU8VduS7zEzYRJGy3lC7IGQ32DUFSWB/lV81GWmoXuptb+wSjD+eO0j6aYlcsf3NALV4lrMgYkgXtKksWFwUiXbs0jQAgndDU+hBW4GXAxUUi2HwRec+nu4tp8f2O7DioxUcWkR9CjD8FV4qp74NFl822xmBhjTCSYaQJMuAQ0rqB0Skg3dpAmtMmnGRM4XJkYRlkgGJHAarNDptulrP7F66arHdxX1QP19fW43n3hna62E6Cg7eS8+RUwa055ijgYuzIMLu/O0B4TsUyVHz/SBn89eQqrmTGDfPVnD29FNR+Aq8D/6oFR8dr4xL1eL8myLOHz+aihoSGTKIpMqHvAxskJuuf8ydtj/sGnexv/Cgm0gXnhue+hDByRIo8NX6n7y3pSJgVB1jfXv4dRaI9ce/MtwFisK9Zv2foujBNkX1+fWdM0Br3MHIvF2JbzLawkSxZRFa2JWCJDSCQcfIKzxbmYg+d5e5zjbAl0iYJgTcajiySUE5IUDRR0CnOpbQAqynNQi19ug6+KwFJN0t7qG64voywGymoLwrMf1td/tGzjRh7GAaN1KSEi2BJqIlMW5MxELJaJUoKZKJ9plyWJ5sUkq8gqpciiSVZUCjN6yPBbLliGNu60kYUQFTl1jLRz92FwOS1/a+3hD8CGXYlEwvwDMUwQL6deVOM5VS7uFYdWopo7YBwgnU5nDJwgdnYOCWabSZQ1WWMliVQUGeWhCAVlE1C6R6YEiWKA5y2CkGQlPmFOdLeWGuRNogQO2khY6UCgbJyIDjQwbLgHhl+C4ZdFSOgfQxi7O3T8hAqDfb1AoqModAS1edwChqOAkUASkP8PARQZCzSyra2NjsfjNHIvO9JU0t3VUaMqEokgq4pCDrS3mzRE2DigIYnh+RCRVL88QfpygGmjh9pwl6CO7G69lLqlGcYO48RXotCwGHX4GsnJ+FG06fz2t+//3JXTao5EIlYTjmc3qfC+phGjnlZRLuh/WMeHf0flxLBRGPVI6lbHUToek+EbfIP/G/w3QfF7Wc6l5IsAAAAASUVORK5CYII=",
  hY = {
    __name: "HistoryTimeline",
    props: { developmentHistory: { type: Object, default: () => ({}) } },
    setup(t) {
      return { __sfc: !0, titleBgImg: sT };
    },
  };
var pY = function () {
    var e = this,
      n = e._self._c,
      r = e._self._setupProxy;
    return n(
      "div",
      {
        staticClass: "mt-35rpx relative",
        style: { backgroundSize: "100% 100%" },
      },
      [
        n(
          "p",
          {
            staticClass: "text-16rpx w-687rpx h-28rpx pl-36rpx",
            style: {
              backgroundImage: `url(${r.titleBgImg})`,
              backgroundSize: "100% 100%",
            },
          },
          [e._v(" 中国能建广东院海上风电发展历程 ")]
        ),
        n(
          "div",
          {
            staticClass: "pl-32rpx pr-32rpx pb-16rpx bg-#FFFFFF0A",
            attrs: { border: "~ 1rpx solid #285296 rounded-8rpx" },
          },
          [
            n(
              "div",
              {
                staticClass:
                  "relative flex flex-nowrap overflow-x-auto pl-36rpx",
              },
              e._l(e.developmentHistory, function (o, l) {
                return n(
                  "div",
                  {
                    key: l,
                    staticClass:
                      "relative mt-11rpx flex-shrink-0 mr-10rpx pb-40rpx",
                  },
                  [
                    n("div", { attrs: { "h-88rpx": "" } }, [
                      o.gediOffshoreInfoList.length > 0
                        ? n(
                            "div",
                            {
                              staticClass:
                                "events h-88rpx flex flex-col justify-center",
                            },
                            [
                              n(
                                "div",
                                {
                                  staticClass:
                                    "event lh-17rpx text-white text-14rpx max-w-300rpx bg-#00000033 rounded-6rpx",
                                  attrs: {
                                    p: "~ l-16rpx r-16rpx t-12rpx b-12rpx",
                                  },
                                },
                                [
                                  n(
                                    "a-tooltip",
                                    {
                                      attrs: { trigger: "hover" },
                                      scopedSlots: e._u(
                                        [
                                          {
                                            key: "title",
                                            fn: function () {
                                              return e._l(
                                                o.gediOffshoreInfoList,
                                                function (a, h) {
                                                  return n(
                                                    "div",
                                                    {
                                                      key: h,
                                                      staticClass: "block",
                                                    },
                                                    [
                                                      e._v(
                                                        " · " +
                                                          e._s(a.title) +
                                                          " "
                                                      ),
                                                    ]
                                                  );
                                                }
                                              );
                                            },
                                            proxy: !0,
                                          },
                                        ],
                                        null,
                                        !0
                                      ),
                                    },
                                    [
                                      n("div", { staticClass: "truncate" }, [
                                        e._v(
                                          " " +
                                            e._s(
                                              o.gediOffshoreInfoList[0].title
                                            ) +
                                            " "
                                        ),
                                      ]),
                                    ]
                                  ),
                                ],
                                1
                              ),
                            ]
                          )
                        : e._e(),
                    ]),
                    n(
                      "div",
                      {
                        staticClass:
                          "flex flex-row items-center text-center text-16rpx text-white mt-10rpx",
                      },
                      [
                        n("img", {
                          staticClass: "w-14rpx h-14rpx mr-8rpx",
                          attrs: { src: aT, alt: "" },
                        }),
                        n("div", [e._v(e._s(l))]),
                        n("div", {
                          staticClass:
                            "tail opacity-40 ml-15rpx w-100rpx rounded-6rpx flex-1 pr-10rpx",
                          attrs: { border: "~ b-1rpx white solid" },
                        }),
                      ]
                    ),
                    e._l(o.windFarmList, function (a, h) {
                      return n(
                        "div",
                        {
                          key: h,
                          staticClass:
                            "flex flex-row items-center mt-12rpx mr-30rpx cursor-pointer",
                          on: {
                            click: function (f) {
                              return e.$emit("openCapacity", a);
                            },
                          },
                        },
                        [
                          n("div", { staticClass: "text-16rpx mr-8rpx" }, [
                            e._v(e._s(a.projectName)),
                          ]),
                          a.projectType === "EPC总包"
                            ? n(
                                "div",
                                {
                                  staticClass: "w-64rpx h-24rpx flex mr-8rpx",
                                  attrs: {
                                    text: "12rpx #3DF9FC",
                                    flex: "row justify-center items-center",
                                    border: "1rpx solid #3DF9FC33 rounded-6rpx",
                                  },
                                },
                                [e._v(" " + e._s(a.projectType) + " ")]
                              )
                            : n(
                                "div",
                                {
                                  staticClass: "w-64rpx h-24rpx flex mr-8rpx",
                                  attrs: {
                                    text: "12rpx #76C0FF",
                                    flex: "row justify-center items-center",
                                    border: "1rpx solid #76C0FF33 rounded-6rpx",
                                  },
                                },
                                [e._v(" " + e._s(a.projectType) + " ")]
                              ),
                          a.awardsList.length
                            ? [
                                n(
                                  "a-tooltip",
                                  {
                                    attrs: {
                                      trigger: "click",
                                      placement: "right",
                                    },
                                    nativeOn: {
                                      click: function (f) {
                                        f.stopPropagation();
                                      },
                                    },
                                    scopedSlots: e._u(
                                      [
                                        {
                                          key: "title",
                                          fn: function () {
                                            return [
                                              n(
                                                "div",
                                                { staticClass: "p-12rpx" },
                                                e._l(
                                                  a.awardsList,
                                                  function (f, v) {
                                                    return n(
                                                      "div",
                                                      {
                                                        key: v,
                                                        staticClass:
                                                          "block rounded-4rpx mb-4rpx w-200rpx pl-10rpx",
                                                        style: {
                                                          background:
                                                            "linear-gradient(90deg, rgba(255, 214, 0, 0.1) 0%, rgba(255, 173, 14, 0.1) 100%)",
                                                        },
                                                        attrs: {
                                                          border:
                                                            "~ 1px solid #ffd95166",
                                                          p: "l-10rpx r-10rpx t-8rpx b-8rpx",
                                                        },
                                                      },
                                                      [
                                                        n(
                                                          "div",
                                                          {
                                                            staticClass:
                                                              "font-600 text-14rpx text-center",
                                                          },
                                                          [
                                                            e._v(
                                                              " " +
                                                                e._s(f) +
                                                                " "
                                                            ),
                                                          ]
                                                        ),
                                                      ]
                                                    );
                                                  }
                                                ),
                                                0
                                              ),
                                            ];
                                          },
                                          proxy: !0,
                                        },
                                      ],
                                      null,
                                      !0
                                    ),
                                  },
                                  [
                                    n("img", {
                                      staticClass: "w-24rpx h-24rpx mr-4rpx",
                                      attrs: { src: dY, alt: "" },
                                    }),
                                    n(
                                      "span",
                                      {
                                        staticClass: "text-16rpx text-#ECC787",
                                      },
                                      [e._v(e._s(a.awardsList.length))]
                                    ),
                                  ]
                                ),
                              ]
                            : e._e(),
                        ],
                        2
                      );
                    }),
                  ],
                  2
                );
              }),
              0
            ),
          ]
        ),
      ]
    );
  },
  fY = [],
  mY = kp(hY, pY, fY, !1, null, "1e26b717");
const gY = mY.exports,
  vY =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAYAAACoPemuAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAapSURBVHgBrVjNkhRFEP6qu2tmf9hdliXUXTUQQ1GM8KDLXXgAuIt3eAC8I3fxDg8gD4B3uBucDDUgOGCoQ6Ag487uzk9NT5nVldmd3dMbjgYVW9vTVfnzVVb+VLVBS/Pep/TYor5GfYm7p27watqY+pB63xjzoo3AtIA6To9T1LMW+qPA/R/QgSehPqLeI4B/4ShgBOoterzWGBcBotxj8RboZzgatJYXwD3VEwJqmx47WKz9m4UWtWCT7hmB+y38SBjUVguoNsGm5RmEe+dq76aNzx0tT9rr7EoRGLVtzcRKxMRe/3aVgjA2ayiY22bHYINMq2S0Ndb7Tgi+lP6doPeTYC2zMGlhUgaQRoZklsZ5K3SksOiOaFN4mhceM6toIHLDvxn1NNIFcPHJ/EFHWCDRhHeXjMfYlKUpW8vWyLCXF6doEBfhD11llZoc/bSx16YDn62sqqy5lpguOoVCRCValnPMLKBQUyjjxsY9MixDbzVKZW5uYYU+vUA1s2wOJv4cVCpgJQVROsPlJMEVxET7KlsvB76knX0E3k5r41MIzIH3n8K1R+CKxff0HFB/tEh+ABbOsrtE/2DocLWwVIv+TFAGQ4mVw+80wXah0OP+cIob7CaF09p5TKZr8f40x34+Q5Ekxa1kXu/ghsVdw5nAthsllp02hXmLcqbxrm6Ygi/x+KaTorc3IyugttCaYttIKeJ/1tblFnmsCFUXVyU9FQGGo0aitLJw6dxZgjPGYJsmdlND/uhUALiKl50/8TVU0AGDGjCJDlfFss+1rbQiNuthFa0mMdhVFtlFdGRJB1VCbQKwKkp19LvoY/UWiU3SrczaUhWg54wqZ8E33aixffWI822yHO+95WcGNdBQ6jXYWh5rCKaUsk3EdwOHadRcp3NeIyUomphgFYbSYo4dMGxRsVtTIuYyJKAkghxbgSJkfbODKzR4/ukhzgW+kyu4d3wJvf4Id1RkspIGKE4VUlmsqjaZMogwFoQp8yZ1AWVbAc6tLOFrcPJ9YxnX82iZNQqGawTw88EYV8c5ehLx5YIqoPO7oPU6PehC6qqYZ2xqj2qcLHKeku8tVBVhQFF5MTP4DDEhh7az1sWtbhq3dsL8eis5Qlt9bm6CndnkjUQ2VQK7BtcEECXU289HuBReco9HL8f4gp7fEYqQaHeOdSNt4A9ym7XSsP9NG0k4CwwZEWjFBdi0ItLCAt3I4qvxDL1BTsplbimuiMZ6wyGuh6GNLj6gqrGv5VjldJJcg359SCvShWdQAXkAlMkqGhZTVvPPD/GAV1xvbPspJ+QXoUjr2tSMSqfkqsgPdIm2kmOitlxV5V5WzDw1QoPa0cbrcxzL9sr5a/KUo5uwi7KFmYq8YO7RrHDiQcjqp9Zxve16VDCuVMO0+2feXI/byMBglusnDz6lbNOGPMiquuu9cqegf+7uKJFDhHvkR7e7FPoUbYventaoVl5cgG5wMMFNbflpPVphHvf9rkya5j2T/pZSrNsEx+gcHt0uL87thADnuxmuTXLc2ZviW54qYuZEBzfJ0mf+pvOWoyAReTK/77BPR6Q9o25PzWNXpiOl6QM0bPZHcUtrjk48K6sx2oh4QOmiOIOFrQlWoGpQ5LKRQ+/lIc0xb8aWCfpyyWG2DkoslgigKUelCIAiNtX5Xm4mvnZx09GlW1p7i05uq8jTQLyc/dl8GTFPyMbd0oaooq4868TAKJ5vL+OSTbEdzmDFIig4Tm8W94KySSHfzHD5+CYGgwnuPz+g1MGmEVBUp4zcN8WSISKTKQ7Mw75/l+6GmyWwRuUVx7Q8/+EG7uE/Xk6mHncf7+HGUX5sOF14zqFkmH42SrHfocVJ/ikzs5yLLV/P+P3ZIS4vWbKIJOBU62Cl4uV5MWL+HOIh+4OZAyS/SY/hREu70TfhOv5jHx+n4ZDD1nLqwFY224jcxlypgANIKomUPHkX5XMyRM4Mk7MnzA8JfV3JV4En5aRTO2nV0/GKtd9pGsVjOAgCvfiNgBR/FSPoICgCIIvppYjK05umb3P8obDVkwpaBGhQsu2uimw0ZBg+kwnocrFiwdifnl2PXxjLWvnelvmVOIqcU5QnKaosPHf8yYrm5HepXBXgNueW+utto6rZijfr4NlHqy0f7qT9vOe33BQ7lO074hNBYSd8ibGYSVi3+kcTbFtr+GZKyerA4skntGua7Mgb/cPf/cnJKjaWKMdNZ1guVm8j0JDnMludHMo51OudbRkPi6WL8WSYY7g6xv4vP+HFhQtBZL39AzBPhjQS5QxPAAAAAElFTkSuQmCC",
  _Y = {
    __name: "TechnicalAdvantages",
    setup(t) {
      const e = Y0([]),
        n = Y0([]),
        r = Y0([]),
        o = async () => {
          const { result: f } = await Eg({
            url: "/admin/dynamic/ability/gediTechnicalAdvantages",
          });
          if (((e.value = f), e.value.length > 0)) {
            const v = e.value[0];
            r.value.push(v.entityId),
              v.hasChildren
                ? ((l.value = v.children[0]),
                  r.value.push(v.children[0].entityId))
                : (l.value = v);
          }
          n.value = [l.value.entityId];
        };
      Qb(() => {
        o();
      });
      const l = Y0({}),
        a = (f) => {
          console.log(f);
          const { keyPath: v } = f;
          if (v.length === 1) {
            const E = e.value.find((x) => x.entityId === v[0]);
            l.value = E;
          } else {
            const x = e.value
              .find((T) => T.entityId === v[1])
              .children.find((T) => T.entityId === v[0]);
            l.value = x;
          }
        };
      async function h() {
        const { result: f } = await YT({ type: 4 });
        window.open(f.url);
      }
      return {
        __sfc: !0,
        menus: e,
        defaultSelectedKeys: n,
        defaultOpenKeys: r,
        loadData: o,
        currentMenu: l,
        onMenuClick: a,
        open3dmodel: h,
        Carousel3d: r4.Carousel3d,
        Slide: r4.Slide,
        titleBgImg: sT,
      };
    },
  };
var yY = function () {
    var e = this,
      n = e._self._c,
      r = e._self._setupProxy;
    return n(
      "div",
      {
        staticClass: "h-452rpx mt-35rpx relative",
        style: { backgroundSize: "100% 100%" },
      },
      [
        n("img", {
          staticClass:
            "absolute -top-4rpx right-0 w-38rpx h-38rpx cursor-pointer",
          attrs: { src: vY, alt: "3d模型" },
          on: { click: r.open3dmodel },
        }),
        n(
          "p",
          {
            staticClass: "text-16rpx w-687rpx h-28rpx pl-36rpx",
            style: {
              backgroundImage: `url(${r.titleBgImg})`,
              backgroundSize: "100% 100%",
            },
          },
          [e._v(" 中国能建广东院海上风电技术优势 ")]
        ),
        n(
          "div",
          { staticClass: "relative flex flex-nowrap pl-36rpx pb-32rpx" },
          [
            n(
              "div",
              {
                staticClass:
                  "w-300rpx h-432rpx overflow-y-auto overflow-x-hidden pr-30rpx",
                attrs: { id: "menu" },
              },
              [
                n(
                  "a-menu",
                  {
                    attrs: {
                      theme: "dark",
                      mode: "inline",
                      "default-open-keys": r.defaultOpenKeys,
                    },
                    on: { click: r.onMenuClick },
                    model: {
                      value: r.defaultSelectedKeys,
                      callback: function (o) {
                        r.defaultSelectedKeys = o;
                      },
                      expression: "defaultSelectedKeys",
                    },
                  },
                  [
                    e._l(r.menus, function (o) {
                      return [
                        o.hasChildren
                          ? n(
                              "a-sub-menu",
                              {
                                key: o.entityId,
                                attrs: { popupOffset: [0, 0] },
                                scopedSlots: e._u(
                                  [
                                    {
                                      key: "title",
                                      fn: function () {
                                        return [
                                          n(
                                            "div",
                                            { attrs: { "h-48rpx": "" } },
                                            [
                                              n("img", {
                                                staticClass:
                                                  "w-24rpx h-24rpx mr-16rpx",
                                                attrs: {
                                                  src: o.imgUrl,
                                                  alt: "",
                                                },
                                              }),
                                              n(
                                                "span",
                                                {
                                                  attrs: {
                                                    "text-16rpx": "",
                                                    title: o.name,
                                                  },
                                                },
                                                [e._v(e._s(o.name))]
                                              ),
                                            ]
                                          ),
                                        ];
                                      },
                                      proxy: !0,
                                    },
                                  ],
                                  null,
                                  !0
                                ),
                              },
                              e._l(o.children, function (l) {
                                return n(
                                  "a-menu-item",
                                  { key: l.entityId, attrs: { item: l } },
                                  [
                                    n(
                                      "div",
                                      {
                                        attrs: {
                                          "w-200rpx": "",
                                          "h-48rpx": "",
                                          truncate: "",
                                          "text-14rpx": "",
                                          title: l.name,
                                        },
                                      },
                                      [e._v(" " + e._s(l.name) + " ")]
                                    ),
                                  ]
                                );
                              }),
                              1
                            )
                          : n(
                              "a-menu-item",
                              { key: `${o.entityId}_else`, attrs: { item: o } },
                              [
                                n(
                                  "div",
                                  {
                                    attrs: {
                                      "w-240rpx": "",
                                      "h-48rpx": "",
                                      truncate: "",
                                      title: o.name,
                                    },
                                  },
                                  [
                                    n("img", {
                                      staticClass: "w-24rpx h-24rpx mr-16rpx",
                                      attrs: { src: o.imgUrl, alt: "" },
                                    }),
                                    n("span", { attrs: { "text-16rpx": "" } }, [
                                      e._v(e._s(o.name)),
                                    ]),
                                  ]
                                ),
                              ]
                            ),
                      ];
                    }),
                  ],
                  2
                ),
              ],
              1
            ),
            n(
              "div",
              {
                staticClass:
                  "content flex-1 ml-38rpx bg-#FFFFFF0A rounded-6rpx min-h-432rpx",
                attrs: { p: "t-40rpx l-75rpx b-60rpx r-60rpx" },
              },
              [
                r.currentMenu.data
                  ? n("div", { staticClass: "flex flex-row" }, [
                      n("div", { staticClass: "flex-1" }, [
                        n("div", [
                          n("div", { staticClass: "text-16rpx font-600" }, [
                            e._v("技术特点："),
                          ]),
                          n(
                            "div",
                            { staticClass: "mt-10rpx text-16rpx lh-26rpx" },
                            e._l(
                              r.currentMenu.data.technicalCharacteristics,
                              function (o) {
                                return n("div", { key: o }, [
                                  e._v(" " + e._s(o) + " "),
                                ]);
                              }
                            ),
                            0
                          ),
                        ]),
                        n("div", { staticClass: "mt-24rpx" }, [
                          n("div", { staticClass: "text-16rpx font-600" }, [
                            e._v("技术优势："),
                          ]),
                          n(
                            "div",
                            { staticClass: "mt-10rpx text-16rpx lh-26rpx" },
                            e._l(
                              r.currentMenu.data.technicalAdvantages,
                              function (o) {
                                return n("div", { key: o }, [
                                  e._v(" " + e._s(o) + " "),
                                ]);
                              }
                            ),
                            0
                          ),
                        ]),
                        n("div", [
                          n(
                            "div",
                            { staticClass: "mt-40rpx text-16rpx font-600" },
                            [e._v("应用项目：")]
                          ),
                          n(
                            "div",
                            { staticClass: "mt-10rpx text-16rpx lh-26rpx" },
                            e._l(
                              r.currentMenu.data.windFarmNameList,
                              function (o) {
                                return n("div", { key: o }, [
                                  e._v(" " + e._s(o) + " "),
                                ]);
                              }
                            ),
                            0
                          ),
                        ]),
                      ]),
                      n(
                        "div",
                        {
                          staticClass: "ml-80rpx w-500rpx h-300rpx",
                          attrs: { id: "swiper-container" },
                        },
                        [
                          n(
                            r.Carousel3d,
                            {
                              key: r.currentMenu.entityId,
                              attrs: {
                                autoplay: "",
                                perspective: 0,
                                display: 3,
                                bias: "right",
                              },
                            },
                            e._l(
                              r.currentMenu.data.technicalImages,
                              function (o, l) {
                                return n(
                                  r.Slide,
                                  {
                                    key: r.currentMenu.entityId + l,
                                    attrs: { index: l },
                                  },
                                  [
                                    n("img", {
                                      staticClass:
                                        "w-400rpx h-300rpx object-cover",
                                      attrs: { src: o, alt: "" },
                                    }),
                                  ]
                                );
                              }
                            ),
                            1
                          ),
                        ],
                        1
                      ),
                    ])
                  : e._e(),
              ]
            ),
          ]
        ),
      ]
    );
  },
  xY = [],
  bY = kp(_Y, yY, xY, !1, null, "f858c635");
const EY = bY.exports,
  AY = {
    __name: "DevelopmentCourse",
    setup(t) {
      const e = qT(
          () =>
            new Promise((h) => {
              h(window.seaChart);
            })
        ),
        n = $T({ developmentHistory: [] }),
        r = Y0({
          beforeSetOptions(h) {
            return Ag(h, {
              xAxis: {
                axisLine: {
                  lineStyle: { color: "#FFFFFF1A", width: 1, type: "dashed" },
                },
              },
            });
          },
          chartData: { unit: "个", series: [], xAxisData: [] },
        }),
        o = Y0({
          beforeSetOptions(h) {
            return Ag(h, {
              grid: { left: "8%" },
              yAxis: { name: "单位：万千瓦" },
              xAxis: {
                axisLine: {
                  lineStyle: { color: "#FFFFFF1A", width: 1, type: "dashed" },
                },
              },
            });
          },
          chartData: { unit: "万千瓦", series: [], xAxisData: [] },
        }),
        l = (h) => ({
          type: "linear",
          x: 0,
          y: 0,
          x2: 0,
          y2: 1,
          colorStops: h,
        }),
        a = async () => {
          const { result: h } = await Eg({
              url: "/admin/dynamic/ability/gediOffshoreDevelopmentHistory",
            }),
            f = [],
            v = [],
            E = [],
            x = [],
            { constructionProcess: T, developmentHistory: N } = h;
          console.log("developmentHistory", N), (n.developmentHistory = N);
          for (const I in T)
            if (Object.hasOwnProperty.call(T, I)) {
              const L = T[I];
              f.push(L.sumProjectNum),
                v.push(L.projectNum),
                E.push(L.sumCapacity),
                x.push(L.capacity);
            }
          (r.value.chartData.xAxisData = Object.keys(T)),
            (r.value.chartData.series = [
              {
                name: "累计项目数",
                color: "#2C91FF",
                barWidth: 24,
                itemStyle: {
                  borderRadius: [4, 4, 0, 0],
                  color: l([
                    { offset: 1, color: "#2C91FF33" },
                    { offset: 0, color: "#2C91FF" },
                  ]),
                },
                data: f,
              },
              {
                name: "新增项目数",
                color: "#36FCFF",
                barWidth: 24,
                itemStyle: {
                  borderRadius: [4, 4, 0, 0],
                  color: l([
                    { offset: 1, color: "#36FCFF33" },
                    { offset: 0, color: "#36FCFF" },
                  ]),
                },
                data: v,
              },
            ]),
            (o.value.chartData.xAxisData = Object.keys(T)),
            (o.value.chartData.series = [
              {
                name: "累计装机容量",
                color: "#2C91FF",
                barWidth: 24,
                data: E,
                itemStyle: {
                  borderRadius: [4, 4, 0, 0],
                  color: l([
                    { offset: 1, color: "#2C91FF33" },
                    { offset: 0, color: "#2C91FF" },
                  ]),
                },
              },
              {
                name: "新增装机容量",
                color: "#36FCFF",
                barWidth: 24,
                data: x,
                itemStyle: {
                  borderRadius: [4, 4, 0, 0],
                  color: l([
                    { offset: 1, color: "#36FCFF33" },
                    { offset: 0, color: "#36FCFF" },
                  ]),
                },
              },
            ]);
        };
      return (
        Qb(() => {
          a();
        }),
        {
          __sfc: !0,
          Chart: e,
          state: n,
          constructionProcessComProps: r,
          developmentHistoryComProps: o,
          getLinearColor: l,
          loadData: a,
          HistoryTimeline: gY,
          TechnicalAdvantages: EY,
          chartSmBg: oT,
        }
      );
    },
  };
var TY = function () {
    var e = this,
      n = e._self._c,
      r = e._self._setupProxy;
    return n(
      "div",
      [
        n("div", { attrs: { flex: "", "justify-between": "", relative: "" } }, [
          n(
            "div",
            {
              style: {
                backgroundImage: `url(${r.chartSmBg})`,
                backgroundSize: "100% 100%",
              },
              attrs: { "w-822rpx": "", "h-360rpx": "" },
            },
            [
              n(
                "p",
                {
                  staticClass: "text-[#3DF9FC] text-18rpx",
                  attrs: { p: "~ l-40rpx t-16rpx r-16rpx b-0" },
                },
                [e._v("项目统计")]
              ),
              n(
                "div",
                { staticClass: "pl-40rpx pr-40rpx h-267rpx" },
                [
                  n(
                    r.Chart,
                    e._b(
                      {
                        staticClass: "ChartByComm",
                        attrs: { cName: "BarChart" },
                      },
                      "Chart",
                      r.constructionProcessComProps,
                      !1
                    )
                  ),
                ],
                1
              ),
            ]
          ),
          n(
            "div",
            {
              style: {
                backgroundImage: `url(${r.chartSmBg})`,
                backgroundSize: "100% 100%",
              },
              attrs: { "w-822rpx": "", "h-360rpx": "" },
            },
            [
              n(
                "p",
                {
                  staticClass: "text-[#3DF9FC] text-18rpx",
                  attrs: { p: "~ l-40rpx t-16rpx r-16rpx b-0" },
                },
                [e._v("装机容量统计")]
              ),
              n(
                "div",
                { staticClass: "pl-40rpx pr-40rpx h-267rpx" },
                [
                  n(
                    r.Chart,
                    e._b(
                      {
                        staticClass: "ChartByComm",
                        attrs: { cName: "BarChart" },
                      },
                      "Chart",
                      r.developmentHistoryComProps,
                      !1
                    )
                  ),
                ],
                1
              ),
            ]
          ),
        ]),
        n(r.HistoryTimeline, {
          attrs: { developmentHistory: r.state.developmentHistory },
          on: {
            openCapacity: function (o) {
              return e.$emit("openCapacity", o);
            },
          },
        }),
        n(r.TechnicalAdvantages),
      ],
      1
    );
  },
  SY = [],
  wY = kp(AY, TY, SY, !1, null, "007e4979");
const CY = wY.exports,
  NY = "" + new URL("bg-bC5egPsQ.png", import.meta.url).href,
  RY =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAAAmCAYAAABAvVyFAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA65SURBVHgB7VtdbB1HFT5ndn0Th5oHnrDfcZ4h0L9EafqTkjZ1WopUxUIqiCrXlmgriCMKPCQUJEpIwl8qGttqVUAkFX/5UwpUpJUqR1FLK8Rjbp5pXxC0uQ51792dw5lzZnZn/bNrO/DGVO7und2dM/PNOd+cc2YC8P/yPy346R/ROIAdrdQaw1UWEA0RAkod/178HPjST8ypvz2OnSZBmw/T0EcHbJvbu8l9B6G5+H5J+waCbCSYv9Y3M1eewm6TrJufpVGbw7g2HASUffb/q44pqgY0nbeexFPwXyj4ycM0kg7CCQQacR1hUIHIPQHi/xhehy+Fe5KvFHa55//NI/Ym3nx8YyPIn/lpNoaYHJTvawq3STxWL6zypDPwgZm4tBqQf5J/m1t4ADAhbZF7jzIoHUsky9Uv7pNFO/PWE+kM3GAxf30K32FMD5gErvEfTx5XJqI8jAUP1JAoEiaWr4TyW55bdH+JgSED6fTNzy6MNgn7y5PpeYR8Vr4v/0ivPLm+LkkYAKm3Ws9zLvITHM022emtbA1NsgYWzDEGrqN95ia4PTHIMD5pT2U5vYn6Iv1JjNl328+oDTdYilm79bn+DoPpEZKZtIo0hau+6TXL6YAog16RrzlrtOkmGU7MrYIubnkun+IxlyYsvbC+9WDWACrDoqMq8HJBDapjrjVr8ieP08jGhE6gwWGtqdoEBU2WNq2XGWRZ1L7hzOVJXLcmV8zithPZeJKYKQrCWAAVtLGEKHkmLMoEgCcRsPMI2cRcu5kubp/Opw3SlgCmDl1lhYoSjgJ0JwNdvyzTBf6rGeStDDJszH/FSjpErs/cY99X1H67OosxIO49vbeo3+Ds3L71gWziH5cn01Pc3inDds9Ak5qsicw4/DZCESgTLKZGidLKEKat6W0/b6YLTM0B/uAdFAqw3mQNhDZLqrKeooQyUGhMTBtHzceYLp6vp4tLTzAFgj3gRpoIBVpPb8ZTRGjTkMhRWfpnPFUaam9/PlsXXSy72Gx/oX+Um90RL/GsNTzxVkwUyZsRxDPvn2uj3dywJn+xXpMZnBEeFy+wMKzeipW2KVgGlVSFEMkMz1TyldyayUuP1WvythfYOtHs1+V5UXuBpigaK2t10ZdykDOvf2ltCx+uMPChdMDywHFU37EFXYDjKOUnoQjvcQAsMitAO5/YbOJiA8hO21OTTqsJg+d7o+zoxGLhzxX0IP3Q95w8sASdLEsmmkDe/mKvzZrbdu0j2aVeih9LQY1lVUFXfD/z2qOrB3lFd2nr89dHBlqDJ9hqhymA7JZhT/7i2BQaa2TusZht1XzWgC6kOHFxb/3Cd9cv2H1LzUFte3GJFj7R6NDxqnbxjFzpLTRr8l2/ZPfNsPsmK7YCvdK7FNaZqDgMLNnZ176wOpDNSg8uPfaRd5KBHnMXL1zCh0ZdHCOLAt8oB5vA1YGTjfKcrFWJHQLKp+9+qZ6TX300Pc/gzYbvTfCtsGxL1oFUFiltO5JnhD9p8+BgMyd/2DPHDELH+ZcGwzri+43ROPmaJL5taV/r2aKQ16d9d55aHSdj0wv3/Ka/Ayk5En2AVKzmIM6lPKCCf6E0dXfjtB66RL3Ji3vr6WLnS/kUJLh3cVulyXp6KPviTdd4r8DRF10dnDcT52o0eeup6yODySDTkh0Gr8VUUF+VElRQ+Swu3JOZi4/Ua3IjwK7s+m02zmvt/mCswawCZVR9RwUdfT2V1/ksY05uAHnX7/JpfnlLpZMFNa26dDa8n9SCvJNBNhs2sPtmblpN2xUejvrDrDXzSg3Iq+70fafzKZ7G8SBAGg8do1W31O0Tg/zwyiDvOUNDfZufZPIbhiWd1cVPJm0RBxfvhL5Ze7VlGOSHVgb53tO9LUwU0+E7WqoUhZwY1KKu7MPMHz+3PMhr0Qq472x+lCXdASvNeKALHaGabPymmCJ0kTX55RqQnXYNbNrgBj4MMQUta6qmCBrCg8i8OynVg7zrXDbOIO8H8pQXhgKlJVIYWywbI2oBserZCw8uBXlNADvtsuy+sejNwXMIqyTV0MYSEzfQtazJL+9eGeT7LyyMGmL3DdWE3UBMJKcyiOUoxKPFlw5m9SDvPsvuW5ruY++Ao2pta7FRaj5oGVnRrPAiOHP+/irIawLYlT1nro8Qu2+sNSOr/ohde1mgCuCtZOGcn3ymBuQHzy+MUZoeBP9trYganmZwOvBhPch7LvTZfUt2h99xW3VKs4QuoQryim7aSuXcQ+y+JdnTEsamznVibyx194Z8dkp/++fuPtHMXJGFQw23b4I0naqTdXZs43mG9oKEtuF7liNtFvLVnZJsWxpcq0i+hryjZjAfrx1YPz2Gqe2i9E/HUIzFyXey5JkNITfqmF3f2HUr328/9KfelnUD7MqZz7be5gF0jWNFVPNJQs5AfFTQuB4V2OAbcwcI/L3zQTkl+am4M8uWDXTe5wTkz8sh1EnE4MtqX/y95h3I1YXf3I9agJ12J4gXtN8+JZCWPnLi/PLUX0N/GFg3VsTgQ8v4iIXvuCGA5UMDHTerITHigh4JBHwuOWi0CPeaDZqXDblmuaYt84k6ObY10AkynDwJIo2kS3VQUR8EkChRU9zr76GHX6fh2jEldAXTyAIM+ISXk2tFJngNl/yyky/jLvsgYzdUBFYprLfw5FmiIi+sdG5DfpXKfIE+p4jv0a/I7jGZhnXgH/zOJmlH1iwMOy2gzeu6U+Z+Ck8iWnyKBathtP0eY5To3g3ZUh5Bma6N1zRtN+Enkcum/SvKugHO+04bNOsU6qjcZ1MxVPQJyi0oKBcjBia3tjbwMIPg9tfII6oThb4lTYAIAFAEOU5q+btsyPz99HZ8t04WWtpic6x8J/KYllSWUcXxE6CyweeuhS58XqzMvawL4AfPZ2N5BrKHVyY0o+RmX03FJbbDpqnjagbK16snwUN59+xY6+1aYQvZmNWNQeG9kCB3+5WF9QinG1EyTZ5XNwfcuwlkF+rEOO8I+rgl9+nYOAnv+q3js9J3QpXnJtGGdG70DfP0yfDtmgHew0EA9UETHS6zJFyh3Cii/E6ELSxK3ZlcKRNyf8PM1W3lOFEna+x0Np7l8ID7TrJYuaMVi8En9brM+SRPTjJgbzJY9sX5wmcebtVnv/JWOyfzcfBNS8o1WAUEAixdM+tTtUHfg68OeTZ7diwtLGVNAO/hTFWe5NOQhTC2iKCQMv9SEBj3LEpuS0c50Bgwvcnff37jiiZ7P2fgbF8iLJ9QKsNyn3iOEj3eD8VKEj1EgFfNfFI7kbt/nbV54h/giSLRUt9uGRmqfM3DgN+YDM/KYRNksxceqU7kmgDub7IHsV/NEcQnDxDL/GqoJ9TkUHgu+3YGJ8/srQ+VKW8dZTPQPbHo+8XtO00yRV/0WVHPAUb6QX3SZ9dJTmRlZh/6XLMtFqg4Ia/aWfAteqC9Ros8A9N/GG/NLm5/1ZHcrhepzfrfXhyw6+oJYp7LhpGgNme0g90+cNqyZpdjJyf604HBE9zOSGmCcdSkpunysxVZVVVypdPK68G9m3dTBig9CcFCQigsT/V3/CweU2FJejvzygpbSavS4Ht5w89mufAuRVoUOlJw4uKkS5QgsZy4z5JssmkLycCGo3nPjsTz6PfhfHZL6/MaWS403gAN6UqeSJOlx6zn2tAuQsgNh7arW0s6Vp/EElpicB9bOV3ZCPA9x/s78h60y4iEzTUCOQx8uZn1Zuo4q0tuf+7LDQn3aZqyfXbSA+9SLEtlkDdNEQ1+QRUzDYDjlQ3XzOS5mu38ncedxzB4wrqEu99nDHlu5zC4iDBQU+VDLHxvpT0G9+JkfcK9FuCdx2mERR5ybldVVJWf5FIsaP4WdZFgkOc/bDWflbj7OFtJz+cLpIHSeS9lhY1P1Wq1Jt8LFd8Z/Hc9uFo2HuVFeZgivg1iQ1thjGXO1zu5XqEc5776lXQWGsqKAO88fH0kz+gE+N1e8aLFD4XqjmyUr42UGFTTmXMHmsG9yx1AzGhfiJZKutOBSfAg7YdBV68CNNDVhZ6Z+HMDuDt+mE9lGUp4HhYq9Bu5Yde8pMCw6VnuMvuFdOa1/c3g6hiWKXsO09A1zJn8YbiyDyZLd7lma4lDDYhPPnUzdzZiqkFzv7cwmifpSRkoxpGoW1iiBD76uqiEoIM9/05Gzad87jyctTkLta/SjvCplxVfyzQN6WLrjyog7ygfWP22/bIa/F6WHeJsxrDGvpEj5s4h5IWLWxwAQYp2LtSN6XLt5Ny30vqDJ4dpJLN0lHIffpI/n+aSORG4FB3RiuN8tRLsWNMM7h3PZOPs67YhL+u8BxTMP4wAFx1KkXVNYlYG9/Vv3uDBk23foTZPY7tyyqZ4Oz6cVx7+kM446tB3ZUGbe7rhVM8hXsV5Z5fbGa7wdxFyxucgTNm+74O8Z+iqbTWDu+3QwigmrZPFKSXh0Sj5VIT0Ojb3u/Tj1UXj5zNzB9d+nDWtdoR9XebC0hMo98EwHNIr9qBMlFwB8NmxrtuemXsmbTz8h3bTEbI07BcqjCYOKdqm1yJehQ9fQQ//IV3F6wzuDxoO/x2iEY7Pj1lrI/4pqUAp0GHqjwUEvpcDJoV2z8x9d31nhQuAb32K2B1jzfXnwXQHV/0S7+N6v8hETCmghN+csHbgNh9fvf0b+VTezzd7p15dSz9hUJwT02ROqIuOzDo4Ov/MzcSVJnC/zhFhL59moIaLxcxbhLoiIahwDRs/yUX2D316cOby99d/EDvVjrA7ZukQ5SrcFR/b61tkliETv5CjJM26lCaTl1cB7m1TLmjBvaAbddJKJfdV5HsNhEAuipjYNaPOe9gMriuWNh0lTqsW0a0GEHIr/l3Y+QbCeHUOxdHCG0du7JR7uvVxGun3aNq5Y0FhdfoMBj+xjJagSHYLPDIBNM+TP/nmkWZwb/4qjbPr1/YfS4tWnWYIp6Gp9KoBwj9boNybMnXe7zK4LzSDe8vXNGhRE2FW18FgKUMjIIe2Lq1GNUYVxrmAs2/8+Mb/CcF/AOweimVjWTesAAAAAElFTkSuQmCC",
  IY =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGwSURBVHgB7doxTgJBFIfxt8YDaGdJSUlpaWfJWbmB3oCSkhvoDXD+cQtChmX17Zt5Cd8vIRtWIztfYFlnxwwAAAAAAAAAAAC4YbAgp9PprWyeyuMwDMPBOijHsCqbTXkcyzHsLUBIwHLgr2XzfrZrFzWAiWNQuO3Zro9yDJ+2sAeL8XLxfDsOqIlKPHm2AFEBa++2JhGvxJOQ00hIwPJROZbNrvKj0IgT8XZR5+GwLxG5MaBFz4ktX+tcaEBpMbBe8SQ8oEQOsGc8aRJQIgbaO540CyhLDjhDPGkaUJYYeJZ40jygeAJkiiddAsp/QmSLJ90Cyl+CZIwnXQPKnDBZ40n3gDIVaNymjCcpAspExJoU8SRNQJkZMU08SRVQbkRMFU+i5gPvBh9hJ75EnLiMcXq0zmZeSFvld3R7wO76Qpp/5RyYTHBgOsuBCVUHpvQduKnkwG1NB26sO7C0w6HHgHq8Zsh0VhnI2nq8G37/9rVVYSsLEDUfuK7sa3NSvx5xYwGiAn5fPG97bVaPeLQAkedArZPWUt/9uOCyufFUosdXxPpoAAAAAAAAAAAAYJYfV2RDpEpxFGMAAAAASUVORK5CYII=",
  MY = {
    __name: "History",
    emits: "openCapacity",
    setup(t, { emit: e }) {
      const n = Y0("1");
      return {
        __sfc: !0,
        tabKey: n,
        onChangeTab: (l) => {
          n.value = l;
        },
        emits: e,
        openCapacity: (l) => {
          e("openCapacity", l);
        },
        ConstructionProcess: uY,
        DevelopmentCourse: CY,
        bgImg: NY,
      };
    },
  };
var PY = function () {
    var e = this,
      n = e._self._c,
      r = e._self._setupProxy;
    return n(
      "div",
      {
        staticClass:
          "w-95% h-850rpx position-absolute top-50% left-50% transform-translate--50% color-white",
        style: {
          backgroundImage: `url(${r.bgImg})`,
          backgroundSize: "100% 100%",
          zIndex: 2e3,
        },
        attrs: { id: "history" },
      },
      [
        n("div", { staticClass: "pb-30rpx relative" }, [
          n(
            "div",
            { staticClass: "tabs flex h-60rpx pl-32rpx pr-32rpx" },
            [
              n("img", {
                attrs: {
                  src: RY,
                  block: "",
                  "uno-w-44rpx": "",
                  "h-18rpx": "",
                  "mt-16rpx": "",
                  "mr-12rpx": "",
                },
              }),
              n(
                "a-tabs",
                {
                  staticClass: "flex-1",
                  attrs: { tabBarStyle: { color: "rgba(221, 242, 253, 1)" } },
                  on: { change: r.onChangeTab },
                },
                [
                  n("a-tab-pane", {
                    key: "1",
                    attrs: { tab: "广东省海上风电项目建设历程" },
                  }),
                  n("a-tab-pane", {
                    key: "2",
                    attrs: { tab: "广东院海上风电项目发展历程" },
                  }),
                ],
                1
              ),
              n("img", {
                attrs: {
                  src: IY,
                  block: "",
                  "w-40rpx": "",
                  "h-40rpx": "",
                  "mt-16rpx": "",
                  "ml-auto": "",
                  "cursor-pointer": "",
                },
                on: {
                  click: function (o) {
                    return e.$emit("close");
                  },
                },
              }),
            ],
            1
          ),
          n(
            "div",
            {
              staticClass:
                "tabs-content h-782rpx overflow-y-auto pl-32rpx pr-32rpx pt-16rpx pb-50rpx",
            },
            [
              r.tabKey === "1"
                ? n(r.ConstructionProcess, {
                    on: { openCapacity: r.openCapacity },
                  })
                : n(r.DevelopmentCourse, {
                    on: { openCapacity: r.openCapacity },
                  }),
            ],
            1
          ),
        ]),
      ]
    );
  },
  OY = [],
  LY = kp(MY, PY, OY, !1, null, "c88138e0");
const sq = LY.exports,
  lq = "" + new URL("total-power-CstCU_35.png", import.meta.url).href,
  cq = "" + new URL("wind-speed-DpqdsTDQ.png", import.meta.url).href,
  uq = "" + new URL("power-produce-CL-x0OfQ.png", import.meta.url).href,
  dq = "" + new URL("cumulative-power-CQzQxfjq.png", import.meta.url).href,
  hq = "" + new URL("coal_en-DJIBkmnt.png", import.meta.url).href,
  pq = "" + new URL("coal-CuOlz6Ht.png", import.meta.url).href,
  fq = "" + new URL("co2-BUuznBc3.png", import.meta.url).href,
  mq = "" + new URL("so2-C0y_RL9-.png", import.meta.url).href,
  gq = "" + new URL("pm-DMhQ4_uY.png", import.meta.url).href,
  vq =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAwZJREFUSEul1VvI33McB/DXx9lYzkxKLtSQosiVEsWFGzcUYRGGC022sVxoa4WUXIgL5iyHQnJhorUVJsUQJXIIYQeHHZwP+6734/tfz/7Pf9vzPD71XPx/z+/3eX8O7/f7U0ZEa21vHI8T8B3ew564AjfhAHyO1ViBD7C+qtpwuhp+0FqbiXNwLU7Ca1iKHzEfN3eAf7AFX2MlnseaqvptfM4dAFprs3AJrsExSJI3sQDf9uoXIkWMj197F4/ixaraMPjndoDW2pG4HnOxT38hSR/BY/gbN+KWEQB5fWsf20N4vKq+z8MxgNZaZpr5LsJ++BfL8SA+xC+YsRuAsVT4Avfi4araUq21PXAW7sGxvdJn+u+vBovrReyqg8FU0sn7fVerApC5L8HFPXkWtqiqwpLtMQWAfPMnnsbiAJyH+3EIspx5eHWYclMECMiXYV0A7sbV+AsvpbWqCiV3iGkAbBrbQ2vtHZyMPIiInq2q0PP/AiTHuwFYh0PxDS6tqrd2ou4Du9Cig7BuMvFDAH5GPv4Yl1dVZD8h+ohu6FTN+5OJzcMAc6oqFBsFEH86o9tIOohWdhXR2MYArMVh3Qouq6o3dvZVN8F9Ee1MMLYR320NwNs4pRtXjOzJqootTCtaa1H80Z2VawNwR/egbP2VMKmq1k8ne2stHnYBLuoFLwvA2V1oMbuNXeJxxN3NeNSeTsR9fSLR1a0BOLybXMSWpNHF/Kr6aCpdtNaO6LZ+FUKIWM28AGTbp3cHTAWZ/8u4E59MppPW2lHdDa7rbpwci/HUwK7DjJjdbd2T0knOYew6B2fzMFAvLAudjTm4sN+RvfAEbq+qdeMPTszuSkRMB/dxxZOy+Nc7jXO5Ysf7IyM5Fef3+x3q5m6/gLvwWQxz+GTGMlJJTmaOfjoJu5L09+5X+X1QV38SJnGqDkGewwOZ/8CNRx39VJfKcuHO7d3kWZIkIrB8F9A/+t8aLMvxr6qfxpNjAsBYhv8WH7GchtD4TBzX2ZFXkjy3I4xbhRjkp6MEug3A7CoBPfnUjQAAAABJRU5ErkJggg==",
  _q =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAaCAYAAABGiCfwAAAAAXNSR0IArs4c6QAABAhJREFUSEudlleInVUUhb9l7xULduxiL4iKJQmIIuqDiDX6YsEalEQQfVEUezcqgkZBJT6IiogPGrsQE0URib3EEiNGLLHH6Jbvcv7hzsydRObAneH+9/xnnb3X2mvvMM5VVScBC5O8/H+PyKCNVbUisCVwBHAssB+wNvANcEqSuVU1EzgB+BR4BngKeDPJ4rHAR4FV1RrAYcAZwCHAesAq7QDBjk8yu6q+BlYH1gd+Bb4AHgEeBhYkqZGgw8CqyoNPAy4AtgVWai/81Q40inMAbz8H+B7YAVih7fu5RXk98G6Sf/sBh8Cqah3gbOBiYLM+kC+Bl4DXgQ+Bd4ATgaMB+ToG2LtF6GtLgFnA5e7tj7AHVlWmScKvblz5+EfgSWAG8J6RJfEg9z/UgORto8arEe8MeKb7ngAuSfJVF12qyh/3AO4D9m2bFwF3tmffjsx/VXnAxCSfNHC5Oxi4Cti/nfETcCMwvRONYBsAlwLnA4pDPu4Gbkki6LBVVduZ1iSqdWg1BU9olzRC1/vyn+RFvwjmje4FdjFDwHPAeUk+G6MsVOmEJApp5EVWA84ErgQMQpU+kGRKB3YZMK0RbCRTgZlJlo4BJl9Gdv8Yv28NPOiF2uXnJ1HZvcgeB45qtTS3Fe2oqKrKtN3RVPg8cFY/+R1wVcmfqr4Q2KRRM0mnEextYE/g71aU05L8MCBFqusgYEPgu1Znk4Gd+j5y5fcdm5o/BvzMMROCqawtWn5vA25I8ssAsPnAus22TLEF/2c7zPrrPh8AHyWRr2FLsIXApoAANzUVjtpYVUamjekW/wCzLehBttScaFdAwSztzFoww9we+AO4RyUNMtM+zvYB3gKmjMGZdTsRuLUV/JIk23QCeRU4sMX7tOQmkZNxreZGlse1Le2CrdqBWWOnAmsCOsLkJJrsuFZVKSC5t/2sDCxKoip70j8d0KXlTa60qeuW1ZeWdYuqmtRsztQppBeSHNmB2SKmA4e3Q2wj1sizI1vE8kJtvOqHx7WopEMNaH+9yHT8k5U8sHFTmjzql3ZelbfcVVVm5qLW7ywR37N7T03yeQ/MP1VlTq9p3Emm4b8G3AwIvHiQxNu7ytuUndsar53bpcptwrO6DHVg/t+91ZmytWC9ma3+sXZD02sR+9xaMyP2Mj3QZmp7UmQuxwfVOCPJ711a+ju1BxwAXAEcCvTkCvzW7Eln0DNtQQJt3prlVm1O8X27hrPJ7YokiWPC0Bo5g/jCbhZsa/fK2EnL5TxhBzYy3xOwm1G6S80D7rJLD7K8QdOVz0yPncD07NX8UG464B5dDdw0LQA0hEdtmN34MFJVA+fGRrxp1KBtrrq9zdVBaK3WIZysNOc3gFeAeUmcW8Zc/wFLcX4qGPwXVgAAAABJRU5ErkJggg==",
  yq = "" + new URL("ear-3-BeQcIRp5.png", import.meta.url).href,
  xq =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAA7CAYAAADb7MIAAAAAAXNSR0IArs4c6QAACTxJREFUaEPtmgmw9uUYxq9LIYUWW0pKNbIn+1IzWTLSMoqiGPsSSalBDVlGVMOURJNGXxSFULapGWlCC6EURY2ikhqKL/S1d5vfcT/Hc57z/7/7l2Ome+ad7zvv+1+e67mve3+sGUpE3EfSAyU9WNKGkraQ9BxJz5a0nqS/SvpZfi6Q9AdJyyX90/bds1qKp31QRKwmaY0E8nhJT8/PkyStmb9xTXnXrZJuBoik30r6haRfSrpE0t8lrbB9yzTrGhtURNw3FwqQR6c2nilpc0mPzN9Wl7TKCAtDOysS5F8kXZQAL5R0RX5/s+3bR3jW/CVDQSWlWCQg1s3Fow2o9ZgK4P3GeXHPtXcUIJKulgQ4tAjYayuQA6naCaqh1BOSTs+Q9MSkFCBrSvXhCUmFbux20fIDKjoO2oty778kXZoAAfmbtEW0uIiqc6CSUkUb7D5aAASUQjtoaVRK3Zk7ykKuyoX8XNIf01ngNND0xulUeO4oWm6penEFslAVe7zdEcHCMepCqU3HpBQvY7cw/hsk/TqNHwfwe0mAY0fviIhV89l4yHrznlJtHhuIFx0mNVXxogXkJYDCAz20w0sNeuhtlTa4H0oAAloUD4YDGCgVzR+U1IYdOB1ozncAhObDBJqzJt65HFDw9v5D7rqrMuBrJP1KEpTCgPkbLaF6rptIGoeEF31qAuTfjSr2oO1BMkc/6MGO1FIbODuPBtAEHzRTKDWWqx0HbRU6oOpj0zzQ4pMlPSTX3OVwbukCheaI9mji/OQqMaRoA8D3qEQEDg0AbD6AsEGo+qzUJs6mSCcoDO71mcJg4HizJSXpcAACLb+QwAaCOlfSK2xfv6SQdCwmIh4h6auSth6mKRJOQBHBl7REBEkyoLYaBgo72vn/CNTXJG15L6ilzL+k372aWuAoImIDSW/q0NzJtsmgF0lEEE92an4gRBw6i1AxE01FBBkFiW8t+9s+tAfUDyS9uPntFNs7z4LWswJ1bIe2OheZWiI3bGVz2wT4qWVWoN4p6XPNai6z/bh2hRHxrQ7qnWb7ZVOjyQfMChTUg4KtrGObxHdOBmhpa9s/WmqgqG3+kWV5vbYFi+3R0tm268g/NbaZaCq10OUs9rb9mSFa2sn2qelF6UJNIpc2jCBNmj5ORUSXszjR9msS1Jckva5Z8UW2Kfag5nck7TABIsp3aE4tV2g+MqiBCW1EdDmLuUVHBM2U33XQc3fbJ0UEBR+1GbXRuHKG7W3qm8ah308lvbIvoY2ILmfBLtJqxjO2AfoyGjsE24jYTdKJDZqzJe3ffMfG7d58t5/twyYFhc3A/z91bWXuNi3jVnaV9JUOLe1p+6ik3tcl7dLcuKvtk5vF0gOhy1XLZrYv7wA1UulBT3t72/TpOiUiul6KS1+7ueHPkjaxfWt2jqAeXaIi3LMev4/LxdykXpti1+F6EeiynW0ahH2g0EhLj65r5ykTES+XdEpz0TG23z4JoAS1fj6ThkyRuR4FDUiaGUXQ0I62aUr2gXq3pCOGLAYtoKW5oNzjNUfFs6Xtc9qLI4KG6Pck0RovsgJQaASvVQTK4K16I39EPF8SBj5IPmL7owmIXh1Z/8NHRVFdd7VtZl2LJCLoJn1T0qOqH28EFC6cdlNp9TIY24uL+8qDAc6iPJs2NFq6LkHRnHzbCIDozLaOpJOi2fwk3h1TbRbtu8sB9Q0cQ9WlJQ2ilDjCNr2+PgpiI7XR19ddZ/uMEUAsuKSHott0PSsiiHW4/gNzEsOzCC1nAupgSe9ofgDoXrZvHHdhPTTZwDbt6V5J78iUpKYo3nL9LsZEBH6A1AzNMiJCcHrLAPVqSYfn1GGOLTkL2sE204SpJCIwYgJu6/na55IPtoF7me0392zUJpJIuRjJljkbm/A+QDHGIShSE9U/7sFN0zT9054+IOmgCXdmW9unt/dmn70oo3hulEE4ehWgUPen+KMafjEWOUnSvnVWPMnCIuInTV9u1MeQrm3VQ72HSfp8JsZlCsKwgjXPaYopHinOp6t4BWqoRy/hYtsTDwUi4sOjoqiuow1welemkcOCF0qiGiD4FiHe7gnNy3iU6eGpGcQKBRlgkaAeZBuPuCQkmXVkbnjREtNMJjUk4lcVULjmAySRKZRZFdohuyCzPn8abU27G2iH90cExxhgFY6N4UARNv1jKIHBdgHFv/TocOV4laItenQ0UN5jm0zjfyoRQXA+PqeMJVlAS3SndrHNjHl+8eRmaIu6Zu9msvg3SR+XdLTtoXPclYU6IkiFDklNlbjE61gfHvY42zi4/4JK98sYkvqE0rtoq9BwP0nfnUVndVzgEYG320fSu7IYLY9AS98neaiL2gWHQ3JCh2v/ZB7JKTcDjFnvvpJ+eE8CS0B4NT6cIqjXRNFIwD6vtvlFJ14iYh1JH5L01jwQUj+EAvL9kugXrLQh9vwL/zNUI7l+SwOIS7BxwsXx7Vr6jvFQilAvbdscnEJjGOMncCAry9UnY3BY78VNV3lpwctxus9KOqwrOegDVbwhvQWO3bQnwtglWmUMka+dNpWqbSwiOE73orQhKtr2cAhJ6xclHVxKm9ZGe0+RZb1CEUZM4OEtMB5OIUm6cs4M0ilKCZLaN0qihwj12uM8N0n6Ml6wrzG0yPu1iBMYLTFcKXPV9mAUcYwp/rczE2dOddM4gTrrIgIp9dlrM7FuD6uwNDLwZZKOHBYzRznvxzWk9x/MYrKrMKQbBDj6BQCkv7G8xI2ezaJPyAm17XI6QmBdq8PdczSIs3/Y+Am2iUsDZSioyhMR/Oj8vKGHGlxKGc9LmfAzcDsvexO0itEq9sGmcPTupXn+gQklALvWwn08g2T7rFGD/8igMjjz8pdkGU1fo6+cZ3fJx+gkkWhSRqBJNP68pBha6Ws/U5bT36C4xGavGccZjQUqgZEZs7sMAYpBd9lAUXI51MhCyyHivvdyLS0EHNBxks6dJGyMDaqiIw3QzTIXY1iNffDdJM8kkENbOlsUemdx3HvSY92TLGCBkUYElKQew+CxE/5PrBl2hpC8jbAARX+c1QCgbpg2DZsaVKW5cmztuZJekMfW2iPdhYqAwUOemVS7Mr3lxIcg652eGagKHDbHoIDex9Oqw4cEU1pgtI9xHIBCK/NDtGGuetTf/w1wcAfs7BfWGQAAAABJRU5ErkJggg==",
  bq =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKTSURBVHgB7ZiBddowEIbPfR2ATBB3grYTlBGyQekEYQPSCdJMAJ0g3QAyAXQCmQlgg8v96Ax+Ap4tyY7Me/7eu2fZYOtOujudRDQwMNAJzLwUmTrPHqjvQEmRNZ9Ae65XI/Io8qRtyDdKiSr8UyTX+5GOflPGlApVtspMn782UHwHwyklFwwwOhumgQG1roP/cJcuJh//w2GYK9/DgEz0OnIGZkltoh2FsHNHVe7HIs98mrlnfW6cd+fa75hiYTu9ocCIKdtgN3rvsrzy/GggyCgC+dBaLinS4F7kS5Zl+08UiE7jiNKAfn+gEWyAMBfJKR2HmY8x4B/1gM/kibgOpg/WTykthxnwDmKkMbLu0wfuvAxgm79fKa3vVyl8XQi1Tk79AC68bTwD6vs76gcLWQN+iU73MVkoFYXIXzTEiK2vC2EFTLV4lXzHClzeNDYAL6kbpQAKryBV5b3g8NK5jrJgW/NpJ4f2RK8zjtkTsK3LDcdh+PI3ZmxLZPyWa3/Yoj6Wfdfpl9Uoj5zfxklCIfJbBGXwhqw7QDm4AwIyF9dYUZtwXL3vgpOIUXVE3ftQ6oK4razz5gZfcDA6nBnA9jDqK9kVN1T5quEbUXZDHXFpBu5FJhQHSm1kDhjRadV6NIBtlQnlcwoHIw3ltyIvInsZ/YI65JCF2ObZtd+rh8zyRHa20IbyULzo0mXOYHukYdiPJdv8Xc0qDyofulrDheqyAX6HW+QiC7Ij/Ob+SZ6l2WLKiOV8+TB2p/k7pz7Ddjl3FTec+ti7IXChaqlQkA3G/x8aiBHAgGrQwY9XIncIxrZWy05x/B+uk/bM3pcrMXAT/n+Ez0+BZ3QjlJv6Bd0oZS20IrtQQRDILzQwMHATvAOlGqZgmEmn+QAAAABJRU5ErkJggg==",
  Eq =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGzSURBVHgB7ZnbcYQwDEVFZgvYDtYlpAPSQWpJBZAKSAeZdJQOli0hFSjyrD5I1oDkpz44Mx4YI9v3gl8AwMFBEh0UAhHPdHCUzsIic9d1M1iAxDtKV9QzggVIyCfGc9G09QT2KNatxSR0oQGUFHVLgvpA9hul10D+SIP4PVCHo8OZrn1Da/wg1dx5yv9YxEzQkgjxDhMHeDa04rnMSyC+h9rEiOdy7Q3EiueybQ2kiOfy7Qykiuc62hjIIZ7rqW8gl3iuq66BnOK5vnoGcovnOusYKCGe6y1vAOMXKYf3TRo0M5AgflluhBYGEu/8fy5Q0wBW2h5IY1WvlHh/5CGhwZeRGogNWBTvERmwKt6za8CyeM+mAa14FMzvuVk1ECHex199wtZf2LDQC3iVaZS7gLbPO2FedqTTqIkBG+LBAH/iHhdZZsV7TqFML5i60hedIp3fwDCntQtmfjbsIFnIqs/tGiQLmY25fYWthczB3+l0wFYfVzfYegJOmNcUi7+YVGwZmAN5P4rYW0Kctv0w1OenxT5k2okd9vZMmjht+1uVPPskjHWSgS6N49he2v7BQQS/7YYdT11eh7AAAAAASUVORK5CYII=",
  Aq = "" + new URL("capacity-0-9nTFrLt_.png", import.meta.url).href,
  Tq = "" + new URL("capacity-1-XiR5lqV1.png", import.meta.url).href,
  Sq = "" + new URL("capacity-2-Cz2v7S28.png", import.meta.url).href,
  wq =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAjBJREFUOE9VkstOU1EUhr+1z6UXTiu3cpO2WuMT4As4IZEBYVKjiSHGiQ/gxDhy4tAHkGjiGAYEYzBxohNnGuOYIFYQoQdo6O20PefsbQqhwX+0krX+laz1f8Illc2qG2FnhIQn6JSN0iHStnAaPnbrs9yOLsbloiib1RQkpxRuFsLL+4iwTUS35tI7XJO7vX7zzPjQfEq2qM8qJKuxO2BOukStEEdSkBXCUXAsgzmpsLf/TR6HMmdeOUVmZ1xkNEY1oP6niac9mlnIxj6JeoognSbKKywnwt5fZ/5IFs1GZgj3eoQ2HfR2kkAJ6SVQi6DbCuvtFr+/lChmIC446FZIUJH7ZmNSo6Y0puaT2c/RWRDMS4O5JqCBHzF6+RfT2yWqNxWxowm2pWzeFRQy0sP9a3PaBu+pYJ4Ayf79BnMMPPIZ2pwkKELsaYJduWc2ZmLsCdC+z9FxjtyyIC+A8XMjW2A9+Enle4lCSUNCYVdkyawPJ7CLPaRXw9/JMT4mqGcg82AC4HUC+00HVxTNGxF021g7Mme+OnmqhQTRlQ7a3+PwoMRIJiY9rAl1jF1tcKTHGM+D5Sni6hrBwVmOd8xmNosugO1qerUkiWqH07CJJx5OEqIpRTikcetN9O4HWeiek2OQMqtZTWpaoZIKbfrxgIuNiCaWEGm0OTr4KMutATn/Y5caBdvrPwH6dKnARdczXD1ZkVsDFgesXjJbgOWTUykCk2dCr/A+Rp73Mx3oH0oJ7/yBxDzSAAAAAElFTkSuQmCC",
  Cq =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAYAAACZ3F9/AAAAAXNSR0IArs4c6QAAAglJREFUKFNNkk1LVGEUx3/neZ57Z3wbi5xZ9KLZQEEFRplCtDCmjBbtElq26WNEH0EXfYM+QLQNBMOFLUqKFEvNlyJL0HFMnXHm3ueeuI4TndU5nP/h8P/xF45LFcPaSAEfFPEUMHSixIiWidkgiVflytR+Sy9pozpmWd/tJeIqQgeqviVAEkM6OfmJieekf6qS7kQV4ctIH6G7DpIh4jtOlqg3qmSdBSngk0sgOZz+YM/OysCbA9H5kU5cMIyjgGeBtv2v7LkThLaDRiPCSBlrspjsTVRyaPSZ3T+Logulizi5BlLBV2dwQR+eCYQiaA3lJRq/IBOcomGHwWzRVZ4RXRi9hSRnsX6eRDdBxxF5nLo68ikso4wRsYyzd3FiieO3osulO6jpwct7OKhj3CuQoX9wYBvPEzrzk9TKJUTaierToiv3h/D+PCqLHIbrZA+egz4FaU95o8yR+Ee4rt9odA9RoVafFF0sXSCRQayp4RrTqOkmSp4h3AZ2UCYIeU3k+jFmAPwmmeo70Y2H7RzWB/H+HN6s4aNPGJshlA4CiXHlCrWTPajcQDVA7CzF3GozAEsP8miU+urGaBlhhaSxQxKEBMEZfNLXPGIFF3+U/qnD4+QgfBvNo8lloNAEIwoqR57Ueoxfp60yL6c/VJuw/6ujMIS2F0wefA6RCGGbxP/CsZV+asn/AhXP4yK7XfV3AAAAAElFTkSuQmCC",
  Nq =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAgVJREFUOE9dk89LlGEQxz/zPM+7u7prJroZlWUdIqOCMsNDl37eg7KzQfQ3dAi6Bx6CqA5u1KV7x4gKgojyYtlBSnElFERZK3J3fZ/nmXh3kaQ5DTPfYZgvnxG2xwMtUWCvM+xS6JKIF2E1TVkmR41xaWzJpZ2o8JCyyzOkSn+rZNB2CwOEIFTZ5Cu3ZCMrtwcrWraBERw7idRCZAFHDSXBM2At+1BcMMwhTGebhWdadJFhDQwIVD1MtwYCJSClh3X+0G8jw4ANwhSLLAgVPWSV0yj1YHmH0mUjt8VwDmFFlXuhxEt+cdgajgss+RIfJXmqZ6JnMMAsTRZdgTuq3BRpbYzAtBeus8mKTbiU3R42eC2uoudV6A3wiQapy/MCOLXlnsIayo3geWUtFxA6QsJbcZN6VmFPMHwmz6qt80jgCtJyM7N2PkSu0uSb7eQigg2eN8ITPWIjJ0RZ8zk+JA2OqmNCYb8IDSLPfZ4JGvRYw6jAmk95L0xqlzOMqtIXhBmKfOcnvVh2YGjSZBVIrGMEpTvADIFZ4a4aBjloIyczQYB5UubooE6KQSjbyBCWbgn88IGpDII2AI81IcegjRxDKCB4hEhsAWJbpAhLHr4wLuv/yMmya2q5TF+S40BMKQOdKEEMNW9YpkiVMan/x+o20u9rniI5DJbfRHaTApuMSdj+D38BXtDOi1tUtgwAAAAASUVORK5CYII=",
  Rq =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAYAAAArK+5dAAAAAXNSR0IArs4c6QAAA09JREFUSEut1VnIp2MYBvDfbd8bsmcnSyhkPZCSJGXLYLIvJYakqLGcWE+MAyGGGMmSEpKlJOHAgSQk61DIZ5+sWcaMR9fX8/96h/83vpm8R//e//M+131d931dd/nH01orbIlDcDj2w9ZYF3/iW7yHl/ACPquqvB/75LKpp7W2JvbHuTgSm/SLVx8ew+/4Ga/hfjxXVT+NQ5gCaK2tg+NxOfbC2ljWL/q1Vx+gnNtw8P8E7sGCqgq75Z5JgF75CbgeuyDvv8MreBHvdqCA7oBDcQS2wRr97B24paq+HyJU1zyyLMC+wcM7OYxn8UNVRZLJpxcTBvnm4i5lgL/A1Xi4qpaMzgdgC1yHs5Ae5PIr0sCq+mO65rXWVsNunfWxncmrOLuqPhgCHINbO/WvcWWvYtrLB2wi5QG4G3t3Ga/t/fgt58Igl5/Tm/cU5lbVV9NVPmas18OlmIcNMlE4r6q+HAGkkQchYxYNF65ImnHArbWweAQ74WOcVFVvjAA+xXb4HKdX1cszrX4gVYz4EA7DN2GQAamqFonyYjN8hNlV9dYqAOT7u5BmZ0wvwaNVtTQA0SrR8EkHeH0VADKJMdvRWIyL8HhVLQtAciXjFibn4+mq+mtlQFprO6binlspOFLHoJNT9CSO6lFwG26sql9mCtD9kFGPUcMkEp9cVYtGAJfhKmyMN2O4qnp7JQA2x804pX+T8Js3ioww2KejH9hT8j7cMJrjFQG11hLhZ/QkSPWJiwvxTPQfMcihGC0O3LRPQSbiTkyMDo4xWBgf172zM5I/D0SNYaqO0jRTlCQ9red/TPc8HuyZn7heiuRPgi2JO7vLshUyFDHs3CRv5n8qiwZm2RXX9Flev1+YyE5Uf9iZhW3iOvsi5kpMZJsl5Ob3M4uGUTNcOPmdjxPBaVjMs1aP7wRfNA2DvMviSdUxVZguxJ64oO+PTGKSYXKxLPe01qJtLH8iDsasLksuD/VUHMkS648hAZkMitF274maQbmpqib+BdCXSioMUBjtge0R2dLIJO37SOYvTjC21rLZEpSnYiP82Hf17WMBhpT6BossQwZLho3sWzEgiewz+86OfPf+J8BMDdeZb9tNOwdZXvP/V4AOkj5kXJMGT/wNoYw2RJFU+VEAAAAASUVORK5CYII=",
  Iq =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAtdJREFUeF7tmN+nFVEUx9feM0/9Aefs2XPuY/TYW8/Rv9CcIiVSEleJyxURSZeUlKiIRNJ1iZtIUSIiSvSDFHHOzJyIREScWRn2w5W5Z+9r7pq9zezzetZs6/NZ6ztn5jDo+Id1nB+8AL8BHTfgI9DxBfA3QR8BH4GOG/AR6PgCuPsrkGXZNkTcowb0JI7jlxTDcjICeZ7vRsT7a4EZY0kURcubLcE5AVXwCnpZSpm0WsAMeOCczwshrrRWwCz4EjoMw629Xu9LKwVo4KcAMJRSrmw2fHme9XuABv6vgn9AAW9dgAb+D+d8KIRYpYK3KkAD/5sxNoyi6BElvDUBs+AZY78Qscz8Y2p4KwJmwSPizzAMk36//7QJ+MYFaNb+h3rae9YUfKMCNPDfASCRUr5oEr4xAZq1z0p4qpcdnVDy5wDN5Eec80QI8UrXKNX3pAI08N9U5l9TwZmcSyZAA/9VZf6NSZOUNSQCxuPxds7523Ua/1wURTIYDN5RgpmeTSIgy7JLAHC8oolPKvPvTRukriMRkKbpEmNs4f/mGWMfytWPougjNZjp+SQCRqPRjiAIKu/srkkgEVDaz/P8NCKeqZqESxLIBJTgWZadAoCzLksgFaAkLALAOVclkAtQcVhAxCUXJTQiQEk4iYgXXJPQmAAVhxMAcNElCY0KUBLmAeCyKxIaF6DicAwRr7ogwYoAJeEoIl6zLcGaABWHwwBw3aYEqwKUhEMAcNOWBOsCVBwOIuItGxKcEKAk7EfE2+tJCIJgV6/Xm5i+5ZnWOSNAxWEfANypah4RF+M4Pm8KZlrnlICy6clksrcoirsVADeklEdMwUzrnBNQNp6m6ZAxdm8txHQ63Tk3N/fcFMy0zkkBZfPqf8UDALCFc74qhHhoCrWROmcFbASiTq0XUMdeG671G9CGKdZh8BtQx14brvUb0IYp1mHwG1DHXhuu9RvQhinWYfgHgvc4UD277PYAAAAASUVORK5CYII=",
  Mq =
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAArtJREFUeF7t2tGnFUEcwPGZ2YiIiOP8fntOxCUiSqSIEhER0U1FIipSUuImEZG4pERSIhKp+wf0lJ576yH3pd7Ozszav2HPTIbzcN3OcB/2tzN7d84fMPb7md/sOfYsZz3/8J73swSQJqDnAukI9HwA0k0wHYF0BHoukI5AzweA7ltgMpkcz7LsohDitxDi22Aw+BsjNskR0FovWmu/rg3mnJ8HgJXYEEgAlFIufnF9bIwIJABlWd42xryat9uxIZAAVFW1UNf1H9+4x4RAAuDC590HYrwnkAF0BYEUoAsI5ACxI7QCEDNCawCxIrQKECNC6wCxIQQBiAkhGEAsCEEBYkAIDhAaIQqAjSAYYw6MRqNfTT9PiAZgAwgvEfHupgYoiuKcEMI9TPlvY6y1y3meL21aAKXUWcaYi98yL3I6nR4ej8c/NyWAlPKMi+ecb/U8RXoMAE+ajnfrBb8HaK1Pzx6gbvMEPkLEpxTxwQGUUqdmY7/dE/gQEZ9RxQcFkFKe5Jy7M7/DM/ZLALBMGR8MoCzLE8YYF7/TE38fAJ5TxwcB0Fofc2NvrR14Au8h4os24lsHkFIe5Zy7f4eGnsA7iDj3/wQqkNa+BYqiOOLiOee5Z+xvAcBrqlDfuq0AaK0PWWvdzu/yxN8EgDdtx7dyBJRSBxljLn63J/AGIr4LEU8OUBTF/izLVqy1C57Aa4j4PlQ8KUBZlvuMMW7n93jG/ioAfAgZTwZQVdWwruvvjLG9nvgrAPAxdDwZgJTyAefc9xP2MiJ+iiGeDEAp9ZYxdn19pBDi0nA4/BxLPBnA7P2gH2tDrbUX8jz/ElM8GYBbePZ+gHtXaNU95QGA1djiSQFijJ17Q+7KhVJdZys/hakuvol1E0ATil1eI01Al3eviWtPE9CEYpfXSBPQ5d1r4trTBDSh2OU1/gG3mRpQ/2Ec+QAAAABJRU5ErkJggg==";
export {
  Aq as A,
  Tq as B,
  X1 as C,
  Sq as D,
  wq as E,
  Cq as F,
  Nq as G,
  sq as H,
  Mq as I,
  _s as J,
  LC as K,
  xp as L,
  Aj as M,
  m3 as N,
  mt as O,
  $g as P,
  OL as Q,
  PE as R,
  OG as S,
  oq as T,
  kY as U,
  vx as V,
  IE as W,
  ma as X,
  Ka as Y,
  Iq as _,
  eq as a,
  qY as b,
  qg as c,
  tq as d,
  Rq as e,
  iq as f,
  aq as g,
  lq as h,
  rq as i,
  dq as j,
  hq as k,
  dS as l,
  Qf as m,
  pq as n,
  fq as o,
  uq as p,
  gq as q,
  vq as r,
  mq as s,
  nq as t,
  _q as u,
  yq as v,
  cq as w,
  xq as x,
  bq as y,
  Eq as z,
};
